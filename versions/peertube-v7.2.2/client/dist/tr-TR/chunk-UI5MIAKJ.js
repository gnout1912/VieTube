import{$ as _,$d as l,Cb as o,Cf as st,Dc as x,F as V,Ha as d,He as g,Jc as v,La as Z,Ld as a,N as $,Oc as J,P as C,Pc as Q,Pf as U,Q as S,Qf as rt,S as W,Sa as M,Se as nt,Ta as z,Uf as k,Wa as X,Y as H,Ya as f,Z as G,Zd as tt,_ as j,ae as et,b as B,c as O,db as w,eb as u,fb as h,fc as L,gc as R,hg as at,ig as ot,j as P,jg as lt,la as q,n as p,nb as A,o as F,ob as D,pb as m,qa as Y,qb as T,rb as E,t as I,ye as it,za as K}from"./chunk-F7FAPFPY.js";import{a as c,b}from"./chunk-AI7IVZV2.js";function dt(i,t){if(i&1&&(A(0,"div",3),m(1,"div",4),D()),i&2){let e=o(2);d(),h("width",e.diameter)("height",e.diameter)}}function ut(i,t){if(i&1&&m(0,"div",5),i&2){let e=o().ngIf,n=o();h("background",n.color)("height",n.height)("width",e+"%")}}function ht(i,t){if(i&1&&(T(0),f(1,dt,2,4,"div",1)(2,ut,1,6,"div",2),E()),i&2){let e=o();d(),u("ngIf",e.includeSpinner),d(),u("ngIf",e.includeBar)}}function pt(i,t){if(i&1&&(A(0,"div",3),m(1,"div",4),D()),i&2){let e=o(2);d(),h("width",e.diameter)("height",e.diameter)}}function gt(i,t){if(i&1&&m(0,"div",5),i&2){let e=o().ngIf,n=o();h("background",n.color)("height",n.height)("width",e+"%")}}function ft(i,t){if(i&1&&(T(0),f(1,pt,2,4,"div",1)(2,gt,1,6,"div",2),E()),i&2){let e=o();d(),u("ngIf",e.includeSpinner),d(),u("ngIf",e.includeBar)}}var mt="[_nghost-%COMP%]{position:relative;display:block;pointer-events:none}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{transition:.35s linear all;display:block;position:absolute;top:5px;left:0}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]   .ngx-spinner-icon[_ngcontent-%COMP%]{width:14px;height:14px;border:solid 2px transparent;border-top-color:inherit;border-left-color:inherit;border-radius:50%;animation:_ngcontent-%COMP%_loading-bar-spinner .4s linear infinite}[_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{transition:width .35s;position:absolute;top:0;left:0;width:100%;height:2px;border-bottom-right-radius:1px;border-top-right-radius:1px}[dir=rtl]   [_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{right:0;left:unset}[fixed=true][_nghost-%COMP%]{z-index:10002}[fixed=true][_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{position:fixed}[fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{position:fixed;top:10px;left:10px}[dir=rtl]   [fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{right:10px;left:unset}@keyframes _ngcontent-%COMP%_loading-bar-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}",N=class{constructor(t={}){this.config=t,this.state={action:null,value:0,initialValue:0},this.requests=null,this.disabled=!1,this.stream$=new O,this._value$=null,this.timer$=e=>{let n=P(e);switch(e.action){case"start":case"increment":case"set":{e.action==="start"&&this.config.latencyThreshold===0&&e.value===0&&(e.value=e.initialValue),this.requests>0&&(n=I(this.config.latencyThreshold,250).pipe(p(s=>b(c({},e),{value:s===0?this.state.value||e.initialValue:this._increment()}))));break}case"complete":case"stop":{n=e.value===0?P(c({},e)):I(0,500).pipe(V(2),p(s=>({value:s===0?100:0})));break}}return n.pipe(p(s=>b(c({},s),{action:"set"})),W(s=>this.next(s,!1)))},this.config=c({latencyThreshold:0},t)}get value$(){return this._value$?this._value$:this._value$=this.stream$.pipe(C(this.state),S(t=>this.timer$(t)),$(),p(t=>t.value))}start(t=2){this.disabled||this.next({action:"start",initialValue:t})}stop(){this.next({action:"stop"})}complete(){this.next({action:"complete"})}disable(){this.disabled=!0}set(t){this.next({action:"set",value:t})}increment(t=0){this.next({action:"increment",value:t})}next(t,e=!0){switch(t.action){case"start":this.requests=(this.requests||0)+1;break;case"complete":if(this.requests=(this.requests||1)-1,this.requests>0)return;break;case"stop":this.requests=0;break;case"increment":t.value=this._increment(t.value);break}this.state=c(b(c({},this.state),{action:null}),t),e&&this.stream$.next(this.state)}_increment(t=0){let e=this.state.value;return e>=99&&(t=0),t===0&&(e>=0&&e<25?t=Math.random()*3+3:e>=25&&e<65?t=Math.random()*3:e>=65&&e<90?t=Math.random()*2:e>=90&&e<99?t=.5:t=0),t+e}},bt=new j("LOADING_BAR_CONFIG");var _t=(()=>{let t=class t{get progress$(){return this.value$}constructor(n,s={},r){this.platformId=n,this.config=s,this.zone=r,this.refs={},this.streams$=new O,this.value$=this.streams$.pipe(C(null),S(()=>F(Object.keys(this.refs).map(y=>this.refs[y].value$))),xt(this.zone),p(y=>Math.max(0,...y)))}start(n=2){this.useRef().start(n)}set(n){this.useRef().set(n)}increment(n){this.useRef().increment(n)}complete(){this.useRef().complete()}stop(){this.useRef().stop()}useRef(n="default"){return this.refs[n]||(this.refs[n]=new N(this.config),this.streams$.next(),Q(this.platformId)||this.refs[n].disable()),this.refs[n]}};t.\u0275fac=function(s){return new(s||t)(_(K),_(bt,8),_(Y,8))},t.\u0275prov=H({token:t,factory:t.\u0275fac,providedIn:"root"});let i=t;return i})();function xt(i){return i?t=>new B(e=>t.subscribe(n=>i.run(()=>e.next(n)),n=>i.run(()=>e.error(n)),()=>i.run(()=>e.complete()))):t=>t}var vt=(()=>{let t=class t{get value$(){return this.ref?this.loader.useRef(this.ref).value$:this.loader.value$}constructor(n){this.loader=n,this.includeSpinner=!0,this.includeBar=!0,this.fixed=!0,this.color="#29d"}};t.\u0275fac=function(s){return new(s||t)(Z(_t))},t.\u0275cmp=M({type:t,selectors:[["ngx-loading-bar"]],hostVars:3,hostBindings:function(s,r){s&2&&(w("fixed",r.fixed),h("color",r.color))},inputs:{includeSpinner:"includeSpinner",includeBar:"includeBar",fixed:"fixed",color:"color",value:"value",ref:"ref",height:"height",diameter:"diameter"},decls:2,vars:3,consts:[[4,"ngIf"],["class","ngx-spinner",4,"ngIf"],["class","ngx-bar",3,"background","height","width",4,"ngIf"],[1,"ngx-spinner"],[1,"ngx-spinner-icon"],[1,"ngx-bar"]],template:function(s,r){s&1&&(f(0,ht,3,2,"ng-container",0),L(1,"async")),s&2&&u("ngIf",r.value!=null?r.value:R(1,1,r.value$))},dependencies:[v,x],styles:["[_nghost-%COMP%]{position:relative;display:block;pointer-events:none}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{transition:.35s linear all;display:block;position:absolute;top:5px;left:0}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]   .ngx-spinner-icon[_ngcontent-%COMP%]{width:14px;height:14px;border:solid 2px transparent;border-top-color:inherit;border-left-color:inherit;border-radius:50%;animation:_ngcontent-%COMP%_loading-bar-spinner .4s linear infinite}[_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{transition:width .35s;position:absolute;top:0;left:0;width:100%;height:2px;border-bottom-right-radius:1px;border-top-right-radius:1px}[dir=rtl]   [_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{right:0;left:unset}[fixed=true][_nghost-%COMP%]{z-index:10002}[fixed=true][_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{position:fixed}[fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{position:fixed;top:10px;left:10px}[dir=rtl]   [fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{right:10px;left:unset}@keyframes _ngcontent-%COMP%_loading-bar-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"],changeDetection:0});let i=t;return i})(),Ut=(()=>{let t=class t extends vt{};t.\u0275fac=(()=>{let n;return function(r){return(n||(n=q(t)))(r||t)}})(),t.\u0275cmp=M({type:t,selectors:[["ngx-loading-bar"]],hostVars:3,hostBindings:function(s,r){s&2&&(w("fixed",r.fixed),h("color",r.color))},standalone:!1,features:[X],decls:2,vars:3,consts:[[4,"ngIf"],["class","ngx-spinner",4,"ngIf"],["class","ngx-bar",3,"background","height","width",4,"ngIf"],[1,"ngx-spinner"],[1,"ngx-spinner-icon"],[1,"ngx-bar"]],template:function(s,r){s&1&&(f(0,ft,3,2,"ng-container",0),L(1,"async")),s&2&&u("ngIf",r.value!=null?r.value:R(1,1,r.value$))},dependencies:[x,v],styles:[mt],changeDetection:0});let i=t;return i})(),kt=(()=>{let t=class t{};t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=z({type:t}),t.\u0275inj=G({imports:[J]});let i=t;return i})();var ct=class i{byVideoChannel;byAccount;createdAt;updatedAt;publishedAt;originallyPublishedAt;category;licence;language;privacy;truncatedDescription;description;duration;durationLabel;id;uuid;shortUUID;isLocal;name;serverHost;thumbnailPath;thumbnailUrl;aspectRatio;isLive;previewPath;previewUrl;embedPath;embedUrl;url;views;viewers;likes;dislikes;nsfw;nsfwFlags;nsfwSummary;originInstanceUrl;originInstanceHost;waitTranscoding;state;scheduledUpdate;blacklisted;blacklistedReason;blockedOwner;blockedServer;account;channel;userHistory;pluginData;streamingPlaylists;files;videoSource;automaticTags;comments;static buildWatchUrl(t){return it({shortUUID:t.shortUUID||t.uuid})}static buildUpdateUrl(t){return"/videos/manage/"+(t.shortUUID||t.uuid)}static buildDurationLabel(t){return st(t.duration)}constructor(t,e={}){this.createdAt=new Date(t.createdAt.toString()),this.publishedAt=new Date(t.publishedAt.toString()),this.category=t.category,this.licence=t.licence,this.language=t.language,this.privacy=t.privacy,this.waitTranscoding=t.waitTranscoding,this.state=t.state,this.truncatedDescription=t.truncatedDescription,this.description=t.description,this.isLive=t.isLive,this.duration=t.duration,this.durationLabel=i.buildDurationLabel(this),this.id=t.id,this.uuid=t.uuid,this.shortUUID=t.shortUUID,this.isLocal=t.isLocal,this.name=t.name,this.thumbnailPath=t.thumbnailPath,this.thumbnailUrl=this.thumbnailPath?t.thumbnailUrl||U()+t.thumbnailPath:null,this.previewPath=t.previewPath,this.previewUrl=this.previewPath?t.previewUrl||U()+t.previewPath:null,this.embedPath=t.embedPath,this.embedUrl=t.embedUrl||rt()+t.embedPath,this.url=t.url,this.views=t.views,this.viewers=t.viewers,this.likes=t.likes,this.dislikes=t.dislikes,this.nsfw=t.nsfw,this.nsfwFlags=t.nsfwFlags,this.nsfwSummary=t.nsfwSummary,this.account=t.account,this.channel=t.channel,this.byAccount=k.CREATE_BY_STRING(t.account.name,t.account.host),this.byVideoChannel=k.CREATE_BY_STRING(t.channel.name,t.channel.host),this.category.label=g(this.category.label,e),this.licence.label=g(this.licence.label,e),this.language.label=g(this.language.label,e),this.privacy.label=g(this.privacy.label,e),this.scheduledUpdate=t.scheduledUpdate,this.originallyPublishedAt=t.originallyPublishedAt?new Date(t.originallyPublishedAt.toString()):null,this.state&&(this.state.label=g(this.state.label,e)),this.blacklisted=t.blacklisted,this.blacklistedReason=t.blacklistedReason,this.blockedOwner=t.blockedOwner,this.blockedServer=t.blockedServer,this.streamingPlaylists=t.streamingPlaylists,this.files=t.files,this.videoSource=t.videoSource,this.userHistory=t.userHistory,this.originInstanceHost=this.account.host,this.originInstanceUrl="https://"+this.originInstanceHost,this.pluginData=t.pluginData,this.aspectRatio=t.aspectRatio,this.automaticTags=t.automaticTags,this.comments=t.comments}isNSFWWarnedForUser(t,e){return at(this,e,t)}isNSFWBlurForUser(t,e){return ot(this,e,t)}isNSFWHiddenForUser(t,e){return lt(this,e,t)}isNSFWHiddenOrWarned(t,e){return this.isNSFWHiddenForUser(t,e)||this.isNSFWWarnedForUser(t,e)}isRemovableBy(t){return t&&this.isLocal===!0&&(this.account.name===t.username||t.hasRight(a.REMOVE_ANY_VIDEO))}isBlockableBy(t){return this.blacklisted!==!0&&t&&t.hasRight(a.MANAGE_VIDEO_BLACKLIST)===!0}isUnblockableBy(t){return this.blacklisted===!0&&t&&t.hasRight(a.MANAGE_VIDEO_BLACKLIST)===!0}isUpdatableBy(t){return t&&this.isLocal===!0&&(this.account.name===t.username||t.hasRight(a.UPDATE_ANY_VIDEO))}isEditableBy(t,e){return e&&this.state?.id===l.PUBLISHED&&this.isUpdatableBy(t)}isOwner(t){return t&&this.isLocal===!0&&this.account.name===t.username}hasSeeAllVideosRight(t){return t?.hasRight(a.SEE_ALL_VIDEOS)}isOwnerOrHasSeeAllVideosRight(t){return this.isOwner(t)||this.hasSeeAllVideosRight(t)}canRemoveOneFile(t){return this.isLocal&&t&&t.hasRight(a.MANAGE_VIDEO_FILES)&&this.state.id!==l.TO_TRANSCODE&&nt(this).length>1}canRemoveAllHLSOrWebFiles(t){return this.isLocal&&t&&t.hasRight(a.MANAGE_VIDEO_FILES)&&this.state.id!==l.TO_TRANSCODE&&this.hasHLS()&&this.hasWebVideos()}canRunTranscoding(t){return this.isLocal&&!this.isLive&&t?.hasRight(a.RUN_VIDEO_TRANSCODING)&&this.state?.id&&!this.transcodingAndTranscriptionIncompatibleStates().has(this.state.id)}canGenerateTranscription(t,e){return e&&this.isLocal&&!this.isLive&&t.hasRight(a.UPDATE_ANY_VIDEO)&&this.state?.id&&!this.transcodingAndTranscriptionIncompatibleStates().has(this.state.id)}transcodingAndTranscriptionIncompatibleStates(){return new Set([l.TO_IMPORT,l.TO_EDIT,l.TO_MOVE_TO_EXTERNAL_STORAGE,l.TO_MOVE_TO_FILE_SYSTEM])}hasHLS(){return this.streamingPlaylists?.some(t=>t.type===et.HLS)}hasWebVideos(){return this.files&&this.files.length!==0}isLiveInfoAvailableBy(t){return this.isLive&&t&&this.isLocal===!0&&(this.account.name===t.username||t.hasRight(a.GET_ANY_LIVE))}canBeDuplicatedBy(t){return t&&this.isLocal===!1&&t.hasRight(a.MANAGE_VIDEOS_REDUNDANCIES)}canBypassPassword(t){return this.privacy.id===tt.PASSWORD_PROTECTED&&t&&this.isLocal===!0&&(this.account.name===t.username||t.hasRight(a.SEE_ALL_VIDEOS))}};export{_t as a,Ut as b,kt as c,ct as d};
/**i18n:1cf7c077143c4c267fdafbe5508f191afcef21bad6aba22a3a8dc180e1003753*/
//# sourceMappingURL=chunk-UI5MIAKJ.js.map
