{"version":3,"mappings":"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","names":["ɵɵelementStart","ɵɵlistener","ɵɵrestoreView","_r1","ctx_r1","ɵɵnextContext","ɵɵresetView","resetField","ɵɵi18n","ɵɵelementEnd","Lt","i","t","n","E","ɵɵtwoWayListener","$event","_r3","i0","ɵɵtwoWayBindingSet","advancedSearch","sort","ɵɵtext","$implicit","e","d","ɵɵadvance","ɵɵproperty","sort_r4","id","ɵɵtwoWayProperty","ɵɵtextInterpolate","label","$t","_r5","xt","_r6","resetLocalField","Ht","_r7","onDurationOrPublishedUpdated","publishedDateRange","date_r8","wt","_r9","resetOriginalPublicationYears","Vt","_r10","Dt","_r11","durationRange","duration_r12","Gt","_r13","Xt","category_r14","kt","_r15","zt","licence_r16","Wt","_r17","Ut","language_r18","Bt","_r19","Yt","_r20","jt","_r21","Jt","_r22","searchTarget","Qt","_r23","reset","SearchFiltersComponent","serverService","inject","ServerService","input","AdvancedSearch","filtered","output","videoCategories","videoLicences","videoLanguages","publishedDateRanges","sorts","durationRanges","originallyPublishedStartYear","originallyPublishedEndYear","serverConfig","constructor","$localize","ngOnInit","getHTMLConfig","getVideoCategories","subscribe","categories","getVideoLicences","licences","getVideoLanguages","languages","loadFromDurationRange","loadFromPublishedRange","loadOriginallyPublishedAtYears","updateModelFromDurationRange","updateModelFromPublishedRange","updateModelFromOriginallyPublishedAtYears","formUpdated","emit","undefined","fieldName","value","isSearchTargetEnabled","search","searchIndex","enabled","disableLocalSearch","originallyPublishedStartDate","Date","getFullYear","toString","advancedSearchValue","originallyPublishedEndDate","durationMin","durationMax","fourMinutes","tenMinutes","startDate","date","now","diff","Math","abs","getTime","dayMS","numberOfDays","baseDate","setHours","setMonth","year","parseInt","start","setFullYear","toISOString","end","advancedSearchVal","setDate","getDate","v","selectors","inputs","outputs","decls","vars","consts","i18n_0","ctx","ɵɵtemplate","SearchFiltersComponent_button_7_Template","SearchFiltersComponent_div_8_Template","SearchFiltersComponent_button_13_Template","isLive","SearchFiltersComponent_button_26_Template","SearchFiltersComponent_div_27_Template","SearchFiltersComponent_button_32_Template","preventDefault","SearchFiltersComponent_button_43_Template","SearchFiltersComponent_div_44_Template","SearchFiltersComponent_button_48_Template","categoryOneOf","SearchFiltersComponent_option_53_Template","SearchFiltersComponent_button_57_Template","licenceOneOf","SearchFiltersComponent_option_62_Template","SearchFiltersComponent_button_66_Template","languageOneOf","SearchFiltersComponent_option_71_Template","SearchFiltersComponent_button_76_Template","tagsAllOf","SearchFiltersComponent_button_81_Template","tagsOneOf","host","SearchFiltersComponent_button_91_Template","resultType","SearchFiltersComponent_div_104_Template","SearchFiltersComponent_button_106_Template","ɵɵelement","a","size","dependencies","FormsModule","ɵNgNoValidate","NgSelectOption","ɵNgSelectMultipleOption","DefaultValueAccessor","SelectControlValueAccessor","RadioControlValueAccessor","NgControlStatus","NgControlStatusGroup","NgModel","NgForm","NgIf","NgFor","SelectTagsComponent","styles","_SearchFiltersComponent","qt","Kt","Zt","en","ɵɵi18nStart","ɵɵi18nEnd","ɵɵi18nExp","ctx_r0","currentSearch","G","tn","Ue","SearchComponent_div_3_span_4_Template","SearchComponent_div_3_span_5_Template","SearchComponent_div_3_span_6_Template","ɵɵpipeBind1","pagination","totalItems","nn","numberOfFilters","rn","error","an","on","ɵɵelementContainer","ln","SearchComponent_ng_container_13_div_1_a_3_ng_container_1_Template","q","getInternalChannelUrl","result_r3","aContent_r2","sn","_n","SearchComponent_ng_container_13_div_1_a_4_ng_container_1_Template","getExternalChannelUrl","ɵɵsanitizeUrl","cn","displayName","nameWithHost","dn","ɵɵpureFunction1","_c0","gn","SearchComponent_ng_container_13_div_1_a_3_Template","SearchComponent_ng_container_13_div_1_a_4_Template","SearchComponent_ng_container_13_div_1_ng_template_5_Template","ɵɵtemplateRefExtractor","SearchComponent_ng_container_13_div_1_my_subscribe_button_9_Template","isExternalChannelUrl","followersCount","hideActions","un","_r4","removeVideoFromArray","userMiniature","videoDisplayOptions","getLinkType","pn","Sn","ɵɵelementContainerStart","SearchComponent_ng_container_13_div_1_Template","SearchComponent_ng_container_13_div_2_Template","SearchComponent_ng_container_13_div_3_Template","J","isVideoChannel","isVideo","isPlaylist","SearchComponent","route","ActivatedRoute","router","Router","metaService","MetaService","notifier","Notifier","searchService","SearchService","authService","AuthService","userService","UserService","hooks","HooksService","results","currentPage","deletedVideos","isSearchFilterCollapsed","views","by","avatar","privacyLabel","errorMessage","onSearchDataSubject","Subject","subActivatedRoute","isInitialLoad","hasMoreResults","isSearching","lastSearchTarget","queryParams","next","querySearch","resetPagination","updateTitle","getDefaultSearchTarget","checkFieldsAndGetError","containsValues","err","message","getAnonymousOrLoggedUser","user","runAction","ngOnDestroy","unsubscribe","VideoChannel","Video","VideoPlaylist","isUserLoggedIn","isLoggedIn","forkJoin","getVideoChannelObs","getVideoPlaylistObs","getVideosObs","result","concat","data","reduce","p","r","total","length","complete","onNearOfBottom","onFiltered","updateUrlFromAdvancedSearch","video","previous","filter","remoteUriConfig","remoteUri","anonymous","users","channel","url","linkType","getFilterButtonTitle","title","setTitle","navigate","relativeTo","Object","assign","toUrlObject","params","componentPagination","immutableAssign","itemsPerPage","itemsRemoved","wrapObsFun","searchVideos","bind","buildChannelsPerPage","searchVideoChannels","buildPlaylistsPerPage","searchVideoPlaylists","searchIndexConfig","isDefaultSearch","validateHost","i18n_1","_","P","template","SearchComponent_div_3_Template","SearchComponent_span_8_Template","SearchComponent_my_alert_11_Template","SearchComponent_div_12_Template","SearchComponent_ng_container_13_Template","asObservable","Ge","InfiniteScrollerDirective","NgbCollapse","ActorAvatarComponent","RouterLink","NgTemplateOutlet","SubscribeButtonComponent","VideoMiniatureComponent","VideoPlaylistMiniatureComponent","NumberFormatterPipe","AlertComponent","GlobalIconComponent","_SearchComponent","__decorate","SimpleMemoize","prototype","AbstractLazyLoadResolver","resolve","finder","pipe","map","logger","navigateByUrl","redirectUrl","buildUrl","ChannelLazyLoadResolver","__ngFactoryType__","factory","ɵfac","_ChannelLazyLoadResolver","PlaylistLazyLoadResolver","playlist","buildWatchUrl","_PlaylistLazyLoadResolver","VideoLazyLoadResolver","_VideoLazyLoadResolver","routes_default","path","component","meta","providers","VideoPlaylistService","UserSubscriptionService","BlocklistService","VideoBlockService","AbuseService","children","wi","default"],"ignoreList":[],"sources":["src/app/+search/search-filters.component.html","src/app/+search/search-filters.component.ts","src/app/+search/search.component.html","src/app/+search/search.component.ts","src/app/+search/shared/abstract-lazy-load.resolver.ts","src/app/+search/shared/channel-lazy-load.resolver.ts","src/app/+search/shared/playlist-lazy-load.resolver.ts","src/app/+search/shared/video-lazy-load.resolver.ts","src/app/+search/routes.ts"],"sourcesContent":["<form (ngSubmit)=\"formUpdated()\">\n\n  <div class=\"row\">\n    <div class=\"col-lg-4 col-md-6 col-xs-12\">\n      <fieldset class=\"form-group\" role=\"radiogroup\">\n        <div class=\"radio-label label-container\">\n          <label for=\"sort\" i18n>Sort</label>\n          <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetField('sort', '-match')\" *ngIf=\"advancedSearch().sort !== '-match'\">\n            Reset\n          </button>\n        </div>\n\n        <div class=\"peertube-radio-container\" *ngFor=\"let sort of sorts\">\n          <input type=\"radio\" name=\"sort\" [id]=\"sort.id\" [value]=\"sort.id\" [(ngModel)]=\"advancedSearch().sort\">\n          <label [for]=\"sort.id\" class=\"radio\">{{ sort.label }}</label>\n        </div>\n      </fieldset>\n\n      <div class=\"form-group\" role=\"radiogroup\">\n        <div class=\"radio-label label-container\">\n          <label for=\"isLive\" i18n>Display only</label>\n          <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetField('isLive')\" *ngIf=\"advancedSearch().isLive !== undefined\">\n            Reset\n          </button>\n        </div>\n\n        <div class=\"peertube-radio-container\">\n          <input type=\"radio\" name=\"isLive\" id=\"isLiveTrue\" value=\"true\" [(ngModel)]=\"advancedSearch().isLive\">\n          <label i18n for=\"isLiveTrue\" class=\"radio\">Live videos</label>\n        </div>\n\n        <div class=\"peertube-radio-container\">\n          <input type=\"radio\" name=\"isLive\" id=\"isLiveFalse\" value=\"false\" [(ngModel)]=\"advancedSearch().isLive\">\n          <label i18n for=\"isLiveFalse\" class=\"radio\">VOD videos</label>\n        </div>\n      </div>\n\n      <div class=\"form-group\">\n        <div class=\"radio-label label-container\">\n          <label for=\"publishedDateRange\" i18n>Published date</label>\n          <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetLocalField('publishedDateRange')\" *ngIf=\"publishedDateRange !== undefined\">\n            Reset\n          </button>\n        </div>\n\n        <div class=\"peertube-radio-container\" *ngFor=\"let date of publishedDateRanges\">\n          <input type=\"radio\" (change)=\"onDurationOrPublishedUpdated()\" name=\"publishedDateRange\" [id]=\"date.id\" [value]=\"date.id\" [(ngModel)]=\"publishedDateRange\">\n          <label [for]=\"date.id\" class=\"radio\">{{ date.label }}</label>\n        </div>\n      </div>\n\n      <div class=\"form-group\">\n        <div class=\"label-container\">\n          <label i18n for=\"original-publication-after\">Original publication year</label>\n          <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetOriginalPublicationYears()\" *ngIf=\"originallyPublishedStartYear || originallyPublishedEndYear\">\n            Reset\n          </button>\n        </div>\n\n        <div class=\"row\">\n          <div class=\"ps-0 col-sm-6\">\n            <input\n              (change)=\"onDurationOrPublishedUpdated()\"\n              (keydown.enter)=\"$event.preventDefault()\"\n              type=\"text\" id=\"original-publication-after\" name=\"original-publication-after\"\n              i18n-placeholder placeholder=\"After...\"\n              [(ngModel)]=\"originallyPublishedStartYear\"\n              class=\"form-control\"\n            >\n          </div>\n          <div class=\"pe-0 col-sm-6\">\n            <input\n              (change)=\"onDurationOrPublishedUpdated()\"\n              (keydown.enter)=\"$event.preventDefault()\"\n              type=\"text\" id=\"original-publication-before\" name=\"original-publication-before\"\n              i18n-placeholder placeholder=\"Before...\"\n              [(ngModel)]=\"originallyPublishedEndYear\"\n              class=\"form-control\"\n            >\n          </div>\n        </div>\n      </div>\n\n    </div>\n\n    <div class=\"col-lg-4 col-md-6 col-xs-12\">\n      <div class=\"form-group\" role=\"radiogroup\">\n        <div class=\"radio-label label-container\">\n          <label for=\"durationRange\" i18n>Duration</label>\n          <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetLocalField('durationRange')\" *ngIf=\"durationRange !== undefined\">\n            Reset\n          </button>\n        </div>\n\n        <div class=\"peertube-radio-container\" *ngFor=\"let duration of durationRanges\">\n          <input type=\"radio\" (change)=\"onDurationOrPublishedUpdated()\" name=\"durationRange\" [id]=\"duration.id\" [value]=\"duration.id\" [(ngModel)]=\"durationRange\">\n          <label [for]=\"duration.id\" class=\"radio\">{{ duration.label }}</label>\n        </div>\n      </div>\n\n      <div class=\"form-group\">\n        <label i18n for=\"category\">Category</label>\n        <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetField('categoryOneOf')\" *ngIf=\"advancedSearch().categoryOneOf !== undefined\">\n          Reset\n        </button>\n        <div class=\"peertube-select-container\">\n          <select id=\"category\" name=\"category\" [(ngModel)]=\"advancedSearch().categoryOneOf\" class=\"form-control\">\n            <option [ngValue]=\"undefined\" i18n>Display all categories</option>\n            <option *ngFor=\"let category of videoCategories\" [value]=\"category.id\">{{ category.label }}</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"form-group\">\n        <label i18n for=\"licence\">Licence</label>\n        <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetField('licenceOneOf')\" *ngIf=\"advancedSearch().licenceOneOf !== undefined\">\n          Reset\n        </button>\n        <div class=\"peertube-select-container\">\n          <select id=\"licence\" name=\"licence\" [(ngModel)]=\"advancedSearch().licenceOneOf\" class=\"form-control\">\n            <option [ngValue]=\"undefined\" i18n>Display all licenses</option>\n            <option *ngFor=\"let licence of videoLicences\" [value]=\"licence.id\">{{ licence.label }}</option>\n          </select>\n        </div>\n      </div>\n\n      <div class=\"form-group\">\n        <label i18n for=\"language\">Language</label>\n        <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetField('languageOneOf')\" *ngIf=\"advancedSearch().languageOneOf !== undefined\">\n          Reset\n        </button>\n        <div class=\"peertube-select-container\">\n          <select id=\"language\" name=\"language\" [(ngModel)]=\"advancedSearch().languageOneOf\" class=\"form-control\">\n            <option [ngValue]=\"undefined\" i18n>Display all languages</option>\n            <option *ngFor=\"let language of videoLanguages\" [value]=\"language.id\">{{ language.label }}</option>\n          </select>\n        </div>\n      </div>\n    </div>\n\n    <div class=\"col-lg-4 col-md-6 col-xs-12\">\n      <div class=\"form-group\">\n        <label i18n for=\"tagsAllOf\">All of these tags</label>\n        <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetField('tagsAllOf')\" *ngIf=\"advancedSearch().tagsAllOf\">\n          Reset\n        </button>\n        <my-select-tags name=\"tagsAllOf\" inputId=\"tagsAllOf\" [(ngModel)]=\"advancedSearch().tagsAllOf\"></my-select-tags>\n      </div>\n\n      <div class=\"form-group\">\n        <label i18n for=\"tagsOneOf\">One of these tags</label>\n        <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetField('tagsOneOf')\" *ngIf=\"advancedSearch().tagsOneOf\">\n          Reset\n        </button>\n        <my-select-tags name=\"tagsOneOf\" inputId=\"tagsOneOf\" [(ngModel)]=\"advancedSearch().tagsOneOf\"></my-select-tags>\n      </div>\n\n      <div class=\"form-group\">\n        <label i18n for=\"host\">PeerTube instance host</label>\n\n        <input (change)=\"onDurationOrPublishedUpdated()\" (keydown.enter)=\"$event.preventDefault()\" type=\"text\" id=\"host\" name=\"host\"\n          placeholder=\"example.com\" [(ngModel)]=\"advancedSearch().host\" class=\"form-control\"\n        >\n      </div>\n\n      <div class=\"form-group\" role=\"radiogroup\">\n        <div class=\"radio-label label-container\">\n          <label for=\"resultType\" i18n>Result types</label>\n          <button type=\"button\" i18n class=\"reset-button reset-button-small\" (click)=\"resetField('resultType')\" *ngIf=\"advancedSearch().resultType !== undefined\">\n            Reset\n          </button>\n        </div>\n\n        <div class=\"peertube-radio-container\">\n          <input type=\"radio\" name=\"resultType\" id=\"resultTypeVideos\" value=\"videos\" [(ngModel)]=\"advancedSearch().resultType\">\n          <label i18n for=\"resultTypeVideos\" class=\"radio\">Videos</label>\n        </div>\n\n        <div class=\"peertube-radio-container\">\n          <input type=\"radio\" name=\"resultType\" id=\"resultTypeChannels\" value=\"channels\" [(ngModel)]=\"advancedSearch().resultType\">\n          <label i18n for=\"resultTypeChannels\" class=\"radio\">Channels</label>\n        </div>\n\n        <div class=\"peertube-radio-container\">\n          <input type=\"radio\" name=\"resultType\" id=\"resultTypePlaylists\" value=\"playlists\" [(ngModel)]=\"advancedSearch().resultType\">\n          <label i18n for=\"resultTypePlaylists\" class=\"radio\">Playlists</label>\n        </div>\n\n      </div>\n\n      <div class=\"form-group\" *ngIf=\"isSearchTargetEnabled()\" role=\"radiogroup\">\n        <div class=\"radio-label label-container\">\n          <label for=\"searchTarget\" i18n>Search target</label>\n        </div>\n\n        <div class=\"peertube-radio-container\">\n          <input type=\"radio\" name=\"searchTarget\" id=\"searchTargetLocal\" value=\"local\" [(ngModel)]=\"advancedSearch().searchTarget\">\n          <label i18n for=\"searchTargetLocal\" class=\"radio\">Instance</label>\n        </div>\n\n        <div class=\"peertube-radio-container\">\n          <input type=\"radio\" name=\"searchTarget\" id=\"searchTargetSearchIndex\" value=\"search-index\" [(ngModel)]=\"advancedSearch().searchTarget\">\n          <label i18n for=\"searchTargetSearchIndex\" class=\"radio\">Vidiverse</label>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"submit-button\">\n    <button type=\"button\" i18n class=\"reset-button me-3\" (click)=\"reset()\" *ngIf=\"advancedSearch().size()\">\n      Reset\n    </button>\n\n    <input\n      class=\"peertube-button primary-button\" type=\"submit\" i18n-value value=\"Filter\"\n      i18n-ariaLabel aria-label=\"Filter the results and automatically close the filters panel\"\n    >\n  </div>\n</form>\n","import { Component, OnInit, inject, input, output } from '@angular/core'\nimport { ServerService } from '@app/core'\nimport { HTMLServerConfig, VideoConstant } from '@peertube/peertube-models'\nimport { SelectTagsComponent } from '../shared/shared-forms/select/select-tags.component'\nimport { NgIf, NgFor } from '@angular/common'\nimport { FormsModule } from '@angular/forms'\nimport { AdvancedSearch } from '@app/shared/shared-search/advanced-search.model'\n\ntype FormOption = { id: string, label: string }\n\n@Component({\n  selector: 'my-search-filters',\n  styleUrls: [ './search-filters.component.scss' ],\n  templateUrl: './search-filters.component.html',\n  imports: [ FormsModule, NgIf, NgFor, SelectTagsComponent ]\n})\nexport class SearchFiltersComponent implements OnInit {\n  private serverService = inject(ServerService)\n\n  advancedSearch = input<AdvancedSearch>(new AdvancedSearch())\n  filtered = output<AdvancedSearch>()\n\n  videoCategories: VideoConstant<number>[] = []\n  videoLicences: VideoConstant<number>[] = []\n  videoLanguages: VideoConstant<string>[] = []\n\n  publishedDateRanges: FormOption[] = []\n  sorts: FormOption[] = []\n  durationRanges: FormOption[] = []\n\n  publishedDateRange: string\n  durationRange: string\n\n  originallyPublishedStartYear: string\n  originallyPublishedEndYear: string\n\n  private serverConfig: HTMLServerConfig\n\n  constructor () {\n    this.publishedDateRanges = [\n      {\n        id: 'today',\n        label: $localize`Today`\n      },\n      {\n        id: 'last_7days',\n        label: $localize`Last 7 days`\n      },\n      {\n        id: 'last_30days',\n        label: $localize`Last 30 days`\n      },\n      {\n        id: 'last_365days',\n        label: $localize`Last 365 days`\n      }\n    ]\n\n    this.durationRanges = [\n      {\n        id: 'short',\n        label: $localize`Short (< 4 min)`\n      },\n      {\n        id: 'medium',\n        label: $localize`Medium (4-10 min)`\n      },\n      {\n        id: 'long',\n        label: $localize`Long (> 10 min)`\n      }\n    ]\n\n    this.sorts = [\n      {\n        id: '-match',\n        label: $localize`Relevance`\n      },\n      {\n        id: '-publishedAt',\n        label: $localize`Publish date`\n      },\n      {\n        id: '-views',\n        label: $localize`Views`\n      }\n    ]\n  }\n\n  ngOnInit () {\n    this.serverConfig = this.serverService.getHTMLConfig()\n\n    this.serverService.getVideoCategories().subscribe(categories => this.videoCategories = categories)\n    this.serverService.getVideoLicences().subscribe(licences => this.videoLicences = licences)\n    this.serverService.getVideoLanguages().subscribe(languages => this.videoLanguages = languages)\n\n    this.loadFromDurationRange()\n    this.loadFromPublishedRange()\n    this.loadOriginallyPublishedAtYears()\n  }\n\n  onDurationOrPublishedUpdated () {\n    this.updateModelFromDurationRange()\n    this.updateModelFromPublishedRange()\n    this.updateModelFromOriginallyPublishedAtYears()\n  }\n\n  formUpdated () {\n    this.onDurationOrPublishedUpdated()\n    this.filtered.emit(this.advancedSearch())\n  }\n\n  reset () {\n    this.advancedSearch().reset()\n\n    this.resetOriginalPublicationYears()\n\n    this.durationRange = undefined\n    this.publishedDateRange = undefined\n\n    this.onDurationOrPublishedUpdated()\n  }\n\n  resetField (fieldName: keyof AdvancedSearch, value?: any) {\n    ;(this.advancedSearch() as any)[fieldName] = value\n  }\n\n  resetLocalField (fieldName: keyof SearchFiltersComponent, value?: any) {\n    this[fieldName] = value\n    this.onDurationOrPublishedUpdated()\n  }\n\n  resetOriginalPublicationYears () {\n    this.originallyPublishedStartYear = this.originallyPublishedEndYear = undefined\n  }\n\n  isSearchTargetEnabled () {\n    return this.serverConfig.search.searchIndex.enabled && this.serverConfig.search.searchIndex.disableLocalSearch !== true\n  }\n\n  private loadOriginallyPublishedAtYears () {\n    const advancedSearch = this.advancedSearch()\n    this.originallyPublishedStartYear = advancedSearch.originallyPublishedStartDate\n      ? new Date(advancedSearch.originallyPublishedStartDate).getFullYear().toString()\n      : undefined\n\n    const advancedSearchValue = this.advancedSearch()\n    this.originallyPublishedEndYear = advancedSearchValue.originallyPublishedEndDate\n      ? new Date(advancedSearchValue.originallyPublishedEndDate).getFullYear().toString()\n      : undefined\n  }\n\n  private loadFromDurationRange () {\n    const advancedSearch = this.advancedSearch()\n    if (advancedSearch.durationMin || advancedSearch.durationMax) {\n      const fourMinutes = 60 * 4\n      const tenMinutes = 60 * 10\n\n      if (advancedSearch.durationMin === fourMinutes && advancedSearch.durationMax === tenMinutes) {\n        this.durationRange = 'medium'\n      } else if (advancedSearch.durationMax === fourMinutes) {\n        this.durationRange = 'short'\n      } else if (advancedSearch.durationMin === tenMinutes) {\n        this.durationRange = 'long'\n      }\n    }\n  }\n\n  private loadFromPublishedRange () {\n    const advancedSearch = this.advancedSearch()\n    if (advancedSearch.startDate) {\n      const date = new Date(advancedSearch.startDate)\n      const now = new Date()\n\n      const diff = Math.abs(date.getTime() - now.getTime())\n\n      const dayMS = 1000 * 3600 * 24\n      const numberOfDays = diff / dayMS\n\n      if (numberOfDays >= 365) this.publishedDateRange = 'last_365days'\n      else if (numberOfDays >= 30) this.publishedDateRange = 'last_30days'\n      else if (numberOfDays >= 7) this.publishedDateRange = 'last_7days'\n      else if (numberOfDays >= 0) this.publishedDateRange = 'today'\n    }\n  }\n\n  private updateModelFromOriginallyPublishedAtYears () {\n    const baseDate = new Date()\n    baseDate.setHours(0, 0, 0, 0)\n    baseDate.setMonth(0, 1)\n\n    const advancedSearch = this.advancedSearch()\n    if (this.originallyPublishedStartYear) {\n      const year = parseInt(this.originallyPublishedStartYear, 10)\n      const start = new Date(baseDate)\n      start.setFullYear(year)\n\n      advancedSearch.originallyPublishedStartDate = start.toISOString()\n    } else {\n      advancedSearch.originallyPublishedStartDate = undefined\n    }\n\n    if (this.originallyPublishedEndYear) {\n      const year = parseInt(this.originallyPublishedEndYear, 10)\n      const end = new Date(baseDate)\n      end.setFullYear(year)\n\n      advancedSearch.originallyPublishedEndDate = end.toISOString()\n    } else {\n      advancedSearch.originallyPublishedEndDate = undefined\n    }\n  }\n\n  private updateModelFromDurationRange () {\n    if (!this.durationRange) {\n      const advancedSearch = this.advancedSearch()\n      advancedSearch.durationMin = undefined\n      advancedSearch.durationMax = undefined\n      return\n    }\n\n    const fourMinutes = 60 * 4\n    const tenMinutes = 60 * 10\n\n    const advancedSearch = this.advancedSearch()\n    const advancedSearchValue = this.advancedSearch()\n    const advancedSearchVal = this.advancedSearch()\n    switch (this.durationRange) {\n      case 'short':\n        advancedSearch.durationMin = undefined\n        advancedSearch.durationMax = fourMinutes\n        break\n\n      case 'medium':\n        advancedSearchValue.durationMin = fourMinutes\n        advancedSearchValue.durationMax = tenMinutes\n        break\n\n      case 'long':\n        advancedSearchVal.durationMin = tenMinutes\n        advancedSearchVal.durationMax = undefined\n        break\n    }\n  }\n\n  private updateModelFromPublishedRange () {\n    if (!this.publishedDateRange) return\n\n    // today\n    const date = new Date()\n    date.setHours(0, 0, 0, 0)\n\n    switch (this.publishedDateRange) {\n      case 'last_7days':\n        date.setDate(date.getDate() - 7)\n        break\n\n      case 'last_30days':\n        date.setDate(date.getDate() - 30)\n        break\n\n      case 'last_365days':\n        date.setDate(date.getDate() - 365)\n        break\n    }\n\n    this.advancedSearch().startDate = date.toISOString()\n  }\n}\n","<div myInfiniteScroller (nearOfBottom)=\"onNearOfBottom()\" [dataObservable]=\"onSearchDataSubject.asObservable()\" class=\"search-result\">\n  <div class=\"results-header\">\n    <div class=\"first-line\">\n      <div class=\"results-counter\" *ngIf=\"pagination.totalItems\">\n        <span class=\"me-1\" i18n>{{ pagination.totalItems | myNumberFormatter }} {pagination.totalItems, plural, =1 {result} other {results}}</span>\n\n        <span class=\"me-1\" i18n *ngIf=\"advancedSearch.searchTarget === 'local'\">on this instance</span>\n        <span class=\"me-1\" i18n *ngIf=\"advancedSearch.searchTarget === 'search-index'\">on the vidiverse</span>\n\n        <span *ngIf=\"currentSearch\" i18n>for <span class=\"search-value\">{{ currentSearch }}</span></span>\n      </div>\n\n      <button\n        class=\"filter-button peertube-button tertiary-button ms-auto\" (click)=\"isSearchFilterCollapsed = !isSearchFilterCollapsed\"\n        [attr.aria-expanded]=\"!isSearchFilterCollapsed\" aria-controls=\"search-results-filter\" [title]=\"getFilterButtonTitle()\"\n      >\n        <my-global-icon iconName=\"filter\"></my-global-icon>\n\n        <ng-container i18n>\n          Filters\n        </ng-container>\n\n        <span *ngIf=\"numberOfFilters() > 0\" class=\"pt-badge badge-secondary\">{{ numberOfFilters() }}</span>\n      </button>\n    </div>\n\n    <div id=\"search-results-filter\" class=\"results-filter\" [ngbCollapse]=\"isSearchFilterCollapsed\" [animation]=\"true\">\n      <my-search-filters [advancedSearch]=\"advancedSearch\" (filtered)=\"onFiltered()\"></my-search-filters>\n\n      <my-alert *ngIf=\"error\" type=\"danger\">{{ error }}</my-alert>\n    </div>\n  </div>\n\n  <div i18n *ngIf=\"pagination.totalItems === 0 && results.length === 0\" class=\"no-results\">\n    No results found\n  </div>\n\n  <ng-container *ngFor=\"let result of results\">\n    <div *ngIf=\"isVideoChannel(result)\" class=\"entry video-channel\">\n\n      <my-actor-avatar\n        [actor]=\"result\" actorType=\"channel\" responseSize=\"true\"\n        [internalHref]=\"getInternalChannelUrl(result)\" [href]=\"getExternalChannelUrl(result)\" size=\"120\"\n      ></my-actor-avatar>\n\n      <div class=\"video-channel-info\">\n        <a *ngIf=\"!isExternalChannelUrl()\" [routerLink]=\"getInternalChannelUrl(result)\" class=\"video-channel-names\">\n          <ng-container *ngTemplateOutlet=\"aContent\"></ng-container>\n        </a>\n\n        <a *ngIf=\"isExternalChannelUrl()\" [href]=\"getExternalChannelUrl(result)\" target=\"_blank\" class=\"video-channel-names\">\n          <ng-container *ngTemplateOutlet=\"aContent\"></ng-container>\n        </a>\n\n        <ng-template #aContent>\n          <div class=\"video-channel-display-name me-2\">{{ result.displayName }}</div>\n          <div class=\"video-channel-name\">{{ result.nameWithHost }}</div>\n        </ng-template>\n\n        <div i18n class=\"video-channel-followers\">{{ result.followersCount }} subscribers</div>\n      </div>\n\n      <my-subscribe-button *ngIf=\"!hideActions()\" [videoChannels]=\"[result]\"></my-subscribe-button>\n    </div>\n\n    <div *ngIf=\"isVideo(result)\" class=\"entry video\">\n      <my-video-miniature\n        [video]=\"result\" [user]=\"userMiniature\" [displayAsRow]=\"true\" [displayVideoActions]=\"!hideActions()\"\n        [displayOptions]=\"videoDisplayOptions\" [videoLinkType]=\"getLinkType()\"\n        (videoBlocked)=\"removeVideoFromArray(result)\" (videoRemoved)=\"removeVideoFromArray(result)\"\n      ></my-video-miniature>\n    </div>\n\n    <div *ngIf=\"isPlaylist(result)\" class=\"entry video-playlist\">\n      <my-video-playlist-miniature\n        [playlist]=\"result\" [displayAsRow]=\"true\" [displayChannel]=\"true\"\n        [linkType]=\"getLinkType()\"\n      ></my-video-playlist-miniature>\n    </div>\n  </ng-container>\n\n</div>\n","import { NgFor, NgIf, NgTemplateOutlet } from '@angular/common'\nimport { Component, OnDestroy, OnInit, inject } from '@angular/core'\nimport { ActivatedRoute, Router, RouterLink } from '@angular/router'\nimport { AuthService, HooksService, MetaService, Notifier, ServerService, User, UserService } from '@app/core'\nimport { immutableAssign, SimpleMemoize } from '@app/helpers'\nimport { validateHost } from '@app/shared/form-validators/host-validators'\nimport { GlobalIconComponent } from '@app/shared/shared-icons/global-icon.component'\nimport { VideoChannel } from '@app/shared/shared-main/channel/video-channel.model'\nimport { AlertComponent } from '@app/shared/shared-main/common/alert.component'\nimport { Video } from '@app/shared/shared-main/video/video.model'\nimport { AdvancedSearch } from '@app/shared/shared-search/advanced-search.model'\nimport { SearchService } from '@app/shared/shared-search/search.service'\nimport { VideoPlaylist } from '@app/shared/shared-video-playlist/video-playlist.model'\nimport { NgbCollapse } from '@ng-bootstrap/ng-bootstrap'\nimport { HTMLServerConfig, SearchTargetType } from '@peertube/peertube-models'\nimport { forkJoin, Subject, Subscription } from 'rxjs'\nimport { LinkType } from 'src/types/link.type'\nimport { ActorAvatarComponent } from '../shared/shared-actor-image/actor-avatar.component'\nimport { InfiniteScrollerDirective } from '../shared/shared-main/common/infinite-scroller.directive'\nimport { NumberFormatterPipe } from '../shared/shared-main/common/number-formatter.pipe'\nimport { SubscribeButtonComponent } from '../shared/shared-user-subscription/subscribe-button.component'\nimport { MiniatureDisplayOptions, VideoMiniatureComponent } from '../shared/shared-video-miniature/video-miniature.component'\nimport { VideoPlaylistMiniatureComponent } from '../shared/shared-video-playlist/video-playlist-miniature.component'\nimport { SearchFiltersComponent } from './search-filters.component'\n\n@Component({\n  selector: 'my-search',\n  styleUrls: [ './search.component.scss' ],\n  templateUrl: './search.component.html',\n  imports: [\n    InfiniteScrollerDirective,\n    NgIf,\n    NgbCollapse,\n    SearchFiltersComponent,\n    NgFor,\n    ActorAvatarComponent,\n    RouterLink,\n    NgTemplateOutlet,\n    SubscribeButtonComponent,\n    VideoMiniatureComponent,\n    VideoPlaylistMiniatureComponent,\n    NumberFormatterPipe,\n    AlertComponent,\n    GlobalIconComponent\n  ]\n})\nexport class SearchComponent implements OnInit, OnDestroy {\n  private route = inject(ActivatedRoute)\n  private router = inject(Router)\n  private metaService = inject(MetaService)\n  private notifier = inject(Notifier)\n  private searchService = inject(SearchService)\n  private authService = inject(AuthService)\n  private userService = inject(UserService)\n  private hooks = inject(HooksService)\n  private serverService = inject(ServerService)\n\n  error: string\n\n  results: (Video | VideoChannel | VideoPlaylist)[] = []\n\n  pagination = {\n    currentPage: 1,\n    totalItems: null as number\n  }\n  deletedVideos = 0\n\n  advancedSearch: AdvancedSearch = new AdvancedSearch()\n  isSearchFilterCollapsed = true\n  currentSearch: string\n\n  videoDisplayOptions: MiniatureDisplayOptions = {\n    date: true,\n    views: true,\n    by: true,\n    avatar: true,\n    privacyLabel: false\n  }\n\n  errorMessage: string\n\n  userMiniature: User\n\n  onSearchDataSubject = new Subject<any>()\n\n  private subActivatedRoute: Subscription\n  private isInitialLoad = false // set to false to show the search filters on first arrival\n\n  private hasMoreResults = true\n  private isSearching = false\n\n  private lastSearchTarget: SearchTargetType\n\n  private serverConfig: HTMLServerConfig\n\n  ngOnInit () {\n    this.serverConfig = this.serverService.getHTMLConfig()\n\n    this.subActivatedRoute = this.route.queryParams\n      .subscribe({\n        next: queryParams => {\n          const querySearch = queryParams['search']\n          const searchTarget = queryParams['searchTarget']\n\n          // Search updated, reset filters\n          if (this.currentSearch !== querySearch || searchTarget !== this.advancedSearch.searchTarget) {\n            this.resetPagination()\n            this.advancedSearch.reset()\n\n            this.currentSearch = querySearch || undefined\n            this.updateTitle()\n          }\n\n          this.advancedSearch = new AdvancedSearch(queryParams)\n          if (!this.advancedSearch.searchTarget) {\n            this.advancedSearch.searchTarget = this.getDefaultSearchTarget()\n          }\n\n          this.error = this.checkFieldsAndGetError()\n\n          // Don't hide filters if we have some of them AND the user just came on the webpage, or we have an error\n          this.isSearchFilterCollapsed = !this.error && (this.isInitialLoad === false || !this.advancedSearch.containsValues())\n          this.isInitialLoad = false\n\n          this.search()\n        },\n\n        error: err => this.notifier.error(err.message)\n      })\n\n    this.userService.getAnonymousOrLoggedUser()\n      .subscribe(user => this.userMiniature = user)\n\n    this.hooks.runAction('action:search.init', 'search')\n  }\n\n  ngOnDestroy () {\n    if (this.subActivatedRoute) this.subActivatedRoute.unsubscribe()\n  }\n\n  isVideoChannel (d: VideoChannel | Video | VideoPlaylist): d is VideoChannel {\n    return d instanceof VideoChannel\n  }\n\n  isVideo (v: VideoChannel | Video | VideoPlaylist): v is Video {\n    return v instanceof Video\n  }\n\n  isPlaylist (v: VideoChannel | Video | VideoPlaylist): v is VideoPlaylist {\n    return v instanceof VideoPlaylist\n  }\n\n  isUserLoggedIn () {\n    return this.authService.isLoggedIn()\n  }\n\n  search () {\n    this.error = this.checkFieldsAndGetError()\n    if (this.error) return\n\n    this.isSearching = true\n\n    forkJoin([\n      this.getVideoChannelObs(),\n      this.getVideoPlaylistObs(),\n      this.getVideosObs()\n    ]).subscribe({\n      next: results => {\n        for (const result of results) {\n          this.results = this.results.concat(result.data)\n        }\n\n        this.pagination.totalItems = results.reduce((p, r) => p += r.total, 0)\n        this.lastSearchTarget = this.advancedSearch.searchTarget\n\n        this.hasMoreResults = this.results.length < this.pagination.totalItems\n\n        this.onSearchDataSubject.next(results)\n      },\n\n      error: err => {\n        if (this.advancedSearch.searchTarget !== 'search-index') {\n          this.notifier.error(err.message)\n          return\n        }\n\n        this.notifier.error(\n          $localize`Search index is unavailable. Retrying with local platform results instead.`,\n          $localize`Search error`\n        )\n        this.advancedSearch.searchTarget = 'local'\n        this.search()\n      },\n\n      complete: () => {\n        this.isSearching = false\n      }\n    })\n  }\n\n  onNearOfBottom () {\n    // Last page\n    if (!this.hasMoreResults || this.isSearching) return\n\n    this.pagination.currentPage += 1\n    this.search()\n  }\n\n  onFiltered () {\n    this.resetPagination()\n\n    this.updateUrlFromAdvancedSearch()\n  }\n\n  numberOfFilters () {\n    return this.advancedSearch.size()\n  }\n\n  // Add VideoChannel/VideoPlaylist for typings, but the template already checks \"video\" argument is a video\n  removeVideoFromArray (video: Video | VideoChannel | VideoPlaylist) {\n    const previous = this.results\n    this.results = this.results.filter(r => !this.isVideo(r) || r.id !== video.id)\n\n    if (previous.length !== this.results.length) this.deletedVideos++\n  }\n\n  getLinkType (): LinkType {\n    if (this.advancedSearch.searchTarget === 'search-index') {\n      const remoteUriConfig = this.serverConfig.search.remoteUri\n\n      // Redirect on the external instance if not allowed to fetch remote data\n      if ((!this.isUserLoggedIn() && !remoteUriConfig.anonymous) || !remoteUriConfig.users) {\n        return 'external'\n      }\n\n      return 'lazy-load'\n    }\n\n    return 'internal'\n  }\n\n  isExternalChannelUrl () {\n    return this.getLinkType() === 'external'\n  }\n\n  getExternalChannelUrl (channel: VideoChannel) {\n    // Same algorithm than videos\n    if (this.getLinkType() === 'external') {\n      return channel.url\n    }\n\n    // lazy-load or internal\n    return undefined\n  }\n\n  @SimpleMemoize()\n  getInternalChannelUrl (channel: VideoChannel) {\n    const linkType = this.getLinkType()\n\n    if (linkType === 'internal') {\n      return [ '/c', channel.nameWithHost ]\n    }\n\n    if (linkType === 'lazy-load') {\n      return [ '/search/lazy-load-channel', { url: channel.url } ]\n    }\n\n    // external\n    return undefined\n  }\n\n  hideActions () {\n    return this.lastSearchTarget === 'search-index'\n  }\n\n  getFilterButtonTitle () {\n    return $localize`${this.numberOfFilters()} active filters, open the filters panel`\n  }\n\n  private resetPagination () {\n    this.pagination.currentPage = 1\n    this.pagination.totalItems = null\n    this.deletedVideos = 0\n\n    this.results = []\n  }\n\n  private updateTitle () {\n    const title = this.currentSearch\n      ? $localize`Search ${this.currentSearch}`\n      : $localize`Search`\n\n    this.metaService.setTitle(title)\n  }\n\n  private updateUrlFromAdvancedSearch () {\n    const search = this.currentSearch || undefined\n\n    this.router.navigate([], {\n      relativeTo: this.route,\n      queryParams: Object.assign({}, this.advancedSearch.toUrlObject(), { search })\n    })\n  }\n\n  private getVideosObs () {\n    const params = {\n      search: this.currentSearch,\n      componentPagination: immutableAssign(this.pagination, { itemsPerPage: 10, itemsRemoved: this.deletedVideos }),\n      advancedSearch: this.advancedSearch\n    }\n\n    return this.hooks.wrapObsFun(\n      this.searchService.searchVideos.bind(this.searchService),\n      params,\n      'search',\n      'filter:api.search.videos.list.params',\n      'filter:api.search.videos.list.result'\n    )\n  }\n\n  private getVideoChannelObs () {\n    const params = {\n      search: this.currentSearch,\n      componentPagination: immutableAssign(this.pagination, { itemsPerPage: this.buildChannelsPerPage() }),\n      advancedSearch: this.advancedSearch\n    }\n\n    return this.hooks.wrapObsFun(\n      this.searchService.searchVideoChannels.bind(this.searchService),\n      params,\n      'search',\n      'filter:api.search.video-channels.list.params',\n      'filter:api.search.video-channels.list.result'\n    )\n  }\n\n  private getVideoPlaylistObs () {\n    const params = {\n      search: this.currentSearch,\n      componentPagination: immutableAssign(this.pagination, { itemsPerPage: this.buildPlaylistsPerPage() }),\n      advancedSearch: this.advancedSearch\n    }\n\n    return this.hooks.wrapObsFun(\n      this.searchService.searchVideoPlaylists.bind(this.searchService),\n      params,\n      'search',\n      'filter:api.search.video-playlists.list.params',\n      'filter:api.search.video-playlists.list.result'\n    )\n  }\n\n  private getDefaultSearchTarget (): SearchTargetType {\n    const searchIndexConfig = this.serverConfig.search.searchIndex\n\n    if (searchIndexConfig.enabled && (searchIndexConfig.isDefaultSearch || searchIndexConfig.disableLocalSearch)) {\n      return 'search-index'\n    }\n\n    return 'local'\n  }\n\n  private checkFieldsAndGetError () {\n    if (this.advancedSearch.host && !validateHost(this.advancedSearch.host)) {\n      return $localize`Host filter is invalid`\n    }\n\n    return undefined\n  }\n\n  private buildChannelsPerPage () {\n    if (this.advancedSearch.resultType === 'channels') return 10\n\n    return 2\n  }\n\n  private buildPlaylistsPerPage () {\n    if (this.advancedSearch.resultType === 'playlists') return 10\n\n    return 2\n  }\n}\n","import { Observable } from 'rxjs'\nimport { map } from 'rxjs/operators'\nimport { ActivatedRouteSnapshot, Router } from '@angular/router'\nimport { logger } from '@root-helpers/logger'\nimport { ResultList } from '@peertube/peertube-models'\n\nexport abstract class AbstractLazyLoadResolver <T> {\n  protected router: Router\n\n  resolve (route: ActivatedRouteSnapshot) {\n    const url = route.params.url\n\n    if (!url) {\n      logger.error('Could not find url param.', { params: route.params })\n      return this.router.navigateByUrl('/404')\n    }\n\n    return this.finder(url)\n      .pipe(\n        map(result => {\n          if (result.data.length !== 1) {\n            logger.error('Cannot find result for this URL')\n            return this.router.navigateByUrl('/404')\n          }\n\n          const redirectUrl = this.buildUrl(result.data[0])\n\n          return this.router.navigateByUrl(redirectUrl)\n        })\n      )\n  }\n\n  protected abstract finder (url: string): Observable<ResultList<T>>\n  protected abstract buildUrl (e: T): string\n}\n","import { Injectable, inject } from '@angular/core'\nimport { Router } from '@angular/router'\nimport { AbstractLazyLoadResolver } from './abstract-lazy-load.resolver'\nimport { VideoChannel } from '@app/shared/shared-main/channel/video-channel.model'\nimport { SearchService } from '@app/shared/shared-search/search.service'\n\n@Injectable()\nexport class ChannelLazyLoadResolver extends AbstractLazyLoadResolver<VideoChannel> {\n  protected router = inject(Router)\n  private searchService = inject(SearchService)\n\n  protected finder (url: string) {\n    return this.searchService.searchVideoChannels({ search: url })\n  }\n\n  protected buildUrl (channel: VideoChannel) {\n    return '/video-channels/' + channel.nameWithHost\n  }\n}\n","import { Injectable, inject } from '@angular/core'\nimport { Router } from '@angular/router'\nimport { AbstractLazyLoadResolver } from './abstract-lazy-load.resolver'\nimport { VideoPlaylist } from '@app/shared/shared-video-playlist/video-playlist.model'\nimport { SearchService } from '@app/shared/shared-search/search.service'\n\n@Injectable()\nexport class PlaylistLazyLoadResolver extends AbstractLazyLoadResolver<VideoPlaylist> {\n  protected router = inject(Router)\n  private searchService = inject(SearchService)\n\n  protected finder (url: string) {\n    return this.searchService.searchVideoPlaylists({ search: url })\n  }\n\n  protected buildUrl (playlist: VideoPlaylist) {\n    return VideoPlaylist.buildWatchUrl(playlist)\n  }\n}\n","import { Injectable, inject } from '@angular/core'\nimport { Router } from '@angular/router'\nimport { AbstractLazyLoadResolver } from './abstract-lazy-load.resolver'\nimport { Video } from '@app/shared/shared-main/video/video.model'\nimport { SearchService } from '@app/shared/shared-search/search.service'\n\n@Injectable()\nexport class VideoLazyLoadResolver extends AbstractLazyLoadResolver<Video> {\n  protected router = inject(Router)\n  private searchService = inject(SearchService)\n\n  protected finder (url: string) {\n    return this.searchService.searchVideos({ search: url })\n  }\n\n  protected buildUrl (video: Video) {\n    return Video.buildWatchUrl(video)\n  }\n}\n","import { Routes } from '@angular/router'\nimport { SearchComponent } from './search.component'\nimport { ChannelLazyLoadResolver, PlaylistLazyLoadResolver, VideoLazyLoadResolver } from './shared'\nimport { UserSubscriptionService } from '../shared/shared-user-subscription/user-subscription.service'\nimport { SearchService } from '@app/shared/shared-search/search.service'\nimport { VideoPlaylistService } from '@app/shared/shared-video-playlist/video-playlist.service'\nimport { VideoBlockService } from '@app/shared/shared-moderation/video-block.service'\nimport { BlocklistService } from '@app/shared/shared-moderation/blocklist.service'\nimport { AbuseService } from '@app/shared/shared-moderation/abuse.service'\n\nexport default [\n  {\n    path: '',\n    component: SearchComponent,\n    data: {\n      meta: {\n        title: $localize`Search`\n      }\n    },\n    providers: [\n      SearchService,\n      VideoPlaylistService,\n      UserSubscriptionService,\n      BlocklistService,\n      VideoBlockService,\n      AbuseService,\n      VideoLazyLoadResolver,\n      ChannelLazyLoadResolver,\n      PlaylistLazyLoadResolver\n    ],\n    children: [\n      {\n        path: 'lazy-load-video',\n        component: SearchComponent,\n        resolve: {\n          data: VideoLazyLoadResolver\n        }\n      },\n      {\n        path: 'lazy-load-channel',\n        component: SearchComponent,\n        resolve: {\n          data: ChannelLazyLoadResolver\n        }\n      },\n      {\n        path: 'lazy-load-playlist',\n        component: SearchComponent,\n        resolve: {\n          data: PlaylistLazyLoadResolver\n        }\n      }\n    ]\n  }\n] satisfies Routes\n"]}