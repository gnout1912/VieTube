import{a as ge,b as Ne,c as Me,d as gt,e as De,g as Nt,h as Mt,i as Re,j as fe,k as Ie}from"./chunk-5BBSIJ6K.js";import{a as ht}from"./chunk-X5AICG5H.js";import{b as Rt,c as ft}from"./chunk-SS3SQE34.js";import{a as he}from"./chunk-GUE2RQOD.js";import{a as It}from"./chunk-GLDJGDCD.js";import{b as Oe}from"./chunk-DUA2DJQ3.js";import{a as Dt}from"./chunk-APIXYPUO.js";import{c as Ot}from"./chunk-BFVCLNOF.js";import{a as Tt}from"./chunk-6TRYPH2T.js";import{b as dt,c as Ct}from"./chunk-25AA3I7H.js";import{c as Te}from"./chunk-2O3IZ566.js";import{E as V,F as me,s as mt}from"./chunk-RT7DTAS6.js";import{B as lt,C as st,c as ot,d as x,g as it,h as rt,q as at,t as _t}from"./chunk-WO4VNXA3.js";import{a as Ce}from"./chunk-PE7TFI7A.js";import{B as Q,Bb as M,Bc as P,Cb as p,Da as Pe,Dc as H,Ea as Le,Ha as l,K as ze,Ld as G,Mb as ie,Na as J,Nb as re,Oc as le,Og as St,Pb as C,Pg as At,Qb as f,Qg as ut,Rb as z,Sa as I,Tc as et,Ub as je,Vb as Qe,Wa as F,Wb as Ke,Xc as tt,Xf as k,Y as Ge,Ya as T,Yb as Ye,Zb as b,Zd as X,aa as d,bg as Ee,db as Ue,eb as s,ef as ce,fc as ae,ff as pe,ga as Xe,ha as g,hc as _e,ia as N,jc as Je,kb as Z,kd as se,kg as pt,l as Fe,la as Y,lb as ee,lg as Se,mb as te,mc as Ze,mf as ct,nb as a,ob as _,od as de,pb as S,pd as nt,pf as ve,pg as Ae,qb as w,qg as Et,rb as y,sa as ke,sg as ue,ta as R,tb as $,vb as ne,wb as oe,xb as c,yb as Be,zb as qe}from"./chunk-F7FAPFPY.js";import{a as xe,b as Ve,i as E,j as W}from"./chunk-AI7IVZV2.js";var L=class L{authHttp=d(tt);restExtractor=d(pt);restService=d(Et);list(i){let{pagination:n,sort:e}=i,t=this.buildServerOrAccountListPath(i),r=new et();return r=this.restService.addRestGetParams(r,n,e),this.authHttp.get(t,{params:r}).pipe(Q(m=>this.restExtractor.handleError(m)));}addList(i){let{listName:n,words:e}=i,t=this.buildServerOrAccountListPath(i),r={listName:n,words:e};return this.authHttp.post(t,r).pipe(Q(m=>this.restExtractor.handleError(m)));}updateList(i){let{listName:n,words:e}=i,t=this.buildServerOrAccountListPath(i),r={listName:n,words:e};return this.authHttp.put(t,r).pipe(Q(m=>this.restExtractor.handleError(m)));}deleteList(i){let n=this.buildServerOrAccountListPath(i);return this.authHttp.delete(n).pipe(Q(e=>this.restExtractor.handleError(e)));}buildServerOrAccountListPath(i){let n=i.accountName?"/accounts/"+i.accountName+"/lists":"/server/lists";return i.listId&&(n+="/"+i.listId),L.BASE_WATCHED_WORDS_URL+n;}};E(L,"BASE_WATCHED_WORDS_URL",ct.apiUrl+"/api/v1/watched-words/"),E(L,"\u0275fac",function(n){return new(n||L)();}),E(L,"\u0275prov",Ge({token:L,factory:L.Éµfac}));var U=L;var gn={VALIDATORS:[x.required],MESSAGES:{required:"This field is required."}},Nn={VALIDATORS:[x.pattern(/^https:\/\//)],MESSAGES:{pattern:"This field must be a URL"}};function $t(o,i){if(o&1&&(a(0,"span",2),c(1,0),_()),o&2){let n=p();s("ngClass",n.badgeClass)("ngbTooltip",n.tooltip),Ue("aria-label",n.tooltip);}}var Pn=(()=>{let i=class i{videoService=d(Ot);video=R.required();theme=R("yellow");tooltip;badgeClass;ngOnInit(){this.tooltip=this.videoService.buildNSFWTooltip(this.video()),this.badgeClass=this.theme()==="yellow"?"badge-warning":"badge-danger";}};E(i,"\u0275fac",function(t){return new(t||i)();}),E(i,"\u0275cmp",I({type:i,selectors:[["my-video-nsfw-badge"]],inputs:{video:[1,"video"],theme:[1,"theme"]},decls:1,vars:1,consts:()=>{let e;return e="Hunkigarria",[e,["class","button-unstyle pt-badge",3,"ngClass","ngbTooltip",4,"ngIf"],[1,"button-unstyle","pt-badge",3,"ngClass","ngbTooltip"]];},template:function(t,r){t&1&&T(0,$t,2,3,"span",1),t&2&&s("ngIf",r.video().nsfw);},dependencies:[le,P,H,me,V],encapsulation:2}));let o=i;return o;})();var bt=o=>{if(!o.value)return null;let i=[],n=Ee(o.value);for(let e of n)(e.length<1||e.length>100)&&i.push(""+e+" is not valid (min 1 character/max 100 characters)");return n.length>500&&i.push("There are too much words in the list (max 500 words)"),i.length===0?null:{validWords:{reason:"invalid",value:i.join(". ")+"."}};},Pt={VALIDATORS:[x.required,x.minLength(1),x.maxLength(100)],MESSAGES:{required:"List name is required.",minlength:"List name must be at least 1 character long.",maxlength:"List name cannot be more than 100 characters long."}},Lt={VALIDATORS:[x.required,ht,bt],MESSAGES:{required:"Words are required.",unique:"Words entered contain duplicates.",validWords:"A word must be between 1 and 100 characters and the total number of words must not exceed 500 items"}};var Ht=["modal"],vt=o=>({"input-error":o});function xt(o,i){if(o&1&&(a(0,"div",21),C(1),_()),o&2){let n=p(2);l(),f(n.formErrors.listName);}}function Vt(o,i){if(o&1&&(a(0,"div",21),C(1),_()),o&2){let n=p(2);l(),f(n.formErrors.words);}}function Ft(o,i){if(o&1){let n=$();w(0,5),a(1,"div",6)(2,"h4",7),c(3,1),_(),a(4,"button",8),M("click",function(){g(n);let t=p();return N(t.hide());}),S(5,"my-global-icon",9),_()(),a(6,"div",10)(7,"div",11)(8,"label",12),c(9,2),_(),S(10,"input",13),T(11,xt,2,1,"div",14),_(),a(12,"div",11)(13,"label",15),c(14,3),_(),a(15,"div",16),c(16,4),_(),S(17,"textarea",17),T(18,Vt,2,1,"div",14),_()(),a(19,"div",18)(20,"input",19),M("click",function(){g(n);let t=p();return N(t.hide());})("key.enter",function(){g(n);let t=p();return N(t.hide());}),_(),a(21,"input",20),M("click",function(){g(n);let t=p();return N(t.addOrUpdate());}),_()(),y();}if(o&2){let n=p();s("formGroup",n.form),l(10),s("ngClass",b(6,vt,n.formErrors.listName)),l(),s("ngIf",n.formErrors.listName),l(6),s("ngClass",b(8,vt,n.formErrors.words)),l(),s("ngIf",n.formErrors.words),l(3),s("disabled",!n.form.valid);}}var Wt=(()=>{let i=class i extends Ct{formReactiveService=d(dt);modalService=d(mt);notifier=d(k);watchedWordsService=d(U);accountName=R.required();listAddedOrUpdated=ke();modal=J("modal");openedModal;listToUpdate;ngOnInit(){this.buildForm({listName:Pt,words:Lt});}show(e){this.listToUpdate=e,this.openedModal=this.modalService.open(this.modal(),{centered:!0,keyboard:!1}),e&&this.form.patchValue({listName:e.listName,words:e.words.join(`
`)});}hide(){this.openedModal.close(),this.form.reset(),this.listToUpdate=void 0;}addOrUpdate(){let e={accountName:this.accountName(),listName:this.form.value.listName,words:Ee(this.form.value.words)};(this.listToUpdate?this.watchedWordsService.updateList(Ve(xe({},e),{listId:this.listToUpdate.id})):this.watchedWordsService.addList(e)).subscribe({next:()=>{this.listToUpdate?this.notifier.success(""+e.listName+" updated"):this.notifier.success(""+e.listName+" created"),this.listAddedOrUpdated.emit();},error:r=>this.notifier.error(r.message)}),this.hide();}};E(i,"\u0275fac",(()=>{let e;return function(r){return(e||(e=Y(i)))(r||i);};})()),E(i,"\u0275cmp",I({type:i,selectors:[["my-watched-words-list-save-modal"]],viewQuery:function(t,r){t&1&&ie(r.modal,Ht,5),t&2&&re();},inputs:{accountName:[1,"accountName"]},outputs:{listAddedOrUpdated:"listAddedOrUpdated"},features:[F],decls:2,vars:0,consts:()=>{let e;e="Itxi laster-leiho hau";let t;t="Utzi";let r;r="Gorde";let m;m="Save watched words list";let A;A="List name";let h;h="Words";let v;return v="One word or group of words per line.",[["modal",""],m,A,h,v,[3,"formGroup"],[1,"modal-header"],[1,"modal-title"],["title",e,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],[1,"form-group"],["for","listName"],["type","text","id","listName","formControlName","listName",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["for","words"],[1,"form-group-description"],["id","words","formControlName","words",1,"form-control",3,"ngClass"],[1,"modal-footer","inputs"],["type","button","role","button","value",t,1,"peertube-button","secondary-button",3,"click","key.enter"],["type","submit","value",r,1,"peertube-button","primary-button",3,"click","disabled"],["role","alert",1,"form-error"]];},template:function(t,r){t&1&&T(0,Ft,22,10,"ng-template",null,0,Je);},dependencies:[lt,ot,it,rt,st,at,_t,Ce,H,P],styles:[`textarea[_ngcontent-%COMP%]{min-height:300px}
/*# sourceMappingURL=watched-words-list-save-modal.component-7BFSECXK.css.map */`]}));let o=i;return o;})();var Xt=["saveModal"],kt=o=>({show:o});function Ut(o,i){if(o&1){let n=$();a(0,"button",21),M("click",function(){g(n);let t=p(2);return N(t.openCreateOrUpdateList());}),S(1,"my-global-icon",22),w(2),c(3,1),y(),_();}}function Bt(o,i){if(o&1){let n=$();a(0,"div",16)(1,"div",17),T(2,Ut,4,0,"button",18),_(),a(3,"div",19)(4,"my-button",20),M("click",function(){g(n);let t=p();return N(t.reloadData());}),_()()();}if(o&2){let n=p();l(2),s("ngIf",!n.isInSelectionMode());}}function qt(o,i){if(o&1&&(a(0,"tr")(1,"th",23)(2,"span",24),c(3,2),_()(),a(4,"th",25)(5,"span",24),c(6,3),_()(),a(7,"th",26),c(8,4),_(),a(9,"th",26),c(10,5),_(),a(11,"th",27),ne(12,6),S(13,"p-sortIcon",28),oe(),_()()),o&2){let n=p();l(11),s("ngbTooltip",n.sortTooltip);}}function jt(o,i){if(o&1&&(a(0,"tr")(1,"td",29),S(2,"my-table-expander-icon",30),_(),a(3,"td",31),S(4,"my-action-dropdown",32),_(),a(5,"td"),C(6),_(),a(7,"td"),c(8,7),_(),a(9,"td"),C(10),ae(11,"ptDate"),_()()),o&2){let n=i.$implicit,e=i.expanded,t=p();l(2),s("pRowToggler",n)("expanded",e),l(2),s("ngClass",b(11,kt,e))("actions",t.actions)("entry",n),l(2),z(" ",n.listName," "),l(2),Be(n.words.length),qe(8),l(2),f(_e(11,8,n.updatedAt,"short"));}}function Qt(o,i){if(o&1&&(a(0,"li"),C(1),_()),o&2){let n=i.$implicit;l(),f(n);}}function Kt(o,i){if(o&1&&(a(0,"tr")(1,"td",33)(2,"ul"),ee(3,Qt,2,1,"li",null,Z),_()()()),o&2){let n=i.$implicit;l(3),te(n.words);}}function Yt(o,i){o&1&&(a(0,"tr")(1,"td",34)(2,"div",35),w(3),c(4,8),y(),_()()());}var Ao=(()=>{let i=class i extends Ae{router=d(de);route=d(se);auth=d(Se);notifier=d(k);confirmService=d(ue);watchedWordsListService=d(U);mode=R.required();saveModal=J("saveModal");lists;totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};actions=[];get authUser(){return this.auth.getUser();}get accountNameParam(){if(this.mode()!=="admin")return this.authUser.account.name;}constructor(){super();let e=()=>this.mode()==="user"||this.authUser.hasRight(G.MANAGE_INSTANCE_WATCHED_WORDS);this.actions=[[{iconName:"edit",label:"Eguneratu",handler:t=>this.openCreateOrUpdateList(t),isDisplayed:e}],[{iconName:"delete",label:"Ezabatu",handler:t=>this.removeList(t),isDisplayed:e}]];}ngOnInit(){this.initialize(),this.auth.userInformationLoaded.pipe(ze()).subscribe(()=>this.reloadData());}getIdentifier(){return"WatchedWordsListAdminOwnerComponent";}openCreateOrUpdateList(e){this.saveModal().show(e);}reloadDataInternal(){this.watchedWordsListService.list({pagination:this.pagination,sort:this.sort,accountName:this.accountNameParam}).subscribe({next:e=>{this.totalRecords=e.total,this.lists=e.data;},error:e=>this.notifier.error(e.message)});}removeList(e){return W(this,null,function*(){let t="Are you sure you want to delete this "+e.listName+" list?";(yield this.confirmService.confirm(t,"Delete list"))!==!1&&this.watchedWordsListService.deleteList({listId:e.id,accountName:this.accountNameParam}).subscribe({next:()=>{this.notifier.success(""+e.listName+" removed"),this.reloadData();},error:m=>this.notifier.error(m.message)});});}};E(i,"\u0275fac",function(t){return new(t||i)();}),E(i,"\u0275cmp",I({type:i,selectors:[["my-watched-words-list-admin-owner"]],viewQuery:function(t,r){t&1&&ie(r.saveModal,Xt,5),t&2&&re();},inputs:{mode:[1,"mode"]},features:[F],decls:8,vars:15,consts:()=>{let e;e="Berritu";let t;t="Create a new list";let r;r="Informazio gehiago";let m;m="Ekintzak";let A;A="List name";let h;h="Words";let v;v="Data "+"\uFFFD#13\uFFFD"+""+"\uFFFD/#13\uFFFD"+"";let D;D="See all words";let B;B="Ekintzak";let q;q=""+"\uFFFD0\uFFFD"+" words ";let j;return j="No watched word lists found.",[["saveModal",""],t,r,m,A,h,v,q,j,["dataKey","id",3,"onLazyLoad","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","lazyLoadOnInit","selectionPageOnly","showCurrentPageReport","currentPageReportTemplate","expandedRowKeys"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[3,"listAddedOrUpdated","accountName"],[1,"caption"],[1,"left-buttons"],["type","button","class","peertube-create-button",3,"click",4,"ngIf"],[1,"ms-auto","right-form"],["label",e,"icon","refresh",3,"click"],["type","button",1,"peertube-create-button",3,"click"],["iconName","add","aria-hidden","true"],["scope","col",2,"width","40px"],[1,"visually-hidden"],["scope","col",2,"width","150px"],["scope","col",2,"width","300px"],["scope","col","container","body","pSortableColumn","updatedAt",2,"width","150px",3,"ngbTooltip"],["field","updatedAt"],[1,"expand-cell"],["tooltip",D,3,"pRowToggler","expanded"],[1,"action-cell"],["placement","bottom-right","container","body","label",B,"buttonSize","small",3,"ngClass","actions","entry"],["myAutoColspan","",1,"expand-cell"],["myAutoColspan",""],[1,"no-results"]];},template:function(t,r){if(t&1){let m=$();a(0,"p-table",9),M("onLazyLoad",function(h){return g(m),N(r.loadLazy(h));}),T(1,Bt,5,1,"ng-template",10)(2,qt,14,1,"ng-template",11)(3,jt,12,13,"ng-template",12)(4,Kt,5,0,"ng-template",13)(5,Yt,5,0,"ng-template",14),_(),a(6,"my-watched-words-list-save-modal",15,0),M("listAddedOrUpdated",function(){return g(m),N(r.reloadData());}),_();}t&2&&(s("value",r.lists)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("lazyLoadOnInit",!1)("selectionPageOnly",!1)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate())("expandedRowKeys",r.expandedRows),l(6),s("accountName",r.accountNameParam));},dependencies:[Ce,Re,ge,ce,Ne,De,Me,pe,H,Oe,Te,Ie,P,fe,he,V,Wt],encapsulation:2}));let o=i;return o;})();var Jt=o=>({show:o}),Zt=()=>["."],en=o=>({search:o});function tn(o,i){if(o&1&&S(0,"my-action-dropdown",22),o&2){let n=p(2);s("actions",n.bulkActions)("entry",n.selectedRows);}}function nn(o,i){if(o&1){let n=$();a(0,"div",17)(1,"div"),T(2,tn,1,2,"my-action-dropdown",18),_(),a(3,"div",19)(4,"my-advanced-input-filter",20),M("search",function(t){g(n);let r=p();return N(r.onSearch(t));}),_(),a(5,"my-button",21),M("click",function(){g(n);let t=p();return N(t.reloadData());}),_()()();}if(o&2){let n=p();l(2),s("ngIf",n.isInSelectionMode()),l(2),s("filters",n.inputFilters);}}function on(o,i){if(o&1&&(a(0,"tr")(1,"th",23),S(2,"p-tableHeaderCheckbox",24),_(),a(3,"th",23)(4,"span",25),c(5,0),_()(),a(6,"th",26)(7,"span",25),c(8,1),_()(),a(9,"th",27),c(10,2),_(),a(11,"th",27),c(12,3),_(),a(13,"th",27),c(14,4),_(),a(15,"th",27),c(16,5),_(),a(17,"th",28),ne(18,6),S(19,"p-sortIcon",29),oe(),_()()),o&2){let n=p();l(17),s("ngbTooltip",n.sortTooltip);}}function rn(o,i){o&1&&(a(0,"span",48),c(1,8),_());}function an(o,i){if(o&1&&(a(0,"a",46),C(1),_()),o&2){let n=i.$implicit,e=p(2);s("routerLink",Ye(3,Zt))("queryParams",b(4,en,e.buildSearchAutoTag(n))),l(),f(n);}}function _n(o,i){if(o&1&&(a(0,"tr",30)(1,"td",31),S(2,"p-tableCheckbox",32),_(),a(3,"td",33),S(4,"my-table-expander-icon",34),_(),a(5,"td",35),S(6,"my-action-dropdown",36),_(),a(7,"td")(8,"a",37)(9,"div",38),S(10,"my-actor-avatar",39),a(11,"div"),C(12),a(13,"span"),C(14),_()()()()(),a(15,"td",40)(16,"em"),c(17,7),_(),a(18,"a",41),C(19),_()(),a(20,"td",42),T(21,rn,2,0,"span",43),a(22,"div",44),S(23,"div",45),_()(),a(24,"td"),ee(25,an,2,6,"a",46,Z),_(),a(27,"td",47),C(28),ae(29,"ptDate"),_()()),o&2){let n=i.$implicit,e=i.expanded,t=p();s("pSelectableRow",n),l(2),s("value",n),l(2),s("pRowToggler",n)("expanded",e),l(2),s("ngClass",b(21,Jt,e))("actions",t.videoCommentActions)("entry",n),l(2),s("href",n.account.localUrl,Le),l(2),s("actor",n.account),l(2),z(" ",n.account.displayName," "),l(2),f(n.by),l(4),s("href",n.localUrl,Le),l(),f(n.video.name),l(),s("pRowToggler",n),l(),s("ngIf",n.heldForReview),l(2),s("innerHTML",n.textHtml,Pe),l(2),te(n.automaticTags),l(2),s("pRowToggler",n),l(),f(_e(29,18,n.createdAt,"short"));}}function ln(o,i){if(o&1&&(a(0,"tr")(1,"td",49),S(2,"div",45),_()()),o&2){let n=i.$implicit;l(2),s("innerHTML",n.textHtml,Pe);}}function sn(o,i){o&1&&(w(0),c(1,9),y());}function dn(o,i){o&1&&(w(0),c(1,10),y());}function mn(o,i){if(o&1&&(a(0,"tr")(1,"td",50)(2,"div",51),T(3,sn,2,0,"ng-container",52)(4,dn,2,0,"ng-container",52),_()()()),o&2){let n=p();l(3),s("ngIf",n.search),l(),s("ngIf",!n.search);}}var Fo=(()=>{let i=class i extends Ae{router=d(de);route=d(se);auth=d(Se);notifier=d(k);confirmService=d(ue);videoCommentService=d(ft);markdownRenderer=d(St);bulkService=d(It);hooks=d(ut);pluginService=d(At);mode=R.required();comments;totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};videoCommentActions=[];bulkActions=[];inputFilters=[];get authUser(){return this.auth.getUser();}ngOnInit(){return W(this,null,function*(){this.initialize(),this.mode()==="admin"&&this.pluginService.addAction("admin-video-comment-list:load-data",()=>this.reloadDataInternal()),this.buildInputFilters(),yield this.buildCommentActions(),yield this.buildBulkActions();});}ngOnDestroy(){this.mode()==="admin"&&this.pluginService.removeAction("admin-video-comment-list:load-data");}buildCommentActions(){return W(this,null,function*(){let e=[[{label:"Ezabatu iruzkin hau",handler:t=>this.removeComment(t),isDisplayed:()=>this.mode()==="user"||this.authUser.hasRight(G.MANAGE_ANY_VIDEO_COMMENT)},{label:"Ezabatu kontu honen iruzkin guztiak",description:"Iruzkinak minutu batzuen ondoren ezabatzen dira",handler:t=>this.removeCommentsOfAccount(t),isDisplayed:()=>this.mode()==="admin"&&this.authUser.hasRight(G.MANAGE_ANY_VIDEO_COMMENT)}],[{label:"Approve this comment",handler:t=>this.approveComments([t]),isDisplayed:t=>this.mode()==="user"&&t.heldForReview}]];this.videoCommentActions=this.mode()==="admin"?yield this.hooks.wrapObject(e,"admin-comments","filter:admin-video-comments-list.actions.create.result"):e;});}buildBulkActions(){return W(this,null,function*(){let e=[{label:"Ezabatu",handler:t=>this.removeComments(t),isDisplayed:()=>this.mode()==="user"||this.authUser.hasRight(G.MANAGE_ANY_VIDEO_COMMENT),iconName:"delete"},{label:"Approve",handler:t=>this.approveComments(t),isDisplayed:t=>this.mode()==="user"&&t.every(r=>r.heldForReview),iconName:"tick"}];this.bulkActions=this.mode()==="admin"?yield this.hooks.wrapObject(e,"admin-comments","filter:admin-video-comments-list.bulk-actions.create.result"):e;});}buildInputFilters(){if(this.mode()==="admin"){this.inputFilters=[{title:"Iragazki aurreratuak",children:[{value:"local:true",label:"Iruzkin lokalak"},{value:"local:false",label:"Urrutiko iruzkinak"},{value:"localVideo:true",label:"Bideo lokaletako iruzkinak"}]}];return;}this.inputFilters=[{title:"Iragazki aurreratuak",children:[{value:"heldForReview:true",label:"Display comments awaiting your approval"}]}];}getIdentifier(){return"VideoCommentListAdminOwnerComponent";}toHtml(e){return this.markdownRenderer.textMarkdownToHTML({markdown:e,withHtml:!0,withEmoji:!0});}buildSearchAutoTag(e){let t=`autoTag:"${e}"`;return this.search?this.search+" "+t:t;}reloadDataInternal(){return W(this,null,function*(){let t=(this.mode()==="admin"?this.videoCommentService.listAdminVideoComments.bind(this.videoCommentService):this.videoCommentService.listVideoCommentsOfMyVideos.bind(this.videoCommentService))({pagination:this.pagination,sort:this.sort,search:this.search});try{let r=yield Fe(t);this.totalRecords=r.total,this.comments=[];for(let m of r.data)this.comments.push(new Rt(m,yield this.toHtml(m.text)));}catch(r){this.notifier.error(r.message);}});}approveComments(e){let t=e.map(r=>({videoId:r.video.id,commentId:r.id}));this.videoCommentService.approveComments(t).subscribe({next:()=>{this.notifier.success(ve("{count, plural, =1 {Comment approved.} other {{count} comments approved.}}",{count:t.length})),this.reloadData();},error:r=>this.notifier.error(r.message),complete:()=>this.selectedRows=[]});}removeComments(e){let t=e.map(r=>({videoId:r.video.id,commentId:r.id}));this.videoCommentService.deleteVideoComments(t).subscribe({next:()=>{this.notifier.success(ve("{count, plural, =1 {Iruzkin bat ezabatu da.} other {{count} iruzkin ezabatu dira.}}",{count:t.length})),this.reloadData();},error:r=>this.notifier.error(r.message),complete:()=>this.selectedRows=[]});}removeComment(e){this.videoCommentService.deleteVideoComment(e.video.id,e.id).subscribe({next:()=>this.reloadData(),error:t=>this.notifier.error(t.message)});}removeCommentsOfAccount(e){return W(this,null,function*(){let t="Ziur zaude "+e.by+" bideoaren iruzkin guztiak ezabatu nahi dituzula?";if((yield this.confirmService.confirm(t,"Ezabatu"))===!1)return;let m={accountName:e.by,scope:"instance"};this.bulkService.removeCommentsOf(m).subscribe({next:()=>{this.notifier.success(""+m.accountName+" bideoaren iruzkinak minutu batzuk barru ezabatuko dira");},error:A=>this.notifier.error(A.message)});});}};E(i,"\u0275fac",(()=>{let e;return function(r){return(e||(e=Y(i)))(r||i);};})()),E(i,"\u0275cmp",I({type:i,selectors:[["my-video-comment-list-admin-owner"]],inputs:{mode:[1,"mode"]},features:[F],decls:6,vars:15,consts:()=>{let e;e="Ekintza masiboak";let t;t="Berritu";let r;r="Hautatu errenkada guztiak";let m;m="Informazio gehiago";let A;A="Ekintzak";let h;h="Kontua";let v;v="Bideoa";let D;D="Iruzkina";let B;B="Auto tags";let q;q="Data "+"\uFFFD#19\uFFFD"+""+"\uFFFD/#19\uFFFD"+"";let j;j="Hautatu errenkada hau";let O;O="Ikusi iruzkin osoa";let We;We="Ireki kontua erlaitz berri batean";let we;we="Only display comments with this tag";let ye;ye="Iruzkindutako bideoa";let $e;$e="Pending review";let be;be="Ez da aurkitu uneko iragazkiekin bat datorren bideorik.";let He;return He="Ez da aurkitu iruzkinik.",[m,A,h,v,D,B,q,ye,$e,be,He,["dataKey","id",3,"onLazyLoad","selectionChange","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","lazyLoadOnInit","selectionPageOnly","showCurrentPageReport","currentPageReportTemplate","expandedRowKeys","selection"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[1,"caption"],["label",e,"theme","primary",3,"actions","entry",4,"ngIf"],[1,"ms-auto","right-form"],[3,"search","filters"],["label",t,"icon","refresh",3,"click"],["label",e,"theme","primary",3,"actions","entry"],["scope","col",2,"width","40px"],["ariaLabel",r],[1,"visually-hidden"],["scope","col",2,"width","70px"],["scope","col"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[3,"pSelectableRow"],[1,"checkbox-cell"],["ariaLabel",j,3,"value"],[1,"expand-cell"],["tooltip",O,3,"pRowToggler","expanded"],[1,"action-cell"],["placement","bottom-right","container","body","buttonSize","small",3,"ngClass","actions","entry"],["title",We,"target","_blank","rel","noopener noreferrer",3,"href"],[1,"chip","two-lines"],["actorType","account","size","32",3,"actor"],[1,"video"],["target","_blank","rel","noopener noreferrer",1,"text-decoration-none",3,"href"],[1,"c-hand","comment-content-cell",3,"pRowToggler"],["class","pt-badge badge-red float-start me-2",4,"ngIf"],[1,"comment-html"],[3,"innerHTML"],["title",we,1,"pt-badge","badge-secondary","me-1",3,"routerLink","queryParams"],[1,"c-hand",3,"pRowToggler"],[1,"pt-badge","badge-red","float-start","me-2"],["myAutoColspan","",1,"expand-cell"],["myAutoColspan",""],[1,"no-results"],[4,"ngIf"]];},template:function(t,r){t&1&&(a(0,"p-table",11),M("onLazyLoad",function(A){return r.loadLazy(A);}),Ke("selectionChange",function(A){return Qe(r.selectedRows,A)||(r.selectedRows=A),A;}),T(1,nn,6,2,"ng-template",12)(2,on,20,1,"ng-template",13)(3,_n,30,23,"ng-template",14)(4,ln,3,1,"ng-template",15)(5,mn,5,2,"ng-template",16),_()),t&2&&(s("value",r.comments)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("lazyLoadOnInit",!1)("selectionPageOnly",!0)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate())("expandedRowKeys",r.expandedRows),je("selection",r.selectedRows));},dependencies:[Re,ge,ce,Ne,gt,De,Me,Nt,Mt,pe,H,Oe,Dt,Te,V,Ie,P,Tt,fe,he,nt],styles:[`.moderation-expanded[_ngcontent-%COMP%]{font-size:90%;display:flex;flex-wrap:wrap;justify-content:space-between}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:end;min-width:100px;margin-inline-end:.3125rem}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:50%;max-width:500px}@media screen and (max-width: 1000px){.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.table-comment-link[_ngcontent-%COMP%], .table-account-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--fg)}.table-comment-link[_ngcontent-%COMP%]:focus:not(:focus-visible), .table-account-link[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.table-comment-link[_ngcontent-%COMP%]     p:last-child, .table-account-link[_ngcontent-%COMP%]     p:last-child{margin:0}.table-account-link[_ngcontent-%COMP%]{display:flex;flex-direction:column}my-abuse-details[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 1000px){.abuse-messages[_ngcontent-%COMP%]{justify-content:flex-start!important}}
/*# sourceMappingURL=moderation-RQPVRH5V.css.map */`,`my-global-icon[_ngcontent-%COMP%]{width:24px;height:24px}.video[_ngcontent-%COMP%]{display:flex;flex-direction:column}.video[_ngcontent-%COMP%]   em[_ngcontent-%COMP%]{font-size:11px}.video[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--fg);white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.comment-content-cell[_ngcontent-%COMP%] > .pt-badge[_ngcontent-%COMP%]{position:relative;top:2px}.comment-html[_ngcontent-%COMP%]    >div{max-height:22px}.comment-html[_ngcontent-%COMP%]     div, .comment-html[_ngcontent-%COMP%]     p{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.comment-html[_ngcontent-%COMP%]     p{margin:0}.right-form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;row-gap:.5rem}.right-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-inline-end:.625rem}@media screen and (max-width: 1000px){.video[_ngcontent-%COMP%]{align-items:flex-start!important}}
/*# sourceMappingURL=video-comment-list-admin-owner.component-T5WMGNAX.css.map */`]}));let o=i;return o;})();var jo=(()=>{let i=class i{localeId=d(Ze);video=R.required();badges={[X.PUBLIC]:"badge-green",[X.INTERNAL]:"badge-yellow",[X.PRIVATE]:"badge-grey",[X.PASSWORD_PROTECTED]:"badge-purple",[X.UNLISTED]:"badge-blue"};label;badgeClass;tooltip;ngOnChanges(){this.label=this.buildLabel(),this.badgeClass=this.buildBadgeClass(),this.tooltip=this.buildTooltip();}buildBadgeClass(){return this.badges[this.video().privacy.id];}buildLabel(){let e=this.video();return e.scheduledUpdate?"Programatuta":e.privacy.label;}buildTooltip(){let e=this.video();if(e.scheduledUpdate){let t=new Date(e.scheduledUpdate.updateAt.toString()).toLocaleString(this.localeId);return"Scheduled on "+t+"";}return this.buildLabel();}};E(i,"\u0275fac",function(t){return new(t||i)();}),E(i,"\u0275cmp",I({type:i,selectors:[["my-video-privacy-badge"]],inputs:{video:[1,"video"]},features:[Xe],decls:2,vars:3,consts:[[1,"pt-badge",3,"ngClass","ngbTooltip"]],template:function(t,r){t&1&&(a(0,"span",0),C(1),_()),t&2&&(s("ngClass",r.badgeClass)("ngbTooltip",r.tooltip),l(),z(" ",r.label,`
`));},dependencies:[le,P,me,V],encapsulation:2}));let o=i;return o;})();export{gn as a,Nn as b,Pn as c,U as d,Ao as e,Fo as f,jo as g};/**i18n:1cf7c077143c4c267fdafbe5508f191afcef21bad6aba22a3a8dc180e1003753*///# sourceMappingURL=chunk-QKZVJSPP.js.map