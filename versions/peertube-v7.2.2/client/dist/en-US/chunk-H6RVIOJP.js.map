{"version":3,"mappings":"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","names":["ɵɵelementStart","ɵɵi18n","ɵɵelementEnd","ɵɵlistener","hide_r2","ɵɵrestoreView","_r1","close","ɵɵresetView","ɵɵelement","ɵɵi18nStart","ɵɵi18nEnd","ctx_r2","ɵɵnextContext","doNotOpenAgain","AdminWelcomeModalComponent","userService","inject","UserService","modalService","NgbModal","notifier","Notifier","modal","viewChild","created","output","LS_KEYS","NO_WELCOME_MODAL","ngOnInit","emit","shouldOpen","user","hasOpenModals","noWelcomeModal","peertubeLocalStorage","getItem","show","open","centered","backdrop","keyboard","size","setItem","updateMyProfile","subscribe","next","logger","info","error","err","message","E","selectors","viewQuery","rf","ctx","z","u","B","e","j","outputs","decls","vars","consts","F","$localize","G","b","g","m","d","k","ɵɵtemplate","AdminWelcomeModalComponent_ng_template_0_Template","ɵɵtemplateRefExtractor","dependencies","GlobalIconComponent","styles","_AdminWelcomeModalComponent","_e"],"ignoreList":[],"sources":["src/app/modal/admin-welcome-modal.component.html","src/app/modal/admin-welcome-modal.component.ts"],"sourcesContent":["<ng-template #modal let-hide=\"close\">\n  <div class=\"modal-header\">\n    <h4 i18n class=\"modal-title\">Welcome to PeerTube, dear administrator!</h4>\n    <button class=\"border-0 p-0\" title=\"Close this modal\" i18n-title (click)=\"hide()\">\n      <my-global-icon iconName=\"cross\"></my-global-icon>\n    </button>\n  </div>\n\n  <div class=\"modal-body\">\n\n    <div class=\"block-documentation\">\n      <div class=\"columns\">\n        <a class=\"link-block\" href=\"https://docs.joinpeertube.org/maintain/tools\" target=\"_blank\" i18n-title title=\"Go to the CLI documentation\">\n          <h5 i18n class=\"link-primary\">CLI documentation</h5>\n\n          <div i18n>Upload or import videos, parse logs, prune storage directories, reset user password...</div>\n        </a>\n\n        <a class=\"link-block\" href=\"https://docs.joinpeertube.org/admin/following-instances\" target=\"_blank\" i18n-title title=\"Go to the admin documentation\">\n          <h5 i18n class=\"link-primary\">Admin documentation</h5>\n\n          <div i18n>Managing users, following other instances, dealing with spammers...</div>\n        </a>\n\n        <a class=\"link-block\" href=\"https://docs.joinpeertube.org/use/setup-account\" target=\"_blank\" i18n-title title=\"Go to the user documentation\">\n          <h5 i18n class=\"link-primary\">User documentation</h5>\n\n          <div i18n>Setup your account, managing video playlists, discover third-party applications...</div>\n        </a>\n      </div>\n    </div>\n\n    <div class=\"two-columns\">\n\n      <img class=\"mascot mascot-fw\" src=\"/client/assets/images/mascot/pointing.svg\" alt=\"mascot\">\n\n      <div class=\"block-links\">\n        <div i18n class=\"subtitle\">Useful links</div>\n\n        <ul>\n          <li i18n>\n            Official PeerTube website (news, support, contribute...): <a href=\"https://joinpeertube.org\" target=\"_blank\" rel=\"noopener noreferrer\">https://joinpeertube.org</a>\n          </li>\n\n          <li i18n>\n            Put your instance on the public PeerTube index: <a href=\"https://instances.joinpeertube.org/instances\">https://instances.joinpeertube.org/instances</a>\n          </li>\n        </ul>\n      </div>\n    </div>\n\n    <div class=\"two-columns\">\n      <img class=\"mascot\" src=\"/client/assets/images/mascot/happy.svg\" alt=\"mascot\">\n\n      <div class=\"block-configuration\">\n        <div i18n class=\"subtitle\">It's time to configure your instance!</div>\n\n        <p i18n>\n          Choosing your <strong>instance name</strong>, <strong>setting up a description</strong>, specifying <strong>who you are</strong>,\n          why <strong>you created your instance</strong> and <strong>how long</strong> you plan to <strong>maintain it</strong>\n          is very important for visitors to understand on what type of instance they are.\n        </p>\n\n        <p i18n>\n          If you want to open registrations, please decide what <strong>your moderation rules</strong> and <strong>instance\n          terms of service</strong> are, as well as specify the categories and languages and your moderators speak.\n          This way, you will help users to register on <strong>the appropriate</strong> PeerTube instance.\n        </p>\n      </div>\n    </div>\n  </div>\n\n  <div class=\"modal-footer inputs\">\n    <input\n      type=\"button\" role=\"button\" i18n-value value=\"Remind me later\" class=\"peertube-button secondary-button\"\n      (click)=\"hide()\" (key.enter)=\"hide()\"\n    >\n\n    <a i18n (click)=\"doNotOpenAgain(); hide()\" (key.enter)=\"doNotOpenAgain(); hide()\"\n       class=\"peertube-button-link primary-button\" href=\"/admin/settings/config/edit-custom\" target=\"_blank\"\n       rel=\"noopener noreferrer\" ngbAutofocus>\n      Configure my instance\n    </a>\n  </div>\n\n</ng-template>\n","import { Component, ElementRef, OnInit, inject, output, viewChild } from '@angular/core'\nimport { Notifier, User, UserService } from '@app/core'\nimport { GlobalIconComponent } from '@app/shared/shared-icons/global-icon.component'\nimport { NgbModal } from '@ng-bootstrap/ng-bootstrap'\nimport { logger } from '@root-helpers/logger'\nimport { peertubeLocalStorage } from '@root-helpers/peertube-web-storage'\n\n@Component({\n  selector: 'my-admin-welcome-modal',\n  templateUrl: './admin-welcome-modal.component.html',\n  styleUrls: [ './admin-welcome-modal.component.scss' ],\n  imports: [ GlobalIconComponent ]\n})\nexport class AdminWelcomeModalComponent implements OnInit {\n  private userService = inject(UserService)\n  private modalService = inject(NgbModal)\n  private notifier = inject(Notifier)\n\n  readonly modal = viewChild<ElementRef>('modal')\n\n  readonly created = output()\n\n  private LS_KEYS = {\n    NO_WELCOME_MODAL: 'no_welcome_modal'\n  }\n\n  ngOnInit () {\n    this.created.emit()\n  }\n\n  shouldOpen (user: User) {\n    if (this.modalService.hasOpenModals()) return false\n    if (user.noWelcomeModal === true) return false\n    if (peertubeLocalStorage.getItem(this.LS_KEYS.NO_WELCOME_MODAL) === 'true') return false\n\n    return true\n  }\n\n  show () {\n    this.modalService.open(this.modal(), {\n      centered: true,\n      backdrop: 'static',\n      keyboard: false,\n      size: 'lg'\n    })\n  }\n\n  doNotOpenAgain () {\n    peertubeLocalStorage.setItem(this.LS_KEYS.NO_WELCOME_MODAL, 'true')\n\n    this.userService.updateMyProfile({ noWelcomeModal: true })\n      .subscribe({\n        next: () => logger.info('We will not open the welcome modal again.'),\n\n        error: err => this.notifier.error(err.message)\n      })\n  }\n}\n"]}