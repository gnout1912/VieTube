import{a as Ce,b as ke}from"./chunk-HRQFMPLQ.js";import{b as A,c as N,e as ce,f as ge}from"./chunk-24ZAFI2J.js";import{B as ue,a as B,g as le,m as oe}from"./chunk-WO4VNXA3.js";import{Bb as v,Bc as P,Cb as b,Dc as ne,Ha as _,Hb as J,Hc as se,Ib as X,Ic as ae,Jb as S,Kb as x,La as g,Oc as re,Pc as F,Ra as z,Sa as M,Ta as Q,Ub as Y,Vb as $,Wb as ee,X as y,Xb as T,Ya as w,Z as L,Zb as te,aa as q,bf as de,db as I,eb as u,ef as me,ff as fe,gb as G,ha as p,ia as d,ib as H,me as he,nb as C,nc as E,ne as pe,ob as k,oc as o,pa as c,pc as R,qb as W,rb as Z,sa as j,ta as f,tb as V,ua as K,uc as ie,za as U}from"./chunk-F7FAPFPY.js";import{i as h}from"./chunk-AI7IVZV2.js";var we=["input"];function be(r,a){if(r&1){let m=V();C(0,"TimesIcon",5),v("click",function(){p(m);let i=b(2);return d(i.clear())}),k()}r&2&&(u("styleClass","p-inputmask-clear-icon"),I("data-pc-section","clearIcon"))}function ye(r,a){}function Me(r,a){r&1&&w(0,ye,0,0,"ng-template")}function Ie(r,a){if(r&1){let m=V();C(0,"span",6),v("click",function(){p(m);let i=b(2);return d(i.clear())}),w(1,Me,1,0,null,7),k()}if(r&2){let m=b(2);I("data-pc-section","clearIcon"),_(),u("ngTemplateOutlet",m.clearIconTemplate)}}function Ve(r,a){if(r&1&&(W(0),w(1,be,1,2,"TimesIcon",3)(2,Ie,2,2,"span",4),Z()),r&2){let m=b();_(),u("ngIf",!m.clearIconTemplate),_(),u("ngIf",m.clearIconTemplate)}}var Te={provide:B,useExisting:y(()=>O),multi:!0},O=(()=>{let a=class a{document;platformId;el;cd;config;type="text";slotChar="_";autoClear=!0;showClear=!1;style;inputId;styleClass;placeholder;size;maxlength;tabindex;title;variant="outlined";ariaLabel;ariaLabelledBy;ariaRequired;disabled;readonly;unmask;name;required;characterPattern="[A-Za-z]";autofocus;set autoFocus(t){this.autofocus=t,console.warn("autoFocus is deprecated. Use autofocus property instead.")}autocomplete;keepBuffer=!1;get mask(){return this._mask}set mask(t){this._mask=t,this.initMask(),this.writeValue(""),this.onModelChange(this.value)}onComplete=new c;onFocus=new c;onBlur=new c;onInput=new c;onKeydown=new c;onClear=new c;inputViewChild;templates;clearIconTemplate;value;_mask;onModelChange=()=>{};onModelTouched=()=>{};input;filled;defs;tests;partialPosition;firstNonMaskPos;lastRequiredNonMaskPos;len;oldVal;buffer;defaultBuffer;focusText;caretTimeoutId;androidChrome=!0;focused;_variant="outlined";get inputClass(){return{"p-inputmask":!0}}constructor(t,i,e,n,s){this.document=t,this.platformId=i,this.el=e,this.cd=n,this.config=s}ngOnInit(){if(F(this.platformId)){let t=navigator.userAgent;this.androidChrome=/chrome/i.test(t)&&/android/i.test(t)}this.initMask()}ngAfterContentInit(){this.templates.forEach(t=>{switch(t.getType()){case"clearicon":this.clearIconTemplate=t.template;break}})}initMask(){this.tests=[],this.partialPosition=this.mask.length,this.len=this.mask.length,this.firstNonMaskPos=null,this.defs={9:"[0-9]",a:this.characterPattern,"*":`${this.characterPattern}|[0-9]`};let t=this.mask.split("");for(let i=0;i<t.length;i++){let e=t[i];e=="?"?(this.len--,this.partialPosition=i):this.defs[e]?(this.tests.push(new RegExp(this.defs[e])),this.firstNonMaskPos===null&&(this.firstNonMaskPos=this.tests.length-1),i<this.partialPosition&&(this.lastRequiredNonMaskPos=this.tests.length-1)):this.tests.push(null)}this.buffer=[];for(let i=0;i<t.length;i++){let e=t[i];e!="?"&&(this.defs[e]?this.buffer.push(this.getPlaceholder(i)):this.buffer.push(e))}this.defaultBuffer=this.buffer.join("")}writeValue(t){this.value=t,this.inputViewChild&&this.inputViewChild.nativeElement&&(this.value==null||this.value==null?this.inputViewChild.nativeElement.value="":this.inputViewChild.nativeElement.value=this.value,this.checkVal(),this.focusText=this.inputViewChild.nativeElement.value,this.updateFilledState())}registerOnChange(t){this.onModelChange=t}registerOnTouched(t){this.onModelTouched=t}setDisabledState(t){this.disabled=t,this.cd.markForCheck()}caret(t,i){let e,n,s;if(!(!this.inputViewChild?.nativeElement.offsetParent||this.inputViewChild.nativeElement!==this.inputViewChild.nativeElement.ownerDocument.activeElement))if(typeof t=="number")n=t,s=typeof i=="number"?i:n,this.inputViewChild.nativeElement.setSelectionRange?this.inputViewChild.nativeElement.setSelectionRange(n,s):this.inputViewChild.nativeElement.createTextRange&&(e=this.inputViewChild.nativeElement.createTextRange(),e.collapse(!0),e.moveEnd("character",s),e.moveStart("character",n),e.select());else return this.inputViewChild.nativeElement.setSelectionRange?(n=this.inputViewChild.nativeElement.selectionStart,s=this.inputViewChild.nativeElement.selectionEnd):this.document&&this.document.selection.createRange&&(e=this.document.createRange(),n=0-e.duplicate().moveStart("character",-1e5),s=n+e.text.length),{begin:n,end:s}}isCompleted(){let t;for(let i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++)if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i))return!1;return!0}getPlaceholder(t){return t<this.slotChar.length?this.slotChar.charAt(t):this.slotChar.charAt(0)}seekNext(t){for(;++t<this.len&&!this.tests[t];);return t}seekPrev(t){for(;--t>=0&&!this.tests[t];);return t}shiftL(t,i){let e,n;if(!(t<0)){for(e=t,n=this.seekNext(i);e<this.len;e++)if(this.tests[e]){if(n<this.len&&this.tests[e].test(this.buffer[n]))this.buffer[e]=this.buffer[n],this.buffer[n]=this.getPlaceholder(n);else break;n=this.seekNext(n)}this.writeBuffer(),this.caret(Math.max(this.firstNonMaskPos,t))}}shiftR(t){let i,e,n,s;for(i=t,e=this.getPlaceholder(t);i<this.len;i++)if(this.tests[i])if(n=this.seekNext(i),s=this.buffer[i],this.buffer[i]=e,n<this.len&&this.tests[n].test(s))e=s;else break}handleAndroidInput(t){var i=this.inputViewChild?.nativeElement.value,e=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>i.length){for(this.checkVal(!0);e.begin>0&&!this.tests[e.begin];)e.begin--;if(e.begin===0)for(;e.begin<this.firstNonMaskPos&&!this.tests[e.begin];)e.begin++;setTimeout(()=>{let n=e.begin,s=this.seekNext(n);this.caret(n,n),this.clearBuffer(n,s-1),this.keepBuffer?this.shiftL(n,s-2):this.shiftL(n,s-1),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}else{for(this.checkVal(!0);e.begin<this.len&&!this.tests[e.begin-1];)e.begin++;setTimeout(()=>{this.caret(e.begin,e.begin),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}}onInputBlur(t){if(this.focused=!1,this.onModelTouched(),this.keepBuffer||this.checkVal(),this.updateFilledState(),this.onBlur.emit(t),this.inputViewChild?.nativeElement.value!=this.focusText||this.inputViewChild?.nativeElement.value!=this.value){this.updateModel(t);let i=this.document.createEvent("HTMLEvents");i.initEvent("change",!0,!1),this.inputViewChild?.nativeElement.dispatchEvent(i)}}onInputKeydown(t){if(this.readonly)return;let i=t.which||t.keyCode,e,n,s,l;F(this.platformId)&&(l=/iphone/i.test(N.getUserAgent())),this.oldVal=this.inputViewChild?.nativeElement.value,this.onKeydown.emit(t),i===8||i===46||l&&i===127?(e=this.caret(),n=e.begin,s=e.end,s-n===0&&(n=i!==46?this.seekPrev(n):s=this.seekNext(n-1),s=i===46?this.seekNext(s):s),this.clearBuffer(n,s),this.keepBuffer?this.shiftL(n,s-2):this.shiftL(n,s-1),this.updateModel(t),this.onInput.emit(t),t.preventDefault()):i===13?(this.onInputBlur(t),this.updateModel(t)):i===27&&(this.inputViewChild.nativeElement.value=this.focusText,this.caret(0,this.checkVal()),this.updateModel(t),t.preventDefault())}onKeyPress(t){if(!this.readonly){var i=t.which||t.keyCode,e=this.caret(),n,s,l,D;t.ctrlKey||t.altKey||t.metaKey||i<32||i>34&&i<41||(i&&i!==13&&(e.end-e.begin!==0&&(this.clearBuffer(e.begin,e.end),this.shiftL(e.begin,e.end-1)),n=this.seekNext(e.begin-1),n<this.len&&(s=String.fromCharCode(i),this.tests[n].test(s)&&(this.shiftR(n),this.buffer[n]=s,this.writeBuffer(),l=this.seekNext(n),N.isClient()&&/android/i.test(N.getUserAgent())?setTimeout(()=>{this.caret(l)},0):this.caret(l),e.begin<=this.lastRequiredNonMaskPos&&(D=this.isCompleted()),this.onInput.emit(t))),t.preventDefault()),this.updateModel(t),this.updateFilledState(),D&&this.onComplete.emit())}}clearBuffer(t,i){if(!this.keepBuffer){let e;for(e=t;e<i&&e<this.len;e++)this.tests[e]&&(this.buffer[e]=this.getPlaceholder(e))}}writeBuffer(){this.inputViewChild.nativeElement.value=this.buffer.join("")}checkVal(t){let i=this.inputViewChild?.nativeElement.value,e=-1,n,s,l;for(n=0,l=0;n<this.len;n++)if(this.tests[n]){for(this.buffer[n]=this.getPlaceholder(n);l++<i.length;)if(s=i.charAt(l-1),this.tests[n].test(s)){this.keepBuffer||(this.buffer[n]=s),e=n;break}if(l>i.length){this.clearBuffer(n+1,this.len);break}}else this.buffer[n]===i.charAt(l)&&l++,n<this.partialPosition&&(e=n);return t?this.writeBuffer():e+1<this.partialPosition?this.autoClear||this.buffer.join("")===this.defaultBuffer?(this.inputViewChild?.nativeElement.value&&(this.inputViewChild.nativeElement.value=""),this.clearBuffer(0,this.len)):this.writeBuffer():(this.writeBuffer(),this.inputViewChild.nativeElement.value=this.inputViewChild?.nativeElement.value.substring(0,e+1)),this.partialPosition?n:this.firstNonMaskPos}onInputFocus(t){if(this.readonly)return;this.focused=!0,clearTimeout(this.caretTimeoutId);let i;this.focusText=this.inputViewChild?.nativeElement.value,i=this.keepBuffer?this.inputViewChild?.nativeElement.value.length:this.checkVal(),this.caretTimeoutId=setTimeout(()=>{this.inputViewChild?.nativeElement===this.inputViewChild?.nativeElement.ownerDocument.activeElement&&(this.writeBuffer(),i==this.mask?.replace("?","").length?this.caret(0,i):this.caret(i))},10),this.onFocus.emit(t)}onInputChange(t){this.androidChrome?this.handleAndroidInput(t):this.handleInputChange(t),this.onInput.emit(t)}handleInputChange(t){this.readonly||this.disabled||setTimeout(()=>{var i=this.checkVal(!0);this.caret(i),this.updateModel(t),this.isCompleted()&&this.onComplete.emit()},0)}getUnmaskedValue(){let t=[];for(let i=0;i<this.buffer.length;i++){let e=this.buffer[i];this.tests[i]&&e!=this.getPlaceholder(i)&&t.push(e)}return t.join("")}updateModel(t){let i=this.unmask?this.getUnmaskedValue():t.target.value;(i!==null||i!==void 0)&&(this.value=i,this.onModelChange(this.value))}updateFilledState(){this.filled=this.inputViewChild?.nativeElement&&this.inputViewChild.nativeElement.value!=""}focus(){this.inputViewChild?.nativeElement.focus()}clear(){this.inputViewChild.nativeElement.value="",this.value=null,this.onModelChange(this.value),this.onClear.emit()}};h(a,"\u0275fac",function(i){return new(i||a)(g(ie),g(U),g(K),g(E),g(de))}),h(a,"\u0275cmp",M({type:a,selectors:[["p-inputMask"]],contentQueries:function(i,e,n){if(i&1&&J(n,me,4),i&2){let s;S(s=x())&&(e.templates=s)}},viewQuery:function(i,e){if(i&1&&X(we,7),i&2){let n;S(n=x())&&(e.inputViewChild=n.first)}},hostAttrs:[1,"p-element"],hostVars:6,hostBindings:function(i,e){i&2&&G("p-inputwrapper-filled",e.filled)("p-inputwrapper-focus",e.focused)("p-inputmask-clearable",e.showClear&&!e.disabled)},inputs:{type:"type",slotChar:"slotChar",autoClear:[2,"autoClear","autoClear",o],showClear:[2,"showClear","showClear",o],style:"style",inputId:"inputId",styleClass:"styleClass",placeholder:"placeholder",size:[2,"size","size",R],maxlength:[2,"maxlength","maxlength",R],tabindex:"tabindex",title:"title",variant:"variant",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",ariaRequired:[2,"ariaRequired","ariaRequired",o],disabled:[2,"disabled","disabled",o],readonly:[2,"readonly","readonly",o],unmask:[2,"unmask","unmask",o],name:"name",required:[2,"required","required",o],characterPattern:"characterPattern",autofocus:[2,"autofocus","autofocus",o],autoFocus:[2,"autoFocus","autoFocus",o],autocomplete:"autocomplete",keepBuffer:[2,"keepBuffer","keepBuffer",o],mask:"mask"},outputs:{onComplete:"onComplete",onFocus:"onFocus",onBlur:"onBlur",onInput:"onInput",onKeydown:"onKeydown",onClear:"onClear"},standalone:!1,features:[T([Te])],decls:3,vars:24,consts:[["input",""],["pInputText","","pAutoFocus","",3,"focus","blur","keydown","keypress","input","paste","ngClass","ngStyle","disabled","readonly","variant","autofocus"],[4,"ngIf"],[3,"styleClass","click",4,"ngIf"],["class","p-inputmask-clear-icon",3,"click",4,"ngIf"],[3,"click","styleClass"],[1,"p-inputmask-clear-icon",3,"click"],[4,"ngTemplateOutlet"]],template:function(i,e){if(i&1){let n=V();C(0,"input",1,0),v("focus",function(l){return p(n),d(e.onInputFocus(l))})("blur",function(l){return p(n),d(e.onInputBlur(l))})("keydown",function(l){return p(n),d(e.onInputKeydown(l))})("keypress",function(l){return p(n),d(e.onKeyPress(l))})("input",function(l){return p(n),d(e.onInputChange(l))})("paste",function(l){return p(n),d(e.handleInputChange(l))}),k(),w(2,Ve,3,2,"ng-container",2)}i&2&&(H(e.styleClass),u("ngClass",e.inputClass)("ngStyle",e.style)("disabled",e.disabled)("readonly",e.readonly)("variant",e.variant)("autofocus",e.autofocus),I("id",e.inputId)("type",e.type)("name",e.name)("placeholder",e.placeholder)("title",e.title)("size",e.size)("autocomplete",e.autocomplete)("maxlength",e.maxlength)("tabindex",e.tabindex)("aria-label",e.ariaLabel)("aria-labelledBy",e.ariaLabelledBy)("aria-required",e.ariaRequired)("required",e.required)("data-pc-name","inputmask")("data-pc-section","root"),_(2),u("ngIf",e.value!=null&&e.filled&&e.showClear&&!e.disabled))},dependencies:()=>[P,ne,ae,se,Ce,ce,A],styles:[`@layer primeng{.p-inputmask-clear-icon{position:absolute;top:50%;margin-top:-.5rem;cursor:pointer}.p-inputmask-clearable{position:relative}}
`],encapsulation:2,changeDetection:0}));let r=a;return r})(),ve=(()=>{let a=class a{};h(a,"\u0275fac",function(i){return new(i||a)}),h(a,"\u0275mod",Q({type:a})),h(a,"\u0275inj",L({imports:[re,ke,ge,A,fe]}));let r=a;return r})();var Pe=r=>({"with-border":r}),rt=(()=>{let a=class a{changeDetector=q(E);maxTimestamp=f(void 0);timestamp=z(void 0);disabled=f(!1,{transform:o});enableBorder=f(!1,{transform:o});inputName=f(void 0);mask=f("99:99:99");formatter=f(t=>pe({seconds:t,format:"full",symbol:":"}));parser=f(t=>he(t));inputBlur=j();timestampString;ngOnInit(){this.writeValue(this.timestamp()||0)}propagateChange=t=>{};writeValue(t){this.timestamp.set(t),this.timestampString=this.formatter()(this.timestamp())}registerOnChange(t){this.propagateChange=t}registerOnTouched(){}onModelChange(){this.timestamp.set(this.parser()(this.timestampString)),this.propagateChange(this.timestamp())}onBlur(){let t=this.maxTimestamp();t&&this.timestamp()>t&&(this.writeValue(t),this.changeDetector.detectChanges(),this.propagateChange(this.timestamp())),this.inputBlur.emit()}};h(a,"\u0275fac",function(i){return new(i||a)}),h(a,"\u0275cmp",M({type:a,selectors:[["my-timestamp-input"]],inputs:{maxTimestamp:[1,"maxTimestamp"],timestamp:[1,"timestamp"],disabled:[1,"disabled"],enableBorder:[1,"enableBorder"],inputName:[1,"inputName"],mask:[1,"mask"],formatter:[1,"formatter"],parser:[1,"parser"]},outputs:{timestamp:"timestampChange",inputBlur:"inputBlur"},features:[T([{provide:B,useExisting:y(()=>a),multi:!0}])],decls:1,vars:7,consts:[["slotChar","0",3,"ngModelChange","onBlur","disabled","ngModel","ngClass","mask","inputId"]],template:function(i,e){i&1&&(C(0,"p-inputMask",0),ee("ngModelChange",function(s){return $(e.timestampString,s)||(e.timestampString=s),s}),v("onBlur",function(){return e.onBlur()})("ngModelChange",function(){return e.onModelChange()}),k()),i&2&&(u("disabled",e.disabled()),Y("ngModel",e.timestampString),u("ngClass",te(5,Pe,e.enableBorder()))("mask",e.mask())("inputId",e.inputName()))},dependencies:[ve,O,ue,le,oe,P],styles:[`p-inputmask.with-border[_ngcontent-%COMP%]{--input-border-color: var(--bg-secondary-500)}p-inputmask[_ngcontent-%COMP%]     input{text-align:center;font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:100%;max-width:100%;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}p-inputmask[_ngcontent-%COMP%]     input::placeholder{color:var(--input-placeholder);font-size:14px}p-inputmask[_ngcontent-%COMP%]     input[readonly]{color:var(--fg-300)}p-inputmask[_ngcontent-%COMP%]     input:focus, p-inputmask[_ngcontent-%COMP%]     input:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}p-inputmask[_ngcontent-%COMP%]     input[disabled]{color:var(--fg-300);opacity:.8}@media screen and (max-width: calc(100% + 40px)){p-inputmask[_ngcontent-%COMP%]     input{width:100%}}p-inputmask[_ngcontent-%COMP%]     input:focus-within, p-inputmask[_ngcontent-%COMP%]     input:focus{box-shadow:0 0 0 .2rem var(--fg-100)}p-inputmask[_ngcontent-%COMP%]     input:disabled{background:var(--bg);opacity:.5}
/*# sourceMappingURL=timestamp-input.component-4MLZG3ZD.css.map */`]}));let r=a;return r})();export{rt as a};
/**i18n:1cf7c077143c4c267fdafbe5508f191afcef21bad6aba22a3a8dc180e1003753*/
//# sourceMappingURL=chunk-MLUQ7CKS.js.map
