(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(i){if(i.ep)return;i.ep=!0;const o=e(i);fetch(i.href,o)}})();const zt={"filter:api.trending-videos.videos.list.params":!0,"filter:api.trending-videos.videos.list.result":!0,"filter:api.most-liked-videos.videos.list.params":!0,"filter:api.most-liked-videos.videos.list.result":!0,"filter:api.local-videos.videos.list.params":!0,"filter:api.local-videos.videos.list.result":!0,"filter:api.recently-added-videos.videos.list.params":!0,"filter:api.recently-added-videos.videos.list.result":!0,"filter:api.browse-videos.videos.list.params":!0,"filter:api.browse-videos.videos.list.result":!0,"filter:api.user-subscriptions-videos.videos.list.params":!0,"filter:api.user-subscriptions-videos.videos.list.result":!0,"filter:api.video-watch.video.get.params":!0,"filter:api.video-watch.video.get.result":!0,"filter:api.video-watch.video-playlist-elements.get.params":!0,"filter:api.video-watch.video-playlist-elements.get.result":!0,"filter:api.video-watch.video-threads.list.params":!0,"filter:api.video-watch.video-threads.list.result":!0,"filter:api.video-watch.video-thread-replies.list.params":!0,"filter:api.video-watch.video-thread-replies.list.result":!0,"filter:api.search.videos.list.params":!0,"filter:api.search.videos.list.result":!0,"filter:api.search.video-channels.list.params":!0,"filter:api.search.video-channels.list.result":!0,"filter:api.search.video-playlists.list.params":!0,"filter:api.search.video-playlists.list.result":!0,"filter:api.signup.registration.create.params":!0,"filter:api.my-library.video-playlist-elements.list.params":!0,"filter:api.my-library.video-playlist-elements.list.result":!0,"filter:internal.video-watch.player.build-options.params":!0,"filter:internal.video-watch.player.build-options.result":!0,"filter:internal.video-watch.player.load-options.params":!0,"filter:internal.video-watch.player.load-options.result":!0,"filter:internal.common.svg-icons.get-content.params":!0,"filter:internal.common.svg-icons.get-content.result":!0,"filter:left-menu.links.create.result":!0,"filter:upload.messages.create.result":!0,"filter:login.instance-about-plugin-panels.create.result":!0,"filter:signup.instance-about-plugin-panels.create.result":!0,"filter:share.video-embed-code.build.params":!0,"filter:share.video-embed-code.build.result":!0,"filter:share.video-playlist-embed-code.build.params":!0,"filter:share.video-playlist-embed-code.build.result":!0,"filter:share.video-embed-url.build.params":!0,"filter:share.video-embed-url.build.result":!0,"filter:share.video-playlist-embed-url.build.params":!0,"filter:share.video-playlist-embed-url.build.result":!0,"filter:share.video-url.build.params":!0,"filter:share.video-url.build.result":!0,"filter:share.video-playlist-url.build.params":!0,"filter:share.video-playlist-url.build.result":!0,"filter:video-watch.video-plugin-metadata.result":!0,"filter:internal.player.videojs.options.result":!0,"filter:internal.player.p2p-media-loader.options.result":!0,"filter:admin-users-list.bulk-actions.create.result":!0,"filter:admin-video-comments-list.actions.create.result":!0,"filter:admin-video-comments-list.bulk-actions.create.result":!0,"filter:user-moderation.actions.create.result":!0,"filter:admin-abuse-list.actions.create.result":!0},jt={"action:application.init":!0,"action:video-watch.init":!0,"action:video-watch.video.loaded":!0,"action:video-watch.player.loaded":!0,"action:video-watch.video-threads.loaded":!0,"action:video-watch.video-thread-replies.loaded":!0,"action:video-channel-create.init":!0,"action:video-channel-update.init":!0,"action:video-channel-update.video-channel.loaded":!0,"action:video-channel-videos.init":!0,"action:video-channel-videos.video-channel.loaded":!0,"action:video-channel-videos.videos.loaded":!0,"action:video-channel-playlists.init":!0,"action:video-channel-playlists.video-channel.loaded":!0,"action:video-channel-playlists.playlists.loaded":!0,"action:video-edit.init":!0,"action:video-edit.form.updated":!0,"action:login.init":!0,"action:search.init":!0,"action:router.navigation-end":!0,"action:signup.register.init":!0,"action:admin-plugin-settings.init":!0,"action:video-upload.init":!0,"action:video-url-import.init":!0,"action:video-torrent-import.init":!0,"action:go-live.init":!0,"action:auth-user.logged-in":!0,"action:auth-user.logged-out":!0,"action:auth-user.information-loaded":!0,"action:modal.video-download.shown":!0,"action:modal.share.shown":!0,"action:embed.player.loaded":!0},Bt=Object.assign({},zt,jt),Ht={"filter:api.videos.list.params":!0,"filter:api.videos.list.result":!0,"filter:api.video-playlist.videos.list.params":!0,"filter:api.video-playlist.videos.list.result":!0,"filter:api.accounts.videos.list.params":!0,"filter:api.accounts.videos.list.result":!0,"filter:api.video-channels.videos.list.params":!0,"filter:api.video-channels.videos.list.result":!0,"filter:api.user.me.videos.list.params":!0,"filter:api.user.me.videos.list.result":!0,"filter:api.overviews.videos.list.params":!0,"filter:api.overviews.videos.list.result":!0,"filter:api.user.me.subscription-videos.list.params":!0,"filter:api.user.me.subscription-videos.list.result":!0,"filter:api.search.videos.local.list.params":!0,"filter:api.search.videos.local.list.result":!0,"filter:api.search.videos.index.list.params":!0,"filter:api.search.videos.index.list.result":!0,"filter:api.search.video-channels.local.list.params":!0,"filter:api.search.video-channels.local.list.result":!0,"filter:api.search.video-channels.index.list.params":!0,"filter:api.search.video-channels.index.list.result":!0,"filter:api.search.video-playlists.local.list.params":!0,"filter:api.search.video-playlists.local.list.result":!0,"filter:api.search.video-playlists.index.list.params":!0,"filter:api.search.video-playlists.index.list.result":!0,"filter:api.video.get.result":!0,"filter:api.video-channels.list.params":!0,"filter:api.video-channels.list.result":!0,"filter:api.video-channel.get.result":!0,"filter:api.video.upload.accept.result":!0,"filter:api.live-video.create.accept.result":!0,"filter:api.video.pre-import-url.accept.result":!0,"filter:api.video.pre-import-torrent.accept.result":!0,"filter:api.video.post-import-url.accept.result":!0,"filter:api.video.post-import-torrent.accept.result":!0,"filter:api.video.update-file.accept.result":!0,"filter:api.video.user-import.accept.result":!0,"filter:api.video-thread.create.accept.result":!0,"filter:api.video-comment-reply.create.accept.result":!0,"filter:api.video.upload.video-attribute.result":!0,"filter:api.video.import-url.video-attribute.result":!0,"filter:api.video.import-torrent.video-attribute.result":!0,"filter:api.video.live.video-attribute.result":!0,"filter:api.video.user-import.video-attribute.result":!0,"filter:api.video-threads.list.params":!0,"filter:api.video-threads.list.result":!0,"filter:api.video-thread-comments.list.params":!0,"filter:api.video-thread-comments.list.result":!0,"filter:api.server.stats.get.result":!0,"filter:video.auto-blacklist.result":!0,"filter:api.user.signup.allowed.result":!0,"filter:api.user.request-signup.allowed.result":!0,"filter:api.download.video.allowed.result":!0,"filter:api.download.generated-video.allowed.result":!0,"filter:api.download.torrent.allowed.result":!0,"filter:html.embed.video.allowed.result":!0,"filter:html.embed.video-playlist.allowed.result":!0,"filter:html.client.json-ld.result":!0,"filter:job-queue.process.params":!0,"filter:job-queue.process.result":!0,"filter:transcoding.manual.resolutions-to-transcode.result":!0,"filter:transcoding.auto.resolutions-to-transcode.result":!0,"filter:activity-pub.remote-video-comment.create.accept.result":!0,"filter:activity-pub.activity.context.build.result":!0,"filter:activity-pub.video.json-ld.build.result":!0,"filter:feed.podcast.rss.create-custom-xmlns.result":!0,"filter:feed.podcast.channel.create-custom-tags.result":!0,"filter:feed.podcast.video.create-custom-tags.result":!0,"filter:api.user.me.get.result":!0,"filter:oauth.password-grant.get-user.params":!0,"filter:api.email-verification.ask-send-verify-email.body":!0,"filter:api.users.ask-reset-password.body":!0,"filter:email.subject.result":!0,"filter:email.template-path.result":!0},Nt={"action:application.listening":!0,"action:notifier.notification.created":!0,"action:api.video.updated":!0,"action:api.video.deleted":!0,"action:api.video.uploaded":!0,"action:api.video.viewed":!0,"action:api.video.file-updated":!0,"action:api.video-channel.created":!0,"action:api.video-channel.updated":!0,"action:api.video-channel.deleted":!0,"action:api.live-video.created":!0,"action:live.video.state.updated":!0,"action:api.video-thread.created":!0,"action:api.video-comment-reply.created":!0,"action:api.video-comment.deleted":!0,"action:api.video-caption.created":!0,"action:api.video-caption.deleted":!0,"action:api.user.blocked":!0,"action:api.user.unblocked":!0,"action:api.user.registered":!0,"action:api.user.requested-registration":!0,"action:api.user.created":!0,"action:api.user.deleted":!0,"action:api.user.updated":!0,"action:api.user.oauth2-got-token":!0,"action:api.video-playlist-element.created":!0,"action:activity-pub.remote-video.created":!0,"action:activity-pub.remote-video.updated":!0};Object.assign({},Ht,Nt);const ye={STATIC:1,ACTION:2,FILTER:3},Ze={PLUGIN:1,THEME:2};function $t(r,t,e){return r.sort((n,i)=>{const o=n[t],s=i[t];return o<s?-1:o===s?0:1})}function Qe(r){return r&&typeof r.then=="function"}function Dt(r){return r&&typeof r.catch=="function"}const Gt={"en-US":"English",ar:"العربية","ca-ES":"Català","cs-CZ":"Čeština","de-DE":"Deutsch","el-GR":"ελληνικά",eo:"Esperanto","es-ES":"Español","eu-ES":"Euskara","fa-IR":"فارسی","fi-FI":"Suomi","fr-FR":"Français",gd:"Gàidhlig","gl-ES":"Galego",hr:"Hrvatski","hu-HU":"Magyar",is:"Íslenska","it-IT":"Italiano","ja-JP":"日本語",kab:"Taqbaylit","nb-NO":"Norsk bokmål","nl-NL":"Nederlands",nn:"Norsk nynorsk",oc:"Occitan","pl-PL":"Polski","pt-BR":"Português (Brasil)","pt-PT":"Português (Portugal)","ru-RU":"Pусский","sk-SK":"Slovenčina",sq:"Shqip","sv-SE":"Svenska","th-TH":"ไทย",tok:"Toki Pona","tr-TR":"Türkçe","uk-UA":"украї́нська мо́ва","vi-VN":"Tiếng Việt","zh-Hans-CN":"简体中文（中国）","zh-Hant-TW":"繁體中文（台灣）"},mt={"ar-001":"ar",ca:"ca-ES",cs:"cs-CZ",de:"de-DE",el:"el-GR",en:"en-US",es:"es-ES",eu:"eu-ES",fa:"fa-IR",fi:"fi-FI",fr:"fr-FR",gl:"gl-ES",hu:"hu-HU",it:"it-IT",ja:"ja-JP",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-BR",ru:"ru-RU",sk:"sk-SK",sv:"sv-SE",th:"th-TH",tr:"tr-TR",uk:"uk-UA",vi:"vi-VN","zh-CN":"zh-Hans-CN","zh-Hans":"zh-Hans-CN","zh-Hant":"zh-Hant-TW","zh-TW":"zh-Hant-TW",zh:"zh-Hans-CN"},wt=Object.keys(Gt).concat(Object.keys(mt));function Xt(){return"en-US"}function Zr(r){return et(r)===et(Xt())}function Qr(r,t){return t?.[r]?t[r]:r}wt.map(r=>"/"+r);function en(r){return wt.includes(r)}function et(r){return r&&(mt[r]||r)}function tn(r){return r.includes("-")===!1?r:r.split("-")[0]}function Vt(r){return r.startsWith("filter:")?ye.FILTER:r.startsWith("action:")?ye.ACTION:ye.STATIC}async function Ut(r){const{handler:t,hookType:e,result:n,params:i,onError:o}=r;try{if(e===ye.FILTER){const f=t(n,i);return Qe(f)?await f:f}const s=t(i);if(e===ye.STATIC){Qe(s)&&await s;return}if(e===ye.ACTION){Dt(s)&&s.catch(f=>o(f));return}}catch(s){o(s)}return n}function qt(r,t){return r+`/plugins/${t.name}/${t.version}/auth/${t.authName}`}const de=new Map;function tt(r){return new Proxy(r,{set:function(t,e,n){return Object.prototype.hasOwnProperty.call(He,e)?r[e]=n:r.setItem(e,n),!0},get:function(t,e){if(typeof r[e]=="function")return r[e];if(de.has(e))return r.getItem(e)}})}class He{getItem(t){const e=String(t);return de.has(t)?String(de.get(e)):null}setItem(t,e){de.set(String(t),String(e))}removeItem(t){de.delete(t)}clear(){de.clear()}key(t){if(arguments.length===0)throw new TypeError('Failed to execute "key" on "Storage": 1 argument required, but only 0 present.');return Array.from(de.keys())[t]}get length(){return de.size}}let ke,Xe;function St(){const r=new He,t=new He;ke=tt(r),Xe=tt(t)}try{ke=localStorage,Xe=sessionStorage}catch{St()}(!ke||!Xe)&&St();const rn={P2P_ENABLED:"peertube-videojs-webtorrent_enabled"},oe={ACCESS_TOKEN:"access_token",REFRESH_TOKEN:"refresh_token",TOKEN_TYPE:"token_type"};class Ve{accessToken;refreshToken;tokenType;constructor(t){t&&(this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,t.tokenType==="bearer"?this.tokenType="Bearer":this.tokenType=t.tokenType)}static getUserTokens(t){const e=t.getItem(oe.ACCESS_TOKEN),n=t.getItem(oe.REFRESH_TOKEN),i=t.getItem(oe.TOKEN_TYPE);return!e||!n||!i?null:new Ve({accessToken:e,refreshToken:n,tokenType:i})}static saveToLocalStorage(t,e){t.setItem(oe.ACCESS_TOKEN,e.accessToken),t.setItem(oe.REFRESH_TOKEN,e.refreshToken),t.setItem(oe.TOKEN_TYPE,e.tokenType)}static flushLocalStorage(t){t.removeItem(oe.ACCESS_TOKEN),t.removeItem(oe.REFRESH_TOKEN),t.removeItem(oe.TOKEN_TYPE)}}class Wt{hooks=[];info(t,e){this.runHooks("info",t,e),e?console.log(t,e):console.log(t)}warn(t,e){this.runHooks("warn",t,e),this.clientWarn(t,e)}clientWarn(t,e){e?console.warn(t,e):console.warn(t)}error(t,e){this.runHooks("error",t,e),this.clientError(t,e)}clientError(t,e){e?console.error(t,e):console.error(t)}addHook(t,e){this.hooks.push({level:t,hook:e})}registerServerSending(t){this.addHook("warn",(e,n)=>this.sendClientLog(t,this.buildServerLogPayload("warn",e,n))),this.addHook("error",(e,n)=>this.sendClientLog(t,this.buildServerLogPayload("error",e,n)))}sendClientLog(t,e){if(!e)return;const n=new Headers({Accept:"application/json","Content-Type":"application/json"});try{const i=Ve.getUserTokens(ke);i&&n.set("Authorization",`${i.tokenType} ${i.accessToken}`)}catch(i){console.error("Cannot set tokens to client log sender.",{err:i})}fetch(t+"/api/v1/server/logs/client",{headers:n,method:"POST",body:JSON.stringify(e)}).catch(i=>console.error("Cannot send client warn/error to server.",i))}buildServerLogPayload(t,e,n){return e?{message:this.buildMessageServerLogPayload(e),userAgent:navigator.userAgent,url:window.location.href,level:t,stackTrace:this.buildStackServerLogPayload(e,n),meta:this.buildMetaServerLogPayload(n)}:null}buildMessageServerLogPayload(t){return typeof t=="string"?t:t instanceof Error?t.message:JSON.stringify(t)}buildStackServerLogPayload(t,e){if(t instanceof Error)return this.buildStack(t);if(e instanceof Error)return this.buildStack(e);if(e?.err instanceof Error)return this.buildStack(e.err)}buildMetaServerLogPayload(t){if(!t||t instanceof Error)return;let e;try{e=JSON.stringify(t,(n,i)=>{if(n!=="err")return i})}catch(n){console.error("Cannot stringify meta.",n)}return e}runHooks(t,e,n){for(const i of this.hooks)i.level===t&&i.hook(e,n)}buildStack(t){return`${t.message}
${t.stack||""}`}}const ae=window.logger||new Wt;window.logger=ae;function Yt(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var pe={},se={},ve={},rt;function Jt(){if(rt)return ve;rt=1,Object.defineProperty(ve,"__esModule",{value:!0}),ve.cast=t,ve.get=e,ve.set=n;const r=2**32;function t(i){return i<0?i+r:i}function e(i,o){return i>>o&255}function n(i,o,s){return i^(i^s<<o)&255<<o}return ve}var nt;function Re(){return nt||(nt=1,function(r){var t=se&&se.__createBinding||(Object.create?function(y,c,T,A){A===void 0&&(A=T);var P=Object.getOwnPropertyDescriptor(c,T);(!P||("get"in P?!c.__esModule:P.writable||P.configurable))&&(P={enumerable:!0,get:function(){return c[T]}}),Object.defineProperty(y,A,P)}:function(y,c,T,A){A===void 0&&(A=T),y[A]=c[T]}),e=se&&se.__setModuleDefault||(Object.create?function(y,c){Object.defineProperty(y,"default",{enumerable:!0,value:c})}:function(y,c){y.default=c}),n=se&&se.__importStar||function(y){if(y&&y.__esModule)return y;var c={};if(y!=null)for(var T in y)T!=="default"&&Object.prototype.hasOwnProperty.call(y,T)&&t(c,y,T);return e(c,y),c};Object.defineProperty(r,"__esModule",{value:!0}),r.OFFSET_A=r.OFFSET_B=r.OFFSET_G=r.OFFSET_R=void 0,r.newColor=p,r.from=l,r.toNumber=u,r.getRed=a,r.getGreen=b,r.getBlue=m,r.getAlpha=S,r.setRed=v,r.setGreen=g,r.setBlue=E,r.setAlpha=R;const i=n(Jt()),{cast:o,get:s,set:f}=i;r.OFFSET_R=24,r.OFFSET_G=16,r.OFFSET_B=8,r.OFFSET_A=0;function p(y,c,T,A){return(y<<r.OFFSET_R)+(c<<r.OFFSET_G)+(T<<r.OFFSET_B)+(A<<r.OFFSET_A)}function l(y){return p(s(y,r.OFFSET_R),s(y,r.OFFSET_G),s(y,r.OFFSET_B),s(y,r.OFFSET_A))}function u(y){return o(y)}function a(y){return s(y,r.OFFSET_R)}function b(y){return s(y,r.OFFSET_G)}function m(y){return s(y,r.OFFSET_B)}function S(y){return s(y,r.OFFSET_A)}function v(y,c){return f(y,r.OFFSET_R,c)}function g(y,c){return f(y,r.OFFSET_G,c)}function E(y,c){return f(y,r.OFFSET_B,c)}function R(y,c){return f(y,r.OFFSET_A,c)}}(se)),se}var re={},G={},it;function Kt(){if(it)return G;it=1,Object.defineProperty(G,"__esModule",{value:!0}),G.labToXyzd50=y,G.xyzd50ToLab=c,G.oklabToXyzd65=T,G.xyzd65ToOklab=A,G.lchToLab=P,G.labToLch=z,G.displayP3ToXyzd50=V,G.xyzd50ToDisplayP3=q,G.proPhotoToXyzd50=d,G.xyzd50ToProPhoto=I,G.adobeRGBToXyzd50=H,G.xyzd50ToAdobeRGB=x,G.rec2020ToXyzd50=h,G.xyzd50ToRec2020=M,G.xyzd50ToD65=_,G.xyzd65ToD50=X,G.xyzd65TosRGBLinear=N,G.xyzd50TosRGBLinear=L,G.srgbLinearToXyzd50=j,G.srgbToXyzd50=B,G.xyzd50ToSrgb=$,G.oklchToXyzd50=K,G.xyzd50ToOklch=te;const r=.9642,t=1,e=.8251;function n(O,C){const w=[0,0,0];for(let k=0;k<3;++k)w[k]=O[k][0]*C[0]+O[k][1]*C[1]+O[k][2]*C[2];return w}class i{g;a;b;c;d;e;f;constructor(C,w,k=0,F=0,D=0,W=0,Y=0){this.g=C,this.a=w,this.b=k,this.c=F,this.d=D,this.e=W,this.f=Y}eval(C){const w=C<0?-1:1,k=C*w;return k<this.d?w*(this.c*k+this.f):w*(Math.pow(this.a*k+this.b,this.g)+this.e)}}const o={sRGB:new i(2.4,1/1.055,.055/1.055,1/12.92,.04045,0,0),sRGB_INVERSE:new i(.416667,1.13728,-0,12.92,.0031308,-.0549698,-0),proPhotoRGB:new i(1.8,1),proPhotoRGB_INVERSE:new i(.555556,1,-0,0,0,0,0),k2Dot2:new i(2.2,1),k2Dot2_INVERSE:new i(.454545,1),rec2020:new i(2.22222,.909672,.0903276,.222222,.0812429,0,0),rec2020_INVERSE:new i(.45,1.23439,-0,4.5,.018054,-.0993195,-0)},s={sRGB:[[.436065674,.385147095,.143066406],[.222488403,.716873169,.06060791],[.013916016,.097076416,.714096069]],sRGB_INVERSE:[[3.134112151374599,-1.6173924597114966,-.4906334036481285],[-.9787872938826594,1.9162795854799963,.0334547139520088],[.07198304248352326,-.2289858493321844,1.4053851325241447]],displayP3:[[.515102,.291965,.157153],[.241182,.692236,.0665819],[-.00104941,.0418818,.784378]],displayP3_INVERSE:[[2.404045155982687,-.9898986932663839,-.3976317191366333],[-.8422283799266768,1.7988505115115485,.016048170293157416],[.04818705979712955,-.09737385156228891,1.2735066448052303]],adobeRGB:[[.60974,.20528,.14919],[.31111,.62567,.06322],[.01947,.06087,.74457]],adobeRGB_INVERSE:[[1.9625385510109137,-.6106892546501431,-.3413827467482388],[-.9787580455521,1.9161624707082339,.03341676594241408],[.028696263137883395,-.1406807819331586,1.349252109991369]],rec2020:[[.673459,.165661,.1251],[.279033,.675338,.0456288],[-.00193139,.0299794,.797162]],rec2020_INVERSE:[[1.647275201661012,-.3936024771460771,-.23598028884792507],[-.6826176165196962,1.647617775014935,.01281626807852422],[.029662725298529837,-.06291668721366285,1.2533964313435522]]};function f(O){return O*(Math.PI/180)}function p(O){return O*(180/Math.PI)}function l(O,C,w,k){return[O.eval(C),O.eval(w),O.eval(k)]}const u=[[.9999999984505198,.39633779217376786,.2158037580607588],[1.0000000088817609,-.10556134232365635,-.06385417477170591],[1.0000000546724108,-.08948418209496575,-1.2914855378640917]],a=[[.2104542553,.7936177849999999,-.0040720468],[1.9779984951000003,-2.4285922049999997,.4505937099000001],[.025904037099999982,.7827717662,-.8086757660000001]],b=[[.8190224432164319,.3619062562801221,-.12887378261216414],[.0329836671980271,.9292868468965546,.03614466816999844],[.048177199566046255,.26423952494422764,.6335478258136937]],m=[[1.226879873374156,-.5578149965554814,.2813910501772159],[-.040575762624313734,1.1122868293970596,-.07171106666151703],[-.07637294974672144,-.4214933239627915,1.586924024427242]],S=[[.7976700747153241,.13519395152800417,.03135596341127167],[.28803902352472205,.7118744007923554,8661179538844252e-20],[2739876695467402e-22,-14405226518969991e-22,.825211112593861]],v=[[1.3459533710138858,-.25561367037652133,-.051116041522131374],[-.544600415668951,1.5081687311475767,.020535163968720935],[-13975622054109725e-22,2717590904589903e-21,1.2118111696814942]],g=[[1.0478573189120088,.022907374491829943,-.050162247377152525],[.029570500050499514,.9904755577034089,-.017061518194840468],[-.00924047197558879,.015052921526981566,.7519708530777581]],E=[[.9555366447632887,-.02306009252137888,.06321844147263304],[-.028315378228764922,1.009951351591575,.021026001591792402],[.012308773293784308,-.02050053471777469,1.3301947294775631]],R=[[3.2408089365140573,-1.5375788839307314,-.4985609572551541],[-.9692732213205414,1.876110235238969,.041560501141251774],[.05567030990267439,-.2040007921971802,1.0571046720577026]];function y(O,C,w){let k=(O+16)/116,F=k+C/500,D=k-w/200;function W(Y){return Y<=.20689655172413793?108/841*(Y-16/116):Y*Y*Y}return F=W(F)*r,k=W(k)*t,D=W(D)*e,[F,k,D]}function c(O,C,w){function k(Y){return Y<=.008856451679035631?841/108*Y+16/116:Math.pow(Y,1/3)}O=k(O/r),C=k(C/t),w=k(w/e);const F=116*C-16,D=500*(O-C),W=200*(C-w);return[F,D,W]}function T(O,C,w){const F=n(u,[O,C,w]);return F[0]=F[0]*F[0]*F[0],F[1]=F[1]*F[1]*F[1],F[2]=F[2]*F[2]*F[2],n(m,F)}function A(O,C,w){const F=n(b,[O,C,w]);F[0]=Math.pow(F[0],1/3),F[1]=Math.pow(F[1],1/3),F[2]=Math.pow(F[2],1/3);const D=n(a,F);return[D[0],D[1],D[2]]}function P(O,C,w){return w===void 0?[O,0,0]:[O,C*Math.cos(f(w)),C*Math.sin(f(w))]}function z(O,C,w){return[O,Math.sqrt(C*C+w*w),p(Math.atan2(w,C))]}function V(O,C,w){const[k,F,D]=l(o.sRGB,O,C,w),W=[k,F,D];return n(s.displayP3,W)}function q(O,C,w){const k=[O,C,w],F=n(s.displayP3_INVERSE,k);return l(o.sRGB_INVERSE,F[0],F[1],F[2])}function d(O,C,w){const[k,F,D]=l(o.proPhotoRGB,O,C,w);return n(S,[k,F,D])}function I(O,C,w){const F=n(v,[O,C,w]);return l(o.proPhotoRGB_INVERSE,F[0],F[1],F[2])}function H(O,C,w){const[k,F,D]=l(o.k2Dot2,O,C,w),W=[k,F,D];return n(s.adobeRGB,W)}function x(O,C,w){const k=[O,C,w],F=n(s.adobeRGB_INVERSE,k);return l(o.k2Dot2_INVERSE,F[0],F[1],F[2])}function h(O,C,w){const[k,F,D]=l(o.rec2020,O,C,w),W=[k,F,D];return n(s.rec2020,W)}function M(O,C,w){const k=[O,C,w],F=n(s.rec2020_INVERSE,k);return l(o.rec2020_INVERSE,F[0],F[1],F[2])}function _(O,C,w){return n(E,[O,C,w])}function X(O,C,w){return n(g,[O,C,w])}function N(O,C,w){return n(R,[O,C,w])}function L(O,C,w){const k=[O,C,w];return n(s.sRGB_INVERSE,k)}function j(O,C,w){const k=[O,C,w];return n(s.sRGB,k)}function B(O,C,w){const[k,F,D]=l(o.sRGB,O,C,w),W=[k,F,D];return n(s.sRGB,W)}function $(O,C,w){const k=[O,C,w],F=n(s.sRGB_INVERSE,k);return l(o.sRGB_INVERSE,F[0],F[1],F[2])}function K(O,C,w){const[k,F,D]=P(O,C,w),[W,Y,_e]=T(k,F,D);return X(W,Y,_e)}function te(O,C,w){const[k,F,D]=_(O,C,w),[W,Y,_e]=A(k,F,D);return z(W,Y,_e)}return G}var ot;function Zt(){if(ot)return re;ot=1;var r=re&&re.__createBinding||(Object.create?function(d,I,H,x){x===void 0&&(x=H);var h=Object.getOwnPropertyDescriptor(I,H);(!h||("get"in h?!I.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return I[H]}}),Object.defineProperty(d,x,h)}:function(d,I,H,x){x===void 0&&(x=H),d[x]=I[H]}),t=re&&re.__setModuleDefault||(Object.create?function(d,I){Object.defineProperty(d,"default",{enumerable:!0,value:I})}:function(d,I){d.default=I}),e=re&&re.__importStar||function(d){if(d&&d.__esModule)return d;var I={};if(d!=null)for(var H in d)H!=="default"&&Object.prototype.hasOwnProperty.call(d,H)&&r(I,d,H);return t(I,d),I};Object.defineProperty(re,"__esModule",{value:!0}),re.parse=b,re.parseHex=m,re.parseColor=v;const n=Re(),i=e(Kt()),o=35,s=37,f=103,p=110,l=100,u=101,a=(()=>{const d="(\\w+)",I="[\\s,\\/]",H="([^\\s,\\/]+)",x=`(?:${I}+${H})`;return new RegExp(`${d}\\(
      ${I}*
      ${H}
      ${x}
      ${x}
      ${x}?
      ${x}?
      ${I}*
    \\)`.replace(/\s/g,""))})();function b(d){return d.charCodeAt(0)===o?m(d):v(d)}function m(d){let I=0,H=0,x=0,h=255;switch(d.length){case 4:{I=(S(d.charCodeAt(1))<<4)+S(d.charCodeAt(1)),H=(S(d.charCodeAt(2))<<4)+S(d.charCodeAt(2)),x=(S(d.charCodeAt(3))<<4)+S(d.charCodeAt(3));break}case 7:{I=(S(d.charCodeAt(1))<<4)+S(d.charCodeAt(2)),H=(S(d.charCodeAt(3))<<4)+S(d.charCodeAt(4)),x=(S(d.charCodeAt(5))<<4)+S(d.charCodeAt(6));break}case 9:{I=(S(d.charCodeAt(1))<<4)+S(d.charCodeAt(2)),H=(S(d.charCodeAt(3))<<4)+S(d.charCodeAt(4)),x=(S(d.charCodeAt(5))<<4)+S(d.charCodeAt(6)),h=(S(d.charCodeAt(7))<<4)+S(d.charCodeAt(8));break}}return(0,n.newColor)(I,H,x,h)}function S(d){return(d&15)+9*(d>>6)}function v(d){const I=a.exec(d);if(I===null)throw new Error(`Color.parse(): invalid CSS color: "${d}"`);const H=I[1],x=I[2],h=I[3],M=I[4],_=I[5],X=I[6];switch(H){case"rgb":case"rgba":{const N=g(x),L=g(h),j=g(M),B=_?E(_):255;return(0,n.newColor)(N,L,j,B)}case"hsl":case"hsla":{const N=y(x),L=c(h),j=c(M),B=_?E(_):255;let $,K,te;if(L===0)$=K=te=Math.round(j*255);else{const O=j<.5?j*(1+L):j+L-j*L,C=2*j-O;$=Math.round(P(C,O,N+1/3)*255),K=Math.round(P(C,O,N)*255),te=Math.round(P(C,O,N-1/3)*255)}return(0,n.newColor)($,K,te,B)}case"hwb":{const N=y(x),L=c(h),j=c(M),B=_?E(_):255,$=1,K=.5,te=K+$-K*$,O=2*K-te;let C=Math.round(P(O,te,N+1/3)*255),w=Math.round(P(O,te,N)*255),k=Math.round(P(O,te,N-1/3)*255);return C=z(C,L,j),w=z(w,L,j),k=z(k,L,j),(0,n.newColor)(C,w,k,B)}case"lab":{const N=A(x,100),L=A(h,125),j=A(M,125),B=_?E(_):255;return q(B,i.xyzd50ToSrgb(...i.labToXyzd50(N,L,j)))}case"lch":{const N=A(x,100),L=A(h,150),j=y(M)*360,B=_?E(_):255;return q(B,i.xyzd50ToSrgb(...i.labToXyzd50(...i.lchToLab(N,L,j))))}case"oklab":{const N=A(x,1),L=A(h,.4),j=A(M,.4),B=_?E(_):255;return q(B,i.xyzd50ToSrgb(...i.xyzd65ToD50(...i.oklabToXyzd65(N,L,j))))}case"oklch":{const N=T(x),L=T(h),j=T(M),B=_?E(_):255;return q(B,i.xyzd50ToSrgb(...i.oklchToXyzd50(N,L,j)))}case"color":{const N=x,L=T(h),j=T(M),B=T(_),$=X?E(X):255;switch(N){case"srgb":return q($,[L,j,B]);case"srgb-linear":return q($,i.xyzd50ToSrgb(...i.srgbLinearToXyzd50(L,j,B)));case"display-p3":return q($,i.xyzd50ToSrgb(...i.displayP3ToXyzd50(L,j,B)));case"a98-rgb":return q($,i.xyzd50ToSrgb(...i.adobeRGBToXyzd50(L,j,B)));case"prophoto-rgb":return q($,i.xyzd50ToSrgb(...i.proPhotoToXyzd50(L,j,B)));case"rec2020":return q($,i.xyzd50ToSrgb(...i.rec2020ToXyzd50(L,j,B)));case"xyz":case"xyz-d65":return q($,i.xyzd50ToSrgb(...i.xyzd65ToD50(L,j,B)));case"xyz-d50":return q($,i.xyzd50ToSrgb(L,j,B))}}}throw new Error(`Color.parse(): invalid CSS color: "${d}"`)}function g(d){return d.charCodeAt(d.length-1)===s?Math.round(parseFloat(d)/100*255):Math.round(parseFloat(d))}function E(d){return Math.round(R(d)*255)}function R(d){return d.charCodeAt(0)===p?0:d.charCodeAt(d.length-1)===s?parseFloat(d)/100:parseFloat(d)}function y(d){let I=1;switch(d.charCodeAt(d.length-1)){case u:return 0;case l:{d.charCodeAt(Math.max(0,d.length-4))===f?I=400:I=2*Math.PI;break}case p:{I=1;break}default:I=360}return parseFloat(d)/I}function c(d){return d.charCodeAt(0)===p?0:parseFloat(d)/100}function T(d){return d.charCodeAt(0)===p?0:d.charCodeAt(d.length-1)===s?parseFloat(d)/100:parseFloat(d)}function A(d,I){return d.charCodeAt(0)===p?0:d.charCodeAt(d.length-1)===s?parseFloat(d)/100*I:parseFloat(d)}function P(d,I,H){return H<0&&(H+=1),H>1&&(H-=1),H<1/6?d+(I-d)*6*H:H<1/2?I:H<2/3?d+(I-d)*(2/3-H)*6:d}function z(d,I,H){let x=d/255;return x*=1-I-H,x+=I,Math.round(x*255)}function V(d){return Math.max(0,Math.min(255,d))}function q(d,I){const H=V(Math.round(I[0]*255)),x=V(Math.round(I[1]*255)),h=V(Math.round(I[2]*255));return(0,n.newColor)(H,x,h,d)}return re}var J={},st;function Qt(){if(st)return J;st=1;var r=J&&J.__createBinding||(Object.create?function(c,T,A,P){P===void 0&&(P=A);var z=Object.getOwnPropertyDescriptor(T,A);(!z||("get"in z?!T.__esModule:z.writable||z.configurable))&&(z={enumerable:!0,get:function(){return T[A]}}),Object.defineProperty(c,P,z)}:function(c,T,A,P){P===void 0&&(P=A),c[P]=T[A]}),t=J&&J.__setModuleDefault||(Object.create?function(c,T){Object.defineProperty(c,"default",{enumerable:!0,value:T})}:function(c,T){c.default=T}),e=J&&J.__importStar||function(c){if(c&&c.__esModule)return c;var T={};if(c!=null)for(var A in c)A!=="default"&&Object.prototype.hasOwnProperty.call(c,A)&&r(T,c,A);return t(T,c),T};Object.defineProperty(J,"__esModule",{value:!0}),J.format=void 0,J.formatHEXA=u,J.formatHEX=a,J.formatRGBA=b,J.toRGBA=m,J.formatHSLA=S,J.toHSLA=v,J.formatHWBA=g,J.toHWBA=E;const n=e(Re()),{getRed:i,getGreen:o,getBlue:s,getAlpha:f}=n,p=[0,0,0],l=Array.from({length:256}).map((c,T)=>T.toString(16).padStart(2,"0"));J.format=u;function u(c){return"#"+l[i(c)]+l[o(c)]+l[s(c)]+l[f(c)]}function a(c){return"#"+l[i(c)]+l[o(c)]+l[s(c)]}function b(c){return`rgba(${i(c)} ${o(c)} ${s(c)} / ${f(c)/255})`}function m(c){return{r:i(c),g:o(c),b:s(c),a:f(c)}}function S(c){R(i(c),o(c),s(c));const T=p[0],A=p[1],P=p[2],z=f(c)/255;return`hsla(${T} ${A}% ${P}% / ${z})`}function v(c){R(i(c),o(c),s(c));const T=p[0],A=p[1],P=p[2],z=f(c)/255;return{h:T,s:A,l:P,a:z}}function g(c){y(i(c),o(c),s(c));const T=p[0],A=p[1],P=p[2],z=f(c)/255;return`hsla(${T} ${A}% ${P}% / ${z})`}function E(c){y(i(c),o(c),s(c));const T=p[0],A=p[1],P=p[2],z=f(c)/255;return{h:T,w:A,b:P,a:z}}function R(c,T,A){c/=255,T/=255,A/=255;const P=Math.max(c,T,A),z=P-Math.min(c,T,A),V=z?P===c?(T-A)/z:P===T?2+(A-c)/z:4+(c-T)/z:0;p[0]=60*V<0?60*V+360:60*V,p[1]=100*(z?P<=.5?z/(2*P-z):z/(2-(2*P-z)):0),p[2]=100*(2*P-z)/2}function y(c,T,A){c/=255,T/=255,A/=255;const P=Math.min(c,T,A),z=Math.max(c,T,A),V=1-z;if(z===P){p[0]=0,p[1]=P,p[2]=V;return}let q=c===P?T-A:T===P?A-c:c-T,d=c===P?3:T===P?5:1;p[0]=(d-q/(z-P))/6,p[1]=P,p[2]=V}return J}var ee={},at;function er(){if(at)return ee;at=1;var r=ee&&ee.__createBinding||(Object.create?function(v,g,E,R){R===void 0&&(R=E);var y=Object.getOwnPropertyDescriptor(g,E);(!y||("get"in y?!g.__esModule:y.writable||y.configurable))&&(y={enumerable:!0,get:function(){return g[E]}}),Object.defineProperty(v,R,y)}:function(v,g,E,R){R===void 0&&(R=E),v[R]=g[E]}),t=ee&&ee.__setModuleDefault||(Object.create?function(v,g){Object.defineProperty(v,"default",{enumerable:!0,value:g})}:function(v,g){v.default=g}),e=ee&&ee.__importStar||function(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var E in v)E!=="default"&&Object.prototype.hasOwnProperty.call(v,E)&&r(g,v,E);return t(g,v),g};Object.defineProperty(ee,"__esModule",{value:!0}),ee.alpha=u,ee.darken=a,ee.lighten=b,ee.blend=m,ee.getLuminance=S;const n=e(Re()),{getRed:i,getGreen:o,getBlue:s,getAlpha:f,setAlpha:p,newColor:l}=n;function u(v,g){return p(v,Math.round(g*255))}function a(v,g){const E=i(v),R=o(v),y=s(v),c=f(v),T=1-g;return l(E*T,R*T,y*T,c)}function b(v,g){const E=i(v),R=o(v),y=s(v),c=f(v);return l(E+(255-E)*g,R+(255-R)*g,y+(255-y)*g,c)}function m(v,g,E,R=1){const y=(P,z)=>Math.round((P**(1/R)*(1-E)+z**(1/R)*E)**R),c=y(i(v),i(g)),T=y(o(v),o(g)),A=y(s(v),s(g));return l(c,T,A,255)}function S(v){const g=i(v)/255,E=o(v)/255,R=s(v)/255,y=P=>P<=.03928?P/12.92:((P+.055)/1.055)**2.4,c=y(g),T=y(E),A=y(R);return Math.round((.2126*c+.7152*T+.0722*A)*1e3)/1e3}return ee}var ut;function tr(){return ut||(ut=1,function(r){var t=pe&&pe.__createBinding||(Object.create?function(n,i,o,s){s===void 0&&(s=o);var f=Object.getOwnPropertyDescriptor(i,o);(!f||("get"in f?!i.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(n,s,f)}:function(n,i,o,s){s===void 0&&(s=o),n[s]=i[o]}),e=pe&&pe.__exportStar||function(n,i){for(var o in n)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&t(i,n,o)};Object.defineProperty(r,"__esModule",{value:!0}),e(Re(),r),e(Zt(),r),e(Qt(),r),e(er(),r)}(pe)),pe}var fe=tr();function rr(r){return r&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r}var _t={exports:{}},U=_t.exports={},ne,ie;function Ne(){throw new Error("setTimeout has not been defined")}function $e(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?ne=setTimeout:ne=Ne}catch{ne=Ne}try{typeof clearTimeout=="function"?ie=clearTimeout:ie=$e}catch{ie=$e}})();function Tt(r){if(ne===setTimeout)return setTimeout(r,0);if((ne===Ne||!ne)&&setTimeout)return ne=setTimeout,setTimeout(r,0);try{return ne(r,0)}catch{try{return ne.call(null,r,0)}catch{return ne.call(this,r,0)}}}function nr(r){if(ie===clearTimeout)return clearTimeout(r);if((ie===$e||!ie)&&clearTimeout)return ie=clearTimeout,clearTimeout(r);try{return ie(r)}catch{try{return ie.call(null,r)}catch{return ie.call(this,r)}}}var ue=[],be=!1,he,Oe=-1;function ir(){!be||!he||(be=!1,he.length?ue=he.concat(ue):Oe=-1,ue.length&&Ct())}function Ct(){if(!be){var r=Tt(ir);be=!0;for(var t=ue.length;t;){for(he=ue,ue=[];++Oe<t;)he&&he[Oe].run();Oe=-1,t=ue.length}he=null,be=!1,nr(r)}}U.nextTick=function(r){var t=new Array(arguments.length-1);if(arguments.length>1)for(var e=1;e<arguments.length;e++)t[e-1]=arguments[e];ue.push(new Ot(r,t)),ue.length===1&&!be&&Tt(Ct)};function Ot(r,t){this.fun=r,this.array=t}Ot.prototype.run=function(){this.fun.apply(null,this.array)};U.title="browser";U.browser=!0;U.env={};U.argv=[];U.version="";U.versions={};function le(){}U.on=le;U.addListener=le;U.once=le;U.off=le;U.removeListener=le;U.removeAllListeners=le;U.emit=le;U.prependListener=le;U.prependOnceListener=le;U.listeners=function(r){return[]};U.binding=function(r){throw new Error("process.binding is not supported")};U.cwd=function(){return"/"};U.chdir=function(r){throw new Error("process.chdir is not supported")};U.umask=function(){return 0};var or=_t.exports;const ct=rr(or);var Te={exports:{}},Me,lt;function sr(){if(lt)return Me;lt=1;var r=1e3,t=r*60,e=t*60,n=e*24,i=n*7,o=n*365.25;Me=function(u,a){a=a||{};var b=typeof u;if(b==="string"&&u.length>0)return s(u);if(b==="number"&&isFinite(u))return a.long?p(u):f(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function s(u){if(u=String(u),!(u.length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(u);if(a){var b=parseFloat(a[1]),m=(a[2]||"ms").toLowerCase();switch(m){case"years":case"year":case"yrs":case"yr":case"y":return b*o;case"weeks":case"week":case"w":return b*i;case"days":case"day":case"d":return b*n;case"hours":case"hour":case"hrs":case"hr":case"h":return b*e;case"minutes":case"minute":case"mins":case"min":case"m":return b*t;case"seconds":case"second":case"secs":case"sec":case"s":return b*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return b;default:return}}}}function f(u){var a=Math.abs(u);return a>=n?Math.round(u/n)+"d":a>=e?Math.round(u/e)+"h":a>=t?Math.round(u/t)+"m":a>=r?Math.round(u/r)+"s":u+"ms"}function p(u){var a=Math.abs(u);return a>=n?l(u,a,n,"day"):a>=e?l(u,a,e,"hour"):a>=t?l(u,a,t,"minute"):a>=r?l(u,a,r,"second"):u+" ms"}function l(u,a,b,m){var S=a>=b*1.5;return Math.round(u/b)+" "+m+(S?"s":"")}return Me}var Le,ft;function ar(){if(ft)return Le;ft=1;function r(t){n.debug=n,n.default=n,n.coerce=l,n.disable=f,n.enable=o,n.enabled=p,n.humanize=sr(),n.destroy=u,Object.keys(t).forEach(a=>{n[a]=t[a]}),n.names=[],n.skips=[],n.formatters={};function e(a){let b=0;for(let m=0;m<a.length;m++)b=(b<<5)-b+a.charCodeAt(m),b|=0;return n.colors[Math.abs(b)%n.colors.length]}n.selectColor=e;function n(a){let b,m=null,S,v;function g(...E){if(!g.enabled)return;const R=g,y=Number(new Date),c=y-(b||y);R.diff=c,R.prev=b,R.curr=y,b=y,E[0]=n.coerce(E[0]),typeof E[0]!="string"&&E.unshift("%O");let T=0;E[0]=E[0].replace(/%([a-zA-Z%])/g,(P,z)=>{if(P==="%%")return"%";T++;const V=n.formatters[z];if(typeof V=="function"){const q=E[T];P=V.call(R,q),E.splice(T,1),T--}return P}),n.formatArgs.call(R,E),(R.log||n.log).apply(R,E)}return g.namespace=a,g.useColors=n.useColors(),g.color=n.selectColor(a),g.extend=i,g.destroy=n.destroy,Object.defineProperty(g,"enabled",{enumerable:!0,configurable:!1,get:()=>m!==null?m:(S!==n.namespaces&&(S=n.namespaces,v=n.enabled(a)),v),set:E=>{m=E}}),typeof n.init=="function"&&n.init(g),g}function i(a,b){const m=n(this.namespace+(typeof b>"u"?":":b)+a);return m.log=this.log,m}function o(a){n.save(a),n.namespaces=a,n.names=[],n.skips=[];const b=(typeof a=="string"?a:"").trim().replace(" ",",").split(",").filter(Boolean);for(const m of b)m[0]==="-"?n.skips.push(m.slice(1)):n.names.push(m)}function s(a,b){let m=0,S=0,v=-1,g=0;for(;m<a.length;)if(S<b.length&&(b[S]===a[m]||b[S]==="*"))b[S]==="*"?(v=S,g=m,S++):(m++,S++);else if(v!==-1)S=v+1,g++,m=g;else return!1;for(;S<b.length&&b[S]==="*";)S++;return S===b.length}function f(){const a=[...n.names,...n.skips.map(b=>"-"+b)].join(",");return n.enable(""),a}function p(a){for(const b of n.skips)if(s(a,b))return!1;for(const b of n.names)if(s(a,b))return!0;return!1}function l(a){return a instanceof Error?a.stack||a.message:a}function u(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return n.enable(n.load()),n}return Le=r,Le}var dt;function ur(){return dt||(dt=1,function(r,t){var e={};t.formatArgs=i,t.save=o,t.load=s,t.useColors=n,t.storage=f(),t.destroy=(()=>{let l=!1;return()=>{l||(l=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function n(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let l;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(l=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(l[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function i(l){if(l[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+l[0]+(this.useColors?"%c ":" ")+"+"+r.exports.humanize(this.diff),!this.useColors)return;const u="color: "+this.color;l.splice(1,0,u,"color: inherit");let a=0,b=0;l[0].replace(/%[a-zA-Z%]/g,m=>{m!=="%%"&&(a++,m==="%c"&&(b=a))}),l.splice(b,0,u)}t.log=console.debug||console.log||(()=>{});function o(l){try{l?t.storage.setItem("debug",l):t.storage.removeItem("debug")}catch{}}function s(){let l;try{l=t.storage.getItem("debug")}catch{}return!l&&typeof ct<"u"&&"env"in ct&&(l=e.DEBUG),l}function f(){try{return localStorage}catch{}}r.exports=ar()(t);const{formatters:p}=r.exports;p.j=function(l){try{return JSON.stringify(l)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}}}(Te,Te.exports)),Te.exports}var cr=ur();const Et=Yt(cr),pt=Et("peertube:theme");class nn{oldInjectedProperties=[];injectTheme(t,e){const n=this.getHeadElement(),i=[];for(const o of t.css){const s=document.createElement("link"),f=e+`/themes/${t.name}/${t.version}/css/${o}`;s.setAttribute("href",f),s.setAttribute("rel","alternate stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("title",t.name),s.setAttribute("disabled",""),n.appendChild(s),i.push(s)}return i}loadThemeStyle(t){const e=document.getElementsByTagName("link");for(let n=0;n<e.length;n++){const i=e[n];i.getAttribute("rel").includes("style")&&i.getAttribute("title")&&(i.disabled=i.getAttribute("title")!==t,i.disabled?i.onload=void 0:i.onload=()=>this.injectColorPalette())}document.body.dataset.ptTheme=t}injectCoreColorPalette(t=0){if(t>100){ae.error("Too many iteration when checking color palette injection. The theme may be missing the --is-dark CSS variable"),this.injectColorPalette();return}return this.canInjectCoreColorPalette()?this.injectColorPalette():setTimeout(()=>this.injectCoreColorPalette(t+1),Math.floor(t/10))}removeThemeLink(t){this.getHeadElement().removeChild(t)}canInjectCoreColorPalette(){const e=getComputedStyle(document.body).getPropertyValue("--is-dark");return e==="0"||e==="1"}injectColorPalette(){console.log("Injecting color palette");const t=document.body.style,e=getComputedStyle(document.body);for(const s of this.oldInjectedProperties)t.removeProperty(s);this.oldInjectedProperties=[];const n=()=>this.isDarkTheme({fg:e.getPropertyValue("--fg")||e.getPropertyValue("--mainForegroundColor"),bg:e.getPropertyValue("--bg")||e.getPropertyValue("--mainBackgroundColor"),isDarkVar:e.getPropertyValue("--is-dark")}),i=()=>this.isDarkTheme({fg:e.getPropertyValue("--menu-fg"),bg:e.getPropertyValue("--menu-bg"),isDarkVar:e.getPropertyValue("--is-menu-dark")}),o=[{prefix:"primary",invertIfDark:!0,step:5,darkTheme:n},{prefix:"on-primary",invertIfDark:!0,step:5,darkTheme:n},{prefix:"bg-secondary",invertIfDark:!0,step:5,darkTheme:n},{prefix:"fg",invertIfDark:!0,fallbacks:{"--fg-300":"--greyForegroundColor"},step:5,darkTheme:n},{prefix:"input-bg",invertIfDark:!0,step:5,darkTheme:n},{prefix:"menu-fg",invertIfDark:!0,step:5,darkTheme:i},{prefix:"menu-bg",invertIfDark:!0,step:5,darkTheme:i}];for(const{prefix:s,invertIfDark:f,step:p,darkTheme:l,fallbacks:u={}}of o){const a=e.getPropertyValue("--"+s),b=f&&l()?-1:1;if(!a){console.error(`Cannot create palette of nonexistent "--${s}" CSS body variable`);continue}const m=fe.toHSLA(fe.parse(a.trim()));pt(`Theme main variable ${a} -> ${this.toHSLStr(m)}`);const S=[{id:500,key:`--${s}-500`,value:this.toHSLStr(m)}];for(const v of[-1,1]){let g={...m};for(let E=1;E<=9;E++){const R=500+50*E*v,y=`--${s}-${R}`,c=e.getPropertyValue(y);if(!c||c==="0"){const T=this.buildNewLuminance(g,v*p,b),A={...g,l:T},P=this.toHSLStr(A),z=u[y]?`var(${u[y]}, ${P})`:P;S.push({id:R,key:y,value:z}),g=A,pt(`Injected theme palette ${y} -> ${z}`)}else g=fe.toHSLA(fe.parse(c))}}for(const{key:v,value:g}of $t(S,"id"))t.setProperty(v,g),this.oldInjectedProperties.push(v)}document.body.dataset.bsTheme=n()?"dark":""}buildNewLuminance(t,e,n){return Math.max(Math.min(100,Math.round(t.l+e*-1*n)),0)}toHSLStr(t){return`hsl(${Math.round(t.h)} ${Math.round(t.s)}% ${Math.round(t.l)}% / ${Math.round(t.a)})`}isDarkTheme(t){const{fg:e,bg:n,isDarkVar:i}=t;if(i==="1")return!0;if(e&&n)try{if(fe.getLuminance(fe.parse(n))<fe.getLuminance(fe.parse(e)))return!0}catch(o){console.error("Cannot parse deprecated CSS variables",o)}return!1}getHeadElement(){return document.getElementsByTagName("head")[0]}}var De=function(r,t){return De=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])},De(r,t)};function Se(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");De(r,t);function e(){this.constructor=r}r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function lr(r,t,e,n){function i(o){return o instanceof e?o:new e(function(s){s(o)})}return new(e||(e=Promise))(function(o,s){function f(u){try{l(n.next(u))}catch(a){s(a)}}function p(u){try{l(n.throw(u))}catch(a){s(a)}}function l(u){u.done?o(u.value):i(u.value).then(f,p)}l((n=n.apply(r,t||[])).next())})}function Ft(r,t){var e={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=f(0),s.throw=f(1),s.return=f(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function f(l){return function(u){return p([l,u])}}function p(l){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,l[0]&&(e=0)),e;)try{if(n=1,i&&(o=l[0]&2?i.return:l[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,l[1])).done)return o;switch(i=0,o&&(l=[l[0]&2,o.value]),l[0]){case 0:case 1:o=l;break;case 4:return e.label++,{value:l[1],done:!1};case 5:e.label++,i=l[1],l=[0];continue;case 7:l=e.ops.pop(),e.trys.pop();continue;default:if(o=e.trys,!(o=o.length>0&&o[o.length-1])&&(l[0]===6||l[0]===2)){e=0;continue}if(l[0]===3&&(!o||l[1]>o[0]&&l[1]<o[3])){e.label=l[1];break}if(l[0]===6&&e.label<o[1]){e.label=o[1],o=l;break}if(o&&e.label<o[2]){e.label=o[2],e.ops.push(l);break}o[2]&&e.ops.pop(),e.trys.pop();continue}l=t.call(r,e)}catch(u){l=[6,u],i=0}finally{n=o=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}function me(r){var t=typeof Symbol=="function"&&Symbol.iterator,e=t&&r[t],n=0;if(e)return e.call(r);if(r&&typeof r.length=="number")return{next:function(){return r&&n>=r.length&&(r=void 0),{value:r&&r[n++],done:!r}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ae(r,t){var e=typeof Symbol=="function"&&r[Symbol.iterator];if(!e)return r;var n=e.call(r),i,o=[],s;try{for(;(t===void 0||t-- >0)&&!(i=n.next()).done;)o.push(i.value)}catch(f){s={error:f}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(s)throw s.error}}return o}function Pe(r,t,e){if(e||arguments.length===2)for(var n=0,i=t.length,o;n<i;n++)(o||!(n in t))&&(o||(o=Array.prototype.slice.call(t,0,n)),o[n]=t[n]);return r.concat(o||Array.prototype.slice.call(t))}function ge(r){return this instanceof ge?(this.v=r,this):new ge(r)}function fr(r,t,e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=e.apply(r,t||[]),i,o=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),f("next"),f("throw"),f("return",s),i[Symbol.asyncIterator]=function(){return this},i;function s(m){return function(S){return Promise.resolve(S).then(m,a)}}function f(m,S){n[m]&&(i[m]=function(v){return new Promise(function(g,E){o.push([m,v,g,E])>1||p(m,v)})},S&&(i[m]=S(i[m])))}function p(m,S){try{l(n[m](S))}catch(v){b(o[0][3],v)}}function l(m){m.value instanceof ge?Promise.resolve(m.value.v).then(u,a):b(o[0][2],m)}function u(m){p("next",m)}function a(m){p("throw",m)}function b(m,S){m(S),o.shift(),o.length&&p(o[0][0],o[0][1])}}function dr(r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=r[Symbol.asyncIterator],e;return t?t.call(r):(r=typeof me=="function"?me(r):r[Symbol.iterator](),e={},n("next"),n("throw"),n("return"),e[Symbol.asyncIterator]=function(){return this},e);function n(o){e[o]=r[o]&&function(s){return new Promise(function(f,p){s=r[o](s),i(f,p,s.done,s.value)})}}function i(o,s,f,p){Promise.resolve(p).then(function(l){o({value:l,done:f})},s)}}function Z(r){return typeof r=="function"}function Ue(r){var t=function(n){Error.call(n),n.stack=new Error().stack},e=r(t);return e.prototype=Object.create(Error.prototype),e.prototype.constructor=e,e}var ze=Ue(function(r){return function(e){r(this),this.message=e?e.length+` errors occurred during unsubscription:
`+e.map(function(n,i){return i+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=e}});function Ge(r,t){if(r){var e=r.indexOf(t);0<=e&&r.splice(e,1)}}var Ie=function(){function r(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return r.prototype.unsubscribe=function(){var t,e,n,i,o;if(!this.closed){this.closed=!0;var s=this._parentage;if(s)if(this._parentage=null,Array.isArray(s))try{for(var f=me(s),p=f.next();!p.done;p=f.next()){var l=p.value;l.remove(this)}}catch(v){t={error:v}}finally{try{p&&!p.done&&(e=f.return)&&e.call(f)}finally{if(t)throw t.error}}else s.remove(this);var u=this.initialTeardown;if(Z(u))try{u()}catch(v){o=v instanceof ze?v.errors:[v]}var a=this._finalizers;if(a){this._finalizers=null;try{for(var b=me(a),m=b.next();!m.done;m=b.next()){var S=m.value;try{ht(S)}catch(v){o=o??[],v instanceof ze?o=Pe(Pe([],Ae(o)),Ae(v.errors)):o.push(v)}}}catch(v){n={error:v}}finally{try{m&&!m.done&&(i=b.return)&&i.call(b)}finally{if(n)throw n.error}}}if(o)throw new ze(o)}},r.prototype.add=function(t){var e;if(t&&t!==this)if(this.closed)ht(t);else{if(t instanceof r){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(e=this._finalizers)!==null&&e!==void 0?e:[]).push(t)}},r.prototype._hasParent=function(t){var e=this._parentage;return e===t||Array.isArray(e)&&e.includes(t)},r.prototype._addParent=function(t){var e=this._parentage;this._parentage=Array.isArray(e)?(e.push(t),e):e?[e,t]:t},r.prototype._removeParent=function(t){var e=this._parentage;e===t?this._parentage=null:Array.isArray(e)&&Ge(e,t)},r.prototype.remove=function(t){var e=this._finalizers;e&&Ge(e,t),t instanceof r&&t._removeParent(this)},r.EMPTY=function(){var t=new r;return t.closed=!0,t}(),r}(),At=Ie.EMPTY;function Pt(r){return r instanceof Ie||r&&"closed"in r&&Z(r.remove)&&Z(r.add)&&Z(r.unsubscribe)}function ht(r){Z(r)?r():r.unsubscribe()}var pr={Promise:void 0},hr={setTimeout:function(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];return setTimeout.apply(void 0,Pe([r,t],Ae(e)))},clearTimeout:function(r){return clearTimeout(r)},delegate:void 0};function kt(r){hr.setTimeout(function(){throw r})}function vt(){}function Ee(r){r()}var qe=function(r){Se(t,r);function t(e){var n=r.call(this)||this;return n.isStopped=!1,e?(n.destination=e,Pt(e)&&e.add(n)):n.destination=br,n}return t.create=function(e,n,i){return new we(e,n,i)},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,r.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){try{this.destination.error(e)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(Ie),vr=function(){function r(t){this.partialObserver=t}return r.prototype.next=function(t){var e=this.partialObserver;if(e.next)try{e.next(t)}catch(n){Ce(n)}},r.prototype.error=function(t){var e=this.partialObserver;if(e.error)try{e.error(t)}catch(n){Ce(n)}else Ce(t)},r.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(e){Ce(e)}},r}(),we=function(r){Se(t,r);function t(e,n,i){var o=r.call(this)||this,s;return Z(e)||!e?s={next:e??void 0,error:n??void 0,complete:i??void 0}:s=e,o.destination=new vr(s),o}return t}(qe);function Ce(r){kt(r)}function yr(r){throw r}var br={closed:!0,next:vt,error:yr,complete:vt},We=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function Rt(r){return r}function gr(r){return r.length===0?Rt:r.length===1?r[0]:function(e){return r.reduce(function(n,i){return i(n)},e)}}var ce=function(){function r(t){t&&(this._subscribe=t)}return r.prototype.lift=function(t){var e=new r;return e.source=this,e.operator=t,e},r.prototype.subscribe=function(t,e,n){var i=this,o=wr(t)?t:new we(t,e,n);return Ee(function(){var s=i,f=s.operator,p=s.source;o.add(f?f.call(o,p):p?i._subscribe(o):i._trySubscribe(o))}),o},r.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){t.error(e)}},r.prototype.forEach=function(t,e){var n=this;return e=yt(e),new e(function(i,o){var s=new we({next:function(f){try{t(f)}catch(p){o(p),s.unsubscribe()}},error:o,complete:i});n.subscribe(s)})},r.prototype._subscribe=function(t){var e;return(e=this.source)===null||e===void 0?void 0:e.subscribe(t)},r.prototype[We]=function(){return this},r.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return gr(t)(this)},r.prototype.toPromise=function(t){var e=this;return t=yt(t),new t(function(n,i){var o;e.subscribe(function(s){return o=s},function(s){return i(s)},function(){return n(o)})})},r.create=function(t){return new r(t)},r}();function yt(r){var t;return(t=r??pr.Promise)!==null&&t!==void 0?t:Promise}function mr(r){return r&&Z(r.next)&&Z(r.error)&&Z(r.complete)}function wr(r){return r&&r instanceof qe||mr(r)&&Pt(r)}function Sr(r){return Z(r?.lift)}function xe(r){return function(t){if(Sr(t))return t.lift(function(e){try{return r(e,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function Ye(r,t,e,n,i){return new _r(r,t,e,n,i)}var _r=function(r){Se(t,r);function t(e,n,i,o,s,f){var p=r.call(this,e)||this;return p.onFinalize=s,p.shouldUnsubscribe=f,p._next=n?function(l){try{n(l)}catch(u){e.error(u)}}:r.prototype._next,p._error=o?function(l){try{o(l)}catch(u){e.error(u)}finally{this.unsubscribe()}}:r.prototype._error,p._complete=i?function(){try{i()}catch(l){e.error(l)}finally{this.unsubscribe()}}:r.prototype._complete,p}return t.prototype.unsubscribe=function(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){var n=this.closed;r.prototype.unsubscribe.call(this),!n&&((e=this.onFinalize)===null||e===void 0||e.call(this))}},t}(qe),Tr=Ue(function(r){return function(){r(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Je=function(r){Se(t,r);function t(){var e=r.call(this)||this;return e.closed=!1,e.currentObservers=null,e.observers=[],e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return t.prototype.lift=function(e){var n=new bt(this,this);return n.operator=e,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new Tr},t.prototype.next=function(e){var n=this;Ee(function(){var i,o;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var s=me(n.currentObservers),f=s.next();!f.done;f=s.next()){var p=f.value;p.next(e)}}catch(l){i={error:l}}finally{try{f&&!f.done&&(o=s.return)&&o.call(s)}finally{if(i)throw i.error}}}})},t.prototype.error=function(e){var n=this;Ee(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=e;for(var i=n.observers;i.length;)i.shift().error(e)}})},t.prototype.complete=function(){var e=this;Ee(function(){if(e._throwIfClosed(),!e.isStopped){e.isStopped=!0;for(var n=e.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var e;return((e=this.observers)===null||e===void 0?void 0:e.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(e){return this._throwIfClosed(),r.prototype._trySubscribe.call(this,e)},t.prototype._subscribe=function(e){return this._throwIfClosed(),this._checkFinalizedStatuses(e),this._innerSubscribe(e)},t.prototype._innerSubscribe=function(e){var n=this,i=this,o=i.hasError,s=i.isStopped,f=i.observers;return o||s?At:(this.currentObservers=null,f.push(e),new Ie(function(){n.currentObservers=null,Ge(f,e)}))},t.prototype._checkFinalizedStatuses=function(e){var n=this,i=n.hasError,o=n.thrownError,s=n.isStopped;i?e.error(o):s&&e.complete()},t.prototype.asObservable=function(){var e=new ce;return e.source=this,e},t.create=function(e,n){return new bt(e,n)},t}(ce),bt=function(r){Se(t,r);function t(e,n){var i=r.call(this)||this;return i.destination=e,i.source=n,i}return t.prototype.next=function(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.next)===null||i===void 0||i.call(n,e)},t.prototype.error=function(e){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.error)===null||i===void 0||i.call(n,e)},t.prototype.complete=function(){var e,n;(n=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||n===void 0||n.call(e)},t.prototype._subscribe=function(e){var n,i;return(i=(n=this.source)===null||n===void 0?void 0:n.subscribe(e))!==null&&i!==void 0?i:At},t}(Je),It={now:function(){return(It.delegate||Date).now()},delegate:void 0},Q=function(r){Se(t,r);function t(e,n,i){e===void 0&&(e=1/0),n===void 0&&(n=1/0),i===void 0&&(i=It);var o=r.call(this)||this;return o._bufferSize=e,o._windowTime=n,o._timestampProvider=i,o._buffer=[],o._infiniteTimeWindow=!0,o._infiniteTimeWindow=n===1/0,o._bufferSize=Math.max(1,e),o._windowTime=Math.max(1,n),o}return t.prototype.next=function(e){var n=this,i=n.isStopped,o=n._buffer,s=n._infiniteTimeWindow,f=n._timestampProvider,p=n._windowTime;i||(o.push(e),!s&&o.push(f.now()+p)),this._trimBuffer(),r.prototype.next.call(this,e)},t.prototype._subscribe=function(e){this._throwIfClosed(),this._trimBuffer();for(var n=this._innerSubscribe(e),i=this,o=i._infiniteTimeWindow,s=i._buffer,f=s.slice(),p=0;p<f.length&&!e.closed;p+=o?1:2)e.next(f[p]);return this._checkFinalizedStatuses(e),n},t.prototype._trimBuffer=function(){var e=this,n=e._bufferSize,i=e._timestampProvider,o=e._buffer,s=e._infiniteTimeWindow,f=(s?1:2)*n;if(n<1/0&&f<o.length&&o.splice(0,o.length-f),!s){for(var p=i.now(),l=0,u=1;u<o.length&&o[u]<=p;u+=2)l=u;l&&o.splice(0,l+1)}},t}(Je),Cr=new ce(function(r){return r.complete()}),Or=function(r){return r&&typeof r.length=="number"&&typeof r!="function"};function Er(r){return Z(r?.then)}function Fr(r){return Z(r[We])}function Ar(r){return Symbol.asyncIterator&&Z(r?.[Symbol.asyncIterator])}function Pr(r){return new TypeError("You provided "+(r!==null&&typeof r=="object"?"an invalid object":"'"+r+"'")+" where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.")}function kr(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Rr=kr();function Ir(r){return Z(r?.[Rr])}function xr(r){return fr(this,arguments,function(){var e,n,i,o;return Ft(this,function(s){switch(s.label){case 0:e=r.getReader(),s.label=1;case 1:s.trys.push([1,,9,10]),s.label=2;case 2:return[4,ge(e.read())];case 3:return n=s.sent(),i=n.value,o=n.done,o?[4,ge(void 0)]:[3,5];case 4:return[2,s.sent()];case 5:return[4,ge(i)];case 6:return[4,s.sent()];case 7:return s.sent(),[3,2];case 8:return[3,10];case 9:return e.releaseLock(),[7];case 10:return[2]}})})}function Mr(r){return Z(r?.getReader)}function xt(r){if(r instanceof ce)return r;if(r!=null){if(Fr(r))return Lr(r);if(Or(r))return zr(r);if(Er(r))return jr(r);if(Ar(r))return Mt(r);if(Ir(r))return Br(r);if(Mr(r))return Hr(r)}throw Pr(r)}function Lr(r){return new ce(function(t){var e=r[We]();if(Z(e.subscribe))return e.subscribe(t);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function zr(r){return new ce(function(t){for(var e=0;e<r.length&&!t.closed;e++)t.next(r[e]);t.complete()})}function jr(r){return new ce(function(t){r.then(function(e){t.closed||(t.next(e),t.complete())},function(e){return t.error(e)}).then(null,kt)})}function Br(r){return new ce(function(t){var e,n;try{for(var i=me(r),o=i.next();!o.done;o=i.next()){var s=o.value;if(t.next(s),t.closed)return}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}t.complete()})}function Mt(r){return new ce(function(t){Nr(r,t).catch(function(e){return t.error(e)})})}function Hr(r){return Mt(xr(r))}function Nr(r,t){var e,n,i,o;return lr(this,void 0,void 0,function(){var s,f;return Ft(this,function(p){switch(p.label){case 0:p.trys.push([0,5,6,11]),e=dr(r),p.label=1;case 1:return[4,e.next()];case 2:if(n=p.sent(),!!n.done)return[3,4];if(s=n.value,t.next(s),t.closed)return[2];p.label=3;case 3:return[3,1];case 4:return[3,11];case 5:return f=p.sent(),i={error:f},[3,11];case 6:return p.trys.push([6,,9,10]),n&&!n.done&&(o=e.return)?[4,o.call(e)]:[3,8];case 7:p.sent(),p.label=8;case 8:return[3,10];case 9:if(i)throw i.error;return[7];case 10:return[7];case 11:return t.complete(),[2]}})})}var Ke=Ue(function(r){return function(){r(this),this.name="EmptyError",this.message="no elements in sequence"}});function $r(r,t){return new Promise(function(e,n){var i=new we({next:function(o){e(o),i.unsubscribe()},error:n,complete:function(){n(new Ke)}});r.subscribe(i)})}function Dr(r){return xe(function(t,e){var n=!1;t.subscribe(Ye(e,function(i){n=!0,e.next(i)},function(){n||e.next(r),e.complete()}))})}function Gr(r){return r<=0?function(){return Cr}:xe(function(t,e){var n=0;t.subscribe(Ye(e,function(i){++n<=r&&(e.next(i),r<=n&&e.complete())}))})}function Xr(r){return r===void 0&&(r=Vr),xe(function(t,e){var n=!1;t.subscribe(Ye(e,function(i){n=!0,e.next(i)},function(){return n?e.complete():e.error(r())}))})}function Vr(){return new Ke}function Ur(r,t){var e=arguments.length>=2;return function(n){return n.pipe(Rt,Gr(1),e?Dr(t):Xr(function(){return new Ke}))}}function qr(r){r===void 0&&(r={});var t=r.connector,e=t===void 0?function(){return new Je}:t,n=r.resetOnError,i=n===void 0?!0:n,o=r.resetOnComplete,s=o===void 0?!0:o,f=r.resetOnRefCountZero,p=f===void 0?!0:f;return function(l){var u,a,b,m=0,S=!1,v=!1,g=function(){a?.unsubscribe(),a=void 0},E=function(){g(),u=b=void 0,S=v=!1},R=function(){var y=u;E(),y?.unsubscribe()};return xe(function(y,c){m++,!v&&!S&&g();var T=b=b??e();c.add(function(){m--,m===0&&!v&&!S&&(a=je(R,p))}),T.subscribe(c),!u&&m>0&&(u=new we({next:function(A){return T.next(A)},error:function(A){v=!0,g(),a=je(E,i,A),T.error(A)},complete:function(){S=!0,g(),a=je(E,s),T.complete()}}),xt(y).subscribe(u))})(l)}}function je(r,t){for(var e=[],n=2;n<arguments.length;n++)e[n-2]=arguments[n];if(t===!0){r();return}if(t!==!1){var i=new we({next:function(){i.unsubscribe(),r()}});return xt(t.apply(void 0,Pe([],Ae(e)))).subscribe(i)}}function Wr(r,t,e){var n,i=!1;return n=1/0,qr({connector:function(){return new Q(n,t,e)},resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const Be=Et("peertube:plugins");class Lt{hooks={};scopes={};loadedScripts={};loadedScopes=[];loadingScopes={};pluginsLoaded={common:new Q(1),"admin-plugin":new Q(1),search:new Q(1),"video-watch":new Q(1),signup:new Q(1),login:new Q(1),"video-edit":new Q(1),embed:new Q(1),"my-library":new Q(1),"video-channel":new Q(1),"my-account":new Q(1),"admin-users":new Q(1),"admin-comments":new Q(1),moderation:new Q(1)};doAction;peertubeHelpersFactory;onFormFields;onSettingsScripts;onClientRoute;backendUrl;constructor(t){this.doAction=t.doAction,this.peertubeHelpersFactory=t.peertubeHelpersFactory,this.onFormFields=t.onFormFields,this.onSettingsScripts=t.onSettingsScripts,this.onClientRoute=t.onClientRoute,this.backendUrl=t.backendUrl}static getPluginPathPrefix(t){return t?"/themes":"/plugins"}static getDefaultLoginHref(t,e){if(!e||e.client.menu.login.redirectOnSingleExternalAuth!==!0)return;const n=e.plugin.registeredExternalAuths;if(n.length===1)return qt(t,n[0])}loadPluginsList(t){for(const e of t.plugin.registered)this.addPlugin(e)}async runHook(t,e,n){if(!this.hooks[t])return await e;const i=Vt(t);let o=await e;for(const s of this.hooks[t])ae.info(`Running hook ${t} of plugin ${s.plugin.name}`),o=await Ut({handler:s.handler,hookType:i,result:o,params:n,onError:f=>{ae.error(`Cannot run hook ${t} of script ${s.clientScript.script} of plugin ${s.plugin.name}`,f)}});return o}ensurePluginsAreLoaded(t){this.loadPluginsByScope(t);const e=this.pluginsLoaded[t].asObservable().pipe(Ur(),Wr());return $r(e)}async reloadLoadedScopes(){for(const t of this.loadedScopes)await this.loadPluginsByScope(t,!0)}addPlugin(t,e=!1){const n=Lt.getPluginPathPrefix(e);for(const i of Object.keys(t.clientScripts)){const o=t.clientScripts[i];for(const s of o.scopes)this.scopes[s]||(this.scopes[s]=[]),this.scopes[s].push({plugin:t,clientScript:{script:`${n}/${t.name}/${t.version}/client-scripts/${o.script}`,scopes:o.scopes},pluginType:e?Ze.THEME:Ze.PLUGIN,isTheme:e}),this.loadedScripts[o.script]=!1}}removePlugin(t){for(const e of Object.keys(this.scopes))this.scopes[e]=this.scopes[e].filter(n=>n.plugin.name!==t.name)}async loadPluginsByScope(t,e=!1){if(!this.loadingScopes[t]&&!(!e&&this.loadedScopes.includes(t))){this.loadingScopes[t]=!0,Be("Loading scope %s",t);try{e||this.loadedScopes.push(t);const n=this.scopes[t];if(!Array.isArray(n)){this.loadingScopes[t]=!1,this.pluginsLoaded[t].next(!0),Be("Nothing to load for scope %s",t);return}const i=[];for(const o of n){const s=o.clientScript;this.loadedScripts[s.script]||(i.push(this.loadPlugin(o)),this.loadedScripts[s.script]=!0)}await Promise.all(i),this.pluginsLoaded[t].next(!0),this.loadingScopes[t]=!1,Be("Scope %s loaded",t)}catch(n){ae.error(`Cannot load plugins by scope ${t}`,n)}}}loadPlugin(t){const{plugin:e,clientScript:n}=t,i=a=>{if(Bt[a.target]!==!0){ae.error(`Unknown hook ${a.target} of plugin ${e.name}. Skipping.`);return}this.hooks[a.target]||(this.hooks[a.target]=[]),this.hooks[a.target].push({plugin:e,clientScript:n,target:a.target,handler:a.handler,priority:a.priority||0})},o=(a,b)=>{if(!this.onFormFields)throw new Error("Video field registration is not supported");return this.onFormFields(t,a,b)},s=a=>{if(!this.onSettingsScripts)throw new Error("Registering settings script is not supported");return this.onSettingsScripts(t,a)},f=a=>{if(!this.onClientRoute)throw new Error("Registering client route is not supported");return this.onClientRoute(a)},p=this.doAction,l=this.peertubeHelpersFactory(t);ae.info(`Loading script ${n.script} of plugin ${e.name}`);const u=(this.backendUrl||window.location.origin)+n.script;return Yr(u).then(a=>a.register({doAction:p,registerHook:i,registerVideoField:o,registerSettingsScript:s,registerClientRoute:f,peertubeHelpers:l})).then(()=>this.sortHooksByPriority()).catch(a=>ae.error(`Cannot import or register plugin ${t.plugin.name}`,a))}sortHooksByPriority(){for(const t of Object.keys(this.hooks))this.hooks[t].sort((e,n)=>n.priority-e.priority)}}async function Yr(r){try{return new Function(`return import('${r}')`)()}catch{return ae.info("Fallback to import polyfill"),new Promise((t,e)=>{const n="$importModule$"+Math.random().toString(32).slice(2),i=document.createElement("script"),o=()=>{delete window[n],i.onerror=null,i.onload=null,i.remove(),URL.revokeObjectURL(i.src),i.src=""};i.defer=!0,i.type="module",i.onerror=()=>{e(new Error(`Failed to import: ${r}`)),o()},i.onload=()=>{t(window[n]),o()};const s=`import * as m from "${r}"; window.${n} = m;`,f=new Blob([s],{type:"text/javascript"});i.src=URL.createObjectURL(f),document.head.appendChild(i)})}}var Fe={exports:{}},Jr=Fe.exports,gt;function Kr(){return gt||(gt=1,function(r,t){(function(e,n){r.exports=n()})(Jr,function(){var e=function(){var n=Math.floor(Math.random()*1000001),i={};function o(u,a,b,m){function S(E){for(var R=0;R<E.length;R++)if(E[R].win===u)return!0;return!1}var v=!1;if(a==="*"){for(var g in i)if(i.hasOwnProperty(g)&&g!=="*"&&typeof i[g][b]=="object"&&(v=S(i[g][b]),v))break}else i["*"]&&i["*"][b]&&(v=S(i["*"][b])),!v&&i[a]&&i[a][b]&&(v=S(i[a][b]));if(v)throw"A channel is already bound to the same window which overlaps with origin '"+a+"' and has scope '"+b+"'";typeof i[a]!="object"&&(i[a]={}),typeof i[a][b]!="object"&&(i[a][b]=[]),i[a][b].push({win:u,handler:m})}function s(u,a,b){for(var m=i[a][b],S=0;S<m.length;S++)m[S].win===u&&m.splice(S,1);i[a][b].length===0&&delete i[a][b]}function f(u){return Array.isArray?Array.isArray(u):u.constructor.toString().indexOf("Array")!=-1}var p={},l=function(u){try{var a=JSON.parse(u.data);if(typeof a!="object"||a===null)throw"malformed"}catch{return}var b=u.source,m=u.origin,S,v,g;if(typeof a.method=="string"){var E=a.method.split("::");E.length==2?(S=E[0],g=E[1]):g=a.method}if(typeof a.id<"u"&&(v=a.id),typeof g=="string"){var R=!1;if(i[m]&&i[m][S]){for(var y=0;y<i[m][S].length;y++)if(i[m][S][y].win===b){i[m][S][y].handler(m,g,a),R=!0;break}}if(!R&&i["*"]&&i["*"][S]){for(var y=0;y<i["*"][S].length;y++)if(i["*"][S][y].win===b){i["*"][S][y].handler(m,g,a);break}}}else typeof v<"u"&&p[v]&&p[v](m,g,a)};return window.addEventListener?window.addEventListener("message",l,!1):window.attachEvent&&window.attachEvent("onmessage",l),{build:function(u){var a=function(h){if(u.debugOutput&&window.console&&window.console.log){try{typeof h!="string"&&(h=JSON.stringify(h))}catch{}window.console.log("["+S+"] "+h)}};if(!window.postMessage)throw"jschannel cannot run this browser, no postMessage";if(!window.JSON||!window.JSON.stringify||!window.JSON.parse)throw"jschannel cannot run this browser, no JSON parsing/serialization";if(typeof u!="object")throw"Channel build invoked without a proper object argument";if(!u.window||!u.window.postMessage)throw"Channel.build() called without a valid window argument";window===u.window&&a("target window is same as present window -- use at your own risk");var b=!1;if(typeof u.origin=="string"){var m;u.origin==="*"?b=!0:(m=u.origin.match(/^https?:\/\/(?:[-a-zA-Z0-9_\.])+(?::\d+)?/))!==null&&(u.origin=m[0].toLowerCase(),b=!0)}if(!b)throw"Channel.build() called with an invalid origin";if(typeof u.scope<"u"){if(typeof u.scope!="string")throw"scope, when specified, must be a string";if(u.scope.split("::").length>1)throw"scope may not contain double colons: '::'"}else u.scope="__default";var S=function(){for(var h="",M="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",_=0;_<5;_++)h+=M.charAt(Math.floor(Math.random()*M.length));return h}(),v={},g={},E={},R=!1,y=[],c=[],T=function(h,M,_){var X=!1,N=!1;return{origin:M,invoke:function(L,j){if(!E[h])throw"attempting to invoke a callback of a nonexistent transaction: "+h;for(var B=!1,$=0;$<_.length;$++)if(L===_[$]){B=!0;break}if(!B)throw"request supports no such callback '"+L+"'";V({id:h,callback:L,params:j})},error:function(L,j){if(N=!0,!E[h])throw"error called for nonexistent message: "+h;delete E[h],V({id:h,error:L,message:j})},complete:function(L){if(N=!0,!E[h])throw"complete called for nonexistent message: "+h;delete E[h],V({id:h,result:L})},delayReturn:function(L){return typeof L=="boolean"&&(X=L===!0),X},completed:function(){return N}}},A=function(h,M,_){return window.setTimeout(function(){if(g[h]){var X="timeout ("+M+"ms) exceeded on method '"+_+"'";g[h].error&&g[h].error("timeout_error",X),delete g[h],delete p[h]}},M)},P=function(h,M,_){if(typeof u.gotMessageObserver=="function")try{u.gotMessageObserver(h,_)}catch(w){a("gotMessageObserver() raised an exception: "+w.toString())}if(_.id&&M){E[_.id]={};var X=T(_.id,h,_.callbacks?_.callbacks:[]);if(v[M])try{if(_.callbacks&&f(_.callbacks)&&_.callbacks.length>0)for(var N=0;N<_.callbacks.length;N++){for(var L=_.callbacks[N],j=_.params,B=L.split("/"),$=0;$<B.length-1;$++){var K=B[$];typeof j[K]!="object"&&(j[K]={}),j=j[K]}j[B[B.length-1]]=function(){var w=L;return function(k){return X.invoke(w,k)}}()}var te=v[M](X,_.params);!X.delayReturn()&&!X.completed()&&X.complete(te)}catch(w){var O="runtime_error",C=null;if(typeof w=="string"?C=w:typeof w=="object"&&(w instanceof Error?(O=w.constructor.name,C=w.message):w&&f(w)&&w.length==2?(O=w[0],C=w[1]):typeof w.error=="string"&&(O=w.error,w.message?typeof w.message=="string"?C=w.message:w=w.message:C="")),C===null)try{C=JSON.stringify(w),typeof C>"u"&&(C=w.toString())}catch{C=w.toString()}X.error(O,C)}else X.error("method_not_found","No method '"+M+"' was (yet) bound by the provider")}else _.id&&_.callback?!g[_.id]||!g[_.id].callbacks||!g[_.id].callbacks[_.callback]?a("ignoring invalid callback, id:"+_.id+" ("+_.callback+")"):g[_.id].callbacks[_.callback](_.params):_.id?g[_.id]?(_.error?g[_.id].error&&g[_.id].error(_.error,_.message):_.result!==void 0?g[_.id].success(_.result):g[_.id].success(),delete g[_.id],delete p[_.id]):a("ignoring invalid response: "+_.id):M&&v[M]&&v[M]({origin:h},_.params)};o(u.window,u.origin,u.scope,P);var z=function(h){return[u.scope,h].join("::")},V=function(h,M){if(!h)throw"postMessage called with null message";if(!M&&!R)a("queue message: "+JSON.stringify(h)),y.push(h);else{if(typeof u.postMessageObserver=="function")try{u.postMessageObserver(u.origin,h)}catch(_){a("postMessageObserver() raised an exception: "+_.toString())}a("post message: "+JSON.stringify(h)+" with origin "+u.origin),u.window.postMessage(JSON.stringify(h),u.origin)}},q=function(h,M){if(a("ready msg received"),R&&!u.reconnect)throw"received ready message while in ready state.";R=!0,S.length<6&&(M.type==="publish-request"?S+="-R":S+="-L"),a("ready msg accepted."),M.type==="publish-request"&&x.notify({method:"__ready",params:{type:"publish-reply",publish:c}});for(var _=0;_<M.publish.length;_++)M.publish[_].action==="bind"?d([M.publish[_].method],x.remote):delete x.remote[M.publish[_].method];for(u.reconnect||x.unbind("__ready",!0);y.length;)V(y.splice(0,1)[0]);c=[],typeof u.onReady=="function"&&u.onReady(x)},d=function(h,M){h=[].concat(h);for(var _,X=0;X<h.length;X++)_=h[X].toString(),M[_]=function(N){return function(L,j,B){j?x.call({method:N,params:L,success:j,error:B}):x.notify({method:N,params:L})}}(_)},I=function(h,M){d([M],x.remote)},H=function(h,M){x.remote[M]&&delete x.remote[M]},x={remote:{},unbind:function(h,M){if(v[h]){if(!delete v[h])throw"can't delete method: "+h;return u.publish&&!M&&(R?x.notify({method:"__unbind",params:h}):c.push({action:"unbind",method:h})),!0}return!1},bind:function(h,M,_){if(!h||typeof h!="string")throw"'method' argument to bind must be string";if(!M||typeof M!="function")throw"callback missing from bind params";if(v[h])throw"method '"+h+"' is already bound!";return v[h]=M,u.publish&&!_&&(R?x.notify({method:"__bind",params:h}):c.push({action:"bind",method:h})),this},call:function(h){if(!h)throw"missing arguments to call function";if(!h.method||typeof h.method!="string")throw"'method' argument to call must be string";if(!h.success||typeof h.success!="function")throw"'success' callback missing from call";var M={},_=[],X=[],N=function(j,B){if(X.indexOf(B)>=0)throw"params cannot be a recursive data structure";if(B&&X.push(B),typeof B=="object"){for(var $ in B)if(B.hasOwnProperty($)){var K=j+(j.length?"/":"")+$;typeof B[$]=="function"?(M[K]=B[$],_.push(K),delete B[$]):typeof B[$]=="object"&&N(K,B[$])}}};N("",h.params);var L={id:n,method:z(h.method),params:h.params};_.length&&(L.callbacks=_),h.timeout&&A(n,h.timeout,z(h.method)),g[n]={callbacks:M,error:h.error,success:h.success},p[n]=P,n++,V(L)},notify:function(h){if(!h)throw"missing arguments to notify function";if(!h.method||typeof h.method!="string")throw"'method' argument to notify must be string";V({method:z(h.method),params:h.params})},destroy:function(){s(u.window,u.origin,u.scope),window.removeEventListener?window.removeEventListener("message",P,!1):window.detachEvent&&window.detachEvent("onmessage",P),R=!1,v={},E={},g={},u.origin=null,y=[],a("channel destroyed"),S=""}};return x.bind("__ready",q,!0),x.bind("__bind",I,!0),x.bind("__unbind",H,!0),u.remote&&d(u.remote,x.remote),setTimeout(function(){S.length>0&&V({method:z("__ready"),params:{type:"publish-request",publish:c}},!0)},0),x}}}();return e})}(Fe)),Fe.exports}var on=Kr();export{Ve as O,Lt as P,nn as T,rn as U,Zr as a,et as b,Qr as c,tn as g,en as i,on as j,ae as l,ke as p};
