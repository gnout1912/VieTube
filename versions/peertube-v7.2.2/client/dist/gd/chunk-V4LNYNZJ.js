import{a as b}from"./chunk-IJBBWTML.js";import{a as Ce}from"./chunk-YJYUDEMC.js";import{h as j}from"./chunk-DJO6R22E.js";import{c as $}from"./chunk-BFVCLNOF.js";import{a as F}from"./chunk-6TRYPH2T.js";import{a as ve}from"./chunk-RT7DTAS6.js";import{$a as ae,Ab as W,Ae as he,Bc as ce,Be as ge,Cb as _,Cc as pe,Ce as ye,Da as oe,Dc as O,De as _e,Ea as I,Ha as m,Hc as ue,J as E,Og as V,Pb as U,Q as k,Qb as se,Ra as re,Rb as le,S as K,Sa as h,Sg as S,Xf as A,Y as N,Ya as y,aa as s,dg as Me,eb as p,ee as fe,i as ee,lf as Y,lg as D,m as te,me as q,mf as J,n as L,na as ne,nb as M,nc as C,ob as g,pb as v,pd as me,re as B,sa as T,ta as r,tc as de,ua as ie,xb as x,xg as H,yb as G,zb as X}from"./chunk-F7FAPFPY.js";import{a as R,b as w,i as d,j as Z}from"./chunk-AI7IVZV2.js";var Oe=(()=>{let n=class n{injector=s(ne);applicationRef=s(ae);createElement(e){let t=document.createElement("div"),i=de(e,{environmentInjector:this.applicationRef.injector,elementInjector:this.injector,hostElement:t}),a=i.instance.loaded?te(ve(i.instance.loaded)):void 0;return{component:i,loadedPromise:a};}injectElement(e,t){let i=t.hostView;this.applicationRef.attachView(i),e.appendChild(i.rootNodes[0]);}setModel(e,t){let i={};for(let[c,f]of Object.entries(t))e.setInput(c,f);let a=e.instance;typeof a.ngOnChanges=="function"&&a.ngOnChanges(i),e.changeDetectorRef.detectChanges();}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275prov",N({token:n,factory:n.Éµfac}));let o=n;return o;})();var Pe=(()=>{let n=class n{theme=r(void 0);href=r(void 0);label=r(void 0);blankTarget=r(void 0);channel;loaded;getTarget(){return this.blankTarget()===!0?"_blank":"";}getClasses(){return["peertube-button-link",this.theme()==="primary"?"primary-button":"secondary-button"];}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275cmp",h({type:n,selectors:[["my-button-markup"]],inputs:{theme:[1,"theme"],href:[1,"href"],label:[1,"label"],blankTarget:[1,"blankTarget"]},decls:2,vars:4,consts:[[3,"href","ngClass","target"]],template:function(t,i){t&1&&(M(0,"a",0),U(1),g()),t&2&&(p("href",i.href(),I)("ngClass",i.getClasses())("target",i.getTarget()),m(),se(i.label()));},dependencies:[ce],styles:["/*# sourceMappingURL=button-markup.component-HWH7KYMN.css.map */"],changeDetection:0}));let o=n;return o;})();function we(o,n){if(o&1&&v(0,"my-video-miniature",1),o&2){let l=_();p("video",l.video())("user",l.user)("displayAsRow",!1)("displayVideoActions",!0)("displayOptions",l.displayOptions);}}var z=(()=>{let n=class n{auth=s(D);findInBulk=s(b);notifier=s(A);userService=s(S);cd=s(C);uuid=r(void 0);onlyDisplayTitle=r(void 0);video=re(void 0);loaded=T();displayOptions={date:!0,views:!0,by:!0,avatar:!0,privacyLabel:!1};user;ngOnInit(){if(this.onlyDisplayTitle())for(let e of B(this.displayOptions))this.displayOptions[e]=!1;this.userService.getAnonymousOrLoggedUser().subscribe(e=>this.user=e),!this.video()&&this.findInBulk.getVideo(this.uuid()).pipe(E(()=>this.loaded.emit(!0))).subscribe({next:e=>{this.video.set(e),this.cd.markForCheck();},error:e=>this.notifier.error("Mearachd ann am meanbh-cho-ph\xE0irt a\u2019 video: "+e.message+"")});}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275cmp",h({type:n,selectors:[["my-video-miniature-markup"]],inputs:{uuid:[1,"uuid"],onlyDisplayTitle:[1,"onlyDisplayTitle"],video:[1,"video"]},outputs:{video:"videoChange",loaded:"loaded"},decls:1,vars:1,consts:[[3,"video","user","displayAsRow","displayVideoActions","displayOptions",4,"ngIf"],[3,"video","user","displayAsRow","displayVideoActions","displayOptions"]],template:function(t,i){t&1&&y(0,we,1,5,"my-video-miniature",0),t&2&&p("ngIf",i.video());},dependencies:[O,j],styles:[`my-video-miniature[_ngcontent-%COMP%]{display:inline-block;width:280px}
/*# sourceMappingURL=video-miniature-markup.component-N53Y3W6K.css.map */`],changeDetection:0}));let o=n;return o;})();function Le(o,n){if(o&1&&(M(0,"span",13),x(1,1),g()),o&2){let l=_(2);m(),G(l.totalVideos)(l.totalVideos),X(1);}}function ke(o,n){if(o&1&&v(0,"div",14),o&2){let l=_(2);p("innerHTML",l.descriptionHTML,oe);}}function Ne(o,n){if(o&1&&(M(0,"div",15)(1,"div",16),x(2,2),g(),v(3,"my-video-miniature-markup",17),g()),o&2){let l=_(2);m(3),p("video",l.video)("onlyDisplayTitle",!0);}}function Ie(o,n){if(o&1&&(M(0,"div",4)(1,"div",5),v(2,"my-actor-avatar",6),M(3,"h6")(4,"a",7),U(5),g()(),M(6,"div",8)(7,"div",9),x(8,0),g(),y(9,Le,2,2,"span",10),g(),y(10,ke,1,1,"div",11),g(),y(11,Ne,4,2,"div",12),g()),o&2){let l=_();m(2),p("actor",l.channel)("internalHref",l.getVideoChannelLink()),m(2),p("routerLink",l.getVideoChannelLink()),m(),le(" ",l.channel.displayName," "),m(3),G(l.channel.followersCount)(l.channel.followersCount),X(8),m(),p("ngIf",l.totalVideos!==void 0),m(),p("ngIf",l.displayDescription()),m(),p("ngIf",l.video&&l.displayLatestVideo());}}var Ee=(()=>{let n=class n{markdown=s(V);findInBulk=s(b);videoService=s($);userService=s(S);notifier=s(A);cd=s(C);name=r(void 0);displayLatestVideo=r(void 0);displayDescription=r(void 0);loaded=T();channel;descriptionHTML;totalVideos;video;ngOnInit(){this.findInBulk.getChannel(this.name()).pipe(K(e=>{this.channel=e;}),k(()=>ee(this.markdown.textMarkdownToHTML({markdown:this.channel.description,withEmoji:!0,withHtml:!0}))),K(e=>{this.descriptionHTML=e;}),k(()=>this.loadVideosObservable()),E(()=>this.loaded.emit(!0))).subscribe({next:({total:e,data:t})=>{this.totalVideos=e,this.video=t[0],this.cd.markForCheck();},error:e=>this.notifier.error("Mearachd ann am meanbh-cho-ph\xE0irt na seanail: "+e.message+"")});}getVideoChannelLink(){return["/c",this.channel.nameWithHost];}loadVideosObservable(){let e={videoChannel:this.channel,videoPagination:{currentPage:1,itemsPerPage:1},sort:"-publishedAt",count:1};return this.userService.getAnonymousOrLoggedUser().pipe(L(t=>t.nsfwPolicy),k(t=>this.videoService.listChannelVideos(w(R({},e),{nsfw:this.videoService.nsfwPolicyToParam(t)}))));}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275cmp",h({type:n,selectors:[["my-channel-miniature-markup"]],inputs:{name:[1,"name"],displayLatestVideo:[1,"displayLatestVideo"],displayDescription:[1,"displayDescription"]},outputs:{loaded:"loaded"},decls:1,vars:1,consts:()=>{let e;e="Seall an seanail video seo";let t;t="Seall an seanail video seo";let i;i="{VAR_PLURAL, plural, one {{INTERPOLATION} fho-sgr\xECobhaiche} two {{INTERPOLATION} fho-sgr\xECobhaiche} few {{INTERPOLATION} fo-sgr\xECobhaichean} other {{INTERPOLATION} fo-sgr\xECobhaiche}}",i=W(i,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let a;a="{VAR_PLURAL, plural, =0 {Chan eil video ann} one {{INTERPOLATION} video} two {{INTERPOLATION} video} few {{INTERPOLATION} videothan} other {{INTERPOLATION} video}}",a=W(a,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let c;c="\n          "+a+"\n        ";let f;return f="A\u2019 video mu dheireadh a chaidh fhoillseachadh",[i,c,f,["class","channel",4,"ngIf"],[1,"channel"],[1,"channel-avatar-row"],["actorType","channel","title",e,"size","75",3,"actor","internalHref"],["title",t,3,"routerLink"],[1,"actor-counters"],[1,"followers"],["class","videos-count",4,"ngIf"],["class","description-html",3,"innerHTML",4,"ngIf"],["class","video",4,"ngIf"],[1,"videos-count"],[1,"description-html",3,"innerHTML"],[1,"video"],[1,"video-label"],[3,"video","onlyDisplayTitle"]];},template:function(t,i){t&1&&y(0,Ie,12,9,"div",3),t&2&&p("ngIf",i.channel);},dependencies:[O,F,me,z],styles:[`@charset "UTF-8";.channel[_ngcontent-%COMP%]{padding:20px;background-color:var(--bg-secondary-350);margin-bottom:30px;width:fit-content}.channel-avatar-row[_ngcontent-%COMP%], .video[_ngcontent-%COMP%]{width:280px}.channel-avatar-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:auto 1fr;grid-template-rows:auto auto 1fr;column-gap:15px}.channel-avatar-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--fg);word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.channel-avatar-row[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%]{grid-column:1;grid-row:1/4}.channel-avatar-row[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{grid-column:2;margin:0}.channel-avatar-row[_ngcontent-%COMP%]   .actor-counters[_ngcontent-%COMP%]{font-size:13px;grid-column:2;color:var(--fg-300);display:flex;align-items:center}.channel-avatar-row[_ngcontent-%COMP%]   .actor-counters[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child):after{content:"\\2022";margin:0 5px;color:var(--primary)}.channel-avatar-row[_ngcontent-%COMP%]   .description-html[_ngcontent-%COMP%]{max-height:55px;grid-column:2;font-size:14px;margin-top:5px;color:var(--fg-300);line-height:1.2;position:relative;overflow:hidden}.channel-avatar-row[_ngcontent-%COMP%]   .description-html[_ngcontent-%COMP%]:after{content:"";pointer-events:none;width:100%;height:100%;position:absolute;left:0;top:0;background:linear-gradient(transparent 30px,var(--bg-secondary-350))}.video-label[_ngcontent-%COMP%]{font-size:12px;color:var(--fg-300);margin:15px 0 5px}
/*# sourceMappingURL=channel-miniature-markup.component-AUBGQIMM.css.map */`],changeDetection:0}));let o=n;return o;})();var Te=(()=>{let n=class n{el=s(ie);uuid=r(void 0);type=r("video");responsive=r(void 0);startAt=r(void 0);stopAt=r(void 0);subtitle=r(void 0);autoplay=r(void 0);muted=r(void 0);loop=r(void 0);title=r(void 0);p2p=r(void 0);warningTitle=r(void 0);controlBar=r(void 0);peertubeLink=r(void 0);playlistPosition=r(void 0);loaded;ngOnInit(){this.el.nativeElement.innerHTML=Me({embedUrl:this.buildLink(),embedTitle:this.uuid(),responsive:this.responsive()??!1});}buildLink(){if(this.type()==="playlist")return _e({url:he({uuid:this.uuid()},J.originServerUrl),playlistPosition:this.playlistPosition()});let e=this.startAt()?q(this.startAt()):void 0,t=this.stopAt()?q(this.stopAt()):void 0;return ye({url:ge({uuid:this.uuid()},J.originServerUrl),startTime:e,stopTime:t,subtitle:this.subtitle(),loop:this.loop(),autoplay:this.autoplay(),muted:this.muted(),title:this.title(),warningTitle:this.warningTitle(),controlBar:this.controlBar(),peertubeLink:this.peertubeLink(),p2p:this.p2p()});}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275cmp",h({type:n,selectors:[["my-embed-markup"]],inputs:{uuid:[1,"uuid"],type:[1,"type"],responsive:[1,"responsive"],startAt:[1,"startAt"],stopAt:[1,"stopAt"],subtitle:[1,"subtitle"],autoplay:[1,"autoplay"],muted:[1,"muted"],loop:[1,"loop"],title:[1,"title"],p2p:[1,"p2p"],warningTitle:[1,"warningTitle"],controlBar:[1,"controlBar"],peertubeLink:[1,"peertubeLink"],playlistPosition:[1,"playlistPosition"]},decls:0,vars:0,template:function(t,i){},encapsulation:2}));let o=n;return o;})();function xe(o,n){if(o&1&&v(0,"my-actor-avatar",1),o&2){let l=_();p("actor",l.actor)("size",l.size());}}var Ae=(()=>{let n=class n{cd=s(C);server=s(H);size=r(void 0);actor;loaded;ngOnInit(){let{instance:e}=this.server.getHTMLConfig();this.actor={avatars:e.avatars,name:this.server.getHTMLConfig().instance.name},this.cd.markForCheck();}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275cmp",h({type:n,selectors:[["my-instance-avatar-markup"]],inputs:{size:[1,"size"]},decls:1,vars:1,consts:[["actorType","account",3,"actor","size",4,"ngIf"],["actorType","account",3,"actor","size"]],template:function(t,i){t&1&&y(0,xe,1,2,"my-actor-avatar",0),t&2&&p("ngIf",i.actor);},dependencies:[O,F],encapsulation:2,changeDetection:0}));let o=n;return o;})();function Ue(o,n){if(o&1&&(M(0,"div",1),v(1,"img",2),g()),o&2){let l=_();m(),p("src",l.instanceBannerUrl,I);}}var Se=(()=>{let n=class n{cd=s(C);server=s(H);instanceBannerUrl;loaded;ngOnInit(){let{instance:e}=this.server.getHTMLConfig();this.instanceBannerUrl=fe(e.banners,"width")?.path,this.cd.markForCheck();}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275cmp",h({type:n,selectors:[["my-instance-banner-markup"]],decls:1,vars:1,consts:[["class","banner",4,"ngIf"],[1,"banner"],["alt","Instance banner",3,"src"]],template:function(t,i){t&1&&y(0,Ue,2,1,"div",0),t&2&&p("ngIf",i.instanceBannerUrl);},dependencies:[O],encapsulation:2,changeDetection:0}));let o=n;return o;})();function Be(o,n){if(o&1&&v(0,"my-video-playlist-miniature",1),o&2){let l=_();p("playlist",l.playlist);}}var be=(()=>{let n=class n{findInBulkService=s(b);notifier=s(A);cd=s(C);uuid=r(void 0);loaded=T();playlist;displayOptions={date:!0,views:!0,by:!0,avatar:!0,privacyLabel:!1};ngOnInit(){this.findInBulkService.getPlaylist(this.uuid()).pipe(E(()=>this.loaded.emit(!0))).subscribe({next:e=>{this.playlist=e,this.cd.markForCheck();},error:e=>this.notifier.error("Mearachd ann am meanbh-cho-ph\xE0irt na liosta-chluich: "+e.message+"")});}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275cmp",h({type:n,selectors:[["my-playlist-miniature-markup"]],inputs:{uuid:[1,"uuid"]},outputs:{loaded:"loaded"},decls:1,vars:1,consts:[[3,"playlist",4,"ngIf"],[3,"playlist"]],template:function(t,i){t&1&&y(0,Be,1,1,"my-video-playlist-miniature",0),t&2&&p("ngIf",i.playlist);},dependencies:[O,Ce],styles:[`my-video-playlist-miniature[_ngcontent-%COMP%]{display:inline-block;width:280px}
/*# sourceMappingURL=playlist-miniature-markup.component-JC772EEG.css.map */`],changeDetection:0}));let o=n;return o;})();function De(o,n){if(o&1&&(M(0,"div",3),v(1,"my-video-miniature",4),g()),o&2){let l=n.$implicit,e=_();m(),p("video",l)("user",e.user)("displayAsRow",!1)("displayVideoActions",!0)("displayOptions",e.displayOptions);}}var Re=(()=>{let n=class n{auth=s(D);videoService=s($);notifier=s(A);userService=s(S);cd=s(C);sort=r(void 0);categoryOneOf=r(void 0);languageOneOf=r(void 0);count=r(void 0);onlyDisplayTitle=r(void 0);isLocal=r(void 0);isLive=r(void 0);maxRows=r(void 0);channelHandle=r(void 0);accountHandle=r(void 0);host=r(void 0);loaded=T();videos;user;displayOptions={date:!1,views:!0,by:!0,avatar:!0,privacyLabel:!1};limitRowsStyle(){return this.maxRows()<=0?{}:{"grid-template-rows":`repeat(${this.maxRows()}, 1fr)`,"grid-auto-rows":"0","overflow-y":"hidden"};}ngOnInit(){if(this.onlyDisplayTitle())for(let e of B(this.displayOptions))this.displayOptions[e]=!1;this.userService.getAnonymousOrLoggedUser().subscribe(e=>this.user=e),this.getVideosObservable().pipe(E(()=>this.loaded.emit(!0))).subscribe({next:e=>{this.videos=e,this.cd.markForCheck();},error:e=>this.notifier.error("Mearachd ann an co-ph\xE0irt liosta nam video: "+e.message+"")});}getVideosObservable(){let e={videoPagination:{currentPage:1,itemsPerPage:this.count()},categoryOneOf:this.categoryOneOf(),languageOneOf:this.languageOneOf(),host:this.host(),isLocal:this.isLocal(),isLive:this.isLive(),sort:this.sort(),skipCount:!0},t,i=this.channelHandle(),a=this.accountHandle();return i?t=this.videoService.listChannelVideos(w(R({},e),{videoChannel:{nameWithHost:i}})):a?t=this.videoService.listAccountVideos(w(R({},e),{account:{nameWithHost:a}})):t=this.videoService.listVideos(e),t.pipe(L(({data:c})=>c));}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275cmp",h({type:n,selectors:[["my-videos-list-markup"]],inputs:{sort:[1,"sort"],categoryOneOf:[1,"categoryOneOf"],languageOneOf:[1,"languageOneOf"],count:[1,"count"],onlyDisplayTitle:[1,"onlyDisplayTitle"],isLocal:[1,"isLocal"],isLive:[1,"isLive"],maxRows:[1,"maxRows"],channelHandle:[1,"channelHandle"],accountHandle:[1,"accountHandle"],host:[1,"host"]},outputs:{loaded:"loaded"},decls:3,vars:2,consts:[[1,"root"],[1,"videos",3,"ngStyle"],["class","video-wrapper",4,"ngFor","ngForOf"],[1,"video-wrapper"],[3,"video","user","displayAsRow","displayVideoActions","displayOptions"]],template:function(t,i){t&1&&(M(0,"div",0)(1,"div",1),y(2,De,2,5,"div",2),g()()),t&2&&(m(),p("ngStyle",i.limitRowsStyle()),m(),p("ngForOf",i.videos));},dependencies:[ue,pe,j],styles:[`@media screen and (min-width: 500px){.root[_ngcontent-%COMP%]   .videos[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .playlists[_ngcontent-%COMP%]{--co-miniature-min-width: 255px;--co-miniature-max-width: 280px;display:grid;column-gap:30px;grid-template-columns:repeat(auto-fill,minmax(var(--co-miniature-min-width),1fr))}.root[_ngcontent-%COMP%]   .videos[_ngcontent-%COMP%]   .video-wrapper[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .videos[_ngcontent-%COMP%]   .playlist-wrapper[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .playlists[_ngcontent-%COMP%]   .video-wrapper[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .playlists[_ngcontent-%COMP%]   .playlist-wrapper[_ngcontent-%COMP%]{margin:0 auto;width:100%}.root[_ngcontent-%COMP%]   .videos[_ngcontent-%COMP%]   .video-wrapper[_ngcontent-%COMP%]   my-video-miniature[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .videos[_ngcontent-%COMP%]   .video-wrapper[_ngcontent-%COMP%]   my-video-playlist-miniature[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .videos[_ngcontent-%COMP%]   .playlist-wrapper[_ngcontent-%COMP%]   my-video-miniature[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .videos[_ngcontent-%COMP%]   .playlist-wrapper[_ngcontent-%COMP%]   my-video-playlist-miniature[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .playlists[_ngcontent-%COMP%]   .video-wrapper[_ngcontent-%COMP%]   my-video-miniature[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .playlists[_ngcontent-%COMP%]   .video-wrapper[_ngcontent-%COMP%]   my-video-playlist-miniature[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .playlists[_ngcontent-%COMP%]   .playlist-wrapper[_ngcontent-%COMP%]   my-video-miniature[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .playlists[_ngcontent-%COMP%]   .playlist-wrapper[_ngcontent-%COMP%]   my-video-playlist-miniature[_ngcontent-%COMP%]{display:block;min-width:var(--co-miniature-min-width);max-width:var(--co-miniature-max-width)}}@media screen and (min-width: 500px) and (min-width: 1800px){.root[_ngcontent-%COMP%]   .videos[_ngcontent-%COMP%], .root[_ngcontent-%COMP%]   .playlists[_ngcontent-%COMP%]{column-gap:2%}}
/*# sourceMappingURL=videos-list-markup.component-5PDAO7BU.css.map */`],changeDetection:0}));let o=n;return o;})();var bn=(()=>{let n=class n{dynamicElementService=s(Oe);markdown=s(V);angularBuilders={"peertube-instance-banner":e=>this.instanceBannerBuilder(e),"peertube-instance-avatar":e=>this.instanceAvatarBuilder(e),"peertube-button":e=>this.buttonBuilder(e),"peertube-video-embed":e=>this.embedBuilder(e,"video"),"peertube-playlist-embed":e=>this.embedBuilder(e,"playlist"),"peertube-video-miniature":e=>this.videoMiniatureBuilder(e),"peertube-playlist-miniature":e=>this.playlistMiniatureBuilder(e),"peertube-channel-miniature":e=>this.channelMiniatureBuilder(e),"peertube-videos-list":e=>this.videosListBuilder(e)};htmlBuilders={"peertube-container":e=>this.containerBuilder(e)};customMarkdownRenderer;constructor(){this.customMarkdownRenderer=e=>this.buildElement(e).then(({rootElement:t})=>t);}getCustomMarkdownRenderer(){return this.customMarkdownRenderer;}buildElement(e){return Z(this,null,function*(){let t=yield this.markdown.customPageMarkdownToHTML({markdown:e,additionalAllowedTags:this.getSupportedTags()}),i=document.createElement("div");i.innerHTML=t;for(let c of Object.keys(this.htmlBuilders))i.querySelectorAll(c).forEach(f=>{try{let u=this.execHTMLBuilder(c,f);f.insertBefore(u,f.firstChild);}catch(u){Y.error(`Cannot inject component ${c}`,u);}});let a=[];for(let c of Object.keys(this.angularBuilders))i.querySelectorAll(c).forEach(f=>{try{let{component:u,loadedPromise:Q}=this.execAngularBuilder(c,f);Q&&a.push(Q),this.dynamicElementService.injectElement(f,u);}catch(u){Y.error(`Cannot inject component ${c}`,u);}});return{rootElement:i,componentsLoaded:Promise.all(a)};});}getSupportedTags(){return Object.keys(this.angularBuilders).concat(Object.keys(this.htmlBuilders));}execHTMLBuilder(e,t){return this.htmlBuilders[e](t);}execAngularBuilder(e,t){return this.angularBuilders[e](t);}embedBuilder(e,t){let i=e.dataset,{component:a,loadedPromise:c}=this.dynamicElementService.createElement(Te);return this.dynamicElementService.setModel(a,{uuid:i.uuid,type:t,responsive:this.buildBoolean(i.responsive),startAt:i.startAt,stopAt:i.stopAt,subtitle:i.subtitle,autoplay:this.buildBoolean(i.autoplay),muted:this.buildBoolean(i.muted),loop:this.buildBoolean(i.loop),title:this.buildBoolean(i.title),p2p:this.buildBoolean(i.p2p),warningTitle:this.buildBoolean(i.warningTitle),controlBar:this.buildBoolean(i.controlBar),peertubeLink:this.buildBoolean(i.peertubeLink),playlistPosition:this.buildNumber(i.playlistPosition)}),{component:a,loadedPromise:c};}playlistMiniatureBuilder(e){let t=e.dataset,{component:i,loadedPromise:a}=this.dynamicElementService.createElement(be);return this.dynamicElementService.setModel(i,{uuid:t.uuid}),{component:i,loadedPromise:a};}channelMiniatureBuilder(e){let t=e.dataset,{component:i,loadedPromise:a}=this.dynamicElementService.createElement(Ee),c={name:t.name,displayLatestVideo:this.buildBoolean(t.displayLatestVideo)??!0,displayDescription:this.buildBoolean(t.displayDescription)??!0};return this.dynamicElementService.setModel(i,c),{component:i,loadedPromise:a};}buttonBuilder(e){let t=e.dataset,{component:i,loadedPromise:a}=this.dynamicElementService.createElement(Pe),c={theme:t.theme??"primary",href:t.href,label:t.label,blankTarget:this.buildBoolean(t.blankTarget)??!1};return this.dynamicElementService.setModel(i,c),{component:i,loadedPromise:a};}instanceBannerBuilder(e){let{component:t,loadedPromise:i}=this.dynamicElementService.createElement(Se);return{component:t,loadedPromise:i};}instanceAvatarBuilder(e){let t=e.dataset,{component:i,loadedPromise:a}=this.dynamicElementService.createElement(Ae),c={size:this.buildNumber(t.size)};return this.dynamicElementService.setModel(i,c),{component:i,loadedPromise:a};}videoMiniatureBuilder(e){let t=e.dataset,{component:i,loadedPromise:a}=this.dynamicElementService.createElement(z),c={uuid:t.uuid,onlyDisplayTitle:this.buildBoolean(t.onlyDisplayTitle)??!1};return this.dynamicElementService.setModel(i,c),{component:i,loadedPromise:a};}videosListBuilder(e){let t=e.dataset,{component:i,loadedPromise:a}=this.dynamicElementService.createElement(Re),c={onlyDisplayTitle:this.buildBoolean(t.onlyDisplayTitle)??!1,maxRows:this.buildNumber(t.maxRows)??-1,sort:t.sort||"-publishedAt",count:this.buildNumber(t.count)||10,categoryOneOf:this.buildArrayNumber(t.categoryOneOf)??[],languageOneOf:this.buildArrayString(t.languageOneOf)??[],accountHandle:t.accountHandle||void 0,channelHandle:t.channelHandle||void 0,host:t.host||void 0,isLive:this.buildBoolean(t.isLive),isLocal:this.buildBoolean(t.onlyLocal)?!0:void 0};return this.dynamicElementService.setModel(i,c),{component:i,loadedPromise:a};}containerBuilder(e){let t=e.dataset,i=e.innerHTML;e.innerHTML="";let a=document.createElement("div");a.innerHTML=i;let c=t.layout?"layout-"+t.layout:"layout-column";if(a.classList.add("peertube-container",c),a.style.justifyContent=t.justifyContent||"space-between",t.width&&a.setAttribute("width",t.width),t.title||t.description){let f=document.createElement("div");if(f.classList.add("header"),t.title){let u=document.createElement("h4");u.innerText=t.title,f.appendChild(u);}if(t.description){let u=document.createElement("div");u.innerText=t.description,f.append(u);}a.insertBefore(f,a.firstChild);}return a;}buildNumber(e){if(e)return parseInt(e,10);}buildBoolean(e){if(e==="true")return!0;if(e==="false")return!1;}buildArrayNumber(e){if(e)return e.split(",").map(t=>parseInt(t,10));}buildArrayString(e){if(e)return e.split(",");}};d(n,"\u0275fac",function(t){return new(t||n)();}),d(n,"\u0275prov",N({token:n,factory:n.Éµfac}));let o=n;return o;})();export{Oe as a,bn as b};/**i18n:1cf7c077143c4c267fdafbe5508f191afcef21bad6aba22a3a8dc180e1003753*///# sourceMappingURL=chunk-V4LNYNZJ.js.map