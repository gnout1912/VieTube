{"version":3,"sources":["node_modules/@ngx-loading-bar/core/fesm2022/ngx-loading-bar-core.mjs","src/app/shared/shared-main/video/video.model.ts"],"sourcesContent":["import * as i0 from '@angular/core';\nimport { InjectionToken, PLATFORM_ID, Injectable, Inject, Optional, Component, ChangeDetectionStrategy, ViewEncapsulation, Input, NgModule } from '@angular/core';\nimport * as i1 from '@angular/common';\nimport { isPlatformBrowser, AsyncPipe, NgIf, CommonModule } from '@angular/common';\nimport { Subject, of, timer, combineLatest, Observable } from 'rxjs';\nimport { take, map, tap, startWith, switchMap, shareReplay } from 'rxjs/operators';\nfunction NgxLoadingBar_ng_container_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"div\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵstyleProp(\"width\", ctx_r0.diameter)(\"height\", ctx_r0.diameter);\n  }\n}\nfunction NgxLoadingBar_ng_container_0_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 5);\n  }\n  if (rf & 2) {\n    const progress_r2 = i0.ɵɵnextContext().ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"background\", ctx_r0.color)(\"height\", ctx_r0.height)(\"width\", progress_r2 + \"%\");\n  }\n}\nfunction NgxLoadingBar_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, NgxLoadingBar_ng_container_0_div_1_Template, 2, 4, \"div\", 1)(2, NgxLoadingBar_ng_container_0_div_2_Template, 1, 6, \"div\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.includeSpinner);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.includeBar);\n  }\n}\nfunction LoadingBarComponent_ng_container_0_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 3);\n    i0.ɵɵelement(1, \"div\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance();\n    i0.ɵɵstyleProp(\"width\", ctx_r0.diameter)(\"height\", ctx_r0.diameter);\n  }\n}\nfunction LoadingBarComponent_ng_container_0_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 5);\n  }\n  if (rf & 2) {\n    const progress_r2 = i0.ɵɵnextContext().ngIf;\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵstyleProp(\"background\", ctx_r0.color)(\"height\", ctx_r0.height)(\"width\", progress_r2 + \"%\");\n  }\n}\nfunction LoadingBarComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, LoadingBarComponent_ng_container_0_div_1_Template, 2, 4, \"div\", 1)(2, LoadingBarComponent_ng_container_0_div_2_Template, 1, 6, \"div\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.includeSpinner);\n    i0.ɵɵadvance();\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.includeBar);\n  }\n}\nconst _c0 = \"[_nghost-%COMP%]{position:relative;display:block;pointer-events:none}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{transition:.35s linear all;display:block;position:absolute;top:5px;left:0}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]   .ngx-spinner-icon[_ngcontent-%COMP%]{width:14px;height:14px;border:solid 2px transparent;border-top-color:inherit;border-left-color:inherit;border-radius:50%;animation:_ngcontent-%COMP%_loading-bar-spinner .4s linear infinite}[_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{transition:width .35s;position:absolute;top:0;left:0;width:100%;height:2px;border-bottom-right-radius:1px;border-top-right-radius:1px}[dir=rtl]   [_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{right:0;left:unset}[fixed=true][_nghost-%COMP%]{z-index:10002}[fixed=true][_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{position:fixed}[fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{position:fixed;top:10px;left:10px}[dir=rtl]   [fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{right:10px;left:unset}@keyframes _ngcontent-%COMP%_loading-bar-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\";\nclass LoadingBarState {\n  constructor(config = {}) {\n    this.config = config;\n    this.state = {\n      action: null,\n      value: 0,\n      initialValue: 0\n    };\n    this.requests = null;\n    this.disabled = false;\n    this.stream$ = new Subject();\n    this._value$ = null;\n    this.timer$ = s => {\n      let state$ = of(s);\n      switch (s.action) {\n        case 'start':\n        case 'increment':\n        case 'set':\n          {\n            if (s.action === 'start' && this.config.latencyThreshold === 0 && s.value === 0) {\n              s.value = s.initialValue;\n            }\n            if (this.requests > 0) {\n              state$ = timer(this.config.latencyThreshold, 250).pipe(map(t => ({\n                ...s,\n                value: t === 0 ? this.state.value || s.initialValue : this._increment()\n              })));\n            }\n            break;\n          }\n        case 'complete':\n        case 'stop':\n          {\n            // Attempt to aggregate any start/complete calls within 500ms:\n            state$ = s.value === 0 ? of({\n              ...s\n            }) : timer(0, 500).pipe(take(2), map(t => ({\n              value: t === 0 ? 100 : 0\n            })));\n            break;\n          }\n      }\n      return state$.pipe(map(next => ({\n        ...next,\n        action: 'set'\n      })), tap(next => this.next(next, false)));\n    };\n    this.config = {\n      latencyThreshold: 0,\n      ...config\n    };\n  }\n  get value$() {\n    if (this._value$) {\n      return this._value$;\n    }\n    return this._value$ = this.stream$.pipe(startWith(this.state), switchMap(s => this.timer$(s)), shareReplay(), map(s => s.value));\n  }\n  start(initialValue = 2) {\n    if (this.disabled) {\n      return;\n    }\n    this.next({\n      action: 'start',\n      initialValue\n    });\n  }\n  stop() {\n    this.next({\n      action: 'stop'\n    });\n  }\n  complete() {\n    this.next({\n      action: 'complete'\n    });\n  }\n  disable() {\n    this.disabled = true;\n  }\n  set(value) {\n    this.next({\n      action: 'set',\n      value\n    });\n  }\n  increment(value = 0) {\n    this.next({\n      action: 'increment',\n      value\n    });\n  }\n  next(state, emitEvent = true) {\n    switch (state.action) {\n      case 'start':\n        this.requests = (this.requests || 0) + 1;\n        break;\n      case 'complete':\n        this.requests = (this.requests || 1) - 1;\n        if (this.requests > 0) {\n          return;\n        }\n        break;\n      case 'stop':\n        this.requests = 0;\n        break;\n      case 'increment':\n        state.value = this._increment(state.value);\n        break;\n    }\n    this.state = {\n      ...this.state,\n      action: null,\n      ...state\n    };\n    if (emitEvent) {\n      this.stream$.next(this.state);\n    }\n  }\n  _increment(rnd = 0) {\n    const stat = this.state.value;\n    if (stat >= 99) {\n      rnd = 0;\n    }\n    if (rnd === 0) {\n      if (stat >= 0 && stat < 25) {\n        // Start out between 3 - 6% increments\n        rnd = Math.random() * (5 - 3 + 1) + 3;\n      } else if (stat >= 25 && stat < 65) {\n        // increment between 0 - 3%\n        rnd = Math.random() * 3;\n      } else if (stat >= 65 && stat < 90) {\n        // increment between 0 - 2%\n        rnd = Math.random() * 2;\n      } else if (stat >= 90 && stat < 99) {\n        // finally, increment it .5 %\n        rnd = 0.5;\n      } else {\n        // after 99%, don't increment:\n        rnd = 0;\n      }\n    }\n    return rnd + stat;\n  }\n}\nconst LOADING_BAR_CONFIG = new InjectionToken('LOADING_BAR_CONFIG');\nfunction provideLoadingBar(config) {\n  return {\n    provide: LOADING_BAR_CONFIG,\n    useValue: config\n  };\n}\nlet LoadingBarService = /*#__PURE__*/(() => {\n  class LoadingBarService {\n    /** @deprecated use `value$` instead. */\n    get progress$() {\n      return this.value$;\n    }\n    constructor(platformId, config = {}, zone) {\n      this.platformId = platformId;\n      this.config = config;\n      this.zone = zone;\n      this.refs = {};\n      this.streams$ = new Subject();\n      this.value$ = this.streams$.pipe(startWith(null), switchMap(() => combineLatest(Object.keys(this.refs).map(s => this.refs[s].value$))), runInZone(this.zone), map(v => Math.max(0, ...v)));\n    }\n    /** @deprecated use `useRef` instead. */\n    start(initialValue = 2) {\n      this.useRef().start(initialValue);\n    }\n    /** @deprecated use `useRef` instead. */\n    set(value) {\n      this.useRef().set(value);\n    }\n    /** @deprecated use `useRef` instead. */\n    increment(value) {\n      this.useRef().increment(value);\n    }\n    /** @deprecated use `useRef` instead. */\n    complete() {\n      this.useRef().complete();\n    }\n    /** @deprecated use `useRef` instead. */\n    stop() {\n      this.useRef().stop();\n    }\n    useRef(id = 'default') {\n      if (!this.refs[id]) {\n        this.refs[id] = new LoadingBarState(this.config);\n        this.streams$.next();\n        if (!isPlatformBrowser(this.platformId)) {\n          this.refs[id].disable();\n        }\n      }\n      return this.refs[id];\n    }\n    static {\n      this.ɵfac = function LoadingBarService_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LoadingBarService)(i0.ɵɵinject(PLATFORM_ID), i0.ɵɵinject(LOADING_BAR_CONFIG, 8), i0.ɵɵinject(i0.NgZone, 8));\n      };\n    }\n    static {\n      this.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n        token: LoadingBarService,\n        factory: LoadingBarService.ɵfac,\n        providedIn: 'root'\n      });\n    }\n  }\n  return LoadingBarService;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n// https://stackoverflow.com/a/57452361/1406096\nfunction runInZone(zone) {\n  if (!zone) {\n    return source => source;\n  }\n  return source => new Observable(observer => source.subscribe(value => zone.run(() => observer.next(value)), e => zone.run(() => observer.error(e)), () => zone.run(() => observer.complete())));\n}\nlet NgxLoadingBar = /*#__PURE__*/(() => {\n  class NgxLoadingBar {\n    get value$() {\n      return this.ref ? this.loader.useRef(this.ref).value$ : this.loader.value$;\n    }\n    constructor(loader) {\n      this.loader = loader;\n      this.includeSpinner = true;\n      this.includeBar = true;\n      this.fixed = true;\n      this.color = '#29d';\n    }\n    static {\n      this.ɵfac = function NgxLoadingBar_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || NgxLoadingBar)(i0.ɵɵdirectiveInject(LoadingBarService));\n      };\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: NgxLoadingBar,\n        selectors: [[\"ngx-loading-bar\"]],\n        hostVars: 3,\n        hostBindings: function NgxLoadingBar_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵattribute(\"fixed\", ctx.fixed);\n            i0.ɵɵstyleProp(\"color\", ctx.color);\n          }\n        },\n        inputs: {\n          includeSpinner: \"includeSpinner\",\n          includeBar: \"includeBar\",\n          fixed: \"fixed\",\n          color: \"color\",\n          value: \"value\",\n          ref: \"ref\",\n          height: \"height\",\n          diameter: \"diameter\"\n        },\n        decls: 2,\n        vars: 3,\n        consts: [[4, \"ngIf\"], [\"class\", \"ngx-spinner\", 4, \"ngIf\"], [\"class\", \"ngx-bar\", 3, \"background\", \"height\", \"width\", 4, \"ngIf\"], [1, \"ngx-spinner\"], [1, \"ngx-spinner-icon\"], [1, \"ngx-bar\"]],\n        template: function NgxLoadingBar_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, NgxLoadingBar_ng_container_0_Template, 3, 2, \"ng-container\", 0);\n            i0.ɵɵpipe(1, \"async\");\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", ctx.value != null ? ctx.value : i0.ɵɵpipeBind1(1, 1, ctx.value$));\n          }\n        },\n        dependencies: [AsyncPipe, NgIf],\n        styles: [\"[_nghost-%COMP%]{position:relative;display:block;pointer-events:none}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{transition:.35s linear all;display:block;position:absolute;top:5px;left:0}[_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]   .ngx-spinner-icon[_ngcontent-%COMP%]{width:14px;height:14px;border:solid 2px transparent;border-top-color:inherit;border-left-color:inherit;border-radius:50%;animation:_ngcontent-%COMP%_loading-bar-spinner .4s linear infinite}[_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{transition:width .35s;position:absolute;top:0;left:0;width:100%;height:2px;border-bottom-right-radius:1px;border-top-right-radius:1px}[dir=rtl]   [_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{right:0;left:unset}[fixed=true][_nghost-%COMP%]{z-index:10002}[fixed=true][_nghost-%COMP%]   .ngx-bar[_ngcontent-%COMP%]{position:fixed}[fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{position:fixed;top:10px;left:10px}[dir=rtl]   [fixed=true][_nghost-%COMP%]   .ngx-spinner[_ngcontent-%COMP%]{right:10px;left:unset}@keyframes _ngcontent-%COMP%_loading-bar-spinner{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\"],\n        changeDetection: 0\n      });\n    }\n  }\n  return NgxLoadingBar;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet LoadingBarComponent = /*#__PURE__*/(() => {\n  class LoadingBarComponent extends NgxLoadingBar {\n    static {\n      this.ɵfac = /* @__PURE__ */(() => {\n        let ɵLoadingBarComponent_BaseFactory;\n        return function LoadingBarComponent_Factory(__ngFactoryType__) {\n          return (ɵLoadingBarComponent_BaseFactory || (ɵLoadingBarComponent_BaseFactory = i0.ɵɵgetInheritedFactory(LoadingBarComponent)))(__ngFactoryType__ || LoadingBarComponent);\n        };\n      })();\n    }\n    static {\n      this.ɵcmp = /* @__PURE__ */i0.ɵɵdefineComponent({\n        type: LoadingBarComponent,\n        selectors: [[\"ngx-loading-bar\"]],\n        hostVars: 3,\n        hostBindings: function LoadingBarComponent_HostBindings(rf, ctx) {\n          if (rf & 2) {\n            i0.ɵɵattribute(\"fixed\", ctx.fixed);\n            i0.ɵɵstyleProp(\"color\", ctx.color);\n          }\n        },\n        standalone: false,\n        features: [i0.ɵɵInheritDefinitionFeature],\n        decls: 2,\n        vars: 3,\n        consts: [[4, \"ngIf\"], [\"class\", \"ngx-spinner\", 4, \"ngIf\"], [\"class\", \"ngx-bar\", 3, \"background\", \"height\", \"width\", 4, \"ngIf\"], [1, \"ngx-spinner\"], [1, \"ngx-spinner-icon\"], [1, \"ngx-bar\"]],\n        template: function LoadingBarComponent_Template(rf, ctx) {\n          if (rf & 1) {\n            i0.ɵɵtemplate(0, LoadingBarComponent_ng_container_0_Template, 3, 2, \"ng-container\", 0);\n            i0.ɵɵpipe(1, \"async\");\n          }\n          if (rf & 2) {\n            i0.ɵɵproperty(\"ngIf\", ctx.value != null ? ctx.value : i0.ɵɵpipeBind1(1, 1, ctx.value$));\n          }\n        },\n        dependencies: [i1.NgIf, i1.AsyncPipe],\n        styles: [_c0],\n        changeDetection: 0\n      });\n    }\n  }\n  return LoadingBarComponent;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\nlet LoadingBarModule = /*#__PURE__*/(() => {\n  class LoadingBarModule {\n    static {\n      this.ɵfac = function LoadingBarModule_Factory(__ngFactoryType__) {\n        return new (__ngFactoryType__ || LoadingBarModule)();\n      };\n    }\n    static {\n      this.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n        type: LoadingBarModule\n      });\n    }\n    static {\n      this.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({\n        imports: [CommonModule]\n      });\n    }\n  }\n  return LoadingBarModule;\n})();\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && void 0;\n})();\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { LOADING_BAR_CONFIG, LoadingBarComponent, LoadingBarModule, LoadingBarService, NgxLoadingBar, provideLoadingBar };\n","import { AuthUser } from '@app/core'\nimport { User } from '@app/core/users/user.model'\nimport { durationToString, getAPIUrl, getOriginUrl } from '@app/helpers'\nimport { Actor } from '@app/shared/shared-main/account/actor.model'\nimport { buildVideoWatchPath, getAllFiles, peertubeTranslate } from '@peertube/peertube-core-utils'\nimport {\n  ActorImage,\n  HTMLServerConfig,\n  UserRight,\n  VideoConstant,\n  VideoFile,\n  VideoPrivacy,\n  VideoPrivacyType,\n  VideoScheduleUpdate,\n  Video as VideoServerModel,\n  VideoSource,\n  VideoState,\n  VideoStateType,\n  VideoStreamingPlaylist,\n  VideoStreamingPlaylistType\n} from '@peertube/peertube-models'\nimport { isVideoNSFWBlurForUser, isVideoNSFWHiddenForUser, isVideoNSFWWarnedForUser } from '@root-helpers/video'\n\nexport class Video implements VideoServerModel {\n  byVideoChannel: string\n  byAccount: string\n\n  createdAt: Date\n  updatedAt: Date\n  publishedAt: Date\n  originallyPublishedAt: Date | string\n\n  category: VideoConstant<number>\n  licence: VideoConstant<number>\n  language: VideoConstant<string>\n  privacy: VideoConstant<VideoPrivacyType>\n\n  truncatedDescription: string\n  description: string\n\n  duration: number\n  durationLabel: string\n\n  id: number\n  uuid: string\n  shortUUID: string\n\n  isLocal: boolean\n\n  name: string\n  serverHost: string\n  thumbnailPath: string\n  thumbnailUrl: string\n\n  aspectRatio: number\n\n  isLive: boolean\n\n  previewPath: string\n  previewUrl: string\n\n  embedPath: string\n  embedUrl: string\n\n  url: string\n\n  views: number\n  viewers: number\n\n  likes: number\n  dislikes: number\n\n  nsfw: boolean\n  nsfwFlags: number\n  nsfwSummary: string\n\n  originInstanceUrl: string\n  originInstanceHost: string\n\n  waitTranscoding?: boolean\n  state?: VideoConstant<VideoStateType>\n  scheduledUpdate?: VideoScheduleUpdate\n\n  blacklisted?: boolean\n  blacklistedReason?: string\n\n  blockedOwner?: boolean\n  blockedServer?: boolean\n\n  account: {\n    id: number\n    name: string\n    displayName: string\n    url: string\n    host: string\n\n    avatars: ActorImage[]\n  }\n\n  channel: {\n    id: number\n    name: string\n    displayName: string\n    url: string\n    host: string\n\n    avatars: ActorImage[]\n  }\n\n  userHistory?: {\n    currentTime: number\n  }\n\n  pluginData?: any\n\n  streamingPlaylists?: VideoStreamingPlaylist[]\n  files?: VideoFile[]\n\n  videoSource?: VideoSource\n\n  automaticTags?: string[]\n\n  comments: number\n\n  static buildWatchUrl (video: Partial<Pick<Video, 'uuid' | 'shortUUID'>>) {\n    return buildVideoWatchPath({ shortUUID: video.shortUUID || video.uuid })\n  }\n\n  static buildUpdateUrl (video: Partial<Pick<Video, 'uuid' | 'shortUUID'>>) {\n    return '/videos/manage/' + (video.shortUUID || video.uuid)\n  }\n\n  static buildDurationLabel (video: Partial<Pick<Video, 'duration'>>) {\n    return durationToString(video.duration)\n  }\n\n  constructor (hash: VideoServerModel, translations: { [id: string]: string } = {}) {\n    this.createdAt = new Date(hash.createdAt.toString())\n    this.publishedAt = new Date(hash.publishedAt.toString())\n    this.category = hash.category\n    this.licence = hash.licence\n    this.language = hash.language\n    this.privacy = hash.privacy\n    this.waitTranscoding = hash.waitTranscoding\n    this.state = hash.state\n\n    this.truncatedDescription = hash.truncatedDescription\n    this.description = hash.description\n\n    this.isLive = hash.isLive\n\n    this.duration = hash.duration\n    this.durationLabel = Video.buildDurationLabel(this)\n\n    this.id = hash.id\n    this.uuid = hash.uuid\n    this.shortUUID = hash.shortUUID\n\n    this.isLocal = hash.isLocal\n    this.name = hash.name\n\n    this.thumbnailPath = hash.thumbnailPath\n    this.thumbnailUrl = this.thumbnailPath\n      ? hash.thumbnailUrl || (getAPIUrl() + hash.thumbnailPath)\n      : null\n\n    this.previewPath = hash.previewPath\n    this.previewUrl = this.previewPath\n      ? hash.previewUrl || (getAPIUrl() + hash.previewPath)\n      : null\n\n    this.embedPath = hash.embedPath\n    this.embedUrl = hash.embedUrl || (getOriginUrl() + hash.embedPath)\n\n    this.url = hash.url\n\n    this.views = hash.views\n    this.viewers = hash.viewers\n    this.likes = hash.likes\n    this.dislikes = hash.dislikes\n\n    this.nsfw = hash.nsfw\n    this.nsfwFlags = hash.nsfwFlags\n    this.nsfwSummary = hash.nsfwSummary\n\n    this.account = hash.account\n    this.channel = hash.channel\n\n    this.byAccount = Actor.CREATE_BY_STRING(hash.account.name, hash.account.host)\n    this.byVideoChannel = Actor.CREATE_BY_STRING(hash.channel.name, hash.channel.host)\n\n    this.category.label = peertubeTranslate(this.category.label, translations)\n    this.licence.label = peertubeTranslate(this.licence.label, translations)\n    this.language.label = peertubeTranslate(this.language.label, translations)\n    this.privacy.label = peertubeTranslate(this.privacy.label, translations)\n\n    this.scheduledUpdate = hash.scheduledUpdate\n    this.originallyPublishedAt = hash.originallyPublishedAt ? new Date(hash.originallyPublishedAt.toString()) : null\n\n    if (this.state) this.state.label = peertubeTranslate(this.state.label, translations)\n\n    this.blacklisted = hash.blacklisted\n    this.blacklistedReason = hash.blacklistedReason\n\n    this.blockedOwner = hash.blockedOwner\n    this.blockedServer = hash.blockedServer\n\n    this.streamingPlaylists = hash.streamingPlaylists\n    this.files = hash.files\n    this.videoSource = hash.videoSource\n\n    this.userHistory = hash.userHistory\n\n    this.originInstanceHost = this.account.host\n    this.originInstanceUrl = 'https://' + this.originInstanceHost\n\n    this.pluginData = hash.pluginData\n\n    this.aspectRatio = hash.aspectRatio\n\n    this.automaticTags = hash.automaticTags\n\n    this.comments = hash.comments\n  }\n\n  isNSFWWarnedForUser (user: User, serverConfig: HTMLServerConfig) {\n    return isVideoNSFWWarnedForUser(this, serverConfig, user)\n  }\n\n  isNSFWBlurForUser (user: User, serverConfig: HTMLServerConfig) {\n    return isVideoNSFWBlurForUser(this, serverConfig, user)\n  }\n\n  isNSFWHiddenForUser (user: User, serverConfig: HTMLServerConfig) {\n    return isVideoNSFWHiddenForUser(this, serverConfig, user)\n  }\n\n  isNSFWHiddenOrWarned (user: User, serverConfig: HTMLServerConfig) {\n    return this.isNSFWHiddenForUser(user, serverConfig) || this.isNSFWWarnedForUser(user, serverConfig)\n  }\n\n  // ---------------------------------------------------------------------------\n\n  isRemovableBy (user: AuthUser) {\n    return user && this.isLocal === true && (this.account.name === user.username || user.hasRight(UserRight.REMOVE_ANY_VIDEO))\n  }\n\n  isBlockableBy (user: AuthUser) {\n    return this.blacklisted !== true && user && user.hasRight(UserRight.MANAGE_VIDEO_BLACKLIST) === true\n  }\n\n  isUnblockableBy (user: AuthUser) {\n    return this.blacklisted === true && user && user.hasRight(UserRight.MANAGE_VIDEO_BLACKLIST) === true\n  }\n\n  isUpdatableBy (user: AuthUser) {\n    return user && this.isLocal === true && (this.account.name === user.username || user.hasRight(UserRight.UPDATE_ANY_VIDEO))\n  }\n\n  isEditableBy (user: AuthUser, videoStudioEnabled: boolean) {\n    return videoStudioEnabled &&\n      this.state?.id === VideoState.PUBLISHED &&\n      this.isUpdatableBy(user)\n  }\n\n  // ---------------------------------------------------------------------------\n\n  isOwner (user: AuthUser) {\n    return user && this.isLocal === true && this.account.name === user.username\n  }\n\n  hasSeeAllVideosRight (user: AuthUser) {\n    return user?.hasRight(UserRight.SEE_ALL_VIDEOS)\n  }\n\n  isOwnerOrHasSeeAllVideosRight (user: AuthUser) {\n    return this.isOwner(user) || this.hasSeeAllVideosRight(user)\n  }\n\n  canRemoveOneFile (user: AuthUser) {\n    return this.isLocal &&\n      user && user.hasRight(UserRight.MANAGE_VIDEO_FILES) &&\n      this.state.id !== VideoState.TO_TRANSCODE &&\n      getAllFiles(this).length > 1\n  }\n\n  canRemoveAllHLSOrWebFiles (user: AuthUser) {\n    return this.isLocal &&\n      user && user.hasRight(UserRight.MANAGE_VIDEO_FILES) &&\n      this.state.id !== VideoState.TO_TRANSCODE &&\n      this.hasHLS() &&\n      this.hasWebVideos()\n  }\n\n  // ---------------------------------------------------------------------------\n\n  canRunTranscoding (user: AuthUser) {\n    return this.isLocal &&\n      !this.isLive &&\n      user?.hasRight(UserRight.RUN_VIDEO_TRANSCODING) &&\n      this.state?.id &&\n      !this.transcodingAndTranscriptionIncompatibleStates().has(this.state.id)\n  }\n\n  canGenerateTranscription (user: AuthUser, transcriptionEnabled: boolean) {\n    return transcriptionEnabled &&\n      this.isLocal &&\n      !this.isLive &&\n      user.hasRight(UserRight.UPDATE_ANY_VIDEO) &&\n      this.state?.id &&\n      !this.transcodingAndTranscriptionIncompatibleStates().has(this.state.id)\n  }\n\n  private transcodingAndTranscriptionIncompatibleStates () {\n    return new Set<VideoStateType>([\n      VideoState.TO_IMPORT,\n      VideoState.TO_EDIT,\n      VideoState.TO_MOVE_TO_EXTERNAL_STORAGE,\n      VideoState.TO_MOVE_TO_FILE_SYSTEM\n    ])\n  }\n\n  // ---------------------------------------------------------------------------\n\n  hasHLS () {\n    return this.streamingPlaylists?.some(p => p.type === VideoStreamingPlaylistType.HLS)\n  }\n\n  hasWebVideos () {\n    return this.files && this.files.length !== 0\n  }\n\n  isLiveInfoAvailableBy (user: AuthUser) {\n    return this.isLive &&\n      user && this.isLocal === true && (this.account.name === user.username || user.hasRight(UserRight.GET_ANY_LIVE))\n  }\n\n  canBeDuplicatedBy (user: AuthUser) {\n    return user && this.isLocal === false && user.hasRight(UserRight.MANAGE_VIDEOS_REDUNDANCIES)\n  }\n\n  canBypassPassword (user: AuthUser) {\n    return this.privacy.id === VideoPrivacy.PASSWORD_PROTECTED &&\n      user &&\n      this.isLocal === true &&\n      (this.account.name === user.username || user.hasRight(UserRight.SEE_ALL_VIDEOS))\n  }\n}\n"],"mappings":"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","names":["NgxLoadingBar_ng_container_0_div_1_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵelementEnd","ctx_r0","ɵɵnextContext","ɵɵadvance","ɵɵstyleProp","NgxLoadingBar_ng_container_0_div_2_Template","progress_r2","NgxLoadingBar_ng_container_0_Template","ɵɵelementContainerStart","ɵɵtemplate","ɵɵelementContainerEnd","ɵɵproperty","LoadingBarComponent_ng_container_0_div_1_Template","LoadingBarComponent_ng_container_0_div_2_Template","LoadingBarComponent_ng_container_0_Template","_c0","LoadingBarState","config","Subject","s","state$","of","timer","map","t","__spreadProps","__spreadValues","take","next","tap","startWith","switchMap","shareReplay","initialValue","value","state","emitEvent","rnd","stat","LOADING_BAR_CONFIG","InjectionToken","LoadingBarService","_LoadingBarService","platformId","config","zone","Subject","startWith","switchMap","combineLatest","s","runInZone","map","v","initialValue","value","id","LoadingBarState","isPlatformBrowser","__ngFactoryType__","ɵɵinject","PLATFORM_ID","LOADING_BAR_CONFIG","NgZone","ɵɵdefineInjectable","source","Observable","observer","e","NgxLoadingBar","_NgxLoadingBar","loader","ɵɵdirectiveInject","ɵɵdefineComponent","rf","ctx","ɵɵattribute","ɵɵstyleProp","ɵɵtemplate","NgxLoadingBar_ng_container_0_Template","ɵɵpipe","ɵɵproperty","ɵɵpipeBind1","AsyncPipe","NgIf","LoadingBarComponent","_LoadingBarComponent","ɵLoadingBarComponent_BaseFactory","ɵɵgetInheritedFactory","ɵɵInheritDefinitionFeature","LoadingBarComponent_ng_container_0_Template","_c0","LoadingBarModule","_LoadingBarModule","ɵɵdefineNgModule","ɵɵdefineInjector","CommonModule","Video","byVideoChannel","byAccount","createdAt","updatedAt","publishedAt","originallyPublishedAt","category","licence","language","privacy","truncatedDescription","description","duration","durationLabel","id","uuid","shortUUID","isLocal","name","serverHost","thumbnailPath","thumbnailUrl","aspectRatio","isLive","previewPath","previewUrl","embedPath","embedUrl","url","views","viewers","likes","dislikes","nsfw","nsfwFlags","nsfwSummary","originInstanceUrl","originInstanceHost","waitTranscoding","state","scheduledUpdate","blacklisted","blacklistedReason","blockedOwner","blockedServer","account","channel","userHistory","pluginData","streamingPlaylists","files","videoSource","automaticTags","comments","buildWatchUrl","video","buildVideoWatchPath","buildUpdateUrl","buildDurationLabel","durationToString","constructor","hash","translations","Date","toString","getAPIUrl","getOriginUrl","Actor","CREATE_BY_STRING","host","label","peertubeTranslate","isNSFWWarnedForUser","user","serverConfig","isVideoNSFWWarnedForUser","isNSFWBlurForUser","isVideoNSFWBlurForUser","isNSFWHiddenForUser","isVideoNSFWHiddenForUser","isNSFWHiddenOrWarned","isRemovableBy","username","hasRight","UserRight","REMOVE_ANY_VIDEO","isBlockableBy","MANAGE_VIDEO_BLACKLIST","isUnblockableBy","isUpdatableBy","UPDATE_ANY_VIDEO","isEditableBy","videoStudioEnabled","VideoState","PUBLISHED","isOwner","hasSeeAllVideosRight","SEE_ALL_VIDEOS","isOwnerOrHasSeeAllVideosRight","canRemoveOneFile","MANAGE_VIDEO_FILES","TO_TRANSCODE","getAllFiles","length","canRemoveAllHLSOrWebFiles","hasHLS","hasWebVideos","canRunTranscoding","RUN_VIDEO_TRANSCODING","transcodingAndTranscriptionIncompatibleStates","has","canGenerateTranscription","transcriptionEnabled","Set","TO_IMPORT","TO_EDIT","TO_MOVE_TO_EXTERNAL_STORAGE","TO_MOVE_TO_FILE_SYSTEM","some","p","type","VideoStreamingPlaylistType","HLS","isLiveInfoAvailableBy","GET_ANY_LIVE","canBeDuplicatedBy","MANAGE_VIDEOS_REDUNDANCIES","canBypassPassword","VideoPrivacy","PASSWORD_PROTECTED"],"x_google_ignoreList":[0]}