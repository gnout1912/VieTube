{
  "version": 3,
  "sources": ["src/standalone/player/build/index-CxWMFbhA.js"],
  "sourcesContent": ["var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nconst clientFilterHookObject = {\n  \"filter:api.trending-videos.videos.list.params\": true,\n  \"filter:api.trending-videos.videos.list.result\": true,\n  \"filter:api.most-liked-videos.videos.list.params\": true,\n  \"filter:api.most-liked-videos.videos.list.result\": true,\n  \"filter:api.local-videos.videos.list.params\": true,\n  \"filter:api.local-videos.videos.list.result\": true,\n  \"filter:api.recently-added-videos.videos.list.params\": true,\n  \"filter:api.recently-added-videos.videos.list.result\": true,\n  \"filter:api.browse-videos.videos.list.params\": true,\n  \"filter:api.browse-videos.videos.list.result\": true,\n  \"filter:api.user-subscriptions-videos.videos.list.params\": true,\n  \"filter:api.user-subscriptions-videos.videos.list.result\": true,\n  \"filter:api.video-watch.video.get.params\": true,\n  \"filter:api.video-watch.video.get.result\": true,\n  \"filter:api.video-watch.video-playlist-elements.get.params\": true,\n  \"filter:api.video-watch.video-playlist-elements.get.result\": true,\n  \"filter:api.video-watch.video-threads.list.params\": true,\n  \"filter:api.video-watch.video-threads.list.result\": true,\n  \"filter:api.video-watch.video-thread-replies.list.params\": true,\n  \"filter:api.video-watch.video-thread-replies.list.result\": true,\n  \"filter:api.search.videos.list.params\": true,\n  \"filter:api.search.videos.list.result\": true,\n  \"filter:api.search.video-channels.list.params\": true,\n  \"filter:api.search.video-channels.list.result\": true,\n  \"filter:api.search.video-playlists.list.params\": true,\n  \"filter:api.search.video-playlists.list.result\": true,\n  \"filter:api.signup.registration.create.params\": true,\n  \"filter:api.my-library.video-playlist-elements.list.params\": true,\n  \"filter:api.my-library.video-playlist-elements.list.result\": true,\n  \"filter:internal.video-watch.player.build-options.params\": true,\n  \"filter:internal.video-watch.player.build-options.result\": true,\n  \"filter:internal.video-watch.player.load-options.params\": true,\n  \"filter:internal.video-watch.player.load-options.result\": true,\n  \"filter:internal.common.svg-icons.get-content.params\": true,\n  \"filter:internal.common.svg-icons.get-content.result\": true,\n  \"filter:left-menu.links.create.result\": true,\n  \"filter:upload.messages.create.result\": true,\n  \"filter:login.instance-about-plugin-panels.create.result\": true,\n  \"filter:signup.instance-about-plugin-panels.create.result\": true,\n  \"filter:share.video-embed-code.build.params\": true,\n  \"filter:share.video-embed-code.build.result\": true,\n  \"filter:share.video-playlist-embed-code.build.params\": true,\n  \"filter:share.video-playlist-embed-code.build.result\": true,\n  \"filter:share.video-embed-url.build.params\": true,\n  \"filter:share.video-embed-url.build.result\": true,\n  \"filter:share.video-playlist-embed-url.build.params\": true,\n  \"filter:share.video-playlist-embed-url.build.result\": true,\n  \"filter:share.video-url.build.params\": true,\n  \"filter:share.video-url.build.result\": true,\n  \"filter:share.video-playlist-url.build.params\": true,\n  \"filter:share.video-playlist-url.build.result\": true,\n  \"filter:video-watch.video-plugin-metadata.result\": true,\n  \"filter:internal.player.videojs.options.result\": true,\n  \"filter:internal.player.p2p-media-loader.options.result\": true,\n  \"filter:admin-users-list.bulk-actions.create.result\": true,\n  \"filter:admin-video-comments-list.actions.create.result\": true,\n  \"filter:admin-video-comments-list.bulk-actions.create.result\": true,\n  \"filter:user-moderation.actions.create.result\": true,\n  \"filter:admin-abuse-list.actions.create.result\": true\n};\nconst clientActionHookObject = {\n  \"action:application.init\": true,\n  \"action:video-watch.init\": true,\n  \"action:video-watch.video.loaded\": true,\n  \"action:video-watch.player.loaded\": true,\n  \"action:video-watch.video-threads.loaded\": true,\n  \"action:video-watch.video-thread-replies.loaded\": true,\n  \"action:video-channel-create.init\": true,\n  \"action:video-channel-update.init\": true,\n  \"action:video-channel-update.video-channel.loaded\": true,\n  \"action:video-channel-videos.init\": true,\n  \"action:video-channel-videos.video-channel.loaded\": true,\n  \"action:video-channel-videos.videos.loaded\": true,\n  \"action:video-channel-playlists.init\": true,\n  \"action:video-channel-playlists.video-channel.loaded\": true,\n  \"action:video-channel-playlists.playlists.loaded\": true,\n  \"action:video-edit.init\": true,\n  \"action:video-edit.form.updated\": true,\n  \"action:login.init\": true,\n  \"action:search.init\": true,\n  \"action:router.navigation-end\": true,\n  \"action:signup.register.init\": true,\n  \"action:admin-plugin-settings.init\": true,\n  \"action:video-upload.init\": true,\n  \"action:video-url-import.init\": true,\n  \"action:video-torrent-import.init\": true,\n  \"action:go-live.init\": true,\n  \"action:auth-user.logged-in\": true,\n  \"action:auth-user.logged-out\": true,\n  \"action:auth-user.information-loaded\": true,\n  \"action:modal.video-download.shown\": true,\n  \"action:modal.share.shown\": true,\n  \"action:embed.player.loaded\": true\n};\nObject.assign({}, clientFilterHookObject, clientActionHookObject);\nconst serverFilterHookObject = {\n  \"filter:api.videos.list.params\": true,\n  \"filter:api.videos.list.result\": true,\n  \"filter:api.video-playlist.videos.list.params\": true,\n  \"filter:api.video-playlist.videos.list.result\": true,\n  \"filter:api.accounts.videos.list.params\": true,\n  \"filter:api.accounts.videos.list.result\": true,\n  \"filter:api.video-channels.videos.list.params\": true,\n  \"filter:api.video-channels.videos.list.result\": true,\n  \"filter:api.user.me.videos.list.params\": true,\n  \"filter:api.user.me.videos.list.result\": true,\n  \"filter:api.overviews.videos.list.params\": true,\n  \"filter:api.overviews.videos.list.result\": true,\n  \"filter:api.user.me.subscription-videos.list.params\": true,\n  \"filter:api.user.me.subscription-videos.list.result\": true,\n  \"filter:api.search.videos.local.list.params\": true,\n  \"filter:api.search.videos.local.list.result\": true,\n  \"filter:api.search.videos.index.list.params\": true,\n  \"filter:api.search.videos.index.list.result\": true,\n  \"filter:api.search.video-channels.local.list.params\": true,\n  \"filter:api.search.video-channels.local.list.result\": true,\n  \"filter:api.search.video-channels.index.list.params\": true,\n  \"filter:api.search.video-channels.index.list.result\": true,\n  \"filter:api.search.video-playlists.local.list.params\": true,\n  \"filter:api.search.video-playlists.local.list.result\": true,\n  \"filter:api.search.video-playlists.index.list.params\": true,\n  \"filter:api.search.video-playlists.index.list.result\": true,\n  \"filter:api.video.get.result\": true,\n  \"filter:api.video-channels.list.params\": true,\n  \"filter:api.video-channels.list.result\": true,\n  \"filter:api.video-channel.get.result\": true,\n  \"filter:api.video.upload.accept.result\": true,\n  \"filter:api.live-video.create.accept.result\": true,\n  \"filter:api.video.pre-import-url.accept.result\": true,\n  \"filter:api.video.pre-import-torrent.accept.result\": true,\n  \"filter:api.video.post-import-url.accept.result\": true,\n  \"filter:api.video.post-import-torrent.accept.result\": true,\n  \"filter:api.video.update-file.accept.result\": true,\n  \"filter:api.video.user-import.accept.result\": true,\n  \"filter:api.video-thread.create.accept.result\": true,\n  \"filter:api.video-comment-reply.create.accept.result\": true,\n  \"filter:api.video.upload.video-attribute.result\": true,\n  \"filter:api.video.import-url.video-attribute.result\": true,\n  \"filter:api.video.import-torrent.video-attribute.result\": true,\n  \"filter:api.video.live.video-attribute.result\": true,\n  \"filter:api.video.user-import.video-attribute.result\": true,\n  \"filter:api.video-threads.list.params\": true,\n  \"filter:api.video-threads.list.result\": true,\n  \"filter:api.video-thread-comments.list.params\": true,\n  \"filter:api.video-thread-comments.list.result\": true,\n  \"filter:api.server.stats.get.result\": true,\n  \"filter:video.auto-blacklist.result\": true,\n  \"filter:api.user.signup.allowed.result\": true,\n  \"filter:api.user.request-signup.allowed.result\": true,\n  \"filter:api.download.video.allowed.result\": true,\n  \"filter:api.download.generated-video.allowed.result\": true,\n  \"filter:api.download.torrent.allowed.result\": true,\n  \"filter:html.embed.video.allowed.result\": true,\n  \"filter:html.embed.video-playlist.allowed.result\": true,\n  \"filter:html.client.json-ld.result\": true,\n  \"filter:job-queue.process.params\": true,\n  \"filter:job-queue.process.result\": true,\n  \"filter:transcoding.manual.resolutions-to-transcode.result\": true,\n  \"filter:transcoding.auto.resolutions-to-transcode.result\": true,\n  \"filter:activity-pub.remote-video-comment.create.accept.result\": true,\n  \"filter:activity-pub.activity.context.build.result\": true,\n  \"filter:activity-pub.video.json-ld.build.result\": true,\n  \"filter:feed.podcast.rss.create-custom-xmlns.result\": true,\n  \"filter:feed.podcast.channel.create-custom-tags.result\": true,\n  \"filter:feed.podcast.video.create-custom-tags.result\": true,\n  \"filter:api.user.me.get.result\": true,\n  \"filter:oauth.password-grant.get-user.params\": true,\n  \"filter:api.email-verification.ask-send-verify-email.body\": true,\n  \"filter:api.users.ask-reset-password.body\": true,\n  \"filter:email.subject.result\": true,\n  \"filter:email.template-path.result\": true\n};\nconst serverActionHookObject = {\n  \"action:application.listening\": true,\n  \"action:notifier.notification.created\": true,\n  \"action:api.video.updated\": true,\n  \"action:api.video.deleted\": true,\n  \"action:api.video.uploaded\": true,\n  \"action:api.video.viewed\": true,\n  \"action:api.video.file-updated\": true,\n  \"action:api.video-channel.created\": true,\n  \"action:api.video-channel.updated\": true,\n  \"action:api.video-channel.deleted\": true,\n  \"action:api.live-video.created\": true,\n  \"action:live.video.state.updated\": true,\n  \"action:api.video-thread.created\": true,\n  \"action:api.video-comment-reply.created\": true,\n  \"action:api.video-comment.deleted\": true,\n  \"action:api.video-caption.created\": true,\n  \"action:api.video-caption.deleted\": true,\n  \"action:api.user.blocked\": true,\n  \"action:api.user.unblocked\": true,\n  \"action:api.user.registered\": true,\n  \"action:api.user.requested-registration\": true,\n  \"action:api.user.created\": true,\n  \"action:api.user.deleted\": true,\n  \"action:api.user.updated\": true,\n  \"action:api.user.oauth2-got-token\": true,\n  \"action:api.video-playlist-element.created\": true,\n  \"action:activity-pub.remote-video.created\": true,\n  \"action:activity-pub.remote-video.updated\": true\n};\nObject.assign({}, serverFilterHookObject, serverActionHookObject);\nconst LiveVideoLatencyMode = {\n  HIGH_LATENCY: 2,\n  SMALL_LATENCY: 3\n};\nconst VideoResolution = {\n  H_NOVIDEO: 0,\n  H_144P: 144,\n  H_240P: 240,\n  H_360P: 360,\n  H_480P: 480,\n  H_720P: 720,\n  H_1080P: 1080,\n  H_1440P: 1440,\n  H_4K: 2160\n};\nconst NSFWFlag = {\n  VIOLENT: 1 << 0,\n  EXPLICIT_SEX: 1 << 1\n};\nfunction timeToInt(time) {\n  if (!time)\n    return 0;\n  if (typeof time === \"number\")\n    return Math.floor(time);\n  const reg = new RegExp(`^((?<hours>\\\\d+)h)?((?<minutes>\\\\d+)m)?((?<seconds>\\\\d+)s?)?$`);\n  const matches = time.match(reg);\n  if (matches) {\n    const hours = parseInt(matches.groups[\"hours\"] || \"0\", 10);\n    const minutes = parseInt(matches.groups[\"minutes\"] || \"0\", 10);\n    const seconds = parseInt(matches.groups[\"seconds\"] || \"0\", 10);\n    return hours * 3600 + minutes * 60 + seconds;\n  }\n  const parts = time.split(\":\").reverse();\n  const iMultiplier = {\n    0: 1,\n    1: 60,\n    2: 3600\n  };\n  let result = 0;\n  for (let i = 0; i < parts.length; i++) {\n    const partInt = parseInt(parts[i], 10);\n    if (isNaN(partInt))\n      return 0;\n    result += iMultiplier[i] * partInt;\n  }\n  return result;\n}\nfunction secondsToTime(options) {\n  var _a;\n  let seconds;\n  let format2 = \"short\";\n  let symbol;\n  if (typeof options === \"number\") {\n    seconds = options;\n  } else {\n    seconds = options.seconds;\n    format2 = (_a = options.format) !== null && _a !== void 0 ? _a : \"short\";\n    symbol = options.symbol;\n  }\n  let time = \"\";\n  if (seconds === 0 && format2 !== \"full\")\n    return \"0s\";\n  const formatNumber = (value) => {\n    if (format2 === \"locale-string\")\n      return value.toLocaleString();\n    return value;\n  };\n  const hourSymbol = symbol || \"h\";\n  const minuteSymbol = symbol || \"m\";\n  const secondsSymbol = format2 === \"full\" ? \"\" : \"s\";\n  const hours = Math.floor(seconds / 3600);\n  if (hours >= 1 && hours < 10 && format2 === \"full\")\n    time = \"0\" + hours + hourSymbol;\n  else if (hours >= 1)\n    time = formatNumber(hours) + hourSymbol;\n  else if (format2 === \"full\")\n    time = \"00\" + hourSymbol;\n  seconds %= 3600;\n  const minutes = Math.floor(seconds / 60);\n  if (minutes >= 1 && minutes < 10 && format2 === \"full\")\n    time += \"0\" + minutes + minuteSymbol;\n  else if (minutes >= 1)\n    time += formatNumber(minutes) + minuteSymbol;\n  else if (format2 === \"full\")\n    time += \"00\" + minuteSymbol;\n  seconds = Math.round(seconds) % 60;\n  if (seconds >= 1 && seconds < 10 && format2 === \"full\")\n    time += \"0\" + seconds + secondsSymbol;\n  else if (seconds >= 1)\n    time += formatNumber(seconds) + secondsSymbol;\n  else if (format2 === \"full\")\n    time += \"00\";\n  return time;\n}\nfunction pick(object, keys) {\n  const result = {};\n  for (const key of keys) {\n    if (Object.prototype.hasOwnProperty.call(object, key)) {\n      result[key] = object[key];\n    }\n  }\n  return result;\n}\nfunction omit(object, keys) {\n  const result = {};\n  const keysSet = new Set(keys);\n  for (const [key, value] of Object.entries(object)) {\n    if (keysSet.has(key))\n      continue;\n    result[key] = value;\n  }\n  return result;\n}\nfunction addQueryParams(url, params) {\n  const objUrl = new URL(url);\n  for (const key of Object.keys(params)) {\n    objUrl.searchParams.append(key, params[key]);\n  }\n  return objUrl.toString();\n}\nfunction removeQueryParams(url) {\n  const objUrl = new URL(url);\n  objUrl.searchParams.forEach((_v, k) => objUrl.searchParams.delete(k));\n  return objUrl.toString();\n}\nfunction buildVideoWatchPath(video) {\n  return \"/w/\" + video.shortUUID;\n}\nfunction buildVideoLink(video, base) {\n  return window.location.origin + buildVideoWatchPath(video);\n}\nfunction decorateVideoLink(options) {\n  const { url } = options;\n  const params = new URLSearchParams();\n  if (options.startTime !== void 0 && options.startTime !== null) {\n    const startTimeInt = Math.floor(options.startTime);\n    params.set(\"start\", secondsToTime(startTimeInt));\n  }\n  if (options.stopTime) {\n    const stopTimeInt = Math.floor(options.stopTime);\n    params.set(\"stop\", secondsToTime(stopTimeInt));\n  }\n  if (options.subtitle)\n    params.set(\"subtitle\", options.subtitle);\n  if (options.loop === true)\n    params.set(\"loop\", \"1\");\n  if (options.autoplay === true)\n    params.set(\"autoplay\", \"1\");\n  if (options.muted === true)\n    params.set(\"muted\", \"1\");\n  if (options.title === false)\n    params.set(\"title\", \"0\");\n  if (options.warningTitle === false)\n    params.set(\"warningTitle\", \"0\");\n  if (options.controls === false)\n    params.set(\"controls\", \"0\");\n  if (options.controlBar === false)\n    params.set(\"controlBar\", \"0\");\n  if (options.peertubeLink === false)\n    params.set(\"peertubeLink\", \"0\");\n  if (options.p2p !== void 0)\n    params.set(\"p2p\", options.p2p ? \"1\" : \"0\");\n  if (options.api !== void 0)\n    params.set(\"api\", options.api ? \"1\" : \"0\");\n  if (options.version !== void 0)\n    params.set(\"v\", options.version + \"\");\n  return buildUrl(url, params);\n}\nfunction buildUrl(url, params) {\n  let hasParams = false;\n  params.forEach(() => {\n    hasParams = true;\n  });\n  if (hasParams)\n    return url + \"?\" + params.toString();\n  return url;\n}\nconst I18N_LOCALES = {\n  \"en-US\": \"English\",\n  \"ar\": \"العربية\",\n  \"ca-ES\": \"Català\",\n  \"cs-CZ\": \"Čeština\",\n  \"de-DE\": \"Deutsch\",\n  \"el-GR\": \"ελληνικά\",\n  \"eo\": \"Esperanto\",\n  \"es-ES\": \"Español\",\n  \"eu-ES\": \"Euskara\",\n  \"fa-IR\": \"فارسی\",\n  \"fi-FI\": \"Suomi\",\n  \"fr-FR\": \"Français\",\n  \"gd\": \"Gàidhlig\",\n  \"gl-ES\": \"Galego\",\n  \"hr\": \"Hrvatski\",\n  \"hu-HU\": \"Magyar\",\n  \"is\": \"Íslenska\",\n  \"it-IT\": \"Italiano\",\n  \"ja-JP\": \"日本語\",\n  \"kab\": \"Taqbaylit\",\n  \"nb-NO\": \"Norsk bokmål\",\n  \"nl-NL\": \"Nederlands\",\n  \"nn\": \"Norsk nynorsk\",\n  \"oc\": \"Occitan\",\n  \"pl-PL\": \"Polski\",\n  \"pt-BR\": \"Português (Brasil)\",\n  \"pt-PT\": \"Português (Portugal)\",\n  \"ru-RU\": \"Pусский\",\n  \"sk-SK\": \"Slovenčina\",\n  \"sq\": \"Shqip\",\n  \"sv-SE\": \"Svenska\",\n  \"th-TH\": \"ไทย\",\n  \"tok\": \"Toki Pona\",\n  \"tr-TR\": \"Türkçe\",\n  \"uk-UA\": \"украї́нська мо́ва\",\n  \"vi-VN\": \"Tiếng Việt\",\n  \"zh-Hans-CN\": \"简体中文（中国）\",\n  \"zh-Hant-TW\": \"繁體中文（台灣）\"\n};\nconst I18N_LOCALE_ALIAS = {\n  \"ar-001\": \"ar\",\n  \"ca\": \"ca-ES\",\n  \"cs\": \"cs-CZ\",\n  \"de\": \"de-DE\",\n  \"el\": \"el-GR\",\n  \"en\": \"en-US\",\n  \"es\": \"es-ES\",\n  \"eu\": \"eu-ES\",\n  \"fa\": \"fa-IR\",\n  \"fi\": \"fi-FI\",\n  \"fr\": \"fr-FR\",\n  \"gl\": \"gl-ES\",\n  \"hu\": \"hu-HU\",\n  \"it\": \"it-IT\",\n  \"ja\": \"ja-JP\",\n  \"nb\": \"nb-NO\",\n  \"nl\": \"nl-NL\",\n  \"pl\": \"pl-PL\",\n  \"pt\": \"pt-BR\",\n  \"ru\": \"ru-RU\",\n  \"sk\": \"sk-SK\",\n  \"sv\": \"sv-SE\",\n  \"th\": \"th-TH\",\n  \"tr\": \"tr-TR\",\n  \"uk\": \"uk-UA\",\n  \"vi\": \"vi-VN\",\n  \"zh-CN\": \"zh-Hans-CN\",\n  \"zh-Hans\": \"zh-Hans-CN\",\n  \"zh-Hant\": \"zh-Hant-TW\",\n  \"zh-TW\": \"zh-Hant-TW\",\n  \"zh\": \"zh-Hans-CN\"\n};\nconst POSSIBLE_LOCALES = Object.keys(I18N_LOCALES).concat(Object.keys(I18N_LOCALE_ALIAS));\nfunction getDefaultLocale() {\n  return \"en-US\";\n}\nfunction isDefaultLocale(locale) {\n  return getCompleteLocale(locale) === getCompleteLocale(getDefaultLocale());\n}\nPOSSIBLE_LOCALES.map((l) => \"/\" + l);\nfunction is18nLocale(locale) {\n  return POSSIBLE_LOCALES.includes(locale);\n}\nfunction getCompleteLocale(locale) {\n  if (!locale)\n    return locale;\n  const found = I18N_LOCALE_ALIAS[locale];\n  return found || locale;\n}\nfunction getShortLocale(locale) {\n  if (locale.includes(\"-\") === false)\n    return locale;\n  return locale.split(\"-\")[0];\n}\nconst classicResolutions = /* @__PURE__ */ new Set([\n  VideoResolution.H_NOVIDEO,\n  VideoResolution.H_144P,\n  VideoResolution.H_240P,\n  VideoResolution.H_360P,\n  VideoResolution.H_480P,\n  VideoResolution.H_720P,\n  VideoResolution.H_1080P,\n  VideoResolution.H_1440P,\n  VideoResolution.H_4K\n]);\nconst resolutionConverter = {\n  3840: VideoResolution.H_4K,\n  1920: VideoResolution.H_1080P,\n  1280: VideoResolution.H_720P,\n  854: VideoResolution.H_480P,\n  640: VideoResolution.H_360P,\n  426: VideoResolution.H_240P,\n  256: VideoResolution.H_144P\n};\nfunction getResolutionLabel(options) {\n  const { height, width } = options;\n  if (options.resolution === 0)\n    return \"Audio only\";\n  let resolution = options.resolution;\n  if (!classicResolutions.has(resolution) && typeof height === \"number\" && typeof width === \"number\") {\n    const max = Math.max(height, width);\n    const alternativeLabel = resolutionConverter[max];\n    if (alternativeLabel)\n      resolution = resolutionConverter[max];\n  }\n  return `${resolution}p`;\n}\nfunction getResolutionAndFPSLabel(resolutionLabel, fps) {\n  if (fps && fps >= 50)\n    return resolutionLabel + fps;\n  return resolutionLabel;\n}\nconst valuesMap = /* @__PURE__ */ new Map();\nfunction proxify(instance) {\n  return new Proxy(instance, {\n    set: function(obj, prop, value) {\n      if (Object.prototype.hasOwnProperty.call(MemoryStorage, prop)) {\n        instance[prop] = value;\n      } else {\n        instance.setItem(prop, value);\n      }\n      return true;\n    },\n    get: function(target, name) {\n      if (typeof instance[name] === \"function\") {\n        return instance[name];\n      } else if (valuesMap.has(name)) {\n        return instance.getItem(name);\n      }\n    }\n  });\n}\nclass MemoryStorage {\n  getItem(key) {\n    const stringKey = String(key);\n    if (valuesMap.has(key)) {\n      return String(valuesMap.get(stringKey));\n    }\n    return null;\n  }\n  setItem(key, val) {\n    valuesMap.set(String(key), String(val));\n  }\n  removeItem(key) {\n    valuesMap.delete(key);\n  }\n  clear() {\n    valuesMap.clear();\n  }\n  key(i) {\n    if (arguments.length === 0) {\n      throw new TypeError('Failed to execute \"key\" on \"Storage\": 1 argument required, but only 0 present.');\n    }\n    const arr = Array.from(valuesMap.keys());\n    return arr[i];\n  }\n  get length() {\n    return valuesMap.size;\n  }\n}\nlet peertubeLocalStorage;\nlet peertubeSessionStorage;\nfunction reinitStorage() {\n  const instanceLocalStorage = new MemoryStorage();\n  const instanceSessionStorage = new MemoryStorage();\n  peertubeLocalStorage = proxify(instanceLocalStorage);\n  peertubeSessionStorage = proxify(instanceSessionStorage);\n}\ntry {\n  peertubeLocalStorage = localStorage;\n  peertubeSessionStorage = sessionStorage;\n} catch (err) {\n  reinitStorage();\n}\nif (!peertubeLocalStorage || !peertubeSessionStorage) {\n  reinitStorage();\n}\nconst UserTokenLocalStorageKeys = {\n  ACCESS_TOKEN: \"access_token\",\n  REFRESH_TOKEN: \"refresh_token\",\n  TOKEN_TYPE: \"token_type\"\n};\nclass OAuthUserTokens {\n  constructor(hash2) {\n    __publicField(this, \"accessToken\");\n    __publicField(this, \"refreshToken\");\n    __publicField(this, \"tokenType\");\n    if (hash2) {\n      this.accessToken = hash2.accessToken;\n      this.refreshToken = hash2.refreshToken;\n      if (hash2.tokenType === \"bearer\") {\n        this.tokenType = \"Bearer\";\n      } else {\n        this.tokenType = hash2.tokenType;\n      }\n    }\n  }\n  static getUserTokens(localStorage2) {\n    const accessTokenLocalStorage = localStorage2.getItem(UserTokenLocalStorageKeys.ACCESS_TOKEN);\n    const refreshTokenLocalStorage = localStorage2.getItem(UserTokenLocalStorageKeys.REFRESH_TOKEN);\n    const tokenTypeLocalStorage = localStorage2.getItem(UserTokenLocalStorageKeys.TOKEN_TYPE);\n    if (!accessTokenLocalStorage || !refreshTokenLocalStorage || !tokenTypeLocalStorage) return null;\n    return new OAuthUserTokens({\n      accessToken: accessTokenLocalStorage,\n      refreshToken: refreshTokenLocalStorage,\n      tokenType: tokenTypeLocalStorage\n    });\n  }\n  static saveToLocalStorage(localStorage2, tokens) {\n    localStorage2.setItem(UserTokenLocalStorageKeys.ACCESS_TOKEN, tokens.accessToken);\n    localStorage2.setItem(UserTokenLocalStorageKeys.REFRESH_TOKEN, tokens.refreshToken);\n    localStorage2.setItem(UserTokenLocalStorageKeys.TOKEN_TYPE, tokens.tokenType);\n  }\n  static flushLocalStorage(localStorage2) {\n    localStorage2.removeItem(UserTokenLocalStorageKeys.ACCESS_TOKEN);\n    localStorage2.removeItem(UserTokenLocalStorageKeys.REFRESH_TOKEN);\n    localStorage2.removeItem(UserTokenLocalStorageKeys.TOKEN_TYPE);\n  }\n}\nlet Logger$1 = class Logger {\n  constructor() {\n    __publicField(this, \"hooks\", []);\n  }\n  info(message, meta) {\n    this.runHooks(\"info\", message, meta);\n    if (meta) console.log(message, meta);\n    else console.log(message);\n  }\n  warn(message, meta) {\n    this.runHooks(\"warn\", message, meta);\n    this.clientWarn(message, meta);\n  }\n  clientWarn(message, meta) {\n    if (meta) console.warn(message, meta);\n    else console.warn(message);\n  }\n  error(message, meta) {\n    this.runHooks(\"error\", message, meta);\n    this.clientError(message, meta);\n  }\n  clientError(message, meta) {\n    if (meta) console.error(message, meta);\n    else console.error(message);\n  }\n  addHook(level, hook) {\n    this.hooks.push({ level, hook });\n  }\n  registerServerSending(serverUrl) {\n    this.addHook(\"warn\", (message, meta) => this.sendClientLog(serverUrl, this.buildServerLogPayload(\"warn\", message, meta)));\n    this.addHook(\"error\", (message, meta) => this.sendClientLog(serverUrl, this.buildServerLogPayload(\"error\", message, meta)));\n  }\n  sendClientLog(serverUrl, payload) {\n    if (!payload) return;\n    const headers = new Headers({\n      \"Accept\": \"application/json\",\n      \"Content-Type\": \"application/json\"\n    });\n    try {\n      const tokens = OAuthUserTokens.getUserTokens(peertubeLocalStorage);\n      if (tokens) headers.set(\"Authorization\", `${tokens.tokenType} ${tokens.accessToken}`);\n    } catch (err) {\n      console.error(\"Cannot set tokens to client log sender.\", { err });\n    }\n    fetch(serverUrl + \"/api/v1/server/logs/client\", {\n      headers,\n      method: \"POST\",\n      body: JSON.stringify(payload)\n    }).catch((err) => console.error(\"Cannot send client warn/error to server.\", err));\n  }\n  buildServerLogPayload(level, message, meta) {\n    if (!message) return null;\n    return {\n      message: this.buildMessageServerLogPayload(message),\n      userAgent: navigator.userAgent,\n      url: window.location.href,\n      level,\n      stackTrace: this.buildStackServerLogPayload(message, meta),\n      meta: this.buildMetaServerLogPayload(meta)\n    };\n  }\n  buildMessageServerLogPayload(message) {\n    if (typeof message === \"string\") return message;\n    if (message instanceof Error) return message.message;\n    return JSON.stringify(message);\n  }\n  buildStackServerLogPayload(message, meta) {\n    if (message instanceof Error) return this.buildStack(message);\n    if (meta instanceof Error) return this.buildStack(meta);\n    if ((meta == null ? void 0 : meta.err) instanceof Error) return this.buildStack(meta.err);\n    return void 0;\n  }\n  buildMetaServerLogPayload(meta) {\n    if (!meta) return void 0;\n    if (meta instanceof Error) return void 0;\n    let result;\n    try {\n      result = JSON.stringify(meta, (key, value) => {\n        if (key === \"err\") return void 0;\n        return value;\n      });\n    } catch (err) {\n      console.error(\"Cannot stringify meta.\", err);\n    }\n    return result;\n  }\n  runHooks(level, message, meta) {\n    for (const hookObj of this.hooks) {\n      if (hookObj.level !== level) continue;\n      hookObj.hook(message, meta);\n    }\n  }\n  buildStack(err) {\n    return `${err.message}\n${err.stack || \"\"}`;\n  }\n};\nconst logger$1 = window.logger || new Logger$1();\nwindow.logger = logger$1;\nconst _TranslationsManager = class _TranslationsManager {\n  static getServerTranslations(serverUrl, locale) {\n    const path = _TranslationsManager.getLocalePath(serverUrl, locale);\n    if (!path) return Promise.resolve(void 0);\n    return fetch(path + \"/server.json\").then((res) => res.json()).catch((err) => {\n      logger$1.error(\"Cannot get server translations\", err);\n      return void 0;\n    });\n  }\n  static loadLocaleInVideoJS(serverUrl, locale, videojs2) {\n    const path = _TranslationsManager.getLocalePath(serverUrl, locale);\n    if (!path) return Promise.resolve(void 0);\n    let p;\n    if (_TranslationsManager.videojsLocaleCache[path]) {\n      p = Promise.resolve(_TranslationsManager.videojsLocaleCache[path]);\n    } else {\n      p = fetch(path + \"/player.json\").then((res) => res.json()).then((json) => {\n        _TranslationsManager.videojsLocaleCache[path] = json;\n        return json;\n      }).catch((err) => {\n        logger$1.error(\"Cannot get player translations\", err);\n        return void 0;\n      });\n    }\n    const completeLocale = getCompleteLocale(locale);\n    return p.then((json) => videojs2.addLanguage(getShortLocale(completeLocale), json));\n  }\n  static getLocalePath(serverUrl, locale) {\n    const completeLocale = getCompleteLocale(locale);\n    if (!is18nLocale(completeLocale) || isDefaultLocale(completeLocale)) return void 0;\n    return serverUrl + \"/client/locales/\" + completeLocale;\n  }\n};\n__publicField(_TranslationsManager, \"videojsLocaleCache\", {});\nlet TranslationsManager = _TranslationsManager;\nfunction copyToClipboard(text, container) {\n  if (!container) container = document.body;\n  const el = document.createElement(\"textarea\");\n  el.value = text;\n  el.setAttribute(\"readonly\", \"\");\n  el.style.position = \"absolute\";\n  el.style.left = \"-9999px\";\n  container.appendChild(el);\n  el.select();\n  document.execCommand(\"copy\");\n  container.removeChild(el);\n}\nfunction wait(ms2) {\n  return new Promise((res) => {\n    setTimeout(() => res(), ms2);\n  });\n}\nfunction buildVideoOrPlaylistEmbed(options) {\n  const { embedUrl, embedTitle, aspectRatio, responsive = false } = options;\n  const iframe = document.createElement(\"iframe\");\n  iframe.title = embedTitle;\n  iframe.width = responsive ? \"100%\" : \"560\";\n  iframe.height = responsive ? \"100%\" : \"315\";\n  iframe.src = embedUrl;\n  iframe.frameBorder = \"0\";\n  iframe.allowFullscreen = true;\n  iframe.sandbox.add(\"allow-same-origin\", \"allow-scripts\", \"allow-popups\", \"allow-forms\");\n  if (responsive) {\n    const wrapper = document.createElement(\"div\");\n    wrapper.style.position = \"relative\";\n    wrapper.style.paddingTop = aspectRatio ? (1 / aspectRatio * 100).toFixed(2) + \"%\" : \"56.25%\";\n    iframe.style.position = \"absolute\";\n    iframe.style.inset = \"0\";\n    wrapper.appendChild(iframe);\n    return wrapper.outerHTML;\n  }\n  return iframe.outerHTML;\n}\nfunction isIOS() {\n  if (/iPad|iPhone|iPod/.test(navigator.platform)) {\n    return true;\n  }\n  return !!(navigator.maxTouchPoints && navigator.maxTouchPoints > 2 && navigator.platform.includes(\"MacIntel\"));\n}\nfunction isSafari() {\n  return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n}\nfunction isMobile() {\n  return /iPhone|iPad|iPod|Android/i.test(navigator.userAgent);\n}\nvar commonjsGlobal$1 = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : {};\nfunction getDefaultExportFromCjs$4(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, \"default\") ? x[\"default\"] : x;\n}\nfunction getAugmentedNamespace(n) {\n  if (Object.prototype.hasOwnProperty.call(n, \"__esModule\")) return n;\n  var f = n.default;\n  if (typeof f == \"function\") {\n    var a = function a2() {\n      if (this instanceof a2) {\n        return Reflect.construct(f, arguments, this.constructor);\n      }\n      return f.apply(this, arguments);\n    };\n    a.prototype = f.prototype;\n  } else a = {};\n  Object.defineProperty(a, \"__esModule\", { value: true });\n  Object.keys(n).forEach(function(k) {\n    var d = Object.getOwnPropertyDescriptor(n, k);\n    Object.defineProperty(a, k, d.get ? d : {\n      enumerable: true,\n      get: function() {\n        return n[k];\n      }\n    });\n  });\n  return a;\n}\nvar window_1;\nvar hasRequiredWindow;\nfunction requireWindow() {\n  if (hasRequiredWindow) return window_1;\n  hasRequiredWindow = 1;\n  var win;\n  if (typeof window !== \"undefined\") {\n    win = window;\n  } else if (typeof commonjsGlobal$1 !== \"undefined\") {\n    win = commonjsGlobal$1;\n  } else if (typeof self !== \"undefined\") {\n    win = self;\n  } else {\n    win = {};\n  }\n  window_1 = win;\n  return window_1;\n}\nconst __viteBrowserExternal = {};\nconst __viteBrowserExternal$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: __viteBrowserExternal\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst require$$0 = /* @__PURE__ */ getAugmentedNamespace(__viteBrowserExternal$1);\nvar document_1;\nvar hasRequiredDocument;\nfunction requireDocument() {\n  if (hasRequiredDocument) return document_1;\n  hasRequiredDocument = 1;\n  var topLevel = typeof commonjsGlobal$1 !== \"undefined\" ? commonjsGlobal$1 : typeof window !== \"undefined\" ? window : {};\n  var minDoc = require$$0;\n  var doccy;\n  if (typeof document !== \"undefined\") {\n    doccy = document;\n  } else {\n    doccy = topLevel[\"__GLOBAL_DOCUMENT_CACHE@4\"];\n    if (!doccy) {\n      doccy = topLevel[\"__GLOBAL_DOCUMENT_CACHE@4\"] = minDoc;\n    }\n  }\n  document_1 = doccy;\n  return document_1;\n}\nvar _extends$1 = { exports: {} };\nvar hasRequired_extends;\nfunction require_extends() {\n  if (hasRequired_extends) return _extends$1.exports;\n  hasRequired_extends = 1;\n  (function(module) {\n    function _extends2() {\n      return module.exports = _extends2 = Object.assign ? Object.assign.bind() : function(n) {\n        for (var e = 1; e < arguments.length; e++) {\n          var t = arguments[e];\n          for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n        }\n        return n;\n      }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _extends2.apply(null, arguments);\n    }\n    module.exports = _extends2, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  })(_extends$1);\n  return _extends$1.exports;\n}\nvar keycode = { exports: {} };\nvar hasRequiredKeycode;\nfunction requireKeycode() {\n  if (hasRequiredKeycode) return keycode.exports;\n  hasRequiredKeycode = 1;\n  (function(module, exports) {\n    function keyCode(searchInput) {\n      if (searchInput && \"object\" === typeof searchInput) {\n        var hasKeyCode = searchInput.which || searchInput.keyCode || searchInput.charCode;\n        if (hasKeyCode) searchInput = hasKeyCode;\n      }\n      if (\"number\" === typeof searchInput) return names[searchInput];\n      var search = String(searchInput);\n      var foundNamedKey = codes[search.toLowerCase()];\n      if (foundNamedKey) return foundNamedKey;\n      var foundNamedKey = aliases[search.toLowerCase()];\n      if (foundNamedKey) return foundNamedKey;\n      if (search.length === 1) return search.charCodeAt(0);\n      return void 0;\n    }\n    keyCode.isEventKey = function isEventKey(event, nameOrCode) {\n      if (event && \"object\" === typeof event) {\n        var keyCode2 = event.which || event.keyCode || event.charCode;\n        if (keyCode2 === null || keyCode2 === void 0) {\n          return false;\n        }\n        if (typeof nameOrCode === \"string\") {\n          var foundNamedKey = codes[nameOrCode.toLowerCase()];\n          if (foundNamedKey) {\n            return foundNamedKey === keyCode2;\n          }\n          var foundNamedKey = aliases[nameOrCode.toLowerCase()];\n          if (foundNamedKey) {\n            return foundNamedKey === keyCode2;\n          }\n        } else if (typeof nameOrCode === \"number\") {\n          return nameOrCode === keyCode2;\n        }\n        return false;\n      }\n    };\n    exports = module.exports = keyCode;\n    var codes = exports.code = exports.codes = {\n      \"backspace\": 8,\n      \"tab\": 9,\n      \"enter\": 13,\n      \"shift\": 16,\n      \"ctrl\": 17,\n      \"alt\": 18,\n      \"pause/break\": 19,\n      \"caps lock\": 20,\n      \"esc\": 27,\n      \"space\": 32,\n      \"page up\": 33,\n      \"page down\": 34,\n      \"end\": 35,\n      \"home\": 36,\n      \"left\": 37,\n      \"up\": 38,\n      \"right\": 39,\n      \"down\": 40,\n      \"insert\": 45,\n      \"delete\": 46,\n      \"command\": 91,\n      \"left command\": 91,\n      \"right command\": 93,\n      \"numpad *\": 106,\n      \"numpad +\": 107,\n      \"numpad -\": 109,\n      \"numpad .\": 110,\n      \"numpad /\": 111,\n      \"num lock\": 144,\n      \"scroll lock\": 145,\n      \"my computer\": 182,\n      \"my calculator\": 183,\n      \";\": 186,\n      \"=\": 187,\n      \",\": 188,\n      \"-\": 189,\n      \".\": 190,\n      \"/\": 191,\n      \"`\": 192,\n      \"[\": 219,\n      \"\\\\\": 220,\n      \"]\": 221,\n      \"'\": 222\n    };\n    var aliases = exports.aliases = {\n      \"windows\": 91,\n      \"⇧\": 16,\n      \"⌥\": 18,\n      \"⌃\": 17,\n      \"⌘\": 91,\n      \"ctl\": 17,\n      \"control\": 17,\n      \"option\": 18,\n      \"pause\": 19,\n      \"break\": 19,\n      \"caps\": 20,\n      \"return\": 13,\n      \"escape\": 27,\n      \"spc\": 32,\n      \"spacebar\": 32,\n      \"pgup\": 33,\n      \"pgdn\": 34,\n      \"ins\": 45,\n      \"del\": 46,\n      \"cmd\": 91\n    };\n    /*!\n     * Programatically add the following\n     */\n    for (i = 97; i < 123; i++) codes[String.fromCharCode(i)] = i - 32;\n    for (var i = 48; i < 58; i++) codes[i - 48] = i;\n    for (i = 1; i < 13; i++) codes[\"f\" + i] = i + 111;\n    for (i = 0; i < 10; i++) codes[\"numpad \" + i] = i + 96;\n    var names = exports.names = exports.title = {};\n    for (i in codes) names[codes[i]] = i;\n    for (var alias in aliases) {\n      codes[alias] = aliases[alias];\n    }\n  })(keycode, keycode.exports);\n  return keycode.exports;\n}\nvar assertThisInitialized = { exports: {} };\nvar hasRequiredAssertThisInitialized;\nfunction requireAssertThisInitialized() {\n  if (hasRequiredAssertThisInitialized) return assertThisInitialized.exports;\n  hasRequiredAssertThisInitialized = 1;\n  (function(module) {\n    function _assertThisInitialized(e) {\n      if (void 0 === e) throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");\n      return e;\n    }\n    module.exports = _assertThisInitialized, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  })(assertThisInitialized);\n  return assertThisInitialized.exports;\n}\nvar inheritsLoose = { exports: {} };\nvar setPrototypeOf = { exports: {} };\nvar hasRequiredSetPrototypeOf;\nfunction requireSetPrototypeOf() {\n  if (hasRequiredSetPrototypeOf) return setPrototypeOf.exports;\n  hasRequiredSetPrototypeOf = 1;\n  (function(module) {\n    function _setPrototypeOf(t, e) {\n      return module.exports = _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function(t2, e2) {\n        return t2.__proto__ = e2, t2;\n      }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _setPrototypeOf(t, e);\n    }\n    module.exports = _setPrototypeOf, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  })(setPrototypeOf);\n  return setPrototypeOf.exports;\n}\nvar hasRequiredInheritsLoose;\nfunction requireInheritsLoose() {\n  if (hasRequiredInheritsLoose) return inheritsLoose.exports;\n  hasRequiredInheritsLoose = 1;\n  (function(module) {\n    var setPrototypeOf2 = requireSetPrototypeOf();\n    function _inheritsLoose(t, o) {\n      t.prototype = Object.create(o.prototype), t.prototype.constructor = t, setPrototypeOf2(t, o);\n    }\n    module.exports = _inheritsLoose, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  })(inheritsLoose);\n  return inheritsLoose.exports;\n}\nvar tuple;\nvar hasRequiredTuple;\nfunction requireTuple() {\n  if (hasRequiredTuple) return tuple;\n  hasRequiredTuple = 1;\n  tuple = SafeParseTuple;\n  function SafeParseTuple(obj, reviver) {\n    var json;\n    var error = null;\n    try {\n      json = JSON.parse(obj, reviver);\n    } catch (err) {\n      error = err;\n    }\n    return [error, json];\n  }\n  return tuple;\n}\nvar lib = { exports: {} };\nvar isFunction_1;\nvar hasRequiredIsFunction;\nfunction requireIsFunction() {\n  if (hasRequiredIsFunction) return isFunction_1;\n  hasRequiredIsFunction = 1;\n  isFunction_1 = isFunction;\n  var toString = Object.prototype.toString;\n  function isFunction(fn) {\n    if (!fn) {\n      return false;\n    }\n    var string = toString.call(fn);\n    return string === \"[object Function]\" || typeof fn === \"function\" && string !== \"[object RegExp]\" || typeof window !== \"undefined\" && // IE8 and below\n    (fn === window.setTimeout || fn === window.alert || fn === window.confirm || fn === window.prompt);\n  }\n  return isFunction_1;\n}\nvar httpHandler;\nvar hasRequiredHttpHandler;\nfunction requireHttpHandler() {\n  if (hasRequiredHttpHandler) return httpHandler;\n  hasRequiredHttpHandler = 1;\n  var window2 = requireWindow();\n  var httpResponseHandler = function httpResponseHandler2(callback, decodeResponseBody) {\n    if (decodeResponseBody === void 0) {\n      decodeResponseBody = false;\n    }\n    return function(err, response, responseBody) {\n      if (err) {\n        callback(err);\n        return;\n      }\n      if (response.statusCode >= 400 && response.statusCode <= 599) {\n        var cause = responseBody;\n        if (decodeResponseBody) {\n          if (window2.TextDecoder) {\n            var charset = getCharset(response.headers && response.headers[\"content-type\"]);\n            try {\n              cause = new TextDecoder(charset).decode(responseBody);\n            } catch (e) {\n            }\n          } else {\n            cause = String.fromCharCode.apply(null, new Uint8Array(responseBody));\n          }\n        }\n        callback({\n          cause\n        });\n        return;\n      }\n      callback(null, responseBody);\n    };\n  };\n  function getCharset(contentTypeHeader) {\n    if (contentTypeHeader === void 0) {\n      contentTypeHeader = \"\";\n    }\n    return contentTypeHeader.toLowerCase().split(\";\").reduce(function(charset, contentType) {\n      var _contentType$split = contentType.split(\"=\"), type = _contentType$split[0], value = _contentType$split[1];\n      if (type.trim() === \"charset\") {\n        return value.trim();\n      }\n      return charset;\n    }, \"utf-8\");\n  }\n  httpHandler = httpResponseHandler;\n  return httpHandler;\n}\nvar hasRequiredLib;\nfunction requireLib() {\n  if (hasRequiredLib) return lib.exports;\n  hasRequiredLib = 1;\n  var window2 = requireWindow();\n  var _extends2 = require_extends();\n  var isFunction = requireIsFunction();\n  createXHR.httpHandler = requireHttpHandler();\n  /**\n   * @license\n   * slighly modified parse-headers 2.0.2 <https://github.com/kesla/parse-headers/>\n   * Copyright (c) 2014 David Björklund\n   * Available under the MIT license\n   * <https://github.com/kesla/parse-headers/blob/master/LICENCE>\n   */\n  var parseHeaders = function parseHeaders2(headers) {\n    var result = {};\n    if (!headers) {\n      return result;\n    }\n    headers.trim().split(\"\\n\").forEach(function(row) {\n      var index = row.indexOf(\":\");\n      var key = row.slice(0, index).trim().toLowerCase();\n      var value = row.slice(index + 1).trim();\n      if (typeof result[key] === \"undefined\") {\n        result[key] = value;\n      } else if (Array.isArray(result[key])) {\n        result[key].push(value);\n      } else {\n        result[key] = [result[key], value];\n      }\n    });\n    return result;\n  };\n  lib.exports = createXHR;\n  lib.exports.default = createXHR;\n  createXHR.XMLHttpRequest = window2.XMLHttpRequest || noop3;\n  createXHR.XDomainRequest = \"withCredentials\" in new createXHR.XMLHttpRequest() ? createXHR.XMLHttpRequest : window2.XDomainRequest;\n  forEachArray([\"get\", \"put\", \"post\", \"patch\", \"head\", \"delete\"], function(method) {\n    createXHR[method === \"delete\" ? \"del\" : method] = function(uri, options, callback) {\n      options = initParams(uri, options, callback);\n      options.method = method.toUpperCase();\n      return _createXHR(options);\n    };\n  });\n  function forEachArray(array, iterator) {\n    for (var i = 0; i < array.length; i++) {\n      iterator(array[i]);\n    }\n  }\n  function isEmpty(obj) {\n    for (var i in obj) {\n      if (obj.hasOwnProperty(i)) return false;\n    }\n    return true;\n  }\n  function initParams(uri, options, callback) {\n    var params = uri;\n    if (isFunction(options)) {\n      callback = options;\n      if (typeof uri === \"string\") {\n        params = {\n          uri\n        };\n      }\n    } else {\n      params = _extends2({}, options, {\n        uri\n      });\n    }\n    params.callback = callback;\n    return params;\n  }\n  function createXHR(uri, options, callback) {\n    options = initParams(uri, options, callback);\n    return _createXHR(options);\n  }\n  function _createXHR(options) {\n    if (typeof options.callback === \"undefined\") {\n      throw new Error(\"callback argument missing\");\n    }\n    var called = false;\n    var callback = function cbOnce(err, response, body2) {\n      if (!called) {\n        called = true;\n        options.callback(err, response, body2);\n      }\n    };\n    function readystatechange() {\n      if (xhr.readyState === 4) {\n        setTimeout(loadFunc, 0);\n      }\n    }\n    function getBody() {\n      var body2 = void 0;\n      if (xhr.response) {\n        body2 = xhr.response;\n      } else {\n        body2 = xhr.responseText || getXml(xhr);\n      }\n      if (isJson) {\n        try {\n          body2 = JSON.parse(body2);\n        } catch (e) {\n        }\n      }\n      return body2;\n    }\n    function errorFunc(evt) {\n      clearTimeout(timeoutTimer);\n      if (!(evt instanceof Error)) {\n        evt = new Error(\"\" + (evt || \"Unknown XMLHttpRequest Error\"));\n      }\n      evt.statusCode = 0;\n      return callback(evt, failureResponse);\n    }\n    function loadFunc() {\n      if (aborted) return;\n      var status2;\n      clearTimeout(timeoutTimer);\n      if (options.useXDR && xhr.status === void 0) {\n        status2 = 200;\n      } else {\n        status2 = xhr.status === 1223 ? 204 : xhr.status;\n      }\n      var response = failureResponse;\n      var err = null;\n      if (status2 !== 0) {\n        response = {\n          body: getBody(),\n          statusCode: status2,\n          method,\n          headers: {},\n          url: uri,\n          rawRequest: xhr\n        };\n        if (xhr.getAllResponseHeaders) {\n          response.headers = parseHeaders(xhr.getAllResponseHeaders());\n        }\n      } else {\n        err = new Error(\"Internal XMLHttpRequest Error\");\n      }\n      return callback(err, response, response.body);\n    }\n    var xhr = options.xhr || null;\n    if (!xhr) {\n      if (options.cors || options.useXDR) {\n        xhr = new createXHR.XDomainRequest();\n      } else {\n        xhr = new createXHR.XMLHttpRequest();\n      }\n    }\n    var key;\n    var aborted;\n    var uri = xhr.url = options.uri || options.url;\n    var method = xhr.method = options.method || \"GET\";\n    var body = options.body || options.data;\n    var headers = xhr.headers = options.headers || {};\n    var sync = !!options.sync;\n    var isJson = false;\n    var timeoutTimer;\n    var failureResponse = {\n      body: void 0,\n      headers: {},\n      statusCode: 0,\n      method,\n      url: uri,\n      rawRequest: xhr\n    };\n    if (\"json\" in options && options.json !== false) {\n      isJson = true;\n      headers[\"accept\"] || headers[\"Accept\"] || (headers[\"Accept\"] = \"application/json\");\n      if (method !== \"GET\" && method !== \"HEAD\") {\n        headers[\"content-type\"] || headers[\"Content-Type\"] || (headers[\"Content-Type\"] = \"application/json\");\n        body = JSON.stringify(options.json === true ? body : options.json);\n      }\n    }\n    xhr.onreadystatechange = readystatechange;\n    xhr.onload = loadFunc;\n    xhr.onerror = errorFunc;\n    xhr.onprogress = function() {\n    };\n    xhr.onabort = function() {\n      aborted = true;\n    };\n    xhr.ontimeout = errorFunc;\n    xhr.open(method, uri, !sync, options.username, options.password);\n    if (!sync) {\n      xhr.withCredentials = !!options.withCredentials;\n    }\n    if (!sync && options.timeout > 0) {\n      timeoutTimer = setTimeout(function() {\n        if (aborted) return;\n        aborted = true;\n        xhr.abort(\"timeout\");\n        var e = new Error(\"XMLHttpRequest timeout\");\n        e.code = \"ETIMEDOUT\";\n        errorFunc(e);\n      }, options.timeout);\n    }\n    if (xhr.setRequestHeader) {\n      for (key in headers) {\n        if (headers.hasOwnProperty(key)) {\n          xhr.setRequestHeader(key, headers[key]);\n        }\n      }\n    } else if (options.headers && !isEmpty(options.headers)) {\n      throw new Error(\"Headers cannot be set on an XDomainRequest object\");\n    }\n    if (\"responseType\" in options) {\n      xhr.responseType = options.responseType;\n    }\n    if (\"beforeSend\" in options && typeof options.beforeSend === \"function\") {\n      options.beforeSend(xhr);\n    }\n    xhr.send(body || null);\n    return xhr;\n  }\n  function getXml(xhr) {\n    try {\n      if (xhr.responseType === \"document\") {\n        return xhr.responseXML;\n      }\n      var firefoxBugTakenEffect = xhr.responseXML && xhr.responseXML.documentElement.nodeName === \"parsererror\";\n      if (xhr.responseType === \"\" && !firefoxBugTakenEffect) {\n        return xhr.responseXML;\n      }\n    } catch (e) {\n    }\n    return null;\n  }\n  function noop3() {\n  }\n  return lib.exports;\n}\nvar browserIndex = { exports: {} };\nvar vtt;\nvar hasRequiredVtt;\nfunction requireVtt() {\n  if (hasRequiredVtt) return vtt;\n  hasRequiredVtt = 1;\n  var document2 = requireDocument();\n  var _objCreate = Object.create || /* @__PURE__ */ function() {\n    function F() {\n    }\n    return function(o) {\n      if (arguments.length !== 1) {\n        throw new Error(\"Object.create shim only accepts one parameter.\");\n      }\n      F.prototype = o;\n      return new F();\n    };\n  }();\n  function ParsingError(errorData, message) {\n    this.name = \"ParsingError\";\n    this.code = errorData.code;\n    this.message = message || errorData.message;\n  }\n  ParsingError.prototype = _objCreate(Error.prototype);\n  ParsingError.prototype.constructor = ParsingError;\n  ParsingError.Errors = {\n    BadSignature: {\n      code: 0,\n      message: \"Malformed WebVTT signature.\"\n    },\n    BadTimeStamp: {\n      code: 1,\n      message: \"Malformed time stamp.\"\n    }\n  };\n  function parseTimeStamp2(input) {\n    function computeSeconds(h, m2, s, f) {\n      return (h | 0) * 3600 + (m2 | 0) * 60 + (s | 0) + (f | 0) / 1e3;\n    }\n    var m = input.match(/^(\\d+):(\\d{1,2})(:\\d{1,2})?\\.(\\d{3})/);\n    if (!m) {\n      return null;\n    }\n    if (m[3]) {\n      return computeSeconds(m[1], m[2], m[3].replace(\":\", \"\"), m[4]);\n    } else if (m[1] > 59) {\n      return computeSeconds(m[1], m[2], 0, m[4]);\n    } else {\n      return computeSeconds(0, m[1], m[2], m[4]);\n    }\n  }\n  function Settings2() {\n    this.values = _objCreate(null);\n  }\n  Settings2.prototype = {\n    // Only accept the first assignment to any key.\n    set: function(k, v) {\n      if (!this.get(k) && v !== \"\") {\n        this.values[k] = v;\n      }\n    },\n    // Return the value for a key, or a default value.\n    // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n    // a number of possible default values as properties where 'defaultKey' is\n    // the key of the property that will be chosen; otherwise it's assumed to be\n    // a single value.\n    get: function(k, dflt, defaultKey) {\n      if (defaultKey) {\n        return this.has(k) ? this.values[k] : dflt[defaultKey];\n      }\n      return this.has(k) ? this.values[k] : dflt;\n    },\n    // Check whether we have a value for a key.\n    has: function(k) {\n      return k in this.values;\n    },\n    // Accept a setting if its one of the given alternatives.\n    alt: function(k, v, a) {\n      for (var n = 0; n < a.length; ++n) {\n        if (v === a[n]) {\n          this.set(k, v);\n          break;\n        }\n      }\n    },\n    // Accept a setting if its a valid (signed) integer.\n    integer: function(k, v) {\n      if (/^-?\\d+$/.test(v)) {\n        this.set(k, parseInt(v, 10));\n      }\n    },\n    // Accept a setting if its a valid percentage.\n    percent: function(k, v) {\n      if (v.match(/^([\\d]{1,3})(\\.[\\d]*)?%$/)) {\n        v = parseFloat(v);\n        if (v >= 0 && v <= 100) {\n          this.set(k, v);\n          return true;\n        }\n      }\n      return false;\n    }\n  };\n  function parseOptions2(input, callback, keyValueDelim, groupDelim) {\n    var groups = groupDelim ? input.split(groupDelim) : [input];\n    for (var i in groups) {\n      if (typeof groups[i] !== \"string\") {\n        continue;\n      }\n      var kv = groups[i].split(keyValueDelim);\n      if (kv.length !== 2) {\n        continue;\n      }\n      var k = kv[0].trim();\n      var v = kv[1].trim();\n      callback(k, v);\n    }\n  }\n  function parseCue2(input, cue, regionList) {\n    var oInput = input;\n    function consumeTimeStamp() {\n      var ts = parseTimeStamp2(input);\n      if (ts === null) {\n        throw new ParsingError(\n          ParsingError.Errors.BadTimeStamp,\n          \"Malformed timestamp: \" + oInput\n        );\n      }\n      input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n      return ts;\n    }\n    function consumeCueSettings(input2, cue2) {\n      var settings = new Settings2();\n      parseOptions2(input2, function(k, v) {\n        switch (k) {\n          case \"region\":\n            for (var i = regionList.length - 1; i >= 0; i--) {\n              if (regionList[i].id === v) {\n                settings.set(k, regionList[i].region);\n                break;\n              }\n            }\n            break;\n          case \"vertical\":\n            settings.alt(k, v, [\"rl\", \"lr\"]);\n            break;\n          case \"line\":\n            var vals = v.split(\",\"), vals0 = vals[0];\n            settings.integer(k, vals0);\n            settings.percent(k, vals0) ? settings.set(\"snapToLines\", false) : null;\n            settings.alt(k, vals0, [\"auto\"]);\n            if (vals.length === 2) {\n              settings.alt(\"lineAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n            }\n            break;\n          case \"position\":\n            vals = v.split(\",\");\n            settings.percent(k, vals[0]);\n            if (vals.length === 2) {\n              settings.alt(\"positionAlign\", vals[1], [\"start\", \"center\", \"end\"]);\n            }\n            break;\n          case \"size\":\n            settings.percent(k, v);\n            break;\n          case \"align\":\n            settings.alt(k, v, [\"start\", \"center\", \"end\", \"left\", \"right\"]);\n            break;\n        }\n      }, /:/, /\\s/);\n      cue2.region = settings.get(\"region\", null);\n      cue2.vertical = settings.get(\"vertical\", \"\");\n      try {\n        cue2.line = settings.get(\"line\", \"auto\");\n      } catch (e) {\n      }\n      cue2.lineAlign = settings.get(\"lineAlign\", \"start\");\n      cue2.snapToLines = settings.get(\"snapToLines\", true);\n      cue2.size = settings.get(\"size\", 100);\n      try {\n        cue2.align = settings.get(\"align\", \"center\");\n      } catch (e) {\n        cue2.align = settings.get(\"align\", \"middle\");\n      }\n      try {\n        cue2.position = settings.get(\"position\", \"auto\");\n      } catch (e) {\n        cue2.position = settings.get(\"position\", {\n          start: 0,\n          left: 0,\n          center: 50,\n          middle: 50,\n          end: 100,\n          right: 100\n        }, cue2.align);\n      }\n      cue2.positionAlign = settings.get(\"positionAlign\", {\n        start: \"start\",\n        left: \"start\",\n        center: \"center\",\n        middle: \"center\",\n        end: \"end\",\n        right: \"end\"\n      }, cue2.align);\n    }\n    function skipWhitespace() {\n      input = input.replace(/^\\s+/, \"\");\n    }\n    skipWhitespace();\n    cue.startTime = consumeTimeStamp();\n    skipWhitespace();\n    if (input.substr(0, 3) !== \"-->\") {\n      throw new ParsingError(\n        ParsingError.Errors.BadTimeStamp,\n        \"Malformed time stamp (time stamps must be separated by '-->'): \" + oInput\n      );\n    }\n    input = input.substr(3);\n    skipWhitespace();\n    cue.endTime = consumeTimeStamp();\n    skipWhitespace();\n    consumeCueSettings(input, cue);\n  }\n  var TEXTAREA_ELEMENT = document2.createElement && document2.createElement(\"textarea\");\n  var TAG_NAME = {\n    c: \"span\",\n    i: \"i\",\n    b: \"b\",\n    u: \"u\",\n    ruby: \"ruby\",\n    rt: \"rt\",\n    v: \"span\",\n    lang: \"span\"\n  };\n  var DEFAULT_COLOR_CLASS = {\n    white: \"rgba(255,255,255,1)\",\n    lime: \"rgba(0,255,0,1)\",\n    cyan: \"rgba(0,255,255,1)\",\n    red: \"rgba(255,0,0,1)\",\n    yellow: \"rgba(255,255,0,1)\",\n    magenta: \"rgba(255,0,255,1)\",\n    blue: \"rgba(0,0,255,1)\",\n    black: \"rgba(0,0,0,1)\"\n  };\n  var TAG_ANNOTATION = {\n    v: \"title\",\n    lang: \"lang\"\n  };\n  var NEEDS_PARENT = {\n    rt: \"ruby\"\n  };\n  function parseContent(window2, input) {\n    function nextToken() {\n      if (!input) {\n        return null;\n      }\n      function consume(result) {\n        input = input.substr(result.length);\n        return result;\n      }\n      var m2 = input.match(/^([^<]*)(<[^>]*>?)?/);\n      return consume(m2[1] ? m2[1] : m2[2]);\n    }\n    function unescape2(s) {\n      TEXTAREA_ELEMENT.innerHTML = s;\n      s = TEXTAREA_ELEMENT.textContent;\n      TEXTAREA_ELEMENT.textContent = \"\";\n      return s;\n    }\n    function shouldAdd(current2, element) {\n      return !NEEDS_PARENT[element.localName] || NEEDS_PARENT[element.localName] === current2.localName;\n    }\n    function createElement(type, annotation) {\n      var tagName = TAG_NAME[type];\n      if (!tagName) {\n        return null;\n      }\n      var element = window2.document.createElement(tagName);\n      var name = TAG_ANNOTATION[type];\n      if (name && annotation) {\n        element[name] = annotation.trim();\n      }\n      return element;\n    }\n    var rootDiv = window2.document.createElement(\"div\"), current = rootDiv, t, tagStack = [];\n    while ((t = nextToken()) !== null) {\n      if (t[0] === \"<\") {\n        if (t[1] === \"/\") {\n          if (tagStack.length && tagStack[tagStack.length - 1] === t.substr(2).replace(\">\", \"\")) {\n            tagStack.pop();\n            current = current.parentNode;\n          }\n          continue;\n        }\n        var ts = parseTimeStamp2(t.substr(1, t.length - 2));\n        var node;\n        if (ts) {\n          node = window2.document.createProcessingInstruction(\"timestamp\", ts);\n          current.appendChild(node);\n          continue;\n        }\n        var m = t.match(/^<([^.\\s/0-9>]+)(\\.[^\\s\\\\>]+)?([^>\\\\]+)?(\\\\?)>?$/);\n        if (!m) {\n          continue;\n        }\n        node = createElement(m[1], m[3]);\n        if (!node) {\n          continue;\n        }\n        if (!shouldAdd(current, node)) {\n          continue;\n        }\n        if (m[2]) {\n          var classes = m[2].split(\".\");\n          classes.forEach(function(cl) {\n            var bgColor = /^bg_/.test(cl);\n            var colorName = bgColor ? cl.slice(3) : cl;\n            if (DEFAULT_COLOR_CLASS.hasOwnProperty(colorName)) {\n              var propName = bgColor ? \"background-color\" : \"color\";\n              var propValue = DEFAULT_COLOR_CLASS[colorName];\n              node.style[propName] = propValue;\n            }\n          });\n          node.className = classes.join(\" \");\n        }\n        tagStack.push(m[1]);\n        current.appendChild(node);\n        current = node;\n        continue;\n      }\n      current.appendChild(window2.document.createTextNode(unescape2(t)));\n    }\n    return rootDiv;\n  }\n  var strongRTLRanges = [\n    [1470, 1470],\n    [1472, 1472],\n    [1475, 1475],\n    [1478, 1478],\n    [1488, 1514],\n    [1520, 1524],\n    [1544, 1544],\n    [1547, 1547],\n    [1549, 1549],\n    [1563, 1563],\n    [1566, 1610],\n    [1645, 1647],\n    [1649, 1749],\n    [1765, 1766],\n    [1774, 1775],\n    [1786, 1805],\n    [1807, 1808],\n    [1810, 1839],\n    [1869, 1957],\n    [1969, 1969],\n    [1984, 2026],\n    [2036, 2037],\n    [2042, 2042],\n    [2048, 2069],\n    [2074, 2074],\n    [2084, 2084],\n    [2088, 2088],\n    [2096, 2110],\n    [2112, 2136],\n    [2142, 2142],\n    [2208, 2208],\n    [2210, 2220],\n    [8207, 8207],\n    [64285, 64285],\n    [64287, 64296],\n    [64298, 64310],\n    [64312, 64316],\n    [64318, 64318],\n    [64320, 64321],\n    [64323, 64324],\n    [64326, 64449],\n    [64467, 64829],\n    [64848, 64911],\n    [64914, 64967],\n    [65008, 65020],\n    [65136, 65140],\n    [65142, 65276],\n    [67584, 67589],\n    [67592, 67592],\n    [67594, 67637],\n    [67639, 67640],\n    [67644, 67644],\n    [67647, 67669],\n    [67671, 67679],\n    [67840, 67867],\n    [67872, 67897],\n    [67903, 67903],\n    [67968, 68023],\n    [68030, 68031],\n    [68096, 68096],\n    [68112, 68115],\n    [68117, 68119],\n    [68121, 68147],\n    [68160, 68167],\n    [68176, 68184],\n    [68192, 68223],\n    [68352, 68405],\n    [68416, 68437],\n    [68440, 68466],\n    [68472, 68479],\n    [68608, 68680],\n    [126464, 126467],\n    [126469, 126495],\n    [126497, 126498],\n    [126500, 126500],\n    [126503, 126503],\n    [126505, 126514],\n    [126516, 126519],\n    [126521, 126521],\n    [126523, 126523],\n    [126530, 126530],\n    [126535, 126535],\n    [126537, 126537],\n    [126539, 126539],\n    [126541, 126543],\n    [126545, 126546],\n    [126548, 126548],\n    [126551, 126551],\n    [126553, 126553],\n    [126555, 126555],\n    [126557, 126557],\n    [126559, 126559],\n    [126561, 126562],\n    [126564, 126564],\n    [126567, 126570],\n    [126572, 126578],\n    [126580, 126583],\n    [126585, 126588],\n    [126590, 126590],\n    [126592, 126601],\n    [126603, 126619],\n    [126625, 126627],\n    [126629, 126633],\n    [126635, 126651],\n    [1114109, 1114109]\n  ];\n  function isStrongRTLChar(charCode) {\n    for (var i = 0; i < strongRTLRanges.length; i++) {\n      var currentRange = strongRTLRanges[i];\n      if (charCode >= currentRange[0] && charCode <= currentRange[1]) {\n        return true;\n      }\n    }\n    return false;\n  }\n  function determineBidi(cueDiv) {\n    var nodeStack = [], text = \"\", charCode;\n    if (!cueDiv || !cueDiv.childNodes) {\n      return \"ltr\";\n    }\n    function pushNodes(nodeStack2, node) {\n      for (var i2 = node.childNodes.length - 1; i2 >= 0; i2--) {\n        nodeStack2.push(node.childNodes[i2]);\n      }\n    }\n    function nextTextNode(nodeStack2) {\n      if (!nodeStack2 || !nodeStack2.length) {\n        return null;\n      }\n      var node = nodeStack2.pop(), text2 = node.textContent || node.innerText;\n      if (text2) {\n        var m = text2.match(/^.*(\\n|\\r)/);\n        if (m) {\n          nodeStack2.length = 0;\n          return m[0];\n        }\n        return text2;\n      }\n      if (node.tagName === \"ruby\") {\n        return nextTextNode(nodeStack2);\n      }\n      if (node.childNodes) {\n        pushNodes(nodeStack2, node);\n        return nextTextNode(nodeStack2);\n      }\n    }\n    pushNodes(nodeStack, cueDiv);\n    while (text = nextTextNode(nodeStack)) {\n      for (var i = 0; i < text.length; i++) {\n        charCode = text.charCodeAt(i);\n        if (isStrongRTLChar(charCode)) {\n          return \"rtl\";\n        }\n      }\n    }\n    return \"ltr\";\n  }\n  function computeLinePos(cue) {\n    if (typeof cue.line === \"number\" && (cue.snapToLines || cue.line >= 0 && cue.line <= 100)) {\n      return cue.line;\n    }\n    if (!cue.track || !cue.track.textTrackList || !cue.track.textTrackList.mediaElement) {\n      return -1;\n    }\n    var track = cue.track, trackList = track.textTrackList, count = 0;\n    for (var i = 0; i < trackList.length && trackList[i] !== track; i++) {\n      if (trackList[i].mode === \"showing\") {\n        count++;\n      }\n    }\n    return ++count * -1;\n  }\n  function StyleBox() {\n  }\n  StyleBox.prototype.applyStyles = function(styles, div) {\n    div = div || this.div;\n    for (var prop in styles) {\n      if (styles.hasOwnProperty(prop)) {\n        div.style[prop] = styles[prop];\n      }\n    }\n  };\n  StyleBox.prototype.formatStyle = function(val, unit) {\n    return val === 0 ? 0 : val + unit;\n  };\n  function CueStyleBox(window2, cue, styleOptions) {\n    StyleBox.call(this);\n    this.cue = cue;\n    this.cueDiv = parseContent(window2, cue.text);\n    var styles = {\n      color: \"rgba(255, 255, 255, 1)\",\n      backgroundColor: \"rgba(0, 0, 0, 0.8)\",\n      position: \"relative\",\n      left: 0,\n      right: 0,\n      top: 0,\n      bottom: 0,\n      display: \"inline\",\n      writingMode: cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\",\n      unicodeBidi: \"plaintext\"\n    };\n    this.applyStyles(styles, this.cueDiv);\n    this.div = window2.document.createElement(\"div\");\n    styles = {\n      direction: determineBidi(this.cueDiv),\n      writingMode: cue.vertical === \"\" ? \"horizontal-tb\" : cue.vertical === \"lr\" ? \"vertical-lr\" : \"vertical-rl\",\n      unicodeBidi: \"plaintext\",\n      textAlign: cue.align === \"middle\" ? \"center\" : cue.align,\n      font: styleOptions.font,\n      whiteSpace: \"pre-line\",\n      position: \"absolute\"\n    };\n    this.applyStyles(styles);\n    this.div.appendChild(this.cueDiv);\n    var textPos = 0;\n    switch (cue.positionAlign) {\n      case \"start\":\n      case \"line-left\":\n        textPos = cue.position;\n        break;\n      case \"center\":\n        textPos = cue.position - cue.size / 2;\n        break;\n      case \"end\":\n      case \"line-right\":\n        textPos = cue.position - cue.size;\n        break;\n    }\n    if (cue.vertical === \"\") {\n      this.applyStyles({\n        left: this.formatStyle(textPos, \"%\"),\n        width: this.formatStyle(cue.size, \"%\")\n      });\n    } else {\n      this.applyStyles({\n        top: this.formatStyle(textPos, \"%\"),\n        height: this.formatStyle(cue.size, \"%\")\n      });\n    }\n    this.move = function(box) {\n      this.applyStyles({\n        top: this.formatStyle(box.top, \"px\"),\n        bottom: this.formatStyle(box.bottom, \"px\"),\n        left: this.formatStyle(box.left, \"px\"),\n        right: this.formatStyle(box.right, \"px\"),\n        height: this.formatStyle(box.height, \"px\"),\n        width: this.formatStyle(box.width, \"px\")\n      });\n    };\n  }\n  CueStyleBox.prototype = _objCreate(StyleBox.prototype);\n  CueStyleBox.prototype.constructor = CueStyleBox;\n  function BoxPosition(obj) {\n    var lh, height, width, top;\n    if (obj.div) {\n      height = obj.div.offsetHeight;\n      width = obj.div.offsetWidth;\n      top = obj.div.offsetTop;\n      var rects = (rects = obj.div.childNodes) && (rects = rects[0]) && rects.getClientRects && rects.getClientRects();\n      obj = obj.div.getBoundingClientRect();\n      lh = rects ? Math.max(rects[0] && rects[0].height || 0, obj.height / rects.length) : 0;\n    }\n    this.left = obj.left;\n    this.right = obj.right;\n    this.top = obj.top || top;\n    this.height = obj.height || height;\n    this.bottom = obj.bottom || top + (obj.height || height);\n    this.width = obj.width || width;\n    this.lineHeight = lh !== void 0 ? lh : obj.lineHeight;\n  }\n  BoxPosition.prototype.move = function(axis, toMove) {\n    toMove = toMove !== void 0 ? toMove : this.lineHeight;\n    switch (axis) {\n      case \"+x\":\n        this.left += toMove;\n        this.right += toMove;\n        break;\n      case \"-x\":\n        this.left -= toMove;\n        this.right -= toMove;\n        break;\n      case \"+y\":\n        this.top += toMove;\n        this.bottom += toMove;\n        break;\n      case \"-y\":\n        this.top -= toMove;\n        this.bottom -= toMove;\n        break;\n    }\n  };\n  BoxPosition.prototype.overlaps = function(b2) {\n    return this.left < b2.right && this.right > b2.left && this.top < b2.bottom && this.bottom > b2.top;\n  };\n  BoxPosition.prototype.overlapsAny = function(boxes) {\n    for (var i = 0; i < boxes.length; i++) {\n      if (this.overlaps(boxes[i])) {\n        return true;\n      }\n    }\n    return false;\n  };\n  BoxPosition.prototype.within = function(container) {\n    return this.top >= container.top && this.bottom <= container.bottom && this.left >= container.left && this.right <= container.right;\n  };\n  BoxPosition.prototype.overlapsOppositeAxis = function(container, axis) {\n    switch (axis) {\n      case \"+x\":\n        return this.left < container.left;\n      case \"-x\":\n        return this.right > container.right;\n      case \"+y\":\n        return this.top < container.top;\n      case \"-y\":\n        return this.bottom > container.bottom;\n    }\n  };\n  BoxPosition.prototype.intersectPercentage = function(b2) {\n    var x = Math.max(0, Math.min(this.right, b2.right) - Math.max(this.left, b2.left)), y = Math.max(0, Math.min(this.bottom, b2.bottom) - Math.max(this.top, b2.top)), intersectArea = x * y;\n    return intersectArea / (this.height * this.width);\n  };\n  BoxPosition.prototype.toCSSCompatValues = function(reference) {\n    return {\n      top: this.top - reference.top,\n      bottom: reference.bottom - this.bottom,\n      left: this.left - reference.left,\n      right: reference.right - this.right,\n      height: this.height,\n      width: this.width\n    };\n  };\n  BoxPosition.getSimpleBoxPosition = function(obj) {\n    var height = obj.div ? obj.div.offsetHeight : obj.tagName ? obj.offsetHeight : 0;\n    var width = obj.div ? obj.div.offsetWidth : obj.tagName ? obj.offsetWidth : 0;\n    var top = obj.div ? obj.div.offsetTop : obj.tagName ? obj.offsetTop : 0;\n    obj = obj.div ? obj.div.getBoundingClientRect() : obj.tagName ? obj.getBoundingClientRect() : obj;\n    var ret = {\n      left: obj.left,\n      right: obj.right,\n      top: obj.top || top,\n      height: obj.height || height,\n      bottom: obj.bottom || top + (obj.height || height),\n      width: obj.width || width\n    };\n    return ret;\n  };\n  function moveBoxToLinePosition(window2, styleBox, containerBox, boxPositions) {\n    function findBestPosition(b, axis2) {\n      var bestPosition2, specifiedPosition = new BoxPosition(b), percentage = 1;\n      for (var i = 0; i < axis2.length; i++) {\n        while (b.overlapsOppositeAxis(containerBox, axis2[i]) || b.within(containerBox) && b.overlapsAny(boxPositions)) {\n          b.move(axis2[i]);\n        }\n        if (b.within(containerBox)) {\n          return b;\n        }\n        var p = b.intersectPercentage(containerBox);\n        if (percentage > p) {\n          bestPosition2 = new BoxPosition(b);\n          percentage = p;\n        }\n        b = new BoxPosition(specifiedPosition);\n      }\n      return bestPosition2 || specifiedPosition;\n    }\n    var boxPosition = new BoxPosition(styleBox), cue = styleBox.cue, linePos = computeLinePos(cue), axis = [];\n    if (cue.snapToLines) {\n      var size;\n      switch (cue.vertical) {\n        case \"\":\n          axis = [\"+y\", \"-y\"];\n          size = \"height\";\n          break;\n        case \"rl\":\n          axis = [\"+x\", \"-x\"];\n          size = \"width\";\n          break;\n        case \"lr\":\n          axis = [\"-x\", \"+x\"];\n          size = \"width\";\n          break;\n      }\n      var step = boxPosition.lineHeight, position = step * Math.round(linePos), maxPosition = containerBox[size] + step, initialAxis = axis[0];\n      if (Math.abs(position) > maxPosition) {\n        position = position < 0 ? -1 : 1;\n        position *= Math.ceil(maxPosition / step) * step;\n      }\n      if (linePos < 0) {\n        position += cue.vertical === \"\" ? containerBox.height : containerBox.width;\n        axis = axis.reverse();\n      }\n      boxPosition.move(initialAxis, position);\n    } else {\n      var calculatedPercentage = boxPosition.lineHeight / containerBox.height * 100;\n      switch (cue.lineAlign) {\n        case \"center\":\n          linePos -= calculatedPercentage / 2;\n          break;\n        case \"end\":\n          linePos -= calculatedPercentage;\n          break;\n      }\n      switch (cue.vertical) {\n        case \"\":\n          styleBox.applyStyles({\n            top: styleBox.formatStyle(linePos, \"%\")\n          });\n          break;\n        case \"rl\":\n          styleBox.applyStyles({\n            left: styleBox.formatStyle(linePos, \"%\")\n          });\n          break;\n        case \"lr\":\n          styleBox.applyStyles({\n            right: styleBox.formatStyle(linePos, \"%\")\n          });\n          break;\n      }\n      axis = [\"+y\", \"-x\", \"+x\", \"-y\"];\n      boxPosition = new BoxPosition(styleBox);\n    }\n    var bestPosition = findBestPosition(boxPosition, axis);\n    styleBox.move(bestPosition.toCSSCompatValues(containerBox));\n  }\n  function WebVTT2() {\n  }\n  WebVTT2.StringDecoder = function() {\n    return {\n      decode: function(data) {\n        if (!data) {\n          return \"\";\n        }\n        if (typeof data !== \"string\") {\n          throw new Error(\"Error - expected string data.\");\n        }\n        return decodeURIComponent(encodeURIComponent(data));\n      }\n    };\n  };\n  WebVTT2.convertCueToDOMTree = function(window2, cuetext) {\n    if (!window2 || !cuetext) {\n      return null;\n    }\n    return parseContent(window2, cuetext);\n  };\n  var FONT_SIZE_PERCENT = 0.05;\n  var FONT_STYLE = \"sans-serif\";\n  var CUE_BACKGROUND_PADDING = \"1.5%\";\n  WebVTT2.processCues = function(window2, cues, overlay) {\n    if (!window2 || !cues || !overlay) {\n      return null;\n    }\n    while (overlay.firstChild) {\n      overlay.removeChild(overlay.firstChild);\n    }\n    var paddedOverlay = window2.document.createElement(\"div\");\n    paddedOverlay.style.position = \"absolute\";\n    paddedOverlay.style.left = \"0\";\n    paddedOverlay.style.right = \"0\";\n    paddedOverlay.style.top = \"0\";\n    paddedOverlay.style.bottom = \"0\";\n    paddedOverlay.style.margin = CUE_BACKGROUND_PADDING;\n    overlay.appendChild(paddedOverlay);\n    function shouldCompute(cues2) {\n      for (var i2 = 0; i2 < cues2.length; i2++) {\n        if (cues2[i2].hasBeenReset || !cues2[i2].displayState) {\n          return true;\n        }\n      }\n      return false;\n    }\n    if (!shouldCompute(cues)) {\n      for (var i = 0; i < cues.length; i++) {\n        paddedOverlay.appendChild(cues[i].displayState);\n      }\n      return;\n    }\n    var boxPositions = [], containerBox = BoxPosition.getSimpleBoxPosition(paddedOverlay), fontSize = Math.round(containerBox.height * FONT_SIZE_PERCENT * 100) / 100;\n    var styleOptions = {\n      font: fontSize + \"px \" + FONT_STYLE\n    };\n    (function() {\n      var styleBox, cue;\n      for (var i2 = 0; i2 < cues.length; i2++) {\n        cue = cues[i2];\n        styleBox = new CueStyleBox(window2, cue, styleOptions);\n        paddedOverlay.appendChild(styleBox.div);\n        moveBoxToLinePosition(window2, styleBox, containerBox, boxPositions);\n        cue.displayState = styleBox.div;\n        boxPositions.push(BoxPosition.getSimpleBoxPosition(styleBox));\n      }\n    })();\n  };\n  WebVTT2.Parser = function(window2, vttjs, decoder2) {\n    if (!decoder2) {\n      decoder2 = vttjs;\n      vttjs = {};\n    }\n    if (!vttjs) {\n      vttjs = {};\n    }\n    this.window = window2;\n    this.vttjs = vttjs;\n    this.state = \"INITIAL\";\n    this.buffer = \"\";\n    this.decoder = decoder2 || new TextDecoder(\"utf8\");\n    this.regionList = [];\n  };\n  WebVTT2.Parser.prototype = {\n    // If the error is a ParsingError then report it to the consumer if\n    // possible. If it's not a ParsingError then throw it like normal.\n    reportOrThrowError: function(e) {\n      if (e instanceof ParsingError) {\n        this.onparsingerror && this.onparsingerror(e);\n      } else {\n        throw e;\n      }\n    },\n    parse: function(data) {\n      var self2 = this;\n      if (data) {\n        self2.buffer += self2.decoder.decode(data, { stream: true });\n      }\n      function collectNextLine() {\n        var buffer2 = self2.buffer;\n        var pos = 0;\n        while (pos < buffer2.length && buffer2[pos] !== \"\\r\" && buffer2[pos] !== \"\\n\") {\n          ++pos;\n        }\n        var line2 = buffer2.substr(0, pos);\n        if (buffer2[pos] === \"\\r\") {\n          ++pos;\n        }\n        if (buffer2[pos] === \"\\n\") {\n          ++pos;\n        }\n        self2.buffer = buffer2.substr(pos);\n        return line2;\n      }\n      function parseRegion(input) {\n        var settings = new Settings2();\n        parseOptions2(input, function(k, v) {\n          switch (k) {\n            case \"id\":\n              settings.set(k, v);\n              break;\n            case \"width\":\n              settings.percent(k, v);\n              break;\n            case \"lines\":\n              settings.integer(k, v);\n              break;\n            case \"regionanchor\":\n            case \"viewportanchor\":\n              var xy = v.split(\",\");\n              if (xy.length !== 2) {\n                break;\n              }\n              var anchor = new Settings2();\n              anchor.percent(\"x\", xy[0]);\n              anchor.percent(\"y\", xy[1]);\n              if (!anchor.has(\"x\") || !anchor.has(\"y\")) {\n                break;\n              }\n              settings.set(k + \"X\", anchor.get(\"x\"));\n              settings.set(k + \"Y\", anchor.get(\"y\"));\n              break;\n            case \"scroll\":\n              settings.alt(k, v, [\"up\"]);\n              break;\n          }\n        }, /=/, /\\s/);\n        if (settings.has(\"id\")) {\n          var region = new (self2.vttjs.VTTRegion || self2.window.VTTRegion)();\n          region.width = settings.get(\"width\", 100);\n          region.lines = settings.get(\"lines\", 3);\n          region.regionAnchorX = settings.get(\"regionanchorX\", 0);\n          region.regionAnchorY = settings.get(\"regionanchorY\", 100);\n          region.viewportAnchorX = settings.get(\"viewportanchorX\", 0);\n          region.viewportAnchorY = settings.get(\"viewportanchorY\", 100);\n          region.scroll = settings.get(\"scroll\", \"\");\n          self2.onregion && self2.onregion(region);\n          self2.regionList.push({\n            id: settings.get(\"id\"),\n            region\n          });\n        }\n      }\n      function parseTimestampMap(input) {\n        var settings = new Settings2();\n        parseOptions2(input, function(k, v) {\n          switch (k) {\n            case \"MPEGT\":\n              settings.integer(k + \"S\", v);\n              break;\n            case \"LOCA\":\n              settings.set(k + \"L\", parseTimeStamp2(v));\n              break;\n          }\n        }, /[^\\d]:/, /,/);\n        self2.ontimestampmap && self2.ontimestampmap({\n          \"MPEGTS\": settings.get(\"MPEGTS\"),\n          \"LOCAL\": settings.get(\"LOCAL\")\n        });\n      }\n      function parseHeader2(input) {\n        if (input.match(/X-TIMESTAMP-MAP/)) {\n          parseOptions2(input, function(k, v) {\n            switch (k) {\n              case \"X-TIMESTAMP-MAP\":\n                parseTimestampMap(v);\n                break;\n            }\n          }, /=/);\n        } else {\n          parseOptions2(input, function(k, v) {\n            switch (k) {\n              case \"Region\":\n                parseRegion(v);\n                break;\n            }\n          }, /:/);\n        }\n      }\n      try {\n        var line;\n        if (self2.state === \"INITIAL\") {\n          if (!/\\r\\n|\\n/.test(self2.buffer)) {\n            return this;\n          }\n          line = collectNextLine();\n          var m = line.match(/^WEBVTT([ \\t].*)?$/);\n          if (!m || !m[0]) {\n            throw new ParsingError(ParsingError.Errors.BadSignature);\n          }\n          self2.state = \"HEADER\";\n        }\n        var alreadyCollectedLine = false;\n        while (self2.buffer) {\n          if (!/\\r\\n|\\n/.test(self2.buffer)) {\n            return this;\n          }\n          if (!alreadyCollectedLine) {\n            line = collectNextLine();\n          } else {\n            alreadyCollectedLine = false;\n          }\n          switch (self2.state) {\n            case \"HEADER\":\n              if (/:/.test(line)) {\n                parseHeader2(line);\n              } else if (!line) {\n                self2.state = \"ID\";\n              }\n              continue;\n            case \"NOTE\":\n              if (!line) {\n                self2.state = \"ID\";\n              }\n              continue;\n            case \"ID\":\n              if (/^NOTE($|[ \\t])/.test(line)) {\n                self2.state = \"NOTE\";\n                break;\n              }\n              if (!line) {\n                continue;\n              }\n              self2.cue = new (self2.vttjs.VTTCue || self2.window.VTTCue)(0, 0, \"\");\n              try {\n                self2.cue.align = \"center\";\n              } catch (e) {\n                self2.cue.align = \"middle\";\n              }\n              self2.state = \"CUE\";\n              if (line.indexOf(\"-->\") === -1) {\n                self2.cue.id = line;\n                continue;\n              }\n            // Process line as start of a cue.\n            /*falls through*/\n            case \"CUE\":\n              try {\n                parseCue2(line, self2.cue, self2.regionList);\n              } catch (e) {\n                self2.reportOrThrowError(e);\n                self2.cue = null;\n                self2.state = \"BADCUE\";\n                continue;\n              }\n              self2.state = \"CUETEXT\";\n              continue;\n            case \"CUETEXT\":\n              var hasSubstring = line.indexOf(\"-->\") !== -1;\n              if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n                self2.oncue && self2.oncue(self2.cue);\n                self2.cue = null;\n                self2.state = \"ID\";\n                continue;\n              }\n              if (self2.cue.text) {\n                self2.cue.text += \"\\n\";\n              }\n              self2.cue.text += line.replace(/\\u2028/g, \"\\n\").replace(/u2029/g, \"\\n\");\n              continue;\n            case \"BADCUE\":\n              if (!line) {\n                self2.state = \"ID\";\n              }\n              continue;\n          }\n        }\n      } catch (e) {\n        self2.reportOrThrowError(e);\n        if (self2.state === \"CUETEXT\" && self2.cue && self2.oncue) {\n          self2.oncue(self2.cue);\n        }\n        self2.cue = null;\n        self2.state = self2.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n      }\n      return this;\n    },\n    flush: function() {\n      var self2 = this;\n      try {\n        self2.buffer += self2.decoder.decode();\n        if (self2.cue || self2.state === \"HEADER\") {\n          self2.buffer += \"\\n\\n\";\n          self2.parse();\n        }\n        if (self2.state === \"INITIAL\") {\n          throw new ParsingError(ParsingError.Errors.BadSignature);\n        }\n      } catch (e) {\n        self2.reportOrThrowError(e);\n      }\n      self2.onflush && self2.onflush();\n      return this;\n    }\n  };\n  vtt = WebVTT2;\n  return vtt;\n}\nvar vttcue;\nvar hasRequiredVttcue;\nfunction requireVttcue() {\n  if (hasRequiredVttcue) return vttcue;\n  hasRequiredVttcue = 1;\n  var autoKeyword = \"auto\";\n  var directionSetting = {\n    \"\": 1,\n    \"lr\": 1,\n    \"rl\": 1\n  };\n  var alignSetting = {\n    \"start\": 1,\n    \"center\": 1,\n    \"end\": 1,\n    \"left\": 1,\n    \"right\": 1,\n    \"auto\": 1,\n    \"line-left\": 1,\n    \"line-right\": 1\n  };\n  function findDirectionSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var dir = directionSetting[value.toLowerCase()];\n    return dir ? value.toLowerCase() : false;\n  }\n  function findAlignSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var align = alignSetting[value.toLowerCase()];\n    return align ? value.toLowerCase() : false;\n  }\n  function VTTCue2(startTime, endTime, text) {\n    this.hasBeenReset = false;\n    var _id = \"\";\n    var _pauseOnExit = false;\n    var _startTime = startTime;\n    var _endTime = endTime;\n    var _text = text;\n    var _region = null;\n    var _vertical = \"\";\n    var _snapToLines = true;\n    var _line = \"auto\";\n    var _lineAlign = \"start\";\n    var _position = \"auto\";\n    var _positionAlign = \"auto\";\n    var _size = 100;\n    var _align = \"center\";\n    Object.defineProperties(this, {\n      \"id\": {\n        enumerable: true,\n        get: function() {\n          return _id;\n        },\n        set: function(value) {\n          _id = \"\" + value;\n        }\n      },\n      \"pauseOnExit\": {\n        enumerable: true,\n        get: function() {\n          return _pauseOnExit;\n        },\n        set: function(value) {\n          _pauseOnExit = !!value;\n        }\n      },\n      \"startTime\": {\n        enumerable: true,\n        get: function() {\n          return _startTime;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"Start time must be set to a number.\");\n          }\n          _startTime = value;\n          this.hasBeenReset = true;\n        }\n      },\n      \"endTime\": {\n        enumerable: true,\n        get: function() {\n          return _endTime;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"End time must be set to a number.\");\n          }\n          _endTime = value;\n          this.hasBeenReset = true;\n        }\n      },\n      \"text\": {\n        enumerable: true,\n        get: function() {\n          return _text;\n        },\n        set: function(value) {\n          _text = \"\" + value;\n          this.hasBeenReset = true;\n        }\n      },\n      \"region\": {\n        enumerable: true,\n        get: function() {\n          return _region;\n        },\n        set: function(value) {\n          _region = value;\n          this.hasBeenReset = true;\n        }\n      },\n      \"vertical\": {\n        enumerable: true,\n        get: function() {\n          return _vertical;\n        },\n        set: function(value) {\n          var setting = findDirectionSetting(value);\n          if (setting === false) {\n            throw new SyntaxError(\"Vertical: an invalid or illegal direction string was specified.\");\n          }\n          _vertical = setting;\n          this.hasBeenReset = true;\n        }\n      },\n      \"snapToLines\": {\n        enumerable: true,\n        get: function() {\n          return _snapToLines;\n        },\n        set: function(value) {\n          _snapToLines = !!value;\n          this.hasBeenReset = true;\n        }\n      },\n      \"line\": {\n        enumerable: true,\n        get: function() {\n          return _line;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\" && value !== autoKeyword) {\n            throw new SyntaxError(\"Line: an invalid number or illegal string was specified.\");\n          }\n          _line = value;\n          this.hasBeenReset = true;\n        }\n      },\n      \"lineAlign\": {\n        enumerable: true,\n        get: function() {\n          return _lineAlign;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            console.warn(\"lineAlign: an invalid or illegal string was specified.\");\n          } else {\n            _lineAlign = setting;\n            this.hasBeenReset = true;\n          }\n        }\n      },\n      \"position\": {\n        enumerable: true,\n        get: function() {\n          return _position;\n        },\n        set: function(value) {\n          if (value < 0 || value > 100) {\n            throw new Error(\"Position must be between 0 and 100.\");\n          }\n          _position = value;\n          this.hasBeenReset = true;\n        }\n      },\n      \"positionAlign\": {\n        enumerable: true,\n        get: function() {\n          return _positionAlign;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            console.warn(\"positionAlign: an invalid or illegal string was specified.\");\n          } else {\n            _positionAlign = setting;\n            this.hasBeenReset = true;\n          }\n        }\n      },\n      \"size\": {\n        enumerable: true,\n        get: function() {\n          return _size;\n        },\n        set: function(value) {\n          if (value < 0 || value > 100) {\n            throw new Error(\"Size must be between 0 and 100.\");\n          }\n          _size = value;\n          this.hasBeenReset = true;\n        }\n      },\n      \"align\": {\n        enumerable: true,\n        get: function() {\n          return _align;\n        },\n        set: function(value) {\n          var setting = findAlignSetting(value);\n          if (!setting) {\n            throw new SyntaxError(\"align: an invalid or illegal alignment string was specified.\");\n          }\n          _align = setting;\n          this.hasBeenReset = true;\n        }\n      }\n    });\n    this.displayState = void 0;\n  }\n  VTTCue2.prototype.getCueAsHTML = function() {\n    return WebVTT.convertCueToDOMTree(window, this.text);\n  };\n  vttcue = VTTCue2;\n  return vttcue;\n}\nvar vttregion;\nvar hasRequiredVttregion;\nfunction requireVttregion() {\n  if (hasRequiredVttregion) return vttregion;\n  hasRequiredVttregion = 1;\n  var scrollSetting = {\n    \"\": true,\n    \"up\": true\n  };\n  function findScrollSetting(value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    var scroll = scrollSetting[value.toLowerCase()];\n    return scroll ? value.toLowerCase() : false;\n  }\n  function isValidPercentValue(value) {\n    return typeof value === \"number\" && (value >= 0 && value <= 100);\n  }\n  function VTTRegion() {\n    var _width = 100;\n    var _lines = 3;\n    var _regionAnchorX = 0;\n    var _regionAnchorY = 100;\n    var _viewportAnchorX = 0;\n    var _viewportAnchorY = 100;\n    var _scroll = \"\";\n    Object.defineProperties(this, {\n      \"width\": {\n        enumerable: true,\n        get: function() {\n          return _width;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"Width must be between 0 and 100.\");\n          }\n          _width = value;\n        }\n      },\n      \"lines\": {\n        enumerable: true,\n        get: function() {\n          return _lines;\n        },\n        set: function(value) {\n          if (typeof value !== \"number\") {\n            throw new TypeError(\"Lines must be set to a number.\");\n          }\n          _lines = value;\n        }\n      },\n      \"regionAnchorY\": {\n        enumerable: true,\n        get: function() {\n          return _regionAnchorY;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"RegionAnchorX must be between 0 and 100.\");\n          }\n          _regionAnchorY = value;\n        }\n      },\n      \"regionAnchorX\": {\n        enumerable: true,\n        get: function() {\n          return _regionAnchorX;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"RegionAnchorY must be between 0 and 100.\");\n          }\n          _regionAnchorX = value;\n        }\n      },\n      \"viewportAnchorY\": {\n        enumerable: true,\n        get: function() {\n          return _viewportAnchorY;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"ViewportAnchorY must be between 0 and 100.\");\n          }\n          _viewportAnchorY = value;\n        }\n      },\n      \"viewportAnchorX\": {\n        enumerable: true,\n        get: function() {\n          return _viewportAnchorX;\n        },\n        set: function(value) {\n          if (!isValidPercentValue(value)) {\n            throw new Error(\"ViewportAnchorX must be between 0 and 100.\");\n          }\n          _viewportAnchorX = value;\n        }\n      },\n      \"scroll\": {\n        enumerable: true,\n        get: function() {\n          return _scroll;\n        },\n        set: function(value) {\n          var setting = findScrollSetting(value);\n          if (setting === false) {\n            console.warn(\"Scroll: an invalid or illegal string was specified.\");\n          } else {\n            _scroll = setting;\n          }\n        }\n      }\n    });\n  }\n  vttregion = VTTRegion;\n  return vttregion;\n}\nvar hasRequiredBrowserIndex;\nfunction requireBrowserIndex() {\n  if (hasRequiredBrowserIndex) return browserIndex.exports;\n  hasRequiredBrowserIndex = 1;\n  var window2 = requireWindow();\n  var vttjs = browserIndex.exports = {\n    WebVTT: requireVtt(),\n    VTTCue: requireVttcue(),\n    VTTRegion: requireVttregion()\n  };\n  window2.vttjs = vttjs;\n  window2.WebVTT = vttjs.WebVTT;\n  var cueShim = vttjs.VTTCue;\n  var regionShim = vttjs.VTTRegion;\n  var nativeVTTCue = window2.VTTCue;\n  var nativeVTTRegion = window2.VTTRegion;\n  vttjs.shim = function() {\n    window2.VTTCue = cueShim;\n    window2.VTTRegion = regionShim;\n  };\n  vttjs.restore = function() {\n    window2.VTTCue = nativeVTTCue;\n    window2.VTTRegion = nativeVTTRegion;\n  };\n  if (!window2.VTTCue) {\n    vttjs.shim();\n  }\n  return browserIndex.exports;\n}\nvar construct = { exports: {} };\nvar isNativeReflectConstruct = { exports: {} };\nvar hasRequiredIsNativeReflectConstruct;\nfunction requireIsNativeReflectConstruct() {\n  if (hasRequiredIsNativeReflectConstruct) return isNativeReflectConstruct.exports;\n  hasRequiredIsNativeReflectConstruct = 1;\n  (function(module) {\n    function _isNativeReflectConstruct() {\n      try {\n        var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function() {\n        }));\n      } catch (t2) {\n      }\n      return (module.exports = _isNativeReflectConstruct = function _isNativeReflectConstruct2() {\n        return !!t;\n      }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports)();\n    }\n    module.exports = _isNativeReflectConstruct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  })(isNativeReflectConstruct);\n  return isNativeReflectConstruct.exports;\n}\nvar hasRequiredConstruct;\nfunction requireConstruct() {\n  if (hasRequiredConstruct) return construct.exports;\n  hasRequiredConstruct = 1;\n  (function(module) {\n    var isNativeReflectConstruct2 = requireIsNativeReflectConstruct();\n    var setPrototypeOf2 = requireSetPrototypeOf();\n    function _construct(t, e, r) {\n      if (isNativeReflectConstruct2()) return Reflect.construct.apply(null, arguments);\n      var o = [null];\n      o.push.apply(o, e);\n      var p = new (t.bind.apply(t, o))();\n      return r && setPrototypeOf2(p, r.prototype), p;\n    }\n    module.exports = _construct, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  })(construct);\n  return construct.exports;\n}\nvar inherits = { exports: {} };\nvar hasRequiredInherits;\nfunction requireInherits() {\n  if (hasRequiredInherits) return inherits.exports;\n  hasRequiredInherits = 1;\n  (function(module) {\n    var setPrototypeOf2 = requireSetPrototypeOf();\n    function _inherits(t, e) {\n      if (\"function\" != typeof e && null !== e) throw new TypeError(\"Super expression must either be null or a function\");\n      t.prototype = Object.create(e && e.prototype, {\n        constructor: {\n          value: t,\n          writable: true,\n          configurable: true\n        }\n      }), Object.defineProperty(t, \"prototype\", {\n        writable: false\n      }), e && setPrototypeOf2(t, e);\n    }\n    module.exports = _inherits, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;\n  })(inherits);\n  return inherits.exports;\n}\n/**\n * @license\n * Video.js 7.21.7 <http://videojs.com/>\n * Copyright Brightcove, Inc. <https://www.brightcove.com/>\n * Available under Apache License Version 2.0\n * <https://github.com/videojs/video.js/blob/main/LICENSE>\n *\n * Includes vtt.js <https://github.com/mozilla/vtt.js>\n * Available under Apache License Version 2.0\n * <https://github.com/mozilla/vtt.js/blob/main/LICENSE>\n */\nvar core;\nvar hasRequiredCore;\nfunction requireCore() {\n  if (hasRequiredCore) return core;\n  hasRequiredCore = 1;\n  var window2 = requireWindow();\n  var document2 = requireDocument();\n  var _extends2 = require_extends();\n  var keycode2 = requireKeycode();\n  var _assertThisInitialized = requireAssertThisInitialized();\n  var _inheritsLoose = requireInheritsLoose();\n  var safeParseTuple = requireTuple();\n  var XHR = requireLib();\n  var vtt2 = requireBrowserIndex();\n  var _construct = requireConstruct();\n  var _inherits = requireInherits();\n  function _interopDefaultLegacy(e) {\n    return e && typeof e === \"object\" && \"default\" in e ? e : { \"default\": e };\n  }\n  var window__default = /* @__PURE__ */ _interopDefaultLegacy(window2);\n  var document__default = /* @__PURE__ */ _interopDefaultLegacy(document2);\n  var _extends__default = /* @__PURE__ */ _interopDefaultLegacy(_extends2);\n  var keycode__default = /* @__PURE__ */ _interopDefaultLegacy(keycode2);\n  var _assertThisInitialized__default = /* @__PURE__ */ _interopDefaultLegacy(_assertThisInitialized);\n  var _inheritsLoose__default = /* @__PURE__ */ _interopDefaultLegacy(_inheritsLoose);\n  var safeParseTuple__default = /* @__PURE__ */ _interopDefaultLegacy(safeParseTuple);\n  var XHR__default = /* @__PURE__ */ _interopDefaultLegacy(XHR);\n  var vtt__default = /* @__PURE__ */ _interopDefaultLegacy(vtt2);\n  var _construct__default = /* @__PURE__ */ _interopDefaultLegacy(_construct);\n  var _inherits__default = /* @__PURE__ */ _interopDefaultLegacy(_inherits);\n  var version2 = \"7.21.7\";\n  var hooks_ = {};\n  var hooks = function hooks2(type, fn) {\n    hooks_[type] = hooks_[type] || [];\n    if (fn) {\n      hooks_[type] = hooks_[type].concat(fn);\n    }\n    return hooks_[type];\n  };\n  var hook = function hook2(type, fn) {\n    hooks(type, fn);\n  };\n  var removeHook = function removeHook2(type, fn) {\n    var index = hooks(type).indexOf(fn);\n    if (index <= -1) {\n      return false;\n    }\n    hooks_[type] = hooks_[type].slice();\n    hooks_[type].splice(index, 1);\n    return true;\n  };\n  var hookOnce = function hookOnce2(type, fn) {\n    hooks(type, [].concat(fn).map(function(original) {\n      var wrapper = function wrapper2() {\n        removeHook(type, wrapper2);\n        return original.apply(void 0, arguments);\n      };\n      return wrapper;\n    }));\n  };\n  var FullscreenApi = {\n    prefixed: true\n  };\n  var apiMap = [\n    [\"requestFullscreen\", \"exitFullscreen\", \"fullscreenElement\", \"fullscreenEnabled\", \"fullscreenchange\", \"fullscreenerror\", \"fullscreen\"],\n    // WebKit\n    [\"webkitRequestFullscreen\", \"webkitExitFullscreen\", \"webkitFullscreenElement\", \"webkitFullscreenEnabled\", \"webkitfullscreenchange\", \"webkitfullscreenerror\", \"-webkit-full-screen\"],\n    // Mozilla\n    [\"mozRequestFullScreen\", \"mozCancelFullScreen\", \"mozFullScreenElement\", \"mozFullScreenEnabled\", \"mozfullscreenchange\", \"mozfullscreenerror\", \"-moz-full-screen\"],\n    // Microsoft\n    [\"msRequestFullscreen\", \"msExitFullscreen\", \"msFullscreenElement\", \"msFullscreenEnabled\", \"MSFullscreenChange\", \"MSFullscreenError\", \"-ms-fullscreen\"]\n  ];\n  var specApi = apiMap[0];\n  var browserApi;\n  for (var i = 0; i < apiMap.length; i++) {\n    if (apiMap[i][1] in document__default[\"default\"]) {\n      browserApi = apiMap[i];\n      break;\n    }\n  }\n  if (browserApi) {\n    for (var _i = 0; _i < browserApi.length; _i++) {\n      FullscreenApi[specApi[_i]] = browserApi[_i];\n    }\n    FullscreenApi.prefixed = browserApi[0] !== specApi[0];\n  }\n  var history = [];\n  var LogByTypeFactory = function LogByTypeFactory2(name, log2) {\n    return function(type, level, args) {\n      var lvl = log2.levels[level];\n      var lvlRegExp = new RegExp(\"^(\" + lvl + \")$\");\n      if (type !== \"log\") {\n        args.unshift(type.toUpperCase() + \":\");\n      }\n      args.unshift(name + \":\");\n      if (history) {\n        history.push([].concat(args));\n        var splice = history.length - 1e3;\n        history.splice(0, splice > 0 ? splice : 0);\n      }\n      if (!window__default[\"default\"].console) {\n        return;\n      }\n      var fn = window__default[\"default\"].console[type];\n      if (!fn && type === \"debug\") {\n        fn = window__default[\"default\"].console.info || window__default[\"default\"].console.log;\n      }\n      if (!fn || !lvl || !lvlRegExp.test(type)) {\n        return;\n      }\n      fn[Array.isArray(args) ? \"apply\" : \"call\"](window__default[\"default\"].console, args);\n    };\n  };\n  function createLogger$1(name) {\n    var level = \"info\";\n    var logByType;\n    var log2 = function log3() {\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      logByType(\"log\", level, args);\n    };\n    logByType = LogByTypeFactory(name, log2);\n    log2.createLogger = function(subname) {\n      return createLogger$1(name + \": \" + subname);\n    };\n    log2.levels = {\n      all: \"debug|log|warn|error\",\n      off: \"\",\n      debug: \"debug|log|warn|error\",\n      info: \"log|warn|error\",\n      warn: \"warn|error\",\n      error: \"error\",\n      DEFAULT: level\n    };\n    log2.level = function(lvl) {\n      if (typeof lvl === \"string\") {\n        if (!log2.levels.hasOwnProperty(lvl)) {\n          throw new Error('\"' + lvl + '\" in not a valid log level');\n        }\n        level = lvl;\n      }\n      return level;\n    };\n    log2.history = function() {\n      return history ? [].concat(history) : [];\n    };\n    log2.history.filter = function(fname) {\n      return (history || []).filter(function(historyItem) {\n        return new RegExp(\".*\" + fname + \".*\").test(historyItem[0]);\n      });\n    };\n    log2.history.clear = function() {\n      if (history) {\n        history.length = 0;\n      }\n    };\n    log2.history.disable = function() {\n      if (history !== null) {\n        history.length = 0;\n        history = null;\n      }\n    };\n    log2.history.enable = function() {\n      if (history === null) {\n        history = [];\n      }\n    };\n    log2.error = function() {\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      return logByType(\"error\", level, args);\n    };\n    log2.warn = function() {\n      for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n        args[_key3] = arguments[_key3];\n      }\n      return logByType(\"warn\", level, args);\n    };\n    log2.debug = function() {\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      return logByType(\"debug\", level, args);\n    };\n    return log2;\n  }\n  var log = createLogger$1(\"VIDEOJS\");\n  var createLogger2 = log.createLogger;\n  var toString = Object.prototype.toString;\n  var keys = function keys2(object) {\n    return isObject2(object) ? Object.keys(object) : [];\n  };\n  function each(object, fn) {\n    keys(object).forEach(function(key) {\n      return fn(object[key], key);\n    });\n  }\n  function reduce(object, fn, initial) {\n    if (initial === void 0) {\n      initial = 0;\n    }\n    return keys(object).reduce(function(accum, key) {\n      return fn(accum, object[key], key);\n    }, initial);\n  }\n  function assign(target) {\n    for (var _len = arguments.length, sources = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      sources[_key - 1] = arguments[_key];\n    }\n    if (Object.assign) {\n      return _extends__default[\"default\"].apply(void 0, [target].concat(sources));\n    }\n    sources.forEach(function(source) {\n      if (!source) {\n        return;\n      }\n      each(source, function(value, key) {\n        target[key] = value;\n      });\n    });\n    return target;\n  }\n  function isObject2(value) {\n    return !!value && typeof value === \"object\";\n  }\n  function isPlain(value) {\n    return isObject2(value) && toString.call(value) === \"[object Object]\" && value.constructor === Object;\n  }\n  function computedStyle(el, prop) {\n    if (!el || !prop) {\n      return \"\";\n    }\n    if (typeof window__default[\"default\"].getComputedStyle === \"function\") {\n      var computedStyleValue;\n      try {\n        computedStyleValue = window__default[\"default\"].getComputedStyle(el);\n      } catch (e) {\n        return \"\";\n      }\n      return computedStyleValue ? computedStyleValue.getPropertyValue(prop) || computedStyleValue[prop] : \"\";\n    }\n    return \"\";\n  }\n  var USER_AGENT2 = window__default[\"default\"].navigator && window__default[\"default\"].navigator.userAgent || \"\";\n  var webkitVersionMap = /AppleWebKit\\/([\\d.]+)/i.exec(USER_AGENT2);\n  var appleWebkitVersion = webkitVersionMap ? parseFloat(webkitVersionMap.pop()) : null;\n  var IS_IPOD = /iPod/i.test(USER_AGENT2);\n  var IOS_VERSION = function() {\n    var match = USER_AGENT2.match(/OS (\\d+)_/i);\n    if (match && match[1]) {\n      return match[1];\n    }\n    return null;\n  }();\n  var IS_ANDROID = /Android/i.test(USER_AGENT2);\n  var ANDROID_VERSION = function() {\n    var match = USER_AGENT2.match(/Android (\\d+)(?:\\.(\\d+))?(?:\\.(\\d+))*/i);\n    if (!match) {\n      return null;\n    }\n    var major = match[1] && parseFloat(match[1]);\n    var minor = match[2] && parseFloat(match[2]);\n    if (major && minor) {\n      return parseFloat(match[1] + \".\" + match[2]);\n    } else if (major) {\n      return major;\n    }\n    return null;\n  }();\n  var IS_NATIVE_ANDROID = IS_ANDROID && ANDROID_VERSION < 5 && appleWebkitVersion < 537;\n  var IS_FIREFOX = /Firefox/i.test(USER_AGENT2);\n  var IS_EDGE = /Edg/i.test(USER_AGENT2);\n  var IS_CHROME = !IS_EDGE && (/Chrome/i.test(USER_AGENT2) || /CriOS/i.test(USER_AGENT2));\n  var CHROME_VERSION = function() {\n    var match = USER_AGENT2.match(/(Chrome|CriOS)\\/(\\d+)/);\n    if (match && match[2]) {\n      return parseFloat(match[2]);\n    }\n    return null;\n  }();\n  var IE_VERSION = function() {\n    var result = /MSIE\\s(\\d+)\\.\\d/.exec(USER_AGENT2);\n    var version3 = result && parseFloat(result[1]);\n    if (!version3 && /Trident\\/7.0/i.test(USER_AGENT2) && /rv:11.0/.test(USER_AGENT2)) {\n      version3 = 11;\n    }\n    return version3;\n  }();\n  var IS_SAFARI = /Safari/i.test(USER_AGENT2) && !IS_CHROME && !IS_ANDROID && !IS_EDGE;\n  var IS_WINDOWS = /Windows/i.test(USER_AGENT2);\n  var TOUCH_ENABLED = Boolean(isReal() && (\"ontouchstart\" in window__default[\"default\"] || window__default[\"default\"].navigator.maxTouchPoints || window__default[\"default\"].DocumentTouch && window__default[\"default\"].document instanceof window__default[\"default\"].DocumentTouch));\n  var IS_IPAD = /iPad/i.test(USER_AGENT2) || IS_SAFARI && TOUCH_ENABLED && !/iPhone/i.test(USER_AGENT2);\n  var IS_IPHONE = /iPhone/i.test(USER_AGENT2) && !IS_IPAD;\n  var IS_IOS = IS_IPHONE || IS_IPAD || IS_IPOD;\n  var IS_ANY_SAFARI = (IS_SAFARI || IS_IOS) && !IS_CHROME;\n  var browser2 = /* @__PURE__ */ Object.freeze({\n    __proto__: null,\n    IS_IPOD,\n    IOS_VERSION,\n    IS_ANDROID,\n    ANDROID_VERSION,\n    IS_NATIVE_ANDROID,\n    IS_FIREFOX,\n    IS_EDGE,\n    IS_CHROME,\n    CHROME_VERSION,\n    IE_VERSION,\n    IS_SAFARI,\n    IS_WINDOWS,\n    TOUCH_ENABLED,\n    IS_IPAD,\n    IS_IPHONE,\n    IS_IOS,\n    IS_ANY_SAFARI\n  });\n  function isNonBlankString(str) {\n    return typeof str === \"string\" && Boolean(str.trim());\n  }\n  function throwIfWhitespace(str) {\n    if (str.indexOf(\" \") >= 0) {\n      throw new Error(\"class has illegal whitespace characters\");\n    }\n  }\n  function classRegExp(className) {\n    return new RegExp(\"(^|\\\\s)\" + className + \"($|\\\\s)\");\n  }\n  function isReal() {\n    return document__default[\"default\"] === window__default[\"default\"].document;\n  }\n  function isEl(value) {\n    return isObject2(value) && value.nodeType === 1;\n  }\n  function isInFrame() {\n    try {\n      return window__default[\"default\"].parent !== window__default[\"default\"].self;\n    } catch (x) {\n      return true;\n    }\n  }\n  function createQuerier(method) {\n    return function(selector, context) {\n      if (!isNonBlankString(selector)) {\n        return document__default[\"default\"][method](null);\n      }\n      if (isNonBlankString(context)) {\n        context = document__default[\"default\"].querySelector(context);\n      }\n      var ctx = isEl(context) ? context : document__default[\"default\"];\n      return ctx[method] && ctx[method](selector);\n    };\n  }\n  function createEl(tagName, properties, attributes, content) {\n    if (tagName === void 0) {\n      tagName = \"div\";\n    }\n    if (properties === void 0) {\n      properties = {};\n    }\n    if (attributes === void 0) {\n      attributes = {};\n    }\n    var el = document__default[\"default\"].createElement(tagName);\n    Object.getOwnPropertyNames(properties).forEach(function(propName) {\n      var val = properties[propName];\n      if (propName.indexOf(\"aria-\") !== -1 || propName === \"role\" || propName === \"type\") {\n        log.warn(\"Setting attributes in the second argument of createEl()\\nhas been deprecated. Use the third argument instead.\\n\" + (\"createEl(type, properties, attributes). Attempting to set \" + propName + \" to \" + val + \".\"));\n        el.setAttribute(propName, val);\n      } else if (propName === \"textContent\") {\n        textContent(el, val);\n      } else if (el[propName] !== val || propName === \"tabIndex\") {\n        el[propName] = val;\n      }\n    });\n    Object.getOwnPropertyNames(attributes).forEach(function(attrName) {\n      el.setAttribute(attrName, attributes[attrName]);\n    });\n    if (content) {\n      appendContent(el, content);\n    }\n    return el;\n  }\n  function textContent(el, text) {\n    if (typeof el.textContent === \"undefined\") {\n      el.innerText = text;\n    } else {\n      el.textContent = text;\n    }\n    return el;\n  }\n  function prependTo(child, parent) {\n    if (parent.firstChild) {\n      parent.insertBefore(child, parent.firstChild);\n    } else {\n      parent.appendChild(child);\n    }\n  }\n  function hasClass(element, classToCheck) {\n    throwIfWhitespace(classToCheck);\n    if (element.classList) {\n      return element.classList.contains(classToCheck);\n    }\n    return classRegExp(classToCheck).test(element.className);\n  }\n  function addClass(element, classToAdd) {\n    if (element.classList) {\n      element.classList.add(classToAdd);\n    } else if (!hasClass(element, classToAdd)) {\n      element.className = (element.className + \" \" + classToAdd).trim();\n    }\n    return element;\n  }\n  function removeClass(element, classToRemove) {\n    if (!element) {\n      log.warn(\"removeClass was called with an element that doesn't exist\");\n      return null;\n    }\n    if (element.classList) {\n      element.classList.remove(classToRemove);\n    } else {\n      throwIfWhitespace(classToRemove);\n      element.className = element.className.split(/\\s+/).filter(function(c) {\n        return c !== classToRemove;\n      }).join(\" \");\n    }\n    return element;\n  }\n  function toggleClass(element, classToToggle, predicate) {\n    var has2 = hasClass(element, classToToggle);\n    if (typeof predicate === \"function\") {\n      predicate = predicate(element, classToToggle);\n    }\n    if (typeof predicate !== \"boolean\") {\n      predicate = !has2;\n    }\n    if (predicate === has2) {\n      return;\n    }\n    if (predicate) {\n      addClass(element, classToToggle);\n    } else {\n      removeClass(element, classToToggle);\n    }\n    return element;\n  }\n  function setAttributes(el, attributes) {\n    Object.getOwnPropertyNames(attributes).forEach(function(attrName) {\n      var attrValue = attributes[attrName];\n      if (attrValue === null || typeof attrValue === \"undefined\" || attrValue === false) {\n        el.removeAttribute(attrName);\n      } else {\n        el.setAttribute(attrName, attrValue === true ? \"\" : attrValue);\n      }\n    });\n  }\n  function getAttributes(tag) {\n    var obj = {};\n    var knownBooleans = \",autoplay,controls,playsinline,loop,muted,default,defaultMuted,\";\n    if (tag && tag.attributes && tag.attributes.length > 0) {\n      var attrs = tag.attributes;\n      for (var i2 = attrs.length - 1; i2 >= 0; i2--) {\n        var attrName = attrs[i2].name;\n        var attrVal = attrs[i2].value;\n        if (typeof tag[attrName] === \"boolean\" || knownBooleans.indexOf(\",\" + attrName + \",\") !== -1) {\n          attrVal = attrVal !== null ? true : false;\n        }\n        obj[attrName] = attrVal;\n      }\n    }\n    return obj;\n  }\n  function getAttribute(el, attribute) {\n    return el.getAttribute(attribute);\n  }\n  function setAttribute(el, attribute, value) {\n    el.setAttribute(attribute, value);\n  }\n  function removeAttribute(el, attribute) {\n    el.removeAttribute(attribute);\n  }\n  function blockTextSelection() {\n    document__default[\"default\"].body.focus();\n    document__default[\"default\"].onselectstart = function() {\n      return false;\n    };\n  }\n  function unblockTextSelection() {\n    document__default[\"default\"].onselectstart = function() {\n      return true;\n    };\n  }\n  function getBoundingClientRect(el) {\n    if (el && el.getBoundingClientRect && el.parentNode) {\n      var rect = el.getBoundingClientRect();\n      var result = {};\n      [\"bottom\", \"height\", \"left\", \"right\", \"top\", \"width\"].forEach(function(k) {\n        if (rect[k] !== void 0) {\n          result[k] = rect[k];\n        }\n      });\n      if (!result.height) {\n        result.height = parseFloat(computedStyle(el, \"height\"));\n      }\n      if (!result.width) {\n        result.width = parseFloat(computedStyle(el, \"width\"));\n      }\n      return result;\n    }\n  }\n  function findPosition(el) {\n    if (!el || el && !el.offsetParent) {\n      return {\n        left: 0,\n        top: 0,\n        width: 0,\n        height: 0\n      };\n    }\n    var width = el.offsetWidth;\n    var height = el.offsetHeight;\n    var left = 0;\n    var top = 0;\n    while (el.offsetParent && el !== document__default[\"default\"][FullscreenApi.fullscreenElement]) {\n      left += el.offsetLeft;\n      top += el.offsetTop;\n      el = el.offsetParent;\n    }\n    return {\n      left,\n      top,\n      width,\n      height\n    };\n  }\n  function getPointerPosition2(el, event2) {\n    var translated = {\n      x: 0,\n      y: 0\n    };\n    if (IS_IOS) {\n      var item = el;\n      while (item && item.nodeName.toLowerCase() !== \"html\") {\n        var transform = computedStyle(item, \"transform\");\n        if (/^matrix/.test(transform)) {\n          var values = transform.slice(7, -1).split(/,\\s/).map(Number);\n          translated.x += values[4];\n          translated.y += values[5];\n        } else if (/^matrix3d/.test(transform)) {\n          var _values = transform.slice(9, -1).split(/,\\s/).map(Number);\n          translated.x += _values[12];\n          translated.y += _values[13];\n        }\n        item = item.parentNode;\n      }\n    }\n    var position = {};\n    var boxTarget = findPosition(event2.target);\n    var box = findPosition(el);\n    var boxW = box.width;\n    var boxH = box.height;\n    var offsetY = event2.offsetY - (box.top - boxTarget.top);\n    var offsetX = event2.offsetX - (box.left - boxTarget.left);\n    if (event2.changedTouches) {\n      offsetX = event2.changedTouches[0].pageX - box.left;\n      offsetY = event2.changedTouches[0].pageY + box.top;\n      if (IS_IOS) {\n        offsetX -= translated.x;\n        offsetY -= translated.y;\n      }\n    }\n    position.y = 1 - Math.max(0, Math.min(1, offsetY / boxH));\n    position.x = Math.max(0, Math.min(1, offsetX / boxW));\n    return position;\n  }\n  function isTextNode(value) {\n    return isObject2(value) && value.nodeType === 3;\n  }\n  function emptyEl(el) {\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n    return el;\n  }\n  function normalizeContent(content) {\n    if (typeof content === \"function\") {\n      content = content();\n    }\n    return (Array.isArray(content) ? content : [content]).map(function(value) {\n      if (typeof value === \"function\") {\n        value = value();\n      }\n      if (isEl(value) || isTextNode(value)) {\n        return value;\n      }\n      if (typeof value === \"string\" && /\\S/.test(value)) {\n        return document__default[\"default\"].createTextNode(value);\n      }\n    }).filter(function(value) {\n      return value;\n    });\n  }\n  function appendContent(el, content) {\n    normalizeContent(content).forEach(function(node) {\n      return el.appendChild(node);\n    });\n    return el;\n  }\n  function insertContent(el, content) {\n    return appendContent(emptyEl(el), content);\n  }\n  function isSingleLeftClick(event2) {\n    if (event2.button === void 0 && event2.buttons === void 0) {\n      return true;\n    }\n    if (event2.button === 0 && event2.buttons === void 0) {\n      return true;\n    }\n    if (event2.type === \"mouseup\" && event2.button === 0 && event2.buttons === 0) {\n      return true;\n    }\n    if (event2.button !== 0 || event2.buttons !== 1) {\n      return false;\n    }\n    return true;\n  }\n  var $ = createQuerier(\"querySelector\");\n  var $$ = createQuerier(\"querySelectorAll\");\n  var Dom = /* @__PURE__ */ Object.freeze({\n    __proto__: null,\n    isReal,\n    isEl,\n    isInFrame,\n    createEl,\n    textContent,\n    prependTo,\n    hasClass,\n    addClass,\n    removeClass,\n    toggleClass,\n    setAttributes,\n    getAttributes,\n    getAttribute,\n    setAttribute,\n    removeAttribute,\n    blockTextSelection,\n    unblockTextSelection,\n    getBoundingClientRect,\n    findPosition,\n    getPointerPosition: getPointerPosition2,\n    isTextNode,\n    emptyEl,\n    normalizeContent,\n    appendContent,\n    insertContent,\n    isSingleLeftClick,\n    $,\n    $$\n  });\n  var _windowLoaded = false;\n  var videojs$1;\n  var autoSetup = function autoSetup2() {\n    if (videojs$1.options.autoSetup === false) {\n      return;\n    }\n    var vids = Array.prototype.slice.call(document__default[\"default\"].getElementsByTagName(\"video\"));\n    var audios = Array.prototype.slice.call(document__default[\"default\"].getElementsByTagName(\"audio\"));\n    var divs = Array.prototype.slice.call(document__default[\"default\"].getElementsByTagName(\"video-js\"));\n    var mediaEls = vids.concat(audios, divs);\n    if (mediaEls && mediaEls.length > 0) {\n      for (var i2 = 0, e = mediaEls.length; i2 < e; i2++) {\n        var mediaEl = mediaEls[i2];\n        if (mediaEl && mediaEl.getAttribute) {\n          if (mediaEl.player === void 0) {\n            var options = mediaEl.getAttribute(\"data-setup\");\n            if (options !== null) {\n              videojs$1(mediaEl);\n            }\n          }\n        } else {\n          autoSetupTimeout(1);\n          break;\n        }\n      }\n    } else if (!_windowLoaded) {\n      autoSetupTimeout(1);\n    }\n  };\n  function autoSetupTimeout(wait2, vjs) {\n    if (!isReal()) {\n      return;\n    }\n    if (vjs) {\n      videojs$1 = vjs;\n    }\n    window__default[\"default\"].setTimeout(autoSetup, wait2);\n  }\n  function setWindowLoaded() {\n    _windowLoaded = true;\n    window__default[\"default\"].removeEventListener(\"load\", setWindowLoaded);\n  }\n  if (isReal()) {\n    if (document__default[\"default\"].readyState === \"complete\") {\n      setWindowLoaded();\n    } else {\n      window__default[\"default\"].addEventListener(\"load\", setWindowLoaded);\n    }\n  }\n  var createStyleElement = function createStyleElement2(className) {\n    var style2 = document__default[\"default\"].createElement(\"style\");\n    style2.className = className;\n    return style2;\n  };\n  var setTextContent = function setTextContent2(el, content) {\n    if (el.styleSheet) {\n      el.styleSheet.cssText = content;\n    } else {\n      el.textContent = content;\n    }\n  };\n  var _initialGuid = 3;\n  var _guid = _initialGuid;\n  function newGUID() {\n    return _guid++;\n  }\n  var FakeWeakMap;\n  if (!window__default[\"default\"].WeakMap) {\n    FakeWeakMap = /* @__PURE__ */ function() {\n      function FakeWeakMap2() {\n        this.vdata = \"vdata\" + Math.floor(window__default[\"default\"].performance && window__default[\"default\"].performance.now() || Date.now());\n        this.data = {};\n      }\n      var _proto = FakeWeakMap2.prototype;\n      _proto.set = function set2(key, value) {\n        var access = key[this.vdata] || newGUID();\n        if (!key[this.vdata]) {\n          key[this.vdata] = access;\n        }\n        this.data[access] = value;\n        return this;\n      };\n      _proto.get = function get2(key) {\n        var access = key[this.vdata];\n        if (access) {\n          return this.data[access];\n        }\n        log(\"We have no data for this element\", key);\n        return void 0;\n      };\n      _proto.has = function has2(key) {\n        var access = key[this.vdata];\n        return access in this.data;\n      };\n      _proto[\"delete\"] = function _delete(key) {\n        var access = key[this.vdata];\n        if (access) {\n          delete this.data[access];\n          delete key[this.vdata];\n        }\n      };\n      return FakeWeakMap2;\n    }();\n  }\n  var DomData = window__default[\"default\"].WeakMap ? /* @__PURE__ */ new WeakMap() : new FakeWeakMap();\n  function _cleanUpEvents(elem, type) {\n    if (!DomData.has(elem)) {\n      return;\n    }\n    var data = DomData.get(elem);\n    if (data.handlers[type].length === 0) {\n      delete data.handlers[type];\n      if (elem.removeEventListener) {\n        elem.removeEventListener(type, data.dispatcher, false);\n      } else if (elem.detachEvent) {\n        elem.detachEvent(\"on\" + type, data.dispatcher);\n      }\n    }\n    if (Object.getOwnPropertyNames(data.handlers).length <= 0) {\n      delete data.handlers;\n      delete data.dispatcher;\n      delete data.disabled;\n    }\n    if (Object.getOwnPropertyNames(data).length === 0) {\n      DomData[\"delete\"](elem);\n    }\n  }\n  function _handleMultipleEvents(fn, elem, types, callback) {\n    types.forEach(function(type) {\n      fn(elem, type, callback);\n    });\n  }\n  function fixEvent(event2) {\n    if (event2.fixed_) {\n      return event2;\n    }\n    function returnTrue() {\n      return true;\n    }\n    function returnFalse() {\n      return false;\n    }\n    if (!event2 || !event2.isPropagationStopped || !event2.isImmediatePropagationStopped) {\n      var old = event2 || window__default[\"default\"].event;\n      event2 = {};\n      for (var key in old) {\n        if (key !== \"layerX\" && key !== \"layerY\" && key !== \"keyLocation\" && key !== \"webkitMovementX\" && key !== \"webkitMovementY\" && key !== \"path\") {\n          if (!(key === \"returnValue\" && old.preventDefault)) {\n            event2[key] = old[key];\n          }\n        }\n      }\n      if (!event2.target) {\n        event2.target = event2.srcElement || document__default[\"default\"];\n      }\n      if (!event2.relatedTarget) {\n        event2.relatedTarget = event2.fromElement === event2.target ? event2.toElement : event2.fromElement;\n      }\n      event2.preventDefault = function() {\n        if (old.preventDefault) {\n          old.preventDefault();\n        }\n        event2.returnValue = false;\n        old.returnValue = false;\n        event2.defaultPrevented = true;\n      };\n      event2.defaultPrevented = false;\n      event2.stopPropagation = function() {\n        if (old.stopPropagation) {\n          old.stopPropagation();\n        }\n        event2.cancelBubble = true;\n        old.cancelBubble = true;\n        event2.isPropagationStopped = returnTrue;\n      };\n      event2.isPropagationStopped = returnFalse;\n      event2.stopImmediatePropagation = function() {\n        if (old.stopImmediatePropagation) {\n          old.stopImmediatePropagation();\n        }\n        event2.isImmediatePropagationStopped = returnTrue;\n        event2.stopPropagation();\n      };\n      event2.isImmediatePropagationStopped = returnFalse;\n      if (event2.clientX !== null && event2.clientX !== void 0) {\n        var doc = document__default[\"default\"].documentElement;\n        var body = document__default[\"default\"].body;\n        event2.pageX = event2.clientX + (doc && doc.scrollLeft || body && body.scrollLeft || 0) - (doc && doc.clientLeft || body && body.clientLeft || 0);\n        event2.pageY = event2.clientY + (doc && doc.scrollTop || body && body.scrollTop || 0) - (doc && doc.clientTop || body && body.clientTop || 0);\n      }\n      event2.which = event2.charCode || event2.keyCode;\n      if (event2.button !== null && event2.button !== void 0) {\n        event2.button = event2.button & 1 ? 0 : event2.button & 4 ? 1 : event2.button & 2 ? 2 : 0;\n      }\n    }\n    event2.fixed_ = true;\n    return event2;\n  }\n  var _supportsPassive;\n  var supportsPassive = function supportsPassive2() {\n    if (typeof _supportsPassive !== \"boolean\") {\n      _supportsPassive = false;\n      try {\n        var opts = Object.defineProperty({}, \"passive\", {\n          get: function get2() {\n            _supportsPassive = true;\n          }\n        });\n        window__default[\"default\"].addEventListener(\"test\", null, opts);\n        window__default[\"default\"].removeEventListener(\"test\", null, opts);\n      } catch (e) {\n      }\n    }\n    return _supportsPassive;\n  };\n  var passiveEvents = [\"touchstart\", \"touchmove\"];\n  function on(elem, type, fn) {\n    if (Array.isArray(type)) {\n      return _handleMultipleEvents(on, elem, type, fn);\n    }\n    if (!DomData.has(elem)) {\n      DomData.set(elem, {});\n    }\n    var data = DomData.get(elem);\n    if (!data.handlers) {\n      data.handlers = {};\n    }\n    if (!data.handlers[type]) {\n      data.handlers[type] = [];\n    }\n    if (!fn.guid) {\n      fn.guid = newGUID();\n    }\n    data.handlers[type].push(fn);\n    if (!data.dispatcher) {\n      data.disabled = false;\n      data.dispatcher = function(event2, hash2) {\n        if (data.disabled) {\n          return;\n        }\n        event2 = fixEvent(event2);\n        var handlers = data.handlers[event2.type];\n        if (handlers) {\n          var handlersCopy = handlers.slice(0);\n          for (var m = 0, n = handlersCopy.length; m < n; m++) {\n            if (event2.isImmediatePropagationStopped()) {\n              break;\n            } else {\n              try {\n                handlersCopy[m].call(elem, event2, hash2);\n              } catch (e) {\n                log.error(e);\n              }\n            }\n          }\n        }\n      };\n    }\n    if (data.handlers[type].length === 1) {\n      if (elem.addEventListener) {\n        var options = false;\n        if (supportsPassive() && passiveEvents.indexOf(type) > -1) {\n          options = {\n            passive: true\n          };\n        }\n        elem.addEventListener(type, data.dispatcher, options);\n      } else if (elem.attachEvent) {\n        elem.attachEvent(\"on\" + type, data.dispatcher);\n      }\n    }\n  }\n  function off(elem, type, fn) {\n    if (!DomData.has(elem)) {\n      return;\n    }\n    var data = DomData.get(elem);\n    if (!data.handlers) {\n      return;\n    }\n    if (Array.isArray(type)) {\n      return _handleMultipleEvents(off, elem, type, fn);\n    }\n    var removeType = function removeType2(el, t2) {\n      data.handlers[t2] = [];\n      _cleanUpEvents(el, t2);\n    };\n    if (type === void 0) {\n      for (var t in data.handlers) {\n        if (Object.prototype.hasOwnProperty.call(data.handlers || {}, t)) {\n          removeType(elem, t);\n        }\n      }\n      return;\n    }\n    var handlers = data.handlers[type];\n    if (!handlers) {\n      return;\n    }\n    if (!fn) {\n      removeType(elem, type);\n      return;\n    }\n    if (fn.guid) {\n      for (var n = 0; n < handlers.length; n++) {\n        if (handlers[n].guid === fn.guid) {\n          handlers.splice(n--, 1);\n        }\n      }\n    }\n    _cleanUpEvents(elem, type);\n  }\n  function trigger(elem, event2, hash2) {\n    var elemData = DomData.has(elem) ? DomData.get(elem) : {};\n    var parent = elem.parentNode || elem.ownerDocument;\n    if (typeof event2 === \"string\") {\n      event2 = {\n        type: event2,\n        target: elem\n      };\n    } else if (!event2.target) {\n      event2.target = elem;\n    }\n    event2 = fixEvent(event2);\n    if (elemData.dispatcher) {\n      elemData.dispatcher.call(elem, event2, hash2);\n    }\n    if (parent && !event2.isPropagationStopped() && event2.bubbles === true) {\n      trigger.call(null, parent, event2, hash2);\n    } else if (!parent && !event2.defaultPrevented && event2.target && event2.target[event2.type]) {\n      if (!DomData.has(event2.target)) {\n        DomData.set(event2.target, {});\n      }\n      var targetData = DomData.get(event2.target);\n      if (event2.target[event2.type]) {\n        targetData.disabled = true;\n        if (typeof event2.target[event2.type] === \"function\") {\n          event2.target[event2.type]();\n        }\n        targetData.disabled = false;\n      }\n    }\n    return !event2.defaultPrevented;\n  }\n  function one(elem, type, fn) {\n    if (Array.isArray(type)) {\n      return _handleMultipleEvents(one, elem, type, fn);\n    }\n    var func = function func2() {\n      off(elem, type, func2);\n      fn.apply(this, arguments);\n    };\n    func.guid = fn.guid = fn.guid || newGUID();\n    on(elem, type, func);\n  }\n  function any(elem, type, fn) {\n    var func = function func2() {\n      off(elem, type, func2);\n      fn.apply(this, arguments);\n    };\n    func.guid = fn.guid = fn.guid || newGUID();\n    on(elem, type, func);\n  }\n  var Events2 = /* @__PURE__ */ Object.freeze({\n    __proto__: null,\n    fixEvent,\n    on,\n    off,\n    trigger,\n    one,\n    any\n  });\n  var UPDATE_REFRESH_INTERVAL = 30;\n  var bind = function bind2(context, fn, uid) {\n    if (!fn.guid) {\n      fn.guid = newGUID();\n    }\n    var bound = fn.bind(context);\n    bound.guid = uid ? uid + \"_\" + fn.guid : fn.guid;\n    return bound;\n  };\n  var throttle = function throttle2(fn, wait2) {\n    var last = window__default[\"default\"].performance.now();\n    var throttled = function throttled2() {\n      var now2 = window__default[\"default\"].performance.now();\n      if (now2 - last >= wait2) {\n        fn.apply(void 0, arguments);\n        last = now2;\n      }\n    };\n    return throttled;\n  };\n  var debounce = function debounce2(func, wait2, immediate, context) {\n    if (context === void 0) {\n      context = window__default[\"default\"];\n    }\n    var timeout;\n    var cancel = function cancel2() {\n      context.clearTimeout(timeout);\n      timeout = null;\n    };\n    var debounced = function debounced2() {\n      var self2 = this;\n      var args = arguments;\n      var _later = function later() {\n        timeout = null;\n        _later = null;\n        {\n          func.apply(self2, args);\n        }\n      };\n      context.clearTimeout(timeout);\n      timeout = context.setTimeout(_later, wait2);\n    };\n    debounced.cancel = cancel;\n    return debounced;\n  };\n  var EventTarget2 = function EventTarget3() {\n  };\n  EventTarget2.prototype.allowedEvents_ = {};\n  EventTarget2.prototype.on = function(type, fn) {\n    var ael = this.addEventListener;\n    this.addEventListener = function() {\n    };\n    on(this, type, fn);\n    this.addEventListener = ael;\n  };\n  EventTarget2.prototype.addEventListener = EventTarget2.prototype.on;\n  EventTarget2.prototype.off = function(type, fn) {\n    off(this, type, fn);\n  };\n  EventTarget2.prototype.removeEventListener = EventTarget2.prototype.off;\n  EventTarget2.prototype.one = function(type, fn) {\n    var ael = this.addEventListener;\n    this.addEventListener = function() {\n    };\n    one(this, type, fn);\n    this.addEventListener = ael;\n  };\n  EventTarget2.prototype.any = function(type, fn) {\n    var ael = this.addEventListener;\n    this.addEventListener = function() {\n    };\n    any(this, type, fn);\n    this.addEventListener = ael;\n  };\n  EventTarget2.prototype.trigger = function(event2) {\n    var type = event2.type || event2;\n    if (typeof event2 === \"string\") {\n      event2 = {\n        type\n      };\n    }\n    event2 = fixEvent(event2);\n    if (this.allowedEvents_[type] && this[\"on\" + type]) {\n      this[\"on\" + type](event2);\n    }\n    trigger(this, event2);\n  };\n  EventTarget2.prototype.dispatchEvent = EventTarget2.prototype.trigger;\n  var EVENT_MAP;\n  EventTarget2.prototype.queueTrigger = function(event2) {\n    var _this = this;\n    if (!EVENT_MAP) {\n      EVENT_MAP = /* @__PURE__ */ new Map();\n    }\n    var type = event2.type || event2;\n    var map = EVENT_MAP.get(this);\n    if (!map) {\n      map = /* @__PURE__ */ new Map();\n      EVENT_MAP.set(this, map);\n    }\n    var oldTimeout = map.get(type);\n    map[\"delete\"](type);\n    window__default[\"default\"].clearTimeout(oldTimeout);\n    var timeout = window__default[\"default\"].setTimeout(function() {\n      map[\"delete\"](type);\n      if (map.size === 0) {\n        map = null;\n        EVENT_MAP[\"delete\"](_this);\n      }\n      _this.trigger(event2);\n    }, 0);\n    map.set(type, timeout);\n  };\n  var objName = function objName2(obj) {\n    if (typeof obj.name === \"function\") {\n      return obj.name();\n    }\n    if (typeof obj.name === \"string\") {\n      return obj.name;\n    }\n    if (obj.name_) {\n      return obj.name_;\n    }\n    if (obj.constructor && obj.constructor.name) {\n      return obj.constructor.name;\n    }\n    return typeof obj;\n  };\n  var isEvented = function isEvented2(object) {\n    return object instanceof EventTarget2 || !!object.eventBusEl_ && [\"on\", \"one\", \"off\", \"trigger\"].every(function(k) {\n      return typeof object[k] === \"function\";\n    });\n  };\n  var addEventedCallback = function addEventedCallback2(target, callback) {\n    if (isEvented(target)) {\n      callback();\n    } else {\n      if (!target.eventedCallbacks) {\n        target.eventedCallbacks = [];\n      }\n      target.eventedCallbacks.push(callback);\n    }\n  };\n  var isValidEventType = function isValidEventType2(type) {\n    return (\n      // The regex here verifies that the `type` contains at least one non-\n      // whitespace character.\n      typeof type === \"string\" && /\\S/.test(type) || Array.isArray(type) && !!type.length\n    );\n  };\n  var validateTarget = function validateTarget2(target, obj, fnName) {\n    if (!target || !target.nodeName && !isEvented(target)) {\n      throw new Error(\"Invalid target for \" + objName(obj) + \"#\" + fnName + \"; must be a DOM node or evented object.\");\n    }\n  };\n  var validateEventType = function validateEventType2(type, obj, fnName) {\n    if (!isValidEventType(type)) {\n      throw new Error(\"Invalid event type for \" + objName(obj) + \"#\" + fnName + \"; must be a non-empty string or array.\");\n    }\n  };\n  var validateListener = function validateListener2(listener, obj, fnName) {\n    if (typeof listener !== \"function\") {\n      throw new Error(\"Invalid listener for \" + objName(obj) + \"#\" + fnName + \"; must be a function.\");\n    }\n  };\n  var normalizeListenArgs = function normalizeListenArgs2(self2, args, fnName) {\n    var isTargetingSelf = args.length < 3 || args[0] === self2 || args[0] === self2.eventBusEl_;\n    var target;\n    var type;\n    var listener;\n    if (isTargetingSelf) {\n      target = self2.eventBusEl_;\n      if (args.length >= 3) {\n        args.shift();\n      }\n      type = args[0];\n      listener = args[1];\n    } else {\n      target = args[0];\n      type = args[1];\n      listener = args[2];\n    }\n    validateTarget(target, self2, fnName);\n    validateEventType(type, self2, fnName);\n    validateListener(listener, self2, fnName);\n    listener = bind(self2, listener);\n    return {\n      isTargetingSelf,\n      target,\n      type,\n      listener\n    };\n  };\n  var listen = function listen2(target, method, type, listener) {\n    validateTarget(target, target, method);\n    if (target.nodeName) {\n      Events2[method](target, type, listener);\n    } else {\n      target[method](type, listener);\n    }\n  };\n  var EventedMixin = {\n    /**\n     * Add a listener to an event (or events) on this object or another evented\n     * object.\n     *\n     * @param  {string|Array|Element|Object} targetOrType\n     *         If this is a string or array, it represents the event type(s)\n     *         that will trigger the listener.\n     *\n     *         Another evented object can be passed here instead, which will\n     *         cause the listener to listen for events on _that_ object.\n     *\n     *         In either case, the listener's `this` value will be bound to\n     *         this object.\n     *\n     * @param  {string|Array|Function} typeOrListener\n     *         If the first argument was a string or array, this should be the\n     *         listener function. Otherwise, this is a string or array of event\n     *         type(s).\n     *\n     * @param  {Function} [listener]\n     *         If the first argument was another evented object, this will be\n     *         the listener function.\n     */\n    on: function on2() {\n      var _this = this;\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      var _normalizeListenArgs = normalizeListenArgs(this, args, \"on\"), isTargetingSelf = _normalizeListenArgs.isTargetingSelf, target = _normalizeListenArgs.target, type = _normalizeListenArgs.type, listener = _normalizeListenArgs.listener;\n      listen(target, \"on\", type, listener);\n      if (!isTargetingSelf) {\n        var removeListenerOnDispose = function removeListenerOnDispose2() {\n          return _this.off(target, type, listener);\n        };\n        removeListenerOnDispose.guid = listener.guid;\n        var removeRemoverOnTargetDispose = function removeRemoverOnTargetDispose2() {\n          return _this.off(\"dispose\", removeListenerOnDispose);\n        };\n        removeRemoverOnTargetDispose.guid = listener.guid;\n        listen(this, \"on\", \"dispose\", removeListenerOnDispose);\n        listen(target, \"on\", \"dispose\", removeRemoverOnTargetDispose);\n      }\n    },\n    /**\n     * Add a listener to an event (or events) on this object or another evented\n     * object. The listener will be called once per event and then removed.\n     *\n     * @param  {string|Array|Element|Object} targetOrType\n     *         If this is a string or array, it represents the event type(s)\n     *         that will trigger the listener.\n     *\n     *         Another evented object can be passed here instead, which will\n     *         cause the listener to listen for events on _that_ object.\n     *\n     *         In either case, the listener's `this` value will be bound to\n     *         this object.\n     *\n     * @param  {string|Array|Function} typeOrListener\n     *         If the first argument was a string or array, this should be the\n     *         listener function. Otherwise, this is a string or array of event\n     *         type(s).\n     *\n     * @param  {Function} [listener]\n     *         If the first argument was another evented object, this will be\n     *         the listener function.\n     */\n    one: function one2() {\n      var _this2 = this;\n      for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n        args[_key2] = arguments[_key2];\n      }\n      var _normalizeListenArgs2 = normalizeListenArgs(this, args, \"one\"), isTargetingSelf = _normalizeListenArgs2.isTargetingSelf, target = _normalizeListenArgs2.target, type = _normalizeListenArgs2.type, listener = _normalizeListenArgs2.listener;\n      if (isTargetingSelf) {\n        listen(target, \"one\", type, listener);\n      } else {\n        var wrapper = function wrapper2() {\n          _this2.off(target, type, wrapper2);\n          for (var _len3 = arguments.length, largs = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            largs[_key3] = arguments[_key3];\n          }\n          listener.apply(null, largs);\n        };\n        wrapper.guid = listener.guid;\n        listen(target, \"one\", type, wrapper);\n      }\n    },\n    /**\n     * Add a listener to an event (or events) on this object or another evented\n     * object. The listener will only be called once for the first event that is triggered\n     * then removed.\n     *\n     * @param  {string|Array|Element|Object} targetOrType\n     *         If this is a string or array, it represents the event type(s)\n     *         that will trigger the listener.\n     *\n     *         Another evented object can be passed here instead, which will\n     *         cause the listener to listen for events on _that_ object.\n     *\n     *         In either case, the listener's `this` value will be bound to\n     *         this object.\n     *\n     * @param  {string|Array|Function} typeOrListener\n     *         If the first argument was a string or array, this should be the\n     *         listener function. Otherwise, this is a string or array of event\n     *         type(s).\n     *\n     * @param  {Function} [listener]\n     *         If the first argument was another evented object, this will be\n     *         the listener function.\n     */\n    any: function any2() {\n      var _this3 = this;\n      for (var _len4 = arguments.length, args = new Array(_len4), _key4 = 0; _key4 < _len4; _key4++) {\n        args[_key4] = arguments[_key4];\n      }\n      var _normalizeListenArgs3 = normalizeListenArgs(this, args, \"any\"), isTargetingSelf = _normalizeListenArgs3.isTargetingSelf, target = _normalizeListenArgs3.target, type = _normalizeListenArgs3.type, listener = _normalizeListenArgs3.listener;\n      if (isTargetingSelf) {\n        listen(target, \"any\", type, listener);\n      } else {\n        var wrapper = function wrapper2() {\n          _this3.off(target, type, wrapper2);\n          for (var _len5 = arguments.length, largs = new Array(_len5), _key5 = 0; _key5 < _len5; _key5++) {\n            largs[_key5] = arguments[_key5];\n          }\n          listener.apply(null, largs);\n        };\n        wrapper.guid = listener.guid;\n        listen(target, \"any\", type, wrapper);\n      }\n    },\n    /**\n     * Removes listener(s) from event(s) on an evented object.\n     *\n     * @param  {string|Array|Element|Object} [targetOrType]\n     *         If this is a string or array, it represents the event type(s).\n     *\n     *         Another evented object can be passed here instead, in which case\n     *         ALL 3 arguments are _required_.\n     *\n     * @param  {string|Array|Function} [typeOrListener]\n     *         If the first argument was a string or array, this may be the\n     *         listener function. Otherwise, this is a string or array of event\n     *         type(s).\n     *\n     * @param  {Function} [listener]\n     *         If the first argument was another evented object, this will be\n     *         the listener function; otherwise, _all_ listeners bound to the\n     *         event type(s) will be removed.\n     */\n    off: function off$1(targetOrType, typeOrListener, listener) {\n      if (!targetOrType || isValidEventType(targetOrType)) {\n        off(this.eventBusEl_, targetOrType, typeOrListener);\n      } else {\n        var target = targetOrType;\n        var type = typeOrListener;\n        validateTarget(target, this, \"off\");\n        validateEventType(type, this, \"off\");\n        validateListener(listener, this, \"off\");\n        listener = bind(this, listener);\n        this.off(\"dispose\", listener);\n        if (target.nodeName) {\n          off(target, type, listener);\n          off(target, \"dispose\", listener);\n        } else if (isEvented(target)) {\n          target.off(type, listener);\n          target.off(\"dispose\", listener);\n        }\n      }\n    },\n    /**\n     * Fire an event on this evented object, causing its listeners to be called.\n     *\n     * @param   {string|Object} event\n     *          An event type or an object with a type property.\n     *\n     * @param   {Object} [hash]\n     *          An additional object to pass along to listeners.\n     *\n     * @return {boolean}\n     *          Whether or not the default behavior was prevented.\n     */\n    trigger: function trigger$1(event2, hash2) {\n      validateTarget(this.eventBusEl_, this, \"trigger\");\n      var type = event2 && typeof event2 !== \"string\" ? event2.type : event2;\n      if (!isValidEventType(type)) {\n        var error = \"Invalid event type for \" + objName(this) + \"#trigger; must be a non-empty string or object with a type key that has a non-empty value.\";\n        if (event2) {\n          (this.log || log).error(error);\n        } else {\n          throw new Error(error);\n        }\n      }\n      return trigger(this.eventBusEl_, event2, hash2);\n    }\n  };\n  function evented(target, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var _options = options, eventBusKey = _options.eventBusKey;\n    if (eventBusKey) {\n      if (!target[eventBusKey].nodeName) {\n        throw new Error('The eventBusKey \"' + eventBusKey + '\" does not refer to an element.');\n      }\n      target.eventBusEl_ = target[eventBusKey];\n    } else {\n      target.eventBusEl_ = createEl(\"span\", {\n        className: \"vjs-event-bus\"\n      });\n    }\n    assign(target, EventedMixin);\n    if (target.eventedCallbacks) {\n      target.eventedCallbacks.forEach(function(callback) {\n        callback();\n      });\n    }\n    target.on(\"dispose\", function() {\n      target.off();\n      [target, target.el_, target.eventBusEl_].forEach(function(val) {\n        if (val && DomData.has(val)) {\n          DomData[\"delete\"](val);\n        }\n      });\n      window__default[\"default\"].setTimeout(function() {\n        target.eventBusEl_ = null;\n      }, 0);\n    });\n    return target;\n  }\n  var StatefulMixin = {\n    /**\n     * A hash containing arbitrary keys and values representing the state of\n     * the object.\n     *\n     * @type {Object}\n     */\n    state: {},\n    /**\n     * Set the state of an object by mutating its\n     * {@link module:stateful~StatefulMixin.state|state} object in place.\n     *\n     * @fires   module:stateful~StatefulMixin#statechanged\n     * @param   {Object|Function} stateUpdates\n     *          A new set of properties to shallow-merge into the plugin state.\n     *          Can be a plain object or a function returning a plain object.\n     *\n     * @return {Object|undefined}\n     *          An object containing changes that occurred. If no changes\n     *          occurred, returns `undefined`.\n     */\n    setState: function setState(stateUpdates) {\n      var _this = this;\n      if (typeof stateUpdates === \"function\") {\n        stateUpdates = stateUpdates();\n      }\n      var changes;\n      each(stateUpdates, function(value, key) {\n        if (_this.state[key] !== value) {\n          changes = changes || {};\n          changes[key] = {\n            from: _this.state[key],\n            to: value\n          };\n        }\n        _this.state[key] = value;\n      });\n      if (changes && isEvented(this)) {\n        this.trigger({\n          changes,\n          type: \"statechanged\"\n        });\n      }\n      return changes;\n    }\n  };\n  function stateful(target, defaultState) {\n    assign(target, StatefulMixin);\n    target.state = assign({}, target.state, defaultState);\n    if (typeof target.handleStateChanged === \"function\" && isEvented(target)) {\n      target.on(\"statechanged\", target.handleStateChanged);\n    }\n    return target;\n  }\n  var toLowerCase = function toLowerCase2(string) {\n    if (typeof string !== \"string\") {\n      return string;\n    }\n    return string.replace(/./, function(w) {\n      return w.toLowerCase();\n    });\n  };\n  var toTitleCase2 = function toTitleCase3(string) {\n    if (typeof string !== \"string\") {\n      return string;\n    }\n    return string.replace(/./, function(w) {\n      return w.toUpperCase();\n    });\n  };\n  var titleCaseEquals = function titleCaseEquals2(str1, str2) {\n    return toTitleCase2(str1) === toTitleCase2(str2);\n  };\n  function mergeOptions() {\n    var result = {};\n    for (var _len = arguments.length, sources = new Array(_len), _key = 0; _key < _len; _key++) {\n      sources[_key] = arguments[_key];\n    }\n    sources.forEach(function(source) {\n      if (!source) {\n        return;\n      }\n      each(source, function(value, key) {\n        if (!isPlain(value)) {\n          result[key] = value;\n          return;\n        }\n        if (!isPlain(result[key])) {\n          result[key] = {};\n        }\n        result[key] = mergeOptions(result[key], value);\n      });\n    });\n    return result;\n  }\n  var MapSham = /* @__PURE__ */ function() {\n    function MapSham2() {\n      this.map_ = {};\n    }\n    var _proto = MapSham2.prototype;\n    _proto.has = function has2(key) {\n      return key in this.map_;\n    };\n    _proto[\"delete\"] = function _delete(key) {\n      var has2 = this.has(key);\n      delete this.map_[key];\n      return has2;\n    };\n    _proto.set = function set2(key, value) {\n      this.map_[key] = value;\n      return this;\n    };\n    _proto.forEach = function forEach(callback, thisArg) {\n      for (var key in this.map_) {\n        callback.call(thisArg, this.map_[key], key, this);\n      }\n    };\n    return MapSham2;\n  }();\n  var Map$1 = window__default[\"default\"].Map ? window__default[\"default\"].Map : MapSham;\n  var SetSham = /* @__PURE__ */ function() {\n    function SetSham2() {\n      this.set_ = {};\n    }\n    var _proto = SetSham2.prototype;\n    _proto.has = function has2(key) {\n      return key in this.set_;\n    };\n    _proto[\"delete\"] = function _delete(key) {\n      var has2 = this.has(key);\n      delete this.set_[key];\n      return has2;\n    };\n    _proto.add = function add(key) {\n      this.set_[key] = 1;\n      return this;\n    };\n    _proto.forEach = function forEach(callback, thisArg) {\n      for (var key in this.set_) {\n        callback.call(thisArg, key, key, this);\n      }\n    };\n    return SetSham2;\n  }();\n  var Set$1 = window__default[\"default\"].Set ? window__default[\"default\"].Set : SetSham;\n  var Component2 = /* @__PURE__ */ function() {\n    function Component3(player, options, ready) {\n      var _this = this;\n      if (!player && this.play) {\n        this.player_ = player = this;\n      } else {\n        this.player_ = player;\n      }\n      this.isDisposed_ = false;\n      this.parentComponent_ = null;\n      this.options_ = mergeOptions({}, this.options_);\n      options = this.options_ = mergeOptions(this.options_, options);\n      this.id_ = options.id || options.el && options.el.id;\n      if (!this.id_) {\n        var id = player && player.id && player.id() || \"no_player\";\n        this.id_ = id + \"_component_\" + newGUID();\n      }\n      this.name_ = options.name || null;\n      if (options.el) {\n        this.el_ = options.el;\n      } else if (options.createEl !== false) {\n        this.el_ = this.createEl();\n      }\n      if (options.className && this.el_) {\n        options.className.split(\" \").forEach(function(c) {\n          return _this.addClass(c);\n        });\n      }\n      if (options.evented !== false) {\n        evented(this, {\n          eventBusKey: this.el_ ? \"el_\" : null\n        });\n        this.handleLanguagechange = this.handleLanguagechange.bind(this);\n        this.on(this.player_, \"languagechange\", this.handleLanguagechange);\n      }\n      stateful(this, this.constructor.defaultState);\n      this.children_ = [];\n      this.childIndex_ = {};\n      this.childNameIndex_ = {};\n      this.setTimeoutIds_ = new Set$1();\n      this.setIntervalIds_ = new Set$1();\n      this.rafIds_ = new Set$1();\n      this.namedRafs_ = new Map$1();\n      this.clearingTimersOnDispose_ = false;\n      if (options.initChildren !== false) {\n        this.initChildren();\n      }\n      this.ready(ready);\n      if (options.reportTouchActivity !== false) {\n        this.enableTouchActivity();\n      }\n    }\n    var _proto = Component3.prototype;\n    _proto.dispose = function dispose(options) {\n      if (options === void 0) {\n        options = {};\n      }\n      if (this.isDisposed_) {\n        return;\n      }\n      if (this.readyQueue_) {\n        this.readyQueue_.length = 0;\n      }\n      this.trigger({\n        type: \"dispose\",\n        bubbles: false\n      });\n      this.isDisposed_ = true;\n      if (this.children_) {\n        for (var i2 = this.children_.length - 1; i2 >= 0; i2--) {\n          if (this.children_[i2].dispose) {\n            this.children_[i2].dispose();\n          }\n        }\n      }\n      this.children_ = null;\n      this.childIndex_ = null;\n      this.childNameIndex_ = null;\n      this.parentComponent_ = null;\n      if (this.el_) {\n        if (this.el_.parentNode) {\n          if (options.restoreEl) {\n            this.el_.parentNode.replaceChild(options.restoreEl, this.el_);\n          } else {\n            this.el_.parentNode.removeChild(this.el_);\n          }\n        }\n        this.el_ = null;\n      }\n      this.player_ = null;\n    };\n    _proto.isDisposed = function isDisposed() {\n      return Boolean(this.isDisposed_);\n    };\n    _proto.player = function player() {\n      return this.player_;\n    };\n    _proto.options = function options(obj) {\n      if (!obj) {\n        return this.options_;\n      }\n      this.options_ = mergeOptions(this.options_, obj);\n      return this.options_;\n    };\n    _proto.el = function el() {\n      return this.el_;\n    };\n    _proto.createEl = function createEl$1(tagName, properties, attributes) {\n      return createEl(tagName, properties, attributes);\n    };\n    _proto.localize = function localize(string, tokens, defaultValue) {\n      if (defaultValue === void 0) {\n        defaultValue = string;\n      }\n      var code2 = this.player_.language && this.player_.language();\n      var languages = this.player_.languages && this.player_.languages();\n      var language = languages && languages[code2];\n      var primaryCode = code2 && code2.split(\"-\")[0];\n      var primaryLang = languages && languages[primaryCode];\n      var localizedString = defaultValue;\n      if (language && language[string]) {\n        localizedString = language[string];\n      } else if (primaryLang && primaryLang[string]) {\n        localizedString = primaryLang[string];\n      }\n      if (tokens) {\n        localizedString = localizedString.replace(/\\{(\\d+)\\}/g, function(match, index) {\n          var value = tokens[index - 1];\n          var ret = value;\n          if (typeof value === \"undefined\") {\n            ret = match;\n          }\n          return ret;\n        });\n      }\n      return localizedString;\n    };\n    _proto.handleLanguagechange = function handleLanguagechange() {\n    };\n    _proto.contentEl = function contentEl() {\n      return this.contentEl_ || this.el_;\n    };\n    _proto.id = function id() {\n      return this.id_;\n    };\n    _proto.name = function name() {\n      return this.name_;\n    };\n    _proto.children = function children() {\n      return this.children_;\n    };\n    _proto.getChildById = function getChildById(id) {\n      return this.childIndex_[id];\n    };\n    _proto.getChild = function getChild(name) {\n      if (!name) {\n        return;\n      }\n      return this.childNameIndex_[name];\n    };\n    _proto.getDescendant = function getDescendant() {\n      for (var _len = arguments.length, names = new Array(_len), _key = 0; _key < _len; _key++) {\n        names[_key] = arguments[_key];\n      }\n      names = names.reduce(function(acc, n) {\n        return acc.concat(n);\n      }, []);\n      var currentChild = this;\n      for (var i2 = 0; i2 < names.length; i2++) {\n        currentChild = currentChild.getChild(names[i2]);\n        if (!currentChild || !currentChild.getChild) {\n          return;\n        }\n      }\n      return currentChild;\n    };\n    _proto.addChild = function addChild(child, options, index) {\n      if (options === void 0) {\n        options = {};\n      }\n      if (index === void 0) {\n        index = this.children_.length;\n      }\n      var component;\n      var componentName;\n      if (typeof child === \"string\") {\n        componentName = toTitleCase2(child);\n        var componentClassName = options.componentClass || componentName;\n        options.name = componentName;\n        var ComponentClass = Component3.getComponent(componentClassName);\n        if (!ComponentClass) {\n          throw new Error(\"Component \" + componentClassName + \" does not exist\");\n        }\n        if (typeof ComponentClass !== \"function\") {\n          return null;\n        }\n        component = new ComponentClass(this.player_ || this, options);\n      } else {\n        component = child;\n      }\n      if (component.parentComponent_) {\n        component.parentComponent_.removeChild(component);\n      }\n      this.children_.splice(index, 0, component);\n      component.parentComponent_ = this;\n      if (typeof component.id === \"function\") {\n        this.childIndex_[component.id()] = component;\n      }\n      componentName = componentName || component.name && toTitleCase2(component.name());\n      if (componentName) {\n        this.childNameIndex_[componentName] = component;\n        this.childNameIndex_[toLowerCase(componentName)] = component;\n      }\n      if (typeof component.el === \"function\" && component.el()) {\n        var refNode = null;\n        if (this.children_[index + 1]) {\n          if (this.children_[index + 1].el_) {\n            refNode = this.children_[index + 1].el_;\n          } else if (isEl(this.children_[index + 1])) {\n            refNode = this.children_[index + 1];\n          }\n        }\n        this.contentEl().insertBefore(component.el(), refNode);\n      }\n      return component;\n    };\n    _proto.removeChild = function removeChild(component) {\n      if (typeof component === \"string\") {\n        component = this.getChild(component);\n      }\n      if (!component || !this.children_) {\n        return;\n      }\n      var childFound = false;\n      for (var i2 = this.children_.length - 1; i2 >= 0; i2--) {\n        if (this.children_[i2] === component) {\n          childFound = true;\n          this.children_.splice(i2, 1);\n          break;\n        }\n      }\n      if (!childFound) {\n        return;\n      }\n      component.parentComponent_ = null;\n      this.childIndex_[component.id()] = null;\n      this.childNameIndex_[toTitleCase2(component.name())] = null;\n      this.childNameIndex_[toLowerCase(component.name())] = null;\n      var compEl = component.el();\n      if (compEl && compEl.parentNode === this.contentEl()) {\n        this.contentEl().removeChild(component.el());\n      }\n    };\n    _proto.initChildren = function initChildren() {\n      var _this2 = this;\n      var children = this.options_.children;\n      if (children) {\n        var parentOptions = this.options_;\n        var handleAdd = function handleAdd2(child) {\n          var name = child.name;\n          var opts = child.opts;\n          if (parentOptions[name] !== void 0) {\n            opts = parentOptions[name];\n          }\n          if (opts === false) {\n            return;\n          }\n          if (opts === true) {\n            opts = {};\n          }\n          opts.playerOptions = _this2.options_.playerOptions;\n          var newChild = _this2.addChild(name, opts);\n          if (newChild) {\n            _this2[name] = newChild;\n          }\n        };\n        var workingChildren;\n        var Tech2 = Component3.getComponent(\"Tech\");\n        if (Array.isArray(children)) {\n          workingChildren = children;\n        } else {\n          workingChildren = Object.keys(children);\n        }\n        workingChildren.concat(Object.keys(this.options_).filter(function(child) {\n          return !workingChildren.some(function(wchild) {\n            if (typeof wchild === \"string\") {\n              return child === wchild;\n            }\n            return child === wchild.name;\n          });\n        })).map(function(child) {\n          var name;\n          var opts;\n          if (typeof child === \"string\") {\n            name = child;\n            opts = children[name] || _this2.options_[name] || {};\n          } else {\n            name = child.name;\n            opts = child;\n          }\n          return {\n            name,\n            opts\n          };\n        }).filter(function(child) {\n          var c = Component3.getComponent(child.opts.componentClass || toTitleCase2(child.name));\n          return c && !Tech2.isTech(c);\n        }).forEach(handleAdd);\n      }\n    };\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"\";\n    };\n    _proto.ready = function ready(fn, sync) {\n      if (sync === void 0) {\n        sync = false;\n      }\n      if (!fn) {\n        return;\n      }\n      if (!this.isReady_) {\n        this.readyQueue_ = this.readyQueue_ || [];\n        this.readyQueue_.push(fn);\n        return;\n      }\n      if (sync) {\n        fn.call(this);\n      } else {\n        this.setTimeout(fn, 1);\n      }\n    };\n    _proto.triggerReady = function triggerReady() {\n      this.isReady_ = true;\n      this.setTimeout(function() {\n        var readyQueue = this.readyQueue_;\n        this.readyQueue_ = [];\n        if (readyQueue && readyQueue.length > 0) {\n          readyQueue.forEach(function(fn) {\n            fn.call(this);\n          }, this);\n        }\n        this.trigger(\"ready\");\n      }, 1);\n    };\n    _proto.$ = function $$1(selector, context) {\n      return $(selector, context || this.contentEl());\n    };\n    _proto.$$ = function $$$1(selector, context) {\n      return $$(selector, context || this.contentEl());\n    };\n    _proto.hasClass = function hasClass$1(classToCheck) {\n      return hasClass(this.el_, classToCheck);\n    };\n    _proto.addClass = function addClass$1(classToAdd) {\n      addClass(this.el_, classToAdd);\n    };\n    _proto.removeClass = function removeClass$1(classToRemove) {\n      removeClass(this.el_, classToRemove);\n    };\n    _proto.toggleClass = function toggleClass$1(classToToggle, predicate) {\n      toggleClass(this.el_, classToToggle, predicate);\n    };\n    _proto.show = function show() {\n      this.removeClass(\"vjs-hidden\");\n    };\n    _proto.hide = function hide() {\n      this.addClass(\"vjs-hidden\");\n    };\n    _proto.lockShowing = function lockShowing() {\n      this.addClass(\"vjs-lock-showing\");\n    };\n    _proto.unlockShowing = function unlockShowing() {\n      this.removeClass(\"vjs-lock-showing\");\n    };\n    _proto.getAttribute = function getAttribute$1(attribute) {\n      return getAttribute(this.el_, attribute);\n    };\n    _proto.setAttribute = function setAttribute$1(attribute, value) {\n      setAttribute(this.el_, attribute, value);\n    };\n    _proto.removeAttribute = function removeAttribute$1(attribute) {\n      removeAttribute(this.el_, attribute);\n    };\n    _proto.width = function width(num, skipListeners) {\n      return this.dimension(\"width\", num, skipListeners);\n    };\n    _proto.height = function height(num, skipListeners) {\n      return this.dimension(\"height\", num, skipListeners);\n    };\n    _proto.dimensions = function dimensions(width, height) {\n      this.width(width, true);\n      this.height(height);\n    };\n    _proto.dimension = function dimension(widthOrHeight, num, skipListeners) {\n      if (num !== void 0) {\n        if (num === null || num !== num) {\n          num = 0;\n        }\n        if ((\"\" + num).indexOf(\"%\") !== -1 || (\"\" + num).indexOf(\"px\") !== -1) {\n          this.el_.style[widthOrHeight] = num;\n        } else if (num === \"auto\") {\n          this.el_.style[widthOrHeight] = \"\";\n        } else {\n          this.el_.style[widthOrHeight] = num + \"px\";\n        }\n        if (!skipListeners) {\n          this.trigger(\"componentresize\");\n        }\n        return;\n      }\n      if (!this.el_) {\n        return 0;\n      }\n      var val = this.el_.style[widthOrHeight];\n      var pxIndex = val.indexOf(\"px\");\n      if (pxIndex !== -1) {\n        return parseInt(val.slice(0, pxIndex), 10);\n      }\n      return parseInt(this.el_[\"offset\" + toTitleCase2(widthOrHeight)], 10);\n    };\n    _proto.currentDimension = function currentDimension(widthOrHeight) {\n      var computedWidthOrHeight = 0;\n      if (widthOrHeight !== \"width\" && widthOrHeight !== \"height\") {\n        throw new Error(\"currentDimension only accepts width or height value\");\n      }\n      computedWidthOrHeight = computedStyle(this.el_, widthOrHeight);\n      computedWidthOrHeight = parseFloat(computedWidthOrHeight);\n      if (computedWidthOrHeight === 0 || isNaN(computedWidthOrHeight)) {\n        var rule = \"offset\" + toTitleCase2(widthOrHeight);\n        computedWidthOrHeight = this.el_[rule];\n      }\n      return computedWidthOrHeight;\n    };\n    _proto.currentDimensions = function currentDimensions() {\n      return {\n        width: this.currentDimension(\"width\"),\n        height: this.currentDimension(\"height\")\n      };\n    };\n    _proto.currentWidth = function currentWidth() {\n      return this.currentDimension(\"width\");\n    };\n    _proto.currentHeight = function currentHeight() {\n      return this.currentDimension(\"height\");\n    };\n    _proto.focus = function focus() {\n      this.el_.focus();\n    };\n    _proto.blur = function blur() {\n      this.el_.blur();\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      if (this.player_) {\n        if (!keycode__default[\"default\"].isEventKey(event2, \"Tab\")) {\n          event2.stopPropagation();\n        }\n        this.player_.handleKeyDown(event2);\n      }\n    };\n    _proto.handleKeyPress = function handleKeyPress(event2) {\n      this.handleKeyDown(event2);\n    };\n    _proto.emitTapEvents = function emitTapEvents() {\n      var touchStart = 0;\n      var firstTouch = null;\n      var tapMovementThreshold = 10;\n      var touchTimeThreshold = 200;\n      var couldBeTap;\n      this.on(\"touchstart\", function(event2) {\n        if (event2.touches.length === 1) {\n          firstTouch = {\n            pageX: event2.touches[0].pageX,\n            pageY: event2.touches[0].pageY\n          };\n          touchStart = window__default[\"default\"].performance.now();\n          couldBeTap = true;\n        }\n      });\n      this.on(\"touchmove\", function(event2) {\n        if (event2.touches.length > 1) {\n          couldBeTap = false;\n        } else if (firstTouch) {\n          var xdiff = event2.touches[0].pageX - firstTouch.pageX;\n          var ydiff = event2.touches[0].pageY - firstTouch.pageY;\n          var touchDistance = Math.sqrt(xdiff * xdiff + ydiff * ydiff);\n          if (touchDistance > tapMovementThreshold) {\n            couldBeTap = false;\n          }\n        }\n      });\n      var noTap = function noTap2() {\n        couldBeTap = false;\n      };\n      this.on(\"touchleave\", noTap);\n      this.on(\"touchcancel\", noTap);\n      this.on(\"touchend\", function(event2) {\n        firstTouch = null;\n        if (couldBeTap === true) {\n          var touchTime = window__default[\"default\"].performance.now() - touchStart;\n          if (touchTime < touchTimeThreshold) {\n            event2.preventDefault();\n            this.trigger(\"tap\");\n          }\n        }\n      });\n    };\n    _proto.enableTouchActivity = function enableTouchActivity() {\n      if (!this.player() || !this.player().reportUserActivity) {\n        return;\n      }\n      var report = bind(this.player(), this.player().reportUserActivity);\n      var touchHolding;\n      this.on(\"touchstart\", function() {\n        report();\n        this.clearInterval(touchHolding);\n        touchHolding = this.setInterval(report, 250);\n      });\n      var touchEnd = function touchEnd2(event2) {\n        report();\n        this.clearInterval(touchHolding);\n      };\n      this.on(\"touchmove\", report);\n      this.on(\"touchend\", touchEnd);\n      this.on(\"touchcancel\", touchEnd);\n    };\n    _proto.setTimeout = function setTimeout2(fn, timeout) {\n      var _this3 = this;\n      var timeoutId;\n      fn = bind(this, fn);\n      this.clearTimersOnDispose_();\n      timeoutId = window__default[\"default\"].setTimeout(function() {\n        if (_this3.setTimeoutIds_.has(timeoutId)) {\n          _this3.setTimeoutIds_[\"delete\"](timeoutId);\n        }\n        fn();\n      }, timeout);\n      this.setTimeoutIds_.add(timeoutId);\n      return timeoutId;\n    };\n    _proto.clearTimeout = function clearTimeout2(timeoutId) {\n      if (this.setTimeoutIds_.has(timeoutId)) {\n        this.setTimeoutIds_[\"delete\"](timeoutId);\n        window__default[\"default\"].clearTimeout(timeoutId);\n      }\n      return timeoutId;\n    };\n    _proto.setInterval = function setInterval2(fn, interval) {\n      fn = bind(this, fn);\n      this.clearTimersOnDispose_();\n      var intervalId = window__default[\"default\"].setInterval(fn, interval);\n      this.setIntervalIds_.add(intervalId);\n      return intervalId;\n    };\n    _proto.clearInterval = function clearInterval2(intervalId) {\n      if (this.setIntervalIds_.has(intervalId)) {\n        this.setIntervalIds_[\"delete\"](intervalId);\n        window__default[\"default\"].clearInterval(intervalId);\n      }\n      return intervalId;\n    };\n    _proto.requestAnimationFrame = function requestAnimationFrame2(fn) {\n      var _this4 = this;\n      if (!this.supportsRaf_) {\n        return this.setTimeout(fn, 1e3 / 60);\n      }\n      this.clearTimersOnDispose_();\n      var id;\n      fn = bind(this, fn);\n      id = window__default[\"default\"].requestAnimationFrame(function() {\n        if (_this4.rafIds_.has(id)) {\n          _this4.rafIds_[\"delete\"](id);\n        }\n        fn();\n      });\n      this.rafIds_.add(id);\n      return id;\n    };\n    _proto.requestNamedAnimationFrame = function requestNamedAnimationFrame(name, fn) {\n      var _this5 = this;\n      if (this.namedRafs_.has(name)) {\n        return;\n      }\n      this.clearTimersOnDispose_();\n      fn = bind(this, fn);\n      var id = this.requestAnimationFrame(function() {\n        fn();\n        if (_this5.namedRafs_.has(name)) {\n          _this5.namedRafs_[\"delete\"](name);\n        }\n      });\n      this.namedRafs_.set(name, id);\n      return name;\n    };\n    _proto.cancelNamedAnimationFrame = function cancelNamedAnimationFrame(name) {\n      if (!this.namedRafs_.has(name)) {\n        return;\n      }\n      this.cancelAnimationFrame(this.namedRafs_.get(name));\n      this.namedRafs_[\"delete\"](name);\n    };\n    _proto.cancelAnimationFrame = function cancelAnimationFrame(id) {\n      if (!this.supportsRaf_) {\n        return this.clearTimeout(id);\n      }\n      if (this.rafIds_.has(id)) {\n        this.rafIds_[\"delete\"](id);\n        window__default[\"default\"].cancelAnimationFrame(id);\n      }\n      return id;\n    };\n    _proto.clearTimersOnDispose_ = function clearTimersOnDispose_() {\n      var _this6 = this;\n      if (this.clearingTimersOnDispose_) {\n        return;\n      }\n      this.clearingTimersOnDispose_ = true;\n      this.one(\"dispose\", function() {\n        [[\"namedRafs_\", \"cancelNamedAnimationFrame\"], [\"rafIds_\", \"cancelAnimationFrame\"], [\"setTimeoutIds_\", \"clearTimeout\"], [\"setIntervalIds_\", \"clearInterval\"]].forEach(function(_ref) {\n          var idName = _ref[0], cancelName = _ref[1];\n          _this6[idName].forEach(function(val, key) {\n            return _this6[cancelName](key);\n          });\n        });\n        _this6.clearingTimersOnDispose_ = false;\n      });\n    };\n    Component3.registerComponent = function registerComponent(name, ComponentToRegister) {\n      if (typeof name !== \"string\" || !name) {\n        throw new Error('Illegal component name, \"' + name + '\"; must be a non-empty string.');\n      }\n      var Tech2 = Component3.getComponent(\"Tech\");\n      var isTech = Tech2 && Tech2.isTech(ComponentToRegister);\n      var isComp = Component3 === ComponentToRegister || Component3.prototype.isPrototypeOf(ComponentToRegister.prototype);\n      if (isTech || !isComp) {\n        var reason;\n        if (isTech) {\n          reason = \"techs must be registered using Tech.registerTech()\";\n        } else {\n          reason = \"must be a Component subclass\";\n        }\n        throw new Error('Illegal component, \"' + name + '\"; ' + reason + \".\");\n      }\n      name = toTitleCase2(name);\n      if (!Component3.components_) {\n        Component3.components_ = {};\n      }\n      var Player2 = Component3.getComponent(\"Player\");\n      if (name === \"Player\" && Player2 && Player2.players) {\n        var players = Player2.players;\n        var playerNames = Object.keys(players);\n        if (players && playerNames.length > 0 && playerNames.map(function(pname) {\n          return players[pname];\n        }).every(Boolean)) {\n          throw new Error(\"Can not register Player component after player has been created.\");\n        }\n      }\n      Component3.components_[name] = ComponentToRegister;\n      Component3.components_[toLowerCase(name)] = ComponentToRegister;\n      return ComponentToRegister;\n    };\n    Component3.getComponent = function getComponent(name) {\n      if (!name || !Component3.components_) {\n        return;\n      }\n      return Component3.components_[name];\n    };\n    return Component3;\n  }();\n  Component2.prototype.supportsRaf_ = typeof window__default[\"default\"].requestAnimationFrame === \"function\" && typeof window__default[\"default\"].cancelAnimationFrame === \"function\";\n  Component2.registerComponent(\"Component\", Component2);\n  function rangeCheck(fnName, index, maxIndex) {\n    if (typeof index !== \"number\" || index < 0 || index > maxIndex) {\n      throw new Error(\"Failed to execute '\" + fnName + \"' on 'TimeRanges': The index provided (\" + index + \") is non-numeric or out of bounds (0-\" + maxIndex + \").\");\n    }\n  }\n  function getRange(fnName, valueIndex, ranges, rangeIndex) {\n    rangeCheck(fnName, rangeIndex, ranges.length - 1);\n    return ranges[rangeIndex][valueIndex];\n  }\n  function createTimeRangesObj(ranges) {\n    var timeRangesObj;\n    if (ranges === void 0 || ranges.length === 0) {\n      timeRangesObj = {\n        length: 0,\n        start: function start() {\n          throw new Error(\"This TimeRanges object is empty\");\n        },\n        end: function end() {\n          throw new Error(\"This TimeRanges object is empty\");\n        }\n      };\n    } else {\n      timeRangesObj = {\n        length: ranges.length,\n        start: getRange.bind(null, \"start\", 0, ranges),\n        end: getRange.bind(null, \"end\", 1, ranges)\n      };\n    }\n    if (window__default[\"default\"].Symbol && window__default[\"default\"].Symbol.iterator) {\n      timeRangesObj[window__default[\"default\"].Symbol.iterator] = function() {\n        return (ranges || []).values();\n      };\n    }\n    return timeRangesObj;\n  }\n  function createTimeRanges(start, end) {\n    if (Array.isArray(start)) {\n      return createTimeRangesObj(start);\n    } else if (start === void 0 || end === void 0) {\n      return createTimeRangesObj();\n    }\n    return createTimeRangesObj([[start, end]]);\n  }\n  function bufferedPercent(buffered, duration) {\n    var bufferedDuration = 0;\n    var start;\n    var end;\n    if (!duration) {\n      return 0;\n    }\n    if (!buffered || !buffered.length) {\n      buffered = createTimeRanges(0, 0);\n    }\n    for (var i2 = 0; i2 < buffered.length; i2++) {\n      start = buffered.start(i2);\n      end = buffered.end(i2);\n      if (end > duration) {\n        end = duration;\n      }\n      bufferedDuration += end - start;\n    }\n    return bufferedDuration / duration;\n  }\n  function MediaError2(value) {\n    if (value instanceof MediaError2) {\n      return value;\n    }\n    if (typeof value === \"number\") {\n      this.code = value;\n    } else if (typeof value === \"string\") {\n      this.message = value;\n    } else if (isObject2(value)) {\n      if (typeof value.code === \"number\") {\n        this.code = value.code;\n      }\n      assign(this, value);\n    }\n    if (!this.message) {\n      this.message = MediaError2.defaultMessages[this.code] || \"\";\n    }\n  }\n  MediaError2.prototype.code = 0;\n  MediaError2.prototype.message = \"\";\n  MediaError2.prototype.status = null;\n  MediaError2.errorTypes = [\"MEDIA_ERR_CUSTOM\", \"MEDIA_ERR_ABORTED\", \"MEDIA_ERR_NETWORK\", \"MEDIA_ERR_DECODE\", \"MEDIA_ERR_SRC_NOT_SUPPORTED\", \"MEDIA_ERR_ENCRYPTED\"];\n  MediaError2.defaultMessages = {\n    1: \"You aborted the media playback\",\n    2: \"A network error caused the media download to fail part-way.\",\n    3: \"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.\",\n    4: \"The media could not be loaded, either because the server or network failed or because the format is not supported.\",\n    5: \"The media is encrypted and we do not have the keys to decrypt it.\"\n  };\n  for (var errNum = 0; errNum < MediaError2.errorTypes.length; errNum++) {\n    MediaError2[MediaError2.errorTypes[errNum]] = errNum;\n    MediaError2.prototype[MediaError2.errorTypes[errNum]] = errNum;\n  }\n  function isPromise2(value) {\n    return value !== void 0 && value !== null && typeof value.then === \"function\";\n  }\n  function silencePromise(value) {\n    if (isPromise2(value)) {\n      value.then(null, function(e) {\n      });\n    }\n  }\n  var trackToJson_ = function trackToJson_2(track) {\n    var ret = [\"kind\", \"label\", \"language\", \"id\", \"inBandMetadataTrackDispatchType\", \"mode\", \"src\"].reduce(function(acc, prop, i2) {\n      if (track[prop]) {\n        acc[prop] = track[prop];\n      }\n      return acc;\n    }, {\n      cues: track.cues && Array.prototype.map.call(track.cues, function(cue) {\n        return {\n          startTime: cue.startTime,\n          endTime: cue.endTime,\n          text: cue.text,\n          id: cue.id\n        };\n      })\n    });\n    return ret;\n  };\n  var textTracksToJson = function textTracksToJson2(tech) {\n    var trackEls = tech.$$(\"track\");\n    var trackObjs = Array.prototype.map.call(trackEls, function(t) {\n      return t.track;\n    });\n    var tracks = Array.prototype.map.call(trackEls, function(trackEl) {\n      var json = trackToJson_(trackEl.track);\n      if (trackEl.src) {\n        json.src = trackEl.src;\n      }\n      return json;\n    });\n    return tracks.concat(Array.prototype.filter.call(tech.textTracks(), function(track) {\n      return trackObjs.indexOf(track) === -1;\n    }).map(trackToJson_));\n  };\n  var jsonToTextTracks = function jsonToTextTracks2(json, tech) {\n    json.forEach(function(track) {\n      var addedTrack = tech.addRemoteTextTrack(track).track;\n      if (!track.src && track.cues) {\n        track.cues.forEach(function(cue) {\n          return addedTrack.addCue(cue);\n        });\n      }\n    });\n    return tech.textTracks();\n  };\n  var textTrackConverter = {\n    textTracksToJson,\n    jsonToTextTracks,\n    trackToJson_\n  };\n  var MODAL_CLASS_NAME = \"vjs-modal-dialog\";\n  var ModalDialog = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](ModalDialog2, _Component);\n    function ModalDialog2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.handleKeyDown_ = function(e) {\n        return _this.handleKeyDown(e);\n      };\n      _this.close_ = function(e) {\n        return _this.close(e);\n      };\n      _this.opened_ = _this.hasBeenOpened_ = _this.hasBeenFilled_ = false;\n      _this.closeable(!_this.options_.uncloseable);\n      _this.content(_this.options_.content);\n      _this.contentEl_ = createEl(\"div\", {\n        className: MODAL_CLASS_NAME + \"-content\"\n      }, {\n        role: \"document\"\n      });\n      _this.descEl_ = createEl(\"p\", {\n        className: MODAL_CLASS_NAME + \"-description vjs-control-text\",\n        id: _this.el().getAttribute(\"aria-describedby\")\n      });\n      textContent(_this.descEl_, _this.description());\n      _this.el_.appendChild(_this.descEl_);\n      _this.el_.appendChild(_this.contentEl_);\n      return _this;\n    }\n    var _proto = ModalDialog2.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: this.buildCSSClass(),\n        tabIndex: -1\n      }, {\n        \"aria-describedby\": this.id() + \"_description\",\n        \"aria-hidden\": \"true\",\n        \"aria-label\": this.label(),\n        \"role\": \"dialog\"\n      });\n    };\n    _proto.dispose = function dispose() {\n      this.contentEl_ = null;\n      this.descEl_ = null;\n      this.previouslyActiveEl_ = null;\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.buildCSSClass = function buildCSSClass() {\n      return MODAL_CLASS_NAME + \" vjs-hidden \" + _Component.prototype.buildCSSClass.call(this);\n    };\n    _proto.label = function label() {\n      return this.localize(this.options_.label || \"Modal Window\");\n    };\n    _proto.description = function description() {\n      var desc = this.options_.description || this.localize(\"This is a modal window.\");\n      if (this.closeable()) {\n        desc += \" \" + this.localize(\"This modal can be closed by pressing the Escape key or activating the close button.\");\n      }\n      return desc;\n    };\n    _proto.open = function open() {\n      if (!this.opened_) {\n        var player = this.player();\n        this.trigger(\"beforemodalopen\");\n        this.opened_ = true;\n        if (this.options_.fillAlways || !this.hasBeenOpened_ && !this.hasBeenFilled_) {\n          this.fill();\n        }\n        this.wasPlaying_ = !player.paused();\n        if (this.options_.pauseOnOpen && this.wasPlaying_) {\n          player.pause();\n        }\n        this.on(\"keydown\", this.handleKeyDown_);\n        this.hadControls_ = player.controls();\n        player.controls(false);\n        this.show();\n        this.conditionalFocus_();\n        this.el().setAttribute(\"aria-hidden\", \"false\");\n        this.trigger(\"modalopen\");\n        this.hasBeenOpened_ = true;\n      }\n    };\n    _proto.opened = function opened(value) {\n      if (typeof value === \"boolean\") {\n        this[value ? \"open\" : \"close\"]();\n      }\n      return this.opened_;\n    };\n    _proto.close = function close() {\n      if (!this.opened_) {\n        return;\n      }\n      var player = this.player();\n      this.trigger(\"beforemodalclose\");\n      this.opened_ = false;\n      if (this.wasPlaying_ && this.options_.pauseOnOpen) {\n        player.play();\n      }\n      this.off(\"keydown\", this.handleKeyDown_);\n      if (this.hadControls_) {\n        player.controls(true);\n      }\n      this.hide();\n      this.el().setAttribute(\"aria-hidden\", \"true\");\n      this.trigger(\"modalclose\");\n      this.conditionalBlur_();\n      if (this.options_.temporary) {\n        this.dispose();\n      }\n    };\n    _proto.closeable = function closeable(value) {\n      if (typeof value === \"boolean\") {\n        var closeable2 = this.closeable_ = !!value;\n        var close = this.getChild(\"closeButton\");\n        if (closeable2 && !close) {\n          var temp = this.contentEl_;\n          this.contentEl_ = this.el_;\n          close = this.addChild(\"closeButton\", {\n            controlText: \"Close Modal Dialog\"\n          });\n          this.contentEl_ = temp;\n          this.on(close, \"close\", this.close_);\n        }\n        if (!closeable2 && close) {\n          this.off(close, \"close\", this.close_);\n          this.removeChild(close);\n          close.dispose();\n        }\n      }\n      return this.closeable_;\n    };\n    _proto.fill = function fill() {\n      this.fillWith(this.content());\n    };\n    _proto.fillWith = function fillWith(content) {\n      var contentEl = this.contentEl();\n      var parentEl = contentEl.parentNode;\n      var nextSiblingEl = contentEl.nextSibling;\n      this.trigger(\"beforemodalfill\");\n      this.hasBeenFilled_ = true;\n      parentEl.removeChild(contentEl);\n      this.empty();\n      insertContent(contentEl, content);\n      this.trigger(\"modalfill\");\n      if (nextSiblingEl) {\n        parentEl.insertBefore(contentEl, nextSiblingEl);\n      } else {\n        parentEl.appendChild(contentEl);\n      }\n      var closeButton = this.getChild(\"closeButton\");\n      if (closeButton) {\n        parentEl.appendChild(closeButton.el_);\n      }\n    };\n    _proto.empty = function empty() {\n      this.trigger(\"beforemodalempty\");\n      emptyEl(this.contentEl());\n      this.trigger(\"modalempty\");\n    };\n    _proto.content = function content(value) {\n      if (typeof value !== \"undefined\") {\n        this.content_ = value;\n      }\n      return this.content_;\n    };\n    _proto.conditionalFocus_ = function conditionalFocus_() {\n      var activeEl = document__default[\"default\"].activeElement;\n      var playerEl = this.player_.el_;\n      this.previouslyActiveEl_ = null;\n      if (playerEl.contains(activeEl) || playerEl === activeEl) {\n        this.previouslyActiveEl_ = activeEl;\n        this.focus();\n      }\n    };\n    _proto.conditionalBlur_ = function conditionalBlur_() {\n      if (this.previouslyActiveEl_) {\n        this.previouslyActiveEl_.focus();\n        this.previouslyActiveEl_ = null;\n      }\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      event2.stopPropagation();\n      if (keycode__default[\"default\"].isEventKey(event2, \"Escape\") && this.closeable()) {\n        event2.preventDefault();\n        this.close();\n        return;\n      }\n      if (!keycode__default[\"default\"].isEventKey(event2, \"Tab\")) {\n        return;\n      }\n      var focusableEls = this.focusableEls_();\n      var activeEl = this.el_.querySelector(\":focus\");\n      var focusIndex;\n      for (var i2 = 0; i2 < focusableEls.length; i2++) {\n        if (activeEl === focusableEls[i2]) {\n          focusIndex = i2;\n          break;\n        }\n      }\n      if (document__default[\"default\"].activeElement === this.el_) {\n        focusIndex = 0;\n      }\n      if (event2.shiftKey && focusIndex === 0) {\n        focusableEls[focusableEls.length - 1].focus();\n        event2.preventDefault();\n      } else if (!event2.shiftKey && focusIndex === focusableEls.length - 1) {\n        focusableEls[0].focus();\n        event2.preventDefault();\n      }\n    };\n    _proto.focusableEls_ = function focusableEls_() {\n      var allChildren = this.el_.querySelectorAll(\"*\");\n      return Array.prototype.filter.call(allChildren, function(child) {\n        return (child instanceof window__default[\"default\"].HTMLAnchorElement || child instanceof window__default[\"default\"].HTMLAreaElement) && child.hasAttribute(\"href\") || (child instanceof window__default[\"default\"].HTMLInputElement || child instanceof window__default[\"default\"].HTMLSelectElement || child instanceof window__default[\"default\"].HTMLTextAreaElement || child instanceof window__default[\"default\"].HTMLButtonElement) && !child.hasAttribute(\"disabled\") || child instanceof window__default[\"default\"].HTMLIFrameElement || child instanceof window__default[\"default\"].HTMLObjectElement || child instanceof window__default[\"default\"].HTMLEmbedElement || child.hasAttribute(\"tabindex\") && child.getAttribute(\"tabindex\") !== -1 || child.hasAttribute(\"contenteditable\");\n      });\n    };\n    return ModalDialog2;\n  }(Component2);\n  ModalDialog.prototype.options_ = {\n    pauseOnOpen: true,\n    temporary: true\n  };\n  Component2.registerComponent(\"ModalDialog\", ModalDialog);\n  var TrackList = /* @__PURE__ */ function(_EventTarget) {\n    _inheritsLoose__default[\"default\"](TrackList2, _EventTarget);\n    function TrackList2(tracks) {\n      var _this;\n      if (tracks === void 0) {\n        tracks = [];\n      }\n      _this = _EventTarget.call(this) || this;\n      _this.tracks_ = [];\n      Object.defineProperty(_assertThisInitialized__default[\"default\"](_this), \"length\", {\n        get: function get2() {\n          return this.tracks_.length;\n        }\n      });\n      for (var i2 = 0; i2 < tracks.length; i2++) {\n        _this.addTrack(tracks[i2]);\n      }\n      return _this;\n    }\n    var _proto = TrackList2.prototype;\n    _proto.addTrack = function addTrack(track) {\n      var _this2 = this;\n      var index = this.tracks_.length;\n      if (!(\"\" + index in this)) {\n        Object.defineProperty(this, index, {\n          get: function get2() {\n            return this.tracks_[index];\n          }\n        });\n      }\n      if (this.tracks_.indexOf(track) === -1) {\n        this.tracks_.push(track);\n        this.trigger({\n          track,\n          type: \"addtrack\",\n          target: this\n        });\n      }\n      track.labelchange_ = function() {\n        _this2.trigger({\n          track,\n          type: \"labelchange\",\n          target: _this2\n        });\n      };\n      if (isEvented(track)) {\n        track.addEventListener(\"labelchange\", track.labelchange_);\n      }\n    };\n    _proto.removeTrack = function removeTrack(rtrack) {\n      var track;\n      for (var i2 = 0, l = this.length; i2 < l; i2++) {\n        if (this[i2] === rtrack) {\n          track = this[i2];\n          if (track.off) {\n            track.off();\n          }\n          this.tracks_.splice(i2, 1);\n          break;\n        }\n      }\n      if (!track) {\n        return;\n      }\n      this.trigger({\n        track,\n        type: \"removetrack\",\n        target: this\n      });\n    };\n    _proto.getTrackById = function getTrackById(id) {\n      var result = null;\n      for (var i2 = 0, l = this.length; i2 < l; i2++) {\n        var track = this[i2];\n        if (track.id === id) {\n          result = track;\n          break;\n        }\n      }\n      return result;\n    };\n    return TrackList2;\n  }(EventTarget2);\n  TrackList.prototype.allowedEvents_ = {\n    change: \"change\",\n    addtrack: \"addtrack\",\n    removetrack: \"removetrack\",\n    labelchange: \"labelchange\"\n  };\n  for (var event in TrackList.prototype.allowedEvents_) {\n    TrackList.prototype[\"on\" + event] = null;\n  }\n  var disableOthers$1 = function disableOthers2(list, track) {\n    for (var i2 = 0; i2 < list.length; i2++) {\n      if (!Object.keys(list[i2]).length || track.id === list[i2].id) {\n        continue;\n      }\n      list[i2].enabled = false;\n    }\n  };\n  var AudioTrackList = /* @__PURE__ */ function(_TrackList) {\n    _inheritsLoose__default[\"default\"](AudioTrackList2, _TrackList);\n    function AudioTrackList2(tracks) {\n      var _this;\n      if (tracks === void 0) {\n        tracks = [];\n      }\n      for (var i2 = tracks.length - 1; i2 >= 0; i2--) {\n        if (tracks[i2].enabled) {\n          disableOthers$1(tracks, tracks[i2]);\n          break;\n        }\n      }\n      _this = _TrackList.call(this, tracks) || this;\n      _this.changing_ = false;\n      return _this;\n    }\n    var _proto = AudioTrackList2.prototype;\n    _proto.addTrack = function addTrack(track) {\n      var _this2 = this;\n      if (track.enabled) {\n        disableOthers$1(this, track);\n      }\n      _TrackList.prototype.addTrack.call(this, track);\n      if (!track.addEventListener) {\n        return;\n      }\n      track.enabledChange_ = function() {\n        if (_this2.changing_) {\n          return;\n        }\n        _this2.changing_ = true;\n        disableOthers$1(_this2, track);\n        _this2.changing_ = false;\n        _this2.trigger(\"change\");\n      };\n      track.addEventListener(\"enabledchange\", track.enabledChange_);\n    };\n    _proto.removeTrack = function removeTrack(rtrack) {\n      _TrackList.prototype.removeTrack.call(this, rtrack);\n      if (rtrack.removeEventListener && rtrack.enabledChange_) {\n        rtrack.removeEventListener(\"enabledchange\", rtrack.enabledChange_);\n        rtrack.enabledChange_ = null;\n      }\n    };\n    return AudioTrackList2;\n  }(TrackList);\n  var disableOthers = function disableOthers2(list, track) {\n    for (var i2 = 0; i2 < list.length; i2++) {\n      if (!Object.keys(list[i2]).length || track.id === list[i2].id) {\n        continue;\n      }\n      list[i2].selected = false;\n    }\n  };\n  var VideoTrackList = /* @__PURE__ */ function(_TrackList) {\n    _inheritsLoose__default[\"default\"](VideoTrackList2, _TrackList);\n    function VideoTrackList2(tracks) {\n      var _this;\n      if (tracks === void 0) {\n        tracks = [];\n      }\n      for (var i2 = tracks.length - 1; i2 >= 0; i2--) {\n        if (tracks[i2].selected) {\n          disableOthers(tracks, tracks[i2]);\n          break;\n        }\n      }\n      _this = _TrackList.call(this, tracks) || this;\n      _this.changing_ = false;\n      Object.defineProperty(_assertThisInitialized__default[\"default\"](_this), \"selectedIndex\", {\n        get: function get2() {\n          for (var _i2 = 0; _i2 < this.length; _i2++) {\n            if (this[_i2].selected) {\n              return _i2;\n            }\n          }\n          return -1;\n        },\n        set: function set2() {\n        }\n      });\n      return _this;\n    }\n    var _proto = VideoTrackList2.prototype;\n    _proto.addTrack = function addTrack(track) {\n      var _this2 = this;\n      if (track.selected) {\n        disableOthers(this, track);\n      }\n      _TrackList.prototype.addTrack.call(this, track);\n      if (!track.addEventListener) {\n        return;\n      }\n      track.selectedChange_ = function() {\n        if (_this2.changing_) {\n          return;\n        }\n        _this2.changing_ = true;\n        disableOthers(_this2, track);\n        _this2.changing_ = false;\n        _this2.trigger(\"change\");\n      };\n      track.addEventListener(\"selectedchange\", track.selectedChange_);\n    };\n    _proto.removeTrack = function removeTrack(rtrack) {\n      _TrackList.prototype.removeTrack.call(this, rtrack);\n      if (rtrack.removeEventListener && rtrack.selectedChange_) {\n        rtrack.removeEventListener(\"selectedchange\", rtrack.selectedChange_);\n        rtrack.selectedChange_ = null;\n      }\n    };\n    return VideoTrackList2;\n  }(TrackList);\n  var TextTrackList = /* @__PURE__ */ function(_TrackList) {\n    _inheritsLoose__default[\"default\"](TextTrackList2, _TrackList);\n    function TextTrackList2() {\n      return _TrackList.apply(this, arguments) || this;\n    }\n    var _proto = TextTrackList2.prototype;\n    _proto.addTrack = function addTrack(track) {\n      var _this = this;\n      _TrackList.prototype.addTrack.call(this, track);\n      if (!this.queueChange_) {\n        this.queueChange_ = function() {\n          return _this.queueTrigger(\"change\");\n        };\n      }\n      if (!this.triggerSelectedlanguagechange) {\n        this.triggerSelectedlanguagechange_ = function() {\n          return _this.trigger(\"selectedlanguagechange\");\n        };\n      }\n      track.addEventListener(\"modechange\", this.queueChange_);\n      var nonLanguageTextTrackKind = [\"metadata\", \"chapters\"];\n      if (nonLanguageTextTrackKind.indexOf(track.kind) === -1) {\n        track.addEventListener(\"modechange\", this.triggerSelectedlanguagechange_);\n      }\n    };\n    _proto.removeTrack = function removeTrack(rtrack) {\n      _TrackList.prototype.removeTrack.call(this, rtrack);\n      if (rtrack.removeEventListener) {\n        if (this.queueChange_) {\n          rtrack.removeEventListener(\"modechange\", this.queueChange_);\n        }\n        if (this.selectedlanguagechange_) {\n          rtrack.removeEventListener(\"modechange\", this.triggerSelectedlanguagechange_);\n        }\n      }\n    };\n    return TextTrackList2;\n  }(TrackList);\n  var HtmlTrackElementList = /* @__PURE__ */ function() {\n    function HtmlTrackElementList2(trackElements) {\n      if (trackElements === void 0) {\n        trackElements = [];\n      }\n      this.trackElements_ = [];\n      Object.defineProperty(this, \"length\", {\n        get: function get2() {\n          return this.trackElements_.length;\n        }\n      });\n      for (var i2 = 0, length = trackElements.length; i2 < length; i2++) {\n        this.addTrackElement_(trackElements[i2]);\n      }\n    }\n    var _proto = HtmlTrackElementList2.prototype;\n    _proto.addTrackElement_ = function addTrackElement_(trackElement) {\n      var index = this.trackElements_.length;\n      if (!(\"\" + index in this)) {\n        Object.defineProperty(this, index, {\n          get: function get2() {\n            return this.trackElements_[index];\n          }\n        });\n      }\n      if (this.trackElements_.indexOf(trackElement) === -1) {\n        this.trackElements_.push(trackElement);\n      }\n    };\n    _proto.getTrackElementByTrack_ = function getTrackElementByTrack_(track) {\n      var trackElement_;\n      for (var i2 = 0, length = this.trackElements_.length; i2 < length; i2++) {\n        if (track === this.trackElements_[i2].track) {\n          trackElement_ = this.trackElements_[i2];\n          break;\n        }\n      }\n      return trackElement_;\n    };\n    _proto.removeTrackElement_ = function removeTrackElement_(trackElement) {\n      for (var i2 = 0, length = this.trackElements_.length; i2 < length; i2++) {\n        if (trackElement === this.trackElements_[i2]) {\n          if (this.trackElements_[i2].track && typeof this.trackElements_[i2].track.off === \"function\") {\n            this.trackElements_[i2].track.off();\n          }\n          if (typeof this.trackElements_[i2].off === \"function\") {\n            this.trackElements_[i2].off();\n          }\n          this.trackElements_.splice(i2, 1);\n          break;\n        }\n      }\n    };\n    return HtmlTrackElementList2;\n  }();\n  var TextTrackCueList = /* @__PURE__ */ function() {\n    function TextTrackCueList2(cues) {\n      TextTrackCueList2.prototype.setCues_.call(this, cues);\n      Object.defineProperty(this, \"length\", {\n        get: function get2() {\n          return this.length_;\n        }\n      });\n    }\n    var _proto = TextTrackCueList2.prototype;\n    _proto.setCues_ = function setCues_(cues) {\n      var oldLength = this.length || 0;\n      var i2 = 0;\n      var l = cues.length;\n      this.cues_ = cues;\n      this.length_ = cues.length;\n      var defineProp = function defineProp2(index) {\n        if (!(\"\" + index in this)) {\n          Object.defineProperty(this, \"\" + index, {\n            get: function get2() {\n              return this.cues_[index];\n            }\n          });\n        }\n      };\n      if (oldLength < l) {\n        i2 = oldLength;\n        for (; i2 < l; i2++) {\n          defineProp.call(this, i2);\n        }\n      }\n    };\n    _proto.getCueById = function getCueById(id) {\n      var result = null;\n      for (var i2 = 0, l = this.length; i2 < l; i2++) {\n        var cue = this[i2];\n        if (cue.id === id) {\n          result = cue;\n          break;\n        }\n      }\n      return result;\n    };\n    return TextTrackCueList2;\n  }();\n  var VideoTrackKind = {\n    alternative: \"alternative\",\n    captions: \"captions\",\n    main: \"main\",\n    sign: \"sign\",\n    subtitles: \"subtitles\",\n    commentary: \"commentary\"\n  };\n  var AudioTrackKind = {\n    \"alternative\": \"alternative\",\n    \"descriptions\": \"descriptions\",\n    \"main\": \"main\",\n    \"main-desc\": \"main-desc\",\n    \"translation\": \"translation\",\n    \"commentary\": \"commentary\"\n  };\n  var TextTrackKind = {\n    subtitles: \"subtitles\",\n    captions: \"captions\",\n    descriptions: \"descriptions\",\n    chapters: \"chapters\",\n    metadata: \"metadata\"\n  };\n  var TextTrackMode = {\n    disabled: \"disabled\",\n    hidden: \"hidden\",\n    showing: \"showing\"\n  };\n  var Track = /* @__PURE__ */ function(_EventTarget) {\n    _inheritsLoose__default[\"default\"](Track2, _EventTarget);\n    function Track2(options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      _this = _EventTarget.call(this) || this;\n      var trackProps = {\n        id: options.id || \"vjs_track_\" + newGUID(),\n        kind: options.kind || \"\",\n        language: options.language || \"\"\n      };\n      var label = options.label || \"\";\n      var _loop = function _loop2(key2) {\n        Object.defineProperty(_assertThisInitialized__default[\"default\"](_this), key2, {\n          get: function get2() {\n            return trackProps[key2];\n          },\n          set: function set2() {\n          }\n        });\n      };\n      for (var key in trackProps) {\n        _loop(key);\n      }\n      Object.defineProperty(_assertThisInitialized__default[\"default\"](_this), \"label\", {\n        get: function get2() {\n          return label;\n        },\n        set: function set2(newLabel) {\n          if (newLabel !== label) {\n            label = newLabel;\n            this.trigger(\"labelchange\");\n          }\n        }\n      });\n      return _this;\n    }\n    return Track2;\n  }(EventTarget2);\n  var parseUrl2 = function parseUrl3(url) {\n    var props = [\"protocol\", \"hostname\", \"port\", \"pathname\", \"search\", \"hash\", \"host\"];\n    var a = document__default[\"default\"].createElement(\"a\");\n    a.href = url;\n    var details = {};\n    for (var i2 = 0; i2 < props.length; i2++) {\n      details[props[i2]] = a[props[i2]];\n    }\n    if (details.protocol === \"http:\") {\n      details.host = details.host.replace(/:80$/, \"\");\n    }\n    if (details.protocol === \"https:\") {\n      details.host = details.host.replace(/:443$/, \"\");\n    }\n    if (!details.protocol) {\n      details.protocol = window__default[\"default\"].location.protocol;\n    }\n    if (!details.host) {\n      details.host = window__default[\"default\"].location.host;\n    }\n    return details;\n  };\n  var getAbsoluteURL = function getAbsoluteURL2(url) {\n    if (!url.match(/^https?:\\/\\//)) {\n      var a = document__default[\"default\"].createElement(\"a\");\n      a.href = url;\n      url = a.href;\n    }\n    return url;\n  };\n  var getFileExtension = function getFileExtension2(path) {\n    if (typeof path === \"string\") {\n      var splitPathRe = /^(\\/?)([\\s\\S]*?)((?:\\.{1,2}|[^\\/]+?)(\\.([^\\.\\/\\?]+)))(?:[\\/]*|[\\?].*)$/;\n      var pathParts = splitPathRe.exec(path);\n      if (pathParts) {\n        return pathParts.pop().toLowerCase();\n      }\n    }\n    return \"\";\n  };\n  var isCrossOrigin = function isCrossOrigin2(url, winLoc) {\n    if (winLoc === void 0) {\n      winLoc = window__default[\"default\"].location;\n    }\n    var urlInfo = parseUrl2(url);\n    var srcProtocol = urlInfo.protocol === \":\" ? winLoc.protocol : urlInfo.protocol;\n    var crossOrigin = srcProtocol + urlInfo.host !== winLoc.protocol + winLoc.host;\n    return crossOrigin;\n  };\n  var Url = /* @__PURE__ */ Object.freeze({\n    __proto__: null,\n    parseUrl: parseUrl2,\n    getAbsoluteURL,\n    getFileExtension,\n    isCrossOrigin\n  });\n  var parseCues = function parseCues2(srcContent, track) {\n    var parser = new window__default[\"default\"].WebVTT.Parser(window__default[\"default\"], window__default[\"default\"].vttjs, window__default[\"default\"].WebVTT.StringDecoder());\n    var errors = [];\n    parser.oncue = function(cue) {\n      track.addCue(cue);\n    };\n    parser.onparsingerror = function(error) {\n      errors.push(error);\n    };\n    parser.onflush = function() {\n      track.trigger({\n        type: \"loadeddata\",\n        target: track\n      });\n    };\n    parser.parse(srcContent);\n    if (errors.length > 0) {\n      if (window__default[\"default\"].console && window__default[\"default\"].console.groupCollapsed) {\n        window__default[\"default\"].console.groupCollapsed(\"Text Track parsing errors for \" + track.src);\n      }\n      errors.forEach(function(error) {\n        return log.error(error);\n      });\n      if (window__default[\"default\"].console && window__default[\"default\"].console.groupEnd) {\n        window__default[\"default\"].console.groupEnd();\n      }\n    }\n    parser.flush();\n  };\n  var loadTrack = function loadTrack2(src, track) {\n    var opts = {\n      uri: src\n    };\n    var crossOrigin = isCrossOrigin(src);\n    if (crossOrigin) {\n      opts.cors = crossOrigin;\n    }\n    var withCredentials = track.tech_.crossOrigin() === \"use-credentials\";\n    if (withCredentials) {\n      opts.withCredentials = withCredentials;\n    }\n    XHR__default[\"default\"](opts, bind(this, function(err, response, responseBody) {\n      if (err) {\n        return log.error(err, response);\n      }\n      track.loaded_ = true;\n      if (typeof window__default[\"default\"].WebVTT !== \"function\") {\n        if (track.tech_) {\n          track.tech_.any([\"vttjsloaded\", \"vttjserror\"], function(event2) {\n            if (event2.type === \"vttjserror\") {\n              log.error(\"vttjs failed to load, stopping trying to process \" + track.src);\n              return;\n            }\n            return parseCues(responseBody, track);\n          });\n        }\n      } else {\n        parseCues(responseBody, track);\n      }\n    }));\n  };\n  var TextTrack = /* @__PURE__ */ function(_Track) {\n    _inheritsLoose__default[\"default\"](TextTrack2, _Track);\n    function TextTrack2(options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      if (!options.tech) {\n        throw new Error(\"A tech was not provided.\");\n      }\n      var settings = mergeOptions(options, {\n        kind: TextTrackKind[options.kind] || \"subtitles\",\n        language: options.language || options.srclang || \"\"\n      });\n      var mode = TextTrackMode[settings.mode] || \"disabled\";\n      var default_ = settings[\"default\"];\n      if (settings.kind === \"metadata\" || settings.kind === \"chapters\") {\n        mode = \"hidden\";\n      }\n      _this = _Track.call(this, settings) || this;\n      _this.tech_ = settings.tech;\n      _this.cues_ = [];\n      _this.activeCues_ = [];\n      _this.preload_ = _this.tech_.preloadTextTracks !== false;\n      var cues = new TextTrackCueList(_this.cues_);\n      var activeCues = new TextTrackCueList(_this.activeCues_);\n      var changed = false;\n      _this.timeupdateHandler = bind(_assertThisInitialized__default[\"default\"](_this), function(event2) {\n        if (event2 === void 0) {\n          event2 = {};\n        }\n        if (this.tech_.isDisposed()) {\n          return;\n        }\n        if (!this.tech_.isReady_) {\n          if (event2.type !== \"timeupdate\") {\n            this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler);\n          }\n          return;\n        }\n        this.activeCues = this.activeCues;\n        if (changed) {\n          this.trigger(\"cuechange\");\n          changed = false;\n        }\n        if (event2.type !== \"timeupdate\") {\n          this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler);\n        }\n      });\n      var disposeHandler = function disposeHandler2() {\n        _this.stopTracking();\n      };\n      _this.tech_.one(\"dispose\", disposeHandler);\n      if (mode !== \"disabled\") {\n        _this.startTracking();\n      }\n      Object.defineProperties(_assertThisInitialized__default[\"default\"](_this), {\n        /**\n         * @memberof TextTrack\n         * @member {boolean} default\n         *         If this track was set to be on or off by default. Cannot be changed after\n         *         creation.\n         * @instance\n         *\n         * @readonly\n         */\n        \"default\": {\n          get: function get2() {\n            return default_;\n          },\n          set: function set2() {\n          }\n        },\n        /**\n         * @memberof TextTrack\n         * @member {string} mode\n         *         Set the mode of this TextTrack to a valid {@link TextTrack~Mode}. Will\n         *         not be set if setting to an invalid mode.\n         * @instance\n         *\n         * @fires TextTrack#modechange\n         */\n        mode: {\n          get: function get2() {\n            return mode;\n          },\n          set: function set2(newMode) {\n            if (!TextTrackMode[newMode]) {\n              return;\n            }\n            if (mode === newMode) {\n              return;\n            }\n            mode = newMode;\n            if (!this.preload_ && mode !== \"disabled\" && this.cues.length === 0) {\n              loadTrack(this.src, this);\n            }\n            this.stopTracking();\n            if (mode !== \"disabled\") {\n              this.startTracking();\n            }\n            this.trigger(\"modechange\");\n          }\n        },\n        /**\n         * @memberof TextTrack\n         * @member {TextTrackCueList} cues\n         *         The text track cue list for this TextTrack.\n         * @instance\n         */\n        cues: {\n          get: function get2() {\n            if (!this.loaded_) {\n              return null;\n            }\n            return cues;\n          },\n          set: function set2() {\n          }\n        },\n        /**\n         * @memberof TextTrack\n         * @member {TextTrackCueList} activeCues\n         *         The list text track cues that are currently active for this TextTrack.\n         * @instance\n         */\n        activeCues: {\n          get: function get2() {\n            if (!this.loaded_) {\n              return null;\n            }\n            if (this.cues.length === 0) {\n              return activeCues;\n            }\n            var ct = this.tech_.currentTime();\n            var active = [];\n            for (var i2 = 0, l = this.cues.length; i2 < l; i2++) {\n              var cue = this.cues[i2];\n              if (cue.startTime <= ct && cue.endTime >= ct) {\n                active.push(cue);\n              } else if (cue.startTime === cue.endTime && cue.startTime <= ct && cue.startTime + 0.5 >= ct) {\n                active.push(cue);\n              }\n            }\n            changed = false;\n            if (active.length !== this.activeCues_.length) {\n              changed = true;\n            } else {\n              for (var _i2 = 0; _i2 < active.length; _i2++) {\n                if (this.activeCues_.indexOf(active[_i2]) === -1) {\n                  changed = true;\n                }\n              }\n            }\n            this.activeCues_ = active;\n            activeCues.setCues_(this.activeCues_);\n            return activeCues;\n          },\n          // /!\\ Keep this setter empty (see the timeupdate handler above)\n          set: function set2() {\n          }\n        }\n      });\n      if (settings.src) {\n        _this.src = settings.src;\n        if (!_this.preload_) {\n          _this.loaded_ = true;\n        }\n        if (_this.preload_ || settings.kind !== \"subtitles\" && settings.kind !== \"captions\") {\n          loadTrack(_this.src, _assertThisInitialized__default[\"default\"](_this));\n        }\n      } else {\n        _this.loaded_ = true;\n      }\n      return _this;\n    }\n    var _proto = TextTrack2.prototype;\n    _proto.startTracking = function startTracking() {\n      this.rvf_ = this.tech_.requestVideoFrameCallback(this.timeupdateHandler);\n      this.tech_.on(\"timeupdate\", this.timeupdateHandler);\n    };\n    _proto.stopTracking = function stopTracking() {\n      if (this.rvf_) {\n        this.tech_.cancelVideoFrameCallback(this.rvf_);\n        this.rvf_ = void 0;\n      }\n      this.tech_.off(\"timeupdate\", this.timeupdateHandler);\n    };\n    _proto.addCue = function addCue(originalCue) {\n      var cue = originalCue;\n      if (!(\"getCueAsHTML\" in cue)) {\n        cue = new window__default[\"default\"].vttjs.VTTCue(originalCue.startTime, originalCue.endTime, originalCue.text);\n        for (var prop in originalCue) {\n          if (!(prop in cue)) {\n            cue[prop] = originalCue[prop];\n          }\n        }\n        cue.id = originalCue.id;\n        cue.originalCue_ = originalCue;\n      }\n      var tracks = this.tech_.textTracks();\n      for (var i2 = 0; i2 < tracks.length; i2++) {\n        if (tracks[i2] !== this) {\n          tracks[i2].removeCue(cue);\n        }\n      }\n      this.cues_.push(cue);\n      this.cues.setCues_(this.cues_);\n    };\n    _proto.removeCue = function removeCue(_removeCue) {\n      var i2 = this.cues_.length;\n      while (i2--) {\n        var cue = this.cues_[i2];\n        if (cue === _removeCue || cue.originalCue_ && cue.originalCue_ === _removeCue) {\n          this.cues_.splice(i2, 1);\n          this.cues.setCues_(this.cues_);\n          break;\n        }\n      }\n    };\n    return TextTrack2;\n  }(Track);\n  TextTrack.prototype.allowedEvents_ = {\n    cuechange: \"cuechange\"\n  };\n  var AudioTrack = /* @__PURE__ */ function(_Track) {\n    _inheritsLoose__default[\"default\"](AudioTrack2, _Track);\n    function AudioTrack2(options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      var settings = mergeOptions(options, {\n        kind: AudioTrackKind[options.kind] || \"\"\n      });\n      _this = _Track.call(this, settings) || this;\n      var enabled = false;\n      Object.defineProperty(_assertThisInitialized__default[\"default\"](_this), \"enabled\", {\n        get: function get2() {\n          return enabled;\n        },\n        set: function set2(newEnabled) {\n          if (typeof newEnabled !== \"boolean\" || newEnabled === enabled) {\n            return;\n          }\n          enabled = newEnabled;\n          this.trigger(\"enabledchange\");\n        }\n      });\n      if (settings.enabled) {\n        _this.enabled = settings.enabled;\n      }\n      _this.loaded_ = true;\n      return _this;\n    }\n    return AudioTrack2;\n  }(Track);\n  var VideoTrack = /* @__PURE__ */ function(_Track) {\n    _inheritsLoose__default[\"default\"](VideoTrack2, _Track);\n    function VideoTrack2(options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      var settings = mergeOptions(options, {\n        kind: VideoTrackKind[options.kind] || \"\"\n      });\n      _this = _Track.call(this, settings) || this;\n      var selected = false;\n      Object.defineProperty(_assertThisInitialized__default[\"default\"](_this), \"selected\", {\n        get: function get2() {\n          return selected;\n        },\n        set: function set2(newSelected) {\n          if (typeof newSelected !== \"boolean\" || newSelected === selected) {\n            return;\n          }\n          selected = newSelected;\n          this.trigger(\"selectedchange\");\n        }\n      });\n      if (settings.selected) {\n        _this.selected = settings.selected;\n      }\n      return _this;\n    }\n    return VideoTrack2;\n  }(Track);\n  var NONE = 0;\n  var LOADING = 1;\n  var LOADED = 2;\n  var ERROR = 3;\n  var HTMLTrackElement = /* @__PURE__ */ function(_EventTarget) {\n    _inheritsLoose__default[\"default\"](HTMLTrackElement2, _EventTarget);\n    function HTMLTrackElement2(options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      _this = _EventTarget.call(this) || this;\n      var readyState;\n      var track = new TextTrack(options);\n      _this.kind = track.kind;\n      _this.src = track.src;\n      _this.srclang = track.language;\n      _this.label = track.label;\n      _this[\"default\"] = track[\"default\"];\n      Object.defineProperties(_assertThisInitialized__default[\"default\"](_this), {\n        /**\n         * @memberof HTMLTrackElement\n         * @member {HTMLTrackElement~ReadyState} readyState\n         *         The current ready state of the track element.\n         * @instance\n         */\n        readyState: {\n          get: function get2() {\n            return readyState;\n          }\n        },\n        /**\n         * @memberof HTMLTrackElement\n         * @member {TextTrack} track\n         *         The underlying TextTrack object.\n         * @instance\n         *\n         */\n        track: {\n          get: function get2() {\n            return track;\n          }\n        }\n      });\n      readyState = NONE;\n      track.addEventListener(\"loadeddata\", function() {\n        readyState = LOADED;\n        _this.trigger({\n          type: \"load\",\n          target: _assertThisInitialized__default[\"default\"](_this)\n        });\n      });\n      return _this;\n    }\n    return HTMLTrackElement2;\n  }(EventTarget2);\n  HTMLTrackElement.prototype.allowedEvents_ = {\n    load: \"load\"\n  };\n  HTMLTrackElement.NONE = NONE;\n  HTMLTrackElement.LOADING = LOADING;\n  HTMLTrackElement.LOADED = LOADED;\n  HTMLTrackElement.ERROR = ERROR;\n  var NORMAL = {\n    audio: {\n      ListClass: AudioTrackList,\n      TrackClass: AudioTrack,\n      capitalName: \"Audio\"\n    },\n    video: {\n      ListClass: VideoTrackList,\n      TrackClass: VideoTrack,\n      capitalName: \"Video\"\n    },\n    text: {\n      ListClass: TextTrackList,\n      TrackClass: TextTrack,\n      capitalName: \"Text\"\n    }\n  };\n  Object.keys(NORMAL).forEach(function(type) {\n    NORMAL[type].getterName = type + \"Tracks\";\n    NORMAL[type].privateName = type + \"Tracks_\";\n  });\n  var REMOTE = {\n    remoteText: {\n      ListClass: TextTrackList,\n      TrackClass: TextTrack,\n      capitalName: \"RemoteText\",\n      getterName: \"remoteTextTracks\",\n      privateName: \"remoteTextTracks_\"\n    },\n    remoteTextEl: {\n      ListClass: HtmlTrackElementList,\n      TrackClass: HTMLTrackElement,\n      capitalName: \"RemoteTextTrackEls\",\n      getterName: \"remoteTextTrackEls\",\n      privateName: \"remoteTextTrackEls_\"\n    }\n  };\n  var ALL = _extends__default[\"default\"]({}, NORMAL, REMOTE);\n  REMOTE.names = Object.keys(REMOTE);\n  NORMAL.names = Object.keys(NORMAL);\n  ALL.names = [].concat(REMOTE.names).concat(NORMAL.names);\n  function createTrackHelper(self2, kind, label, language, options) {\n    if (options === void 0) {\n      options = {};\n    }\n    var tracks = self2.textTracks();\n    options.kind = kind;\n    if (label) {\n      options.label = label;\n    }\n    if (language) {\n      options.language = language;\n    }\n    options.tech = self2;\n    var track = new ALL.text.TrackClass(options);\n    tracks.addTrack(track);\n    return track;\n  }\n  var Tech = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](Tech2, _Component);\n    function Tech2(options, ready) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      if (ready === void 0) {\n        ready = function ready2() {\n        };\n      }\n      options.reportTouchActivity = false;\n      _this = _Component.call(this, null, options, ready) || this;\n      _this.onDurationChange_ = function(e) {\n        return _this.onDurationChange(e);\n      };\n      _this.trackProgress_ = function(e) {\n        return _this.trackProgress(e);\n      };\n      _this.trackCurrentTime_ = function(e) {\n        return _this.trackCurrentTime(e);\n      };\n      _this.stopTrackingCurrentTime_ = function(e) {\n        return _this.stopTrackingCurrentTime(e);\n      };\n      _this.disposeSourceHandler_ = function(e) {\n        return _this.disposeSourceHandler(e);\n      };\n      _this.queuedHanders_ = /* @__PURE__ */ new Set();\n      _this.hasStarted_ = false;\n      _this.on(\"playing\", function() {\n        this.hasStarted_ = true;\n      });\n      _this.on(\"loadstart\", function() {\n        this.hasStarted_ = false;\n      });\n      ALL.names.forEach(function(name) {\n        var props = ALL[name];\n        if (options && options[props.getterName]) {\n          _this[props.privateName] = options[props.getterName];\n        }\n      });\n      if (!_this.featuresProgressEvents) {\n        _this.manualProgressOn();\n      }\n      if (!_this.featuresTimeupdateEvents) {\n        _this.manualTimeUpdatesOn();\n      }\n      [\"Text\", \"Audio\", \"Video\"].forEach(function(track) {\n        if (options[\"native\" + track + \"Tracks\"] === false) {\n          _this[\"featuresNative\" + track + \"Tracks\"] = false;\n        }\n      });\n      if (options.nativeCaptions === false || options.nativeTextTracks === false) {\n        _this.featuresNativeTextTracks = false;\n      } else if (options.nativeCaptions === true || options.nativeTextTracks === true) {\n        _this.featuresNativeTextTracks = true;\n      }\n      if (!_this.featuresNativeTextTracks) {\n        _this.emulateTextTracks();\n      }\n      _this.preloadTextTracks = options.preloadTextTracks !== false;\n      _this.autoRemoteTextTracks_ = new ALL.text.ListClass();\n      _this.initTrackListeners();\n      if (!options.nativeControlsForTouch) {\n        _this.emitTapEvents();\n      }\n      if (_this.constructor) {\n        _this.name_ = _this.constructor.name || \"Unknown Tech\";\n      }\n      return _this;\n    }\n    var _proto = Tech2.prototype;\n    _proto.triggerSourceset = function triggerSourceset(src) {\n      var _this2 = this;\n      if (!this.isReady_) {\n        this.one(\"ready\", function() {\n          return _this2.setTimeout(function() {\n            return _this2.triggerSourceset(src);\n          }, 1);\n        });\n      }\n      this.trigger({\n        src,\n        type: \"sourceset\"\n      });\n    };\n    _proto.manualProgressOn = function manualProgressOn() {\n      this.on(\"durationchange\", this.onDurationChange_);\n      this.manualProgress = true;\n      this.one(\"ready\", this.trackProgress_);\n    };\n    _proto.manualProgressOff = function manualProgressOff() {\n      this.manualProgress = false;\n      this.stopTrackingProgress();\n      this.off(\"durationchange\", this.onDurationChange_);\n    };\n    _proto.trackProgress = function trackProgress(event2) {\n      this.stopTrackingProgress();\n      this.progressInterval = this.setInterval(bind(this, function() {\n        var numBufferedPercent = this.bufferedPercent();\n        if (this.bufferedPercent_ !== numBufferedPercent) {\n          this.trigger(\"progress\");\n        }\n        this.bufferedPercent_ = numBufferedPercent;\n        if (numBufferedPercent === 1) {\n          this.stopTrackingProgress();\n        }\n      }), 500);\n    };\n    _proto.onDurationChange = function onDurationChange(event2) {\n      this.duration_ = this.duration();\n    };\n    _proto.buffered = function buffered() {\n      return createTimeRanges(0, 0);\n    };\n    _proto.bufferedPercent = function bufferedPercent$1() {\n      return bufferedPercent(this.buffered(), this.duration_);\n    };\n    _proto.stopTrackingProgress = function stopTrackingProgress() {\n      this.clearInterval(this.progressInterval);\n    };\n    _proto.manualTimeUpdatesOn = function manualTimeUpdatesOn() {\n      this.manualTimeUpdates = true;\n      this.on(\"play\", this.trackCurrentTime_);\n      this.on(\"pause\", this.stopTrackingCurrentTime_);\n    };\n    _proto.manualTimeUpdatesOff = function manualTimeUpdatesOff() {\n      this.manualTimeUpdates = false;\n      this.stopTrackingCurrentTime();\n      this.off(\"play\", this.trackCurrentTime_);\n      this.off(\"pause\", this.stopTrackingCurrentTime_);\n    };\n    _proto.trackCurrentTime = function trackCurrentTime() {\n      if (this.currentTimeInterval) {\n        this.stopTrackingCurrentTime();\n      }\n      this.currentTimeInterval = this.setInterval(function() {\n        this.trigger({\n          type: \"timeupdate\",\n          target: this,\n          manuallyTriggered: true\n        });\n      }, 250);\n    };\n    _proto.stopTrackingCurrentTime = function stopTrackingCurrentTime() {\n      this.clearInterval(this.currentTimeInterval);\n      this.trigger({\n        type: \"timeupdate\",\n        target: this,\n        manuallyTriggered: true\n      });\n    };\n    _proto.dispose = function dispose() {\n      this.clearTracks(NORMAL.names);\n      if (this.manualProgress) {\n        this.manualProgressOff();\n      }\n      if (this.manualTimeUpdates) {\n        this.manualTimeUpdatesOff();\n      }\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.clearTracks = function clearTracks(types) {\n      var _this3 = this;\n      types = [].concat(types);\n      types.forEach(function(type) {\n        var list = _this3[type + \"Tracks\"]() || [];\n        var i2 = list.length;\n        while (i2--) {\n          var track = list[i2];\n          if (type === \"text\") {\n            _this3.removeRemoteTextTrack(track);\n          }\n          list.removeTrack(track);\n        }\n      });\n    };\n    _proto.cleanupAutoTextTracks = function cleanupAutoTextTracks() {\n      var list = this.autoRemoteTextTracks_ || [];\n      var i2 = list.length;\n      while (i2--) {\n        var track = list[i2];\n        this.removeRemoteTextTrack(track);\n      }\n    };\n    _proto.reset = function reset() {\n    };\n    _proto.crossOrigin = function crossOrigin() {\n    };\n    _proto.setCrossOrigin = function setCrossOrigin() {\n    };\n    _proto.error = function error(err) {\n      if (err !== void 0) {\n        this.error_ = new MediaError2(err);\n        this.trigger(\"error\");\n      }\n      return this.error_;\n    };\n    _proto.played = function played() {\n      if (this.hasStarted_) {\n        return createTimeRanges(0, 0);\n      }\n      return createTimeRanges();\n    };\n    _proto.play = function play() {\n    };\n    _proto.setScrubbing = function setScrubbing() {\n    };\n    _proto.scrubbing = function scrubbing() {\n    };\n    _proto.setCurrentTime = function setCurrentTime() {\n      if (this.manualTimeUpdates) {\n        this.trigger({\n          type: \"timeupdate\",\n          target: this,\n          manuallyTriggered: true\n        });\n      }\n    };\n    _proto.initTrackListeners = function initTrackListeners() {\n      var _this4 = this;\n      NORMAL.names.forEach(function(name) {\n        var props = NORMAL[name];\n        var trackListChanges = function trackListChanges2() {\n          _this4.trigger(name + \"trackchange\");\n        };\n        var tracks = _this4[props.getterName]();\n        tracks.addEventListener(\"removetrack\", trackListChanges);\n        tracks.addEventListener(\"addtrack\", trackListChanges);\n        _this4.on(\"dispose\", function() {\n          tracks.removeEventListener(\"removetrack\", trackListChanges);\n          tracks.removeEventListener(\"addtrack\", trackListChanges);\n        });\n      });\n    };\n    _proto.addWebVttScript_ = function addWebVttScript_() {\n      var _this5 = this;\n      if (window__default[\"default\"].WebVTT) {\n        return;\n      }\n      if (document__default[\"default\"].body.contains(this.el())) {\n        if (!this.options_[\"vtt.js\"] && isPlain(vtt__default[\"default\"]) && Object.keys(vtt__default[\"default\"]).length > 0) {\n          this.trigger(\"vttjsloaded\");\n          return;\n        }\n        var script = document__default[\"default\"].createElement(\"script\");\n        script.src = this.options_[\"vtt.js\"] || \"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js\";\n        script.onload = function() {\n          _this5.trigger(\"vttjsloaded\");\n        };\n        script.onerror = function() {\n          _this5.trigger(\"vttjserror\");\n        };\n        this.on(\"dispose\", function() {\n          script.onload = null;\n          script.onerror = null;\n        });\n        window__default[\"default\"].WebVTT = true;\n        this.el().parentNode.appendChild(script);\n      } else {\n        this.ready(this.addWebVttScript_);\n      }\n    };\n    _proto.emulateTextTracks = function emulateTextTracks() {\n      var _this6 = this;\n      var tracks = this.textTracks();\n      var remoteTracks = this.remoteTextTracks();\n      var handleAddTrack = function handleAddTrack2(e) {\n        return tracks.addTrack(e.track);\n      };\n      var handleRemoveTrack = function handleRemoveTrack2(e) {\n        return tracks.removeTrack(e.track);\n      };\n      remoteTracks.on(\"addtrack\", handleAddTrack);\n      remoteTracks.on(\"removetrack\", handleRemoveTrack);\n      this.addWebVttScript_();\n      var updateDisplay = function updateDisplay2() {\n        return _this6.trigger(\"texttrackchange\");\n      };\n      var textTracksChanges = function textTracksChanges2() {\n        updateDisplay();\n        for (var i2 = 0; i2 < tracks.length; i2++) {\n          var track = tracks[i2];\n          track.removeEventListener(\"cuechange\", updateDisplay);\n          if (track.mode === \"showing\") {\n            track.addEventListener(\"cuechange\", updateDisplay);\n          }\n        }\n      };\n      textTracksChanges();\n      tracks.addEventListener(\"change\", textTracksChanges);\n      tracks.addEventListener(\"addtrack\", textTracksChanges);\n      tracks.addEventListener(\"removetrack\", textTracksChanges);\n      this.on(\"dispose\", function() {\n        remoteTracks.off(\"addtrack\", handleAddTrack);\n        remoteTracks.off(\"removetrack\", handleRemoveTrack);\n        tracks.removeEventListener(\"change\", textTracksChanges);\n        tracks.removeEventListener(\"addtrack\", textTracksChanges);\n        tracks.removeEventListener(\"removetrack\", textTracksChanges);\n        for (var i2 = 0; i2 < tracks.length; i2++) {\n          var track = tracks[i2];\n          track.removeEventListener(\"cuechange\", updateDisplay);\n        }\n      });\n    };\n    _proto.addTextTrack = function addTextTrack(kind, label, language) {\n      if (!kind) {\n        throw new Error(\"TextTrack kind is required but was not provided\");\n      }\n      return createTrackHelper(this, kind, label, language);\n    };\n    _proto.createRemoteTextTrack = function createRemoteTextTrack(options) {\n      var track = mergeOptions(options, {\n        tech: this\n      });\n      return new REMOTE.remoteTextEl.TrackClass(track);\n    };\n    _proto.addRemoteTextTrack = function addRemoteTextTrack(options, manualCleanup) {\n      var _this7 = this;\n      if (options === void 0) {\n        options = {};\n      }\n      var htmlTrackElement = this.createRemoteTextTrack(options);\n      if (manualCleanup !== true && manualCleanup !== false) {\n        log.warn('Calling addRemoteTextTrack without explicitly setting the \"manualCleanup\" parameter to `true` is deprecated and default to `false` in future version of video.js');\n        manualCleanup = true;\n      }\n      this.remoteTextTrackEls().addTrackElement_(htmlTrackElement);\n      this.remoteTextTracks().addTrack(htmlTrackElement.track);\n      if (manualCleanup !== true) {\n        this.ready(function() {\n          return _this7.autoRemoteTextTracks_.addTrack(htmlTrackElement.track);\n        });\n      }\n      return htmlTrackElement;\n    };\n    _proto.removeRemoteTextTrack = function removeRemoteTextTrack(track) {\n      var trackElement = this.remoteTextTrackEls().getTrackElementByTrack_(track);\n      this.remoteTextTrackEls().removeTrackElement_(trackElement);\n      this.remoteTextTracks().removeTrack(track);\n      this.autoRemoteTextTracks_.removeTrack(track);\n    };\n    _proto.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n      return {};\n    };\n    _proto.requestPictureInPicture = function requestPictureInPicture() {\n      var PromiseClass = this.options_.Promise || window__default[\"default\"].Promise;\n      if (PromiseClass) {\n        return PromiseClass.reject();\n      }\n    };\n    _proto.disablePictureInPicture = function disablePictureInPicture() {\n      return true;\n    };\n    _proto.setDisablePictureInPicture = function setDisablePictureInPicture() {\n    };\n    _proto.requestVideoFrameCallback = function requestVideoFrameCallback(cb) {\n      var _this8 = this;\n      var id = newGUID();\n      if (!this.isReady_ || this.paused()) {\n        this.queuedHanders_.add(id);\n        this.one(\"playing\", function() {\n          if (_this8.queuedHanders_.has(id)) {\n            _this8.queuedHanders_[\"delete\"](id);\n            cb();\n          }\n        });\n      } else {\n        this.requestNamedAnimationFrame(id, cb);\n      }\n      return id;\n    };\n    _proto.cancelVideoFrameCallback = function cancelVideoFrameCallback(id) {\n      if (this.queuedHanders_.has(id)) {\n        this.queuedHanders_[\"delete\"](id);\n      } else {\n        this.cancelNamedAnimationFrame(id);\n      }\n    };\n    _proto.setPoster = function setPoster() {\n    };\n    _proto.playsinline = function playsinline() {\n    };\n    _proto.setPlaysinline = function setPlaysinline() {\n    };\n    _proto.overrideNativeAudioTracks = function overrideNativeAudioTracks() {\n    };\n    _proto.overrideNativeVideoTracks = function overrideNativeVideoTracks() {\n    };\n    _proto.canPlayType = function canPlayType2() {\n      return \"\";\n    };\n    Tech2.canPlayType = function canPlayType2() {\n      return \"\";\n    };\n    Tech2.canPlaySource = function canPlaySource(srcObj, options) {\n      return Tech2.canPlayType(srcObj.type);\n    };\n    Tech2.isTech = function isTech(component) {\n      return component.prototype instanceof Tech2 || component instanceof Tech2 || component === Tech2;\n    };\n    Tech2.registerTech = function registerTech(name, tech) {\n      if (!Tech2.techs_) {\n        Tech2.techs_ = {};\n      }\n      if (!Tech2.isTech(tech)) {\n        throw new Error(\"Tech \" + name + \" must be a Tech\");\n      }\n      if (!Tech2.canPlayType) {\n        throw new Error(\"Techs must have a static canPlayType method on them\");\n      }\n      if (!Tech2.canPlaySource) {\n        throw new Error(\"Techs must have a static canPlaySource method on them\");\n      }\n      name = toTitleCase2(name);\n      Tech2.techs_[name] = tech;\n      Tech2.techs_[toLowerCase(name)] = tech;\n      if (name !== \"Tech\") {\n        Tech2.defaultTechOrder_.push(name);\n      }\n      return tech;\n    };\n    Tech2.getTech = function getTech(name) {\n      if (!name) {\n        return;\n      }\n      if (Tech2.techs_ && Tech2.techs_[name]) {\n        return Tech2.techs_[name];\n      }\n      name = toTitleCase2(name);\n      if (window__default[\"default\"] && window__default[\"default\"].videojs && window__default[\"default\"].videojs[name]) {\n        log.warn(\"The \" + name + \" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)\");\n        return window__default[\"default\"].videojs[name];\n      }\n    };\n    return Tech2;\n  }(Component2);\n  ALL.names.forEach(function(name) {\n    var props = ALL[name];\n    Tech.prototype[props.getterName] = function() {\n      this[props.privateName] = this[props.privateName] || new props.ListClass();\n      return this[props.privateName];\n    };\n  });\n  Tech.prototype.featuresVolumeControl = true;\n  Tech.prototype.featuresMuteControl = true;\n  Tech.prototype.featuresFullscreenResize = false;\n  Tech.prototype.featuresPlaybackRate = false;\n  Tech.prototype.featuresProgressEvents = false;\n  Tech.prototype.featuresSourceset = false;\n  Tech.prototype.featuresTimeupdateEvents = false;\n  Tech.prototype.featuresNativeTextTracks = false;\n  Tech.prototype.featuresVideoFrameCallback = false;\n  Tech.withSourceHandlers = function(_Tech) {\n    _Tech.registerSourceHandler = function(handler, index) {\n      var handlers = _Tech.sourceHandlers;\n      if (!handlers) {\n        handlers = _Tech.sourceHandlers = [];\n      }\n      if (index === void 0) {\n        index = handlers.length;\n      }\n      handlers.splice(index, 0, handler);\n    };\n    _Tech.canPlayType = function(type) {\n      var handlers = _Tech.sourceHandlers || [];\n      var can;\n      for (var i2 = 0; i2 < handlers.length; i2++) {\n        can = handlers[i2].canPlayType(type);\n        if (can) {\n          return can;\n        }\n      }\n      return \"\";\n    };\n    _Tech.selectSourceHandler = function(source, options) {\n      var handlers = _Tech.sourceHandlers || [];\n      var can;\n      for (var i2 = 0; i2 < handlers.length; i2++) {\n        can = handlers[i2].canHandleSource(source, options);\n        if (can) {\n          return handlers[i2];\n        }\n      }\n      return null;\n    };\n    _Tech.canPlaySource = function(srcObj, options) {\n      var sh = _Tech.selectSourceHandler(srcObj, options);\n      if (sh) {\n        return sh.canHandleSource(srcObj, options);\n      }\n      return \"\";\n    };\n    var deferrable = [\"seekable\", \"seeking\", \"duration\"];\n    deferrable.forEach(function(fnName) {\n      var originalFn = this[fnName];\n      if (typeof originalFn !== \"function\") {\n        return;\n      }\n      this[fnName] = function() {\n        if (this.sourceHandler_ && this.sourceHandler_[fnName]) {\n          return this.sourceHandler_[fnName].apply(this.sourceHandler_, arguments);\n        }\n        return originalFn.apply(this, arguments);\n      };\n    }, _Tech.prototype);\n    _Tech.prototype.setSource = function(source) {\n      var sh = _Tech.selectSourceHandler(source, this.options_);\n      if (!sh) {\n        if (_Tech.nativeSourceHandler) {\n          sh = _Tech.nativeSourceHandler;\n        } else {\n          log.error(\"No source handler found for the current source.\");\n        }\n      }\n      this.disposeSourceHandler();\n      this.off(\"dispose\", this.disposeSourceHandler_);\n      if (sh !== _Tech.nativeSourceHandler) {\n        this.currentSource_ = source;\n      }\n      this.sourceHandler_ = sh.handleSource(source, this, this.options_);\n      this.one(\"dispose\", this.disposeSourceHandler_);\n    };\n    _Tech.prototype.disposeSourceHandler = function() {\n      if (this.currentSource_) {\n        this.clearTracks([\"audio\", \"video\"]);\n        this.currentSource_ = null;\n      }\n      this.cleanupAutoTextTracks();\n      if (this.sourceHandler_) {\n        if (this.sourceHandler_.dispose) {\n          this.sourceHandler_.dispose();\n        }\n        this.sourceHandler_ = null;\n      }\n    };\n  };\n  Component2.registerComponent(\"Tech\", Tech);\n  Tech.registerTech(\"Tech\", Tech);\n  Tech.defaultTechOrder_ = [];\n  var middlewares = {};\n  var middlewareInstances = {};\n  var TERMINATOR = {};\n  function use(type, middleware) {\n    middlewares[type] = middlewares[type] || [];\n    middlewares[type].push(middleware);\n  }\n  function setSource(player, src, next) {\n    player.setTimeout(function() {\n      return setSourceHelper(src, middlewares[src.type], next, player);\n    }, 1);\n  }\n  function setTech(middleware, tech) {\n    middleware.forEach(function(mw) {\n      return mw.setTech && mw.setTech(tech);\n    });\n  }\n  function get(middleware, tech, method) {\n    return middleware.reduceRight(middlewareIterator(method), tech[method]());\n  }\n  function set(middleware, tech, method, arg) {\n    return tech[method](middleware.reduce(middlewareIterator(method), arg));\n  }\n  function mediate(middleware, tech, method, arg) {\n    if (arg === void 0) {\n      arg = null;\n    }\n    var callMethod = \"call\" + toTitleCase2(method);\n    var middlewareValue = middleware.reduce(middlewareIterator(callMethod), arg);\n    var terminated = middlewareValue === TERMINATOR;\n    var returnValue = terminated ? null : tech[method](middlewareValue);\n    executeRight(middleware, method, returnValue, terminated);\n    return returnValue;\n  }\n  var allowedGetters = {\n    buffered: 1,\n    currentTime: 1,\n    duration: 1,\n    muted: 1,\n    played: 1,\n    paused: 1,\n    seekable: 1,\n    volume: 1,\n    ended: 1\n  };\n  var allowedSetters = {\n    setCurrentTime: 1,\n    setMuted: 1,\n    setVolume: 1\n  };\n  var allowedMediators = {\n    play: 1,\n    pause: 1\n  };\n  function middlewareIterator(method) {\n    return function(value, mw) {\n      if (value === TERMINATOR) {\n        return TERMINATOR;\n      }\n      if (mw[method]) {\n        return mw[method](value);\n      }\n      return value;\n    };\n  }\n  function executeRight(mws, method, value, terminated) {\n    for (var i2 = mws.length - 1; i2 >= 0; i2--) {\n      var mw = mws[i2];\n      if (mw[method]) {\n        mw[method](terminated, value);\n      }\n    }\n  }\n  function clearCacheForPlayer(player) {\n    middlewareInstances[player.id()] = null;\n  }\n  function getOrCreateFactory(player, mwFactory) {\n    var mws = middlewareInstances[player.id()];\n    var mw = null;\n    if (mws === void 0 || mws === null) {\n      mw = mwFactory(player);\n      middlewareInstances[player.id()] = [[mwFactory, mw]];\n      return mw;\n    }\n    for (var i2 = 0; i2 < mws.length; i2++) {\n      var _mws$i = mws[i2], mwf = _mws$i[0], mwi = _mws$i[1];\n      if (mwf !== mwFactory) {\n        continue;\n      }\n      mw = mwi;\n    }\n    if (mw === null) {\n      mw = mwFactory(player);\n      mws.push([mwFactory, mw]);\n    }\n    return mw;\n  }\n  function setSourceHelper(src, middleware, next, player, acc, lastRun) {\n    if (src === void 0) {\n      src = {};\n    }\n    if (middleware === void 0) {\n      middleware = [];\n    }\n    if (acc === void 0) {\n      acc = [];\n    }\n    if (lastRun === void 0) {\n      lastRun = false;\n    }\n    var _middleware = middleware, mwFactory = _middleware[0], mwrest = _middleware.slice(1);\n    if (typeof mwFactory === \"string\") {\n      setSourceHelper(src, middlewares[mwFactory], next, player, acc, lastRun);\n    } else if (mwFactory) {\n      var mw = getOrCreateFactory(player, mwFactory);\n      if (!mw.setSource) {\n        acc.push(mw);\n        return setSourceHelper(src, mwrest, next, player, acc, lastRun);\n      }\n      mw.setSource(assign({}, src), function(err, _src) {\n        if (err) {\n          return setSourceHelper(src, mwrest, next, player, acc, lastRun);\n        }\n        acc.push(mw);\n        setSourceHelper(_src, src.type === _src.type ? mwrest : middlewares[_src.type], next, player, acc, lastRun);\n      });\n    } else if (mwrest.length) {\n      setSourceHelper(src, mwrest, next, player, acc, lastRun);\n    } else if (lastRun) {\n      next(src, acc);\n    } else {\n      setSourceHelper(src, middlewares[\"*\"], next, player, acc, true);\n    }\n  }\n  var MimetypesKind = {\n    opus: \"video/ogg\",\n    ogv: \"video/ogg\",\n    mp4: \"video/mp4\",\n    mov: \"video/mp4\",\n    m4v: \"video/mp4\",\n    mkv: \"video/x-matroska\",\n    m4a: \"audio/mp4\",\n    mp3: \"audio/mpeg\",\n    aac: \"audio/aac\",\n    caf: \"audio/x-caf\",\n    flac: \"audio/flac\",\n    oga: \"audio/ogg\",\n    wav: \"audio/wav\",\n    m3u8: \"application/x-mpegURL\",\n    mpd: \"application/dash+xml\",\n    jpg: \"image/jpeg\",\n    jpeg: \"image/jpeg\",\n    gif: \"image/gif\",\n    png: \"image/png\",\n    svg: \"image/svg+xml\",\n    webp: \"image/webp\"\n  };\n  var getMimetype = function getMimetype2(src) {\n    if (src === void 0) {\n      src = \"\";\n    }\n    var ext = getFileExtension(src);\n    var mimetype = MimetypesKind[ext.toLowerCase()];\n    return mimetype || \"\";\n  };\n  var findMimetype = function findMimetype2(player, src) {\n    if (!src) {\n      return \"\";\n    }\n    if (player.cache_.source.src === src && player.cache_.source.type) {\n      return player.cache_.source.type;\n    }\n    var matchingSources = player.cache_.sources.filter(function(s2) {\n      return s2.src === src;\n    });\n    if (matchingSources.length) {\n      return matchingSources[0].type;\n    }\n    var sources = player.$$(\"source\");\n    for (var i2 = 0; i2 < sources.length; i2++) {\n      var s = sources[i2];\n      if (s.type && s.src && s.src === src) {\n        return s.type;\n      }\n    }\n    return getMimetype(src);\n  };\n  var filterSource = function filterSource2(src) {\n    if (Array.isArray(src)) {\n      var newsrc = [];\n      src.forEach(function(srcobj) {\n        srcobj = filterSource2(srcobj);\n        if (Array.isArray(srcobj)) {\n          newsrc = newsrc.concat(srcobj);\n        } else if (isObject2(srcobj)) {\n          newsrc.push(srcobj);\n        }\n      });\n      src = newsrc;\n    } else if (typeof src === \"string\" && src.trim()) {\n      src = [fixSource({\n        src\n      })];\n    } else if (isObject2(src) && typeof src.src === \"string\" && src.src && src.src.trim()) {\n      src = [fixSource(src)];\n    } else {\n      src = [];\n    }\n    return src;\n  };\n  function fixSource(src) {\n    if (!src.type) {\n      var mimetype = getMimetype(src.src);\n      if (mimetype) {\n        src.type = mimetype;\n      }\n    }\n    return src;\n  }\n  var MediaLoader = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](MediaLoader2, _Component);\n    function MediaLoader2(player, options, ready) {\n      var _this;\n      var options_ = mergeOptions({\n        createEl: false\n      }, options);\n      _this = _Component.call(this, player, options_, ready) || this;\n      if (!options.playerOptions.sources || options.playerOptions.sources.length === 0) {\n        for (var i2 = 0, j = options.playerOptions.techOrder; i2 < j.length; i2++) {\n          var techName = toTitleCase2(j[i2]);\n          var tech = Tech.getTech(techName);\n          if (!techName) {\n            tech = Component2.getComponent(techName);\n          }\n          if (tech && tech.isSupported()) {\n            player.loadTech_(techName);\n            break;\n          }\n        }\n      } else {\n        player.src(options.playerOptions.sources);\n      }\n      return _this;\n    }\n    return MediaLoader2;\n  }(Component2);\n  Component2.registerComponent(\"MediaLoader\", MediaLoader);\n  var ClickableComponent2 = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](ClickableComponent3, _Component);\n    function ClickableComponent3(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      if (_this.options_.controlText) {\n        _this.controlText(_this.options_.controlText);\n      }\n      _this.handleMouseOver_ = function(e) {\n        return _this.handleMouseOver(e);\n      };\n      _this.handleMouseOut_ = function(e) {\n        return _this.handleMouseOut(e);\n      };\n      _this.handleClick_ = function(e) {\n        return _this.handleClick(e);\n      };\n      _this.handleKeyDown_ = function(e) {\n        return _this.handleKeyDown(e);\n      };\n      _this.emitTapEvents();\n      _this.enable();\n      return _this;\n    }\n    var _proto = ClickableComponent3.prototype;\n    _proto.createEl = function createEl$1(tag, props, attributes) {\n      if (tag === void 0) {\n        tag = \"div\";\n      }\n      if (props === void 0) {\n        props = {};\n      }\n      if (attributes === void 0) {\n        attributes = {};\n      }\n      props = assign({\n        className: this.buildCSSClass(),\n        tabIndex: 0\n      }, props);\n      if (tag === \"button\") {\n        log.error(\"Creating a ClickableComponent with an HTML element of \" + tag + \" is not supported; use a Button instead.\");\n      }\n      attributes = assign({\n        role: \"button\"\n      }, attributes);\n      this.tabIndex_ = props.tabIndex;\n      var el = createEl(tag, props, attributes);\n      el.appendChild(createEl(\"span\", {\n        className: \"vjs-icon-placeholder\"\n      }, {\n        \"aria-hidden\": true\n      }));\n      this.createControlTextEl(el);\n      return el;\n    };\n    _proto.dispose = function dispose() {\n      this.controlTextEl_ = null;\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.createControlTextEl = function createControlTextEl(el) {\n      this.controlTextEl_ = createEl(\"span\", {\n        className: \"vjs-control-text\"\n      }, {\n        // let the screen reader user know that the text of the element may change\n        \"aria-live\": \"polite\"\n      });\n      if (el) {\n        el.appendChild(this.controlTextEl_);\n      }\n      this.controlText(this.controlText_, el);\n      return this.controlTextEl_;\n    };\n    _proto.controlText = function controlText(text, el) {\n      if (el === void 0) {\n        el = this.el();\n      }\n      if (text === void 0) {\n        return this.controlText_ || \"Need Text\";\n      }\n      var localizedText = this.localize(text);\n      this.controlText_ = text;\n      textContent(this.controlTextEl_, localizedText);\n      if (!this.nonIconControl && !this.player_.options_.noUITitleAttributes) {\n        el.setAttribute(\"title\", localizedText);\n      }\n    };\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-control vjs-button \" + _Component.prototype.buildCSSClass.call(this);\n    };\n    _proto.enable = function enable() {\n      if (!this.enabled_) {\n        this.enabled_ = true;\n        this.removeClass(\"vjs-disabled\");\n        this.el_.setAttribute(\"aria-disabled\", \"false\");\n        if (typeof this.tabIndex_ !== \"undefined\") {\n          this.el_.setAttribute(\"tabIndex\", this.tabIndex_);\n        }\n        this.on([\"tap\", \"click\"], this.handleClick_);\n        this.on(\"keydown\", this.handleKeyDown_);\n      }\n    };\n    _proto.disable = function disable() {\n      this.enabled_ = false;\n      this.addClass(\"vjs-disabled\");\n      this.el_.setAttribute(\"aria-disabled\", \"true\");\n      if (typeof this.tabIndex_ !== \"undefined\") {\n        this.el_.removeAttribute(\"tabIndex\");\n      }\n      this.off(\"mouseover\", this.handleMouseOver_);\n      this.off(\"mouseout\", this.handleMouseOut_);\n      this.off([\"tap\", \"click\"], this.handleClick_);\n      this.off(\"keydown\", this.handleKeyDown_);\n    };\n    _proto.handleLanguagechange = function handleLanguagechange() {\n      this.controlText(this.controlText_);\n    };\n    _proto.handleClick = function handleClick(event2) {\n      if (this.options_.clickHandler) {\n        this.options_.clickHandler.call(this, arguments);\n      }\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Space\") || keycode__default[\"default\"].isEventKey(event2, \"Enter\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.trigger(\"click\");\n      } else {\n        _Component.prototype.handleKeyDown.call(this, event2);\n      }\n    };\n    return ClickableComponent3;\n  }(Component2);\n  Component2.registerComponent(\"ClickableComponent\", ClickableComponent2);\n  var PosterImage = /* @__PURE__ */ function(_ClickableComponent) {\n    _inheritsLoose__default[\"default\"](PosterImage2, _ClickableComponent);\n    function PosterImage2(player, options) {\n      var _this;\n      _this = _ClickableComponent.call(this, player, options) || this;\n      _this.update();\n      _this.update_ = function(e) {\n        return _this.update(e);\n      };\n      player.on(\"posterchange\", _this.update_);\n      return _this;\n    }\n    var _proto = PosterImage2.prototype;\n    _proto.dispose = function dispose() {\n      this.player().off(\"posterchange\", this.update_);\n      _ClickableComponent.prototype.dispose.call(this);\n    };\n    _proto.createEl = function createEl$1() {\n      var el = createEl(\"div\", {\n        className: \"vjs-poster\",\n        // Don't want poster to be tabbable.\n        tabIndex: -1\n      });\n      return el;\n    };\n    _proto.update = function update(event2) {\n      var url = this.player().poster();\n      this.setSrc(url);\n      if (url) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    };\n    _proto.setSrc = function setSrc(url) {\n      var backgroundImage = \"\";\n      if (url) {\n        backgroundImage = 'url(\"' + url + '\")';\n      }\n      this.el_.style.backgroundImage = backgroundImage;\n    };\n    _proto.handleClick = function handleClick(event2) {\n      if (!this.player_.controls()) {\n        return;\n      }\n      var sourceIsEncrypted = this.player_.usingPlugin(\"eme\") && this.player_.eme.sessions && this.player_.eme.sessions.length > 0;\n      if (this.player_.tech(true) && // We've observed a bug in IE and Edge when playing back DRM content where\n      // calling .focus() on the video element causes the video to go black,\n      // so we avoid it in that specific case\n      !((IE_VERSION || IS_EDGE) && sourceIsEncrypted)) {\n        this.player_.tech(true).focus();\n      }\n      if (this.player_.paused()) {\n        silencePromise(this.player_.play());\n      } else {\n        this.player_.pause();\n      }\n    };\n    return PosterImage2;\n  }(ClickableComponent2);\n  Component2.registerComponent(\"PosterImage\", PosterImage);\n  var darkGray = \"#222\";\n  var lightGray = \"#ccc\";\n  var fontMap = {\n    monospace: \"monospace\",\n    sansSerif: \"sans-serif\",\n    serif: \"serif\",\n    monospaceSansSerif: '\"Andale Mono\", \"Lucida Console\", monospace',\n    monospaceSerif: '\"Courier New\", monospace',\n    proportionalSansSerif: \"sans-serif\",\n    proportionalSerif: \"serif\",\n    casual: '\"Comic Sans MS\", Impact, fantasy',\n    script: '\"Monotype Corsiva\", cursive',\n    smallcaps: '\"Andale Mono\", \"Lucida Console\", monospace, sans-serif'\n  };\n  function constructColor(color, opacity) {\n    var hex;\n    if (color.length === 4) {\n      hex = color[1] + color[1] + color[2] + color[2] + color[3] + color[3];\n    } else if (color.length === 7) {\n      hex = color.slice(1);\n    } else {\n      throw new Error(\"Invalid color code provided, \" + color + \"; must be formatted as e.g. #f0e or #f604e2.\");\n    }\n    return \"rgba(\" + parseInt(hex.slice(0, 2), 16) + \",\" + parseInt(hex.slice(2, 4), 16) + \",\" + parseInt(hex.slice(4, 6), 16) + \",\" + opacity + \")\";\n  }\n  function tryUpdateStyle(el, style2, rule) {\n    try {\n      el.style[style2] = rule;\n    } catch (e) {\n      return;\n    }\n  }\n  var TextTrackDisplay = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](TextTrackDisplay2, _Component);\n    function TextTrackDisplay2(player, options, ready) {\n      var _this;\n      _this = _Component.call(this, player, options, ready) || this;\n      var updateDisplayHandler = function updateDisplayHandler2(e) {\n        return _this.updateDisplay(e);\n      };\n      player.on(\"loadstart\", function(e) {\n        return _this.toggleDisplay(e);\n      });\n      player.on(\"texttrackchange\", updateDisplayHandler);\n      player.on(\"loadedmetadata\", function(e) {\n        return _this.preselectTrack(e);\n      });\n      player.ready(bind(_assertThisInitialized__default[\"default\"](_this), function() {\n        if (player.tech_ && player.tech_.featuresNativeTextTracks) {\n          this.hide();\n          return;\n        }\n        player.on(\"fullscreenchange\", updateDisplayHandler);\n        player.on(\"playerresize\", updateDisplayHandler);\n        window__default[\"default\"].addEventListener(\"orientationchange\", updateDisplayHandler);\n        player.on(\"dispose\", function() {\n          return window__default[\"default\"].removeEventListener(\"orientationchange\", updateDisplayHandler);\n        });\n        var tracks = this.options_.playerOptions.tracks || [];\n        for (var i2 = 0; i2 < tracks.length; i2++) {\n          this.player_.addRemoteTextTrack(tracks[i2], true);\n        }\n        this.preselectTrack();\n      }));\n      return _this;\n    }\n    var _proto = TextTrackDisplay2.prototype;\n    _proto.preselectTrack = function preselectTrack() {\n      var modes = {\n        captions: 1,\n        subtitles: 1\n      };\n      var trackList = this.player_.textTracks();\n      var userPref = this.player_.cache_.selectedLanguage;\n      var firstDesc;\n      var firstCaptions;\n      var preferredTrack;\n      for (var i2 = 0; i2 < trackList.length; i2++) {\n        var track = trackList[i2];\n        if (userPref && userPref.enabled && userPref.language && userPref.language === track.language && track.kind in modes) {\n          if (track.kind === userPref.kind) {\n            preferredTrack = track;\n          } else if (!preferredTrack) {\n            preferredTrack = track;\n          }\n        } else if (userPref && !userPref.enabled) {\n          preferredTrack = null;\n          firstDesc = null;\n          firstCaptions = null;\n        } else if (track[\"default\"]) {\n          if (track.kind === \"descriptions\" && !firstDesc) {\n            firstDesc = track;\n          } else if (track.kind in modes && !firstCaptions) {\n            firstCaptions = track;\n          }\n        }\n      }\n      if (preferredTrack) {\n        preferredTrack.mode = \"showing\";\n      } else if (firstCaptions) {\n        firstCaptions.mode = \"showing\";\n      } else if (firstDesc) {\n        firstDesc.mode = \"showing\";\n      }\n    };\n    _proto.toggleDisplay = function toggleDisplay() {\n      if (this.player_.tech_ && this.player_.tech_.featuresNativeTextTracks) {\n        this.hide();\n      } else {\n        this.show();\n      }\n    };\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-text-track-display\"\n      }, {\n        \"translate\": \"yes\",\n        \"aria-live\": \"off\",\n        \"aria-atomic\": \"true\"\n      });\n    };\n    _proto.clearDisplay = function clearDisplay() {\n      if (typeof window__default[\"default\"].WebVTT === \"function\") {\n        window__default[\"default\"].WebVTT.processCues(window__default[\"default\"], [], this.el_);\n      }\n    };\n    _proto.updateDisplay = function updateDisplay() {\n      var tracks = this.player_.textTracks();\n      var allowMultipleShowingTracks = this.options_.allowMultipleShowingTracks;\n      this.clearDisplay();\n      if (allowMultipleShowingTracks) {\n        var showingTracks = [];\n        for (var _i2 = 0; _i2 < tracks.length; ++_i2) {\n          var track = tracks[_i2];\n          if (track.mode !== \"showing\") {\n            continue;\n          }\n          showingTracks.push(track);\n        }\n        this.updateForTrack(showingTracks);\n        return;\n      }\n      var descriptionsTrack = null;\n      var captionsSubtitlesTrack = null;\n      var i2 = tracks.length;\n      while (i2--) {\n        var _track = tracks[i2];\n        if (_track.mode === \"showing\") {\n          if (_track.kind === \"descriptions\") {\n            descriptionsTrack = _track;\n          } else {\n            captionsSubtitlesTrack = _track;\n          }\n        }\n      }\n      if (captionsSubtitlesTrack) {\n        if (this.getAttribute(\"aria-live\") !== \"off\") {\n          this.setAttribute(\"aria-live\", \"off\");\n        }\n        this.updateForTrack(captionsSubtitlesTrack);\n      } else if (descriptionsTrack) {\n        if (this.getAttribute(\"aria-live\") !== \"assertive\") {\n          this.setAttribute(\"aria-live\", \"assertive\");\n        }\n        this.updateForTrack(descriptionsTrack);\n      }\n    };\n    _proto.updateDisplayState = function updateDisplayState(track) {\n      var overrides = this.player_.textTrackSettings.getValues();\n      var cues = track.activeCues;\n      var i2 = cues.length;\n      while (i2--) {\n        var cue = cues[i2];\n        if (!cue) {\n          continue;\n        }\n        var cueDiv = cue.displayState;\n        if (overrides.color) {\n          cueDiv.firstChild.style.color = overrides.color;\n        }\n        if (overrides.textOpacity) {\n          tryUpdateStyle(cueDiv.firstChild, \"color\", constructColor(overrides.color || \"#fff\", overrides.textOpacity));\n        }\n        if (overrides.backgroundColor) {\n          cueDiv.firstChild.style.backgroundColor = overrides.backgroundColor;\n        }\n        if (overrides.backgroundOpacity) {\n          tryUpdateStyle(cueDiv.firstChild, \"backgroundColor\", constructColor(overrides.backgroundColor || \"#000\", overrides.backgroundOpacity));\n        }\n        if (overrides.windowColor) {\n          if (overrides.windowOpacity) {\n            tryUpdateStyle(cueDiv, \"backgroundColor\", constructColor(overrides.windowColor, overrides.windowOpacity));\n          } else {\n            cueDiv.style.backgroundColor = overrides.windowColor;\n          }\n        }\n        if (overrides.edgeStyle) {\n          if (overrides.edgeStyle === \"dropshadow\") {\n            cueDiv.firstChild.style.textShadow = \"2px 2px 3px \" + darkGray + \", 2px 2px 4px \" + darkGray + \", 2px 2px 5px \" + darkGray;\n          } else if (overrides.edgeStyle === \"raised\") {\n            cueDiv.firstChild.style.textShadow = \"1px 1px \" + darkGray + \", 2px 2px \" + darkGray + \", 3px 3px \" + darkGray;\n          } else if (overrides.edgeStyle === \"depressed\") {\n            cueDiv.firstChild.style.textShadow = \"1px 1px \" + lightGray + \", 0 1px \" + lightGray + \", -1px -1px \" + darkGray + \", 0 -1px \" + darkGray;\n          } else if (overrides.edgeStyle === \"uniform\") {\n            cueDiv.firstChild.style.textShadow = \"0 0 4px \" + darkGray + \", 0 0 4px \" + darkGray + \", 0 0 4px \" + darkGray + \", 0 0 4px \" + darkGray;\n          }\n        }\n        if (overrides.fontPercent && overrides.fontPercent !== 1) {\n          var fontSize = window__default[\"default\"].parseFloat(cueDiv.style.fontSize);\n          cueDiv.style.fontSize = fontSize * overrides.fontPercent + \"px\";\n          cueDiv.style.height = \"auto\";\n          cueDiv.style.top = \"auto\";\n        }\n        if (overrides.fontFamily && overrides.fontFamily !== \"default\") {\n          if (overrides.fontFamily === \"small-caps\") {\n            cueDiv.firstChild.style.fontVariant = \"small-caps\";\n          } else {\n            cueDiv.firstChild.style.fontFamily = fontMap[overrides.fontFamily];\n          }\n        }\n      }\n    };\n    _proto.updateForTrack = function updateForTrack(tracks) {\n      if (!Array.isArray(tracks)) {\n        tracks = [tracks];\n      }\n      if (typeof window__default[\"default\"].WebVTT !== \"function\" || tracks.every(function(track2) {\n        return !track2.activeCues;\n      })) {\n        return;\n      }\n      var cues = [];\n      for (var i2 = 0; i2 < tracks.length; ++i2) {\n        var track = tracks[i2];\n        for (var j = 0; j < track.activeCues.length; ++j) {\n          cues.push(track.activeCues[j]);\n        }\n      }\n      window__default[\"default\"].WebVTT.processCues(window__default[\"default\"], cues, this.el_);\n      for (var _i2 = 0; _i2 < tracks.length; ++_i2) {\n        var _track2 = tracks[_i2];\n        for (var _j = 0; _j < _track2.activeCues.length; ++_j) {\n          var cueEl = _track2.activeCues[_j].displayState;\n          addClass(cueEl, \"vjs-text-track-cue\");\n          addClass(cueEl, \"vjs-text-track-cue-\" + (_track2.language ? _track2.language : _i2));\n          if (_track2.language) {\n            setAttribute(cueEl, \"lang\", _track2.language);\n          }\n        }\n        if (this.player_.textTrackSettings) {\n          this.updateDisplayState(_track2);\n        }\n      }\n    };\n    return TextTrackDisplay2;\n  }(Component2);\n  Component2.registerComponent(\"TextTrackDisplay\", TextTrackDisplay);\n  var LoadingSpinner = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](LoadingSpinner2, _Component);\n    function LoadingSpinner2() {\n      return _Component.apply(this, arguments) || this;\n    }\n    var _proto = LoadingSpinner2.prototype;\n    _proto.createEl = function createEl$1() {\n      var isAudio = this.player_.isAudio();\n      var playerType = this.localize(isAudio ? \"Audio Player\" : \"Video Player\");\n      var controlText = createEl(\"span\", {\n        className: \"vjs-control-text\",\n        textContent: this.localize(\"{1} is loading.\", [playerType])\n      });\n      var el = _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-loading-spinner\",\n        dir: \"ltr\"\n      });\n      el.appendChild(controlText);\n      return el;\n    };\n    return LoadingSpinner2;\n  }(Component2);\n  Component2.registerComponent(\"LoadingSpinner\", LoadingSpinner);\n  var Button2 = /* @__PURE__ */ function(_ClickableComponent) {\n    _inheritsLoose__default[\"default\"](Button3, _ClickableComponent);\n    function Button3() {\n      return _ClickableComponent.apply(this, arguments) || this;\n    }\n    var _proto = Button3.prototype;\n    _proto.createEl = function createEl$1(tag, props, attributes) {\n      if (props === void 0) {\n        props = {};\n      }\n      if (attributes === void 0) {\n        attributes = {};\n      }\n      tag = \"button\";\n      props = assign({\n        className: this.buildCSSClass()\n      }, props);\n      attributes = assign({\n        // Necessary since the default button type is \"submit\"\n        type: \"button\"\n      }, attributes);\n      var el = createEl(tag, props, attributes);\n      el.appendChild(createEl(\"span\", {\n        className: \"vjs-icon-placeholder\"\n      }, {\n        \"aria-hidden\": true\n      }));\n      this.createControlTextEl(el);\n      return el;\n    };\n    _proto.addChild = function addChild(child, options) {\n      if (options === void 0) {\n        options = {};\n      }\n      var className = this.constructor.name;\n      log.warn(\"Adding an actionable (user controllable) child to a Button (\" + className + \") is not supported; use a ClickableComponent instead.\");\n      return Component2.prototype.addChild.call(this, child, options);\n    };\n    _proto.enable = function enable() {\n      _ClickableComponent.prototype.enable.call(this);\n      this.el_.removeAttribute(\"disabled\");\n    };\n    _proto.disable = function disable() {\n      _ClickableComponent.prototype.disable.call(this);\n      this.el_.setAttribute(\"disabled\", \"disabled\");\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Space\") || keycode__default[\"default\"].isEventKey(event2, \"Enter\")) {\n        event2.stopPropagation();\n        return;\n      }\n      _ClickableComponent.prototype.handleKeyDown.call(this, event2);\n    };\n    return Button3;\n  }(ClickableComponent2);\n  Component2.registerComponent(\"Button\", Button2);\n  var BigPlayButton = /* @__PURE__ */ function(_Button) {\n    _inheritsLoose__default[\"default\"](BigPlayButton2, _Button);\n    function BigPlayButton2(player, options) {\n      var _this;\n      _this = _Button.call(this, player, options) || this;\n      _this.mouseused_ = false;\n      _this.on(\"mousedown\", function(e) {\n        return _this.handleMouseDown(e);\n      });\n      return _this;\n    }\n    var _proto = BigPlayButton2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-big-play-button\";\n    };\n    _proto.handleClick = function handleClick(event2) {\n      var playPromise = this.player_.play();\n      if (this.mouseused_ && event2.clientX && event2.clientY) {\n        var sourceIsEncrypted = this.player_.usingPlugin(\"eme\") && this.player_.eme.sessions && this.player_.eme.sessions.length > 0;\n        silencePromise(playPromise);\n        if (this.player_.tech(true) && // We've observed a bug in IE and Edge when playing back DRM content where\n        // calling .focus() on the video element causes the video to go black,\n        // so we avoid it in that specific case\n        !((IE_VERSION || IS_EDGE) && sourceIsEncrypted)) {\n          this.player_.tech(true).focus();\n        }\n        return;\n      }\n      var cb = this.player_.getChild(\"controlBar\");\n      var playToggle = cb && cb.getChild(\"playToggle\");\n      if (!playToggle) {\n        this.player_.tech(true).focus();\n        return;\n      }\n      var playFocus = function playFocus2() {\n        return playToggle.focus();\n      };\n      if (isPromise2(playPromise)) {\n        playPromise.then(playFocus, function() {\n        });\n      } else {\n        this.setTimeout(playFocus, 1);\n      }\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      this.mouseused_ = false;\n      _Button.prototype.handleKeyDown.call(this, event2);\n    };\n    _proto.handleMouseDown = function handleMouseDown(event2) {\n      this.mouseused_ = true;\n    };\n    return BigPlayButton2;\n  }(Button2);\n  BigPlayButton.prototype.controlText_ = \"Play Video\";\n  Component2.registerComponent(\"BigPlayButton\", BigPlayButton);\n  var CloseButton = /* @__PURE__ */ function(_Button) {\n    _inheritsLoose__default[\"default\"](CloseButton2, _Button);\n    function CloseButton2(player, options) {\n      var _this;\n      _this = _Button.call(this, player, options) || this;\n      _this.controlText(options && options.controlText || _this.localize(\"Close\"));\n      return _this;\n    }\n    var _proto = CloseButton2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-close-button \" + _Button.prototype.buildCSSClass.call(this);\n    };\n    _proto.handleClick = function handleClick(event2) {\n      this.trigger({\n        type: \"close\",\n        bubbles: false\n      });\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Esc\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.trigger(\"click\");\n      } else {\n        _Button.prototype.handleKeyDown.call(this, event2);\n      }\n    };\n    return CloseButton2;\n  }(Button2);\n  Component2.registerComponent(\"CloseButton\", CloseButton);\n  var PlayToggle = /* @__PURE__ */ function(_Button) {\n    _inheritsLoose__default[\"default\"](PlayToggle2, _Button);\n    function PlayToggle2(player, options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      _this = _Button.call(this, player, options) || this;\n      options.replay = options.replay === void 0 || options.replay;\n      _this.on(player, \"play\", function(e) {\n        return _this.handlePlay(e);\n      });\n      _this.on(player, \"pause\", function(e) {\n        return _this.handlePause(e);\n      });\n      if (options.replay) {\n        _this.on(player, \"ended\", function(e) {\n          return _this.handleEnded(e);\n        });\n      }\n      return _this;\n    }\n    var _proto = PlayToggle2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-play-control \" + _Button.prototype.buildCSSClass.call(this);\n    };\n    _proto.handleClick = function handleClick(event2) {\n      if (this.player_.paused()) {\n        silencePromise(this.player_.play());\n      } else {\n        this.player_.pause();\n      }\n    };\n    _proto.handleSeeked = function handleSeeked(event2) {\n      this.removeClass(\"vjs-ended\");\n      if (this.player_.paused()) {\n        this.handlePause(event2);\n      } else {\n        this.handlePlay(event2);\n      }\n    };\n    _proto.handlePlay = function handlePlay(event2) {\n      this.removeClass(\"vjs-ended\");\n      this.removeClass(\"vjs-paused\");\n      this.addClass(\"vjs-playing\");\n      this.controlText(\"Pause\");\n    };\n    _proto.handlePause = function handlePause(event2) {\n      this.removeClass(\"vjs-playing\");\n      this.addClass(\"vjs-paused\");\n      this.controlText(\"Play\");\n    };\n    _proto.handleEnded = function handleEnded(event2) {\n      var _this2 = this;\n      this.removeClass(\"vjs-playing\");\n      this.addClass(\"vjs-ended\");\n      this.controlText(\"Replay\");\n      this.one(this.player_, \"seeked\", function(e) {\n        return _this2.handleSeeked(e);\n      });\n    };\n    return PlayToggle2;\n  }(Button2);\n  PlayToggle.prototype.controlText_ = \"Play\";\n  Component2.registerComponent(\"PlayToggle\", PlayToggle);\n  var defaultImplementation = function defaultImplementation2(seconds, guide) {\n    seconds = seconds < 0 ? 0 : seconds;\n    var s = Math.floor(seconds % 60);\n    var m = Math.floor(seconds / 60 % 60);\n    var h = Math.floor(seconds / 3600);\n    var gm = Math.floor(guide / 60 % 60);\n    var gh = Math.floor(guide / 3600);\n    if (isNaN(seconds) || seconds === Infinity) {\n      h = m = s = \"-\";\n    }\n    h = h > 0 || gh > 0 ? h + \":\" : \"\";\n    m = ((h || gm >= 10) && m < 10 ? \"0\" + m : m) + \":\";\n    s = s < 10 ? \"0\" + s : s;\n    return h + m + s;\n  };\n  var implementation = defaultImplementation;\n  function setFormatTime(customImplementation) {\n    implementation = customImplementation;\n  }\n  function resetFormatTime() {\n    implementation = defaultImplementation;\n  }\n  function formatTime(seconds, guide) {\n    if (guide === void 0) {\n      guide = seconds;\n    }\n    return implementation(seconds, guide);\n  }\n  var TimeDisplay = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](TimeDisplay2, _Component);\n    function TimeDisplay2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.on(player, [\"timeupdate\", \"ended\"], function(e) {\n        return _this.updateContent(e);\n      });\n      _this.updateTextNode_();\n      return _this;\n    }\n    var _proto = TimeDisplay2.prototype;\n    _proto.createEl = function createEl$1() {\n      var className = this.buildCSSClass();\n      var el = _Component.prototype.createEl.call(this, \"div\", {\n        className: className + \" vjs-time-control vjs-control\"\n      });\n      var span = createEl(\"span\", {\n        className: \"vjs-control-text\",\n        textContent: this.localize(this.labelText_) + \" \"\n      }, {\n        role: \"presentation\"\n      });\n      el.appendChild(span);\n      this.contentEl_ = createEl(\"span\", {\n        className: className + \"-display\"\n      }, {\n        // tell screen readers not to automatically read the time as it changes\n        \"aria-live\": \"off\",\n        // span elements have no implicit role, but some screen readers (notably VoiceOver)\n        // treat them as a break between items in the DOM when using arrow keys\n        // (or left-to-right swipes on iOS) to read contents of a page. Using\n        // role='presentation' causes VoiceOver to NOT treat this span as a break.\n        \"role\": \"presentation\"\n      });\n      el.appendChild(this.contentEl_);\n      return el;\n    };\n    _proto.dispose = function dispose() {\n      this.contentEl_ = null;\n      this.textNode_ = null;\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.updateTextNode_ = function updateTextNode_(time) {\n      var _this2 = this;\n      if (time === void 0) {\n        time = 0;\n      }\n      time = formatTime(time);\n      if (this.formattedTime_ === time) {\n        return;\n      }\n      this.formattedTime_ = time;\n      this.requestNamedAnimationFrame(\"TimeDisplay#updateTextNode_\", function() {\n        if (!_this2.contentEl_) {\n          return;\n        }\n        var oldNode = _this2.textNode_;\n        if (oldNode && _this2.contentEl_.firstChild !== oldNode) {\n          oldNode = null;\n          log.warn(\"TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.\");\n        }\n        _this2.textNode_ = document__default[\"default\"].createTextNode(_this2.formattedTime_);\n        if (!_this2.textNode_) {\n          return;\n        }\n        if (oldNode) {\n          _this2.contentEl_.replaceChild(_this2.textNode_, oldNode);\n        } else {\n          _this2.contentEl_.appendChild(_this2.textNode_);\n        }\n      });\n    };\n    _proto.updateContent = function updateContent(event2) {\n    };\n    return TimeDisplay2;\n  }(Component2);\n  TimeDisplay.prototype.labelText_ = \"Time\";\n  TimeDisplay.prototype.controlText_ = \"Time\";\n  Component2.registerComponent(\"TimeDisplay\", TimeDisplay);\n  var CurrentTimeDisplay = /* @__PURE__ */ function(_TimeDisplay) {\n    _inheritsLoose__default[\"default\"](CurrentTimeDisplay2, _TimeDisplay);\n    function CurrentTimeDisplay2() {\n      return _TimeDisplay.apply(this, arguments) || this;\n    }\n    var _proto = CurrentTimeDisplay2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-current-time\";\n    };\n    _proto.updateContent = function updateContent(event2) {\n      var time;\n      if (this.player_.ended()) {\n        time = this.player_.duration();\n      } else {\n        time = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();\n      }\n      this.updateTextNode_(time);\n    };\n    return CurrentTimeDisplay2;\n  }(TimeDisplay);\n  CurrentTimeDisplay.prototype.labelText_ = \"Current Time\";\n  CurrentTimeDisplay.prototype.controlText_ = \"Current Time\";\n  Component2.registerComponent(\"CurrentTimeDisplay\", CurrentTimeDisplay);\n  var DurationDisplay = /* @__PURE__ */ function(_TimeDisplay) {\n    _inheritsLoose__default[\"default\"](DurationDisplay2, _TimeDisplay);\n    function DurationDisplay2(player, options) {\n      var _this;\n      _this = _TimeDisplay.call(this, player, options) || this;\n      var updateContent = function updateContent2(e) {\n        return _this.updateContent(e);\n      };\n      _this.on(player, \"durationchange\", updateContent);\n      _this.on(player, \"loadstart\", updateContent);\n      _this.on(player, \"loadedmetadata\", updateContent);\n      return _this;\n    }\n    var _proto = DurationDisplay2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-duration\";\n    };\n    _proto.updateContent = function updateContent(event2) {\n      var duration = this.player_.duration();\n      this.updateTextNode_(duration);\n    };\n    return DurationDisplay2;\n  }(TimeDisplay);\n  DurationDisplay.prototype.labelText_ = \"Duration\";\n  DurationDisplay.prototype.controlText_ = \"Duration\";\n  Component2.registerComponent(\"DurationDisplay\", DurationDisplay);\n  var TimeDivider = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](TimeDivider2, _Component);\n    function TimeDivider2() {\n      return _Component.apply(this, arguments) || this;\n    }\n    var _proto = TimeDivider2.prototype;\n    _proto.createEl = function createEl2() {\n      var el = _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-time-control vjs-time-divider\"\n      }, {\n        // this element and its contents can be hidden from assistive techs since\n        // it is made extraneous by the announcement of the control text\n        // for the current time and duration displays\n        \"aria-hidden\": true\n      });\n      var div = _Component.prototype.createEl.call(this, \"div\");\n      var span = _Component.prototype.createEl.call(this, \"span\", {\n        textContent: \"/\"\n      });\n      div.appendChild(span);\n      el.appendChild(div);\n      return el;\n    };\n    return TimeDivider2;\n  }(Component2);\n  Component2.registerComponent(\"TimeDivider\", TimeDivider);\n  var RemainingTimeDisplay = /* @__PURE__ */ function(_TimeDisplay) {\n    _inheritsLoose__default[\"default\"](RemainingTimeDisplay2, _TimeDisplay);\n    function RemainingTimeDisplay2(player, options) {\n      var _this;\n      _this = _TimeDisplay.call(this, player, options) || this;\n      _this.on(player, \"durationchange\", function(e) {\n        return _this.updateContent(e);\n      });\n      return _this;\n    }\n    var _proto = RemainingTimeDisplay2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-remaining-time\";\n    };\n    _proto.createEl = function createEl$1() {\n      var el = _TimeDisplay.prototype.createEl.call(this);\n      if (this.options_.displayNegative !== false) {\n        el.insertBefore(createEl(\"span\", {}, {\n          \"aria-hidden\": true\n        }, \"-\"), this.contentEl_);\n      }\n      return el;\n    };\n    _proto.updateContent = function updateContent(event2) {\n      if (typeof this.player_.duration() !== \"number\") {\n        return;\n      }\n      var time;\n      if (this.player_.ended()) {\n        time = 0;\n      } else if (this.player_.remainingTimeDisplay) {\n        time = this.player_.remainingTimeDisplay();\n      } else {\n        time = this.player_.remainingTime();\n      }\n      this.updateTextNode_(time);\n    };\n    return RemainingTimeDisplay2;\n  }(TimeDisplay);\n  RemainingTimeDisplay.prototype.labelText_ = \"Remaining Time\";\n  RemainingTimeDisplay.prototype.controlText_ = \"Remaining Time\";\n  Component2.registerComponent(\"RemainingTimeDisplay\", RemainingTimeDisplay);\n  var LiveDisplay = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](LiveDisplay2, _Component);\n    function LiveDisplay2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.updateShowing();\n      _this.on(_this.player(), \"durationchange\", function(e) {\n        return _this.updateShowing(e);\n      });\n      return _this;\n    }\n    var _proto = LiveDisplay2.prototype;\n    _proto.createEl = function createEl$1() {\n      var el = _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-live-control vjs-control\"\n      });\n      this.contentEl_ = createEl(\"div\", {\n        className: \"vjs-live-display\"\n      }, {\n        \"aria-live\": \"off\"\n      });\n      this.contentEl_.appendChild(createEl(\"span\", {\n        className: \"vjs-control-text\",\n        textContent: this.localize(\"Stream Type\") + \" \"\n      }));\n      this.contentEl_.appendChild(document__default[\"default\"].createTextNode(this.localize(\"LIVE\")));\n      el.appendChild(this.contentEl_);\n      return el;\n    };\n    _proto.dispose = function dispose() {\n      this.contentEl_ = null;\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.updateShowing = function updateShowing(event2) {\n      if (this.player().duration() === Infinity) {\n        this.show();\n      } else {\n        this.hide();\n      }\n    };\n    return LiveDisplay2;\n  }(Component2);\n  Component2.registerComponent(\"LiveDisplay\", LiveDisplay);\n  var SeekToLive = /* @__PURE__ */ function(_Button) {\n    _inheritsLoose__default[\"default\"](SeekToLive2, _Button);\n    function SeekToLive2(player, options) {\n      var _this;\n      _this = _Button.call(this, player, options) || this;\n      _this.updateLiveEdgeStatus();\n      if (_this.player_.liveTracker) {\n        _this.updateLiveEdgeStatusHandler_ = function(e) {\n          return _this.updateLiveEdgeStatus(e);\n        };\n        _this.on(_this.player_.liveTracker, \"liveedgechange\", _this.updateLiveEdgeStatusHandler_);\n      }\n      return _this;\n    }\n    var _proto = SeekToLive2.prototype;\n    _proto.createEl = function createEl$1() {\n      var el = _Button.prototype.createEl.call(this, \"button\", {\n        className: \"vjs-seek-to-live-control vjs-control\"\n      });\n      this.textEl_ = createEl(\"span\", {\n        className: \"vjs-seek-to-live-text\",\n        textContent: this.localize(\"LIVE\")\n      }, {\n        \"aria-hidden\": \"true\"\n      });\n      el.appendChild(this.textEl_);\n      return el;\n    };\n    _proto.updateLiveEdgeStatus = function updateLiveEdgeStatus() {\n      if (!this.player_.liveTracker || this.player_.liveTracker.atLiveEdge()) {\n        this.setAttribute(\"aria-disabled\", true);\n        this.addClass(\"vjs-at-live-edge\");\n        this.controlText(\"Seek to live, currently playing live\");\n      } else {\n        this.setAttribute(\"aria-disabled\", false);\n        this.removeClass(\"vjs-at-live-edge\");\n        this.controlText(\"Seek to live, currently behind live\");\n      }\n    };\n    _proto.handleClick = function handleClick() {\n      this.player_.liveTracker.seekToLiveEdge();\n    };\n    _proto.dispose = function dispose() {\n      if (this.player_.liveTracker) {\n        this.off(this.player_.liveTracker, \"liveedgechange\", this.updateLiveEdgeStatusHandler_);\n      }\n      this.textEl_ = null;\n      _Button.prototype.dispose.call(this);\n    };\n    return SeekToLive2;\n  }(Button2);\n  SeekToLive.prototype.controlText_ = \"Seek to live, currently playing live\";\n  Component2.registerComponent(\"SeekToLive\", SeekToLive);\n  var clamp = function clamp2(number, min, max) {\n    number = Number(number);\n    return Math.min(max, Math.max(min, isNaN(number) ? min : number));\n  };\n  var Slider = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](Slider2, _Component);\n    function Slider2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.handleMouseDown_ = function(e) {\n        return _this.handleMouseDown(e);\n      };\n      _this.handleMouseUp_ = function(e) {\n        return _this.handleMouseUp(e);\n      };\n      _this.handleKeyDown_ = function(e) {\n        return _this.handleKeyDown(e);\n      };\n      _this.handleClick_ = function(e) {\n        return _this.handleClick(e);\n      };\n      _this.handleMouseMove_ = function(e) {\n        return _this.handleMouseMove(e);\n      };\n      _this.update_ = function(e) {\n        return _this.update(e);\n      };\n      _this.bar = _this.getChild(_this.options_.barName);\n      _this.vertical(!!_this.options_.vertical);\n      _this.enable();\n      return _this;\n    }\n    var _proto = Slider2.prototype;\n    _proto.enabled = function enabled() {\n      return this.enabled_;\n    };\n    _proto.enable = function enable() {\n      if (this.enabled()) {\n        return;\n      }\n      this.on(\"mousedown\", this.handleMouseDown_);\n      this.on(\"touchstart\", this.handleMouseDown_);\n      this.on(\"keydown\", this.handleKeyDown_);\n      this.on(\"click\", this.handleClick_);\n      this.on(this.player_, \"controlsvisible\", this.update);\n      if (this.playerEvent) {\n        this.on(this.player_, this.playerEvent, this.update);\n      }\n      this.removeClass(\"disabled\");\n      this.setAttribute(\"tabindex\", 0);\n      this.enabled_ = true;\n    };\n    _proto.disable = function disable() {\n      if (!this.enabled()) {\n        return;\n      }\n      var doc = this.bar.el_.ownerDocument;\n      this.off(\"mousedown\", this.handleMouseDown_);\n      this.off(\"touchstart\", this.handleMouseDown_);\n      this.off(\"keydown\", this.handleKeyDown_);\n      this.off(\"click\", this.handleClick_);\n      this.off(this.player_, \"controlsvisible\", this.update_);\n      this.off(doc, \"mousemove\", this.handleMouseMove_);\n      this.off(doc, \"mouseup\", this.handleMouseUp_);\n      this.off(doc, \"touchmove\", this.handleMouseMove_);\n      this.off(doc, \"touchend\", this.handleMouseUp_);\n      this.removeAttribute(\"tabindex\");\n      this.addClass(\"disabled\");\n      if (this.playerEvent) {\n        this.off(this.player_, this.playerEvent, this.update);\n      }\n      this.enabled_ = false;\n    };\n    _proto.createEl = function createEl2(type, props, attributes) {\n      if (props === void 0) {\n        props = {};\n      }\n      if (attributes === void 0) {\n        attributes = {};\n      }\n      props.className = props.className + \" vjs-slider\";\n      props = assign({\n        tabIndex: 0\n      }, props);\n      attributes = assign({\n        \"role\": \"slider\",\n        \"aria-valuenow\": 0,\n        \"aria-valuemin\": 0,\n        \"aria-valuemax\": 100,\n        \"tabIndex\": 0\n      }, attributes);\n      return _Component.prototype.createEl.call(this, type, props, attributes);\n    };\n    _proto.handleMouseDown = function handleMouseDown(event2) {\n      var doc = this.bar.el_.ownerDocument;\n      if (event2.type === \"mousedown\") {\n        event2.preventDefault();\n      }\n      if (event2.type === \"touchstart\" && !IS_CHROME) {\n        event2.preventDefault();\n      }\n      blockTextSelection();\n      this.addClass(\"vjs-sliding\");\n      this.trigger(\"slideractive\");\n      this.on(doc, \"mousemove\", this.handleMouseMove_);\n      this.on(doc, \"mouseup\", this.handleMouseUp_);\n      this.on(doc, \"touchmove\", this.handleMouseMove_);\n      this.on(doc, \"touchend\", this.handleMouseUp_);\n      this.handleMouseMove(event2, true);\n    };\n    _proto.handleMouseMove = function handleMouseMove(event2) {\n    };\n    _proto.handleMouseUp = function handleMouseUp() {\n      var doc = this.bar.el_.ownerDocument;\n      unblockTextSelection();\n      this.removeClass(\"vjs-sliding\");\n      this.trigger(\"sliderinactive\");\n      this.off(doc, \"mousemove\", this.handleMouseMove_);\n      this.off(doc, \"mouseup\", this.handleMouseUp_);\n      this.off(doc, \"touchmove\", this.handleMouseMove_);\n      this.off(doc, \"touchend\", this.handleMouseUp_);\n      this.update();\n    };\n    _proto.update = function update() {\n      var _this2 = this;\n      if (!this.el_ || !this.bar) {\n        return;\n      }\n      var progress = this.getProgress();\n      if (progress === this.progress_) {\n        return progress;\n      }\n      this.progress_ = progress;\n      this.requestNamedAnimationFrame(\"Slider#update\", function() {\n        var sizeKey = _this2.vertical() ? \"height\" : \"width\";\n        _this2.bar.el().style[sizeKey] = (progress * 100).toFixed(2) + \"%\";\n      });\n      return progress;\n    };\n    _proto.getProgress = function getProgress() {\n      return Number(clamp(this.getPercent(), 0, 1).toFixed(4));\n    };\n    _proto.calculateDistance = function calculateDistance(event2) {\n      var position = getPointerPosition2(this.el_, event2);\n      if (this.vertical()) {\n        return position.y;\n      }\n      return position.x;\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Left\") || keycode__default[\"default\"].isEventKey(event2, \"Down\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.stepBack();\n      } else if (keycode__default[\"default\"].isEventKey(event2, \"Right\") || keycode__default[\"default\"].isEventKey(event2, \"Up\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.stepForward();\n      } else {\n        _Component.prototype.handleKeyDown.call(this, event2);\n      }\n    };\n    _proto.handleClick = function handleClick(event2) {\n      event2.stopPropagation();\n      event2.preventDefault();\n    };\n    _proto.vertical = function vertical(bool) {\n      if (bool === void 0) {\n        return this.vertical_ || false;\n      }\n      this.vertical_ = !!bool;\n      if (this.vertical_) {\n        this.addClass(\"vjs-slider-vertical\");\n      } else {\n        this.addClass(\"vjs-slider-horizontal\");\n      }\n    };\n    return Slider2;\n  }(Component2);\n  Component2.registerComponent(\"Slider\", Slider);\n  var percentify = function percentify2(time, end) {\n    return clamp(time / end * 100, 0, 100).toFixed(2) + \"%\";\n  };\n  var LoadProgressBar = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](LoadProgressBar2, _Component);\n    function LoadProgressBar2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.partEls_ = [];\n      _this.on(player, \"progress\", function(e) {\n        return _this.update(e);\n      });\n      return _this;\n    }\n    var _proto = LoadProgressBar2.prototype;\n    _proto.createEl = function createEl$1() {\n      var el = _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-load-progress\"\n      });\n      var wrapper = createEl(\"span\", {\n        className: \"vjs-control-text\"\n      });\n      var loadedText = createEl(\"span\", {\n        textContent: this.localize(\"Loaded\")\n      });\n      var separator = document__default[\"default\"].createTextNode(\": \");\n      this.percentageEl_ = createEl(\"span\", {\n        className: \"vjs-control-text-loaded-percentage\",\n        textContent: \"0%\"\n      });\n      el.appendChild(wrapper);\n      wrapper.appendChild(loadedText);\n      wrapper.appendChild(separator);\n      wrapper.appendChild(this.percentageEl_);\n      return el;\n    };\n    _proto.dispose = function dispose() {\n      this.partEls_ = null;\n      this.percentageEl_ = null;\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.update = function update(event2) {\n      var _this2 = this;\n      this.requestNamedAnimationFrame(\"LoadProgressBar#update\", function() {\n        var liveTracker = _this2.player_.liveTracker;\n        var buffered = _this2.player_.buffered();\n        var duration = liveTracker && liveTracker.isLive() ? liveTracker.seekableEnd() : _this2.player_.duration();\n        var bufferedEnd = _this2.player_.bufferedEnd();\n        var children = _this2.partEls_;\n        var percent = percentify(bufferedEnd, duration);\n        if (_this2.percent_ !== percent) {\n          _this2.el_.style.width = percent;\n          textContent(_this2.percentageEl_, percent);\n          _this2.percent_ = percent;\n        }\n        for (var i2 = 0; i2 < buffered.length; i2++) {\n          var start = buffered.start(i2);\n          var end = buffered.end(i2);\n          var part = children[i2];\n          if (!part) {\n            part = _this2.el_.appendChild(createEl());\n            children[i2] = part;\n          }\n          if (part.dataset.start === start && part.dataset.end === end) {\n            continue;\n          }\n          part.dataset.start = start;\n          part.dataset.end = end;\n          part.style.left = percentify(start, bufferedEnd);\n          part.style.width = percentify(end - start, bufferedEnd);\n        }\n        for (var _i2 = children.length; _i2 > buffered.length; _i2--) {\n          _this2.el_.removeChild(children[_i2 - 1]);\n        }\n        children.length = buffered.length;\n      });\n    };\n    return LoadProgressBar2;\n  }(Component2);\n  Component2.registerComponent(\"LoadProgressBar\", LoadProgressBar);\n  var TimeTooltip2 = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](TimeTooltip3, _Component);\n    function TimeTooltip3(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.update = throttle(bind(_assertThisInitialized__default[\"default\"](_this), _this.update), UPDATE_REFRESH_INTERVAL);\n      return _this;\n    }\n    var _proto = TimeTooltip3.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-time-tooltip\"\n      }, {\n        \"aria-hidden\": \"true\"\n      });\n    };\n    _proto.update = function update(seekBarRect, seekBarPoint, content) {\n      var tooltipRect = findPosition(this.el_);\n      var playerRect = getBoundingClientRect(this.player_.el());\n      var seekBarPointPx = seekBarRect.width * seekBarPoint;\n      if (!playerRect || !tooltipRect) {\n        return;\n      }\n      var spaceLeftOfPoint = seekBarRect.left - playerRect.left + seekBarPointPx;\n      var spaceRightOfPoint = seekBarRect.width - seekBarPointPx + (playerRect.right - seekBarRect.right);\n      var pullTooltipBy = tooltipRect.width / 2;\n      if (spaceLeftOfPoint < pullTooltipBy) {\n        pullTooltipBy += pullTooltipBy - spaceLeftOfPoint;\n      } else if (spaceRightOfPoint < pullTooltipBy) {\n        pullTooltipBy = spaceRightOfPoint;\n      }\n      if (pullTooltipBy < 0) {\n        pullTooltipBy = 0;\n      } else if (pullTooltipBy > tooltipRect.width) {\n        pullTooltipBy = tooltipRect.width;\n      }\n      pullTooltipBy = Math.round(pullTooltipBy);\n      this.el_.style.right = \"-\" + pullTooltipBy + \"px\";\n      this.write(content);\n    };\n    _proto.write = function write(content) {\n      textContent(this.el_, content);\n    };\n    _proto.updateTime = function updateTime(seekBarRect, seekBarPoint, time, cb) {\n      var _this2 = this;\n      this.requestNamedAnimationFrame(\"TimeTooltip#updateTime\", function() {\n        var content;\n        var duration = _this2.player_.duration();\n        if (_this2.player_.liveTracker && _this2.player_.liveTracker.isLive()) {\n          var liveWindow = _this2.player_.liveTracker.liveWindow();\n          var secondsBehind = liveWindow - seekBarPoint * liveWindow;\n          content = (secondsBehind < 1 ? \"\" : \"-\") + formatTime(secondsBehind, liveWindow);\n        } else {\n          content = formatTime(time, duration);\n        }\n        _this2.update(seekBarRect, seekBarPoint, content);\n        if (cb) {\n          cb();\n        }\n      });\n    };\n    return TimeTooltip3;\n  }(Component2);\n  Component2.registerComponent(\"TimeTooltip\", TimeTooltip2);\n  var PlayProgressBar2 = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](PlayProgressBar3, _Component);\n    function PlayProgressBar3(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.update = throttle(bind(_assertThisInitialized__default[\"default\"](_this), _this.update), UPDATE_REFRESH_INTERVAL);\n      return _this;\n    }\n    var _proto = PlayProgressBar3.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-play-progress vjs-slider-bar\"\n      }, {\n        \"aria-hidden\": \"true\"\n      });\n    };\n    _proto.update = function update(seekBarRect, seekBarPoint) {\n      var timeTooltip = this.getChild(\"timeTooltip\");\n      if (!timeTooltip) {\n        return;\n      }\n      var time = this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();\n      timeTooltip.updateTime(seekBarRect, seekBarPoint, time);\n    };\n    return PlayProgressBar3;\n  }(Component2);\n  PlayProgressBar2.prototype.options_ = {\n    children: []\n  };\n  if (!IS_IOS && !IS_ANDROID) {\n    PlayProgressBar2.prototype.options_.children.push(\"timeTooltip\");\n  }\n  Component2.registerComponent(\"PlayProgressBar\", PlayProgressBar2);\n  var MouseTimeDisplay = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](MouseTimeDisplay2, _Component);\n    function MouseTimeDisplay2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.update = throttle(bind(_assertThisInitialized__default[\"default\"](_this), _this.update), UPDATE_REFRESH_INTERVAL);\n      return _this;\n    }\n    var _proto = MouseTimeDisplay2.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-mouse-display\"\n      });\n    };\n    _proto.update = function update(seekBarRect, seekBarPoint) {\n      var _this2 = this;\n      var time = seekBarPoint * this.player_.duration();\n      this.getChild(\"timeTooltip\").updateTime(seekBarRect, seekBarPoint, time, function() {\n        _this2.el_.style.left = seekBarRect.width * seekBarPoint + \"px\";\n      });\n    };\n    return MouseTimeDisplay2;\n  }(Component2);\n  MouseTimeDisplay.prototype.options_ = {\n    children: [\"timeTooltip\"]\n  };\n  Component2.registerComponent(\"MouseTimeDisplay\", MouseTimeDisplay);\n  var STEP_SECONDS = 5;\n  var PAGE_KEY_MULTIPLIER = 12;\n  var SeekBar = /* @__PURE__ */ function(_Slider) {\n    _inheritsLoose__default[\"default\"](SeekBar2, _Slider);\n    function SeekBar2(player, options) {\n      var _this;\n      _this = _Slider.call(this, player, options) || this;\n      _this.setEventHandlers_();\n      return _this;\n    }\n    var _proto = SeekBar2.prototype;\n    _proto.setEventHandlers_ = function setEventHandlers_() {\n      var _this2 = this;\n      this.update_ = bind(this, this.update);\n      this.update = throttle(this.update_, UPDATE_REFRESH_INTERVAL);\n      this.on(this.player_, [\"ended\", \"durationchange\", \"timeupdate\"], this.update);\n      if (this.player_.liveTracker) {\n        this.on(this.player_.liveTracker, \"liveedgechange\", this.update);\n      }\n      this.updateInterval = null;\n      this.enableIntervalHandler_ = function(e) {\n        return _this2.enableInterval_(e);\n      };\n      this.disableIntervalHandler_ = function(e) {\n        return _this2.disableInterval_(e);\n      };\n      this.on(this.player_, [\"playing\"], this.enableIntervalHandler_);\n      this.on(this.player_, [\"ended\", \"pause\", \"waiting\"], this.disableIntervalHandler_);\n      if (\"hidden\" in document__default[\"default\"] && \"visibilityState\" in document__default[\"default\"]) {\n        this.on(document__default[\"default\"], \"visibilitychange\", this.toggleVisibility_);\n      }\n    };\n    _proto.toggleVisibility_ = function toggleVisibility_(e) {\n      if (document__default[\"default\"].visibilityState === \"hidden\") {\n        this.cancelNamedAnimationFrame(\"SeekBar#update\");\n        this.cancelNamedAnimationFrame(\"Slider#update\");\n        this.disableInterval_(e);\n      } else {\n        if (!this.player_.ended() && !this.player_.paused()) {\n          this.enableInterval_();\n        }\n        this.update();\n      }\n    };\n    _proto.enableInterval_ = function enableInterval_() {\n      if (this.updateInterval) {\n        return;\n      }\n      this.updateInterval = this.setInterval(this.update, UPDATE_REFRESH_INTERVAL);\n    };\n    _proto.disableInterval_ = function disableInterval_(e) {\n      if (this.player_.liveTracker && this.player_.liveTracker.isLive() && e && e.type !== \"ended\") {\n        return;\n      }\n      if (!this.updateInterval) {\n        return;\n      }\n      this.clearInterval(this.updateInterval);\n      this.updateInterval = null;\n    };\n    _proto.createEl = function createEl2() {\n      return _Slider.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-progress-holder\"\n      }, {\n        \"aria-label\": this.localize(\"Progress Bar\")\n      });\n    };\n    _proto.update = function update(event2) {\n      var _this3 = this;\n      if (document__default[\"default\"].visibilityState === \"hidden\") {\n        return;\n      }\n      var percent = _Slider.prototype.update.call(this);\n      this.requestNamedAnimationFrame(\"SeekBar#update\", function() {\n        var currentTime = _this3.player_.ended() ? _this3.player_.duration() : _this3.getCurrentTime_();\n        var liveTracker = _this3.player_.liveTracker;\n        var duration = _this3.player_.duration();\n        if (liveTracker && liveTracker.isLive()) {\n          duration = _this3.player_.liveTracker.liveCurrentTime();\n        }\n        if (_this3.percent_ !== percent) {\n          _this3.el_.setAttribute(\"aria-valuenow\", (percent * 100).toFixed(2));\n          _this3.percent_ = percent;\n        }\n        if (_this3.currentTime_ !== currentTime || _this3.duration_ !== duration) {\n          _this3.el_.setAttribute(\"aria-valuetext\", _this3.localize(\"progress bar timing: currentTime={1} duration={2}\", [formatTime(currentTime, duration), formatTime(duration, duration)], \"{1} of {2}\"));\n          _this3.currentTime_ = currentTime;\n          _this3.duration_ = duration;\n        }\n        if (_this3.bar) {\n          _this3.bar.update(getBoundingClientRect(_this3.el()), _this3.getProgress());\n        }\n      });\n      return percent;\n    };\n    _proto.userSeek_ = function userSeek_(ct) {\n      if (this.player_.liveTracker && this.player_.liveTracker.isLive()) {\n        this.player_.liveTracker.nextSeekedFromUser();\n      }\n      this.player_.currentTime(ct);\n    };\n    _proto.getCurrentTime_ = function getCurrentTime_() {\n      return this.player_.scrubbing() ? this.player_.getCache().currentTime : this.player_.currentTime();\n    };\n    _proto.getPercent = function getPercent() {\n      var currentTime = this.getCurrentTime_();\n      var percent;\n      var liveTracker = this.player_.liveTracker;\n      if (liveTracker && liveTracker.isLive()) {\n        percent = (currentTime - liveTracker.seekableStart()) / liveTracker.liveWindow();\n        if (liveTracker.atLiveEdge()) {\n          percent = 1;\n        }\n      } else {\n        percent = currentTime / this.player_.duration();\n      }\n      return percent;\n    };\n    _proto.handleMouseDown = function handleMouseDown(event2) {\n      if (!isSingleLeftClick(event2)) {\n        return;\n      }\n      event2.stopPropagation();\n      this.videoWasPlaying = !this.player_.paused();\n      this.player_.pause();\n      _Slider.prototype.handleMouseDown.call(this, event2);\n    };\n    _proto.handleMouseMove = function handleMouseMove(event2, mouseDown) {\n      if (mouseDown === void 0) {\n        mouseDown = false;\n      }\n      if (!isSingleLeftClick(event2)) {\n        return;\n      }\n      if (!mouseDown && !this.player_.scrubbing()) {\n        this.player_.scrubbing(true);\n      }\n      var newTime;\n      var distance = this.calculateDistance(event2);\n      var liveTracker = this.player_.liveTracker;\n      if (!liveTracker || !liveTracker.isLive()) {\n        newTime = distance * this.player_.duration();\n        if (newTime === this.player_.duration()) {\n          newTime = newTime - 0.1;\n        }\n      } else {\n        if (distance >= 0.99) {\n          liveTracker.seekToLiveEdge();\n          return;\n        }\n        var seekableStart = liveTracker.seekableStart();\n        var seekableEnd = liveTracker.liveCurrentTime();\n        newTime = seekableStart + distance * liveTracker.liveWindow();\n        if (newTime >= seekableEnd) {\n          newTime = seekableEnd;\n        }\n        if (newTime <= seekableStart) {\n          newTime = seekableStart + 0.1;\n        }\n        if (newTime === Infinity) {\n          return;\n        }\n      }\n      this.userSeek_(newTime);\n    };\n    _proto.enable = function enable() {\n      _Slider.prototype.enable.call(this);\n      var mouseTimeDisplay = this.getChild(\"mouseTimeDisplay\");\n      if (!mouseTimeDisplay) {\n        return;\n      }\n      mouseTimeDisplay.show();\n    };\n    _proto.disable = function disable() {\n      _Slider.prototype.disable.call(this);\n      var mouseTimeDisplay = this.getChild(\"mouseTimeDisplay\");\n      if (!mouseTimeDisplay) {\n        return;\n      }\n      mouseTimeDisplay.hide();\n    };\n    _proto.handleMouseUp = function handleMouseUp(event2) {\n      _Slider.prototype.handleMouseUp.call(this, event2);\n      if (event2) {\n        event2.stopPropagation();\n      }\n      this.player_.scrubbing(false);\n      this.player_.trigger({\n        type: \"timeupdate\",\n        target: this,\n        manuallyTriggered: true\n      });\n      if (this.videoWasPlaying) {\n        silencePromise(this.player_.play());\n      } else {\n        this.update_();\n      }\n    };\n    _proto.stepForward = function stepForward() {\n      this.userSeek_(this.player_.currentTime() + STEP_SECONDS);\n    };\n    _proto.stepBack = function stepBack() {\n      this.userSeek_(this.player_.currentTime() - STEP_SECONDS);\n    };\n    _proto.handleAction = function handleAction(event2) {\n      if (this.player_.paused()) {\n        this.player_.play();\n      } else {\n        this.player_.pause();\n      }\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      var liveTracker = this.player_.liveTracker;\n      if (keycode__default[\"default\"].isEventKey(event2, \"Space\") || keycode__default[\"default\"].isEventKey(event2, \"Enter\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.handleAction(event2);\n      } else if (keycode__default[\"default\"].isEventKey(event2, \"Home\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.userSeek_(0);\n      } else if (keycode__default[\"default\"].isEventKey(event2, \"End\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        if (liveTracker && liveTracker.isLive()) {\n          this.userSeek_(liveTracker.liveCurrentTime());\n        } else {\n          this.userSeek_(this.player_.duration());\n        }\n      } else if (/^[0-9]$/.test(keycode__default[\"default\"](event2))) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        var gotoFraction = (keycode__default[\"default\"].codes[keycode__default[\"default\"](event2)] - keycode__default[\"default\"].codes[\"0\"]) * 10 / 100;\n        if (liveTracker && liveTracker.isLive()) {\n          this.userSeek_(liveTracker.seekableStart() + liveTracker.liveWindow() * gotoFraction);\n        } else {\n          this.userSeek_(this.player_.duration() * gotoFraction);\n        }\n      } else if (keycode__default[\"default\"].isEventKey(event2, \"PgDn\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.userSeek_(this.player_.currentTime() - STEP_SECONDS * PAGE_KEY_MULTIPLIER);\n      } else if (keycode__default[\"default\"].isEventKey(event2, \"PgUp\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.userSeek_(this.player_.currentTime() + STEP_SECONDS * PAGE_KEY_MULTIPLIER);\n      } else {\n        _Slider.prototype.handleKeyDown.call(this, event2);\n      }\n    };\n    _proto.dispose = function dispose() {\n      this.disableInterval_();\n      this.off(this.player_, [\"ended\", \"durationchange\", \"timeupdate\"], this.update);\n      if (this.player_.liveTracker) {\n        this.off(this.player_.liveTracker, \"liveedgechange\", this.update);\n      }\n      this.off(this.player_, [\"playing\"], this.enableIntervalHandler_);\n      this.off(this.player_, [\"ended\", \"pause\", \"waiting\"], this.disableIntervalHandler_);\n      if (\"hidden\" in document__default[\"default\"] && \"visibilityState\" in document__default[\"default\"]) {\n        this.off(document__default[\"default\"], \"visibilitychange\", this.toggleVisibility_);\n      }\n      _Slider.prototype.dispose.call(this);\n    };\n    return SeekBar2;\n  }(Slider);\n  SeekBar.prototype.options_ = {\n    children: [\"loadProgressBar\", \"playProgressBar\"],\n    barName: \"playProgressBar\"\n  };\n  if (!IS_IOS && !IS_ANDROID) {\n    SeekBar.prototype.options_.children.splice(1, 0, \"mouseTimeDisplay\");\n  }\n  Component2.registerComponent(\"SeekBar\", SeekBar);\n  var ProgressControl = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](ProgressControl2, _Component);\n    function ProgressControl2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.handleMouseMove = throttle(bind(_assertThisInitialized__default[\"default\"](_this), _this.handleMouseMove), UPDATE_REFRESH_INTERVAL);\n      _this.throttledHandleMouseSeek = throttle(bind(_assertThisInitialized__default[\"default\"](_this), _this.handleMouseSeek), UPDATE_REFRESH_INTERVAL);\n      _this.handleMouseUpHandler_ = function(e) {\n        return _this.handleMouseUp(e);\n      };\n      _this.handleMouseDownHandler_ = function(e) {\n        return _this.handleMouseDown(e);\n      };\n      _this.enable();\n      return _this;\n    }\n    var _proto = ProgressControl2.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-progress-control vjs-control\"\n      });\n    };\n    _proto.handleMouseMove = function handleMouseMove(event2) {\n      var seekBar = this.getChild(\"seekBar\");\n      if (!seekBar) {\n        return;\n      }\n      var playProgressBar = seekBar.getChild(\"playProgressBar\");\n      var mouseTimeDisplay = seekBar.getChild(\"mouseTimeDisplay\");\n      if (!playProgressBar && !mouseTimeDisplay) {\n        return;\n      }\n      var seekBarEl = seekBar.el();\n      var seekBarRect = findPosition(seekBarEl);\n      var seekBarPoint = getPointerPosition2(seekBarEl, event2).x;\n      seekBarPoint = clamp(seekBarPoint, 0, 1);\n      if (mouseTimeDisplay) {\n        mouseTimeDisplay.update(seekBarRect, seekBarPoint);\n      }\n      if (playProgressBar) {\n        playProgressBar.update(seekBarRect, seekBar.getProgress());\n      }\n    };\n    _proto.handleMouseSeek = function handleMouseSeek(event2) {\n      var seekBar = this.getChild(\"seekBar\");\n      if (seekBar) {\n        seekBar.handleMouseMove(event2);\n      }\n    };\n    _proto.enabled = function enabled() {\n      return this.enabled_;\n    };\n    _proto.disable = function disable() {\n      this.children().forEach(function(child) {\n        return child.disable && child.disable();\n      });\n      if (!this.enabled()) {\n        return;\n      }\n      this.off([\"mousedown\", \"touchstart\"], this.handleMouseDownHandler_);\n      this.off(this.el_, \"mousemove\", this.handleMouseMove);\n      this.removeListenersAddedOnMousedownAndTouchstart();\n      this.addClass(\"disabled\");\n      this.enabled_ = false;\n      if (this.player_.scrubbing()) {\n        var seekBar = this.getChild(\"seekBar\");\n        this.player_.scrubbing(false);\n        if (seekBar.videoWasPlaying) {\n          silencePromise(this.player_.play());\n        }\n      }\n    };\n    _proto.enable = function enable() {\n      this.children().forEach(function(child) {\n        return child.enable && child.enable();\n      });\n      if (this.enabled()) {\n        return;\n      }\n      this.on([\"mousedown\", \"touchstart\"], this.handleMouseDownHandler_);\n      this.on(this.el_, \"mousemove\", this.handleMouseMove);\n      this.removeClass(\"disabled\");\n      this.enabled_ = true;\n    };\n    _proto.removeListenersAddedOnMousedownAndTouchstart = function removeListenersAddedOnMousedownAndTouchstart() {\n      var doc = this.el_.ownerDocument;\n      this.off(doc, \"mousemove\", this.throttledHandleMouseSeek);\n      this.off(doc, \"touchmove\", this.throttledHandleMouseSeek);\n      this.off(doc, \"mouseup\", this.handleMouseUpHandler_);\n      this.off(doc, \"touchend\", this.handleMouseUpHandler_);\n    };\n    _proto.handleMouseDown = function handleMouseDown(event2) {\n      var doc = this.el_.ownerDocument;\n      var seekBar = this.getChild(\"seekBar\");\n      if (seekBar) {\n        seekBar.handleMouseDown(event2);\n      }\n      this.on(doc, \"mousemove\", this.throttledHandleMouseSeek);\n      this.on(doc, \"touchmove\", this.throttledHandleMouseSeek);\n      this.on(doc, \"mouseup\", this.handleMouseUpHandler_);\n      this.on(doc, \"touchend\", this.handleMouseUpHandler_);\n    };\n    _proto.handleMouseUp = function handleMouseUp(event2) {\n      var seekBar = this.getChild(\"seekBar\");\n      if (seekBar) {\n        seekBar.handleMouseUp(event2);\n      }\n      this.removeListenersAddedOnMousedownAndTouchstart();\n    };\n    return ProgressControl2;\n  }(Component2);\n  ProgressControl.prototype.options_ = {\n    children: [\"seekBar\"]\n  };\n  Component2.registerComponent(\"ProgressControl\", ProgressControl);\n  var PictureInPictureToggle = /* @__PURE__ */ function(_Button) {\n    _inheritsLoose__default[\"default\"](PictureInPictureToggle2, _Button);\n    function PictureInPictureToggle2(player, options) {\n      var _this;\n      _this = _Button.call(this, player, options) || this;\n      _this.on(player, [\"enterpictureinpicture\", \"leavepictureinpicture\"], function(e) {\n        return _this.handlePictureInPictureChange(e);\n      });\n      _this.on(player, [\"disablepictureinpicturechanged\", \"loadedmetadata\"], function(e) {\n        return _this.handlePictureInPictureEnabledChange(e);\n      });\n      _this.on(player, [\"loadedmetadata\", \"audioonlymodechange\", \"audiopostermodechange\"], function() {\n        var isSourceAudio = player.currentType().substring(0, 5) === \"audio\";\n        if (isSourceAudio || player.audioPosterMode() || player.audioOnlyMode()) {\n          if (player.isInPictureInPicture()) {\n            player.exitPictureInPicture();\n          }\n          _this.hide();\n        } else {\n          _this.show();\n        }\n      });\n      _this.disable();\n      return _this;\n    }\n    var _proto = PictureInPictureToggle2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-picture-in-picture-control \" + _Button.prototype.buildCSSClass.call(this);\n    };\n    _proto.handlePictureInPictureEnabledChange = function handlePictureInPictureEnabledChange() {\n      if (document__default[\"default\"].pictureInPictureEnabled && this.player_.disablePictureInPicture() === false) {\n        this.enable();\n      } else {\n        this.disable();\n      }\n    };\n    _proto.handlePictureInPictureChange = function handlePictureInPictureChange(event2) {\n      if (this.player_.isInPictureInPicture()) {\n        this.controlText(\"Exit Picture-in-Picture\");\n      } else {\n        this.controlText(\"Picture-in-Picture\");\n      }\n      this.handlePictureInPictureEnabledChange();\n    };\n    _proto.handleClick = function handleClick(event2) {\n      if (!this.player_.isInPictureInPicture()) {\n        this.player_.requestPictureInPicture();\n      } else {\n        this.player_.exitPictureInPicture();\n      }\n    };\n    return PictureInPictureToggle2;\n  }(Button2);\n  PictureInPictureToggle.prototype.controlText_ = \"Picture-in-Picture\";\n  Component2.registerComponent(\"PictureInPictureToggle\", PictureInPictureToggle);\n  var FullscreenToggle = /* @__PURE__ */ function(_Button) {\n    _inheritsLoose__default[\"default\"](FullscreenToggle2, _Button);\n    function FullscreenToggle2(player, options) {\n      var _this;\n      _this = _Button.call(this, player, options) || this;\n      _this.on(player, \"fullscreenchange\", function(e) {\n        return _this.handleFullscreenChange(e);\n      });\n      if (document__default[\"default\"][player.fsApi_.fullscreenEnabled] === false) {\n        _this.disable();\n      }\n      return _this;\n    }\n    var _proto = FullscreenToggle2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-fullscreen-control \" + _Button.prototype.buildCSSClass.call(this);\n    };\n    _proto.handleFullscreenChange = function handleFullscreenChange(event2) {\n      if (this.player_.isFullscreen()) {\n        this.controlText(\"Non-Fullscreen\");\n      } else {\n        this.controlText(\"Fullscreen\");\n      }\n    };\n    _proto.handleClick = function handleClick(event2) {\n      if (!this.player_.isFullscreen()) {\n        this.player_.requestFullscreen();\n      } else {\n        this.player_.exitFullscreen();\n      }\n    };\n    return FullscreenToggle2;\n  }(Button2);\n  FullscreenToggle.prototype.controlText_ = \"Fullscreen\";\n  Component2.registerComponent(\"FullscreenToggle\", FullscreenToggle);\n  var checkVolumeSupport = function checkVolumeSupport2(self2, player) {\n    if (player.tech_ && !player.tech_.featuresVolumeControl) {\n      self2.addClass(\"vjs-hidden\");\n    }\n    self2.on(player, \"loadstart\", function() {\n      if (!player.tech_.featuresVolumeControl) {\n        self2.addClass(\"vjs-hidden\");\n      } else {\n        self2.removeClass(\"vjs-hidden\");\n      }\n    });\n  };\n  var VolumeLevel = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](VolumeLevel2, _Component);\n    function VolumeLevel2() {\n      return _Component.apply(this, arguments) || this;\n    }\n    var _proto = VolumeLevel2.prototype;\n    _proto.createEl = function createEl2() {\n      var el = _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-volume-level\"\n      });\n      el.appendChild(_Component.prototype.createEl.call(this, \"span\", {\n        className: \"vjs-control-text\"\n      }));\n      return el;\n    };\n    return VolumeLevel2;\n  }(Component2);\n  Component2.registerComponent(\"VolumeLevel\", VolumeLevel);\n  var VolumeLevelTooltip = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](VolumeLevelTooltip2, _Component);\n    function VolumeLevelTooltip2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.update = throttle(bind(_assertThisInitialized__default[\"default\"](_this), _this.update), UPDATE_REFRESH_INTERVAL);\n      return _this;\n    }\n    var _proto = VolumeLevelTooltip2.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-volume-tooltip\"\n      }, {\n        \"aria-hidden\": \"true\"\n      });\n    };\n    _proto.update = function update(rangeBarRect, rangeBarPoint, vertical, content) {\n      if (!vertical) {\n        var tooltipRect = getBoundingClientRect(this.el_);\n        var playerRect = getBoundingClientRect(this.player_.el());\n        var volumeBarPointPx = rangeBarRect.width * rangeBarPoint;\n        if (!playerRect || !tooltipRect) {\n          return;\n        }\n        var spaceLeftOfPoint = rangeBarRect.left - playerRect.left + volumeBarPointPx;\n        var spaceRightOfPoint = rangeBarRect.width - volumeBarPointPx + (playerRect.right - rangeBarRect.right);\n        var pullTooltipBy = tooltipRect.width / 2;\n        if (spaceLeftOfPoint < pullTooltipBy) {\n          pullTooltipBy += pullTooltipBy - spaceLeftOfPoint;\n        } else if (spaceRightOfPoint < pullTooltipBy) {\n          pullTooltipBy = spaceRightOfPoint;\n        }\n        if (pullTooltipBy < 0) {\n          pullTooltipBy = 0;\n        } else if (pullTooltipBy > tooltipRect.width) {\n          pullTooltipBy = tooltipRect.width;\n        }\n        this.el_.style.right = \"-\" + pullTooltipBy + \"px\";\n      }\n      this.write(content + \"%\");\n    };\n    _proto.write = function write(content) {\n      textContent(this.el_, content);\n    };\n    _proto.updateVolume = function updateVolume(rangeBarRect, rangeBarPoint, vertical, volume, cb) {\n      var _this2 = this;\n      this.requestNamedAnimationFrame(\"VolumeLevelTooltip#updateVolume\", function() {\n        _this2.update(rangeBarRect, rangeBarPoint, vertical, volume.toFixed(0));\n        if (cb) {\n          cb();\n        }\n      });\n    };\n    return VolumeLevelTooltip2;\n  }(Component2);\n  Component2.registerComponent(\"VolumeLevelTooltip\", VolumeLevelTooltip);\n  var MouseVolumeLevelDisplay = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](MouseVolumeLevelDisplay2, _Component);\n    function MouseVolumeLevelDisplay2(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      _this.update = throttle(bind(_assertThisInitialized__default[\"default\"](_this), _this.update), UPDATE_REFRESH_INTERVAL);\n      return _this;\n    }\n    var _proto = MouseVolumeLevelDisplay2.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-mouse-display\"\n      });\n    };\n    _proto.update = function update(rangeBarRect, rangeBarPoint, vertical) {\n      var _this2 = this;\n      var volume = 100 * rangeBarPoint;\n      this.getChild(\"volumeLevelTooltip\").updateVolume(rangeBarRect, rangeBarPoint, vertical, volume, function() {\n        if (vertical) {\n          _this2.el_.style.bottom = rangeBarRect.height * rangeBarPoint + \"px\";\n        } else {\n          _this2.el_.style.left = rangeBarRect.width * rangeBarPoint + \"px\";\n        }\n      });\n    };\n    return MouseVolumeLevelDisplay2;\n  }(Component2);\n  MouseVolumeLevelDisplay.prototype.options_ = {\n    children: [\"volumeLevelTooltip\"]\n  };\n  Component2.registerComponent(\"MouseVolumeLevelDisplay\", MouseVolumeLevelDisplay);\n  var VolumeBar = /* @__PURE__ */ function(_Slider) {\n    _inheritsLoose__default[\"default\"](VolumeBar2, _Slider);\n    function VolumeBar2(player, options) {\n      var _this;\n      _this = _Slider.call(this, player, options) || this;\n      _this.on(\"slideractive\", function(e) {\n        return _this.updateLastVolume_(e);\n      });\n      _this.on(player, \"volumechange\", function(e) {\n        return _this.updateARIAAttributes(e);\n      });\n      player.ready(function() {\n        return _this.updateARIAAttributes();\n      });\n      return _this;\n    }\n    var _proto = VolumeBar2.prototype;\n    _proto.createEl = function createEl2() {\n      return _Slider.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-volume-bar vjs-slider-bar\"\n      }, {\n        \"aria-label\": this.localize(\"Volume Level\"),\n        \"aria-live\": \"polite\"\n      });\n    };\n    _proto.handleMouseDown = function handleMouseDown(event2) {\n      if (!isSingleLeftClick(event2)) {\n        return;\n      }\n      _Slider.prototype.handleMouseDown.call(this, event2);\n    };\n    _proto.handleMouseMove = function handleMouseMove(event2) {\n      var mouseVolumeLevelDisplay = this.getChild(\"mouseVolumeLevelDisplay\");\n      if (mouseVolumeLevelDisplay) {\n        var volumeBarEl = this.el();\n        var volumeBarRect = getBoundingClientRect(volumeBarEl);\n        var vertical = this.vertical();\n        var volumeBarPoint = getPointerPosition2(volumeBarEl, event2);\n        volumeBarPoint = vertical ? volumeBarPoint.y : volumeBarPoint.x;\n        volumeBarPoint = clamp(volumeBarPoint, 0, 1);\n        mouseVolumeLevelDisplay.update(volumeBarRect, volumeBarPoint, vertical);\n      }\n      if (!isSingleLeftClick(event2)) {\n        return;\n      }\n      this.checkMuted();\n      this.player_.volume(this.calculateDistance(event2));\n    };\n    _proto.checkMuted = function checkMuted() {\n      if (this.player_.muted()) {\n        this.player_.muted(false);\n      }\n    };\n    _proto.getPercent = function getPercent() {\n      if (this.player_.muted()) {\n        return 0;\n      }\n      return this.player_.volume();\n    };\n    _proto.stepForward = function stepForward() {\n      this.checkMuted();\n      this.player_.volume(this.player_.volume() + 0.1);\n    };\n    _proto.stepBack = function stepBack() {\n      this.checkMuted();\n      this.player_.volume(this.player_.volume() - 0.1);\n    };\n    _proto.updateARIAAttributes = function updateARIAAttributes(event2) {\n      var ariaValue = this.player_.muted() ? 0 : this.volumeAsPercentage_();\n      this.el_.setAttribute(\"aria-valuenow\", ariaValue);\n      this.el_.setAttribute(\"aria-valuetext\", ariaValue + \"%\");\n    };\n    _proto.volumeAsPercentage_ = function volumeAsPercentage_() {\n      return Math.round(this.player_.volume() * 100);\n    };\n    _proto.updateLastVolume_ = function updateLastVolume_() {\n      var _this2 = this;\n      var volumeBeforeDrag = this.player_.volume();\n      this.one(\"sliderinactive\", function() {\n        if (_this2.player_.volume() === 0) {\n          _this2.player_.lastVolume_(volumeBeforeDrag);\n        }\n      });\n    };\n    return VolumeBar2;\n  }(Slider);\n  VolumeBar.prototype.options_ = {\n    children: [\"volumeLevel\"],\n    barName: \"volumeLevel\"\n  };\n  if (!IS_IOS && !IS_ANDROID) {\n    VolumeBar.prototype.options_.children.splice(0, 0, \"mouseVolumeLevelDisplay\");\n  }\n  VolumeBar.prototype.playerEvent = \"volumechange\";\n  Component2.registerComponent(\"VolumeBar\", VolumeBar);\n  var VolumeControl = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](VolumeControl2, _Component);\n    function VolumeControl2(player, options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      options.vertical = options.vertical || false;\n      if (typeof options.volumeBar === \"undefined\" || isPlain(options.volumeBar)) {\n        options.volumeBar = options.volumeBar || {};\n        options.volumeBar.vertical = options.vertical;\n      }\n      _this = _Component.call(this, player, options) || this;\n      checkVolumeSupport(_assertThisInitialized__default[\"default\"](_this), player);\n      _this.throttledHandleMouseMove = throttle(bind(_assertThisInitialized__default[\"default\"](_this), _this.handleMouseMove), UPDATE_REFRESH_INTERVAL);\n      _this.handleMouseUpHandler_ = function(e) {\n        return _this.handleMouseUp(e);\n      };\n      _this.on(\"mousedown\", function(e) {\n        return _this.handleMouseDown(e);\n      });\n      _this.on(\"touchstart\", function(e) {\n        return _this.handleMouseDown(e);\n      });\n      _this.on(\"mousemove\", function(e) {\n        return _this.handleMouseMove(e);\n      });\n      _this.on(_this.volumeBar, [\"focus\", \"slideractive\"], function() {\n        _this.volumeBar.addClass(\"vjs-slider-active\");\n        _this.addClass(\"vjs-slider-active\");\n        _this.trigger(\"slideractive\");\n      });\n      _this.on(_this.volumeBar, [\"blur\", \"sliderinactive\"], function() {\n        _this.volumeBar.removeClass(\"vjs-slider-active\");\n        _this.removeClass(\"vjs-slider-active\");\n        _this.trigger(\"sliderinactive\");\n      });\n      return _this;\n    }\n    var _proto = VolumeControl2.prototype;\n    _proto.createEl = function createEl2() {\n      var orientationClass = \"vjs-volume-horizontal\";\n      if (this.options_.vertical) {\n        orientationClass = \"vjs-volume-vertical\";\n      }\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-volume-control vjs-control \" + orientationClass\n      });\n    };\n    _proto.handleMouseDown = function handleMouseDown(event2) {\n      var doc = this.el_.ownerDocument;\n      this.on(doc, \"mousemove\", this.throttledHandleMouseMove);\n      this.on(doc, \"touchmove\", this.throttledHandleMouseMove);\n      this.on(doc, \"mouseup\", this.handleMouseUpHandler_);\n      this.on(doc, \"touchend\", this.handleMouseUpHandler_);\n    };\n    _proto.handleMouseUp = function handleMouseUp(event2) {\n      var doc = this.el_.ownerDocument;\n      this.off(doc, \"mousemove\", this.throttledHandleMouseMove);\n      this.off(doc, \"touchmove\", this.throttledHandleMouseMove);\n      this.off(doc, \"mouseup\", this.handleMouseUpHandler_);\n      this.off(doc, \"touchend\", this.handleMouseUpHandler_);\n    };\n    _proto.handleMouseMove = function handleMouseMove(event2) {\n      this.volumeBar.handleMouseMove(event2);\n    };\n    return VolumeControl2;\n  }(Component2);\n  VolumeControl.prototype.options_ = {\n    children: [\"volumeBar\"]\n  };\n  Component2.registerComponent(\"VolumeControl\", VolumeControl);\n  var checkMuteSupport = function checkMuteSupport2(self2, player) {\n    if (player.tech_ && !player.tech_.featuresMuteControl) {\n      self2.addClass(\"vjs-hidden\");\n    }\n    self2.on(player, \"loadstart\", function() {\n      if (!player.tech_.featuresMuteControl) {\n        self2.addClass(\"vjs-hidden\");\n      } else {\n        self2.removeClass(\"vjs-hidden\");\n      }\n    });\n  };\n  var MuteToggle = /* @__PURE__ */ function(_Button) {\n    _inheritsLoose__default[\"default\"](MuteToggle2, _Button);\n    function MuteToggle2(player, options) {\n      var _this;\n      _this = _Button.call(this, player, options) || this;\n      checkMuteSupport(_assertThisInitialized__default[\"default\"](_this), player);\n      _this.on(player, [\"loadstart\", \"volumechange\"], function(e) {\n        return _this.update(e);\n      });\n      return _this;\n    }\n    var _proto = MuteToggle2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-mute-control \" + _Button.prototype.buildCSSClass.call(this);\n    };\n    _proto.handleClick = function handleClick(event2) {\n      var vol = this.player_.volume();\n      var lastVolume = this.player_.lastVolume_();\n      if (vol === 0) {\n        var volumeToSet = lastVolume < 0.1 ? 0.1 : lastVolume;\n        this.player_.volume(volumeToSet);\n        this.player_.muted(false);\n      } else {\n        this.player_.muted(this.player_.muted() ? false : true);\n      }\n    };\n    _proto.update = function update(event2) {\n      this.updateIcon_();\n      this.updateControlText_();\n    };\n    _proto.updateIcon_ = function updateIcon_() {\n      var vol = this.player_.volume();\n      var level = 3;\n      if (IS_IOS && this.player_.tech_ && this.player_.tech_.el_) {\n        this.player_.muted(this.player_.tech_.el_.muted);\n      }\n      if (vol === 0 || this.player_.muted()) {\n        level = 0;\n      } else if (vol < 0.33) {\n        level = 1;\n      } else if (vol < 0.67) {\n        level = 2;\n      }\n      for (var i2 = 0; i2 < 4; i2++) {\n        removeClass(this.el_, \"vjs-vol-\" + i2);\n      }\n      addClass(this.el_, \"vjs-vol-\" + level);\n    };\n    _proto.updateControlText_ = function updateControlText_() {\n      var soundOff = this.player_.muted() || this.player_.volume() === 0;\n      var text = soundOff ? \"Unmute\" : \"Mute\";\n      if (this.controlText() !== text) {\n        this.controlText(text);\n      }\n    };\n    return MuteToggle2;\n  }(Button2);\n  MuteToggle.prototype.controlText_ = \"Mute\";\n  Component2.registerComponent(\"MuteToggle\", MuteToggle);\n  var VolumePanel = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](VolumePanel2, _Component);\n    function VolumePanel2(player, options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      if (typeof options.inline !== \"undefined\") {\n        options.inline = options.inline;\n      } else {\n        options.inline = true;\n      }\n      if (typeof options.volumeControl === \"undefined\" || isPlain(options.volumeControl)) {\n        options.volumeControl = options.volumeControl || {};\n        options.volumeControl.vertical = !options.inline;\n      }\n      _this = _Component.call(this, player, options) || this;\n      _this.handleKeyPressHandler_ = function(e) {\n        return _this.handleKeyPress(e);\n      };\n      _this.on(player, [\"loadstart\"], function(e) {\n        return _this.volumePanelState_(e);\n      });\n      _this.on(_this.muteToggle, \"keyup\", function(e) {\n        return _this.handleKeyPress(e);\n      });\n      _this.on(_this.volumeControl, \"keyup\", function(e) {\n        return _this.handleVolumeControlKeyUp(e);\n      });\n      _this.on(\"keydown\", function(e) {\n        return _this.handleKeyPress(e);\n      });\n      _this.on(\"mouseover\", function(e) {\n        return _this.handleMouseOver(e);\n      });\n      _this.on(\"mouseout\", function(e) {\n        return _this.handleMouseOut(e);\n      });\n      _this.on(_this.volumeControl, [\"slideractive\"], _this.sliderActive_);\n      _this.on(_this.volumeControl, [\"sliderinactive\"], _this.sliderInactive_);\n      return _this;\n    }\n    var _proto = VolumePanel2.prototype;\n    _proto.sliderActive_ = function sliderActive_() {\n      this.addClass(\"vjs-slider-active\");\n    };\n    _proto.sliderInactive_ = function sliderInactive_() {\n      this.removeClass(\"vjs-slider-active\");\n    };\n    _proto.volumePanelState_ = function volumePanelState_() {\n      if (this.volumeControl.hasClass(\"vjs-hidden\") && this.muteToggle.hasClass(\"vjs-hidden\")) {\n        this.addClass(\"vjs-hidden\");\n      }\n      if (this.volumeControl.hasClass(\"vjs-hidden\") && !this.muteToggle.hasClass(\"vjs-hidden\")) {\n        this.addClass(\"vjs-mute-toggle-only\");\n      }\n    };\n    _proto.createEl = function createEl2() {\n      var orientationClass = \"vjs-volume-panel-horizontal\";\n      if (!this.options_.inline) {\n        orientationClass = \"vjs-volume-panel-vertical\";\n      }\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-volume-panel vjs-control \" + orientationClass\n      });\n    };\n    _proto.dispose = function dispose() {\n      this.handleMouseOut();\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.handleVolumeControlKeyUp = function handleVolumeControlKeyUp(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Esc\")) {\n        this.muteToggle.focus();\n      }\n    };\n    _proto.handleMouseOver = function handleMouseOver(event2) {\n      this.addClass(\"vjs-hover\");\n      on(document__default[\"default\"], \"keyup\", this.handleKeyPressHandler_);\n    };\n    _proto.handleMouseOut = function handleMouseOut(event2) {\n      this.removeClass(\"vjs-hover\");\n      off(document__default[\"default\"], \"keyup\", this.handleKeyPressHandler_);\n    };\n    _proto.handleKeyPress = function handleKeyPress(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Esc\")) {\n        this.handleMouseOut();\n      }\n    };\n    return VolumePanel2;\n  }(Component2);\n  VolumePanel.prototype.options_ = {\n    children: [\"muteToggle\", \"volumeControl\"]\n  };\n  Component2.registerComponent(\"VolumePanel\", VolumePanel);\n  var Menu2 = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](Menu3, _Component);\n    function Menu3(player, options) {\n      var _this;\n      _this = _Component.call(this, player, options) || this;\n      if (options) {\n        _this.menuButton_ = options.menuButton;\n      }\n      _this.focusedChild_ = -1;\n      _this.on(\"keydown\", function(e) {\n        return _this.handleKeyDown(e);\n      });\n      _this.boundHandleBlur_ = function(e) {\n        return _this.handleBlur(e);\n      };\n      _this.boundHandleTapClick_ = function(e) {\n        return _this.handleTapClick(e);\n      };\n      return _this;\n    }\n    var _proto = Menu3.prototype;\n    _proto.addEventListenerForItem = function addEventListenerForItem(component) {\n      if (!(component instanceof Component2)) {\n        return;\n      }\n      this.on(component, \"blur\", this.boundHandleBlur_);\n      this.on(component, [\"tap\", \"click\"], this.boundHandleTapClick_);\n    };\n    _proto.removeEventListenerForItem = function removeEventListenerForItem(component) {\n      if (!(component instanceof Component2)) {\n        return;\n      }\n      this.off(component, \"blur\", this.boundHandleBlur_);\n      this.off(component, [\"tap\", \"click\"], this.boundHandleTapClick_);\n    };\n    _proto.removeChild = function removeChild(component) {\n      if (typeof component === \"string\") {\n        component = this.getChild(component);\n      }\n      this.removeEventListenerForItem(component);\n      _Component.prototype.removeChild.call(this, component);\n    };\n    _proto.addItem = function addItem(component) {\n      var childComponent = this.addChild(component);\n      if (childComponent) {\n        this.addEventListenerForItem(childComponent);\n      }\n    };\n    _proto.createEl = function createEl$1() {\n      var contentElType = this.options_.contentElType || \"ul\";\n      this.contentEl_ = createEl(contentElType, {\n        className: \"vjs-menu-content\"\n      });\n      this.contentEl_.setAttribute(\"role\", \"menu\");\n      var el = _Component.prototype.createEl.call(this, \"div\", {\n        append: this.contentEl_,\n        className: \"vjs-menu\"\n      });\n      el.appendChild(this.contentEl_);\n      on(el, \"click\", function(event2) {\n        event2.preventDefault();\n        event2.stopImmediatePropagation();\n      });\n      return el;\n    };\n    _proto.dispose = function dispose() {\n      this.contentEl_ = null;\n      this.boundHandleBlur_ = null;\n      this.boundHandleTapClick_ = null;\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.handleBlur = function handleBlur(event2) {\n      var relatedTarget = event2.relatedTarget || document__default[\"default\"].activeElement;\n      if (!this.children().some(function(element) {\n        return element.el() === relatedTarget;\n      })) {\n        var btn = this.menuButton_;\n        if (btn && btn.buttonPressed_ && relatedTarget !== btn.el().firstChild) {\n          btn.unpressButton();\n        }\n      }\n    };\n    _proto.handleTapClick = function handleTapClick(event2) {\n      if (this.menuButton_) {\n        this.menuButton_.unpressButton();\n        var childComponents = this.children();\n        if (!Array.isArray(childComponents)) {\n          return;\n        }\n        var foundComponent = childComponents.filter(function(component) {\n          return component.el() === event2.target;\n        })[0];\n        if (!foundComponent) {\n          return;\n        }\n        if (foundComponent.name() !== \"CaptionSettingsMenuItem\") {\n          this.menuButton_.focus();\n        }\n      }\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Left\") || keycode__default[\"default\"].isEventKey(event2, \"Down\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.stepForward();\n      } else if (keycode__default[\"default\"].isEventKey(event2, \"Right\") || keycode__default[\"default\"].isEventKey(event2, \"Up\")) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        this.stepBack();\n      }\n    };\n    _proto.stepForward = function stepForward() {\n      var stepChild = 0;\n      if (this.focusedChild_ !== void 0) {\n        stepChild = this.focusedChild_ + 1;\n      }\n      this.focus(stepChild);\n    };\n    _proto.stepBack = function stepBack() {\n      var stepChild = 0;\n      if (this.focusedChild_ !== void 0) {\n        stepChild = this.focusedChild_ - 1;\n      }\n      this.focus(stepChild);\n    };\n    _proto.focus = function focus(item) {\n      if (item === void 0) {\n        item = 0;\n      }\n      var children = this.children().slice();\n      var haveTitle = children.length && children[0].hasClass(\"vjs-menu-title\");\n      if (haveTitle) {\n        children.shift();\n      }\n      if (children.length > 0) {\n        if (item < 0) {\n          item = 0;\n        } else if (item >= children.length) {\n          item = children.length - 1;\n        }\n        this.focusedChild_ = item;\n        children[item].el_.focus();\n      }\n    };\n    return Menu3;\n  }(Component2);\n  Component2.registerComponent(\"Menu\", Menu2);\n  var MenuButton2 = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](MenuButton3, _Component);\n    function MenuButton3(player, options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      _this = _Component.call(this, player, options) || this;\n      _this.menuButton_ = new Button2(player, options);\n      _this.menuButton_.controlText(_this.controlText_);\n      _this.menuButton_.el_.setAttribute(\"aria-haspopup\", \"true\");\n      var buttonClass = Button2.prototype.buildCSSClass();\n      _this.menuButton_.el_.className = _this.buildCSSClass() + \" \" + buttonClass;\n      _this.menuButton_.removeClass(\"vjs-control\");\n      _this.addChild(_this.menuButton_);\n      _this.update();\n      _this.enabled_ = true;\n      var handleClick = function handleClick2(e) {\n        return _this.handleClick(e);\n      };\n      _this.handleMenuKeyUp_ = function(e) {\n        return _this.handleMenuKeyUp(e);\n      };\n      _this.on(_this.menuButton_, \"tap\", handleClick);\n      _this.on(_this.menuButton_, \"click\", handleClick);\n      _this.on(_this.menuButton_, \"keydown\", function(e) {\n        return _this.handleKeyDown(e);\n      });\n      _this.on(_this.menuButton_, \"mouseenter\", function() {\n        _this.addClass(\"vjs-hover\");\n        _this.menu.show();\n        on(document__default[\"default\"], \"keyup\", _this.handleMenuKeyUp_);\n      });\n      _this.on(\"mouseleave\", function(e) {\n        return _this.handleMouseLeave(e);\n      });\n      _this.on(\"keydown\", function(e) {\n        return _this.handleSubmenuKeyDown(e);\n      });\n      return _this;\n    }\n    var _proto = MenuButton3.prototype;\n    _proto.update = function update() {\n      var menu = this.createMenu();\n      if (this.menu) {\n        this.menu.dispose();\n        this.removeChild(this.menu);\n      }\n      this.menu = menu;\n      this.addChild(menu);\n      this.buttonPressed_ = false;\n      this.menuButton_.el_.setAttribute(\"aria-expanded\", \"false\");\n      if (this.items && this.items.length <= this.hideThreshold_) {\n        this.hide();\n        this.menu.contentEl_.removeAttribute(\"role\");\n      } else {\n        this.show();\n        this.menu.contentEl_.setAttribute(\"role\", \"menu\");\n      }\n    };\n    _proto.createMenu = function createMenu() {\n      var menu = new Menu2(this.player_, {\n        menuButton: this\n      });\n      this.hideThreshold_ = 0;\n      if (this.options_.title) {\n        var titleEl = createEl(\"li\", {\n          className: \"vjs-menu-title\",\n          textContent: toTitleCase2(this.options_.title),\n          tabIndex: -1\n        });\n        var titleComponent = new Component2(this.player_, {\n          el: titleEl\n        });\n        menu.addItem(titleComponent);\n      }\n      this.items = this.createItems();\n      if (this.items) {\n        for (var i2 = 0; i2 < this.items.length; i2++) {\n          menu.addItem(this.items[i2]);\n        }\n      }\n      return menu;\n    };\n    _proto.createItems = function createItems() {\n    };\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: this.buildWrapperCSSClass()\n      }, {});\n    };\n    _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n      var menuButtonClass = \"vjs-menu-button\";\n      if (this.options_.inline === true) {\n        menuButtonClass += \"-inline\";\n      } else {\n        menuButtonClass += \"-popup\";\n      }\n      var buttonClass = Button2.prototype.buildCSSClass();\n      return \"vjs-menu-button \" + menuButtonClass + \" \" + buttonClass + \" \" + _Component.prototype.buildCSSClass.call(this);\n    };\n    _proto.buildCSSClass = function buildCSSClass() {\n      var menuButtonClass = \"vjs-menu-button\";\n      if (this.options_.inline === true) {\n        menuButtonClass += \"-inline\";\n      } else {\n        menuButtonClass += \"-popup\";\n      }\n      return \"vjs-menu-button \" + menuButtonClass + \" \" + _Component.prototype.buildCSSClass.call(this);\n    };\n    _proto.controlText = function controlText(text, el) {\n      if (el === void 0) {\n        el = this.menuButton_.el();\n      }\n      return this.menuButton_.controlText(text, el);\n    };\n    _proto.dispose = function dispose() {\n      this.handleMouseLeave();\n      _Component.prototype.dispose.call(this);\n    };\n    _proto.handleClick = function handleClick(event2) {\n      if (this.buttonPressed_) {\n        this.unpressButton();\n      } else {\n        this.pressButton();\n      }\n    };\n    _proto.handleMouseLeave = function handleMouseLeave(event2) {\n      this.removeClass(\"vjs-hover\");\n      off(document__default[\"default\"], \"keyup\", this.handleMenuKeyUp_);\n    };\n    _proto.focus = function focus() {\n      this.menuButton_.focus();\n    };\n    _proto.blur = function blur() {\n      this.menuButton_.blur();\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Esc\") || keycode__default[\"default\"].isEventKey(event2, \"Tab\")) {\n        if (this.buttonPressed_) {\n          this.unpressButton();\n        }\n        if (!keycode__default[\"default\"].isEventKey(event2, \"Tab\")) {\n          event2.preventDefault();\n          this.menuButton_.focus();\n        }\n      } else if (keycode__default[\"default\"].isEventKey(event2, \"Up\") || keycode__default[\"default\"].isEventKey(event2, \"Down\")) {\n        if (!this.buttonPressed_) {\n          event2.preventDefault();\n          this.pressButton();\n        }\n      }\n    };\n    _proto.handleMenuKeyUp = function handleMenuKeyUp(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Esc\") || keycode__default[\"default\"].isEventKey(event2, \"Tab\")) {\n        this.removeClass(\"vjs-hover\");\n      }\n    };\n    _proto.handleSubmenuKeyPress = function handleSubmenuKeyPress(event2) {\n      this.handleSubmenuKeyDown(event2);\n    };\n    _proto.handleSubmenuKeyDown = function handleSubmenuKeyDown(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Esc\") || keycode__default[\"default\"].isEventKey(event2, \"Tab\")) {\n        if (this.buttonPressed_) {\n          this.unpressButton();\n        }\n        if (!keycode__default[\"default\"].isEventKey(event2, \"Tab\")) {\n          event2.preventDefault();\n          this.menuButton_.focus();\n        }\n      }\n    };\n    _proto.pressButton = function pressButton() {\n      if (this.enabled_) {\n        this.buttonPressed_ = true;\n        this.menu.show();\n        this.menu.lockShowing();\n        this.menuButton_.el_.setAttribute(\"aria-expanded\", \"true\");\n        if (IS_IOS && isInFrame()) {\n          return;\n        }\n        this.menu.focus();\n      }\n    };\n    _proto.unpressButton = function unpressButton() {\n      if (this.enabled_) {\n        this.buttonPressed_ = false;\n        this.menu.unlockShowing();\n        this.menu.hide();\n        this.menuButton_.el_.setAttribute(\"aria-expanded\", \"false\");\n      }\n    };\n    _proto.disable = function disable() {\n      this.unpressButton();\n      this.enabled_ = false;\n      this.addClass(\"vjs-disabled\");\n      this.menuButton_.disable();\n    };\n    _proto.enable = function enable() {\n      this.enabled_ = true;\n      this.removeClass(\"vjs-disabled\");\n      this.menuButton_.enable();\n    };\n    return MenuButton3;\n  }(Component2);\n  Component2.registerComponent(\"MenuButton\", MenuButton2);\n  var TrackButton = /* @__PURE__ */ function(_MenuButton) {\n    _inheritsLoose__default[\"default\"](TrackButton2, _MenuButton);\n    function TrackButton2(player, options) {\n      var _this;\n      var tracks = options.tracks;\n      _this = _MenuButton.call(this, player, options) || this;\n      if (_this.items.length <= 1) {\n        _this.hide();\n      }\n      if (!tracks) {\n        return _assertThisInitialized__default[\"default\"](_this);\n      }\n      var updateHandler = bind(_assertThisInitialized__default[\"default\"](_this), _this.update);\n      tracks.addEventListener(\"removetrack\", updateHandler);\n      tracks.addEventListener(\"addtrack\", updateHandler);\n      tracks.addEventListener(\"labelchange\", updateHandler);\n      _this.player_.on(\"ready\", updateHandler);\n      _this.player_.on(\"dispose\", function() {\n        tracks.removeEventListener(\"removetrack\", updateHandler);\n        tracks.removeEventListener(\"addtrack\", updateHandler);\n        tracks.removeEventListener(\"labelchange\", updateHandler);\n      });\n      return _this;\n    }\n    return TrackButton2;\n  }(MenuButton2);\n  Component2.registerComponent(\"TrackButton\", TrackButton);\n  var MenuKeys = [\"Tab\", \"Esc\", \"Up\", \"Down\", \"Right\", \"Left\"];\n  var MenuItem2 = /* @__PURE__ */ function(_ClickableComponent) {\n    _inheritsLoose__default[\"default\"](MenuItem3, _ClickableComponent);\n    function MenuItem3(player, options) {\n      var _this;\n      _this = _ClickableComponent.call(this, player, options) || this;\n      _this.selectable = options.selectable;\n      _this.isSelected_ = options.selected || false;\n      _this.multiSelectable = options.multiSelectable;\n      _this.selected(_this.isSelected_);\n      if (_this.selectable) {\n        if (_this.multiSelectable) {\n          _this.el_.setAttribute(\"role\", \"menuitemcheckbox\");\n        } else {\n          _this.el_.setAttribute(\"role\", \"menuitemradio\");\n        }\n      } else {\n        _this.el_.setAttribute(\"role\", \"menuitem\");\n      }\n      return _this;\n    }\n    var _proto = MenuItem3.prototype;\n    _proto.createEl = function createEl$1(type, props, attrs) {\n      this.nonIconControl = true;\n      var el = _ClickableComponent.prototype.createEl.call(this, \"li\", assign({\n        className: \"vjs-menu-item\",\n        tabIndex: -1\n      }, props), attrs);\n      el.replaceChild(createEl(\"span\", {\n        className: \"vjs-menu-item-text\",\n        textContent: this.localize(this.options_.label)\n      }), el.querySelector(\".vjs-icon-placeholder\"));\n      return el;\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      if (!MenuKeys.some(function(key) {\n        return keycode__default[\"default\"].isEventKey(event2, key);\n      })) {\n        _ClickableComponent.prototype.handleKeyDown.call(this, event2);\n      }\n    };\n    _proto.handleClick = function handleClick(event2) {\n      this.selected(true);\n    };\n    _proto.selected = function selected(_selected) {\n      if (this.selectable) {\n        if (_selected) {\n          this.addClass(\"vjs-selected\");\n          this.el_.setAttribute(\"aria-checked\", \"true\");\n          this.controlText(\", selected\");\n          this.isSelected_ = true;\n        } else {\n          this.removeClass(\"vjs-selected\");\n          this.el_.setAttribute(\"aria-checked\", \"false\");\n          this.controlText(\"\");\n          this.isSelected_ = false;\n        }\n      }\n    };\n    return MenuItem3;\n  }(ClickableComponent2);\n  Component2.registerComponent(\"MenuItem\", MenuItem2);\n  var TextTrackMenuItem = /* @__PURE__ */ function(_MenuItem) {\n    _inheritsLoose__default[\"default\"](TextTrackMenuItem2, _MenuItem);\n    function TextTrackMenuItem2(player, options) {\n      var _this;\n      var track = options.track;\n      var tracks = player.textTracks();\n      options.label = track.label || track.language || \"Unknown\";\n      options.selected = track.mode === \"showing\";\n      _this = _MenuItem.call(this, player, options) || this;\n      _this.track = track;\n      _this.kinds = (options.kinds || [options.kind || _this.track.kind]).filter(Boolean);\n      var changeHandler = function changeHandler2() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        _this.handleTracksChange.apply(_assertThisInitialized__default[\"default\"](_this), args);\n      };\n      var selectedLanguageChangeHandler = function selectedLanguageChangeHandler2() {\n        for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n          args[_key2] = arguments[_key2];\n        }\n        _this.handleSelectedLanguageChange.apply(_assertThisInitialized__default[\"default\"](_this), args);\n      };\n      player.on([\"loadstart\", \"texttrackchange\"], changeHandler);\n      tracks.addEventListener(\"change\", changeHandler);\n      tracks.addEventListener(\"selectedlanguagechange\", selectedLanguageChangeHandler);\n      _this.on(\"dispose\", function() {\n        player.off([\"loadstart\", \"texttrackchange\"], changeHandler);\n        tracks.removeEventListener(\"change\", changeHandler);\n        tracks.removeEventListener(\"selectedlanguagechange\", selectedLanguageChangeHandler);\n      });\n      if (tracks.onchange === void 0) {\n        var event2;\n        _this.on([\"tap\", \"click\"], function() {\n          if (typeof window__default[\"default\"].Event !== \"object\") {\n            try {\n              event2 = new window__default[\"default\"].Event(\"change\");\n            } catch (err) {\n            }\n          }\n          if (!event2) {\n            event2 = document__default[\"default\"].createEvent(\"Event\");\n            event2.initEvent(\"change\", true, true);\n          }\n          tracks.dispatchEvent(event2);\n        });\n      }\n      _this.handleTracksChange();\n      return _this;\n    }\n    var _proto = TextTrackMenuItem2.prototype;\n    _proto.handleClick = function handleClick(event2) {\n      var referenceTrack = this.track;\n      var tracks = this.player_.textTracks();\n      _MenuItem.prototype.handleClick.call(this, event2);\n      if (!tracks) {\n        return;\n      }\n      for (var i2 = 0; i2 < tracks.length; i2++) {\n        var track = tracks[i2];\n        if (this.kinds.indexOf(track.kind) === -1) {\n          continue;\n        }\n        if (track === referenceTrack) {\n          if (track.mode !== \"showing\") {\n            track.mode = \"showing\";\n          }\n        } else if (track.mode !== \"disabled\") {\n          track.mode = \"disabled\";\n        }\n      }\n    };\n    _proto.handleTracksChange = function handleTracksChange(event2) {\n      var shouldBeSelected = this.track.mode === \"showing\";\n      if (shouldBeSelected !== this.isSelected_) {\n        this.selected(shouldBeSelected);\n      }\n    };\n    _proto.handleSelectedLanguageChange = function handleSelectedLanguageChange(event2) {\n      if (this.track.mode === \"showing\") {\n        var selectedLanguage = this.player_.cache_.selectedLanguage;\n        if (selectedLanguage && selectedLanguage.enabled && selectedLanguage.language === this.track.language && selectedLanguage.kind !== this.track.kind) {\n          return;\n        }\n        this.player_.cache_.selectedLanguage = {\n          enabled: true,\n          language: this.track.language,\n          kind: this.track.kind\n        };\n      }\n    };\n    _proto.dispose = function dispose() {\n      this.track = null;\n      _MenuItem.prototype.dispose.call(this);\n    };\n    return TextTrackMenuItem2;\n  }(MenuItem2);\n  Component2.registerComponent(\"TextTrackMenuItem\", TextTrackMenuItem);\n  var OffTextTrackMenuItem = /* @__PURE__ */ function(_TextTrackMenuItem) {\n    _inheritsLoose__default[\"default\"](OffTextTrackMenuItem2, _TextTrackMenuItem);\n    function OffTextTrackMenuItem2(player, options) {\n      options.track = {\n        player,\n        // it is no longer necessary to store `kind` or `kinds` on the track itself\n        // since they are now stored in the `kinds` property of all instances of\n        // TextTrackMenuItem, but this will remain for backwards compatibility\n        kind: options.kind,\n        kinds: options.kinds,\n        \"default\": false,\n        mode: \"disabled\"\n      };\n      if (!options.kinds) {\n        options.kinds = [options.kind];\n      }\n      if (options.label) {\n        options.track.label = options.label;\n      } else {\n        options.track.label = options.kinds.join(\" and \") + \" off\";\n      }\n      options.selectable = true;\n      options.multiSelectable = false;\n      return _TextTrackMenuItem.call(this, player, options) || this;\n    }\n    var _proto = OffTextTrackMenuItem2.prototype;\n    _proto.handleTracksChange = function handleTracksChange(event2) {\n      var tracks = this.player().textTracks();\n      var shouldBeSelected = true;\n      for (var i2 = 0, l = tracks.length; i2 < l; i2++) {\n        var track = tracks[i2];\n        if (this.options_.kinds.indexOf(track.kind) > -1 && track.mode === \"showing\") {\n          shouldBeSelected = false;\n          break;\n        }\n      }\n      if (shouldBeSelected !== this.isSelected_) {\n        this.selected(shouldBeSelected);\n      }\n    };\n    _proto.handleSelectedLanguageChange = function handleSelectedLanguageChange(event2) {\n      var tracks = this.player().textTracks();\n      var allHidden = true;\n      for (var i2 = 0, l = tracks.length; i2 < l; i2++) {\n        var track = tracks[i2];\n        if ([\"captions\", \"descriptions\", \"subtitles\"].indexOf(track.kind) > -1 && track.mode === \"showing\") {\n          allHidden = false;\n          break;\n        }\n      }\n      if (allHidden) {\n        this.player_.cache_.selectedLanguage = {\n          enabled: false\n        };\n      }\n    };\n    return OffTextTrackMenuItem2;\n  }(TextTrackMenuItem);\n  Component2.registerComponent(\"OffTextTrackMenuItem\", OffTextTrackMenuItem);\n  var TextTrackButton = /* @__PURE__ */ function(_TrackButton) {\n    _inheritsLoose__default[\"default\"](TextTrackButton2, _TrackButton);\n    function TextTrackButton2(player, options) {\n      if (options === void 0) {\n        options = {};\n      }\n      options.tracks = player.textTracks();\n      return _TrackButton.call(this, player, options) || this;\n    }\n    var _proto = TextTrackButton2.prototype;\n    _proto.createItems = function createItems(items, TrackMenuItem) {\n      if (items === void 0) {\n        items = [];\n      }\n      if (TrackMenuItem === void 0) {\n        TrackMenuItem = TextTrackMenuItem;\n      }\n      var label;\n      if (this.label_) {\n        label = this.label_ + \" off\";\n      }\n      items.push(new OffTextTrackMenuItem(this.player_, {\n        kinds: this.kinds_,\n        kind: this.kind_,\n        label\n      }));\n      this.hideThreshold_ += 1;\n      var tracks = this.player_.textTracks();\n      if (!Array.isArray(this.kinds_)) {\n        this.kinds_ = [this.kind_];\n      }\n      for (var i2 = 0; i2 < tracks.length; i2++) {\n        var track = tracks[i2];\n        if (this.kinds_.indexOf(track.kind) > -1) {\n          var item = new TrackMenuItem(this.player_, {\n            track,\n            kinds: this.kinds_,\n            kind: this.kind_,\n            // MenuItem is selectable\n            selectable: true,\n            // MenuItem is NOT multiSelectable (i.e. only one can be marked \"selected\" at a time)\n            multiSelectable: false\n          });\n          item.addClass(\"vjs-\" + track.kind + \"-menu-item\");\n          items.push(item);\n        }\n      }\n      return items;\n    };\n    return TextTrackButton2;\n  }(TrackButton);\n  Component2.registerComponent(\"TextTrackButton\", TextTrackButton);\n  var ChaptersTrackMenuItem = /* @__PURE__ */ function(_MenuItem) {\n    _inheritsLoose__default[\"default\"](ChaptersTrackMenuItem2, _MenuItem);\n    function ChaptersTrackMenuItem2(player, options) {\n      var _this;\n      var track = options.track;\n      var cue = options.cue;\n      var currentTime = player.currentTime();\n      options.selectable = true;\n      options.multiSelectable = false;\n      options.label = cue.text;\n      options.selected = cue.startTime <= currentTime && currentTime < cue.endTime;\n      _this = _MenuItem.call(this, player, options) || this;\n      _this.track = track;\n      _this.cue = cue;\n      return _this;\n    }\n    var _proto = ChaptersTrackMenuItem2.prototype;\n    _proto.handleClick = function handleClick(event2) {\n      _MenuItem.prototype.handleClick.call(this);\n      this.player_.currentTime(this.cue.startTime);\n    };\n    return ChaptersTrackMenuItem2;\n  }(MenuItem2);\n  Component2.registerComponent(\"ChaptersTrackMenuItem\", ChaptersTrackMenuItem);\n  var ChaptersButton = /* @__PURE__ */ function(_TextTrackButton) {\n    _inheritsLoose__default[\"default\"](ChaptersButton2, _TextTrackButton);\n    function ChaptersButton2(player, options, ready) {\n      var _this;\n      _this = _TextTrackButton.call(this, player, options, ready) || this;\n      _this.selectCurrentItem_ = function() {\n        _this.items.forEach(function(item) {\n          item.selected(_this.track_.activeCues[0] === item.cue);\n        });\n      };\n      return _this;\n    }\n    var _proto = ChaptersButton2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-chapters-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n    };\n    _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n      return \"vjs-chapters-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n    };\n    _proto.update = function update(event2) {\n      if (event2 && event2.track && event2.track.kind !== \"chapters\") {\n        return;\n      }\n      var track = this.findChaptersTrack();\n      if (track !== this.track_) {\n        this.setTrack(track);\n        _TextTrackButton.prototype.update.call(this);\n      } else if (!this.items || track && track.cues && track.cues.length !== this.items.length) {\n        _TextTrackButton.prototype.update.call(this);\n      }\n    };\n    _proto.setTrack = function setTrack(track) {\n      if (this.track_ === track) {\n        return;\n      }\n      if (!this.updateHandler_) {\n        this.updateHandler_ = this.update.bind(this);\n      }\n      if (this.track_) {\n        var remoteTextTrackEl = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);\n        if (remoteTextTrackEl) {\n          remoteTextTrackEl.removeEventListener(\"load\", this.updateHandler_);\n        }\n        this.track_.removeEventListener(\"cuechange\", this.selectCurrentItem_);\n        this.track_ = null;\n      }\n      this.track_ = track;\n      if (this.track_) {\n        this.track_.mode = \"hidden\";\n        var _remoteTextTrackEl = this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);\n        if (_remoteTextTrackEl) {\n          _remoteTextTrackEl.addEventListener(\"load\", this.updateHandler_);\n        }\n        this.track_.addEventListener(\"cuechange\", this.selectCurrentItem_);\n      }\n    };\n    _proto.findChaptersTrack = function findChaptersTrack() {\n      var tracks = this.player_.textTracks() || [];\n      for (var i2 = tracks.length - 1; i2 >= 0; i2--) {\n        var track = tracks[i2];\n        if (track.kind === this.kind_) {\n          return track;\n        }\n      }\n    };\n    _proto.getMenuCaption = function getMenuCaption() {\n      if (this.track_ && this.track_.label) {\n        return this.track_.label;\n      }\n      return this.localize(toTitleCase2(this.kind_));\n    };\n    _proto.createMenu = function createMenu() {\n      this.options_.title = this.getMenuCaption();\n      return _TextTrackButton.prototype.createMenu.call(this);\n    };\n    _proto.createItems = function createItems() {\n      var items = [];\n      if (!this.track_) {\n        return items;\n      }\n      var cues = this.track_.cues;\n      if (!cues) {\n        return items;\n      }\n      for (var i2 = 0, l = cues.length; i2 < l; i2++) {\n        var cue = cues[i2];\n        var mi = new ChaptersTrackMenuItem(this.player_, {\n          track: this.track_,\n          cue\n        });\n        items.push(mi);\n      }\n      return items;\n    };\n    return ChaptersButton2;\n  }(TextTrackButton);\n  ChaptersButton.prototype.kind_ = \"chapters\";\n  ChaptersButton.prototype.controlText_ = \"Chapters\";\n  Component2.registerComponent(\"ChaptersButton\", ChaptersButton);\n  var DescriptionsButton = /* @__PURE__ */ function(_TextTrackButton) {\n    _inheritsLoose__default[\"default\"](DescriptionsButton2, _TextTrackButton);\n    function DescriptionsButton2(player, options, ready) {\n      var _this;\n      _this = _TextTrackButton.call(this, player, options, ready) || this;\n      var tracks = player.textTracks();\n      var changeHandler = bind(_assertThisInitialized__default[\"default\"](_this), _this.handleTracksChange);\n      tracks.addEventListener(\"change\", changeHandler);\n      _this.on(\"dispose\", function() {\n        tracks.removeEventListener(\"change\", changeHandler);\n      });\n      return _this;\n    }\n    var _proto = DescriptionsButton2.prototype;\n    _proto.handleTracksChange = function handleTracksChange(event2) {\n      var tracks = this.player().textTracks();\n      var disabled = false;\n      for (var i2 = 0, l = tracks.length; i2 < l; i2++) {\n        var track = tracks[i2];\n        if (track.kind !== this.kind_ && track.mode === \"showing\") {\n          disabled = true;\n          break;\n        }\n      }\n      if (disabled) {\n        this.disable();\n      } else {\n        this.enable();\n      }\n    };\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-descriptions-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n    };\n    _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n      return \"vjs-descriptions-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n    };\n    return DescriptionsButton2;\n  }(TextTrackButton);\n  DescriptionsButton.prototype.kind_ = \"descriptions\";\n  DescriptionsButton.prototype.controlText_ = \"Descriptions\";\n  Component2.registerComponent(\"DescriptionsButton\", DescriptionsButton);\n  var SubtitlesButton = /* @__PURE__ */ function(_TextTrackButton) {\n    _inheritsLoose__default[\"default\"](SubtitlesButton2, _TextTrackButton);\n    function SubtitlesButton2(player, options, ready) {\n      return _TextTrackButton.call(this, player, options, ready) || this;\n    }\n    var _proto = SubtitlesButton2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-subtitles-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n    };\n    _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n      return \"vjs-subtitles-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n    };\n    return SubtitlesButton2;\n  }(TextTrackButton);\n  SubtitlesButton.prototype.kind_ = \"subtitles\";\n  SubtitlesButton.prototype.controlText_ = \"Subtitles\";\n  Component2.registerComponent(\"SubtitlesButton\", SubtitlesButton);\n  var CaptionSettingsMenuItem = /* @__PURE__ */ function(_TextTrackMenuItem) {\n    _inheritsLoose__default[\"default\"](CaptionSettingsMenuItem2, _TextTrackMenuItem);\n    function CaptionSettingsMenuItem2(player, options) {\n      var _this;\n      options.track = {\n        player,\n        kind: options.kind,\n        label: options.kind + \" settings\",\n        selectable: false,\n        \"default\": false,\n        mode: \"disabled\"\n      };\n      options.selectable = false;\n      options.name = \"CaptionSettingsMenuItem\";\n      _this = _TextTrackMenuItem.call(this, player, options) || this;\n      _this.addClass(\"vjs-texttrack-settings\");\n      _this.controlText(\", opens \" + options.kind + \" settings dialog\");\n      return _this;\n    }\n    var _proto = CaptionSettingsMenuItem2.prototype;\n    _proto.handleClick = function handleClick(event2) {\n      this.player().getChild(\"textTrackSettings\").open();\n    };\n    return CaptionSettingsMenuItem2;\n  }(TextTrackMenuItem);\n  Component2.registerComponent(\"CaptionSettingsMenuItem\", CaptionSettingsMenuItem);\n  var CaptionsButton2 = /* @__PURE__ */ function(_TextTrackButton) {\n    _inheritsLoose__default[\"default\"](CaptionsButton3, _TextTrackButton);\n    function CaptionsButton3(player, options, ready) {\n      return _TextTrackButton.call(this, player, options, ready) || this;\n    }\n    var _proto = CaptionsButton3.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-captions-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n    };\n    _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n      return \"vjs-captions-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n    };\n    _proto.createItems = function createItems() {\n      var items = [];\n      if (!(this.player().tech_ && this.player().tech_.featuresNativeTextTracks) && this.player().getChild(\"textTrackSettings\")) {\n        items.push(new CaptionSettingsMenuItem(this.player_, {\n          kind: this.kind_\n        }));\n        this.hideThreshold_ += 1;\n      }\n      return _TextTrackButton.prototype.createItems.call(this, items);\n    };\n    return CaptionsButton3;\n  }(TextTrackButton);\n  CaptionsButton2.prototype.kind_ = \"captions\";\n  CaptionsButton2.prototype.controlText_ = \"Captions\";\n  Component2.registerComponent(\"CaptionsButton\", CaptionsButton2);\n  var SubsCapsMenuItem = /* @__PURE__ */ function(_TextTrackMenuItem) {\n    _inheritsLoose__default[\"default\"](SubsCapsMenuItem2, _TextTrackMenuItem);\n    function SubsCapsMenuItem2() {\n      return _TextTrackMenuItem.apply(this, arguments) || this;\n    }\n    var _proto = SubsCapsMenuItem2.prototype;\n    _proto.createEl = function createEl$1(type, props, attrs) {\n      var el = _TextTrackMenuItem.prototype.createEl.call(this, type, props, attrs);\n      var parentSpan = el.querySelector(\".vjs-menu-item-text\");\n      if (this.options_.track.kind === \"captions\") {\n        parentSpan.appendChild(createEl(\"span\", {\n          className: \"vjs-icon-placeholder\"\n        }, {\n          \"aria-hidden\": true\n        }));\n        parentSpan.appendChild(createEl(\"span\", {\n          className: \"vjs-control-text\",\n          // space added as the text will visually flow with the\n          // label\n          textContent: \" \" + this.localize(\"Captions\")\n        }));\n      }\n      return el;\n    };\n    return SubsCapsMenuItem2;\n  }(TextTrackMenuItem);\n  Component2.registerComponent(\"SubsCapsMenuItem\", SubsCapsMenuItem);\n  var SubsCapsButton = /* @__PURE__ */ function(_TextTrackButton) {\n    _inheritsLoose__default[\"default\"](SubsCapsButton2, _TextTrackButton);\n    function SubsCapsButton2(player, options) {\n      var _this;\n      if (options === void 0) {\n        options = {};\n      }\n      _this = _TextTrackButton.call(this, player, options) || this;\n      _this.label_ = \"subtitles\";\n      if ([\"en\", \"en-us\", \"en-ca\", \"fr-ca\"].indexOf(_this.player_.language_) > -1) {\n        _this.label_ = \"captions\";\n      }\n      _this.menuButton_.controlText(toTitleCase2(_this.label_));\n      return _this;\n    }\n    var _proto = SubsCapsButton2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-subs-caps-button \" + _TextTrackButton.prototype.buildCSSClass.call(this);\n    };\n    _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n      return \"vjs-subs-caps-button \" + _TextTrackButton.prototype.buildWrapperCSSClass.call(this);\n    };\n    _proto.createItems = function createItems() {\n      var items = [];\n      if (!(this.player().tech_ && this.player().tech_.featuresNativeTextTracks) && this.player().getChild(\"textTrackSettings\")) {\n        items.push(new CaptionSettingsMenuItem(this.player_, {\n          kind: this.label_\n        }));\n        this.hideThreshold_ += 1;\n      }\n      items = _TextTrackButton.prototype.createItems.call(this, items, SubsCapsMenuItem);\n      return items;\n    };\n    return SubsCapsButton2;\n  }(TextTrackButton);\n  SubsCapsButton.prototype.kinds_ = [\"captions\", \"subtitles\"];\n  SubsCapsButton.prototype.controlText_ = \"Subtitles\";\n  Component2.registerComponent(\"SubsCapsButton\", SubsCapsButton);\n  var AudioTrackMenuItem = /* @__PURE__ */ function(_MenuItem) {\n    _inheritsLoose__default[\"default\"](AudioTrackMenuItem2, _MenuItem);\n    function AudioTrackMenuItem2(player, options) {\n      var _this;\n      var track = options.track;\n      var tracks = player.audioTracks();\n      options.label = track.label || track.language || \"Unknown\";\n      options.selected = track.enabled;\n      _this = _MenuItem.call(this, player, options) || this;\n      _this.track = track;\n      _this.addClass(\"vjs-\" + track.kind + \"-menu-item\");\n      var changeHandler = function changeHandler2() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        _this.handleTracksChange.apply(_assertThisInitialized__default[\"default\"](_this), args);\n      };\n      tracks.addEventListener(\"change\", changeHandler);\n      _this.on(\"dispose\", function() {\n        tracks.removeEventListener(\"change\", changeHandler);\n      });\n      return _this;\n    }\n    var _proto = AudioTrackMenuItem2.prototype;\n    _proto.createEl = function createEl$1(type, props, attrs) {\n      var el = _MenuItem.prototype.createEl.call(this, type, props, attrs);\n      var parentSpan = el.querySelector(\".vjs-menu-item-text\");\n      if (this.options_.track.kind === \"main-desc\") {\n        parentSpan.appendChild(createEl(\"span\", {\n          className: \"vjs-icon-placeholder\"\n        }, {\n          \"aria-hidden\": true\n        }));\n        parentSpan.appendChild(createEl(\"span\", {\n          className: \"vjs-control-text\",\n          textContent: \" \" + this.localize(\"Descriptions\")\n        }));\n      }\n      return el;\n    };\n    _proto.handleClick = function handleClick(event2) {\n      _MenuItem.prototype.handleClick.call(this, event2);\n      this.track.enabled = true;\n      if (this.player_.tech_.featuresNativeAudioTracks) {\n        var tracks = this.player_.audioTracks();\n        for (var i2 = 0; i2 < tracks.length; i2++) {\n          var track = tracks[i2];\n          if (track === this.track) {\n            continue;\n          }\n          track.enabled = track === this.track;\n        }\n      }\n    };\n    _proto.handleTracksChange = function handleTracksChange(event2) {\n      this.selected(this.track.enabled);\n    };\n    return AudioTrackMenuItem2;\n  }(MenuItem2);\n  Component2.registerComponent(\"AudioTrackMenuItem\", AudioTrackMenuItem);\n  var AudioTrackButton = /* @__PURE__ */ function(_TrackButton) {\n    _inheritsLoose__default[\"default\"](AudioTrackButton2, _TrackButton);\n    function AudioTrackButton2(player, options) {\n      if (options === void 0) {\n        options = {};\n      }\n      options.tracks = player.audioTracks();\n      return _TrackButton.call(this, player, options) || this;\n    }\n    var _proto = AudioTrackButton2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-audio-button \" + _TrackButton.prototype.buildCSSClass.call(this);\n    };\n    _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n      return \"vjs-audio-button \" + _TrackButton.prototype.buildWrapperCSSClass.call(this);\n    };\n    _proto.createItems = function createItems(items) {\n      if (items === void 0) {\n        items = [];\n      }\n      this.hideThreshold_ = 1;\n      var tracks = this.player_.audioTracks();\n      for (var i2 = 0; i2 < tracks.length; i2++) {\n        var track = tracks[i2];\n        items.push(new AudioTrackMenuItem(this.player_, {\n          track,\n          // MenuItem is selectable\n          selectable: true,\n          // MenuItem is NOT multiSelectable (i.e. only one can be marked \"selected\" at a time)\n          multiSelectable: false\n        }));\n      }\n      return items;\n    };\n    return AudioTrackButton2;\n  }(TrackButton);\n  AudioTrackButton.prototype.controlText_ = \"Audio Track\";\n  Component2.registerComponent(\"AudioTrackButton\", AudioTrackButton);\n  var PlaybackRateMenuItem = /* @__PURE__ */ function(_MenuItem) {\n    _inheritsLoose__default[\"default\"](PlaybackRateMenuItem2, _MenuItem);\n    function PlaybackRateMenuItem2(player, options) {\n      var _this;\n      var label = options.rate;\n      var rate = parseFloat(label, 10);\n      options.label = label;\n      options.selected = rate === player.playbackRate();\n      options.selectable = true;\n      options.multiSelectable = false;\n      _this = _MenuItem.call(this, player, options) || this;\n      _this.label = label;\n      _this.rate = rate;\n      _this.on(player, \"ratechange\", function(e) {\n        return _this.update(e);\n      });\n      return _this;\n    }\n    var _proto = PlaybackRateMenuItem2.prototype;\n    _proto.handleClick = function handleClick(event2) {\n      _MenuItem.prototype.handleClick.call(this);\n      this.player().playbackRate(this.rate);\n    };\n    _proto.update = function update(event2) {\n      this.selected(this.player().playbackRate() === this.rate);\n    };\n    return PlaybackRateMenuItem2;\n  }(MenuItem2);\n  PlaybackRateMenuItem.prototype.contentElType = \"button\";\n  Component2.registerComponent(\"PlaybackRateMenuItem\", PlaybackRateMenuItem);\n  var PlaybackRateMenuButton2 = /* @__PURE__ */ function(_MenuButton) {\n    _inheritsLoose__default[\"default\"](PlaybackRateMenuButton3, _MenuButton);\n    function PlaybackRateMenuButton3(player, options) {\n      var _this;\n      _this = _MenuButton.call(this, player, options) || this;\n      _this.menuButton_.el_.setAttribute(\"aria-describedby\", _this.labelElId_);\n      _this.updateVisibility();\n      _this.updateLabel();\n      _this.on(player, \"loadstart\", function(e) {\n        return _this.updateVisibility(e);\n      });\n      _this.on(player, \"ratechange\", function(e) {\n        return _this.updateLabel(e);\n      });\n      _this.on(player, \"playbackrateschange\", function(e) {\n        return _this.handlePlaybackRateschange(e);\n      });\n      return _this;\n    }\n    var _proto = PlaybackRateMenuButton3.prototype;\n    _proto.createEl = function createEl$1() {\n      var el = _MenuButton.prototype.createEl.call(this);\n      this.labelElId_ = \"vjs-playback-rate-value-label-\" + this.id_;\n      this.labelEl_ = createEl(\"div\", {\n        className: \"vjs-playback-rate-value\",\n        id: this.labelElId_,\n        textContent: \"1x\"\n      });\n      el.appendChild(this.labelEl_);\n      return el;\n    };\n    _proto.dispose = function dispose() {\n      this.labelEl_ = null;\n      _MenuButton.prototype.dispose.call(this);\n    };\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-playback-rate \" + _MenuButton.prototype.buildCSSClass.call(this);\n    };\n    _proto.buildWrapperCSSClass = function buildWrapperCSSClass() {\n      return \"vjs-playback-rate \" + _MenuButton.prototype.buildWrapperCSSClass.call(this);\n    };\n    _proto.createItems = function createItems() {\n      var rates = this.playbackRates();\n      var items = [];\n      for (var i2 = rates.length - 1; i2 >= 0; i2--) {\n        items.push(new PlaybackRateMenuItem(this.player(), {\n          rate: rates[i2] + \"x\"\n        }));\n      }\n      return items;\n    };\n    _proto.updateARIAAttributes = function updateARIAAttributes() {\n      this.el().setAttribute(\"aria-valuenow\", this.player().playbackRate());\n    };\n    _proto.handleClick = function handleClick(event2) {\n      var currentRate = this.player().playbackRate();\n      var rates = this.playbackRates();\n      var currentIndex = rates.indexOf(currentRate);\n      var newIndex = (currentIndex + 1) % rates.length;\n      this.player().playbackRate(rates[newIndex]);\n    };\n    _proto.handlePlaybackRateschange = function handlePlaybackRateschange(event2) {\n      this.update();\n    };\n    _proto.playbackRates = function playbackRates() {\n      var player = this.player();\n      return player.playbackRates && player.playbackRates() || [];\n    };\n    _proto.playbackRateSupported = function playbackRateSupported() {\n      return this.player().tech_ && this.player().tech_.featuresPlaybackRate && this.playbackRates() && this.playbackRates().length > 0;\n    };\n    _proto.updateVisibility = function updateVisibility(event2) {\n      if (this.playbackRateSupported()) {\n        this.removeClass(\"vjs-hidden\");\n      } else {\n        this.addClass(\"vjs-hidden\");\n      }\n    };\n    _proto.updateLabel = function updateLabel(event2) {\n      if (this.playbackRateSupported()) {\n        this.labelEl_.textContent = this.player().playbackRate() + \"x\";\n      }\n    };\n    return PlaybackRateMenuButton3;\n  }(MenuButton2);\n  PlaybackRateMenuButton2.prototype.controlText_ = \"Playback Rate\";\n  Component2.registerComponent(\"PlaybackRateMenuButton\", PlaybackRateMenuButton2);\n  var Spacer = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](Spacer2, _Component);\n    function Spacer2() {\n      return _Component.apply(this, arguments) || this;\n    }\n    var _proto = Spacer2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-spacer \" + _Component.prototype.buildCSSClass.call(this);\n    };\n    _proto.createEl = function createEl2(tag, props, attributes) {\n      if (tag === void 0) {\n        tag = \"div\";\n      }\n      if (props === void 0) {\n        props = {};\n      }\n      if (attributes === void 0) {\n        attributes = {};\n      }\n      if (!props.className) {\n        props.className = this.buildCSSClass();\n      }\n      return _Component.prototype.createEl.call(this, tag, props, attributes);\n    };\n    return Spacer2;\n  }(Component2);\n  Component2.registerComponent(\"Spacer\", Spacer);\n  var CustomControlSpacer = /* @__PURE__ */ function(_Spacer) {\n    _inheritsLoose__default[\"default\"](CustomControlSpacer2, _Spacer);\n    function CustomControlSpacer2() {\n      return _Spacer.apply(this, arguments) || this;\n    }\n    var _proto = CustomControlSpacer2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-custom-control-spacer \" + _Spacer.prototype.buildCSSClass.call(this);\n    };\n    _proto.createEl = function createEl2() {\n      return _Spacer.prototype.createEl.call(this, \"div\", {\n        className: this.buildCSSClass(),\n        // No-flex/table-cell mode requires there be some content\n        // in the cell to fill the remaining space of the table.\n        textContent: \" \"\n      });\n    };\n    return CustomControlSpacer2;\n  }(Spacer);\n  Component2.registerComponent(\"CustomControlSpacer\", CustomControlSpacer);\n  var ControlBar = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](ControlBar2, _Component);\n    function ControlBar2() {\n      return _Component.apply(this, arguments) || this;\n    }\n    var _proto = ControlBar2.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"div\", {\n        className: \"vjs-control-bar\",\n        dir: \"ltr\"\n      });\n    };\n    return ControlBar2;\n  }(Component2);\n  ControlBar.prototype.options_ = {\n    children: [\"playToggle\", \"volumePanel\", \"currentTimeDisplay\", \"timeDivider\", \"durationDisplay\", \"progressControl\", \"liveDisplay\", \"seekToLive\", \"remainingTimeDisplay\", \"customControlSpacer\", \"playbackRateMenuButton\", \"chaptersButton\", \"descriptionsButton\", \"subsCapsButton\", \"audioTrackButton\", \"fullscreenToggle\"]\n  };\n  if (\"exitPictureInPicture\" in document__default[\"default\"]) {\n    ControlBar.prototype.options_.children.splice(ControlBar.prototype.options_.children.length - 1, 0, \"pictureInPictureToggle\");\n  }\n  Component2.registerComponent(\"ControlBar\", ControlBar);\n  var ErrorDisplay = /* @__PURE__ */ function(_ModalDialog) {\n    _inheritsLoose__default[\"default\"](ErrorDisplay2, _ModalDialog);\n    function ErrorDisplay2(player, options) {\n      var _this;\n      _this = _ModalDialog.call(this, player, options) || this;\n      _this.on(player, \"error\", function(e) {\n        return _this.open(e);\n      });\n      return _this;\n    }\n    var _proto = ErrorDisplay2.prototype;\n    _proto.buildCSSClass = function buildCSSClass() {\n      return \"vjs-error-display \" + _ModalDialog.prototype.buildCSSClass.call(this);\n    };\n    _proto.content = function content() {\n      var error = this.player().error();\n      return error ? this.localize(error.message) : \"\";\n    };\n    return ErrorDisplay2;\n  }(ModalDialog);\n  ErrorDisplay.prototype.options_ = _extends__default[\"default\"]({}, ModalDialog.prototype.options_, {\n    pauseOnOpen: false,\n    fillAlways: true,\n    temporary: false,\n    uncloseable: true\n  });\n  Component2.registerComponent(\"ErrorDisplay\", ErrorDisplay);\n  var LOCAL_STORAGE_KEY = \"vjs-text-track-settings\";\n  var COLOR_BLACK = [\"#000\", \"Black\"];\n  var COLOR_BLUE = [\"#00F\", \"Blue\"];\n  var COLOR_CYAN = [\"#0FF\", \"Cyan\"];\n  var COLOR_GREEN = [\"#0F0\", \"Green\"];\n  var COLOR_MAGENTA = [\"#F0F\", \"Magenta\"];\n  var COLOR_RED = [\"#F00\", \"Red\"];\n  var COLOR_WHITE = [\"#FFF\", \"White\"];\n  var COLOR_YELLOW = [\"#FF0\", \"Yellow\"];\n  var OPACITY_OPAQUE = [\"1\", \"Opaque\"];\n  var OPACITY_SEMI = [\"0.5\", \"Semi-Transparent\"];\n  var OPACITY_TRANS = [\"0\", \"Transparent\"];\n  var selectConfigs = {\n    backgroundColor: {\n      selector: \".vjs-bg-color > select\",\n      id: \"captions-background-color-%s\",\n      label: \"Color\",\n      options: [COLOR_BLACK, COLOR_WHITE, COLOR_RED, COLOR_GREEN, COLOR_BLUE, COLOR_YELLOW, COLOR_MAGENTA, COLOR_CYAN]\n    },\n    backgroundOpacity: {\n      selector: \".vjs-bg-opacity > select\",\n      id: \"captions-background-opacity-%s\",\n      label: \"Transparency\",\n      options: [OPACITY_OPAQUE, OPACITY_SEMI, OPACITY_TRANS]\n    },\n    color: {\n      selector: \".vjs-fg-color > select\",\n      id: \"captions-foreground-color-%s\",\n      label: \"Color\",\n      options: [COLOR_WHITE, COLOR_BLACK, COLOR_RED, COLOR_GREEN, COLOR_BLUE, COLOR_YELLOW, COLOR_MAGENTA, COLOR_CYAN]\n    },\n    edgeStyle: {\n      selector: \".vjs-edge-style > select\",\n      id: \"%s\",\n      label: \"Text Edge Style\",\n      options: [[\"none\", \"None\"], [\"raised\", \"Raised\"], [\"depressed\", \"Depressed\"], [\"uniform\", \"Uniform\"], [\"dropshadow\", \"Dropshadow\"]]\n    },\n    fontFamily: {\n      selector: \".vjs-font-family > select\",\n      id: \"captions-font-family-%s\",\n      label: \"Font Family\",\n      options: [[\"proportionalSansSerif\", \"Proportional Sans-Serif\"], [\"monospaceSansSerif\", \"Monospace Sans-Serif\"], [\"proportionalSerif\", \"Proportional Serif\"], [\"monospaceSerif\", \"Monospace Serif\"], [\"casual\", \"Casual\"], [\"script\", \"Script\"], [\"small-caps\", \"Small Caps\"]]\n    },\n    fontPercent: {\n      selector: \".vjs-font-percent > select\",\n      id: \"captions-font-size-%s\",\n      label: \"Font Size\",\n      options: [[\"0.50\", \"50%\"], [\"0.75\", \"75%\"], [\"1.00\", \"100%\"], [\"1.25\", \"125%\"], [\"1.50\", \"150%\"], [\"1.75\", \"175%\"], [\"2.00\", \"200%\"], [\"3.00\", \"300%\"], [\"4.00\", \"400%\"]],\n      \"default\": 2,\n      parser: function parser(v) {\n        return v === \"1.00\" ? null : Number(v);\n      }\n    },\n    textOpacity: {\n      selector: \".vjs-text-opacity > select\",\n      id: \"captions-foreground-opacity-%s\",\n      label: \"Transparency\",\n      options: [OPACITY_OPAQUE, OPACITY_SEMI]\n    },\n    // Options for this object are defined below.\n    windowColor: {\n      selector: \".vjs-window-color > select\",\n      id: \"captions-window-color-%s\",\n      label: \"Color\"\n    },\n    // Options for this object are defined below.\n    windowOpacity: {\n      selector: \".vjs-window-opacity > select\",\n      id: \"captions-window-opacity-%s\",\n      label: \"Transparency\",\n      options: [OPACITY_TRANS, OPACITY_SEMI, OPACITY_OPAQUE]\n    }\n  };\n  selectConfigs.windowColor.options = selectConfigs.backgroundColor.options;\n  function parseOptionValue(value, parser) {\n    if (parser) {\n      value = parser(value);\n    }\n    if (value && value !== \"none\") {\n      return value;\n    }\n  }\n  function getSelectedOptionValue(el, parser) {\n    var value = el.options[el.options.selectedIndex].value;\n    return parseOptionValue(value, parser);\n  }\n  function setSelectedOption(el, value, parser) {\n    if (!value) {\n      return;\n    }\n    for (var i2 = 0; i2 < el.options.length; i2++) {\n      if (parseOptionValue(el.options[i2].value, parser) === value) {\n        el.selectedIndex = i2;\n        break;\n      }\n    }\n  }\n  var TextTrackSettings = /* @__PURE__ */ function(_ModalDialog) {\n    _inheritsLoose__default[\"default\"](TextTrackSettings2, _ModalDialog);\n    function TextTrackSettings2(player, options) {\n      var _this;\n      options.temporary = false;\n      _this = _ModalDialog.call(this, player, options) || this;\n      _this.updateDisplay = _this.updateDisplay.bind(_assertThisInitialized__default[\"default\"](_this));\n      _this.fill();\n      _this.hasBeenOpened_ = _this.hasBeenFilled_ = true;\n      _this.endDialog = createEl(\"p\", {\n        className: \"vjs-control-text\",\n        textContent: _this.localize(\"End of dialog window.\")\n      });\n      _this.el().appendChild(_this.endDialog);\n      _this.setDefaults();\n      if (options.persistTextTrackSettings === void 0) {\n        _this.options_.persistTextTrackSettings = _this.options_.playerOptions.persistTextTrackSettings;\n      }\n      _this.on(_this.$(\".vjs-done-button\"), \"click\", function() {\n        _this.saveSettings();\n        _this.close();\n      });\n      _this.on(_this.$(\".vjs-default-button\"), \"click\", function() {\n        _this.setDefaults();\n        _this.updateDisplay();\n      });\n      each(selectConfigs, function(config) {\n        _this.on(_this.$(config.selector), \"change\", _this.updateDisplay);\n      });\n      if (_this.options_.persistTextTrackSettings) {\n        _this.restoreSettings();\n      }\n      return _this;\n    }\n    var _proto = TextTrackSettings2.prototype;\n    _proto.dispose = function dispose() {\n      this.endDialog = null;\n      _ModalDialog.prototype.dispose.call(this);\n    };\n    _proto.createElSelect_ = function createElSelect_(key, legendId, type) {\n      var _this2 = this;\n      if (legendId === void 0) {\n        legendId = \"\";\n      }\n      if (type === void 0) {\n        type = \"label\";\n      }\n      var config = selectConfigs[key];\n      var id = config.id.replace(\"%s\", this.id_);\n      var selectLabelledbyIds = [legendId, id].join(\" \").trim();\n      return [\"<\" + type + ' id=\"' + id + '\" class=\"' + (type === \"label\" ? \"vjs-label\" : \"\") + '\">', this.localize(config.label), \"</\" + type + \">\", '<select aria-labelledby=\"' + selectLabelledbyIds + '\">'].concat(config.options.map(function(o) {\n        var optionId = id + \"-\" + o[1].replace(/\\W+/g, \"\");\n        return ['<option id=\"' + optionId + '\" value=\"' + o[0] + '\" ', 'aria-labelledby=\"' + selectLabelledbyIds + \" \" + optionId + '\">', _this2.localize(o[1]), \"</option>\"].join(\"\");\n      })).concat(\"</select>\").join(\"\");\n    };\n    _proto.createElFgColor_ = function createElFgColor_() {\n      var legendId = \"captions-text-legend-\" + this.id_;\n      return ['<fieldset class=\"vjs-fg-color vjs-track-setting\">', '<legend id=\"' + legendId + '\">', this.localize(\"Text\"), \"</legend>\", this.createElSelect_(\"color\", legendId), '<span class=\"vjs-text-opacity vjs-opacity\">', this.createElSelect_(\"textOpacity\", legendId), \"</span>\", \"</fieldset>\"].join(\"\");\n    };\n    _proto.createElBgColor_ = function createElBgColor_() {\n      var legendId = \"captions-background-\" + this.id_;\n      return ['<fieldset class=\"vjs-bg-color vjs-track-setting\">', '<legend id=\"' + legendId + '\">', this.localize(\"Background\"), \"</legend>\", this.createElSelect_(\"backgroundColor\", legendId), '<span class=\"vjs-bg-opacity vjs-opacity\">', this.createElSelect_(\"backgroundOpacity\", legendId), \"</span>\", \"</fieldset>\"].join(\"\");\n    };\n    _proto.createElWinColor_ = function createElWinColor_() {\n      var legendId = \"captions-window-\" + this.id_;\n      return ['<fieldset class=\"vjs-window-color vjs-track-setting\">', '<legend id=\"' + legendId + '\">', this.localize(\"Window\"), \"</legend>\", this.createElSelect_(\"windowColor\", legendId), '<span class=\"vjs-window-opacity vjs-opacity\">', this.createElSelect_(\"windowOpacity\", legendId), \"</span>\", \"</fieldset>\"].join(\"\");\n    };\n    _proto.createElColors_ = function createElColors_() {\n      return createEl(\"div\", {\n        className: \"vjs-track-settings-colors\",\n        innerHTML: [this.createElFgColor_(), this.createElBgColor_(), this.createElWinColor_()].join(\"\")\n      });\n    };\n    _proto.createElFont_ = function createElFont_() {\n      return createEl(\"div\", {\n        className: \"vjs-track-settings-font\",\n        innerHTML: ['<fieldset class=\"vjs-font-percent vjs-track-setting\">', this.createElSelect_(\"fontPercent\", \"\", \"legend\"), \"</fieldset>\", '<fieldset class=\"vjs-edge-style vjs-track-setting\">', this.createElSelect_(\"edgeStyle\", \"\", \"legend\"), \"</fieldset>\", '<fieldset class=\"vjs-font-family vjs-track-setting\">', this.createElSelect_(\"fontFamily\", \"\", \"legend\"), \"</fieldset>\"].join(\"\")\n      });\n    };\n    _proto.createElControls_ = function createElControls_() {\n      var defaultsDescription = this.localize(\"restore all settings to the default values\");\n      return createEl(\"div\", {\n        className: \"vjs-track-settings-controls\",\n        innerHTML: ['<button type=\"button\" class=\"vjs-default-button\" title=\"' + defaultsDescription + '\">', this.localize(\"Reset\"), '<span class=\"vjs-control-text\"> ' + defaultsDescription + \"</span>\", \"</button>\", '<button type=\"button\" class=\"vjs-done-button\">' + this.localize(\"Done\") + \"</button>\"].join(\"\")\n      });\n    };\n    _proto.content = function content() {\n      return [this.createElColors_(), this.createElFont_(), this.createElControls_()];\n    };\n    _proto.label = function label() {\n      return this.localize(\"Caption Settings Dialog\");\n    };\n    _proto.description = function description() {\n      return this.localize(\"Beginning of dialog window. Escape will cancel and close the window.\");\n    };\n    _proto.buildCSSClass = function buildCSSClass() {\n      return _ModalDialog.prototype.buildCSSClass.call(this) + \" vjs-text-track-settings\";\n    };\n    _proto.getValues = function getValues() {\n      var _this3 = this;\n      return reduce(selectConfigs, function(accum, config, key) {\n        var value = getSelectedOptionValue(_this3.$(config.selector), config.parser);\n        if (value !== void 0) {\n          accum[key] = value;\n        }\n        return accum;\n      }, {});\n    };\n    _proto.setValues = function setValues(values) {\n      var _this4 = this;\n      each(selectConfigs, function(config, key) {\n        setSelectedOption(_this4.$(config.selector), values[key], config.parser);\n      });\n    };\n    _proto.setDefaults = function setDefaults() {\n      var _this5 = this;\n      each(selectConfigs, function(config) {\n        var index = config.hasOwnProperty(\"default\") ? config[\"default\"] : 0;\n        _this5.$(config.selector).selectedIndex = index;\n      });\n    };\n    _proto.restoreSettings = function restoreSettings() {\n      var values;\n      try {\n        values = JSON.parse(window__default[\"default\"].localStorage.getItem(LOCAL_STORAGE_KEY));\n      } catch (err) {\n        log.warn(err);\n      }\n      if (values) {\n        this.setValues(values);\n      }\n    };\n    _proto.saveSettings = function saveSettings() {\n      if (!this.options_.persistTextTrackSettings) {\n        return;\n      }\n      var values = this.getValues();\n      try {\n        if (Object.keys(values).length) {\n          window__default[\"default\"].localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(values));\n        } else {\n          window__default[\"default\"].localStorage.removeItem(LOCAL_STORAGE_KEY);\n        }\n      } catch (err) {\n        log.warn(err);\n      }\n    };\n    _proto.updateDisplay = function updateDisplay() {\n      var ttDisplay = this.player_.getChild(\"textTrackDisplay\");\n      if (ttDisplay) {\n        ttDisplay.updateDisplay();\n      }\n    };\n    _proto.conditionalBlur_ = function conditionalBlur_() {\n      this.previouslyActiveEl_ = null;\n      var cb = this.player_.controlBar;\n      var subsCapsBtn = cb && cb.subsCapsButton;\n      var ccBtn = cb && cb.captionsButton;\n      if (subsCapsBtn) {\n        subsCapsBtn.focus();\n      } else if (ccBtn) {\n        ccBtn.focus();\n      }\n    };\n    return TextTrackSettings2;\n  }(ModalDialog);\n  Component2.registerComponent(\"TextTrackSettings\", TextTrackSettings);\n  var ResizeManager = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](ResizeManager2, _Component);\n    function ResizeManager2(player, options) {\n      var _this;\n      var RESIZE_OBSERVER_AVAILABLE = options.ResizeObserver || window__default[\"default\"].ResizeObserver;\n      if (options.ResizeObserver === null) {\n        RESIZE_OBSERVER_AVAILABLE = false;\n      }\n      var options_ = mergeOptions({\n        createEl: !RESIZE_OBSERVER_AVAILABLE,\n        reportTouchActivity: false\n      }, options);\n      _this = _Component.call(this, player, options_) || this;\n      _this.ResizeObserver = options.ResizeObserver || window__default[\"default\"].ResizeObserver;\n      _this.loadListener_ = null;\n      _this.resizeObserver_ = null;\n      _this.debouncedHandler_ = debounce(function() {\n        _this.resizeHandler();\n      }, 100, false, _assertThisInitialized__default[\"default\"](_this));\n      if (RESIZE_OBSERVER_AVAILABLE) {\n        _this.resizeObserver_ = new _this.ResizeObserver(_this.debouncedHandler_);\n        _this.resizeObserver_.observe(player.el());\n      } else {\n        _this.loadListener_ = function() {\n          if (!_this.el_ || !_this.el_.contentWindow) {\n            return;\n          }\n          var debouncedHandler_ = _this.debouncedHandler_;\n          var unloadListener_ = _this.unloadListener_ = function() {\n            off(this, \"resize\", debouncedHandler_);\n            off(this, \"unload\", unloadListener_);\n            unloadListener_ = null;\n          };\n          on(_this.el_.contentWindow, \"unload\", unloadListener_);\n          on(_this.el_.contentWindow, \"resize\", debouncedHandler_);\n        };\n        _this.one(\"load\", _this.loadListener_);\n      }\n      return _this;\n    }\n    var _proto = ResizeManager2.prototype;\n    _proto.createEl = function createEl2() {\n      return _Component.prototype.createEl.call(this, \"iframe\", {\n        className: \"vjs-resize-manager\",\n        tabIndex: -1,\n        title: this.localize(\"No content\")\n      }, {\n        \"aria-hidden\": \"true\"\n      });\n    };\n    _proto.resizeHandler = function resizeHandler() {\n      if (!this.player_ || !this.player_.trigger) {\n        return;\n      }\n      this.player_.trigger(\"playerresize\");\n    };\n    _proto.dispose = function dispose() {\n      if (this.debouncedHandler_) {\n        this.debouncedHandler_.cancel();\n      }\n      if (this.resizeObserver_) {\n        if (this.player_.el()) {\n          this.resizeObserver_.unobserve(this.player_.el());\n        }\n        this.resizeObserver_.disconnect();\n      }\n      if (this.loadListener_) {\n        this.off(\"load\", this.loadListener_);\n      }\n      if (this.el_ && this.el_.contentWindow && this.unloadListener_) {\n        this.unloadListener_.call(this.el_.contentWindow);\n      }\n      this.ResizeObserver = null;\n      this.resizeObserver = null;\n      this.debouncedHandler_ = null;\n      this.loadListener_ = null;\n      _Component.prototype.dispose.call(this);\n    };\n    return ResizeManager2;\n  }(Component2);\n  Component2.registerComponent(\"ResizeManager\", ResizeManager);\n  var defaults2 = {\n    trackingThreshold: 20,\n    liveTolerance: 15\n  };\n  var LiveTracker = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](LiveTracker2, _Component);\n    function LiveTracker2(player, options) {\n      var _this;\n      var options_ = mergeOptions(defaults2, options, {\n        createEl: false\n      });\n      _this = _Component.call(this, player, options_) || this;\n      _this.handleVisibilityChange_ = function(e) {\n        return _this.handleVisibilityChange(e);\n      };\n      _this.trackLiveHandler_ = function() {\n        return _this.trackLive_();\n      };\n      _this.handlePlay_ = function(e) {\n        return _this.handlePlay(e);\n      };\n      _this.handleFirstTimeupdate_ = function(e) {\n        return _this.handleFirstTimeupdate(e);\n      };\n      _this.handleSeeked_ = function(e) {\n        return _this.handleSeeked(e);\n      };\n      _this.seekToLiveEdge_ = function(e) {\n        return _this.seekToLiveEdge(e);\n      };\n      _this.reset_();\n      _this.on(_this.player_, \"durationchange\", function(e) {\n        return _this.handleDurationchange(e);\n      });\n      _this.on(_this.player_, \"canplay\", function() {\n        return _this.toggleTracking();\n      });\n      if (IE_VERSION && \"hidden\" in document__default[\"default\"] && \"visibilityState\" in document__default[\"default\"]) {\n        _this.on(document__default[\"default\"], \"visibilitychange\", _this.handleVisibilityChange_);\n      }\n      return _this;\n    }\n    var _proto = LiveTracker2.prototype;\n    _proto.handleVisibilityChange = function handleVisibilityChange() {\n      if (this.player_.duration() !== Infinity) {\n        return;\n      }\n      if (document__default[\"default\"].hidden) {\n        this.stopTracking();\n      } else {\n        this.startTracking();\n      }\n    };\n    _proto.trackLive_ = function trackLive_() {\n      var seekable = this.player_.seekable();\n      if (!seekable || !seekable.length) {\n        return;\n      }\n      var newTime = Number(window__default[\"default\"].performance.now().toFixed(4));\n      var deltaTime = this.lastTime_ === -1 ? 0 : (newTime - this.lastTime_) / 1e3;\n      this.lastTime_ = newTime;\n      this.pastSeekEnd_ = this.pastSeekEnd() + deltaTime;\n      var liveCurrentTime = this.liveCurrentTime();\n      var currentTime = this.player_.currentTime();\n      var isBehind = this.player_.paused() || this.seekedBehindLive_ || Math.abs(liveCurrentTime - currentTime) > this.options_.liveTolerance;\n      if (!this.timeupdateSeen_ || liveCurrentTime === Infinity) {\n        isBehind = false;\n      }\n      if (isBehind !== this.behindLiveEdge_) {\n        this.behindLiveEdge_ = isBehind;\n        this.trigger(\"liveedgechange\");\n      }\n    };\n    _proto.handleDurationchange = function handleDurationchange() {\n      this.toggleTracking();\n    };\n    _proto.toggleTracking = function toggleTracking() {\n      if (this.player_.duration() === Infinity && this.liveWindow() >= this.options_.trackingThreshold) {\n        if (this.player_.options_.liveui) {\n          this.player_.addClass(\"vjs-liveui\");\n        }\n        this.startTracking();\n      } else {\n        this.player_.removeClass(\"vjs-liveui\");\n        this.stopTracking();\n      }\n    };\n    _proto.startTracking = function startTracking() {\n      if (this.isTracking()) {\n        return;\n      }\n      if (!this.timeupdateSeen_) {\n        this.timeupdateSeen_ = this.player_.hasStarted();\n      }\n      this.trackingInterval_ = this.setInterval(this.trackLiveHandler_, UPDATE_REFRESH_INTERVAL);\n      this.trackLive_();\n      this.on(this.player_, [\"play\", \"pause\"], this.trackLiveHandler_);\n      if (!this.timeupdateSeen_) {\n        this.one(this.player_, \"play\", this.handlePlay_);\n        this.one(this.player_, \"timeupdate\", this.handleFirstTimeupdate_);\n      } else {\n        this.on(this.player_, \"seeked\", this.handleSeeked_);\n      }\n    };\n    _proto.handleFirstTimeupdate = function handleFirstTimeupdate() {\n      this.timeupdateSeen_ = true;\n      this.on(this.player_, \"seeked\", this.handleSeeked_);\n    };\n    _proto.handleSeeked = function handleSeeked() {\n      var timeDiff = Math.abs(this.liveCurrentTime() - this.player_.currentTime());\n      this.seekedBehindLive_ = this.nextSeekedFromUser_ && timeDiff > 2;\n      this.nextSeekedFromUser_ = false;\n      this.trackLive_();\n    };\n    _proto.handlePlay = function handlePlay() {\n      this.one(this.player_, \"timeupdate\", this.seekToLiveEdge_);\n    };\n    _proto.reset_ = function reset_() {\n      this.lastTime_ = -1;\n      this.pastSeekEnd_ = 0;\n      this.lastSeekEnd_ = -1;\n      this.behindLiveEdge_ = true;\n      this.timeupdateSeen_ = false;\n      this.seekedBehindLive_ = false;\n      this.nextSeekedFromUser_ = false;\n      this.clearInterval(this.trackingInterval_);\n      this.trackingInterval_ = null;\n      this.off(this.player_, [\"play\", \"pause\"], this.trackLiveHandler_);\n      this.off(this.player_, \"seeked\", this.handleSeeked_);\n      this.off(this.player_, \"play\", this.handlePlay_);\n      this.off(this.player_, \"timeupdate\", this.handleFirstTimeupdate_);\n      this.off(this.player_, \"timeupdate\", this.seekToLiveEdge_);\n    };\n    _proto.nextSeekedFromUser = function nextSeekedFromUser() {\n      this.nextSeekedFromUser_ = true;\n    };\n    _proto.stopTracking = function stopTracking() {\n      if (!this.isTracking()) {\n        return;\n      }\n      this.reset_();\n      this.trigger(\"liveedgechange\");\n    };\n    _proto.seekableEnd = function seekableEnd() {\n      var seekable = this.player_.seekable();\n      var seekableEnds = [];\n      var i2 = seekable ? seekable.length : 0;\n      while (i2--) {\n        seekableEnds.push(seekable.end(i2));\n      }\n      return seekableEnds.length ? seekableEnds.sort()[seekableEnds.length - 1] : Infinity;\n    };\n    _proto.seekableStart = function seekableStart() {\n      var seekable = this.player_.seekable();\n      var seekableStarts = [];\n      var i2 = seekable ? seekable.length : 0;\n      while (i2--) {\n        seekableStarts.push(seekable.start(i2));\n      }\n      return seekableStarts.length ? seekableStarts.sort()[0] : 0;\n    };\n    _proto.liveWindow = function liveWindow() {\n      var liveCurrentTime = this.liveCurrentTime();\n      if (liveCurrentTime === Infinity) {\n        return 0;\n      }\n      return liveCurrentTime - this.seekableStart();\n    };\n    _proto.isLive = function isLive() {\n      return this.isTracking();\n    };\n    _proto.atLiveEdge = function atLiveEdge() {\n      return !this.behindLiveEdge();\n    };\n    _proto.liveCurrentTime = function liveCurrentTime() {\n      return this.pastSeekEnd() + this.seekableEnd();\n    };\n    _proto.pastSeekEnd = function pastSeekEnd() {\n      var seekableEnd = this.seekableEnd();\n      if (this.lastSeekEnd_ !== -1 && seekableEnd !== this.lastSeekEnd_) {\n        this.pastSeekEnd_ = 0;\n      }\n      this.lastSeekEnd_ = seekableEnd;\n      return this.pastSeekEnd_;\n    };\n    _proto.behindLiveEdge = function behindLiveEdge() {\n      return this.behindLiveEdge_;\n    };\n    _proto.isTracking = function isTracking() {\n      return typeof this.trackingInterval_ === \"number\";\n    };\n    _proto.seekToLiveEdge = function seekToLiveEdge() {\n      this.seekedBehindLive_ = false;\n      if (this.atLiveEdge()) {\n        return;\n      }\n      this.nextSeekedFromUser_ = false;\n      this.player_.currentTime(this.liveCurrentTime());\n    };\n    _proto.dispose = function dispose() {\n      this.off(document__default[\"default\"], \"visibilitychange\", this.handleVisibilityChange_);\n      this.stopTracking();\n      _Component.prototype.dispose.call(this);\n    };\n    return LiveTracker2;\n  }(Component2);\n  Component2.registerComponent(\"LiveTracker\", LiveTracker);\n  var sourcesetLoad = function sourcesetLoad2(tech) {\n    var el = tech.el();\n    if (el.hasAttribute(\"src\")) {\n      tech.triggerSourceset(el.src);\n      return true;\n    }\n    var sources = tech.$$(\"source\");\n    var srcUrls = [];\n    var src = \"\";\n    if (!sources.length) {\n      return false;\n    }\n    for (var i2 = 0; i2 < sources.length; i2++) {\n      var url = sources[i2].src;\n      if (url && srcUrls.indexOf(url) === -1) {\n        srcUrls.push(url);\n      }\n    }\n    if (!srcUrls.length) {\n      return false;\n    }\n    if (srcUrls.length === 1) {\n      src = srcUrls[0];\n    }\n    tech.triggerSourceset(src);\n    return true;\n  };\n  var innerHTMLDescriptorPolyfill = Object.defineProperty({}, \"innerHTML\", {\n    get: function get2() {\n      return this.cloneNode(true).innerHTML;\n    },\n    set: function set2(v) {\n      var dummy = document__default[\"default\"].createElement(this.nodeName.toLowerCase());\n      dummy.innerHTML = v;\n      var docFrag = document__default[\"default\"].createDocumentFragment();\n      while (dummy.childNodes.length) {\n        docFrag.appendChild(dummy.childNodes[0]);\n      }\n      this.innerText = \"\";\n      window__default[\"default\"].Element.prototype.appendChild.call(this, docFrag);\n      return this.innerHTML;\n    }\n  });\n  var getDescriptor = function getDescriptor2(priority, prop) {\n    var descriptor = {};\n    for (var i2 = 0; i2 < priority.length; i2++) {\n      descriptor = Object.getOwnPropertyDescriptor(priority[i2], prop);\n      if (descriptor && descriptor.set && descriptor.get) {\n        break;\n      }\n    }\n    descriptor.enumerable = true;\n    descriptor.configurable = true;\n    return descriptor;\n  };\n  var getInnerHTMLDescriptor = function getInnerHTMLDescriptor2(tech) {\n    return getDescriptor([tech.el(), window__default[\"default\"].HTMLMediaElement.prototype, window__default[\"default\"].Element.prototype, innerHTMLDescriptorPolyfill], \"innerHTML\");\n  };\n  var firstSourceWatch = function firstSourceWatch2(tech) {\n    var el = tech.el();\n    if (el.resetSourceWatch_) {\n      return;\n    }\n    var old = {};\n    var innerDescriptor = getInnerHTMLDescriptor(tech);\n    var appendWrapper = function appendWrapper2(appendFn) {\n      return function() {\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        var retval = appendFn.apply(el, args);\n        sourcesetLoad(tech);\n        return retval;\n      };\n    };\n    [\"append\", \"appendChild\", \"insertAdjacentHTML\"].forEach(function(k) {\n      if (!el[k]) {\n        return;\n      }\n      old[k] = el[k];\n      el[k] = appendWrapper(old[k]);\n    });\n    Object.defineProperty(el, \"innerHTML\", mergeOptions(innerDescriptor, {\n      set: appendWrapper(innerDescriptor.set)\n    }));\n    el.resetSourceWatch_ = function() {\n      el.resetSourceWatch_ = null;\n      Object.keys(old).forEach(function(k) {\n        el[k] = old[k];\n      });\n      Object.defineProperty(el, \"innerHTML\", innerDescriptor);\n    };\n    tech.one(\"sourceset\", el.resetSourceWatch_);\n  };\n  var srcDescriptorPolyfill = Object.defineProperty({}, \"src\", {\n    get: function get2() {\n      if (this.hasAttribute(\"src\")) {\n        return getAbsoluteURL(window__default[\"default\"].Element.prototype.getAttribute.call(this, \"src\"));\n      }\n      return \"\";\n    },\n    set: function set2(v) {\n      window__default[\"default\"].Element.prototype.setAttribute.call(this, \"src\", v);\n      return v;\n    }\n  });\n  var getSrcDescriptor = function getSrcDescriptor2(tech) {\n    return getDescriptor([tech.el(), window__default[\"default\"].HTMLMediaElement.prototype, srcDescriptorPolyfill], \"src\");\n  };\n  var setupSourceset = function setupSourceset2(tech) {\n    if (!tech.featuresSourceset) {\n      return;\n    }\n    var el = tech.el();\n    if (el.resetSourceset_) {\n      return;\n    }\n    var srcDescriptor = getSrcDescriptor(tech);\n    var oldSetAttribute = el.setAttribute;\n    var oldLoad = el.load;\n    Object.defineProperty(el, \"src\", mergeOptions(srcDescriptor, {\n      set: function set2(v) {\n        var retval = srcDescriptor.set.call(el, v);\n        tech.triggerSourceset(el.src);\n        return retval;\n      }\n    }));\n    el.setAttribute = function(n, v) {\n      var retval = oldSetAttribute.call(el, n, v);\n      if (/src/i.test(n)) {\n        tech.triggerSourceset(el.src);\n      }\n      return retval;\n    };\n    el.load = function() {\n      var retval = oldLoad.call(el);\n      if (!sourcesetLoad(tech)) {\n        tech.triggerSourceset(\"\");\n        firstSourceWatch(tech);\n      }\n      return retval;\n    };\n    if (el.currentSrc) {\n      tech.triggerSourceset(el.currentSrc);\n    } else if (!sourcesetLoad(tech)) {\n      firstSourceWatch(tech);\n    }\n    el.resetSourceset_ = function() {\n      el.resetSourceset_ = null;\n      el.load = oldLoad;\n      el.setAttribute = oldSetAttribute;\n      Object.defineProperty(el, \"src\", srcDescriptor);\n      if (el.resetSourceWatch_) {\n        el.resetSourceWatch_();\n      }\n    };\n  };\n  var defineLazyProperty = function defineLazyProperty2(obj, key, getValue, setter) {\n    if (setter === void 0) {\n      setter = true;\n    }\n    var set2 = function set3(value) {\n      return Object.defineProperty(obj, key, {\n        value,\n        enumerable: true,\n        writable: true\n      });\n    };\n    var options = {\n      configurable: true,\n      enumerable: true,\n      get: function get2() {\n        var value = getValue();\n        set2(value);\n        return value;\n      }\n    };\n    if (setter) {\n      options.set = set2;\n    }\n    return Object.defineProperty(obj, key, options);\n  };\n  var Html5 = /* @__PURE__ */ function(_Tech) {\n    _inheritsLoose__default[\"default\"](Html52, _Tech);\n    function Html52(options, ready) {\n      var _this;\n      _this = _Tech.call(this, options, ready) || this;\n      var source = options.source;\n      var crossoriginTracks = false;\n      _this.featuresVideoFrameCallback = _this.featuresVideoFrameCallback && _this.el_.tagName === \"VIDEO\";\n      if (source && (_this.el_.currentSrc !== source.src || options.tag && options.tag.initNetworkState_ === 3)) {\n        _this.setSource(source);\n      } else {\n        _this.handleLateInit_(_this.el_);\n      }\n      if (options.enableSourceset) {\n        _this.setupSourcesetHandling_();\n      }\n      _this.isScrubbing_ = false;\n      if (_this.el_.hasChildNodes()) {\n        var nodes = _this.el_.childNodes;\n        var nodesLength = nodes.length;\n        var removeNodes = [];\n        while (nodesLength--) {\n          var node = nodes[nodesLength];\n          var nodeName = node.nodeName.toLowerCase();\n          if (nodeName === \"track\") {\n            if (!_this.featuresNativeTextTracks) {\n              removeNodes.push(node);\n            } else {\n              _this.remoteTextTrackEls().addTrackElement_(node);\n              _this.remoteTextTracks().addTrack(node.track);\n              _this.textTracks().addTrack(node.track);\n              if (!crossoriginTracks && !_this.el_.hasAttribute(\"crossorigin\") && isCrossOrigin(node.src)) {\n                crossoriginTracks = true;\n              }\n            }\n          }\n        }\n        for (var i2 = 0; i2 < removeNodes.length; i2++) {\n          _this.el_.removeChild(removeNodes[i2]);\n        }\n      }\n      _this.proxyNativeTracks_();\n      if (_this.featuresNativeTextTracks && crossoriginTracks) {\n        log.warn(\"Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.\\nThis may prevent text tracks from loading.\");\n      }\n      _this.restoreMetadataTracksInIOSNativePlayer_();\n      if ((TOUCH_ENABLED || IS_IPHONE || IS_NATIVE_ANDROID) && options.nativeControlsForTouch === true) {\n        _this.setControls(true);\n      }\n      _this.proxyWebkitFullscreen_();\n      _this.triggerReady();\n      return _this;\n    }\n    var _proto = Html52.prototype;\n    _proto.dispose = function dispose() {\n      if (this.el_ && this.el_.resetSourceset_) {\n        this.el_.resetSourceset_();\n      }\n      Html52.disposeMediaElement(this.el_);\n      this.options_ = null;\n      _Tech.prototype.dispose.call(this);\n    };\n    _proto.setupSourcesetHandling_ = function setupSourcesetHandling_() {\n      setupSourceset(this);\n    };\n    _proto.restoreMetadataTracksInIOSNativePlayer_ = function restoreMetadataTracksInIOSNativePlayer_() {\n      var textTracks = this.textTracks();\n      var metadataTracksPreFullscreenState;\n      var takeMetadataTrackSnapshot = function takeMetadataTrackSnapshot2() {\n        metadataTracksPreFullscreenState = [];\n        for (var i2 = 0; i2 < textTracks.length; i2++) {\n          var track = textTracks[i2];\n          if (track.kind === \"metadata\") {\n            metadataTracksPreFullscreenState.push({\n              track,\n              storedMode: track.mode\n            });\n          }\n        }\n      };\n      takeMetadataTrackSnapshot();\n      textTracks.addEventListener(\"change\", takeMetadataTrackSnapshot);\n      this.on(\"dispose\", function() {\n        return textTracks.removeEventListener(\"change\", takeMetadataTrackSnapshot);\n      });\n      var restoreTrackMode = function restoreTrackMode2() {\n        for (var i2 = 0; i2 < metadataTracksPreFullscreenState.length; i2++) {\n          var storedTrack = metadataTracksPreFullscreenState[i2];\n          if (storedTrack.track.mode === \"disabled\" && storedTrack.track.mode !== storedTrack.storedMode) {\n            storedTrack.track.mode = storedTrack.storedMode;\n          }\n        }\n        textTracks.removeEventListener(\"change\", restoreTrackMode2);\n      };\n      this.on(\"webkitbeginfullscreen\", function() {\n        textTracks.removeEventListener(\"change\", takeMetadataTrackSnapshot);\n        textTracks.removeEventListener(\"change\", restoreTrackMode);\n        textTracks.addEventListener(\"change\", restoreTrackMode);\n      });\n      this.on(\"webkitendfullscreen\", function() {\n        textTracks.removeEventListener(\"change\", takeMetadataTrackSnapshot);\n        textTracks.addEventListener(\"change\", takeMetadataTrackSnapshot);\n        textTracks.removeEventListener(\"change\", restoreTrackMode);\n      });\n    };\n    _proto.overrideNative_ = function overrideNative_(type, override) {\n      var _this2 = this;\n      if (override !== this[\"featuresNative\" + type + \"Tracks\"]) {\n        return;\n      }\n      var lowerCaseType = type.toLowerCase();\n      if (this[lowerCaseType + \"TracksListeners_\"]) {\n        Object.keys(this[lowerCaseType + \"TracksListeners_\"]).forEach(function(eventName) {\n          var elTracks = _this2.el()[lowerCaseType + \"Tracks\"];\n          elTracks.removeEventListener(eventName, _this2[lowerCaseType + \"TracksListeners_\"][eventName]);\n        });\n      }\n      this[\"featuresNative\" + type + \"Tracks\"] = !override;\n      this[lowerCaseType + \"TracksListeners_\"] = null;\n      this.proxyNativeTracksForType_(lowerCaseType);\n    };\n    _proto.overrideNativeAudioTracks = function overrideNativeAudioTracks(override) {\n      this.overrideNative_(\"Audio\", override);\n    };\n    _proto.overrideNativeVideoTracks = function overrideNativeVideoTracks(override) {\n      this.overrideNative_(\"Video\", override);\n    };\n    _proto.proxyNativeTracksForType_ = function proxyNativeTracksForType_(name) {\n      var _this3 = this;\n      var props = NORMAL[name];\n      var elTracks = this.el()[props.getterName];\n      var techTracks = this[props.getterName]();\n      if (!this[\"featuresNative\" + props.capitalName + \"Tracks\"] || !elTracks || !elTracks.addEventListener) {\n        return;\n      }\n      var listeners = {\n        change: function change(e) {\n          var event2 = {\n            type: \"change\",\n            target: techTracks,\n            currentTarget: techTracks,\n            srcElement: techTracks\n          };\n          techTracks.trigger(event2);\n          if (name === \"text\") {\n            _this3[REMOTE.remoteText.getterName]().trigger(event2);\n          }\n        },\n        addtrack: function addtrack(e) {\n          techTracks.addTrack(e.track);\n        },\n        removetrack: function removetrack(e) {\n          techTracks.removeTrack(e.track);\n        }\n      };\n      var removeOldTracks = function removeOldTracks2() {\n        var removeTracks = [];\n        for (var i2 = 0; i2 < techTracks.length; i2++) {\n          var found = false;\n          for (var j = 0; j < elTracks.length; j++) {\n            if (elTracks[j] === techTracks[i2]) {\n              found = true;\n              break;\n            }\n          }\n          if (!found) {\n            removeTracks.push(techTracks[i2]);\n          }\n        }\n        while (removeTracks.length) {\n          techTracks.removeTrack(removeTracks.shift());\n        }\n      };\n      this[props.getterName + \"Listeners_\"] = listeners;\n      Object.keys(listeners).forEach(function(eventName) {\n        var listener = listeners[eventName];\n        elTracks.addEventListener(eventName, listener);\n        _this3.on(\"dispose\", function(e) {\n          return elTracks.removeEventListener(eventName, listener);\n        });\n      });\n      this.on(\"loadstart\", removeOldTracks);\n      this.on(\"dispose\", function(e) {\n        return _this3.off(\"loadstart\", removeOldTracks);\n      });\n    };\n    _proto.proxyNativeTracks_ = function proxyNativeTracks_() {\n      var _this4 = this;\n      NORMAL.names.forEach(function(name) {\n        _this4.proxyNativeTracksForType_(name);\n      });\n    };\n    _proto.createEl = function createEl2() {\n      var el = this.options_.tag;\n      if (!el || !(this.options_.playerElIngest || this.movingMediaElementInDOM)) {\n        if (el) {\n          var clone = el.cloneNode(true);\n          if (el.parentNode) {\n            el.parentNode.insertBefore(clone, el);\n          }\n          Html52.disposeMediaElement(el);\n          el = clone;\n        } else {\n          el = document__default[\"default\"].createElement(\"video\");\n          var tagAttributes = this.options_.tag && getAttributes(this.options_.tag);\n          var attributes = mergeOptions({}, tagAttributes);\n          if (!TOUCH_ENABLED || this.options_.nativeControlsForTouch !== true) {\n            delete attributes.controls;\n          }\n          setAttributes(el, assign(attributes, {\n            id: this.options_.techId,\n            \"class\": \"vjs-tech\"\n          }));\n        }\n        el.playerId = this.options_.playerId;\n      }\n      if (typeof this.options_.preload !== \"undefined\") {\n        setAttribute(el, \"preload\", this.options_.preload);\n      }\n      if (this.options_.disablePictureInPicture !== void 0) {\n        el.disablePictureInPicture = this.options_.disablePictureInPicture;\n      }\n      var settingsAttrs = [\"loop\", \"muted\", \"playsinline\", \"autoplay\"];\n      for (var i2 = 0; i2 < settingsAttrs.length; i2++) {\n        var attr = settingsAttrs[i2];\n        var value = this.options_[attr];\n        if (typeof value !== \"undefined\") {\n          if (value) {\n            setAttribute(el, attr, attr);\n          } else {\n            removeAttribute(el, attr);\n          }\n          el[attr] = value;\n        }\n      }\n      return el;\n    };\n    _proto.handleLateInit_ = function handleLateInit_(el) {\n      if (el.networkState === 0 || el.networkState === 3) {\n        return;\n      }\n      if (el.readyState === 0) {\n        var loadstartFired = false;\n        var setLoadstartFired = function setLoadstartFired2() {\n          loadstartFired = true;\n        };\n        this.on(\"loadstart\", setLoadstartFired);\n        var triggerLoadstart = function triggerLoadstart2() {\n          if (!loadstartFired) {\n            this.trigger(\"loadstart\");\n          }\n        };\n        this.on(\"loadedmetadata\", triggerLoadstart);\n        this.ready(function() {\n          this.off(\"loadstart\", setLoadstartFired);\n          this.off(\"loadedmetadata\", triggerLoadstart);\n          if (!loadstartFired) {\n            this.trigger(\"loadstart\");\n          }\n        });\n        return;\n      }\n      var eventsToTrigger = [\"loadstart\"];\n      eventsToTrigger.push(\"loadedmetadata\");\n      if (el.readyState >= 2) {\n        eventsToTrigger.push(\"loadeddata\");\n      }\n      if (el.readyState >= 3) {\n        eventsToTrigger.push(\"canplay\");\n      }\n      if (el.readyState >= 4) {\n        eventsToTrigger.push(\"canplaythrough\");\n      }\n      this.ready(function() {\n        eventsToTrigger.forEach(function(type) {\n          this.trigger(type);\n        }, this);\n      });\n    };\n    _proto.setScrubbing = function setScrubbing(isScrubbing) {\n      this.isScrubbing_ = isScrubbing;\n    };\n    _proto.scrubbing = function scrubbing() {\n      return this.isScrubbing_;\n    };\n    _proto.setCurrentTime = function setCurrentTime(seconds) {\n      try {\n        if (this.isScrubbing_ && this.el_.fastSeek && IS_ANY_SAFARI) {\n          this.el_.fastSeek(seconds);\n        } else {\n          this.el_.currentTime = seconds;\n        }\n      } catch (e) {\n        log(e, \"Video is not ready. (Video.js)\");\n      }\n    };\n    _proto.duration = function duration() {\n      var _this5 = this;\n      if (this.el_.duration === Infinity && IS_ANDROID && IS_CHROME && this.el_.currentTime === 0) {\n        var checkProgress = function checkProgress2() {\n          if (_this5.el_.currentTime > 0) {\n            if (_this5.el_.duration === Infinity) {\n              _this5.trigger(\"durationchange\");\n            }\n            _this5.off(\"timeupdate\", checkProgress2);\n          }\n        };\n        this.on(\"timeupdate\", checkProgress);\n        return NaN;\n      }\n      return this.el_.duration || NaN;\n    };\n    _proto.width = function width() {\n      return this.el_.offsetWidth;\n    };\n    _proto.height = function height() {\n      return this.el_.offsetHeight;\n    };\n    _proto.proxyWebkitFullscreen_ = function proxyWebkitFullscreen_() {\n      var _this6 = this;\n      if (!(\"webkitDisplayingFullscreen\" in this.el_)) {\n        return;\n      }\n      var endFn = function endFn2() {\n        this.trigger(\"fullscreenchange\", {\n          isFullscreen: false\n        });\n        if (this.el_.controls && !this.options_.nativeControlsForTouch && this.controls()) {\n          this.el_.controls = false;\n        }\n      };\n      var beginFn = function beginFn2() {\n        if (\"webkitPresentationMode\" in this.el_ && this.el_.webkitPresentationMode !== \"picture-in-picture\") {\n          this.one(\"webkitendfullscreen\", endFn);\n          this.trigger(\"fullscreenchange\", {\n            isFullscreen: true,\n            // set a flag in case another tech triggers fullscreenchange\n            nativeIOSFullscreen: true\n          });\n        }\n      };\n      this.on(\"webkitbeginfullscreen\", beginFn);\n      this.on(\"dispose\", function() {\n        _this6.off(\"webkitbeginfullscreen\", beginFn);\n        _this6.off(\"webkitendfullscreen\", endFn);\n      });\n    };\n    _proto.supportsFullScreen = function supportsFullScreen() {\n      if (typeof this.el_.webkitEnterFullScreen === \"function\") {\n        var userAgent = window__default[\"default\"].navigator && window__default[\"default\"].navigator.userAgent || \"\";\n        if (/Android/.test(userAgent) || !/Chrome|Mac OS X 10.5/.test(userAgent)) {\n          return true;\n        }\n      }\n      return false;\n    };\n    _proto.enterFullScreen = function enterFullScreen() {\n      var video = this.el_;\n      if (video.paused && video.networkState <= video.HAVE_METADATA) {\n        silencePromise(this.el_.play());\n        this.setTimeout(function() {\n          video.pause();\n          try {\n            video.webkitEnterFullScreen();\n          } catch (e) {\n            this.trigger(\"fullscreenerror\", e);\n          }\n        }, 0);\n      } else {\n        try {\n          video.webkitEnterFullScreen();\n        } catch (e) {\n          this.trigger(\"fullscreenerror\", e);\n        }\n      }\n    };\n    _proto.exitFullScreen = function exitFullScreen() {\n      if (!this.el_.webkitDisplayingFullscreen) {\n        this.trigger(\"fullscreenerror\", new Error(\"The video is not fullscreen\"));\n        return;\n      }\n      this.el_.webkitExitFullScreen();\n    };\n    _proto.requestPictureInPicture = function requestPictureInPicture() {\n      return this.el_.requestPictureInPicture();\n    };\n    _proto.requestVideoFrameCallback = function requestVideoFrameCallback(cb) {\n      if (this.featuresVideoFrameCallback && !this.el_.webkitKeys) {\n        return this.el_.requestVideoFrameCallback(cb);\n      }\n      return _Tech.prototype.requestVideoFrameCallback.call(this, cb);\n    };\n    _proto.cancelVideoFrameCallback = function cancelVideoFrameCallback(id) {\n      if (this.featuresVideoFrameCallback && !this.el_.webkitKeys) {\n        this.el_.cancelVideoFrameCallback(id);\n      } else {\n        _Tech.prototype.cancelVideoFrameCallback.call(this, id);\n      }\n    };\n    _proto.src = function src(_src) {\n      if (_src === void 0) {\n        return this.el_.src;\n      }\n      this.setSrc(_src);\n    };\n    _proto.reset = function reset() {\n      Html52.resetMediaElement(this.el_);\n    };\n    _proto.currentSrc = function currentSrc() {\n      if (this.currentSource_) {\n        return this.currentSource_.src;\n      }\n      return this.el_.currentSrc;\n    };\n    _proto.setControls = function setControls(val) {\n      this.el_.controls = !!val;\n    };\n    _proto.addTextTrack = function addTextTrack(kind, label, language) {\n      if (!this.featuresNativeTextTracks) {\n        return _Tech.prototype.addTextTrack.call(this, kind, label, language);\n      }\n      return this.el_.addTextTrack(kind, label, language);\n    };\n    _proto.createRemoteTextTrack = function createRemoteTextTrack(options) {\n      if (!this.featuresNativeTextTracks) {\n        return _Tech.prototype.createRemoteTextTrack.call(this, options);\n      }\n      var htmlTrackElement = document__default[\"default\"].createElement(\"track\");\n      if (options.kind) {\n        htmlTrackElement.kind = options.kind;\n      }\n      if (options.label) {\n        htmlTrackElement.label = options.label;\n      }\n      if (options.language || options.srclang) {\n        htmlTrackElement.srclang = options.language || options.srclang;\n      }\n      if (options[\"default\"]) {\n        htmlTrackElement[\"default\"] = options[\"default\"];\n      }\n      if (options.id) {\n        htmlTrackElement.id = options.id;\n      }\n      if (options.src) {\n        htmlTrackElement.src = options.src;\n      }\n      return htmlTrackElement;\n    };\n    _proto.addRemoteTextTrack = function addRemoteTextTrack(options, manualCleanup) {\n      var htmlTrackElement = _Tech.prototype.addRemoteTextTrack.call(this, options, manualCleanup);\n      if (this.featuresNativeTextTracks) {\n        this.el().appendChild(htmlTrackElement);\n      }\n      return htmlTrackElement;\n    };\n    _proto.removeRemoteTextTrack = function removeRemoteTextTrack(track) {\n      _Tech.prototype.removeRemoteTextTrack.call(this, track);\n      if (this.featuresNativeTextTracks) {\n        var tracks = this.$$(\"track\");\n        var i2 = tracks.length;\n        while (i2--) {\n          if (track === tracks[i2] || track === tracks[i2].track) {\n            this.el().removeChild(tracks[i2]);\n          }\n        }\n      }\n    };\n    _proto.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n      if (typeof this.el().getVideoPlaybackQuality === \"function\") {\n        return this.el().getVideoPlaybackQuality();\n      }\n      var videoPlaybackQuality = {};\n      if (typeof this.el().webkitDroppedFrameCount !== \"undefined\" && typeof this.el().webkitDecodedFrameCount !== \"undefined\") {\n        videoPlaybackQuality.droppedVideoFrames = this.el().webkitDroppedFrameCount;\n        videoPlaybackQuality.totalVideoFrames = this.el().webkitDecodedFrameCount;\n      }\n      if (window__default[\"default\"].performance && typeof window__default[\"default\"].performance.now === \"function\") {\n        videoPlaybackQuality.creationTime = window__default[\"default\"].performance.now();\n      } else if (window__default[\"default\"].performance && window__default[\"default\"].performance.timing && typeof window__default[\"default\"].performance.timing.navigationStart === \"number\") {\n        videoPlaybackQuality.creationTime = window__default[\"default\"].Date.now() - window__default[\"default\"].performance.timing.navigationStart;\n      }\n      return videoPlaybackQuality;\n    };\n    return Html52;\n  }(Tech);\n  defineLazyProperty(Html5, \"TEST_VID\", function() {\n    if (!isReal()) {\n      return;\n    }\n    var video = document__default[\"default\"].createElement(\"video\");\n    var track = document__default[\"default\"].createElement(\"track\");\n    track.kind = \"captions\";\n    track.srclang = \"en\";\n    track.label = \"English\";\n    video.appendChild(track);\n    return video;\n  });\n  Html5.isSupported = function() {\n    try {\n      Html5.TEST_VID.volume = 0.5;\n    } catch (e) {\n      return false;\n    }\n    return !!(Html5.TEST_VID && Html5.TEST_VID.canPlayType);\n  };\n  Html5.canPlayType = function(type) {\n    return Html5.TEST_VID.canPlayType(type);\n  };\n  Html5.canPlaySource = function(srcObj, options) {\n    return Html5.canPlayType(srcObj.type);\n  };\n  Html5.canControlVolume = function() {\n    try {\n      var volume = Html5.TEST_VID.volume;\n      Html5.TEST_VID.volume = volume / 2 + 0.1;\n      var canControl = volume !== Html5.TEST_VID.volume;\n      if (canControl && IS_IOS) {\n        window__default[\"default\"].setTimeout(function() {\n          if (Html5 && Html5.prototype) {\n            Html5.prototype.featuresVolumeControl = volume !== Html5.TEST_VID.volume;\n          }\n        });\n        return false;\n      }\n      return canControl;\n    } catch (e) {\n      return false;\n    }\n  };\n  Html5.canMuteVolume = function() {\n    try {\n      var muted = Html5.TEST_VID.muted;\n      Html5.TEST_VID.muted = !muted;\n      if (Html5.TEST_VID.muted) {\n        setAttribute(Html5.TEST_VID, \"muted\", \"muted\");\n      } else {\n        removeAttribute(Html5.TEST_VID, \"muted\", \"muted\");\n      }\n      return muted !== Html5.TEST_VID.muted;\n    } catch (e) {\n      return false;\n    }\n  };\n  Html5.canControlPlaybackRate = function() {\n    if (IS_ANDROID && IS_CHROME && CHROME_VERSION < 58) {\n      return false;\n    }\n    try {\n      var playbackRate = Html5.TEST_VID.playbackRate;\n      Html5.TEST_VID.playbackRate = playbackRate / 2 + 0.1;\n      return playbackRate !== Html5.TEST_VID.playbackRate;\n    } catch (e) {\n      return false;\n    }\n  };\n  Html5.canOverrideAttributes = function() {\n    try {\n      var noop3 = function noop4() {\n      };\n      Object.defineProperty(document__default[\"default\"].createElement(\"video\"), \"src\", {\n        get: noop3,\n        set: noop3\n      });\n      Object.defineProperty(document__default[\"default\"].createElement(\"audio\"), \"src\", {\n        get: noop3,\n        set: noop3\n      });\n      Object.defineProperty(document__default[\"default\"].createElement(\"video\"), \"innerHTML\", {\n        get: noop3,\n        set: noop3\n      });\n      Object.defineProperty(document__default[\"default\"].createElement(\"audio\"), \"innerHTML\", {\n        get: noop3,\n        set: noop3\n      });\n    } catch (e) {\n      return false;\n    }\n    return true;\n  };\n  Html5.supportsNativeTextTracks = function() {\n    return IS_ANY_SAFARI || IS_IOS && IS_CHROME;\n  };\n  Html5.supportsNativeVideoTracks = function() {\n    return !!(Html5.TEST_VID && Html5.TEST_VID.videoTracks);\n  };\n  Html5.supportsNativeAudioTracks = function() {\n    return !!(Html5.TEST_VID && Html5.TEST_VID.audioTracks);\n  };\n  Html5.Events = [\"loadstart\", \"suspend\", \"abort\", \"error\", \"emptied\", \"stalled\", \"loadedmetadata\", \"loadeddata\", \"canplay\", \"canplaythrough\", \"playing\", \"waiting\", \"seeking\", \"seeked\", \"ended\", \"durationchange\", \"timeupdate\", \"progress\", \"play\", \"pause\", \"ratechange\", \"resize\", \"volumechange\"];\n  [[\"featuresMuteControl\", \"canMuteVolume\"], [\"featuresPlaybackRate\", \"canControlPlaybackRate\"], [\"featuresSourceset\", \"canOverrideAttributes\"], [\"featuresNativeTextTracks\", \"supportsNativeTextTracks\"], [\"featuresNativeVideoTracks\", \"supportsNativeVideoTracks\"], [\"featuresNativeAudioTracks\", \"supportsNativeAudioTracks\"]].forEach(function(_ref) {\n    var key = _ref[0], fn = _ref[1];\n    defineLazyProperty(Html5.prototype, key, function() {\n      return Html5[fn]();\n    }, true);\n  });\n  Html5.prototype.featuresVolumeControl = Html5.canControlVolume();\n  Html5.prototype.movingMediaElementInDOM = !IS_IOS;\n  Html5.prototype.featuresFullscreenResize = true;\n  Html5.prototype.featuresProgressEvents = true;\n  Html5.prototype.featuresTimeupdateEvents = true;\n  Html5.prototype.featuresVideoFrameCallback = !!(Html5.TEST_VID && Html5.TEST_VID.requestVideoFrameCallback);\n  var canPlayType;\n  Html5.patchCanPlayType = function() {\n    if (ANDROID_VERSION >= 4 && !IS_FIREFOX && !IS_CHROME) {\n      canPlayType = Html5.TEST_VID && Html5.TEST_VID.constructor.prototype.canPlayType;\n      Html5.TEST_VID.constructor.prototype.canPlayType = function(type) {\n        var mpegurlRE = /^application\\/(?:x-|vnd\\.apple\\.)mpegurl/i;\n        if (type && mpegurlRE.test(type)) {\n          return \"maybe\";\n        }\n        return canPlayType.call(this, type);\n      };\n    }\n  };\n  Html5.unpatchCanPlayType = function() {\n    var r = Html5.TEST_VID.constructor.prototype.canPlayType;\n    if (canPlayType) {\n      Html5.TEST_VID.constructor.prototype.canPlayType = canPlayType;\n    }\n    return r;\n  };\n  Html5.patchCanPlayType();\n  Html5.disposeMediaElement = function(el) {\n    if (!el) {\n      return;\n    }\n    if (el.parentNode) {\n      el.parentNode.removeChild(el);\n    }\n    while (el.hasChildNodes()) {\n      el.removeChild(el.firstChild);\n    }\n    el.removeAttribute(\"src\");\n    if (typeof el.load === \"function\") {\n      (function() {\n        try {\n          el.load();\n        } catch (e) {\n        }\n      })();\n    }\n  };\n  Html5.resetMediaElement = function(el) {\n    if (!el) {\n      return;\n    }\n    var sources = el.querySelectorAll(\"source\");\n    var i2 = sources.length;\n    while (i2--) {\n      el.removeChild(sources[i2]);\n    }\n    el.removeAttribute(\"src\");\n    if (typeof el.load === \"function\") {\n      (function() {\n        try {\n          el.load();\n        } catch (e) {\n        }\n      })();\n    }\n  };\n  [\n    /**\n     * Get the value of `muted` from the media element. `muted` indicates\n     * that the volume for the media should be set to silent. This does not actually change\n     * the `volume` attribute.\n     *\n     * @method Html5#muted\n     * @return {boolean}\n     *         - True if the value of `volume` should be ignored and the audio set to silent.\n     *         - False if the value of `volume` should be used.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}\n     */\n    \"muted\",\n    /**\n     * Get the value of `defaultMuted` from the media element. `defaultMuted` indicates\n     * whether the media should start muted or not. Only changes the default state of the\n     * media. `muted` and `defaultMuted` can have different values. {@link Html5#muted} indicates the\n     * current state.\n     *\n     * @method Html5#defaultMuted\n     * @return {boolean}\n     *         - The value of `defaultMuted` from the media element.\n     *         - True indicates that the media should start muted.\n     *         - False indicates that the media should not start muted\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}\n     */\n    \"defaultMuted\",\n    /**\n     * Get the value of `autoplay` from the media element. `autoplay` indicates\n     * that the media should start to play as soon as the page is ready.\n     *\n     * @method Html5#autoplay\n     * @return {boolean}\n     *         - The value of `autoplay` from the media element.\n     *         - True indicates that the media should start as soon as the page loads.\n     *         - False indicates that the media should not start as soon as the page loads.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}\n     */\n    \"autoplay\",\n    /**\n     * Get the value of `controls` from the media element. `controls` indicates\n     * whether the native media controls should be shown or hidden.\n     *\n     * @method Html5#controls\n     * @return {boolean}\n     *         - The value of `controls` from the media element.\n     *         - True indicates that native controls should be showing.\n     *         - False indicates that native controls should be hidden.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-controls}\n     */\n    \"controls\",\n    /**\n     * Get the value of `loop` from the media element. `loop` indicates\n     * that the media should return to the start of the media and continue playing once\n     * it reaches the end.\n     *\n     * @method Html5#loop\n     * @return {boolean}\n     *         - The value of `loop` from the media element.\n     *         - True indicates that playback should seek back to start once\n     *           the end of a media is reached.\n     *         - False indicates that playback should not loop back to the start when the\n     *           end of the media is reached.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}\n     */\n    \"loop\",\n    /**\n     * Get the value of `playsinline` from the media element. `playsinline` indicates\n     * to the browser that non-fullscreen playback is preferred when fullscreen\n     * playback is the native default, such as in iOS Safari.\n     *\n     * @method Html5#playsinline\n     * @return {boolean}\n     *         - The value of `playsinline` from the media element.\n     *         - True indicates that the media should play inline.\n     *         - False indicates that the media should not play inline.\n     *\n     * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}\n     */\n    \"playsinline\"\n  ].forEach(function(prop) {\n    Html5.prototype[prop] = function() {\n      return this.el_[prop] || this.el_.hasAttribute(prop);\n    };\n  });\n  [\n    /**\n     * Set the value of `muted` on the media element. `muted` indicates that the current\n     * audio level should be silent.\n     *\n     * @method Html5#setMuted\n     * @param {boolean} muted\n     *        - True if the audio should be set to silent\n     *        - False otherwise\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-muted}\n     */\n    \"muted\",\n    /**\n     * Set the value of `defaultMuted` on the media element. `defaultMuted` indicates that the current\n     * audio level should be silent, but will only effect the muted level on initial playback..\n     *\n     * @method Html5.prototype.setDefaultMuted\n     * @param {boolean} defaultMuted\n     *        - True if the audio should be set to silent\n     *        - False otherwise\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultmuted}\n     */\n    \"defaultMuted\",\n    /**\n     * Set the value of `autoplay` on the media element. `autoplay` indicates\n     * that the media should start to play as soon as the page is ready.\n     *\n     * @method Html5#setAutoplay\n     * @param {boolean} autoplay\n     *         - True indicates that the media should start as soon as the page loads.\n     *         - False indicates that the media should not start as soon as the page loads.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-autoplay}\n     */\n    \"autoplay\",\n    /**\n     * Set the value of `loop` on the media element. `loop` indicates\n     * that the media should return to the start of the media and continue playing once\n     * it reaches the end.\n     *\n     * @method Html5#setLoop\n     * @param {boolean} loop\n     *         - True indicates that playback should seek back to start once\n     *           the end of a media is reached.\n     *         - False indicates that playback should not loop back to the start when the\n     *           end of the media is reached.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-loop}\n     */\n    \"loop\",\n    /**\n     * Set the value of `playsinline` from the media element. `playsinline` indicates\n     * to the browser that non-fullscreen playback is preferred when fullscreen\n     * playback is the native default, such as in iOS Safari.\n     *\n     * @method Html5#setPlaysinline\n     * @param {boolean} playsinline\n     *         - True indicates that the media should play inline.\n     *         - False indicates that the media should not play inline.\n     *\n     * @see [Spec]{@link https://html.spec.whatwg.org/#attr-video-playsinline}\n     */\n    \"playsinline\"\n  ].forEach(function(prop) {\n    Html5.prototype[\"set\" + toTitleCase2(prop)] = function(v) {\n      this.el_[prop] = v;\n      if (v) {\n        this.el_.setAttribute(prop, prop);\n      } else {\n        this.el_.removeAttribute(prop);\n      }\n    };\n  });\n  [\n    /**\n     * Get the value of `paused` from the media element. `paused` indicates whether the media element\n     * is currently paused or not.\n     *\n     * @method Html5#paused\n     * @return {boolean}\n     *         The value of `paused` from the media element.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-paused}\n     */\n    \"paused\",\n    /**\n     * Get the value of `currentTime` from the media element. `currentTime` indicates\n     * the current second that the media is at in playback.\n     *\n     * @method Html5#currentTime\n     * @return {number}\n     *         The value of `currentTime` from the media element.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-currenttime}\n     */\n    \"currentTime\",\n    /**\n     * Get the value of `buffered` from the media element. `buffered` is a `TimeRange`\n     * object that represents the parts of the media that are already downloaded and\n     * available for playback.\n     *\n     * @method Html5#buffered\n     * @return {TimeRange}\n     *         The value of `buffered` from the media element.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-buffered}\n     */\n    \"buffered\",\n    /**\n     * Get the value of `volume` from the media element. `volume` indicates\n     * the current playback volume of audio for a media. `volume` will be a value from 0\n     * (silent) to 1 (loudest and default).\n     *\n     * @method Html5#volume\n     * @return {number}\n     *         The value of `volume` from the media element. Value will be between 0-1.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}\n     */\n    \"volume\",\n    /**\n     * Get the value of `poster` from the media element. `poster` indicates\n     * that the url of an image file that can/will be shown when no media data is available.\n     *\n     * @method Html5#poster\n     * @return {string}\n     *         The value of `poster` from the media element. Value will be a url to an\n     *         image.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-video-poster}\n     */\n    \"poster\",\n    /**\n     * Get the value of `preload` from the media element. `preload` indicates\n     * what should download before the media is interacted with. It can have the following\n     * values:\n     * - none: nothing should be downloaded\n     * - metadata: poster and the first few frames of the media may be downloaded to get\n     *   media dimensions and other metadata\n     * - auto: allow the media and metadata for the media to be downloaded before\n     *    interaction\n     *\n     * @method Html5#preload\n     * @return {string}\n     *         The value of `preload` from the media element. Will be 'none', 'metadata',\n     *         or 'auto'.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}\n     */\n    \"preload\",\n    /**\n     * Get the value of the `error` from the media element. `error` indicates any\n     * MediaError that may have occurred during playback. If error returns null there is no\n     * current error.\n     *\n     * @method Html5#error\n     * @return {MediaError|null}\n     *         The value of `error` from the media element. Will be `MediaError` if there\n     *         is a current error and null otherwise.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-error}\n     */\n    \"error\",\n    /**\n     * Get the value of `seeking` from the media element. `seeking` indicates whether the\n     * media is currently seeking to a new position or not.\n     *\n     * @method Html5#seeking\n     * @return {boolean}\n     *         - The value of `seeking` from the media element.\n     *         - True indicates that the media is currently seeking to a new position.\n     *         - False indicates that the media is not seeking to a new position at this time.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seeking}\n     */\n    \"seeking\",\n    /**\n     * Get the value of `seekable` from the media element. `seekable` returns a\n     * `TimeRange` object indicating ranges of time that can currently be `seeked` to.\n     *\n     * @method Html5#seekable\n     * @return {TimeRange}\n     *         The value of `seekable` from the media element. A `TimeRange` object\n     *         indicating the current ranges of time that can be seeked to.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-seekable}\n     */\n    \"seekable\",\n    /**\n     * Get the value of `ended` from the media element. `ended` indicates whether\n     * the media has reached the end or not.\n     *\n     * @method Html5#ended\n     * @return {boolean}\n     *         - The value of `ended` from the media element.\n     *         - True indicates that the media has ended.\n     *         - False indicates that the media has not ended.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-ended}\n     */\n    \"ended\",\n    /**\n     * Get the value of `playbackRate` from the media element. `playbackRate` indicates\n     * the rate at which the media is currently playing back. Examples:\n     *   - if playbackRate is set to 2, media will play twice as fast.\n     *   - if playbackRate is set to 0.5, media will play half as fast.\n     *\n     * @method Html5#playbackRate\n     * @return {number}\n     *         The value of `playbackRate` from the media element. A number indicating\n     *         the current playback speed of the media, where 1 is normal speed.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n     */\n    \"playbackRate\",\n    /**\n     * Get the value of `defaultPlaybackRate` from the media element. `defaultPlaybackRate` indicates\n     * the rate at which the media is currently playing back. This value will not indicate the current\n     * `playbackRate` after playback has started, use {@link Html5#playbackRate} for that.\n     *\n     * Examples:\n     *   - if defaultPlaybackRate is set to 2, media will play twice as fast.\n     *   - if defaultPlaybackRate is set to 0.5, media will play half as fast.\n     *\n     * @method Html5.prototype.defaultPlaybackRate\n     * @return {number}\n     *         The value of `defaultPlaybackRate` from the media element. A number indicating\n     *         the current playback speed of the media, where 1 is normal speed.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n     */\n    \"defaultPlaybackRate\",\n    /**\n     * Get the value of 'disablePictureInPicture' from the video element.\n     *\n     * @method Html5#disablePictureInPicture\n     * @return {boolean} value\n     *         - The value of `disablePictureInPicture` from the video element.\n     *         - True indicates that the video can't be played in Picture-In-Picture mode\n     *         - False indicates that the video can be played in Picture-In-Picture mode\n     *\n     * @see [Spec]{@link https://w3c.github.io/picture-in-picture/#disable-pip}\n     */\n    \"disablePictureInPicture\",\n    /**\n     * Get the value of `played` from the media element. `played` returns a `TimeRange`\n     * object representing points in the media timeline that have been played.\n     *\n     * @method Html5#played\n     * @return {TimeRange}\n     *         The value of `played` from the media element. A `TimeRange` object indicating\n     *         the ranges of time that have been played.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-played}\n     */\n    \"played\",\n    /**\n     * Get the value of `networkState` from the media element. `networkState` indicates\n     * the current network state. It returns an enumeration from the following list:\n     * - 0: NETWORK_EMPTY\n     * - 1: NETWORK_IDLE\n     * - 2: NETWORK_LOADING\n     * - 3: NETWORK_NO_SOURCE\n     *\n     * @method Html5#networkState\n     * @return {number}\n     *         The value of `networkState` from the media element. This will be a number\n     *         from the list in the description.\n     *\n     * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-networkstate}\n     */\n    \"networkState\",\n    /**\n     * Get the value of `readyState` from the media element. `readyState` indicates\n     * the current state of the media element. It returns an enumeration from the\n     * following list:\n     * - 0: HAVE_NOTHING\n     * - 1: HAVE_METADATA\n     * - 2: HAVE_CURRENT_DATA\n     * - 3: HAVE_FUTURE_DATA\n     * - 4: HAVE_ENOUGH_DATA\n     *\n     * @method Html5#readyState\n     * @return {number}\n     *         The value of `readyState` from the media element. This will be a number\n     *         from the list in the description.\n     *\n     * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#ready-states}\n     */\n    \"readyState\",\n    /**\n     * Get the value of `videoWidth` from the video element. `videoWidth` indicates\n     * the current width of the video in css pixels.\n     *\n     * @method Html5#videoWidth\n     * @return {number}\n     *         The value of `videoWidth` from the video element. This will be a number\n     *         in css pixels.\n     *\n     * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}\n     */\n    \"videoWidth\",\n    /**\n     * Get the value of `videoHeight` from the video element. `videoHeight` indicates\n     * the current height of the video in css pixels.\n     *\n     * @method Html5#videoHeight\n     * @return {number}\n     *         The value of `videoHeight` from the video element. This will be a number\n     *         in css pixels.\n     *\n     * @see [Spec] {@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-video-videowidth}\n     */\n    \"videoHeight\",\n    /**\n     * Get the value of `crossOrigin` from the media element. `crossOrigin` indicates\n     * to the browser that should sent the cookies along with the requests for the\n     * different assets/playlists\n     *\n     * @method Html5#crossOrigin\n     * @return {string}\n     *         - anonymous indicates that the media should not sent cookies.\n     *         - use-credentials indicates that the media should sent cookies along the requests.\n     *\n     * @see [Spec]{@link https://html.spec.whatwg.org/#attr-media-crossorigin}\n     */\n    \"crossOrigin\"\n  ].forEach(function(prop) {\n    Html5.prototype[prop] = function() {\n      return this.el_[prop];\n    };\n  });\n  [\n    /**\n     * Set the value of `volume` on the media element. `volume` indicates the current\n     * audio level as a percentage in decimal form. This means that 1 is 100%, 0.5 is 50%, and\n     * so on.\n     *\n     * @method Html5#setVolume\n     * @param {number} percentAsDecimal\n     *        The volume percent as a decimal. Valid range is from 0-1.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-a-volume}\n     */\n    \"volume\",\n    /**\n     * Set the value of `src` on the media element. `src` indicates the current\n     * {@link Tech~SourceObject} for the media.\n     *\n     * @method Html5#setSrc\n     * @param {Tech~SourceObject} src\n     *        The source object to set as the current source.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-src}\n     */\n    \"src\",\n    /**\n     * Set the value of `poster` on the media element. `poster` is the url to\n     * an image file that can/will be shown when no media data is available.\n     *\n     * @method Html5#setPoster\n     * @param {string} poster\n     *        The url to an image that should be used as the `poster` for the media\n     *        element.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-poster}\n     */\n    \"poster\",\n    /**\n     * Set the value of `preload` on the media element. `preload` indicates\n     * what should download before the media is interacted with. It can have the following\n     * values:\n     * - none: nothing should be downloaded\n     * - metadata: poster and the first few frames of the media may be downloaded to get\n     *   media dimensions and other metadata\n     * - auto: allow the media and metadata for the media to be downloaded before\n     *    interaction\n     *\n     * @method Html5#setPreload\n     * @param {string} preload\n     *         The value of `preload` to set on the media element. Must be 'none', 'metadata',\n     *         or 'auto'.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#attr-media-preload}\n     */\n    \"preload\",\n    /**\n     * Set the value of `playbackRate` on the media element. `playbackRate` indicates\n     * the rate at which the media should play back. Examples:\n     *   - if playbackRate is set to 2, media will play twice as fast.\n     *   - if playbackRate is set to 0.5, media will play half as fast.\n     *\n     * @method Html5#setPlaybackRate\n     * @return {number}\n     *         The value of `playbackRate` from the media element. A number indicating\n     *         the current playback speed of the media, where 1 is normal speed.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-playbackrate}\n     */\n    \"playbackRate\",\n    /**\n     * Set the value of `defaultPlaybackRate` on the media element. `defaultPlaybackRate` indicates\n     * the rate at which the media should play back upon initial startup. Changing this value\n     * after a video has started will do nothing. Instead you should used {@link Html5#setPlaybackRate}.\n     *\n     * Example Values:\n     *   - if playbackRate is set to 2, media will play twice as fast.\n     *   - if playbackRate is set to 0.5, media will play half as fast.\n     *\n     * @method Html5.prototype.setDefaultPlaybackRate\n     * @return {number}\n     *         The value of `defaultPlaybackRate` from the media element. A number indicating\n     *         the current playback speed of the media, where 1 is normal speed.\n     *\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-defaultplaybackrate}\n     */\n    \"defaultPlaybackRate\",\n    /**\n     * Prevents the browser from suggesting a Picture-in-Picture context menu\n     * or to request Picture-in-Picture automatically in some cases.\n     *\n     * @method Html5#setDisablePictureInPicture\n     * @param {boolean} value\n     *         The true value will disable Picture-in-Picture mode.\n     *\n     * @see [Spec]{@link https://w3c.github.io/picture-in-picture/#disable-pip}\n     */\n    \"disablePictureInPicture\",\n    /**\n     * Set the value of `crossOrigin` from the media element. `crossOrigin` indicates\n     * to the browser that should sent the cookies along with the requests for the\n     * different assets/playlists\n     *\n     * @method Html5#setCrossOrigin\n     * @param {string} crossOrigin\n     *         - anonymous indicates that the media should not sent cookies.\n     *         - use-credentials indicates that the media should sent cookies along the requests.\n     *\n     * @see [Spec]{@link https://html.spec.whatwg.org/#attr-media-crossorigin}\n     */\n    \"crossOrigin\"\n  ].forEach(function(prop) {\n    Html5.prototype[\"set\" + toTitleCase2(prop)] = function(v) {\n      this.el_[prop] = v;\n    };\n  });\n  [\n    /**\n     * A wrapper around the media elements `pause` function. This will call the `HTML5`\n     * media elements `pause` function.\n     *\n     * @method Html5#pause\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-pause}\n     */\n    \"pause\",\n    /**\n     * A wrapper around the media elements `load` function. This will call the `HTML5`s\n     * media element `load` function.\n     *\n     * @method Html5#load\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-load}\n     */\n    \"load\",\n    /**\n     * A wrapper around the media elements `play` function. This will call the `HTML5`s\n     * media element `play` function.\n     *\n     * @method Html5#play\n     * @see [Spec]{@link https://www.w3.org/TR/html5/embedded-content-0.html#dom-media-play}\n     */\n    \"play\"\n  ].forEach(function(prop) {\n    Html5.prototype[prop] = function() {\n      return this.el_[prop]();\n    };\n  });\n  Tech.withSourceHandlers(Html5);\n  Html5.nativeSourceHandler = {};\n  Html5.nativeSourceHandler.canPlayType = function(type) {\n    try {\n      return Html5.TEST_VID.canPlayType(type);\n    } catch (e) {\n      return \"\";\n    }\n  };\n  Html5.nativeSourceHandler.canHandleSource = function(source, options) {\n    if (source.type) {\n      return Html5.nativeSourceHandler.canPlayType(source.type);\n    } else if (source.src) {\n      var ext = getFileExtension(source.src);\n      return Html5.nativeSourceHandler.canPlayType(\"video/\" + ext);\n    }\n    return \"\";\n  };\n  Html5.nativeSourceHandler.handleSource = function(source, tech, options) {\n    tech.setSrc(source.src);\n  };\n  Html5.nativeSourceHandler.dispose = function() {\n  };\n  Html5.registerSourceHandler(Html5.nativeSourceHandler);\n  Tech.registerTech(\"Html5\", Html5);\n  var TECH_EVENTS_RETRIGGER = [\n    /**\n     * Fired while the user agent is downloading media data.\n     *\n     * @event Player#progress\n     * @type {EventTarget~Event}\n     */\n    /**\n     * Retrigger the `progress` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechProgress_\n     * @fires Player#progress\n     * @listens Tech#progress\n     */\n    \"progress\",\n    /**\n     * Fires when the loading of an audio/video is aborted.\n     *\n     * @event Player#abort\n     * @type {EventTarget~Event}\n     */\n    /**\n     * Retrigger the `abort` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechAbort_\n     * @fires Player#abort\n     * @listens Tech#abort\n     */\n    \"abort\",\n    /**\n     * Fires when the browser is intentionally not getting media data.\n     *\n     * @event Player#suspend\n     * @type {EventTarget~Event}\n     */\n    /**\n     * Retrigger the `suspend` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechSuspend_\n     * @fires Player#suspend\n     * @listens Tech#suspend\n     */\n    \"suspend\",\n    /**\n     * Fires when the current playlist is empty.\n     *\n     * @event Player#emptied\n     * @type {EventTarget~Event}\n     */\n    /**\n     * Retrigger the `emptied` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechEmptied_\n     * @fires Player#emptied\n     * @listens Tech#emptied\n     */\n    \"emptied\",\n    /**\n     * Fires when the browser is trying to get media data, but data is not available.\n     *\n     * @event Player#stalled\n     * @type {EventTarget~Event}\n     */\n    /**\n     * Retrigger the `stalled` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechStalled_\n     * @fires Player#stalled\n     * @listens Tech#stalled\n     */\n    \"stalled\",\n    /**\n     * Fires when the browser has loaded meta data for the audio/video.\n     *\n     * @event Player#loadedmetadata\n     * @type {EventTarget~Event}\n     */\n    /**\n     * Retrigger the `loadedmetadata` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechLoadedmetadata_\n     * @fires Player#loadedmetadata\n     * @listens Tech#loadedmetadata\n     */\n    \"loadedmetadata\",\n    /**\n     * Fires when the browser has loaded the current frame of the audio/video.\n     *\n     * @event Player#loadeddata\n     * @type {event}\n     */\n    /**\n     * Retrigger the `loadeddata` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechLoaddeddata_\n     * @fires Player#loadeddata\n     * @listens Tech#loadeddata\n     */\n    \"loadeddata\",\n    /**\n     * Fires when the current playback position has changed.\n     *\n     * @event Player#timeupdate\n     * @type {event}\n     */\n    /**\n     * Retrigger the `timeupdate` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechTimeUpdate_\n     * @fires Player#timeupdate\n     * @listens Tech#timeupdate\n     */\n    \"timeupdate\",\n    /**\n     * Fires when the video's intrinsic dimensions change\n     *\n     * @event Player#resize\n     * @type {event}\n     */\n    /**\n     * Retrigger the `resize` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechResize_\n     * @fires Player#resize\n     * @listens Tech#resize\n     */\n    \"resize\",\n    /**\n     * Fires when the volume has been changed\n     *\n     * @event Player#volumechange\n     * @type {event}\n     */\n    /**\n     * Retrigger the `volumechange` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechVolumechange_\n     * @fires Player#volumechange\n     * @listens Tech#volumechange\n     */\n    \"volumechange\",\n    /**\n     * Fires when the text track has been changed\n     *\n     * @event Player#texttrackchange\n     * @type {event}\n     */\n    /**\n     * Retrigger the `texttrackchange` event that was triggered by the {@link Tech}.\n     *\n     * @private\n     * @method Player#handleTechTexttrackchange_\n     * @fires Player#texttrackchange\n     * @listens Tech#texttrackchange\n     */\n    \"texttrackchange\"\n  ];\n  var TECH_EVENTS_QUEUE = {\n    canplay: \"CanPlay\",\n    canplaythrough: \"CanPlayThrough\",\n    playing: \"Playing\",\n    seeked: \"Seeked\"\n  };\n  var BREAKPOINT_ORDER = [\"tiny\", \"xsmall\", \"small\", \"medium\", \"large\", \"xlarge\", \"huge\"];\n  var BREAKPOINT_CLASSES = {};\n  BREAKPOINT_ORDER.forEach(function(k) {\n    var v = k.charAt(0) === \"x\" ? \"x-\" + k.substring(1) : k;\n    BREAKPOINT_CLASSES[k] = \"vjs-layout-\" + v;\n  });\n  var DEFAULT_BREAKPOINTS = {\n    tiny: 210,\n    xsmall: 320,\n    small: 425,\n    medium: 768,\n    large: 1440,\n    xlarge: 2560,\n    huge: Infinity\n  };\n  var Player = /* @__PURE__ */ function(_Component) {\n    _inheritsLoose__default[\"default\"](Player2, _Component);\n    function Player2(tag, options, ready) {\n      var _this;\n      tag.id = tag.id || options.id || \"vjs_video_\" + newGUID();\n      options = assign(Player2.getTagSettings(tag), options);\n      options.initChildren = false;\n      options.createEl = false;\n      options.evented = false;\n      options.reportTouchActivity = false;\n      if (!options.language) {\n        if (typeof tag.closest === \"function\") {\n          var closest = tag.closest(\"[lang]\");\n          if (closest && closest.getAttribute) {\n            options.language = closest.getAttribute(\"lang\");\n          }\n        } else {\n          var element = tag;\n          while (element && element.nodeType === 1) {\n            if (getAttributes(element).hasOwnProperty(\"lang\")) {\n              options.language = element.getAttribute(\"lang\");\n              break;\n            }\n            element = element.parentNode;\n          }\n        }\n      }\n      _this = _Component.call(this, null, options, ready) || this;\n      _this.boundDocumentFullscreenChange_ = function(e) {\n        return _this.documentFullscreenChange_(e);\n      };\n      _this.boundFullWindowOnEscKey_ = function(e) {\n        return _this.fullWindowOnEscKey(e);\n      };\n      _this.boundUpdateStyleEl_ = function(e) {\n        return _this.updateStyleEl_(e);\n      };\n      _this.boundApplyInitTime_ = function(e) {\n        return _this.applyInitTime_(e);\n      };\n      _this.boundUpdateCurrentBreakpoint_ = function(e) {\n        return _this.updateCurrentBreakpoint_(e);\n      };\n      _this.boundHandleTechClick_ = function(e) {\n        return _this.handleTechClick_(e);\n      };\n      _this.boundHandleTechDoubleClick_ = function(e) {\n        return _this.handleTechDoubleClick_(e);\n      };\n      _this.boundHandleTechTouchStart_ = function(e) {\n        return _this.handleTechTouchStart_(e);\n      };\n      _this.boundHandleTechTouchMove_ = function(e) {\n        return _this.handleTechTouchMove_(e);\n      };\n      _this.boundHandleTechTouchEnd_ = function(e) {\n        return _this.handleTechTouchEnd_(e);\n      };\n      _this.boundHandleTechTap_ = function(e) {\n        return _this.handleTechTap_(e);\n      };\n      _this.isFullscreen_ = false;\n      _this.log = createLogger2(_this.id_);\n      _this.fsApi_ = FullscreenApi;\n      _this.isPosterFromTech_ = false;\n      _this.queuedCallbacks_ = [];\n      _this.isReady_ = false;\n      _this.hasStarted_ = false;\n      _this.userActive_ = false;\n      _this.debugEnabled_ = false;\n      _this.audioOnlyMode_ = false;\n      _this.audioPosterMode_ = false;\n      _this.audioOnlyCache_ = {\n        playerHeight: null,\n        hiddenChildren: []\n      };\n      if (!_this.options_ || !_this.options_.techOrder || !_this.options_.techOrder.length) {\n        throw new Error(\"No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?\");\n      }\n      _this.tag = tag;\n      _this.tagAttributes = tag && getAttributes(tag);\n      _this.language(_this.options_.language);\n      if (options.languages) {\n        var languagesToLower = {};\n        Object.getOwnPropertyNames(options.languages).forEach(function(name) {\n          languagesToLower[name.toLowerCase()] = options.languages[name];\n        });\n        _this.languages_ = languagesToLower;\n      } else {\n        _this.languages_ = Player2.prototype.options_.languages;\n      }\n      _this.resetCache_();\n      _this.poster_ = options.poster || \"\";\n      _this.controls_ = !!options.controls;\n      tag.controls = false;\n      tag.removeAttribute(\"controls\");\n      _this.changingSrc_ = false;\n      _this.playCallbacks_ = [];\n      _this.playTerminatedQueue_ = [];\n      if (tag.hasAttribute(\"autoplay\")) {\n        _this.autoplay(true);\n      } else {\n        _this.autoplay(_this.options_.autoplay);\n      }\n      if (options.plugins) {\n        Object.keys(options.plugins).forEach(function(name) {\n          if (typeof _this[name] !== \"function\") {\n            throw new Error('plugin \"' + name + '\" does not exist');\n          }\n        });\n      }\n      _this.scrubbing_ = false;\n      _this.el_ = _this.createEl();\n      evented(_assertThisInitialized__default[\"default\"](_this), {\n        eventBusKey: \"el_\"\n      });\n      if (_this.fsApi_.requestFullscreen) {\n        on(document__default[\"default\"], _this.fsApi_.fullscreenchange, _this.boundDocumentFullscreenChange_);\n        _this.on(_this.fsApi_.fullscreenchange, _this.boundDocumentFullscreenChange_);\n      }\n      if (_this.fluid_) {\n        _this.on([\"playerreset\", \"resize\"], _this.boundUpdateStyleEl_);\n      }\n      var playerOptionsCopy = mergeOptions(_this.options_);\n      if (options.plugins) {\n        Object.keys(options.plugins).forEach(function(name) {\n          _this[name](options.plugins[name]);\n        });\n      }\n      if (options.debug) {\n        _this.debug(true);\n      }\n      _this.options_.playerOptions = playerOptionsCopy;\n      _this.middleware_ = [];\n      _this.playbackRates(options.playbackRates);\n      _this.initChildren();\n      _this.isAudio(tag.nodeName.toLowerCase() === \"audio\");\n      if (_this.controls()) {\n        _this.addClass(\"vjs-controls-enabled\");\n      } else {\n        _this.addClass(\"vjs-controls-disabled\");\n      }\n      _this.el_.setAttribute(\"role\", \"region\");\n      if (_this.isAudio()) {\n        _this.el_.setAttribute(\"aria-label\", _this.localize(\"Audio Player\"));\n      } else {\n        _this.el_.setAttribute(\"aria-label\", _this.localize(\"Video Player\"));\n      }\n      if (_this.isAudio()) {\n        _this.addClass(\"vjs-audio\");\n      }\n      if (_this.flexNotSupported_()) {\n        _this.addClass(\"vjs-no-flex\");\n      }\n      if (TOUCH_ENABLED) {\n        _this.addClass(\"vjs-touch-enabled\");\n      }\n      if (!IS_IOS) {\n        _this.addClass(\"vjs-workinghover\");\n      }\n      Player2.players[_this.id_] = _assertThisInitialized__default[\"default\"](_this);\n      var majorVersion = version2.split(\".\")[0];\n      _this.addClass(\"vjs-v\" + majorVersion);\n      _this.userActive(true);\n      _this.reportUserActivity();\n      _this.one(\"play\", function(e) {\n        return _this.listenForUserActivity_(e);\n      });\n      _this.on(\"stageclick\", function(e) {\n        return _this.handleStageClick_(e);\n      });\n      _this.on(\"keydown\", function(e) {\n        return _this.handleKeyDown(e);\n      });\n      _this.on(\"languagechange\", function(e) {\n        return _this.handleLanguagechange(e);\n      });\n      _this.breakpoints(_this.options_.breakpoints);\n      _this.responsive(_this.options_.responsive);\n      _this.on(\"ready\", function() {\n        _this.audioPosterMode(_this.options_.audioPosterMode);\n        _this.audioOnlyMode(_this.options_.audioOnlyMode);\n      });\n      return _this;\n    }\n    var _proto = Player2.prototype;\n    _proto.dispose = function dispose() {\n      var _this2 = this;\n      this.trigger(\"dispose\");\n      this.off(\"dispose\");\n      off(document__default[\"default\"], this.fsApi_.fullscreenchange, this.boundDocumentFullscreenChange_);\n      off(document__default[\"default\"], \"keydown\", this.boundFullWindowOnEscKey_);\n      if (this.styleEl_ && this.styleEl_.parentNode) {\n        this.styleEl_.parentNode.removeChild(this.styleEl_);\n        this.styleEl_ = null;\n      }\n      Player2.players[this.id_] = null;\n      if (this.tag && this.tag.player) {\n        this.tag.player = null;\n      }\n      if (this.el_ && this.el_.player) {\n        this.el_.player = null;\n      }\n      if (this.tech_) {\n        this.tech_.dispose();\n        this.isPosterFromTech_ = false;\n        this.poster_ = \"\";\n      }\n      if (this.playerElIngest_) {\n        this.playerElIngest_ = null;\n      }\n      if (this.tag) {\n        this.tag = null;\n      }\n      clearCacheForPlayer(this);\n      ALL.names.forEach(function(name) {\n        var props = ALL[name];\n        var list = _this2[props.getterName]();\n        if (list && list.off) {\n          list.off();\n        }\n      });\n      _Component.prototype.dispose.call(this, {\n        restoreEl: this.options_.restoreEl\n      });\n    };\n    _proto.createEl = function createEl2() {\n      var tag = this.tag;\n      var el;\n      var playerElIngest = this.playerElIngest_ = tag.parentNode && tag.parentNode.hasAttribute && tag.parentNode.hasAttribute(\"data-vjs-player\");\n      var divEmbed = this.tag.tagName.toLowerCase() === \"video-js\";\n      if (playerElIngest) {\n        el = this.el_ = tag.parentNode;\n      } else if (!divEmbed) {\n        el = this.el_ = _Component.prototype.createEl.call(this, \"div\");\n      }\n      var attrs = getAttributes(tag);\n      if (divEmbed) {\n        el = this.el_ = tag;\n        tag = this.tag = document__default[\"default\"].createElement(\"video\");\n        while (el.children.length) {\n          tag.appendChild(el.firstChild);\n        }\n        if (!hasClass(el, \"video-js\")) {\n          addClass(el, \"video-js\");\n        }\n        el.appendChild(tag);\n        playerElIngest = this.playerElIngest_ = el;\n        Object.keys(el).forEach(function(k) {\n          try {\n            tag[k] = el[k];\n          } catch (e) {\n          }\n        });\n      }\n      tag.setAttribute(\"tabindex\", \"-1\");\n      attrs.tabindex = \"-1\";\n      if (IE_VERSION || IS_CHROME && IS_WINDOWS) {\n        tag.setAttribute(\"role\", \"application\");\n        attrs.role = \"application\";\n      }\n      tag.removeAttribute(\"width\");\n      tag.removeAttribute(\"height\");\n      if (\"width\" in attrs) {\n        delete attrs.width;\n      }\n      if (\"height\" in attrs) {\n        delete attrs.height;\n      }\n      Object.getOwnPropertyNames(attrs).forEach(function(attr) {\n        if (!(divEmbed && attr === \"class\")) {\n          el.setAttribute(attr, attrs[attr]);\n        }\n        if (divEmbed) {\n          tag.setAttribute(attr, attrs[attr]);\n        }\n      });\n      tag.playerId = tag.id;\n      tag.id += \"_html5_api\";\n      tag.className = \"vjs-tech\";\n      tag.player = el.player = this;\n      this.addClass(\"vjs-paused\");\n      if (window__default[\"default\"].VIDEOJS_NO_DYNAMIC_STYLE !== true) {\n        this.styleEl_ = createStyleElement(\"vjs-styles-dimensions\");\n        var defaultsStyleEl = $(\".vjs-styles-defaults\");\n        var head2 = $(\"head\");\n        head2.insertBefore(this.styleEl_, defaultsStyleEl ? defaultsStyleEl.nextSibling : head2.firstChild);\n      }\n      this.fill_ = false;\n      this.fluid_ = false;\n      this.width(this.options_.width);\n      this.height(this.options_.height);\n      this.fill(this.options_.fill);\n      this.fluid(this.options_.fluid);\n      this.aspectRatio(this.options_.aspectRatio);\n      this.crossOrigin(this.options_.crossOrigin || this.options_.crossorigin);\n      var links = tag.getElementsByTagName(\"a\");\n      for (var i2 = 0; i2 < links.length; i2++) {\n        var linkEl = links.item(i2);\n        addClass(linkEl, \"vjs-hidden\");\n        linkEl.setAttribute(\"hidden\", \"hidden\");\n      }\n      tag.initNetworkState_ = tag.networkState;\n      if (tag.parentNode && !playerElIngest) {\n        tag.parentNode.insertBefore(el, tag);\n      }\n      prependTo(tag, el);\n      this.children_.unshift(tag);\n      this.el_.setAttribute(\"lang\", this.language_);\n      this.el_.setAttribute(\"translate\", \"no\");\n      this.el_ = el;\n      return el;\n    };\n    _proto.crossOrigin = function crossOrigin(value) {\n      if (!value) {\n        return this.techGet_(\"crossOrigin\");\n      }\n      if (value !== \"anonymous\" && value !== \"use-credentials\") {\n        log.warn('crossOrigin must be \"anonymous\" or \"use-credentials\", given \"' + value + '\"');\n        return;\n      }\n      this.techCall_(\"setCrossOrigin\", value);\n      return;\n    };\n    _proto.width = function width(value) {\n      return this.dimension(\"width\", value);\n    };\n    _proto.height = function height(value) {\n      return this.dimension(\"height\", value);\n    };\n    _proto.dimension = function dimension(_dimension, value) {\n      var privDimension = _dimension + \"_\";\n      if (value === void 0) {\n        return this[privDimension] || 0;\n      }\n      if (value === \"\" || value === \"auto\") {\n        this[privDimension] = void 0;\n        this.updateStyleEl_();\n        return;\n      }\n      var parsedVal = parseFloat(value);\n      if (isNaN(parsedVal)) {\n        log.error('Improper value \"' + value + '\" supplied for for ' + _dimension);\n        return;\n      }\n      this[privDimension] = parsedVal;\n      this.updateStyleEl_();\n    };\n    _proto.fluid = function fluid(bool) {\n      var _this3 = this;\n      if (bool === void 0) {\n        return !!this.fluid_;\n      }\n      this.fluid_ = !!bool;\n      if (isEvented(this)) {\n        this.off([\"playerreset\", \"resize\"], this.boundUpdateStyleEl_);\n      }\n      if (bool) {\n        this.addClass(\"vjs-fluid\");\n        this.fill(false);\n        addEventedCallback(this, function() {\n          _this3.on([\"playerreset\", \"resize\"], _this3.boundUpdateStyleEl_);\n        });\n      } else {\n        this.removeClass(\"vjs-fluid\");\n      }\n      this.updateStyleEl_();\n    };\n    _proto.fill = function fill(bool) {\n      if (bool === void 0) {\n        return !!this.fill_;\n      }\n      this.fill_ = !!bool;\n      if (bool) {\n        this.addClass(\"vjs-fill\");\n        this.fluid(false);\n      } else {\n        this.removeClass(\"vjs-fill\");\n      }\n    };\n    _proto.aspectRatio = function aspectRatio(ratio) {\n      if (ratio === void 0) {\n        return this.aspectRatio_;\n      }\n      if (!/^\\d+\\:\\d+$/.test(ratio)) {\n        throw new Error(\"Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.\");\n      }\n      this.aspectRatio_ = ratio;\n      this.fluid(true);\n      this.updateStyleEl_();\n    };\n    _proto.updateStyleEl_ = function updateStyleEl_() {\n      if (window__default[\"default\"].VIDEOJS_NO_DYNAMIC_STYLE === true) {\n        var _width = typeof this.width_ === \"number\" ? this.width_ : this.options_.width;\n        var _height = typeof this.height_ === \"number\" ? this.height_ : this.options_.height;\n        var techEl = this.tech_ && this.tech_.el();\n        if (techEl) {\n          if (_width >= 0) {\n            techEl.width = _width;\n          }\n          if (_height >= 0) {\n            techEl.height = _height;\n          }\n        }\n        return;\n      }\n      var width;\n      var height;\n      var aspectRatio;\n      var idClass;\n      if (this.aspectRatio_ !== void 0 && this.aspectRatio_ !== \"auto\") {\n        aspectRatio = this.aspectRatio_;\n      } else if (this.videoWidth() > 0) {\n        aspectRatio = this.videoWidth() + \":\" + this.videoHeight();\n      } else {\n        aspectRatio = \"16:9\";\n      }\n      var ratioParts = aspectRatio.split(\":\");\n      var ratioMultiplier = ratioParts[1] / ratioParts[0];\n      if (this.width_ !== void 0) {\n        width = this.width_;\n      } else if (this.height_ !== void 0) {\n        width = this.height_ / ratioMultiplier;\n      } else {\n        width = this.videoWidth() || 300;\n      }\n      if (this.height_ !== void 0) {\n        height = this.height_;\n      } else {\n        height = width * ratioMultiplier;\n      }\n      if (/^[^a-zA-Z]/.test(this.id())) {\n        idClass = \"dimensions-\" + this.id();\n      } else {\n        idClass = this.id() + \"-dimensions\";\n      }\n      this.addClass(idClass);\n      setTextContent(this.styleEl_, \"\\n      .\" + idClass + \" {\\n        width: \" + width + \"px;\\n        height: \" + height + \"px;\\n      }\\n\\n      .\" + idClass + \".vjs-fluid:not(.vjs-audio-only-mode) {\\n        padding-top: \" + ratioMultiplier * 100 + \"%;\\n      }\\n    \");\n    };\n    _proto.loadTech_ = function loadTech_(techName, source) {\n      var _this4 = this;\n      if (this.tech_) {\n        this.unloadTech_();\n      }\n      var titleTechName = toTitleCase2(techName);\n      var camelTechName = techName.charAt(0).toLowerCase() + techName.slice(1);\n      if (titleTechName !== \"Html5\" && this.tag) {\n        Tech.getTech(\"Html5\").disposeMediaElement(this.tag);\n        this.tag.player = null;\n        this.tag = null;\n      }\n      this.techName_ = titleTechName;\n      this.isReady_ = false;\n      var autoplay = this.autoplay();\n      if (typeof this.autoplay() === \"string\" || this.autoplay() === true && this.options_.normalizeAutoplay) {\n        autoplay = false;\n      }\n      var techOptions = {\n        source,\n        autoplay,\n        \"nativeControlsForTouch\": this.options_.nativeControlsForTouch,\n        \"playerId\": this.id(),\n        \"techId\": this.id() + \"_\" + camelTechName + \"_api\",\n        \"playsinline\": this.options_.playsinline,\n        \"preload\": this.options_.preload,\n        \"loop\": this.options_.loop,\n        \"disablePictureInPicture\": this.options_.disablePictureInPicture,\n        \"muted\": this.options_.muted,\n        \"poster\": this.poster(),\n        \"language\": this.language(),\n        \"playerElIngest\": this.playerElIngest_ || false,\n        \"vtt.js\": this.options_[\"vtt.js\"],\n        \"canOverridePoster\": !!this.options_.techCanOverridePoster,\n        \"enableSourceset\": this.options_.enableSourceset,\n        \"Promise\": this.options_.Promise\n      };\n      ALL.names.forEach(function(name) {\n        var props = ALL[name];\n        techOptions[props.getterName] = _this4[props.privateName];\n      });\n      assign(techOptions, this.options_[titleTechName]);\n      assign(techOptions, this.options_[camelTechName]);\n      assign(techOptions, this.options_[techName.toLowerCase()]);\n      if (this.tag) {\n        techOptions.tag = this.tag;\n      }\n      if (source && source.src === this.cache_.src && this.cache_.currentTime > 0) {\n        techOptions.startTime = this.cache_.currentTime;\n      }\n      var TechClass = Tech.getTech(techName);\n      if (!TechClass) {\n        throw new Error(\"No Tech named '\" + titleTechName + \"' exists! '\" + titleTechName + \"' should be registered using videojs.registerTech()'\");\n      }\n      this.tech_ = new TechClass(techOptions);\n      this.tech_.ready(bind(this, this.handleTechReady_), true);\n      textTrackConverter.jsonToTextTracks(this.textTracksJson_ || [], this.tech_);\n      TECH_EVENTS_RETRIGGER.forEach(function(event2) {\n        _this4.on(_this4.tech_, event2, function(e) {\n          return _this4[\"handleTech\" + toTitleCase2(event2) + \"_\"](e);\n        });\n      });\n      Object.keys(TECH_EVENTS_QUEUE).forEach(function(event2) {\n        _this4.on(_this4.tech_, event2, function(eventObj) {\n          if (_this4.tech_.playbackRate() === 0 && _this4.tech_.seeking()) {\n            _this4.queuedCallbacks_.push({\n              callback: _this4[\"handleTech\" + TECH_EVENTS_QUEUE[event2] + \"_\"].bind(_this4),\n              event: eventObj\n            });\n            return;\n          }\n          _this4[\"handleTech\" + TECH_EVENTS_QUEUE[event2] + \"_\"](eventObj);\n        });\n      });\n      this.on(this.tech_, \"loadstart\", function(e) {\n        return _this4.handleTechLoadStart_(e);\n      });\n      this.on(this.tech_, \"sourceset\", function(e) {\n        return _this4.handleTechSourceset_(e);\n      });\n      this.on(this.tech_, \"waiting\", function(e) {\n        return _this4.handleTechWaiting_(e);\n      });\n      this.on(this.tech_, \"ended\", function(e) {\n        return _this4.handleTechEnded_(e);\n      });\n      this.on(this.tech_, \"seeking\", function(e) {\n        return _this4.handleTechSeeking_(e);\n      });\n      this.on(this.tech_, \"play\", function(e) {\n        return _this4.handleTechPlay_(e);\n      });\n      this.on(this.tech_, \"firstplay\", function(e) {\n        return _this4.handleTechFirstPlay_(e);\n      });\n      this.on(this.tech_, \"pause\", function(e) {\n        return _this4.handleTechPause_(e);\n      });\n      this.on(this.tech_, \"durationchange\", function(e) {\n        return _this4.handleTechDurationChange_(e);\n      });\n      this.on(this.tech_, \"fullscreenchange\", function(e, data) {\n        return _this4.handleTechFullscreenChange_(e, data);\n      });\n      this.on(this.tech_, \"fullscreenerror\", function(e, err) {\n        return _this4.handleTechFullscreenError_(e, err);\n      });\n      this.on(this.tech_, \"enterpictureinpicture\", function(e) {\n        return _this4.handleTechEnterPictureInPicture_(e);\n      });\n      this.on(this.tech_, \"leavepictureinpicture\", function(e) {\n        return _this4.handleTechLeavePictureInPicture_(e);\n      });\n      this.on(this.tech_, \"error\", function(e) {\n        return _this4.handleTechError_(e);\n      });\n      this.on(this.tech_, \"posterchange\", function(e) {\n        return _this4.handleTechPosterChange_(e);\n      });\n      this.on(this.tech_, \"textdata\", function(e) {\n        return _this4.handleTechTextData_(e);\n      });\n      this.on(this.tech_, \"ratechange\", function(e) {\n        return _this4.handleTechRateChange_(e);\n      });\n      this.on(this.tech_, \"loadedmetadata\", this.boundUpdateStyleEl_);\n      this.usingNativeControls(this.techGet_(\"controls\"));\n      if (this.controls() && !this.usingNativeControls()) {\n        this.addTechControlsListeners_();\n      }\n      if (this.tech_.el().parentNode !== this.el() && (titleTechName !== \"Html5\" || !this.tag)) {\n        prependTo(this.tech_.el(), this.el());\n      }\n      if (this.tag) {\n        this.tag.player = null;\n        this.tag = null;\n      }\n    };\n    _proto.unloadTech_ = function unloadTech_() {\n      var _this5 = this;\n      ALL.names.forEach(function(name) {\n        var props = ALL[name];\n        _this5[props.privateName] = _this5[props.getterName]();\n      });\n      this.textTracksJson_ = textTrackConverter.textTracksToJson(this.tech_);\n      this.isReady_ = false;\n      this.tech_.dispose();\n      this.tech_ = false;\n      if (this.isPosterFromTech_) {\n        this.poster_ = \"\";\n        this.trigger(\"posterchange\");\n      }\n      this.isPosterFromTech_ = false;\n    };\n    _proto.tech = function tech(safety) {\n      if (safety === void 0) {\n        log.warn(\"Using the tech directly can be dangerous. I hope you know what you're doing.\\nSee https://github.com/videojs/video.js/issues/2617 for more info.\\n\");\n      }\n      return this.tech_;\n    };\n    _proto.addTechControlsListeners_ = function addTechControlsListeners_() {\n      this.removeTechControlsListeners_();\n      this.on(this.tech_, \"click\", this.boundHandleTechClick_);\n      this.on(this.tech_, \"dblclick\", this.boundHandleTechDoubleClick_);\n      this.on(this.tech_, \"touchstart\", this.boundHandleTechTouchStart_);\n      this.on(this.tech_, \"touchmove\", this.boundHandleTechTouchMove_);\n      this.on(this.tech_, \"touchend\", this.boundHandleTechTouchEnd_);\n      this.on(this.tech_, \"tap\", this.boundHandleTechTap_);\n    };\n    _proto.removeTechControlsListeners_ = function removeTechControlsListeners_() {\n      this.off(this.tech_, \"tap\", this.boundHandleTechTap_);\n      this.off(this.tech_, \"touchstart\", this.boundHandleTechTouchStart_);\n      this.off(this.tech_, \"touchmove\", this.boundHandleTechTouchMove_);\n      this.off(this.tech_, \"touchend\", this.boundHandleTechTouchEnd_);\n      this.off(this.tech_, \"click\", this.boundHandleTechClick_);\n      this.off(this.tech_, \"dblclick\", this.boundHandleTechDoubleClick_);\n    };\n    _proto.handleTechReady_ = function handleTechReady_() {\n      this.triggerReady();\n      if (this.cache_.volume) {\n        this.techCall_(\"setVolume\", this.cache_.volume);\n      }\n      this.handleTechPosterChange_();\n      this.handleTechDurationChange_();\n    };\n    _proto.handleTechLoadStart_ = function handleTechLoadStart_() {\n      this.removeClass(\"vjs-ended\");\n      this.removeClass(\"vjs-seeking\");\n      this.error(null);\n      this.handleTechDurationChange_();\n      if (!this.paused()) {\n        this.trigger(\"loadstart\");\n        this.trigger(\"firstplay\");\n      } else {\n        this.hasStarted(false);\n        this.trigger(\"loadstart\");\n      }\n      this.manualAutoplay_(this.autoplay() === true && this.options_.normalizeAutoplay ? \"play\" : this.autoplay());\n    };\n    _proto.manualAutoplay_ = function manualAutoplay_(type) {\n      var _this6 = this;\n      if (!this.tech_ || typeof type !== \"string\") {\n        return;\n      }\n      var resolveMuted = function resolveMuted2() {\n        var previouslyMuted = _this6.muted();\n        _this6.muted(true);\n        var restoreMuted = function restoreMuted2() {\n          _this6.muted(previouslyMuted);\n        };\n        _this6.playTerminatedQueue_.push(restoreMuted);\n        var mutedPromise = _this6.play();\n        if (!isPromise2(mutedPromise)) {\n          return;\n        }\n        return mutedPromise[\"catch\"](function(err) {\n          restoreMuted();\n          throw new Error(\"Rejection at manualAutoplay. Restoring muted value. \" + (err ? err : \"\"));\n        });\n      };\n      var promise;\n      if (type === \"any\" && !this.muted()) {\n        promise = this.play();\n        if (isPromise2(promise)) {\n          promise = promise[\"catch\"](resolveMuted);\n        }\n      } else if (type === \"muted\" && !this.muted()) {\n        promise = resolveMuted();\n      } else {\n        promise = this.play();\n      }\n      if (!isPromise2(promise)) {\n        return;\n      }\n      return promise.then(function() {\n        _this6.trigger({\n          type: \"autoplay-success\",\n          autoplay: type\n        });\n      })[\"catch\"](function() {\n        _this6.trigger({\n          type: \"autoplay-failure\",\n          autoplay: type\n        });\n      });\n    };\n    _proto.updateSourceCaches_ = function updateSourceCaches_(srcObj) {\n      if (srcObj === void 0) {\n        srcObj = \"\";\n      }\n      var src = srcObj;\n      var type = \"\";\n      if (typeof src !== \"string\") {\n        src = srcObj.src;\n        type = srcObj.type;\n      }\n      this.cache_.source = this.cache_.source || {};\n      this.cache_.sources = this.cache_.sources || [];\n      if (src && !type) {\n        type = findMimetype(this, src);\n      }\n      this.cache_.source = mergeOptions({}, srcObj, {\n        src,\n        type\n      });\n      var matchingSources = this.cache_.sources.filter(function(s) {\n        return s.src && s.src === src;\n      });\n      var sourceElSources = [];\n      var sourceEls = this.$$(\"source\");\n      var matchingSourceEls = [];\n      for (var i2 = 0; i2 < sourceEls.length; i2++) {\n        var sourceObj = getAttributes(sourceEls[i2]);\n        sourceElSources.push(sourceObj);\n        if (sourceObj.src && sourceObj.src === src) {\n          matchingSourceEls.push(sourceObj.src);\n        }\n      }\n      if (matchingSourceEls.length && !matchingSources.length) {\n        this.cache_.sources = sourceElSources;\n      } else if (!matchingSources.length) {\n        this.cache_.sources = [this.cache_.source];\n      }\n      this.cache_.src = src;\n    };\n    _proto.handleTechSourceset_ = function handleTechSourceset_(event2) {\n      var _this7 = this;\n      if (!this.changingSrc_) {\n        var updateSourceCaches = function updateSourceCaches2(src) {\n          return _this7.updateSourceCaches_(src);\n        };\n        var playerSrc = this.currentSource().src;\n        var eventSrc = event2.src;\n        if (playerSrc && !/^blob:/.test(playerSrc) && /^blob:/.test(eventSrc)) {\n          if (!this.lastSource_ || this.lastSource_.tech !== eventSrc && this.lastSource_.player !== playerSrc) {\n            updateSourceCaches = function updateSourceCaches2() {\n            };\n          }\n        }\n        updateSourceCaches(eventSrc);\n        if (!event2.src) {\n          this.tech_.any([\"sourceset\", \"loadstart\"], function(e) {\n            if (e.type === \"sourceset\") {\n              return;\n            }\n            var techSrc = _this7.techGet(\"currentSrc\");\n            _this7.lastSource_.tech = techSrc;\n            _this7.updateSourceCaches_(techSrc);\n          });\n        }\n      }\n      this.lastSource_ = {\n        player: this.currentSource().src,\n        tech: event2.src\n      };\n      this.trigger({\n        src: event2.src,\n        type: \"sourceset\"\n      });\n    };\n    _proto.hasStarted = function hasStarted(request) {\n      if (request === void 0) {\n        return this.hasStarted_;\n      }\n      if (request === this.hasStarted_) {\n        return;\n      }\n      this.hasStarted_ = request;\n      if (this.hasStarted_) {\n        this.addClass(\"vjs-has-started\");\n        this.trigger(\"firstplay\");\n      } else {\n        this.removeClass(\"vjs-has-started\");\n      }\n    };\n    _proto.handleTechPlay_ = function handleTechPlay_() {\n      this.removeClass(\"vjs-ended\");\n      this.removeClass(\"vjs-paused\");\n      this.addClass(\"vjs-playing\");\n      this.hasStarted(true);\n      this.trigger(\"play\");\n    };\n    _proto.handleTechRateChange_ = function handleTechRateChange_() {\n      if (this.tech_.playbackRate() > 0 && this.cache_.lastPlaybackRate === 0) {\n        this.queuedCallbacks_.forEach(function(queued) {\n          return queued.callback(queued.event);\n        });\n        this.queuedCallbacks_ = [];\n      }\n      this.cache_.lastPlaybackRate = this.tech_.playbackRate();\n      this.trigger(\"ratechange\");\n    };\n    _proto.handleTechWaiting_ = function handleTechWaiting_() {\n      var _this8 = this;\n      this.addClass(\"vjs-waiting\");\n      this.trigger(\"waiting\");\n      var timeWhenWaiting = this.currentTime();\n      var timeUpdateListener = function timeUpdateListener2() {\n        if (timeWhenWaiting !== _this8.currentTime()) {\n          _this8.removeClass(\"vjs-waiting\");\n          _this8.off(\"timeupdate\", timeUpdateListener2);\n        }\n      };\n      this.on(\"timeupdate\", timeUpdateListener);\n    };\n    _proto.handleTechCanPlay_ = function handleTechCanPlay_() {\n      this.removeClass(\"vjs-waiting\");\n      this.trigger(\"canplay\");\n    };\n    _proto.handleTechCanPlayThrough_ = function handleTechCanPlayThrough_() {\n      this.removeClass(\"vjs-waiting\");\n      this.trigger(\"canplaythrough\");\n    };\n    _proto.handleTechPlaying_ = function handleTechPlaying_() {\n      this.removeClass(\"vjs-waiting\");\n      this.trigger(\"playing\");\n    };\n    _proto.handleTechSeeking_ = function handleTechSeeking_() {\n      this.addClass(\"vjs-seeking\");\n      this.trigger(\"seeking\");\n    };\n    _proto.handleTechSeeked_ = function handleTechSeeked_() {\n      this.removeClass(\"vjs-seeking\");\n      this.removeClass(\"vjs-ended\");\n      this.trigger(\"seeked\");\n    };\n    _proto.handleTechFirstPlay_ = function handleTechFirstPlay_() {\n      if (this.options_.starttime) {\n        log.warn(\"Passing the `starttime` option to the player will be deprecated in 6.0\");\n        this.currentTime(this.options_.starttime);\n      }\n      this.addClass(\"vjs-has-started\");\n      this.trigger(\"firstplay\");\n    };\n    _proto.handleTechPause_ = function handleTechPause_() {\n      this.removeClass(\"vjs-playing\");\n      this.addClass(\"vjs-paused\");\n      this.trigger(\"pause\");\n    };\n    _proto.handleTechEnded_ = function handleTechEnded_() {\n      this.addClass(\"vjs-ended\");\n      this.removeClass(\"vjs-waiting\");\n      if (this.options_.loop) {\n        this.currentTime(0);\n        this.play();\n      } else if (!this.paused()) {\n        this.pause();\n      }\n      this.trigger(\"ended\");\n    };\n    _proto.handleTechDurationChange_ = function handleTechDurationChange_() {\n      this.duration(this.techGet_(\"duration\"));\n    };\n    _proto.handleTechClick_ = function handleTechClick_(event2) {\n      if (!this.controls_) {\n        return;\n      }\n      if (this.options_ === void 0 || this.options_.userActions === void 0 || this.options_.userActions.click === void 0 || this.options_.userActions.click !== false) {\n        if (this.options_ !== void 0 && this.options_.userActions !== void 0 && typeof this.options_.userActions.click === \"function\") {\n          this.options_.userActions.click.call(this, event2);\n        } else if (this.paused()) {\n          silencePromise(this.play());\n        } else {\n          this.pause();\n        }\n      }\n    };\n    _proto.handleTechDoubleClick_ = function handleTechDoubleClick_(event2) {\n      if (!this.controls_) {\n        return;\n      }\n      var inAllowedEls = Array.prototype.some.call(this.$$(\".vjs-control-bar, .vjs-modal-dialog\"), function(el) {\n        return el.contains(event2.target);\n      });\n      if (!inAllowedEls) {\n        if (this.options_ === void 0 || this.options_.userActions === void 0 || this.options_.userActions.doubleClick === void 0 || this.options_.userActions.doubleClick !== false) {\n          if (this.options_ !== void 0 && this.options_.userActions !== void 0 && typeof this.options_.userActions.doubleClick === \"function\") {\n            this.options_.userActions.doubleClick.call(this, event2);\n          } else if (this.isFullscreen()) {\n            this.exitFullscreen();\n          } else {\n            this.requestFullscreen();\n          }\n        }\n      }\n    };\n    _proto.handleTechTap_ = function handleTechTap_() {\n      this.userActive(!this.userActive());\n    };\n    _proto.handleTechTouchStart_ = function handleTechTouchStart_() {\n      this.userWasActive = this.userActive();\n    };\n    _proto.handleTechTouchMove_ = function handleTechTouchMove_() {\n      if (this.userWasActive) {\n        this.reportUserActivity();\n      }\n    };\n    _proto.handleTechTouchEnd_ = function handleTechTouchEnd_(event2) {\n      if (event2.cancelable) {\n        event2.preventDefault();\n      }\n    };\n    _proto.handleStageClick_ = function handleStageClick_() {\n      this.reportUserActivity();\n    };\n    _proto.toggleFullscreenClass_ = function toggleFullscreenClass_() {\n      if (this.isFullscreen()) {\n        this.addClass(\"vjs-fullscreen\");\n      } else {\n        this.removeClass(\"vjs-fullscreen\");\n      }\n    };\n    _proto.documentFullscreenChange_ = function documentFullscreenChange_(e) {\n      var targetPlayer = e.target.player;\n      if (targetPlayer && targetPlayer !== this) {\n        return;\n      }\n      var el = this.el();\n      var isFs = document__default[\"default\"][this.fsApi_.fullscreenElement] === el;\n      if (!isFs && el.matches) {\n        isFs = el.matches(\":\" + this.fsApi_.fullscreen);\n      } else if (!isFs && el.msMatchesSelector) {\n        isFs = el.msMatchesSelector(\":\" + this.fsApi_.fullscreen);\n      }\n      this.isFullscreen(isFs);\n    };\n    _proto.handleTechFullscreenChange_ = function handleTechFullscreenChange_(event2, data) {\n      var _this9 = this;\n      if (data) {\n        if (data.nativeIOSFullscreen) {\n          this.addClass(\"vjs-ios-native-fs\");\n          this.tech_.one(\"webkitendfullscreen\", function() {\n            _this9.removeClass(\"vjs-ios-native-fs\");\n          });\n        }\n        this.isFullscreen(data.isFullscreen);\n      }\n    };\n    _proto.handleTechFullscreenError_ = function handleTechFullscreenError_(event2, err) {\n      this.trigger(\"fullscreenerror\", err);\n    };\n    _proto.togglePictureInPictureClass_ = function togglePictureInPictureClass_() {\n      if (this.isInPictureInPicture()) {\n        this.addClass(\"vjs-picture-in-picture\");\n      } else {\n        this.removeClass(\"vjs-picture-in-picture\");\n      }\n    };\n    _proto.handleTechEnterPictureInPicture_ = function handleTechEnterPictureInPicture_(event2) {\n      this.isInPictureInPicture(true);\n    };\n    _proto.handleTechLeavePictureInPicture_ = function handleTechLeavePictureInPicture_(event2) {\n      this.isInPictureInPicture(false);\n    };\n    _proto.handleTechError_ = function handleTechError_() {\n      var error = this.tech_.error();\n      this.error(error);\n    };\n    _proto.handleTechTextData_ = function handleTechTextData_() {\n      var data = null;\n      if (arguments.length > 1) {\n        data = arguments[1];\n      }\n      this.trigger(\"textdata\", data);\n    };\n    _proto.getCache = function getCache() {\n      return this.cache_;\n    };\n    _proto.resetCache_ = function resetCache_() {\n      this.cache_ = {\n        // Right now, the currentTime is not _really_ cached because it is always\n        // retrieved from the tech (see: currentTime). However, for completeness,\n        // we set it to zero here to ensure that if we do start actually caching\n        // it, we reset it along with everything else.\n        currentTime: 0,\n        initTime: 0,\n        inactivityTimeout: this.options_.inactivityTimeout,\n        duration: NaN,\n        lastVolume: 1,\n        lastPlaybackRate: this.defaultPlaybackRate(),\n        media: null,\n        src: \"\",\n        source: {},\n        sources: [],\n        playbackRates: [],\n        volume: 1\n      };\n    };\n    _proto.techCall_ = function techCall_(method, arg) {\n      this.ready(function() {\n        if (method in allowedSetters) {\n          return set(this.middleware_, this.tech_, method, arg);\n        } else if (method in allowedMediators) {\n          return mediate(this.middleware_, this.tech_, method, arg);\n        }\n        try {\n          if (this.tech_) {\n            this.tech_[method](arg);\n          }\n        } catch (e) {\n          log(e);\n          throw e;\n        }\n      }, true);\n    };\n    _proto.techGet_ = function techGet_(method) {\n      if (!this.tech_ || !this.tech_.isReady_) {\n        return;\n      }\n      if (method in allowedGetters) {\n        return get(this.middleware_, this.tech_, method);\n      } else if (method in allowedMediators) {\n        return mediate(this.middleware_, this.tech_, method);\n      }\n      try {\n        return this.tech_[method]();\n      } catch (e) {\n        if (this.tech_[method] === void 0) {\n          log(\"Video.js: \" + method + \" method not defined for \" + this.techName_ + \" playback technology.\", e);\n          throw e;\n        }\n        if (e.name === \"TypeError\") {\n          log(\"Video.js: \" + method + \" unavailable on \" + this.techName_ + \" playback technology element.\", e);\n          this.tech_.isReady_ = false;\n          throw e;\n        }\n        log(e);\n        throw e;\n      }\n    };\n    _proto.play = function play() {\n      var _this10 = this;\n      var PromiseClass = this.options_.Promise || window__default[\"default\"].Promise;\n      if (PromiseClass) {\n        return new PromiseClass(function(resolve) {\n          _this10.play_(resolve);\n        });\n      }\n      return this.play_();\n    };\n    _proto.play_ = function play_(callback) {\n      var _this11 = this;\n      if (callback === void 0) {\n        callback = silencePromise;\n      }\n      this.playCallbacks_.push(callback);\n      var isSrcReady = Boolean(!this.changingSrc_ && (this.src() || this.currentSrc()));\n      var isSafariOrIOS = Boolean(IS_ANY_SAFARI || IS_IOS);\n      if (this.waitToPlay_) {\n        this.off([\"ready\", \"loadstart\"], this.waitToPlay_);\n        this.waitToPlay_ = null;\n      }\n      if (!this.isReady_ || !isSrcReady) {\n        this.waitToPlay_ = function(e) {\n          _this11.play_();\n        };\n        this.one([\"ready\", \"loadstart\"], this.waitToPlay_);\n        if (!isSrcReady && isSafariOrIOS) {\n          this.load();\n        }\n        return;\n      }\n      var val = this.techGet_(\"play\");\n      var isNativeReplay = isSafariOrIOS && this.hasClass(\"vjs-ended\");\n      if (isNativeReplay) {\n        this.resetProgressBar_();\n      }\n      if (val === null) {\n        this.runPlayTerminatedQueue_();\n      } else {\n        this.runPlayCallbacks_(val);\n      }\n    };\n    _proto.runPlayTerminatedQueue_ = function runPlayTerminatedQueue_() {\n      var queue2 = this.playTerminatedQueue_.slice(0);\n      this.playTerminatedQueue_ = [];\n      queue2.forEach(function(q) {\n        q();\n      });\n    };\n    _proto.runPlayCallbacks_ = function runPlayCallbacks_(val) {\n      var callbacks = this.playCallbacks_.slice(0);\n      this.playCallbacks_ = [];\n      this.playTerminatedQueue_ = [];\n      callbacks.forEach(function(cb) {\n        cb(val);\n      });\n    };\n    _proto.pause = function pause() {\n      this.techCall_(\"pause\");\n    };\n    _proto.paused = function paused() {\n      return this.techGet_(\"paused\") === false ? false : true;\n    };\n    _proto.played = function played() {\n      return this.techGet_(\"played\") || createTimeRanges(0, 0);\n    };\n    _proto.scrubbing = function scrubbing(isScrubbing) {\n      if (typeof isScrubbing === \"undefined\") {\n        return this.scrubbing_;\n      }\n      this.scrubbing_ = !!isScrubbing;\n      this.techCall_(\"setScrubbing\", this.scrubbing_);\n      if (isScrubbing) {\n        this.addClass(\"vjs-scrubbing\");\n      } else {\n        this.removeClass(\"vjs-scrubbing\");\n      }\n    };\n    _proto.currentTime = function currentTime(seconds) {\n      if (typeof seconds !== \"undefined\") {\n        if (seconds < 0) {\n          seconds = 0;\n        }\n        if (!this.isReady_ || this.changingSrc_ || !this.tech_ || !this.tech_.isReady_) {\n          this.cache_.initTime = seconds;\n          this.off(\"canplay\", this.boundApplyInitTime_);\n          this.one(\"canplay\", this.boundApplyInitTime_);\n          return;\n        }\n        this.techCall_(\"setCurrentTime\", seconds);\n        this.cache_.initTime = 0;\n        return;\n      }\n      this.cache_.currentTime = this.techGet_(\"currentTime\") || 0;\n      return this.cache_.currentTime;\n    };\n    _proto.applyInitTime_ = function applyInitTime_() {\n      this.currentTime(this.cache_.initTime);\n    };\n    _proto.duration = function duration(seconds) {\n      if (seconds === void 0) {\n        return this.cache_.duration !== void 0 ? this.cache_.duration : NaN;\n      }\n      seconds = parseFloat(seconds);\n      if (seconds < 0) {\n        seconds = Infinity;\n      }\n      if (seconds !== this.cache_.duration) {\n        this.cache_.duration = seconds;\n        if (seconds === Infinity) {\n          this.addClass(\"vjs-live\");\n        } else {\n          this.removeClass(\"vjs-live\");\n        }\n        if (!isNaN(seconds)) {\n          this.trigger(\"durationchange\");\n        }\n      }\n    };\n    _proto.remainingTime = function remainingTime() {\n      return this.duration() - this.currentTime();\n    };\n    _proto.remainingTimeDisplay = function remainingTimeDisplay() {\n      return Math.floor(this.duration()) - Math.floor(this.currentTime());\n    };\n    _proto.buffered = function buffered() {\n      var buffered2 = this.techGet_(\"buffered\");\n      if (!buffered2 || !buffered2.length) {\n        buffered2 = createTimeRanges(0, 0);\n      }\n      return buffered2;\n    };\n    _proto.bufferedPercent = function bufferedPercent$1() {\n      return bufferedPercent(this.buffered(), this.duration());\n    };\n    _proto.bufferedEnd = function bufferedEnd() {\n      var buffered = this.buffered();\n      var duration = this.duration();\n      var end = buffered.end(buffered.length - 1);\n      if (end > duration) {\n        end = duration;\n      }\n      return end;\n    };\n    _proto.volume = function volume(percentAsDecimal) {\n      var vol;\n      if (percentAsDecimal !== void 0) {\n        vol = Math.max(0, Math.min(1, parseFloat(percentAsDecimal)));\n        this.cache_.volume = vol;\n        this.techCall_(\"setVolume\", vol);\n        if (vol > 0) {\n          this.lastVolume_(vol);\n        }\n        return;\n      }\n      vol = parseFloat(this.techGet_(\"volume\"));\n      return isNaN(vol) ? 1 : vol;\n    };\n    _proto.muted = function muted(_muted) {\n      if (_muted !== void 0) {\n        this.techCall_(\"setMuted\", _muted);\n        return;\n      }\n      return this.techGet_(\"muted\") || false;\n    };\n    _proto.defaultMuted = function defaultMuted(_defaultMuted) {\n      if (_defaultMuted !== void 0) {\n        return this.techCall_(\"setDefaultMuted\", _defaultMuted);\n      }\n      return this.techGet_(\"defaultMuted\") || false;\n    };\n    _proto.lastVolume_ = function lastVolume_(percentAsDecimal) {\n      if (percentAsDecimal !== void 0 && percentAsDecimal !== 0) {\n        this.cache_.lastVolume = percentAsDecimal;\n        return;\n      }\n      return this.cache_.lastVolume;\n    };\n    _proto.supportsFullScreen = function supportsFullScreen() {\n      return this.techGet_(\"supportsFullScreen\") || false;\n    };\n    _proto.isFullscreen = function isFullscreen(isFS) {\n      if (isFS !== void 0) {\n        var oldValue = this.isFullscreen_;\n        this.isFullscreen_ = Boolean(isFS);\n        if (this.isFullscreen_ !== oldValue && this.fsApi_.prefixed) {\n          this.trigger(\"fullscreenchange\");\n        }\n        this.toggleFullscreenClass_();\n        return;\n      }\n      return this.isFullscreen_;\n    };\n    _proto.requestFullscreen = function requestFullscreen(fullscreenOptions) {\n      var PromiseClass = this.options_.Promise || window__default[\"default\"].Promise;\n      if (PromiseClass) {\n        var self2 = this;\n        return new PromiseClass(function(resolve, reject) {\n          function offHandler() {\n            self2.off(\"fullscreenerror\", errorHandler);\n            self2.off(\"fullscreenchange\", changeHandler);\n          }\n          function changeHandler() {\n            offHandler();\n            resolve();\n          }\n          function errorHandler(e, err) {\n            offHandler();\n            reject(err);\n          }\n          self2.one(\"fullscreenchange\", changeHandler);\n          self2.one(\"fullscreenerror\", errorHandler);\n          var promise = self2.requestFullscreenHelper_(fullscreenOptions);\n          if (promise) {\n            promise.then(offHandler, offHandler);\n            promise.then(resolve, reject);\n          }\n        });\n      }\n      return this.requestFullscreenHelper_();\n    };\n    _proto.requestFullscreenHelper_ = function requestFullscreenHelper_(fullscreenOptions) {\n      var _this12 = this;\n      var fsOptions;\n      if (!this.fsApi_.prefixed) {\n        fsOptions = this.options_.fullscreen && this.options_.fullscreen.options || {};\n        if (fullscreenOptions !== void 0) {\n          fsOptions = fullscreenOptions;\n        }\n      }\n      if (this.fsApi_.requestFullscreen) {\n        var promise = this.el_[this.fsApi_.requestFullscreen](fsOptions);\n        if (promise) {\n          promise.then(function() {\n            return _this12.isFullscreen(true);\n          }, function() {\n            return _this12.isFullscreen(false);\n          });\n        }\n        return promise;\n      } else if (this.tech_.supportsFullScreen() && !this.options_.preferFullWindow === true) {\n        this.techCall_(\"enterFullScreen\");\n      } else {\n        this.enterFullWindow();\n      }\n    };\n    _proto.exitFullscreen = function exitFullscreen() {\n      var PromiseClass = this.options_.Promise || window__default[\"default\"].Promise;\n      if (PromiseClass) {\n        var self2 = this;\n        return new PromiseClass(function(resolve, reject) {\n          function offHandler() {\n            self2.off(\"fullscreenerror\", errorHandler);\n            self2.off(\"fullscreenchange\", changeHandler);\n          }\n          function changeHandler() {\n            offHandler();\n            resolve();\n          }\n          function errorHandler(e, err) {\n            offHandler();\n            reject(err);\n          }\n          self2.one(\"fullscreenchange\", changeHandler);\n          self2.one(\"fullscreenerror\", errorHandler);\n          var promise = self2.exitFullscreenHelper_();\n          if (promise) {\n            promise.then(offHandler, offHandler);\n            promise.then(resolve, reject);\n          }\n        });\n      }\n      return this.exitFullscreenHelper_();\n    };\n    _proto.exitFullscreenHelper_ = function exitFullscreenHelper_() {\n      var _this13 = this;\n      if (this.fsApi_.requestFullscreen) {\n        var promise = document__default[\"default\"][this.fsApi_.exitFullscreen]();\n        if (promise) {\n          silencePromise(promise.then(function() {\n            return _this13.isFullscreen(false);\n          }));\n        }\n        return promise;\n      } else if (this.tech_.supportsFullScreen() && !this.options_.preferFullWindow === true) {\n        this.techCall_(\"exitFullScreen\");\n      } else {\n        this.exitFullWindow();\n      }\n    };\n    _proto.enterFullWindow = function enterFullWindow() {\n      this.isFullscreen(true);\n      this.isFullWindow = true;\n      this.docOrigOverflow = document__default[\"default\"].documentElement.style.overflow;\n      on(document__default[\"default\"], \"keydown\", this.boundFullWindowOnEscKey_);\n      document__default[\"default\"].documentElement.style.overflow = \"hidden\";\n      addClass(document__default[\"default\"].body, \"vjs-full-window\");\n      this.trigger(\"enterFullWindow\");\n    };\n    _proto.fullWindowOnEscKey = function fullWindowOnEscKey(event2) {\n      if (keycode__default[\"default\"].isEventKey(event2, \"Esc\")) {\n        if (this.isFullscreen() === true) {\n          if (!this.isFullWindow) {\n            this.exitFullscreen();\n          } else {\n            this.exitFullWindow();\n          }\n        }\n      }\n    };\n    _proto.exitFullWindow = function exitFullWindow() {\n      this.isFullscreen(false);\n      this.isFullWindow = false;\n      off(document__default[\"default\"], \"keydown\", this.boundFullWindowOnEscKey_);\n      document__default[\"default\"].documentElement.style.overflow = this.docOrigOverflow;\n      removeClass(document__default[\"default\"].body, \"vjs-full-window\");\n      this.trigger(\"exitFullWindow\");\n    };\n    _proto.disablePictureInPicture = function disablePictureInPicture(value) {\n      if (value === void 0) {\n        return this.techGet_(\"disablePictureInPicture\");\n      }\n      this.techCall_(\"setDisablePictureInPicture\", value);\n      this.options_.disablePictureInPicture = value;\n      this.trigger(\"disablepictureinpicturechanged\");\n    };\n    _proto.isInPictureInPicture = function isInPictureInPicture(isPiP) {\n      if (isPiP !== void 0) {\n        this.isInPictureInPicture_ = !!isPiP;\n        this.togglePictureInPictureClass_();\n        return;\n      }\n      return !!this.isInPictureInPicture_;\n    };\n    _proto.requestPictureInPicture = function requestPictureInPicture() {\n      if (\"pictureInPictureEnabled\" in document__default[\"default\"] && this.disablePictureInPicture() === false) {\n        return this.techGet_(\"requestPictureInPicture\");\n      }\n    };\n    _proto.exitPictureInPicture = function exitPictureInPicture() {\n      if (\"pictureInPictureEnabled\" in document__default[\"default\"]) {\n        return document__default[\"default\"].exitPictureInPicture();\n      }\n    };\n    _proto.handleKeyDown = function handleKeyDown(event2) {\n      var userActions = this.options_.userActions;\n      if (!userActions || !userActions.hotkeys) {\n        return;\n      }\n      var excludeElement = function excludeElement2(el) {\n        var tagName = el.tagName.toLowerCase();\n        if (el.isContentEditable) {\n          return true;\n        }\n        var allowedInputTypes = [\"button\", \"checkbox\", \"hidden\", \"radio\", \"reset\", \"submit\"];\n        if (tagName === \"input\") {\n          return allowedInputTypes.indexOf(el.type) === -1;\n        }\n        var excludedTags = [\"textarea\"];\n        return excludedTags.indexOf(tagName) !== -1;\n      };\n      if (excludeElement(this.el_.ownerDocument.activeElement)) {\n        return;\n      }\n      if (typeof userActions.hotkeys === \"function\") {\n        userActions.hotkeys.call(this, event2);\n      } else {\n        this.handleHotkeys(event2);\n      }\n    };\n    _proto.handleHotkeys = function handleHotkeys(event2) {\n      var hotkeys = this.options_.userActions ? this.options_.userActions.hotkeys : {};\n      var _hotkeys$fullscreenKe = hotkeys.fullscreenKey, fullscreenKey = _hotkeys$fullscreenKe === void 0 ? function(keydownEvent) {\n        return keycode__default[\"default\"].isEventKey(keydownEvent, \"f\");\n      } : _hotkeys$fullscreenKe, _hotkeys$muteKey = hotkeys.muteKey, muteKey = _hotkeys$muteKey === void 0 ? function(keydownEvent) {\n        return keycode__default[\"default\"].isEventKey(keydownEvent, \"m\");\n      } : _hotkeys$muteKey, _hotkeys$playPauseKey = hotkeys.playPauseKey, playPauseKey = _hotkeys$playPauseKey === void 0 ? function(keydownEvent) {\n        return keycode__default[\"default\"].isEventKey(keydownEvent, \"k\") || keycode__default[\"default\"].isEventKey(keydownEvent, \"Space\");\n      } : _hotkeys$playPauseKey;\n      if (fullscreenKey.call(this, event2)) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        var FSToggle = Component2.getComponent(\"FullscreenToggle\");\n        if (document__default[\"default\"][this.fsApi_.fullscreenEnabled] !== false) {\n          FSToggle.prototype.handleClick.call(this, event2);\n        }\n      } else if (muteKey.call(this, event2)) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        var MuteToggle2 = Component2.getComponent(\"MuteToggle\");\n        MuteToggle2.prototype.handleClick.call(this, event2);\n      } else if (playPauseKey.call(this, event2)) {\n        event2.preventDefault();\n        event2.stopPropagation();\n        var PlayToggle2 = Component2.getComponent(\"PlayToggle\");\n        PlayToggle2.prototype.handleClick.call(this, event2);\n      }\n    };\n    _proto.canPlayType = function canPlayType2(type) {\n      var can;\n      for (var i2 = 0, j = this.options_.techOrder; i2 < j.length; i2++) {\n        var techName = j[i2];\n        var tech = Tech.getTech(techName);\n        if (!tech) {\n          tech = Component2.getComponent(techName);\n        }\n        if (!tech) {\n          log.error('The \"' + techName + '\" tech is undefined. Skipped browser support check for that tech.');\n          continue;\n        }\n        if (tech.isSupported()) {\n          can = tech.canPlayType(type);\n          if (can) {\n            return can;\n          }\n        }\n      }\n      return \"\";\n    };\n    _proto.selectSource = function selectSource(sources) {\n      var _this14 = this;\n      var techs = this.options_.techOrder.map(function(techName) {\n        return [techName, Tech.getTech(techName)];\n      }).filter(function(_ref) {\n        var techName = _ref[0], tech = _ref[1];\n        if (tech) {\n          return tech.isSupported();\n        }\n        log.error('The \"' + techName + '\" tech is undefined. Skipped browser support check for that tech.');\n        return false;\n      });\n      var findFirstPassingTechSourcePair = function findFirstPassingTechSourcePair2(outerArray, innerArray, tester) {\n        var found;\n        outerArray.some(function(outerChoice) {\n          return innerArray.some(function(innerChoice) {\n            found = tester(outerChoice, innerChoice);\n            if (found) {\n              return true;\n            }\n          });\n        });\n        return found;\n      };\n      var foundSourceAndTech;\n      var flip = function flip2(fn) {\n        return function(a, b) {\n          return fn(b, a);\n        };\n      };\n      var finder = function finder2(_ref2, source) {\n        var techName = _ref2[0], tech = _ref2[1];\n        if (tech.canPlaySource(source, _this14.options_[techName.toLowerCase()])) {\n          return {\n            source,\n            tech: techName\n          };\n        }\n      };\n      if (this.options_.sourceOrder) {\n        foundSourceAndTech = findFirstPassingTechSourcePair(sources, techs, flip(finder));\n      } else {\n        foundSourceAndTech = findFirstPassingTechSourcePair(techs, sources, finder);\n      }\n      return foundSourceAndTech || false;\n    };\n    _proto.handleSrc_ = function handleSrc_(source, isRetry) {\n      var _this15 = this;\n      if (typeof source === \"undefined\") {\n        return this.cache_.src || \"\";\n      }\n      if (this.resetRetryOnError_) {\n        this.resetRetryOnError_();\n      }\n      var sources = filterSource(source);\n      if (!sources.length) {\n        this.setTimeout(function() {\n          this.error({\n            code: 4,\n            message: this.options_.notSupportedMessage\n          });\n        }, 0);\n        return;\n      }\n      this.changingSrc_ = true;\n      if (!isRetry) {\n        this.cache_.sources = sources;\n      }\n      this.updateSourceCaches_(sources[0]);\n      setSource(this, sources[0], function(middlewareSource, mws) {\n        _this15.middleware_ = mws;\n        if (!isRetry) {\n          _this15.cache_.sources = sources;\n        }\n        _this15.updateSourceCaches_(middlewareSource);\n        var err = _this15.src_(middlewareSource);\n        if (err) {\n          if (sources.length > 1) {\n            return _this15.handleSrc_(sources.slice(1));\n          }\n          _this15.changingSrc_ = false;\n          _this15.setTimeout(function() {\n            this.error({\n              code: 4,\n              message: this.options_.notSupportedMessage\n            });\n          }, 0);\n          _this15.triggerReady();\n          return;\n        }\n        setTech(mws, _this15.tech_);\n      });\n      if (this.options_.retryOnError && sources.length > 1) {\n        var retry = function retry2() {\n          _this15.error(null);\n          _this15.handleSrc_(sources.slice(1), true);\n        };\n        var stopListeningForErrors = function stopListeningForErrors2() {\n          _this15.off(\"error\", retry);\n        };\n        this.one(\"error\", retry);\n        this.one(\"playing\", stopListeningForErrors);\n        this.resetRetryOnError_ = function() {\n          _this15.off(\"error\", retry);\n          _this15.off(\"playing\", stopListeningForErrors);\n        };\n      }\n    };\n    _proto.src = function src(source) {\n      return this.handleSrc_(source, false);\n    };\n    _proto.src_ = function src_(source) {\n      var _this16 = this;\n      var sourceTech = this.selectSource([source]);\n      if (!sourceTech) {\n        return true;\n      }\n      if (!titleCaseEquals(sourceTech.tech, this.techName_)) {\n        this.changingSrc_ = true;\n        this.loadTech_(sourceTech.tech, sourceTech.source);\n        this.tech_.ready(function() {\n          _this16.changingSrc_ = false;\n        });\n        return false;\n      }\n      this.ready(function() {\n        if (this.tech_.constructor.prototype.hasOwnProperty(\"setSource\")) {\n          this.techCall_(\"setSource\", source);\n        } else {\n          this.techCall_(\"src\", source.src);\n        }\n        this.changingSrc_ = false;\n      }, true);\n      return false;\n    };\n    _proto.load = function load() {\n      this.techCall_(\"load\");\n    };\n    _proto.reset = function reset() {\n      var _this17 = this;\n      var PromiseClass = this.options_.Promise || window__default[\"default\"].Promise;\n      if (this.paused() || !PromiseClass) {\n        this.doReset_();\n      } else {\n        var playPromise = this.play();\n        silencePromise(playPromise.then(function() {\n          return _this17.doReset_();\n        }));\n      }\n    };\n    _proto.doReset_ = function doReset_() {\n      if (this.tech_) {\n        this.tech_.clearTracks(\"text\");\n      }\n      this.resetCache_();\n      this.poster(\"\");\n      this.loadTech_(this.options_.techOrder[0], null);\n      this.techCall_(\"reset\");\n      this.resetControlBarUI_();\n      if (isEvented(this)) {\n        this.trigger(\"playerreset\");\n      }\n    };\n    _proto.resetControlBarUI_ = function resetControlBarUI_() {\n      this.resetProgressBar_();\n      this.resetPlaybackRate_();\n      this.resetVolumeBar_();\n    };\n    _proto.resetProgressBar_ = function resetProgressBar_() {\n      this.currentTime(0);\n      var _ref3 = this.controlBar || {}, durationDisplay = _ref3.durationDisplay, remainingTimeDisplay = _ref3.remainingTimeDisplay;\n      if (durationDisplay) {\n        durationDisplay.updateContent();\n      }\n      if (remainingTimeDisplay) {\n        remainingTimeDisplay.updateContent();\n      }\n    };\n    _proto.resetPlaybackRate_ = function resetPlaybackRate_() {\n      this.playbackRate(this.defaultPlaybackRate());\n      this.handleTechRateChange_();\n    };\n    _proto.resetVolumeBar_ = function resetVolumeBar_() {\n      this.volume(1);\n      this.trigger(\"volumechange\");\n    };\n    _proto.currentSources = function currentSources() {\n      var source = this.currentSource();\n      var sources = [];\n      if (Object.keys(source).length !== 0) {\n        sources.push(source);\n      }\n      return this.cache_.sources || sources;\n    };\n    _proto.currentSource = function currentSource() {\n      return this.cache_.source || {};\n    };\n    _proto.currentSrc = function currentSrc() {\n      return this.currentSource() && this.currentSource().src || \"\";\n    };\n    _proto.currentType = function currentType() {\n      return this.currentSource() && this.currentSource().type || \"\";\n    };\n    _proto.preload = function preload(value) {\n      if (value !== void 0) {\n        this.techCall_(\"setPreload\", value);\n        this.options_.preload = value;\n        return;\n      }\n      return this.techGet_(\"preload\");\n    };\n    _proto.autoplay = function autoplay(value) {\n      if (value === void 0) {\n        return this.options_.autoplay || false;\n      }\n      var techAutoplay;\n      if (typeof value === \"string\" && /(any|play|muted)/.test(value) || value === true && this.options_.normalizeAutoplay) {\n        this.options_.autoplay = value;\n        this.manualAutoplay_(typeof value === \"string\" ? value : \"play\");\n        techAutoplay = false;\n      } else if (!value) {\n        this.options_.autoplay = false;\n      } else {\n        this.options_.autoplay = true;\n      }\n      techAutoplay = typeof techAutoplay === \"undefined\" ? this.options_.autoplay : techAutoplay;\n      if (this.tech_) {\n        this.techCall_(\"setAutoplay\", techAutoplay);\n      }\n    };\n    _proto.playsinline = function playsinline(value) {\n      if (value !== void 0) {\n        this.techCall_(\"setPlaysinline\", value);\n        this.options_.playsinline = value;\n        return this;\n      }\n      return this.techGet_(\"playsinline\");\n    };\n    _proto.loop = function loop(value) {\n      if (value !== void 0) {\n        this.techCall_(\"setLoop\", value);\n        this.options_.loop = value;\n        return;\n      }\n      return this.techGet_(\"loop\");\n    };\n    _proto.poster = function poster(src) {\n      if (src === void 0) {\n        return this.poster_;\n      }\n      if (!src) {\n        src = \"\";\n      }\n      if (src === this.poster_) {\n        return;\n      }\n      this.poster_ = src;\n      this.techCall_(\"setPoster\", src);\n      this.isPosterFromTech_ = false;\n      this.trigger(\"posterchange\");\n    };\n    _proto.handleTechPosterChange_ = function handleTechPosterChange_() {\n      if ((!this.poster_ || this.options_.techCanOverridePoster) && this.tech_ && this.tech_.poster) {\n        var newPoster = this.tech_.poster() || \"\";\n        if (newPoster !== this.poster_) {\n          this.poster_ = newPoster;\n          this.isPosterFromTech_ = true;\n          this.trigger(\"posterchange\");\n        }\n      }\n    };\n    _proto.controls = function controls(bool) {\n      if (bool === void 0) {\n        return !!this.controls_;\n      }\n      bool = !!bool;\n      if (this.controls_ === bool) {\n        return;\n      }\n      this.controls_ = bool;\n      if (this.usingNativeControls()) {\n        this.techCall_(\"setControls\", bool);\n      }\n      if (this.controls_) {\n        this.removeClass(\"vjs-controls-disabled\");\n        this.addClass(\"vjs-controls-enabled\");\n        this.trigger(\"controlsenabled\");\n        if (!this.usingNativeControls()) {\n          this.addTechControlsListeners_();\n        }\n      } else {\n        this.removeClass(\"vjs-controls-enabled\");\n        this.addClass(\"vjs-controls-disabled\");\n        this.trigger(\"controlsdisabled\");\n        if (!this.usingNativeControls()) {\n          this.removeTechControlsListeners_();\n        }\n      }\n    };\n    _proto.usingNativeControls = function usingNativeControls(bool) {\n      if (bool === void 0) {\n        return !!this.usingNativeControls_;\n      }\n      bool = !!bool;\n      if (this.usingNativeControls_ === bool) {\n        return;\n      }\n      this.usingNativeControls_ = bool;\n      if (this.usingNativeControls_) {\n        this.addClass(\"vjs-using-native-controls\");\n        this.trigger(\"usingnativecontrols\");\n      } else {\n        this.removeClass(\"vjs-using-native-controls\");\n        this.trigger(\"usingcustomcontrols\");\n      }\n    };\n    _proto.error = function error(err) {\n      var _this18 = this;\n      if (err === void 0) {\n        return this.error_ || null;\n      }\n      hooks(\"beforeerror\").forEach(function(hookFunction) {\n        var newErr = hookFunction(_this18, err);\n        if (!(isObject2(newErr) && !Array.isArray(newErr) || typeof newErr === \"string\" || typeof newErr === \"number\" || newErr === null)) {\n          _this18.log.error(\"please return a value that MediaError expects in beforeerror hooks\");\n          return;\n        }\n        err = newErr;\n      });\n      if (this.options_.suppressNotSupportedError && err && err.code === 4) {\n        var triggerSuppressedError = function triggerSuppressedError2() {\n          this.error(err);\n        };\n        this.options_.suppressNotSupportedError = false;\n        this.any([\"click\", \"touchstart\"], triggerSuppressedError);\n        this.one(\"loadstart\", function() {\n          this.off([\"click\", \"touchstart\"], triggerSuppressedError);\n        });\n        return;\n      }\n      if (err === null) {\n        this.error_ = err;\n        this.removeClass(\"vjs-error\");\n        if (this.errorDisplay) {\n          this.errorDisplay.close();\n        }\n        return;\n      }\n      this.error_ = new MediaError2(err);\n      this.addClass(\"vjs-error\");\n      log.error(\"(CODE:\" + this.error_.code + \" \" + MediaError2.errorTypes[this.error_.code] + \")\", this.error_.message, this.error_);\n      this.trigger(\"error\");\n      hooks(\"error\").forEach(function(hookFunction) {\n        return hookFunction(_this18, _this18.error_);\n      });\n      return;\n    };\n    _proto.reportUserActivity = function reportUserActivity(event2) {\n      this.userActivity_ = true;\n    };\n    _proto.userActive = function userActive(bool) {\n      if (bool === void 0) {\n        return this.userActive_;\n      }\n      bool = !!bool;\n      if (bool === this.userActive_) {\n        return;\n      }\n      this.userActive_ = bool;\n      if (this.userActive_) {\n        this.userActivity_ = true;\n        this.removeClass(\"vjs-user-inactive\");\n        this.addClass(\"vjs-user-active\");\n        this.trigger(\"useractive\");\n        return;\n      }\n      if (this.tech_) {\n        this.tech_.one(\"mousemove\", function(e) {\n          e.stopPropagation();\n          e.preventDefault();\n        });\n      }\n      this.userActivity_ = false;\n      this.removeClass(\"vjs-user-active\");\n      this.addClass(\"vjs-user-inactive\");\n      this.trigger(\"userinactive\");\n    };\n    _proto.listenForUserActivity_ = function listenForUserActivity_() {\n      var mouseInProgress;\n      var lastMoveX;\n      var lastMoveY;\n      var handleActivity = bind(this, this.reportUserActivity);\n      var handleMouseMove = function handleMouseMove2(e) {\n        if (e.screenX !== lastMoveX || e.screenY !== lastMoveY) {\n          lastMoveX = e.screenX;\n          lastMoveY = e.screenY;\n          handleActivity();\n        }\n      };\n      var handleMouseDown = function handleMouseDown2() {\n        handleActivity();\n        this.clearInterval(mouseInProgress);\n        mouseInProgress = this.setInterval(handleActivity, 250);\n      };\n      var handleMouseUpAndMouseLeave = function handleMouseUpAndMouseLeave2(event2) {\n        handleActivity();\n        this.clearInterval(mouseInProgress);\n      };\n      this.on(\"mousedown\", handleMouseDown);\n      this.on(\"mousemove\", handleMouseMove);\n      this.on(\"mouseup\", handleMouseUpAndMouseLeave);\n      this.on(\"mouseleave\", handleMouseUpAndMouseLeave);\n      var controlBar = this.getChild(\"controlBar\");\n      if (controlBar && !IS_IOS && !IS_ANDROID) {\n        controlBar.on(\"mouseenter\", function(event2) {\n          if (this.player().options_.inactivityTimeout !== 0) {\n            this.player().cache_.inactivityTimeout = this.player().options_.inactivityTimeout;\n          }\n          this.player().options_.inactivityTimeout = 0;\n        });\n        controlBar.on(\"mouseleave\", function(event2) {\n          this.player().options_.inactivityTimeout = this.player().cache_.inactivityTimeout;\n        });\n      }\n      this.on(\"keydown\", handleActivity);\n      this.on(\"keyup\", handleActivity);\n      var inactivityTimeout;\n      this.setInterval(function() {\n        if (!this.userActivity_) {\n          return;\n        }\n        this.userActivity_ = false;\n        this.userActive(true);\n        this.clearTimeout(inactivityTimeout);\n        var timeout = this.options_.inactivityTimeout;\n        if (timeout <= 0) {\n          return;\n        }\n        inactivityTimeout = this.setTimeout(function() {\n          if (!this.userActivity_) {\n            this.userActive(false);\n          }\n        }, timeout);\n      }, 250);\n    };\n    _proto.playbackRate = function playbackRate(rate) {\n      if (rate !== void 0) {\n        this.techCall_(\"setPlaybackRate\", rate);\n        return;\n      }\n      if (this.tech_ && this.tech_.featuresPlaybackRate) {\n        return this.cache_.lastPlaybackRate || this.techGet_(\"playbackRate\");\n      }\n      return 1;\n    };\n    _proto.defaultPlaybackRate = function defaultPlaybackRate(rate) {\n      if (rate !== void 0) {\n        return this.techCall_(\"setDefaultPlaybackRate\", rate);\n      }\n      if (this.tech_ && this.tech_.featuresPlaybackRate) {\n        return this.techGet_(\"defaultPlaybackRate\");\n      }\n      return 1;\n    };\n    _proto.isAudio = function isAudio(bool) {\n      if (bool !== void 0) {\n        this.isAudio_ = !!bool;\n        return;\n      }\n      return !!this.isAudio_;\n    };\n    _proto.enableAudioOnlyUI_ = function enableAudioOnlyUI_() {\n      var _this19 = this;\n      this.addClass(\"vjs-audio-only-mode\");\n      var playerChildren = this.children();\n      var controlBar = this.getChild(\"ControlBar\");\n      var controlBarHeight = controlBar && controlBar.currentHeight();\n      playerChildren.forEach(function(child) {\n        if (child === controlBar) {\n          return;\n        }\n        if (child.el_ && !child.hasClass(\"vjs-hidden\")) {\n          child.hide();\n          _this19.audioOnlyCache_.hiddenChildren.push(child);\n        }\n      });\n      this.audioOnlyCache_.playerHeight = this.currentHeight();\n      this.height(controlBarHeight);\n      this.trigger(\"audioonlymodechange\");\n    };\n    _proto.disableAudioOnlyUI_ = function disableAudioOnlyUI_() {\n      this.removeClass(\"vjs-audio-only-mode\");\n      this.audioOnlyCache_.hiddenChildren.forEach(function(child) {\n        return child.show();\n      });\n      this.height(this.audioOnlyCache_.playerHeight);\n      this.trigger(\"audioonlymodechange\");\n    };\n    _proto.audioOnlyMode = function audioOnlyMode(value) {\n      var _this20 = this;\n      if (typeof value !== \"boolean\" || value === this.audioOnlyMode_) {\n        return this.audioOnlyMode_;\n      }\n      this.audioOnlyMode_ = value;\n      var PromiseClass = this.options_.Promise || window__default[\"default\"].Promise;\n      if (PromiseClass) {\n        if (value) {\n          var exitPromises = [];\n          if (this.isInPictureInPicture()) {\n            exitPromises.push(this.exitPictureInPicture());\n          }\n          if (this.isFullscreen()) {\n            exitPromises.push(this.exitFullscreen());\n          }\n          if (this.audioPosterMode()) {\n            exitPromises.push(this.audioPosterMode(false));\n          }\n          return PromiseClass.all(exitPromises).then(function() {\n            return _this20.enableAudioOnlyUI_();\n          });\n        }\n        return PromiseClass.resolve().then(function() {\n          return _this20.disableAudioOnlyUI_();\n        });\n      }\n      if (value) {\n        if (this.isInPictureInPicture()) {\n          this.exitPictureInPicture();\n        }\n        if (this.isFullscreen()) {\n          this.exitFullscreen();\n        }\n        this.enableAudioOnlyUI_();\n      } else {\n        this.disableAudioOnlyUI_();\n      }\n    };\n    _proto.enablePosterModeUI_ = function enablePosterModeUI_() {\n      var tech = this.tech_ && this.tech_;\n      tech.hide();\n      this.addClass(\"vjs-audio-poster-mode\");\n      this.trigger(\"audiopostermodechange\");\n    };\n    _proto.disablePosterModeUI_ = function disablePosterModeUI_() {\n      var tech = this.tech_ && this.tech_;\n      tech.show();\n      this.removeClass(\"vjs-audio-poster-mode\");\n      this.trigger(\"audiopostermodechange\");\n    };\n    _proto.audioPosterMode = function audioPosterMode(value) {\n      var _this21 = this;\n      if (typeof value !== \"boolean\" || value === this.audioPosterMode_) {\n        return this.audioPosterMode_;\n      }\n      this.audioPosterMode_ = value;\n      var PromiseClass = this.options_.Promise || window__default[\"default\"].Promise;\n      if (PromiseClass) {\n        if (value) {\n          if (this.audioOnlyMode()) {\n            var audioOnlyModePromise = this.audioOnlyMode(false);\n            return audioOnlyModePromise.then(function() {\n              _this21.enablePosterModeUI_();\n            });\n          }\n          return PromiseClass.resolve().then(function() {\n            _this21.enablePosterModeUI_();\n          });\n        }\n        return PromiseClass.resolve().then(function() {\n          _this21.disablePosterModeUI_();\n        });\n      }\n      if (value) {\n        if (this.audioOnlyMode()) {\n          this.audioOnlyMode(false);\n        }\n        this.enablePosterModeUI_();\n        return;\n      }\n      this.disablePosterModeUI_();\n    };\n    _proto.addTextTrack = function addTextTrack(kind, label, language) {\n      if (this.tech_) {\n        return this.tech_.addTextTrack(kind, label, language);\n      }\n    };\n    _proto.addRemoteTextTrack = function addRemoteTextTrack(options, manualCleanup) {\n      if (this.tech_) {\n        return this.tech_.addRemoteTextTrack(options, manualCleanup);\n      }\n    };\n    _proto.removeRemoteTextTrack = function removeRemoteTextTrack(obj) {\n      if (obj === void 0) {\n        obj = {};\n      }\n      var _obj = obj, track = _obj.track;\n      if (!track) {\n        track = obj;\n      }\n      if (this.tech_) {\n        return this.tech_.removeRemoteTextTrack(track);\n      }\n    };\n    _proto.getVideoPlaybackQuality = function getVideoPlaybackQuality() {\n      return this.techGet_(\"getVideoPlaybackQuality\");\n    };\n    _proto.videoWidth = function videoWidth() {\n      return this.tech_ && this.tech_.videoWidth && this.tech_.videoWidth() || 0;\n    };\n    _proto.videoHeight = function videoHeight() {\n      return this.tech_ && this.tech_.videoHeight && this.tech_.videoHeight() || 0;\n    };\n    _proto.language = function language(code2) {\n      if (code2 === void 0) {\n        return this.language_;\n      }\n      if (this.language_ !== String(code2).toLowerCase()) {\n        this.language_ = String(code2).toLowerCase();\n        if (isEvented(this)) {\n          this.trigger(\"languagechange\");\n        }\n      }\n    };\n    _proto.languages = function languages() {\n      return mergeOptions(Player2.prototype.options_.languages, this.languages_);\n    };\n    _proto.toJSON = function toJSON() {\n      var options = mergeOptions(this.options_);\n      var tracks = options.tracks;\n      options.tracks = [];\n      for (var i2 = 0; i2 < tracks.length; i2++) {\n        var track = tracks[i2];\n        track = mergeOptions(track);\n        track.player = void 0;\n        options.tracks[i2] = track;\n      }\n      return options;\n    };\n    _proto.createModal = function createModal(content, options) {\n      var _this22 = this;\n      options = options || {};\n      options.content = content || \"\";\n      var modal = new ModalDialog(this, options);\n      this.addChild(modal);\n      modal.on(\"dispose\", function() {\n        _this22.removeChild(modal);\n      });\n      modal.open();\n      return modal;\n    };\n    _proto.updateCurrentBreakpoint_ = function updateCurrentBreakpoint_() {\n      if (!this.responsive()) {\n        return;\n      }\n      var currentBreakpoint = this.currentBreakpoint();\n      var currentWidth = this.currentWidth();\n      for (var i2 = 0; i2 < BREAKPOINT_ORDER.length; i2++) {\n        var candidateBreakpoint = BREAKPOINT_ORDER[i2];\n        var maxWidth = this.breakpoints_[candidateBreakpoint];\n        if (currentWidth <= maxWidth) {\n          if (currentBreakpoint === candidateBreakpoint) {\n            return;\n          }\n          if (currentBreakpoint) {\n            this.removeClass(BREAKPOINT_CLASSES[currentBreakpoint]);\n          }\n          this.addClass(BREAKPOINT_CLASSES[candidateBreakpoint]);\n          this.breakpoint_ = candidateBreakpoint;\n          break;\n        }\n      }\n    };\n    _proto.removeCurrentBreakpoint_ = function removeCurrentBreakpoint_() {\n      var className = this.currentBreakpointClass();\n      this.breakpoint_ = \"\";\n      if (className) {\n        this.removeClass(className);\n      }\n    };\n    _proto.breakpoints = function breakpoints(_breakpoints) {\n      if (_breakpoints === void 0) {\n        return assign(this.breakpoints_);\n      }\n      this.breakpoint_ = \"\";\n      this.breakpoints_ = assign({}, DEFAULT_BREAKPOINTS, _breakpoints);\n      this.updateCurrentBreakpoint_();\n      return assign(this.breakpoints_);\n    };\n    _proto.responsive = function responsive(value) {\n      if (value === void 0) {\n        return this.responsive_;\n      }\n      value = Boolean(value);\n      var current = this.responsive_;\n      if (value === current) {\n        return;\n      }\n      this.responsive_ = value;\n      if (value) {\n        this.on(\"playerresize\", this.boundUpdateCurrentBreakpoint_);\n        this.updateCurrentBreakpoint_();\n      } else {\n        this.off(\"playerresize\", this.boundUpdateCurrentBreakpoint_);\n        this.removeCurrentBreakpoint_();\n      }\n      return value;\n    };\n    _proto.currentBreakpoint = function currentBreakpoint() {\n      return this.breakpoint_;\n    };\n    _proto.currentBreakpointClass = function currentBreakpointClass() {\n      return BREAKPOINT_CLASSES[this.breakpoint_] || \"\";\n    };\n    _proto.loadMedia = function loadMedia(media, ready) {\n      var _this23 = this;\n      if (!media || typeof media !== \"object\") {\n        return;\n      }\n      this.reset();\n      this.cache_.media = mergeOptions(media);\n      var _this$cache_$media = this.cache_.media, artwork = _this$cache_$media.artwork, poster = _this$cache_$media.poster, src = _this$cache_$media.src, textTracks = _this$cache_$media.textTracks;\n      if (!artwork && poster) {\n        this.cache_.media.artwork = [{\n          src: poster,\n          type: getMimetype(poster)\n        }];\n      }\n      if (src) {\n        this.src(src);\n      }\n      if (poster) {\n        this.poster(poster);\n      }\n      if (Array.isArray(textTracks)) {\n        textTracks.forEach(function(tt) {\n          return _this23.addRemoteTextTrack(tt, false);\n        });\n      }\n      this.ready(ready);\n    };\n    _proto.getMedia = function getMedia() {\n      if (!this.cache_.media) {\n        var poster = this.poster();\n        var src = this.currentSources();\n        var textTracks = Array.prototype.map.call(this.remoteTextTracks(), function(tt) {\n          return {\n            kind: tt.kind,\n            label: tt.label,\n            language: tt.language,\n            src: tt.src\n          };\n        });\n        var media = {\n          src,\n          textTracks\n        };\n        if (poster) {\n          media.poster = poster;\n          media.artwork = [{\n            src: media.poster,\n            type: getMimetype(media.poster)\n          }];\n        }\n        return media;\n      }\n      return mergeOptions(this.cache_.media);\n    };\n    Player2.getTagSettings = function getTagSettings(tag) {\n      var baseOptions = {\n        sources: [],\n        tracks: []\n      };\n      var tagOptions = getAttributes(tag);\n      var dataSetup = tagOptions[\"data-setup\"];\n      if (hasClass(tag, \"vjs-fill\")) {\n        tagOptions.fill = true;\n      }\n      if (hasClass(tag, \"vjs-fluid\")) {\n        tagOptions.fluid = true;\n      }\n      if (dataSetup !== null) {\n        var _safeParseTuple = safeParseTuple__default[\"default\"](dataSetup || \"{}\"), err = _safeParseTuple[0], data = _safeParseTuple[1];\n        if (err) {\n          log.error(err);\n        }\n        assign(tagOptions, data);\n      }\n      assign(baseOptions, tagOptions);\n      if (tag.hasChildNodes()) {\n        var children = tag.childNodes;\n        for (var i2 = 0, j = children.length; i2 < j; i2++) {\n          var child = children[i2];\n          var childName = child.nodeName.toLowerCase();\n          if (childName === \"source\") {\n            baseOptions.sources.push(getAttributes(child));\n          } else if (childName === \"track\") {\n            baseOptions.tracks.push(getAttributes(child));\n          }\n        }\n      }\n      return baseOptions;\n    };\n    _proto.flexNotSupported_ = function flexNotSupported_() {\n      var elem = document__default[\"default\"].createElement(\"i\");\n      return !(\"flexBasis\" in elem.style || \"webkitFlexBasis\" in elem.style || \"mozFlexBasis\" in elem.style || \"msFlexBasis\" in elem.style || // IE10-specific (2012 flex spec), available for completeness\n      \"msFlexOrder\" in elem.style);\n    };\n    _proto.debug = function debug2(enabled) {\n      if (enabled === void 0) {\n        return this.debugEnabled_;\n      }\n      if (enabled) {\n        this.trigger(\"debugon\");\n        this.previousLogLevel_ = this.log.level;\n        this.log.level(\"debug\");\n        this.debugEnabled_ = true;\n      } else {\n        this.trigger(\"debugoff\");\n        this.log.level(this.previousLogLevel_);\n        this.previousLogLevel_ = void 0;\n        this.debugEnabled_ = false;\n      }\n    };\n    _proto.playbackRates = function playbackRates(newRates) {\n      if (newRates === void 0) {\n        return this.cache_.playbackRates;\n      }\n      if (!Array.isArray(newRates)) {\n        return;\n      }\n      if (!newRates.every(function(rate) {\n        return typeof rate === \"number\";\n      })) {\n        return;\n      }\n      this.cache_.playbackRates = newRates;\n      this.trigger(\"playbackrateschange\");\n    };\n    return Player2;\n  }(Component2);\n  ALL.names.forEach(function(name) {\n    var props = ALL[name];\n    Player.prototype[props.getterName] = function() {\n      if (this.tech_) {\n        return this.tech_[props.getterName]();\n      }\n      this[props.privateName] = this[props.privateName] || new props.ListClass();\n      return this[props.privateName];\n    };\n  });\n  Player.prototype.crossorigin = Player.prototype.crossOrigin;\n  Player.players = {};\n  var navigator2 = window__default[\"default\"].navigator;\n  Player.prototype.options_ = {\n    // Default order of fallback technology\n    techOrder: Tech.defaultTechOrder_,\n    html5: {},\n    // default inactivity timeout\n    inactivityTimeout: 2e3,\n    // default playback rates\n    playbackRates: [],\n    // Add playback rate selection by adding rates\n    // 'playbackRates': [0.5, 1, 1.5, 2],\n    liveui: false,\n    // Included control sets\n    children: [\"mediaLoader\", \"posterImage\", \"textTrackDisplay\", \"loadingSpinner\", \"bigPlayButton\", \"liveTracker\", \"controlBar\", \"errorDisplay\", \"textTrackSettings\", \"resizeManager\"],\n    language: navigator2 && (navigator2.languages && navigator2.languages[0] || navigator2.userLanguage || navigator2.language) || \"en\",\n    // locales and their language translations\n    languages: {},\n    // Default message to show when a video cannot be played.\n    notSupportedMessage: \"No compatible source was found for this media.\",\n    normalizeAutoplay: false,\n    fullscreen: {\n      options: {\n        navigationUI: \"hide\"\n      }\n    },\n    breakpoints: {},\n    responsive: false,\n    audioOnlyMode: false,\n    audioPosterMode: false\n  };\n  [\n    /**\n     * Returns whether or not the player is in the \"ended\" state.\n     *\n     * @return {Boolean} True if the player is in the ended state, false if not.\n     * @method Player#ended\n     */\n    \"ended\",\n    /**\n     * Returns whether or not the player is in the \"seeking\" state.\n     *\n     * @return {Boolean} True if the player is in the seeking state, false if not.\n     * @method Player#seeking\n     */\n    \"seeking\",\n    /**\n     * Returns the TimeRanges of the media that are currently available\n     * for seeking to.\n     *\n     * @return {TimeRanges} the seekable intervals of the media timeline\n     * @method Player#seekable\n     */\n    \"seekable\",\n    /**\n     * Returns the current state of network activity for the element, from\n     * the codes in the list below.\n     * - NETWORK_EMPTY (numeric value 0)\n     *   The element has not yet been initialised. All attributes are in\n     *   their initial states.\n     * - NETWORK_IDLE (numeric value 1)\n     *   The element's resource selection algorithm is active and has\n     *   selected a resource, but it is not actually using the network at\n     *   this time.\n     * - NETWORK_LOADING (numeric value 2)\n     *   The user agent is actively trying to download data.\n     * - NETWORK_NO_SOURCE (numeric value 3)\n     *   The element's resource selection algorithm is active, but it has\n     *   not yet found a resource to use.\n     *\n     * @see https://html.spec.whatwg.org/multipage/embedded-content.html#network-states\n     * @return {number} the current network activity state\n     * @method Player#networkState\n     */\n    \"networkState\",\n    /**\n     * Returns a value that expresses the current state of the element\n     * with respect to rendering the current playback position, from the\n     * codes in the list below.\n     * - HAVE_NOTHING (numeric value 0)\n     *   No information regarding the media resource is available.\n     * - HAVE_METADATA (numeric value 1)\n     *   Enough of the resource has been obtained that the duration of the\n     *   resource is available.\n     * - HAVE_CURRENT_DATA (numeric value 2)\n     *   Data for the immediate current playback position is available.\n     * - HAVE_FUTURE_DATA (numeric value 3)\n     *   Data for the immediate current playback position is available, as\n     *   well as enough data for the user agent to advance the current\n     *   playback position in the direction of playback.\n     * - HAVE_ENOUGH_DATA (numeric value 4)\n     *   The user agent estimates that enough data is available for\n     *   playback to proceed uninterrupted.\n     *\n     * @see https://html.spec.whatwg.org/multipage/embedded-content.html#dom-media-readystate\n     * @return {number} the current playback rendering state\n     * @method Player#readyState\n     */\n    \"readyState\"\n  ].forEach(function(fn) {\n    Player.prototype[fn] = function() {\n      return this.techGet_(fn);\n    };\n  });\n  TECH_EVENTS_RETRIGGER.forEach(function(event2) {\n    Player.prototype[\"handleTech\" + toTitleCase2(event2) + \"_\"] = function() {\n      return this.trigger(event2);\n    };\n  });\n  Component2.registerComponent(\"Player\", Player);\n  var BASE_PLUGIN_NAME = \"plugin\";\n  var PLUGIN_CACHE_KEY = \"activePlugins_\";\n  var pluginStorage = {};\n  var pluginExists = function pluginExists2(name) {\n    return pluginStorage.hasOwnProperty(name);\n  };\n  var getPlugin = function getPlugin2(name) {\n    return pluginExists(name) ? pluginStorage[name] : void 0;\n  };\n  var markPluginAsActive = function markPluginAsActive2(player, name) {\n    player[PLUGIN_CACHE_KEY] = player[PLUGIN_CACHE_KEY] || {};\n    player[PLUGIN_CACHE_KEY][name] = true;\n  };\n  var triggerSetupEvent = function triggerSetupEvent2(player, hash2, before) {\n    var eventName = (before ? \"before\" : \"\") + \"pluginsetup\";\n    player.trigger(eventName, hash2);\n    player.trigger(eventName + \":\" + hash2.name, hash2);\n  };\n  var createBasicPlugin = function createBasicPlugin2(name, plugin) {\n    var basicPluginWrapper = function basicPluginWrapper2() {\n      triggerSetupEvent(this, {\n        name,\n        plugin,\n        instance: null\n      }, true);\n      var instance = plugin.apply(this, arguments);\n      markPluginAsActive(this, name);\n      triggerSetupEvent(this, {\n        name,\n        plugin,\n        instance\n      });\n      return instance;\n    };\n    Object.keys(plugin).forEach(function(prop) {\n      basicPluginWrapper[prop] = plugin[prop];\n    });\n    return basicPluginWrapper;\n  };\n  var createPluginFactory = function createPluginFactory2(name, PluginSubClass) {\n    PluginSubClass.prototype.name = name;\n    return function() {\n      triggerSetupEvent(this, {\n        name,\n        plugin: PluginSubClass,\n        instance: null\n      }, true);\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n      var instance = _construct__default[\"default\"](PluginSubClass, [this].concat(args));\n      this[name] = function() {\n        return instance;\n      };\n      triggerSetupEvent(this, instance.getEventHash());\n      return instance;\n    };\n  };\n  var Plugin2 = /* @__PURE__ */ function() {\n    function Plugin3(player) {\n      if (this.constructor === Plugin3) {\n        throw new Error(\"Plugin must be sub-classed; not directly instantiated.\");\n      }\n      this.player = player;\n      if (!this.log) {\n        this.log = this.player.log.createLogger(this.name);\n      }\n      evented(this);\n      delete this.trigger;\n      stateful(this, this.constructor.defaultState);\n      markPluginAsActive(player, this.name);\n      this.dispose = this.dispose.bind(this);\n      player.on(\"dispose\", this.dispose);\n    }\n    var _proto = Plugin3.prototype;\n    _proto.version = function version3() {\n      return this.constructor.VERSION;\n    };\n    _proto.getEventHash = function getEventHash(hash2) {\n      if (hash2 === void 0) {\n        hash2 = {};\n      }\n      hash2.name = this.name;\n      hash2.plugin = this.constructor;\n      hash2.instance = this;\n      return hash2;\n    };\n    _proto.trigger = function trigger$1(event2, hash2) {\n      if (hash2 === void 0) {\n        hash2 = {};\n      }\n      return trigger(this.eventBusEl_, event2, this.getEventHash(hash2));\n    };\n    _proto.handleStateChanged = function handleStateChanged(e) {\n    };\n    _proto.dispose = function dispose() {\n      var name = this.name, player = this.player;\n      this.trigger(\"dispose\");\n      this.off();\n      player.off(\"dispose\", this.dispose);\n      player[PLUGIN_CACHE_KEY][name] = false;\n      this.player = this.state = null;\n      player[name] = createPluginFactory(name, pluginStorage[name]);\n    };\n    Plugin3.isBasic = function isBasic(plugin) {\n      var p = typeof plugin === \"string\" ? getPlugin(plugin) : plugin;\n      return typeof p === \"function\" && !Plugin3.prototype.isPrototypeOf(p.prototype);\n    };\n    Plugin3.registerPlugin = function registerPlugin(name, plugin) {\n      if (typeof name !== \"string\") {\n        throw new Error('Illegal plugin name, \"' + name + '\", must be a string, was ' + typeof name + \".\");\n      }\n      if (pluginExists(name)) {\n        log.warn('A plugin named \"' + name + '\" already exists. You may want to avoid re-registering plugins!');\n      } else if (Player.prototype.hasOwnProperty(name)) {\n        throw new Error('Illegal plugin name, \"' + name + '\", cannot share a name with an existing player method!');\n      }\n      if (typeof plugin !== \"function\") {\n        throw new Error('Illegal plugin for \"' + name + '\", must be a function, was ' + typeof plugin + \".\");\n      }\n      pluginStorage[name] = plugin;\n      if (name !== BASE_PLUGIN_NAME) {\n        if (Plugin3.isBasic(plugin)) {\n          Player.prototype[name] = createBasicPlugin(name, plugin);\n        } else {\n          Player.prototype[name] = createPluginFactory(name, plugin);\n        }\n      }\n      return plugin;\n    };\n    Plugin3.deregisterPlugin = function deregisterPlugin(name) {\n      if (name === BASE_PLUGIN_NAME) {\n        throw new Error(\"Cannot de-register base plugin.\");\n      }\n      if (pluginExists(name)) {\n        delete pluginStorage[name];\n        delete Player.prototype[name];\n      }\n    };\n    Plugin3.getPlugins = function getPlugins(names) {\n      if (names === void 0) {\n        names = Object.keys(pluginStorage);\n      }\n      var result;\n      names.forEach(function(name) {\n        var plugin = getPlugin(name);\n        if (plugin) {\n          result = result || {};\n          result[name] = plugin;\n        }\n      });\n      return result;\n    };\n    Plugin3.getPluginVersion = function getPluginVersion(name) {\n      var plugin = getPlugin(name);\n      return plugin && plugin.VERSION || \"\";\n    };\n    return Plugin3;\n  }();\n  Plugin2.getPlugin = getPlugin;\n  Plugin2.BASE_PLUGIN_NAME = BASE_PLUGIN_NAME;\n  Plugin2.registerPlugin(BASE_PLUGIN_NAME, Plugin2);\n  Player.prototype.usingPlugin = function(name) {\n    return !!this[PLUGIN_CACHE_KEY] && this[PLUGIN_CACHE_KEY][name] === true;\n  };\n  Player.prototype.hasPlugin = function(name) {\n    return !!pluginExists(name);\n  };\n  var hasLogged = false;\n  var extend2 = function extend3(superClass, subClassMethods) {\n    if (subClassMethods === void 0) {\n      subClassMethods = {};\n    }\n    if (!hasLogged) {\n      log.warn(\"videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0\");\n      hasLogged = true;\n    }\n    var subClass = function subClass2() {\n      superClass.apply(this, arguments);\n    };\n    var methods = {};\n    if (typeof subClassMethods === \"object\") {\n      if (subClassMethods.constructor !== Object.prototype.constructor) {\n        subClass = subClassMethods.constructor;\n      }\n      methods = subClassMethods;\n    } else if (typeof subClassMethods === \"function\") {\n      subClass = subClassMethods;\n    }\n    _inherits__default[\"default\"](subClass, superClass);\n    if (superClass) {\n      subClass.super_ = superClass;\n    }\n    for (var name in methods) {\n      if (methods.hasOwnProperty(name)) {\n        subClass.prototype[name] = methods[name];\n      }\n    }\n    return subClass;\n  };\n  var normalizeId = function normalizeId2(id) {\n    return id.indexOf(\"#\") === 0 ? id.slice(1) : id;\n  };\n  function videojs2(id, options, ready) {\n    var player = videojs2.getPlayer(id);\n    if (player) {\n      if (options) {\n        log.warn('Player \"' + id + '\" is already initialised. Options will not be applied.');\n      }\n      if (ready) {\n        player.ready(ready);\n      }\n      return player;\n    }\n    var el = typeof id === \"string\" ? $(\"#\" + normalizeId(id)) : id;\n    if (!isEl(el)) {\n      throw new TypeError(\"The element or ID supplied is not valid. (videojs)\");\n    }\n    if (!el.ownerDocument.defaultView || !el.ownerDocument.body.contains(el)) {\n      log.warn(\"The element supplied is not included in the DOM\");\n    }\n    options = options || {};\n    if (options.restoreEl === true) {\n      options.restoreEl = (el.parentNode && el.parentNode.hasAttribute(\"data-vjs-player\") ? el.parentNode : el).cloneNode(true);\n    }\n    hooks(\"beforesetup\").forEach(function(hookFunction) {\n      var opts = hookFunction(el, mergeOptions(options));\n      if (!isObject2(opts) || Array.isArray(opts)) {\n        log.error(\"please return an object in beforesetup hooks\");\n        return;\n      }\n      options = mergeOptions(options, opts);\n    });\n    var PlayerComponent = Component2.getComponent(\"Player\");\n    player = new PlayerComponent(el, options, ready);\n    hooks(\"setup\").forEach(function(hookFunction) {\n      return hookFunction(player);\n    });\n    return player;\n  }\n  videojs2.hooks_ = hooks_;\n  videojs2.hooks = hooks;\n  videojs2.hook = hook;\n  videojs2.hookOnce = hookOnce;\n  videojs2.removeHook = removeHook;\n  if (window__default[\"default\"].VIDEOJS_NO_DYNAMIC_STYLE !== true && isReal()) {\n    var style = $(\".vjs-styles-defaults\");\n    if (!style) {\n      style = createStyleElement(\"vjs-styles-defaults\");\n      var head = $(\"head\");\n      if (head) {\n        head.insertBefore(style, head.firstChild);\n      }\n      setTextContent(style, \"\\n      .video-js {\\n        width: 300px;\\n        height: 150px;\\n      }\\n\\n      .vjs-fluid:not(.vjs-audio-only-mode) {\\n        padding-top: 56.25%\\n      }\\n    \");\n    }\n  }\n  autoSetupTimeout(1, videojs2);\n  videojs2.VERSION = version2;\n  videojs2.options = Player.prototype.options_;\n  videojs2.getPlayers = function() {\n    return Player.players;\n  };\n  videojs2.getPlayer = function(id) {\n    var players = Player.players;\n    var tag;\n    if (typeof id === \"string\") {\n      var nId = normalizeId(id);\n      var player = players[nId];\n      if (player) {\n        return player;\n      }\n      tag = $(\"#\" + nId);\n    } else {\n      tag = id;\n    }\n    if (isEl(tag)) {\n      var _tag = tag, _player = _tag.player, playerId = _tag.playerId;\n      if (_player || players[playerId]) {\n        return _player || players[playerId];\n      }\n    }\n  };\n  videojs2.getAllPlayers = function() {\n    return (\n      // Disposed players leave a key with a `null` value, so we need to make sure\n      // we filter those out.\n      Object.keys(Player.players).map(function(k) {\n        return Player.players[k];\n      }).filter(Boolean)\n    );\n  };\n  videojs2.players = Player.players;\n  videojs2.getComponent = Component2.getComponent;\n  videojs2.registerComponent = function(name, comp) {\n    if (Tech.isTech(comp)) {\n      log.warn(\"The \" + name + \" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)\");\n    }\n    Component2.registerComponent.call(Component2, name, comp);\n  };\n  videojs2.getTech = Tech.getTech;\n  videojs2.registerTech = Tech.registerTech;\n  videojs2.use = use;\n  Object.defineProperty(videojs2, \"middleware\", {\n    value: {},\n    writeable: false,\n    enumerable: true\n  });\n  Object.defineProperty(videojs2.middleware, \"TERMINATOR\", {\n    value: TERMINATOR,\n    writeable: false,\n    enumerable: true\n  });\n  videojs2.browser = browser2;\n  videojs2.TOUCH_ENABLED = TOUCH_ENABLED;\n  videojs2.extend = extend2;\n  videojs2.mergeOptions = mergeOptions;\n  videojs2.bind = bind;\n  videojs2.registerPlugin = Plugin2.registerPlugin;\n  videojs2.deregisterPlugin = Plugin2.deregisterPlugin;\n  videojs2.plugin = function(name, plugin) {\n    log.warn(\"videojs.plugin() is deprecated; use videojs.registerPlugin() instead\");\n    return Plugin2.registerPlugin(name, plugin);\n  };\n  videojs2.getPlugins = Plugin2.getPlugins;\n  videojs2.getPlugin = Plugin2.getPlugin;\n  videojs2.getPluginVersion = Plugin2.getPluginVersion;\n  videojs2.addLanguage = function(code2, data) {\n    var _mergeOptions;\n    code2 = (\"\" + code2).toLowerCase();\n    videojs2.options.languages = mergeOptions(videojs2.options.languages, (_mergeOptions = {}, _mergeOptions[code2] = data, _mergeOptions));\n    return videojs2.options.languages[code2];\n  };\n  videojs2.log = log;\n  videojs2.createLogger = createLogger2;\n  videojs2.createTimeRange = videojs2.createTimeRanges = createTimeRanges;\n  videojs2.formatTime = formatTime;\n  videojs2.setFormatTime = setFormatTime;\n  videojs2.resetFormatTime = resetFormatTime;\n  videojs2.parseUrl = parseUrl2;\n  videojs2.isCrossOrigin = isCrossOrigin;\n  videojs2.EventTarget = EventTarget2;\n  videojs2.on = on;\n  videojs2.one = one;\n  videojs2.off = off;\n  videojs2.trigger = trigger;\n  videojs2.xhr = XHR__default[\"default\"];\n  videojs2.TextTrack = TextTrack;\n  videojs2.AudioTrack = AudioTrack;\n  videojs2.VideoTrack = VideoTrack;\n  [\"isEl\", \"isTextNode\", \"createEl\", \"hasClass\", \"addClass\", \"removeClass\", \"toggleClass\", \"setAttributes\", \"getAttributes\", \"emptyEl\", \"appendContent\", \"insertContent\"].forEach(function(k) {\n    videojs2[k] = function() {\n      log.warn(\"videojs.\" + k + \"() is deprecated; use videojs.dom.\" + k + \"() instead\");\n      return Dom[k].apply(null, arguments);\n    };\n  });\n  videojs2.computedStyle = computedStyle;\n  videojs2.dom = Dom;\n  videojs2.url = Url;\n  videojs2.defineLazyProperty = defineLazyProperty;\n  videojs2.addLanguage(\"en\", {\n    \"Non-Fullscreen\": \"Exit Fullscreen\"\n  });\n  core = videojs2;\n  return core;\n}\nvar coreExports = requireCore();\nconst videojs = /* @__PURE__ */ getDefaultExportFromCjs$4(coreExports);\nfunction randomString(length) {\n  const chars2 = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\n  const charsLength = chars2.length;\n  const randomArray = new Uint8Array(length);\n  let result = \"\";\n  for (const v of crypto.getRandomValues(randomArray)) {\n    result += chars2[v % charsLength];\n  }\n  return result;\n}\nfunction getStoredVolume() {\n  const value = getLocalStorage(\"volume\");\n  if (value !== null && value !== void 0) {\n    const valueNumber = parseFloat(value);\n    if (isNaN(valueNumber)) return void 0;\n    return valueNumber;\n  }\n  return void 0;\n}\nfunction getStoredMute() {\n  const value = getLocalStorage(\"mute\");\n  if (value !== null && value !== void 0) return value === \"true\";\n  return void 0;\n}\nfunction getStoredTheater() {\n  const value = getLocalStorage(\"theater-enabled\");\n  if (value !== null && value !== void 0) return value === \"true\";\n  return false;\n}\nfunction saveVolumeInStore(value) {\n  return setLocalStorage(\"volume\", value.toString());\n}\nfunction saveMuteInStore(value) {\n  return setLocalStorage(\"mute\", value.toString());\n}\nfunction saveTheaterInStore(enabled) {\n  return setLocalStorage(\"theater-enabled\", enabled.toString());\n}\nfunction saveAverageBandwidth(value) {\n  return setLocalStorage(\"average-bandwidth\", value.toString());\n}\nfunction getAverageBandwidthInStore() {\n  const value = getLocalStorage(\"average-bandwidth\");\n  if (value !== null && value !== void 0) {\n    const valueNumber = parseInt(value, 10);\n    if (isNaN(valueNumber)) return void 0;\n    return valueNumber;\n  }\n  return void 0;\n}\nfunction saveLastSubtitle(language) {\n  return setLocalStorage(\"last-subtitle\", language);\n}\nfunction getStoredLastSubtitle() {\n  return getLocalStorage(\"last-subtitle\");\n}\nfunction savePreferredSubtitle(language) {\n  return setLocalStorage(\"preferred-subtitle\", language);\n}\nfunction getStoredPreferredSubtitle() {\n  return getLocalStorage(\"preferred-subtitle\");\n}\nfunction saveVideoWatchHistory(videoUUID, duration) {\n  return setLocalStorage(`video-watch-history`, JSON.stringify({\n    ...getStoredVideoWatchHistory(),\n    [videoUUID]: {\n      duration,\n      date: `${(/* @__PURE__ */ new Date()).toISOString()}`\n    }\n  }));\n}\nfunction getStoredVideoWatchHistory(videoUUID) {\n  let data;\n  try {\n    const value = getLocalStorage(\"video-watch-history\");\n    if (!value) return {};\n    data = JSON.parse(value);\n  } catch (error) {\n    logger$1.error(\"Cannot parse video watch history from local storage/\", error);\n  }\n  data = data || {};\n  if (videoUUID) return data[videoUUID];\n  return data;\n}\nfunction cleanupVideoWatch() {\n  const data = getStoredVideoWatchHistory();\n  if (!data) return;\n  const newData = Object.keys(data).reduce((acc, videoUUID) => {\n    const date = Date.parse(data[videoUUID].date);\n    const diff = Math.ceil(((/* @__PURE__ */ new Date()).getTime() - date) / (1e3 * 3600 * 24));\n    if (diff > 30) return acc;\n    return {\n      ...acc,\n      [videoUUID]: data[videoUUID]\n    };\n  }, {});\n  setLocalStorage(\"video-watch-history\", JSON.stringify(newData));\n}\nfunction getPlayerSessionId() {\n  const key = \"session-id\";\n  let sessionId = getSessionStorage(key);\n  if (sessionId) return sessionId;\n  sessionId = randomString(32);\n  setSessionStorage(key, sessionId);\n  return sessionId;\n}\nconst KEY_PREFIX = \"peertube-videojs-\";\nfunction getLocalStorage(key) {\n  return peertubeLocalStorage.getItem(KEY_PREFIX + key);\n}\nfunction setLocalStorage(key, value) {\n  peertubeLocalStorage.setItem(KEY_PREFIX + key, value);\n}\nfunction getSessionStorage(key) {\n  return peertubeSessionStorage.getItem(KEY_PREFIX + key);\n}\nfunction setSessionStorage(key, value) {\n  peertubeSessionStorage.setItem(KEY_PREFIX + key, value);\n}\nfunction getPauseBezel() {\n  return `\n  <div class=\"vjs-bezels-pause\">\n    <div class=\"vjs-bezel\" role=\"status\" aria-label=\"Pause\">\n      <div class=\"vjs-bezel-icon\">\n        <svg height=\"100%\" version=\"1.1\" viewBox=\"0 0 36 36\" width=\"100%\">\n          <use class=\"vjs-svg-shadow\" xlink:href=\"#vjs-id-1\"></use>\n          <path class=\"vjs-svg-fill\" d=\"M 12,26 16,26 16,10 12,10 z M 21,26 25,26 25,10 21,10 z\" id=\"vjs-id-1\"></path>\n        </svg>\n      </div>\n    </div>\n  </div>\n  `;\n}\nfunction getPlayBezel() {\n  return `\n  <div class=\"vjs-bezels-play\">\n    <div class=\"vjs-bezel\" role=\"status\" aria-label=\"Play\">\n      <div class=\"vjs-bezel-icon\">\n        <svg height=\"100%\" version=\"1.1\" viewBox=\"0 0 36 36\" width=\"100%\">\n          <use class=\"vjs-svg-shadow\" xlink:href=\"#vjs-id-2\"></use>\n          <path class=\"vjs-svg-fill\" d=\"M 12,26 18.5,22 18.5,14 12,10 z M 18.5,22 25,18 25,18 18.5,14 z\" id=\"ytp-id-2\"></path>\n        </svg>\n      </div>\n    </div>\n  </div>\n  `;\n}\nconst Component$e = videojs.getComponent(\"Component\");\nclass PauseBezel extends Component$e {\n  constructor(player, options) {\n    super(player, options);\n    if (isMobile()) return;\n    this.firstPlayDone = false;\n    this.paused = false;\n    this.playerPauseHandler = () => {\n      if (player.seeking()) return;\n      this.paused = true;\n      if (player.ended()) return;\n      this.container.innerHTML = getPauseBezel();\n      this.showBezel();\n    };\n    this.playerPlayHandler = () => {\n      if (player.seeking() || !this.firstPlayDone || !this.paused) {\n        this.firstPlayDone = true;\n        return;\n      }\n      this.paused = false;\n      this.firstPlayDone = true;\n      this.container.innerHTML = getPlayBezel();\n      this.showBezel();\n    };\n    this.videoChangeHandler = () => {\n      this.firstPlayDone = false;\n    };\n    player.on(\"video-change\", () => this.videoChangeHandler);\n    player.on(\"pause\", this.playerPauseHandler);\n    player.on(\"play\", this.playerPlayHandler);\n  }\n  dispose() {\n    if (this.playerPauseHandler) this.player().off(\"pause\", this.playerPauseHandler);\n    if (this.playerPlayHandler) this.player().off(\"play\", this.playerPlayHandler);\n    if (this.videoChangeHandler) this.player().off(\"video-change\", this.videoChangeHandler);\n    super.dispose();\n  }\n  createEl() {\n    this.container = super.createEl(\"div\", {\n      className: \"vjs-bezels-content\"\n    });\n    this.container.style.display = \"none\";\n    return this.container;\n  }\n  showBezel() {\n    this.container.style.display = \"inherit\";\n    setTimeout(() => {\n      this.container.style.display = \"none\";\n    }, 500);\n  }\n}\nvideojs.registerComponent(\"PauseBezel\", PauseBezel);\nconst Plugin$g = videojs.getPlugin(\"plugin\");\nclass BezelsPlugin extends Plugin$g {\n  constructor(player, options) {\n    super(player);\n    this.player.ready(() => {\n      player.addClass(\"vjs-bezels\");\n    });\n    const component = new PauseBezel(player, options);\n    player.addChild(component);\n    this.on(\"dispose\", () => player.removeChild(component));\n  }\n}\nvideojs.registerPlugin(\"bezels\", BezelsPlugin);\nconst MenuItem$2 = videojs.getComponent(\"MenuItem\");\nclass ContextMenuItem extends MenuItem$2 {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(player, options) {\n    super(player, options);\n  }\n  handleClick(e) {\n    super.handleClick(e);\n    this.options_.listener(e);\n    setTimeout(() => {\n      this.player().contextMenu().menu.dispose();\n    }, 1);\n  }\n  createEl(type, props, attrs) {\n    const el = super.createEl(type, props, attrs);\n    const newEl = videojs.dom.createEl(\"span\");\n    newEl.innerHTML = `<span class=\"vjs-menu-item-text\">${this.localize(this.options_.label)}</span>`;\n    el.replaceChild(newEl, el.querySelector(\".vjs-menu-item-text\"));\n    return el;\n  }\n}\nconst Menu$2 = videojs.getComponent(\"Menu\");\nclass ContextMenu extends Menu$2 {\n  constructor(player, options) {\n    super(player, { ...options, menuButton: void 0 });\n    this.dispose = videojs.bind(this, this.dispose);\n    for (const c of options.content()) {\n      this.addItem(\n        new ContextMenuItem(player, {\n          label: c.label,\n          listener: videojs.bind(player, c.listener)\n        })\n      );\n    }\n  }\n  createEl() {\n    const el = super.createEl();\n    videojs.dom.addClass(el, \"vjs-contextmenu-ui-menu\");\n    el.style.left = this.options_.position.left + \"px\";\n    el.style.top = this.options_.position.top + \"px\";\n    return el;\n  }\n}\nfunction findElPosition(el) {\n  let box;\n  if (el.getBoundingClientRect && el.parentNode) {\n    box = el.getBoundingClientRect();\n  }\n  if (!box) return { left: 0, top: 0 };\n  const docEl = document.documentElement;\n  const body = document.body;\n  const clientLeft = docEl.clientLeft || body.clientLeft || 0;\n  const scrollLeft = window.pageXOffset || body.scrollLeft;\n  const left = box.left + scrollLeft - clientLeft;\n  const clientTop = docEl.clientTop || body.clientTop || 0;\n  const scrollTop = window.pageYOffset || body.scrollTop;\n  const top = box.top + scrollTop - clientTop;\n  return {\n    left: Math.round(left),\n    top: Math.round(top)\n  };\n}\nfunction getPointerPosition(el, event) {\n  const position = {};\n  const box = findElPosition(el);\n  const boxW = el.offsetWidth;\n  const boxH = el.offsetHeight;\n  const boxY = box.top;\n  const boxX = box.left;\n  let pageY = event.pageY;\n  let pageX = event.pageX;\n  if (event.changedTouches) {\n    pageX = event.changedTouches[0].pageX;\n    pageY = event.changedTouches[0].pageY;\n  }\n  position.y = Math.max(0, Math.min(1, (boxY - pageY + boxH) / boxH));\n  position.x = Math.max(0, Math.min(1, (pageX - boxX) / boxW));\n  return position;\n}\nconst Plugin$f = videojs.getPlugin(\"plugin\");\nclass ContextMenuPlugin extends Plugin$f {\n  constructor(player, options) {\n    super(player, options);\n    this.options_ = options;\n    if (this.menu) {\n      this.menu.dispose();\n      this.player.off(\"contextmenu\", this.onContextMenuBind);\n    }\n    this.onContextMenuBind = this.onContextMenu.bind(this);\n    this.player.on(\"contextmenu\", this.onContextMenuBind);\n    this.player.ready(() => this.player.addClass(\"vjs-contextmenu-ui\"));\n  }\n  onContextMenu(e) {\n    if (hasMenu(this.player)) {\n      this.menu.dispose();\n      return;\n    }\n    if (excludeElements(e.target)) return;\n    const pointerPosition = getPointerPosition(this.player.el(), e);\n    const playerSize = this.player.el().getBoundingClientRect();\n    const menuPosition = findMenuPosition(pointerPosition, playerSize);\n    const documentEl = videojs.browser.IS_FIREFOX ? document.documentElement : document;\n    e.preventDefault();\n    const menu = this.menu = new ContextMenu(this.player, {\n      content: this.options_.content,\n      position: menuPosition\n    });\n    menu.on(\"dispose\", () => {\n      for (const event of [\"click\", \"tap\"]) {\n        videojs.off(documentEl, event, menu.dispose);\n      }\n      this.player.removeChild(menu);\n      this.menu = void 0;\n    });\n    this.player.addChild(menu);\n    const menuEl = menu.el();\n    const menuSize = menuEl.getBoundingClientRect();\n    const bodySize = document.body.getBoundingClientRect();\n    if (menuSize.right > bodySize.width || menuSize.bottom > bodySize.height) {\n      menuEl.style.left = Math.floor(Math.min(\n        menuPosition.left,\n        this.player.currentWidth() - menu.currentWidth()\n      )) + \"px\";\n      menuEl.style.top = Math.floor(Math.min(\n        menuPosition.top,\n        this.player.currentHeight() - menu.currentHeight()\n      )) + \"px\";\n    }\n    for (const event of [\"click\", \"tap\"]) {\n      videojs.on(documentEl, event, menu.dispose);\n    }\n  }\n}\nvideojs.registerPlugin(\"contextMenu\", ContextMenuPlugin);\nfunction hasMenu(player) {\n  var _a;\n  if (!player.usingPlugin(\"contextMenu\")) return false;\n  return !!((_a = player.contextMenu().menu) == null ? void 0 : _a.el());\n}\nfunction excludeElements(targetEl) {\n  const tagName = targetEl.tagName.toLowerCase();\n  return tagName === \"input\" || tagName === \"textarea\";\n}\nfunction findMenuPosition(pointerPosition, playerSize) {\n  return {\n    left: Math.round(playerSize.width * pointerPosition.x),\n    top: Math.round(playerSize.height - playerSize.height * pointerPosition.y)\n  };\n}\nconst Button$4 = videojs.getComponent(\"Button\");\nclass CaptionToggleButton extends Button$4 {\n  constructor(player, options) {\n    super(player, options);\n    player.on(\"texttrackchange\", () => this.update());\n  }\n  buildCSSClass() {\n    return `vjs-caption-toggle-control vjs-captions-button ${super.buildCSSClass()}`;\n  }\n  handleClick(event) {\n    var _a;\n    super.handleClick(event);\n    const toEnable = this.getShowing() ? void 0 : (_a = this.getCaptionToEnable()) == null ? void 0 : _a.id;\n    for (const track of this.player_.textTracks().tracks_) {\n      if (toEnable && track.id === toEnable) track.mode = \"showing\";\n      else track.mode = \"disabled\";\n    }\n  }\n  update() {\n    var _a;\n    if (this.getShowing()) {\n      this.controlText(\"Disable subtitles\");\n      this.addClass(\"enabled\");\n      return;\n    }\n    this.controlText(this.player_.localize(\"Enable {1} subtitle\", [(_a = this.getCaptionToEnable()) == null ? void 0 : _a.label]));\n    this.removeClass(\"enabled\");\n  }\n  getShowing() {\n    return this.listCaptions().find((t) => t.mode === \"showing\");\n  }\n  getCaptionToEnable() {\n    var _a;\n    const captionToEnable = getStoredPreferredSubtitle() || ((_a = this.listCaptions()[0]) == null ? void 0 : _a.id);\n    const captions = this.listCaptions();\n    return captions.find((t) => t.id === captionToEnable) || captions[0];\n  }\n  listCaptions() {\n    return this.player_.textTracks().tracks_.filter((t) => t.kind === \"captions\");\n  }\n}\nvideojs.registerComponent(\"CaptionToggleButton\", CaptionToggleButton);\nconst ClickableComponent$2 = videojs.getComponent(\"ClickableComponent\");\nclass ProgressBarMarkerComponent extends ClickableComponent$2 {\n  constructor(player, options) {\n    super(player, options);\n    const updateMarker = () => {\n      if (!this.hasValidDuration()) return;\n      const el = this.el();\n      el.style.setProperty(\"left\", this.buildLeftStyle());\n      el.style.setProperty(\"display\", \"inline\");\n    };\n    this.player().on(\"durationchange\", updateMarker);\n    const stopPropagation = (event) => event.stopPropagation();\n    this.on([\"mousedown\", \"touchstart\"], stopPropagation);\n    this.one(\"dispose\", () => {\n      if (this.player()) this.player().off(\"durationchange\", updateMarker);\n      if (this.el()) {\n        this.off([\"mousedown\", \"touchstart\"], stopPropagation);\n      }\n    });\n  }\n  createEl() {\n    return videojs.dom.createEl(\"span\", {\n      className: \"vjs-chapter-marker\",\n      style: this.hasValidDuration() ? `left: ${this.buildLeftStyle()}` : \"display: none;\"\n    });\n  }\n  handleClick(event) {\n    event.stopPropagation();\n    if (this.player()) this.player().currentTime(this.options_.timecode);\n  }\n  buildLeftStyle() {\n    return `${this.options_.timecode / this.player().duration() * 100}%`;\n  }\n  hasValidDuration() {\n    const duration = this.player().duration();\n    if (isNaN(duration) || !duration) return false;\n    return true;\n  }\n}\nvideojs.registerComponent(\"ProgressBarMarkerComponent\", ProgressBarMarkerComponent);\nconst Plugin$e = videojs.getPlugin(\"plugin\");\nclass ChaptersPlugin extends Plugin$e {\n  constructor(player, options) {\n    super(player, options);\n    __publicField(this, \"activeChapter\");\n    this.markers = [];\n    this.chapters = options.chapters;\n    this.player.ready(() => {\n      player.addClass(\"vjs-chapters\");\n      for (const chapter of this.chapters) {\n        if (chapter.timecode === 0) continue;\n        const marker = new ProgressBarMarkerComponent(player, { timecode: chapter.timecode });\n        marker.on(\"mouseenter\", () => this.activeChapter = chapter);\n        marker.on(\"mouseleave\", () => this.activeChapter = void 0);\n        this.markers.push(marker);\n        this.getSeekBar().addChild(marker);\n      }\n    });\n  }\n  dispose() {\n    for (const marker of this.markers) {\n      this.getSeekBar().removeChild(marker);\n    }\n    super.dispose();\n  }\n  getChapter(timecode) {\n    if (this.activeChapter) {\n      this.player.addClass(\"has-chapter\");\n      return { title: this.activeChapter.title, fixedTimecode: this.activeChapter.timecode };\n    }\n    if (this.chapters.length !== 0) {\n      for (let i = this.chapters.length - 1; i >= 0; i--) {\n        const chapter = this.chapters[i];\n        if (chapter.timecode <= timecode) {\n          this.player.addClass(\"has-chapter\");\n          return { title: chapter.title };\n        }\n      }\n    }\n    this.player.removeClass(\"has-chapter\");\n    return { title: \"\" };\n  }\n  getSeekBar() {\n    return this.player.getDescendant(\"ControlBar\", \"ProgressControl\", \"SeekBar\");\n  }\n}\nvideojs.registerPlugin(\"chapters\", ChaptersPlugin);\nconst Button$3 = videojs.getComponent(\"Button\");\nclass NextPreviousVideoButton extends Button$3 {\n  constructor(player, options) {\n    super(player, options);\n    this.player().on(\"video-change\", () => {\n      this.updateDisabled();\n      this.updateShowing();\n    });\n    this.updateDisabled();\n    this.updateShowing();\n  }\n  createEl() {\n    const type = this.options_.type;\n    const button = videojs.dom.createEl(\"button\", {\n      className: \"vjs-\" + type + \"-video\"\n    });\n    const nextIcon = videojs.dom.createEl(\"span\", {\n      className: \"icon icon-\" + type\n    });\n    button.appendChild(nextIcon);\n    if (type === \"next\") {\n      button.title = this.player_.localize(\"Next video\");\n    } else {\n      button.title = this.player_.localize(\"Previous video\");\n    }\n    return button;\n  }\n  handleClick() {\n    this.options_.handler();\n  }\n  updateDisabled() {\n    const disabled = this.options_.isDisabled();\n    if (disabled) this.addClass(\"vjs-disabled\");\n    else this.removeClass(\"vjs-disabled\");\n  }\n  updateShowing() {\n    if (this.options_.isDisplayed()) this.show();\n    else this.hide();\n  }\n}\nvideojs.registerComponent(\"NextVideoButton\", NextPreviousVideoButton);\nvideojs.registerComponent(\"PreviousVideoButton\", NextPreviousVideoButton);\nfunction toTitleCase(str) {\n  return str.charAt(0).toUpperCase() + str.slice(1);\n}\nconst dictionaryBytes = [\n  { max: 1024, type: \"B\", decimals: 0 },\n  { max: 1048576, type: \"KB\", decimals: 0 },\n  { max: 1073741824, type: \"MB\", decimals: 0 },\n  { max: 10995116e5, type: \"GB\", decimals: 1 }\n];\nfunction bytes(value) {\n  const format2 = dictionaryBytes.find((d) => value < d.max) || dictionaryBytes[dictionaryBytes.length - 1];\n  const calc = (value / (format2.max / 1024)).toFixed(format2.decimals);\n  return [calc, format2.type];\n}\nfunction getRtcConfig(stunServers) {\n  return {\n    iceServers: stunServers.map((s) => ({ urls: s }))\n  };\n}\nconst Button$2 = videojs.getComponent(\"Button\");\nclass P2PInfoButton extends Button$2 {\n  createEl() {\n    const div = videojs.dom.createEl(\"div\", { className: \"vjs-peertube\" });\n    const subDivP2P = videojs.dom.createEl(\"div\", {\n      className: \"vjs-peertube-hidden\"\n      // Hide the stats before we get the info\n    });\n    div.appendChild(subDivP2P);\n    const downloadIcon = videojs.dom.createEl(\"span\", { className: \"icon icon-download\" }, {\n      role: \"img\",\n      ariaLabel: this.player().localize(\"Download speed:\")\n    });\n    subDivP2P.appendChild(downloadIcon);\n    const downloadSpeedText = videojs.dom.createEl(\"span\", { className: \"download-speed-text\" });\n    const downloadSpeedNumber = videojs.dom.createEl(\"span\", { className: \"download-speed-number\" });\n    const downloadSpeedUnit = videojs.dom.createEl(\"span\");\n    downloadSpeedText.appendChild(downloadSpeedNumber);\n    downloadSpeedText.appendChild(downloadSpeedUnit);\n    subDivP2P.appendChild(downloadSpeedText);\n    const uploadIcon = videojs.dom.createEl(\"span\", { className: \"icon icon-upload\" }, {\n      role: \"img\",\n      ariaLabel: this.player().localize(\"Upload speed:\")\n    });\n    subDivP2P.appendChild(uploadIcon);\n    const uploadSpeedText = videojs.dom.createEl(\"span\", { className: \"upload-speed-text\" });\n    const uploadSpeedNumber = videojs.dom.createEl(\"span\", { className: \"upload-speed-number\" });\n    const uploadSpeedUnit = videojs.dom.createEl(\"span\");\n    uploadSpeedText.appendChild(uploadSpeedNumber);\n    uploadSpeedText.appendChild(uploadSpeedUnit);\n    subDivP2P.appendChild(uploadSpeedText);\n    const peersText = videojs.dom.createEl(\"span\", { className: \"peers-text\" });\n    const peersNumber = videojs.dom.createEl(\"span\", { className: \"peers-number\" });\n    subDivP2P.appendChild(peersNumber);\n    subDivP2P.appendChild(peersText);\n    const subDivHttp = videojs.dom.createEl(\"div\", { className: \"vjs-peertube-hidden\" });\n    const subDivHttpText = videojs.dom.createEl(\"span\", { className: \"http-fallback\" });\n    subDivHttp.appendChild(subDivHttpText);\n    div.appendChild(subDivHttp);\n    this.player_.on(\"network-info\", (_event, data) => {\n      if (!data.p2p) return;\n      subDivP2P.className = \"vjs-peertube-displayed\";\n      subDivHttp.className = \"vjs-peertube-hidden\";\n      const p2pStats = data.p2p;\n      const httpStats = data.http;\n      const downloadSpeed = bytes(p2pStats.downloadSpeed + httpStats.downloadSpeed);\n      const uploadSpeed = bytes(p2pStats.uploadSpeed);\n      const totalDownloaded = bytes(p2pStats.downloaded + httpStats.downloaded);\n      const totalUploaded = bytes(p2pStats.uploaded);\n      const numPeers = p2pStats.peersWithWebSeed;\n      subDivP2P.title = this.player().localize(\"Total downloaded: \") + totalDownloaded.join(\" \") + \"\\n\";\n      if (data.source === \"p2p-media-loader\") {\n        const downloadedFromServer = bytes(httpStats.downloaded).join(\" \");\n        const downloadedFromPeers = bytes(p2pStats.downloaded).join(\" \");\n        subDivP2P.title += \" * \" + this.player().localize(\"From servers: \") + downloadedFromServer + \"\\n * \" + this.player().localize(\"From peers: \") + downloadedFromPeers + \"\\n\";\n      }\n      subDivP2P.title += this.player().localize(\"Total uploaded: \") + totalUploaded.join(\" \");\n      downloadSpeedNumber.textContent = downloadSpeed[0];\n      downloadSpeedUnit.textContent = \" \" + downloadSpeed[1];\n      uploadSpeedNumber.textContent = uploadSpeed[0];\n      uploadSpeedUnit.textContent = \" \" + uploadSpeed[1];\n      peersNumber.textContent = numPeers.toString();\n      peersText.textContent = \" \" + (numPeers > 1 ? this.player().localize(\"peers\") : this.player_.localize(\"peer\"));\n      subDivHttp.className = \"vjs-peertube-hidden\";\n      subDivP2P.className = \"vjs-peertube-displayed\";\n    });\n    this.player_.on(\"network-info\", (_event, data) => {\n      if (data.p2p) return;\n      if (data.source === \"web-video\") subDivHttpText.textContent = \"HTTP\";\n      else if (data.source === \"p2p-media-loader\") subDivHttpText.textContent = \"HLS\";\n      subDivHttp.className = \"vjs-peertube-displayed\";\n      subDivP2P.className = \"vjs-peertube-hidden\";\n      subDivHttp.title = this.player().localize(\"Total downloaded: \") + bytes(data.http.downloaded).join(\" \");\n    });\n    this.player_.on(\"video-change\", () => {\n      subDivP2P.className = \"vjs-peertube-hidden\";\n      subDivHttp.className = \"vjs-peertube-hidden\";\n    });\n    return div;\n  }\n}\nvideojs.registerComponent(\"P2PInfoButton\", P2PInfoButton);\nconst Component$d = videojs.getComponent(\"Component\");\nclass PeerTubeLinkButton extends Component$d {\n  constructor(player, options) {\n    super(player, options);\n    this.updateShowing();\n    this.player().on(\"video-change\", () => this.updateShowing());\n  }\n  dispose() {\n    if (this.el()) return;\n    this.el().removeEventListener(\"mouseenter\", this.mouseEnterHandler);\n    this.el().removeEventListener(\"click\", this.clickHandler);\n    super.dispose();\n  }\n  createEl() {\n    const el = videojs.dom.createEl(\"a\", {\n      href: this.buildLink(),\n      innerText: this.options_.instanceName,\n      title: this.player().localize(\"Video page (new window)\"),\n      className: \"vjs-peertube-link\",\n      target: \"_blank\"\n    });\n    this.mouseEnterHandler = () => this.updateHref();\n    this.clickHandler = () => this.player().pause();\n    el.addEventListener(\"mouseenter\", this.mouseEnterHandler);\n    el.addEventListener(\"click\", this.clickHandler);\n    return el;\n  }\n  updateShowing() {\n    if (this.options_.isDisplayed()) this.show();\n    else this.hide();\n  }\n  updateHref() {\n    this.el().setAttribute(\"href\", this.buildLink());\n  }\n  buildLink() {\n    const url = buildVideoLink({ shortUUID: this.options_.shortUUID() });\n    return decorateVideoLink({ url, startTime: this.player().currentTime() });\n  }\n}\nvideojs.registerComponent(\"PeerTubeLinkButton\", PeerTubeLinkButton);\nconst ClickableComponent$1 = videojs.getComponent(\"ClickableComponent\");\nclass PeerTubeLiveDisplay extends ClickableComponent$1 {\n  constructor(player, options) {\n    super(player, options);\n    this.interval = this.setInterval(() => this.updateClass(), 1e3);\n    this.updateSync(true);\n  }\n  dispose() {\n    if (this.interval) {\n      this.clearInterval(this.interval);\n      this.interval = void 0;\n    }\n    this.contentEl_ = null;\n    super.dispose();\n  }\n  createEl() {\n    const el = super.createEl(\"div\", {\n      className: \"vjs-pt-live-control vjs-control\"\n    });\n    this.contentEl_ = videojs.dom.createEl(\"div\", {\n      className: \"vjs-live-display\"\n    }, {\n      \"aria-live\": \"off\"\n    });\n    this.contentEl_.appendChild(videojs.dom.createEl(\"span\", {\n      className: \"vjs-control-text\",\n      textContent: `${this.localize(\"Stream Type\")} `\n    }));\n    this.contentEl_.appendChild(document.createTextNode(this.localize(\"LIVE\")));\n    el.appendChild(this.contentEl_);\n    return el;\n  }\n  handleClick() {\n    const hlsjs = this.getHLSJS();\n    if (!hlsjs) return;\n    this.player().currentTime(hlsjs.liveSyncPosition);\n    this.player().play();\n    this.updateSync(true);\n  }\n  updateClass() {\n    const hlsjs = this.getHLSJS();\n    if (!hlsjs) return;\n    if (this.player().currentTime() === 0) return;\n    const isSync = Math.abs(this.player().currentTime() - hlsjs.liveSyncPosition) < 10;\n    this.updateSync(isSync);\n  }\n  updateSync(isSync) {\n    if (isSync) {\n      this.addClass(\"synced-with-live-edge\");\n      this.removeAttribute(\"title\");\n      this.disable();\n    } else {\n      this.removeClass(\"synced-with-live-edge\");\n      this.setAttribute(\"title\", this.localize(\"Go back to the live\"));\n      this.enable();\n    }\n  }\n  getHLSJS() {\n    var _a;\n    if (!((_a = this.player()) == null ? void 0 : _a.usingPlugin(\"p2pMediaLoader\"))) return;\n    return this.player().p2pMediaLoader().getHLSJS();\n  }\n}\nvideojs.registerComponent(\"PeerTubeLiveDisplay\", PeerTubeLiveDisplay);\nconst Plugin$d = videojs.getPlugin(\"plugin\");\nclass StoryboardPlugin extends Plugin$d {\n  constructor(player, options) {\n    super(player, options);\n    this.url = options.url;\n    this.height = options.height;\n    this.width = options.width;\n    this.interval = options.interval;\n    this.sprites = {};\n    this.boundedHijackMouseTooltip = this.hijackMouseTooltip.bind(this);\n    this.init();\n    this.player.ready(() => {\n      player.addClass(\"vjs-storyboard\");\n    });\n  }\n  init() {\n    var _a, _b, _c, _d, _e;\n    const controls = this.player.controlBar;\n    this.progress = controls == null ? void 0 : controls.progressControl;\n    this.seekBar = (_a = this.progress) == null ? void 0 : _a.seekBar;\n    this.mouseTimeTooltip = (_c = (_b = this.seekBar) == null ? void 0 : _b.mouseTimeDisplay) == null ? void 0 : _c.timeTooltip;\n    this.spritePlaceholder = videojs.dom.createEl(\"div\", { className: \"vjs-storyboard-sprite-placeholder\" });\n    (_e = (_d = this.seekBar) == null ? void 0 : _d.el()) == null ? void 0 : _e.appendChild(this.spritePlaceholder);\n    this.onReadyOrLoadstartHandler = (event) => {\n      if (event.type !== \"ready\") {\n        const spriteSource = this.player.currentSources().find((source) => {\n          return Object.prototype.hasOwnProperty.call(source, \"storyboard\");\n        });\n        const spriteOpts = spriteSource == null ? void 0 : spriteSource[\"storyboard\"];\n        if (spriteOpts) {\n          this.url = spriteOpts.url;\n          this.height = spriteOpts.height;\n          this.width = spriteOpts.width;\n          this.interval = spriteOpts.interval;\n        }\n      }\n      this.cached = !!this.sprites[this.url];\n      this.load();\n    };\n    this.player.on([\"ready\", \"loadstart\"], this.onReadyOrLoadstartHandler);\n  }\n  dispose() {\n    var _a, _b;\n    if (this.onReadyOrLoadstartHandler) this.player.off([\"ready\", \"loadstart\"], this.onReadyOrLoadstartHandler);\n    if (this.progress) this.progress.off([\"mousemove\", \"touchmove\"], this.boundedHijackMouseTooltip);\n    (_b = (_a = this.seekBar) == null ? void 0 : _a.el()) == null ? void 0 : _b.removeChild(this.spritePlaceholder);\n    super.dispose();\n  }\n  load() {\n    const spriteEvents = [\"mousemove\", \"touchmove\"];\n    if (this.isReady()) {\n      if (!this.cached) {\n        this.sprites[this.url] = videojs.dom.createEl(\"img\", {\n          src: this.url\n        });\n      }\n      this.progress.on(spriteEvents, this.boundedHijackMouseTooltip);\n    } else {\n      this.progress.off(spriteEvents, this.boundedHijackMouseTooltip);\n      this.resetMouseTooltip();\n    }\n  }\n  hijackMouseTooltip(evt) {\n    const sprite = this.sprites[this.url];\n    const imgWidth = sprite.naturalWidth;\n    const imgHeight = sprite.naturalHeight;\n    const seekBarEl = this.seekBar.el();\n    if (!sprite.complete || !imgWidth || !imgHeight) {\n      this.resetMouseTooltip();\n      return;\n    }\n    this.player.requestNamedAnimationFrame(\"StoryBoardPlugin#hijackMouseTooltip\", () => {\n      const seekBarRect = videojs.dom.getBoundingClientRect(seekBarEl);\n      const playerRect = videojs.dom.getBoundingClientRect(this.player.el());\n      if (!seekBarRect || !playerRect) return;\n      const seekBarX = videojs.dom.getPointerPosition(seekBarEl, evt).x;\n      let position = seekBarX * this.player.duration();\n      const maxPosition = Math.round(imgHeight / this.height * (imgWidth / this.width)) - 1;\n      position = Math.min(position / this.interval, maxPosition);\n      const responsive = 600;\n      const playerWidth = this.player.currentWidth();\n      const scaleFactor = playerWidth < responsive ? playerWidth / responsive : 1;\n      const columns = imgWidth / this.width;\n      const scaledWidth = this.width * scaleFactor;\n      const scaledHeight = this.height * scaleFactor;\n      const cleft = Math.floor(position % columns) * -scaledWidth;\n      const ctop = Math.floor(position / columns) * -scaledHeight;\n      const bgSize = `${imgWidth * scaleFactor}px ${imgHeight * scaleFactor}px`;\n      const timeTooltip = this.player.el().querySelector(\".vjs-time-tooltip\");\n      const topOffset = -scaledHeight + parseInt(getComputedStyle(timeTooltip).top.replace(\"px\", \"\")) - 20;\n      const previewHalfSize = Math.round(scaledWidth / 2);\n      let left = seekBarRect.width * seekBarX - previewHalfSize;\n      const minLeft = playerRect.left - seekBarRect.left;\n      const maxLeft = seekBarRect.width - scaledWidth + (playerRect.right - seekBarRect.right);\n      if (left < minLeft) left = minLeft;\n      if (left > maxLeft) left = maxLeft;\n      const tooltipStyle = {\n        \"background-image\": `url(\"${this.url}\")`,\n        \"background-repeat\": \"no-repeat\",\n        \"background-position\": `${cleft}px ${ctop}px`,\n        \"background-size\": bgSize,\n        \"color\": \"#fff\",\n        \"text-shadow\": \"1px 1px #000\",\n        \"position\": \"relative\",\n        \"top\": `${topOffset}px`,\n        \"border\": \"1px solid #000\",\n        // border should not overlay thumbnail area\n        \"width\": `${scaledWidth + 2}px`,\n        \"height\": `${scaledHeight + 2}px`\n      };\n      tooltipStyle.left = `${left}px`;\n      for (const [key, value] of Object.entries(tooltipStyle)) {\n        this.spritePlaceholder.style.setProperty(key, value);\n      }\n    });\n  }\n  resetMouseTooltip() {\n    if (this.spritePlaceholder) {\n      this.spritePlaceholder.style.cssText = \"\";\n    }\n  }\n  isReady() {\n    return this.mouseTimeTooltip && this.width && this.height && this.url;\n  }\n}\nvideojs.registerPlugin(\"storyboard\", StoryboardPlugin);\nconst Button$1 = videojs.getComponent(\"Button\");\nconst _TheaterButton = class _TheaterButton extends Button$1 {\n  constructor(player, options) {\n    super(player, options);\n    this.theaterButtonOptions = options;\n    const enabled = getStoredTheater();\n    if (enabled === true) {\n      this.player().addClass(_TheaterButton.THEATER_MODE_CLASS);\n      this.handleTheaterChange();\n    }\n    this.controlText(\"Theater mode\");\n    this.player().theaterEnabled = enabled;\n    this.updateShowing();\n    this.player().on(\"video-change\", () => this.updateShowing());\n  }\n  buildCSSClass() {\n    return `vjs-theater-control ${super.buildCSSClass()}`;\n  }\n  handleTheaterChange() {\n    const theaterEnabled = this.isTheaterEnabled();\n    if (theaterEnabled) {\n      this.controlText(\"Normal mode\");\n    } else {\n      this.controlText(\"Theater mode\");\n    }\n    saveTheaterInStore(theaterEnabled);\n    this.player_.trigger(\"theater-change\", theaterEnabled);\n  }\n  handleClick() {\n    this.player_.toggleClass(_TheaterButton.THEATER_MODE_CLASS);\n    this.handleTheaterChange();\n  }\n  isTheaterEnabled() {\n    return this.player_.hasClass(_TheaterButton.THEATER_MODE_CLASS);\n  }\n  updateShowing() {\n    if (this.theaterButtonOptions.isDisplayed()) this.show();\n    else this.hide();\n  }\n};\n__publicField(_TheaterButton, \"THEATER_MODE_CLASS\", \"vjs-theater-enabled\");\nlet TheaterButton = _TheaterButton;\nvideojs.registerComponent(\"TheaterButton\", TheaterButton);\nconst TimeToolTip = videojs.getComponent(\"TimeTooltip\");\nclass TimeTooltip extends TimeToolTip {\n  write(timecode) {\n    var _a;\n    const player = this.player();\n    if (player.usingPlugin(\"chapters\")) {\n      if (timecode === this.currentTimecode) return;\n      this.currentTimecode = timecode;\n      const { title, fixedTimecode } = player.chapters().getChapter(timeToInt(this.currentTimecode));\n      if (title) {\n        const timecodeStr = fixedTimecode ? videojs.formatTime(fixedTimecode, (_a = this.player()) == null ? void 0 : _a.duration()) : this.currentTimecode;\n        return super.write(title + \"\\r\\n\" + timecodeStr);\n      }\n    }\n    return super.write(timecode);\n  }\n}\nvideojs.registerComponent(\"TimeTooltip\", TimeTooltip);\nconst Component$c = videojs.getComponent(\"Component\");\nclass PeerTubeDockComponent extends Component$c {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(player, options) {\n    super(player, options);\n  }\n  createEl() {\n    const el = super.createEl(\"div\", { className: \"peertube-dock\" });\n    if (this.options_.avatarUrl) {\n      const avatar = videojs.dom.createEl(\"img\", {\n        className: \"peertube-dock-avatar\",\n        src: this.options_.avatarUrl\n      }, { alt: \"\" });\n      el.appendChild(avatar);\n    }\n    const elWrapperTitleDescription = super.createEl(\"div\", {\n      className: \"peertube-dock-title-description\"\n    });\n    if (this.options_.title) {\n      const title = videojs.dom.createEl(\"h2\", {\n        className: \"peertube-dock-title\",\n        title: this.options_.title,\n        innerText: this.options_.title\n      });\n      elWrapperTitleDescription.appendChild(title);\n    }\n    if (this.options_.description) {\n      const description = videojs.dom.createEl(\"div\", {\n        className: \"peertube-dock-description\",\n        title: this.options_.description,\n        innerText: this.options_.description\n      });\n      elWrapperTitleDescription.appendChild(description);\n    }\n    if (this.options_.title || this.options_.description) {\n      el.appendChild(elWrapperTitleDescription);\n    }\n    return el;\n  }\n}\nvideojs.registerComponent(\"PeerTubeDockComponent\", PeerTubeDockComponent);\nconst Plugin$c = videojs.getPlugin(\"plugin\");\nclass PeerTubeDockPlugin extends Plugin$c {\n  constructor(player, options) {\n    super(player, options);\n    player.ready(() => {\n      player.addClass(\"peertube-dock\");\n    });\n    this.dockComponent = new PeerTubeDockComponent(player, options);\n    player.addChild(this.dockComponent);\n  }\n  dispose() {\n    var _a;\n    (_a = this.dockComponent) == null ? void 0 : _a.dispose();\n    this.player.removeChild(this.dockComponent);\n    this.player.removeClass(\"peertube-dock\");\n    super.dispose();\n  }\n}\nvideojs.registerPlugin(\"peertubeDock\", PeerTubeDockPlugin);\nconst Component$b = videojs.getComponent(\"Component\");\nclass PeerTubeNSFWComponent extends Component$b {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(player, options) {\n    super(player, options);\n  }\n  createEl() {\n    const el = super.createEl(\"div\", { className: \"nsfw-container\" });\n    const title = super.createEl(\"div\", { className: \"nsfw-title\" });\n    title.textContent = this.player().localize(\"Sensitive content\");\n    const content = super.createEl(\"div\", { className: \"nsfw-content\" });\n    content.textContent = this.player().localize(\"This video contains sensitive content.\");\n    el.appendChild(title);\n    el.appendChild(content);\n    if (this.options_.flags || this.options_.summary) {\n      const moreButton = super.createEl(\n        \"button\",\n        { textContent: this.player().localize(\"Learn more\") },\n        { type: \"button\" }\n      );\n      el.appendChild(moreButton);\n      moreButton.addEventListener(\"click\", () => {\n        this.appendMoreContent();\n        moreButton.style.display = \"none\";\n      });\n    }\n    return el;\n  }\n  appendMoreContent() {\n    const moreContentEl = super.createEl(\"div\", { className: \"nsfw-more-content\" });\n    if (this.options_.flags) {\n      const moreContentFlags = super.createEl(\"div\", { className: \"nsfw-more-flags\" });\n      moreContentFlags.appendChild(super.createEl(\"strong\", { textContent: this.player().localize(\"Content warning\") }));\n      moreContentFlags.appendChild(super.createEl(\"div\", { textContent: this.buildFlagStrings().join(\" - \") }));\n      moreContentEl.appendChild(moreContentFlags);\n    }\n    if (this.options_.summary) {\n      const moreContentSummary = super.createEl(\"div\", { className: \"nsfw-more-summary\" });\n      moreContentSummary.appendChild(super.createEl(\"strong\", { textContent: `Author note` }));\n      moreContentSummary.appendChild(super.createEl(\"div\", { textContent: this.options_.summary }));\n      moreContentEl.appendChild(moreContentSummary);\n    }\n    this.el().appendChild(moreContentEl);\n  }\n  buildFlagStrings() {\n    const flags = this.options_.flags;\n    const flagStrings = [];\n    if ((flags & NSFWFlag.VIOLENT) === NSFWFlag.VIOLENT) {\n      flagStrings.push(this.player().localize(`Violence`));\n    }\n    if ((flags & NSFWFlag.EXPLICIT_SEX) === NSFWFlag.EXPLICIT_SEX) {\n      flagStrings.push(this.player().localize(`Explicit Sex`));\n    }\n    return flagStrings;\n  }\n}\nvideojs.registerComponent(\"PeerTubeNSFWComponent\", PeerTubeNSFWComponent);\nconst Plugin$b = videojs.getPlugin(\"plugin\");\nclass PeerTubeNSFWPlugin extends Plugin$b {\n  constructor(player, options) {\n    super(player, options);\n    player.ready(() => {\n      player.addClass(\"peertube-nsfw\");\n      this.nsfwComponent = new PeerTubeNSFWComponent(player, options);\n      player.addChild(this.nsfwComponent);\n    });\n    player.one(\"play\", () => {\n      this.nsfwComponent.hide();\n    });\n  }\n  dispose() {\n    var _a;\n    (_a = this.nsfwComponent) == null ? void 0 : _a.dispose();\n    this.player.removeChild(this.nsfwComponent);\n    this.player.removeClass(\"peertube-nsfw\");\n    super.dispose();\n  }\n}\nvideojs.registerPlugin(\"peertubeNSFW\", PeerTubeNSFWPlugin);\nconst Plugin$a = videojs.getPlugin(\"plugin\");\nconst _PeerTubeHotkeysPlugin = class _PeerTubeHotkeysPlugin extends Plugin$a {\n  constructor(player, options) {\n    super(player, options);\n    this.isLive = options.isLive;\n    this.handlers = this.buildHandlers();\n    this.handleKeyFunction = (event) => this.onKeyDown(event);\n    document.addEventListener(\"keydown\", this.handleKeyFunction);\n  }\n  dispose() {\n    document.removeEventListener(\"keydown\", this.handleKeyFunction);\n    super.dispose();\n  }\n  onKeyDown(event) {\n    if (!this.isValidKeyTarget(event.target)) return;\n    for (const handler of this.handlers) {\n      if (handler.accept(event)) {\n        handler.cb(event);\n        return;\n      }\n    }\n  }\n  buildHandlers() {\n    const handlers = [\n      // Play\n      {\n        accept: (e) => e.key === \" \" || e.key === \"MediaPlayPause\",\n        cb: (e) => {\n          e.preventDefault();\n          e.stopPropagation();\n          if (this.player.paused()) this.player.play();\n          else this.player.pause();\n        }\n      },\n      // Increase volume\n      {\n        accept: (e) => this.isNaked(e, \"ArrowUp\"),\n        cb: (e) => {\n          e.preventDefault();\n          this.player.volume(this.player.volume() + _PeerTubeHotkeysPlugin.VOLUME_STEP);\n        }\n      },\n      // Decrease volume\n      {\n        accept: (e) => this.isNaked(e, \"ArrowDown\"),\n        cb: (e) => {\n          e.preventDefault();\n          this.player.volume(this.player.volume() - _PeerTubeHotkeysPlugin.VOLUME_STEP);\n        }\n      },\n      // Fullscreen\n      {\n        // f key or Ctrl + Enter\n        accept: (e) => this.isNaked(e, \"f\") || !e.altKey && e.ctrlKey && e.key === \"Enter\",\n        cb: (e) => {\n          e.preventDefault();\n          if (this.player.isFullscreen()) this.player.exitFullscreen();\n          else this.player.requestFullscreen();\n        }\n      },\n      // Mute\n      {\n        accept: (e) => this.isNaked(e, \"m\"),\n        cb: (e) => {\n          e.preventDefault();\n          this.player.muted(!this.player.muted());\n        }\n      },\n      // Increase playback rate\n      {\n        accept: (e) => e.key === \">\",\n        cb: () => {\n          if (this.isLive) return;\n          const target = Math.min(this.player.playbackRate() + 0.1, 5);\n          this.player.playbackRate(parseFloat(target.toFixed(2)));\n        }\n      },\n      // Decrease playback rate\n      {\n        accept: (e) => e.key === \"<\",\n        cb: () => {\n          if (this.isLive) return;\n          const target = Math.max(this.player.playbackRate() - 0.1, 0.1);\n          this.player.playbackRate(parseFloat(target.toFixed(2)));\n        }\n      },\n      // Previous frame\n      {\n        accept: (e) => e.key === \",\",\n        cb: () => {\n          if (this.isLive) return;\n          this.player.pause();\n          const dist = 1 / 30;\n          this.player.currentTime(this.player.currentTime() - dist);\n        }\n      },\n      // Next frame\n      {\n        accept: (e) => e.key === \".\",\n        cb: () => {\n          if (this.isLive) return;\n          this.player.pause();\n          const dist = 1 / 30;\n          this.player.currentTime(this.player.currentTime() + dist);\n        }\n      }\n    ];\n    if (this.isLive) return handlers;\n    return handlers.concat(this.buildVODHandlers());\n  }\n  buildVODHandlers() {\n    const handlers = [\n      // Rewind\n      {\n        accept: (e) => this.isNaked(e, \"ArrowLeft\") || this.isNaked(e, \"MediaRewind\"),\n        cb: (e) => {\n          if (this.isLive) return;\n          e.preventDefault();\n          const target = Math.max(0, this.player.currentTime() - _PeerTubeHotkeysPlugin.SEEK_STEP);\n          this.player.currentTime(target);\n        }\n      },\n      // Forward\n      {\n        accept: (e) => this.isNaked(e, \"ArrowRight\") || this.isNaked(e, \"MediaForward\"),\n        cb: (e) => {\n          if (this.isLive) return;\n          e.preventDefault();\n          const target = Math.min(this.player.duration(), this.player.currentTime() + _PeerTubeHotkeysPlugin.SEEK_STEP);\n          this.player.currentTime(target);\n        }\n      }\n    ];\n    for (let i = 0; i < 10; i++) {\n      handlers.push({\n        accept: (e) => this.isNakedOrShift(e, i + \"\"),\n        cb: (e) => {\n          if (this.isLive) return;\n          e.preventDefault();\n          this.player.currentTime(this.player.duration() * i * 0.1);\n        }\n      });\n    }\n    return handlers;\n  }\n  isValidKeyTarget(eventEl) {\n    const playerEl = this.player.el();\n    const activeEl = document.activeElement;\n    const currentElTagName = eventEl.tagName.toLowerCase();\n    return activeEl === playerEl || activeEl === playerEl.querySelector(\".vjs-tech\") || activeEl === playerEl.querySelector(\".vjs-control-bar\") || eventEl.id === \"content\" || currentElTagName === \"body\" || currentElTagName === \"video\";\n  }\n  isNaked(event, key) {\n    if (key.length === 1) key = key.toUpperCase();\n    return !event.ctrlKey && !event.altKey && !event.metaKey && !event.shiftKey && this.getLatinKey(event.key, event.code) === key;\n  }\n  isNakedOrShift(event, key) {\n    return !event.ctrlKey && !event.altKey && !event.metaKey && event.key === key;\n  }\n  // Thanks Maciej Krawczyk\n  // https://stackoverflow.com/questions/70211837/keyboard-shortcuts-commands-on-non-latin-alphabet-keyboards-javascript?rq=1\n  getLatinKey(key, code2) {\n    if (key.length !== 1) {\n      return key;\n    }\n    const capitalHetaCode = 880;\n    const isNonLatin = key.charCodeAt(0) >= capitalHetaCode;\n    if (isNonLatin) {\n      if (code2.startsWith(\"Key\") && code2.length === 4) {\n        return code2.charAt(3);\n      }\n      if (code2.startsWith(\"Digit\") && code2.length === 6) {\n        return code2.charAt(5);\n      }\n    }\n    return key.toUpperCase();\n  }\n};\n__publicField(_PeerTubeHotkeysPlugin, \"VOLUME_STEP\", 0.1);\n__publicField(_PeerTubeHotkeysPlugin, \"SEEK_STEP\", 5);\nlet PeerTubeHotkeysPlugin = _PeerTubeHotkeysPlugin;\nvideojs.registerPlugin(\"peerTubeHotkeysPlugin\", PeerTubeHotkeysPlugin);\nfunction getDefaultExportFromCjs$3(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, \"default\") ? x[\"default\"] : x;\n}\nvar browser$3 = { exports: {} };\nvar process$2 = browser$3.exports = {};\nvar cachedSetTimeout$1;\nvar cachedClearTimeout$1;\nfunction defaultSetTimout$1() {\n  throw new Error(\"setTimeout has not been defined\");\n}\nfunction defaultClearTimeout$1() {\n  throw new Error(\"clearTimeout has not been defined\");\n}\n(function() {\n  try {\n    if (typeof setTimeout === \"function\") {\n      cachedSetTimeout$1 = setTimeout;\n    } else {\n      cachedSetTimeout$1 = defaultSetTimout$1;\n    }\n  } catch (e) {\n    cachedSetTimeout$1 = defaultSetTimout$1;\n  }\n  try {\n    if (typeof clearTimeout === \"function\") {\n      cachedClearTimeout$1 = clearTimeout;\n    } else {\n      cachedClearTimeout$1 = defaultClearTimeout$1;\n    }\n  } catch (e) {\n    cachedClearTimeout$1 = defaultClearTimeout$1;\n  }\n})();\nfunction runTimeout$1(fun) {\n  if (cachedSetTimeout$1 === setTimeout) {\n    return setTimeout(fun, 0);\n  }\n  if ((cachedSetTimeout$1 === defaultSetTimout$1 || !cachedSetTimeout$1) && setTimeout) {\n    cachedSetTimeout$1 = setTimeout;\n    return setTimeout(fun, 0);\n  }\n  try {\n    return cachedSetTimeout$1(fun, 0);\n  } catch (e) {\n    try {\n      return cachedSetTimeout$1.call(null, fun, 0);\n    } catch (e2) {\n      return cachedSetTimeout$1.call(this, fun, 0);\n    }\n  }\n}\nfunction runClearTimeout$1(marker) {\n  if (cachedClearTimeout$1 === clearTimeout) {\n    return clearTimeout(marker);\n  }\n  if ((cachedClearTimeout$1 === defaultClearTimeout$1 || !cachedClearTimeout$1) && clearTimeout) {\n    cachedClearTimeout$1 = clearTimeout;\n    return clearTimeout(marker);\n  }\n  try {\n    return cachedClearTimeout$1(marker);\n  } catch (e) {\n    try {\n      return cachedClearTimeout$1.call(null, marker);\n    } catch (e2) {\n      return cachedClearTimeout$1.call(this, marker);\n    }\n  }\n}\nvar queue$1 = [];\nvar draining$1 = false;\nvar currentQueue$1;\nvar queueIndex$1 = -1;\nfunction cleanUpNextTick$1() {\n  if (!draining$1 || !currentQueue$1) {\n    return;\n  }\n  draining$1 = false;\n  if (currentQueue$1.length) {\n    queue$1 = currentQueue$1.concat(queue$1);\n  } else {\n    queueIndex$1 = -1;\n  }\n  if (queue$1.length) {\n    drainQueue$1();\n  }\n}\nfunction drainQueue$1() {\n  if (draining$1) {\n    return;\n  }\n  var timeout = runTimeout$1(cleanUpNextTick$1);\n  draining$1 = true;\n  var len = queue$1.length;\n  while (len) {\n    currentQueue$1 = queue$1;\n    queue$1 = [];\n    while (++queueIndex$1 < len) {\n      if (currentQueue$1) {\n        currentQueue$1[queueIndex$1].run();\n      }\n    }\n    queueIndex$1 = -1;\n    len = queue$1.length;\n  }\n  currentQueue$1 = null;\n  draining$1 = false;\n  runClearTimeout$1(timeout);\n}\nprocess$2.nextTick = function(fun) {\n  var args = new Array(arguments.length - 1);\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n  }\n  queue$1.push(new Item$1(fun, args));\n  if (queue$1.length === 1 && !draining$1) {\n    runTimeout$1(drainQueue$1);\n  }\n};\nfunction Item$1(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\nItem$1.prototype.run = function() {\n  this.fun.apply(null, this.array);\n};\nprocess$2.title = \"browser\";\nprocess$2.browser = true;\nprocess$2.env = {};\nprocess$2.argv = [];\nprocess$2.version = \"\";\nprocess$2.versions = {};\nfunction noop$3() {\n}\nprocess$2.on = noop$3;\nprocess$2.addListener = noop$3;\nprocess$2.once = noop$3;\nprocess$2.off = noop$3;\nprocess$2.removeListener = noop$3;\nprocess$2.removeAllListeners = noop$3;\nprocess$2.emit = noop$3;\nprocess$2.prependListener = noop$3;\nprocess$2.prependOnceListener = noop$3;\nprocess$2.listeners = function(name) {\n  return [];\n};\nprocess$2.binding = function(name) {\n  throw new Error(\"process.binding is not supported\");\n};\nprocess$2.cwd = function() {\n  return \"/\";\n};\nprocess$2.chdir = function(dir) {\n  throw new Error(\"process.chdir is not supported\");\n};\nprocess$2.umask = function() {\n  return 0;\n};\nvar browserExports$3 = browser$3.exports;\nconst process$1$1 = /* @__PURE__ */ getDefaultExportFromCjs$3(browserExports$3);\nvar browser$2 = { exports: {} };\nvar ms$1;\nvar hasRequiredMs$1;\nfunction requireMs$1() {\n  if (hasRequiredMs$1) return ms$1;\n  hasRequiredMs$1 = 1;\n  var s = 1e3;\n  var m = s * 60;\n  var h = m * 60;\n  var d = h * 24;\n  var w = d * 7;\n  var y = d * 365.25;\n  ms$1 = function(val, options) {\n    options = options || {};\n    var type = typeof val;\n    if (type === \"string\" && val.length > 0) {\n      return parse(val);\n    } else if (type === \"number\" && isFinite(val)) {\n      return options.long ? fmtLong(val) : fmtShort(val);\n    }\n    throw new Error(\n      \"val is not a non-empty string or a valid number. val=\" + JSON.stringify(val)\n    );\n  };\n  function parse(str) {\n    str = String(str);\n    if (str.length > 100) {\n      return;\n    }\n    var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n      str\n    );\n    if (!match) {\n      return;\n    }\n    var n = parseFloat(match[1]);\n    var type = (match[2] || \"ms\").toLowerCase();\n    switch (type) {\n      case \"years\":\n      case \"year\":\n      case \"yrs\":\n      case \"yr\":\n      case \"y\":\n        return n * y;\n      case \"weeks\":\n      case \"week\":\n      case \"w\":\n        return n * w;\n      case \"days\":\n      case \"day\":\n      case \"d\":\n        return n * d;\n      case \"hours\":\n      case \"hour\":\n      case \"hrs\":\n      case \"hr\":\n      case \"h\":\n        return n * h;\n      case \"minutes\":\n      case \"minute\":\n      case \"mins\":\n      case \"min\":\n      case \"m\":\n        return n * m;\n      case \"seconds\":\n      case \"second\":\n      case \"secs\":\n      case \"sec\":\n      case \"s\":\n        return n * s;\n      case \"milliseconds\":\n      case \"millisecond\":\n      case \"msecs\":\n      case \"msec\":\n      case \"ms\":\n        return n;\n      default:\n        return void 0;\n    }\n  }\n  function fmtShort(ms2) {\n    var msAbs = Math.abs(ms2);\n    if (msAbs >= d) {\n      return Math.round(ms2 / d) + \"d\";\n    }\n    if (msAbs >= h) {\n      return Math.round(ms2 / h) + \"h\";\n    }\n    if (msAbs >= m) {\n      return Math.round(ms2 / m) + \"m\";\n    }\n    if (msAbs >= s) {\n      return Math.round(ms2 / s) + \"s\";\n    }\n    return ms2 + \"ms\";\n  }\n  function fmtLong(ms2) {\n    var msAbs = Math.abs(ms2);\n    if (msAbs >= d) {\n      return plural(ms2, msAbs, d, \"day\");\n    }\n    if (msAbs >= h) {\n      return plural(ms2, msAbs, h, \"hour\");\n    }\n    if (msAbs >= m) {\n      return plural(ms2, msAbs, m, \"minute\");\n    }\n    if (msAbs >= s) {\n      return plural(ms2, msAbs, s, \"second\");\n    }\n    return ms2 + \" ms\";\n  }\n  function plural(ms2, msAbs, n, name) {\n    var isPlural = msAbs >= n * 1.5;\n    return Math.round(ms2 / n) + \" \" + name + (isPlural ? \"s\" : \"\");\n  }\n  return ms$1;\n}\nvar common$3;\nvar hasRequiredCommon$1;\nfunction requireCommon$1() {\n  if (hasRequiredCommon$1) return common$3;\n  hasRequiredCommon$1 = 1;\n  function setup(env) {\n    createDebug.debug = createDebug;\n    createDebug.default = createDebug;\n    createDebug.coerce = coerce;\n    createDebug.disable = disable;\n    createDebug.enable = enable;\n    createDebug.enabled = enabled;\n    createDebug.humanize = requireMs$1();\n    createDebug.destroy = destroy;\n    Object.keys(env).forEach((key) => {\n      createDebug[key] = env[key];\n    });\n    createDebug.names = [];\n    createDebug.skips = [];\n    createDebug.formatters = {};\n    function selectColor(namespace) {\n      let hash2 = 0;\n      for (let i = 0; i < namespace.length; i++) {\n        hash2 = (hash2 << 5) - hash2 + namespace.charCodeAt(i);\n        hash2 |= 0;\n      }\n      return createDebug.colors[Math.abs(hash2) % createDebug.colors.length];\n    }\n    createDebug.selectColor = selectColor;\n    function createDebug(namespace) {\n      let prevTime;\n      let enableOverride = null;\n      let namespacesCache;\n      let enabledCache;\n      function debug2(...args) {\n        if (!debug2.enabled) {\n          return;\n        }\n        const self2 = debug2;\n        const curr = Number(/* @__PURE__ */ new Date());\n        const ms2 = curr - (prevTime || curr);\n        self2.diff = ms2;\n        self2.prev = prevTime;\n        self2.curr = curr;\n        prevTime = curr;\n        args[0] = createDebug.coerce(args[0]);\n        if (typeof args[0] !== \"string\") {\n          args.unshift(\"%O\");\n        }\n        let index = 0;\n        args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format2) => {\n          if (match === \"%%\") {\n            return \"%\";\n          }\n          index++;\n          const formatter = createDebug.formatters[format2];\n          if (typeof formatter === \"function\") {\n            const val = args[index];\n            match = formatter.call(self2, val);\n            args.splice(index, 1);\n            index--;\n          }\n          return match;\n        });\n        createDebug.formatArgs.call(self2, args);\n        const logFn = self2.log || createDebug.log;\n        logFn.apply(self2, args);\n      }\n      debug2.namespace = namespace;\n      debug2.useColors = createDebug.useColors();\n      debug2.color = createDebug.selectColor(namespace);\n      debug2.extend = extend2;\n      debug2.destroy = createDebug.destroy;\n      Object.defineProperty(debug2, \"enabled\", {\n        enumerable: true,\n        configurable: false,\n        get: () => {\n          if (enableOverride !== null) {\n            return enableOverride;\n          }\n          if (namespacesCache !== createDebug.namespaces) {\n            namespacesCache = createDebug.namespaces;\n            enabledCache = createDebug.enabled(namespace);\n          }\n          return enabledCache;\n        },\n        set: (v) => {\n          enableOverride = v;\n        }\n      });\n      if (typeof createDebug.init === \"function\") {\n        createDebug.init(debug2);\n      }\n      return debug2;\n    }\n    function extend2(namespace, delimiter) {\n      const newDebug = createDebug(this.namespace + (typeof delimiter === \"undefined\" ? \":\" : delimiter) + namespace);\n      newDebug.log = this.log;\n      return newDebug;\n    }\n    function enable(namespaces) {\n      createDebug.save(namespaces);\n      createDebug.namespaces = namespaces;\n      createDebug.names = [];\n      createDebug.skips = [];\n      const split = (typeof namespaces === \"string\" ? namespaces : \"\").trim().replace(\" \", \",\").split(\",\").filter(Boolean);\n      for (const ns of split) {\n        if (ns[0] === \"-\") {\n          createDebug.skips.push(ns.slice(1));\n        } else {\n          createDebug.names.push(ns);\n        }\n      }\n    }\n    function matchesTemplate(search, template) {\n      let searchIndex = 0;\n      let templateIndex = 0;\n      let starIndex = -1;\n      let matchIndex = 0;\n      while (searchIndex < search.length) {\n        if (templateIndex < template.length && (template[templateIndex] === search[searchIndex] || template[templateIndex] === \"*\")) {\n          if (template[templateIndex] === \"*\") {\n            starIndex = templateIndex;\n            matchIndex = searchIndex;\n            templateIndex++;\n          } else {\n            searchIndex++;\n            templateIndex++;\n          }\n        } else if (starIndex !== -1) {\n          templateIndex = starIndex + 1;\n          matchIndex++;\n          searchIndex = matchIndex;\n        } else {\n          return false;\n        }\n      }\n      while (templateIndex < template.length && template[templateIndex] === \"*\") {\n        templateIndex++;\n      }\n      return templateIndex === template.length;\n    }\n    function disable() {\n      const namespaces = [\n        ...createDebug.names,\n        ...createDebug.skips.map((namespace) => \"-\" + namespace)\n      ].join(\",\");\n      createDebug.enable(\"\");\n      return namespaces;\n    }\n    function enabled(name) {\n      for (const skip of createDebug.skips) {\n        if (matchesTemplate(name, skip)) {\n          return false;\n        }\n      }\n      for (const ns of createDebug.names) {\n        if (matchesTemplate(name, ns)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    function coerce(val) {\n      if (val instanceof Error) {\n        return val.stack || val.message;\n      }\n      return val;\n    }\n    function destroy() {\n      console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\");\n    }\n    createDebug.enable(createDebug.load());\n    return createDebug;\n  }\n  common$3 = setup;\n  return common$3;\n}\nvar hasRequiredBrowser$1;\nfunction requireBrowser$1() {\n  if (hasRequiredBrowser$1) return browser$2.exports;\n  hasRequiredBrowser$1 = 1;\n  (function(module, exports) {\n    exports.formatArgs = formatArgs;\n    exports.save = save;\n    exports.load = load;\n    exports.useColors = useColors;\n    exports.storage = localstorage();\n    exports.destroy = /* @__PURE__ */ (() => {\n      let warned = false;\n      return () => {\n        if (!warned) {\n          warned = true;\n          console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\");\n        }\n      };\n    })();\n    exports.colors = [\n      \"#0000CC\",\n      \"#0000FF\",\n      \"#0033CC\",\n      \"#0033FF\",\n      \"#0066CC\",\n      \"#0066FF\",\n      \"#0099CC\",\n      \"#0099FF\",\n      \"#00CC00\",\n      \"#00CC33\",\n      \"#00CC66\",\n      \"#00CC99\",\n      \"#00CCCC\",\n      \"#00CCFF\",\n      \"#3300CC\",\n      \"#3300FF\",\n      \"#3333CC\",\n      \"#3333FF\",\n      \"#3366CC\",\n      \"#3366FF\",\n      \"#3399CC\",\n      \"#3399FF\",\n      \"#33CC00\",\n      \"#33CC33\",\n      \"#33CC66\",\n      \"#33CC99\",\n      \"#33CCCC\",\n      \"#33CCFF\",\n      \"#6600CC\",\n      \"#6600FF\",\n      \"#6633CC\",\n      \"#6633FF\",\n      \"#66CC00\",\n      \"#66CC33\",\n      \"#9900CC\",\n      \"#9900FF\",\n      \"#9933CC\",\n      \"#9933FF\",\n      \"#99CC00\",\n      \"#99CC33\",\n      \"#CC0000\",\n      \"#CC0033\",\n      \"#CC0066\",\n      \"#CC0099\",\n      \"#CC00CC\",\n      \"#CC00FF\",\n      \"#CC3300\",\n      \"#CC3333\",\n      \"#CC3366\",\n      \"#CC3399\",\n      \"#CC33CC\",\n      \"#CC33FF\",\n      \"#CC6600\",\n      \"#CC6633\",\n      \"#CC9900\",\n      \"#CC9933\",\n      \"#CCCC00\",\n      \"#CCCC33\",\n      \"#FF0000\",\n      \"#FF0033\",\n      \"#FF0066\",\n      \"#FF0099\",\n      \"#FF00CC\",\n      \"#FF00FF\",\n      \"#FF3300\",\n      \"#FF3333\",\n      \"#FF3366\",\n      \"#FF3399\",\n      \"#FF33CC\",\n      \"#FF33FF\",\n      \"#FF6600\",\n      \"#FF6633\",\n      \"#FF9900\",\n      \"#FF9933\",\n      \"#FFCC00\",\n      \"#FFCC33\"\n    ];\n    function useColors() {\n      if (typeof window !== \"undefined\" && window.process && (window.process.type === \"renderer\" || window.process.__nwjs)) {\n        return true;\n      }\n      if (typeof navigator !== \"undefined\" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n        return false;\n      }\n      let m;\n      return typeof document !== \"undefined\" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n      typeof window !== \"undefined\" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n      typeof navigator !== \"undefined\" && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n      typeof navigator !== \"undefined\" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n    }\n    function formatArgs(args) {\n      args[0] = (this.useColors ? \"%c\" : \"\") + this.namespace + (this.useColors ? \" %c\" : \" \") + args[0] + (this.useColors ? \"%c \" : \" \") + \"+\" + module.exports.humanize(this.diff);\n      if (!this.useColors) {\n        return;\n      }\n      const c = \"color: \" + this.color;\n      args.splice(1, 0, c, \"color: inherit\");\n      let index = 0;\n      let lastC = 0;\n      args[0].replace(/%[a-zA-Z%]/g, (match) => {\n        if (match === \"%%\") {\n          return;\n        }\n        index++;\n        if (match === \"%c\") {\n          lastC = index;\n        }\n      });\n      args.splice(lastC, 0, c);\n    }\n    exports.log = console.debug || console.log || (() => {\n    });\n    function save(namespaces) {\n      try {\n        if (namespaces) {\n          exports.storage.setItem(\"debug\", namespaces);\n        } else {\n          exports.storage.removeItem(\"debug\");\n        }\n      } catch (error) {\n      }\n    }\n    function load() {\n      let r;\n      try {\n        r = exports.storage.getItem(\"debug\");\n      } catch (error) {\n      }\n      if (!r && typeof process$1$1 !== \"undefined\" && \"env\" in process$1$1) {\n        r = process$1$1.env.DEBUG;\n      }\n      return r;\n    }\n    function localstorage() {\n      try {\n        return localStorage;\n      } catch (error) {\n      }\n    }\n    module.exports = requireCommon$1()(exports);\n    const { formatters } = module.exports;\n    formatters.j = function(v) {\n      try {\n        return JSON.stringify(v);\n      } catch (error) {\n        return \"[UnexpectedJSONParseError]: \" + error.message;\n      }\n    };\n  })(browser$2, browser$2.exports);\n  return browser$2.exports;\n}\nvar browserExports$2 = requireBrowser$1();\nconst debug$5 = /* @__PURE__ */ getDefaultExportFromCjs$4(browserExports$2);\nconst debugLogger$8 = debug$5(\"peertube:player:metrics\");\nconst Plugin$9 = videojs.getPlugin(\"plugin\");\nclass MetricsPlugin extends Plugin$9 {\n  constructor(player, options) {\n    super(player);\n    this.options_ = options;\n    this.downloadedBytesP2P = 0;\n    this.downloadedBytesHTTP = 0;\n    this.uploadedBytesP2P = 0;\n    this.resolutionChanges = 0;\n    this.errors = 0;\n    this.bufferStalled = 0;\n    this.p2pPeers = 0;\n    this.trackBytes();\n    this.trackResolutionChange();\n    this.trackErrors();\n    this.trackBufferStalled();\n    this.one(\"play\", () => {\n      this.player.on(\"video-change\", () => {\n        this.runMetricsIntervalOnPlay();\n      });\n    });\n    this.runMetricsIntervalOnPlay();\n  }\n  dispose() {\n    if (this.metricsInterval) clearInterval(this.metricsInterval);\n    super.dispose();\n  }\n  runMetricsIntervalOnPlay() {\n    this.downloadedBytesP2P = 0;\n    this.downloadedBytesHTTP = 0;\n    this.uploadedBytesP2P = 0;\n    this.resolutionChanges = 0;\n    this.errors = 0;\n    this.bufferStalled = 0;\n    this.lastPlayerNetworkInfo = void 0;\n    debugLogger$8(\"Will track metrics on next play\");\n    this.player.one(\"play\", () => {\n      debugLogger$8(\"Tracking metrics\");\n      this.runMetricsInterval();\n    });\n  }\n  runMetricsInterval() {\n    if (this.metricsInterval) clearInterval(this.metricsInterval);\n    if (!this.options_.metricsUrl()) return;\n    this.metricsInterval = setInterval(() => {\n      let resolution;\n      let fps;\n      if (this.player.usingPlugin(\"p2pMediaLoader\")) {\n        const level = this.player.p2pMediaLoader().getCurrentLevel();\n        if (!level) return;\n        resolution = Math.min(level.height || 0, level.width || 0);\n        const framerate = level == null ? void 0 : level.attrs[\"FRAME-RATE\"];\n        fps = framerate ? parseInt(framerate, 10) : void 0;\n      } else if (this.player.usingPlugin(\"webVideo\")) {\n        const videoFile = this.player.webVideo().getCurrentVideoFile();\n        if (!videoFile) return;\n        resolution = videoFile.resolution.id;\n        fps = videoFile.fps && videoFile.fps !== -1 ? videoFile.fps : void 0;\n      } else {\n        return;\n      }\n      const body = {\n        resolution,\n        fps,\n        playerMode: this.options_.mode(),\n        resolutionChanges: this.resolutionChanges,\n        errors: this.errors,\n        bufferStalled: this.bufferStalled,\n        downloadedBytesHTTP: this.downloadedBytesHTTP,\n        downloadedBytesP2P: this.downloadedBytesP2P,\n        uploadedBytesP2P: this.uploadedBytesP2P,\n        p2pPeers: this.p2pPeers,\n        p2pEnabled: this.p2pEnabled,\n        videoId: this.options_.videoUUID()\n      };\n      this.resolutionChanges = 0;\n      this.downloadedBytesP2P = 0;\n      this.downloadedBytesHTTP = 0;\n      this.uploadedBytesP2P = 0;\n      this.errors = 0;\n      this.bufferStalled = 0;\n      const headers = new Headers({ \"Content-type\": \"application/json; charset=UTF-8\" });\n      return fetch(this.options_.metricsUrl(), { method: \"POST\", body: JSON.stringify(body), headers }).catch((err) => logger$1.clientWarn(\"Cannot send metrics to the server.\", err));\n    }, this.options_.metricsInterval());\n  }\n  trackBytes() {\n    this.player.on(\"network-info\", (_event, data) => {\n      var _a, _b, _c, _d, _e, _f, _g, _h;\n      this.downloadedBytesHTTP += Math.max(Math.round(data.http.downloaded - (((_a = this.lastPlayerNetworkInfo) == null ? void 0 : _a.http.downloaded) || 0)), 0);\n      this.downloadedBytesP2P += Math.max(Math.round((((_b = data.p2p) == null ? void 0 : _b.downloaded) || 0) - (((_d = (_c = this.lastPlayerNetworkInfo) == null ? void 0 : _c.p2p) == null ? void 0 : _d.downloaded) || 0)), 0);\n      this.uploadedBytesP2P += Math.max(Math.round((((_e = data.p2p) == null ? void 0 : _e.uploaded) || 0) - (((_g = (_f = this.lastPlayerNetworkInfo) == null ? void 0 : _f.p2p) == null ? void 0 : _g.uploaded) || 0)), 0);\n      this.p2pPeers = (_h = data.p2p) == null ? void 0 : _h.peersP2POnly;\n      this.p2pEnabled = !!data.p2p;\n      this.lastPlayerNetworkInfo = data;\n    });\n  }\n  trackResolutionChange() {\n    this.player.on(\"resolution-change\", (_, { initResolutionChange }) => {\n      if (initResolutionChange === true) return;\n      debugLogger$8(\"Adding resolution change\");\n      this.resolutionChanges++;\n    });\n  }\n  trackErrors() {\n    this.player.on(\"error\", () => {\n      debugLogger$8(\"Adding player error\");\n      this.errors++;\n    });\n  }\n  trackBufferStalled() {\n    this.player.on(\"buffer-stalled\", () => {\n      debugLogger$8(\"Adding buffer stalled\");\n      this.bufferStalled++;\n    });\n  }\n}\nvideojs.registerPlugin(\"metrics\", MetricsPlugin);\nconst Component$a = videojs.getComponent(\"Component\");\nclass PeerTubeMobileButtons extends Component$a {\n  createEl() {\n    const container = super.createEl(\"div\", { className: \"vjs-mobile-buttons-overlay\" });\n    this.mainButton = super.createEl(\"div\", { className: \"main-button\" });\n    this.touchStartHandler = (e) => {\n      e.stopPropagation();\n      if (this.player_.paused() || this.player_.ended()) {\n        this.player_.play();\n        return;\n      }\n      this.player_.pause();\n    };\n    this.mainButton.addEventListener(\"touchstart\", this.touchStartHandler, { passive: true });\n    this.rewind = super.createEl(\"div\", { className: \"rewind-button vjs-hidden\" });\n    this.forward = super.createEl(\"div\", { className: \"forward-button vjs-hidden\" });\n    for (let i = 0; i < 3; i++) {\n      this.rewind.appendChild(super.createEl(\"span\", { className: \"icon\" }));\n      this.forward.appendChild(super.createEl(\"span\", { className: \"icon\" }));\n    }\n    this.rewindText = this.rewind.appendChild(super.createEl(\"div\", { className: \"text\" }));\n    this.forwardText = this.forward.appendChild(super.createEl(\"div\", { className: \"text\" }));\n    container.appendChild(this.rewind);\n    container.appendChild(this.mainButton);\n    container.appendChild(this.forward);\n    return container;\n  }\n  dispose() {\n    if (this.touchStartHandler) this.mainButton.removeEventListener(\"touchstart\", this.touchStartHandler);\n    super.dispose();\n  }\n  displayFastSeek(amount) {\n    if (amount === 0) {\n      this.hideRewind();\n      this.hideForward();\n      return;\n    }\n    if (amount > 0) {\n      this.hideRewind();\n      this.displayForward(amount);\n      return;\n    }\n    if (amount < 0) {\n      this.hideForward();\n      this.displayRewind(amount);\n      return;\n    }\n  }\n  hideRewind() {\n    this.rewind.classList.add(\"vjs-hidden\");\n    this.rewindText.textContent = \"\";\n  }\n  displayRewind(amount) {\n    this.rewind.classList.remove(\"vjs-hidden\");\n    this.rewindText.textContent = this.player().localize(\"{1} seconds\", [amount + \"\"]);\n  }\n  hideForward() {\n    this.forward.classList.add(\"vjs-hidden\");\n    this.forwardText.textContent = \"\";\n  }\n  displayForward(amount) {\n    this.forward.classList.remove(\"vjs-hidden\");\n    this.forwardText.textContent = this.player().localize(\"{1} seconds\", [amount + \"\"]);\n  }\n}\nvideojs.registerComponent(\"PeerTubeMobileButtons\", PeerTubeMobileButtons);\nconst debugLogger$7 = debug$5(\"peertube:player:mobile\");\nconst Plugin$8 = videojs.getPlugin(\"plugin\");\nconst _PeerTubeMobilePlugin = class _PeerTubeMobilePlugin extends Plugin$8 {\n  constructor(player, options) {\n    super(player, options);\n    this.seekAmount = 0;\n    if (videojs.browser.IS_ANDROID && screen.orientation) {\n      this.handleFullscreenRotation();\n    }\n    if (!player.controls()) return;\n    this.peerTubeMobileButtons = player.addChild(\"PeerTubeMobileButtons\", { reportTouchActivity: false });\n    if (!this.player.options_.userActions) this.player.options_.userActions = {};\n    this.player.options_.userActions.click = false;\n    this.player.options_.userActions.doubleClick = false;\n    this.onPlayHandler = () => this.initTouchStartEvents();\n    this.player.one(\"play\", this.onPlayHandler);\n    this.seekBar = this.player.getDescendant([\"controlBar\", \"progressControl\", \"seekBar\"]);\n    this.sliderActiveHandler = () => this.player.addClass(\"vjs-mobile-sliding\");\n    this.sliderInactiveHandler = () => this.player.removeClass(\"vjs-mobile-sliding\");\n    this.seekBar.on(\"slideractive\", this.sliderActiveHandler);\n    this.seekBar.on(\"sliderinactive\", this.sliderInactiveHandler);\n  }\n  dispose() {\n    var _a;\n    if (this.onPlayHandler) this.player.off(\"play\", this.onPlayHandler);\n    if (this.onFullScreenChangeHandler) this.player.off(\"fullscreenchange\", this.onFullScreenChangeHandler);\n    if (this.onTouchStartHandler) this.player.off(\"touchstart\", this.onFullScreenChangeHandler);\n    if (this.onMobileButtonTouchStartHandler) {\n      (_a = this.peerTubeMobileButtons) == null ? void 0 : _a.el().removeEventListener(\"touchstart\", this.onMobileButtonTouchStartHandler);\n    }\n    super.dispose();\n  }\n  handleFullscreenRotation() {\n    this.onFullScreenChangeHandler = () => {\n      if (!this.player.isFullscreen() || this.isPortraitVideo()) return;\n      screen.orientation.lock(\"landscape\").catch((err) => logger$1.error(\"Cannot lock screen to landscape.\", err));\n    };\n    this.player.on(\"fullscreenchange\", this.onFullScreenChangeHandler);\n  }\n  isPortraitVideo() {\n    return this.player.videoWidth() < this.player.videoHeight();\n  }\n  initTouchStartEvents() {\n    const handleTouchStart = (event, onlyDetectDoubleTap = false) => {\n      debugLogger$7(\"Handle touch start\");\n      if (this.tapTimeout) {\n        clearTimeout(this.tapTimeout);\n        this.tapTimeout = void 0;\n      }\n      if (this.doubleTapping || this.lastTapEvent && event.timeStamp - this.lastTapEvent.timeStamp < _PeerTubeMobilePlugin.DOUBLE_TAP_DELAY_MS) {\n        debugLogger$7(\"Detected double tap\");\n        this.lastTapEvent = event;\n        this.onDoubleTap(event);\n        return;\n      }\n      if (onlyDetectDoubleTap) return;\n      this.newActiveState = !this.player.userActive();\n      if (!this.player.paused() && this.newActiveState === true) {\n        this.player.addClass(\"vjs-force-inactive\");\n      }\n      this.tapTimeout = setTimeout(() => {\n        debugLogger$7(\"No double tap detected, set user active state to \" + this.newActiveState);\n        this.player.removeClass(\"vjs-force-inactive\");\n        this.player.userActive(this.newActiveState);\n      }, _PeerTubeMobilePlugin.DOUBLE_TAP_DELAY_MS);\n      this.lastTapEvent = event;\n    };\n    this.onTouchStartHandler = (event) => {\n      const onlyDetectDoubleTap = this.player.userActive();\n      handleTouchStart(event, onlyDetectDoubleTap);\n    };\n    this.player.on(\"touchstart\", this.onTouchStartHandler);\n    this.onMobileButtonTouchStartHandler = (event) => {\n      event.preventDefault();\n      event.stopPropagation();\n      handleTouchStart(event);\n    };\n    this.peerTubeMobileButtons.el().addEventListener(\"touchstart\", this.onMobileButtonTouchStartHandler, { passive: false });\n  }\n  onDoubleTap(event) {\n    const playerWidth = this.player.currentWidth();\n    const rect = this.findPlayerTarget(event.target).getBoundingClientRect();\n    const offsetX = event.targetTouches[0].pageX - rect.left;\n    debugLogger$7(\"Calculating double tap zone (player width: %d, offset X: %d)\", playerWidth, offsetX);\n    if (offsetX > 0.66 * playerWidth) {\n      if (this.seekAmount < 0) this.seekAmount = 0;\n      this.seekAmount += 10;\n      debugLogger$7(\"Will forward %d seconds\", this.seekAmount);\n    } else if (offsetX < 0.33 * playerWidth) {\n      if (this.seekAmount > 0) this.seekAmount = 0;\n      this.seekAmount -= 10;\n      debugLogger$7(\"Will rewind %d seconds\", this.seekAmount);\n    }\n    this.peerTubeMobileButtons.displayFastSeek(this.seekAmount);\n    this.scheduleSetCurrentTime();\n  }\n  findPlayerTarget(target) {\n    if (target.classList.contains(\"video-js\")) return target;\n    return this.findPlayerTarget(target.parentElement);\n  }\n  scheduleSetCurrentTime() {\n    this.player.pause();\n    this.player.addClass(\"vjs-fast-seeking\");\n    this.doubleTapping = true;\n    if (this.setCurrentTimeTimeout) clearTimeout(this.setCurrentTimeTimeout);\n    this.setCurrentTimeTimeout = setTimeout(() => {\n      let newTime = this.player.currentTime() + this.seekAmount;\n      this.seekAmount = 0;\n      newTime = Math.max(0, newTime);\n      newTime = Math.min(this.player.duration(), newTime);\n      this.player.currentTime(newTime);\n      this.seekAmount = 0;\n      this.peerTubeMobileButtons.displayFastSeek(0);\n      this.player.userActive(false);\n      this.doubleTapping = false;\n      this.player.play();\n      setTimeout(() => {\n        this.player.removeClass(\"vjs-fast-seeking\");\n        this.player.removeClass(\"vjs-force-inactive\");\n      }, 100);\n    }, _PeerTubeMobilePlugin.SET_CURRENT_TIME_DELAY);\n  }\n};\n__publicField(_PeerTubeMobilePlugin, \"DOUBLE_TAP_DELAY_MS\", 250);\n__publicField(_PeerTubeMobilePlugin, \"SET_CURRENT_TIME_DELAY\", 750);\nlet PeerTubeMobilePlugin = _PeerTubeMobilePlugin;\nvideojs.registerPlugin(\"peertubeMobile\", PeerTubeMobilePlugin);\nconst isFiniteNumber = Number.isFinite || function(value) {\n  return typeof value === \"number\" && isFinite(value);\n};\nconst isSafeInteger = Number.isSafeInteger || function(value) {\n  return typeof value === \"number\" && Math.abs(value) <= MAX_SAFE_INTEGER;\n};\nconst MAX_SAFE_INTEGER = Number.MAX_SAFE_INTEGER || 9007199254740991;\nlet ErrorTypes = /* @__PURE__ */ function(ErrorTypes2) {\n  ErrorTypes2[\"NETWORK_ERROR\"] = \"networkError\";\n  ErrorTypes2[\"MEDIA_ERROR\"] = \"mediaError\";\n  ErrorTypes2[\"KEY_SYSTEM_ERROR\"] = \"keySystemError\";\n  ErrorTypes2[\"MUX_ERROR\"] = \"muxError\";\n  ErrorTypes2[\"OTHER_ERROR\"] = \"otherError\";\n  return ErrorTypes2;\n}({});\nlet ErrorDetails = /* @__PURE__ */ function(ErrorDetails2) {\n  ErrorDetails2[\"KEY_SYSTEM_NO_KEYS\"] = \"keySystemNoKeys\";\n  ErrorDetails2[\"KEY_SYSTEM_NO_ACCESS\"] = \"keySystemNoAccess\";\n  ErrorDetails2[\"KEY_SYSTEM_NO_SESSION\"] = \"keySystemNoSession\";\n  ErrorDetails2[\"KEY_SYSTEM_NO_CONFIGURED_LICENSE\"] = \"keySystemNoConfiguredLicense\";\n  ErrorDetails2[\"KEY_SYSTEM_LICENSE_REQUEST_FAILED\"] = \"keySystemLicenseRequestFailed\";\n  ErrorDetails2[\"KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED\"] = \"keySystemServerCertificateRequestFailed\";\n  ErrorDetails2[\"KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED\"] = \"keySystemServerCertificateUpdateFailed\";\n  ErrorDetails2[\"KEY_SYSTEM_SESSION_UPDATE_FAILED\"] = \"keySystemSessionUpdateFailed\";\n  ErrorDetails2[\"KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED\"] = \"keySystemStatusOutputRestricted\";\n  ErrorDetails2[\"KEY_SYSTEM_STATUS_INTERNAL_ERROR\"] = \"keySystemStatusInternalError\";\n  ErrorDetails2[\"KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR\"] = \"keySystemDestroyMediaKeysError\";\n  ErrorDetails2[\"KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR\"] = \"keySystemDestroyCloseSessionError\";\n  ErrorDetails2[\"KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR\"] = \"keySystemDestroyRemoveSessionError\";\n  ErrorDetails2[\"MANIFEST_LOAD_ERROR\"] = \"manifestLoadError\";\n  ErrorDetails2[\"MANIFEST_LOAD_TIMEOUT\"] = \"manifestLoadTimeOut\";\n  ErrorDetails2[\"MANIFEST_PARSING_ERROR\"] = \"manifestParsingError\";\n  ErrorDetails2[\"MANIFEST_INCOMPATIBLE_CODECS_ERROR\"] = \"manifestIncompatibleCodecsError\";\n  ErrorDetails2[\"LEVEL_EMPTY_ERROR\"] = \"levelEmptyError\";\n  ErrorDetails2[\"LEVEL_LOAD_ERROR\"] = \"levelLoadError\";\n  ErrorDetails2[\"LEVEL_LOAD_TIMEOUT\"] = \"levelLoadTimeOut\";\n  ErrorDetails2[\"LEVEL_PARSING_ERROR\"] = \"levelParsingError\";\n  ErrorDetails2[\"LEVEL_SWITCH_ERROR\"] = \"levelSwitchError\";\n  ErrorDetails2[\"AUDIO_TRACK_LOAD_ERROR\"] = \"audioTrackLoadError\";\n  ErrorDetails2[\"AUDIO_TRACK_LOAD_TIMEOUT\"] = \"audioTrackLoadTimeOut\";\n  ErrorDetails2[\"SUBTITLE_LOAD_ERROR\"] = \"subtitleTrackLoadError\";\n  ErrorDetails2[\"SUBTITLE_TRACK_LOAD_TIMEOUT\"] = \"subtitleTrackLoadTimeOut\";\n  ErrorDetails2[\"FRAG_LOAD_ERROR\"] = \"fragLoadError\";\n  ErrorDetails2[\"FRAG_LOAD_TIMEOUT\"] = \"fragLoadTimeOut\";\n  ErrorDetails2[\"FRAG_DECRYPT_ERROR\"] = \"fragDecryptError\";\n  ErrorDetails2[\"FRAG_PARSING_ERROR\"] = \"fragParsingError\";\n  ErrorDetails2[\"FRAG_GAP\"] = \"fragGap\";\n  ErrorDetails2[\"REMUX_ALLOC_ERROR\"] = \"remuxAllocError\";\n  ErrorDetails2[\"KEY_LOAD_ERROR\"] = \"keyLoadError\";\n  ErrorDetails2[\"KEY_LOAD_TIMEOUT\"] = \"keyLoadTimeOut\";\n  ErrorDetails2[\"BUFFER_ADD_CODEC_ERROR\"] = \"bufferAddCodecError\";\n  ErrorDetails2[\"BUFFER_INCOMPATIBLE_CODECS_ERROR\"] = \"bufferIncompatibleCodecsError\";\n  ErrorDetails2[\"BUFFER_APPEND_ERROR\"] = \"bufferAppendError\";\n  ErrorDetails2[\"BUFFER_APPENDING_ERROR\"] = \"bufferAppendingError\";\n  ErrorDetails2[\"BUFFER_STALLED_ERROR\"] = \"bufferStalledError\";\n  ErrorDetails2[\"BUFFER_FULL_ERROR\"] = \"bufferFullError\";\n  ErrorDetails2[\"BUFFER_SEEK_OVER_HOLE\"] = \"bufferSeekOverHole\";\n  ErrorDetails2[\"BUFFER_NUDGE_ON_STALL\"] = \"bufferNudgeOnStall\";\n  ErrorDetails2[\"ASSET_LIST_LOAD_ERROR\"] = \"assetListLoadError\";\n  ErrorDetails2[\"ASSET_LIST_LOAD_TIMEOUT\"] = \"assetListLoadTimeout\";\n  ErrorDetails2[\"ASSET_LIST_PARSING_ERROR\"] = \"assetListParsingError\";\n  ErrorDetails2[\"INTERSTITIAL_ASSET_ITEM_ERROR\"] = \"interstitialAssetItemError\";\n  ErrorDetails2[\"INTERNAL_EXCEPTION\"] = \"internalException\";\n  ErrorDetails2[\"INTERNAL_ABORTED\"] = \"aborted\";\n  ErrorDetails2[\"ATTACH_MEDIA_ERROR\"] = \"attachMediaError\";\n  ErrorDetails2[\"UNKNOWN\"] = \"unknown\";\n  return ErrorDetails2;\n}({});\nlet Events = /* @__PURE__ */ function(Events2) {\n  Events2[\"MEDIA_ATTACHING\"] = \"hlsMediaAttaching\";\n  Events2[\"MEDIA_ATTACHED\"] = \"hlsMediaAttached\";\n  Events2[\"MEDIA_DETACHING\"] = \"hlsMediaDetaching\";\n  Events2[\"MEDIA_DETACHED\"] = \"hlsMediaDetached\";\n  Events2[\"MEDIA_ENDED\"] = \"hlsMediaEnded\";\n  Events2[\"STALL_RESOLVED\"] = \"hlsStallResolved\";\n  Events2[\"BUFFER_RESET\"] = \"hlsBufferReset\";\n  Events2[\"BUFFER_CODECS\"] = \"hlsBufferCodecs\";\n  Events2[\"BUFFER_CREATED\"] = \"hlsBufferCreated\";\n  Events2[\"BUFFER_APPENDING\"] = \"hlsBufferAppending\";\n  Events2[\"BUFFER_APPENDED\"] = \"hlsBufferAppended\";\n  Events2[\"BUFFER_EOS\"] = \"hlsBufferEos\";\n  Events2[\"BUFFERED_TO_END\"] = \"hlsBufferedToEnd\";\n  Events2[\"BUFFER_FLUSHING\"] = \"hlsBufferFlushing\";\n  Events2[\"BUFFER_FLUSHED\"] = \"hlsBufferFlushed\";\n  Events2[\"MANIFEST_LOADING\"] = \"hlsManifestLoading\";\n  Events2[\"MANIFEST_LOADED\"] = \"hlsManifestLoaded\";\n  Events2[\"MANIFEST_PARSED\"] = \"hlsManifestParsed\";\n  Events2[\"LEVEL_SWITCHING\"] = \"hlsLevelSwitching\";\n  Events2[\"LEVEL_SWITCHED\"] = \"hlsLevelSwitched\";\n  Events2[\"LEVEL_LOADING\"] = \"hlsLevelLoading\";\n  Events2[\"LEVEL_LOADED\"] = \"hlsLevelLoaded\";\n  Events2[\"LEVEL_UPDATED\"] = \"hlsLevelUpdated\";\n  Events2[\"LEVEL_PTS_UPDATED\"] = \"hlsLevelPtsUpdated\";\n  Events2[\"LEVELS_UPDATED\"] = \"hlsLevelsUpdated\";\n  Events2[\"AUDIO_TRACKS_UPDATED\"] = \"hlsAudioTracksUpdated\";\n  Events2[\"AUDIO_TRACK_SWITCHING\"] = \"hlsAudioTrackSwitching\";\n  Events2[\"AUDIO_TRACK_SWITCHED\"] = \"hlsAudioTrackSwitched\";\n  Events2[\"AUDIO_TRACK_LOADING\"] = \"hlsAudioTrackLoading\";\n  Events2[\"AUDIO_TRACK_LOADED\"] = \"hlsAudioTrackLoaded\";\n  Events2[\"AUDIO_TRACK_UPDATED\"] = \"hlsAudioTrackUpdated\";\n  Events2[\"SUBTITLE_TRACKS_UPDATED\"] = \"hlsSubtitleTracksUpdated\";\n  Events2[\"SUBTITLE_TRACKS_CLEARED\"] = \"hlsSubtitleTracksCleared\";\n  Events2[\"SUBTITLE_TRACK_SWITCH\"] = \"hlsSubtitleTrackSwitch\";\n  Events2[\"SUBTITLE_TRACK_LOADING\"] = \"hlsSubtitleTrackLoading\";\n  Events2[\"SUBTITLE_TRACK_LOADED\"] = \"hlsSubtitleTrackLoaded\";\n  Events2[\"SUBTITLE_TRACK_UPDATED\"] = \"hlsSubtitleTrackUpdated\";\n  Events2[\"SUBTITLE_FRAG_PROCESSED\"] = \"hlsSubtitleFragProcessed\";\n  Events2[\"CUES_PARSED\"] = \"hlsCuesParsed\";\n  Events2[\"NON_NATIVE_TEXT_TRACKS_FOUND\"] = \"hlsNonNativeTextTracksFound\";\n  Events2[\"INIT_PTS_FOUND\"] = \"hlsInitPtsFound\";\n  Events2[\"FRAG_LOADING\"] = \"hlsFragLoading\";\n  Events2[\"FRAG_LOAD_EMERGENCY_ABORTED\"] = \"hlsFragLoadEmergencyAborted\";\n  Events2[\"FRAG_LOADED\"] = \"hlsFragLoaded\";\n  Events2[\"FRAG_DECRYPTED\"] = \"hlsFragDecrypted\";\n  Events2[\"FRAG_PARSING_INIT_SEGMENT\"] = \"hlsFragParsingInitSegment\";\n  Events2[\"FRAG_PARSING_USERDATA\"] = \"hlsFragParsingUserdata\";\n  Events2[\"FRAG_PARSING_METADATA\"] = \"hlsFragParsingMetadata\";\n  Events2[\"FRAG_PARSED\"] = \"hlsFragParsed\";\n  Events2[\"FRAG_BUFFERED\"] = \"hlsFragBuffered\";\n  Events2[\"FRAG_CHANGED\"] = \"hlsFragChanged\";\n  Events2[\"FPS_DROP\"] = \"hlsFpsDrop\";\n  Events2[\"FPS_DROP_LEVEL_CAPPING\"] = \"hlsFpsDropLevelCapping\";\n  Events2[\"MAX_AUTO_LEVEL_UPDATED\"] = \"hlsMaxAutoLevelUpdated\";\n  Events2[\"ERROR\"] = \"hlsError\";\n  Events2[\"DESTROYING\"] = \"hlsDestroying\";\n  Events2[\"KEY_LOADING\"] = \"hlsKeyLoading\";\n  Events2[\"KEY_LOADED\"] = \"hlsKeyLoaded\";\n  Events2[\"LIVE_BACK_BUFFER_REACHED\"] = \"hlsLiveBackBufferReached\";\n  Events2[\"BACK_BUFFER_REACHED\"] = \"hlsBackBufferReached\";\n  Events2[\"STEERING_MANIFEST_LOADED\"] = \"hlsSteeringManifestLoaded\";\n  Events2[\"ASSET_LIST_LOADING\"] = \"hlsAssetListLoading\";\n  Events2[\"ASSET_LIST_LOADED\"] = \"hlsAssetListLoaded\";\n  Events2[\"INTERSTITIALS_UPDATED\"] = \"hlsInterstitialsUpdated\";\n  Events2[\"INTERSTITIALS_BUFFERED_TO_BOUNDARY\"] = \"hlsInterstitialsBufferedToBoundary\";\n  Events2[\"INTERSTITIAL_ASSET_PLAYER_CREATED\"] = \"hlsInterstitialAssetPlayerCreated\";\n  Events2[\"INTERSTITIAL_STARTED\"] = \"hlsInterstitialStarted\";\n  Events2[\"INTERSTITIAL_ASSET_STARTED\"] = \"hlsInterstitialAssetStarted\";\n  Events2[\"INTERSTITIAL_ASSET_ENDED\"] = \"hlsInterstitialAssetEnded\";\n  Events2[\"INTERSTITIAL_ASSET_ERROR\"] = \"hlsInterstitialAssetError\";\n  Events2[\"INTERSTITIAL_ENDED\"] = \"hlsInterstitialEnded\";\n  Events2[\"INTERSTITIALS_PRIMARY_RESUMED\"] = \"hlsInterstitialsPrimaryResumed\";\n  Events2[\"PLAYOUT_LIMIT_REACHED\"] = \"hlsPlayoutLimitReached\";\n  Events2[\"EVENT_CUE_ENTER\"] = \"hlsEventCueEnter\";\n  return Events2;\n}({});\nvar PlaylistContextType = {\n  MANIFEST: \"manifest\",\n  LEVEL: \"level\",\n  AUDIO_TRACK: \"audioTrack\",\n  SUBTITLE_TRACK: \"subtitleTrack\"\n};\nvar PlaylistLevelType = {\n  MAIN: \"main\",\n  AUDIO: \"audio\",\n  SUBTITLE: \"subtitle\"\n};\nclass EWMA {\n  //  About half of the estimated value will be from the last |halfLife| samples by weight.\n  constructor(halfLife, estimate = 0, weight = 0) {\n    this.halfLife = void 0;\n    this.alpha_ = void 0;\n    this.estimate_ = void 0;\n    this.totalWeight_ = void 0;\n    this.halfLife = halfLife;\n    this.alpha_ = halfLife ? Math.exp(Math.log(0.5) / halfLife) : 0;\n    this.estimate_ = estimate;\n    this.totalWeight_ = weight;\n  }\n  sample(weight, value) {\n    const adjAlpha = Math.pow(this.alpha_, weight);\n    this.estimate_ = value * (1 - adjAlpha) + adjAlpha * this.estimate_;\n    this.totalWeight_ += weight;\n  }\n  getTotalWeight() {\n    return this.totalWeight_;\n  }\n  getEstimate() {\n    if (this.alpha_) {\n      const zeroFactor = 1 - Math.pow(this.alpha_, this.totalWeight_);\n      if (zeroFactor) {\n        return this.estimate_ / zeroFactor;\n      }\n    }\n    return this.estimate_;\n  }\n}\nclass EwmaBandWidthEstimator {\n  constructor(slow, fast, defaultEstimate, defaultTTFB = 100) {\n    this.defaultEstimate_ = void 0;\n    this.minWeight_ = void 0;\n    this.minDelayMs_ = void 0;\n    this.slow_ = void 0;\n    this.fast_ = void 0;\n    this.defaultTTFB_ = void 0;\n    this.ttfb_ = void 0;\n    this.defaultEstimate_ = defaultEstimate;\n    this.minWeight_ = 1e-3;\n    this.minDelayMs_ = 50;\n    this.slow_ = new EWMA(slow);\n    this.fast_ = new EWMA(fast);\n    this.defaultTTFB_ = defaultTTFB;\n    this.ttfb_ = new EWMA(slow);\n  }\n  update(slow, fast) {\n    const {\n      slow_,\n      fast_,\n      ttfb_\n    } = this;\n    if (slow_.halfLife !== slow) {\n      this.slow_ = new EWMA(slow, slow_.getEstimate(), slow_.getTotalWeight());\n    }\n    if (fast_.halfLife !== fast) {\n      this.fast_ = new EWMA(fast, fast_.getEstimate(), fast_.getTotalWeight());\n    }\n    if (ttfb_.halfLife !== slow) {\n      this.ttfb_ = new EWMA(slow, ttfb_.getEstimate(), ttfb_.getTotalWeight());\n    }\n  }\n  sample(durationMs, numBytes) {\n    durationMs = Math.max(durationMs, this.minDelayMs_);\n    const numBits = 8 * numBytes;\n    const durationS = durationMs / 1e3;\n    const bandwidthInBps = numBits / durationS;\n    this.fast_.sample(durationS, bandwidthInBps);\n    this.slow_.sample(durationS, bandwidthInBps);\n  }\n  sampleTTFB(ttfb) {\n    const seconds = ttfb / 1e3;\n    const weight = Math.sqrt(2) * Math.exp(-Math.pow(seconds, 2) / 2);\n    this.ttfb_.sample(weight, Math.max(ttfb, 5));\n  }\n  canEstimate() {\n    return this.fast_.getTotalWeight() >= this.minWeight_;\n  }\n  getEstimate() {\n    if (this.canEstimate()) {\n      return Math.min(this.fast_.getEstimate(), this.slow_.getEstimate());\n    } else {\n      return this.defaultEstimate_;\n    }\n  }\n  getEstimateTTFB() {\n    if (this.ttfb_.getTotalWeight() >= this.minWeight_) {\n      return this.ttfb_.getEstimate();\n    } else {\n      return this.defaultTTFB_;\n    }\n  }\n  get defaultEstimate() {\n    return this.defaultEstimate_;\n  }\n  destroy() {\n  }\n}\nfunction _defineProperty(e, r, t) {\n  return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {\n    value: t,\n    enumerable: true,\n    configurable: true,\n    writable: true\n  }) : e[r] = t, e;\n}\nfunction _extends() {\n  return _extends = Object.assign ? Object.assign.bind() : function(n) {\n    for (var e = 1; e < arguments.length; e++) {\n      var t = arguments[e];\n      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);\n    }\n    return n;\n  }, _extends.apply(null, arguments);\n}\nfunction ownKeys(e, r) {\n  var t = Object.keys(e);\n  if (Object.getOwnPropertySymbols) {\n    var o = Object.getOwnPropertySymbols(e);\n    r && (o = o.filter(function(r2) {\n      return Object.getOwnPropertyDescriptor(e, r2).enumerable;\n    })), t.push.apply(t, o);\n  }\n  return t;\n}\nfunction _objectSpread2(e) {\n  for (var r = 1; r < arguments.length; r++) {\n    var t = null != arguments[r] ? arguments[r] : {};\n    r % 2 ? ownKeys(Object(t), true).forEach(function(r2) {\n      _defineProperty(e, r2, t[r2]);\n    }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function(r2) {\n      Object.defineProperty(e, r2, Object.getOwnPropertyDescriptor(t, r2));\n    });\n  }\n  return e;\n}\nfunction _toPrimitive(t, r) {\n  if (\"object\" != typeof t || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r);\n    if (\"object\" != typeof i) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nfunction _toPropertyKey(t) {\n  var i = _toPrimitive(t, \"string\");\n  return \"symbol\" == typeof i ? i : i + \"\";\n}\nclass Logger2 {\n  constructor(label, logger2) {\n    this.trace = void 0;\n    this.debug = void 0;\n    this.log = void 0;\n    this.warn = void 0;\n    this.info = void 0;\n    this.error = void 0;\n    const lb = `[${label}]:`;\n    this.trace = noop$2;\n    this.debug = logger2.debug.bind(null, lb);\n    this.log = logger2.log.bind(null, lb);\n    this.warn = logger2.warn.bind(null, lb);\n    this.info = logger2.info.bind(null, lb);\n    this.error = logger2.error.bind(null, lb);\n  }\n}\nconst noop$2 = function noop() {\n};\nconst fakeLogger = {\n  trace: noop$2,\n  debug: noop$2,\n  log: noop$2,\n  warn: noop$2,\n  info: noop$2,\n  error: noop$2\n};\nfunction createLogger() {\n  return _extends({}, fakeLogger);\n}\nfunction consolePrintFn(type, id) {\n  const func = self.console[type];\n  return func ? func.bind(self.console, `${id ? \"[\" + id + \"] \" : \"\"}[${type}] >`) : noop$2;\n}\nfunction getLoggerFn(key, debugConfig, id) {\n  return debugConfig[key] ? debugConfig[key].bind(debugConfig) : consolePrintFn(key, id);\n}\nconst exportedLogger = createLogger();\nfunction enableLogs(debugConfig, context, id) {\n  const newLogger = createLogger();\n  if (typeof console === \"object\" && debugConfig === true || typeof debugConfig === \"object\") {\n    const keys = [\n      // Remove out from list here to hard-disable a log-level\n      // 'trace',\n      \"debug\",\n      \"log\",\n      \"info\",\n      \"warn\",\n      \"error\"\n    ];\n    keys.forEach((key) => {\n      newLogger[key] = getLoggerFn(key, debugConfig, id);\n    });\n    try {\n      newLogger.log(`Debug logs enabled for \"${context}\" in hls.js version ${\"1.6.7\"}`);\n    } catch (e) {\n      return createLogger();\n    }\n    keys.forEach((key) => {\n      exportedLogger[key] = getLoggerFn(key, debugConfig);\n    });\n  } else {\n    _extends(exportedLogger, newLogger);\n  }\n  return newLogger;\n}\nconst logger = exportedLogger;\nfunction getMediaSource(preferManagedMediaSource = true) {\n  if (typeof self === \"undefined\") return void 0;\n  const mms = (preferManagedMediaSource || !self.MediaSource) && self.ManagedMediaSource;\n  return mms || self.MediaSource || self.WebKitMediaSource;\n}\nfunction isManagedMediaSource(source) {\n  return typeof self !== \"undefined\" && source === self.ManagedMediaSource;\n}\nfunction isCompatibleTrackChange(currentTracks, requiredTracks) {\n  const trackNames = Object.keys(currentTracks);\n  const requiredTrackNames = Object.keys(requiredTracks);\n  const trackCount = trackNames.length;\n  const requiredTrackCount = requiredTrackNames.length;\n  return !trackCount || !requiredTrackCount || trackCount === requiredTrackCount && !trackNames.some((name) => requiredTrackNames.indexOf(name) === -1);\n}\nfunction utf8ArrayToStr(array, exitOnNull = false) {\n  if (typeof TextDecoder !== \"undefined\") {\n    const decoder2 = new TextDecoder(\"utf-8\");\n    const decoded = decoder2.decode(array);\n    if (exitOnNull) {\n      const idx = decoded.indexOf(\"\\0\");\n      return idx !== -1 ? decoded.substring(0, idx) : decoded;\n    }\n    return decoded.replace(/\\0/g, \"\");\n  }\n  const len = array.length;\n  let c;\n  let char2;\n  let char3;\n  let out = \"\";\n  let i = 0;\n  while (i < len) {\n    c = array[i++];\n    if (c === 0 && exitOnNull) {\n      return out;\n    } else if (c === 0 || c === 3) {\n      continue;\n    }\n    switch (c >> 4) {\n      case 0:\n      case 1:\n      case 2:\n      case 3:\n      case 4:\n      case 5:\n      case 6:\n      case 7:\n        out += String.fromCharCode(c);\n        break;\n      case 12:\n      case 13:\n        char2 = array[i++];\n        out += String.fromCharCode((c & 31) << 6 | char2 & 63);\n        break;\n      case 14:\n        char2 = array[i++];\n        char3 = array[i++];\n        out += String.fromCharCode((c & 15) << 12 | (char2 & 63) << 6 | (char3 & 63) << 0);\n        break;\n    }\n  }\n  return out;\n}\nconst Hex = {\n  hexDump: function(array) {\n    let str = \"\";\n    for (let i = 0; i < array.length; i++) {\n      let h = array[i].toString(16);\n      if (h.length < 2) {\n        h = \"0\" + h;\n      }\n      str += h;\n    }\n    return str;\n  }\n};\nfunction hexToArrayBuffer(str) {\n  return Uint8Array.from(str.replace(/^0x/, \"\").replace(/([\\da-fA-F]{2}) ?/g, \"0x$1 \").replace(/ +$/, \"\").split(\" \")).buffer;\n}\nfunction getDefaultExportFromCjs$2(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, \"default\") ? x[\"default\"] : x;\n}\nvar urlToolkit = { exports: {} };\nvar hasRequiredUrlToolkit;\nfunction requireUrlToolkit() {\n  if (hasRequiredUrlToolkit) return urlToolkit.exports;\n  hasRequiredUrlToolkit = 1;\n  (function(module, exports) {\n    (function(root) {\n      var URL_REGEX = /^(?=((?:[a-zA-Z0-9+\\-.]+:)?))\\1(?=((?:\\/\\/[^\\/?#]*)?))\\2(?=((?:(?:[^?#\\/]*\\/)*[^;?#\\/]*)?))\\3((?:;[^?#]*)?)(\\?[^#]*)?(#[^]*)?$/;\n      var FIRST_SEGMENT_REGEX = /^(?=([^\\/?#]*))\\1([^]*)$/;\n      var SLASH_DOT_REGEX = /(?:\\/|^)\\.(?=\\/)/g;\n      var SLASH_DOT_DOT_REGEX = /(?:\\/|^)\\.\\.\\/(?!\\.\\.\\/)[^\\/]*(?=\\/)/g;\n      var URLToolkit = {\n        // If opts.alwaysNormalize is true then the path will always be normalized even when it starts with / or //\n        // E.g\n        // With opts.alwaysNormalize = false (default, spec compliant)\n        // http://a.com/b/cd + /e/f/../g => http://a.com/e/f/../g\n        // With opts.alwaysNormalize = true (not spec compliant)\n        // http://a.com/b/cd + /e/f/../g => http://a.com/e/g\n        buildAbsoluteURL: function(baseURL, relativeURL, opts) {\n          opts = opts || {};\n          baseURL = baseURL.trim();\n          relativeURL = relativeURL.trim();\n          if (!relativeURL) {\n            if (!opts.alwaysNormalize) {\n              return baseURL;\n            }\n            var basePartsForNormalise = URLToolkit.parseURL(baseURL);\n            if (!basePartsForNormalise) {\n              throw new Error(\"Error trying to parse base URL.\");\n            }\n            basePartsForNormalise.path = URLToolkit.normalizePath(\n              basePartsForNormalise.path\n            );\n            return URLToolkit.buildURLFromParts(basePartsForNormalise);\n          }\n          var relativeParts = URLToolkit.parseURL(relativeURL);\n          if (!relativeParts) {\n            throw new Error(\"Error trying to parse relative URL.\");\n          }\n          if (relativeParts.scheme) {\n            if (!opts.alwaysNormalize) {\n              return relativeURL;\n            }\n            relativeParts.path = URLToolkit.normalizePath(relativeParts.path);\n            return URLToolkit.buildURLFromParts(relativeParts);\n          }\n          var baseParts = URLToolkit.parseURL(baseURL);\n          if (!baseParts) {\n            throw new Error(\"Error trying to parse base URL.\");\n          }\n          if (!baseParts.netLoc && baseParts.path && baseParts.path[0] !== \"/\") {\n            var pathParts = FIRST_SEGMENT_REGEX.exec(baseParts.path);\n            baseParts.netLoc = pathParts[1];\n            baseParts.path = pathParts[2];\n          }\n          if (baseParts.netLoc && !baseParts.path) {\n            baseParts.path = \"/\";\n          }\n          var builtParts = {\n            // 2c) Otherwise, the embedded URL inherits the scheme of\n            // the base URL.\n            scheme: baseParts.scheme,\n            netLoc: relativeParts.netLoc,\n            path: null,\n            params: relativeParts.params,\n            query: relativeParts.query,\n            fragment: relativeParts.fragment\n          };\n          if (!relativeParts.netLoc) {\n            builtParts.netLoc = baseParts.netLoc;\n            if (relativeParts.path[0] !== \"/\") {\n              if (!relativeParts.path) {\n                builtParts.path = baseParts.path;\n                if (!relativeParts.params) {\n                  builtParts.params = baseParts.params;\n                  if (!relativeParts.query) {\n                    builtParts.query = baseParts.query;\n                  }\n                }\n              } else {\n                var baseURLPath = baseParts.path;\n                var newPath = baseURLPath.substring(0, baseURLPath.lastIndexOf(\"/\") + 1) + relativeParts.path;\n                builtParts.path = URLToolkit.normalizePath(newPath);\n              }\n            }\n          }\n          if (builtParts.path === null) {\n            builtParts.path = opts.alwaysNormalize ? URLToolkit.normalizePath(relativeParts.path) : relativeParts.path;\n          }\n          return URLToolkit.buildURLFromParts(builtParts);\n        },\n        parseURL: function(url) {\n          var parts = URL_REGEX.exec(url);\n          if (!parts) {\n            return null;\n          }\n          return {\n            scheme: parts[1] || \"\",\n            netLoc: parts[2] || \"\",\n            path: parts[3] || \"\",\n            params: parts[4] || \"\",\n            query: parts[5] || \"\",\n            fragment: parts[6] || \"\"\n          };\n        },\n        normalizePath: function(path) {\n          path = path.split(\"\").reverse().join(\"\").replace(SLASH_DOT_REGEX, \"\");\n          while (path.length !== (path = path.replace(SLASH_DOT_DOT_REGEX, \"\")).length) {\n          }\n          return path.split(\"\").reverse().join(\"\");\n        },\n        buildURLFromParts: function(parts) {\n          return parts.scheme + parts.netLoc + parts.path + parts.params + parts.query + parts.fragment;\n        }\n      };\n      module.exports = URLToolkit;\n    })();\n  })(urlToolkit);\n  return urlToolkit.exports;\n}\nvar urlToolkitExports = requireUrlToolkit();\nclass LoadStats {\n  constructor() {\n    this.aborted = false;\n    this.loaded = 0;\n    this.retry = 0;\n    this.total = 0;\n    this.chunkCount = 0;\n    this.bwEstimate = 0;\n    this.loading = {\n      start: 0,\n      first: 0,\n      end: 0\n    };\n    this.parsing = {\n      start: 0,\n      end: 0\n    };\n    this.buffering = {\n      start: 0,\n      first: 0,\n      end: 0\n    };\n  }\n}\nvar ElementaryStreamTypes = {\n  AUDIO: \"audio\",\n  VIDEO: \"video\",\n  AUDIOVIDEO: \"audiovideo\"\n};\nclass BaseSegment {\n  constructor(base) {\n    this._byteRange = null;\n    this._url = null;\n    this._stats = null;\n    this._streams = null;\n    this.base = void 0;\n    this.relurl = void 0;\n    if (typeof base === \"string\") {\n      base = {\n        url: base\n      };\n    }\n    this.base = base;\n    makeEnumerable(this, \"stats\");\n  }\n  // setByteRange converts a EXT-X-BYTERANGE attribute into a two element array\n  setByteRange(value, previous) {\n    const params = value.split(\"@\", 2);\n    let start;\n    if (params.length === 1) {\n      start = (previous == null ? void 0 : previous.byteRangeEndOffset) || 0;\n    } else {\n      start = parseInt(params[1]);\n    }\n    this._byteRange = [start, parseInt(params[0]) + start];\n  }\n  get baseurl() {\n    return this.base.url;\n  }\n  get byteRange() {\n    if (this._byteRange === null) {\n      return [];\n    }\n    return this._byteRange;\n  }\n  get byteRangeStartOffset() {\n    return this.byteRange[0];\n  }\n  get byteRangeEndOffset() {\n    return this.byteRange[1];\n  }\n  get elementaryStreams() {\n    if (this._streams === null) {\n      this._streams = {\n        [ElementaryStreamTypes.AUDIO]: null,\n        [ElementaryStreamTypes.VIDEO]: null,\n        [ElementaryStreamTypes.AUDIOVIDEO]: null\n      };\n    }\n    return this._streams;\n  }\n  set elementaryStreams(value) {\n    this._streams = value;\n  }\n  get hasStats() {\n    return this._stats !== null;\n  }\n  get hasStreams() {\n    return this._streams !== null;\n  }\n  get stats() {\n    if (this._stats === null) {\n      this._stats = new LoadStats();\n    }\n    return this._stats;\n  }\n  set stats(value) {\n    this._stats = value;\n  }\n  get url() {\n    if (!this._url && this.baseurl && this.relurl) {\n      this._url = urlToolkitExports.buildAbsoluteURL(this.baseurl, this.relurl, {\n        alwaysNormalize: true\n      });\n    }\n    return this._url || \"\";\n  }\n  set url(value) {\n    this._url = value;\n  }\n  clearElementaryStreamInfo() {\n    const {\n      elementaryStreams\n    } = this;\n    elementaryStreams[ElementaryStreamTypes.AUDIO] = null;\n    elementaryStreams[ElementaryStreamTypes.VIDEO] = null;\n    elementaryStreams[ElementaryStreamTypes.AUDIOVIDEO] = null;\n  }\n}\nfunction isMediaFragment(frag) {\n  return frag.sn !== \"initSegment\";\n}\nclass Fragment extends BaseSegment {\n  constructor(type, base) {\n    super(base);\n    this._decryptdata = null;\n    this._programDateTime = null;\n    this._ref = null;\n    this._bitrate = void 0;\n    this.rawProgramDateTime = null;\n    this.tagList = [];\n    this.duration = 0;\n    this.sn = 0;\n    this.levelkeys = void 0;\n    this.type = void 0;\n    this.loader = null;\n    this.keyLoader = null;\n    this.level = -1;\n    this.cc = 0;\n    this.startPTS = void 0;\n    this.endPTS = void 0;\n    this.startDTS = void 0;\n    this.endDTS = void 0;\n    this.start = 0;\n    this.playlistOffset = 0;\n    this.deltaPTS = void 0;\n    this.maxStartPTS = void 0;\n    this.minEndPTS = void 0;\n    this.data = void 0;\n    this.bitrateTest = false;\n    this.title = null;\n    this.initSegment = null;\n    this.endList = void 0;\n    this.gap = void 0;\n    this.urlId = 0;\n    this.type = type;\n  }\n  get byteLength() {\n    if (this.hasStats) {\n      const total = this.stats.total;\n      if (total) {\n        return total;\n      }\n    }\n    if (this.byteRange) {\n      const start = this.byteRange[0];\n      const end = this.byteRange[1];\n      if (isFiniteNumber(start) && isFiniteNumber(end)) {\n        return end - start;\n      }\n    }\n    return null;\n  }\n  get bitrate() {\n    if (this.byteLength) {\n      return this.byteLength * 8 / this.duration;\n    }\n    if (this._bitrate) {\n      return this._bitrate;\n    }\n    return null;\n  }\n  set bitrate(value) {\n    this._bitrate = value;\n  }\n  get decryptdata() {\n    const {\n      levelkeys\n    } = this;\n    if (!levelkeys && !this._decryptdata) {\n      return null;\n    }\n    if (!this._decryptdata && this.levelkeys && !this.levelkeys.NONE) {\n      const key = this.levelkeys.identity;\n      if (key) {\n        this._decryptdata = key.getDecryptData(this.sn);\n      } else {\n        const keyFormats = Object.keys(this.levelkeys);\n        if (keyFormats.length === 1) {\n          return this._decryptdata = this.levelkeys[keyFormats[0]].getDecryptData(this.sn);\n        }\n      }\n    }\n    return this._decryptdata;\n  }\n  get end() {\n    return this.start + this.duration;\n  }\n  get endProgramDateTime() {\n    if (this.programDateTime === null) {\n      return null;\n    }\n    const duration = !isFiniteNumber(this.duration) ? 0 : this.duration;\n    return this.programDateTime + duration * 1e3;\n  }\n  get encrypted() {\n    var _this$_decryptdata;\n    if ((_this$_decryptdata = this._decryptdata) != null && _this$_decryptdata.encrypted) {\n      return true;\n    } else if (this.levelkeys) {\n      const keyFormats = Object.keys(this.levelkeys);\n      const len = keyFormats.length;\n      if (len > 1 || len === 1 && this.levelkeys[keyFormats[0]].encrypted) {\n        return true;\n      }\n    }\n    return false;\n  }\n  get programDateTime() {\n    if (this._programDateTime === null && this.rawProgramDateTime) {\n      this.programDateTime = Date.parse(this.rawProgramDateTime);\n    }\n    return this._programDateTime;\n  }\n  set programDateTime(value) {\n    if (!isFiniteNumber(value)) {\n      this._programDateTime = this.rawProgramDateTime = null;\n      return;\n    }\n    this._programDateTime = value;\n  }\n  get ref() {\n    if (!isMediaFragment(this)) {\n      return null;\n    }\n    if (!this._ref) {\n      this._ref = {\n        base: this.base,\n        start: this.start,\n        duration: this.duration,\n        sn: this.sn,\n        programDateTime: this.programDateTime\n      };\n    }\n    return this._ref;\n  }\n  addStart(value) {\n    this.setStart(this.start + value);\n  }\n  setStart(value) {\n    this.start = value;\n    if (this._ref) {\n      this._ref.start = value;\n    }\n  }\n  setDuration(value) {\n    this.duration = value;\n    if (this._ref) {\n      this._ref.duration = value;\n    }\n  }\n  setKeyFormat(keyFormat) {\n    if (this.levelkeys) {\n      const key = this.levelkeys[keyFormat];\n      if (key && !this._decryptdata) {\n        this._decryptdata = key.getDecryptData(this.sn);\n      }\n    }\n  }\n  abortRequests() {\n    var _this$loader, _this$keyLoader;\n    (_this$loader = this.loader) == null ? void 0 : _this$loader.abort();\n    (_this$keyLoader = this.keyLoader) == null ? void 0 : _this$keyLoader.abort();\n  }\n  setElementaryStreamInfo(type, startPTS, endPTS, startDTS, endDTS, partial = false) {\n    const {\n      elementaryStreams\n    } = this;\n    const info = elementaryStreams[type];\n    if (!info) {\n      elementaryStreams[type] = {\n        startPTS,\n        endPTS,\n        startDTS,\n        endDTS,\n        partial\n      };\n      return;\n    }\n    info.startPTS = Math.min(info.startPTS, startPTS);\n    info.endPTS = Math.max(info.endPTS, endPTS);\n    info.startDTS = Math.min(info.startDTS, startDTS);\n    info.endDTS = Math.max(info.endDTS, endDTS);\n  }\n}\nclass Part extends BaseSegment {\n  constructor(partAttrs, frag, base, index, previous) {\n    super(base);\n    this.fragOffset = 0;\n    this.duration = 0;\n    this.gap = false;\n    this.independent = false;\n    this.relurl = void 0;\n    this.fragment = void 0;\n    this.index = void 0;\n    this.duration = partAttrs.decimalFloatingPoint(\"DURATION\");\n    this.gap = partAttrs.bool(\"GAP\");\n    this.independent = partAttrs.bool(\"INDEPENDENT\");\n    this.relurl = partAttrs.enumeratedString(\"URI\");\n    this.fragment = frag;\n    this.index = index;\n    const byteRange = partAttrs.enumeratedString(\"BYTERANGE\");\n    if (byteRange) {\n      this.setByteRange(byteRange, previous);\n    }\n    if (previous) {\n      this.fragOffset = previous.fragOffset + previous.duration;\n    }\n  }\n  get start() {\n    return this.fragment.start + this.fragOffset;\n  }\n  get end() {\n    return this.start + this.duration;\n  }\n  get loaded() {\n    const {\n      elementaryStreams\n    } = this;\n    return !!(elementaryStreams.audio || elementaryStreams.video || elementaryStreams.audiovideo);\n  }\n}\nfunction getOwnPropertyDescriptorFromPrototypeChain(object, property) {\n  const prototype = Object.getPrototypeOf(object);\n  if (prototype) {\n    const propertyDescriptor = Object.getOwnPropertyDescriptor(prototype, property);\n    if (propertyDescriptor) {\n      return propertyDescriptor;\n    }\n    return getOwnPropertyDescriptorFromPrototypeChain(prototype, property);\n  }\n}\nfunction makeEnumerable(object, property) {\n  const d = getOwnPropertyDescriptorFromPrototypeChain(object, property);\n  if (d) {\n    d.enumerable = true;\n    Object.defineProperty(object, property, d);\n  }\n}\nconst UINT32_MAX$1 = Math.pow(2, 32) - 1;\nconst push = [].push;\nconst RemuxerTrackIdConfig = {\n  video: 1,\n  audio: 2,\n  id3: 3,\n  text: 4\n};\nfunction bin2str(data) {\n  return String.fromCharCode.apply(null, data);\n}\nfunction readUint16(buffer2, offset) {\n  const val = buffer2[offset] << 8 | buffer2[offset + 1];\n  return val < 0 ? 65536 + val : val;\n}\nfunction readUint32(buffer2, offset) {\n  const val = readSint32(buffer2, offset);\n  return val < 0 ? 4294967296 + val : val;\n}\nfunction readUint64(buffer2, offset) {\n  let result = readUint32(buffer2, offset);\n  result *= Math.pow(2, 32);\n  result += readUint32(buffer2, offset + 4);\n  return result;\n}\nfunction readSint32(buffer2, offset) {\n  return buffer2[offset] << 24 | buffer2[offset + 1] << 16 | buffer2[offset + 2] << 8 | buffer2[offset + 3];\n}\nfunction hasMoofData(data) {\n  const end = data.byteLength;\n  for (let i = 0; i < end; ) {\n    const size = readUint32(data, i);\n    if (size > 8 && data[i + 4] === 109 && data[i + 5] === 111 && data[i + 6] === 111 && data[i + 7] === 102) {\n      return true;\n    }\n    i = size > 1 ? i + size : end;\n  }\n  return false;\n}\nfunction findBox(data, path) {\n  const results = [];\n  if (!path.length) {\n    return results;\n  }\n  const end = data.byteLength;\n  for (let i = 0; i < end; ) {\n    const size = readUint32(data, i);\n    const type = bin2str(data.subarray(i + 4, i + 8));\n    const endbox = size > 1 ? i + size : end;\n    if (type === path[0]) {\n      if (path.length === 1) {\n        results.push(data.subarray(i + 8, endbox));\n      } else {\n        const subresults = findBox(data.subarray(i + 8, endbox), path.slice(1));\n        if (subresults.length) {\n          push.apply(results, subresults);\n        }\n      }\n    }\n    i = endbox;\n  }\n  return results;\n}\nfunction parseSegmentIndex(sidx) {\n  const references = [];\n  const version2 = sidx[0];\n  let index = 8;\n  const timescale = readUint32(sidx, index);\n  index += 4;\n  let earliestPresentationTime = 0;\n  let firstOffset = 0;\n  if (version2 === 0) {\n    earliestPresentationTime = readUint32(sidx, index);\n    firstOffset = readUint32(sidx, index + 4);\n    index += 8;\n  } else {\n    earliestPresentationTime = readUint64(sidx, index);\n    firstOffset = readUint64(sidx, index + 8);\n    index += 16;\n  }\n  index += 2;\n  let startByte = sidx.length + firstOffset;\n  const referencesCount = readUint16(sidx, index);\n  index += 2;\n  for (let i = 0; i < referencesCount; i++) {\n    let referenceIndex = index;\n    const referenceInfo = readUint32(sidx, referenceIndex);\n    referenceIndex += 4;\n    const referenceSize = referenceInfo & 2147483647;\n    const referenceType = (referenceInfo & 2147483648) >>> 31;\n    if (referenceType === 1) {\n      logger.warn(\"SIDX has hierarchical references (not supported)\");\n      return null;\n    }\n    const subsegmentDuration = readUint32(sidx, referenceIndex);\n    referenceIndex += 4;\n    references.push({\n      referenceSize,\n      subsegmentDuration,\n      // unscaled\n      info: {\n        duration: subsegmentDuration / timescale,\n        start: startByte,\n        end: startByte + referenceSize - 1\n      }\n    });\n    startByte += referenceSize;\n    referenceIndex += 4;\n    index = referenceIndex;\n  }\n  return {\n    earliestPresentationTime,\n    timescale,\n    version: version2,\n    referencesCount,\n    references\n  };\n}\nfunction parseInitSegment(initSegment) {\n  const result = [];\n  const traks = findBox(initSegment, [\"moov\", \"trak\"]);\n  for (let i = 0; i < traks.length; i++) {\n    const trak = traks[i];\n    const tkhd = findBox(trak, [\"tkhd\"])[0];\n    if (tkhd) {\n      let version2 = tkhd[0];\n      const trackId = readUint32(tkhd, version2 === 0 ? 12 : 20);\n      const mdhd = findBox(trak, [\"mdia\", \"mdhd\"])[0];\n      if (mdhd) {\n        version2 = mdhd[0];\n        const timescale = readUint32(mdhd, version2 === 0 ? 12 : 20);\n        const hdlr = findBox(trak, [\"mdia\", \"hdlr\"])[0];\n        if (hdlr) {\n          const hdlrType = bin2str(hdlr.subarray(8, 12));\n          const type = {\n            soun: ElementaryStreamTypes.AUDIO,\n            vide: ElementaryStreamTypes.VIDEO\n          }[hdlrType];\n          const stsdBox = findBox(trak, [\"mdia\", \"minf\", \"stbl\", \"stsd\"])[0];\n          const stsd = parseStsd(stsdBox);\n          if (type) {\n            result[trackId] = {\n              timescale,\n              type,\n              stsd\n            };\n            result[type] = _objectSpread2({\n              timescale,\n              id: trackId\n            }, stsd);\n          } else {\n            result[trackId] = {\n              timescale,\n              type: hdlrType,\n              stsd\n            };\n          }\n        }\n      }\n    }\n  }\n  const trex = findBox(initSegment, [\"moov\", \"mvex\", \"trex\"]);\n  trex.forEach((trex2) => {\n    const trackId = readUint32(trex2, 4);\n    const track = result[trackId];\n    if (track) {\n      track.default = {\n        duration: readUint32(trex2, 12),\n        flags: readUint32(trex2, 20)\n      };\n    }\n  });\n  return result;\n}\nfunction parseStsd(stsd) {\n  const sampleEntries = stsd.subarray(8);\n  const sampleEntriesEnd = sampleEntries.subarray(8 + 78);\n  const fourCC = bin2str(sampleEntries.subarray(4, 8));\n  let codec = fourCC;\n  let supplemental;\n  const encrypted = fourCC === \"enca\" || fourCC === \"encv\";\n  if (encrypted) {\n    const encBox = findBox(sampleEntries, [fourCC])[0];\n    const encBoxChildren = encBox.subarray(fourCC === \"enca\" ? 28 : 78);\n    const sinfs = findBox(encBoxChildren, [\"sinf\"]);\n    sinfs.forEach((sinf) => {\n      const schm = findBox(sinf, [\"schm\"])[0];\n      if (schm) {\n        const scheme = bin2str(schm.subarray(4, 8));\n        if (scheme === \"cbcs\" || scheme === \"cenc\") {\n          const frma = findBox(sinf, [\"frma\"])[0];\n          if (frma) {\n            codec = bin2str(frma);\n          }\n        }\n      }\n    });\n  }\n  const codecFourCC = codec;\n  switch (codec) {\n    case \"avc1\":\n    case \"avc2\":\n    case \"avc3\":\n    case \"avc4\": {\n      const avcCBox = findBox(sampleEntriesEnd, [\"avcC\"])[0];\n      if (avcCBox && avcCBox.length > 3) {\n        codec += \".\" + toHex(avcCBox[1]) + toHex(avcCBox[2]) + toHex(avcCBox[3]);\n        supplemental = parseSupplementalDoViCodec(codecFourCC === \"avc1\" ? \"dva1\" : \"dvav\", sampleEntriesEnd);\n      }\n      break;\n    }\n    case \"mp4a\": {\n      const codecBox = findBox(sampleEntries, [fourCC])[0];\n      const esdsBox = findBox(codecBox.subarray(28), [\"esds\"])[0];\n      if (esdsBox && esdsBox.length > 7) {\n        let i = 4;\n        if (esdsBox[i++] !== 3) {\n          break;\n        }\n        i = skipBERInteger(esdsBox, i);\n        i += 2;\n        const flags = esdsBox[i++];\n        if (flags & 128) {\n          i += 2;\n        }\n        if (flags & 64) {\n          i += esdsBox[i++];\n        }\n        if (esdsBox[i++] !== 4) {\n          break;\n        }\n        i = skipBERInteger(esdsBox, i);\n        const objectType = esdsBox[i++];\n        if (objectType === 64) {\n          codec += \".\" + toHex(objectType);\n        } else {\n          break;\n        }\n        i += 12;\n        if (esdsBox[i++] !== 5) {\n          break;\n        }\n        i = skipBERInteger(esdsBox, i);\n        const firstByte = esdsBox[i++];\n        let audioObjectType = (firstByte & 248) >> 3;\n        if (audioObjectType === 31) {\n          audioObjectType += 1 + ((firstByte & 7) << 3) + ((esdsBox[i] & 224) >> 5);\n        }\n        codec += \".\" + audioObjectType;\n      }\n      break;\n    }\n    case \"hvc1\":\n    case \"hev1\": {\n      const hvcCBox = findBox(sampleEntriesEnd, [\"hvcC\"])[0];\n      if (hvcCBox && hvcCBox.length > 12) {\n        const profileByte = hvcCBox[1];\n        const profileSpace = [\"\", \"A\", \"B\", \"C\"][profileByte >> 6];\n        const generalProfileIdc = profileByte & 31;\n        const profileCompat = readUint32(hvcCBox, 2);\n        const tierFlag = (profileByte & 32) >> 5 ? \"H\" : \"L\";\n        const levelIDC = hvcCBox[12];\n        const constraintIndicator = hvcCBox.subarray(6, 12);\n        codec += \".\" + profileSpace + generalProfileIdc;\n        codec += \".\" + reverse32BitInt(profileCompat).toString(16).toUpperCase();\n        codec += \".\" + tierFlag + levelIDC;\n        let constraintString = \"\";\n        for (let i = constraintIndicator.length; i--; ) {\n          const byte = constraintIndicator[i];\n          if (byte || constraintString) {\n            const encodedByte = byte.toString(16).toUpperCase();\n            constraintString = \".\" + encodedByte + constraintString;\n          }\n        }\n        codec += constraintString;\n      }\n      supplemental = parseSupplementalDoViCodec(codecFourCC == \"hev1\" ? \"dvhe\" : \"dvh1\", sampleEntriesEnd);\n      break;\n    }\n    case \"dvh1\":\n    case \"dvhe\":\n    case \"dvav\":\n    case \"dva1\":\n    case \"dav1\": {\n      codec = parseSupplementalDoViCodec(codec, sampleEntriesEnd) || codec;\n      break;\n    }\n    case \"vp09\": {\n      const vpcCBox = findBox(sampleEntriesEnd, [\"vpcC\"])[0];\n      if (vpcCBox && vpcCBox.length > 6) {\n        const profile = vpcCBox[4];\n        const level = vpcCBox[5];\n        const bitDepth = vpcCBox[6] >> 4 & 15;\n        codec += \".\" + addLeadingZero(profile) + \".\" + addLeadingZero(level) + \".\" + addLeadingZero(bitDepth);\n      }\n      break;\n    }\n    case \"av01\": {\n      const av1CBox = findBox(sampleEntriesEnd, [\"av1C\"])[0];\n      if (av1CBox && av1CBox.length > 2) {\n        const profile = av1CBox[1] >>> 5;\n        const level = av1CBox[1] & 31;\n        const tierFlag = av1CBox[2] >>> 7 ? \"H\" : \"M\";\n        const highBitDepth = (av1CBox[2] & 64) >> 6;\n        const twelveBit = (av1CBox[2] & 32) >> 5;\n        const bitDepth = profile === 2 && highBitDepth ? twelveBit ? 12 : 10 : highBitDepth ? 10 : 8;\n        const monochrome = (av1CBox[2] & 16) >> 4;\n        const chromaSubsamplingX = (av1CBox[2] & 8) >> 3;\n        const chromaSubsamplingY = (av1CBox[2] & 4) >> 2;\n        const chromaSamplePosition = av1CBox[2] & 3;\n        const colorPrimaries = 1;\n        const transferCharacteristics = 1;\n        const matrixCoefficients = 1;\n        const videoFullRangeFlag = 0;\n        codec += \".\" + profile + \".\" + addLeadingZero(level) + tierFlag + \".\" + addLeadingZero(bitDepth) + \".\" + monochrome + \".\" + chromaSubsamplingX + chromaSubsamplingY + chromaSamplePosition + \".\" + addLeadingZero(colorPrimaries) + \".\" + addLeadingZero(transferCharacteristics) + \".\" + addLeadingZero(matrixCoefficients) + \".\" + videoFullRangeFlag;\n        supplemental = parseSupplementalDoViCodec(\"dav1\", sampleEntriesEnd);\n      }\n      break;\n    }\n  }\n  return {\n    codec,\n    encrypted,\n    supplemental\n  };\n}\nfunction parseSupplementalDoViCodec(fourCC, sampleEntriesEnd) {\n  const dvvCResult = findBox(sampleEntriesEnd, [\"dvvC\"]);\n  const dvXCBox = dvvCResult.length ? dvvCResult[0] : findBox(sampleEntriesEnd, [\"dvcC\"])[0];\n  if (dvXCBox) {\n    const doViProfile = dvXCBox[2] >> 1 & 127;\n    const doViLevel = dvXCBox[2] << 5 & 32 | dvXCBox[3] >> 3 & 31;\n    return fourCC + \".\" + addLeadingZero(doViProfile) + \".\" + addLeadingZero(doViLevel);\n  }\n}\nfunction reverse32BitInt(val) {\n  let result = 0;\n  for (let i = 0; i < 32; i++) {\n    result |= (val >> i & 1) << 32 - 1 - i;\n  }\n  return result >>> 0;\n}\nfunction skipBERInteger(bytes2, i) {\n  const limit = i + 5;\n  while (bytes2[i++] & 128 && i < limit) {\n  }\n  return i;\n}\nfunction toHex(x) {\n  return (\"0\" + x.toString(16).toUpperCase()).slice(-2);\n}\nfunction addLeadingZero(num) {\n  return (num < 10 ? \"0\" : \"\") + num;\n}\nfunction patchEncyptionData(initSegment, decryptdata) {\n  if (!initSegment || !decryptdata) {\n    return initSegment;\n  }\n  const keyId = decryptdata.keyId;\n  if (keyId && decryptdata.isCommonEncryption) {\n    const traks = findBox(initSegment, [\"moov\", \"trak\"]);\n    traks.forEach((trak) => {\n      const stsd = findBox(trak, [\"mdia\", \"minf\", \"stbl\", \"stsd\"])[0];\n      const sampleEntries = stsd.subarray(8);\n      let encBoxes = findBox(sampleEntries, [\"enca\"]);\n      const isAudio = encBoxes.length > 0;\n      if (!isAudio) {\n        encBoxes = findBox(sampleEntries, [\"encv\"]);\n      }\n      encBoxes.forEach((enc) => {\n        const encBoxChildren = isAudio ? enc.subarray(28) : enc.subarray(78);\n        const sinfBoxes = findBox(encBoxChildren, [\"sinf\"]);\n        sinfBoxes.forEach((sinf) => {\n          const tenc = parseSinf(sinf);\n          if (tenc) {\n            const tencKeyId = tenc.subarray(8, 24);\n            if (!tencKeyId.some((b) => b !== 0)) {\n              logger.log(`[eme] Patching keyId in 'enc${isAudio ? \"a\" : \"v\"}>sinf>>tenc' box: ${Hex.hexDump(tencKeyId)} -> ${Hex.hexDump(keyId)}`);\n              tenc.set(keyId, 8);\n            }\n          }\n        });\n      });\n    });\n  }\n  return initSegment;\n}\nfunction parseSinf(sinf) {\n  const schm = findBox(sinf, [\"schm\"])[0];\n  if (schm) {\n    const scheme = bin2str(schm.subarray(4, 8));\n    if (scheme === \"cbcs\" || scheme === \"cenc\") {\n      return findBox(sinf, [\"schi\", \"tenc\"])[0];\n    }\n  }\n  return null;\n}\nfunction getSampleData(data, initData, logger2) {\n  const tracks = {};\n  const trafs = findBox(data, [\"moof\", \"traf\"]);\n  for (let i = 0; i < trafs.length; i++) {\n    const traf = trafs[i];\n    const tfhd = findBox(traf, [\"tfhd\"])[0];\n    const id = readUint32(tfhd, 4);\n    const track = initData[id];\n    if (!track) {\n      continue;\n    }\n    const trackTimes = tracks[id] || (tracks[id] = {\n      start: NaN,\n      duration: 0,\n      sampleCount: 0,\n      timescale: track.timescale,\n      type: track.type\n    });\n    const tfdt = findBox(traf, [\"tfdt\"])[0];\n    if (tfdt) {\n      const version2 = tfdt[0];\n      let baseTime = readUint32(tfdt, 4);\n      if (version2 === 1) {\n        if (baseTime === UINT32_MAX$1) {\n          logger2.warn(`[mp4-demuxer]: Ignoring assumed invalid signed 64-bit track fragment decode time`);\n        } else {\n          baseTime *= UINT32_MAX$1 + 1;\n          baseTime += readUint32(tfdt, 8);\n        }\n      }\n      if (isFiniteNumber(baseTime) && (!isFiniteNumber(trackTimes.start) || baseTime < trackTimes.start)) {\n        trackTimes.start = baseTime;\n      }\n    }\n    const trackDefault = track.default;\n    const tfhdFlags = readUint32(tfhd, 0) | (trackDefault == null ? void 0 : trackDefault.flags);\n    let defaultSampleDuration = (trackDefault == null ? void 0 : trackDefault.duration) || 0;\n    if (tfhdFlags & 8) {\n      if (tfhdFlags & 2) {\n        defaultSampleDuration = readUint32(tfhd, 12);\n      } else {\n        defaultSampleDuration = readUint32(tfhd, 8);\n      }\n    }\n    const truns = findBox(traf, [\"trun\"]);\n    let sampleDTS = trackTimes.start || 0;\n    let rawDuration = 0;\n    let sampleDuration = defaultSampleDuration;\n    for (let j = 0; j < truns.length; j++) {\n      const trun = truns[j];\n      const sampleCount = readUint32(trun, 4);\n      const sampleIndex = trackTimes.sampleCount;\n      trackTimes.sampleCount += sampleCount;\n      const dataOffsetPresent = trun[3] & 1;\n      const firstSampleFlagsPresent = trun[3] & 4;\n      const sampleDurationPresent = trun[2] & 1;\n      const sampleSizePresent = trun[2] & 2;\n      const sampleFlagsPresent = trun[2] & 4;\n      const sampleCompositionTimeOffsetPresent = trun[2] & 8;\n      let offset = 8;\n      let remaining = sampleCount;\n      if (dataOffsetPresent) {\n        offset += 4;\n      }\n      if (firstSampleFlagsPresent && sampleCount) {\n        const isNonSyncSample = trun[offset + 1] & 1;\n        if (!isNonSyncSample && trackTimes.keyFrameIndex === void 0) {\n          trackTimes.keyFrameIndex = sampleIndex;\n        }\n        offset += 4;\n        if (sampleDurationPresent) {\n          sampleDuration = readUint32(trun, offset);\n          offset += 4;\n        } else {\n          sampleDuration = defaultSampleDuration;\n        }\n        if (sampleSizePresent) {\n          offset += 4;\n        }\n        if (sampleCompositionTimeOffsetPresent) {\n          offset += 4;\n        }\n        sampleDTS += sampleDuration;\n        rawDuration += sampleDuration;\n        remaining--;\n      }\n      while (remaining--) {\n        if (sampleDurationPresent) {\n          sampleDuration = readUint32(trun, offset);\n          offset += 4;\n        } else {\n          sampleDuration = defaultSampleDuration;\n        }\n        if (sampleSizePresent) {\n          offset += 4;\n        }\n        if (sampleFlagsPresent) {\n          const isNonSyncSample = trun[offset + 1] & 1;\n          if (!isNonSyncSample) {\n            if (trackTimes.keyFrameIndex === void 0) {\n              trackTimes.keyFrameIndex = trackTimes.sampleCount - (remaining + 1);\n              trackTimes.keyFrameStart = sampleDTS;\n            }\n          }\n          offset += 4;\n        }\n        if (sampleCompositionTimeOffsetPresent) {\n          offset += 4;\n        }\n        sampleDTS += sampleDuration;\n        rawDuration += sampleDuration;\n      }\n      if (!rawDuration && defaultSampleDuration) {\n        rawDuration += defaultSampleDuration * sampleCount;\n      }\n    }\n    trackTimes.duration += rawDuration;\n  }\n  if (!Object.keys(tracks).some((trackId) => tracks[trackId].duration)) {\n    let sidxMinStart = Infinity;\n    let sidxMaxEnd = 0;\n    const sidxs = findBox(data, [\"sidx\"]);\n    for (let i = 0; i < sidxs.length; i++) {\n      const sidx = parseSegmentIndex(sidxs[i]);\n      if (sidx != null && sidx.references) {\n        sidxMinStart = Math.min(sidxMinStart, sidx.earliestPresentationTime / sidx.timescale);\n        const subSegmentDuration = sidx.references.reduce((dur, ref) => dur + ref.info.duration || 0, 0);\n        sidxMaxEnd = Math.max(sidxMaxEnd, subSegmentDuration + sidx.earliestPresentationTime / sidx.timescale);\n      }\n    }\n    if (sidxMaxEnd && isFiniteNumber(sidxMaxEnd)) {\n      Object.keys(tracks).forEach((trackId) => {\n        if (!tracks[trackId].duration) {\n          tracks[trackId].duration = sidxMaxEnd * tracks[trackId].timescale - tracks[trackId].start;\n        }\n      });\n    }\n  }\n  return tracks;\n}\nfunction segmentValidRange(data) {\n  const segmentedRange = {\n    valid: null,\n    remainder: null\n  };\n  const moofs = findBox(data, [\"moof\"]);\n  if (moofs.length < 2) {\n    segmentedRange.remainder = data;\n    return segmentedRange;\n  }\n  const last = moofs[moofs.length - 1];\n  segmentedRange.valid = data.slice(0, last.byteOffset - 8);\n  segmentedRange.remainder = data.slice(last.byteOffset - 8);\n  return segmentedRange;\n}\nfunction appendUint8Array(data1, data2) {\n  const temp = new Uint8Array(data1.length + data2.length);\n  temp.set(data1);\n  temp.set(data2, data1.length);\n  return temp;\n}\nfunction parseSamples(timeOffset, track) {\n  const seiSamples = [];\n  const videoData = track.samples;\n  const timescale = track.timescale;\n  const trackId = track.id;\n  let isHEVCFlavor = false;\n  const moofs = findBox(videoData, [\"moof\"]);\n  moofs.map((moof) => {\n    const moofOffset = moof.byteOffset - 8;\n    const trafs = findBox(moof, [\"traf\"]);\n    trafs.map((traf) => {\n      const baseTime = findBox(traf, [\"tfdt\"]).map((tfdt) => {\n        const version2 = tfdt[0];\n        let result = readUint32(tfdt, 4);\n        if (version2 === 1) {\n          result *= Math.pow(2, 32);\n          result += readUint32(tfdt, 8);\n        }\n        return result / timescale;\n      })[0];\n      if (baseTime !== void 0) {\n        timeOffset = baseTime;\n      }\n      return findBox(traf, [\"tfhd\"]).map((tfhd) => {\n        const id = readUint32(tfhd, 4);\n        const tfhdFlags = readUint32(tfhd, 0) & 16777215;\n        const baseDataOffsetPresent = (tfhdFlags & 1) !== 0;\n        const sampleDescriptionIndexPresent = (tfhdFlags & 2) !== 0;\n        const defaultSampleDurationPresent = (tfhdFlags & 8) !== 0;\n        let defaultSampleDuration = 0;\n        const defaultSampleSizePresent = (tfhdFlags & 16) !== 0;\n        let defaultSampleSize = 0;\n        const defaultSampleFlagsPresent = (tfhdFlags & 32) !== 0;\n        let tfhdOffset = 8;\n        if (id === trackId) {\n          if (baseDataOffsetPresent) {\n            tfhdOffset += 8;\n          }\n          if (sampleDescriptionIndexPresent) {\n            tfhdOffset += 4;\n          }\n          if (defaultSampleDurationPresent) {\n            defaultSampleDuration = readUint32(tfhd, tfhdOffset);\n            tfhdOffset += 4;\n          }\n          if (defaultSampleSizePresent) {\n            defaultSampleSize = readUint32(tfhd, tfhdOffset);\n            tfhdOffset += 4;\n          }\n          if (defaultSampleFlagsPresent) {\n            tfhdOffset += 4;\n          }\n          if (track.type === \"video\") {\n            isHEVCFlavor = isHEVC(track.codec);\n          }\n          findBox(traf, [\"trun\"]).map((trun) => {\n            const version2 = trun[0];\n            const flags = readUint32(trun, 0) & 16777215;\n            const dataOffsetPresent = (flags & 1) !== 0;\n            let dataOffset = 0;\n            const firstSampleFlagsPresent = (flags & 4) !== 0;\n            const sampleDurationPresent = (flags & 256) !== 0;\n            let sampleDuration = 0;\n            const sampleSizePresent = (flags & 512) !== 0;\n            let sampleSize = 0;\n            const sampleFlagsPresent = (flags & 1024) !== 0;\n            const sampleCompositionOffsetsPresent = (flags & 2048) !== 0;\n            let compositionOffset = 0;\n            const sampleCount = readUint32(trun, 4);\n            let trunOffset = 8;\n            if (dataOffsetPresent) {\n              dataOffset = readUint32(trun, trunOffset);\n              trunOffset += 4;\n            }\n            if (firstSampleFlagsPresent) {\n              trunOffset += 4;\n            }\n            let sampleOffset = dataOffset + moofOffset;\n            for (let ix = 0; ix < sampleCount; ix++) {\n              if (sampleDurationPresent) {\n                sampleDuration = readUint32(trun, trunOffset);\n                trunOffset += 4;\n              } else {\n                sampleDuration = defaultSampleDuration;\n              }\n              if (sampleSizePresent) {\n                sampleSize = readUint32(trun, trunOffset);\n                trunOffset += 4;\n              } else {\n                sampleSize = defaultSampleSize;\n              }\n              if (sampleFlagsPresent) {\n                trunOffset += 4;\n              }\n              if (sampleCompositionOffsetsPresent) {\n                if (version2 === 0) {\n                  compositionOffset = readUint32(trun, trunOffset);\n                } else {\n                  compositionOffset = readSint32(trun, trunOffset);\n                }\n                trunOffset += 4;\n              }\n              if (track.type === ElementaryStreamTypes.VIDEO) {\n                let naluTotalSize = 0;\n                while (naluTotalSize < sampleSize) {\n                  const naluSize = readUint32(videoData, sampleOffset);\n                  sampleOffset += 4;\n                  if (isSEIMessage(isHEVCFlavor, videoData[sampleOffset])) {\n                    const data = videoData.subarray(sampleOffset, sampleOffset + naluSize);\n                    parseSEIMessageFromNALu(data, isHEVCFlavor ? 2 : 1, timeOffset + compositionOffset / timescale, seiSamples);\n                  }\n                  sampleOffset += naluSize;\n                  naluTotalSize += naluSize + 4;\n                }\n              }\n              timeOffset += sampleDuration / timescale;\n            }\n          });\n        }\n      });\n    });\n  });\n  return seiSamples;\n}\nfunction isHEVC(codec) {\n  if (!codec) {\n    return false;\n  }\n  const baseCodec = codec.substring(0, 4);\n  return baseCodec === \"hvc1\" || baseCodec === \"hev1\" || // Dolby Vision\n  baseCodec === \"dvh1\" || baseCodec === \"dvhe\";\n}\nfunction isSEIMessage(isHEVCFlavor, naluHeader) {\n  if (isHEVCFlavor) {\n    const naluType = naluHeader >> 1 & 63;\n    return naluType === 39 || naluType === 40;\n  } else {\n    const naluType = naluHeader & 31;\n    return naluType === 6;\n  }\n}\nfunction parseSEIMessageFromNALu(unescapedData, headerSize, pts, samples) {\n  const data = discardEPB(unescapedData);\n  let seiPtr = 0;\n  seiPtr += headerSize;\n  let payloadType = 0;\n  let payloadSize = 0;\n  let b = 0;\n  while (seiPtr < data.length) {\n    payloadType = 0;\n    do {\n      if (seiPtr >= data.length) {\n        break;\n      }\n      b = data[seiPtr++];\n      payloadType += b;\n    } while (b === 255);\n    payloadSize = 0;\n    do {\n      if (seiPtr >= data.length) {\n        break;\n      }\n      b = data[seiPtr++];\n      payloadSize += b;\n    } while (b === 255);\n    const leftOver = data.length - seiPtr;\n    let payPtr = seiPtr;\n    if (payloadSize < leftOver) {\n      seiPtr += payloadSize;\n    } else if (payloadSize > leftOver) {\n      logger.error(`Malformed SEI payload. ${payloadSize} is too small, only ${leftOver} bytes left to parse.`);\n      break;\n    }\n    if (payloadType === 4) {\n      const countryCode = data[payPtr++];\n      if (countryCode === 181) {\n        const providerCode = readUint16(data, payPtr);\n        payPtr += 2;\n        if (providerCode === 49) {\n          const userStructure = readUint32(data, payPtr);\n          payPtr += 4;\n          if (userStructure === 1195456820) {\n            const userDataType = data[payPtr++];\n            if (userDataType === 3) {\n              const firstByte = data[payPtr++];\n              const totalCCs = 31 & firstByte;\n              const enabled = 64 & firstByte;\n              const totalBytes = enabled ? 2 + totalCCs * 3 : 0;\n              const byteArray = new Uint8Array(totalBytes);\n              if (enabled) {\n                byteArray[0] = firstByte;\n                for (let i = 1; i < totalBytes; i++) {\n                  byteArray[i] = data[payPtr++];\n                }\n              }\n              samples.push({\n                type: userDataType,\n                payloadType,\n                pts,\n                bytes: byteArray\n              });\n            }\n          }\n        }\n      }\n    } else if (payloadType === 5) {\n      if (payloadSize > 16) {\n        const uuidStrArray = [];\n        for (let i = 0; i < 16; i++) {\n          const _b = data[payPtr++].toString(16);\n          uuidStrArray.push(_b.length == 1 ? \"0\" + _b : _b);\n          if (i === 3 || i === 5 || i === 7 || i === 9) {\n            uuidStrArray.push(\"-\");\n          }\n        }\n        const length = payloadSize - 16;\n        const userDataBytes = new Uint8Array(length);\n        for (let i = 0; i < length; i++) {\n          userDataBytes[i] = data[payPtr++];\n        }\n        samples.push({\n          payloadType,\n          pts,\n          uuid: uuidStrArray.join(\"\"),\n          userData: utf8ArrayToStr(userDataBytes),\n          userDataBytes\n        });\n      }\n    }\n  }\n}\nfunction discardEPB(data) {\n  const length = data.byteLength;\n  const EPBPositions = [];\n  let i = 1;\n  while (i < length - 2) {\n    if (data[i] === 0 && data[i + 1] === 0 && data[i + 2] === 3) {\n      EPBPositions.push(i + 2);\n      i += 2;\n    } else {\n      i++;\n    }\n  }\n  if (EPBPositions.length === 0) {\n    return data;\n  }\n  const newLength = length - EPBPositions.length;\n  const newData = new Uint8Array(newLength);\n  let sourceIndex = 0;\n  for (i = 0; i < newLength; sourceIndex++, i++) {\n    if (sourceIndex === EPBPositions[0]) {\n      sourceIndex++;\n      EPBPositions.shift();\n    }\n    newData[i] = data[sourceIndex];\n  }\n  return newData;\n}\nfunction parseEmsg(data) {\n  const version2 = data[0];\n  let schemeIdUri = \"\";\n  let value = \"\";\n  let timeScale = 0;\n  let presentationTimeDelta = 0;\n  let presentationTime = 0;\n  let eventDuration = 0;\n  let id = 0;\n  let offset = 0;\n  if (version2 === 0) {\n    while (bin2str(data.subarray(offset, offset + 1)) !== \"\\0\") {\n      schemeIdUri += bin2str(data.subarray(offset, offset + 1));\n      offset += 1;\n    }\n    schemeIdUri += bin2str(data.subarray(offset, offset + 1));\n    offset += 1;\n    while (bin2str(data.subarray(offset, offset + 1)) !== \"\\0\") {\n      value += bin2str(data.subarray(offset, offset + 1));\n      offset += 1;\n    }\n    value += bin2str(data.subarray(offset, offset + 1));\n    offset += 1;\n    timeScale = readUint32(data, 12);\n    presentationTimeDelta = readUint32(data, 16);\n    eventDuration = readUint32(data, 20);\n    id = readUint32(data, 24);\n    offset = 28;\n  } else if (version2 === 1) {\n    offset += 4;\n    timeScale = readUint32(data, offset);\n    offset += 4;\n    const leftPresentationTime = readUint32(data, offset);\n    offset += 4;\n    const rightPresentationTime = readUint32(data, offset);\n    offset += 4;\n    presentationTime = 2 ** 32 * leftPresentationTime + rightPresentationTime;\n    if (!isSafeInteger(presentationTime)) {\n      presentationTime = Number.MAX_SAFE_INTEGER;\n      logger.warn(\"Presentation time exceeds safe integer limit and wrapped to max safe integer in parsing emsg box\");\n    }\n    eventDuration = readUint32(data, offset);\n    offset += 4;\n    id = readUint32(data, offset);\n    offset += 4;\n    while (bin2str(data.subarray(offset, offset + 1)) !== \"\\0\") {\n      schemeIdUri += bin2str(data.subarray(offset, offset + 1));\n      offset += 1;\n    }\n    schemeIdUri += bin2str(data.subarray(offset, offset + 1));\n    offset += 1;\n    while (bin2str(data.subarray(offset, offset + 1)) !== \"\\0\") {\n      value += bin2str(data.subarray(offset, offset + 1));\n      offset += 1;\n    }\n    value += bin2str(data.subarray(offset, offset + 1));\n    offset += 1;\n  }\n  const payload = data.subarray(offset, data.byteLength);\n  return {\n    schemeIdUri,\n    value,\n    timeScale,\n    presentationTime,\n    presentationTimeDelta,\n    eventDuration,\n    id,\n    payload\n  };\n}\nfunction mp4Box(type, ...payload) {\n  const len = payload.length;\n  let size = 8;\n  let i = len;\n  while (i--) {\n    size += payload[i].byteLength;\n  }\n  const result = new Uint8Array(size);\n  result[0] = size >> 24 & 255;\n  result[1] = size >> 16 & 255;\n  result[2] = size >> 8 & 255;\n  result[3] = size & 255;\n  result.set(type, 4);\n  for (i = 0, size = 8; i < len; i++) {\n    result.set(payload[i], size);\n    size += payload[i].byteLength;\n  }\n  return result;\n}\nfunction mp4pssh(systemId, keyids, data) {\n  if (systemId.byteLength !== 16) {\n    throw new RangeError(\"Invalid system id\");\n  }\n  let version2;\n  let kids;\n  {\n    version2 = 0;\n    kids = new Uint8Array();\n  }\n  let kidCount;\n  if (version2 > 0) {\n    kidCount = new Uint8Array(4);\n    if (keyids.length > 0) {\n      new DataView(kidCount.buffer).setUint32(0, keyids.length, false);\n    }\n  } else {\n    kidCount = new Uint8Array();\n  }\n  const dataSize = new Uint8Array(4);\n  if (data && data.byteLength > 0) {\n    new DataView(dataSize.buffer).setUint32(0, data.byteLength, false);\n  }\n  return mp4Box(\n    [112, 115, 115, 104],\n    new Uint8Array([\n      version2,\n      0,\n      0,\n      0\n      // Flags\n    ]),\n    systemId,\n    // 16 bytes\n    kidCount,\n    kids,\n    dataSize,\n    data || new Uint8Array()\n  );\n}\nconst userAgentHevcSupportIsInaccurate = () => {\n  return /\\(Windows.+Firefox\\//i.test(navigator.userAgent);\n};\nconst sampleEntryCodesISO = {\n  audio: {\n    a3ds: 1,\n    \"ac-3\": 0.95,\n    \"ac-4\": 1,\n    alac: 0.9,\n    alaw: 1,\n    dra1: 1,\n    \"dts+\": 1,\n    \"dts-\": 1,\n    dtsc: 1,\n    dtse: 1,\n    dtsh: 1,\n    \"ec-3\": 0.9,\n    enca: 1,\n    fLaC: 0.9,\n    // MP4-RA listed codec entry for FLAC\n    flac: 0.9,\n    // legacy browser codec name for FLAC\n    FLAC: 0.9,\n    // some manifests may list \"FLAC\" with Apple's tools\n    g719: 1,\n    g726: 1,\n    m4ae: 1,\n    mha1: 1,\n    mha2: 1,\n    mhm1: 1,\n    mhm2: 1,\n    mlpa: 1,\n    mp4a: 1,\n    \"raw \": 1,\n    Opus: 1,\n    opus: 1,\n    // browsers expect this to be lowercase despite MP4RA says 'Opus'\n    samr: 1,\n    sawb: 1,\n    sawp: 1,\n    sevc: 1,\n    sqcp: 1,\n    ssmv: 1,\n    twos: 1,\n    ulaw: 1\n  },\n  video: {\n    avc1: 1,\n    avc2: 1,\n    avc3: 1,\n    avc4: 1,\n    avcp: 1,\n    av01: 0.8,\n    dav1: 0.8,\n    drac: 1,\n    dva1: 1,\n    dvav: 1,\n    dvh1: 0.7,\n    dvhe: 0.7,\n    encv: 1,\n    hev1: 0.75,\n    hvc1: 0.75,\n    mjp2: 1,\n    mp4v: 1,\n    mvc1: 1,\n    mvc2: 1,\n    mvc3: 1,\n    mvc4: 1,\n    resv: 1,\n    rv60: 1,\n    s263: 1,\n    svc1: 1,\n    svc2: 1,\n    \"vc-1\": 1,\n    vp08: 1,\n    vp09: 0.9\n  },\n  text: {\n    stpp: 1,\n    wvtt: 1\n  }\n};\nfunction isCodecType(codec, type) {\n  const typeCodes = sampleEntryCodesISO[type];\n  return !!typeCodes && !!typeCodes[codec.slice(0, 4)];\n}\nfunction areCodecsMediaSourceSupported(codecs, type, preferManagedMediaSource = true) {\n  return !codecs.split(\",\").some((codec) => !isCodecMediaSourceSupported(codec, type, preferManagedMediaSource));\n}\nfunction isCodecMediaSourceSupported(codec, type, preferManagedMediaSource = true) {\n  var _MediaSource$isTypeSu;\n  const MediaSource = getMediaSource(preferManagedMediaSource);\n  return (_MediaSource$isTypeSu = MediaSource == null ? void 0 : MediaSource.isTypeSupported(mimeTypeForCodec(codec, type))) != null ? _MediaSource$isTypeSu : false;\n}\nfunction mimeTypeForCodec(codec, type) {\n  return `${type}/mp4;codecs=${codec}`;\n}\nfunction videoCodecPreferenceValue(videoCodec) {\n  if (videoCodec) {\n    const fourCC = videoCodec.substring(0, 4);\n    return sampleEntryCodesISO.video[fourCC];\n  }\n  return 2;\n}\nfunction codecsSetSelectionPreferenceValue(codecSet) {\n  const limitedHevcSupport = userAgentHevcSupportIsInaccurate();\n  return codecSet.split(\",\").reduce((num, fourCC) => {\n    const lowerPriority = limitedHevcSupport && isHEVC(fourCC);\n    const preferenceValue = lowerPriority ? 9 : sampleEntryCodesISO.video[fourCC];\n    if (preferenceValue) {\n      return (preferenceValue * 2 + num) / (num ? 3 : 2);\n    }\n    return (sampleEntryCodesISO.audio[fourCC] + num) / (num ? 2 : 1);\n  }, 0);\n}\nconst CODEC_COMPATIBLE_NAMES = {};\nfunction getCodecCompatibleNameLower(lowerCaseCodec, preferManagedMediaSource = true) {\n  if (CODEC_COMPATIBLE_NAMES[lowerCaseCodec]) {\n    return CODEC_COMPATIBLE_NAMES[lowerCaseCodec];\n  }\n  const codecsToCheck = {\n    // Idealy fLaC and Opus would be first (spec-compliant) but\n    // some browsers will report that fLaC is supported then fail.\n    // see: https://bugs.chromium.org/p/chromium/issues/detail?id=1422728\n    flac: [\"flac\", \"fLaC\", \"FLAC\"],\n    opus: [\"opus\", \"Opus\"],\n    // Replace audio codec info if browser does not support mp4a.40.34,\n    // and demuxer can fallback to 'audio/mpeg' or 'audio/mp4;codecs=\"mp3\"'\n    \"mp4a.40.34\": [\"mp3\"]\n  }[lowerCaseCodec];\n  for (let i = 0; i < codecsToCheck.length; i++) {\n    var _getMediaSource;\n    if (isCodecMediaSourceSupported(codecsToCheck[i], \"audio\", preferManagedMediaSource)) {\n      CODEC_COMPATIBLE_NAMES[lowerCaseCodec] = codecsToCheck[i];\n      return codecsToCheck[i];\n    } else if (codecsToCheck[i] === \"mp3\" && (_getMediaSource = getMediaSource(preferManagedMediaSource)) != null && _getMediaSource.isTypeSupported(\"audio/mpeg\")) {\n      return \"\";\n    }\n  }\n  return lowerCaseCodec;\n}\nconst AUDIO_CODEC_REGEXP = /flac|opus|mp4a\\.40\\.34/i;\nfunction getCodecCompatibleName(codec, preferManagedMediaSource = true) {\n  return codec.replace(AUDIO_CODEC_REGEXP, (m) => getCodecCompatibleNameLower(m.toLowerCase(), preferManagedMediaSource));\n}\nfunction replaceVideoCodec(originalCodecs, newVideoCodec) {\n  const codecs = [];\n  if (originalCodecs) {\n    const allCodecs = originalCodecs.split(\",\");\n    for (let i = 0; i < allCodecs.length; i++) {\n      if (!isCodecType(allCodecs[i], \"video\")) {\n        codecs.push(allCodecs[i]);\n      }\n    }\n  }\n  if (newVideoCodec) {\n    codecs.push(newVideoCodec);\n  }\n  return codecs.join(\",\");\n}\nfunction pickMostCompleteCodecName(parsedCodec, levelCodec) {\n  if (parsedCodec && (parsedCodec.length > 4 || [\"ac-3\", \"ec-3\", \"alac\", \"fLaC\", \"Opus\"].indexOf(parsedCodec) !== -1)) {\n    if (isCodecSupportedAsType(parsedCodec, \"audio\") || isCodecSupportedAsType(parsedCodec, \"video\")) {\n      return parsedCodec;\n    }\n  }\n  if (levelCodec) {\n    const levelCodecs = levelCodec.split(\",\");\n    if (levelCodecs.length > 1) {\n      if (parsedCodec) {\n        for (let i = levelCodecs.length; i--; ) {\n          if (levelCodecs[i].substring(0, 4) === parsedCodec.substring(0, 4)) {\n            return levelCodecs[i];\n          }\n        }\n      }\n      return levelCodecs[0];\n    }\n  }\n  return levelCodec || parsedCodec;\n}\nfunction isCodecSupportedAsType(codec, type) {\n  return isCodecType(codec, type) && isCodecMediaSourceSupported(codec, type);\n}\nfunction convertAVC1ToAVCOTI(videoCodecs) {\n  const codecs = videoCodecs.split(\",\");\n  for (let i = 0; i < codecs.length; i++) {\n    const avcdata = codecs[i].split(\".\");\n    if (avcdata.length > 2 && avcdata[0] === \"avc1\") {\n      codecs[i] = `avc1.${parseInt(avcdata[1]).toString(16)}${(\"000\" + parseInt(avcdata[2]).toString(16)).slice(-4)}`;\n    }\n  }\n  return codecs.join(\",\");\n}\nfunction fillInMissingAV01Params(videoCodec) {\n  if (videoCodec.startsWith(\"av01.\")) {\n    const av1params = videoCodec.split(\".\");\n    const placeholders = [\"0\", \"111\", \"01\", \"01\", \"01\", \"0\"];\n    for (let i = av1params.length; i > 4 && i < 10; i++) {\n      av1params[i] = placeholders[i - 4];\n    }\n    return av1params.join(\".\");\n  }\n  return videoCodec;\n}\nfunction getM2TSSupportedAudioTypes(preferManagedMediaSource) {\n  const MediaSource = getMediaSource(preferManagedMediaSource) || {\n    isTypeSupported: () => false\n  };\n  return {\n    mpeg: MediaSource.isTypeSupported(\"audio/mpeg\"),\n    mp3: MediaSource.isTypeSupported('audio/mp4; codecs=\"mp3\"'),\n    ac3: MediaSource.isTypeSupported('audio/mp4; codecs=\"ac-3\"')\n  };\n}\nfunction getCodecsForMimeType(mimeType) {\n  return mimeType.replace(/^.+codecs=[\"']?([^\"']+).*$/, \"$1\");\n}\nconst SUPPORTED_INFO_DEFAULT = {\n  supported: true,\n  configurations: [],\n  decodingInfoResults: [{\n    supported: true,\n    powerEfficient: true,\n    smooth: true\n  }]\n};\nfunction getUnsupportedResult(error, configurations) {\n  return {\n    supported: false,\n    configurations,\n    decodingInfoResults: [{\n      supported: false,\n      smooth: false,\n      powerEfficient: false\n    }],\n    error\n  };\n}\nfunction requiresMediaCapabilitiesDecodingInfo(level, audioTracksByGroup, currentVideoRange, currentFrameRate, currentBw, audioPreference) {\n  const videoCodecs = level.videoCodec;\n  const audioGroups = level.audioCodec ? level.audioGroups : null;\n  const audioCodecPreference = audioPreference == null ? void 0 : audioPreference.audioCodec;\n  const channelsPreference = audioPreference == null ? void 0 : audioPreference.channels;\n  const maxChannels = channelsPreference ? parseInt(channelsPreference) : audioCodecPreference ? Infinity : 2;\n  let audioChannels = null;\n  if (audioGroups != null && audioGroups.length) {\n    try {\n      if (audioGroups.length === 1 && audioGroups[0]) {\n        audioChannels = audioTracksByGroup.groups[audioGroups[0]].channels;\n      } else {\n        audioChannels = audioGroups.reduce((acc, groupId) => {\n          if (groupId) {\n            const audioTrackGroup = audioTracksByGroup.groups[groupId];\n            if (!audioTrackGroup) {\n              throw new Error(`Audio track group ${groupId} not found`);\n            }\n            Object.keys(audioTrackGroup.channels).forEach((key) => {\n              acc[key] = (acc[key] || 0) + audioTrackGroup.channels[key];\n            });\n          }\n          return acc;\n        }, {\n          2: 0\n        });\n      }\n    } catch (error) {\n      return true;\n    }\n  }\n  return videoCodecs !== void 0 && // Force media capabilities check for HEVC to avoid failure on Windows\n  (videoCodecs.split(\",\").some((videoCodec) => isHEVC(videoCodec)) || level.width > 1920 && level.height > 1088 || level.height > 1920 && level.width > 1088 || level.frameRate > Math.max(currentFrameRate, 30) || level.videoRange !== \"SDR\" && level.videoRange !== currentVideoRange || level.bitrate > Math.max(currentBw, 8e6)) || !!audioChannels && isFiniteNumber(maxChannels) && Object.keys(audioChannels).some((channels) => parseInt(channels) > maxChannels);\n}\nfunction getMediaDecodingInfoPromise(level, audioTracksByGroup, mediaCapabilities, cache = {}) {\n  const videoCodecs = level.videoCodec;\n  if (!videoCodecs && !level.audioCodec || !mediaCapabilities) {\n    return Promise.resolve(SUPPORTED_INFO_DEFAULT);\n  }\n  const configurations = [];\n  const videoDecodeList = makeVideoConfigurations(level);\n  const videoCount = videoDecodeList.length;\n  const audioDecodeList = makeAudioConfigurations(level, audioTracksByGroup, videoCount > 0);\n  const audioCount = audioDecodeList.length;\n  for (let i = videoCount || 1 * audioCount || 1; i--; ) {\n    const configuration = {\n      type: \"media-source\"\n    };\n    if (videoCount) {\n      configuration.video = videoDecodeList[i % videoCount];\n    }\n    if (audioCount) {\n      configuration.audio = audioDecodeList[i % audioCount];\n      const audioBitrate = configuration.audio.bitrate;\n      if (configuration.video && audioBitrate) {\n        configuration.video.bitrate -= audioBitrate;\n      }\n    }\n    configurations.push(configuration);\n  }\n  if (videoCodecs) {\n    const ua = navigator.userAgent;\n    if (videoCodecs.split(\",\").some((videoCodec) => isHEVC(videoCodec)) && userAgentHevcSupportIsInaccurate()) {\n      return Promise.resolve(getUnsupportedResult(new Error(`Overriding Windows Firefox HEVC MediaCapabilities result based on user-agent string: (${ua})`), configurations));\n    }\n  }\n  return Promise.all(configurations.map((configuration) => {\n    const decodingInfoKey = getMediaDecodingInfoKey(configuration);\n    return cache[decodingInfoKey] || (cache[decodingInfoKey] = mediaCapabilities.decodingInfo(configuration));\n  })).then((decodingInfoResults) => ({\n    supported: !decodingInfoResults.some((info) => !info.supported),\n    configurations,\n    decodingInfoResults\n  })).catch((error) => ({\n    supported: false,\n    configurations,\n    decodingInfoResults: [],\n    error\n  }));\n}\nfunction makeVideoConfigurations(level) {\n  var _level$videoCodec;\n  const videoCodecs = (_level$videoCodec = level.videoCodec) == null ? void 0 : _level$videoCodec.split(\",\");\n  const bitrate = getVariantDecodingBitrate(level);\n  const width = level.width || 640;\n  const height = level.height || 480;\n  const framerate = level.frameRate || 30;\n  const videoRange = level.videoRange.toLowerCase();\n  return videoCodecs ? videoCodecs.map((videoCodec) => {\n    const videoConfiguration = {\n      contentType: mimeTypeForCodec(fillInMissingAV01Params(videoCodec), \"video\"),\n      width,\n      height,\n      bitrate,\n      framerate\n    };\n    if (videoRange !== \"sdr\") {\n      videoConfiguration.transferFunction = videoRange;\n    }\n    return videoConfiguration;\n  }) : [];\n}\nfunction makeAudioConfigurations(level, audioTracksByGroup, hasVideo) {\n  var _level$audioCodec;\n  const audioCodecs = (_level$audioCodec = level.audioCodec) == null ? void 0 : _level$audioCodec.split(\",\");\n  const combinedBitrate = getVariantDecodingBitrate(level);\n  if (audioCodecs && level.audioGroups) {\n    return level.audioGroups.reduce((configurations, audioGroupId) => {\n      var _audioTracksByGroup$g;\n      const tracks = audioGroupId ? (_audioTracksByGroup$g = audioTracksByGroup.groups[audioGroupId]) == null ? void 0 : _audioTracksByGroup$g.tracks : null;\n      if (tracks) {\n        return tracks.reduce((configs, audioTrack) => {\n          if (audioTrack.groupId === audioGroupId) {\n            const channelsNumber = parseFloat(audioTrack.channels || \"\");\n            audioCodecs.forEach((audioCodec) => {\n              const audioConfiguration = {\n                contentType: mimeTypeForCodec(audioCodec, \"audio\"),\n                bitrate: hasVideo ? estimatedAudioBitrate(audioCodec, combinedBitrate) : combinedBitrate\n              };\n              if (channelsNumber) {\n                audioConfiguration.channels = \"\" + channelsNumber;\n              }\n              configs.push(audioConfiguration);\n            });\n          }\n          return configs;\n        }, configurations);\n      }\n      return configurations;\n    }, []);\n  }\n  return [];\n}\nfunction estimatedAudioBitrate(audioCodec, levelBitrate) {\n  if (levelBitrate <= 1) {\n    return 1;\n  }\n  let audioBitrate = 128e3;\n  if (audioCodec === \"ec-3\") {\n    audioBitrate = 768e3;\n  } else if (audioCodec === \"ac-3\") {\n    audioBitrate = 64e4;\n  }\n  return Math.min(levelBitrate / 2, audioBitrate);\n}\nfunction getVariantDecodingBitrate(level) {\n  return Math.ceil(Math.max(level.bitrate * 0.9, level.averageBitrate) / 1e3) * 1e3 || 1;\n}\nfunction getMediaDecodingInfoKey(config) {\n  let key = \"\";\n  const {\n    audio,\n    video\n  } = config;\n  if (video) {\n    const codec = getCodecsForMimeType(video.contentType);\n    key += `${codec}_r${video.height}x${video.width}f${Math.ceil(video.framerate)}${video.transferFunction || \"sd\"}_${Math.ceil(video.bitrate / 1e5)}`;\n  }\n  if (audio) {\n    const codec = getCodecsForMimeType(audio.contentType);\n    key += `${video ? \"_\" : \"\"}${codec}_c${audio.channels}`;\n  }\n  return key;\n}\nconst HdcpLevels = [\"NONE\", \"TYPE-0\", \"TYPE-1\", null];\nfunction isHdcpLevel(value) {\n  return HdcpLevels.indexOf(value) > -1;\n}\nconst VideoRangeValues = [\"SDR\", \"PQ\", \"HLG\"];\nfunction isVideoRange(value) {\n  return !!value && VideoRangeValues.indexOf(value) > -1;\n}\nvar HlsSkip = {\n  No: \"\",\n  Yes: \"YES\",\n  v2: \"v2\"\n};\nfunction getSkipValue(details) {\n  const {\n    canSkipUntil,\n    canSkipDateRanges,\n    age\n  } = details;\n  const playlistRecentEnough = age < canSkipUntil / 2;\n  if (canSkipUntil && playlistRecentEnough) {\n    if (canSkipDateRanges) {\n      return HlsSkip.v2;\n    }\n    return HlsSkip.Yes;\n  }\n  return HlsSkip.No;\n}\nclass HlsUrlParameters {\n  constructor(msn, part, skip) {\n    this.msn = void 0;\n    this.part = void 0;\n    this.skip = void 0;\n    this.msn = msn;\n    this.part = part;\n    this.skip = skip;\n  }\n  addDirectives(uri) {\n    const url = new self.URL(uri);\n    if (this.msn !== void 0) {\n      url.searchParams.set(\"_HLS_msn\", this.msn.toString());\n    }\n    if (this.part !== void 0) {\n      url.searchParams.set(\"_HLS_part\", this.part.toString());\n    }\n    if (this.skip) {\n      url.searchParams.set(\"_HLS_skip\", this.skip);\n    }\n    return url.href;\n  }\n}\nclass Level {\n  constructor(data) {\n    this._attrs = void 0;\n    this.audioCodec = void 0;\n    this.bitrate = void 0;\n    this.codecSet = void 0;\n    this.url = void 0;\n    this.frameRate = void 0;\n    this.height = void 0;\n    this.id = void 0;\n    this.name = void 0;\n    this.supplemental = void 0;\n    this.videoCodec = void 0;\n    this.width = void 0;\n    this.details = void 0;\n    this.fragmentError = 0;\n    this.loadError = 0;\n    this.loaded = void 0;\n    this.realBitrate = 0;\n    this.supportedPromise = void 0;\n    this.supportedResult = void 0;\n    this._avgBitrate = 0;\n    this._audioGroups = void 0;\n    this._subtitleGroups = void 0;\n    this._urlId = 0;\n    this.url = [data.url];\n    this._attrs = [data.attrs];\n    this.bitrate = data.bitrate;\n    if (data.details) {\n      this.details = data.details;\n    }\n    this.id = data.id || 0;\n    this.name = data.name;\n    this.width = data.width || 0;\n    this.height = data.height || 0;\n    this.frameRate = data.attrs.optionalFloat(\"FRAME-RATE\", 0);\n    this._avgBitrate = data.attrs.decimalInteger(\"AVERAGE-BANDWIDTH\");\n    this.audioCodec = data.audioCodec;\n    this.videoCodec = data.videoCodec;\n    this.codecSet = [data.videoCodec, data.audioCodec].filter((c) => !!c).map((s) => s.substring(0, 4)).join(\",\");\n    if (\"supplemental\" in data) {\n      var _data$supplemental;\n      this.supplemental = data.supplemental;\n      const supplementalVideo = (_data$supplemental = data.supplemental) == null ? void 0 : _data$supplemental.videoCodec;\n      if (supplementalVideo && supplementalVideo !== data.videoCodec) {\n        this.codecSet += `,${supplementalVideo.substring(0, 4)}`;\n      }\n    }\n    this.addGroupId(\"audio\", data.attrs.AUDIO);\n    this.addGroupId(\"text\", data.attrs.SUBTITLES);\n  }\n  get maxBitrate() {\n    return Math.max(this.realBitrate, this.bitrate);\n  }\n  get averageBitrate() {\n    return this._avgBitrate || this.realBitrate || this.bitrate;\n  }\n  get attrs() {\n    return this._attrs[0];\n  }\n  get codecs() {\n    return this.attrs.CODECS || \"\";\n  }\n  get pathwayId() {\n    return this.attrs[\"PATHWAY-ID\"] || \".\";\n  }\n  get videoRange() {\n    return this.attrs[\"VIDEO-RANGE\"] || \"SDR\";\n  }\n  get score() {\n    return this.attrs.optionalFloat(\"SCORE\", 0);\n  }\n  get uri() {\n    return this.url[0] || \"\";\n  }\n  hasAudioGroup(groupId) {\n    return hasGroup(this._audioGroups, groupId);\n  }\n  hasSubtitleGroup(groupId) {\n    return hasGroup(this._subtitleGroups, groupId);\n  }\n  get audioGroups() {\n    return this._audioGroups;\n  }\n  get subtitleGroups() {\n    return this._subtitleGroups;\n  }\n  addGroupId(type, groupId) {\n    if (!groupId) {\n      return;\n    }\n    if (type === \"audio\") {\n      let audioGroups = this._audioGroups;\n      if (!audioGroups) {\n        audioGroups = this._audioGroups = [];\n      }\n      if (audioGroups.indexOf(groupId) === -1) {\n        audioGroups.push(groupId);\n      }\n    } else if (type === \"text\") {\n      let subtitleGroups = this._subtitleGroups;\n      if (!subtitleGroups) {\n        subtitleGroups = this._subtitleGroups = [];\n      }\n      if (subtitleGroups.indexOf(groupId) === -1) {\n        subtitleGroups.push(groupId);\n      }\n    }\n  }\n  // Deprecated methods (retained for backwards compatibility)\n  get urlId() {\n    return 0;\n  }\n  set urlId(value) {\n  }\n  get audioGroupIds() {\n    return this.audioGroups ? [this.audioGroupId] : void 0;\n  }\n  get textGroupIds() {\n    return this.subtitleGroups ? [this.textGroupId] : void 0;\n  }\n  get audioGroupId() {\n    var _this$audioGroups;\n    return (_this$audioGroups = this.audioGroups) == null ? void 0 : _this$audioGroups[0];\n  }\n  get textGroupId() {\n    var _this$subtitleGroups;\n    return (_this$subtitleGroups = this.subtitleGroups) == null ? void 0 : _this$subtitleGroups[0];\n  }\n  addFallback() {\n  }\n}\nfunction hasGroup(groups, groupId) {\n  if (!groupId || !groups) {\n    return false;\n  }\n  return groups.indexOf(groupId) !== -1;\n}\nfunction isHdrSupported() {\n  if (typeof matchMedia === \"function\") {\n    const mediaQueryList = matchMedia(\"(dynamic-range: high)\");\n    const badQuery = matchMedia(\"bad query\");\n    if (mediaQueryList.media !== badQuery.media) {\n      return mediaQueryList.matches === true;\n    }\n  }\n  return false;\n}\nfunction getVideoSelectionOptions(currentVideoRange, videoPreference) {\n  let preferHDR = false;\n  let allowedVideoRanges = [];\n  if (currentVideoRange) {\n    preferHDR = currentVideoRange !== \"SDR\";\n    allowedVideoRanges = [currentVideoRange];\n  }\n  if (videoPreference) {\n    allowedVideoRanges = videoPreference.allowedVideoRanges || VideoRangeValues.slice(0);\n    const allowAutoPreferHDR = allowedVideoRanges.join(\"\") !== \"SDR\" && !videoPreference.videoCodec;\n    preferHDR = videoPreference.preferHDR !== void 0 ? videoPreference.preferHDR : allowAutoPreferHDR && isHdrSupported();\n    if (!preferHDR) {\n      allowedVideoRanges = [\"SDR\"];\n    }\n  }\n  return {\n    preferHDR,\n    allowedVideoRanges\n  };\n}\nconst omitCircularRefsReplacer = (replacer) => {\n  const known = /* @__PURE__ */ new WeakSet();\n  return (_, value) => {\n    if (replacer) {\n      value = replacer(_, value);\n    }\n    if (typeof value === \"object\" && value !== null) {\n      if (known.has(value)) {\n        return;\n      }\n      known.add(value);\n    }\n    return value;\n  };\n};\nconst stringify = (object, replacer) => JSON.stringify(object, omitCircularRefsReplacer(replacer));\nfunction getStartCodecTier(codecTiers, currentVideoRange, currentBw, audioPreference, videoPreference) {\n  const codecSets = Object.keys(codecTiers);\n  const channelsPreference = audioPreference == null ? void 0 : audioPreference.channels;\n  const audioCodecPreference = audioPreference == null ? void 0 : audioPreference.audioCodec;\n  const videoCodecPreference = videoPreference == null ? void 0 : videoPreference.videoCodec;\n  const preferStereo = channelsPreference && parseInt(channelsPreference) === 2;\n  let hasStereo = false;\n  let hasCurrentVideoRange = false;\n  let minHeight = Infinity;\n  let minFramerate = Infinity;\n  let minBitrate = Infinity;\n  let minIndex = Infinity;\n  let selectedScore = 0;\n  let videoRanges = [];\n  const {\n    preferHDR,\n    allowedVideoRanges\n  } = getVideoSelectionOptions(currentVideoRange, videoPreference);\n  for (let i = codecSets.length; i--; ) {\n    const tier = codecTiers[codecSets[i]];\n    hasStereo || (hasStereo = tier.channels[2] > 0);\n    minHeight = Math.min(minHeight, tier.minHeight);\n    minFramerate = Math.min(minFramerate, tier.minFramerate);\n    minBitrate = Math.min(minBitrate, tier.minBitrate);\n    const matchingVideoRanges = allowedVideoRanges.filter((range) => tier.videoRanges[range] > 0);\n    if (matchingVideoRanges.length > 0) {\n      hasCurrentVideoRange = true;\n    }\n  }\n  minHeight = isFiniteNumber(minHeight) ? minHeight : 0;\n  minFramerate = isFiniteNumber(minFramerate) ? minFramerate : 0;\n  const maxHeight = Math.max(1080, minHeight);\n  const maxFramerate = Math.max(30, minFramerate);\n  minBitrate = isFiniteNumber(minBitrate) ? minBitrate : currentBw;\n  currentBw = Math.max(minBitrate, currentBw);\n  if (!hasCurrentVideoRange) {\n    currentVideoRange = void 0;\n  }\n  const hasMultipleSets = codecSets.length > 1;\n  const codecSet = codecSets.reduce((selected, candidate) => {\n    const candidateTier = codecTiers[candidate];\n    if (candidate === selected) {\n      return selected;\n    }\n    videoRanges = hasCurrentVideoRange ? allowedVideoRanges.filter((range) => candidateTier.videoRanges[range] > 0) : [];\n    if (hasMultipleSets) {\n      if (candidateTier.minBitrate > currentBw) {\n        logStartCodecCandidateIgnored(candidate, `min bitrate of ${candidateTier.minBitrate} > current estimate of ${currentBw}`);\n        return selected;\n      }\n      if (!candidateTier.hasDefaultAudio) {\n        logStartCodecCandidateIgnored(candidate, `no renditions with default or auto-select sound found`);\n        return selected;\n      }\n      if (audioCodecPreference && candidate.indexOf(audioCodecPreference.substring(0, 4)) % 5 !== 0) {\n        logStartCodecCandidateIgnored(candidate, `audio codec preference \"${audioCodecPreference}\" not found`);\n        return selected;\n      }\n      if (channelsPreference && !preferStereo) {\n        if (!candidateTier.channels[channelsPreference]) {\n          logStartCodecCandidateIgnored(candidate, `no renditions with ${channelsPreference} channel sound found (channels options: ${Object.keys(candidateTier.channels)})`);\n          return selected;\n        }\n      } else if ((!audioCodecPreference || preferStereo) && hasStereo && candidateTier.channels[\"2\"] === 0) {\n        logStartCodecCandidateIgnored(candidate, `no renditions with stereo sound found`);\n        return selected;\n      }\n      if (candidateTier.minHeight > maxHeight) {\n        logStartCodecCandidateIgnored(candidate, `min resolution of ${candidateTier.minHeight} > maximum of ${maxHeight}`);\n        return selected;\n      }\n      if (candidateTier.minFramerate > maxFramerate) {\n        logStartCodecCandidateIgnored(candidate, `min framerate of ${candidateTier.minFramerate} > maximum of ${maxFramerate}`);\n        return selected;\n      }\n      if (!videoRanges.some((range) => candidateTier.videoRanges[range] > 0)) {\n        logStartCodecCandidateIgnored(candidate, `no variants with VIDEO-RANGE of ${stringify(videoRanges)} found`);\n        return selected;\n      }\n      if (videoCodecPreference && candidate.indexOf(videoCodecPreference.substring(0, 4)) % 5 !== 0) {\n        logStartCodecCandidateIgnored(candidate, `video codec preference \"${videoCodecPreference}\" not found`);\n        return selected;\n      }\n      if (candidateTier.maxScore < selectedScore) {\n        logStartCodecCandidateIgnored(candidate, `max score of ${candidateTier.maxScore} < selected max of ${selectedScore}`);\n        return selected;\n      }\n    }\n    if (selected && (codecsSetSelectionPreferenceValue(candidate) >= codecsSetSelectionPreferenceValue(selected) || candidateTier.fragmentError > codecTiers[selected].fragmentError)) {\n      return selected;\n    }\n    minIndex = candidateTier.minIndex;\n    selectedScore = candidateTier.maxScore;\n    return candidate;\n  }, void 0);\n  return {\n    codecSet,\n    videoRanges,\n    preferHDR,\n    minFramerate,\n    minBitrate,\n    minIndex\n  };\n}\nfunction logStartCodecCandidateIgnored(codeSet, reason) {\n  logger.log(`[abr] start candidates with \"${codeSet}\" ignored because ${reason}`);\n}\nfunction getAudioTracksByGroup(allAudioTracks) {\n  return allAudioTracks.reduce((audioTracksByGroup, track) => {\n    let trackGroup = audioTracksByGroup.groups[track.groupId];\n    if (!trackGroup) {\n      trackGroup = audioTracksByGroup.groups[track.groupId] = {\n        tracks: [],\n        channels: {\n          2: 0\n        },\n        hasDefault: false,\n        hasAutoSelect: false\n      };\n    }\n    trackGroup.tracks.push(track);\n    const channelsKey = track.channels || \"2\";\n    trackGroup.channels[channelsKey] = (trackGroup.channels[channelsKey] || 0) + 1;\n    trackGroup.hasDefault = trackGroup.hasDefault || track.default;\n    trackGroup.hasAutoSelect = trackGroup.hasAutoSelect || track.autoselect;\n    if (trackGroup.hasDefault) {\n      audioTracksByGroup.hasDefaultAudio = true;\n    }\n    if (trackGroup.hasAutoSelect) {\n      audioTracksByGroup.hasAutoSelectAudio = true;\n    }\n    return audioTracksByGroup;\n  }, {\n    hasDefaultAudio: false,\n    hasAutoSelectAudio: false,\n    groups: {}\n  });\n}\nfunction getCodecTiers(levels, audioTracksByGroup, minAutoLevel, maxAutoLevel) {\n  return levels.slice(minAutoLevel, maxAutoLevel + 1).reduce((tiers, level, index) => {\n    if (!level.codecSet) {\n      return tiers;\n    }\n    const audioGroups = level.audioGroups;\n    let tier = tiers[level.codecSet];\n    if (!tier) {\n      tiers[level.codecSet] = tier = {\n        minBitrate: Infinity,\n        minHeight: Infinity,\n        minFramerate: Infinity,\n        minIndex: index,\n        maxScore: 0,\n        videoRanges: {\n          SDR: 0\n        },\n        channels: {\n          \"2\": 0\n        },\n        hasDefaultAudio: !audioGroups,\n        fragmentError: 0\n      };\n    }\n    tier.minBitrate = Math.min(tier.minBitrate, level.bitrate);\n    const lesserWidthOrHeight = Math.min(level.height, level.width);\n    tier.minHeight = Math.min(tier.minHeight, lesserWidthOrHeight);\n    tier.minFramerate = Math.min(tier.minFramerate, level.frameRate);\n    tier.minIndex = Math.min(tier.minIndex, index);\n    tier.maxScore = Math.max(tier.maxScore, level.score);\n    tier.fragmentError += level.fragmentError;\n    tier.videoRanges[level.videoRange] = (tier.videoRanges[level.videoRange] || 0) + 1;\n    if (audioGroups) {\n      audioGroups.forEach((audioGroupId) => {\n        if (!audioGroupId) {\n          return;\n        }\n        const audioGroup = audioTracksByGroup.groups[audioGroupId];\n        if (!audioGroup) {\n          return;\n        }\n        tier.hasDefaultAudio = tier.hasDefaultAudio || audioTracksByGroup.hasDefaultAudio ? audioGroup.hasDefault : audioGroup.hasAutoSelect || !audioTracksByGroup.hasDefaultAudio && !audioTracksByGroup.hasAutoSelectAudio;\n        Object.keys(audioGroup.channels).forEach((channels) => {\n          tier.channels[channels] = (tier.channels[channels] || 0) + audioGroup.channels[channels];\n        });\n      });\n    }\n    return tiers;\n  }, {});\n}\nfunction getBasicSelectionOption(option) {\n  if (!option) {\n    return option;\n  }\n  const {\n    lang,\n    assocLang,\n    characteristics,\n    channels,\n    audioCodec\n  } = option;\n  return {\n    lang,\n    assocLang,\n    characteristics,\n    channels,\n    audioCodec\n  };\n}\nfunction findMatchingOption(option, tracks, matchPredicate) {\n  if (\"attrs\" in option) {\n    const index = tracks.indexOf(option);\n    if (index !== -1) {\n      return index;\n    }\n  }\n  for (let i = 0; i < tracks.length; i++) {\n    const track = tracks[i];\n    if (matchesOption(option, track, matchPredicate)) {\n      return i;\n    }\n  }\n  return -1;\n}\nfunction matchesOption(option, track, matchPredicate) {\n  const {\n    groupId,\n    name,\n    lang,\n    assocLang,\n    default: isDefault\n  } = option;\n  const forced = option.forced;\n  return (groupId === void 0 || track.groupId === groupId) && (name === void 0 || track.name === name) && (lang === void 0 || languagesMatch(lang, track.lang)) && (lang === void 0 || track.assocLang === assocLang) && (isDefault === void 0 || track.default === isDefault) && (forced === void 0 || track.forced === forced) && (!(\"characteristics\" in option) || characteristicsMatch(option.characteristics || \"\", track.characteristics)) && (matchPredicate === void 0 || matchPredicate(option, track));\n}\nfunction languagesMatch(languageA, languageB = \"--\") {\n  if (languageA.length === languageB.length) {\n    return languageA === languageB;\n  }\n  return languageA.startsWith(languageB) || languageB.startsWith(languageA);\n}\nfunction characteristicsMatch(characteristicsA, characteristicsB = \"\") {\n  const arrA = characteristicsA.split(\",\");\n  const arrB = characteristicsB.split(\",\");\n  return arrA.length === arrB.length && !arrA.some((el) => arrB.indexOf(el) === -1);\n}\nfunction audioMatchPredicate(option, track) {\n  const {\n    audioCodec,\n    channels\n  } = option;\n  return (audioCodec === void 0 || (track.audioCodec || \"\").substring(0, 4) === audioCodec.substring(0, 4)) && (channels === void 0 || channels === (track.channels || \"2\"));\n}\nfunction findClosestLevelWithAudioGroup(option, levels, allAudioTracks, searchIndex, matchPredicate) {\n  const currentLevel = levels[searchIndex];\n  const variants = levels.reduce((variantMap, level, index) => {\n    const uri = level.uri;\n    const renditions2 = variantMap[uri] || (variantMap[uri] = []);\n    renditions2.push(index);\n    return variantMap;\n  }, {});\n  const renditions = variants[currentLevel.uri];\n  if (renditions.length > 1) {\n    searchIndex = Math.max.apply(Math, renditions);\n  }\n  const currentVideoRange = currentLevel.videoRange;\n  const currentFrameRate = currentLevel.frameRate;\n  const currentVideoCodec = currentLevel.codecSet.substring(0, 4);\n  const matchingVideo = searchDownAndUpList(levels, searchIndex, (level) => {\n    if (level.videoRange !== currentVideoRange || level.frameRate !== currentFrameRate || level.codecSet.substring(0, 4) !== currentVideoCodec) {\n      return false;\n    }\n    const audioGroups = level.audioGroups;\n    const tracks = allAudioTracks.filter((track) => !audioGroups || audioGroups.indexOf(track.groupId) !== -1);\n    return findMatchingOption(option, tracks, matchPredicate) > -1;\n  });\n  if (matchingVideo > -1) {\n    return matchingVideo;\n  }\n  return searchDownAndUpList(levels, searchIndex, (level) => {\n    const audioGroups = level.audioGroups;\n    const tracks = allAudioTracks.filter((track) => !audioGroups || audioGroups.indexOf(track.groupId) !== -1);\n    return findMatchingOption(option, tracks, matchPredicate) > -1;\n  });\n}\nfunction searchDownAndUpList(arr, searchIndex, predicate) {\n  for (let i = searchIndex; i > -1; i--) {\n    if (predicate(arr[i])) {\n      return i;\n    }\n  }\n  for (let i = searchIndex + 1; i < arr.length; i++) {\n    if (predicate(arr[i])) {\n      return i;\n    }\n  }\n  return -1;\n}\nfunction useAlternateAudio(audioTrackUrl, hls) {\n  var _hls$loadLevelObj;\n  return !!audioTrackUrl && audioTrackUrl !== ((_hls$loadLevelObj = hls.loadLevelObj) == null ? void 0 : _hls$loadLevelObj.uri);\n}\nclass AbrController extends Logger2 {\n  constructor(_hls) {\n    super(\"abr\", _hls.logger);\n    this.hls = void 0;\n    this.lastLevelLoadSec = 0;\n    this.lastLoadedFragLevel = -1;\n    this.firstSelection = -1;\n    this._nextAutoLevel = -1;\n    this.nextAutoLevelKey = \"\";\n    this.audioTracksByGroup = null;\n    this.codecTiers = null;\n    this.timer = -1;\n    this.fragCurrent = null;\n    this.partCurrent = null;\n    this.bitrateTestDelay = 0;\n    this.rebufferNotice = -1;\n    this.supportedCache = {};\n    this.bwEstimator = void 0;\n    this._abandonRulesCheck = (levelLoaded) => {\n      var _ref;\n      const {\n        fragCurrent: frag,\n        partCurrent: part,\n        hls\n      } = this;\n      const {\n        autoLevelEnabled,\n        media\n      } = hls;\n      if (!frag || !media) {\n        return;\n      }\n      const now2 = performance.now();\n      const stats = part ? part.stats : frag.stats;\n      const duration = part ? part.duration : frag.duration;\n      const timeLoading = now2 - stats.loading.start;\n      const minAutoLevel = hls.minAutoLevel;\n      const loadingFragForLevel = frag.level;\n      const currentAutoLevel = this._nextAutoLevel;\n      if (stats.aborted || stats.loaded && stats.loaded === stats.total || loadingFragForLevel <= minAutoLevel) {\n        this.clearTimer();\n        this._nextAutoLevel = -1;\n        return;\n      }\n      if (!autoLevelEnabled) {\n        return;\n      }\n      const fragBlockingSwitch = currentAutoLevel > -1 && currentAutoLevel !== loadingFragForLevel;\n      const levelChange = !!levelLoaded || fragBlockingSwitch;\n      if (!levelChange && (media.paused || !media.playbackRate || !media.readyState)) {\n        return;\n      }\n      const bufferInfo = hls.mainForwardBufferInfo;\n      if (!levelChange && bufferInfo === null) {\n        return;\n      }\n      const ttfbEstimate = this.bwEstimator.getEstimateTTFB();\n      const playbackRate = Math.abs(media.playbackRate);\n      if (timeLoading <= Math.max(ttfbEstimate, 1e3 * (duration / (playbackRate * 2)))) {\n        return;\n      }\n      const bufferStarvationDelay = bufferInfo ? bufferInfo.len / playbackRate : 0;\n      const ttfb = stats.loading.first ? stats.loading.first - stats.loading.start : -1;\n      const loadedFirstByte = stats.loaded && ttfb > -1;\n      const bwEstimate = this.getBwEstimate();\n      const levels = hls.levels;\n      const level = levels[loadingFragForLevel];\n      const expectedLen = Math.max(stats.loaded, Math.round(duration * (frag.bitrate || level.averageBitrate) / 8));\n      let timeStreaming = loadedFirstByte ? timeLoading - ttfb : timeLoading;\n      if (timeStreaming < 1 && loadedFirstByte) {\n        timeStreaming = Math.min(timeLoading, stats.loaded * 8 / bwEstimate);\n      }\n      const loadRate = loadedFirstByte ? stats.loaded * 1e3 / timeStreaming : 0;\n      const ttfbSeconds = ttfbEstimate / 1e3;\n      const fragLoadedDelay = loadRate ? (expectedLen - stats.loaded) / loadRate : expectedLen * 8 / bwEstimate + ttfbSeconds;\n      if (fragLoadedDelay <= bufferStarvationDelay) {\n        return;\n      }\n      const bwe = loadRate ? loadRate * 8 : bwEstimate;\n      const live = ((_ref = (levelLoaded == null ? void 0 : levelLoaded.details) || this.hls.latestLevelDetails) == null ? void 0 : _ref.live) === true;\n      const abrBandWidthUpFactor = this.hls.config.abrBandWidthUpFactor;\n      let fragLevelNextLoadedDelay = Number.POSITIVE_INFINITY;\n      let nextLoadLevel;\n      for (nextLoadLevel = loadingFragForLevel - 1; nextLoadLevel > minAutoLevel; nextLoadLevel--) {\n        const levelNextBitrate = levels[nextLoadLevel].maxBitrate;\n        const requiresLevelLoad = !levels[nextLoadLevel].details || live;\n        fragLevelNextLoadedDelay = this.getTimeToLoadFrag(ttfbSeconds, bwe, duration * levelNextBitrate, requiresLevelLoad);\n        if (fragLevelNextLoadedDelay < Math.min(bufferStarvationDelay, duration + ttfbSeconds)) {\n          break;\n        }\n      }\n      if (fragLevelNextLoadedDelay >= fragLoadedDelay) {\n        return;\n      }\n      if (fragLevelNextLoadedDelay > duration * 10) {\n        return;\n      }\n      if (loadedFirstByte) {\n        this.bwEstimator.sample(timeLoading - Math.min(ttfbEstimate, ttfb), stats.loaded);\n      } else {\n        this.bwEstimator.sampleTTFB(timeLoading);\n      }\n      const nextLoadLevelBitrate = levels[nextLoadLevel].maxBitrate;\n      if (this.getBwEstimate() * abrBandWidthUpFactor > nextLoadLevelBitrate) {\n        this.resetEstimator(nextLoadLevelBitrate);\n      }\n      const bestSwitchLevel = this.findBestLevel(nextLoadLevelBitrate, minAutoLevel, nextLoadLevel, 0, bufferStarvationDelay, 1, 1);\n      if (bestSwitchLevel > -1) {\n        nextLoadLevel = bestSwitchLevel;\n      }\n      this.warn(`Fragment ${frag.sn}${part ? \" part \" + part.index : \"\"} of level ${loadingFragForLevel} is loading too slowly;\n      Fragment duration: ${frag.duration.toFixed(3)}\n      Time to underbuffer: ${bufferStarvationDelay.toFixed(3)} s\n      Estimated load time for current fragment: ${fragLoadedDelay.toFixed(3)} s\n      Estimated load time for down switch fragment: ${fragLevelNextLoadedDelay.toFixed(3)} s\n      TTFB estimate: ${ttfb | 0} ms\n      Current BW estimate: ${isFiniteNumber(bwEstimate) ? bwEstimate | 0 : \"Unknown\"} bps\n      New BW estimate: ${this.getBwEstimate() | 0} bps\n      Switching to level ${nextLoadLevel} @ ${nextLoadLevelBitrate | 0} bps`);\n      hls.nextLoadLevel = hls.nextAutoLevel = nextLoadLevel;\n      this.clearTimer();\n      const abortAndSwitch = () => {\n        this.clearTimer();\n        if (this.fragCurrent === frag && this.hls.loadLevel === nextLoadLevel && nextLoadLevel > 0) {\n          const bufferStarvationDelay2 = this.getStarvationDelay();\n          this.warn(`Aborting inflight request ${nextLoadLevel > 0 ? \"and switching down\" : \"\"}\n      Fragment duration: ${frag.duration.toFixed(3)} s\n      Time to underbuffer: ${bufferStarvationDelay2.toFixed(3)} s`);\n          frag.abortRequests();\n          this.fragCurrent = this.partCurrent = null;\n          if (nextLoadLevel > minAutoLevel) {\n            let lowestSwitchLevel = this.findBestLevel(this.hls.levels[minAutoLevel].bitrate, minAutoLevel, nextLoadLevel, 0, bufferStarvationDelay2, 1, 1);\n            if (lowestSwitchLevel === -1) {\n              lowestSwitchLevel = minAutoLevel;\n            }\n            this.hls.nextLoadLevel = this.hls.nextAutoLevel = lowestSwitchLevel;\n            this.resetEstimator(this.hls.levels[lowestSwitchLevel].bitrate);\n          }\n        }\n      };\n      if (fragBlockingSwitch || fragLoadedDelay > fragLevelNextLoadedDelay * 2) {\n        abortAndSwitch();\n      } else {\n        this.timer = self.setInterval(abortAndSwitch, fragLevelNextLoadedDelay * 1e3);\n      }\n      hls.trigger(Events.FRAG_LOAD_EMERGENCY_ABORTED, {\n        frag,\n        part,\n        stats\n      });\n    };\n    this.hls = _hls;\n    this.bwEstimator = this.initEstimator();\n    this.registerListeners();\n  }\n  resetEstimator(abrEwmaDefaultEstimate) {\n    if (abrEwmaDefaultEstimate) {\n      this.log(`setting initial bwe to ${abrEwmaDefaultEstimate}`);\n      this.hls.config.abrEwmaDefaultEstimate = abrEwmaDefaultEstimate;\n    }\n    this.firstSelection = -1;\n    this.bwEstimator = this.initEstimator();\n  }\n  initEstimator() {\n    const config = this.hls.config;\n    return new EwmaBandWidthEstimator(config.abrEwmaSlowVoD, config.abrEwmaFastVoD, config.abrEwmaDefaultEstimate);\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.FRAG_LOADING, this.onFragLoading, this);\n    hls.on(Events.FRAG_LOADED, this.onFragLoaded, this);\n    hls.on(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n    hls.on(Events.LEVEL_SWITCHING, this.onLevelSwitching, this);\n    hls.on(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.on(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n    hls.on(Events.MAX_AUTO_LEVEL_UPDATED, this.onMaxAutoLevelUpdated, this);\n    hls.on(Events.ERROR, this.onError, this);\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    if (!hls) {\n      return;\n    }\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.FRAG_LOADING, this.onFragLoading, this);\n    hls.off(Events.FRAG_LOADED, this.onFragLoaded, this);\n    hls.off(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n    hls.off(Events.LEVEL_SWITCHING, this.onLevelSwitching, this);\n    hls.off(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.off(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n    hls.off(Events.MAX_AUTO_LEVEL_UPDATED, this.onMaxAutoLevelUpdated, this);\n    hls.off(Events.ERROR, this.onError, this);\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.clearTimer();\n    this.hls = this._abandonRulesCheck = this.supportedCache = null;\n    this.fragCurrent = this.partCurrent = null;\n  }\n  onManifestLoading(event, data) {\n    this.lastLoadedFragLevel = -1;\n    this.firstSelection = -1;\n    this.lastLevelLoadSec = 0;\n    this.supportedCache = {};\n    this.fragCurrent = this.partCurrent = null;\n    this.onLevelsUpdated();\n    this.clearTimer();\n  }\n  onLevelsUpdated() {\n    if (this.lastLoadedFragLevel > -1 && this.fragCurrent) {\n      this.lastLoadedFragLevel = this.fragCurrent.level;\n    }\n    this._nextAutoLevel = -1;\n    this.onMaxAutoLevelUpdated();\n    this.codecTiers = null;\n    this.audioTracksByGroup = null;\n  }\n  onMaxAutoLevelUpdated() {\n    this.firstSelection = -1;\n    this.nextAutoLevelKey = \"\";\n  }\n  onFragLoading(event, data) {\n    const frag = data.frag;\n    if (this.ignoreFragment(frag)) {\n      return;\n    }\n    if (!frag.bitrateTest) {\n      var _data$part;\n      this.fragCurrent = frag;\n      this.partCurrent = (_data$part = data.part) != null ? _data$part : null;\n    }\n    this.clearTimer();\n    this.timer = self.setInterval(this._abandonRulesCheck, 100);\n  }\n  onLevelSwitching(event, data) {\n    this.clearTimer();\n  }\n  onError(event, data) {\n    if (data.fatal) {\n      return;\n    }\n    switch (data.details) {\n      case ErrorDetails.BUFFER_ADD_CODEC_ERROR:\n      case ErrorDetails.BUFFER_APPEND_ERROR:\n        this.lastLoadedFragLevel = -1;\n        this.firstSelection = -1;\n        break;\n      case ErrorDetails.FRAG_LOAD_TIMEOUT: {\n        const frag = data.frag;\n        const {\n          fragCurrent,\n          partCurrent: part\n        } = this;\n        if (frag && fragCurrent && frag.sn === fragCurrent.sn && frag.level === fragCurrent.level) {\n          const now2 = performance.now();\n          const stats = part ? part.stats : frag.stats;\n          const timeLoading = now2 - stats.loading.start;\n          const ttfb = stats.loading.first ? stats.loading.first - stats.loading.start : -1;\n          const loadedFirstByte = stats.loaded && ttfb > -1;\n          if (loadedFirstByte) {\n            const ttfbEstimate = this.bwEstimator.getEstimateTTFB();\n            this.bwEstimator.sample(timeLoading - Math.min(ttfbEstimate, ttfb), stats.loaded);\n          } else {\n            this.bwEstimator.sampleTTFB(timeLoading);\n          }\n        }\n        break;\n      }\n    }\n  }\n  getTimeToLoadFrag(timeToFirstByteSec, bandwidth, fragSizeBits, isSwitch) {\n    const fragLoadSec = timeToFirstByteSec + fragSizeBits / bandwidth;\n    const playlistLoadSec = isSwitch ? timeToFirstByteSec + this.lastLevelLoadSec : 0;\n    return fragLoadSec + playlistLoadSec;\n  }\n  onLevelLoaded(event, data) {\n    const config = this.hls.config;\n    const {\n      loading\n    } = data.stats;\n    const timeLoadingMs = loading.end - loading.first;\n    if (isFiniteNumber(timeLoadingMs)) {\n      this.lastLevelLoadSec = timeLoadingMs / 1e3;\n    }\n    if (data.details.live) {\n      this.bwEstimator.update(config.abrEwmaSlowLive, config.abrEwmaFastLive);\n    } else {\n      this.bwEstimator.update(config.abrEwmaSlowVoD, config.abrEwmaFastVoD);\n    }\n    if (this.timer > -1) {\n      this._abandonRulesCheck(data.levelInfo);\n    }\n  }\n  onFragLoaded(event, {\n    frag,\n    part\n  }) {\n    const stats = part ? part.stats : frag.stats;\n    if (frag.type === PlaylistLevelType.MAIN) {\n      this.bwEstimator.sampleTTFB(stats.loading.first - stats.loading.start);\n    }\n    if (this.ignoreFragment(frag)) {\n      return;\n    }\n    this.clearTimer();\n    if (frag.level === this._nextAutoLevel) {\n      this._nextAutoLevel = -1;\n    }\n    this.firstSelection = -1;\n    if (this.hls.config.abrMaxWithRealBitrate) {\n      const duration = part ? part.duration : frag.duration;\n      const level = this.hls.levels[frag.level];\n      const loadedBytes = (level.loaded ? level.loaded.bytes : 0) + stats.loaded;\n      const loadedDuration = (level.loaded ? level.loaded.duration : 0) + duration;\n      level.loaded = {\n        bytes: loadedBytes,\n        duration: loadedDuration\n      };\n      level.realBitrate = Math.round(8 * loadedBytes / loadedDuration);\n    }\n    if (frag.bitrateTest) {\n      const fragBufferedData = {\n        stats,\n        frag,\n        part,\n        id: frag.type\n      };\n      this.onFragBuffered(Events.FRAG_BUFFERED, fragBufferedData);\n      frag.bitrateTest = false;\n    } else {\n      this.lastLoadedFragLevel = frag.level;\n    }\n  }\n  onFragBuffered(event, data) {\n    const {\n      frag,\n      part\n    } = data;\n    const stats = part != null && part.stats.loaded ? part.stats : frag.stats;\n    if (stats.aborted) {\n      return;\n    }\n    if (this.ignoreFragment(frag)) {\n      return;\n    }\n    const processingMs = stats.parsing.end - stats.loading.start - Math.min(stats.loading.first - stats.loading.start, this.bwEstimator.getEstimateTTFB());\n    this.bwEstimator.sample(processingMs, stats.loaded);\n    stats.bwEstimate = this.getBwEstimate();\n    if (frag.bitrateTest) {\n      this.bitrateTestDelay = processingMs / 1e3;\n    } else {\n      this.bitrateTestDelay = 0;\n    }\n  }\n  ignoreFragment(frag) {\n    return frag.type !== PlaylistLevelType.MAIN || frag.sn === \"initSegment\";\n  }\n  clearTimer() {\n    if (this.timer > -1) {\n      self.clearInterval(this.timer);\n      this.timer = -1;\n    }\n  }\n  get firstAutoLevel() {\n    const {\n      maxAutoLevel,\n      minAutoLevel\n    } = this.hls;\n    const bwEstimate = this.getBwEstimate();\n    const maxStartDelay = this.hls.config.maxStarvationDelay;\n    const abrAutoLevel = this.findBestLevel(bwEstimate, minAutoLevel, maxAutoLevel, 0, maxStartDelay, 1, 1);\n    if (abrAutoLevel > -1) {\n      return abrAutoLevel;\n    }\n    const firstLevel = this.hls.firstLevel;\n    const clamped = Math.min(Math.max(firstLevel, minAutoLevel), maxAutoLevel);\n    this.warn(`Could not find best starting auto level. Defaulting to first in playlist ${firstLevel} clamped to ${clamped}`);\n    return clamped;\n  }\n  get forcedAutoLevel() {\n    if (this.nextAutoLevelKey) {\n      return -1;\n    }\n    return this._nextAutoLevel;\n  }\n  // return next auto level\n  get nextAutoLevel() {\n    const forcedAutoLevel = this.forcedAutoLevel;\n    const bwEstimator = this.bwEstimator;\n    const useEstimate = bwEstimator.canEstimate();\n    const loadedFirstFrag = this.lastLoadedFragLevel > -1;\n    if (forcedAutoLevel !== -1 && (!useEstimate || !loadedFirstFrag || this.nextAutoLevelKey === this.getAutoLevelKey())) {\n      return forcedAutoLevel;\n    }\n    const nextABRAutoLevel = useEstimate && loadedFirstFrag ? this.getNextABRAutoLevel() : this.firstAutoLevel;\n    if (forcedAutoLevel !== -1) {\n      const levels = this.hls.levels;\n      if (levels.length > Math.max(forcedAutoLevel, nextABRAutoLevel) && levels[forcedAutoLevel].loadError <= levels[nextABRAutoLevel].loadError) {\n        return forcedAutoLevel;\n      }\n    }\n    this._nextAutoLevel = nextABRAutoLevel;\n    this.nextAutoLevelKey = this.getAutoLevelKey();\n    return nextABRAutoLevel;\n  }\n  getAutoLevelKey() {\n    return `${this.getBwEstimate()}_${this.getStarvationDelay().toFixed(2)}`;\n  }\n  getNextABRAutoLevel() {\n    const {\n      fragCurrent,\n      partCurrent,\n      hls\n    } = this;\n    if (hls.levels.length <= 1) {\n      return hls.loadLevel;\n    }\n    const {\n      maxAutoLevel,\n      config,\n      minAutoLevel\n    } = hls;\n    const currentFragDuration = partCurrent ? partCurrent.duration : fragCurrent ? fragCurrent.duration : 0;\n    const avgbw = this.getBwEstimate();\n    const bufferStarvationDelay = this.getStarvationDelay();\n    let bwFactor = config.abrBandWidthFactor;\n    let bwUpFactor = config.abrBandWidthUpFactor;\n    if (bufferStarvationDelay) {\n      const _bestLevel = this.findBestLevel(avgbw, minAutoLevel, maxAutoLevel, bufferStarvationDelay, 0, bwFactor, bwUpFactor);\n      if (_bestLevel >= 0) {\n        this.rebufferNotice = -1;\n        return _bestLevel;\n      }\n    }\n    let maxStarvationDelay = currentFragDuration ? Math.min(currentFragDuration, config.maxStarvationDelay) : config.maxStarvationDelay;\n    if (!bufferStarvationDelay) {\n      const bitrateTestDelay = this.bitrateTestDelay;\n      if (bitrateTestDelay) {\n        const maxLoadingDelay = currentFragDuration ? Math.min(currentFragDuration, config.maxLoadingDelay) : config.maxLoadingDelay;\n        maxStarvationDelay = maxLoadingDelay - bitrateTestDelay;\n        this.info(`bitrate test took ${Math.round(1e3 * bitrateTestDelay)}ms, set first fragment max fetchDuration to ${Math.round(1e3 * maxStarvationDelay)} ms`);\n        bwFactor = bwUpFactor = 1;\n      }\n    }\n    const bestLevel = this.findBestLevel(avgbw, minAutoLevel, maxAutoLevel, bufferStarvationDelay, maxStarvationDelay, bwFactor, bwUpFactor);\n    if (this.rebufferNotice !== bestLevel) {\n      this.rebufferNotice = bestLevel;\n      this.info(`${bufferStarvationDelay ? \"rebuffering expected\" : \"buffer is empty\"}, optimal quality level ${bestLevel}`);\n    }\n    if (bestLevel > -1) {\n      return bestLevel;\n    }\n    const minLevel = hls.levels[minAutoLevel];\n    const autoLevel = hls.loadLevelObj;\n    if (autoLevel && (minLevel == null ? void 0 : minLevel.bitrate) < autoLevel.bitrate) {\n      return minAutoLevel;\n    }\n    return hls.loadLevel;\n  }\n  getStarvationDelay() {\n    const hls = this.hls;\n    const media = hls.media;\n    if (!media) {\n      return Infinity;\n    }\n    const playbackRate = media && media.playbackRate !== 0 ? Math.abs(media.playbackRate) : 1;\n    const bufferInfo = hls.mainForwardBufferInfo;\n    return (bufferInfo ? bufferInfo.len : 0) / playbackRate;\n  }\n  getBwEstimate() {\n    return this.bwEstimator.canEstimate() ? this.bwEstimator.getEstimate() : this.hls.config.abrEwmaDefaultEstimate;\n  }\n  findBestLevel(currentBw, minAutoLevel, maxAutoLevel, bufferStarvationDelay, maxStarvationDelay, bwFactor, bwUpFactor) {\n    var _this$hls$latestLevel;\n    const maxFetchDuration = bufferStarvationDelay + maxStarvationDelay;\n    const lastLoadedFragLevel = this.lastLoadedFragLevel;\n    const selectionBaseLevel = lastLoadedFragLevel === -1 ? this.hls.firstLevel : lastLoadedFragLevel;\n    const {\n      fragCurrent,\n      partCurrent\n    } = this;\n    const {\n      levels,\n      allAudioTracks,\n      loadLevel,\n      config\n    } = this.hls;\n    if (levels.length === 1) {\n      return 0;\n    }\n    const level = levels[selectionBaseLevel];\n    const live = !!((_this$hls$latestLevel = this.hls.latestLevelDetails) != null && _this$hls$latestLevel.live);\n    const firstSelection = loadLevel === -1 || lastLoadedFragLevel === -1;\n    let currentCodecSet;\n    let currentVideoRange = \"SDR\";\n    let currentFrameRate = (level == null ? void 0 : level.frameRate) || 0;\n    const {\n      audioPreference,\n      videoPreference\n    } = config;\n    const audioTracksByGroup = this.audioTracksByGroup || (this.audioTracksByGroup = getAudioTracksByGroup(allAudioTracks));\n    let minStartIndex = -1;\n    if (firstSelection) {\n      if (this.firstSelection !== -1) {\n        return this.firstSelection;\n      }\n      const codecTiers = this.codecTiers || (this.codecTiers = getCodecTiers(levels, audioTracksByGroup, minAutoLevel, maxAutoLevel));\n      const startTier = getStartCodecTier(codecTiers, currentVideoRange, currentBw, audioPreference, videoPreference);\n      const {\n        codecSet,\n        videoRanges,\n        minFramerate,\n        minBitrate,\n        minIndex,\n        preferHDR\n      } = startTier;\n      minStartIndex = minIndex;\n      currentCodecSet = codecSet;\n      currentVideoRange = preferHDR ? videoRanges[videoRanges.length - 1] : videoRanges[0];\n      currentFrameRate = minFramerate;\n      currentBw = Math.max(currentBw, minBitrate);\n      this.log(`picked start tier ${stringify(startTier)}`);\n    } else {\n      currentCodecSet = level == null ? void 0 : level.codecSet;\n      currentVideoRange = level == null ? void 0 : level.videoRange;\n    }\n    const currentFragDuration = partCurrent ? partCurrent.duration : fragCurrent ? fragCurrent.duration : 0;\n    const ttfbEstimateSec = this.bwEstimator.getEstimateTTFB() / 1e3;\n    const levelsSkipped = [];\n    for (let i = maxAutoLevel; i >= minAutoLevel; i--) {\n      var _levelInfo$supportedR, _levelInfo$supportedR2;\n      const levelInfo = levels[i];\n      const upSwitch = i > selectionBaseLevel;\n      if (!levelInfo) {\n        continue;\n      }\n      if (config.useMediaCapabilities && !levelInfo.supportedResult && !levelInfo.supportedPromise) {\n        const mediaCapabilities = navigator.mediaCapabilities;\n        if (typeof (mediaCapabilities == null ? void 0 : mediaCapabilities.decodingInfo) === \"function\" && requiresMediaCapabilitiesDecodingInfo(levelInfo, audioTracksByGroup, currentVideoRange, currentFrameRate, currentBw, audioPreference)) {\n          levelInfo.supportedPromise = getMediaDecodingInfoPromise(levelInfo, audioTracksByGroup, mediaCapabilities, this.supportedCache);\n          levelInfo.supportedPromise.then((decodingInfo) => {\n            if (!this.hls) {\n              return;\n            }\n            levelInfo.supportedResult = decodingInfo;\n            const levels2 = this.hls.levels;\n            const index = levels2.indexOf(levelInfo);\n            if (decodingInfo.error) {\n              this.warn(`MediaCapabilities decodingInfo error: \"${decodingInfo.error}\" for level ${index} ${stringify(decodingInfo)}`);\n            } else if (!decodingInfo.supported) {\n              this.warn(`Unsupported MediaCapabilities decodingInfo result for level ${index} ${stringify(decodingInfo)}`);\n              if (index > -1 && levels2.length > 1) {\n                this.log(`Removing unsupported level ${index}`);\n                this.hls.removeLevel(index);\n                if (this.hls.loadLevel === -1) {\n                  this.hls.nextLoadLevel = 0;\n                }\n              }\n            } else if (decodingInfo.decodingInfoResults.some((info) => info.smooth === false || info.powerEfficient === false)) {\n              this.log(`MediaCapabilities decodingInfo for level ${index} not smooth or powerEfficient: ${stringify(decodingInfo)}`);\n            }\n          });\n        } else {\n          levelInfo.supportedResult = SUPPORTED_INFO_DEFAULT;\n        }\n      }\n      if (currentCodecSet && levelInfo.codecSet !== currentCodecSet || currentVideoRange && levelInfo.videoRange !== currentVideoRange || upSwitch && currentFrameRate > levelInfo.frameRate || !upSwitch && currentFrameRate > 0 && currentFrameRate < levelInfo.frameRate || (_levelInfo$supportedR = levelInfo.supportedResult) != null && (_levelInfo$supportedR2 = _levelInfo$supportedR.decodingInfoResults) != null && _levelInfo$supportedR2.some((info) => info.smooth === false)) {\n        if (!firstSelection || i !== minStartIndex) {\n          levelsSkipped.push(i);\n          continue;\n        }\n      }\n      const levelDetails = levelInfo.details;\n      const avgDuration = (partCurrent ? levelDetails == null ? void 0 : levelDetails.partTarget : levelDetails == null ? void 0 : levelDetails.averagetargetduration) || currentFragDuration;\n      let adjustedbw;\n      if (!upSwitch) {\n        adjustedbw = bwFactor * currentBw;\n      } else {\n        adjustedbw = bwUpFactor * currentBw;\n      }\n      const bitrate = currentFragDuration && bufferStarvationDelay >= currentFragDuration * 2 && maxStarvationDelay === 0 ? levelInfo.averageBitrate : levelInfo.maxBitrate;\n      const fetchDuration = this.getTimeToLoadFrag(ttfbEstimateSec, adjustedbw, bitrate * avgDuration, levelDetails === void 0);\n      const canSwitchWithinTolerance = (\n        // if adjusted bw is greater than level bitrate AND\n        adjustedbw >= bitrate && // no level change, or new level has no error history\n        (i === lastLoadedFragLevel || levelInfo.loadError === 0 && levelInfo.fragmentError === 0) && // fragment fetchDuration unknown OR live stream OR fragment fetchDuration less than max allowed fetch duration, then this level matches\n        // we don't account for max Fetch Duration for live streams, this is to avoid switching down when near the edge of live sliding window ...\n        // special case to support startLevel = -1 (bitrateTest) on live streams : in that case we should not exit loop so that findBestLevel will return -1\n        (fetchDuration <= ttfbEstimateSec || !isFiniteNumber(fetchDuration) || live && !this.bitrateTestDelay || fetchDuration < maxFetchDuration)\n      );\n      if (canSwitchWithinTolerance) {\n        const forcedAutoLevel = this.forcedAutoLevel;\n        if (i !== loadLevel && (forcedAutoLevel === -1 || forcedAutoLevel !== loadLevel)) {\n          if (levelsSkipped.length) {\n            this.trace(`Skipped level(s) ${levelsSkipped.join(\",\")} of ${maxAutoLevel} max with CODECS and VIDEO-RANGE:\"${levels[levelsSkipped[0]].codecs}\" ${levels[levelsSkipped[0]].videoRange}; not compatible with \"${currentCodecSet}\" ${currentVideoRange}`);\n          }\n          this.info(`switch candidate:${selectionBaseLevel}->${i} adjustedbw(${Math.round(adjustedbw)})-bitrate=${Math.round(adjustedbw - bitrate)} ttfb:${ttfbEstimateSec.toFixed(1)} avgDuration:${avgDuration.toFixed(1)} maxFetchDuration:${maxFetchDuration.toFixed(1)} fetchDuration:${fetchDuration.toFixed(1)} firstSelection:${firstSelection} codecSet:${levelInfo.codecSet} videoRange:${levelInfo.videoRange} hls.loadLevel:${loadLevel}`);\n        }\n        if (firstSelection) {\n          this.firstSelection = i;\n        }\n        return i;\n      }\n    }\n    return -1;\n  }\n  set nextAutoLevel(nextLevel) {\n    const value = this.deriveNextAutoLevel(nextLevel);\n    if (this._nextAutoLevel !== value) {\n      this.nextAutoLevelKey = \"\";\n      this._nextAutoLevel = value;\n    }\n  }\n  deriveNextAutoLevel(nextLevel) {\n    const {\n      maxAutoLevel,\n      minAutoLevel\n    } = this.hls;\n    return Math.min(Math.max(nextLevel, minAutoLevel), maxAutoLevel);\n  }\n}\nconst BinarySearch = {\n  /**\n   * Searches for an item in an array which matches a certain condition.\n   * This requires the condition to only match one item in the array,\n   * and for the array to be ordered.\n   *\n   * @param list The array to search.\n   * @param comparisonFn\n   *      Called and provided a candidate item as the first argument.\n   *      Should return:\n   *          > -1 if the item should be located at a lower index than the provided item.\n   *          > 1 if the item should be located at a higher index than the provided item.\n   *          > 0 if the item is the item you're looking for.\n   *\n   * @returns the object if found, otherwise returns null\n   */\n  search: function(list, comparisonFn) {\n    let minIndex = 0;\n    let maxIndex = list.length - 1;\n    let currentIndex = null;\n    let currentElement = null;\n    while (minIndex <= maxIndex) {\n      currentIndex = (minIndex + maxIndex) / 2 | 0;\n      currentElement = list[currentIndex];\n      const comparisonResult = comparisonFn(currentElement);\n      if (comparisonResult > 0) {\n        minIndex = currentIndex + 1;\n      } else if (comparisonResult < 0) {\n        maxIndex = currentIndex - 1;\n      } else {\n        return currentElement;\n      }\n    }\n    return null;\n  }\n};\nfunction findFragmentByPDT(fragments, PDTValue, maxFragLookUpTolerance) {\n  if (PDTValue === null || !Array.isArray(fragments) || !fragments.length || !isFiniteNumber(PDTValue)) {\n    return null;\n  }\n  const startPDT = fragments[0].programDateTime;\n  if (PDTValue < (startPDT || 0)) {\n    return null;\n  }\n  const endPDT = fragments[fragments.length - 1].endProgramDateTime;\n  if (PDTValue >= (endPDT || 0)) {\n    return null;\n  }\n  for (let seg = 0; seg < fragments.length; ++seg) {\n    const frag = fragments[seg];\n    if (pdtWithinToleranceTest(PDTValue, maxFragLookUpTolerance, frag)) {\n      return frag;\n    }\n  }\n  return null;\n}\nfunction findFragmentByPTS(fragPrevious, fragments, bufferEnd = 0, maxFragLookUpTolerance = 0, nextFragLookupTolerance = 5e-3) {\n  let fragNext = null;\n  if (fragPrevious) {\n    fragNext = fragments[1 + fragPrevious.sn - fragments[0].sn] || null;\n    const bufferEdgeError = fragPrevious.endDTS - bufferEnd;\n    if (bufferEdgeError > 0 && bufferEdgeError < 15e-7) {\n      bufferEnd += 15e-7;\n    }\n    if (fragNext && fragPrevious.level !== fragNext.level && fragNext.end <= fragPrevious.end) {\n      fragNext = fragments[2 + fragPrevious.sn - fragments[0].sn] || null;\n    }\n  } else if (bufferEnd === 0 && fragments[0].start === 0) {\n    fragNext = fragments[0];\n  }\n  if (fragNext && ((!fragPrevious || fragPrevious.level === fragNext.level) && fragmentWithinToleranceTest(bufferEnd, maxFragLookUpTolerance, fragNext) === 0 || fragmentWithinFastStartSwitch(fragNext, fragPrevious, Math.min(nextFragLookupTolerance, maxFragLookUpTolerance)))) {\n    return fragNext;\n  }\n  const foundFragment = BinarySearch.search(fragments, fragmentWithinToleranceTest.bind(null, bufferEnd, maxFragLookUpTolerance));\n  if (foundFragment && (foundFragment !== fragPrevious || !fragNext)) {\n    return foundFragment;\n  }\n  return fragNext;\n}\nfunction fragmentWithinFastStartSwitch(fragNext, fragPrevious, nextFragLookupTolerance) {\n  if (fragPrevious && fragPrevious.start === 0 && fragPrevious.level < fragNext.level && (fragPrevious.endPTS || 0) > 0) {\n    const firstDuration = fragPrevious.tagList.reduce((duration, tag) => {\n      if (tag[0] === \"INF\") {\n        duration += parseFloat(tag[1]);\n      }\n      return duration;\n    }, nextFragLookupTolerance);\n    return fragNext.start <= firstDuration;\n  }\n  return false;\n}\nfunction fragmentWithinToleranceTest(bufferEnd = 0, maxFragLookUpTolerance = 0, candidate) {\n  if (candidate.start <= bufferEnd && candidate.start + candidate.duration > bufferEnd) {\n    return 0;\n  }\n  const candidateLookupTolerance = Math.min(maxFragLookUpTolerance, candidate.duration + (candidate.deltaPTS ? candidate.deltaPTS : 0));\n  if (candidate.start + candidate.duration - candidateLookupTolerance <= bufferEnd) {\n    return 1;\n  } else if (candidate.start - candidateLookupTolerance > bufferEnd && candidate.start) {\n    return -1;\n  }\n  return 0;\n}\nfunction pdtWithinToleranceTest(pdtBufferEnd, maxFragLookUpTolerance, candidate) {\n  const candidateLookupTolerance = Math.min(maxFragLookUpTolerance, candidate.duration + (candidate.deltaPTS ? candidate.deltaPTS : 0)) * 1e3;\n  const endProgramDateTime = candidate.endProgramDateTime || 0;\n  return endProgramDateTime - candidateLookupTolerance > pdtBufferEnd;\n}\nfunction findNearestWithCC(details, cc, pos) {\n  if (details) {\n    if (details.startCC <= cc && details.endCC >= cc) {\n      let fragments = details.fragments;\n      const {\n        fragmentHint\n      } = details;\n      if (fragmentHint) {\n        fragments = fragments.concat(fragmentHint);\n      }\n      let closest;\n      BinarySearch.search(fragments, (candidate) => {\n        if (candidate.cc < cc) {\n          return 1;\n        }\n        if (candidate.cc > cc) {\n          return -1;\n        }\n        closest = candidate;\n        if (candidate.end <= pos) {\n          return 1;\n        }\n        if (candidate.start > pos) {\n          return -1;\n        }\n        return 0;\n      });\n      return closest || null;\n    }\n  }\n  return null;\n}\nfunction isTimeoutError(error) {\n  switch (error.details) {\n    case ErrorDetails.FRAG_LOAD_TIMEOUT:\n    case ErrorDetails.KEY_LOAD_TIMEOUT:\n    case ErrorDetails.LEVEL_LOAD_TIMEOUT:\n    case ErrorDetails.MANIFEST_LOAD_TIMEOUT:\n      return true;\n  }\n  return false;\n}\nfunction getRetryConfig(loadPolicy, error) {\n  const isTimeout = isTimeoutError(error);\n  return loadPolicy.default[`${isTimeout ? \"timeout\" : \"error\"}Retry`];\n}\nfunction getRetryDelay(retryConfig, retryCount) {\n  const backoffFactor = retryConfig.backoff === \"linear\" ? 1 : Math.pow(2, retryCount);\n  return Math.min(backoffFactor * retryConfig.retryDelayMs, retryConfig.maxRetryDelayMs);\n}\nfunction getLoaderConfigWithoutReties(loderConfig) {\n  return _objectSpread2(_objectSpread2({}, loderConfig), {\n    errorRetry: null,\n    timeoutRetry: null\n  });\n}\nfunction shouldRetry(retryConfig, retryCount, isTimeout, loaderResponse) {\n  if (!retryConfig) {\n    return false;\n  }\n  const httpStatus = loaderResponse == null ? void 0 : loaderResponse.code;\n  const retry = retryCount < retryConfig.maxNumRetry && (retryForHttpStatus(httpStatus) || !!isTimeout);\n  return retryConfig.shouldRetry ? retryConfig.shouldRetry(retryConfig, retryCount, isTimeout, loaderResponse, retry) : retry;\n}\nfunction retryForHttpStatus(httpStatus) {\n  return httpStatus === 0 && navigator.onLine === false || !!httpStatus && (httpStatus < 400 || httpStatus > 499);\n}\nvar NetworkErrorAction = {\n  DoNothing: 0,\n  SendAlternateToPenaltyBox: 2,\n  RemoveAlternatePermanently: 3,\n  RetryRequest: 5\n};\nvar ErrorActionFlags = {\n  None: 0,\n  MoveAllAlternatesMatchingHost: 1,\n  MoveAllAlternatesMatchingHDCP: 2\n};\nclass ErrorController extends Logger2 {\n  constructor(hls) {\n    super(\"error-controller\", hls.logger);\n    this.hls = void 0;\n    this.playlistError = 0;\n    this.penalizedRenditions = {};\n    this.hls = hls;\n    this.registerListeners();\n  }\n  registerListeners() {\n    const hls = this.hls;\n    hls.on(Events.ERROR, this.onError, this);\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n  }\n  unregisterListeners() {\n    const hls = this.hls;\n    if (!hls) {\n      return;\n    }\n    hls.off(Events.ERROR, this.onError, this);\n    hls.off(Events.ERROR, this.onErrorOut, this);\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.hls = null;\n    this.penalizedRenditions = {};\n  }\n  startLoad(startPosition) {\n  }\n  stopLoad() {\n    this.playlistError = 0;\n  }\n  getVariantLevelIndex(frag) {\n    return (frag == null ? void 0 : frag.type) === PlaylistLevelType.MAIN ? frag.level : this.hls.loadLevel;\n  }\n  onManifestLoading() {\n    this.playlistError = 0;\n    this.penalizedRenditions = {};\n  }\n  onLevelUpdated() {\n    this.playlistError = 0;\n  }\n  onError(event, data) {\n    var _data$frag;\n    if (data.fatal) {\n      return;\n    }\n    const hls = this.hls;\n    const context = data.context;\n    switch (data.details) {\n      case ErrorDetails.FRAG_LOAD_ERROR:\n      case ErrorDetails.FRAG_LOAD_TIMEOUT:\n      case ErrorDetails.KEY_LOAD_ERROR:\n      case ErrorDetails.KEY_LOAD_TIMEOUT:\n        data.errorAction = this.getFragRetryOrSwitchAction(data);\n        return;\n      case ErrorDetails.FRAG_PARSING_ERROR:\n        if ((_data$frag = data.frag) != null && _data$frag.gap) {\n          data.errorAction = createDoNothingErrorAction();\n          return;\n        }\n      // falls through\n      case ErrorDetails.FRAG_GAP:\n      case ErrorDetails.FRAG_DECRYPT_ERROR: {\n        data.errorAction = this.getFragRetryOrSwitchAction(data);\n        data.errorAction.action = NetworkErrorAction.SendAlternateToPenaltyBox;\n        return;\n      }\n      case ErrorDetails.LEVEL_EMPTY_ERROR:\n      case ErrorDetails.LEVEL_PARSING_ERROR:\n        {\n          var _data$context, _data$context$levelDe;\n          const levelIndex = data.parent === PlaylistLevelType.MAIN ? data.level : hls.loadLevel;\n          if (data.details === ErrorDetails.LEVEL_EMPTY_ERROR && !!((_data$context = data.context) != null && (_data$context$levelDe = _data$context.levelDetails) != null && _data$context$levelDe.live)) {\n            data.errorAction = this.getPlaylistRetryOrSwitchAction(data, levelIndex);\n          } else {\n            data.levelRetry = false;\n            data.errorAction = this.getLevelSwitchAction(data, levelIndex);\n          }\n        }\n        return;\n      case ErrorDetails.LEVEL_LOAD_ERROR:\n      case ErrorDetails.LEVEL_LOAD_TIMEOUT:\n        if (typeof (context == null ? void 0 : context.level) === \"number\") {\n          data.errorAction = this.getPlaylistRetryOrSwitchAction(data, context.level);\n        }\n        return;\n      case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:\n      case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:\n      case ErrorDetails.SUBTITLE_LOAD_ERROR:\n      case ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT:\n        if (context) {\n          const level = hls.loadLevelObj;\n          if (level && (context.type === PlaylistContextType.AUDIO_TRACK && level.hasAudioGroup(context.groupId) || context.type === PlaylistContextType.SUBTITLE_TRACK && level.hasSubtitleGroup(context.groupId))) {\n            data.errorAction = this.getPlaylistRetryOrSwitchAction(data, hls.loadLevel);\n            data.errorAction.action = NetworkErrorAction.SendAlternateToPenaltyBox;\n            data.errorAction.flags = ErrorActionFlags.MoveAllAlternatesMatchingHost;\n            return;\n          }\n        }\n        return;\n      case ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED:\n        {\n          const level = hls.loadLevelObj;\n          const restrictedHdcpLevel = level == null ? void 0 : level.attrs[\"HDCP-LEVEL\"];\n          if (restrictedHdcpLevel) {\n            data.errorAction = {\n              action: NetworkErrorAction.SendAlternateToPenaltyBox,\n              flags: ErrorActionFlags.MoveAllAlternatesMatchingHDCP,\n              hdcpLevel: restrictedHdcpLevel\n            };\n          } else {\n            this.keySystemError(data);\n          }\n        }\n        return;\n      case ErrorDetails.BUFFER_ADD_CODEC_ERROR:\n      case ErrorDetails.REMUX_ALLOC_ERROR:\n      case ErrorDetails.BUFFER_APPEND_ERROR:\n        if (!data.errorAction) {\n          var _data$level;\n          data.errorAction = this.getLevelSwitchAction(data, (_data$level = data.level) != null ? _data$level : hls.loadLevel);\n        }\n        return;\n      case ErrorDetails.INTERNAL_EXCEPTION:\n      case ErrorDetails.BUFFER_APPENDING_ERROR:\n      case ErrorDetails.BUFFER_FULL_ERROR:\n      case ErrorDetails.LEVEL_SWITCH_ERROR:\n      case ErrorDetails.BUFFER_STALLED_ERROR:\n      case ErrorDetails.BUFFER_SEEK_OVER_HOLE:\n      case ErrorDetails.BUFFER_NUDGE_ON_STALL:\n        data.errorAction = createDoNothingErrorAction();\n        return;\n    }\n    if (data.type === ErrorTypes.KEY_SYSTEM_ERROR) {\n      this.keySystemError(data);\n    }\n  }\n  keySystemError(data) {\n    const levelIndex = this.getVariantLevelIndex(data.frag);\n    data.levelRetry = false;\n    data.errorAction = this.getLevelSwitchAction(data, levelIndex);\n  }\n  getPlaylistRetryOrSwitchAction(data, levelIndex) {\n    const hls = this.hls;\n    const retryConfig = getRetryConfig(hls.config.playlistLoadPolicy, data);\n    const retryCount = this.playlistError++;\n    const retry = shouldRetry(retryConfig, retryCount, isTimeoutError(data), data.response);\n    if (retry) {\n      return {\n        action: NetworkErrorAction.RetryRequest,\n        flags: ErrorActionFlags.None,\n        retryConfig,\n        retryCount\n      };\n    }\n    const errorAction = this.getLevelSwitchAction(data, levelIndex);\n    if (retryConfig) {\n      errorAction.retryConfig = retryConfig;\n      errorAction.retryCount = retryCount;\n    }\n    return errorAction;\n  }\n  getFragRetryOrSwitchAction(data) {\n    const hls = this.hls;\n    const variantLevelIndex = this.getVariantLevelIndex(data.frag);\n    const level = hls.levels[variantLevelIndex];\n    const {\n      fragLoadPolicy,\n      keyLoadPolicy\n    } = hls.config;\n    const retryConfig = getRetryConfig(data.details.startsWith(\"key\") ? keyLoadPolicy : fragLoadPolicy, data);\n    const fragmentErrors = hls.levels.reduce((acc, level2) => acc + level2.fragmentError, 0);\n    if (level) {\n      if (data.details !== ErrorDetails.FRAG_GAP) {\n        level.fragmentError++;\n      }\n      const retry = shouldRetry(retryConfig, fragmentErrors, isTimeoutError(data), data.response);\n      if (retry) {\n        return {\n          action: NetworkErrorAction.RetryRequest,\n          flags: ErrorActionFlags.None,\n          retryConfig,\n          retryCount: fragmentErrors\n        };\n      }\n    }\n    const errorAction = this.getLevelSwitchAction(data, variantLevelIndex);\n    if (retryConfig) {\n      errorAction.retryConfig = retryConfig;\n      errorAction.retryCount = fragmentErrors;\n    }\n    return errorAction;\n  }\n  getLevelSwitchAction(data, levelIndex) {\n    const hls = this.hls;\n    if (levelIndex === null || levelIndex === void 0) {\n      levelIndex = hls.loadLevel;\n    }\n    const level = this.hls.levels[levelIndex];\n    if (level) {\n      var _data$frag2, _data$context2;\n      const errorDetails = data.details;\n      level.loadError++;\n      if (errorDetails === ErrorDetails.BUFFER_APPEND_ERROR) {\n        level.fragmentError++;\n      }\n      let nextLevel = -1;\n      const {\n        levels,\n        loadLevel,\n        minAutoLevel,\n        maxAutoLevel\n      } = hls;\n      if (!hls.autoLevelEnabled && !hls.config.preserveManualLevelOnError) {\n        hls.loadLevel = -1;\n      }\n      const fragErrorType = (_data$frag2 = data.frag) == null ? void 0 : _data$frag2.type;\n      const isAudioCodecError = fragErrorType === PlaylistLevelType.AUDIO && errorDetails === ErrorDetails.FRAG_PARSING_ERROR || data.sourceBufferName === \"audio\" && (errorDetails === ErrorDetails.BUFFER_ADD_CODEC_ERROR || errorDetails === ErrorDetails.BUFFER_APPEND_ERROR);\n      const findAudioCodecAlternate = isAudioCodecError && levels.some(({\n        audioCodec\n      }) => level.audioCodec !== audioCodec);\n      const isVideoCodecError = data.sourceBufferName === \"video\" && (errorDetails === ErrorDetails.BUFFER_ADD_CODEC_ERROR || errorDetails === ErrorDetails.BUFFER_APPEND_ERROR);\n      const findVideoCodecAlternate = isVideoCodecError && levels.some(({\n        codecSet,\n        audioCodec\n      }) => level.codecSet !== codecSet && level.audioCodec === audioCodec);\n      const {\n        type: playlistErrorType,\n        groupId: playlistErrorGroupId\n      } = (_data$context2 = data.context) != null ? _data$context2 : {};\n      for (let i = levels.length; i--; ) {\n        const candidate = (i + loadLevel) % levels.length;\n        if (candidate !== loadLevel && candidate >= minAutoLevel && candidate <= maxAutoLevel && levels[candidate].loadError === 0) {\n          var _level$audioGroups, _level$subtitleGroups;\n          const levelCandidate = levels[candidate];\n          if (errorDetails === ErrorDetails.FRAG_GAP && fragErrorType === PlaylistLevelType.MAIN && data.frag) {\n            const levelDetails = levels[candidate].details;\n            if (levelDetails) {\n              const fragCandidate = findFragmentByPTS(data.frag, levelDetails.fragments, data.frag.start);\n              if (fragCandidate != null && fragCandidate.gap) {\n                continue;\n              }\n            }\n          } else if (playlistErrorType === PlaylistContextType.AUDIO_TRACK && levelCandidate.hasAudioGroup(playlistErrorGroupId) || playlistErrorType === PlaylistContextType.SUBTITLE_TRACK && levelCandidate.hasSubtitleGroup(playlistErrorGroupId)) {\n            continue;\n          } else if (fragErrorType === PlaylistLevelType.AUDIO && (_level$audioGroups = level.audioGroups) != null && _level$audioGroups.some((groupId) => levelCandidate.hasAudioGroup(groupId)) || fragErrorType === PlaylistLevelType.SUBTITLE && (_level$subtitleGroups = level.subtitleGroups) != null && _level$subtitleGroups.some((groupId) => levelCandidate.hasSubtitleGroup(groupId)) || findAudioCodecAlternate && level.audioCodec === levelCandidate.audioCodec || !findAudioCodecAlternate && level.audioCodec !== levelCandidate.audioCodec || findVideoCodecAlternate && level.codecSet === levelCandidate.codecSet) {\n            continue;\n          }\n          nextLevel = candidate;\n          break;\n        }\n      }\n      if (nextLevel > -1 && hls.loadLevel !== nextLevel) {\n        data.levelRetry = true;\n        this.playlistError = 0;\n        return {\n          action: NetworkErrorAction.SendAlternateToPenaltyBox,\n          flags: ErrorActionFlags.None,\n          nextAutoLevel: nextLevel\n        };\n      }\n    }\n    return {\n      action: NetworkErrorAction.SendAlternateToPenaltyBox,\n      flags: ErrorActionFlags.MoveAllAlternatesMatchingHost\n    };\n  }\n  onErrorOut(event, data) {\n    var _data$errorAction;\n    switch ((_data$errorAction = data.errorAction) == null ? void 0 : _data$errorAction.action) {\n      case NetworkErrorAction.DoNothing:\n        break;\n      case NetworkErrorAction.SendAlternateToPenaltyBox:\n        this.sendAlternateToPenaltyBox(data);\n        if (!data.errorAction.resolved && data.details !== ErrorDetails.FRAG_GAP) {\n          data.fatal = true;\n        } else if (/MediaSource readyState: ended/.test(data.error.message)) {\n          this.warn(`MediaSource ended after \"${data.sourceBufferName}\" sourceBuffer append error. Attempting to recover from media error.`);\n          this.hls.recoverMediaError();\n        }\n        break;\n    }\n    if (data.fatal) {\n      this.hls.stopLoad();\n      return;\n    }\n  }\n  sendAlternateToPenaltyBox(data) {\n    const hls = this.hls;\n    const errorAction = data.errorAction;\n    if (!errorAction) {\n      return;\n    }\n    const {\n      flags,\n      hdcpLevel,\n      nextAutoLevel\n    } = errorAction;\n    switch (flags) {\n      case ErrorActionFlags.None:\n        this.switchLevel(data, nextAutoLevel);\n        break;\n      case ErrorActionFlags.MoveAllAlternatesMatchingHDCP:\n        if (hdcpLevel) {\n          hls.maxHdcpLevel = HdcpLevels[HdcpLevels.indexOf(hdcpLevel) - 1];\n          errorAction.resolved = true;\n        }\n        this.warn(`Restricting playback to HDCP-LEVEL of \"${hls.maxHdcpLevel}\" or lower`);\n        break;\n    }\n    if (!errorAction.resolved) {\n      this.switchLevel(data, nextAutoLevel);\n    }\n  }\n  switchLevel(data, levelIndex) {\n    if (levelIndex !== void 0 && data.errorAction) {\n      this.warn(`switching to level ${levelIndex} after ${data.details}`);\n      this.hls.nextAutoLevel = levelIndex;\n      data.errorAction.resolved = true;\n      this.hls.nextLoadLevel = this.hls.nextAutoLevel;\n      if (data.details === ErrorDetails.BUFFER_ADD_CODEC_ERROR && data.mimeType && data.sourceBufferName !== \"audiovideo\") {\n        const codec = getCodecsForMimeType(data.mimeType);\n        const levels = this.hls.levels;\n        for (let i = levels.length; i--; ) {\n          if (levels[i][`${data.sourceBufferName}Codec`] === codec) {\n            this.hls.removeLevel(i);\n          }\n        }\n      }\n    }\n  }\n}\nfunction createDoNothingErrorAction(resolved) {\n  const errorAction = {\n    action: NetworkErrorAction.DoNothing,\n    flags: ErrorActionFlags.None\n  };\n  if (resolved) {\n    errorAction.resolved = true;\n  }\n  return errorAction;\n}\nvar FragmentState = {\n  NOT_LOADED: \"NOT_LOADED\",\n  APPENDING: \"APPENDING\",\n  PARTIAL: \"PARTIAL\",\n  OK: \"OK\"\n};\nclass FragmentTracker {\n  constructor(hls) {\n    this.activePartLists = /* @__PURE__ */ Object.create(null);\n    this.endListFragments = /* @__PURE__ */ Object.create(null);\n    this.fragments = /* @__PURE__ */ Object.create(null);\n    this.timeRanges = /* @__PURE__ */ Object.create(null);\n    this.bufferPadding = 0.2;\n    this.hls = void 0;\n    this.hasGaps = false;\n    this.hls = hls;\n    this._registerListeners();\n  }\n  _registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.BUFFER_APPENDED, this.onBufferAppended, this);\n    hls.on(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n    hls.on(Events.FRAG_LOADED, this.onFragLoaded, this);\n  }\n  _unregisterListeners() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.BUFFER_APPENDED, this.onBufferAppended, this);\n    hls.off(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n    hls.off(Events.FRAG_LOADED, this.onFragLoaded, this);\n  }\n  destroy() {\n    this._unregisterListeners();\n    this.fragments = // @ts-ignore\n    this.activePartLists = // @ts-ignore\n    this.endListFragments = this.timeRanges = null;\n  }\n  /**\n   * Return a Fragment or Part with an appended range that matches the position and levelType\n   * Otherwise, return null\n   */\n  getAppendedFrag(position, levelType) {\n    const activeParts = this.activePartLists[levelType];\n    if (activeParts) {\n      for (let i = activeParts.length; i--; ) {\n        const activePart = activeParts[i];\n        if (!activePart) {\n          break;\n        }\n        const appendedPTS = activePart.end;\n        if (activePart.start <= position && appendedPTS !== null && position <= appendedPTS) {\n          return activePart;\n        }\n      }\n    }\n    return this.getBufferedFrag(position, levelType);\n  }\n  /**\n   * Return a buffered Fragment that matches the position and levelType.\n   * A buffered Fragment is one whose loading, parsing and appending is done (completed or \"partial\" meaning aborted).\n   * If not found any Fragment, return null\n   */\n  getBufferedFrag(position, levelType) {\n    return this.getFragAtPos(position, levelType, true);\n  }\n  getFragAtPos(position, levelType, buffered) {\n    const {\n      fragments\n    } = this;\n    const keys = Object.keys(fragments);\n    for (let i = keys.length; i--; ) {\n      const fragmentEntity = fragments[keys[i]];\n      if ((fragmentEntity == null ? void 0 : fragmentEntity.body.type) === levelType && (!buffered || fragmentEntity.buffered)) {\n        const frag = fragmentEntity.body;\n        if (frag.start <= position && position <= frag.end) {\n          return frag;\n        }\n      }\n    }\n    return null;\n  }\n  /**\n   * Partial fragments effected by coded frame eviction will be removed\n   * The browser will unload parts of the buffer to free up memory for new buffer data\n   * Fragments will need to be reloaded when the buffer is freed up, removing partial fragments will allow them to reload(since there might be parts that are still playable)\n   */\n  detectEvictedFragments(elementaryStream, timeRange, playlistType, appendedPart, removeAppending) {\n    if (this.timeRanges) {\n      this.timeRanges[elementaryStream] = timeRange;\n    }\n    const appendedPartSn = (appendedPart == null ? void 0 : appendedPart.fragment.sn) || -1;\n    Object.keys(this.fragments).forEach((key) => {\n      const fragmentEntity = this.fragments[key];\n      if (!fragmentEntity) {\n        return;\n      }\n      if (appendedPartSn >= fragmentEntity.body.sn) {\n        return;\n      }\n      if (!fragmentEntity.buffered && (!fragmentEntity.loaded || removeAppending)) {\n        if (fragmentEntity.body.type === playlistType) {\n          this.removeFragment(fragmentEntity.body);\n        }\n        return;\n      }\n      const esData = fragmentEntity.range[elementaryStream];\n      if (!esData) {\n        return;\n      }\n      if (esData.time.length === 0) {\n        this.removeFragment(fragmentEntity.body);\n        return;\n      }\n      esData.time.some((time) => {\n        const isNotBuffered = !this.isTimeBuffered(time.startPTS, time.endPTS, timeRange);\n        if (isNotBuffered) {\n          this.removeFragment(fragmentEntity.body);\n        }\n        return isNotBuffered;\n      });\n    });\n  }\n  /**\n   * Checks if the fragment passed in is loaded in the buffer properly\n   * Partially loaded fragments will be registered as a partial fragment\n   */\n  detectPartialFragments(data) {\n    const timeRanges = this.timeRanges;\n    if (!timeRanges || data.frag.sn === \"initSegment\") {\n      return;\n    }\n    const frag = data.frag;\n    const fragKey = getFragmentKey(frag);\n    const fragmentEntity = this.fragments[fragKey];\n    if (!fragmentEntity || fragmentEntity.buffered && frag.gap) {\n      return;\n    }\n    const isFragHint = !frag.relurl;\n    Object.keys(timeRanges).forEach((elementaryStream) => {\n      const streamInfo = frag.elementaryStreams[elementaryStream];\n      if (!streamInfo) {\n        return;\n      }\n      const timeRange = timeRanges[elementaryStream];\n      const partial = isFragHint || streamInfo.partial === true;\n      fragmentEntity.range[elementaryStream] = this.getBufferedTimes(frag, data.part, partial, timeRange);\n    });\n    fragmentEntity.loaded = null;\n    if (Object.keys(fragmentEntity.range).length) {\n      fragmentEntity.buffered = true;\n      const endList = fragmentEntity.body.endList = frag.endList || fragmentEntity.body.endList;\n      if (endList) {\n        this.endListFragments[fragmentEntity.body.type] = fragmentEntity;\n      }\n      if (!isPartial(fragmentEntity)) {\n        this.removeParts(frag.sn - 1, frag.type);\n      }\n    } else {\n      this.removeFragment(fragmentEntity.body);\n    }\n  }\n  removeParts(snToKeep, levelType) {\n    const activeParts = this.activePartLists[levelType];\n    if (!activeParts) {\n      return;\n    }\n    this.activePartLists[levelType] = filterParts(activeParts, (part) => part.fragment.sn >= snToKeep);\n  }\n  fragBuffered(frag, force) {\n    const fragKey = getFragmentKey(frag);\n    let fragmentEntity = this.fragments[fragKey];\n    if (!fragmentEntity && force) {\n      fragmentEntity = this.fragments[fragKey] = {\n        body: frag,\n        appendedPTS: null,\n        loaded: null,\n        buffered: false,\n        range: /* @__PURE__ */ Object.create(null)\n      };\n      if (frag.gap) {\n        this.hasGaps = true;\n      }\n    }\n    if (fragmentEntity) {\n      fragmentEntity.loaded = null;\n      fragmentEntity.buffered = true;\n    }\n  }\n  getBufferedTimes(fragment, part, partial, timeRange) {\n    const buffered = {\n      time: [],\n      partial\n    };\n    const startPTS = fragment.start;\n    const endPTS = fragment.end;\n    const minEndPTS = fragment.minEndPTS || endPTS;\n    const maxStartPTS = fragment.maxStartPTS || startPTS;\n    for (let i = 0; i < timeRange.length; i++) {\n      const startTime = timeRange.start(i) - this.bufferPadding;\n      const endTime = timeRange.end(i) + this.bufferPadding;\n      if (maxStartPTS >= startTime && minEndPTS <= endTime) {\n        buffered.time.push({\n          startPTS: Math.max(startPTS, timeRange.start(i)),\n          endPTS: Math.min(endPTS, timeRange.end(i))\n        });\n        break;\n      } else if (startPTS < endTime && endPTS > startTime) {\n        const start = Math.max(startPTS, timeRange.start(i));\n        const end = Math.min(endPTS, timeRange.end(i));\n        if (end > start) {\n          buffered.partial = true;\n          buffered.time.push({\n            startPTS: start,\n            endPTS: end\n          });\n        }\n      } else if (endPTS <= startTime) {\n        break;\n      }\n    }\n    return buffered;\n  }\n  /**\n   * Gets the partial fragment for a certain time\n   */\n  getPartialFragment(time) {\n    let bestFragment = null;\n    let timePadding;\n    let startTime;\n    let endTime;\n    let bestOverlap = 0;\n    const {\n      bufferPadding,\n      fragments\n    } = this;\n    Object.keys(fragments).forEach((key) => {\n      const fragmentEntity = fragments[key];\n      if (!fragmentEntity) {\n        return;\n      }\n      if (isPartial(fragmentEntity)) {\n        startTime = fragmentEntity.body.start - bufferPadding;\n        endTime = fragmentEntity.body.end + bufferPadding;\n        if (time >= startTime && time <= endTime) {\n          timePadding = Math.min(time - startTime, endTime - time);\n          if (bestOverlap <= timePadding) {\n            bestFragment = fragmentEntity.body;\n            bestOverlap = timePadding;\n          }\n        }\n      }\n    });\n    return bestFragment;\n  }\n  isEndListAppended(type) {\n    const lastFragmentEntity = this.endListFragments[type];\n    return lastFragmentEntity !== void 0 && (lastFragmentEntity.buffered || isPartial(lastFragmentEntity));\n  }\n  getState(fragment) {\n    const fragKey = getFragmentKey(fragment);\n    const fragmentEntity = this.fragments[fragKey];\n    if (fragmentEntity) {\n      if (!fragmentEntity.buffered) {\n        return FragmentState.APPENDING;\n      } else if (isPartial(fragmentEntity)) {\n        return FragmentState.PARTIAL;\n      } else {\n        return FragmentState.OK;\n      }\n    }\n    return FragmentState.NOT_LOADED;\n  }\n  isTimeBuffered(startPTS, endPTS, timeRange) {\n    let startTime;\n    let endTime;\n    for (let i = 0; i < timeRange.length; i++) {\n      startTime = timeRange.start(i) - this.bufferPadding;\n      endTime = timeRange.end(i) + this.bufferPadding;\n      if (startPTS >= startTime && endPTS <= endTime) {\n        return true;\n      }\n      if (endPTS <= startTime) {\n        return false;\n      }\n    }\n    return false;\n  }\n  onManifestLoading() {\n    this.removeAllFragments();\n  }\n  onFragLoaded(event, data) {\n    if (data.frag.sn === \"initSegment\" || data.frag.bitrateTest) {\n      return;\n    }\n    const frag = data.frag;\n    const loaded = data.part ? null : data;\n    const fragKey = getFragmentKey(frag);\n    this.fragments[fragKey] = {\n      body: frag,\n      appendedPTS: null,\n      loaded,\n      buffered: false,\n      range: /* @__PURE__ */ Object.create(null)\n    };\n  }\n  onBufferAppended(event, data) {\n    const {\n      frag,\n      part,\n      timeRanges,\n      type\n    } = data;\n    if (frag.sn === \"initSegment\") {\n      return;\n    }\n    const playlistType = frag.type;\n    if (part) {\n      let activeParts = this.activePartLists[playlistType];\n      if (!activeParts) {\n        this.activePartLists[playlistType] = activeParts = [];\n      }\n      activeParts.push(part);\n    }\n    this.timeRanges = timeRanges;\n    const timeRange = timeRanges[type];\n    this.detectEvictedFragments(type, timeRange, playlistType, part);\n  }\n  onFragBuffered(event, data) {\n    this.detectPartialFragments(data);\n  }\n  hasFragment(fragment) {\n    const fragKey = getFragmentKey(fragment);\n    return !!this.fragments[fragKey];\n  }\n  hasFragments(type) {\n    const {\n      fragments\n    } = this;\n    const keys = Object.keys(fragments);\n    if (!type) {\n      return keys.length > 0;\n    }\n    for (let i = keys.length; i--; ) {\n      const fragmentEntity = fragments[keys[i]];\n      if ((fragmentEntity == null ? void 0 : fragmentEntity.body.type) === type) {\n        return true;\n      }\n    }\n    return false;\n  }\n  hasParts(type) {\n    var _this$activePartLists;\n    return !!((_this$activePartLists = this.activePartLists[type]) != null && _this$activePartLists.length);\n  }\n  removeFragmentsInRange(start, end, playlistType, withGapOnly, unbufferedOnly) {\n    if (withGapOnly && !this.hasGaps) {\n      return;\n    }\n    Object.keys(this.fragments).forEach((key) => {\n      const fragmentEntity = this.fragments[key];\n      if (!fragmentEntity) {\n        return;\n      }\n      const frag = fragmentEntity.body;\n      if (frag.type !== playlistType || withGapOnly && !frag.gap) {\n        return;\n      }\n      if (frag.start < end && frag.end > start && (fragmentEntity.buffered || unbufferedOnly)) {\n        this.removeFragment(frag);\n      }\n    });\n  }\n  removeFragment(fragment) {\n    const fragKey = getFragmentKey(fragment);\n    fragment.clearElementaryStreamInfo();\n    const activeParts = this.activePartLists[fragment.type];\n    if (activeParts) {\n      const snToRemove = fragment.sn;\n      this.activePartLists[fragment.type] = filterParts(activeParts, (part) => part.fragment.sn !== snToRemove);\n    }\n    delete this.fragments[fragKey];\n    if (fragment.endList) {\n      delete this.endListFragments[fragment.type];\n    }\n  }\n  removeAllFragments() {\n    var _this$hls, _this$hls$latestLevel;\n    this.fragments = /* @__PURE__ */ Object.create(null);\n    this.endListFragments = /* @__PURE__ */ Object.create(null);\n    this.activePartLists = /* @__PURE__ */ Object.create(null);\n    this.hasGaps = false;\n    const partlist = (_this$hls = this.hls) == null ? void 0 : (_this$hls$latestLevel = _this$hls.latestLevelDetails) == null ? void 0 : _this$hls$latestLevel.partList;\n    if (partlist) {\n      partlist.forEach((part) => part.clearElementaryStreamInfo());\n    }\n  }\n}\nfunction isPartial(fragmentEntity) {\n  var _fragmentEntity$range, _fragmentEntity$range2, _fragmentEntity$range3;\n  return fragmentEntity.buffered && (fragmentEntity.body.gap || ((_fragmentEntity$range = fragmentEntity.range.video) == null ? void 0 : _fragmentEntity$range.partial) || ((_fragmentEntity$range2 = fragmentEntity.range.audio) == null ? void 0 : _fragmentEntity$range2.partial) || ((_fragmentEntity$range3 = fragmentEntity.range.audiovideo) == null ? void 0 : _fragmentEntity$range3.partial));\n}\nfunction getFragmentKey(fragment) {\n  return `${fragment.type}_${fragment.level}_${fragment.sn}`;\n}\nfunction filterParts(partList, predicate) {\n  return partList.filter((part) => {\n    const keep = predicate(part);\n    if (!keep) {\n      part.clearElementaryStreamInfo();\n    }\n    return keep;\n  });\n}\nvar DecrypterAesMode = {\n  cbc: 0,\n  ctr: 1\n};\nclass AESCrypto {\n  constructor(subtle, iv, aesMode) {\n    this.subtle = void 0;\n    this.aesIV = void 0;\n    this.aesMode = void 0;\n    this.subtle = subtle;\n    this.aesIV = iv;\n    this.aesMode = aesMode;\n  }\n  decrypt(data, key) {\n    switch (this.aesMode) {\n      case DecrypterAesMode.cbc:\n        return this.subtle.decrypt({\n          name: \"AES-CBC\",\n          iv: this.aesIV\n        }, key, data);\n      case DecrypterAesMode.ctr:\n        return this.subtle.decrypt(\n          {\n            name: \"AES-CTR\",\n            counter: this.aesIV,\n            length: 64\n          },\n          //64 : NIST SP800-38A standard suggests that the counter should occupy half of the counter block\n          key,\n          data\n        );\n      default:\n        throw new Error(`[AESCrypto] invalid aes mode ${this.aesMode}`);\n    }\n  }\n}\nfunction removePadding(array) {\n  const outputBytes = array.byteLength;\n  const paddingBytes = outputBytes && new DataView(array.buffer).getUint8(outputBytes - 1);\n  if (paddingBytes) {\n    return array.slice(0, outputBytes - paddingBytes);\n  }\n  return array;\n}\nclass AESDecryptor {\n  constructor() {\n    this.rcon = [0, 1, 2, 4, 8, 16, 32, 64, 128, 27, 54];\n    this.subMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)];\n    this.invSubMix = [new Uint32Array(256), new Uint32Array(256), new Uint32Array(256), new Uint32Array(256)];\n    this.sBox = new Uint32Array(256);\n    this.invSBox = new Uint32Array(256);\n    this.key = new Uint32Array(0);\n    this.ksRows = 0;\n    this.keySize = 0;\n    this.keySchedule = void 0;\n    this.invKeySchedule = void 0;\n    this.initTable();\n  }\n  // Using view.getUint32() also swaps the byte order.\n  uint8ArrayToUint32Array_(arrayBuffer) {\n    const view2 = new DataView(arrayBuffer);\n    const newArray = new Uint32Array(4);\n    for (let i = 0; i < 4; i++) {\n      newArray[i] = view2.getUint32(i * 4);\n    }\n    return newArray;\n  }\n  initTable() {\n    const sBox = this.sBox;\n    const invSBox = this.invSBox;\n    const subMix = this.subMix;\n    const subMix0 = subMix[0];\n    const subMix1 = subMix[1];\n    const subMix2 = subMix[2];\n    const subMix3 = subMix[3];\n    const invSubMix = this.invSubMix;\n    const invSubMix0 = invSubMix[0];\n    const invSubMix1 = invSubMix[1];\n    const invSubMix2 = invSubMix[2];\n    const invSubMix3 = invSubMix[3];\n    const d = new Uint32Array(256);\n    let x = 0;\n    let xi = 0;\n    let i = 0;\n    for (i = 0; i < 256; i++) {\n      if (i < 128) {\n        d[i] = i << 1;\n      } else {\n        d[i] = i << 1 ^ 283;\n      }\n    }\n    for (i = 0; i < 256; i++) {\n      let sx = xi ^ xi << 1 ^ xi << 2 ^ xi << 3 ^ xi << 4;\n      sx = sx >>> 8 ^ sx & 255 ^ 99;\n      sBox[x] = sx;\n      invSBox[sx] = x;\n      const x2 = d[x];\n      const x4 = d[x2];\n      const x8 = d[x4];\n      let t = d[sx] * 257 ^ sx * 16843008;\n      subMix0[x] = t << 24 | t >>> 8;\n      subMix1[x] = t << 16 | t >>> 16;\n      subMix2[x] = t << 8 | t >>> 24;\n      subMix3[x] = t;\n      t = x8 * 16843009 ^ x4 * 65537 ^ x2 * 257 ^ x * 16843008;\n      invSubMix0[sx] = t << 24 | t >>> 8;\n      invSubMix1[sx] = t << 16 | t >>> 16;\n      invSubMix2[sx] = t << 8 | t >>> 24;\n      invSubMix3[sx] = t;\n      if (!x) {\n        x = xi = 1;\n      } else {\n        x = x2 ^ d[d[d[x8 ^ x2]]];\n        xi ^= d[d[xi]];\n      }\n    }\n  }\n  expandKey(keyBuffer) {\n    const key = this.uint8ArrayToUint32Array_(keyBuffer);\n    let sameKey = true;\n    let offset = 0;\n    while (offset < key.length && sameKey) {\n      sameKey = key[offset] === this.key[offset];\n      offset++;\n    }\n    if (sameKey) {\n      return;\n    }\n    this.key = key;\n    const keySize = this.keySize = key.length;\n    if (keySize !== 4 && keySize !== 6 && keySize !== 8) {\n      throw new Error(\"Invalid aes key size=\" + keySize);\n    }\n    const ksRows = this.ksRows = (keySize + 6 + 1) * 4;\n    let ksRow;\n    let invKsRow;\n    const keySchedule = this.keySchedule = new Uint32Array(ksRows);\n    const invKeySchedule = this.invKeySchedule = new Uint32Array(ksRows);\n    const sbox = this.sBox;\n    const rcon = this.rcon;\n    const invSubMix = this.invSubMix;\n    const invSubMix0 = invSubMix[0];\n    const invSubMix1 = invSubMix[1];\n    const invSubMix2 = invSubMix[2];\n    const invSubMix3 = invSubMix[3];\n    let prev;\n    let t;\n    for (ksRow = 0; ksRow < ksRows; ksRow++) {\n      if (ksRow < keySize) {\n        prev = keySchedule[ksRow] = key[ksRow];\n        continue;\n      }\n      t = prev;\n      if (ksRow % keySize === 0) {\n        t = t << 8 | t >>> 24;\n        t = sbox[t >>> 24] << 24 | sbox[t >>> 16 & 255] << 16 | sbox[t >>> 8 & 255] << 8 | sbox[t & 255];\n        t ^= rcon[ksRow / keySize | 0] << 24;\n      } else if (keySize > 6 && ksRow % keySize === 4) {\n        t = sbox[t >>> 24] << 24 | sbox[t >>> 16 & 255] << 16 | sbox[t >>> 8 & 255] << 8 | sbox[t & 255];\n      }\n      keySchedule[ksRow] = prev = (keySchedule[ksRow - keySize] ^ t) >>> 0;\n    }\n    for (invKsRow = 0; invKsRow < ksRows; invKsRow++) {\n      ksRow = ksRows - invKsRow;\n      if (invKsRow & 3) {\n        t = keySchedule[ksRow];\n      } else {\n        t = keySchedule[ksRow - 4];\n      }\n      if (invKsRow < 4 || ksRow <= 4) {\n        invKeySchedule[invKsRow] = t;\n      } else {\n        invKeySchedule[invKsRow] = invSubMix0[sbox[t >>> 24]] ^ invSubMix1[sbox[t >>> 16 & 255]] ^ invSubMix2[sbox[t >>> 8 & 255]] ^ invSubMix3[sbox[t & 255]];\n      }\n      invKeySchedule[invKsRow] = invKeySchedule[invKsRow] >>> 0;\n    }\n  }\n  // Adding this as a method greatly improves performance.\n  networkToHostOrderSwap(word) {\n    return word << 24 | (word & 65280) << 8 | (word & 16711680) >> 8 | word >>> 24;\n  }\n  decrypt(inputArrayBuffer, offset, aesIV) {\n    const nRounds = this.keySize + 6;\n    const invKeySchedule = this.invKeySchedule;\n    const invSBOX = this.invSBox;\n    const invSubMix = this.invSubMix;\n    const invSubMix0 = invSubMix[0];\n    const invSubMix1 = invSubMix[1];\n    const invSubMix2 = invSubMix[2];\n    const invSubMix3 = invSubMix[3];\n    const initVector = this.uint8ArrayToUint32Array_(aesIV);\n    let initVector0 = initVector[0];\n    let initVector1 = initVector[1];\n    let initVector2 = initVector[2];\n    let initVector3 = initVector[3];\n    const inputInt32 = new Int32Array(inputArrayBuffer);\n    const outputInt32 = new Int32Array(inputInt32.length);\n    let t0, t1, t2, t3;\n    let s0, s1, s2, s3;\n    let inputWords0, inputWords1, inputWords2, inputWords3;\n    let ksRow, i;\n    const swapWord = this.networkToHostOrderSwap;\n    while (offset < inputInt32.length) {\n      inputWords0 = swapWord(inputInt32[offset]);\n      inputWords1 = swapWord(inputInt32[offset + 1]);\n      inputWords2 = swapWord(inputInt32[offset + 2]);\n      inputWords3 = swapWord(inputInt32[offset + 3]);\n      s0 = inputWords0 ^ invKeySchedule[0];\n      s1 = inputWords3 ^ invKeySchedule[1];\n      s2 = inputWords2 ^ invKeySchedule[2];\n      s3 = inputWords1 ^ invKeySchedule[3];\n      ksRow = 4;\n      for (i = 1; i < nRounds; i++) {\n        t0 = invSubMix0[s0 >>> 24] ^ invSubMix1[s1 >> 16 & 255] ^ invSubMix2[s2 >> 8 & 255] ^ invSubMix3[s3 & 255] ^ invKeySchedule[ksRow];\n        t1 = invSubMix0[s1 >>> 24] ^ invSubMix1[s2 >> 16 & 255] ^ invSubMix2[s3 >> 8 & 255] ^ invSubMix3[s0 & 255] ^ invKeySchedule[ksRow + 1];\n        t2 = invSubMix0[s2 >>> 24] ^ invSubMix1[s3 >> 16 & 255] ^ invSubMix2[s0 >> 8 & 255] ^ invSubMix3[s1 & 255] ^ invKeySchedule[ksRow + 2];\n        t3 = invSubMix0[s3 >>> 24] ^ invSubMix1[s0 >> 16 & 255] ^ invSubMix2[s1 >> 8 & 255] ^ invSubMix3[s2 & 255] ^ invKeySchedule[ksRow + 3];\n        s0 = t0;\n        s1 = t1;\n        s2 = t2;\n        s3 = t3;\n        ksRow = ksRow + 4;\n      }\n      t0 = invSBOX[s0 >>> 24] << 24 ^ invSBOX[s1 >> 16 & 255] << 16 ^ invSBOX[s2 >> 8 & 255] << 8 ^ invSBOX[s3 & 255] ^ invKeySchedule[ksRow];\n      t1 = invSBOX[s1 >>> 24] << 24 ^ invSBOX[s2 >> 16 & 255] << 16 ^ invSBOX[s3 >> 8 & 255] << 8 ^ invSBOX[s0 & 255] ^ invKeySchedule[ksRow + 1];\n      t2 = invSBOX[s2 >>> 24] << 24 ^ invSBOX[s3 >> 16 & 255] << 16 ^ invSBOX[s0 >> 8 & 255] << 8 ^ invSBOX[s1 & 255] ^ invKeySchedule[ksRow + 2];\n      t3 = invSBOX[s3 >>> 24] << 24 ^ invSBOX[s0 >> 16 & 255] << 16 ^ invSBOX[s1 >> 8 & 255] << 8 ^ invSBOX[s2 & 255] ^ invKeySchedule[ksRow + 3];\n      outputInt32[offset] = swapWord(t0 ^ initVector0);\n      outputInt32[offset + 1] = swapWord(t3 ^ initVector1);\n      outputInt32[offset + 2] = swapWord(t2 ^ initVector2);\n      outputInt32[offset + 3] = swapWord(t1 ^ initVector3);\n      initVector0 = inputWords0;\n      initVector1 = inputWords1;\n      initVector2 = inputWords2;\n      initVector3 = inputWords3;\n      offset = offset + 4;\n    }\n    return outputInt32.buffer;\n  }\n}\nclass FastAESKey {\n  constructor(subtle, key, aesMode) {\n    this.subtle = void 0;\n    this.key = void 0;\n    this.aesMode = void 0;\n    this.subtle = subtle;\n    this.key = key;\n    this.aesMode = aesMode;\n  }\n  expandKey() {\n    const subtleAlgoName = getSubtleAlgoName(this.aesMode);\n    return this.subtle.importKey(\"raw\", this.key, {\n      name: subtleAlgoName\n    }, false, [\"encrypt\", \"decrypt\"]);\n  }\n}\nfunction getSubtleAlgoName(aesMode) {\n  switch (aesMode) {\n    case DecrypterAesMode.cbc:\n      return \"AES-CBC\";\n    case DecrypterAesMode.ctr:\n      return \"AES-CTR\";\n    default:\n      throw new Error(`[FastAESKey] invalid aes mode ${aesMode}`);\n  }\n}\nconst CHUNK_SIZE = 16;\nclass Decrypter {\n  constructor(config, {\n    removePKCS7Padding = true\n  } = {}) {\n    this.logEnabled = true;\n    this.removePKCS7Padding = void 0;\n    this.subtle = null;\n    this.softwareDecrypter = null;\n    this.key = null;\n    this.fastAesKey = null;\n    this.remainderData = null;\n    this.currentIV = null;\n    this.currentResult = null;\n    this.useSoftware = void 0;\n    this.enableSoftwareAES = void 0;\n    this.enableSoftwareAES = config.enableSoftwareAES;\n    this.removePKCS7Padding = removePKCS7Padding;\n    if (removePKCS7Padding) {\n      try {\n        const browserCrypto = self.crypto;\n        if (browserCrypto) {\n          this.subtle = browserCrypto.subtle || browserCrypto.webkitSubtle;\n        }\n      } catch (e) {\n      }\n    }\n    this.useSoftware = !this.subtle;\n  }\n  destroy() {\n    this.subtle = null;\n    this.softwareDecrypter = null;\n    this.key = null;\n    this.fastAesKey = null;\n    this.remainderData = null;\n    this.currentIV = null;\n    this.currentResult = null;\n  }\n  isSync() {\n    return this.useSoftware;\n  }\n  flush() {\n    const {\n      currentResult,\n      remainderData\n    } = this;\n    if (!currentResult || remainderData) {\n      this.reset();\n      return null;\n    }\n    const data = new Uint8Array(currentResult);\n    this.reset();\n    if (this.removePKCS7Padding) {\n      return removePadding(data);\n    }\n    return data;\n  }\n  reset() {\n    this.currentResult = null;\n    this.currentIV = null;\n    this.remainderData = null;\n    if (this.softwareDecrypter) {\n      this.softwareDecrypter = null;\n    }\n  }\n  decrypt(data, key, iv, aesMode) {\n    if (this.useSoftware) {\n      return new Promise((resolve, reject) => {\n        const dataView = ArrayBuffer.isView(data) ? data : new Uint8Array(data);\n        this.softwareDecrypt(dataView, key, iv, aesMode);\n        const decryptResult = this.flush();\n        if (decryptResult) {\n          resolve(decryptResult.buffer);\n        } else {\n          reject(new Error(\"[softwareDecrypt] Failed to decrypt data\"));\n        }\n      });\n    }\n    return this.webCryptoDecrypt(new Uint8Array(data), key, iv, aesMode);\n  }\n  // Software decryption is progressive. Progressive decryption may not return a result on each call. Any cached\n  // data is handled in the flush() call\n  softwareDecrypt(data, key, iv, aesMode) {\n    const {\n      currentIV,\n      currentResult,\n      remainderData\n    } = this;\n    if (aesMode !== DecrypterAesMode.cbc || key.byteLength !== 16) {\n      logger.warn(\"SoftwareDecrypt: can only handle AES-128-CBC\");\n      return null;\n    }\n    this.logOnce(\"JS AES decrypt\");\n    if (remainderData) {\n      data = appendUint8Array(remainderData, data);\n      this.remainderData = null;\n    }\n    const currentChunk = this.getValidChunk(data);\n    if (!currentChunk.length) {\n      return null;\n    }\n    if (currentIV) {\n      iv = currentIV;\n    }\n    let softwareDecrypter = this.softwareDecrypter;\n    if (!softwareDecrypter) {\n      softwareDecrypter = this.softwareDecrypter = new AESDecryptor();\n    }\n    softwareDecrypter.expandKey(key);\n    const result = currentResult;\n    this.currentResult = softwareDecrypter.decrypt(currentChunk.buffer, 0, iv);\n    this.currentIV = currentChunk.slice(-16).buffer;\n    if (!result) {\n      return null;\n    }\n    return result;\n  }\n  webCryptoDecrypt(data, key, iv, aesMode) {\n    if (this.key !== key || !this.fastAesKey) {\n      if (!this.subtle) {\n        return Promise.resolve(this.onWebCryptoError(data, key, iv, aesMode));\n      }\n      this.key = key;\n      this.fastAesKey = new FastAESKey(this.subtle, key, aesMode);\n    }\n    return this.fastAesKey.expandKey().then((aesKey) => {\n      if (!this.subtle) {\n        return Promise.reject(new Error(\"web crypto not initialized\"));\n      }\n      this.logOnce(\"WebCrypto AES decrypt\");\n      const crypto2 = new AESCrypto(this.subtle, new Uint8Array(iv), aesMode);\n      return crypto2.decrypt(data.buffer, aesKey);\n    }).catch((err) => {\n      logger.warn(`[decrypter]: WebCrypto Error, disable WebCrypto API, ${err.name}: ${err.message}`);\n      return this.onWebCryptoError(data, key, iv, aesMode);\n    });\n  }\n  onWebCryptoError(data, key, iv, aesMode) {\n    const enableSoftwareAES = this.enableSoftwareAES;\n    if (enableSoftwareAES) {\n      this.useSoftware = true;\n      this.logEnabled = true;\n      this.softwareDecrypt(data, key, iv, aesMode);\n      const decryptResult = this.flush();\n      if (decryptResult) {\n        return decryptResult.buffer;\n      }\n    }\n    throw new Error(\"WebCrypto\" + (enableSoftwareAES ? \" and softwareDecrypt\" : \"\") + \": failed to decrypt data\");\n  }\n  getValidChunk(data) {\n    let currentChunk = data;\n    const splitPoint = data.length - data.length % CHUNK_SIZE;\n    if (splitPoint !== data.length) {\n      currentChunk = data.slice(0, splitPoint);\n      this.remainderData = data.slice(splitPoint);\n    }\n    return currentChunk;\n  }\n  logOnce(msg) {\n    if (!this.logEnabled) {\n      return;\n    }\n    logger.log(`[decrypter]: ${msg}`);\n    this.logEnabled = false;\n  }\n}\nconst MIN_CHUNK_SIZE = Math.pow(2, 17);\nclass FragmentLoader {\n  constructor(config) {\n    this.config = void 0;\n    this.loader = null;\n    this.partLoadTimeout = -1;\n    this.config = config;\n  }\n  destroy() {\n    if (this.loader) {\n      this.loader.destroy();\n      this.loader = null;\n    }\n  }\n  abort() {\n    if (this.loader) {\n      this.loader.abort();\n    }\n  }\n  load(frag, onProgress) {\n    const url = frag.url;\n    if (!url) {\n      return Promise.reject(new LoadError({\n        type: ErrorTypes.NETWORK_ERROR,\n        details: ErrorDetails.FRAG_LOAD_ERROR,\n        fatal: false,\n        frag,\n        error: new Error(`Fragment does not have a ${url ? \"part list\" : \"url\"}`),\n        networkDetails: null\n      }));\n    }\n    this.abort();\n    const config = this.config;\n    const FragmentILoader = config.fLoader;\n    const DefaultILoader = config.loader;\n    return new Promise((resolve, reject) => {\n      if (this.loader) {\n        this.loader.destroy();\n      }\n      if (frag.gap) {\n        if (frag.tagList.some((tags) => tags[0] === \"GAP\")) {\n          reject(createGapLoadError(frag));\n          return;\n        } else {\n          frag.gap = false;\n        }\n      }\n      const loader = this.loader = FragmentILoader ? new FragmentILoader(config) : new DefaultILoader(config);\n      const loaderContext = createLoaderContext(frag);\n      frag.loader = loader;\n      const loadPolicy = getLoaderConfigWithoutReties(config.fragLoadPolicy.default);\n      const loaderConfig = {\n        loadPolicy,\n        timeout: loadPolicy.maxLoadTimeMs,\n        maxRetry: 0,\n        retryDelay: 0,\n        maxRetryDelay: 0,\n        highWaterMark: frag.sn === \"initSegment\" ? Infinity : MIN_CHUNK_SIZE\n      };\n      frag.stats = loader.stats;\n      const callbacks = {\n        onSuccess: (response, stats, context, networkDetails) => {\n          this.resetLoader(frag, loader);\n          let payload = response.data;\n          if (context.resetIV && frag.decryptdata) {\n            frag.decryptdata.iv = new Uint8Array(payload.slice(0, 16));\n            payload = payload.slice(16);\n          }\n          resolve({\n            frag,\n            part: null,\n            payload,\n            networkDetails\n          });\n        },\n        onError: (response, context, networkDetails, stats) => {\n          this.resetLoader(frag, loader);\n          reject(new LoadError({\n            type: ErrorTypes.NETWORK_ERROR,\n            details: ErrorDetails.FRAG_LOAD_ERROR,\n            fatal: false,\n            frag,\n            response: _objectSpread2({\n              url,\n              data: void 0\n            }, response),\n            error: new Error(`HTTP Error ${response.code} ${response.text}`),\n            networkDetails,\n            stats\n          }));\n        },\n        onAbort: (stats, context, networkDetails) => {\n          this.resetLoader(frag, loader);\n          reject(new LoadError({\n            type: ErrorTypes.NETWORK_ERROR,\n            details: ErrorDetails.INTERNAL_ABORTED,\n            fatal: false,\n            frag,\n            error: new Error(\"Aborted\"),\n            networkDetails,\n            stats\n          }));\n        },\n        onTimeout: (stats, context, networkDetails) => {\n          this.resetLoader(frag, loader);\n          reject(new LoadError({\n            type: ErrorTypes.NETWORK_ERROR,\n            details: ErrorDetails.FRAG_LOAD_TIMEOUT,\n            fatal: false,\n            frag,\n            error: new Error(`Timeout after ${loaderConfig.timeout}ms`),\n            networkDetails,\n            stats\n          }));\n        }\n      };\n      if (onProgress) {\n        callbacks.onProgress = (stats, context, data, networkDetails) => onProgress({\n          frag,\n          part: null,\n          payload: data,\n          networkDetails\n        });\n      }\n      loader.load(loaderContext, loaderConfig, callbacks);\n    });\n  }\n  loadPart(frag, part, onProgress) {\n    this.abort();\n    const config = this.config;\n    const FragmentILoader = config.fLoader;\n    const DefaultILoader = config.loader;\n    return new Promise((resolve, reject) => {\n      if (this.loader) {\n        this.loader.destroy();\n      }\n      if (frag.gap || part.gap) {\n        reject(createGapLoadError(frag, part));\n        return;\n      }\n      const loader = this.loader = FragmentILoader ? new FragmentILoader(config) : new DefaultILoader(config);\n      const loaderContext = createLoaderContext(frag, part);\n      frag.loader = loader;\n      const loadPolicy = getLoaderConfigWithoutReties(config.fragLoadPolicy.default);\n      const loaderConfig = {\n        loadPolicy,\n        timeout: loadPolicy.maxLoadTimeMs,\n        maxRetry: 0,\n        retryDelay: 0,\n        maxRetryDelay: 0,\n        highWaterMark: MIN_CHUNK_SIZE\n      };\n      part.stats = loader.stats;\n      loader.load(loaderContext, loaderConfig, {\n        onSuccess: (response, stats, context, networkDetails) => {\n          this.resetLoader(frag, loader);\n          this.updateStatsFromPart(frag, part);\n          const partLoadedData = {\n            frag,\n            part,\n            payload: response.data,\n            networkDetails\n          };\n          onProgress(partLoadedData);\n          resolve(partLoadedData);\n        },\n        onError: (response, context, networkDetails, stats) => {\n          this.resetLoader(frag, loader);\n          reject(new LoadError({\n            type: ErrorTypes.NETWORK_ERROR,\n            details: ErrorDetails.FRAG_LOAD_ERROR,\n            fatal: false,\n            frag,\n            part,\n            response: _objectSpread2({\n              url: loaderContext.url,\n              data: void 0\n            }, response),\n            error: new Error(`HTTP Error ${response.code} ${response.text}`),\n            networkDetails,\n            stats\n          }));\n        },\n        onAbort: (stats, context, networkDetails) => {\n          frag.stats.aborted = part.stats.aborted;\n          this.resetLoader(frag, loader);\n          reject(new LoadError({\n            type: ErrorTypes.NETWORK_ERROR,\n            details: ErrorDetails.INTERNAL_ABORTED,\n            fatal: false,\n            frag,\n            part,\n            error: new Error(\"Aborted\"),\n            networkDetails,\n            stats\n          }));\n        },\n        onTimeout: (stats, context, networkDetails) => {\n          this.resetLoader(frag, loader);\n          reject(new LoadError({\n            type: ErrorTypes.NETWORK_ERROR,\n            details: ErrorDetails.FRAG_LOAD_TIMEOUT,\n            fatal: false,\n            frag,\n            part,\n            error: new Error(`Timeout after ${loaderConfig.timeout}ms`),\n            networkDetails,\n            stats\n          }));\n        }\n      });\n    });\n  }\n  updateStatsFromPart(frag, part) {\n    const fragStats = frag.stats;\n    const partStats = part.stats;\n    const partTotal = partStats.total;\n    fragStats.loaded += partStats.loaded;\n    if (partTotal) {\n      const estTotalParts = Math.round(frag.duration / part.duration);\n      const estLoadedParts = Math.min(Math.round(fragStats.loaded / partTotal), estTotalParts);\n      const estRemainingParts = estTotalParts - estLoadedParts;\n      const estRemainingBytes = estRemainingParts * Math.round(fragStats.loaded / estLoadedParts);\n      fragStats.total = fragStats.loaded + estRemainingBytes;\n    } else {\n      fragStats.total = Math.max(fragStats.loaded, fragStats.total);\n    }\n    const fragLoading = fragStats.loading;\n    const partLoading = partStats.loading;\n    if (fragLoading.start) {\n      fragLoading.first += partLoading.first - partLoading.start;\n    } else {\n      fragLoading.start = partLoading.start;\n      fragLoading.first = partLoading.first;\n    }\n    fragLoading.end = partLoading.end;\n  }\n  resetLoader(frag, loader) {\n    frag.loader = null;\n    if (this.loader === loader) {\n      self.clearTimeout(this.partLoadTimeout);\n      this.loader = null;\n    }\n    loader.destroy();\n  }\n}\nfunction createLoaderContext(frag, part = null) {\n  const segment = part || frag;\n  const loaderContext = {\n    frag,\n    part,\n    responseType: \"arraybuffer\",\n    url: segment.url,\n    headers: {},\n    rangeStart: 0,\n    rangeEnd: 0\n  };\n  const start = segment.byteRangeStartOffset;\n  const end = segment.byteRangeEndOffset;\n  if (isFiniteNumber(start) && isFiniteNumber(end)) {\n    var _frag$decryptdata;\n    let byteRangeStart = start;\n    let byteRangeEnd = end;\n    if (frag.sn === \"initSegment\" && isMethodFullSegmentAesCbc((_frag$decryptdata = frag.decryptdata) == null ? void 0 : _frag$decryptdata.method)) {\n      const fragmentLen = end - start;\n      if (fragmentLen % 16) {\n        byteRangeEnd = end + (16 - fragmentLen % 16);\n      }\n      if (start !== 0) {\n        loaderContext.resetIV = true;\n        byteRangeStart = start - 16;\n      }\n    }\n    loaderContext.rangeStart = byteRangeStart;\n    loaderContext.rangeEnd = byteRangeEnd;\n  }\n  return loaderContext;\n}\nfunction createGapLoadError(frag, part) {\n  const error = new Error(`GAP ${frag.gap ? \"tag\" : \"attribute\"} found`);\n  const errorData = {\n    type: ErrorTypes.MEDIA_ERROR,\n    details: ErrorDetails.FRAG_GAP,\n    fatal: false,\n    frag,\n    error,\n    networkDetails: null\n  };\n  if (part) {\n    errorData.part = part;\n  }\n  (part ? part : frag).stats.aborted = true;\n  return new LoadError(errorData);\n}\nfunction isMethodFullSegmentAesCbc(method) {\n  return method === \"AES-128\" || method === \"AES-256\";\n}\nclass LoadError extends Error {\n  constructor(data) {\n    super(data.error.message);\n    this.data = void 0;\n    this.data = data;\n  }\n}\nclass TaskLoop extends Logger2 {\n  constructor(label, logger2) {\n    super(label, logger2);\n    this._boundTick = void 0;\n    this._tickTimer = null;\n    this._tickInterval = null;\n    this._tickCallCount = 0;\n    this._boundTick = this.tick.bind(this);\n  }\n  destroy() {\n    this.onHandlerDestroying();\n    this.onHandlerDestroyed();\n  }\n  onHandlerDestroying() {\n    this.clearNextTick();\n    this.clearInterval();\n  }\n  onHandlerDestroyed() {\n  }\n  hasInterval() {\n    return !!this._tickInterval;\n  }\n  hasNextTick() {\n    return !!this._tickTimer;\n  }\n  /**\n   * @param millis - Interval time (ms)\n   * @eturns True when interval has been scheduled, false when already scheduled (no effect)\n   */\n  setInterval(millis) {\n    if (!this._tickInterval) {\n      this._tickCallCount = 0;\n      this._tickInterval = self.setInterval(this._boundTick, millis);\n      return true;\n    }\n    return false;\n  }\n  /**\n   * @returns True when interval was cleared, false when none was set (no effect)\n   */\n  clearInterval() {\n    if (this._tickInterval) {\n      self.clearInterval(this._tickInterval);\n      this._tickInterval = null;\n      return true;\n    }\n    return false;\n  }\n  /**\n   * @returns True when timeout was cleared, false when none was set (no effect)\n   */\n  clearNextTick() {\n    if (this._tickTimer) {\n      self.clearTimeout(this._tickTimer);\n      this._tickTimer = null;\n      return true;\n    }\n    return false;\n  }\n  /**\n   * Will call the subclass doTick implementation in this main loop tick\n   * or in the next one (via setTimeout(,0)) in case it has already been called\n   * in this tick (in case this is a re-entrant call).\n   */\n  tick() {\n    this._tickCallCount++;\n    if (this._tickCallCount === 1) {\n      this.doTick();\n      if (this._tickCallCount > 1) {\n        this.tickImmediate();\n      }\n      this._tickCallCount = 0;\n    }\n  }\n  tickImmediate() {\n    this.clearNextTick();\n    this._tickTimer = self.setTimeout(this._boundTick, 0);\n  }\n  /**\n   * For subclass to implement task logic\n   * @abstract\n   */\n  doTick() {\n  }\n}\nclass ChunkMetadata {\n  constructor(level, sn, id, size = 0, part = -1, partial = false) {\n    this.level = void 0;\n    this.sn = void 0;\n    this.part = void 0;\n    this.id = void 0;\n    this.size = void 0;\n    this.partial = void 0;\n    this.transmuxing = getNewPerformanceTiming();\n    this.buffering = {\n      audio: getNewPerformanceTiming(),\n      video: getNewPerformanceTiming(),\n      audiovideo: getNewPerformanceTiming()\n    };\n    this.level = level;\n    this.sn = sn;\n    this.id = id;\n    this.size = size;\n    this.part = part;\n    this.partial = partial;\n  }\n}\nfunction getNewPerformanceTiming() {\n  return {\n    start: 0,\n    executeStart: 0,\n    executeEnd: 0,\n    end: 0\n  };\n}\nconst noopBuffered = {\n  length: 0,\n  start: () => 0,\n  end: () => 0\n};\nclass BufferHelper {\n  /**\n   * Return true if `media`'s buffered include `position`\n   */\n  static isBuffered(media, position) {\n    if (media) {\n      const buffered = BufferHelper.getBuffered(media);\n      for (let i = buffered.length; i--; ) {\n        if (position >= buffered.start(i) && position <= buffered.end(i)) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  static bufferedRanges(media) {\n    if (media) {\n      const timeRanges = BufferHelper.getBuffered(media);\n      return BufferHelper.timeRangesToArray(timeRanges);\n    }\n    return [];\n  }\n  static timeRangesToArray(timeRanges) {\n    const buffered = [];\n    for (let i = 0; i < timeRanges.length; i++) {\n      buffered.push({\n        start: timeRanges.start(i),\n        end: timeRanges.end(i)\n      });\n    }\n    return buffered;\n  }\n  static bufferInfo(media, pos, maxHoleDuration) {\n    if (media) {\n      const buffered = BufferHelper.bufferedRanges(media);\n      if (buffered.length) {\n        return BufferHelper.bufferedInfo(buffered, pos, maxHoleDuration);\n      }\n    }\n    return {\n      len: 0,\n      start: pos,\n      end: pos,\n      bufferedIndex: -1\n    };\n  }\n  static bufferedInfo(buffered, pos, maxHoleDuration) {\n    pos = Math.max(0, pos);\n    if (buffered.length > 1) {\n      buffered.sort((a, b) => a.start - b.start || b.end - a.end);\n    }\n    let bufferedIndex = -1;\n    let buffered2 = [];\n    if (maxHoleDuration) {\n      for (let i = 0; i < buffered.length; i++) {\n        if (pos >= buffered[i].start && pos <= buffered[i].end) {\n          bufferedIndex = i;\n        }\n        const buf2len = buffered2.length;\n        if (buf2len) {\n          const buf2end = buffered2[buf2len - 1].end;\n          if (buffered[i].start - buf2end < maxHoleDuration) {\n            if (buffered[i].end > buf2end) {\n              buffered2[buf2len - 1].end = buffered[i].end;\n            }\n          } else {\n            buffered2.push(buffered[i]);\n          }\n        } else {\n          buffered2.push(buffered[i]);\n        }\n      }\n    } else {\n      buffered2 = buffered;\n    }\n    let bufferLen = 0;\n    let nextStart;\n    let bufferStart = pos;\n    let bufferEnd = pos;\n    for (let i = 0; i < buffered2.length; i++) {\n      const start = buffered2[i].start;\n      const end = buffered2[i].end;\n      if (bufferedIndex === -1 && pos >= start && pos <= end) {\n        bufferedIndex = i;\n      }\n      if (pos + maxHoleDuration >= start && pos < end) {\n        bufferStart = start;\n        bufferEnd = end;\n        bufferLen = bufferEnd - pos;\n      } else if (pos + maxHoleDuration < start) {\n        nextStart = start;\n        break;\n      }\n    }\n    return {\n      len: bufferLen,\n      start: bufferStart || 0,\n      end: bufferEnd || 0,\n      nextStart,\n      buffered,\n      bufferedIndex\n    };\n  }\n  /**\n   * Safe method to get buffered property.\n   * SourceBuffer.buffered may throw if SourceBuffer is removed from it's MediaSource\n   */\n  static getBuffered(media) {\n    try {\n      return media.buffered || noopBuffered;\n    } catch (e) {\n      logger.log(\"failed to get media.buffered\", e);\n      return noopBuffered;\n    }\n  }\n}\nconst VARIABLE_REPLACEMENT_REGEX = /\\{\\$([a-zA-Z0-9-_]+)\\}/g;\nfunction hasVariableReferences(str) {\n  return VARIABLE_REPLACEMENT_REGEX.test(str);\n}\nfunction substituteVariables(parsed, value) {\n  if (parsed.variableList !== null || parsed.hasVariableRefs) {\n    const variableList = parsed.variableList;\n    return value.replace(VARIABLE_REPLACEMENT_REGEX, (variableReference) => {\n      const variableName = variableReference.substring(2, variableReference.length - 1);\n      const variableValue = variableList == null ? void 0 : variableList[variableName];\n      if (variableValue === void 0) {\n        parsed.playlistParsingError || (parsed.playlistParsingError = new Error(`Missing preceding EXT-X-DEFINE tag for Variable Reference: \"${variableName}\"`));\n        return variableReference;\n      }\n      return variableValue;\n    });\n  }\n  return value;\n}\nfunction addVariableDefinition(parsed, attr, parentUrl) {\n  let variableList = parsed.variableList;\n  if (!variableList) {\n    parsed.variableList = variableList = {};\n  }\n  let NAME2;\n  let VALUE;\n  if (\"QUERYPARAM\" in attr) {\n    NAME2 = attr.QUERYPARAM;\n    try {\n      const searchParams = new self.URL(parentUrl).searchParams;\n      if (searchParams.has(NAME2)) {\n        VALUE = searchParams.get(NAME2);\n      } else {\n        throw new Error(`\"${NAME2}\" does not match any query parameter in URI: \"${parentUrl}\"`);\n      }\n    } catch (error) {\n      parsed.playlistParsingError || (parsed.playlistParsingError = new Error(`EXT-X-DEFINE QUERYPARAM: ${error.message}`));\n    }\n  } else {\n    NAME2 = attr.NAME;\n    VALUE = attr.VALUE;\n  }\n  if (NAME2 in variableList) {\n    parsed.playlistParsingError || (parsed.playlistParsingError = new Error(`EXT-X-DEFINE duplicate Variable Name declarations: \"${NAME2}\"`));\n  } else {\n    variableList[NAME2] = VALUE || \"\";\n  }\n}\nfunction importVariableDefinition(parsed, attr, sourceVariableList) {\n  const IMPORT = attr.IMPORT;\n  if (sourceVariableList && IMPORT in sourceVariableList) {\n    let variableList = parsed.variableList;\n    if (!variableList) {\n      parsed.variableList = variableList = {};\n    }\n    variableList[IMPORT] = sourceVariableList[IMPORT];\n  } else {\n    parsed.playlistParsingError || (parsed.playlistParsingError = new Error(`EXT-X-DEFINE IMPORT attribute not found in Multivariant Playlist: \"${IMPORT}\"`));\n  }\n}\nconst DECIMAL_RESOLUTION_REGEX = /^(\\d+)x(\\d+)$/;\nconst ATTR_LIST_REGEX = /(.+?)=(\".*?\"|.*?)(?:,|$)/g;\nclass AttrList {\n  constructor(attrs, parsed) {\n    if (typeof attrs === \"string\") {\n      attrs = AttrList.parseAttrList(attrs, parsed);\n    }\n    _extends(this, attrs);\n  }\n  get clientAttrs() {\n    return Object.keys(this).filter((attr) => attr.substring(0, 2) === \"X-\");\n  }\n  decimalInteger(attrName) {\n    const intValue = parseInt(this[attrName], 10);\n    if (intValue > Number.MAX_SAFE_INTEGER) {\n      return Infinity;\n    }\n    return intValue;\n  }\n  hexadecimalInteger(attrName) {\n    if (this[attrName]) {\n      let stringValue = (this[attrName] || \"0x\").slice(2);\n      stringValue = (stringValue.length & 1 ? \"0\" : \"\") + stringValue;\n      const value = new Uint8Array(stringValue.length / 2);\n      for (let i = 0; i < stringValue.length / 2; i++) {\n        value[i] = parseInt(stringValue.slice(i * 2, i * 2 + 2), 16);\n      }\n      return value;\n    }\n    return null;\n  }\n  hexadecimalIntegerAsNumber(attrName) {\n    const intValue = parseInt(this[attrName], 16);\n    if (intValue > Number.MAX_SAFE_INTEGER) {\n      return Infinity;\n    }\n    return intValue;\n  }\n  decimalFloatingPoint(attrName) {\n    return parseFloat(this[attrName]);\n  }\n  optionalFloat(attrName, defaultValue) {\n    const value = this[attrName];\n    return value ? parseFloat(value) : defaultValue;\n  }\n  enumeratedString(attrName) {\n    return this[attrName];\n  }\n  enumeratedStringList(attrName, dict) {\n    const attrValue = this[attrName];\n    return (attrValue ? attrValue.split(/[ ,]+/) : []).reduce((result, identifier) => {\n      result[identifier.toLowerCase()] = true;\n      return result;\n    }, dict);\n  }\n  bool(attrName) {\n    return this[attrName] === \"YES\";\n  }\n  decimalResolution(attrName) {\n    const res = DECIMAL_RESOLUTION_REGEX.exec(this[attrName]);\n    if (res === null) {\n      return void 0;\n    }\n    return {\n      width: parseInt(res[1], 10),\n      height: parseInt(res[2], 10)\n    };\n  }\n  static parseAttrList(input, parsed) {\n    let match;\n    const attrs = {};\n    const quote = '\"';\n    ATTR_LIST_REGEX.lastIndex = 0;\n    while ((match = ATTR_LIST_REGEX.exec(input)) !== null) {\n      const name = match[1].trim();\n      let value = match[2];\n      const quotedString = value.indexOf(quote) === 0 && value.lastIndexOf(quote) === value.length - 1;\n      let hexadecimalSequence = false;\n      if (quotedString) {\n        value = value.slice(1, -1);\n      } else {\n        switch (name) {\n          case \"IV\":\n          case \"SCTE35-CMD\":\n          case \"SCTE35-IN\":\n          case \"SCTE35-OUT\":\n            hexadecimalSequence = true;\n        }\n      }\n      if (parsed && (quotedString || hexadecimalSequence)) {\n        {\n          value = substituteVariables(parsed, value);\n        }\n      } else if (!hexadecimalSequence && !quotedString) {\n        switch (name) {\n          case \"CLOSED-CAPTIONS\":\n            if (value === \"NONE\") {\n              break;\n            }\n          // falls through\n          case \"ALLOWED-CPC\":\n          case \"CLASS\":\n          case \"ASSOC-LANGUAGE\":\n          case \"AUDIO\":\n          case \"BYTERANGE\":\n          case \"CHANNELS\":\n          case \"CHARACTERISTICS\":\n          case \"CODECS\":\n          case \"DATA-ID\":\n          case \"END-DATE\":\n          case \"GROUP-ID\":\n          case \"ID\":\n          case \"IMPORT\":\n          case \"INSTREAM-ID\":\n          case \"KEYFORMAT\":\n          case \"KEYFORMATVERSIONS\":\n          case \"LANGUAGE\":\n          case \"NAME\":\n          case \"PATHWAY-ID\":\n          case \"QUERYPARAM\":\n          case \"RECENTLY-REMOVED-DATERANGES\":\n          case \"SERVER-URI\":\n          case \"STABLE-RENDITION-ID\":\n          case \"STABLE-VARIANT-ID\":\n          case \"START-DATE\":\n          case \"SUBTITLES\":\n          case \"SUPPLEMENTAL-CODECS\":\n          case \"URI\":\n          case \"VALUE\":\n          case \"VIDEO\":\n          case \"X-ASSET-LIST\":\n          case \"X-ASSET-URI\":\n            logger.warn(`${input}: attribute ${name} is missing quotes`);\n        }\n      }\n      attrs[name] = value;\n    }\n    return attrs;\n  }\n}\nconst CLASS_INTERSTITIAL = \"com.apple.hls.interstitial\";\nfunction isDateRangeCueAttribute(attrName) {\n  return attrName !== \"ID\" && attrName !== \"CLASS\" && attrName !== \"CUE\" && attrName !== \"START-DATE\" && attrName !== \"DURATION\" && attrName !== \"END-DATE\" && attrName !== \"END-ON-NEXT\";\n}\nfunction isSCTE35Attribute(attrName) {\n  return attrName === \"SCTE35-OUT\" || attrName === \"SCTE35-IN\" || attrName === \"SCTE35-CMD\";\n}\nclass DateRange {\n  constructor(dateRangeAttr, dateRangeWithSameId, tagCount = 0) {\n    var _dateRangeWithSameId$;\n    this.attr = void 0;\n    this.tagAnchor = void 0;\n    this.tagOrder = void 0;\n    this._startDate = void 0;\n    this._endDate = void 0;\n    this._dateAtEnd = void 0;\n    this._cue = void 0;\n    this._badValueForSameId = void 0;\n    this.tagAnchor = (dateRangeWithSameId == null ? void 0 : dateRangeWithSameId.tagAnchor) || null;\n    this.tagOrder = (_dateRangeWithSameId$ = dateRangeWithSameId == null ? void 0 : dateRangeWithSameId.tagOrder) != null ? _dateRangeWithSameId$ : tagCount;\n    if (dateRangeWithSameId) {\n      const previousAttr = dateRangeWithSameId.attr;\n      for (const key in previousAttr) {\n        if (Object.prototype.hasOwnProperty.call(dateRangeAttr, key) && dateRangeAttr[key] !== previousAttr[key]) {\n          logger.warn(`DATERANGE tag attribute: \"${key}\" does not match for tags with ID: \"${dateRangeAttr.ID}\"`);\n          this._badValueForSameId = key;\n          break;\n        }\n      }\n      dateRangeAttr = _extends(new AttrList({}), previousAttr, dateRangeAttr);\n    }\n    this.attr = dateRangeAttr;\n    if (dateRangeWithSameId) {\n      this._startDate = dateRangeWithSameId._startDate;\n      this._cue = dateRangeWithSameId._cue;\n      this._endDate = dateRangeWithSameId._endDate;\n      this._dateAtEnd = dateRangeWithSameId._dateAtEnd;\n    } else {\n      this._startDate = new Date(dateRangeAttr[\"START-DATE\"]);\n    }\n    if (\"END-DATE\" in this.attr) {\n      const endDate = (dateRangeWithSameId == null ? void 0 : dateRangeWithSameId.endDate) || new Date(this.attr[\"END-DATE\"]);\n      if (isFiniteNumber(endDate.getTime())) {\n        this._endDate = endDate;\n      }\n    }\n  }\n  get id() {\n    return this.attr.ID;\n  }\n  get class() {\n    return this.attr.CLASS;\n  }\n  get cue() {\n    const _cue = this._cue;\n    if (_cue === void 0) {\n      return this._cue = this.attr.enumeratedStringList(this.attr.CUE ? \"CUE\" : \"X-CUE\", {\n        pre: false,\n        post: false,\n        once: false\n      });\n    }\n    return _cue;\n  }\n  get startTime() {\n    const {\n      tagAnchor\n    } = this;\n    if (tagAnchor === null || tagAnchor.programDateTime === null) {\n      logger.warn(`Expected tagAnchor Fragment with PDT set for DateRange \"${this.id}\": ${tagAnchor}`);\n      return NaN;\n    }\n    return tagAnchor.start + (this.startDate.getTime() - tagAnchor.programDateTime) / 1e3;\n  }\n  get startDate() {\n    return this._startDate;\n  }\n  get endDate() {\n    const dateAtEnd = this._endDate || this._dateAtEnd;\n    if (dateAtEnd) {\n      return dateAtEnd;\n    }\n    const duration = this.duration;\n    if (duration !== null) {\n      return this._dateAtEnd = new Date(this._startDate.getTime() + duration * 1e3);\n    }\n    return null;\n  }\n  get duration() {\n    if (\"DURATION\" in this.attr) {\n      const duration = this.attr.decimalFloatingPoint(\"DURATION\");\n      if (isFiniteNumber(duration)) {\n        return duration;\n      }\n    } else if (this._endDate) {\n      return (this._endDate.getTime() - this._startDate.getTime()) / 1e3;\n    }\n    return null;\n  }\n  get plannedDuration() {\n    if (\"PLANNED-DURATION\" in this.attr) {\n      return this.attr.decimalFloatingPoint(\"PLANNED-DURATION\");\n    }\n    return null;\n  }\n  get endOnNext() {\n    return this.attr.bool(\"END-ON-NEXT\");\n  }\n  get isInterstitial() {\n    return this.class === CLASS_INTERSTITIAL;\n  }\n  get isValid() {\n    return !!this.id && !this._badValueForSameId && isFiniteNumber(this.startDate.getTime()) && (this.duration === null || this.duration >= 0) && (!this.endOnNext || !!this.class) && (!this.attr.CUE || !this.cue.pre && !this.cue.post || this.cue.pre !== this.cue.post) && (!this.isInterstitial || \"X-ASSET-URI\" in this.attr || \"X-ASSET-LIST\" in this.attr);\n  }\n}\nconst DEFAULT_TARGET_DURATION = 10;\nclass LevelDetails {\n  constructor(baseUrl) {\n    this.PTSKnown = false;\n    this.alignedSliding = false;\n    this.averagetargetduration = void 0;\n    this.endCC = 0;\n    this.endSN = 0;\n    this.fragments = void 0;\n    this.fragmentHint = void 0;\n    this.partList = null;\n    this.dateRanges = void 0;\n    this.dateRangeTagCount = 0;\n    this.live = true;\n    this.requestScheduled = -1;\n    this.ageHeader = 0;\n    this.advancedDateTime = void 0;\n    this.updated = true;\n    this.advanced = true;\n    this.misses = 0;\n    this.startCC = 0;\n    this.startSN = 0;\n    this.startTimeOffset = null;\n    this.targetduration = 0;\n    this.totalduration = 0;\n    this.type = null;\n    this.url = void 0;\n    this.m3u8 = \"\";\n    this.version = null;\n    this.canBlockReload = false;\n    this.canSkipUntil = 0;\n    this.canSkipDateRanges = false;\n    this.skippedSegments = 0;\n    this.recentlyRemovedDateranges = void 0;\n    this.partHoldBack = 0;\n    this.holdBack = 0;\n    this.partTarget = 0;\n    this.preloadHint = void 0;\n    this.renditionReports = void 0;\n    this.tuneInGoal = 0;\n    this.deltaUpdateFailed = void 0;\n    this.driftStartTime = 0;\n    this.driftEndTime = 0;\n    this.driftStart = 0;\n    this.driftEnd = 0;\n    this.encryptedFragments = void 0;\n    this.playlistParsingError = null;\n    this.variableList = null;\n    this.hasVariableRefs = false;\n    this.appliedTimelineOffset = void 0;\n    this.fragments = [];\n    this.encryptedFragments = [];\n    this.dateRanges = {};\n    this.url = baseUrl;\n  }\n  reloaded(previous) {\n    if (!previous) {\n      this.advanced = true;\n      this.updated = true;\n      return;\n    }\n    const partSnDiff = this.lastPartSn - previous.lastPartSn;\n    const partIndexDiff = this.lastPartIndex - previous.lastPartIndex;\n    this.updated = this.endSN !== previous.endSN || !!partIndexDiff || !!partSnDiff || !this.live;\n    this.advanced = this.endSN > previous.endSN || partSnDiff > 0 || partSnDiff === 0 && partIndexDiff > 0;\n    if (this.updated || this.advanced) {\n      this.misses = Math.floor(previous.misses * 0.6);\n    } else {\n      this.misses = previous.misses + 1;\n    }\n  }\n  get hasProgramDateTime() {\n    if (this.fragments.length) {\n      return isFiniteNumber(this.fragments[this.fragments.length - 1].programDateTime);\n    }\n    return false;\n  }\n  get levelTargetDuration() {\n    return this.averagetargetduration || this.targetduration || DEFAULT_TARGET_DURATION;\n  }\n  get drift() {\n    const runTime = this.driftEndTime - this.driftStartTime;\n    if (runTime > 0) {\n      const runDuration = this.driftEnd - this.driftStart;\n      return runDuration * 1e3 / runTime;\n    }\n    return 1;\n  }\n  get edge() {\n    return this.partEnd || this.fragmentEnd;\n  }\n  get partEnd() {\n    var _this$partList;\n    if ((_this$partList = this.partList) != null && _this$partList.length) {\n      return this.partList[this.partList.length - 1].end;\n    }\n    return this.fragmentEnd;\n  }\n  get fragmentEnd() {\n    var _this$fragments;\n    if ((_this$fragments = this.fragments) != null && _this$fragments.length) {\n      return this.fragments[this.fragments.length - 1].end;\n    }\n    return 0;\n  }\n  get fragmentStart() {\n    var _this$fragments2;\n    if ((_this$fragments2 = this.fragments) != null && _this$fragments2.length) {\n      return this.fragments[0].start;\n    }\n    return 0;\n  }\n  get age() {\n    if (this.advancedDateTime) {\n      return Math.max(Date.now() - this.advancedDateTime, 0) / 1e3;\n    }\n    return 0;\n  }\n  get lastPartIndex() {\n    var _this$partList2;\n    if ((_this$partList2 = this.partList) != null && _this$partList2.length) {\n      return this.partList[this.partList.length - 1].index;\n    }\n    return -1;\n  }\n  get maxPartIndex() {\n    const partList = this.partList;\n    if (partList) {\n      const lastIndex = this.lastPartIndex;\n      if (lastIndex !== -1) {\n        for (let i = partList.length; i--; ) {\n          if (partList[i].index > lastIndex) {\n            return partList[i].index;\n          }\n        }\n        return lastIndex;\n      }\n    }\n    return 0;\n  }\n  get lastPartSn() {\n    var _this$partList3;\n    if ((_this$partList3 = this.partList) != null && _this$partList3.length) {\n      return this.partList[this.partList.length - 1].fragment.sn;\n    }\n    return this.endSN;\n  }\n  get expired() {\n    if (this.live && this.age && this.misses < 3) {\n      const playlistWindowDuration = this.partEnd - this.fragmentStart;\n      return this.age > Math.max(playlistWindowDuration, this.totalduration) + this.levelTargetDuration;\n    }\n    return false;\n  }\n}\nfunction isFullSegmentEncryption(method) {\n  return method === \"AES-128\" || method === \"AES-256\" || method === \"AES-256-CTR\";\n}\nfunction getAesModeFromFullSegmentMethod(method) {\n  switch (method) {\n    case \"AES-128\":\n    case \"AES-256\":\n      return DecrypterAesMode.cbc;\n    case \"AES-256-CTR\":\n      return DecrypterAesMode.ctr;\n    default:\n      throw new Error(`invalid full segment method ${method}`);\n  }\n}\nfunction base64Decode(base64encodedStr) {\n  return Uint8Array.from(atob(base64encodedStr), (c) => c.charCodeAt(0));\n}\nfunction strToUtf8array(str) {\n  return Uint8Array.from(unescape(encodeURIComponent(str)), (c) => c.charCodeAt(0));\n}\nfunction getKeyIdBytes(str) {\n  const keyIdbytes = strToUtf8array(str).subarray(0, 16);\n  const paddedkeyIdbytes = new Uint8Array(16);\n  paddedkeyIdbytes.set(keyIdbytes, 16 - keyIdbytes.length);\n  return paddedkeyIdbytes;\n}\nfunction changeEndianness(keyId) {\n  const swap = function swap2(array, from, to) {\n    const cur = array[from];\n    array[from] = array[to];\n    array[to] = cur;\n  };\n  swap(keyId, 0, 3);\n  swap(keyId, 1, 2);\n  swap(keyId, 4, 5);\n  swap(keyId, 6, 7);\n}\nfunction convertDataUriToArrayBytes(uri) {\n  const colonsplit = uri.split(\":\");\n  let keydata = null;\n  if (colonsplit[0] === \"data\" && colonsplit.length === 2) {\n    const semicolonsplit = colonsplit[1].split(\";\");\n    const commasplit = semicolonsplit[semicolonsplit.length - 1].split(\",\");\n    if (commasplit.length === 2) {\n      const isbase64 = commasplit[0] === \"base64\";\n      const data = commasplit[1];\n      if (isbase64) {\n        semicolonsplit.splice(-1, 1);\n        keydata = base64Decode(data);\n      } else {\n        keydata = getKeyIdBytes(data);\n      }\n    }\n  }\n  return keydata;\n}\nconst optionalSelf = typeof self !== \"undefined\" ? self : void 0;\nvar KeySystems = {\n  CLEARKEY: \"org.w3.clearkey\",\n  FAIRPLAY: \"com.apple.fps\",\n  PLAYREADY: \"com.microsoft.playready\",\n  WIDEVINE: \"com.widevine.alpha\"\n};\nvar KeySystemFormats = {\n  CLEARKEY: \"org.w3.clearkey\",\n  FAIRPLAY: \"com.apple.streamingkeydelivery\",\n  PLAYREADY: \"com.microsoft.playready\",\n  WIDEVINE: \"urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed\"\n};\nfunction keySystemFormatToKeySystemDomain(format2) {\n  switch (format2) {\n    case KeySystemFormats.FAIRPLAY:\n      return KeySystems.FAIRPLAY;\n    case KeySystemFormats.PLAYREADY:\n      return KeySystems.PLAYREADY;\n    case KeySystemFormats.WIDEVINE:\n      return KeySystems.WIDEVINE;\n    case KeySystemFormats.CLEARKEY:\n      return KeySystems.CLEARKEY;\n  }\n}\nfunction keySystemDomainToKeySystemFormat(keySystem) {\n  switch (keySystem) {\n    case KeySystems.FAIRPLAY:\n      return KeySystemFormats.FAIRPLAY;\n    case KeySystems.PLAYREADY:\n      return KeySystemFormats.PLAYREADY;\n    case KeySystems.WIDEVINE:\n      return KeySystemFormats.WIDEVINE;\n    case KeySystems.CLEARKEY:\n      return KeySystemFormats.CLEARKEY;\n  }\n}\nfunction getKeySystemsForConfig(config) {\n  const {\n    drmSystems,\n    widevineLicenseUrl\n  } = config;\n  const keySystemsToAttempt = drmSystems ? [KeySystems.FAIRPLAY, KeySystems.WIDEVINE, KeySystems.PLAYREADY, KeySystems.CLEARKEY].filter((keySystem) => !!drmSystems[keySystem]) : [];\n  if (!keySystemsToAttempt[KeySystems.WIDEVINE] && widevineLicenseUrl) {\n    keySystemsToAttempt.push(KeySystems.WIDEVINE);\n  }\n  return keySystemsToAttempt;\n}\nconst requestMediaKeySystemAccess = function(_optionalSelf$navigat) {\n  if (optionalSelf != null && (_optionalSelf$navigat = optionalSelf.navigator) != null && _optionalSelf$navigat.requestMediaKeySystemAccess) {\n    return self.navigator.requestMediaKeySystemAccess.bind(self.navigator);\n  } else {\n    return null;\n  }\n}();\nfunction getSupportedMediaKeySystemConfigurations(keySystem, audioCodecs, videoCodecs, drmSystemOptions) {\n  let initDataTypes;\n  switch (keySystem) {\n    case KeySystems.FAIRPLAY:\n      initDataTypes = [\"cenc\", \"sinf\"];\n      break;\n    case KeySystems.WIDEVINE:\n    case KeySystems.PLAYREADY:\n      initDataTypes = [\"cenc\"];\n      break;\n    case KeySystems.CLEARKEY:\n      initDataTypes = [\"cenc\", \"keyids\"];\n      break;\n    default:\n      throw new Error(`Unknown key-system: ${keySystem}`);\n  }\n  return createMediaKeySystemConfigurations(initDataTypes, audioCodecs, videoCodecs, drmSystemOptions);\n}\nfunction createMediaKeySystemConfigurations(initDataTypes, audioCodecs, videoCodecs, drmSystemOptions) {\n  const baseConfig = {\n    initDataTypes,\n    persistentState: drmSystemOptions.persistentState || \"optional\",\n    distinctiveIdentifier: drmSystemOptions.distinctiveIdentifier || \"optional\",\n    sessionTypes: drmSystemOptions.sessionTypes || [drmSystemOptions.sessionType || \"temporary\"],\n    audioCapabilities: audioCodecs.map((codec) => ({\n      contentType: `audio/mp4; codecs=${codec}`,\n      robustness: drmSystemOptions.audioRobustness || \"\",\n      encryptionScheme: drmSystemOptions.audioEncryptionScheme || null\n    })),\n    videoCapabilities: videoCodecs.map((codec) => ({\n      contentType: `video/mp4; codecs=${codec}`,\n      robustness: drmSystemOptions.videoRobustness || \"\",\n      encryptionScheme: drmSystemOptions.videoEncryptionScheme || null\n    }))\n  };\n  return [baseConfig];\n}\nfunction isPersistentSessionType(drmSystemOptions) {\n  var _drmSystemOptions$ses;\n  return drmSystemOptions.sessionType === \"persistent-license\" || !!((_drmSystemOptions$ses = drmSystemOptions.sessionTypes) != null && _drmSystemOptions$ses.some((type) => type === \"persistent-license\"));\n}\nfunction parsePlayReadyWRM(keyBytes) {\n  const keyBytesUtf16 = new Uint16Array(keyBytes.buffer, keyBytes.byteOffset, keyBytes.byteLength / 2);\n  const keyByteStr = String.fromCharCode.apply(null, Array.from(keyBytesUtf16));\n  const xmlKeyBytes = keyByteStr.substring(keyByteStr.indexOf(\"<\"), keyByteStr.length);\n  const parser = new DOMParser();\n  const xmlDoc = parser.parseFromString(xmlKeyBytes, \"text/xml\");\n  const keyData = xmlDoc.getElementsByTagName(\"KID\")[0];\n  if (keyData) {\n    const keyId = keyData.childNodes[0] ? keyData.childNodes[0].nodeValue : keyData.getAttribute(\"VALUE\");\n    if (keyId) {\n      const keyIdArray = base64Decode(keyId).subarray(0, 16);\n      changeEndianness(keyIdArray);\n      return keyIdArray;\n    }\n  }\n  return null;\n}\nlet keyUriToKeyIdMap = {};\nclass LevelKey {\n  static clearKeyUriToKeyIdMap() {\n    keyUriToKeyIdMap = {};\n  }\n  constructor(method, uri, format2, formatversions = [1], iv = null, keyId) {\n    this.uri = void 0;\n    this.method = void 0;\n    this.keyFormat = void 0;\n    this.keyFormatVersions = void 0;\n    this.encrypted = void 0;\n    this.isCommonEncryption = void 0;\n    this.iv = null;\n    this.key = null;\n    this.keyId = null;\n    this.pssh = null;\n    this.method = method;\n    this.uri = uri;\n    this.keyFormat = format2;\n    this.keyFormatVersions = formatversions;\n    this.iv = iv;\n    this.encrypted = method ? method !== \"NONE\" : false;\n    this.isCommonEncryption = this.encrypted && !isFullSegmentEncryption(method);\n    if (keyId != null && keyId.startsWith(\"0x\")) {\n      this.keyId = new Uint8Array(hexToArrayBuffer(keyId));\n    }\n  }\n  matches(key) {\n    var _key$iv, _this$iv;\n    return key.uri === this.uri && key.method === this.method && key.encrypted === this.encrypted && key.keyFormat === this.keyFormat && key.keyFormatVersions.join(\",\") === this.keyFormatVersions.join(\",\") && ((_key$iv = key.iv) == null ? void 0 : _key$iv.join(\",\")) === ((_this$iv = this.iv) == null ? void 0 : _this$iv.join(\",\"));\n  }\n  isSupported() {\n    if (this.method) {\n      if (isFullSegmentEncryption(this.method) || this.method === \"NONE\") {\n        return true;\n      }\n      if (this.keyFormat === \"identity\") {\n        return this.method === \"SAMPLE-AES\";\n      } else {\n        switch (this.keyFormat) {\n          case KeySystemFormats.FAIRPLAY:\n          case KeySystemFormats.WIDEVINE:\n          case KeySystemFormats.PLAYREADY:\n          case KeySystemFormats.CLEARKEY:\n            return [\"ISO-23001-7\", \"SAMPLE-AES\", \"SAMPLE-AES-CENC\", \"SAMPLE-AES-CTR\"].indexOf(this.method) !== -1;\n        }\n      }\n    }\n    return false;\n  }\n  getDecryptData(sn) {\n    if (!this.encrypted || !this.uri) {\n      return null;\n    }\n    if (isFullSegmentEncryption(this.method) && this.uri && !this.iv) {\n      if (typeof sn !== \"number\") {\n        logger.warn(`missing IV for initialization segment with method=\"${this.method}\" - compliance issue`);\n        sn = 0;\n      }\n      const iv = createInitializationVector(sn);\n      const decryptdata = new LevelKey(this.method, this.uri, \"identity\", this.keyFormatVersions, iv);\n      return decryptdata;\n    }\n    if (this.pssh && this.keyId) {\n      return this;\n    }\n    const keyBytes = convertDataUriToArrayBytes(this.uri);\n    if (keyBytes) {\n      switch (this.keyFormat) {\n        case KeySystemFormats.WIDEVINE:\n          this.pssh = keyBytes;\n          if (!this.keyId && keyBytes.length >= 22) {\n            const offset = keyBytes.length - 22;\n            this.keyId = keyBytes.subarray(offset, offset + 16);\n          }\n          break;\n        case KeySystemFormats.PLAYREADY: {\n          const PlayReadyKeySystemUUID = new Uint8Array([154, 4, 240, 121, 152, 64, 66, 134, 171, 146, 230, 91, 224, 136, 95, 149]);\n          this.pssh = mp4pssh(PlayReadyKeySystemUUID, null, keyBytes);\n          this.keyId = parsePlayReadyWRM(keyBytes);\n          break;\n        }\n        default: {\n          let keydata = keyBytes.subarray(0, 16);\n          if (keydata.length !== 16) {\n            const padded = new Uint8Array(16);\n            padded.set(keydata, 16 - keydata.length);\n            keydata = padded;\n          }\n          this.keyId = keydata;\n          break;\n        }\n      }\n    }\n    if (!this.keyId || this.keyId.byteLength !== 16) {\n      let keyId = keyUriToKeyIdMap[this.uri];\n      if (!keyId) {\n        const val = Object.keys(keyUriToKeyIdMap).length % Number.MAX_SAFE_INTEGER;\n        keyId = new Uint8Array(16);\n        const dv = new DataView(keyId.buffer, 12, 4);\n        dv.setUint32(0, val);\n        keyUriToKeyIdMap[this.uri] = keyId;\n      }\n      this.keyId = keyId;\n    }\n    return this;\n  }\n}\nfunction createInitializationVector(segmentNumber) {\n  const uint8View = new Uint8Array(16);\n  for (let i = 12; i < 16; i++) {\n    uint8View[i] = segmentNumber >> 8 * (15 - i) & 255;\n  }\n  return uint8View;\n}\nconst MASTER_PLAYLIST_REGEX = /#EXT-X-STREAM-INF:([^\\r\\n]*)(?:[\\r\\n](?:#[^\\r\\n]*)?)*([^\\r\\n]+)|#EXT-X-(SESSION-DATA|SESSION-KEY|DEFINE|CONTENT-STEERING|START):([^\\r\\n]*)[\\r\\n]+/g;\nconst MASTER_PLAYLIST_MEDIA_REGEX = /#EXT-X-MEDIA:(.*)/g;\nconst IS_MEDIA_PLAYLIST = /^#EXT(?:INF|-X-TARGETDURATION):/m;\nconst LEVEL_PLAYLIST_REGEX_FAST = new RegExp([\n  /#EXTINF:\\s*(\\d*(?:\\.\\d+)?)(?:,(.*)\\s+)?/.source,\n  // duration (#EXTINF:<duration>,<title>), group 1 => duration, group 2 => title\n  /(?!#) *(\\S[^\\r\\n]*)/.source,\n  // segment URI, group 3 => the URI (note newline is not eaten)\n  /#.*/.source\n  // All other non-segment oriented tags will match with all groups empty\n].join(\"|\"), \"g\");\nconst LEVEL_PLAYLIST_REGEX_SLOW = new RegExp([/#EXT-X-(PROGRAM-DATE-TIME|BYTERANGE|DATERANGE|DEFINE|KEY|MAP|PART|PART-INF|PLAYLIST-TYPE|PRELOAD-HINT|RENDITION-REPORT|SERVER-CONTROL|SKIP|START):(.+)/.source, /#EXT-X-(BITRATE|DISCONTINUITY-SEQUENCE|MEDIA-SEQUENCE|TARGETDURATION|VERSION): *(\\d+)/.source, /#EXT-X-(DISCONTINUITY|ENDLIST|GAP|INDEPENDENT-SEGMENTS)/.source, /(#)([^:]*):(.*)/.source, /(#)(.*)(?:.*)\\r?\\n?/.source].join(\"|\"));\nclass M3U8Parser {\n  static findGroup(groups, mediaGroupId) {\n    for (let i = 0; i < groups.length; i++) {\n      const group = groups[i];\n      if (group.id === mediaGroupId) {\n        return group;\n      }\n    }\n  }\n  static resolve(url, baseUrl) {\n    return urlToolkitExports.buildAbsoluteURL(baseUrl, url, {\n      alwaysNormalize: true\n    });\n  }\n  static isMediaPlaylist(str) {\n    return IS_MEDIA_PLAYLIST.test(str);\n  }\n  static parseMasterPlaylist(string, baseurl) {\n    const hasVariableRefs = hasVariableReferences(string);\n    const parsed = {\n      contentSteering: null,\n      levels: [],\n      playlistParsingError: null,\n      sessionData: null,\n      sessionKeys: null,\n      startTimeOffset: null,\n      variableList: null,\n      hasVariableRefs\n    };\n    const levelsWithKnownCodecs = [];\n    MASTER_PLAYLIST_REGEX.lastIndex = 0;\n    let result;\n    while ((result = MASTER_PLAYLIST_REGEX.exec(string)) != null) {\n      if (result[1]) {\n        var _level$unknownCodecs;\n        const attrs = new AttrList(result[1], parsed);\n        const uri = substituteVariables(parsed, result[2]);\n        const level = {\n          attrs,\n          bitrate: attrs.decimalInteger(\"BANDWIDTH\") || attrs.decimalInteger(\"AVERAGE-BANDWIDTH\"),\n          name: attrs.NAME,\n          url: M3U8Parser.resolve(uri, baseurl)\n        };\n        const resolution = attrs.decimalResolution(\"RESOLUTION\");\n        if (resolution) {\n          level.width = resolution.width;\n          level.height = resolution.height;\n        }\n        setCodecs(attrs.CODECS, level);\n        const supplementalCodecs = attrs[\"SUPPLEMENTAL-CODECS\"];\n        if (supplementalCodecs) {\n          level.supplemental = {};\n          setCodecs(supplementalCodecs, level.supplemental);\n        }\n        if (!((_level$unknownCodecs = level.unknownCodecs) != null && _level$unknownCodecs.length)) {\n          levelsWithKnownCodecs.push(level);\n        }\n        parsed.levels.push(level);\n      } else if (result[3]) {\n        const tag = result[3];\n        const attributes = result[4];\n        switch (tag) {\n          case \"SESSION-DATA\": {\n            const sessionAttrs = new AttrList(attributes, parsed);\n            const dataId = sessionAttrs[\"DATA-ID\"];\n            if (dataId) {\n              if (parsed.sessionData === null) {\n                parsed.sessionData = {};\n              }\n              parsed.sessionData[dataId] = sessionAttrs;\n            }\n            break;\n          }\n          case \"SESSION-KEY\": {\n            const sessionKey = parseKey(attributes, baseurl, parsed);\n            if (sessionKey.encrypted && sessionKey.isSupported()) {\n              if (parsed.sessionKeys === null) {\n                parsed.sessionKeys = [];\n              }\n              parsed.sessionKeys.push(sessionKey);\n            } else {\n              logger.warn(`[Keys] Ignoring invalid EXT-X-SESSION-KEY tag: \"${attributes}\"`);\n            }\n            break;\n          }\n          case \"DEFINE\": {\n            {\n              const variableAttributes = new AttrList(attributes, parsed);\n              addVariableDefinition(parsed, variableAttributes, baseurl);\n            }\n            break;\n          }\n          case \"CONTENT-STEERING\": {\n            const contentSteeringAttributes = new AttrList(attributes, parsed);\n            parsed.contentSteering = {\n              uri: M3U8Parser.resolve(contentSteeringAttributes[\"SERVER-URI\"], baseurl),\n              pathwayId: contentSteeringAttributes[\"PATHWAY-ID\"] || \".\"\n            };\n            break;\n          }\n          case \"START\": {\n            parsed.startTimeOffset = parseStartTimeOffset(attributes);\n            break;\n          }\n        }\n      }\n    }\n    const stripUnknownCodecLevels = levelsWithKnownCodecs.length > 0 && levelsWithKnownCodecs.length < parsed.levels.length;\n    parsed.levels = stripUnknownCodecLevels ? levelsWithKnownCodecs : parsed.levels;\n    if (parsed.levels.length === 0) {\n      parsed.playlistParsingError = new Error(\"no levels found in manifest\");\n    }\n    return parsed;\n  }\n  static parseMasterPlaylistMedia(string, baseurl, parsed) {\n    let result;\n    const results = {};\n    const levels = parsed.levels;\n    const groupsByType = {\n      AUDIO: levels.map((level) => ({\n        id: level.attrs.AUDIO,\n        audioCodec: level.audioCodec\n      })),\n      SUBTITLES: levels.map((level) => ({\n        id: level.attrs.SUBTITLES,\n        textCodec: level.textCodec\n      })),\n      \"CLOSED-CAPTIONS\": []\n    };\n    let id = 0;\n    MASTER_PLAYLIST_MEDIA_REGEX.lastIndex = 0;\n    while ((result = MASTER_PLAYLIST_MEDIA_REGEX.exec(string)) !== null) {\n      const attrs = new AttrList(result[1], parsed);\n      const type = attrs.TYPE;\n      if (type) {\n        const groups = groupsByType[type];\n        const medias = results[type] || [];\n        results[type] = medias;\n        const lang = attrs.LANGUAGE;\n        const assocLang = attrs[\"ASSOC-LANGUAGE\"];\n        const channels = attrs.CHANNELS;\n        const characteristics = attrs.CHARACTERISTICS;\n        const instreamId = attrs[\"INSTREAM-ID\"];\n        const media = {\n          attrs,\n          bitrate: 0,\n          id: id++,\n          groupId: attrs[\"GROUP-ID\"] || \"\",\n          name: attrs.NAME || lang || \"\",\n          type,\n          default: attrs.bool(\"DEFAULT\"),\n          autoselect: attrs.bool(\"AUTOSELECT\"),\n          forced: attrs.bool(\"FORCED\"),\n          lang,\n          url: attrs.URI ? M3U8Parser.resolve(attrs.URI, baseurl) : \"\"\n        };\n        if (assocLang) {\n          media.assocLang = assocLang;\n        }\n        if (channels) {\n          media.channels = channels;\n        }\n        if (characteristics) {\n          media.characteristics = characteristics;\n        }\n        if (instreamId) {\n          media.instreamId = instreamId;\n        }\n        if (groups != null && groups.length) {\n          const groupCodec = M3U8Parser.findGroup(groups, media.groupId) || groups[0];\n          assignCodec(media, groupCodec, \"audioCodec\");\n          assignCodec(media, groupCodec, \"textCodec\");\n        }\n        medias.push(media);\n      }\n    }\n    return results;\n  }\n  static parseLevelPlaylist(string, baseurl, id, type, levelUrlId, multivariantVariableList) {\n    var _LEVEL_PLAYLIST_REGEX;\n    const base = {\n      url: baseurl\n    };\n    const level = new LevelDetails(baseurl);\n    const fragments = level.fragments;\n    const programDateTimes = [];\n    let currentInitSegment = null;\n    let currentSN = 0;\n    let currentPart = 0;\n    let totalduration = 0;\n    let discontinuityCounter = 0;\n    let currentBitrate = 0;\n    let prevFrag = null;\n    let frag = new Fragment(type, base);\n    let result;\n    let i;\n    let levelkeys;\n    let firstPdtIndex = -1;\n    let createNextFrag = false;\n    let nextByteRange = null;\n    let serverControlAttrs;\n    LEVEL_PLAYLIST_REGEX_FAST.lastIndex = 0;\n    level.m3u8 = string;\n    level.hasVariableRefs = hasVariableReferences(string);\n    if (((_LEVEL_PLAYLIST_REGEX = LEVEL_PLAYLIST_REGEX_FAST.exec(string)) == null ? void 0 : _LEVEL_PLAYLIST_REGEX[0]) !== \"#EXTM3U\") {\n      level.playlistParsingError = new Error(\"Missing format identifier #EXTM3U\");\n      return level;\n    }\n    while ((result = LEVEL_PLAYLIST_REGEX_FAST.exec(string)) !== null) {\n      if (createNextFrag) {\n        createNextFrag = false;\n        frag = new Fragment(type, base);\n        frag.playlistOffset = totalduration;\n        frag.start = totalduration;\n        frag.sn = currentSN;\n        frag.cc = discontinuityCounter;\n        if (currentBitrate) {\n          frag.bitrate = currentBitrate;\n        }\n        frag.level = id;\n        if (currentInitSegment) {\n          frag.initSegment = currentInitSegment;\n          if (currentInitSegment.rawProgramDateTime) {\n            frag.rawProgramDateTime = currentInitSegment.rawProgramDateTime;\n            currentInitSegment.rawProgramDateTime = null;\n          }\n          if (nextByteRange) {\n            frag.setByteRange(nextByteRange);\n            nextByteRange = null;\n          }\n        }\n      }\n      const duration = result[1];\n      if (duration) {\n        frag.duration = parseFloat(duration);\n        const title = (\" \" + result[2]).slice(1);\n        frag.title = title || null;\n        frag.tagList.push(title ? [\"INF\", duration, title] : [\"INF\", duration]);\n      } else if (result[3]) {\n        if (isFiniteNumber(frag.duration)) {\n          frag.playlistOffset = totalduration;\n          frag.start = totalduration;\n          if (levelkeys) {\n            setFragLevelKeys(frag, levelkeys, level);\n          }\n          frag.sn = currentSN;\n          frag.level = id;\n          frag.cc = discontinuityCounter;\n          fragments.push(frag);\n          const uri = (\" \" + result[3]).slice(1);\n          frag.relurl = substituteVariables(level, uri);\n          assignProgramDateTime(frag, prevFrag, programDateTimes);\n          prevFrag = frag;\n          totalduration += frag.duration;\n          currentSN++;\n          currentPart = 0;\n          createNextFrag = true;\n        }\n      } else {\n        result = result[0].match(LEVEL_PLAYLIST_REGEX_SLOW);\n        if (!result) {\n          logger.warn(\"No matches on slow regex match for level playlist!\");\n          continue;\n        }\n        for (i = 1; i < result.length; i++) {\n          if (result[i] !== void 0) {\n            break;\n          }\n        }\n        const tag = (\" \" + result[i]).slice(1);\n        const value1 = (\" \" + result[i + 1]).slice(1);\n        const value2 = result[i + 2] ? (\" \" + result[i + 2]).slice(1) : null;\n        switch (tag) {\n          case \"BYTERANGE\":\n            if (prevFrag) {\n              frag.setByteRange(value1, prevFrag);\n            } else {\n              frag.setByteRange(value1);\n            }\n            break;\n          case \"PROGRAM-DATE-TIME\":\n            frag.rawProgramDateTime = value1;\n            frag.tagList.push([\"PROGRAM-DATE-TIME\", value1]);\n            if (firstPdtIndex === -1) {\n              firstPdtIndex = fragments.length;\n            }\n            break;\n          case \"PLAYLIST-TYPE\":\n            if (level.type) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            }\n            level.type = value1.toUpperCase();\n            break;\n          case \"MEDIA-SEQUENCE\":\n            if (level.startSN !== 0) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            } else if (fragments.length > 0) {\n              assignMustAppearBeforeSegmentsError(level, tag, result);\n            }\n            currentSN = level.startSN = parseInt(value1);\n            break;\n          case \"SKIP\": {\n            if (level.skippedSegments) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            }\n            const skipAttrs = new AttrList(value1, level);\n            const skippedSegments = skipAttrs.decimalInteger(\"SKIPPED-SEGMENTS\");\n            if (isFiniteNumber(skippedSegments)) {\n              level.skippedSegments += skippedSegments;\n              for (let _i = skippedSegments; _i--; ) {\n                fragments.push(null);\n              }\n              currentSN += skippedSegments;\n            }\n            const recentlyRemovedDateranges = skipAttrs.enumeratedString(\"RECENTLY-REMOVED-DATERANGES\");\n            if (recentlyRemovedDateranges) {\n              level.recentlyRemovedDateranges = (level.recentlyRemovedDateranges || []).concat(recentlyRemovedDateranges.split(\"\t\"));\n            }\n            break;\n          }\n          case \"TARGETDURATION\":\n            if (level.targetduration !== 0) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            }\n            level.targetduration = Math.max(parseInt(value1), 1);\n            break;\n          case \"VERSION\":\n            if (level.version !== null) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            }\n            level.version = parseInt(value1);\n            break;\n          case \"INDEPENDENT-SEGMENTS\":\n            break;\n          case \"ENDLIST\":\n            if (!level.live) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            }\n            level.live = false;\n            break;\n          case \"#\":\n            if (value1 || value2) {\n              frag.tagList.push(value2 ? [value1, value2] : [value1]);\n            }\n            break;\n          case \"DISCONTINUITY\":\n            discontinuityCounter++;\n            frag.tagList.push([\"DIS\"]);\n            break;\n          case \"GAP\":\n            frag.gap = true;\n            frag.tagList.push([tag]);\n            break;\n          case \"BITRATE\":\n            frag.tagList.push([tag, value1]);\n            currentBitrate = parseInt(value1) * 1e3;\n            if (isFiniteNumber(currentBitrate)) {\n              frag.bitrate = currentBitrate;\n            } else {\n              currentBitrate = 0;\n            }\n            break;\n          case \"DATERANGE\": {\n            const dateRangeAttr = new AttrList(value1, level);\n            const dateRange = new DateRange(dateRangeAttr, level.dateRanges[dateRangeAttr.ID], level.dateRangeTagCount);\n            level.dateRangeTagCount++;\n            if (dateRange.isValid || level.skippedSegments) {\n              level.dateRanges[dateRange.id] = dateRange;\n            } else {\n              logger.warn(`Ignoring invalid DATERANGE tag: \"${value1}\"`);\n            }\n            frag.tagList.push([\"EXT-X-DATERANGE\", value1]);\n            break;\n          }\n          case \"DEFINE\": {\n            {\n              const variableAttributes = new AttrList(value1, level);\n              if (\"IMPORT\" in variableAttributes) {\n                importVariableDefinition(level, variableAttributes, multivariantVariableList);\n              } else {\n                addVariableDefinition(level, variableAttributes, baseurl);\n              }\n            }\n            break;\n          }\n          case \"DISCONTINUITY-SEQUENCE\":\n            if (level.startCC !== 0) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            } else if (fragments.length > 0) {\n              assignMustAppearBeforeSegmentsError(level, tag, result);\n            }\n            level.startCC = discontinuityCounter = parseInt(value1);\n            break;\n          case \"KEY\": {\n            const levelKey = parseKey(value1, baseurl, level);\n            if (levelKey.isSupported()) {\n              if (levelKey.method === \"NONE\") {\n                levelkeys = void 0;\n                break;\n              }\n              if (!levelkeys) {\n                levelkeys = {};\n              }\n              const currentKey = levelkeys[levelKey.keyFormat];\n              if (!(currentKey != null && currentKey.matches(levelKey))) {\n                if (currentKey) {\n                  levelkeys = _extends({}, levelkeys);\n                }\n                levelkeys[levelKey.keyFormat] = levelKey;\n              }\n            } else {\n              logger.warn(`[Keys] Ignoring invalid EXT-X-KEY tag: \"${value1}\"`);\n            }\n            break;\n          }\n          case \"START\":\n            level.startTimeOffset = parseStartTimeOffset(value1);\n            break;\n          case \"MAP\": {\n            const mapAttrs = new AttrList(value1, level);\n            if (frag.duration) {\n              const init = new Fragment(type, base);\n              setInitSegment(init, mapAttrs, id, levelkeys);\n              currentInitSegment = init;\n              frag.initSegment = currentInitSegment;\n              if (currentInitSegment.rawProgramDateTime && !frag.rawProgramDateTime) {\n                frag.rawProgramDateTime = currentInitSegment.rawProgramDateTime;\n              }\n            } else {\n              const end = frag.byteRangeEndOffset;\n              if (end) {\n                const start = frag.byteRangeStartOffset;\n                nextByteRange = `${end - start}@${start}`;\n              } else {\n                nextByteRange = null;\n              }\n              setInitSegment(frag, mapAttrs, id, levelkeys);\n              currentInitSegment = frag;\n              createNextFrag = true;\n            }\n            currentInitSegment.cc = discontinuityCounter;\n            break;\n          }\n          case \"SERVER-CONTROL\": {\n            if (serverControlAttrs) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            }\n            serverControlAttrs = new AttrList(value1);\n            level.canBlockReload = serverControlAttrs.bool(\"CAN-BLOCK-RELOAD\");\n            level.canSkipUntil = serverControlAttrs.optionalFloat(\"CAN-SKIP-UNTIL\", 0);\n            level.canSkipDateRanges = level.canSkipUntil > 0 && serverControlAttrs.bool(\"CAN-SKIP-DATERANGES\");\n            level.partHoldBack = serverControlAttrs.optionalFloat(\"PART-HOLD-BACK\", 0);\n            level.holdBack = serverControlAttrs.optionalFloat(\"HOLD-BACK\", 0);\n            break;\n          }\n          case \"PART-INF\": {\n            if (level.partTarget) {\n              assignMultipleMediaPlaylistTagOccuranceError(level, tag, result);\n            }\n            const partInfAttrs = new AttrList(value1);\n            level.partTarget = partInfAttrs.decimalFloatingPoint(\"PART-TARGET\");\n            break;\n          }\n          case \"PART\": {\n            let partList = level.partList;\n            if (!partList) {\n              partList = level.partList = [];\n            }\n            const previousFragmentPart = currentPart > 0 ? partList[partList.length - 1] : void 0;\n            const index = currentPart++;\n            const partAttrs = new AttrList(value1, level);\n            const part = new Part(partAttrs, frag, base, index, previousFragmentPart);\n            partList.push(part);\n            frag.duration += part.duration;\n            break;\n          }\n          case \"PRELOAD-HINT\": {\n            const preloadHintAttrs = new AttrList(value1, level);\n            level.preloadHint = preloadHintAttrs;\n            break;\n          }\n          case \"RENDITION-REPORT\": {\n            const renditionReportAttrs = new AttrList(value1, level);\n            level.renditionReports = level.renditionReports || [];\n            level.renditionReports.push(renditionReportAttrs);\n            break;\n          }\n          default:\n            logger.warn(`line parsed but not handled: ${result}`);\n            break;\n        }\n      }\n    }\n    if (prevFrag && !prevFrag.relurl) {\n      fragments.pop();\n      totalduration -= prevFrag.duration;\n      if (level.partList) {\n        level.fragmentHint = prevFrag;\n      }\n    } else if (level.partList) {\n      assignProgramDateTime(frag, prevFrag, programDateTimes);\n      frag.cc = discontinuityCounter;\n      level.fragmentHint = frag;\n      if (levelkeys) {\n        setFragLevelKeys(frag, levelkeys, level);\n      }\n    }\n    if (!level.targetduration) {\n      level.playlistParsingError = new Error(`#EXT-X-TARGETDURATION is required`);\n    }\n    const fragmentLength = fragments.length;\n    const firstFragment = fragments[0];\n    const lastFragment = fragments[fragmentLength - 1];\n    totalduration += level.skippedSegments * level.targetduration;\n    if (totalduration > 0 && fragmentLength && lastFragment) {\n      level.averagetargetduration = totalduration / fragmentLength;\n      const lastSn = lastFragment.sn;\n      level.endSN = lastSn !== \"initSegment\" ? lastSn : 0;\n      if (!level.live) {\n        lastFragment.endList = true;\n      }\n      if (firstFragment && level.startCC === void 0) {\n        level.startCC = firstFragment.cc;\n      }\n      if (firstPdtIndex > 0) {\n        backfillProgramDateTimes(fragments, firstPdtIndex);\n        if (firstFragment) {\n          programDateTimes.unshift(firstFragment);\n        }\n      }\n    } else {\n      level.endSN = 0;\n      level.startCC = 0;\n    }\n    if (level.fragmentHint) {\n      totalduration += level.fragmentHint.duration;\n    }\n    level.totalduration = totalduration;\n    if (programDateTimes.length && level.dateRangeTagCount && firstFragment) {\n      mapDateRanges(programDateTimes, level);\n    }\n    level.endCC = discontinuityCounter;\n    return level;\n  }\n}\nfunction mapDateRanges(programDateTimes, details) {\n  const programDateTimeCount = programDateTimes.length;\n  if (!programDateTimeCount) {\n    return;\n  }\n  const lastProgramDateTime = programDateTimes[programDateTimeCount - 1];\n  const playlistEnd = details.live ? Infinity : details.totalduration;\n  const dateRangeIds = Object.keys(details.dateRanges);\n  for (let i = dateRangeIds.length; i--; ) {\n    const dateRange = details.dateRanges[dateRangeIds[i]];\n    const startDateTime = dateRange.startDate.getTime();\n    dateRange.tagAnchor = lastProgramDateTime.ref;\n    for (let j = programDateTimeCount; j--; ) {\n      const fragIndex = findFragmentWithStartDate(details, startDateTime, programDateTimes, j, playlistEnd);\n      if (fragIndex !== -1) {\n        dateRange.tagAnchor = details.fragments[fragIndex].ref;\n        break;\n      }\n    }\n  }\n}\nfunction findFragmentWithStartDate(details, startDateTime, programDateTimes, index, endTime) {\n  const pdtFragment = programDateTimes[index];\n  if (pdtFragment) {\n    const pdtStart = pdtFragment.programDateTime;\n    if (startDateTime >= pdtStart || index === 0) {\n      var _programDateTimes;\n      const durationBetweenPdt = (((_programDateTimes = programDateTimes[index + 1]) == null ? void 0 : _programDateTimes.start) || endTime) - pdtFragment.start;\n      if (startDateTime <= pdtStart + durationBetweenPdt * 1e3) {\n        const startIndex = programDateTimes[index].sn - details.startSN;\n        const fragments = details.fragments;\n        if (fragments.length > programDateTimes.length) {\n          const endSegment = programDateTimes[index + 1] || fragments[fragments.length - 1];\n          const endIndex = endSegment.sn - details.startSN;\n          for (let i = endIndex; i > startIndex; i--) {\n            const fragStartDateTime = fragments[i].programDateTime;\n            if (startDateTime >= fragStartDateTime && startDateTime < fragStartDateTime + fragments[i].duration * 1e3) {\n              return i;\n            }\n          }\n        }\n        return startIndex;\n      }\n    }\n  }\n  return -1;\n}\nfunction parseKey(keyTagAttributes, baseurl, parsed) {\n  var _keyAttrs$METHOD, _keyAttrs$KEYFORMAT;\n  const keyAttrs = new AttrList(keyTagAttributes, parsed);\n  const decryptmethod = (_keyAttrs$METHOD = keyAttrs.METHOD) != null ? _keyAttrs$METHOD : \"\";\n  const decrypturi = keyAttrs.URI;\n  const decryptiv = keyAttrs.hexadecimalInteger(\"IV\");\n  const decryptkeyformatversions = keyAttrs.KEYFORMATVERSIONS;\n  const decryptkeyformat = (_keyAttrs$KEYFORMAT = keyAttrs.KEYFORMAT) != null ? _keyAttrs$KEYFORMAT : \"identity\";\n  if (decrypturi && keyAttrs.IV && !decryptiv) {\n    logger.error(`Invalid IV: ${keyAttrs.IV}`);\n  }\n  const resolvedUri = decrypturi ? M3U8Parser.resolve(decrypturi, baseurl) : \"\";\n  const keyFormatVersions = (decryptkeyformatversions ? decryptkeyformatversions : \"1\").split(\"/\").map(Number).filter(Number.isFinite);\n  return new LevelKey(decryptmethod, resolvedUri, decryptkeyformat, keyFormatVersions, decryptiv, keyAttrs.KEYID);\n}\nfunction parseStartTimeOffset(startAttributes) {\n  const startAttrs = new AttrList(startAttributes);\n  const startTimeOffset = startAttrs.decimalFloatingPoint(\"TIME-OFFSET\");\n  if (isFiniteNumber(startTimeOffset)) {\n    return startTimeOffset;\n  }\n  return null;\n}\nfunction setCodecs(codecsAttributeValue, level) {\n  let codecs = (codecsAttributeValue || \"\").split(/[ ,]+/).filter((c) => c);\n  [\"video\", \"audio\", \"text\"].forEach((type) => {\n    const filtered = codecs.filter((codec) => isCodecType(codec, type));\n    if (filtered.length) {\n      level[`${type}Codec`] = filtered.map((c) => c.split(\"/\")[0]).join(\",\");\n      codecs = codecs.filter((codec) => filtered.indexOf(codec) === -1);\n    }\n  });\n  level.unknownCodecs = codecs;\n}\nfunction assignCodec(media, groupItem, codecProperty) {\n  const codecValue = groupItem[codecProperty];\n  if (codecValue) {\n    media[codecProperty] = codecValue;\n  }\n}\nfunction backfillProgramDateTimes(fragments, firstPdtIndex) {\n  let fragPrev = fragments[firstPdtIndex];\n  for (let i = firstPdtIndex; i--; ) {\n    const frag = fragments[i];\n    if (!frag) {\n      return;\n    }\n    frag.programDateTime = fragPrev.programDateTime - frag.duration * 1e3;\n    fragPrev = frag;\n  }\n}\nfunction assignProgramDateTime(frag, prevFrag, programDateTimes) {\n  if (frag.rawProgramDateTime) {\n    programDateTimes.push(frag);\n  } else if (prevFrag != null && prevFrag.programDateTime) {\n    frag.programDateTime = prevFrag.endProgramDateTime;\n  }\n}\nfunction setInitSegment(frag, mapAttrs, id, levelkeys) {\n  frag.relurl = mapAttrs.URI;\n  if (mapAttrs.BYTERANGE) {\n    frag.setByteRange(mapAttrs.BYTERANGE);\n  }\n  frag.level = id;\n  frag.sn = \"initSegment\";\n  if (levelkeys) {\n    frag.levelkeys = levelkeys;\n  }\n  frag.initSegment = null;\n}\nfunction setFragLevelKeys(frag, levelkeys, level) {\n  frag.levelkeys = levelkeys;\n  const {\n    encryptedFragments\n  } = level;\n  if ((!encryptedFragments.length || encryptedFragments[encryptedFragments.length - 1].levelkeys !== levelkeys) && Object.keys(levelkeys).some((format2) => levelkeys[format2].isCommonEncryption)) {\n    encryptedFragments.push(frag);\n  }\n}\nfunction assignMultipleMediaPlaylistTagOccuranceError(level, tag, result) {\n  level.playlistParsingError = new Error(`#EXT-X-${tag} must not appear more than once (${result[0]})`);\n}\nfunction assignMustAppearBeforeSegmentsError(level, tag, result) {\n  level.playlistParsingError = new Error(`#EXT-X-${tag} must appear before the first Media Segment (${result[0]})`);\n}\nfunction updateFromToPTS(fragFrom, fragTo) {\n  const fragToPTS = fragTo.startPTS;\n  if (isFiniteNumber(fragToPTS)) {\n    let duration = 0;\n    let frag;\n    if (fragTo.sn > fragFrom.sn) {\n      duration = fragToPTS - fragFrom.start;\n      frag = fragFrom;\n    } else {\n      duration = fragFrom.start - fragToPTS;\n      frag = fragTo;\n    }\n    if (frag.duration !== duration) {\n      frag.setDuration(duration);\n    }\n  } else if (fragTo.sn > fragFrom.sn) {\n    const contiguous = fragFrom.cc === fragTo.cc;\n    if (contiguous && fragFrom.minEndPTS) {\n      fragTo.setStart(fragFrom.start + (fragFrom.minEndPTS - fragFrom.start));\n    } else {\n      fragTo.setStart(fragFrom.start + fragFrom.duration);\n    }\n  } else {\n    fragTo.setStart(Math.max(fragFrom.start - fragTo.duration, 0));\n  }\n}\nfunction updateFragPTSDTS(details, frag, startPTS, endPTS, startDTS, endDTS) {\n  const parsedMediaDuration = endPTS - startPTS;\n  if (parsedMediaDuration <= 0) {\n    logger.warn(\"Fragment should have a positive duration\", frag);\n    endPTS = startPTS + frag.duration;\n    endDTS = startDTS + frag.duration;\n  }\n  let maxStartPTS = startPTS;\n  let minEndPTS = endPTS;\n  const fragStartPts = frag.startPTS;\n  const fragEndPts = frag.endPTS;\n  if (isFiniteNumber(fragStartPts)) {\n    const deltaPTS = Math.abs(fragStartPts - startPTS);\n    if (!isFiniteNumber(frag.deltaPTS)) {\n      frag.deltaPTS = deltaPTS;\n    } else {\n      frag.deltaPTS = Math.max(deltaPTS, frag.deltaPTS);\n    }\n    maxStartPTS = Math.max(startPTS, fragStartPts);\n    startPTS = Math.min(startPTS, fragStartPts);\n    startDTS = Math.min(startDTS, frag.startDTS);\n    minEndPTS = Math.min(endPTS, fragEndPts);\n    endPTS = Math.max(endPTS, fragEndPts);\n    endDTS = Math.max(endDTS, frag.endDTS);\n  }\n  const drift = startPTS - frag.start;\n  if (frag.start !== 0) {\n    frag.setStart(startPTS);\n  }\n  frag.setDuration(endPTS - frag.start);\n  frag.startPTS = startPTS;\n  frag.maxStartPTS = maxStartPTS;\n  frag.startDTS = startDTS;\n  frag.endPTS = endPTS;\n  frag.minEndPTS = minEndPTS;\n  frag.endDTS = endDTS;\n  const sn = frag.sn;\n  if (!details || sn < details.startSN || sn > details.endSN) {\n    return 0;\n  }\n  let i;\n  const fragIdx = sn - details.startSN;\n  const fragments = details.fragments;\n  fragments[fragIdx] = frag;\n  for (i = fragIdx; i > 0; i--) {\n    updateFromToPTS(fragments[i], fragments[i - 1]);\n  }\n  for (i = fragIdx; i < fragments.length - 1; i++) {\n    updateFromToPTS(fragments[i], fragments[i + 1]);\n  }\n  if (details.fragmentHint) {\n    updateFromToPTS(fragments[fragments.length - 1], details.fragmentHint);\n  }\n  details.PTSKnown = details.alignedSliding = true;\n  return drift;\n}\nfunction mergeDetails(oldDetails, newDetails) {\n  if (oldDetails === newDetails) {\n    return;\n  }\n  let currentInitSegment = null;\n  const oldFragments = oldDetails.fragments;\n  for (let i = oldFragments.length - 1; i >= 0; i--) {\n    const oldInit = oldFragments[i].initSegment;\n    if (oldInit) {\n      currentInitSegment = oldInit;\n      break;\n    }\n  }\n  if (oldDetails.fragmentHint) {\n    delete oldDetails.fragmentHint.endPTS;\n  }\n  let PTSFrag;\n  mapFragmentIntersection(oldDetails, newDetails, (oldFrag, newFrag, newFragIndex, newFragments2) => {\n    if ((!newDetails.startCC || newDetails.skippedSegments) && newFrag.cc !== oldFrag.cc) {\n      const ccOffset = oldFrag.cc - newFrag.cc;\n      for (let i = newFragIndex; i < newFragments2.length; i++) {\n        newFragments2[i].cc += ccOffset;\n      }\n      newDetails.endCC = newFragments2[newFragments2.length - 1].cc;\n    }\n    if (isFiniteNumber(oldFrag.startPTS) && isFiniteNumber(oldFrag.endPTS)) {\n      newFrag.setStart(newFrag.startPTS = oldFrag.startPTS);\n      newFrag.startDTS = oldFrag.startDTS;\n      newFrag.maxStartPTS = oldFrag.maxStartPTS;\n      newFrag.endPTS = oldFrag.endPTS;\n      newFrag.endDTS = oldFrag.endDTS;\n      newFrag.minEndPTS = oldFrag.minEndPTS;\n      newFrag.setDuration(oldFrag.endPTS - oldFrag.startPTS);\n      if (newFrag.duration) {\n        PTSFrag = newFrag;\n      }\n      newDetails.PTSKnown = newDetails.alignedSliding = true;\n    }\n    if (oldFrag.hasStreams) {\n      newFrag.elementaryStreams = oldFrag.elementaryStreams;\n    }\n    newFrag.loader = oldFrag.loader;\n    if (oldFrag.hasStats) {\n      newFrag.stats = oldFrag.stats;\n    }\n    if (oldFrag.initSegment) {\n      newFrag.initSegment = oldFrag.initSegment;\n      currentInitSegment = oldFrag.initSegment;\n    }\n  });\n  const newFragments = newDetails.fragments;\n  const fragmentsToCheck = newDetails.fragmentHint ? newFragments.concat(newDetails.fragmentHint) : newFragments;\n  if (currentInitSegment) {\n    fragmentsToCheck.forEach((frag) => {\n      var _currentInitSegment;\n      if (frag && (!frag.initSegment || frag.initSegment.relurl === ((_currentInitSegment = currentInitSegment) == null ? void 0 : _currentInitSegment.relurl))) {\n        frag.initSegment = currentInitSegment;\n      }\n    });\n  }\n  if (newDetails.skippedSegments) {\n    newDetails.deltaUpdateFailed = newFragments.some((frag) => !frag);\n    if (newDetails.deltaUpdateFailed) {\n      logger.warn(\"[level-helper] Previous playlist missing segments skipped in delta playlist\");\n      for (let i = newDetails.skippedSegments; i--; ) {\n        newFragments.shift();\n      }\n      newDetails.startSN = newFragments[0].sn;\n    } else {\n      if (newDetails.canSkipDateRanges) {\n        newDetails.dateRanges = mergeDateRanges(oldDetails.dateRanges, newDetails);\n      }\n      const programDateTimes = oldDetails.fragments.filter((frag) => frag.rawProgramDateTime);\n      if (oldDetails.hasProgramDateTime && !newDetails.hasProgramDateTime) {\n        for (let i = 1; i < fragmentsToCheck.length; i++) {\n          if (fragmentsToCheck[i].programDateTime === null) {\n            assignProgramDateTime(fragmentsToCheck[i], fragmentsToCheck[i - 1], programDateTimes);\n          }\n        }\n      }\n      mapDateRanges(programDateTimes, newDetails);\n    }\n    newDetails.endCC = newFragments[newFragments.length - 1].cc;\n  }\n  if (!newDetails.startCC) {\n    var _fragPriorToNewStart$;\n    const fragPriorToNewStart = getFragmentWithSN(oldDetails, newDetails.startSN - 1);\n    newDetails.startCC = (_fragPriorToNewStart$ = fragPriorToNewStart == null ? void 0 : fragPriorToNewStart.cc) != null ? _fragPriorToNewStart$ : newFragments[0].cc;\n  }\n  mapPartIntersection(oldDetails.partList, newDetails.partList, (oldPart, newPart) => {\n    newPart.elementaryStreams = oldPart.elementaryStreams;\n    newPart.stats = oldPart.stats;\n  });\n  if (PTSFrag) {\n    updateFragPTSDTS(newDetails, PTSFrag, PTSFrag.startPTS, PTSFrag.endPTS, PTSFrag.startDTS, PTSFrag.endDTS);\n  } else {\n    adjustSliding(oldDetails, newDetails);\n  }\n  if (newFragments.length) {\n    newDetails.totalduration = newDetails.edge - newFragments[0].start;\n  }\n  newDetails.driftStartTime = oldDetails.driftStartTime;\n  newDetails.driftStart = oldDetails.driftStart;\n  const advancedDateTime = newDetails.advancedDateTime;\n  if (newDetails.advanced && advancedDateTime) {\n    const edge = newDetails.edge;\n    if (!newDetails.driftStart) {\n      newDetails.driftStartTime = advancedDateTime;\n      newDetails.driftStart = edge;\n    }\n    newDetails.driftEndTime = advancedDateTime;\n    newDetails.driftEnd = edge;\n  } else {\n    newDetails.driftEndTime = oldDetails.driftEndTime;\n    newDetails.driftEnd = oldDetails.driftEnd;\n    newDetails.advancedDateTime = oldDetails.advancedDateTime;\n  }\n  if (newDetails.requestScheduled === -1) {\n    newDetails.requestScheduled = oldDetails.requestScheduled;\n  }\n}\nfunction mergeDateRanges(oldDateRanges, newDetails) {\n  const {\n    dateRanges: deltaDateRanges,\n    recentlyRemovedDateranges\n  } = newDetails;\n  const dateRanges = _extends({}, oldDateRanges);\n  if (recentlyRemovedDateranges) {\n    recentlyRemovedDateranges.forEach((id) => {\n      delete dateRanges[id];\n    });\n  }\n  const mergeIds = Object.keys(dateRanges);\n  const mergeCount = mergeIds.length;\n  if (mergeCount) {\n    Object.keys(deltaDateRanges).forEach((id) => {\n      const mergedDateRange = dateRanges[id];\n      const dateRange = new DateRange(deltaDateRanges[id].attr, mergedDateRange);\n      if (dateRange.isValid) {\n        dateRanges[id] = dateRange;\n        if (!mergedDateRange) {\n          dateRange.tagOrder += mergeCount;\n        }\n      } else {\n        logger.warn(`Ignoring invalid Playlist Delta Update DATERANGE tag: \"${stringify(deltaDateRanges[id].attr)}\"`);\n      }\n    });\n  }\n  return dateRanges;\n}\nfunction mapPartIntersection(oldParts, newParts, intersectionFn) {\n  if (oldParts && newParts) {\n    let delta = 0;\n    for (let i = 0, len = oldParts.length; i <= len; i++) {\n      const oldPart = oldParts[i];\n      const newPart = newParts[i + delta];\n      if (oldPart && newPart && oldPart.index === newPart.index && oldPart.fragment.sn === newPart.fragment.sn) {\n        intersectionFn(oldPart, newPart);\n      } else {\n        delta--;\n      }\n    }\n  }\n}\nfunction mapFragmentIntersection(oldDetails, newDetails, intersectionFn) {\n  const skippedSegments = newDetails.skippedSegments;\n  const start = Math.max(oldDetails.startSN, newDetails.startSN) - newDetails.startSN;\n  const end = (oldDetails.fragmentHint ? 1 : 0) + (skippedSegments ? newDetails.endSN : Math.min(oldDetails.endSN, newDetails.endSN)) - newDetails.startSN;\n  const delta = newDetails.startSN - oldDetails.startSN;\n  const newFrags = newDetails.fragmentHint ? newDetails.fragments.concat(newDetails.fragmentHint) : newDetails.fragments;\n  const oldFrags = oldDetails.fragmentHint ? oldDetails.fragments.concat(oldDetails.fragmentHint) : oldDetails.fragments;\n  for (let i = start; i <= end; i++) {\n    const oldFrag = oldFrags[delta + i];\n    let newFrag = newFrags[i];\n    if (skippedSegments && !newFrag && oldFrag) {\n      newFrag = newDetails.fragments[i] = oldFrag;\n    }\n    if (oldFrag && newFrag) {\n      intersectionFn(oldFrag, newFrag, i, newFrags);\n      if (oldFrag.url && oldFrag.url !== newFrag.url) {\n        newDetails.playlistParsingError = getSequenceError(`media sequence mismatch ${newFrag.sn}:`, oldDetails, newDetails, oldFrag, newFrag);\n        return;\n      } else if (oldFrag.cc !== newFrag.cc) {\n        newDetails.playlistParsingError = getSequenceError(`discontinuity sequence mismatch (${oldFrag.cc}!=${newFrag.cc})`, oldDetails, newDetails, oldFrag, newFrag);\n        return;\n      }\n    }\n  }\n}\nfunction getSequenceError(message, oldDetails, newDetails, oldFrag, newFrag) {\n  return new Error(`${message} ${newFrag.url}\nPlaylist starting @${oldDetails.startSN}\n${oldDetails.m3u8}\n\nPlaylist starting @${newDetails.startSN}\n${newDetails.m3u8}`);\n}\nfunction adjustSliding(oldDetails, newDetails, matchingStableVariantOrRendition = true) {\n  const delta = newDetails.startSN + newDetails.skippedSegments - oldDetails.startSN;\n  const oldFragments = oldDetails.fragments;\n  const advancedOrStable = delta >= 0;\n  let sliding = 0;\n  if (advancedOrStable && delta < oldFragments.length) {\n    sliding = oldFragments[delta].start;\n  } else if (advancedOrStable && newDetails.startSN === oldDetails.endSN + 1) {\n    sliding = oldDetails.fragmentEnd;\n  } else if (advancedOrStable && matchingStableVariantOrRendition) {\n    sliding = oldDetails.fragmentStart + delta * newDetails.levelTargetDuration;\n  } else if (!newDetails.skippedSegments && newDetails.fragmentStart === 0) {\n    sliding = oldDetails.fragmentStart;\n  } else {\n    return;\n  }\n  addSliding(newDetails, sliding);\n}\nfunction addSliding(details, sliding) {\n  if (sliding) {\n    const fragments = details.fragments;\n    for (let i = details.skippedSegments; i < fragments.length; i++) {\n      fragments[i].addStart(sliding);\n    }\n    if (details.fragmentHint) {\n      details.fragmentHint.addStart(sliding);\n    }\n  }\n}\nfunction computeReloadInterval(newDetails, distanceToLiveEdgeMs = Infinity) {\n  let reloadInterval = 1e3 * newDetails.targetduration;\n  if (newDetails.updated) {\n    const fragments = newDetails.fragments;\n    const liveEdgeMaxTargetDurations = 4;\n    if (fragments.length && reloadInterval * liveEdgeMaxTargetDurations > distanceToLiveEdgeMs) {\n      const lastSegmentDuration = fragments[fragments.length - 1].duration * 1e3;\n      if (lastSegmentDuration < reloadInterval) {\n        reloadInterval = lastSegmentDuration;\n      }\n    }\n  } else {\n    reloadInterval /= 2;\n  }\n  return Math.round(reloadInterval);\n}\nfunction getFragmentWithSN(details, sn, fragCurrent) {\n  if (!details) {\n    return null;\n  }\n  let fragment = details.fragments[sn - details.startSN];\n  if (fragment) {\n    return fragment;\n  }\n  fragment = details.fragmentHint;\n  if (fragment && fragment.sn === sn) {\n    return fragment;\n  }\n  if (sn < details.startSN && fragCurrent && fragCurrent.sn === sn) {\n    return fragCurrent;\n  }\n  return null;\n}\nfunction getPartWith(details, sn, partIndex) {\n  if (!details) {\n    return null;\n  }\n  return findPart(details.partList, sn, partIndex);\n}\nfunction findPart(partList, sn, partIndex) {\n  if (partList) {\n    for (let i = partList.length; i--; ) {\n      const part = partList[i];\n      if (part.index === partIndex && part.fragment.sn === sn) {\n        return part;\n      }\n    }\n  }\n  return null;\n}\nfunction reassignFragmentLevelIndexes(levels) {\n  levels.forEach((level, index) => {\n    var _level$details;\n    (_level$details = level.details) == null ? void 0 : _level$details.fragments.forEach((fragment) => {\n      fragment.level = index;\n      if (fragment.initSegment) {\n        fragment.initSegment.level = index;\n      }\n    });\n  });\n}\nfunction findFirstFragWithCC(fragments, cc) {\n  for (let i = 0, len = fragments.length; i < len; i++) {\n    var _fragments$i;\n    if (((_fragments$i = fragments[i]) == null ? void 0 : _fragments$i.cc) === cc) {\n      return fragments[i];\n    }\n  }\n  return null;\n}\nfunction shouldAlignOnDiscontinuities(refDetails, details) {\n  if (refDetails) {\n    if (details.startCC < refDetails.endCC && details.endCC > refDetails.startCC) {\n      return true;\n    }\n  }\n  return false;\n}\nfunction adjustFragmentStart(frag, sliding) {\n  if (frag) {\n    const start = frag.start + sliding;\n    frag.start = frag.startPTS = start;\n    frag.endPTS = start + frag.duration;\n  }\n}\nfunction adjustSlidingStart(sliding, details) {\n  const fragments = details.fragments;\n  for (let i = 0, len = fragments.length; i < len; i++) {\n    adjustFragmentStart(fragments[i], sliding);\n  }\n  if (details.fragmentHint) {\n    adjustFragmentStart(details.fragmentHint, sliding);\n  }\n  details.alignedSliding = true;\n}\nfunction alignStream(switchDetails, details) {\n  if (!switchDetails) {\n    return;\n  }\n  alignDiscontinuities(details, switchDetails);\n  if (!details.alignedSliding && switchDetails) {\n    alignMediaPlaylistByPDT(details, switchDetails);\n  }\n  if (!details.alignedSliding && switchDetails && !details.skippedSegments) {\n    adjustSliding(switchDetails, details, false);\n  }\n}\nfunction alignDiscontinuities(details, refDetails) {\n  if (!shouldAlignOnDiscontinuities(refDetails, details)) {\n    return;\n  }\n  const targetCC = Math.min(refDetails.endCC, details.endCC);\n  const refFrag = findFirstFragWithCC(refDetails.fragments, targetCC);\n  const frag = findFirstFragWithCC(details.fragments, targetCC);\n  if (!refFrag || !frag) {\n    return;\n  }\n  logger.log(`Aligning playlist at start of dicontinuity sequence ${targetCC}`);\n  const delta = refFrag.start - frag.start;\n  adjustSlidingStart(delta, details);\n}\nfunction alignMediaPlaylistByPDT(details, refDetails) {\n  if (!details.hasProgramDateTime || !refDetails.hasProgramDateTime) {\n    return;\n  }\n  const fragments = details.fragments;\n  const refFragments = refDetails.fragments;\n  if (!fragments.length || !refFragments.length) {\n    return;\n  }\n  let refFrag;\n  let frag;\n  const targetCC = Math.min(refDetails.endCC, details.endCC);\n  if (refDetails.startCC < targetCC && details.startCC < targetCC) {\n    refFrag = findFirstFragWithCC(refFragments, targetCC);\n    frag = findFirstFragWithCC(fragments, targetCC);\n  }\n  if (!refFrag || !frag) {\n    refFrag = refFragments[Math.floor(refFragments.length / 2)];\n    frag = findFirstFragWithCC(fragments, refFrag.cc) || fragments[Math.floor(fragments.length / 2)];\n  }\n  const refPDT = refFrag.programDateTime;\n  const targetPDT = frag.programDateTime;\n  if (!refPDT || !targetPDT) {\n    return;\n  }\n  const delta = (targetPDT - refPDT) / 1e3 - (frag.start - refFrag.start);\n  adjustSlidingStart(delta, details);\n}\nconst TimeRanges = {\n  toString: function(r) {\n    let log = \"\";\n    const len = r.length;\n    for (let i = 0; i < len; i++) {\n      log += `[${r.start(i).toFixed(3)}-${r.end(i).toFixed(3)}]`;\n    }\n    return log;\n  }\n};\nconst State = {\n  STOPPED: \"STOPPED\",\n  IDLE: \"IDLE\",\n  KEY_LOADING: \"KEY_LOADING\",\n  FRAG_LOADING: \"FRAG_LOADING\",\n  FRAG_LOADING_WAITING_RETRY: \"FRAG_LOADING_WAITING_RETRY\",\n  WAITING_TRACK: \"WAITING_TRACK\",\n  PARSING: \"PARSING\",\n  PARSED: \"PARSED\",\n  ENDED: \"ENDED\",\n  ERROR: \"ERROR\",\n  WAITING_INIT_PTS: \"WAITING_INIT_PTS\",\n  WAITING_LEVEL: \"WAITING_LEVEL\"\n};\nclass BaseStreamController extends TaskLoop {\n  constructor(hls, fragmentTracker, keyLoader, logPrefix, playlistType) {\n    super(logPrefix, hls.logger);\n    this.hls = void 0;\n    this.fragPrevious = null;\n    this.fragCurrent = null;\n    this.fragmentTracker = void 0;\n    this.transmuxer = null;\n    this._state = State.STOPPED;\n    this.playlistType = void 0;\n    this.media = null;\n    this.mediaBuffer = null;\n    this.config = void 0;\n    this.bitrateTest = false;\n    this.lastCurrentTime = 0;\n    this.nextLoadPosition = 0;\n    this.startPosition = 0;\n    this.startTimeOffset = null;\n    this.retryDate = 0;\n    this.levels = null;\n    this.fragmentLoader = void 0;\n    this.keyLoader = void 0;\n    this.levelLastLoaded = null;\n    this.startFragRequested = false;\n    this.decrypter = void 0;\n    this.initPTS = [];\n    this.buffering = true;\n    this.loadingParts = false;\n    this.loopSn = void 0;\n    this.onMediaSeeking = () => {\n      const {\n        config,\n        fragCurrent,\n        media,\n        mediaBuffer,\n        state\n      } = this;\n      const currentTime = media ? media.currentTime : 0;\n      const bufferInfo = BufferHelper.bufferInfo(mediaBuffer ? mediaBuffer : media, currentTime, config.maxBufferHole);\n      const noFowardBuffer = !bufferInfo.len;\n      this.log(`Media seeking to ${isFiniteNumber(currentTime) ? currentTime.toFixed(3) : currentTime}, state: ${state}, ${noFowardBuffer ? \"out of\" : \"in\"} buffer`);\n      if (this.state === State.ENDED) {\n        this.resetLoadingState();\n      } else if (fragCurrent) {\n        const tolerance = config.maxFragLookUpTolerance;\n        const fragStartOffset = fragCurrent.start - tolerance;\n        const fragEndOffset = fragCurrent.start + fragCurrent.duration + tolerance;\n        if (noFowardBuffer || fragEndOffset < bufferInfo.start || fragStartOffset > bufferInfo.end) {\n          const pastFragment = currentTime > fragEndOffset;\n          if (currentTime < fragStartOffset || pastFragment) {\n            if (pastFragment && fragCurrent.loader) {\n              this.log(`Cancelling fragment load for seek (sn: ${fragCurrent.sn})`);\n              fragCurrent.abortRequests();\n              this.resetLoadingState();\n            }\n            this.fragPrevious = null;\n          }\n        }\n      }\n      if (media) {\n        this.fragmentTracker.removeFragmentsInRange(currentTime, Infinity, this.playlistType, true);\n        const lastCurrentTime = this.lastCurrentTime;\n        if (currentTime > lastCurrentTime) {\n          this.lastCurrentTime = currentTime;\n        }\n        if (!this.loadingParts) {\n          const bufferEnd = Math.max(bufferInfo.end, currentTime);\n          const shouldLoadParts = this.shouldLoadParts(this.getLevelDetails(), bufferEnd);\n          if (shouldLoadParts) {\n            this.log(`LL-Part loading ON after seeking to ${currentTime.toFixed(2)} with buffer @${bufferEnd.toFixed(2)}`);\n            this.loadingParts = shouldLoadParts;\n          }\n        }\n      }\n      if (!this.hls.hasEnoughToStart) {\n        this.log(`Setting ${noFowardBuffer ? \"startPosition\" : \"nextLoadPosition\"} to ${currentTime} for seek without enough to start`);\n        this.nextLoadPosition = currentTime;\n        if (noFowardBuffer) {\n          this.startPosition = currentTime;\n        }\n      }\n      this.tickImmediate();\n    };\n    this.onMediaEnded = () => {\n      this.log(`setting startPosition to 0 because media ended`);\n      this.startPosition = this.lastCurrentTime = 0;\n    };\n    this.playlistType = playlistType;\n    this.hls = hls;\n    this.fragmentLoader = new FragmentLoader(hls.config);\n    this.keyLoader = keyLoader;\n    this.fragmentTracker = fragmentTracker;\n    this.config = hls.config;\n    this.decrypter = new Decrypter(hls.config);\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    hls.on(Events.ERROR, this.onError, this);\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    hls.off(Events.ERROR, this.onError, this);\n  }\n  doTick() {\n    this.onTickEnd();\n  }\n  onTickEnd() {\n  }\n  startLoad(startPosition) {\n  }\n  stopLoad() {\n    if (this.state === State.STOPPED) {\n      return;\n    }\n    this.fragmentLoader.abort();\n    this.keyLoader.abort(this.playlistType);\n    const frag = this.fragCurrent;\n    if (frag != null && frag.loader) {\n      frag.abortRequests();\n      this.fragmentTracker.removeFragment(frag);\n    }\n    this.resetTransmuxer();\n    this.fragCurrent = null;\n    this.fragPrevious = null;\n    this.clearInterval();\n    this.clearNextTick();\n    this.state = State.STOPPED;\n  }\n  get startPositionValue() {\n    const {\n      nextLoadPosition,\n      startPosition\n    } = this;\n    if (startPosition === -1 && nextLoadPosition) {\n      return nextLoadPosition;\n    }\n    return startPosition;\n  }\n  get bufferingEnabled() {\n    return this.buffering;\n  }\n  pauseBuffering() {\n    this.buffering = false;\n  }\n  resumeBuffering() {\n    this.buffering = true;\n  }\n  get inFlightFrag() {\n    return {\n      frag: this.fragCurrent,\n      state: this.state\n    };\n  }\n  _streamEnded(bufferInfo, levelDetails) {\n    if (levelDetails.live || !this.media) {\n      return false;\n    }\n    const bufferEnd = bufferInfo.end || 0;\n    const timelineStart = this.config.timelineOffset || 0;\n    if (bufferEnd <= timelineStart) {\n      return false;\n    }\n    const bufferedRanges = bufferInfo.buffered;\n    if (this.config.maxBufferHole && bufferedRanges && bufferedRanges.length > 1) {\n      bufferInfo = BufferHelper.bufferedInfo(bufferedRanges, bufferInfo.start, 0);\n    }\n    const nextStart = bufferInfo.nextStart;\n    const hasSecondBufferedRange = nextStart && nextStart > timelineStart && nextStart < levelDetails.edge;\n    if (hasSecondBufferedRange) {\n      return false;\n    }\n    if (this.media.currentTime < bufferInfo.start) {\n      return false;\n    }\n    const partList = levelDetails.partList;\n    if (partList != null && partList.length) {\n      const lastPart = partList[partList.length - 1];\n      const lastPartBuffered = BufferHelper.isBuffered(this.media, lastPart.start + lastPart.duration / 2);\n      return lastPartBuffered;\n    }\n    const playlistType = levelDetails.fragments[levelDetails.fragments.length - 1].type;\n    return this.fragmentTracker.isEndListAppended(playlistType);\n  }\n  getLevelDetails() {\n    if (this.levels && this.levelLastLoaded !== null) {\n      var _this$levelLastLoaded;\n      return (_this$levelLastLoaded = this.levelLastLoaded) == null ? void 0 : _this$levelLastLoaded.details;\n    }\n  }\n  get timelineOffset() {\n    const configuredTimelineOffset = this.config.timelineOffset;\n    if (configuredTimelineOffset) {\n      var _this$getLevelDetails;\n      return ((_this$getLevelDetails = this.getLevelDetails()) == null ? void 0 : _this$getLevelDetails.appliedTimelineOffset) || configuredTimelineOffset;\n    }\n    return 0;\n  }\n  onMediaAttached(event, data) {\n    const media = this.media = this.mediaBuffer = data.media;\n    media.removeEventListener(\"seeking\", this.onMediaSeeking);\n    media.removeEventListener(\"ended\", this.onMediaEnded);\n    media.addEventListener(\"seeking\", this.onMediaSeeking);\n    media.addEventListener(\"ended\", this.onMediaEnded);\n    const config = this.config;\n    if (this.levels && config.autoStartLoad && this.state === State.STOPPED) {\n      this.startLoad(config.startPosition);\n    }\n  }\n  onMediaDetaching(event, data) {\n    const transferringMedia = !!data.transferMedia;\n    const media = this.media;\n    if (media === null) {\n      return;\n    }\n    if (media.ended) {\n      this.log(\"MSE detaching and video ended, reset startPosition\");\n      this.startPosition = this.lastCurrentTime = 0;\n    }\n    media.removeEventListener(\"seeking\", this.onMediaSeeking);\n    media.removeEventListener(\"ended\", this.onMediaEnded);\n    if (this.keyLoader && !transferringMedia) {\n      this.keyLoader.detach();\n    }\n    this.media = this.mediaBuffer = null;\n    this.loopSn = void 0;\n    if (transferringMedia) {\n      this.resetLoadingState();\n      this.resetTransmuxer();\n      return;\n    }\n    this.loadingParts = false;\n    this.fragmentTracker.removeAllFragments();\n    this.stopLoad();\n  }\n  onManifestLoading() {\n    this.initPTS = [];\n    this.levels = this.levelLastLoaded = this.fragCurrent = null;\n    this.lastCurrentTime = this.startPosition = 0;\n    this.startFragRequested = false;\n  }\n  onError(event, data) {\n  }\n  onManifestLoaded(event, data) {\n    this.startTimeOffset = data.startTimeOffset;\n  }\n  onHandlerDestroying() {\n    this.stopLoad();\n    if (this.transmuxer) {\n      this.transmuxer.destroy();\n      this.transmuxer = null;\n    }\n    super.onHandlerDestroying();\n    this.hls = this.onMediaSeeking = this.onMediaEnded = null;\n  }\n  onHandlerDestroyed() {\n    this.state = State.STOPPED;\n    if (this.fragmentLoader) {\n      this.fragmentLoader.destroy();\n    }\n    if (this.keyLoader) {\n      this.keyLoader.destroy();\n    }\n    if (this.decrypter) {\n      this.decrypter.destroy();\n    }\n    this.hls = this.log = this.warn = this.decrypter = this.keyLoader = this.fragmentLoader = this.fragmentTracker = null;\n    super.onHandlerDestroyed();\n  }\n  loadFragment(frag, level, targetBufferTime) {\n    this.startFragRequested = true;\n    this._loadFragForPlayback(frag, level, targetBufferTime);\n  }\n  _loadFragForPlayback(fragment, level, targetBufferTime) {\n    const progressCallback = (data) => {\n      const frag = data.frag;\n      if (this.fragContextChanged(frag)) {\n        this.warn(`${frag.type} sn: ${frag.sn}${data.part ? \" part: \" + data.part.index : \"\"} of ${this.fragInfo(frag, false, data.part)}) was dropped during download.`);\n        this.fragmentTracker.removeFragment(frag);\n        return;\n      }\n      frag.stats.chunkCount++;\n      this._handleFragmentLoadProgress(data);\n    };\n    this._doFragLoad(fragment, level, targetBufferTime, progressCallback).then((data) => {\n      if (!data) {\n        return;\n      }\n      const state = this.state;\n      const frag = data.frag;\n      if (this.fragContextChanged(frag)) {\n        if (state === State.FRAG_LOADING || !this.fragCurrent && state === State.PARSING) {\n          this.fragmentTracker.removeFragment(frag);\n          this.state = State.IDLE;\n        }\n        return;\n      }\n      if (\"payload\" in data) {\n        this.log(`Loaded ${frag.type} sn: ${frag.sn} of ${this.playlistLabel()} ${frag.level}`);\n        this.hls.trigger(Events.FRAG_LOADED, data);\n      }\n      this._handleFragmentLoadComplete(data);\n    }).catch((reason) => {\n      if (this.state === State.STOPPED || this.state === State.ERROR) {\n        return;\n      }\n      this.warn(`Frag error: ${(reason == null ? void 0 : reason.message) || reason}`);\n      this.resetFragmentLoading(fragment);\n    });\n  }\n  clearTrackerIfNeeded(frag) {\n    var _this$mediaBuffer;\n    const {\n      fragmentTracker\n    } = this;\n    const fragState = fragmentTracker.getState(frag);\n    if (fragState === FragmentState.APPENDING) {\n      const playlistType = frag.type;\n      const bufferedInfo = this.getFwdBufferInfo(this.mediaBuffer, playlistType);\n      const minForwardBufferLength = Math.max(frag.duration, bufferedInfo ? bufferedInfo.len : this.config.maxBufferLength);\n      const backtrackFragment = this.backtrackFragment;\n      const backtracked = backtrackFragment ? frag.sn - backtrackFragment.sn : 0;\n      if (backtracked === 1 || this.reduceMaxBufferLength(minForwardBufferLength, frag.duration)) {\n        fragmentTracker.removeFragment(frag);\n      }\n    } else if (((_this$mediaBuffer = this.mediaBuffer) == null ? void 0 : _this$mediaBuffer.buffered.length) === 0) {\n      fragmentTracker.removeAllFragments();\n    } else if (fragmentTracker.hasParts(frag.type)) {\n      fragmentTracker.detectPartialFragments({\n        frag,\n        part: null,\n        stats: frag.stats,\n        id: frag.type\n      });\n      if (fragmentTracker.getState(frag) === FragmentState.PARTIAL) {\n        fragmentTracker.removeFragment(frag);\n      }\n    }\n  }\n  checkLiveUpdate(details) {\n    if (details.updated && !details.live) {\n      const lastFragment = details.fragments[details.fragments.length - 1];\n      this.fragmentTracker.detectPartialFragments({\n        frag: lastFragment,\n        part: null,\n        stats: lastFragment.stats,\n        id: lastFragment.type\n      });\n    }\n    if (!details.fragments[0]) {\n      details.deltaUpdateFailed = true;\n    }\n  }\n  waitForLive(levelInfo) {\n    const details = levelInfo.details;\n    return (details == null ? void 0 : details.live) && details.type !== \"EVENT\" && (this.levelLastLoaded !== levelInfo || details.expired);\n  }\n  flushMainBuffer(startOffset, endOffset, type = null) {\n    if (!(startOffset - endOffset)) {\n      return;\n    }\n    const flushScope = {\n      startOffset,\n      endOffset,\n      type\n    };\n    this.hls.trigger(Events.BUFFER_FLUSHING, flushScope);\n  }\n  _loadInitSegment(fragment, level) {\n    this._doFragLoad(fragment, level).then((data) => {\n      const frag = data == null ? void 0 : data.frag;\n      if (!frag || this.fragContextChanged(frag) || !this.levels) {\n        throw new Error(\"init load aborted\");\n      }\n      return data;\n    }).then((data) => {\n      const {\n        hls\n      } = this;\n      const {\n        frag,\n        payload\n      } = data;\n      const decryptData = frag.decryptdata;\n      if (payload && payload.byteLength > 0 && decryptData != null && decryptData.key && decryptData.iv && isFullSegmentEncryption(decryptData.method)) {\n        const startTime = self.performance.now();\n        return this.decrypter.decrypt(new Uint8Array(payload), decryptData.key.buffer, decryptData.iv.buffer, getAesModeFromFullSegmentMethod(decryptData.method)).catch((err) => {\n          hls.trigger(Events.ERROR, {\n            type: ErrorTypes.MEDIA_ERROR,\n            details: ErrorDetails.FRAG_DECRYPT_ERROR,\n            fatal: false,\n            error: err,\n            reason: err.message,\n            frag\n          });\n          throw err;\n        }).then((decryptedData) => {\n          const endTime = self.performance.now();\n          hls.trigger(Events.FRAG_DECRYPTED, {\n            frag,\n            payload: decryptedData,\n            stats: {\n              tstart: startTime,\n              tdecrypt: endTime\n            }\n          });\n          data.payload = decryptedData;\n          return this.completeInitSegmentLoad(data);\n        });\n      }\n      return this.completeInitSegmentLoad(data);\n    }).catch((reason) => {\n      if (this.state === State.STOPPED || this.state === State.ERROR) {\n        return;\n      }\n      this.warn(reason);\n      this.resetFragmentLoading(fragment);\n    });\n  }\n  completeInitSegmentLoad(data) {\n    const {\n      levels\n    } = this;\n    if (!levels) {\n      throw new Error(\"init load aborted, missing levels\");\n    }\n    const stats = data.frag.stats;\n    if (this.state !== State.STOPPED) {\n      this.state = State.IDLE;\n    }\n    data.frag.data = new Uint8Array(data.payload);\n    stats.parsing.start = stats.buffering.start = self.performance.now();\n    stats.parsing.end = stats.buffering.end = self.performance.now();\n    this.tick();\n  }\n  fragContextChanged(frag) {\n    const {\n      fragCurrent\n    } = this;\n    return !frag || !fragCurrent || frag.sn !== fragCurrent.sn || frag.level !== fragCurrent.level;\n  }\n  fragBufferedComplete(frag, part) {\n    const media = this.mediaBuffer ? this.mediaBuffer : this.media;\n    this.log(`Buffered ${frag.type} sn: ${frag.sn}${part ? \" part: \" + part.index : \"\"} of ${this.fragInfo(frag, false, part)} > buffer:${media ? TimeRanges.toString(BufferHelper.getBuffered(media)) : \"(detached)\"})`);\n    if (isMediaFragment(frag)) {\n      var _this$levels;\n      if (frag.type !== PlaylistLevelType.SUBTITLE) {\n        const el = frag.elementaryStreams;\n        if (!Object.keys(el).some((type) => !!el[type])) {\n          this.state = State.IDLE;\n          return;\n        }\n      }\n      const level = (_this$levels = this.levels) == null ? void 0 : _this$levels[frag.level];\n      if (level != null && level.fragmentError) {\n        this.log(`Resetting level fragment error count of ${level.fragmentError} on frag buffered`);\n        level.fragmentError = 0;\n      }\n    }\n    this.state = State.IDLE;\n  }\n  _handleFragmentLoadComplete(fragLoadedEndData) {\n    const {\n      transmuxer\n    } = this;\n    if (!transmuxer) {\n      return;\n    }\n    const {\n      frag,\n      part,\n      partsLoaded\n    } = fragLoadedEndData;\n    const complete = !partsLoaded || partsLoaded.length === 0 || partsLoaded.some((fragLoaded) => !fragLoaded);\n    const chunkMeta = new ChunkMetadata(frag.level, frag.sn, frag.stats.chunkCount + 1, 0, part ? part.index : -1, !complete);\n    transmuxer.flush(chunkMeta);\n  }\n  _handleFragmentLoadProgress(frag) {\n  }\n  _doFragLoad(frag, level, targetBufferTime = null, progressCallback) {\n    var _frag$decryptdata;\n    this.fragCurrent = frag;\n    const details = level == null ? void 0 : level.details;\n    if (!this.levels || !details) {\n      throw new Error(`frag load aborted, missing level${details ? \"\" : \" detail\"}s`);\n    }\n    let keyLoadingPromise = null;\n    if (frag.encrypted && !((_frag$decryptdata = frag.decryptdata) != null && _frag$decryptdata.key)) {\n      this.log(`Loading key for ${frag.sn} of [${details.startSN}-${details.endSN}], ${this.playlistLabel()} ${frag.level}`);\n      this.state = State.KEY_LOADING;\n      this.fragCurrent = frag;\n      keyLoadingPromise = this.keyLoader.load(frag).then((keyLoadedData) => {\n        if (!this.fragContextChanged(keyLoadedData.frag)) {\n          this.hls.trigger(Events.KEY_LOADED, keyLoadedData);\n          if (this.state === State.KEY_LOADING) {\n            this.state = State.IDLE;\n          }\n          return keyLoadedData;\n        }\n      });\n      this.hls.trigger(Events.KEY_LOADING, {\n        frag\n      });\n      if (this.fragCurrent === null) {\n        keyLoadingPromise = Promise.reject(new Error(`frag load aborted, context changed in KEY_LOADING`));\n      }\n    } else if (!frag.encrypted) {\n      keyLoadingPromise = this.keyLoader.loadClear(frag, details.encryptedFragments, this.startFragRequested);\n      if (keyLoadingPromise) {\n        this.log(`[eme] blocking frag load until media-keys acquired`);\n      }\n    }\n    const fragPrevious = this.fragPrevious;\n    if (isMediaFragment(frag) && (!fragPrevious || frag.sn !== fragPrevious.sn)) {\n      const shouldLoadParts = this.shouldLoadParts(level.details, frag.end);\n      if (shouldLoadParts !== this.loadingParts) {\n        this.log(`LL-Part loading ${shouldLoadParts ? \"ON\" : \"OFF\"} loading sn ${fragPrevious == null ? void 0 : fragPrevious.sn}->${frag.sn}`);\n        this.loadingParts = shouldLoadParts;\n      }\n    }\n    targetBufferTime = Math.max(frag.start, targetBufferTime || 0);\n    if (this.loadingParts && isMediaFragment(frag)) {\n      const partList = details.partList;\n      if (partList && progressCallback) {\n        if (targetBufferTime > frag.end && details.fragmentHint) {\n          frag = details.fragmentHint;\n        }\n        const partIndex = this.getNextPart(partList, frag, targetBufferTime);\n        if (partIndex > -1) {\n          const part = partList[partIndex];\n          frag = this.fragCurrent = part.fragment;\n          this.log(`Loading ${frag.type} sn: ${frag.sn} part: ${part.index} (${partIndex}/${partList.length - 1}) of ${this.fragInfo(frag, false, part)}) cc: ${frag.cc} [${details.startSN}-${details.endSN}], target: ${parseFloat(targetBufferTime.toFixed(3))}`);\n          this.nextLoadPosition = part.start + part.duration;\n          this.state = State.FRAG_LOADING;\n          let _result;\n          if (keyLoadingPromise) {\n            _result = keyLoadingPromise.then((keyLoadedData) => {\n              if (!keyLoadedData || this.fragContextChanged(keyLoadedData.frag)) {\n                return null;\n              }\n              return this.doFragPartsLoad(frag, part, level, progressCallback);\n            }).catch((error) => this.handleFragLoadError(error));\n          } else {\n            _result = this.doFragPartsLoad(frag, part, level, progressCallback).catch((error) => this.handleFragLoadError(error));\n          }\n          this.hls.trigger(Events.FRAG_LOADING, {\n            frag,\n            part,\n            targetBufferTime\n          });\n          if (this.fragCurrent === null) {\n            return Promise.reject(new Error(`frag load aborted, context changed in FRAG_LOADING parts`));\n          }\n          return _result;\n        } else if (!frag.url || this.loadedEndOfParts(partList, targetBufferTime)) {\n          return Promise.resolve(null);\n        }\n      }\n    }\n    if (isMediaFragment(frag) && this.loadingParts) {\n      this.log(`LL-Part loading OFF after next part miss @${targetBufferTime.toFixed(2)}`);\n      this.loadingParts = false;\n    } else if (!frag.url) {\n      return Promise.resolve(null);\n    }\n    this.log(`Loading ${frag.type} sn: ${frag.sn} of ${this.fragInfo(frag, false)}) cc: ${frag.cc} ${details ? \"[\" + details.startSN + \"-\" + details.endSN + \"]\" : \"\"}, target: ${parseFloat(targetBufferTime.toFixed(3))}`);\n    if (isFiniteNumber(frag.sn) && !this.bitrateTest) {\n      this.nextLoadPosition = frag.start + frag.duration;\n    }\n    this.state = State.FRAG_LOADING;\n    const dataOnProgress = this.config.progressive;\n    let result;\n    if (dataOnProgress && keyLoadingPromise) {\n      result = keyLoadingPromise.then((keyLoadedData) => {\n        if (!keyLoadedData || this.fragContextChanged(keyLoadedData == null ? void 0 : keyLoadedData.frag)) {\n          return null;\n        }\n        return this.fragmentLoader.load(frag, progressCallback);\n      }).catch((error) => this.handleFragLoadError(error));\n    } else {\n      result = Promise.all([this.fragmentLoader.load(frag, dataOnProgress ? progressCallback : void 0), keyLoadingPromise]).then(([fragLoadedData]) => {\n        if (!dataOnProgress && fragLoadedData && progressCallback) {\n          progressCallback(fragLoadedData);\n        }\n        return fragLoadedData;\n      }).catch((error) => this.handleFragLoadError(error));\n    }\n    this.hls.trigger(Events.FRAG_LOADING, {\n      frag,\n      targetBufferTime\n    });\n    if (this.fragCurrent === null) {\n      return Promise.reject(new Error(`frag load aborted, context changed in FRAG_LOADING`));\n    }\n    return result;\n  }\n  doFragPartsLoad(frag, fromPart, level, progressCallback) {\n    return new Promise((resolve, reject) => {\n      var _level$details;\n      const partsLoaded = [];\n      const initialPartList = (_level$details = level.details) == null ? void 0 : _level$details.partList;\n      const loadPart = (part) => {\n        this.fragmentLoader.loadPart(frag, part, progressCallback).then((partLoadedData) => {\n          partsLoaded[part.index] = partLoadedData;\n          const loadedPart = partLoadedData.part;\n          this.hls.trigger(Events.FRAG_LOADED, partLoadedData);\n          const nextPart = getPartWith(level.details, frag.sn, part.index + 1) || findPart(initialPartList, frag.sn, part.index + 1);\n          if (nextPart) {\n            loadPart(nextPart);\n          } else {\n            return resolve({\n              frag,\n              part: loadedPart,\n              partsLoaded\n            });\n          }\n        }).catch(reject);\n      };\n      loadPart(fromPart);\n    });\n  }\n  handleFragLoadError(error) {\n    if (\"data\" in error) {\n      const data = error.data;\n      if (error.data && data.details === ErrorDetails.INTERNAL_ABORTED) {\n        this.handleFragLoadAborted(data.frag, data.part);\n      } else {\n        this.hls.trigger(Events.ERROR, data);\n      }\n    } else {\n      this.hls.trigger(Events.ERROR, {\n        type: ErrorTypes.OTHER_ERROR,\n        details: ErrorDetails.INTERNAL_EXCEPTION,\n        err: error,\n        error,\n        fatal: true\n      });\n    }\n    return null;\n  }\n  _handleTransmuxerFlush(chunkMeta) {\n    const context = this.getCurrentContext(chunkMeta);\n    if (!context || this.state !== State.PARSING) {\n      if (!this.fragCurrent && this.state !== State.STOPPED && this.state !== State.ERROR) {\n        this.state = State.IDLE;\n      }\n      return;\n    }\n    const {\n      frag,\n      part,\n      level\n    } = context;\n    const now2 = self.performance.now();\n    frag.stats.parsing.end = now2;\n    if (part) {\n      part.stats.parsing.end = now2;\n    }\n    const levelDetails = this.getLevelDetails();\n    const loadingPartsAtEdge = levelDetails && frag.sn > levelDetails.endSN;\n    const shouldLoadParts = loadingPartsAtEdge || this.shouldLoadParts(levelDetails, frag.end);\n    if (shouldLoadParts !== this.loadingParts) {\n      this.log(`LL-Part loading ${shouldLoadParts ? \"ON\" : \"OFF\"} after parsing segment ending @${frag.end.toFixed(2)}`);\n      this.loadingParts = shouldLoadParts;\n    }\n    this.updateLevelTiming(frag, part, level, chunkMeta.partial);\n  }\n  shouldLoadParts(details, bufferEnd) {\n    if (this.config.lowLatencyMode) {\n      if (!details) {\n        return this.loadingParts;\n      }\n      if (details != null && details.partList) {\n        var _details$fragmentHint;\n        const firstPart = details.partList[0];\n        const safePartStart = firstPart.end + (((_details$fragmentHint = details.fragmentHint) == null ? void 0 : _details$fragmentHint.duration) || 0);\n        if (bufferEnd >= safePartStart) {\n          var _this$media;\n          const playhead = this.hls.hasEnoughToStart ? ((_this$media = this.media) == null ? void 0 : _this$media.currentTime) || this.lastCurrentTime : this.getLoadPosition();\n          if (playhead > firstPart.start - firstPart.fragment.duration) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  getCurrentContext(chunkMeta) {\n    const {\n      levels,\n      fragCurrent\n    } = this;\n    const {\n      level: levelIndex,\n      sn,\n      part: partIndex\n    } = chunkMeta;\n    if (!(levels != null && levels[levelIndex])) {\n      this.warn(`Levels object was unset while buffering fragment ${sn} of ${this.playlistLabel()} ${levelIndex}. The current chunk will not be buffered.`);\n      return null;\n    }\n    const level = levels[levelIndex];\n    const levelDetails = level.details;\n    const part = partIndex > -1 ? getPartWith(levelDetails, sn, partIndex) : null;\n    const frag = part ? part.fragment : getFragmentWithSN(levelDetails, sn, fragCurrent);\n    if (!frag) {\n      return null;\n    }\n    if (fragCurrent && fragCurrent !== frag) {\n      frag.stats = fragCurrent.stats;\n    }\n    return {\n      frag,\n      part,\n      level\n    };\n  }\n  bufferFragmentData(data, frag, part, chunkMeta, noBacktracking) {\n    var _buffer;\n    if (!data || this.state !== State.PARSING) {\n      return;\n    }\n    const {\n      data1,\n      data2\n    } = data;\n    let buffer2 = data1;\n    if (data1 && data2) {\n      buffer2 = appendUint8Array(data1, data2);\n    }\n    if (!((_buffer = buffer2) != null && _buffer.length)) {\n      return;\n    }\n    const offsetTimestamp = this.initPTS[frag.cc];\n    const offset = offsetTimestamp ? -offsetTimestamp.baseTime / offsetTimestamp.timescale : void 0;\n    const segment = {\n      type: data.type,\n      frag,\n      part,\n      chunkMeta,\n      offset,\n      parent: frag.type,\n      data: buffer2\n    };\n    this.hls.trigger(Events.BUFFER_APPENDING, segment);\n    if (data.dropped && data.independent && !part) {\n      if (noBacktracking) {\n        return;\n      }\n      this.flushBufferGap(frag);\n    }\n  }\n  flushBufferGap(frag) {\n    const media = this.media;\n    if (!media) {\n      return;\n    }\n    if (!BufferHelper.isBuffered(media, media.currentTime)) {\n      this.flushMainBuffer(0, frag.start);\n      return;\n    }\n    const currentTime = media.currentTime;\n    const bufferInfo = BufferHelper.bufferInfo(media, currentTime, 0);\n    const fragDuration = frag.duration;\n    const segmentFraction = Math.min(this.config.maxFragLookUpTolerance * 2, fragDuration * 0.25);\n    const start = Math.max(Math.min(frag.start - segmentFraction, bufferInfo.end - segmentFraction), currentTime + segmentFraction);\n    if (frag.start - start > segmentFraction) {\n      this.flushMainBuffer(start, frag.start);\n    }\n  }\n  getFwdBufferInfo(bufferable, type) {\n    var _this$media2;\n    const pos = this.getLoadPosition();\n    if (!isFiniteNumber(pos)) {\n      return null;\n    }\n    const backwardSeek = this.lastCurrentTime > pos;\n    const maxBufferHole = backwardSeek || (_this$media2 = this.media) != null && _this$media2.paused ? 0 : this.config.maxBufferHole;\n    return this.getFwdBufferInfoAtPos(bufferable, pos, type, maxBufferHole);\n  }\n  getFwdBufferInfoAtPos(bufferable, pos, type, maxBufferHole) {\n    const bufferInfo = BufferHelper.bufferInfo(bufferable, pos, maxBufferHole);\n    if (bufferInfo.len === 0 && bufferInfo.nextStart !== void 0) {\n      const bufferedFragAtPos = this.fragmentTracker.getBufferedFrag(pos, type);\n      if (bufferedFragAtPos && (bufferInfo.nextStart <= bufferedFragAtPos.end || bufferedFragAtPos.gap)) {\n        const gapDuration = Math.max(Math.min(bufferInfo.nextStart, bufferedFragAtPos.end) - pos, maxBufferHole);\n        return BufferHelper.bufferInfo(bufferable, pos, gapDuration);\n      }\n    }\n    return bufferInfo;\n  }\n  getMaxBufferLength(levelBitrate) {\n    const {\n      config\n    } = this;\n    let maxBufLen;\n    if (levelBitrate) {\n      maxBufLen = Math.max(8 * config.maxBufferSize / levelBitrate, config.maxBufferLength);\n    } else {\n      maxBufLen = config.maxBufferLength;\n    }\n    return Math.min(maxBufLen, config.maxMaxBufferLength);\n  }\n  reduceMaxBufferLength(threshold, fragDuration) {\n    const config = this.config;\n    const minLength = Math.max(Math.min(threshold - fragDuration, config.maxBufferLength), fragDuration);\n    const reducedLength = Math.max(threshold - fragDuration * 3, config.maxMaxBufferLength / 2, minLength);\n    if (reducedLength >= minLength) {\n      config.maxMaxBufferLength = reducedLength;\n      this.warn(`Reduce max buffer length to ${reducedLength}s`);\n      return true;\n    }\n    return false;\n  }\n  getAppendedFrag(position, playlistType = PlaylistLevelType.MAIN) {\n    var _this$fragmentTracker;\n    const fragOrPart = (_this$fragmentTracker = this.fragmentTracker) == null ? void 0 : _this$fragmentTracker.getAppendedFrag(position, playlistType);\n    if (fragOrPart && \"fragment\" in fragOrPart) {\n      return fragOrPart.fragment;\n    }\n    return fragOrPart;\n  }\n  getNextFragment(pos, levelDetails) {\n    const fragments = levelDetails.fragments;\n    const fragLen = fragments.length;\n    if (!fragLen) {\n      return null;\n    }\n    const {\n      config\n    } = this;\n    const start = fragments[0].start;\n    const canLoadParts = config.lowLatencyMode && !!levelDetails.partList;\n    let frag = null;\n    if (levelDetails.live) {\n      const initialLiveManifestSize = config.initialLiveManifestSize;\n      if (fragLen < initialLiveManifestSize) {\n        this.warn(`Not enough fragments to start playback (have: ${fragLen}, need: ${initialLiveManifestSize})`);\n        return null;\n      }\n      if (!levelDetails.PTSKnown && !this.startFragRequested && this.startPosition === -1 || pos < start) {\n        var _frag;\n        if (canLoadParts && !this.loadingParts) {\n          this.log(`LL-Part loading ON for initial live fragment`);\n          this.loadingParts = true;\n        }\n        frag = this.getInitialLiveFragment(levelDetails);\n        const mainStart = this.hls.startPosition;\n        const liveSyncPosition = this.hls.liveSyncPosition;\n        const startPosition = frag ? (mainStart !== -1 && mainStart >= start ? mainStart : liveSyncPosition) || frag.start : pos;\n        this.log(`Setting startPosition to ${startPosition} to match start frag at live edge. mainStart: ${mainStart} liveSyncPosition: ${liveSyncPosition} frag.start: ${(_frag = frag) == null ? void 0 : _frag.start}`);\n        this.startPosition = this.nextLoadPosition = startPosition;\n      }\n    } else if (pos <= start) {\n      frag = fragments[0];\n    }\n    if (!frag) {\n      const end = this.loadingParts ? levelDetails.partEnd : levelDetails.fragmentEnd;\n      frag = this.getFragmentAtPosition(pos, end, levelDetails);\n    }\n    let programFrag = this.filterReplacedPrimary(frag, levelDetails);\n    if (!programFrag && frag) {\n      const curSNIdx = frag.sn - levelDetails.startSN;\n      programFrag = this.filterReplacedPrimary(fragments[curSNIdx + 1] || null, levelDetails);\n    }\n    return this.mapToInitFragWhenRequired(programFrag);\n  }\n  isLoopLoading(frag, targetBufferTime) {\n    const trackerState = this.fragmentTracker.getState(frag);\n    return (trackerState === FragmentState.OK || trackerState === FragmentState.PARTIAL && !!frag.gap) && this.nextLoadPosition > targetBufferTime;\n  }\n  getNextFragmentLoopLoading(frag, levelDetails, bufferInfo, playlistType, maxBufLen) {\n    let nextFragment = null;\n    if (frag.gap) {\n      nextFragment = this.getNextFragment(this.nextLoadPosition, levelDetails);\n      if (nextFragment && !nextFragment.gap && bufferInfo.nextStart) {\n        const nextbufferInfo = this.getFwdBufferInfoAtPos(this.mediaBuffer ? this.mediaBuffer : this.media, bufferInfo.nextStart, playlistType, 0);\n        if (nextbufferInfo !== null && bufferInfo.len + nextbufferInfo.len >= maxBufLen) {\n          const sn = nextFragment.sn;\n          if (this.loopSn !== sn) {\n            this.log(`buffer full after gaps in \"${playlistType}\" playlist starting at sn: ${sn}`);\n            this.loopSn = sn;\n          }\n          return null;\n        }\n      }\n    }\n    this.loopSn = void 0;\n    return nextFragment;\n  }\n  get primaryPrefetch() {\n    if (interstitialsEnabled(this.hls.config)) {\n      var _this$hls$interstitia, _this$hls$interstitia2;\n      const playingInterstitial = (_this$hls$interstitia = this.hls.interstitialsManager) == null ? void 0 : (_this$hls$interstitia2 = _this$hls$interstitia.playingItem) == null ? void 0 : _this$hls$interstitia2.event;\n      if (playingInterstitial) {\n        return true;\n      }\n    }\n    return false;\n  }\n  filterReplacedPrimary(frag, details) {\n    if (!frag) {\n      return frag;\n    }\n    if (interstitialsEnabled(this.hls.config) && frag.type !== PlaylistLevelType.SUBTITLE) {\n      const interstitials = this.hls.interstitialsManager;\n      const bufferingItem = interstitials == null ? void 0 : interstitials.bufferingItem;\n      if (bufferingItem) {\n        const bufferingInterstitial = bufferingItem.event;\n        if (bufferingInterstitial) {\n          if (bufferingInterstitial.appendInPlace || Math.abs(frag.start - bufferingItem.start) > 1 || bufferingItem.start === 0) {\n            return null;\n          }\n        } else {\n          if (frag.end <= bufferingItem.start && (details == null ? void 0 : details.live) === false) {\n            return null;\n          }\n          if (frag.start > bufferingItem.end && bufferingItem.nextEvent) {\n            if (bufferingItem.nextEvent.appendInPlace || frag.start - bufferingItem.end > 1) {\n              return null;\n            }\n          }\n        }\n      }\n      const playerQueue = interstitials == null ? void 0 : interstitials.playerQueue;\n      if (playerQueue) {\n        for (let i = playerQueue.length; i--; ) {\n          const interstitial = playerQueue[i].interstitial;\n          if (interstitial.appendInPlace && frag.start >= interstitial.startTime && frag.end <= interstitial.resumeTime) {\n            return null;\n          }\n        }\n      }\n    }\n    return frag;\n  }\n  mapToInitFragWhenRequired(frag) {\n    if (frag != null && frag.initSegment && !(frag != null && frag.initSegment.data) && !this.bitrateTest) {\n      return frag.initSegment;\n    }\n    return frag;\n  }\n  getNextPart(partList, frag, targetBufferTime) {\n    let nextPart = -1;\n    let contiguous = false;\n    let independentAttrOmitted = true;\n    for (let i = 0, len = partList.length; i < len; i++) {\n      const part = partList[i];\n      independentAttrOmitted = independentAttrOmitted && !part.independent;\n      if (nextPart > -1 && targetBufferTime < part.start) {\n        break;\n      }\n      const loaded = part.loaded;\n      if (loaded) {\n        nextPart = -1;\n      } else if ((contiguous || part.independent || independentAttrOmitted) && part.fragment === frag) {\n        nextPart = i;\n      }\n      contiguous = loaded;\n    }\n    return nextPart;\n  }\n  loadedEndOfParts(partList, targetBufferTime) {\n    const lastPart = partList[partList.length - 1];\n    return lastPart && targetBufferTime > lastPart.start && lastPart.loaded;\n  }\n  /*\n   This method is used find the best matching first fragment for a live playlist. This fragment is used to calculate the\n   \"sliding\" of the playlist, which is its offset from the start of playback. After sliding we can compute the real\n   start and end times for each fragment in the playlist (after which this method will not need to be called).\n  */\n  getInitialLiveFragment(levelDetails) {\n    const fragments = levelDetails.fragments;\n    const fragPrevious = this.fragPrevious;\n    let frag = null;\n    if (fragPrevious) {\n      if (levelDetails.hasProgramDateTime) {\n        this.log(`Live playlist, switching playlist, load frag with same PDT: ${fragPrevious.programDateTime}`);\n        frag = findFragmentByPDT(fragments, fragPrevious.endProgramDateTime, this.config.maxFragLookUpTolerance);\n      }\n      if (!frag) {\n        const targetSN = fragPrevious.sn + 1;\n        if (targetSN >= levelDetails.startSN && targetSN <= levelDetails.endSN) {\n          const fragNext = fragments[targetSN - levelDetails.startSN];\n          if (fragPrevious.cc === fragNext.cc) {\n            frag = fragNext;\n            this.log(`Live playlist, switching playlist, load frag with next SN: ${frag.sn}`);\n          }\n        }\n        if (!frag) {\n          frag = findNearestWithCC(levelDetails, fragPrevious.cc, fragPrevious.end);\n          if (frag) {\n            this.log(`Live playlist, switching playlist, load frag with same CC: ${frag.sn}`);\n          }\n        }\n      }\n    } else {\n      const liveStart = this.hls.liveSyncPosition;\n      if (liveStart !== null) {\n        frag = this.getFragmentAtPosition(liveStart, this.bitrateTest ? levelDetails.fragmentEnd : levelDetails.edge, levelDetails);\n      }\n    }\n    return frag;\n  }\n  /*\n  This method finds the best matching fragment given the provided position.\n   */\n  getFragmentAtPosition(bufferEnd, end, levelDetails) {\n    const {\n      config\n    } = this;\n    let {\n      fragPrevious\n    } = this;\n    let {\n      fragments,\n      endSN\n    } = levelDetails;\n    const {\n      fragmentHint\n    } = levelDetails;\n    const {\n      maxFragLookUpTolerance\n    } = config;\n    const partList = levelDetails.partList;\n    const loadingParts = !!(this.loadingParts && partList != null && partList.length && fragmentHint);\n    if (loadingParts && fragmentHint && !this.bitrateTest && partList[partList.length - 1].fragment.sn === fragmentHint.sn) {\n      fragments = fragments.concat(fragmentHint);\n      endSN = fragmentHint.sn;\n    }\n    let frag;\n    if (bufferEnd < end) {\n      var _this$media3;\n      const backwardSeek = bufferEnd < this.lastCurrentTime;\n      const lookupTolerance = backwardSeek || bufferEnd > end - maxFragLookUpTolerance || (_this$media3 = this.media) != null && _this$media3.paused || !this.startFragRequested ? 0 : maxFragLookUpTolerance;\n      frag = findFragmentByPTS(fragPrevious, fragments, bufferEnd, lookupTolerance);\n    } else {\n      frag = fragments[fragments.length - 1];\n    }\n    if (frag) {\n      const curSNIdx = frag.sn - levelDetails.startSN;\n      const fragState = this.fragmentTracker.getState(frag);\n      if (fragState === FragmentState.OK || fragState === FragmentState.PARTIAL && frag.gap) {\n        fragPrevious = frag;\n      }\n      if (fragPrevious && frag.sn === fragPrevious.sn && (!loadingParts || partList[0].fragment.sn > frag.sn || !levelDetails.live && !loadingParts)) {\n        const sameLevel = fragPrevious && frag.level === fragPrevious.level;\n        if (sameLevel) {\n          const nextFrag = fragments[curSNIdx + 1];\n          if (frag.sn < endSN && this.fragmentTracker.getState(nextFrag) !== FragmentState.OK) {\n            frag = nextFrag;\n          } else {\n            frag = null;\n          }\n        }\n      }\n    }\n    return frag;\n  }\n  alignPlaylists(details, previousDetails, switchDetails) {\n    const length = details.fragments.length;\n    if (!length) {\n      this.warn(`No fragments in live playlist`);\n      return 0;\n    }\n    const slidingStart = details.fragmentStart;\n    const firstLevelLoad = !previousDetails;\n    const aligned = details.alignedSliding && isFiniteNumber(slidingStart);\n    if (firstLevelLoad || !aligned && !slidingStart) {\n      alignStream(switchDetails, details);\n      const alignedSlidingStart = details.fragmentStart;\n      this.log(`Live playlist sliding: ${alignedSlidingStart.toFixed(2)} start-sn: ${previousDetails ? previousDetails.startSN : \"na\"}->${details.startSN} fragments: ${length}`);\n      return alignedSlidingStart;\n    }\n    return slidingStart;\n  }\n  waitForCdnTuneIn(details) {\n    const advancePartLimit = 3;\n    return details.live && details.canBlockReload && details.partTarget && details.tuneInGoal > Math.max(details.partHoldBack, details.partTarget * advancePartLimit);\n  }\n  setStartPosition(details, sliding) {\n    let startPosition = this.startPosition;\n    if (startPosition < sliding) {\n      startPosition = -1;\n    }\n    const timelineOffset = this.timelineOffset;\n    if (startPosition === -1) {\n      const offsetInMultivariantPlaylist = this.startTimeOffset !== null;\n      const startTimeOffset = offsetInMultivariantPlaylist ? this.startTimeOffset : details.startTimeOffset;\n      if (startTimeOffset !== null && isFiniteNumber(startTimeOffset)) {\n        startPosition = sliding + startTimeOffset;\n        if (startTimeOffset < 0) {\n          startPosition += details.edge;\n        }\n        startPosition = Math.min(Math.max(sliding, startPosition), sliding + details.totalduration);\n        this.log(`Setting startPosition to ${startPosition} for start time offset ${startTimeOffset} found in ${offsetInMultivariantPlaylist ? \"multivariant\" : \"media\"} playlist`);\n        this.startPosition = startPosition;\n      } else if (details.live) {\n        startPosition = this.hls.liveSyncPosition || sliding;\n        this.log(`Setting startPosition to -1 to start at live edge ${startPosition}`);\n        this.startPosition = -1;\n      } else {\n        this.log(`setting startPosition to 0 by default`);\n        this.startPosition = startPosition = 0;\n      }\n      this.lastCurrentTime = startPosition + timelineOffset;\n    }\n    this.nextLoadPosition = startPosition + timelineOffset;\n  }\n  getLoadPosition() {\n    var _this$hls;\n    const {\n      media\n    } = this;\n    let pos = 0;\n    if ((_this$hls = this.hls) != null && _this$hls.hasEnoughToStart && media) {\n      pos = media.currentTime;\n    } else if (this.nextLoadPosition >= 0) {\n      pos = this.nextLoadPosition;\n    }\n    return pos;\n  }\n  handleFragLoadAborted(frag, part) {\n    if (this.transmuxer && frag.type === this.playlistType && isMediaFragment(frag) && frag.stats.aborted) {\n      this.log(`Fragment ${frag.sn}${part ? \" part \" + part.index : \"\"} of ${this.playlistLabel()} ${frag.level} was aborted`);\n      this.resetFragmentLoading(frag);\n    }\n  }\n  resetFragmentLoading(frag) {\n    if (!this.fragCurrent || !this.fragContextChanged(frag) && this.state !== State.FRAG_LOADING_WAITING_RETRY) {\n      this.state = State.IDLE;\n    }\n  }\n  onFragmentOrKeyLoadError(filterType, data) {\n    if (data.chunkMeta && !data.frag) {\n      const context = this.getCurrentContext(data.chunkMeta);\n      if (context) {\n        data.frag = context.frag;\n      }\n    }\n    const frag = data.frag;\n    if (!frag || frag.type !== filterType || !this.levels) {\n      return;\n    }\n    if (this.fragContextChanged(frag)) {\n      var _this$fragCurrent;\n      this.warn(`Frag load error must match current frag to retry ${frag.url} > ${(_this$fragCurrent = this.fragCurrent) == null ? void 0 : _this$fragCurrent.url}`);\n      return;\n    }\n    const gapTagEncountered = data.details === ErrorDetails.FRAG_GAP;\n    if (gapTagEncountered) {\n      this.fragmentTracker.fragBuffered(frag, true);\n    }\n    const errorAction = data.errorAction;\n    const {\n      action,\n      flags,\n      retryCount = 0,\n      retryConfig\n    } = errorAction || {};\n    const couldRetry = !!errorAction && !!retryConfig;\n    const retry = couldRetry && action === NetworkErrorAction.RetryRequest;\n    const noAlternate = couldRetry && !errorAction.resolved && flags === ErrorActionFlags.MoveAllAlternatesMatchingHost;\n    if (!retry && noAlternate && isMediaFragment(frag) && !frag.endList) {\n      this.resetFragmentErrors(filterType);\n      this.treatAsGap(frag);\n      errorAction.resolved = true;\n    } else if ((retry || noAlternate) && retryCount < retryConfig.maxNumRetry) {\n      this.resetStartWhenNotLoaded(this.levelLastLoaded);\n      const delay = getRetryDelay(retryConfig, retryCount);\n      this.warn(`Fragment ${frag.sn} of ${filterType} ${frag.level} errored with ${data.details}, retrying loading ${retryCount + 1}/${retryConfig.maxNumRetry} in ${delay}ms`);\n      errorAction.resolved = true;\n      this.retryDate = self.performance.now() + delay;\n      this.state = State.FRAG_LOADING_WAITING_RETRY;\n    } else if (retryConfig && errorAction) {\n      this.resetFragmentErrors(filterType);\n      if (retryCount < retryConfig.maxNumRetry) {\n        if (!gapTagEncountered && action !== NetworkErrorAction.RemoveAlternatePermanently) {\n          errorAction.resolved = true;\n        }\n      } else {\n        this.warn(`${data.details} reached or exceeded max retry (${retryCount})`);\n        return;\n      }\n    } else if (action === NetworkErrorAction.SendAlternateToPenaltyBox) {\n      this.state = State.WAITING_LEVEL;\n    } else {\n      this.state = State.ERROR;\n    }\n    this.tickImmediate();\n  }\n  reduceLengthAndFlushBuffer(data) {\n    if (this.state === State.PARSING || this.state === State.PARSED) {\n      const frag = data.frag;\n      const playlistType = data.parent;\n      const bufferedInfo = this.getFwdBufferInfo(this.mediaBuffer, playlistType);\n      const buffered = bufferedInfo && bufferedInfo.len > 0.5;\n      if (buffered) {\n        this.reduceMaxBufferLength(bufferedInfo.len, (frag == null ? void 0 : frag.duration) || 10);\n      }\n      const flushBuffer = !buffered;\n      if (flushBuffer) {\n        this.warn(`Buffer full error while media.currentTime is not buffered, flush ${playlistType} buffer`);\n      }\n      if (frag) {\n        this.fragmentTracker.removeFragment(frag);\n        this.nextLoadPosition = frag.start;\n      }\n      this.resetLoadingState();\n      return flushBuffer;\n    }\n    return false;\n  }\n  resetFragmentErrors(filterType) {\n    if (filterType === PlaylistLevelType.AUDIO) {\n      this.fragCurrent = null;\n    }\n    if (!this.hls.hasEnoughToStart) {\n      this.startFragRequested = false;\n    }\n    if (this.state !== State.STOPPED) {\n      this.state = State.IDLE;\n    }\n  }\n  afterBufferFlushed(media, bufferType, playlistType) {\n    if (!media) {\n      return;\n    }\n    const bufferedTimeRanges = BufferHelper.getBuffered(media);\n    this.fragmentTracker.detectEvictedFragments(bufferType, bufferedTimeRanges, playlistType);\n    if (this.state === State.ENDED) {\n      this.resetLoadingState();\n    }\n  }\n  resetLoadingState() {\n    this.log(\"Reset loading state\");\n    this.fragCurrent = null;\n    this.fragPrevious = null;\n    if (this.state !== State.STOPPED) {\n      this.state = State.IDLE;\n    }\n  }\n  resetStartWhenNotLoaded(level) {\n    if (!this.hls.hasEnoughToStart) {\n      this.startFragRequested = false;\n      const details = level ? level.details : null;\n      if (details != null && details.live) {\n        this.log(`resetting startPosition for live start`);\n        this.startPosition = -1;\n        this.setStartPosition(details, details.fragmentStart);\n        this.resetLoadingState();\n      } else {\n        this.nextLoadPosition = this.startPosition;\n      }\n    }\n  }\n  resetWhenMissingContext(chunkMeta) {\n    this.warn(`The loading context changed while buffering fragment ${chunkMeta.sn} of ${this.playlistLabel()} ${chunkMeta.level}. This chunk will not be buffered.`);\n    this.removeUnbufferedFrags();\n    this.resetStartWhenNotLoaded(this.levelLastLoaded);\n    this.resetLoadingState();\n  }\n  removeUnbufferedFrags(start = 0) {\n    this.fragmentTracker.removeFragmentsInRange(start, Infinity, this.playlistType, false, true);\n  }\n  updateLevelTiming(frag, part, level, partial) {\n    const details = level.details;\n    if (!details) {\n      this.warn(\"level.details undefined\");\n      return;\n    }\n    const parsed = Object.keys(frag.elementaryStreams).reduce((result, type) => {\n      const info = frag.elementaryStreams[type];\n      if (info) {\n        const parsedDuration = info.endPTS - info.startPTS;\n        if (parsedDuration <= 0) {\n          this.warn(`Could not parse fragment ${frag.sn} ${type} duration reliably (${parsedDuration})`);\n          return result || false;\n        }\n        const drift = partial ? 0 : updateFragPTSDTS(details, frag, info.startPTS, info.endPTS, info.startDTS, info.endDTS);\n        this.hls.trigger(Events.LEVEL_PTS_UPDATED, {\n          details,\n          level,\n          drift,\n          type,\n          frag,\n          start: info.startPTS,\n          end: info.endPTS\n        });\n        return true;\n      }\n      return result;\n    }, false);\n    if (!parsed) {\n      var _this$transmuxer;\n      if (level.fragmentError === 0) {\n        this.treatAsGap(frag, level);\n      }\n      if (((_this$transmuxer = this.transmuxer) == null ? void 0 : _this$transmuxer.error) === null) {\n        const error = new Error(`Found no media in fragment ${frag.sn} of ${this.playlistLabel()} ${frag.level} resetting transmuxer to fallback to playlist timing`);\n        this.warn(error.message);\n        this.hls.trigger(Events.ERROR, {\n          type: ErrorTypes.MEDIA_ERROR,\n          details: ErrorDetails.FRAG_PARSING_ERROR,\n          fatal: false,\n          error,\n          frag,\n          reason: `Found no media in msn ${frag.sn} of ${this.playlistLabel()} \"${level.url}\"`\n        });\n        if (!this.hls) {\n          return;\n        }\n        this.resetTransmuxer();\n      }\n    }\n    this.state = State.PARSED;\n    this.log(`Parsed ${frag.type} sn: ${frag.sn}${part ? \" part: \" + part.index : \"\"} of ${this.fragInfo(frag, false, part)})`);\n    this.hls.trigger(Events.FRAG_PARSED, {\n      frag,\n      part\n    });\n  }\n  playlistLabel() {\n    return this.playlistType === PlaylistLevelType.MAIN ? \"level\" : \"track\";\n  }\n  fragInfo(frag, pts = true, part) {\n    var _ref, _ref2;\n    return `${this.playlistLabel()} ${frag.level} (${part ? \"part\" : \"frag\"}:[${((_ref = pts && !part ? frag.startPTS : (part || frag).start) != null ? _ref : NaN).toFixed(3)}-${((_ref2 = pts && !part ? frag.endPTS : (part || frag).end) != null ? _ref2 : NaN).toFixed(3)}]${part && frag.type === \"main\" ? \"INDEPENDENT=\" + (part.independent ? \"YES\" : \"NO\") : \"\"}`;\n  }\n  treatAsGap(frag, level) {\n    if (level) {\n      level.fragmentError++;\n    }\n    frag.gap = true;\n    this.fragmentTracker.removeFragment(frag);\n    this.fragmentTracker.fragBuffered(frag, true);\n  }\n  resetTransmuxer() {\n    var _this$transmuxer2;\n    (_this$transmuxer2 = this.transmuxer) == null ? void 0 : _this$transmuxer2.reset();\n  }\n  recoverWorkerError(data) {\n    if (data.event === \"demuxerWorker\") {\n      this.fragmentTracker.removeAllFragments();\n      if (this.transmuxer) {\n        this.transmuxer.destroy();\n        this.transmuxer = null;\n      }\n      this.resetStartWhenNotLoaded(this.levelLastLoaded);\n      this.resetLoadingState();\n    }\n  }\n  set state(nextState) {\n    const previousState = this._state;\n    if (previousState !== nextState) {\n      this._state = nextState;\n      this.log(`${previousState}->${nextState}`);\n    }\n  }\n  get state() {\n    return this._state;\n  }\n}\nfunction interstitialsEnabled(config) {\n  return !!config.interstitialsController && config.enableInterstitialPlayback !== false;\n}\nclass ChunkCache {\n  constructor() {\n    this.chunks = [];\n    this.dataLength = 0;\n  }\n  push(chunk) {\n    this.chunks.push(chunk);\n    this.dataLength += chunk.length;\n  }\n  flush() {\n    const {\n      chunks,\n      dataLength\n    } = this;\n    let result;\n    if (!chunks.length) {\n      return new Uint8Array(0);\n    } else if (chunks.length === 1) {\n      result = chunks[0];\n    } else {\n      result = concatUint8Arrays(chunks, dataLength);\n    }\n    this.reset();\n    return result;\n  }\n  reset() {\n    this.chunks.length = 0;\n    this.dataLength = 0;\n  }\n}\nfunction concatUint8Arrays(chunks, dataLength) {\n  const result = new Uint8Array(dataLength);\n  let offset = 0;\n  for (let i = 0; i < chunks.length; i++) {\n    const chunk = chunks[i];\n    result.set(chunk, offset);\n    offset += chunk.length;\n  }\n  return result;\n}\nvar eventemitter3 = { exports: {} };\nvar hasRequiredEventemitter3;\nfunction requireEventemitter3() {\n  if (hasRequiredEventemitter3) return eventemitter3.exports;\n  hasRequiredEventemitter3 = 1;\n  (function(module) {\n    var has2 = Object.prototype.hasOwnProperty, prefix = \"~\";\n    function Events2() {\n    }\n    if (Object.create) {\n      Events2.prototype = /* @__PURE__ */ Object.create(null);\n      if (!new Events2().__proto__) prefix = false;\n    }\n    function EE(fn, context, once2) {\n      this.fn = fn;\n      this.context = context;\n      this.once = once2 || false;\n    }\n    function addListener(emitter, event, fn, context, once2) {\n      if (typeof fn !== \"function\") {\n        throw new TypeError(\"The listener must be a function\");\n      }\n      var listener = new EE(fn, context || emitter, once2), evt = prefix ? prefix + event : event;\n      if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n      else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n      else emitter._events[evt] = [emitter._events[evt], listener];\n      return emitter;\n    }\n    function clearEvent(emitter, evt) {\n      if (--emitter._eventsCount === 0) emitter._events = new Events2();\n      else delete emitter._events[evt];\n    }\n    function EventEmitter2() {\n      this._events = new Events2();\n      this._eventsCount = 0;\n    }\n    EventEmitter2.prototype.eventNames = function eventNames() {\n      var names = [], events2, name;\n      if (this._eventsCount === 0) return names;\n      for (name in events2 = this._events) {\n        if (has2.call(events2, name)) names.push(prefix ? name.slice(1) : name);\n      }\n      if (Object.getOwnPropertySymbols) {\n        return names.concat(Object.getOwnPropertySymbols(events2));\n      }\n      return names;\n    };\n    EventEmitter2.prototype.listeners = function listeners(event) {\n      var evt = prefix ? prefix + event : event, handlers = this._events[evt];\n      if (!handlers) return [];\n      if (handlers.fn) return [handlers.fn];\n      for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n        ee[i] = handlers[i].fn;\n      }\n      return ee;\n    };\n    EventEmitter2.prototype.listenerCount = function listenerCount(event) {\n      var evt = prefix ? prefix + event : event, listeners = this._events[evt];\n      if (!listeners) return 0;\n      if (listeners.fn) return 1;\n      return listeners.length;\n    };\n    EventEmitter2.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n      var evt = prefix ? prefix + event : event;\n      if (!this._events[evt]) return false;\n      var listeners = this._events[evt], len = arguments.length, args, i;\n      if (listeners.fn) {\n        if (listeners.once) this.removeListener(event, listeners.fn, void 0, true);\n        switch (len) {\n          case 1:\n            return listeners.fn.call(listeners.context), true;\n          case 2:\n            return listeners.fn.call(listeners.context, a1), true;\n          case 3:\n            return listeners.fn.call(listeners.context, a1, a2), true;\n          case 4:\n            return listeners.fn.call(listeners.context, a1, a2, a3), true;\n          case 5:\n            return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n          case 6:\n            return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n        }\n        for (i = 1, args = new Array(len - 1); i < len; i++) {\n          args[i - 1] = arguments[i];\n        }\n        listeners.fn.apply(listeners.context, args);\n      } else {\n        var length = listeners.length, j;\n        for (i = 0; i < length; i++) {\n          if (listeners[i].once) this.removeListener(event, listeners[i].fn, void 0, true);\n          switch (len) {\n            case 1:\n              listeners[i].fn.call(listeners[i].context);\n              break;\n            case 2:\n              listeners[i].fn.call(listeners[i].context, a1);\n              break;\n            case 3:\n              listeners[i].fn.call(listeners[i].context, a1, a2);\n              break;\n            case 4:\n              listeners[i].fn.call(listeners[i].context, a1, a2, a3);\n              break;\n            default:\n              if (!args) for (j = 1, args = new Array(len - 1); j < len; j++) {\n                args[j - 1] = arguments[j];\n              }\n              listeners[i].fn.apply(listeners[i].context, args);\n          }\n        }\n      }\n      return true;\n    };\n    EventEmitter2.prototype.on = function on(event, fn, context) {\n      return addListener(this, event, fn, context, false);\n    };\n    EventEmitter2.prototype.once = function once2(event, fn, context) {\n      return addListener(this, event, fn, context, true);\n    };\n    EventEmitter2.prototype.removeListener = function removeListener(event, fn, context, once2) {\n      var evt = prefix ? prefix + event : event;\n      if (!this._events[evt]) return this;\n      if (!fn) {\n        clearEvent(this, evt);\n        return this;\n      }\n      var listeners = this._events[evt];\n      if (listeners.fn) {\n        if (listeners.fn === fn && (!once2 || listeners.once) && (!context || listeners.context === context)) {\n          clearEvent(this, evt);\n        }\n      } else {\n        for (var i = 0, events2 = [], length = listeners.length; i < length; i++) {\n          if (listeners[i].fn !== fn || once2 && !listeners[i].once || context && listeners[i].context !== context) {\n            events2.push(listeners[i]);\n          }\n        }\n        if (events2.length) this._events[evt] = events2.length === 1 ? events2[0] : events2;\n        else clearEvent(this, evt);\n      }\n      return this;\n    };\n    EventEmitter2.prototype.removeAllListeners = function removeAllListeners(event) {\n      var evt;\n      if (event) {\n        evt = prefix ? prefix + event : event;\n        if (this._events[evt]) clearEvent(this, evt);\n      } else {\n        this._events = new Events2();\n        this._eventsCount = 0;\n      }\n      return this;\n    };\n    EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;\n    EventEmitter2.prototype.addListener = EventEmitter2.prototype.on;\n    EventEmitter2.prefixed = prefix;\n    EventEmitter2.EventEmitter = EventEmitter2;\n    {\n      module.exports = EventEmitter2;\n    }\n  })(eventemitter3);\n  return eventemitter3.exports;\n}\nvar eventemitter3Exports = requireEventemitter3();\nvar EventEmitter$1 = /* @__PURE__ */ getDefaultExportFromCjs$2(eventemitter3Exports);\nconst version = \"1.6.7\";\nconst workerStore = {};\nfunction hasUMDWorker() {\n  return typeof __HLS_WORKER_BUNDLE__ === \"function\";\n}\nfunction injectWorker() {\n  const workerContext = workerStore[version];\n  if (workerContext) {\n    workerContext.clientCount++;\n    return workerContext;\n  }\n  const blob = new self.Blob([`var exports={};var module={exports:exports};function define(f){f()};define.amd=true;(${__HLS_WORKER_BUNDLE__.toString()})(true);`], {\n    type: \"text/javascript\"\n  });\n  const objectURL = self.URL.createObjectURL(blob);\n  const worker = new self.Worker(objectURL);\n  const result = {\n    worker,\n    objectURL,\n    clientCount: 1\n  };\n  workerStore[version] = result;\n  return result;\n}\nfunction loadWorker(path) {\n  const workerContext = workerStore[path];\n  if (workerContext) {\n    workerContext.clientCount++;\n    return workerContext;\n  }\n  const scriptURL = new self.URL(path, self.location.href).href;\n  const worker = new self.Worker(scriptURL);\n  const result = {\n    worker,\n    scriptURL,\n    clientCount: 1\n  };\n  workerStore[path] = result;\n  return result;\n}\nfunction removeWorkerFromStore(path) {\n  const workerContext = workerStore[path || version];\n  if (workerContext) {\n    const clientCount = workerContext.clientCount--;\n    if (clientCount === 1) {\n      const {\n        worker,\n        objectURL\n      } = workerContext;\n      delete workerStore[path || version];\n      if (objectURL) {\n        self.URL.revokeObjectURL(objectURL);\n      }\n      worker.terminate();\n    }\n  }\n}\nfunction isId3Footer(data, offset) {\n  if (offset + 10 <= data.length) {\n    if (data[offset] === 51 && data[offset + 1] === 68 && data[offset + 2] === 73) {\n      if (data[offset + 3] < 255 && data[offset + 4] < 255) {\n        if (data[offset + 6] < 128 && data[offset + 7] < 128 && data[offset + 8] < 128 && data[offset + 9] < 128) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n}\nfunction isId3Header(data, offset) {\n  if (offset + 10 <= data.length) {\n    if (data[offset] === 73 && data[offset + 1] === 68 && data[offset + 2] === 51) {\n      if (data[offset + 3] < 255 && data[offset + 4] < 255) {\n        if (data[offset + 6] < 128 && data[offset + 7] < 128 && data[offset + 8] < 128 && data[offset + 9] < 128) {\n          return true;\n        }\n      }\n    }\n  }\n  return false;\n}\nfunction readId3Size(data, offset) {\n  let size = 0;\n  size = (data[offset] & 127) << 21;\n  size |= (data[offset + 1] & 127) << 14;\n  size |= (data[offset + 2] & 127) << 7;\n  size |= data[offset + 3] & 127;\n  return size;\n}\nfunction getId3Data(data, offset) {\n  const front = offset;\n  let length = 0;\n  while (isId3Header(data, offset)) {\n    length += 10;\n    const size = readId3Size(data, offset + 6);\n    length += size;\n    if (isId3Footer(data, offset + 10)) {\n      length += 10;\n    }\n    offset += length;\n  }\n  if (length > 0) {\n    return data.subarray(front, front + length);\n  }\n  return void 0;\n}\nfunction getAudioConfig(observer, data, offset, manifestCodec) {\n  const adtsSamplingRates = [96e3, 88200, 64e3, 48e3, 44100, 32e3, 24e3, 22050, 16e3, 12e3, 11025, 8e3, 7350];\n  const byte2 = data[offset + 2];\n  const adtsSamplingIndex = byte2 >> 2 & 15;\n  if (adtsSamplingIndex > 12) {\n    const error = new Error(`invalid ADTS sampling index:${adtsSamplingIndex}`);\n    observer.emit(Events.ERROR, Events.ERROR, {\n      type: ErrorTypes.MEDIA_ERROR,\n      details: ErrorDetails.FRAG_PARSING_ERROR,\n      fatal: true,\n      error,\n      reason: error.message\n    });\n    return;\n  }\n  const adtsObjectType = (byte2 >> 6 & 3) + 1;\n  const channelCount = data[offset + 3] >> 6 & 3 | (byte2 & 1) << 2;\n  const codec = \"mp4a.40.\" + adtsObjectType;\n  const samplerate = adtsSamplingRates[adtsSamplingIndex];\n  let aacSampleIndex = adtsSamplingIndex;\n  if (adtsObjectType === 5 || adtsObjectType === 29) {\n    aacSampleIndex -= 3;\n  }\n  const config = [adtsObjectType << 3 | (aacSampleIndex & 14) >> 1, (aacSampleIndex & 1) << 7 | channelCount << 3];\n  logger.log(`manifest codec:${manifestCodec}, parsed codec:${codec}, channels:${channelCount}, rate:${samplerate} (ADTS object type:${adtsObjectType} sampling index:${adtsSamplingIndex})`);\n  return {\n    config,\n    samplerate,\n    channelCount,\n    codec,\n    parsedCodec: codec,\n    manifestCodec\n  };\n}\nfunction isHeaderPattern$1(data, offset) {\n  return data[offset] === 255 && (data[offset + 1] & 246) === 240;\n}\nfunction getHeaderLength(data, offset) {\n  return data[offset + 1] & 1 ? 7 : 9;\n}\nfunction getFullFrameLength(data, offset) {\n  return (data[offset + 3] & 3) << 11 | data[offset + 4] << 3 | (data[offset + 5] & 224) >>> 5;\n}\nfunction canGetFrameLength(data, offset) {\n  return offset + 5 < data.length;\n}\nfunction isHeader$1(data, offset) {\n  return offset + 1 < data.length && isHeaderPattern$1(data, offset);\n}\nfunction canParse$1(data, offset) {\n  return canGetFrameLength(data, offset) && isHeaderPattern$1(data, offset) && getFullFrameLength(data, offset) <= data.length - offset;\n}\nfunction probe$1(data, offset) {\n  if (isHeader$1(data, offset)) {\n    const headerLength = getHeaderLength(data, offset);\n    if (offset + headerLength >= data.length) {\n      return false;\n    }\n    const frameLength = getFullFrameLength(data, offset);\n    if (frameLength <= headerLength) {\n      return false;\n    }\n    const newOffset = offset + frameLength;\n    return newOffset === data.length || isHeader$1(data, newOffset);\n  }\n  return false;\n}\nfunction initTrackConfig(track, observer, data, offset, audioCodec) {\n  if (!track.samplerate) {\n    const config = getAudioConfig(observer, data, offset, audioCodec);\n    if (!config) {\n      return;\n    }\n    _extends(track, config);\n  }\n}\nfunction getFrameDuration(samplerate) {\n  return 1024 * 9e4 / samplerate;\n}\nfunction parseFrameHeader(data, offset) {\n  const headerLength = getHeaderLength(data, offset);\n  if (offset + headerLength <= data.length) {\n    const frameLength = getFullFrameLength(data, offset) - headerLength;\n    if (frameLength > 0) {\n      return {\n        headerLength,\n        frameLength\n      };\n    }\n  }\n}\nfunction appendFrame$2(track, data, offset, pts, frameIndex) {\n  const frameDuration = getFrameDuration(track.samplerate);\n  const stamp = pts + frameIndex * frameDuration;\n  const header = parseFrameHeader(data, offset);\n  let unit;\n  if (header) {\n    const {\n      frameLength,\n      headerLength\n    } = header;\n    const _length = headerLength + frameLength;\n    const missing = Math.max(0, offset + _length - data.length);\n    if (missing) {\n      unit = new Uint8Array(_length - headerLength);\n      unit.set(data.subarray(offset + headerLength, data.length), 0);\n    } else {\n      unit = data.subarray(offset + headerLength, offset + _length);\n    }\n    const _sample = {\n      unit,\n      pts: stamp\n    };\n    if (!missing) {\n      track.samples.push(_sample);\n    }\n    return {\n      sample: _sample,\n      length: _length,\n      missing\n    };\n  }\n  const length = data.length - offset;\n  unit = new Uint8Array(length);\n  unit.set(data.subarray(offset, data.length), 0);\n  const sample = {\n    unit,\n    pts: stamp\n  };\n  return {\n    sample,\n    length,\n    missing: -1\n  };\n}\nfunction canParseId3(data, offset) {\n  return isId3Header(data, offset) && readId3Size(data, offset + 6) + 10 <= data.length - offset;\n}\nfunction toArrayBuffer(view2) {\n  if (view2 instanceof ArrayBuffer) {\n    return view2;\n  } else {\n    if (view2.byteOffset == 0 && view2.byteLength == view2.buffer.byteLength) {\n      return view2.buffer;\n    }\n    return new Uint8Array(view2).buffer;\n  }\n}\nfunction toUint8(data, offset = 0, length = Infinity) {\n  return view(data, offset, length, Uint8Array);\n}\nfunction view(data, offset, length, Type) {\n  const buffer2 = unsafeGetArrayBuffer(data);\n  let bytesPerElement = 1;\n  if (\"BYTES_PER_ELEMENT\" in Type) {\n    bytesPerElement = Type.BYTES_PER_ELEMENT;\n  }\n  const dataOffset = isArrayBufferView(data) ? data.byteOffset : 0;\n  const dataEnd = (dataOffset + data.byteLength) / bytesPerElement;\n  const rawStart = (dataOffset + offset) / bytesPerElement;\n  const start = Math.floor(Math.max(0, Math.min(rawStart, dataEnd)));\n  const end = Math.floor(Math.min(start + Math.max(length, 0), dataEnd));\n  return new Type(buffer2, start, end - start);\n}\nfunction unsafeGetArrayBuffer(view2) {\n  if (view2 instanceof ArrayBuffer) {\n    return view2;\n  } else {\n    return view2.buffer;\n  }\n}\nfunction isArrayBufferView(obj) {\n  return obj && obj.buffer instanceof ArrayBuffer && obj.byteLength !== void 0 && obj.byteOffset !== void 0;\n}\nfunction decodeId3ImageFrame(frame) {\n  const metadataFrame = {\n    key: frame.type,\n    description: \"\",\n    data: \"\",\n    mimeType: null,\n    pictureType: null\n  };\n  const utf8Encoding = 3;\n  if (frame.size < 2) {\n    return void 0;\n  }\n  if (frame.data[0] !== utf8Encoding) {\n    console.log(\"Ignore frame with unrecognized character encoding\");\n    return void 0;\n  }\n  const mimeTypeEndIndex = frame.data.subarray(1).indexOf(0);\n  if (mimeTypeEndIndex === -1) {\n    return void 0;\n  }\n  const mimeType = utf8ArrayToStr(toUint8(frame.data, 1, mimeTypeEndIndex));\n  const pictureType = frame.data[2 + mimeTypeEndIndex];\n  const descriptionEndIndex = frame.data.subarray(3 + mimeTypeEndIndex).indexOf(0);\n  if (descriptionEndIndex === -1) {\n    return void 0;\n  }\n  const description = utf8ArrayToStr(toUint8(frame.data, 3 + mimeTypeEndIndex, descriptionEndIndex));\n  let data;\n  if (mimeType === \"-->\") {\n    data = utf8ArrayToStr(toUint8(frame.data, 4 + mimeTypeEndIndex + descriptionEndIndex));\n  } else {\n    data = toArrayBuffer(frame.data.subarray(4 + mimeTypeEndIndex + descriptionEndIndex));\n  }\n  metadataFrame.mimeType = mimeType;\n  metadataFrame.pictureType = pictureType;\n  metadataFrame.description = description;\n  metadataFrame.data = data;\n  return metadataFrame;\n}\nfunction decodeId3PrivFrame(frame) {\n  if (frame.size < 2) {\n    return void 0;\n  }\n  const owner = utf8ArrayToStr(frame.data, true);\n  const privateData = new Uint8Array(frame.data.subarray(owner.length + 1));\n  return {\n    key: frame.type,\n    info: owner,\n    data: privateData.buffer\n  };\n}\nfunction decodeId3TextFrame(frame) {\n  if (frame.size < 2) {\n    return void 0;\n  }\n  if (frame.type === \"TXXX\") {\n    let index = 1;\n    const description = utf8ArrayToStr(frame.data.subarray(index), true);\n    index += description.length + 1;\n    const value = utf8ArrayToStr(frame.data.subarray(index));\n    return {\n      key: frame.type,\n      info: description,\n      data: value\n    };\n  }\n  const text = utf8ArrayToStr(frame.data.subarray(1));\n  return {\n    key: frame.type,\n    info: \"\",\n    data: text\n  };\n}\nfunction decodeId3UrlFrame(frame) {\n  if (frame.type === \"WXXX\") {\n    if (frame.size < 2) {\n      return void 0;\n    }\n    let index = 1;\n    const description = utf8ArrayToStr(frame.data.subarray(index), true);\n    index += description.length + 1;\n    const value = utf8ArrayToStr(frame.data.subarray(index));\n    return {\n      key: frame.type,\n      info: description,\n      data: value\n    };\n  }\n  const url = utf8ArrayToStr(frame.data);\n  return {\n    key: frame.type,\n    info: \"\",\n    data: url\n  };\n}\nfunction decodeId3Frame(frame) {\n  if (frame.type === \"PRIV\") {\n    return decodeId3PrivFrame(frame);\n  } else if (frame.type[0] === \"W\") {\n    return decodeId3UrlFrame(frame);\n  } else if (frame.type === \"APIC\") {\n    return decodeId3ImageFrame(frame);\n  }\n  return decodeId3TextFrame(frame);\n}\nfunction getId3FrameData(data) {\n  const type = String.fromCharCode(data[0], data[1], data[2], data[3]);\n  const size = readId3Size(data, 4);\n  const offset = 10;\n  return {\n    type,\n    size,\n    data: data.subarray(offset, offset + size)\n  };\n}\nconst HEADER_FOOTER_SIZE = 10;\nconst FRAME_SIZE = 10;\nfunction getId3Frames(id3Data) {\n  let offset = 0;\n  const frames = [];\n  while (isId3Header(id3Data, offset)) {\n    const size = readId3Size(id3Data, offset + 6);\n    if (id3Data[offset + 5] >> 6 & 1) {\n      offset += HEADER_FOOTER_SIZE;\n    }\n    offset += HEADER_FOOTER_SIZE;\n    const end = offset + size;\n    while (offset + FRAME_SIZE < end) {\n      const frameData = getId3FrameData(id3Data.subarray(offset));\n      const frame = decodeId3Frame(frameData);\n      if (frame) {\n        frames.push(frame);\n      }\n      offset += frameData.size + HEADER_FOOTER_SIZE;\n    }\n    if (isId3Footer(id3Data, offset)) {\n      offset += HEADER_FOOTER_SIZE;\n    }\n  }\n  return frames;\n}\nfunction isId3TimestampFrame(frame) {\n  return frame && frame.key === \"PRIV\" && frame.info === \"com.apple.streaming.transportStreamTimestamp\";\n}\nfunction readId3Timestamp(timeStampFrame) {\n  if (timeStampFrame.data.byteLength === 8) {\n    const data = new Uint8Array(timeStampFrame.data);\n    const pts33Bit = data[3] & 1;\n    let timestamp = (data[4] << 23) + (data[5] << 15) + (data[6] << 7) + data[7];\n    timestamp /= 45;\n    if (pts33Bit) {\n      timestamp += 4772185884e-2;\n    }\n    return Math.round(timestamp);\n  }\n  return void 0;\n}\nfunction getId3Timestamp(data) {\n  const frames = getId3Frames(data);\n  for (let i = 0; i < frames.length; i++) {\n    const frame = frames[i];\n    if (isId3TimestampFrame(frame)) {\n      return readId3Timestamp(frame);\n    }\n  }\n  return void 0;\n}\nlet MetadataSchema = /* @__PURE__ */ function(MetadataSchema2) {\n  MetadataSchema2[\"audioId3\"] = \"org.id3\";\n  MetadataSchema2[\"dateRange\"] = \"com.apple.quicktime.HLS\";\n  MetadataSchema2[\"emsg\"] = \"https://aomedia.org/emsg/ID3\";\n  MetadataSchema2[\"misbklv\"] = \"urn:misb:KLV:bin:1910.1\";\n  return MetadataSchema2;\n}({});\nfunction dummyTrack(type = \"\", inputTimeScale = 9e4) {\n  return {\n    type,\n    id: -1,\n    pid: -1,\n    inputTimeScale,\n    sequenceNumber: -1,\n    samples: [],\n    dropped: 0\n  };\n}\nclass BaseAudioDemuxer {\n  constructor() {\n    this._audioTrack = void 0;\n    this._id3Track = void 0;\n    this.frameIndex = 0;\n    this.cachedData = null;\n    this.basePTS = null;\n    this.initPTS = null;\n    this.lastPTS = null;\n  }\n  resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration) {\n    this._id3Track = {\n      type: \"id3\",\n      id: 3,\n      pid: -1,\n      inputTimeScale: 9e4,\n      sequenceNumber: 0,\n      samples: [],\n      dropped: 0\n    };\n  }\n  resetTimeStamp(deaultTimestamp) {\n    this.initPTS = deaultTimestamp;\n    this.resetContiguity();\n  }\n  resetContiguity() {\n    this.basePTS = null;\n    this.lastPTS = null;\n    this.frameIndex = 0;\n  }\n  canParse(data, offset) {\n    return false;\n  }\n  appendFrame(track, data, offset) {\n  }\n  // feed incoming data to the front of the parsing pipeline\n  demux(data, timeOffset) {\n    if (this.cachedData) {\n      data = appendUint8Array(this.cachedData, data);\n      this.cachedData = null;\n    }\n    let id3Data = getId3Data(data, 0);\n    let offset = id3Data ? id3Data.length : 0;\n    let lastDataIndex;\n    const track = this._audioTrack;\n    const id3Track = this._id3Track;\n    const timestamp = id3Data ? getId3Timestamp(id3Data) : void 0;\n    const length = data.length;\n    if (this.basePTS === null || this.frameIndex === 0 && isFiniteNumber(timestamp)) {\n      this.basePTS = initPTSFn(timestamp, timeOffset, this.initPTS);\n      this.lastPTS = this.basePTS;\n    }\n    if (this.lastPTS === null) {\n      this.lastPTS = this.basePTS;\n    }\n    if (id3Data && id3Data.length > 0) {\n      id3Track.samples.push({\n        pts: this.lastPTS,\n        dts: this.lastPTS,\n        data: id3Data,\n        type: MetadataSchema.audioId3,\n        duration: Number.POSITIVE_INFINITY\n      });\n    }\n    while (offset < length) {\n      if (this.canParse(data, offset)) {\n        const frame = this.appendFrame(track, data, offset);\n        if (frame) {\n          this.frameIndex++;\n          this.lastPTS = frame.sample.pts;\n          offset += frame.length;\n          lastDataIndex = offset;\n        } else {\n          offset = length;\n        }\n      } else if (canParseId3(data, offset)) {\n        id3Data = getId3Data(data, offset);\n        id3Track.samples.push({\n          pts: this.lastPTS,\n          dts: this.lastPTS,\n          data: id3Data,\n          type: MetadataSchema.audioId3,\n          duration: Number.POSITIVE_INFINITY\n        });\n        offset += id3Data.length;\n        lastDataIndex = offset;\n      } else {\n        offset++;\n      }\n      if (offset === length && lastDataIndex !== length) {\n        const partialData = data.slice(lastDataIndex);\n        if (this.cachedData) {\n          this.cachedData = appendUint8Array(this.cachedData, partialData);\n        } else {\n          this.cachedData = partialData;\n        }\n      }\n    }\n    return {\n      audioTrack: track,\n      videoTrack: dummyTrack(),\n      id3Track,\n      textTrack: dummyTrack()\n    };\n  }\n  demuxSampleAes(data, keyData, timeOffset) {\n    return Promise.reject(new Error(`[${this}] This demuxer does not support Sample-AES decryption`));\n  }\n  flush(timeOffset) {\n    const cachedData = this.cachedData;\n    if (cachedData) {\n      this.cachedData = null;\n      this.demux(cachedData, 0);\n    }\n    return {\n      audioTrack: this._audioTrack,\n      videoTrack: dummyTrack(),\n      id3Track: this._id3Track,\n      textTrack: dummyTrack()\n    };\n  }\n  destroy() {\n    this.cachedData = null;\n    this._audioTrack = this._id3Track = void 0;\n  }\n}\nconst initPTSFn = (timestamp, timeOffset, initPTS) => {\n  if (isFiniteNumber(timestamp)) {\n    return timestamp * 90;\n  }\n  const init90kHz = initPTS ? initPTS.baseTime * 9e4 / initPTS.timescale : 0;\n  return timeOffset * 9e4 + init90kHz;\n};\nlet chromeVersion$1 = null;\nconst BitratesMap = [32, 64, 96, 128, 160, 192, 224, 256, 288, 320, 352, 384, 416, 448, 32, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 384, 32, 40, 48, 56, 64, 80, 96, 112, 128, 160, 192, 224, 256, 320, 32, 48, 56, 64, 80, 96, 112, 128, 144, 160, 176, 192, 224, 256, 8, 16, 24, 32, 40, 48, 56, 64, 80, 96, 112, 128, 144, 160];\nconst SamplingRateMap = [44100, 48e3, 32e3, 22050, 24e3, 16e3, 11025, 12e3, 8e3];\nconst SamplesCoefficients = [\n  // MPEG 2.5\n  [\n    0,\n    // Reserved\n    72,\n    // Layer3\n    144,\n    // Layer2\n    12\n    // Layer1\n  ],\n  // Reserved\n  [\n    0,\n    // Reserved\n    0,\n    // Layer3\n    0,\n    // Layer2\n    0\n    // Layer1\n  ],\n  // MPEG 2\n  [\n    0,\n    // Reserved\n    72,\n    // Layer3\n    144,\n    // Layer2\n    12\n    // Layer1\n  ],\n  // MPEG 1\n  [\n    0,\n    // Reserved\n    144,\n    // Layer3\n    144,\n    // Layer2\n    12\n    // Layer1\n  ]\n];\nconst BytesInSlot = [\n  0,\n  // Reserved\n  1,\n  // Layer3\n  1,\n  // Layer2\n  4\n  // Layer1\n];\nfunction appendFrame$1(track, data, offset, pts, frameIndex) {\n  if (offset + 24 > data.length) {\n    return;\n  }\n  const header = parseHeader(data, offset);\n  if (header && offset + header.frameLength <= data.length) {\n    const frameDuration = header.samplesPerFrame * 9e4 / header.sampleRate;\n    const stamp = pts + frameIndex * frameDuration;\n    const sample = {\n      unit: data.subarray(offset, offset + header.frameLength),\n      pts: stamp,\n      dts: stamp\n    };\n    track.config = [];\n    track.channelCount = header.channelCount;\n    track.samplerate = header.sampleRate;\n    track.samples.push(sample);\n    return {\n      sample,\n      length: header.frameLength,\n      missing: 0\n    };\n  }\n}\nfunction parseHeader(data, offset) {\n  const mpegVersion = data[offset + 1] >> 3 & 3;\n  const mpegLayer = data[offset + 1] >> 1 & 3;\n  const bitRateIndex = data[offset + 2] >> 4 & 15;\n  const sampleRateIndex = data[offset + 2] >> 2 & 3;\n  if (mpegVersion !== 1 && bitRateIndex !== 0 && bitRateIndex !== 15 && sampleRateIndex !== 3) {\n    const paddingBit = data[offset + 2] >> 1 & 1;\n    const channelMode = data[offset + 3] >> 6;\n    const columnInBitrates = mpegVersion === 3 ? 3 - mpegLayer : mpegLayer === 3 ? 3 : 4;\n    const bitRate = BitratesMap[columnInBitrates * 14 + bitRateIndex - 1] * 1e3;\n    const columnInSampleRates = mpegVersion === 3 ? 0 : mpegVersion === 2 ? 1 : 2;\n    const sampleRate = SamplingRateMap[columnInSampleRates * 3 + sampleRateIndex];\n    const channelCount = channelMode === 3 ? 1 : 2;\n    const sampleCoefficient = SamplesCoefficients[mpegVersion][mpegLayer];\n    const bytesInSlot = BytesInSlot[mpegLayer];\n    const samplesPerFrame = sampleCoefficient * 8 * bytesInSlot;\n    const frameLength = Math.floor(sampleCoefficient * bitRate / sampleRate + paddingBit) * bytesInSlot;\n    if (chromeVersion$1 === null) {\n      const userAgent = navigator.userAgent || \"\";\n      const result = userAgent.match(/Chrome\\/(\\d+)/i);\n      chromeVersion$1 = result ? parseInt(result[1]) : 0;\n    }\n    const needChromeFix = !!chromeVersion$1 && chromeVersion$1 <= 87;\n    if (needChromeFix && mpegLayer === 2 && bitRate >= 224e3 && channelMode === 0) {\n      data[offset + 3] = data[offset + 3] | 128;\n    }\n    return {\n      sampleRate,\n      channelCount,\n      frameLength,\n      samplesPerFrame\n    };\n  }\n}\nfunction isHeaderPattern(data, offset) {\n  return data[offset] === 255 && (data[offset + 1] & 224) === 224 && (data[offset + 1] & 6) !== 0;\n}\nfunction isHeader(data, offset) {\n  return offset + 1 < data.length && isHeaderPattern(data, offset);\n}\nfunction canParse(data, offset) {\n  const headerSize = 4;\n  return isHeaderPattern(data, offset) && headerSize <= data.length - offset;\n}\nfunction probe(data, offset) {\n  if (offset + 1 < data.length && isHeaderPattern(data, offset)) {\n    const headerLength = 4;\n    const header = parseHeader(data, offset);\n    let frameLength = headerLength;\n    if (header != null && header.frameLength) {\n      frameLength = header.frameLength;\n    }\n    const newOffset = offset + frameLength;\n    return newOffset === data.length || isHeader(data, newOffset);\n  }\n  return false;\n}\nclass AACDemuxer extends BaseAudioDemuxer {\n  constructor(observer, config) {\n    super();\n    this.observer = void 0;\n    this.config = void 0;\n    this.observer = observer;\n    this.config = config;\n  }\n  resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration) {\n    super.resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration);\n    this._audioTrack = {\n      container: \"audio/adts\",\n      type: \"audio\",\n      id: 2,\n      pid: -1,\n      sequenceNumber: 0,\n      segmentCodec: \"aac\",\n      samples: [],\n      manifestCodec: audioCodec,\n      duration: trackDuration,\n      inputTimeScale: 9e4,\n      dropped: 0\n    };\n  }\n  // Source for probe info - https://wiki.multimedia.cx/index.php?title=ADTS\n  static probe(data, logger2) {\n    if (!data) {\n      return false;\n    }\n    const id3Data = getId3Data(data, 0);\n    let offset = (id3Data == null ? void 0 : id3Data.length) || 0;\n    if (probe(data, offset)) {\n      return false;\n    }\n    for (let length = data.length; offset < length; offset++) {\n      if (probe$1(data, offset)) {\n        logger2.log(\"ADTS sync word found !\");\n        return true;\n      }\n    }\n    return false;\n  }\n  canParse(data, offset) {\n    return canParse$1(data, offset);\n  }\n  appendFrame(track, data, offset) {\n    initTrackConfig(track, this.observer, data, offset, track.manifestCodec);\n    const frame = appendFrame$2(track, data, offset, this.basePTS, this.frameIndex);\n    if (frame && frame.missing === 0) {\n      return frame;\n    }\n  }\n}\nconst getAudioBSID = (data, offset) => {\n  let bsid = 0;\n  let numBits = 5;\n  offset += numBits;\n  const temp = new Uint32Array(1);\n  const mask = new Uint32Array(1);\n  const byte = new Uint8Array(1);\n  while (numBits > 0) {\n    byte[0] = data[offset];\n    const bits = Math.min(numBits, 8);\n    const shift = 8 - bits;\n    mask[0] = 4278190080 >>> 24 + shift << shift;\n    temp[0] = (byte[0] & mask[0]) >> shift;\n    bsid = !bsid ? temp[0] : bsid << bits | temp[0];\n    offset += 1;\n    numBits -= bits;\n  }\n  return bsid;\n};\nclass AC3Demuxer extends BaseAudioDemuxer {\n  constructor(observer) {\n    super();\n    this.observer = void 0;\n    this.observer = observer;\n  }\n  resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration) {\n    super.resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration);\n    this._audioTrack = {\n      container: \"audio/ac-3\",\n      type: \"audio\",\n      id: 2,\n      pid: -1,\n      sequenceNumber: 0,\n      segmentCodec: \"ac3\",\n      samples: [],\n      manifestCodec: audioCodec,\n      duration: trackDuration,\n      inputTimeScale: 9e4,\n      dropped: 0\n    };\n  }\n  canParse(data, offset) {\n    return offset + 64 < data.length;\n  }\n  appendFrame(track, data, offset) {\n    const frameLength = appendFrame(track, data, offset, this.basePTS, this.frameIndex);\n    if (frameLength !== -1) {\n      const sample = track.samples[track.samples.length - 1];\n      return {\n        sample,\n        length: frameLength,\n        missing: 0\n      };\n    }\n  }\n  static probe(data) {\n    if (!data) {\n      return false;\n    }\n    const id3Data = getId3Data(data, 0);\n    if (!id3Data) {\n      return false;\n    }\n    const offset = id3Data.length;\n    if (data[offset] === 11 && data[offset + 1] === 119 && getId3Timestamp(id3Data) !== void 0 && // check the bsid to confirm ac-3\n    getAudioBSID(data, offset) < 16) {\n      return true;\n    }\n    return false;\n  }\n}\nfunction appendFrame(track, data, start, pts, frameIndex) {\n  if (start + 8 > data.length) {\n    return -1;\n  }\n  if (data[start] !== 11 || data[start + 1] !== 119) {\n    return -1;\n  }\n  const samplingRateCode = data[start + 4] >> 6;\n  if (samplingRateCode >= 3) {\n    return -1;\n  }\n  const samplingRateMap = [48e3, 44100, 32e3];\n  const sampleRate = samplingRateMap[samplingRateCode];\n  const frameSizeCode = data[start + 4] & 63;\n  const frameSizeMap = [64, 69, 96, 64, 70, 96, 80, 87, 120, 80, 88, 120, 96, 104, 144, 96, 105, 144, 112, 121, 168, 112, 122, 168, 128, 139, 192, 128, 140, 192, 160, 174, 240, 160, 175, 240, 192, 208, 288, 192, 209, 288, 224, 243, 336, 224, 244, 336, 256, 278, 384, 256, 279, 384, 320, 348, 480, 320, 349, 480, 384, 417, 576, 384, 418, 576, 448, 487, 672, 448, 488, 672, 512, 557, 768, 512, 558, 768, 640, 696, 960, 640, 697, 960, 768, 835, 1152, 768, 836, 1152, 896, 975, 1344, 896, 976, 1344, 1024, 1114, 1536, 1024, 1115, 1536, 1152, 1253, 1728, 1152, 1254, 1728, 1280, 1393, 1920, 1280, 1394, 1920];\n  const frameLength = frameSizeMap[frameSizeCode * 3 + samplingRateCode] * 2;\n  if (start + frameLength > data.length) {\n    return -1;\n  }\n  const channelMode = data[start + 6] >> 5;\n  let skipCount = 0;\n  if (channelMode === 2) {\n    skipCount += 2;\n  } else {\n    if (channelMode & 1 && channelMode !== 1) {\n      skipCount += 2;\n    }\n    if (channelMode & 4) {\n      skipCount += 2;\n    }\n  }\n  const lfeon = (data[start + 6] << 8 | data[start + 7]) >> 12 - skipCount & 1;\n  const channelsMap = [2, 1, 2, 3, 3, 4, 4, 5];\n  const channelCount = channelsMap[channelMode] + lfeon;\n  const bsid = data[start + 5] >> 3;\n  const bsmod = data[start + 5] & 7;\n  const config = new Uint8Array([samplingRateCode << 6 | bsid << 1 | bsmod >> 2, (bsmod & 3) << 6 | channelMode << 3 | lfeon << 2 | frameSizeCode >> 4, frameSizeCode << 4 & 224]);\n  const frameDuration = 1536 / sampleRate * 9e4;\n  const stamp = pts + frameIndex * frameDuration;\n  const unit = data.subarray(start, start + frameLength);\n  track.config = config;\n  track.channelCount = channelCount;\n  track.samplerate = sampleRate;\n  track.samples.push({\n    unit,\n    pts: stamp\n  });\n  return frameLength;\n}\nclass MP3Demuxer extends BaseAudioDemuxer {\n  resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration) {\n    super.resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration);\n    this._audioTrack = {\n      container: \"audio/mpeg\",\n      type: \"audio\",\n      id: 2,\n      pid: -1,\n      sequenceNumber: 0,\n      segmentCodec: \"mp3\",\n      samples: [],\n      manifestCodec: audioCodec,\n      duration: trackDuration,\n      inputTimeScale: 9e4,\n      dropped: 0\n    };\n  }\n  static probe(data) {\n    if (!data) {\n      return false;\n    }\n    const id3Data = getId3Data(data, 0);\n    let offset = (id3Data == null ? void 0 : id3Data.length) || 0;\n    if (id3Data && data[offset] === 11 && data[offset + 1] === 119 && getId3Timestamp(id3Data) !== void 0 && // check the bsid to confirm ac-3 or ec-3 (not mp3)\n    getAudioBSID(data, offset) <= 16) {\n      return false;\n    }\n    for (let length = data.length; offset < length; offset++) {\n      if (probe(data, offset)) {\n        logger.log(\"MPEG Audio sync word found !\");\n        return true;\n      }\n    }\n    return false;\n  }\n  canParse(data, offset) {\n    return canParse(data, offset);\n  }\n  appendFrame(track, data, offset) {\n    if (this.basePTS === null) {\n      return;\n    }\n    return appendFrame$1(track, data, offset, this.basePTS, this.frameIndex);\n  }\n}\nconst emsgSchemePattern = /\\/emsg[-/]ID3/i;\nclass MP4Demuxer {\n  constructor(observer, config) {\n    this.remainderData = null;\n    this.timeOffset = 0;\n    this.config = void 0;\n    this.videoTrack = void 0;\n    this.audioTrack = void 0;\n    this.id3Track = void 0;\n    this.txtTrack = void 0;\n    this.config = config;\n  }\n  resetTimeStamp() {\n  }\n  resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration) {\n    const videoTrack = this.videoTrack = dummyTrack(\"video\", 1);\n    const audioTrack = this.audioTrack = dummyTrack(\"audio\", 1);\n    const captionTrack = this.txtTrack = dummyTrack(\"text\", 1);\n    this.id3Track = dummyTrack(\"id3\", 1);\n    this.timeOffset = 0;\n    if (!(initSegment != null && initSegment.byteLength)) {\n      return;\n    }\n    const initData = parseInitSegment(initSegment);\n    if (initData.video) {\n      const {\n        id,\n        timescale,\n        codec,\n        supplemental\n      } = initData.video;\n      videoTrack.id = id;\n      videoTrack.timescale = captionTrack.timescale = timescale;\n      videoTrack.codec = codec;\n      videoTrack.supplemental = supplemental;\n    }\n    if (initData.audio) {\n      const {\n        id,\n        timescale,\n        codec\n      } = initData.audio;\n      audioTrack.id = id;\n      audioTrack.timescale = timescale;\n      audioTrack.codec = codec;\n    }\n    captionTrack.id = RemuxerTrackIdConfig.text;\n    videoTrack.sampleDuration = 0;\n    videoTrack.duration = audioTrack.duration = trackDuration;\n  }\n  resetContiguity() {\n    this.remainderData = null;\n  }\n  static probe(data) {\n    return hasMoofData(data);\n  }\n  demux(data, timeOffset) {\n    this.timeOffset = timeOffset;\n    let videoSamples = data;\n    const videoTrack = this.videoTrack;\n    const textTrack = this.txtTrack;\n    if (this.config.progressive) {\n      if (this.remainderData) {\n        videoSamples = appendUint8Array(this.remainderData, data);\n      }\n      const segmentedData = segmentValidRange(videoSamples);\n      this.remainderData = segmentedData.remainder;\n      videoTrack.samples = segmentedData.valid || new Uint8Array();\n    } else {\n      videoTrack.samples = videoSamples;\n    }\n    const id3Track = this.extractID3Track(videoTrack, timeOffset);\n    textTrack.samples = parseSamples(timeOffset, videoTrack);\n    return {\n      videoTrack,\n      audioTrack: this.audioTrack,\n      id3Track,\n      textTrack: this.txtTrack\n    };\n  }\n  flush() {\n    const timeOffset = this.timeOffset;\n    const videoTrack = this.videoTrack;\n    const textTrack = this.txtTrack;\n    videoTrack.samples = this.remainderData || new Uint8Array();\n    this.remainderData = null;\n    const id3Track = this.extractID3Track(videoTrack, this.timeOffset);\n    textTrack.samples = parseSamples(timeOffset, videoTrack);\n    return {\n      videoTrack,\n      audioTrack: dummyTrack(),\n      id3Track,\n      textTrack: dummyTrack()\n    };\n  }\n  extractID3Track(videoTrack, timeOffset) {\n    const id3Track = this.id3Track;\n    if (videoTrack.samples.length) {\n      const emsgs = findBox(videoTrack.samples, [\"emsg\"]);\n      if (emsgs) {\n        emsgs.forEach((data) => {\n          const emsgInfo = parseEmsg(data);\n          if (emsgSchemePattern.test(emsgInfo.schemeIdUri)) {\n            const pts = getEmsgStartTime(emsgInfo, timeOffset);\n            let duration = emsgInfo.eventDuration === 4294967295 ? Number.POSITIVE_INFINITY : emsgInfo.eventDuration / emsgInfo.timeScale;\n            if (duration <= 1e-3) {\n              duration = Number.POSITIVE_INFINITY;\n            }\n            const payload = emsgInfo.payload;\n            id3Track.samples.push({\n              data: payload,\n              len: payload.byteLength,\n              dts: pts,\n              pts,\n              type: MetadataSchema.emsg,\n              duration\n            });\n          } else if (this.config.enableEmsgKLVMetadata && emsgInfo.schemeIdUri.startsWith(\"urn:misb:KLV:bin:1910.1\")) {\n            const pts = getEmsgStartTime(emsgInfo, timeOffset);\n            id3Track.samples.push({\n              data: emsgInfo.payload,\n              len: emsgInfo.payload.byteLength,\n              dts: pts,\n              pts,\n              type: MetadataSchema.misbklv,\n              duration: Number.POSITIVE_INFINITY\n            });\n          }\n        });\n      }\n    }\n    return id3Track;\n  }\n  demuxSampleAes(data, keyData, timeOffset) {\n    return Promise.reject(new Error(\"The MP4 demuxer does not support SAMPLE-AES decryption\"));\n  }\n  destroy() {\n    this.config = null;\n    this.remainderData = null;\n    this.videoTrack = this.audioTrack = this.id3Track = this.txtTrack = void 0;\n  }\n}\nfunction getEmsgStartTime(emsgInfo, timeOffset) {\n  return isFiniteNumber(emsgInfo.presentationTime) ? emsgInfo.presentationTime / emsgInfo.timeScale : timeOffset + emsgInfo.presentationTimeDelta / emsgInfo.timeScale;\n}\nclass SampleAesDecrypter {\n  constructor(observer, config, keyData) {\n    this.keyData = void 0;\n    this.decrypter = void 0;\n    this.keyData = keyData;\n    this.decrypter = new Decrypter(config, {\n      removePKCS7Padding: false\n    });\n  }\n  decryptBuffer(encryptedData) {\n    return this.decrypter.decrypt(encryptedData, this.keyData.key.buffer, this.keyData.iv.buffer, DecrypterAesMode.cbc);\n  }\n  // AAC - encrypt all full 16 bytes blocks starting from offset 16\n  decryptAacSample(samples, sampleIndex, callback) {\n    const curUnit = samples[sampleIndex].unit;\n    if (curUnit.length <= 16) {\n      return;\n    }\n    const encryptedData = curUnit.subarray(16, curUnit.length - curUnit.length % 16);\n    const encryptedBuffer = encryptedData.buffer.slice(encryptedData.byteOffset, encryptedData.byteOffset + encryptedData.length);\n    this.decryptBuffer(encryptedBuffer).then((decryptedBuffer) => {\n      const decryptedData = new Uint8Array(decryptedBuffer);\n      curUnit.set(decryptedData, 16);\n      if (!this.decrypter.isSync()) {\n        this.decryptAacSamples(samples, sampleIndex + 1, callback);\n      }\n    });\n  }\n  decryptAacSamples(samples, sampleIndex, callback) {\n    for (; ; sampleIndex++) {\n      if (sampleIndex >= samples.length) {\n        callback();\n        return;\n      }\n      if (samples[sampleIndex].unit.length < 32) {\n        continue;\n      }\n      this.decryptAacSample(samples, sampleIndex, callback);\n      if (!this.decrypter.isSync()) {\n        return;\n      }\n    }\n  }\n  // AVC - encrypt one 16 bytes block out of ten, starting from offset 32\n  getAvcEncryptedData(decodedData) {\n    const encryptedDataLen = Math.floor((decodedData.length - 48) / 160) * 16 + 16;\n    const encryptedData = new Int8Array(encryptedDataLen);\n    let outputPos = 0;\n    for (let inputPos = 32; inputPos < decodedData.length - 16; inputPos += 160, outputPos += 16) {\n      encryptedData.set(decodedData.subarray(inputPos, inputPos + 16), outputPos);\n    }\n    return encryptedData;\n  }\n  getAvcDecryptedUnit(decodedData, decryptedData) {\n    const uint8DecryptedData = new Uint8Array(decryptedData);\n    let inputPos = 0;\n    for (let outputPos = 32; outputPos < decodedData.length - 16; outputPos += 160, inputPos += 16) {\n      decodedData.set(uint8DecryptedData.subarray(inputPos, inputPos + 16), outputPos);\n    }\n    return decodedData;\n  }\n  decryptAvcSample(samples, sampleIndex, unitIndex, callback, curUnit) {\n    const decodedData = discardEPB(curUnit.data);\n    const encryptedData = this.getAvcEncryptedData(decodedData);\n    this.decryptBuffer(encryptedData.buffer).then((decryptedBuffer) => {\n      curUnit.data = this.getAvcDecryptedUnit(decodedData, decryptedBuffer);\n      if (!this.decrypter.isSync()) {\n        this.decryptAvcSamples(samples, sampleIndex, unitIndex + 1, callback);\n      }\n    });\n  }\n  decryptAvcSamples(samples, sampleIndex, unitIndex, callback) {\n    if (samples instanceof Uint8Array) {\n      throw new Error(\"Cannot decrypt samples of type Uint8Array\");\n    }\n    for (; ; sampleIndex++, unitIndex = 0) {\n      if (sampleIndex >= samples.length) {\n        callback();\n        return;\n      }\n      const curUnits = samples[sampleIndex].units;\n      for (; ; unitIndex++) {\n        if (unitIndex >= curUnits.length) {\n          break;\n        }\n        const curUnit = curUnits[unitIndex];\n        if (curUnit.data.length <= 48 || curUnit.type !== 1 && curUnit.type !== 5) {\n          continue;\n        }\n        this.decryptAvcSample(samples, sampleIndex, unitIndex, callback, curUnit);\n        if (!this.decrypter.isSync()) {\n          return;\n        }\n      }\n    }\n  }\n}\nclass BaseVideoParser {\n  constructor() {\n    this.VideoSample = null;\n  }\n  createVideoSample(key, pts, dts) {\n    return {\n      key,\n      frame: false,\n      pts,\n      dts,\n      units: [],\n      length: 0\n    };\n  }\n  getLastNalUnit(samples) {\n    var _VideoSample;\n    let VideoSample = this.VideoSample;\n    let lastUnit;\n    if (!VideoSample || VideoSample.units.length === 0) {\n      VideoSample = samples[samples.length - 1];\n    }\n    if ((_VideoSample = VideoSample) != null && _VideoSample.units) {\n      const units = VideoSample.units;\n      lastUnit = units[units.length - 1];\n    }\n    return lastUnit;\n  }\n  pushAccessUnit(VideoSample, videoTrack) {\n    if (VideoSample.units.length && VideoSample.frame) {\n      if (VideoSample.pts === void 0) {\n        const samples = videoTrack.samples;\n        const nbSamples = samples.length;\n        if (nbSamples) {\n          const lastSample = samples[nbSamples - 1];\n          VideoSample.pts = lastSample.pts;\n          VideoSample.dts = lastSample.dts;\n        } else {\n          videoTrack.dropped++;\n          return;\n        }\n      }\n      videoTrack.samples.push(VideoSample);\n    }\n  }\n  parseNALu(track, array, endOfSegment) {\n    const len = array.byteLength;\n    let state = track.naluState || 0;\n    const lastState = state;\n    const units = [];\n    let i = 0;\n    let value;\n    let overflow;\n    let unitType;\n    let lastUnitStart = -1;\n    let lastUnitType = 0;\n    if (state === -1) {\n      lastUnitStart = 0;\n      lastUnitType = this.getNALuType(array, 0);\n      state = 0;\n      i = 1;\n    }\n    while (i < len) {\n      value = array[i++];\n      if (!state) {\n        state = value ? 0 : 1;\n        continue;\n      }\n      if (state === 1) {\n        state = value ? 0 : 2;\n        continue;\n      }\n      if (!value) {\n        state = 3;\n      } else if (value === 1) {\n        overflow = i - state - 1;\n        if (lastUnitStart >= 0) {\n          const unit = {\n            data: array.subarray(lastUnitStart, overflow),\n            type: lastUnitType\n          };\n          units.push(unit);\n        } else {\n          const lastUnit = this.getLastNalUnit(track.samples);\n          if (lastUnit) {\n            if (lastState && i <= 4 - lastState) {\n              if (lastUnit.state) {\n                lastUnit.data = lastUnit.data.subarray(0, lastUnit.data.byteLength - lastState);\n              }\n            }\n            if (overflow > 0) {\n              lastUnit.data = appendUint8Array(lastUnit.data, array.subarray(0, overflow));\n              lastUnit.state = 0;\n            }\n          }\n        }\n        if (i < len) {\n          unitType = this.getNALuType(array, i);\n          lastUnitStart = i;\n          lastUnitType = unitType;\n          state = 0;\n        } else {\n          state = -1;\n        }\n      } else {\n        state = 0;\n      }\n    }\n    if (lastUnitStart >= 0 && state >= 0) {\n      const unit = {\n        data: array.subarray(lastUnitStart, len),\n        type: lastUnitType,\n        state\n      };\n      units.push(unit);\n    }\n    if (units.length === 0) {\n      const lastUnit = this.getLastNalUnit(track.samples);\n      if (lastUnit) {\n        lastUnit.data = appendUint8Array(lastUnit.data, array);\n      }\n    }\n    track.naluState = state;\n    return units;\n  }\n}\nclass ExpGolomb {\n  constructor(data) {\n    this.data = void 0;\n    this.bytesAvailable = void 0;\n    this.word = void 0;\n    this.bitsAvailable = void 0;\n    this.data = data;\n    this.bytesAvailable = data.byteLength;\n    this.word = 0;\n    this.bitsAvailable = 0;\n  }\n  // ():void\n  loadWord() {\n    const data = this.data;\n    const bytesAvailable = this.bytesAvailable;\n    const position = data.byteLength - bytesAvailable;\n    const workingBytes = new Uint8Array(4);\n    const availableBytes = Math.min(4, bytesAvailable);\n    if (availableBytes === 0) {\n      throw new Error(\"no bytes available\");\n    }\n    workingBytes.set(data.subarray(position, position + availableBytes));\n    this.word = new DataView(workingBytes.buffer).getUint32(0);\n    this.bitsAvailable = availableBytes * 8;\n    this.bytesAvailable -= availableBytes;\n  }\n  // (count:int):void\n  skipBits(count) {\n    let skipBytes;\n    count = Math.min(count, this.bytesAvailable * 8 + this.bitsAvailable);\n    if (this.bitsAvailable > count) {\n      this.word <<= count;\n      this.bitsAvailable -= count;\n    } else {\n      count -= this.bitsAvailable;\n      skipBytes = count >> 3;\n      count -= skipBytes << 3;\n      this.bytesAvailable -= skipBytes;\n      this.loadWord();\n      this.word <<= count;\n      this.bitsAvailable -= count;\n    }\n  }\n  // (size:int):uint\n  readBits(size) {\n    let bits = Math.min(this.bitsAvailable, size);\n    const valu = this.word >>> 32 - bits;\n    if (size > 32) {\n      logger.error(\"Cannot read more than 32 bits at a time\");\n    }\n    this.bitsAvailable -= bits;\n    if (this.bitsAvailable > 0) {\n      this.word <<= bits;\n    } else if (this.bytesAvailable > 0) {\n      this.loadWord();\n    } else {\n      throw new Error(\"no bits available\");\n    }\n    bits = size - bits;\n    if (bits > 0 && this.bitsAvailable) {\n      return valu << bits | this.readBits(bits);\n    } else {\n      return valu;\n    }\n  }\n  // ():uint\n  skipLZ() {\n    let leadingZeroCount;\n    for (leadingZeroCount = 0; leadingZeroCount < this.bitsAvailable; ++leadingZeroCount) {\n      if ((this.word & 2147483648 >>> leadingZeroCount) !== 0) {\n        this.word <<= leadingZeroCount;\n        this.bitsAvailable -= leadingZeroCount;\n        return leadingZeroCount;\n      }\n    }\n    this.loadWord();\n    return leadingZeroCount + this.skipLZ();\n  }\n  // ():void\n  skipUEG() {\n    this.skipBits(1 + this.skipLZ());\n  }\n  // ():void\n  skipEG() {\n    this.skipBits(1 + this.skipLZ());\n  }\n  // ():uint\n  readUEG() {\n    const clz = this.skipLZ();\n    return this.readBits(clz + 1) - 1;\n  }\n  // ():int\n  readEG() {\n    const valu = this.readUEG();\n    if (1 & valu) {\n      return 1 + valu >>> 1;\n    } else {\n      return -1 * (valu >>> 1);\n    }\n  }\n  // Some convenience functions\n  // :Boolean\n  readBoolean() {\n    return this.readBits(1) === 1;\n  }\n  // ():int\n  readUByte() {\n    return this.readBits(8);\n  }\n  // ():int\n  readUShort() {\n    return this.readBits(16);\n  }\n  // ():int\n  readUInt() {\n    return this.readBits(32);\n  }\n}\nclass AvcVideoParser extends BaseVideoParser {\n  parsePES(track, textTrack, pes, endOfSegment) {\n    const units = this.parseNALu(track, pes.data, endOfSegment);\n    let VideoSample = this.VideoSample;\n    let push2;\n    let spsfound = false;\n    pes.data = null;\n    if (VideoSample && units.length && !track.audFound) {\n      this.pushAccessUnit(VideoSample, track);\n      VideoSample = this.VideoSample = this.createVideoSample(false, pes.pts, pes.dts);\n    }\n    units.forEach((unit) => {\n      var _VideoSample2, _VideoSample3;\n      switch (unit.type) {\n        // NDR\n        case 1: {\n          let iskey = false;\n          push2 = true;\n          const data = unit.data;\n          if (spsfound && data.length > 4) {\n            const sliceType = this.readSliceType(data);\n            if (sliceType === 2 || sliceType === 4 || sliceType === 7 || sliceType === 9) {\n              iskey = true;\n            }\n          }\n          if (iskey) {\n            var _VideoSample;\n            if ((_VideoSample = VideoSample) != null && _VideoSample.frame && !VideoSample.key) {\n              this.pushAccessUnit(VideoSample, track);\n              VideoSample = this.VideoSample = null;\n            }\n          }\n          if (!VideoSample) {\n            VideoSample = this.VideoSample = this.createVideoSample(true, pes.pts, pes.dts);\n          }\n          VideoSample.frame = true;\n          VideoSample.key = iskey;\n          break;\n        }\n        case 5:\n          push2 = true;\n          if ((_VideoSample2 = VideoSample) != null && _VideoSample2.frame && !VideoSample.key) {\n            this.pushAccessUnit(VideoSample, track);\n            VideoSample = this.VideoSample = null;\n          }\n          if (!VideoSample) {\n            VideoSample = this.VideoSample = this.createVideoSample(true, pes.pts, pes.dts);\n          }\n          VideoSample.key = true;\n          VideoSample.frame = true;\n          break;\n        // SEI\n        case 6: {\n          push2 = true;\n          parseSEIMessageFromNALu(unit.data, 1, pes.pts, textTrack.samples);\n          break;\n        }\n        case 7: {\n          var _track$pixelRatio, _track$pixelRatio2;\n          push2 = true;\n          spsfound = true;\n          const sps = unit.data;\n          const config = this.readSPS(sps);\n          if (!track.sps || track.width !== config.width || track.height !== config.height || ((_track$pixelRatio = track.pixelRatio) == null ? void 0 : _track$pixelRatio[0]) !== config.pixelRatio[0] || ((_track$pixelRatio2 = track.pixelRatio) == null ? void 0 : _track$pixelRatio2[1]) !== config.pixelRatio[1]) {\n            track.width = config.width;\n            track.height = config.height;\n            track.pixelRatio = config.pixelRatio;\n            track.sps = [sps];\n            const codecarray = sps.subarray(1, 4);\n            let codecstring = \"avc1.\";\n            for (let i = 0; i < 3; i++) {\n              let h = codecarray[i].toString(16);\n              if (h.length < 2) {\n                h = \"0\" + h;\n              }\n              codecstring += h;\n            }\n            track.codec = codecstring;\n          }\n          break;\n        }\n        // PPS\n        case 8:\n          push2 = true;\n          track.pps = [unit.data];\n          break;\n        // AUD\n        case 9:\n          push2 = true;\n          track.audFound = true;\n          if ((_VideoSample3 = VideoSample) != null && _VideoSample3.frame) {\n            this.pushAccessUnit(VideoSample, track);\n            VideoSample = null;\n          }\n          if (!VideoSample) {\n            VideoSample = this.VideoSample = this.createVideoSample(false, pes.pts, pes.dts);\n          }\n          break;\n        // Filler Data\n        case 12:\n          push2 = true;\n          break;\n        default:\n          push2 = false;\n          break;\n      }\n      if (VideoSample && push2) {\n        const units2 = VideoSample.units;\n        units2.push(unit);\n      }\n    });\n    if (endOfSegment && VideoSample) {\n      this.pushAccessUnit(VideoSample, track);\n      this.VideoSample = null;\n    }\n  }\n  getNALuType(data, offset) {\n    return data[offset] & 31;\n  }\n  readSliceType(data) {\n    const eg = new ExpGolomb(data);\n    eg.readUByte();\n    eg.readUEG();\n    return eg.readUEG();\n  }\n  /**\n   * The scaling list is optionally transmitted as part of a sequence parameter\n   * set and is not relevant to transmuxing.\n   * @param count the number of entries in this scaling list\n   * @see Recommendation ITU-T H.264, Section 7.3.2.1.1.1\n   */\n  skipScalingList(count, reader) {\n    let lastScale = 8;\n    let nextScale = 8;\n    let deltaScale;\n    for (let j = 0; j < count; j++) {\n      if (nextScale !== 0) {\n        deltaScale = reader.readEG();\n        nextScale = (lastScale + deltaScale + 256) % 256;\n      }\n      lastScale = nextScale === 0 ? lastScale : nextScale;\n    }\n  }\n  /**\n   * Read a sequence parameter set and return some interesting video\n   * properties. A sequence parameter set is the H264 metadata that\n   * describes the properties of upcoming video frames.\n   * @returns an object with configuration parsed from the\n   * sequence parameter set, including the dimensions of the\n   * associated video frames.\n   */\n  readSPS(sps) {\n    const eg = new ExpGolomb(sps);\n    let frameCropLeftOffset = 0;\n    let frameCropRightOffset = 0;\n    let frameCropTopOffset = 0;\n    let frameCropBottomOffset = 0;\n    let numRefFramesInPicOrderCntCycle;\n    let scalingListCount;\n    let i;\n    const readUByte = eg.readUByte.bind(eg);\n    const readBits = eg.readBits.bind(eg);\n    const readUEG = eg.readUEG.bind(eg);\n    const readBoolean = eg.readBoolean.bind(eg);\n    const skipBits = eg.skipBits.bind(eg);\n    const skipEG = eg.skipEG.bind(eg);\n    const skipUEG = eg.skipUEG.bind(eg);\n    const skipScalingList = this.skipScalingList.bind(this);\n    readUByte();\n    const profileIdc = readUByte();\n    readBits(5);\n    skipBits(3);\n    readUByte();\n    skipUEG();\n    if (profileIdc === 100 || profileIdc === 110 || profileIdc === 122 || profileIdc === 244 || profileIdc === 44 || profileIdc === 83 || profileIdc === 86 || profileIdc === 118 || profileIdc === 128) {\n      const chromaFormatIdc = readUEG();\n      if (chromaFormatIdc === 3) {\n        skipBits(1);\n      }\n      skipUEG();\n      skipUEG();\n      skipBits(1);\n      if (readBoolean()) {\n        scalingListCount = chromaFormatIdc !== 3 ? 8 : 12;\n        for (i = 0; i < scalingListCount; i++) {\n          if (readBoolean()) {\n            if (i < 6) {\n              skipScalingList(16, eg);\n            } else {\n              skipScalingList(64, eg);\n            }\n          }\n        }\n      }\n    }\n    skipUEG();\n    const picOrderCntType = readUEG();\n    if (picOrderCntType === 0) {\n      readUEG();\n    } else if (picOrderCntType === 1) {\n      skipBits(1);\n      skipEG();\n      skipEG();\n      numRefFramesInPicOrderCntCycle = readUEG();\n      for (i = 0; i < numRefFramesInPicOrderCntCycle; i++) {\n        skipEG();\n      }\n    }\n    skipUEG();\n    skipBits(1);\n    const picWidthInMbsMinus1 = readUEG();\n    const picHeightInMapUnitsMinus1 = readUEG();\n    const frameMbsOnlyFlag = readBits(1);\n    if (frameMbsOnlyFlag === 0) {\n      skipBits(1);\n    }\n    skipBits(1);\n    if (readBoolean()) {\n      frameCropLeftOffset = readUEG();\n      frameCropRightOffset = readUEG();\n      frameCropTopOffset = readUEG();\n      frameCropBottomOffset = readUEG();\n    }\n    let pixelRatio = [1, 1];\n    if (readBoolean()) {\n      if (readBoolean()) {\n        const aspectRatioIdc = readUByte();\n        switch (aspectRatioIdc) {\n          case 1:\n            pixelRatio = [1, 1];\n            break;\n          case 2:\n            pixelRatio = [12, 11];\n            break;\n          case 3:\n            pixelRatio = [10, 11];\n            break;\n          case 4:\n            pixelRatio = [16, 11];\n            break;\n          case 5:\n            pixelRatio = [40, 33];\n            break;\n          case 6:\n            pixelRatio = [24, 11];\n            break;\n          case 7:\n            pixelRatio = [20, 11];\n            break;\n          case 8:\n            pixelRatio = [32, 11];\n            break;\n          case 9:\n            pixelRatio = [80, 33];\n            break;\n          case 10:\n            pixelRatio = [18, 11];\n            break;\n          case 11:\n            pixelRatio = [15, 11];\n            break;\n          case 12:\n            pixelRatio = [64, 33];\n            break;\n          case 13:\n            pixelRatio = [160, 99];\n            break;\n          case 14:\n            pixelRatio = [4, 3];\n            break;\n          case 15:\n            pixelRatio = [3, 2];\n            break;\n          case 16:\n            pixelRatio = [2, 1];\n            break;\n          case 255: {\n            pixelRatio = [readUByte() << 8 | readUByte(), readUByte() << 8 | readUByte()];\n            break;\n          }\n        }\n      }\n    }\n    return {\n      width: Math.ceil((picWidthInMbsMinus1 + 1) * 16 - frameCropLeftOffset * 2 - frameCropRightOffset * 2),\n      height: (2 - frameMbsOnlyFlag) * (picHeightInMapUnitsMinus1 + 1) * 16 - (frameMbsOnlyFlag ? 2 : 4) * (frameCropTopOffset + frameCropBottomOffset),\n      pixelRatio\n    };\n  }\n}\nclass HevcVideoParser extends BaseVideoParser {\n  constructor(...args) {\n    super(...args);\n    this.initVPS = null;\n  }\n  parsePES(track, textTrack, pes, endOfSegment) {\n    const units = this.parseNALu(track, pes.data, endOfSegment);\n    let VideoSample = this.VideoSample;\n    let push2;\n    let spsfound = false;\n    pes.data = null;\n    if (VideoSample && units.length && !track.audFound) {\n      this.pushAccessUnit(VideoSample, track);\n      VideoSample = this.VideoSample = this.createVideoSample(false, pes.pts, pes.dts);\n    }\n    units.forEach((unit) => {\n      var _VideoSample2, _VideoSample3;\n      switch (unit.type) {\n        // NON-IDR, NON RANDOM ACCESS SLICE\n        case 0:\n        case 1:\n        case 2:\n        case 3:\n        case 4:\n        case 5:\n        case 6:\n        case 7:\n        case 8:\n        case 9:\n          if (!VideoSample) {\n            VideoSample = this.VideoSample = this.createVideoSample(false, pes.pts, pes.dts);\n          }\n          VideoSample.frame = true;\n          push2 = true;\n          break;\n        // CRA, BLA (random access picture)\n        case 16:\n        case 17:\n        case 18:\n        case 21:\n          push2 = true;\n          if (spsfound) {\n            var _VideoSample;\n            if ((_VideoSample = VideoSample) != null && _VideoSample.frame && !VideoSample.key) {\n              this.pushAccessUnit(VideoSample, track);\n              VideoSample = this.VideoSample = null;\n            }\n          }\n          if (!VideoSample) {\n            VideoSample = this.VideoSample = this.createVideoSample(true, pes.pts, pes.dts);\n          }\n          VideoSample.key = true;\n          VideoSample.frame = true;\n          break;\n        // IDR\n        case 19:\n        case 20:\n          push2 = true;\n          if ((_VideoSample2 = VideoSample) != null && _VideoSample2.frame && !VideoSample.key) {\n            this.pushAccessUnit(VideoSample, track);\n            VideoSample = this.VideoSample = null;\n          }\n          if (!VideoSample) {\n            VideoSample = this.VideoSample = this.createVideoSample(true, pes.pts, pes.dts);\n          }\n          VideoSample.key = true;\n          VideoSample.frame = true;\n          break;\n        // SEI\n        case 39:\n          push2 = true;\n          parseSEIMessageFromNALu(\n            unit.data,\n            2,\n            // NALu header size\n            pes.pts,\n            textTrack.samples\n          );\n          break;\n        // VPS\n        case 32:\n          push2 = true;\n          if (!track.vps) {\n            if (typeof track.params !== \"object\") {\n              track.params = {};\n            }\n            track.params = _extends(track.params, this.readVPS(unit.data));\n            this.initVPS = unit.data;\n          }\n          track.vps = [unit.data];\n          break;\n        // SPS\n        case 33:\n          push2 = true;\n          spsfound = true;\n          if (track.vps !== void 0 && track.vps[0] !== this.initVPS && track.sps !== void 0 && !this.matchSPS(track.sps[0], unit.data)) {\n            this.initVPS = track.vps[0];\n            track.sps = track.pps = void 0;\n          }\n          if (!track.sps) {\n            const config = this.readSPS(unit.data);\n            track.width = config.width;\n            track.height = config.height;\n            track.pixelRatio = config.pixelRatio;\n            track.codec = config.codecString;\n            track.sps = [];\n            if (typeof track.params !== \"object\") {\n              track.params = {};\n            }\n            for (const prop in config.params) {\n              track.params[prop] = config.params[prop];\n            }\n          }\n          this.pushParameterSet(track.sps, unit.data, track.vps);\n          if (!VideoSample) {\n            VideoSample = this.VideoSample = this.createVideoSample(true, pes.pts, pes.dts);\n          }\n          VideoSample.key = true;\n          break;\n        // PPS\n        case 34:\n          push2 = true;\n          if (typeof track.params === \"object\") {\n            if (!track.pps) {\n              track.pps = [];\n              const config = this.readPPS(unit.data);\n              for (const prop in config) {\n                track.params[prop] = config[prop];\n              }\n            }\n            this.pushParameterSet(track.pps, unit.data, track.vps);\n          }\n          break;\n        // ACCESS UNIT DELIMITER\n        case 35:\n          push2 = true;\n          track.audFound = true;\n          if ((_VideoSample3 = VideoSample) != null && _VideoSample3.frame) {\n            this.pushAccessUnit(VideoSample, track);\n            VideoSample = null;\n          }\n          if (!VideoSample) {\n            VideoSample = this.VideoSample = this.createVideoSample(false, pes.pts, pes.dts);\n          }\n          break;\n        default:\n          push2 = false;\n          break;\n      }\n      if (VideoSample && push2) {\n        const units2 = VideoSample.units;\n        units2.push(unit);\n      }\n    });\n    if (endOfSegment && VideoSample) {\n      this.pushAccessUnit(VideoSample, track);\n      this.VideoSample = null;\n    }\n  }\n  pushParameterSet(parameterSets, data, vps) {\n    if (vps && vps[0] === this.initVPS || !vps && !parameterSets.length) {\n      parameterSets.push(data);\n    }\n  }\n  getNALuType(data, offset) {\n    return (data[offset] & 126) >>> 1;\n  }\n  ebsp2rbsp(arr) {\n    const dst = new Uint8Array(arr.byteLength);\n    let dstIdx = 0;\n    for (let i = 0; i < arr.byteLength; i++) {\n      if (i >= 2) {\n        if (arr[i] === 3 && arr[i - 1] === 0 && arr[i - 2] === 0) {\n          continue;\n        }\n      }\n      dst[dstIdx] = arr[i];\n      dstIdx++;\n    }\n    return new Uint8Array(dst.buffer, 0, dstIdx);\n  }\n  pushAccessUnit(VideoSample, videoTrack) {\n    super.pushAccessUnit(VideoSample, videoTrack);\n    if (this.initVPS) {\n      this.initVPS = null;\n    }\n  }\n  readVPS(vps) {\n    const eg = new ExpGolomb(vps);\n    eg.readUByte();\n    eg.readUByte();\n    eg.readBits(4);\n    eg.skipBits(2);\n    eg.readBits(6);\n    const max_sub_layers_minus1 = eg.readBits(3);\n    const temporal_id_nesting_flag = eg.readBoolean();\n    return {\n      numTemporalLayers: max_sub_layers_minus1 + 1,\n      temporalIdNested: temporal_id_nesting_flag\n    };\n  }\n  readSPS(sps) {\n    const eg = new ExpGolomb(this.ebsp2rbsp(sps));\n    eg.readUByte();\n    eg.readUByte();\n    eg.readBits(4);\n    const max_sub_layers_minus1 = eg.readBits(3);\n    eg.readBoolean();\n    const general_profile_space = eg.readBits(2);\n    const general_tier_flag = eg.readBoolean();\n    const general_profile_idc = eg.readBits(5);\n    const general_profile_compatibility_flags_1 = eg.readUByte();\n    const general_profile_compatibility_flags_2 = eg.readUByte();\n    const general_profile_compatibility_flags_3 = eg.readUByte();\n    const general_profile_compatibility_flags_4 = eg.readUByte();\n    const general_constraint_indicator_flags_1 = eg.readUByte();\n    const general_constraint_indicator_flags_2 = eg.readUByte();\n    const general_constraint_indicator_flags_3 = eg.readUByte();\n    const general_constraint_indicator_flags_4 = eg.readUByte();\n    const general_constraint_indicator_flags_5 = eg.readUByte();\n    const general_constraint_indicator_flags_6 = eg.readUByte();\n    const general_level_idc = eg.readUByte();\n    const sub_layer_profile_present_flags = [];\n    const sub_layer_level_present_flags = [];\n    for (let i = 0; i < max_sub_layers_minus1; i++) {\n      sub_layer_profile_present_flags.push(eg.readBoolean());\n      sub_layer_level_present_flags.push(eg.readBoolean());\n    }\n    if (max_sub_layers_minus1 > 0) {\n      for (let i = max_sub_layers_minus1; i < 8; i++) {\n        eg.readBits(2);\n      }\n    }\n    for (let i = 0; i < max_sub_layers_minus1; i++) {\n      if (sub_layer_profile_present_flags[i]) {\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n        eg.readUByte();\n      }\n      if (sub_layer_level_present_flags[i]) {\n        eg.readUByte();\n      }\n    }\n    eg.readUEG();\n    const chroma_format_idc = eg.readUEG();\n    if (chroma_format_idc == 3) {\n      eg.skipBits(1);\n    }\n    const pic_width_in_luma_samples = eg.readUEG();\n    const pic_height_in_luma_samples = eg.readUEG();\n    const conformance_window_flag = eg.readBoolean();\n    let pic_left_offset = 0, pic_right_offset = 0, pic_top_offset = 0, pic_bottom_offset = 0;\n    if (conformance_window_flag) {\n      pic_left_offset += eg.readUEG();\n      pic_right_offset += eg.readUEG();\n      pic_top_offset += eg.readUEG();\n      pic_bottom_offset += eg.readUEG();\n    }\n    const bit_depth_luma_minus8 = eg.readUEG();\n    const bit_depth_chroma_minus8 = eg.readUEG();\n    const log2_max_pic_order_cnt_lsb_minus4 = eg.readUEG();\n    const sub_layer_ordering_info_present_flag = eg.readBoolean();\n    for (let i = sub_layer_ordering_info_present_flag ? 0 : max_sub_layers_minus1; i <= max_sub_layers_minus1; i++) {\n      eg.skipUEG();\n      eg.skipUEG();\n      eg.skipUEG();\n    }\n    eg.skipUEG();\n    eg.skipUEG();\n    eg.skipUEG();\n    eg.skipUEG();\n    eg.skipUEG();\n    eg.skipUEG();\n    const scaling_list_enabled_flag = eg.readBoolean();\n    if (scaling_list_enabled_flag) {\n      const sps_scaling_list_data_present_flag = eg.readBoolean();\n      if (sps_scaling_list_data_present_flag) {\n        for (let sizeId = 0; sizeId < 4; sizeId++) {\n          for (let matrixId = 0; matrixId < (sizeId === 3 ? 2 : 6); matrixId++) {\n            const scaling_list_pred_mode_flag = eg.readBoolean();\n            if (!scaling_list_pred_mode_flag) {\n              eg.readUEG();\n            } else {\n              const coefNum = Math.min(64, 1 << 4 + (sizeId << 1));\n              if (sizeId > 1) {\n                eg.readEG();\n              }\n              for (let i = 0; i < coefNum; i++) {\n                eg.readEG();\n              }\n            }\n          }\n        }\n      }\n    }\n    eg.readBoolean();\n    eg.readBoolean();\n    const pcm_enabled_flag = eg.readBoolean();\n    if (pcm_enabled_flag) {\n      eg.readUByte();\n      eg.skipUEG();\n      eg.skipUEG();\n      eg.readBoolean();\n    }\n    const num_short_term_ref_pic_sets = eg.readUEG();\n    let num_delta_pocs = 0;\n    for (let i = 0; i < num_short_term_ref_pic_sets; i++) {\n      let inter_ref_pic_set_prediction_flag = false;\n      if (i !== 0) {\n        inter_ref_pic_set_prediction_flag = eg.readBoolean();\n      }\n      if (inter_ref_pic_set_prediction_flag) {\n        if (i === num_short_term_ref_pic_sets) {\n          eg.readUEG();\n        }\n        eg.readBoolean();\n        eg.readUEG();\n        let next_num_delta_pocs = 0;\n        for (let j = 0; j <= num_delta_pocs; j++) {\n          const used_by_curr_pic_flag = eg.readBoolean();\n          let use_delta_flag = false;\n          if (!used_by_curr_pic_flag) {\n            use_delta_flag = eg.readBoolean();\n          }\n          if (used_by_curr_pic_flag || use_delta_flag) {\n            next_num_delta_pocs++;\n          }\n        }\n        num_delta_pocs = next_num_delta_pocs;\n      } else {\n        const num_negative_pics = eg.readUEG();\n        const num_positive_pics = eg.readUEG();\n        num_delta_pocs = num_negative_pics + num_positive_pics;\n        for (let j = 0; j < num_negative_pics; j++) {\n          eg.readUEG();\n          eg.readBoolean();\n        }\n        for (let j = 0; j < num_positive_pics; j++) {\n          eg.readUEG();\n          eg.readBoolean();\n        }\n      }\n    }\n    const long_term_ref_pics_present_flag = eg.readBoolean();\n    if (long_term_ref_pics_present_flag) {\n      const num_long_term_ref_pics_sps = eg.readUEG();\n      for (let i = 0; i < num_long_term_ref_pics_sps; i++) {\n        for (let j = 0; j < log2_max_pic_order_cnt_lsb_minus4 + 4; j++) {\n          eg.readBits(1);\n        }\n        eg.readBits(1);\n      }\n    }\n    let min_spatial_segmentation_idc = 0;\n    let sar_width = 1, sar_height = 1;\n    let fps_fixed = true, fps_den = 1, fps_num = 0;\n    eg.readBoolean();\n    eg.readBoolean();\n    let default_display_window_flag = false;\n    const vui_parameters_present_flag = eg.readBoolean();\n    if (vui_parameters_present_flag) {\n      const aspect_ratio_info_present_flag = eg.readBoolean();\n      if (aspect_ratio_info_present_flag) {\n        const aspect_ratio_idc = eg.readUByte();\n        const sar_width_table = [1, 12, 10, 16, 40, 24, 20, 32, 80, 18, 15, 64, 160, 4, 3, 2];\n        const sar_height_table = [1, 11, 11, 11, 33, 11, 11, 11, 33, 11, 11, 33, 99, 3, 2, 1];\n        if (aspect_ratio_idc > 0 && aspect_ratio_idc < 16) {\n          sar_width = sar_width_table[aspect_ratio_idc - 1];\n          sar_height = sar_height_table[aspect_ratio_idc - 1];\n        } else if (aspect_ratio_idc === 255) {\n          sar_width = eg.readBits(16);\n          sar_height = eg.readBits(16);\n        }\n      }\n      const overscan_info_present_flag = eg.readBoolean();\n      if (overscan_info_present_flag) {\n        eg.readBoolean();\n      }\n      const video_signal_type_present_flag = eg.readBoolean();\n      if (video_signal_type_present_flag) {\n        eg.readBits(3);\n        eg.readBoolean();\n        const colour_description_present_flag = eg.readBoolean();\n        if (colour_description_present_flag) {\n          eg.readUByte();\n          eg.readUByte();\n          eg.readUByte();\n        }\n      }\n      const chroma_loc_info_present_flag = eg.readBoolean();\n      if (chroma_loc_info_present_flag) {\n        eg.readUEG();\n        eg.readUEG();\n      }\n      eg.readBoolean();\n      eg.readBoolean();\n      eg.readBoolean();\n      default_display_window_flag = eg.readBoolean();\n      if (default_display_window_flag) {\n        pic_left_offset += eg.readUEG();\n        pic_right_offset += eg.readUEG();\n        pic_top_offset += eg.readUEG();\n        pic_bottom_offset += eg.readUEG();\n      }\n      const vui_timing_info_present_flag = eg.readBoolean();\n      if (vui_timing_info_present_flag) {\n        fps_den = eg.readBits(32);\n        fps_num = eg.readBits(32);\n        const vui_poc_proportional_to_timing_flag = eg.readBoolean();\n        if (vui_poc_proportional_to_timing_flag) {\n          eg.readUEG();\n        }\n        const vui_hrd_parameters_present_flag = eg.readBoolean();\n        if (vui_hrd_parameters_present_flag) {\n          const nal_hrd_parameters_present_flag = eg.readBoolean();\n          const vcl_hrd_parameters_present_flag = eg.readBoolean();\n          let sub_pic_hrd_params_present_flag = false;\n          if (nal_hrd_parameters_present_flag || vcl_hrd_parameters_present_flag) {\n            sub_pic_hrd_params_present_flag = eg.readBoolean();\n            if (sub_pic_hrd_params_present_flag) {\n              eg.readUByte();\n              eg.readBits(5);\n              eg.readBoolean();\n              eg.readBits(5);\n            }\n            eg.readBits(4);\n            eg.readBits(4);\n            if (sub_pic_hrd_params_present_flag) {\n              eg.readBits(4);\n            }\n            eg.readBits(5);\n            eg.readBits(5);\n            eg.readBits(5);\n          }\n          for (let i = 0; i <= max_sub_layers_minus1; i++) {\n            fps_fixed = eg.readBoolean();\n            const fixed_pic_rate_within_cvs_flag = fps_fixed || eg.readBoolean();\n            let low_delay_hrd_flag = false;\n            if (fixed_pic_rate_within_cvs_flag) {\n              eg.readEG();\n            } else {\n              low_delay_hrd_flag = eg.readBoolean();\n            }\n            const cpb_cnt = low_delay_hrd_flag ? 1 : eg.readUEG() + 1;\n            if (nal_hrd_parameters_present_flag) {\n              for (let j = 0; j < cpb_cnt; j++) {\n                eg.readUEG();\n                eg.readUEG();\n                if (sub_pic_hrd_params_present_flag) {\n                  eg.readUEG();\n                  eg.readUEG();\n                }\n                eg.skipBits(1);\n              }\n            }\n            if (vcl_hrd_parameters_present_flag) {\n              for (let j = 0; j < cpb_cnt; j++) {\n                eg.readUEG();\n                eg.readUEG();\n                if (sub_pic_hrd_params_present_flag) {\n                  eg.readUEG();\n                  eg.readUEG();\n                }\n                eg.skipBits(1);\n              }\n            }\n          }\n        }\n      }\n      const bitstream_restriction_flag = eg.readBoolean();\n      if (bitstream_restriction_flag) {\n        eg.readBoolean();\n        eg.readBoolean();\n        eg.readBoolean();\n        min_spatial_segmentation_idc = eg.readUEG();\n      }\n    }\n    let width = pic_width_in_luma_samples, height = pic_height_in_luma_samples;\n    if (conformance_window_flag || default_display_window_flag) {\n      let chroma_scale_w = 1, chroma_scale_h = 1;\n      if (chroma_format_idc === 1) {\n        chroma_scale_w = chroma_scale_h = 2;\n      } else if (chroma_format_idc == 2) {\n        chroma_scale_w = 2;\n      }\n      width = pic_width_in_luma_samples - chroma_scale_w * pic_right_offset - chroma_scale_w * pic_left_offset;\n      height = pic_height_in_luma_samples - chroma_scale_h * pic_bottom_offset - chroma_scale_h * pic_top_offset;\n    }\n    const profile_space_string = general_profile_space ? [\"A\", \"B\", \"C\"][general_profile_space] : \"\";\n    const profile_compatibility_buf = general_profile_compatibility_flags_1 << 24 | general_profile_compatibility_flags_2 << 16 | general_profile_compatibility_flags_3 << 8 | general_profile_compatibility_flags_4;\n    let profile_compatibility_rev = 0;\n    for (let i = 0; i < 32; i++) {\n      profile_compatibility_rev = (profile_compatibility_rev | (profile_compatibility_buf >> i & 1) << 31 - i) >>> 0;\n    }\n    let profile_compatibility_flags_string = profile_compatibility_rev.toString(16);\n    if (general_profile_idc === 1 && profile_compatibility_flags_string === \"2\") {\n      profile_compatibility_flags_string = \"6\";\n    }\n    const tier_flag_string = general_tier_flag ? \"H\" : \"L\";\n    return {\n      codecString: `hvc1.${profile_space_string}${general_profile_idc}.${profile_compatibility_flags_string}.${tier_flag_string}${general_level_idc}.B0`,\n      params: {\n        general_tier_flag,\n        general_profile_idc,\n        general_profile_space,\n        general_profile_compatibility_flags: [general_profile_compatibility_flags_1, general_profile_compatibility_flags_2, general_profile_compatibility_flags_3, general_profile_compatibility_flags_4],\n        general_constraint_indicator_flags: [general_constraint_indicator_flags_1, general_constraint_indicator_flags_2, general_constraint_indicator_flags_3, general_constraint_indicator_flags_4, general_constraint_indicator_flags_5, general_constraint_indicator_flags_6],\n        general_level_idc,\n        bit_depth: bit_depth_luma_minus8 + 8,\n        bit_depth_luma_minus8,\n        bit_depth_chroma_minus8,\n        min_spatial_segmentation_idc,\n        chroma_format_idc,\n        frame_rate: {\n          fixed: fps_fixed,\n          fps: fps_num / fps_den\n        }\n      },\n      width,\n      height,\n      pixelRatio: [sar_width, sar_height]\n    };\n  }\n  readPPS(pps) {\n    const eg = new ExpGolomb(this.ebsp2rbsp(pps));\n    eg.readUByte();\n    eg.readUByte();\n    eg.skipUEG();\n    eg.skipUEG();\n    eg.skipBits(2);\n    eg.skipBits(3);\n    eg.skipBits(2);\n    eg.skipUEG();\n    eg.skipUEG();\n    eg.skipEG();\n    eg.skipBits(2);\n    const cu_qp_delta_enabled_flag = eg.readBoolean();\n    if (cu_qp_delta_enabled_flag) {\n      eg.skipUEG();\n    }\n    eg.skipEG();\n    eg.skipEG();\n    eg.skipBits(4);\n    const tiles_enabled_flag = eg.readBoolean();\n    const entropy_coding_sync_enabled_flag = eg.readBoolean();\n    let parallelismType = 1;\n    if (entropy_coding_sync_enabled_flag && tiles_enabled_flag) {\n      parallelismType = 0;\n    } else if (entropy_coding_sync_enabled_flag) {\n      parallelismType = 3;\n    } else if (tiles_enabled_flag) {\n      parallelismType = 2;\n    }\n    return {\n      parallelismType\n    };\n  }\n  matchSPS(sps1, sps2) {\n    return String.fromCharCode.apply(null, sps1).substr(3) === String.fromCharCode.apply(null, sps2).substr(3);\n  }\n}\nconst PACKET_LENGTH = 188;\nclass TSDemuxer {\n  constructor(observer, config, typeSupported, logger2) {\n    this.logger = void 0;\n    this.observer = void 0;\n    this.config = void 0;\n    this.typeSupported = void 0;\n    this.sampleAes = null;\n    this.pmtParsed = false;\n    this.audioCodec = void 0;\n    this.videoCodec = void 0;\n    this._pmtId = -1;\n    this._videoTrack = void 0;\n    this._audioTrack = void 0;\n    this._id3Track = void 0;\n    this._txtTrack = void 0;\n    this.aacOverFlow = null;\n    this.remainderData = null;\n    this.videoParser = void 0;\n    this.observer = observer;\n    this.config = config;\n    this.typeSupported = typeSupported;\n    this.logger = logger2;\n    this.videoParser = null;\n  }\n  static probe(data, logger2) {\n    const syncOffset = TSDemuxer.syncOffset(data);\n    if (syncOffset > 0) {\n      logger2.warn(`MPEG2-TS detected but first sync word found @ offset ${syncOffset}`);\n    }\n    return syncOffset !== -1;\n  }\n  static syncOffset(data) {\n    const length = data.length;\n    let scanwindow = Math.min(PACKET_LENGTH * 5, length - PACKET_LENGTH) + 1;\n    let i = 0;\n    while (i < scanwindow) {\n      let foundPat = false;\n      let packetStart = -1;\n      let tsPackets = 0;\n      for (let j = i; j < length; j += PACKET_LENGTH) {\n        if (data[j] === 71 && (length - j === PACKET_LENGTH || data[j + PACKET_LENGTH] === 71)) {\n          tsPackets++;\n          if (packetStart === -1) {\n            packetStart = j;\n            if (packetStart !== 0) {\n              scanwindow = Math.min(packetStart + PACKET_LENGTH * 99, data.length - PACKET_LENGTH) + 1;\n            }\n          }\n          if (!foundPat) {\n            foundPat = parsePID(data, j) === 0;\n          }\n          if (foundPat && tsPackets > 1 && (packetStart === 0 && tsPackets > 2 || j + PACKET_LENGTH > scanwindow)) {\n            return packetStart;\n          }\n        } else if (tsPackets) {\n          return -1;\n        } else {\n          break;\n        }\n      }\n      i++;\n    }\n    return -1;\n  }\n  /**\n   * Creates a track model internal to demuxer used to drive remuxing input\n   */\n  static createTrack(type, duration) {\n    return {\n      container: type === \"video\" || type === \"audio\" ? \"video/mp2t\" : void 0,\n      type,\n      id: RemuxerTrackIdConfig[type],\n      pid: -1,\n      inputTimeScale: 9e4,\n      sequenceNumber: 0,\n      samples: [],\n      dropped: 0,\n      duration: type === \"audio\" ? duration : void 0\n    };\n  }\n  /**\n   * Initializes a new init segment on the demuxer/remuxer interface. Needed for discontinuities/track-switches (or at stream start)\n   * Resets all internal track instances of the demuxer.\n   */\n  resetInitSegment(initSegment, audioCodec, videoCodec, trackDuration) {\n    this.pmtParsed = false;\n    this._pmtId = -1;\n    this._videoTrack = TSDemuxer.createTrack(\"video\");\n    this._videoTrack.duration = trackDuration;\n    this._audioTrack = TSDemuxer.createTrack(\"audio\", trackDuration);\n    this._id3Track = TSDemuxer.createTrack(\"id3\");\n    this._txtTrack = TSDemuxer.createTrack(\"text\");\n    this._audioTrack.segmentCodec = \"aac\";\n    this.aacOverFlow = null;\n    this.remainderData = null;\n    this.audioCodec = audioCodec;\n    this.videoCodec = videoCodec;\n  }\n  resetTimeStamp() {\n  }\n  resetContiguity() {\n    const {\n      _audioTrack,\n      _videoTrack,\n      _id3Track\n    } = this;\n    if (_audioTrack) {\n      _audioTrack.pesData = null;\n    }\n    if (_videoTrack) {\n      _videoTrack.pesData = null;\n    }\n    if (_id3Track) {\n      _id3Track.pesData = null;\n    }\n    this.aacOverFlow = null;\n    this.remainderData = null;\n  }\n  demux(data, timeOffset, isSampleAes = false, flush = false) {\n    if (!isSampleAes) {\n      this.sampleAes = null;\n    }\n    let pes;\n    const videoTrack = this._videoTrack;\n    const audioTrack = this._audioTrack;\n    const id3Track = this._id3Track;\n    const textTrack = this._txtTrack;\n    let videoPid = videoTrack.pid;\n    let videoData = videoTrack.pesData;\n    let audioPid = audioTrack.pid;\n    let id3Pid = id3Track.pid;\n    let audioData = audioTrack.pesData;\n    let id3Data = id3Track.pesData;\n    let unknownPID = null;\n    let pmtParsed = this.pmtParsed;\n    let pmtId = this._pmtId;\n    let len = data.length;\n    if (this.remainderData) {\n      data = appendUint8Array(this.remainderData, data);\n      len = data.length;\n      this.remainderData = null;\n    }\n    if (len < PACKET_LENGTH && !flush) {\n      this.remainderData = data;\n      return {\n        audioTrack,\n        videoTrack,\n        id3Track,\n        textTrack\n      };\n    }\n    const syncOffset = Math.max(0, TSDemuxer.syncOffset(data));\n    len -= (len - syncOffset) % PACKET_LENGTH;\n    if (len < data.byteLength && !flush) {\n      this.remainderData = new Uint8Array(data.buffer, len, data.buffer.byteLength - len);\n    }\n    let tsPacketErrors = 0;\n    for (let start = syncOffset; start < len; start += PACKET_LENGTH) {\n      if (data[start] === 71) {\n        const stt = !!(data[start + 1] & 64);\n        const pid = parsePID(data, start);\n        const atf = (data[start + 3] & 48) >> 4;\n        let offset;\n        if (atf > 1) {\n          offset = start + 5 + data[start + 4];\n          if (offset === start + PACKET_LENGTH) {\n            continue;\n          }\n        } else {\n          offset = start + 4;\n        }\n        switch (pid) {\n          case videoPid:\n            if (stt) {\n              if (videoData && (pes = parsePES(videoData, this.logger))) {\n                if (this.videoParser === null) {\n                  switch (videoTrack.segmentCodec) {\n                    case \"avc\":\n                      this.videoParser = new AvcVideoParser();\n                      break;\n                    case \"hevc\":\n                      {\n                        this.videoParser = new HevcVideoParser();\n                      }\n                      break;\n                  }\n                }\n                if (this.videoParser !== null) {\n                  this.videoParser.parsePES(videoTrack, textTrack, pes, false);\n                }\n              }\n              videoData = {\n                data: [],\n                size: 0\n              };\n            }\n            if (videoData) {\n              videoData.data.push(data.subarray(offset, start + PACKET_LENGTH));\n              videoData.size += start + PACKET_LENGTH - offset;\n            }\n            break;\n          case audioPid:\n            if (stt) {\n              if (audioData && (pes = parsePES(audioData, this.logger))) {\n                switch (audioTrack.segmentCodec) {\n                  case \"aac\":\n                    this.parseAACPES(audioTrack, pes);\n                    break;\n                  case \"mp3\":\n                    this.parseMPEGPES(audioTrack, pes);\n                    break;\n                  case \"ac3\":\n                    {\n                      this.parseAC3PES(audioTrack, pes);\n                    }\n                    break;\n                }\n              }\n              audioData = {\n                data: [],\n                size: 0\n              };\n            }\n            if (audioData) {\n              audioData.data.push(data.subarray(offset, start + PACKET_LENGTH));\n              audioData.size += start + PACKET_LENGTH - offset;\n            }\n            break;\n          case id3Pid:\n            if (stt) {\n              if (id3Data && (pes = parsePES(id3Data, this.logger))) {\n                this.parseID3PES(id3Track, pes);\n              }\n              id3Data = {\n                data: [],\n                size: 0\n              };\n            }\n            if (id3Data) {\n              id3Data.data.push(data.subarray(offset, start + PACKET_LENGTH));\n              id3Data.size += start + PACKET_LENGTH - offset;\n            }\n            break;\n          case 0:\n            if (stt) {\n              offset += data[offset] + 1;\n            }\n            pmtId = this._pmtId = parsePAT(data, offset);\n            break;\n          case pmtId: {\n            if (stt) {\n              offset += data[offset] + 1;\n            }\n            const parsedPIDs = parsePMT(data, offset, this.typeSupported, isSampleAes, this.observer, this.logger);\n            videoPid = parsedPIDs.videoPid;\n            if (videoPid > 0) {\n              videoTrack.pid = videoPid;\n              videoTrack.segmentCodec = parsedPIDs.segmentVideoCodec;\n            }\n            audioPid = parsedPIDs.audioPid;\n            if (audioPid > 0) {\n              audioTrack.pid = audioPid;\n              audioTrack.segmentCodec = parsedPIDs.segmentAudioCodec;\n            }\n            id3Pid = parsedPIDs.id3Pid;\n            if (id3Pid > 0) {\n              id3Track.pid = id3Pid;\n            }\n            if (unknownPID !== null && !pmtParsed) {\n              this.logger.warn(`MPEG-TS PMT found at ${start} after unknown PID '${unknownPID}'. Backtracking to sync byte @${syncOffset} to parse all TS packets.`);\n              unknownPID = null;\n              start = syncOffset - 188;\n            }\n            pmtParsed = this.pmtParsed = true;\n            break;\n          }\n          case 17:\n          case 8191:\n            break;\n          default:\n            unknownPID = pid;\n            break;\n        }\n      } else {\n        tsPacketErrors++;\n      }\n    }\n    if (tsPacketErrors > 0) {\n      emitParsingError(this.observer, new Error(`Found ${tsPacketErrors} TS packet/s that do not start with 0x47`), void 0, this.logger);\n    }\n    videoTrack.pesData = videoData;\n    audioTrack.pesData = audioData;\n    id3Track.pesData = id3Data;\n    const demuxResult = {\n      audioTrack,\n      videoTrack,\n      id3Track,\n      textTrack\n    };\n    if (flush) {\n      this.extractRemainingSamples(demuxResult);\n    }\n    return demuxResult;\n  }\n  flush() {\n    const {\n      remainderData\n    } = this;\n    this.remainderData = null;\n    let result;\n    if (remainderData) {\n      result = this.demux(remainderData, -1, false, true);\n    } else {\n      result = {\n        videoTrack: this._videoTrack,\n        audioTrack: this._audioTrack,\n        id3Track: this._id3Track,\n        textTrack: this._txtTrack\n      };\n    }\n    this.extractRemainingSamples(result);\n    if (this.sampleAes) {\n      return this.decrypt(result, this.sampleAes);\n    }\n    return result;\n  }\n  extractRemainingSamples(demuxResult) {\n    const {\n      audioTrack,\n      videoTrack,\n      id3Track,\n      textTrack\n    } = demuxResult;\n    const videoData = videoTrack.pesData;\n    const audioData = audioTrack.pesData;\n    const id3Data = id3Track.pesData;\n    let pes;\n    if (videoData && (pes = parsePES(videoData, this.logger))) {\n      if (this.videoParser === null) {\n        switch (videoTrack.segmentCodec) {\n          case \"avc\":\n            this.videoParser = new AvcVideoParser();\n            break;\n          case \"hevc\":\n            {\n              this.videoParser = new HevcVideoParser();\n            }\n            break;\n        }\n      }\n      if (this.videoParser !== null) {\n        this.videoParser.parsePES(videoTrack, textTrack, pes, true);\n        videoTrack.pesData = null;\n      }\n    } else {\n      videoTrack.pesData = videoData;\n    }\n    if (audioData && (pes = parsePES(audioData, this.logger))) {\n      switch (audioTrack.segmentCodec) {\n        case \"aac\":\n          this.parseAACPES(audioTrack, pes);\n          break;\n        case \"mp3\":\n          this.parseMPEGPES(audioTrack, pes);\n          break;\n        case \"ac3\":\n          {\n            this.parseAC3PES(audioTrack, pes);\n          }\n          break;\n      }\n      audioTrack.pesData = null;\n    } else {\n      if (audioData != null && audioData.size) {\n        this.logger.log(\"last AAC PES packet truncated,might overlap between fragments\");\n      }\n      audioTrack.pesData = audioData;\n    }\n    if (id3Data && (pes = parsePES(id3Data, this.logger))) {\n      this.parseID3PES(id3Track, pes);\n      id3Track.pesData = null;\n    } else {\n      id3Track.pesData = id3Data;\n    }\n  }\n  demuxSampleAes(data, keyData, timeOffset) {\n    const demuxResult = this.demux(data, timeOffset, true, !this.config.progressive);\n    const sampleAes = this.sampleAes = new SampleAesDecrypter(this.observer, this.config, keyData);\n    return this.decrypt(demuxResult, sampleAes);\n  }\n  decrypt(demuxResult, sampleAes) {\n    return new Promise((resolve) => {\n      const {\n        audioTrack,\n        videoTrack\n      } = demuxResult;\n      if (audioTrack.samples && audioTrack.segmentCodec === \"aac\") {\n        sampleAes.decryptAacSamples(audioTrack.samples, 0, () => {\n          if (videoTrack.samples) {\n            sampleAes.decryptAvcSamples(videoTrack.samples, 0, 0, () => {\n              resolve(demuxResult);\n            });\n          } else {\n            resolve(demuxResult);\n          }\n        });\n      } else if (videoTrack.samples) {\n        sampleAes.decryptAvcSamples(videoTrack.samples, 0, 0, () => {\n          resolve(demuxResult);\n        });\n      }\n    });\n  }\n  destroy() {\n    if (this.observer) {\n      this.observer.removeAllListeners();\n    }\n    this.config = this.logger = this.observer = null;\n    this.aacOverFlow = this.videoParser = this.remainderData = this.sampleAes = null;\n    this._videoTrack = this._audioTrack = this._id3Track = this._txtTrack = void 0;\n  }\n  parseAACPES(track, pes) {\n    let startOffset = 0;\n    const aacOverFlow = this.aacOverFlow;\n    let data = pes.data;\n    if (aacOverFlow) {\n      this.aacOverFlow = null;\n      const frameMissingBytes = aacOverFlow.missing;\n      const sampleLength = aacOverFlow.sample.unit.byteLength;\n      if (frameMissingBytes === -1) {\n        data = appendUint8Array(aacOverFlow.sample.unit, data);\n      } else {\n        const frameOverflowBytes = sampleLength - frameMissingBytes;\n        aacOverFlow.sample.unit.set(data.subarray(0, frameMissingBytes), frameOverflowBytes);\n        track.samples.push(aacOverFlow.sample);\n        startOffset = aacOverFlow.missing;\n      }\n    }\n    let offset;\n    let len;\n    for (offset = startOffset, len = data.length; offset < len - 1; offset++) {\n      if (isHeader$1(data, offset)) {\n        break;\n      }\n    }\n    if (offset !== startOffset) {\n      let reason;\n      const recoverable = offset < len - 1;\n      if (recoverable) {\n        reason = `AAC PES did not start with ADTS header,offset:${offset}`;\n      } else {\n        reason = \"No ADTS header found in AAC PES\";\n      }\n      emitParsingError(this.observer, new Error(reason), recoverable, this.logger);\n      if (!recoverable) {\n        return;\n      }\n    }\n    initTrackConfig(track, this.observer, data, offset, this.audioCodec);\n    let pts;\n    if (pes.pts !== void 0) {\n      pts = pes.pts;\n    } else if (aacOverFlow) {\n      const frameDuration = getFrameDuration(track.samplerate);\n      pts = aacOverFlow.sample.pts + frameDuration;\n    } else {\n      this.logger.warn(\"[tsdemuxer]: AAC PES unknown PTS\");\n      return;\n    }\n    let frameIndex = 0;\n    let frame;\n    while (offset < len) {\n      frame = appendFrame$2(track, data, offset, pts, frameIndex);\n      offset += frame.length;\n      if (!frame.missing) {\n        frameIndex++;\n        for (; offset < len - 1; offset++) {\n          if (isHeader$1(data, offset)) {\n            break;\n          }\n        }\n      } else {\n        this.aacOverFlow = frame;\n        break;\n      }\n    }\n  }\n  parseMPEGPES(track, pes) {\n    const data = pes.data;\n    const length = data.length;\n    let frameIndex = 0;\n    let offset = 0;\n    const pts = pes.pts;\n    if (pts === void 0) {\n      this.logger.warn(\"[tsdemuxer]: MPEG PES unknown PTS\");\n      return;\n    }\n    while (offset < length) {\n      if (isHeader(data, offset)) {\n        const frame = appendFrame$1(track, data, offset, pts, frameIndex);\n        if (frame) {\n          offset += frame.length;\n          frameIndex++;\n        } else {\n          break;\n        }\n      } else {\n        offset++;\n      }\n    }\n  }\n  parseAC3PES(track, pes) {\n    {\n      const data = pes.data;\n      const pts = pes.pts;\n      if (pts === void 0) {\n        this.logger.warn(\"[tsdemuxer]: AC3 PES unknown PTS\");\n        return;\n      }\n      const length = data.length;\n      let frameIndex = 0;\n      let offset = 0;\n      let parsed;\n      while (offset < length && (parsed = appendFrame(track, data, offset, pts, frameIndex++)) > 0) {\n        offset += parsed;\n      }\n    }\n  }\n  parseID3PES(id3Track, pes) {\n    if (pes.pts === void 0) {\n      this.logger.warn(\"[tsdemuxer]: ID3 PES unknown PTS\");\n      return;\n    }\n    const id3Sample = _extends({}, pes, {\n      type: this._videoTrack ? MetadataSchema.emsg : MetadataSchema.audioId3,\n      duration: Number.POSITIVE_INFINITY\n    });\n    id3Track.samples.push(id3Sample);\n  }\n}\nfunction parsePID(data, offset) {\n  return ((data[offset + 1] & 31) << 8) + data[offset + 2];\n}\nfunction parsePAT(data, offset) {\n  return (data[offset + 10] & 31) << 8 | data[offset + 11];\n}\nfunction parsePMT(data, offset, typeSupported, isSampleAes, observer, logger2) {\n  const result = {\n    audioPid: -1,\n    videoPid: -1,\n    id3Pid: -1,\n    segmentVideoCodec: \"avc\",\n    segmentAudioCodec: \"aac\"\n  };\n  const sectionLength = (data[offset + 1] & 15) << 8 | data[offset + 2];\n  const tableEnd = offset + 3 + sectionLength - 4;\n  const programInfoLength = (data[offset + 10] & 15) << 8 | data[offset + 11];\n  offset += 12 + programInfoLength;\n  while (offset < tableEnd) {\n    const pid = parsePID(data, offset);\n    const esInfoLength = (data[offset + 3] & 15) << 8 | data[offset + 4];\n    switch (data[offset]) {\n      case 207:\n        if (!isSampleAes) {\n          logEncryptedSamplesFoundInUnencryptedStream(\"ADTS AAC\", logger2);\n          break;\n        }\n      /* falls through */\n      case 15:\n        if (result.audioPid === -1) {\n          result.audioPid = pid;\n        }\n        break;\n      // Packetized metadata (ID3)\n      case 21:\n        if (result.id3Pid === -1) {\n          result.id3Pid = pid;\n        }\n        break;\n      case 219:\n        if (!isSampleAes) {\n          logEncryptedSamplesFoundInUnencryptedStream(\"H.264\", logger2);\n          break;\n        }\n      /* falls through */\n      case 27:\n        if (result.videoPid === -1) {\n          result.videoPid = pid;\n        }\n        break;\n      // ISO/IEC 11172-3 (MPEG-1 audio)\n      // or ISO/IEC 13818-3 (MPEG-2 halved sample rate audio)\n      case 3:\n      case 4:\n        if (!typeSupported.mpeg && !typeSupported.mp3) {\n          logger2.log(\"MPEG audio found, not supported in this browser\");\n        } else if (result.audioPid === -1) {\n          result.audioPid = pid;\n          result.segmentAudioCodec = \"mp3\";\n        }\n        break;\n      case 193:\n        if (!isSampleAes) {\n          logEncryptedSamplesFoundInUnencryptedStream(\"AC-3\", logger2);\n          break;\n        }\n      /* falls through */\n      case 129:\n        {\n          if (!typeSupported.ac3) {\n            logger2.log(\"AC-3 audio found, not supported in this browser\");\n          } else if (result.audioPid === -1) {\n            result.audioPid = pid;\n            result.segmentAudioCodec = \"ac3\";\n          }\n        }\n        break;\n      case 6:\n        if (result.audioPid === -1 && esInfoLength > 0) {\n          let parsePos = offset + 5;\n          let remaining = esInfoLength;\n          while (remaining > 2) {\n            const descriptorId = data[parsePos];\n            switch (descriptorId) {\n              case 106:\n                {\n                  if (typeSupported.ac3 !== true) {\n                    logger2.log(\"AC-3 audio found, not supported in this browser for now\");\n                  } else {\n                    result.audioPid = pid;\n                    result.segmentAudioCodec = \"ac3\";\n                  }\n                }\n                break;\n            }\n            const descriptorLen = data[parsePos + 1] + 2;\n            parsePos += descriptorLen;\n            remaining -= descriptorLen;\n          }\n        }\n        break;\n      case 194:\n      // SAMPLE-AES EC3\n      /* falls through */\n      case 135:\n        emitParsingError(observer, new Error(\"Unsupported EC-3 in M2TS found\"), void 0, logger2);\n        return result;\n      case 36:\n        {\n          if (result.videoPid === -1) {\n            result.videoPid = pid;\n            result.segmentVideoCodec = \"hevc\";\n            logger2.log(\"HEVC in M2TS found\");\n          }\n        }\n        break;\n    }\n    offset += esInfoLength + 5;\n  }\n  return result;\n}\nfunction emitParsingError(observer, error, levelRetry, logger2) {\n  logger2.warn(`parsing error: ${error.message}`);\n  observer.emit(Events.ERROR, Events.ERROR, {\n    type: ErrorTypes.MEDIA_ERROR,\n    details: ErrorDetails.FRAG_PARSING_ERROR,\n    fatal: false,\n    levelRetry,\n    error,\n    reason: error.message\n  });\n}\nfunction logEncryptedSamplesFoundInUnencryptedStream(type, logger2) {\n  logger2.log(`${type} with AES-128-CBC encryption found in unencrypted stream`);\n}\nfunction parsePES(stream, logger2) {\n  let i = 0;\n  let frag;\n  let pesLen;\n  let pesHdrLen;\n  let pesPts;\n  let pesDts;\n  const data = stream.data;\n  if (!stream || stream.size === 0) {\n    return null;\n  }\n  while (data[0].length < 19 && data.length > 1) {\n    data[0] = appendUint8Array(data[0], data[1]);\n    data.splice(1, 1);\n  }\n  frag = data[0];\n  const pesPrefix = (frag[0] << 16) + (frag[1] << 8) + frag[2];\n  if (pesPrefix === 1) {\n    pesLen = (frag[4] << 8) + frag[5];\n    if (pesLen && pesLen > stream.size - 6) {\n      return null;\n    }\n    const pesFlags = frag[7];\n    if (pesFlags & 192) {\n      pesPts = (frag[9] & 14) * 536870912 + // 1 << 29\n      (frag[10] & 255) * 4194304 + // 1 << 22\n      (frag[11] & 254) * 16384 + // 1 << 14\n      (frag[12] & 255) * 128 + // 1 << 7\n      (frag[13] & 254) / 2;\n      if (pesFlags & 64) {\n        pesDts = (frag[14] & 14) * 536870912 + // 1 << 29\n        (frag[15] & 255) * 4194304 + // 1 << 22\n        (frag[16] & 254) * 16384 + // 1 << 14\n        (frag[17] & 255) * 128 + // 1 << 7\n        (frag[18] & 254) / 2;\n        if (pesPts - pesDts > 60 * 9e4) {\n          logger2.warn(`${Math.round((pesPts - pesDts) / 9e4)}s delta between PTS and DTS, align them`);\n          pesPts = pesDts;\n        }\n      } else {\n        pesDts = pesPts;\n      }\n    }\n    pesHdrLen = frag[8];\n    let payloadStartOffset = pesHdrLen + 9;\n    if (stream.size <= payloadStartOffset) {\n      return null;\n    }\n    stream.size -= payloadStartOffset;\n    const pesData = new Uint8Array(stream.size);\n    for (let j = 0, dataLen = data.length; j < dataLen; j++) {\n      frag = data[j];\n      let len = frag.byteLength;\n      if (payloadStartOffset) {\n        if (payloadStartOffset > len) {\n          payloadStartOffset -= len;\n          continue;\n        } else {\n          frag = frag.subarray(payloadStartOffset);\n          len -= payloadStartOffset;\n          payloadStartOffset = 0;\n        }\n      }\n      pesData.set(frag, i);\n      i += len;\n    }\n    if (pesLen) {\n      pesLen -= pesHdrLen + 3;\n    }\n    return {\n      data: pesData,\n      pts: pesPts,\n      dts: pesDts,\n      len: pesLen\n    };\n  }\n  return null;\n}\nclass AAC {\n  static getSilentFrame(codec, channelCount) {\n    switch (codec) {\n      case \"mp4a.40.2\":\n        if (channelCount === 1) {\n          return new Uint8Array([0, 200, 0, 128, 35, 128]);\n        } else if (channelCount === 2) {\n          return new Uint8Array([33, 0, 73, 144, 2, 25, 0, 35, 128]);\n        } else if (channelCount === 3) {\n          return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 142]);\n        } else if (channelCount === 4) {\n          return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 128, 44, 128, 8, 2, 56]);\n        } else if (channelCount === 5) {\n          return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 56]);\n        } else if (channelCount === 6) {\n          return new Uint8Array([0, 200, 0, 128, 32, 132, 1, 38, 64, 8, 100, 0, 130, 48, 4, 153, 0, 33, 144, 2, 0, 178, 0, 32, 8, 224]);\n        }\n        break;\n      // handle HE-AAC below (mp4a.40.5 / mp4a.40.29)\n      default:\n        if (channelCount === 1) {\n          return new Uint8Array([1, 64, 34, 128, 163, 78, 230, 128, 186, 8, 0, 0, 0, 28, 6, 241, 193, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);\n        } else if (channelCount === 2) {\n          return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);\n        } else if (channelCount === 3) {\n          return new Uint8Array([1, 64, 34, 128, 163, 94, 230, 128, 186, 8, 0, 0, 0, 0, 149, 0, 6, 241, 161, 10, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 94]);\n        }\n        break;\n    }\n    return void 0;\n  }\n}\nconst UINT32_MAX = Math.pow(2, 32) - 1;\nclass MP4 {\n  static init() {\n    MP4.types = {\n      avc1: [],\n      // codingname\n      avcC: [],\n      hvc1: [],\n      hvcC: [],\n      btrt: [],\n      dinf: [],\n      dref: [],\n      esds: [],\n      ftyp: [],\n      hdlr: [],\n      mdat: [],\n      mdhd: [],\n      mdia: [],\n      mfhd: [],\n      minf: [],\n      moof: [],\n      moov: [],\n      mp4a: [],\n      \".mp3\": [],\n      dac3: [],\n      \"ac-3\": [],\n      mvex: [],\n      mvhd: [],\n      pasp: [],\n      sdtp: [],\n      stbl: [],\n      stco: [],\n      stsc: [],\n      stsd: [],\n      stsz: [],\n      stts: [],\n      tfdt: [],\n      tfhd: [],\n      traf: [],\n      trak: [],\n      trun: [],\n      trex: [],\n      tkhd: [],\n      vmhd: [],\n      smhd: []\n    };\n    let i;\n    for (i in MP4.types) {\n      if (MP4.types.hasOwnProperty(i)) {\n        MP4.types[i] = [i.charCodeAt(0), i.charCodeAt(1), i.charCodeAt(2), i.charCodeAt(3)];\n      }\n    }\n    const videoHdlr = new Uint8Array([\n      0,\n      // version 0\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      0,\n      0,\n      // pre_defined\n      118,\n      105,\n      100,\n      101,\n      // handler_type: 'vide'\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      86,\n      105,\n      100,\n      101,\n      111,\n      72,\n      97,\n      110,\n      100,\n      108,\n      101,\n      114,\n      0\n      // name: 'VideoHandler'\n    ]);\n    const audioHdlr = new Uint8Array([\n      0,\n      // version 0\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      0,\n      0,\n      // pre_defined\n      115,\n      111,\n      117,\n      110,\n      // handler_type: 'soun'\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      83,\n      111,\n      117,\n      110,\n      100,\n      72,\n      97,\n      110,\n      100,\n      108,\n      101,\n      114,\n      0\n      // name: 'SoundHandler'\n    ]);\n    MP4.HDLR_TYPES = {\n      video: videoHdlr,\n      audio: audioHdlr\n    };\n    const dref = new Uint8Array([\n      0,\n      // version 0\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      0,\n      1,\n      // entry_count\n      0,\n      0,\n      0,\n      12,\n      // entry_size\n      117,\n      114,\n      108,\n      32,\n      // 'url' type\n      0,\n      // version 0\n      0,\n      0,\n      1\n      // entry_flags\n    ]);\n    const stco = new Uint8Array([\n      0,\n      // version\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      0,\n      0\n      // entry_count\n    ]);\n    MP4.STTS = MP4.STSC = MP4.STCO = stco;\n    MP4.STSZ = new Uint8Array([\n      0,\n      // version\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      0,\n      0,\n      // sample_size\n      0,\n      0,\n      0,\n      0\n      // sample_count\n    ]);\n    MP4.VMHD = new Uint8Array([\n      0,\n      // version\n      0,\n      0,\n      1,\n      // flags\n      0,\n      0,\n      // graphicsmode\n      0,\n      0,\n      0,\n      0,\n      0,\n      0\n      // opcolor\n    ]);\n    MP4.SMHD = new Uint8Array([\n      0,\n      // version\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      // balance\n      0,\n      0\n      // reserved\n    ]);\n    MP4.STSD = new Uint8Array([\n      0,\n      // version 0\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      0,\n      1\n    ]);\n    const majorBrand = new Uint8Array([105, 115, 111, 109]);\n    const avc1Brand = new Uint8Array([97, 118, 99, 49]);\n    const minorVersion = new Uint8Array([0, 0, 0, 1]);\n    MP4.FTYP = MP4.box(MP4.types.ftyp, majorBrand, minorVersion, majorBrand, avc1Brand);\n    MP4.DINF = MP4.box(MP4.types.dinf, MP4.box(MP4.types.dref, dref));\n  }\n  static box(type, ...payload) {\n    let size = 8;\n    let i = payload.length;\n    const len = i;\n    while (i--) {\n      size += payload[i].byteLength;\n    }\n    const result = new Uint8Array(size);\n    result[0] = size >> 24 & 255;\n    result[1] = size >> 16 & 255;\n    result[2] = size >> 8 & 255;\n    result[3] = size & 255;\n    result.set(type, 4);\n    for (i = 0, size = 8; i < len; i++) {\n      result.set(payload[i], size);\n      size += payload[i].byteLength;\n    }\n    return result;\n  }\n  static hdlr(type) {\n    return MP4.box(MP4.types.hdlr, MP4.HDLR_TYPES[type]);\n  }\n  static mdat(data) {\n    return MP4.box(MP4.types.mdat, data);\n  }\n  static mdhd(timescale, duration) {\n    duration *= timescale;\n    const upperWordDuration = Math.floor(duration / (UINT32_MAX + 1));\n    const lowerWordDuration = Math.floor(duration % (UINT32_MAX + 1));\n    return MP4.box(MP4.types.mdhd, new Uint8Array([\n      1,\n      // version 1\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      // creation_time\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      3,\n      // modification_time\n      timescale >> 24 & 255,\n      timescale >> 16 & 255,\n      timescale >> 8 & 255,\n      timescale & 255,\n      // timescale\n      upperWordDuration >> 24,\n      upperWordDuration >> 16 & 255,\n      upperWordDuration >> 8 & 255,\n      upperWordDuration & 255,\n      lowerWordDuration >> 24,\n      lowerWordDuration >> 16 & 255,\n      lowerWordDuration >> 8 & 255,\n      lowerWordDuration & 255,\n      85,\n      196,\n      // 'und' language (undetermined)\n      0,\n      0\n    ]));\n  }\n  static mdia(track) {\n    return MP4.box(MP4.types.mdia, MP4.mdhd(track.timescale || 0, track.duration || 0), MP4.hdlr(track.type), MP4.minf(track));\n  }\n  static mfhd(sequenceNumber) {\n    return MP4.box(MP4.types.mfhd, new Uint8Array([\n      0,\n      0,\n      0,\n      0,\n      // flags\n      sequenceNumber >> 24,\n      sequenceNumber >> 16 & 255,\n      sequenceNumber >> 8 & 255,\n      sequenceNumber & 255\n      // sequence_number\n    ]));\n  }\n  static minf(track) {\n    if (track.type === \"audio\") {\n      return MP4.box(MP4.types.minf, MP4.box(MP4.types.smhd, MP4.SMHD), MP4.DINF, MP4.stbl(track));\n    } else {\n      return MP4.box(MP4.types.minf, MP4.box(MP4.types.vmhd, MP4.VMHD), MP4.DINF, MP4.stbl(track));\n    }\n  }\n  static moof(sn, baseMediaDecodeTime, track) {\n    return MP4.box(MP4.types.moof, MP4.mfhd(sn), MP4.traf(track, baseMediaDecodeTime));\n  }\n  static moov(tracks) {\n    let i = tracks.length;\n    const boxes = [];\n    while (i--) {\n      boxes[i] = MP4.trak(tracks[i]);\n    }\n    return MP4.box.apply(null, [MP4.types.moov, MP4.mvhd(tracks[0].timescale || 0, tracks[0].duration || 0)].concat(boxes).concat(MP4.mvex(tracks)));\n  }\n  static mvex(tracks) {\n    let i = tracks.length;\n    const boxes = [];\n    while (i--) {\n      boxes[i] = MP4.trex(tracks[i]);\n    }\n    return MP4.box.apply(null, [MP4.types.mvex, ...boxes]);\n  }\n  static mvhd(timescale, duration) {\n    duration *= timescale;\n    const upperWordDuration = Math.floor(duration / (UINT32_MAX + 1));\n    const lowerWordDuration = Math.floor(duration % (UINT32_MAX + 1));\n    const bytes2 = new Uint8Array([\n      1,\n      // version 1\n      0,\n      0,\n      0,\n      // flags\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      // creation_time\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      3,\n      // modification_time\n      timescale >> 24 & 255,\n      timescale >> 16 & 255,\n      timescale >> 8 & 255,\n      timescale & 255,\n      // timescale\n      upperWordDuration >> 24,\n      upperWordDuration >> 16 & 255,\n      upperWordDuration >> 8 & 255,\n      upperWordDuration & 255,\n      lowerWordDuration >> 24,\n      lowerWordDuration >> 16 & 255,\n      lowerWordDuration >> 8 & 255,\n      lowerWordDuration & 255,\n      0,\n      1,\n      0,\n      0,\n      // 1.0 rate\n      1,\n      0,\n      // 1.0 volume\n      0,\n      0,\n      // reserved\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      64,\n      0,\n      0,\n      0,\n      // transformation: unity matrix\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      // pre_defined\n      255,\n      255,\n      255,\n      255\n      // next_track_ID\n    ]);\n    return MP4.box(MP4.types.mvhd, bytes2);\n  }\n  static sdtp(track) {\n    const samples = track.samples || [];\n    const bytes2 = new Uint8Array(4 + samples.length);\n    let i;\n    let flags;\n    for (i = 0; i < samples.length; i++) {\n      flags = samples[i].flags;\n      bytes2[i + 4] = flags.dependsOn << 4 | flags.isDependedOn << 2 | flags.hasRedundancy;\n    }\n    return MP4.box(MP4.types.sdtp, bytes2);\n  }\n  static stbl(track) {\n    return MP4.box(MP4.types.stbl, MP4.stsd(track), MP4.box(MP4.types.stts, MP4.STTS), MP4.box(MP4.types.stsc, MP4.STSC), MP4.box(MP4.types.stsz, MP4.STSZ), MP4.box(MP4.types.stco, MP4.STCO));\n  }\n  static avc1(track) {\n    let sps = [];\n    let pps = [];\n    let i;\n    let data;\n    let len;\n    for (i = 0; i < track.sps.length; i++) {\n      data = track.sps[i];\n      len = data.byteLength;\n      sps.push(len >>> 8 & 255);\n      sps.push(len & 255);\n      sps = sps.concat(Array.prototype.slice.call(data));\n    }\n    for (i = 0; i < track.pps.length; i++) {\n      data = track.pps[i];\n      len = data.byteLength;\n      pps.push(len >>> 8 & 255);\n      pps.push(len & 255);\n      pps = pps.concat(Array.prototype.slice.call(data));\n    }\n    const avcc = MP4.box(MP4.types.avcC, new Uint8Array([\n      1,\n      // version\n      sps[3],\n      // profile\n      sps[4],\n      // profile compat\n      sps[5],\n      // level\n      252 | 3,\n      // lengthSizeMinusOne, hard-coded to 4 bytes\n      224 | track.sps.length\n      // 3bit reserved (111) + numOfSequenceParameterSets\n    ].concat(sps).concat([\n      track.pps.length\n      // numOfPictureParameterSets\n    ]).concat(pps)));\n    const width = track.width;\n    const height = track.height;\n    const hSpacing = track.pixelRatio[0];\n    const vSpacing = track.pixelRatio[1];\n    return MP4.box(\n      MP4.types.avc1,\n      new Uint8Array([\n        0,\n        0,\n        0,\n        // reserved\n        0,\n        0,\n        0,\n        // reserved\n        0,\n        1,\n        // data_reference_index\n        0,\n        0,\n        // pre_defined\n        0,\n        0,\n        // reserved\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        // pre_defined\n        width >> 8 & 255,\n        width & 255,\n        // width\n        height >> 8 & 255,\n        height & 255,\n        // height\n        0,\n        72,\n        0,\n        0,\n        // horizresolution\n        0,\n        72,\n        0,\n        0,\n        // vertresolution\n        0,\n        0,\n        0,\n        0,\n        // reserved\n        0,\n        1,\n        // frame_count\n        18,\n        100,\n        97,\n        105,\n        108,\n        // dailymotion/hls.js\n        121,\n        109,\n        111,\n        116,\n        105,\n        111,\n        110,\n        47,\n        104,\n        108,\n        115,\n        46,\n        106,\n        115,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        // compressorname\n        0,\n        24,\n        // depth = 24\n        17,\n        17\n      ]),\n      // pre_defined = -1\n      avcc,\n      MP4.box(MP4.types.btrt, new Uint8Array([\n        0,\n        28,\n        156,\n        128,\n        // bufferSizeDB\n        0,\n        45,\n        198,\n        192,\n        // maxBitrate\n        0,\n        45,\n        198,\n        192\n      ])),\n      // avgBitrate\n      MP4.box(MP4.types.pasp, new Uint8Array([\n        hSpacing >> 24,\n        // hSpacing\n        hSpacing >> 16 & 255,\n        hSpacing >> 8 & 255,\n        hSpacing & 255,\n        vSpacing >> 24,\n        // vSpacing\n        vSpacing >> 16 & 255,\n        vSpacing >> 8 & 255,\n        vSpacing & 255\n      ]))\n    );\n  }\n  static esds(track) {\n    const config = track.config;\n    return new Uint8Array([\n      0,\n      // version 0\n      0,\n      0,\n      0,\n      // flags\n      3,\n      // descriptor_type\n      25,\n      // length\n      0,\n      1,\n      // es_id\n      0,\n      // stream_priority\n      4,\n      // descriptor_type\n      17,\n      // length\n      64,\n      // codec : mpeg4_audio\n      21,\n      // stream_type\n      0,\n      0,\n      0,\n      // buffer_size\n      0,\n      0,\n      0,\n      0,\n      // maxBitrate\n      0,\n      0,\n      0,\n      0,\n      // avgBitrate\n      5,\n      // descriptor_type\n      2,\n      // length\n      ...config,\n      6,\n      1,\n      2\n      // GASpecificConfig)); // length + audio config descriptor\n    ]);\n  }\n  static audioStsd(track) {\n    const samplerate = track.samplerate || 0;\n    return new Uint8Array([\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      1,\n      // data_reference_index\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      track.channelCount || 0,\n      // channelcount\n      0,\n      16,\n      // sampleSize:16bits\n      0,\n      0,\n      0,\n      0,\n      // reserved2\n      samplerate >> 8 & 255,\n      samplerate & 255,\n      //\n      0,\n      0\n    ]);\n  }\n  static mp4a(track) {\n    return MP4.box(MP4.types.mp4a, MP4.audioStsd(track), MP4.box(MP4.types.esds, MP4.esds(track)));\n  }\n  static mp3(track) {\n    return MP4.box(MP4.types[\".mp3\"], MP4.audioStsd(track));\n  }\n  static ac3(track) {\n    return MP4.box(MP4.types[\"ac-3\"], MP4.audioStsd(track), MP4.box(MP4.types.dac3, track.config));\n  }\n  static stsd(track) {\n    const {\n      segmentCodec\n    } = track;\n    if (track.type === \"audio\") {\n      if (segmentCodec === \"aac\") {\n        return MP4.box(MP4.types.stsd, MP4.STSD, MP4.mp4a(track));\n      }\n      if (segmentCodec === \"ac3\" && track.config) {\n        return MP4.box(MP4.types.stsd, MP4.STSD, MP4.ac3(track));\n      }\n      if (segmentCodec === \"mp3\" && track.codec === \"mp3\") {\n        return MP4.box(MP4.types.stsd, MP4.STSD, MP4.mp3(track));\n      }\n    } else {\n      if (track.pps && track.sps) {\n        if (segmentCodec === \"avc\") {\n          return MP4.box(MP4.types.stsd, MP4.STSD, MP4.avc1(track));\n        }\n        if (segmentCodec === \"hevc\" && track.vps) {\n          return MP4.box(MP4.types.stsd, MP4.STSD, MP4.hvc1(track));\n        }\n      } else {\n        throw new Error(`video track missing pps or sps`);\n      }\n    }\n    throw new Error(`unsupported ${track.type} segment codec (${segmentCodec}/${track.codec})`);\n  }\n  static tkhd(track) {\n    const id = track.id;\n    const duration = (track.duration || 0) * (track.timescale || 0);\n    const width = track.width || 0;\n    const height = track.height || 0;\n    const upperWordDuration = Math.floor(duration / (UINT32_MAX + 1));\n    const lowerWordDuration = Math.floor(duration % (UINT32_MAX + 1));\n    return MP4.box(MP4.types.tkhd, new Uint8Array([\n      1,\n      // version 1\n      0,\n      0,\n      7,\n      // flags\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      2,\n      // creation_time\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      3,\n      // modification_time\n      id >> 24 & 255,\n      id >> 16 & 255,\n      id >> 8 & 255,\n      id & 255,\n      // track_ID\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      upperWordDuration >> 24,\n      upperWordDuration >> 16 & 255,\n      upperWordDuration >> 8 & 255,\n      upperWordDuration & 255,\n      lowerWordDuration >> 24,\n      lowerWordDuration >> 16 & 255,\n      lowerWordDuration >> 8 & 255,\n      lowerWordDuration & 255,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      // reserved\n      0,\n      0,\n      // layer\n      0,\n      0,\n      // alternate_group\n      0,\n      0,\n      // non-audio track volume\n      0,\n      0,\n      // reserved\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      1,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      0,\n      64,\n      0,\n      0,\n      0,\n      // transformation: unity matrix\n      width >> 8 & 255,\n      width & 255,\n      0,\n      0,\n      // width\n      height >> 8 & 255,\n      height & 255,\n      0,\n      0\n      // height\n    ]));\n  }\n  static traf(track, baseMediaDecodeTime) {\n    const sampleDependencyTable = MP4.sdtp(track);\n    const id = track.id;\n    const upperWordBaseMediaDecodeTime = Math.floor(baseMediaDecodeTime / (UINT32_MAX + 1));\n    const lowerWordBaseMediaDecodeTime = Math.floor(baseMediaDecodeTime % (UINT32_MAX + 1));\n    return MP4.box(\n      MP4.types.traf,\n      MP4.box(MP4.types.tfhd, new Uint8Array([\n        0,\n        // version 0\n        0,\n        0,\n        0,\n        // flags\n        id >> 24,\n        id >> 16 & 255,\n        id >> 8 & 255,\n        id & 255\n        // track_ID\n      ])),\n      MP4.box(MP4.types.tfdt, new Uint8Array([\n        1,\n        // version 1\n        0,\n        0,\n        0,\n        // flags\n        upperWordBaseMediaDecodeTime >> 24,\n        upperWordBaseMediaDecodeTime >> 16 & 255,\n        upperWordBaseMediaDecodeTime >> 8 & 255,\n        upperWordBaseMediaDecodeTime & 255,\n        lowerWordBaseMediaDecodeTime >> 24,\n        lowerWordBaseMediaDecodeTime >> 16 & 255,\n        lowerWordBaseMediaDecodeTime >> 8 & 255,\n        lowerWordBaseMediaDecodeTime & 255\n      ])),\n      MP4.trun(track, sampleDependencyTable.length + 16 + // tfhd\n      20 + // tfdt\n      8 + // traf header\n      16 + // mfhd\n      8 + // moof header\n      8),\n      // mdat header\n      sampleDependencyTable\n    );\n  }\n  /**\n   * Generate a track box.\n   * @param track a track definition\n   */\n  static trak(track) {\n    track.duration = track.duration || 4294967295;\n    return MP4.box(MP4.types.trak, MP4.tkhd(track), MP4.mdia(track));\n  }\n  static trex(track) {\n    const id = track.id;\n    return MP4.box(MP4.types.trex, new Uint8Array([\n      0,\n      // version 0\n      0,\n      0,\n      0,\n      // flags\n      id >> 24,\n      id >> 16 & 255,\n      id >> 8 & 255,\n      id & 255,\n      // track_ID\n      0,\n      0,\n      0,\n      1,\n      // default_sample_description_index\n      0,\n      0,\n      0,\n      0,\n      // default_sample_duration\n      0,\n      0,\n      0,\n      0,\n      // default_sample_size\n      0,\n      1,\n      0,\n      1\n      // default_sample_flags\n    ]));\n  }\n  static trun(track, offset) {\n    const samples = track.samples || [];\n    const len = samples.length;\n    const arraylen = 12 + 16 * len;\n    const array = new Uint8Array(arraylen);\n    let i;\n    let sample;\n    let duration;\n    let size;\n    let flags;\n    let cts;\n    offset += 8 + arraylen;\n    array.set([\n      track.type === \"video\" ? 1 : 0,\n      // version 1 for video with signed-int sample_composition_time_offset\n      0,\n      15,\n      1,\n      // flags\n      len >>> 24 & 255,\n      len >>> 16 & 255,\n      len >>> 8 & 255,\n      len & 255,\n      // sample_count\n      offset >>> 24 & 255,\n      offset >>> 16 & 255,\n      offset >>> 8 & 255,\n      offset & 255\n      // data_offset\n    ], 0);\n    for (i = 0; i < len; i++) {\n      sample = samples[i];\n      duration = sample.duration;\n      size = sample.size;\n      flags = sample.flags;\n      cts = sample.cts;\n      array.set([\n        duration >>> 24 & 255,\n        duration >>> 16 & 255,\n        duration >>> 8 & 255,\n        duration & 255,\n        // sample_duration\n        size >>> 24 & 255,\n        size >>> 16 & 255,\n        size >>> 8 & 255,\n        size & 255,\n        // sample_size\n        flags.isLeading << 2 | flags.dependsOn,\n        flags.isDependedOn << 6 | flags.hasRedundancy << 4 | flags.paddingValue << 1 | flags.isNonSync,\n        flags.degradPrio & 240 << 8,\n        flags.degradPrio & 15,\n        // sample_flags\n        cts >>> 24 & 255,\n        cts >>> 16 & 255,\n        cts >>> 8 & 255,\n        cts & 255\n        // sample_composition_time_offset\n      ], 12 + 16 * i);\n    }\n    return MP4.box(MP4.types.trun, array);\n  }\n  static initSegment(tracks) {\n    if (!MP4.types) {\n      MP4.init();\n    }\n    const movie = MP4.moov(tracks);\n    const result = appendUint8Array(MP4.FTYP, movie);\n    return result;\n  }\n  static hvc1(track) {\n    const ps = track.params;\n    const units = [track.vps, track.sps, track.pps];\n    const NALuLengthSize = 4;\n    const config = new Uint8Array([1, ps.general_profile_space << 6 | (ps.general_tier_flag ? 32 : 0) | ps.general_profile_idc, ps.general_profile_compatibility_flags[0], ps.general_profile_compatibility_flags[1], ps.general_profile_compatibility_flags[2], ps.general_profile_compatibility_flags[3], ps.general_constraint_indicator_flags[0], ps.general_constraint_indicator_flags[1], ps.general_constraint_indicator_flags[2], ps.general_constraint_indicator_flags[3], ps.general_constraint_indicator_flags[4], ps.general_constraint_indicator_flags[5], ps.general_level_idc, 240 | ps.min_spatial_segmentation_idc >> 8, 255 & ps.min_spatial_segmentation_idc, 252 | ps.parallelismType, 252 | ps.chroma_format_idc, 248 | ps.bit_depth_luma_minus8, 248 | ps.bit_depth_chroma_minus8, 0, parseInt(ps.frame_rate.fps), NALuLengthSize - 1 | ps.temporal_id_nested << 2 | ps.num_temporal_layers << 3 | (ps.frame_rate.fixed ? 64 : 0), units.length]);\n    let length = config.length;\n    for (let i = 0; i < units.length; i += 1) {\n      length += 3;\n      for (let j = 0; j < units[i].length; j += 1) {\n        length += 2 + units[i][j].length;\n      }\n    }\n    const hvcC = new Uint8Array(length);\n    hvcC.set(config, 0);\n    length = config.length;\n    const iMax = units.length - 1;\n    for (let i = 0; i < units.length; i += 1) {\n      hvcC.set(new Uint8Array([32 + i | (i === iMax ? 128 : 0), 0, units[i].length]), length);\n      length += 3;\n      for (let j = 0; j < units[i].length; j += 1) {\n        hvcC.set(new Uint8Array([units[i][j].length >> 8, units[i][j].length & 255]), length);\n        length += 2;\n        hvcC.set(units[i][j], length);\n        length += units[i][j].length;\n      }\n    }\n    const hvcc = MP4.box(MP4.types.hvcC, hvcC);\n    const width = track.width;\n    const height = track.height;\n    const hSpacing = track.pixelRatio[0];\n    const vSpacing = track.pixelRatio[1];\n    return MP4.box(\n      MP4.types.hvc1,\n      new Uint8Array([\n        0,\n        0,\n        0,\n        // reserved\n        0,\n        0,\n        0,\n        // reserved\n        0,\n        1,\n        // data_reference_index\n        0,\n        0,\n        // pre_defined\n        0,\n        0,\n        // reserved\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        // pre_defined\n        width >> 8 & 255,\n        width & 255,\n        // width\n        height >> 8 & 255,\n        height & 255,\n        // height\n        0,\n        72,\n        0,\n        0,\n        // horizresolution\n        0,\n        72,\n        0,\n        0,\n        // vertresolution\n        0,\n        0,\n        0,\n        0,\n        // reserved\n        0,\n        1,\n        // frame_count\n        18,\n        100,\n        97,\n        105,\n        108,\n        // dailymotion/hls.js\n        121,\n        109,\n        111,\n        116,\n        105,\n        111,\n        110,\n        47,\n        104,\n        108,\n        115,\n        46,\n        106,\n        115,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        0,\n        // compressorname\n        0,\n        24,\n        // depth = 24\n        17,\n        17\n      ]),\n      // pre_defined = -1\n      hvcc,\n      MP4.box(MP4.types.btrt, new Uint8Array([\n        0,\n        28,\n        156,\n        128,\n        // bufferSizeDB\n        0,\n        45,\n        198,\n        192,\n        // maxBitrate\n        0,\n        45,\n        198,\n        192\n      ])),\n      // avgBitrate\n      MP4.box(MP4.types.pasp, new Uint8Array([\n        hSpacing >> 24,\n        // hSpacing\n        hSpacing >> 16 & 255,\n        hSpacing >> 8 & 255,\n        hSpacing & 255,\n        vSpacing >> 24,\n        // vSpacing\n        vSpacing >> 16 & 255,\n        vSpacing >> 8 & 255,\n        vSpacing & 255\n      ]))\n    );\n  }\n}\nMP4.types = void 0;\nMP4.HDLR_TYPES = void 0;\nMP4.STTS = void 0;\nMP4.STSC = void 0;\nMP4.STCO = void 0;\nMP4.STSZ = void 0;\nMP4.VMHD = void 0;\nMP4.SMHD = void 0;\nMP4.STSD = void 0;\nMP4.FTYP = void 0;\nMP4.DINF = void 0;\nconst MPEG_TS_CLOCK_FREQ_HZ = 9e4;\nfunction toTimescaleFromBase(baseTime, destScale, srcBase = 1, round = false) {\n  const result = baseTime * destScale * srcBase;\n  return round ? Math.round(result) : result;\n}\nfunction toTimescaleFromScale(baseTime, destScale, srcScale = 1, round = false) {\n  return toTimescaleFromBase(baseTime, destScale, 1 / srcScale, round);\n}\nfunction toMsFromMpegTsClock(baseTime, round = false) {\n  return toTimescaleFromBase(baseTime, 1e3, 1 / MPEG_TS_CLOCK_FREQ_HZ, round);\n}\nfunction toMpegTsClockFromTimescale(baseTime, srcScale = 1) {\n  return toTimescaleFromBase(baseTime, MPEG_TS_CLOCK_FREQ_HZ, 1 / srcScale);\n}\nconst MAX_SILENT_FRAME_DURATION = 10 * 1e3;\nconst AAC_SAMPLES_PER_FRAME = 1024;\nconst MPEG_AUDIO_SAMPLE_PER_FRAME = 1152;\nconst AC3_SAMPLES_PER_FRAME = 1536;\nlet chromeVersion = null;\nlet safariWebkitVersion = null;\nfunction createMp4Sample(isKeyframe, duration, size, cts) {\n  return {\n    duration,\n    size,\n    cts,\n    flags: {\n      isLeading: 0,\n      isDependedOn: 0,\n      hasRedundancy: 0,\n      degradPrio: 0,\n      dependsOn: isKeyframe ? 2 : 1,\n      isNonSync: isKeyframe ? 0 : 1\n    }\n  };\n}\nclass MP4Remuxer extends Logger2 {\n  constructor(observer, config, typeSupported, logger2) {\n    super(\"mp4-remuxer\", logger2);\n    this.observer = void 0;\n    this.config = void 0;\n    this.typeSupported = void 0;\n    this.ISGenerated = false;\n    this._initPTS = null;\n    this._initDTS = null;\n    this.nextVideoTs = null;\n    this.nextAudioTs = null;\n    this.videoSampleDuration = null;\n    this.isAudioContiguous = false;\n    this.isVideoContiguous = false;\n    this.videoTrackConfig = void 0;\n    this.observer = observer;\n    this.config = config;\n    this.typeSupported = typeSupported;\n    this.ISGenerated = false;\n    if (chromeVersion === null) {\n      const userAgent = navigator.userAgent || \"\";\n      const result = userAgent.match(/Chrome\\/(\\d+)/i);\n      chromeVersion = result ? parseInt(result[1]) : 0;\n    }\n    if (safariWebkitVersion === null) {\n      const result = navigator.userAgent.match(/Safari\\/(\\d+)/i);\n      safariWebkitVersion = result ? parseInt(result[1]) : 0;\n    }\n  }\n  destroy() {\n    this.config = this.videoTrackConfig = this._initPTS = this._initDTS = null;\n  }\n  resetTimeStamp(defaultTimeStamp) {\n    this.log(\"initPTS & initDTS reset\");\n    this._initPTS = this._initDTS = defaultTimeStamp;\n  }\n  resetNextTimestamp() {\n    this.log(\"reset next timestamp\");\n    this.isVideoContiguous = false;\n    this.isAudioContiguous = false;\n  }\n  resetInitSegment() {\n    this.log(\"ISGenerated flag reset\");\n    this.ISGenerated = false;\n    this.videoTrackConfig = void 0;\n  }\n  getVideoStartPts(videoSamples) {\n    let rolloverDetected = false;\n    const firstPts = videoSamples[0].pts;\n    const startPTS = videoSamples.reduce((minPTS, sample) => {\n      let pts = sample.pts;\n      let delta = pts - minPTS;\n      if (delta < -4294967296) {\n        rolloverDetected = true;\n        pts = normalizePts(pts, firstPts);\n        delta = pts - minPTS;\n      }\n      if (delta > 0) {\n        return minPTS;\n      }\n      return pts;\n    }, firstPts);\n    if (rolloverDetected) {\n      this.debug(\"PTS rollover detected\");\n    }\n    return startPTS;\n  }\n  remux(audioTrack, videoTrack, id3Track, textTrack, timeOffset, accurateTimeOffset, flush, playlistType) {\n    let video;\n    let audio;\n    let initSegment;\n    let text;\n    let id3;\n    let independent;\n    let audioTimeOffset = timeOffset;\n    let videoTimeOffset = timeOffset;\n    const hasAudio = audioTrack.pid > -1;\n    const hasVideo = videoTrack.pid > -1;\n    const length = videoTrack.samples.length;\n    const enoughAudioSamples = audioTrack.samples.length > 0;\n    const enoughVideoSamples = flush && length > 0 || length > 1;\n    const canRemuxAvc = (!hasAudio || enoughAudioSamples) && (!hasVideo || enoughVideoSamples) || this.ISGenerated || flush;\n    if (canRemuxAvc) {\n      if (this.ISGenerated) {\n        var _videoTrack$pixelRati, _config$pixelRatio, _videoTrack$pixelRati2, _config$pixelRatio2;\n        const config = this.videoTrackConfig;\n        if (config && (videoTrack.width !== config.width || videoTrack.height !== config.height || ((_videoTrack$pixelRati = videoTrack.pixelRatio) == null ? void 0 : _videoTrack$pixelRati[0]) !== ((_config$pixelRatio = config.pixelRatio) == null ? void 0 : _config$pixelRatio[0]) || ((_videoTrack$pixelRati2 = videoTrack.pixelRatio) == null ? void 0 : _videoTrack$pixelRati2[1]) !== ((_config$pixelRatio2 = config.pixelRatio) == null ? void 0 : _config$pixelRatio2[1])) || !config && enoughVideoSamples || this.nextAudioTs === null && enoughAudioSamples) {\n          this.resetInitSegment();\n        }\n      }\n      if (!this.ISGenerated) {\n        initSegment = this.generateIS(audioTrack, videoTrack, timeOffset, accurateTimeOffset);\n      }\n      const isVideoContiguous = this.isVideoContiguous;\n      let firstKeyFrameIndex = -1;\n      let firstKeyFramePTS;\n      if (enoughVideoSamples) {\n        firstKeyFrameIndex = findKeyframeIndex(videoTrack.samples);\n        if (!isVideoContiguous && this.config.forceKeyFrameOnDiscontinuity) {\n          independent = true;\n          if (firstKeyFrameIndex > 0) {\n            this.warn(`Dropped ${firstKeyFrameIndex} out of ${length} video samples due to a missing keyframe`);\n            const startPTS = this.getVideoStartPts(videoTrack.samples);\n            videoTrack.samples = videoTrack.samples.slice(firstKeyFrameIndex);\n            videoTrack.dropped += firstKeyFrameIndex;\n            videoTimeOffset += (videoTrack.samples[0].pts - startPTS) / videoTrack.inputTimeScale;\n            firstKeyFramePTS = videoTimeOffset;\n          } else if (firstKeyFrameIndex === -1) {\n            this.warn(`No keyframe found out of ${length} video samples`);\n            independent = false;\n          }\n        }\n      }\n      if (this.ISGenerated) {\n        if (enoughAudioSamples && enoughVideoSamples) {\n          const startPTS = this.getVideoStartPts(videoTrack.samples);\n          const tsDelta = normalizePts(audioTrack.samples[0].pts, startPTS) - startPTS;\n          const audiovideoTimestampDelta = tsDelta / videoTrack.inputTimeScale;\n          audioTimeOffset += Math.max(0, audiovideoTimestampDelta);\n          videoTimeOffset += Math.max(0, -audiovideoTimestampDelta);\n        }\n        if (enoughAudioSamples) {\n          if (!audioTrack.samplerate) {\n            this.warn(\"regenerate InitSegment as audio detected\");\n            initSegment = this.generateIS(audioTrack, videoTrack, timeOffset, accurateTimeOffset);\n          }\n          audio = this.remuxAudio(audioTrack, audioTimeOffset, this.isAudioContiguous, accurateTimeOffset, hasVideo || enoughVideoSamples || playlistType === PlaylistLevelType.AUDIO ? videoTimeOffset : void 0);\n          if (enoughVideoSamples) {\n            const audioTrackLength = audio ? audio.endPTS - audio.startPTS : 0;\n            if (!videoTrack.inputTimeScale) {\n              this.warn(\"regenerate InitSegment as video detected\");\n              initSegment = this.generateIS(audioTrack, videoTrack, timeOffset, accurateTimeOffset);\n            }\n            video = this.remuxVideo(videoTrack, videoTimeOffset, isVideoContiguous, audioTrackLength);\n          }\n        } else if (enoughVideoSamples) {\n          video = this.remuxVideo(videoTrack, videoTimeOffset, isVideoContiguous, 0);\n        }\n        if (video) {\n          video.firstKeyFrame = firstKeyFrameIndex;\n          video.independent = firstKeyFrameIndex !== -1;\n          video.firstKeyFramePTS = firstKeyFramePTS;\n        }\n      }\n    }\n    if (this.ISGenerated && this._initPTS && this._initDTS) {\n      if (id3Track.samples.length) {\n        id3 = flushTextTrackMetadataCueSamples(id3Track, timeOffset, this._initPTS, this._initDTS);\n      }\n      if (textTrack.samples.length) {\n        text = flushTextTrackUserdataCueSamples(textTrack, timeOffset, this._initPTS);\n      }\n    }\n    return {\n      audio,\n      video,\n      initSegment,\n      independent,\n      text,\n      id3\n    };\n  }\n  generateIS(audioTrack, videoTrack, timeOffset, accurateTimeOffset) {\n    const audioSamples = audioTrack.samples;\n    const videoSamples = videoTrack.samples;\n    const typeSupported = this.typeSupported;\n    const tracks = {};\n    const _initPTS = this._initPTS;\n    let computePTSDTS = !_initPTS || accurateTimeOffset;\n    let container = \"audio/mp4\";\n    let initPTS;\n    let initDTS;\n    let timescale;\n    let trackId;\n    if (computePTSDTS) {\n      initPTS = initDTS = Infinity;\n    }\n    if (audioTrack.config && audioSamples.length) {\n      audioTrack.timescale = audioTrack.samplerate;\n      switch (audioTrack.segmentCodec) {\n        case \"mp3\":\n          if (typeSupported.mpeg) {\n            container = \"audio/mpeg\";\n            audioTrack.codec = \"\";\n          } else if (typeSupported.mp3) {\n            audioTrack.codec = \"mp3\";\n          }\n          break;\n        case \"ac3\":\n          audioTrack.codec = \"ac-3\";\n          break;\n      }\n      tracks.audio = {\n        id: \"audio\",\n        container,\n        codec: audioTrack.codec,\n        initSegment: audioTrack.segmentCodec === \"mp3\" && typeSupported.mpeg ? new Uint8Array(0) : MP4.initSegment([audioTrack]),\n        metadata: {\n          channelCount: audioTrack.channelCount\n        }\n      };\n      if (computePTSDTS) {\n        trackId = audioTrack.id;\n        timescale = audioTrack.inputTimeScale;\n        if (!_initPTS || timescale !== _initPTS.timescale) {\n          initPTS = initDTS = audioSamples[0].pts - Math.round(timescale * timeOffset);\n        } else {\n          computePTSDTS = false;\n        }\n      }\n    }\n    if (videoTrack.sps && videoTrack.pps && videoSamples.length) {\n      videoTrack.timescale = videoTrack.inputTimeScale;\n      tracks.video = {\n        id: \"main\",\n        container: \"video/mp4\",\n        codec: videoTrack.codec,\n        initSegment: MP4.initSegment([videoTrack]),\n        metadata: {\n          width: videoTrack.width,\n          height: videoTrack.height\n        }\n      };\n      if (computePTSDTS) {\n        trackId = videoTrack.id;\n        timescale = videoTrack.inputTimeScale;\n        if (!_initPTS || timescale !== _initPTS.timescale) {\n          const startPTS = this.getVideoStartPts(videoSamples);\n          const startOffset = Math.round(timescale * timeOffset);\n          initDTS = Math.min(initDTS, normalizePts(videoSamples[0].dts, startPTS) - startOffset);\n          initPTS = Math.min(initPTS, startPTS - startOffset);\n        } else {\n          computePTSDTS = false;\n        }\n      }\n      this.videoTrackConfig = {\n        width: videoTrack.width,\n        height: videoTrack.height,\n        pixelRatio: videoTrack.pixelRatio\n      };\n    }\n    if (Object.keys(tracks).length) {\n      this.ISGenerated = true;\n      if (computePTSDTS) {\n        this._initPTS = {\n          baseTime: initPTS,\n          timescale\n        };\n        this._initDTS = {\n          baseTime: initDTS,\n          timescale\n        };\n      } else {\n        initPTS = timescale = void 0;\n      }\n      return {\n        tracks,\n        initPTS,\n        timescale,\n        trackId\n      };\n    }\n  }\n  remuxVideo(track, timeOffset, contiguous, audioTrackLength) {\n    const timeScale = track.inputTimeScale;\n    const inputSamples = track.samples;\n    const outputSamples = [];\n    const nbSamples = inputSamples.length;\n    const initPTS = this._initPTS;\n    const initTime = initPTS.baseTime * timeScale / initPTS.timescale;\n    let nextVideoTs = this.nextVideoTs;\n    let offset = 8;\n    let mp4SampleDuration = this.videoSampleDuration;\n    let firstDTS;\n    let lastDTS;\n    let minPTS = Number.POSITIVE_INFINITY;\n    let maxPTS = Number.NEGATIVE_INFINITY;\n    let sortSamples = false;\n    if (!contiguous || nextVideoTs === null) {\n      const pts = initTime + timeOffset * timeScale;\n      const cts = inputSamples[0].pts - normalizePts(inputSamples[0].dts, inputSamples[0].pts);\n      if (chromeVersion && nextVideoTs !== null && Math.abs(pts - cts - (nextVideoTs + initTime)) < 15e3) {\n        contiguous = true;\n      } else {\n        nextVideoTs = pts - cts - initTime;\n      }\n    }\n    const nextVideoPts = nextVideoTs + initTime;\n    for (let i = 0; i < nbSamples; i++) {\n      const sample = inputSamples[i];\n      sample.pts = normalizePts(sample.pts, nextVideoPts);\n      sample.dts = normalizePts(sample.dts, nextVideoPts);\n      if (sample.dts < inputSamples[i > 0 ? i - 1 : i].dts) {\n        sortSamples = true;\n      }\n    }\n    if (sortSamples) {\n      inputSamples.sort(function(a, b) {\n        const deltadts = a.dts - b.dts;\n        const deltapts = a.pts - b.pts;\n        return deltadts || deltapts;\n      });\n    }\n    firstDTS = inputSamples[0].dts;\n    lastDTS = inputSamples[inputSamples.length - 1].dts;\n    const inputDuration = lastDTS - firstDTS;\n    const averageSampleDuration = inputDuration ? Math.round(inputDuration / (nbSamples - 1)) : mp4SampleDuration || track.inputTimeScale / 30;\n    if (contiguous) {\n      const delta = firstDTS - nextVideoPts;\n      const foundHole = delta > averageSampleDuration;\n      const foundOverlap = delta < -1;\n      if (foundHole || foundOverlap) {\n        if (foundHole) {\n          this.warn(`${(track.segmentCodec || \"\").toUpperCase()}: ${toMsFromMpegTsClock(delta, true)} ms (${delta}dts) hole between fragments detected at ${timeOffset.toFixed(3)}`);\n        } else {\n          this.warn(`${(track.segmentCodec || \"\").toUpperCase()}: ${toMsFromMpegTsClock(-delta, true)} ms (${delta}dts) overlapping between fragments detected at ${timeOffset.toFixed(3)}`);\n        }\n        if (!foundOverlap || nextVideoPts >= inputSamples[0].pts || chromeVersion) {\n          firstDTS = nextVideoPts;\n          const firstPTS = inputSamples[0].pts - delta;\n          if (foundHole) {\n            inputSamples[0].dts = firstDTS;\n            inputSamples[0].pts = firstPTS;\n          } else {\n            let isPTSOrderRetained = true;\n            for (let i = 0; i < inputSamples.length; i++) {\n              if (inputSamples[i].dts > firstPTS && isPTSOrderRetained) {\n                break;\n              }\n              const prevPTS = inputSamples[i].pts;\n              inputSamples[i].dts -= delta;\n              inputSamples[i].pts -= delta;\n              if (i < inputSamples.length - 1) {\n                const nextSamplePTS = inputSamples[i + 1].pts;\n                const currentSamplePTS = inputSamples[i].pts;\n                const currentOrder = nextSamplePTS <= currentSamplePTS;\n                const prevOrder = nextSamplePTS <= prevPTS;\n                isPTSOrderRetained = currentOrder == prevOrder;\n              }\n            }\n          }\n          this.log(`Video: Initial PTS/DTS adjusted: ${toMsFromMpegTsClock(firstPTS, true)}/${toMsFromMpegTsClock(firstDTS, true)}, delta: ${toMsFromMpegTsClock(delta, true)} ms`);\n        }\n      }\n    }\n    firstDTS = Math.max(0, firstDTS);\n    let nbNalu = 0;\n    let naluLen = 0;\n    let dtsStep = firstDTS;\n    for (let i = 0; i < nbSamples; i++) {\n      const sample = inputSamples[i];\n      const units = sample.units;\n      const nbUnits = units.length;\n      let sampleLen = 0;\n      for (let j = 0; j < nbUnits; j++) {\n        sampleLen += units[j].data.length;\n      }\n      naluLen += sampleLen;\n      nbNalu += nbUnits;\n      sample.length = sampleLen;\n      if (sample.dts < dtsStep) {\n        sample.dts = dtsStep;\n        dtsStep += averageSampleDuration / 4 | 0 || 1;\n      } else {\n        dtsStep = sample.dts;\n      }\n      minPTS = Math.min(sample.pts, minPTS);\n      maxPTS = Math.max(sample.pts, maxPTS);\n    }\n    lastDTS = inputSamples[nbSamples - 1].dts;\n    const mdatSize = naluLen + 4 * nbNalu + 8;\n    let mdat;\n    try {\n      mdat = new Uint8Array(mdatSize);\n    } catch (err) {\n      this.observer.emit(Events.ERROR, Events.ERROR, {\n        type: ErrorTypes.MUX_ERROR,\n        details: ErrorDetails.REMUX_ALLOC_ERROR,\n        fatal: false,\n        error: err,\n        bytes: mdatSize,\n        reason: `fail allocating video mdat ${mdatSize}`\n      });\n      return;\n    }\n    const view2 = new DataView(mdat.buffer);\n    view2.setUint32(0, mdatSize);\n    mdat.set(MP4.types.mdat, 4);\n    let stretchedLastFrame = false;\n    let minDtsDelta = Number.POSITIVE_INFINITY;\n    let minPtsDelta = Number.POSITIVE_INFINITY;\n    let maxDtsDelta = Number.NEGATIVE_INFINITY;\n    let maxPtsDelta = Number.NEGATIVE_INFINITY;\n    for (let i = 0; i < nbSamples; i++) {\n      const VideoSample = inputSamples[i];\n      const VideoSampleUnits = VideoSample.units;\n      let mp4SampleLength = 0;\n      for (let j = 0, nbUnits = VideoSampleUnits.length; j < nbUnits; j++) {\n        const unit = VideoSampleUnits[j];\n        const unitData = unit.data;\n        const unitDataLen = unit.data.byteLength;\n        view2.setUint32(offset, unitDataLen);\n        offset += 4;\n        mdat.set(unitData, offset);\n        offset += unitDataLen;\n        mp4SampleLength += 4 + unitDataLen;\n      }\n      let ptsDelta;\n      if (i < nbSamples - 1) {\n        mp4SampleDuration = inputSamples[i + 1].dts - VideoSample.dts;\n        ptsDelta = inputSamples[i + 1].pts - VideoSample.pts;\n      } else {\n        const config = this.config;\n        const lastFrameDuration = i > 0 ? VideoSample.dts - inputSamples[i - 1].dts : averageSampleDuration;\n        ptsDelta = i > 0 ? VideoSample.pts - inputSamples[i - 1].pts : averageSampleDuration;\n        if (config.stretchShortVideoTrack && this.nextAudioTs !== null) {\n          const gapTolerance = Math.floor(config.maxBufferHole * timeScale);\n          const deltaToFrameEnd = (audioTrackLength ? minPTS + audioTrackLength * timeScale : this.nextAudioTs + initTime) - VideoSample.pts;\n          if (deltaToFrameEnd > gapTolerance) {\n            mp4SampleDuration = deltaToFrameEnd - lastFrameDuration;\n            if (mp4SampleDuration < 0) {\n              mp4SampleDuration = lastFrameDuration;\n            } else {\n              stretchedLastFrame = true;\n            }\n            this.log(`It is approximately ${deltaToFrameEnd / 90} ms to the next segment; using duration ${mp4SampleDuration / 90} ms for the last video frame.`);\n          } else {\n            mp4SampleDuration = lastFrameDuration;\n          }\n        } else {\n          mp4SampleDuration = lastFrameDuration;\n        }\n      }\n      const compositionTimeOffset = Math.round(VideoSample.pts - VideoSample.dts);\n      minDtsDelta = Math.min(minDtsDelta, mp4SampleDuration);\n      maxDtsDelta = Math.max(maxDtsDelta, mp4SampleDuration);\n      minPtsDelta = Math.min(minPtsDelta, ptsDelta);\n      maxPtsDelta = Math.max(maxPtsDelta, ptsDelta);\n      outputSamples.push(createMp4Sample(VideoSample.key, mp4SampleDuration, mp4SampleLength, compositionTimeOffset));\n    }\n    if (outputSamples.length) {\n      if (chromeVersion) {\n        if (chromeVersion < 70) {\n          const flags = outputSamples[0].flags;\n          flags.dependsOn = 2;\n          flags.isNonSync = 0;\n        }\n      } else if (safariWebkitVersion) {\n        if (maxPtsDelta - minPtsDelta < maxDtsDelta - minDtsDelta && averageSampleDuration / maxDtsDelta < 0.025 && outputSamples[0].cts === 0) {\n          this.warn(\"Found irregular gaps in sample duration. Using PTS instead of DTS to determine MP4 sample duration.\");\n          let dts = firstDTS;\n          for (let i = 0, len = outputSamples.length; i < len; i++) {\n            const nextDts = dts + outputSamples[i].duration;\n            const pts = dts + outputSamples[i].cts;\n            if (i < len - 1) {\n              const nextPts = nextDts + outputSamples[i + 1].cts;\n              outputSamples[i].duration = nextPts - pts;\n            } else {\n              outputSamples[i].duration = i ? outputSamples[i - 1].duration : averageSampleDuration;\n            }\n            outputSamples[i].cts = 0;\n            dts = nextDts;\n          }\n        }\n      }\n    }\n    mp4SampleDuration = stretchedLastFrame || !mp4SampleDuration ? averageSampleDuration : mp4SampleDuration;\n    const endDTS = lastDTS + mp4SampleDuration;\n    this.nextVideoTs = nextVideoTs = endDTS - initTime;\n    this.videoSampleDuration = mp4SampleDuration;\n    this.isVideoContiguous = true;\n    const moof = MP4.moof(track.sequenceNumber++, firstDTS, _extends(track, {\n      samples: outputSamples\n    }));\n    const type = \"video\";\n    const data = {\n      data1: moof,\n      data2: mdat,\n      startPTS: (minPTS - initTime) / timeScale,\n      endPTS: (maxPTS + mp4SampleDuration - initTime) / timeScale,\n      startDTS: (firstDTS - initTime) / timeScale,\n      endDTS: nextVideoTs / timeScale,\n      type,\n      hasAudio: false,\n      hasVideo: true,\n      nb: outputSamples.length,\n      dropped: track.dropped\n    };\n    track.samples = [];\n    track.dropped = 0;\n    return data;\n  }\n  getSamplesPerFrame(track) {\n    switch (track.segmentCodec) {\n      case \"mp3\":\n        return MPEG_AUDIO_SAMPLE_PER_FRAME;\n      case \"ac3\":\n        return AC3_SAMPLES_PER_FRAME;\n      default:\n        return AAC_SAMPLES_PER_FRAME;\n    }\n  }\n  remuxAudio(track, timeOffset, contiguous, accurateTimeOffset, videoTimeOffset) {\n    const inputTimeScale = track.inputTimeScale;\n    const mp4timeScale = track.samplerate ? track.samplerate : inputTimeScale;\n    const scaleFactor = inputTimeScale / mp4timeScale;\n    const mp4SampleDuration = this.getSamplesPerFrame(track);\n    const inputSampleDuration = mp4SampleDuration * scaleFactor;\n    const initPTS = this._initPTS;\n    const rawMPEG = track.segmentCodec === \"mp3\" && this.typeSupported.mpeg;\n    const outputSamples = [];\n    const alignedWithVideo = videoTimeOffset !== void 0;\n    let inputSamples = track.samples;\n    let offset = rawMPEG ? 0 : 8;\n    let nextAudioTs = this.nextAudioTs || -1;\n    const initTime = initPTS.baseTime * inputTimeScale / initPTS.timescale;\n    const timeOffsetMpegTS = initTime + timeOffset * inputTimeScale;\n    this.isAudioContiguous = contiguous = contiguous || inputSamples.length && nextAudioTs > 0 && (accurateTimeOffset && Math.abs(timeOffsetMpegTS - (nextAudioTs + initTime)) < 9e3 || Math.abs(normalizePts(inputSamples[0].pts, timeOffsetMpegTS) - (nextAudioTs + initTime)) < 20 * inputSampleDuration);\n    inputSamples.forEach(function(sample) {\n      sample.pts = normalizePts(sample.pts, timeOffsetMpegTS);\n    });\n    if (!contiguous || nextAudioTs < 0) {\n      inputSamples = inputSamples.filter((sample) => sample.pts >= 0);\n      if (!inputSamples.length) {\n        return;\n      }\n      if (videoTimeOffset === 0) {\n        nextAudioTs = 0;\n      } else if (accurateTimeOffset && !alignedWithVideo) {\n        nextAudioTs = Math.max(0, timeOffsetMpegTS - initTime);\n      } else {\n        nextAudioTs = inputSamples[0].pts - initTime;\n      }\n    }\n    if (track.segmentCodec === \"aac\") {\n      const maxAudioFramesDrift = this.config.maxAudioFramesDrift;\n      for (let i = 0, nextPts = nextAudioTs + initTime; i < inputSamples.length; i++) {\n        const sample = inputSamples[i];\n        const pts = sample.pts;\n        const delta = pts - nextPts;\n        const duration = Math.abs(1e3 * delta / inputTimeScale);\n        if (delta <= -maxAudioFramesDrift * inputSampleDuration && alignedWithVideo) {\n          if (i === 0) {\n            this.warn(`Audio frame @ ${(pts / inputTimeScale).toFixed(3)}s overlaps marker by ${Math.round(1e3 * delta / inputTimeScale)} ms.`);\n            this.nextAudioTs = nextAudioTs = pts - initTime;\n            nextPts = pts;\n          }\n        } else if (delta >= maxAudioFramesDrift * inputSampleDuration && duration < MAX_SILENT_FRAME_DURATION && alignedWithVideo) {\n          let missing = Math.round(delta / inputSampleDuration);\n          nextPts = pts - missing * inputSampleDuration;\n          while (nextPts < 0 && missing && inputSampleDuration) {\n            missing--;\n            nextPts += inputSampleDuration;\n          }\n          if (i === 0) {\n            this.nextAudioTs = nextAudioTs = nextPts - initTime;\n          }\n          this.warn(`Injecting ${missing} audio frames @ ${((nextPts - initTime) / inputTimeScale).toFixed(3)}s due to ${Math.round(1e3 * delta / inputTimeScale)} ms gap.`);\n          for (let j = 0; j < missing; j++) {\n            let fillFrame = AAC.getSilentFrame(track.parsedCodec || track.manifestCodec || track.codec, track.channelCount);\n            if (!fillFrame) {\n              this.log(\"Unable to get silent frame for given audio codec; duplicating last frame instead.\");\n              fillFrame = sample.unit.subarray();\n            }\n            inputSamples.splice(i, 0, {\n              unit: fillFrame,\n              pts: nextPts\n            });\n            nextPts += inputSampleDuration;\n            i++;\n          }\n        }\n        sample.pts = nextPts;\n        nextPts += inputSampleDuration;\n      }\n    }\n    let firstPTS = null;\n    let lastPTS = null;\n    let mdat;\n    let mdatSize = 0;\n    let sampleLength = inputSamples.length;\n    while (sampleLength--) {\n      mdatSize += inputSamples[sampleLength].unit.byteLength;\n    }\n    for (let j = 0, _nbSamples = inputSamples.length; j < _nbSamples; j++) {\n      const audioSample = inputSamples[j];\n      const unit = audioSample.unit;\n      let pts = audioSample.pts;\n      if (lastPTS !== null) {\n        const prevSample = outputSamples[j - 1];\n        prevSample.duration = Math.round((pts - lastPTS) / scaleFactor);\n      } else {\n        if (contiguous && track.segmentCodec === \"aac\") {\n          pts = nextAudioTs + initTime;\n        }\n        firstPTS = pts;\n        if (mdatSize > 0) {\n          mdatSize += offset;\n          try {\n            mdat = new Uint8Array(mdatSize);\n          } catch (err) {\n            this.observer.emit(Events.ERROR, Events.ERROR, {\n              type: ErrorTypes.MUX_ERROR,\n              details: ErrorDetails.REMUX_ALLOC_ERROR,\n              fatal: false,\n              error: err,\n              bytes: mdatSize,\n              reason: `fail allocating audio mdat ${mdatSize}`\n            });\n            return;\n          }\n          if (!rawMPEG) {\n            const view2 = new DataView(mdat.buffer);\n            view2.setUint32(0, mdatSize);\n            mdat.set(MP4.types.mdat, 4);\n          }\n        } else {\n          return;\n        }\n      }\n      mdat.set(unit, offset);\n      const unitLen = unit.byteLength;\n      offset += unitLen;\n      outputSamples.push(createMp4Sample(true, mp4SampleDuration, unitLen, 0));\n      lastPTS = pts;\n    }\n    const nbSamples = outputSamples.length;\n    if (!nbSamples) {\n      return;\n    }\n    const lastSample = outputSamples[outputSamples.length - 1];\n    nextAudioTs = lastPTS - initTime;\n    this.nextAudioTs = nextAudioTs + scaleFactor * lastSample.duration;\n    const moof = rawMPEG ? new Uint8Array(0) : MP4.moof(track.sequenceNumber++, firstPTS / scaleFactor, _extends({}, track, {\n      samples: outputSamples\n    }));\n    track.samples = [];\n    const start = (firstPTS - initTime) / inputTimeScale;\n    const end = nextAudioTs / inputTimeScale;\n    const type = \"audio\";\n    const audioData = {\n      data1: moof,\n      data2: mdat,\n      startPTS: start,\n      endPTS: end,\n      startDTS: start,\n      endDTS: end,\n      type,\n      hasAudio: true,\n      hasVideo: false,\n      nb: nbSamples\n    };\n    this.isAudioContiguous = true;\n    return audioData;\n  }\n}\nfunction normalizePts(value, reference) {\n  let offset;\n  if (reference === null) {\n    return value;\n  }\n  if (reference < value) {\n    offset = -8589934592;\n  } else {\n    offset = 8589934592;\n  }\n  while (Math.abs(value - reference) > 4294967296) {\n    value += offset;\n  }\n  return value;\n}\nfunction findKeyframeIndex(samples) {\n  for (let i = 0; i < samples.length; i++) {\n    if (samples[i].key) {\n      return i;\n    }\n  }\n  return -1;\n}\nfunction flushTextTrackMetadataCueSamples(track, timeOffset, initPTS, initDTS) {\n  const length = track.samples.length;\n  if (!length) {\n    return;\n  }\n  const inputTimeScale = track.inputTimeScale;\n  for (let index = 0; index < length; index++) {\n    const sample = track.samples[index];\n    sample.pts = normalizePts(sample.pts - initPTS.baseTime * inputTimeScale / initPTS.timescale, timeOffset * inputTimeScale) / inputTimeScale;\n    sample.dts = normalizePts(sample.dts - initDTS.baseTime * inputTimeScale / initDTS.timescale, timeOffset * inputTimeScale) / inputTimeScale;\n  }\n  const samples = track.samples;\n  track.samples = [];\n  return {\n    samples\n  };\n}\nfunction flushTextTrackUserdataCueSamples(track, timeOffset, initPTS) {\n  const length = track.samples.length;\n  if (!length) {\n    return;\n  }\n  const inputTimeScale = track.inputTimeScale;\n  for (let index = 0; index < length; index++) {\n    const sample = track.samples[index];\n    sample.pts = normalizePts(sample.pts - initPTS.baseTime * inputTimeScale / initPTS.timescale, timeOffset * inputTimeScale) / inputTimeScale;\n  }\n  track.samples.sort((a, b) => a.pts - b.pts);\n  const samples = track.samples;\n  track.samples = [];\n  return {\n    samples\n  };\n}\nclass PassThroughRemuxer extends Logger2 {\n  constructor(observer, config, typeSupported, logger2) {\n    super(\"passthrough-remuxer\", logger2);\n    this.emitInitSegment = false;\n    this.audioCodec = void 0;\n    this.videoCodec = void 0;\n    this.initData = void 0;\n    this.initPTS = null;\n    this.initTracks = void 0;\n    this.lastEndTime = null;\n    this.isVideoContiguous = false;\n  }\n  destroy() {\n  }\n  resetTimeStamp(defaultInitPTS) {\n    this.lastEndTime = null;\n    const initPTS = this.initPTS;\n    if (initPTS && defaultInitPTS) {\n      if (initPTS.baseTime === defaultInitPTS.baseTime && initPTS.timescale === defaultInitPTS.timescale) {\n        return;\n      }\n    }\n    this.initPTS = defaultInitPTS;\n  }\n  resetNextTimestamp() {\n    this.isVideoContiguous = false;\n    this.lastEndTime = null;\n  }\n  resetInitSegment(initSegment, audioCodec, videoCodec, decryptdata) {\n    this.audioCodec = audioCodec;\n    this.videoCodec = videoCodec;\n    this.generateInitSegment(patchEncyptionData(initSegment, decryptdata));\n    this.emitInitSegment = true;\n  }\n  generateInitSegment(initSegment) {\n    let {\n      audioCodec,\n      videoCodec\n    } = this;\n    if (!(initSegment != null && initSegment.byteLength)) {\n      this.initTracks = void 0;\n      this.initData = void 0;\n      return;\n    }\n    const initData = this.initData = parseInitSegment(initSegment);\n    if (initData.audio) {\n      audioCodec = getParsedTrackCodec(initData.audio, ElementaryStreamTypes.AUDIO, this);\n    }\n    if (initData.video) {\n      videoCodec = getParsedTrackCodec(initData.video, ElementaryStreamTypes.VIDEO, this);\n    }\n    const tracks = {};\n    if (initData.audio && initData.video) {\n      tracks.audiovideo = {\n        container: \"video/mp4\",\n        codec: audioCodec + \",\" + videoCodec,\n        supplemental: initData.video.supplemental,\n        initSegment,\n        id: \"main\"\n      };\n    } else if (initData.audio) {\n      tracks.audio = {\n        container: \"audio/mp4\",\n        codec: audioCodec,\n        initSegment,\n        id: \"audio\"\n      };\n    } else if (initData.video) {\n      tracks.video = {\n        container: \"video/mp4\",\n        codec: videoCodec,\n        supplemental: initData.video.supplemental,\n        initSegment,\n        id: \"main\"\n      };\n    } else {\n      this.warn(\"initSegment does not contain moov or trak boxes.\");\n    }\n    this.initTracks = tracks;\n  }\n  remux(audioTrack, videoTrack, id3Track, textTrack, timeOffset, accurateTimeOffset) {\n    var _initData, _initData2;\n    let {\n      initPTS,\n      lastEndTime\n    } = this;\n    const result = {\n      audio: void 0,\n      video: void 0,\n      text: textTrack,\n      id3: id3Track,\n      initSegment: void 0\n    };\n    if (!isFiniteNumber(lastEndTime)) {\n      lastEndTime = this.lastEndTime = timeOffset || 0;\n    }\n    const data = videoTrack.samples;\n    if (!(data != null && data.length)) {\n      return result;\n    }\n    const initSegment = {\n      initPTS: void 0,\n      timescale: void 0,\n      trackId: void 0\n    };\n    let initData = this.initData;\n    if (!((_initData = initData) != null && _initData.length)) {\n      this.generateInitSegment(data);\n      initData = this.initData;\n    }\n    if (!((_initData2 = initData) != null && _initData2.length)) {\n      this.warn(\"Failed to generate initSegment.\");\n      return result;\n    }\n    if (this.emitInitSegment) {\n      initSegment.tracks = this.initTracks;\n      this.emitInitSegment = false;\n    }\n    const trackSampleData = getSampleData(data, initData, this);\n    const audioSampleTimestamps = initData.audio ? trackSampleData[initData.audio.id] : null;\n    const videoSampleTimestamps = initData.video ? trackSampleData[initData.video.id] : null;\n    const videoStartTime = toStartEndOrDefault(videoSampleTimestamps, Infinity);\n    const audioStartTime = toStartEndOrDefault(audioSampleTimestamps, Infinity);\n    const videoEndTime = toStartEndOrDefault(videoSampleTimestamps, 0, true);\n    const audioEndTime = toStartEndOrDefault(audioSampleTimestamps, 0, true);\n    let baseOffsetSamples;\n    let decodeTime = timeOffset;\n    let duration = 0;\n    if (audioSampleTimestamps && (!videoSampleTimestamps || !initPTS && audioStartTime < videoStartTime || initPTS && initPTS.trackId === initData.audio.id)) {\n      initSegment.trackId = initData.audio.id;\n      baseOffsetSamples = audioSampleTimestamps;\n      duration = audioEndTime - audioStartTime;\n    } else if (videoSampleTimestamps) {\n      initSegment.trackId = initData.video.id;\n      baseOffsetSamples = videoSampleTimestamps;\n      duration = videoEndTime - videoStartTime;\n    }\n    if (baseOffsetSamples) {\n      const timescale = baseOffsetSamples.timescale;\n      decodeTime = baseOffsetSamples.start / timescale;\n      initSegment.initPTS = baseOffsetSamples.start - timeOffset * timescale;\n      initSegment.timescale = timescale;\n      if (!initPTS) {\n        this.initPTS = initPTS = {\n          baseTime: initSegment.initPTS,\n          timescale,\n          trackId: initSegment.trackId\n        };\n      }\n    }\n    if ((accurateTimeOffset || !initPTS) && (isInvalidInitPts(initPTS, decodeTime, timeOffset, duration) || initSegment.timescale !== initPTS.timescale)) {\n      initSegment.initPTS = decodeTime - timeOffset;\n      initSegment.timescale = 1;\n      if (initPTS && initPTS.timescale === 1) {\n        this.warn(`Adjusting initPTS @${timeOffset} from ${initPTS.baseTime / initPTS.timescale} to ${initSegment.initPTS}`);\n      }\n      this.initPTS = initPTS = {\n        baseTime: initSegment.initPTS,\n        timescale: 1\n      };\n    }\n    const startTime = audioTrack ? decodeTime - initPTS.baseTime / initPTS.timescale : lastEndTime;\n    const endTime = startTime + duration;\n    if (duration > 0) {\n      this.lastEndTime = endTime;\n    } else {\n      this.warn(\"Duration parsed from mp4 should be greater than zero\");\n      this.resetNextTimestamp();\n    }\n    const hasAudio = !!initData.audio;\n    const hasVideo = !!initData.video;\n    let type = \"\";\n    if (hasAudio) {\n      type += \"audio\";\n    }\n    if (hasVideo) {\n      type += \"video\";\n    }\n    const track = {\n      data1: data,\n      startPTS: startTime,\n      startDTS: startTime,\n      endPTS: endTime,\n      endDTS: endTime,\n      type,\n      hasAudio,\n      hasVideo,\n      nb: 1,\n      dropped: 0\n    };\n    result.audio = hasAudio && !hasVideo ? track : void 0;\n    result.video = hasVideo ? track : void 0;\n    const videoSampleCount = videoSampleTimestamps == null ? void 0 : videoSampleTimestamps.sampleCount;\n    if (videoSampleCount) {\n      const firstKeyFrame = videoSampleTimestamps.keyFrameIndex;\n      const independent = firstKeyFrame !== -1;\n      track.nb = videoSampleCount;\n      track.dropped = firstKeyFrame === 0 || this.isVideoContiguous ? 0 : independent ? firstKeyFrame : videoSampleCount;\n      track.independent = independent;\n      track.firstKeyFrame = firstKeyFrame;\n      if (independent && videoSampleTimestamps.keyFrameStart) {\n        track.firstKeyFramePTS = (videoSampleTimestamps.keyFrameStart - initPTS.baseTime) / initPTS.timescale;\n      }\n      if (!this.isVideoContiguous) {\n        result.independent = independent;\n      }\n      this.isVideoContiguous || (this.isVideoContiguous = independent);\n      if (track.dropped) {\n        this.warn(`fmp4 does not start with IDR: firstIDR ${firstKeyFrame}/${videoSampleCount} dropped: ${track.dropped} start: ${track.firstKeyFramePTS || \"NA\"}`);\n      }\n    }\n    result.initSegment = initSegment;\n    result.id3 = flushTextTrackMetadataCueSamples(id3Track, timeOffset, initPTS, initPTS);\n    if (textTrack.samples.length) {\n      result.text = flushTextTrackUserdataCueSamples(textTrack, timeOffset, initPTS);\n    }\n    return result;\n  }\n}\nfunction toStartEndOrDefault(trackTimes, defaultValue, end = false) {\n  return (trackTimes == null ? void 0 : trackTimes.start) !== void 0 ? (trackTimes.start + (end ? trackTimes.duration : 0)) / trackTimes.timescale : defaultValue;\n}\nfunction isInvalidInitPts(initPTS, startDTS, timeOffset, duration) {\n  if (initPTS === null) {\n    return true;\n  }\n  const minDuration = Math.max(duration, 1);\n  const startTime = startDTS - initPTS.baseTime / initPTS.timescale;\n  return Math.abs(startTime - timeOffset) > minDuration;\n}\nfunction getParsedTrackCodec(track, type, logger2) {\n  const parsedCodec = track == null ? void 0 : track.codec;\n  if (parsedCodec && parsedCodec.length > 4) {\n    return parsedCodec;\n  }\n  if (type === ElementaryStreamTypes.AUDIO) {\n    if (parsedCodec === \"ec-3\" || parsedCodec === \"ac-3\" || parsedCodec === \"alac\") {\n      return parsedCodec;\n    }\n    if (parsedCodec === \"fLaC\" || parsedCodec === \"Opus\") {\n      const preferManagedMediaSource = false;\n      return getCodecCompatibleName(parsedCodec, preferManagedMediaSource);\n    }\n    logger2.warn(`Unhandled audio codec \"${parsedCodec}\" in mp4 MAP`);\n    return parsedCodec || \"mp4a\";\n  }\n  logger2.warn(`Unhandled video codec \"${parsedCodec}\" in mp4 MAP`);\n  return parsedCodec || \"avc1\";\n}\nlet now;\ntry {\n  now = self.performance.now.bind(self.performance);\n} catch (err) {\n  now = Date.now;\n}\nconst muxConfig = [{\n  demux: MP4Demuxer,\n  remux: PassThroughRemuxer\n}, {\n  demux: TSDemuxer,\n  remux: MP4Remuxer\n}, {\n  demux: AACDemuxer,\n  remux: MP4Remuxer\n}, {\n  demux: MP3Demuxer,\n  remux: MP4Remuxer\n}];\n{\n  muxConfig.splice(2, 0, {\n    demux: AC3Demuxer,\n    remux: MP4Remuxer\n  });\n}\nclass Transmuxer {\n  constructor(observer, typeSupported, config, vendor, id, logger2) {\n    this.asyncResult = false;\n    this.logger = void 0;\n    this.observer = void 0;\n    this.typeSupported = void 0;\n    this.config = void 0;\n    this.id = void 0;\n    this.demuxer = void 0;\n    this.remuxer = void 0;\n    this.decrypter = void 0;\n    this.probe = void 0;\n    this.decryptionPromise = null;\n    this.transmuxConfig = void 0;\n    this.currentTransmuxState = void 0;\n    this.observer = observer;\n    this.typeSupported = typeSupported;\n    this.config = config;\n    this.id = id;\n    this.logger = logger2;\n  }\n  configure(transmuxConfig) {\n    this.transmuxConfig = transmuxConfig;\n    if (this.decrypter) {\n      this.decrypter.reset();\n    }\n  }\n  push(data, decryptdata, chunkMeta, state) {\n    const stats = chunkMeta.transmuxing;\n    stats.executeStart = now();\n    let uintData = new Uint8Array(data);\n    const {\n      currentTransmuxState,\n      transmuxConfig\n    } = this;\n    if (state) {\n      this.currentTransmuxState = state;\n    }\n    const {\n      contiguous,\n      discontinuity,\n      trackSwitch,\n      accurateTimeOffset,\n      timeOffset,\n      initSegmentChange\n    } = state || currentTransmuxState;\n    const {\n      audioCodec,\n      videoCodec,\n      defaultInitPts,\n      duration,\n      initSegmentData\n    } = transmuxConfig;\n    const keyData = getEncryptionType(uintData, decryptdata);\n    if (keyData && isFullSegmentEncryption(keyData.method)) {\n      const decrypter = this.getDecrypter();\n      const aesMode = getAesModeFromFullSegmentMethod(keyData.method);\n      if (decrypter.isSync()) {\n        let decryptedData = decrypter.softwareDecrypt(uintData, keyData.key.buffer, keyData.iv.buffer, aesMode);\n        const loadingParts = chunkMeta.part > -1;\n        if (loadingParts) {\n          const _data = decrypter.flush();\n          decryptedData = _data ? _data.buffer : _data;\n        }\n        if (!decryptedData) {\n          stats.executeEnd = now();\n          return emptyResult(chunkMeta);\n        }\n        uintData = new Uint8Array(decryptedData);\n      } else {\n        this.asyncResult = true;\n        this.decryptionPromise = decrypter.webCryptoDecrypt(uintData, keyData.key.buffer, keyData.iv.buffer, aesMode).then((decryptedData) => {\n          const result2 = this.push(decryptedData, null, chunkMeta);\n          this.decryptionPromise = null;\n          return result2;\n        });\n        return this.decryptionPromise;\n      }\n    }\n    const resetMuxers = this.needsProbing(discontinuity, trackSwitch);\n    if (resetMuxers) {\n      const error = this.configureTransmuxer(uintData);\n      if (error) {\n        this.logger.warn(`[transmuxer] ${error.message}`);\n        this.observer.emit(Events.ERROR, Events.ERROR, {\n          type: ErrorTypes.MEDIA_ERROR,\n          details: ErrorDetails.FRAG_PARSING_ERROR,\n          fatal: false,\n          error,\n          reason: error.message\n        });\n        stats.executeEnd = now();\n        return emptyResult(chunkMeta);\n      }\n    }\n    if (discontinuity || trackSwitch || initSegmentChange || resetMuxers) {\n      this.resetInitSegment(initSegmentData, audioCodec, videoCodec, duration, decryptdata);\n    }\n    if (discontinuity || initSegmentChange || resetMuxers) {\n      this.resetInitialTimestamp(defaultInitPts);\n    }\n    if (!contiguous) {\n      this.resetContiguity();\n    }\n    const result = this.transmux(uintData, keyData, timeOffset, accurateTimeOffset, chunkMeta);\n    this.asyncResult = isPromise(result);\n    const currentState = this.currentTransmuxState;\n    currentState.contiguous = true;\n    currentState.discontinuity = false;\n    currentState.trackSwitch = false;\n    stats.executeEnd = now();\n    return result;\n  }\n  // Due to data caching, flush calls can produce more than one TransmuxerResult (hence the Array type)\n  flush(chunkMeta) {\n    const stats = chunkMeta.transmuxing;\n    stats.executeStart = now();\n    const {\n      decrypter,\n      currentTransmuxState,\n      decryptionPromise\n    } = this;\n    if (decryptionPromise) {\n      this.asyncResult = true;\n      return decryptionPromise.then(() => {\n        return this.flush(chunkMeta);\n      });\n    }\n    const transmuxResults = [];\n    const {\n      timeOffset\n    } = currentTransmuxState;\n    if (decrypter) {\n      const decryptedData = decrypter.flush();\n      if (decryptedData) {\n        transmuxResults.push(this.push(decryptedData.buffer, null, chunkMeta));\n      }\n    }\n    const {\n      demuxer,\n      remuxer\n    } = this;\n    if (!demuxer || !remuxer) {\n      stats.executeEnd = now();\n      const emptyResults = [emptyResult(chunkMeta)];\n      if (this.asyncResult) {\n        return Promise.resolve(emptyResults);\n      }\n      return emptyResults;\n    }\n    const demuxResultOrPromise = demuxer.flush(timeOffset);\n    if (isPromise(demuxResultOrPromise)) {\n      this.asyncResult = true;\n      return demuxResultOrPromise.then((demuxResult) => {\n        this.flushRemux(transmuxResults, demuxResult, chunkMeta);\n        return transmuxResults;\n      });\n    }\n    this.flushRemux(transmuxResults, demuxResultOrPromise, chunkMeta);\n    if (this.asyncResult) {\n      return Promise.resolve(transmuxResults);\n    }\n    return transmuxResults;\n  }\n  flushRemux(transmuxResults, demuxResult, chunkMeta) {\n    const {\n      audioTrack,\n      videoTrack,\n      id3Track,\n      textTrack\n    } = demuxResult;\n    const {\n      accurateTimeOffset,\n      timeOffset\n    } = this.currentTransmuxState;\n    this.logger.log(`[transmuxer.ts]: Flushed ${this.id} sn: ${chunkMeta.sn}${chunkMeta.part > -1 ? \" part: \" + chunkMeta.part : \"\"} of ${this.id === PlaylistLevelType.MAIN ? \"level\" : \"track\"} ${chunkMeta.level}`);\n    const remuxResult = this.remuxer.remux(audioTrack, videoTrack, id3Track, textTrack, timeOffset, accurateTimeOffset, true, this.id);\n    transmuxResults.push({\n      remuxResult,\n      chunkMeta\n    });\n    chunkMeta.transmuxing.executeEnd = now();\n  }\n  resetInitialTimestamp(defaultInitPts) {\n    const {\n      demuxer,\n      remuxer\n    } = this;\n    if (!demuxer || !remuxer) {\n      return;\n    }\n    demuxer.resetTimeStamp(defaultInitPts);\n    remuxer.resetTimeStamp(defaultInitPts);\n  }\n  resetContiguity() {\n    const {\n      demuxer,\n      remuxer\n    } = this;\n    if (!demuxer || !remuxer) {\n      return;\n    }\n    demuxer.resetContiguity();\n    remuxer.resetNextTimestamp();\n  }\n  resetInitSegment(initSegmentData, audioCodec, videoCodec, trackDuration, decryptdata) {\n    const {\n      demuxer,\n      remuxer\n    } = this;\n    if (!demuxer || !remuxer) {\n      return;\n    }\n    demuxer.resetInitSegment(initSegmentData, audioCodec, videoCodec, trackDuration);\n    remuxer.resetInitSegment(initSegmentData, audioCodec, videoCodec, decryptdata);\n  }\n  destroy() {\n    if (this.demuxer) {\n      this.demuxer.destroy();\n      this.demuxer = void 0;\n    }\n    if (this.remuxer) {\n      this.remuxer.destroy();\n      this.remuxer = void 0;\n    }\n  }\n  transmux(data, keyData, timeOffset, accurateTimeOffset, chunkMeta) {\n    let result;\n    if (keyData && keyData.method === \"SAMPLE-AES\") {\n      result = this.transmuxSampleAes(data, keyData, timeOffset, accurateTimeOffset, chunkMeta);\n    } else {\n      result = this.transmuxUnencrypted(data, timeOffset, accurateTimeOffset, chunkMeta);\n    }\n    return result;\n  }\n  transmuxUnencrypted(data, timeOffset, accurateTimeOffset, chunkMeta) {\n    const {\n      audioTrack,\n      videoTrack,\n      id3Track,\n      textTrack\n    } = this.demuxer.demux(data, timeOffset, false, !this.config.progressive);\n    const remuxResult = this.remuxer.remux(audioTrack, videoTrack, id3Track, textTrack, timeOffset, accurateTimeOffset, false, this.id);\n    return {\n      remuxResult,\n      chunkMeta\n    };\n  }\n  transmuxSampleAes(data, decryptData, timeOffset, accurateTimeOffset, chunkMeta) {\n    return this.demuxer.demuxSampleAes(data, decryptData, timeOffset).then((demuxResult) => {\n      const remuxResult = this.remuxer.remux(demuxResult.audioTrack, demuxResult.videoTrack, demuxResult.id3Track, demuxResult.textTrack, timeOffset, accurateTimeOffset, false, this.id);\n      return {\n        remuxResult,\n        chunkMeta\n      };\n    });\n  }\n  configureTransmuxer(data) {\n    const {\n      config,\n      observer,\n      typeSupported\n    } = this;\n    let mux;\n    for (let i = 0, len = muxConfig.length; i < len; i++) {\n      var _muxConfig$i$demux;\n      if ((_muxConfig$i$demux = muxConfig[i].demux) != null && _muxConfig$i$demux.probe(data, this.logger)) {\n        mux = muxConfig[i];\n        break;\n      }\n    }\n    if (!mux) {\n      return new Error(\"Failed to find demuxer by probing fragment data\");\n    }\n    const demuxer = this.demuxer;\n    const remuxer = this.remuxer;\n    const Remuxer = mux.remux;\n    const Demuxer = mux.demux;\n    if (!remuxer || !(remuxer instanceof Remuxer)) {\n      this.remuxer = new Remuxer(observer, config, typeSupported, this.logger);\n    }\n    if (!demuxer || !(demuxer instanceof Demuxer)) {\n      this.demuxer = new Demuxer(observer, config, typeSupported, this.logger);\n      this.probe = Demuxer.probe;\n    }\n  }\n  needsProbing(discontinuity, trackSwitch) {\n    return !this.demuxer || !this.remuxer || discontinuity || trackSwitch;\n  }\n  getDecrypter() {\n    let decrypter = this.decrypter;\n    if (!decrypter) {\n      decrypter = this.decrypter = new Decrypter(this.config);\n    }\n    return decrypter;\n  }\n}\nfunction getEncryptionType(data, decryptData) {\n  let encryptionType = null;\n  if (data.byteLength > 0 && (decryptData == null ? void 0 : decryptData.key) != null && decryptData.iv !== null && decryptData.method != null) {\n    encryptionType = decryptData;\n  }\n  return encryptionType;\n}\nconst emptyResult = (chunkMeta) => ({\n  remuxResult: {},\n  chunkMeta\n});\nfunction isPromise(p) {\n  return \"then\" in p && p.then instanceof Function;\n}\nclass TransmuxConfig {\n  constructor(audioCodec, videoCodec, initSegmentData, duration, defaultInitPts) {\n    this.audioCodec = void 0;\n    this.videoCodec = void 0;\n    this.initSegmentData = void 0;\n    this.duration = void 0;\n    this.defaultInitPts = void 0;\n    this.audioCodec = audioCodec;\n    this.videoCodec = videoCodec;\n    this.initSegmentData = initSegmentData;\n    this.duration = duration;\n    this.defaultInitPts = defaultInitPts || null;\n  }\n}\nclass TransmuxState {\n  constructor(discontinuity, contiguous, accurateTimeOffset, trackSwitch, timeOffset, initSegmentChange) {\n    this.discontinuity = void 0;\n    this.contiguous = void 0;\n    this.accurateTimeOffset = void 0;\n    this.trackSwitch = void 0;\n    this.timeOffset = void 0;\n    this.initSegmentChange = void 0;\n    this.discontinuity = discontinuity;\n    this.contiguous = contiguous;\n    this.accurateTimeOffset = accurateTimeOffset;\n    this.trackSwitch = trackSwitch;\n    this.timeOffset = timeOffset;\n    this.initSegmentChange = initSegmentChange;\n  }\n}\nlet transmuxerInstanceCount = 0;\nclass TransmuxerInterface {\n  constructor(_hls, id, onTransmuxComplete, onFlush) {\n    this.error = null;\n    this.hls = void 0;\n    this.id = void 0;\n    this.instanceNo = transmuxerInstanceCount++;\n    this.observer = void 0;\n    this.frag = null;\n    this.part = null;\n    this.useWorker = void 0;\n    this.workerContext = null;\n    this.transmuxer = null;\n    this.onTransmuxComplete = void 0;\n    this.onFlush = void 0;\n    this.onWorkerMessage = (event) => {\n      const data = event.data;\n      const hls = this.hls;\n      if (!hls || !(data != null && data.event) || data.instanceNo !== this.instanceNo) {\n        return;\n      }\n      switch (data.event) {\n        case \"init\": {\n          var _this$workerContext;\n          const objectURL = (_this$workerContext = this.workerContext) == null ? void 0 : _this$workerContext.objectURL;\n          if (objectURL) {\n            self.URL.revokeObjectURL(objectURL);\n          }\n          break;\n        }\n        case \"transmuxComplete\": {\n          this.handleTransmuxComplete(data.data);\n          break;\n        }\n        case \"flush\": {\n          this.onFlush(data.data);\n          break;\n        }\n        // pass logs from the worker thread to the main logger\n        case \"workerLog\": {\n          if (hls.logger[data.data.logType]) {\n            hls.logger[data.data.logType](data.data.message);\n          }\n          break;\n        }\n        default: {\n          data.data = data.data || {};\n          data.data.frag = this.frag;\n          data.data.part = this.part;\n          data.data.id = this.id;\n          hls.trigger(data.event, data.data);\n          break;\n        }\n      }\n    };\n    this.onWorkerError = (event) => {\n      if (!this.hls) {\n        return;\n      }\n      const error = new Error(`${event.message}  (${event.filename}:${event.lineno})`);\n      this.hls.config.enableWorker = false;\n      this.hls.logger.warn(`Error in \"${this.id}\" Web Worker, fallback to inline`);\n      this.hls.trigger(Events.ERROR, {\n        type: ErrorTypes.OTHER_ERROR,\n        details: ErrorDetails.INTERNAL_EXCEPTION,\n        fatal: false,\n        event: \"demuxerWorker\",\n        error\n      });\n    };\n    const config = _hls.config;\n    this.hls = _hls;\n    this.id = id;\n    this.useWorker = !!config.enableWorker;\n    this.onTransmuxComplete = onTransmuxComplete;\n    this.onFlush = onFlush;\n    const forwardMessage = (ev, data) => {\n      data = data || {};\n      data.frag = this.frag || void 0;\n      if (ev === Events.ERROR) {\n        data = data;\n        data.parent = this.id;\n        data.part = this.part;\n        this.error = data.error;\n      }\n      this.hls.trigger(ev, data);\n    };\n    this.observer = new EventEmitter$1();\n    this.observer.on(Events.FRAG_DECRYPTED, forwardMessage);\n    this.observer.on(Events.ERROR, forwardMessage);\n    const m2tsTypeSupported = getM2TSSupportedAudioTypes(config.preferManagedMediaSource);\n    if (this.useWorker && typeof Worker !== \"undefined\") {\n      const logger2 = this.hls.logger;\n      const canCreateWorker = config.workerPath || hasUMDWorker();\n      if (canCreateWorker) {\n        try {\n          if (config.workerPath) {\n            logger2.log(`loading Web Worker ${config.workerPath} for \"${id}\"`);\n            this.workerContext = loadWorker(config.workerPath);\n          } else {\n            logger2.log(`injecting Web Worker for \"${id}\"`);\n            this.workerContext = injectWorker();\n          }\n          const {\n            worker\n          } = this.workerContext;\n          worker.addEventListener(\"message\", this.onWorkerMessage);\n          worker.addEventListener(\"error\", this.onWorkerError);\n          worker.postMessage({\n            instanceNo: this.instanceNo,\n            cmd: \"init\",\n            typeSupported: m2tsTypeSupported,\n            id,\n            config: stringify(config)\n          });\n        } catch (err) {\n          logger2.warn(`Error setting up \"${id}\" Web Worker, fallback to inline`, err);\n          this.terminateWorker();\n          this.error = null;\n          this.transmuxer = new Transmuxer(this.observer, m2tsTypeSupported, config, \"\", id, _hls.logger);\n        }\n        return;\n      }\n    }\n    this.transmuxer = new Transmuxer(this.observer, m2tsTypeSupported, config, \"\", id, _hls.logger);\n  }\n  reset() {\n    this.frag = null;\n    this.part = null;\n    if (this.workerContext) {\n      const instanceNo = this.instanceNo;\n      this.instanceNo = transmuxerInstanceCount++;\n      const config = this.hls.config;\n      const m2tsTypeSupported = getM2TSSupportedAudioTypes(config.preferManagedMediaSource);\n      this.workerContext.worker.postMessage({\n        instanceNo: this.instanceNo,\n        cmd: \"reset\",\n        resetNo: instanceNo,\n        typeSupported: m2tsTypeSupported,\n        id: this.id,\n        config: stringify(config)\n      });\n    }\n  }\n  terminateWorker() {\n    if (this.workerContext) {\n      const {\n        worker\n      } = this.workerContext;\n      this.workerContext = null;\n      worker.removeEventListener(\"message\", this.onWorkerMessage);\n      worker.removeEventListener(\"error\", this.onWorkerError);\n      removeWorkerFromStore(this.hls.config.workerPath);\n    }\n  }\n  destroy() {\n    if (this.workerContext) {\n      this.terminateWorker();\n      this.onWorkerMessage = this.onWorkerError = null;\n    } else {\n      const transmuxer = this.transmuxer;\n      if (transmuxer) {\n        transmuxer.destroy();\n        this.transmuxer = null;\n      }\n    }\n    const observer = this.observer;\n    if (observer) {\n      observer.removeAllListeners();\n    }\n    this.frag = null;\n    this.part = null;\n    this.observer = null;\n    this.hls = null;\n  }\n  push(data, initSegmentData, audioCodec, videoCodec, frag, part, duration, accurateTimeOffset, chunkMeta, defaultInitPTS) {\n    var _frag$initSegment, _lastFrag$initSegment;\n    chunkMeta.transmuxing.start = self.performance.now();\n    const {\n      instanceNo,\n      transmuxer\n    } = this;\n    const timeOffset = part ? part.start : frag.start;\n    const decryptdata = frag.decryptdata;\n    const lastFrag = this.frag;\n    const discontinuity = !(lastFrag && frag.cc === lastFrag.cc);\n    const trackSwitch = !(lastFrag && chunkMeta.level === lastFrag.level);\n    const snDiff = lastFrag ? chunkMeta.sn - lastFrag.sn : -1;\n    const partDiff = this.part ? chunkMeta.part - this.part.index : -1;\n    const progressive = snDiff === 0 && chunkMeta.id > 1 && chunkMeta.id === (lastFrag == null ? void 0 : lastFrag.stats.chunkCount);\n    const contiguous = !trackSwitch && (snDiff === 1 || snDiff === 0 && (partDiff === 1 || progressive && partDiff <= 0));\n    const now2 = self.performance.now();\n    if (trackSwitch || snDiff || frag.stats.parsing.start === 0) {\n      frag.stats.parsing.start = now2;\n    }\n    if (part && (partDiff || !contiguous)) {\n      part.stats.parsing.start = now2;\n    }\n    const initSegmentChange = !(lastFrag && ((_frag$initSegment = frag.initSegment) == null ? void 0 : _frag$initSegment.url) === ((_lastFrag$initSegment = lastFrag.initSegment) == null ? void 0 : _lastFrag$initSegment.url));\n    const state = new TransmuxState(discontinuity, contiguous, accurateTimeOffset, trackSwitch, timeOffset, initSegmentChange);\n    if (!contiguous || discontinuity || initSegmentChange) {\n      this.hls.logger.log(`[transmuxer-interface]: Starting new transmux session for ${frag.type} sn: ${chunkMeta.sn}${chunkMeta.part > -1 ? \" part: \" + chunkMeta.part : \"\"} ${this.id === PlaylistLevelType.MAIN ? \"level\" : \"track\"}: ${chunkMeta.level} id: ${chunkMeta.id}\n        discontinuity: ${discontinuity}\n        trackSwitch: ${trackSwitch}\n        contiguous: ${contiguous}\n        accurateTimeOffset: ${accurateTimeOffset}\n        timeOffset: ${timeOffset}\n        initSegmentChange: ${initSegmentChange}`);\n      const config = new TransmuxConfig(audioCodec, videoCodec, initSegmentData, duration, defaultInitPTS);\n      this.configureTransmuxer(config);\n    }\n    this.frag = frag;\n    this.part = part;\n    if (this.workerContext) {\n      this.workerContext.worker.postMessage({\n        instanceNo,\n        cmd: \"demux\",\n        data,\n        decryptdata,\n        chunkMeta,\n        state\n      }, data instanceof ArrayBuffer ? [data] : []);\n    } else if (transmuxer) {\n      const transmuxResult = transmuxer.push(data, decryptdata, chunkMeta, state);\n      if (isPromise(transmuxResult)) {\n        transmuxResult.then((data2) => {\n          this.handleTransmuxComplete(data2);\n        }).catch((error) => {\n          this.transmuxerError(error, chunkMeta, \"transmuxer-interface push error\");\n        });\n      } else {\n        this.handleTransmuxComplete(transmuxResult);\n      }\n    }\n  }\n  flush(chunkMeta) {\n    chunkMeta.transmuxing.start = self.performance.now();\n    const {\n      instanceNo,\n      transmuxer\n    } = this;\n    if (this.workerContext) {\n      this.workerContext.worker.postMessage({\n        instanceNo,\n        cmd: \"flush\",\n        chunkMeta\n      });\n    } else if (transmuxer) {\n      const transmuxResult = transmuxer.flush(chunkMeta);\n      if (isPromise(transmuxResult)) {\n        transmuxResult.then((data) => {\n          this.handleFlushResult(data, chunkMeta);\n        }).catch((error) => {\n          this.transmuxerError(error, chunkMeta, \"transmuxer-interface flush error\");\n        });\n      } else {\n        this.handleFlushResult(transmuxResult, chunkMeta);\n      }\n    }\n  }\n  transmuxerError(error, chunkMeta, reason) {\n    if (!this.hls) {\n      return;\n    }\n    this.error = error;\n    this.hls.trigger(Events.ERROR, {\n      type: ErrorTypes.MEDIA_ERROR,\n      details: ErrorDetails.FRAG_PARSING_ERROR,\n      chunkMeta,\n      frag: this.frag || void 0,\n      part: this.part || void 0,\n      fatal: false,\n      error,\n      err: error,\n      reason\n    });\n  }\n  handleFlushResult(results, chunkMeta) {\n    results.forEach((result) => {\n      this.handleTransmuxComplete(result);\n    });\n    this.onFlush(chunkMeta);\n  }\n  configureTransmuxer(config) {\n    const {\n      instanceNo,\n      transmuxer\n    } = this;\n    if (this.workerContext) {\n      this.workerContext.worker.postMessage({\n        instanceNo,\n        cmd: \"configure\",\n        config\n      });\n    } else if (transmuxer) {\n      transmuxer.configure(config);\n    }\n  }\n  handleTransmuxComplete(result) {\n    result.chunkMeta.transmuxing.end = self.performance.now();\n    this.onTransmuxComplete(result);\n  }\n}\nconst TICK_INTERVAL$3 = 100;\nclass AudioStreamController extends BaseStreamController {\n  constructor(hls, fragmentTracker, keyLoader) {\n    super(hls, fragmentTracker, keyLoader, \"audio-stream-controller\", PlaylistLevelType.AUDIO);\n    this.mainAnchor = null;\n    this.mainFragLoading = null;\n    this.audioOnly = false;\n    this.bufferedTrack = null;\n    this.switchingTrack = null;\n    this.trackId = -1;\n    this.waitingData = null;\n    this.mainDetails = null;\n    this.flushing = false;\n    this.bufferFlushed = false;\n    this.cachedTrackLoadedData = null;\n    this.registerListeners();\n  }\n  onHandlerDestroying() {\n    this.unregisterListeners();\n    super.onHandlerDestroying();\n    this.resetItem();\n  }\n  resetItem() {\n    this.mainDetails = this.mainAnchor = this.mainFragLoading = this.bufferedTrack = this.switchingTrack = this.waitingData = this.cachedTrackLoadedData = null;\n  }\n  registerListeners() {\n    super.registerListeners();\n    const {\n      hls\n    } = this;\n    hls.on(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.on(Events.AUDIO_TRACKS_UPDATED, this.onAudioTracksUpdated, this);\n    hls.on(Events.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this);\n    hls.on(Events.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this);\n    hls.on(Events.BUFFER_RESET, this.onBufferReset, this);\n    hls.on(Events.BUFFER_CREATED, this.onBufferCreated, this);\n    hls.on(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n    hls.on(Events.BUFFER_FLUSHED, this.onBufferFlushed, this);\n    hls.on(Events.INIT_PTS_FOUND, this.onInitPtsFound, this);\n    hls.on(Events.FRAG_LOADING, this.onFragLoading, this);\n    hls.on(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    if (!hls) {\n      return;\n    }\n    super.unregisterListeners();\n    hls.off(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.off(Events.AUDIO_TRACKS_UPDATED, this.onAudioTracksUpdated, this);\n    hls.off(Events.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this);\n    hls.off(Events.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this);\n    hls.off(Events.BUFFER_RESET, this.onBufferReset, this);\n    hls.off(Events.BUFFER_CREATED, this.onBufferCreated, this);\n    hls.off(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n    hls.off(Events.BUFFER_FLUSHED, this.onBufferFlushed, this);\n    hls.off(Events.INIT_PTS_FOUND, this.onInitPtsFound, this);\n    hls.off(Events.FRAG_LOADING, this.onFragLoading, this);\n    hls.off(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n  }\n  // INIT_PTS_FOUND is triggered when the video track parsed in the stream-controller has a new PTS value\n  onInitPtsFound(event, {\n    frag,\n    id,\n    initPTS,\n    timescale\n  }) {\n    if (id === PlaylistLevelType.MAIN) {\n      const cc = frag.cc;\n      const inFlightFrag = this.fragCurrent;\n      this.initPTS[cc] = {\n        baseTime: initPTS,\n        timescale\n      };\n      this.log(`InitPTS for cc: ${cc} found from main: ${initPTS}/${timescale}`);\n      this.mainAnchor = frag;\n      if (this.state === State.WAITING_INIT_PTS) {\n        const waitingData = this.waitingData;\n        if (!waitingData && !this.loadingParts || waitingData && waitingData.frag.cc !== cc) {\n          this.syncWithAnchor(frag, waitingData == null ? void 0 : waitingData.frag);\n        }\n      } else if (!this.hls.hasEnoughToStart && inFlightFrag && inFlightFrag.cc !== cc) {\n        inFlightFrag.abortRequests();\n        this.syncWithAnchor(frag, inFlightFrag);\n      } else if (this.state === State.IDLE) {\n        this.tick();\n      }\n    }\n  }\n  getLoadPosition() {\n    if (!this.startFragRequested && this.nextLoadPosition >= 0) {\n      return this.nextLoadPosition;\n    }\n    return super.getLoadPosition();\n  }\n  syncWithAnchor(mainAnchor, waitingToAppend) {\n    var _this$mainFragLoading;\n    const mainFragLoading = ((_this$mainFragLoading = this.mainFragLoading) == null ? void 0 : _this$mainFragLoading.frag) || null;\n    if (waitingToAppend) {\n      if ((mainFragLoading == null ? void 0 : mainFragLoading.cc) === waitingToAppend.cc) {\n        return;\n      }\n    }\n    const targetDiscontinuity = (mainFragLoading || mainAnchor).cc;\n    const trackDetails = this.getLevelDetails();\n    const pos = this.getLoadPosition();\n    const syncFrag = findNearestWithCC(trackDetails, targetDiscontinuity, pos);\n    if (syncFrag) {\n      this.log(`Syncing with main frag at ${syncFrag.start} cc ${syncFrag.cc}`);\n      this.startFragRequested = false;\n      this.nextLoadPosition = syncFrag.start;\n      this.resetLoadingState();\n      if (this.state === State.IDLE) {\n        this.doTickIdle();\n      }\n    }\n  }\n  startLoad(startPosition, skipSeekToStartPosition) {\n    if (!this.levels) {\n      this.startPosition = startPosition;\n      this.state = State.STOPPED;\n      return;\n    }\n    const lastCurrentTime = this.lastCurrentTime;\n    this.stopLoad();\n    this.setInterval(TICK_INTERVAL$3);\n    if (lastCurrentTime > 0 && startPosition === -1) {\n      this.log(`Override startPosition with lastCurrentTime @${lastCurrentTime.toFixed(3)}`);\n      startPosition = lastCurrentTime;\n      this.state = State.IDLE;\n    } else {\n      this.state = State.WAITING_TRACK;\n    }\n    this.nextLoadPosition = this.lastCurrentTime = startPosition + this.timelineOffset;\n    this.startPosition = skipSeekToStartPosition ? -1 : startPosition;\n    this.tick();\n  }\n  doTick() {\n    switch (this.state) {\n      case State.IDLE:\n        this.doTickIdle();\n        break;\n      case State.WAITING_TRACK: {\n        const {\n          levels,\n          trackId\n        } = this;\n        const currenTrack = levels == null ? void 0 : levels[trackId];\n        const details = currenTrack == null ? void 0 : currenTrack.details;\n        if (details && !this.waitForLive(currenTrack)) {\n          if (this.waitForCdnTuneIn(details)) {\n            break;\n          }\n          this.state = State.WAITING_INIT_PTS;\n        }\n        break;\n      }\n      case State.FRAG_LOADING_WAITING_RETRY: {\n        var _this$media;\n        const now2 = performance.now();\n        const retryDate = this.retryDate;\n        if (!retryDate || now2 >= retryDate || (_this$media = this.media) != null && _this$media.seeking) {\n          const {\n            levels,\n            trackId\n          } = this;\n          this.log(\"RetryDate reached, switch back to IDLE state\");\n          this.resetStartWhenNotLoaded((levels == null ? void 0 : levels[trackId]) || null);\n          this.state = State.IDLE;\n        }\n        break;\n      }\n      case State.WAITING_INIT_PTS: {\n        const waitingData = this.waitingData;\n        if (waitingData) {\n          const {\n            frag,\n            part,\n            cache,\n            complete\n          } = waitingData;\n          const mainAnchor = this.mainAnchor;\n          if (this.initPTS[frag.cc] !== void 0) {\n            this.waitingData = null;\n            this.state = State.FRAG_LOADING;\n            const payload = cache.flush().buffer;\n            const data = {\n              frag,\n              part,\n              payload,\n              networkDetails: null\n            };\n            this._handleFragmentLoadProgress(data);\n            if (complete) {\n              super._handleFragmentLoadComplete(data);\n            }\n          } else if (mainAnchor && mainAnchor.cc !== waitingData.frag.cc) {\n            this.syncWithAnchor(mainAnchor, waitingData.frag);\n          }\n        } else {\n          this.state = State.IDLE;\n        }\n      }\n    }\n    this.onTickEnd();\n  }\n  resetLoadingState() {\n    const waitingData = this.waitingData;\n    if (waitingData) {\n      this.fragmentTracker.removeFragment(waitingData.frag);\n      this.waitingData = null;\n    }\n    super.resetLoadingState();\n  }\n  onTickEnd() {\n    const {\n      media\n    } = this;\n    if (!(media != null && media.readyState)) {\n      return;\n    }\n    this.lastCurrentTime = media.currentTime;\n  }\n  doTickIdle() {\n    var _this$mainFragLoading2;\n    const {\n      hls,\n      levels,\n      media,\n      trackId\n    } = this;\n    const config = hls.config;\n    if (!this.buffering || !media && !this.primaryPrefetch && (this.startFragRequested || !config.startFragPrefetch) || !(levels != null && levels[trackId])) {\n      return;\n    }\n    const levelInfo = levels[trackId];\n    const trackDetails = levelInfo.details;\n    if (!trackDetails || this.waitForLive(levelInfo) || this.waitForCdnTuneIn(trackDetails)) {\n      this.state = State.WAITING_TRACK;\n      this.startFragRequested = false;\n      return;\n    }\n    const bufferable = this.mediaBuffer ? this.mediaBuffer : this.media;\n    if (this.bufferFlushed && bufferable) {\n      this.bufferFlushed = false;\n      this.afterBufferFlushed(bufferable, ElementaryStreamTypes.AUDIO, PlaylistLevelType.AUDIO);\n    }\n    const bufferInfo = this.getFwdBufferInfo(bufferable, PlaylistLevelType.AUDIO);\n    if (bufferInfo === null) {\n      return;\n    }\n    if (!this.switchingTrack && this._streamEnded(bufferInfo, trackDetails)) {\n      hls.trigger(Events.BUFFER_EOS, {\n        type: \"audio\"\n      });\n      this.state = State.ENDED;\n      return;\n    }\n    const bufferLen = bufferInfo.len;\n    const maxBufLen = hls.maxBufferLength;\n    const fragments = trackDetails.fragments;\n    const start = fragments[0].start;\n    const loadPosition = this.getLoadPosition();\n    const targetBufferTime = this.flushing ? loadPosition : bufferInfo.end;\n    if (this.switchingTrack && media) {\n      const pos = loadPosition;\n      if (trackDetails.PTSKnown && pos < start) {\n        if (bufferInfo.end > start || bufferInfo.nextStart) {\n          this.log(\"Alt audio track ahead of main track, seek to start of alt audio track\");\n          media.currentTime = start + 0.05;\n        }\n      }\n    }\n    if (bufferLen >= maxBufLen && !this.switchingTrack && targetBufferTime < fragments[fragments.length - 1].start) {\n      return;\n    }\n    let frag = this.getNextFragment(targetBufferTime, trackDetails);\n    if (frag && this.isLoopLoading(frag, targetBufferTime)) {\n      frag = this.getNextFragmentLoopLoading(frag, trackDetails, bufferInfo, PlaylistLevelType.MAIN, maxBufLen);\n    }\n    if (!frag) {\n      this.bufferFlushed = true;\n      return;\n    }\n    let mainFragLoading = ((_this$mainFragLoading2 = this.mainFragLoading) == null ? void 0 : _this$mainFragLoading2.frag) || null;\n    if (!this.audioOnly && this.startFragRequested && mainFragLoading && isMediaFragment(frag) && !frag.endList && (!trackDetails.live || !this.loadingParts && targetBufferTime < this.hls.liveSyncPosition)) {\n      if (this.fragmentTracker.getState(mainFragLoading) === FragmentState.OK) {\n        this.mainFragLoading = mainFragLoading = null;\n      }\n      if (mainFragLoading && isMediaFragment(mainFragLoading)) {\n        if (frag.start > mainFragLoading.end) {\n          const mainFragAtPos = this.fragmentTracker.getFragAtPos(targetBufferTime, PlaylistLevelType.MAIN);\n          if (mainFragAtPos && mainFragAtPos.end > mainFragLoading.end) {\n            mainFragLoading = mainFragAtPos;\n            this.mainFragLoading = {\n              frag: mainFragAtPos,\n              targetBufferTime: null\n            };\n          }\n        }\n        const atBufferSyncLimit = frag.start > mainFragLoading.end;\n        if (atBufferSyncLimit) {\n          return;\n        }\n      }\n    }\n    this.loadFragment(frag, levelInfo, targetBufferTime);\n  }\n  onMediaDetaching(event, data) {\n    this.bufferFlushed = this.flushing = false;\n    super.onMediaDetaching(event, data);\n  }\n  onAudioTracksUpdated(event, {\n    audioTracks\n  }) {\n    this.resetTransmuxer();\n    this.levels = audioTracks.map((mediaPlaylist) => new Level(mediaPlaylist));\n  }\n  onAudioTrackSwitching(event, data) {\n    const altAudio = !!data.url;\n    this.trackId = data.id;\n    const {\n      fragCurrent\n    } = this;\n    if (fragCurrent) {\n      fragCurrent.abortRequests();\n      this.removeUnbufferedFrags(fragCurrent.start);\n    }\n    this.resetLoadingState();\n    if (altAudio) {\n      this.switchingTrack = data;\n      this.flushAudioIfNeeded(data);\n      if (this.state !== State.STOPPED) {\n        this.setInterval(TICK_INTERVAL$3);\n        this.state = State.IDLE;\n        this.tick();\n      }\n    } else {\n      this.resetTransmuxer();\n      this.switchingTrack = null;\n      this.bufferedTrack = data;\n      this.clearInterval();\n    }\n  }\n  onManifestLoading() {\n    super.onManifestLoading();\n    this.bufferFlushed = this.flushing = this.audioOnly = false;\n    this.resetItem();\n    this.trackId = -1;\n  }\n  onLevelLoaded(event, data) {\n    this.mainDetails = data.details;\n    const cachedTrackLoadedData = this.cachedTrackLoadedData;\n    if (cachedTrackLoadedData) {\n      this.cachedTrackLoadedData = null;\n      this.onAudioTrackLoaded(Events.AUDIO_TRACK_LOADED, cachedTrackLoadedData);\n    }\n  }\n  onAudioTrackLoaded(event, data) {\n    var _trackLevel$details;\n    const {\n      levels\n    } = this;\n    const {\n      details: newDetails,\n      id: trackId,\n      groupId,\n      track\n    } = data;\n    if (!levels) {\n      this.warn(`Audio tracks reset while loading track ${trackId} \"${track.name}\" of \"${groupId}\"`);\n      return;\n    }\n    const mainDetails = this.mainDetails;\n    if (!mainDetails || newDetails.endCC > mainDetails.endCC || mainDetails.expired) {\n      this.cachedTrackLoadedData = data;\n      if (this.state !== State.STOPPED) {\n        this.state = State.WAITING_TRACK;\n      }\n      return;\n    }\n    this.cachedTrackLoadedData = null;\n    this.log(`Audio track ${trackId} \"${track.name}\" of \"${groupId}\" loaded [${newDetails.startSN},${newDetails.endSN}]${newDetails.lastPartSn ? `[part-${newDetails.lastPartSn}-${newDetails.lastPartIndex}]` : \"\"},duration:${newDetails.totalduration}`);\n    const trackLevel = levels[trackId];\n    let sliding = 0;\n    if (newDetails.live || (_trackLevel$details = trackLevel.details) != null && _trackLevel$details.live) {\n      this.checkLiveUpdate(newDetails);\n      if (newDetails.deltaUpdateFailed) {\n        return;\n      }\n      if (trackLevel.details) {\n        var _this$levelLastLoaded;\n        sliding = this.alignPlaylists(newDetails, trackLevel.details, (_this$levelLastLoaded = this.levelLastLoaded) == null ? void 0 : _this$levelLastLoaded.details);\n      }\n      if (!newDetails.alignedSliding) {\n        alignDiscontinuities(newDetails, mainDetails);\n        if (!newDetails.alignedSliding) {\n          alignMediaPlaylistByPDT(newDetails, mainDetails);\n        }\n        sliding = newDetails.fragmentStart;\n      }\n    }\n    trackLevel.details = newDetails;\n    this.levelLastLoaded = trackLevel;\n    if (!this.startFragRequested) {\n      this.setStartPosition(mainDetails, sliding);\n    }\n    this.hls.trigger(Events.AUDIO_TRACK_UPDATED, {\n      details: newDetails,\n      id: trackId,\n      groupId: data.groupId\n    });\n    if (this.state === State.WAITING_TRACK && !this.waitForCdnTuneIn(newDetails)) {\n      this.state = State.IDLE;\n    }\n    this.tick();\n  }\n  _handleFragmentLoadProgress(data) {\n    var _frag$initSegment;\n    const frag = data.frag;\n    const {\n      part,\n      payload\n    } = data;\n    const {\n      config,\n      trackId,\n      levels\n    } = this;\n    if (!levels) {\n      this.warn(`Audio tracks were reset while fragment load was in progress. Fragment ${frag.sn} of level ${frag.level} will not be buffered`);\n      return;\n    }\n    const track = levels[trackId];\n    if (!track) {\n      this.warn(\"Audio track is undefined on fragment load progress\");\n      return;\n    }\n    const details = track.details;\n    if (!details) {\n      this.warn(\"Audio track details undefined on fragment load progress\");\n      this.removeUnbufferedFrags(frag.start);\n      return;\n    }\n    const audioCodec = config.defaultAudioCodec || track.audioCodec || \"mp4a.40.2\";\n    let transmuxer = this.transmuxer;\n    if (!transmuxer) {\n      transmuxer = this.transmuxer = new TransmuxerInterface(this.hls, PlaylistLevelType.AUDIO, this._handleTransmuxComplete.bind(this), this._handleTransmuxerFlush.bind(this));\n    }\n    const initPTS = this.initPTS[frag.cc];\n    const initSegmentData = (_frag$initSegment = frag.initSegment) == null ? void 0 : _frag$initSegment.data;\n    if (initPTS !== void 0) {\n      const accurateTimeOffset = false;\n      const partIndex = part ? part.index : -1;\n      const partial = partIndex !== -1;\n      const chunkMeta = new ChunkMetadata(frag.level, frag.sn, frag.stats.chunkCount, payload.byteLength, partIndex, partial);\n      transmuxer.push(payload, initSegmentData, audioCodec, \"\", frag, part, details.totalduration, accurateTimeOffset, chunkMeta, initPTS);\n    } else {\n      this.log(`Unknown video PTS for cc ${frag.cc}, waiting for video PTS before demuxing audio frag ${frag.sn} of [${details.startSN} ,${details.endSN}],track ${trackId}`);\n      const {\n        cache\n      } = this.waitingData = this.waitingData || {\n        frag,\n        part,\n        cache: new ChunkCache(),\n        complete: false\n      };\n      cache.push(new Uint8Array(payload));\n      if (this.state !== State.STOPPED) {\n        this.state = State.WAITING_INIT_PTS;\n      }\n    }\n  }\n  _handleFragmentLoadComplete(fragLoadedData) {\n    if (this.waitingData) {\n      this.waitingData.complete = true;\n      return;\n    }\n    super._handleFragmentLoadComplete(fragLoadedData);\n  }\n  onBufferReset() {\n    this.mediaBuffer = null;\n  }\n  onBufferCreated(event, data) {\n    this.bufferFlushed = this.flushing = false;\n    const audioTrack = data.tracks.audio;\n    if (audioTrack) {\n      this.mediaBuffer = audioTrack.buffer || null;\n    }\n  }\n  onFragLoading(event, data) {\n    if (!this.audioOnly && data.frag.type === PlaylistLevelType.MAIN && isMediaFragment(data.frag)) {\n      this.mainFragLoading = data;\n      if (this.state === State.IDLE) {\n        this.tick();\n      }\n    }\n  }\n  onFragBuffered(event, data) {\n    const {\n      frag,\n      part\n    } = data;\n    if (frag.type !== PlaylistLevelType.AUDIO) {\n      if (!this.audioOnly && frag.type === PlaylistLevelType.MAIN && !frag.elementaryStreams.video && !frag.elementaryStreams.audiovideo) {\n        this.audioOnly = true;\n        this.mainFragLoading = null;\n      }\n      return;\n    }\n    if (this.fragContextChanged(frag)) {\n      this.warn(`Fragment ${frag.sn}${part ? \" p: \" + part.index : \"\"} of level ${frag.level} finished buffering, but was aborted. state: ${this.state}, audioSwitch: ${this.switchingTrack ? this.switchingTrack.name : \"false\"}`);\n      return;\n    }\n    if (isMediaFragment(frag)) {\n      this.fragPrevious = frag;\n      const track = this.switchingTrack;\n      if (track) {\n        this.bufferedTrack = track;\n        this.switchingTrack = null;\n        this.hls.trigger(Events.AUDIO_TRACK_SWITCHED, _objectSpread2({}, track));\n      }\n    }\n    this.fragBufferedComplete(frag, part);\n    if (this.media) {\n      this.tick();\n    }\n  }\n  onError(event, data) {\n    var _data$context;\n    if (data.fatal) {\n      this.state = State.ERROR;\n      return;\n    }\n    switch (data.details) {\n      case ErrorDetails.FRAG_GAP:\n      case ErrorDetails.FRAG_PARSING_ERROR:\n      case ErrorDetails.FRAG_DECRYPT_ERROR:\n      case ErrorDetails.FRAG_LOAD_ERROR:\n      case ErrorDetails.FRAG_LOAD_TIMEOUT:\n      case ErrorDetails.KEY_LOAD_ERROR:\n      case ErrorDetails.KEY_LOAD_TIMEOUT:\n        this.onFragmentOrKeyLoadError(PlaylistLevelType.AUDIO, data);\n        break;\n      case ErrorDetails.AUDIO_TRACK_LOAD_ERROR:\n      case ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:\n      case ErrorDetails.LEVEL_PARSING_ERROR:\n        if (!data.levelRetry && this.state === State.WAITING_TRACK && ((_data$context = data.context) == null ? void 0 : _data$context.type) === PlaylistContextType.AUDIO_TRACK) {\n          this.state = State.IDLE;\n        }\n        break;\n      case ErrorDetails.BUFFER_ADD_CODEC_ERROR:\n      case ErrorDetails.BUFFER_APPEND_ERROR:\n        if (data.parent !== \"audio\") {\n          return;\n        }\n        if (!this.reduceLengthAndFlushBuffer(data)) {\n          this.resetLoadingState();\n        }\n        break;\n      case ErrorDetails.BUFFER_FULL_ERROR:\n        if (data.parent !== \"audio\") {\n          return;\n        }\n        if (this.reduceLengthAndFlushBuffer(data)) {\n          this.bufferedTrack = null;\n          super.flushMainBuffer(0, Number.POSITIVE_INFINITY, \"audio\");\n        }\n        break;\n      case ErrorDetails.INTERNAL_EXCEPTION:\n        this.recoverWorkerError(data);\n        break;\n    }\n  }\n  onBufferFlushing(event, {\n    type\n  }) {\n    if (type !== ElementaryStreamTypes.VIDEO) {\n      this.flushing = true;\n    }\n  }\n  onBufferFlushed(event, {\n    type\n  }) {\n    if (type !== ElementaryStreamTypes.VIDEO) {\n      this.flushing = false;\n      this.bufferFlushed = true;\n      if (this.state === State.ENDED) {\n        this.state = State.IDLE;\n      }\n      const mediaBuffer = this.mediaBuffer || this.media;\n      if (mediaBuffer) {\n        this.afterBufferFlushed(mediaBuffer, type, PlaylistLevelType.AUDIO);\n        this.tick();\n      }\n    }\n  }\n  _handleTransmuxComplete(transmuxResult) {\n    var _id3$samples;\n    const id = \"audio\";\n    const {\n      hls\n    } = this;\n    const {\n      remuxResult,\n      chunkMeta\n    } = transmuxResult;\n    const context = this.getCurrentContext(chunkMeta);\n    if (!context) {\n      this.resetWhenMissingContext(chunkMeta);\n      return;\n    }\n    const {\n      frag,\n      part,\n      level\n    } = context;\n    const {\n      details\n    } = level;\n    const {\n      audio,\n      text,\n      id3,\n      initSegment\n    } = remuxResult;\n    if (this.fragContextChanged(frag) || !details) {\n      this.fragmentTracker.removeFragment(frag);\n      return;\n    }\n    this.state = State.PARSING;\n    if (this.switchingTrack && audio) {\n      this.completeAudioSwitch(this.switchingTrack);\n    }\n    if (initSegment != null && initSegment.tracks) {\n      const mapFragment = frag.initSegment || frag;\n      this._bufferInitSegment(level, initSegment.tracks, mapFragment, chunkMeta);\n      hls.trigger(Events.FRAG_PARSING_INIT_SEGMENT, {\n        frag: mapFragment,\n        id,\n        tracks: initSegment.tracks\n      });\n    }\n    if (audio) {\n      const {\n        startPTS,\n        endPTS,\n        startDTS,\n        endDTS\n      } = audio;\n      if (part) {\n        part.elementaryStreams[ElementaryStreamTypes.AUDIO] = {\n          startPTS,\n          endPTS,\n          startDTS,\n          endDTS\n        };\n      }\n      frag.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO, startPTS, endPTS, startDTS, endDTS);\n      this.bufferFragmentData(audio, frag, part, chunkMeta);\n    }\n    if (id3 != null && (_id3$samples = id3.samples) != null && _id3$samples.length) {\n      const emittedID3 = _extends({\n        id,\n        frag,\n        details\n      }, id3);\n      hls.trigger(Events.FRAG_PARSING_METADATA, emittedID3);\n    }\n    if (text) {\n      const emittedText = _extends({\n        id,\n        frag,\n        details\n      }, text);\n      hls.trigger(Events.FRAG_PARSING_USERDATA, emittedText);\n    }\n  }\n  _bufferInitSegment(currentLevel, tracks, frag, chunkMeta) {\n    if (this.state !== State.PARSING) {\n      return;\n    }\n    if (tracks.video) {\n      delete tracks.video;\n    }\n    if (tracks.audiovideo) {\n      delete tracks.audiovideo;\n    }\n    if (!tracks.audio) {\n      return;\n    }\n    const track = tracks.audio;\n    track.id = PlaylistLevelType.AUDIO;\n    const variantAudioCodecs = currentLevel.audioCodec;\n    this.log(`Init audio buffer, container:${track.container}, codecs[level/parsed]=[${variantAudioCodecs}/${track.codec}]`);\n    if (variantAudioCodecs && variantAudioCodecs.split(\",\").length === 1) {\n      track.levelCodec = variantAudioCodecs;\n    }\n    this.hls.trigger(Events.BUFFER_CODECS, tracks);\n    const initSegment = track.initSegment;\n    if (initSegment != null && initSegment.byteLength) {\n      const segment = {\n        type: \"audio\",\n        frag,\n        part: null,\n        chunkMeta,\n        parent: frag.type,\n        data: initSegment\n      };\n      this.hls.trigger(Events.BUFFER_APPENDING, segment);\n    }\n    this.tickImmediate();\n  }\n  loadFragment(frag, track, targetBufferTime) {\n    const fragState = this.fragmentTracker.getState(frag);\n    if (this.switchingTrack || fragState === FragmentState.NOT_LOADED || fragState === FragmentState.PARTIAL) {\n      var _track$details;\n      if (!isMediaFragment(frag)) {\n        this._loadInitSegment(frag, track);\n      } else if ((_track$details = track.details) != null && _track$details.live && !this.initPTS[frag.cc]) {\n        this.log(`Waiting for video PTS in continuity counter ${frag.cc} of live stream before loading audio fragment ${frag.sn} of level ${this.trackId}`);\n        this.state = State.WAITING_INIT_PTS;\n        const mainDetails = this.mainDetails;\n        if (mainDetails && mainDetails.fragmentStart !== track.details.fragmentStart) {\n          alignMediaPlaylistByPDT(track.details, mainDetails);\n        }\n      } else {\n        super.loadFragment(frag, track, targetBufferTime);\n      }\n    } else {\n      this.clearTrackerIfNeeded(frag);\n    }\n  }\n  flushAudioIfNeeded(switchingTrack) {\n    if (this.media && this.bufferedTrack) {\n      const {\n        name,\n        lang,\n        assocLang,\n        characteristics,\n        audioCodec,\n        channels\n      } = this.bufferedTrack;\n      if (!matchesOption({\n        name,\n        lang,\n        assocLang,\n        characteristics,\n        audioCodec,\n        channels\n      }, switchingTrack, audioMatchPredicate)) {\n        if (useAlternateAudio(switchingTrack.url, this.hls)) {\n          this.log(\"Switching audio track : flushing all audio\");\n          super.flushMainBuffer(0, Number.POSITIVE_INFINITY, \"audio\");\n          this.bufferedTrack = null;\n        } else {\n          this.bufferedTrack = switchingTrack;\n        }\n      }\n    }\n  }\n  completeAudioSwitch(switchingTrack) {\n    const {\n      hls\n    } = this;\n    this.flushAudioIfNeeded(switchingTrack);\n    this.bufferedTrack = switchingTrack;\n    this.switchingTrack = null;\n    hls.trigger(Events.AUDIO_TRACK_SWITCHED, _objectSpread2({}, switchingTrack));\n  }\n}\nclass BasePlaylistController extends Logger2 {\n  constructor(hls, logPrefix) {\n    super(logPrefix, hls.logger);\n    this.hls = void 0;\n    this.canLoad = false;\n    this.timer = -1;\n    this.hls = hls;\n  }\n  destroy() {\n    this.clearTimer();\n    this.hls = this.log = this.warn = null;\n  }\n  clearTimer() {\n    if (this.timer !== -1) {\n      self.clearTimeout(this.timer);\n      this.timer = -1;\n    }\n  }\n  startLoad() {\n    this.canLoad = true;\n    this.loadPlaylist();\n  }\n  stopLoad() {\n    this.canLoad = false;\n    this.clearTimer();\n  }\n  switchParams(playlistUri, previous, current) {\n    const renditionReports = previous == null ? void 0 : previous.renditionReports;\n    if (renditionReports) {\n      let foundIndex = -1;\n      for (let i = 0; i < renditionReports.length; i++) {\n        const attr = renditionReports[i];\n        let uri;\n        try {\n          uri = new self.URL(attr.URI, previous.url).href;\n        } catch (error) {\n          this.warn(`Could not construct new URL for Rendition Report: ${error}`);\n          uri = attr.URI || \"\";\n        }\n        if (uri === playlistUri) {\n          foundIndex = i;\n          break;\n        } else if (uri === playlistUri.substring(0, uri.length)) {\n          foundIndex = i;\n        }\n      }\n      if (foundIndex !== -1) {\n        const attr = renditionReports[foundIndex];\n        const msn = parseInt(attr[\"LAST-MSN\"]) || (previous == null ? void 0 : previous.lastPartSn);\n        let part = parseInt(attr[\"LAST-PART\"]) || (previous == null ? void 0 : previous.lastPartIndex);\n        if (this.hls.config.lowLatencyMode) {\n          const currentGoal = Math.min(previous.age - previous.partTarget, previous.targetduration);\n          if (part >= 0 && currentGoal > previous.partTarget) {\n            part += 1;\n          }\n        }\n        const skip = current && getSkipValue(current);\n        return new HlsUrlParameters(msn, part >= 0 ? part : void 0, skip);\n      }\n    }\n  }\n  loadPlaylist(hlsUrlParameters) {\n    this.clearTimer();\n  }\n  loadingPlaylist(playlist, hlsUrlParameters) {\n    this.clearTimer();\n  }\n  shouldLoadPlaylist(playlist) {\n    return this.canLoad && !!playlist && !!playlist.url && (!playlist.details || playlist.details.live);\n  }\n  getUrlWithDirectives(uri, hlsUrlParameters) {\n    if (hlsUrlParameters) {\n      try {\n        return hlsUrlParameters.addDirectives(uri);\n      } catch (error) {\n        this.warn(`Could not construct new URL with HLS Delivery Directives: ${error}`);\n      }\n    }\n    return uri;\n  }\n  playlistLoaded(index, data, previousDetails) {\n    const {\n      details,\n      stats\n    } = data;\n    const now2 = self.performance.now();\n    const elapsed = stats.loading.first ? Math.max(0, now2 - stats.loading.first) : 0;\n    details.advancedDateTime = Date.now() - elapsed;\n    const timelineOffset = this.hls.config.timelineOffset;\n    if (timelineOffset !== details.appliedTimelineOffset) {\n      const offset = Math.max(timelineOffset || 0, 0);\n      details.appliedTimelineOffset = offset;\n      details.fragments.forEach((frag) => {\n        frag.start = frag.playlistOffset + offset;\n      });\n    }\n    if (details.live || previousDetails != null && previousDetails.live) {\n      const levelOrTrack = \"levelInfo\" in data ? data.levelInfo : data.track;\n      details.reloaded(previousDetails);\n      if (previousDetails && details.fragments.length > 0) {\n        mergeDetails(previousDetails, details);\n        const error = details.playlistParsingError;\n        if (error) {\n          this.warn(error);\n          const hls = this.hls;\n          if (!hls.config.ignorePlaylistParsingErrors) {\n            var _details$fragments$;\n            const {\n              networkDetails\n            } = data;\n            hls.trigger(Events.ERROR, {\n              type: ErrorTypes.NETWORK_ERROR,\n              details: ErrorDetails.LEVEL_PARSING_ERROR,\n              fatal: false,\n              url: details.url,\n              error,\n              reason: error.message,\n              level: data.level || void 0,\n              parent: (_details$fragments$ = details.fragments[0]) == null ? void 0 : _details$fragments$.type,\n              networkDetails,\n              stats\n            });\n            return;\n          }\n          details.playlistParsingError = null;\n        }\n      }\n      if (details.requestScheduled === -1) {\n        details.requestScheduled = stats.loading.start;\n      }\n      const bufferInfo = this.hls.mainForwardBufferInfo;\n      const position = bufferInfo ? bufferInfo.end - bufferInfo.len : 0;\n      const distanceToLiveEdgeMs = (details.edge - position) * 1e3;\n      const reloadInterval = computeReloadInterval(details, distanceToLiveEdgeMs);\n      if (details.requestScheduled + reloadInterval < now2) {\n        details.requestScheduled = now2;\n      } else {\n        details.requestScheduled += reloadInterval;\n      }\n      this.log(`live playlist ${index} ${details.advanced ? \"REFRESHED \" + details.lastPartSn + \"-\" + details.lastPartIndex : details.updated ? \"UPDATED\" : \"MISSED\"}`);\n      if (!this.canLoad || !details.live) {\n        return;\n      }\n      let deliveryDirectives;\n      let msn = void 0;\n      let part = void 0;\n      if (details.canBlockReload && details.endSN && details.advanced) {\n        const lowLatencyMode = this.hls.config.lowLatencyMode;\n        const lastPartSn = details.lastPartSn;\n        const endSn = details.endSN;\n        const lastPartIndex = details.lastPartIndex;\n        const hasParts = lastPartIndex !== -1;\n        const atLastPartOfSegment = lastPartSn === endSn;\n        if (hasParts) {\n          if (atLastPartOfSegment) {\n            msn = endSn + 1;\n            part = lowLatencyMode ? 0 : lastPartIndex;\n          } else {\n            msn = lastPartSn;\n            part = lowLatencyMode ? lastPartIndex + 1 : details.maxPartIndex;\n          }\n        } else {\n          msn = endSn + 1;\n        }\n        const lastAdvanced = details.age;\n        const cdnAge = lastAdvanced + details.ageHeader;\n        let currentGoal = Math.min(cdnAge - details.partTarget, details.targetduration * 1.5);\n        if (currentGoal > 0) {\n          if (cdnAge > details.targetduration * 3) {\n            this.log(`Playlist last advanced ${lastAdvanced.toFixed(2)}s ago. Omitting segment and part directives.`);\n            msn = void 0;\n            part = void 0;\n          } else if (previousDetails != null && previousDetails.tuneInGoal && cdnAge - details.partTarget > previousDetails.tuneInGoal) {\n            this.warn(`CDN Tune-in goal increased from: ${previousDetails.tuneInGoal} to: ${currentGoal} with playlist age: ${details.age}`);\n            currentGoal = 0;\n          } else {\n            const segments = Math.floor(currentGoal / details.targetduration);\n            msn += segments;\n            if (part !== void 0) {\n              const parts = Math.round(currentGoal % details.targetduration / details.partTarget);\n              part += parts;\n            }\n            this.log(`CDN Tune-in age: ${details.ageHeader}s last advanced ${lastAdvanced.toFixed(2)}s goal: ${currentGoal} skip sn ${segments} to part ${part}`);\n          }\n          details.tuneInGoal = currentGoal;\n        }\n        deliveryDirectives = this.getDeliveryDirectives(details, data.deliveryDirectives, msn, part);\n        if (lowLatencyMode || !atLastPartOfSegment) {\n          details.requestScheduled = now2;\n          this.loadingPlaylist(levelOrTrack, deliveryDirectives);\n          return;\n        }\n      } else if (details.canBlockReload || details.canSkipUntil) {\n        deliveryDirectives = this.getDeliveryDirectives(details, data.deliveryDirectives, msn, part);\n      }\n      if (deliveryDirectives && msn !== void 0 && details.canBlockReload) {\n        details.requestScheduled = stats.loading.first + Math.max(reloadInterval - elapsed * 2, reloadInterval / 2);\n      }\n      this.scheduleLoading(levelOrTrack, deliveryDirectives, details);\n    } else {\n      this.clearTimer();\n    }\n  }\n  scheduleLoading(levelOrTrack, deliveryDirectives, updatedDetails) {\n    const details = updatedDetails || levelOrTrack.details;\n    if (!details) {\n      this.loadingPlaylist(levelOrTrack, deliveryDirectives);\n      return;\n    }\n    const now2 = self.performance.now();\n    const requestScheduled = details.requestScheduled;\n    if (now2 >= requestScheduled) {\n      this.loadingPlaylist(levelOrTrack, deliveryDirectives);\n      return;\n    }\n    const estimatedTimeUntilUpdate = requestScheduled - now2;\n    this.log(`reload live playlist ${levelOrTrack.name || levelOrTrack.bitrate + \"bps\"} in ${Math.round(estimatedTimeUntilUpdate)} ms`);\n    this.clearTimer();\n    this.timer = self.setTimeout(() => this.loadingPlaylist(levelOrTrack, deliveryDirectives), estimatedTimeUntilUpdate);\n  }\n  getDeliveryDirectives(details, previousDeliveryDirectives, msn, part) {\n    let skip = getSkipValue(details);\n    if (previousDeliveryDirectives != null && previousDeliveryDirectives.skip && details.deltaUpdateFailed) {\n      msn = previousDeliveryDirectives.msn;\n      part = previousDeliveryDirectives.part;\n      skip = HlsSkip.No;\n    }\n    return new HlsUrlParameters(msn, part, skip);\n  }\n  checkRetry(errorEvent) {\n    const errorDetails = errorEvent.details;\n    const isTimeout = isTimeoutError(errorEvent);\n    const errorAction = errorEvent.errorAction;\n    const {\n      action,\n      retryCount = 0,\n      retryConfig\n    } = errorAction || {};\n    const retry = !!errorAction && !!retryConfig && (action === NetworkErrorAction.RetryRequest || !errorAction.resolved && action === NetworkErrorAction.SendAlternateToPenaltyBox);\n    if (retry) {\n      var _errorEvent$context;\n      if (retryCount >= retryConfig.maxNumRetry) {\n        return false;\n      }\n      if (isTimeout && (_errorEvent$context = errorEvent.context) != null && _errorEvent$context.deliveryDirectives) {\n        this.warn(`Retrying playlist loading ${retryCount + 1}/${retryConfig.maxNumRetry} after \"${errorDetails}\" without delivery-directives`);\n        this.loadPlaylist();\n      } else {\n        const delay = getRetryDelay(retryConfig, retryCount);\n        this.clearTimer();\n        this.timer = self.setTimeout(() => this.loadPlaylist(), delay);\n        this.warn(`Retrying playlist loading ${retryCount + 1}/${retryConfig.maxNumRetry} after \"${errorDetails}\" in ${delay}ms`);\n      }\n      errorEvent.levelRetry = true;\n      errorAction.resolved = true;\n    }\n    return retry;\n  }\n}\nfunction subtitleOptionsIdentical(trackList1, trackList2) {\n  if (trackList1.length !== trackList2.length) {\n    return false;\n  }\n  for (let i = 0; i < trackList1.length; i++) {\n    if (!mediaAttributesIdentical(trackList1[i].attrs, trackList2[i].attrs)) {\n      return false;\n    }\n  }\n  return true;\n}\nfunction mediaAttributesIdentical(attrs1, attrs2, customAttributes) {\n  const stableRenditionId = attrs1[\"STABLE-RENDITION-ID\"];\n  if (stableRenditionId && !customAttributes) {\n    return stableRenditionId === attrs2[\"STABLE-RENDITION-ID\"];\n  }\n  return !(customAttributes || [\"LANGUAGE\", \"NAME\", \"CHARACTERISTICS\", \"AUTOSELECT\", \"DEFAULT\", \"FORCED\", \"ASSOC-LANGUAGE\"]).some((subtitleAttribute) => attrs1[subtitleAttribute] !== attrs2[subtitleAttribute]);\n}\nfunction subtitleTrackMatchesTextTrack(subtitleTrack, textTrack) {\n  return textTrack.label.toLowerCase() === subtitleTrack.name.toLowerCase() && (!textTrack.language || textTrack.language.toLowerCase() === (subtitleTrack.lang || \"\").toLowerCase());\n}\nclass AudioTrackController extends BasePlaylistController {\n  constructor(hls) {\n    super(hls, \"audio-track-controller\");\n    this.tracks = [];\n    this.groupIds = null;\n    this.tracksInGroup = [];\n    this.trackId = -1;\n    this.currentTrack = null;\n    this.selectDefaultTrack = true;\n    this.registerListeners();\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.on(Events.LEVEL_LOADING, this.onLevelLoading, this);\n    hls.on(Events.LEVEL_SWITCHING, this.onLevelSwitching, this);\n    hls.on(Events.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this);\n    hls.on(Events.ERROR, this.onError, this);\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.off(Events.LEVEL_LOADING, this.onLevelLoading, this);\n    hls.off(Events.LEVEL_SWITCHING, this.onLevelSwitching, this);\n    hls.off(Events.AUDIO_TRACK_LOADED, this.onAudioTrackLoaded, this);\n    hls.off(Events.ERROR, this.onError, this);\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.tracks.length = 0;\n    this.tracksInGroup.length = 0;\n    this.currentTrack = null;\n    super.destroy();\n  }\n  onManifestLoading() {\n    this.tracks = [];\n    this.tracksInGroup = [];\n    this.groupIds = null;\n    this.currentTrack = null;\n    this.trackId = -1;\n    this.selectDefaultTrack = true;\n  }\n  onManifestParsed(event, data) {\n    this.tracks = data.audioTracks || [];\n  }\n  onAudioTrackLoaded(event, data) {\n    const {\n      id,\n      groupId,\n      details\n    } = data;\n    const trackInActiveGroup = this.tracksInGroup[id];\n    if (!trackInActiveGroup || trackInActiveGroup.groupId !== groupId) {\n      this.warn(`Audio track with id:${id} and group:${groupId} not found in active group ${trackInActiveGroup == null ? void 0 : trackInActiveGroup.groupId}`);\n      return;\n    }\n    const curDetails = trackInActiveGroup.details;\n    trackInActiveGroup.details = data.details;\n    this.log(`Audio track ${id} \"${trackInActiveGroup.name}\" lang:${trackInActiveGroup.lang} group:${groupId} loaded [${details.startSN}-${details.endSN}]`);\n    if (id === this.trackId) {\n      this.playlistLoaded(id, data, curDetails);\n    }\n  }\n  onLevelLoading(event, data) {\n    this.switchLevel(data.level);\n  }\n  onLevelSwitching(event, data) {\n    this.switchLevel(data.level);\n  }\n  switchLevel(levelIndex) {\n    const levelInfo = this.hls.levels[levelIndex];\n    if (!levelInfo) {\n      return;\n    }\n    const audioGroups = levelInfo.audioGroups || null;\n    const currentGroups = this.groupIds;\n    let currentTrack = this.currentTrack;\n    if (!audioGroups || (currentGroups == null ? void 0 : currentGroups.length) !== (audioGroups == null ? void 0 : audioGroups.length) || audioGroups != null && audioGroups.some((groupId) => (currentGroups == null ? void 0 : currentGroups.indexOf(groupId)) === -1)) {\n      this.groupIds = audioGroups;\n      this.trackId = -1;\n      this.currentTrack = null;\n      const audioTracks = this.tracks.filter((track) => !audioGroups || audioGroups.indexOf(track.groupId) !== -1);\n      if (audioTracks.length) {\n        if (this.selectDefaultTrack && !audioTracks.some((track) => track.default)) {\n          this.selectDefaultTrack = false;\n        }\n        audioTracks.forEach((track, i) => {\n          track.id = i;\n        });\n      } else if (!currentTrack && !this.tracksInGroup.length) {\n        return;\n      }\n      this.tracksInGroup = audioTracks;\n      const audioPreference = this.hls.config.audioPreference;\n      if (!currentTrack && audioPreference) {\n        const groupIndex = findMatchingOption(audioPreference, audioTracks, audioMatchPredicate);\n        if (groupIndex > -1) {\n          currentTrack = audioTracks[groupIndex];\n        } else {\n          const allIndex = findMatchingOption(audioPreference, this.tracks);\n          currentTrack = this.tracks[allIndex];\n        }\n      }\n      let trackId = this.findTrackId(currentTrack);\n      if (trackId === -1 && currentTrack) {\n        trackId = this.findTrackId(null);\n      }\n      const audioTracksUpdated = {\n        audioTracks\n      };\n      this.log(`Updating audio tracks, ${audioTracks.length} track(s) found in group(s): ${audioGroups == null ? void 0 : audioGroups.join(\",\")}`);\n      this.hls.trigger(Events.AUDIO_TRACKS_UPDATED, audioTracksUpdated);\n      const selectedTrackId = this.trackId;\n      if (trackId !== -1 && selectedTrackId === -1) {\n        this.setAudioTrack(trackId);\n      } else if (audioTracks.length && selectedTrackId === -1) {\n        var _this$groupIds;\n        const error = new Error(`No audio track selected for current audio group-ID(s): ${(_this$groupIds = this.groupIds) == null ? void 0 : _this$groupIds.join(\",\")} track count: ${audioTracks.length}`);\n        this.warn(error.message);\n        this.hls.trigger(Events.ERROR, {\n          type: ErrorTypes.MEDIA_ERROR,\n          details: ErrorDetails.AUDIO_TRACK_LOAD_ERROR,\n          fatal: true,\n          error\n        });\n      }\n    }\n  }\n  onError(event, data) {\n    if (data.fatal || !data.context) {\n      return;\n    }\n    if (data.context.type === PlaylistContextType.AUDIO_TRACK && data.context.id === this.trackId && (!this.groupIds || this.groupIds.indexOf(data.context.groupId) !== -1)) {\n      this.checkRetry(data);\n    }\n  }\n  get allAudioTracks() {\n    return this.tracks;\n  }\n  get audioTracks() {\n    return this.tracksInGroup;\n  }\n  get audioTrack() {\n    return this.trackId;\n  }\n  set audioTrack(newId) {\n    this.selectDefaultTrack = false;\n    this.setAudioTrack(newId);\n  }\n  setAudioOption(audioOption) {\n    const hls = this.hls;\n    hls.config.audioPreference = audioOption;\n    if (audioOption) {\n      const allAudioTracks = this.allAudioTracks;\n      this.selectDefaultTrack = false;\n      if (allAudioTracks.length) {\n        const currentTrack = this.currentTrack;\n        if (currentTrack && matchesOption(audioOption, currentTrack, audioMatchPredicate)) {\n          return currentTrack;\n        }\n        const groupIndex = findMatchingOption(audioOption, this.tracksInGroup, audioMatchPredicate);\n        if (groupIndex > -1) {\n          const track = this.tracksInGroup[groupIndex];\n          this.setAudioTrack(groupIndex);\n          return track;\n        } else if (currentTrack) {\n          let searchIndex = hls.loadLevel;\n          if (searchIndex === -1) {\n            searchIndex = hls.firstAutoLevel;\n          }\n          const switchIndex = findClosestLevelWithAudioGroup(audioOption, hls.levels, allAudioTracks, searchIndex, audioMatchPredicate);\n          if (switchIndex === -1) {\n            return null;\n          }\n          hls.nextLoadLevel = switchIndex;\n        }\n        if (audioOption.channels || audioOption.audioCodec) {\n          const withoutCodecAndChannelsMatch = findMatchingOption(audioOption, allAudioTracks);\n          if (withoutCodecAndChannelsMatch > -1) {\n            return allAudioTracks[withoutCodecAndChannelsMatch];\n          }\n        }\n      }\n    }\n    return null;\n  }\n  setAudioTrack(newId) {\n    const tracks = this.tracksInGroup;\n    if (newId < 0 || newId >= tracks.length) {\n      this.warn(`Invalid audio track id: ${newId}`);\n      return;\n    }\n    this.selectDefaultTrack = false;\n    const lastTrack = this.currentTrack;\n    const track = tracks[newId];\n    const trackLoaded = track.details && !track.details.live;\n    if (newId === this.trackId && track === lastTrack && trackLoaded) {\n      return;\n    }\n    this.log(`Switching to audio-track ${newId} \"${track.name}\" lang:${track.lang} group:${track.groupId} channels:${track.channels}`);\n    this.trackId = newId;\n    this.currentTrack = track;\n    this.hls.trigger(Events.AUDIO_TRACK_SWITCHING, _objectSpread2({}, track));\n    if (trackLoaded) {\n      return;\n    }\n    const hlsUrlParameters = this.switchParams(track.url, lastTrack == null ? void 0 : lastTrack.details, track.details);\n    this.loadPlaylist(hlsUrlParameters);\n  }\n  findTrackId(currentTrack) {\n    const audioTracks = this.tracksInGroup;\n    for (let i = 0; i < audioTracks.length; i++) {\n      const track = audioTracks[i];\n      if (this.selectDefaultTrack && !track.default) {\n        continue;\n      }\n      if (!currentTrack || matchesOption(currentTrack, track, audioMatchPredicate)) {\n        return i;\n      }\n    }\n    if (currentTrack) {\n      const {\n        name,\n        lang,\n        assocLang,\n        characteristics,\n        audioCodec,\n        channels\n      } = currentTrack;\n      for (let i = 0; i < audioTracks.length; i++) {\n        const track = audioTracks[i];\n        if (matchesOption({\n          name,\n          lang,\n          assocLang,\n          characteristics,\n          audioCodec,\n          channels\n        }, track, audioMatchPredicate)) {\n          return i;\n        }\n      }\n      for (let i = 0; i < audioTracks.length; i++) {\n        const track = audioTracks[i];\n        if (mediaAttributesIdentical(currentTrack.attrs, track.attrs, [\"LANGUAGE\", \"ASSOC-LANGUAGE\", \"CHARACTERISTICS\"])) {\n          return i;\n        }\n      }\n      for (let i = 0; i < audioTracks.length; i++) {\n        const track = audioTracks[i];\n        if (mediaAttributesIdentical(currentTrack.attrs, track.attrs, [\"LANGUAGE\"])) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n  loadPlaylist(hlsUrlParameters) {\n    super.loadPlaylist();\n    const audioTrack = this.currentTrack;\n    if (!this.shouldLoadPlaylist(audioTrack)) {\n      return;\n    }\n    if (useAlternateAudio(audioTrack.url, this.hls)) {\n      this.scheduleLoading(audioTrack, hlsUrlParameters);\n    }\n  }\n  loadingPlaylist(audioTrack, hlsUrlParameters) {\n    super.loadingPlaylist(audioTrack, hlsUrlParameters);\n    const id = audioTrack.id;\n    const groupId = audioTrack.groupId;\n    const url = this.getUrlWithDirectives(audioTrack.url, hlsUrlParameters);\n    const details = audioTrack.details;\n    const age = details == null ? void 0 : details.age;\n    this.log(`Loading audio-track ${id} \"${audioTrack.name}\" lang:${audioTrack.lang} group:${groupId}${(hlsUrlParameters == null ? void 0 : hlsUrlParameters.msn) !== void 0 ? \" at sn \" + hlsUrlParameters.msn + \" part \" + hlsUrlParameters.part : \"\"}${age && details.live ? \" age \" + age.toFixed(1) + (details.type ? \" \" + details.type || \"\" : \"\") : \"\"} ${url}`);\n    this.hls.trigger(Events.AUDIO_TRACK_LOADING, {\n      url,\n      id,\n      groupId,\n      deliveryDirectives: hlsUrlParameters || null,\n      track: audioTrack\n    });\n  }\n}\nclass BufferOperationQueue {\n  constructor(sourceBufferReference) {\n    this.tracks = void 0;\n    this.queues = {\n      video: [],\n      audio: [],\n      audiovideo: []\n    };\n    this.tracks = sourceBufferReference;\n  }\n  destroy() {\n    this.tracks = this.queues = null;\n  }\n  append(operation, type, pending) {\n    if (this.queues === null || this.tracks === null) {\n      return;\n    }\n    const queue2 = this.queues[type];\n    queue2.push(operation);\n    if (queue2.length === 1 && !pending) {\n      this.executeNext(type);\n    }\n  }\n  appendBlocker(type) {\n    return new Promise((resolve) => {\n      const operation = {\n        label: \"async-blocker\",\n        execute: resolve,\n        onStart: () => {\n        },\n        onComplete: () => {\n        },\n        onError: () => {\n        }\n      };\n      this.append(operation, type);\n    });\n  }\n  prependBlocker(type) {\n    return new Promise((resolve) => {\n      if (this.queues) {\n        const operation = {\n          label: \"async-blocker-prepend\",\n          execute: resolve,\n          onStart: () => {\n          },\n          onComplete: () => {\n          },\n          onError: () => {\n          }\n        };\n        this.queues[type].unshift(operation);\n      }\n    });\n  }\n  removeBlockers() {\n    if (this.queues === null) {\n      return;\n    }\n    [this.queues.video, this.queues.audio, this.queues.audiovideo].forEach((queue2) => {\n      var _queue$;\n      const label = (_queue$ = queue2[0]) == null ? void 0 : _queue$.label;\n      if (label === \"async-blocker\" || label === \"async-blocker-prepend\") {\n        queue2[0].execute();\n        queue2.splice(0, 1);\n      }\n    });\n  }\n  unblockAudio(op) {\n    if (this.queues === null) {\n      return;\n    }\n    const queue2 = this.queues.audio;\n    if (queue2[0] === op) {\n      this.shiftAndExecuteNext(\"audio\");\n    }\n  }\n  executeNext(type) {\n    if (this.queues === null || this.tracks === null) {\n      return;\n    }\n    const queue2 = this.queues[type];\n    if (queue2.length) {\n      const operation = queue2[0];\n      try {\n        operation.execute();\n      } catch (error) {\n        var _this$tracks$type;\n        operation.onError(error);\n        if (this.queues === null || this.tracks === null) {\n          return;\n        }\n        const sb = (_this$tracks$type = this.tracks[type]) == null ? void 0 : _this$tracks$type.buffer;\n        if (!(sb != null && sb.updating)) {\n          this.shiftAndExecuteNext(type);\n        }\n      }\n    }\n  }\n  shiftAndExecuteNext(type) {\n    if (this.queues === null) {\n      return;\n    }\n    this.queues[type].shift();\n    this.executeNext(type);\n  }\n  current(type) {\n    var _this$queues;\n    return ((_this$queues = this.queues) == null ? void 0 : _this$queues[type][0]) || null;\n  }\n  toString() {\n    const {\n      queues,\n      tracks\n    } = this;\n    if (queues === null || tracks === null) {\n      return `<destroyed>`;\n    }\n    return `\n${this.list(\"video\")}\n${this.list(\"audio\")}\n${this.list(\"audiovideo\")}}`;\n  }\n  list(type) {\n    var _this$queues2, _this$tracks;\n    return (_this$queues2 = this.queues) != null && _this$queues2[type] || (_this$tracks = this.tracks) != null && _this$tracks[type] ? `${type}: (${this.listSbInfo(type)}) ${this.listOps(type)}` : \"\";\n  }\n  listSbInfo(type) {\n    var _this$tracks2;\n    const track = (_this$tracks2 = this.tracks) == null ? void 0 : _this$tracks2[type];\n    const sb = track == null ? void 0 : track.buffer;\n    if (!sb) {\n      return \"none\";\n    }\n    return `SourceBuffer${sb.updating ? \" updating\" : \"\"}${track.ended ? \" ended\" : \"\"}${track.ending ? \" ending\" : \"\"}`;\n  }\n  listOps(type) {\n    var _this$queues3;\n    return ((_this$queues3 = this.queues) == null ? void 0 : _this$queues3[type].map((op) => op.label).join(\", \")) || \"\";\n  }\n}\nconst VIDEO_CODEC_PROFILE_REPLACE = /(avc[1234]|hvc1|hev1|dvh[1e]|vp09|av01)(?:\\.[^.,]+)+/;\nconst TRACK_REMOVED_ERROR_NAME = \"HlsJsTrackRemovedError\";\nclass HlsJsTrackRemovedError extends Error {\n  constructor(message) {\n    super(message);\n    this.name = TRACK_REMOVED_ERROR_NAME;\n  }\n}\nclass BufferController extends Logger2 {\n  constructor(hls, fragmentTracker) {\n    super(\"buffer-controller\", hls.logger);\n    this.hls = void 0;\n    this.fragmentTracker = void 0;\n    this.details = null;\n    this._objectUrl = null;\n    this.operationQueue = null;\n    this.bufferCodecEventsTotal = 0;\n    this.media = null;\n    this.mediaSource = null;\n    this.lastMpegAudioChunk = null;\n    this.blockedAudioAppend = null;\n    this.lastVideoAppendEnd = 0;\n    this.appendSource = void 0;\n    this.transferData = void 0;\n    this.overrides = void 0;\n    this.appendErrors = {\n      audio: 0,\n      video: 0,\n      audiovideo: 0\n    };\n    this.tracks = {};\n    this.sourceBuffers = [[null, null], [null, null]];\n    this._onEndStreaming = (event) => {\n      var _this$mediaSource;\n      if (!this.hls) {\n        return;\n      }\n      if (((_this$mediaSource = this.mediaSource) == null ? void 0 : _this$mediaSource.readyState) !== \"open\") {\n        return;\n      }\n      this.hls.pauseBuffering();\n    };\n    this._onStartStreaming = (event) => {\n      if (!this.hls) {\n        return;\n      }\n      this.hls.resumeBuffering();\n    };\n    this._onMediaSourceOpen = (e) => {\n      const {\n        media,\n        mediaSource\n      } = this;\n      if (e) {\n        this.log(\"Media source opened\");\n      }\n      if (!media || !mediaSource) {\n        return;\n      }\n      mediaSource.removeEventListener(\"sourceopen\", this._onMediaSourceOpen);\n      media.removeEventListener(\"emptied\", this._onMediaEmptied);\n      this.updateDuration();\n      this.hls.trigger(Events.MEDIA_ATTACHED, {\n        media,\n        mediaSource\n      });\n      if (this.mediaSource !== null) {\n        this.checkPendingTracks();\n      }\n    };\n    this._onMediaSourceClose = () => {\n      this.log(\"Media source closed\");\n    };\n    this._onMediaSourceEnded = () => {\n      this.log(\"Media source ended\");\n    };\n    this._onMediaEmptied = () => {\n      const {\n        mediaSrc,\n        _objectUrl\n      } = this;\n      if (mediaSrc !== _objectUrl) {\n        this.error(`Media element src was set while attaching MediaSource (${_objectUrl} > ${mediaSrc})`);\n      }\n    };\n    this.hls = hls;\n    this.fragmentTracker = fragmentTracker;\n    this.appendSource = isManagedMediaSource(getMediaSource(hls.config.preferManagedMediaSource));\n    this.initTracks();\n    this.registerListeners();\n  }\n  hasSourceTypes() {\n    return Object.keys(this.tracks).length > 0;\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.details = null;\n    this.lastMpegAudioChunk = this.blockedAudioAppend = null;\n    this.transferData = this.overrides = void 0;\n    if (this.operationQueue) {\n      this.operationQueue.destroy();\n      this.operationQueue = null;\n    }\n    this.hls = this.fragmentTracker = null;\n    this._onMediaSourceOpen = this._onMediaSourceClose = null;\n    this._onMediaSourceEnded = null;\n    this._onStartStreaming = this._onEndStreaming = null;\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.on(Events.BUFFER_RESET, this.onBufferReset, this);\n    hls.on(Events.BUFFER_APPENDING, this.onBufferAppending, this);\n    hls.on(Events.BUFFER_CODECS, this.onBufferCodecs, this);\n    hls.on(Events.BUFFER_EOS, this.onBufferEos, this);\n    hls.on(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n    hls.on(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n    hls.on(Events.FRAG_PARSED, this.onFragParsed, this);\n    hls.on(Events.FRAG_CHANGED, this.onFragChanged, this);\n    hls.on(Events.ERROR, this.onError, this);\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.off(Events.BUFFER_RESET, this.onBufferReset, this);\n    hls.off(Events.BUFFER_APPENDING, this.onBufferAppending, this);\n    hls.off(Events.BUFFER_CODECS, this.onBufferCodecs, this);\n    hls.off(Events.BUFFER_EOS, this.onBufferEos, this);\n    hls.off(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n    hls.off(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n    hls.off(Events.FRAG_PARSED, this.onFragParsed, this);\n    hls.off(Events.FRAG_CHANGED, this.onFragChanged, this);\n    hls.off(Events.ERROR, this.onError, this);\n  }\n  transferMedia() {\n    const {\n      media,\n      mediaSource\n    } = this;\n    if (!media) {\n      return null;\n    }\n    const tracks = {};\n    if (this.operationQueue) {\n      const updating = this.isUpdating();\n      if (!updating) {\n        this.operationQueue.removeBlockers();\n      }\n      const queued = this.isQueued();\n      if (updating || queued) {\n        this.warn(`Transfering MediaSource with${queued ? \" operations in queue\" : \"\"}${updating ? \" updating SourceBuffer(s)\" : \"\"} ${this.operationQueue}`);\n      }\n      this.operationQueue.destroy();\n    }\n    const transferData = this.transferData;\n    if (!this.sourceBufferCount && transferData && transferData.mediaSource === mediaSource) {\n      _extends(tracks, transferData.tracks);\n    } else {\n      this.sourceBuffers.forEach((tuple2) => {\n        const [type] = tuple2;\n        if (type) {\n          tracks[type] = _extends({}, this.tracks[type]);\n          this.removeBuffer(type);\n        }\n        tuple2[0] = tuple2[1] = null;\n      });\n    }\n    return {\n      media,\n      mediaSource,\n      tracks\n    };\n  }\n  initTracks() {\n    const tracks = {};\n    this.sourceBuffers = [[null, null], [null, null]];\n    this.tracks = tracks;\n    this.resetQueue();\n    this.resetAppendErrors();\n    this.lastMpegAudioChunk = this.blockedAudioAppend = null;\n    this.lastVideoAppendEnd = 0;\n  }\n  onManifestLoading() {\n    this.bufferCodecEventsTotal = 0;\n    this.details = null;\n  }\n  onManifestParsed(event, data) {\n    var _this$transferData;\n    let codecEvents = 2;\n    if (data.audio && !data.video || !data.altAudio) {\n      codecEvents = 1;\n    }\n    this.bufferCodecEventsTotal = codecEvents;\n    this.log(`${codecEvents} bufferCodec event(s) expected.`);\n    if ((_this$transferData = this.transferData) != null && _this$transferData.mediaSource && this.sourceBufferCount && codecEvents) {\n      this.bufferCreated();\n    }\n  }\n  onMediaAttaching(event, data) {\n    const media = this.media = data.media;\n    const MediaSource = getMediaSource(this.appendSource);\n    this.transferData = this.overrides = void 0;\n    if (media && MediaSource) {\n      const transferringMedia = !!data.mediaSource;\n      if (transferringMedia || data.overrides) {\n        this.transferData = data;\n        this.overrides = data.overrides;\n      }\n      const ms2 = this.mediaSource = data.mediaSource || new MediaSource();\n      this.assignMediaSource(ms2);\n      if (transferringMedia) {\n        this._objectUrl = media.src;\n        this.attachTransferred();\n      } else {\n        const objectUrl = this._objectUrl = self.URL.createObjectURL(ms2);\n        if (this.appendSource) {\n          try {\n            media.removeAttribute(\"src\");\n            const MMS = self.ManagedMediaSource;\n            media.disableRemotePlayback = media.disableRemotePlayback || MMS && ms2 instanceof MMS;\n            removeSourceChildren(media);\n            addSource(media, objectUrl);\n            media.load();\n          } catch (error) {\n            media.src = objectUrl;\n          }\n        } else {\n          media.src = objectUrl;\n        }\n      }\n      media.addEventListener(\"emptied\", this._onMediaEmptied);\n    }\n  }\n  assignMediaSource(ms2) {\n    var _this$transferData2, _ms$constructor;\n    this.log(`${((_this$transferData2 = this.transferData) == null ? void 0 : _this$transferData2.mediaSource) === ms2 ? \"transferred\" : \"created\"} media source: ${(_ms$constructor = ms2.constructor) == null ? void 0 : _ms$constructor.name}`);\n    ms2.addEventListener(\"sourceopen\", this._onMediaSourceOpen);\n    ms2.addEventListener(\"sourceended\", this._onMediaSourceEnded);\n    ms2.addEventListener(\"sourceclose\", this._onMediaSourceClose);\n    if (this.appendSource) {\n      ms2.addEventListener(\"startstreaming\", this._onStartStreaming);\n      ms2.addEventListener(\"endstreaming\", this._onEndStreaming);\n    }\n  }\n  attachTransferred() {\n    const media = this.media;\n    const data = this.transferData;\n    if (!data || !media) {\n      return;\n    }\n    const requiredTracks = this.tracks;\n    const transferredTracks = data.tracks;\n    const trackNames = transferredTracks ? Object.keys(transferredTracks) : null;\n    const trackCount = trackNames ? trackNames.length : 0;\n    const mediaSourceOpenCallback = () => {\n      if (this.media && this.mediaSourceOpenOrEnded) {\n        this._onMediaSourceOpen();\n      }\n    };\n    if (transferredTracks && trackNames && trackCount) {\n      if (!this.tracksReady) {\n        this.hls.config.startFragPrefetch = true;\n        this.log(`attachTransferred: waiting for SourceBuffer track info`);\n        return;\n      }\n      this.log(`attachTransferred: (bufferCodecEventsTotal ${this.bufferCodecEventsTotal})\nrequired tracks: ${stringify(requiredTracks, (key, value) => key === \"initSegment\" ? void 0 : value)};\ntransfer tracks: ${stringify(transferredTracks, (key, value) => key === \"initSegment\" ? void 0 : value)}}`);\n      if (!isCompatibleTrackChange(transferredTracks, requiredTracks)) {\n        data.mediaSource = null;\n        data.tracks = void 0;\n        const currentTime = media.currentTime;\n        const details = this.details;\n        const startTime = Math.max(currentTime, (details == null ? void 0 : details.fragments[0].start) || 0);\n        if (startTime - currentTime > 1) {\n          this.log(`attachTransferred: waiting for playback to reach new tracks start time ${currentTime} -> ${startTime}`);\n          return;\n        }\n        this.warn(`attachTransferred: resetting MediaSource for incompatible tracks (\"${Object.keys(transferredTracks)}\"->\"${Object.keys(requiredTracks)}\") start time: ${startTime} currentTime: ${currentTime}`);\n        this.onMediaDetaching(Events.MEDIA_DETACHING, {});\n        this.onMediaAttaching(Events.MEDIA_ATTACHING, data);\n        media.currentTime = startTime;\n        return;\n      }\n      this.transferData = void 0;\n      trackNames.forEach((trackName) => {\n        const type = trackName;\n        const track = transferredTracks[type];\n        if (track) {\n          const sb = track.buffer;\n          if (sb) {\n            const fragmentTracker = this.fragmentTracker;\n            const playlistType = track.id;\n            if (fragmentTracker.hasFragments(playlistType) || fragmentTracker.hasParts(playlistType)) {\n              const bufferedTimeRanges = BufferHelper.getBuffered(sb);\n              fragmentTracker.detectEvictedFragments(type, bufferedTimeRanges, playlistType, null, true);\n            }\n            const sbIndex = sourceBufferNameToIndex(type);\n            const sbTuple = [type, sb];\n            this.sourceBuffers[sbIndex] = sbTuple;\n            if (sb.updating && this.operationQueue) {\n              this.operationQueue.prependBlocker(type);\n            }\n            this.trackSourceBuffer(type, track);\n          }\n        }\n      });\n      mediaSourceOpenCallback();\n      this.bufferCreated();\n    } else {\n      this.log(`attachTransferred: MediaSource w/o SourceBuffers`);\n      mediaSourceOpenCallback();\n    }\n  }\n  get mediaSourceOpenOrEnded() {\n    var _this$mediaSource2;\n    const readyState = (_this$mediaSource2 = this.mediaSource) == null ? void 0 : _this$mediaSource2.readyState;\n    return readyState === \"open\" || readyState === \"ended\";\n  }\n  onMediaDetaching(event, data) {\n    const transferringMedia = !!data.transferMedia;\n    this.transferData = this.overrides = void 0;\n    const {\n      media,\n      mediaSource,\n      _objectUrl\n    } = this;\n    if (mediaSource) {\n      this.log(`media source ${transferringMedia ? \"transferring\" : \"detaching\"}`);\n      if (transferringMedia) {\n        this.sourceBuffers.forEach(([type]) => {\n          if (type) {\n            this.removeBuffer(type);\n          }\n        });\n        this.resetQueue();\n      } else {\n        if (this.mediaSourceOpenOrEnded) {\n          const open = mediaSource.readyState === \"open\";\n          try {\n            const sourceBuffers = mediaSource.sourceBuffers;\n            for (let i = sourceBuffers.length; i--; ) {\n              if (open) {\n                sourceBuffers[i].abort();\n              }\n              mediaSource.removeSourceBuffer(sourceBuffers[i]);\n            }\n            if (open) {\n              mediaSource.endOfStream();\n            }\n          } catch (err) {\n            this.warn(`onMediaDetaching: ${err.message} while calling endOfStream`);\n          }\n        }\n        if (this.sourceBufferCount) {\n          this.onBufferReset();\n        }\n      }\n      mediaSource.removeEventListener(\"sourceopen\", this._onMediaSourceOpen);\n      mediaSource.removeEventListener(\"sourceended\", this._onMediaSourceEnded);\n      mediaSource.removeEventListener(\"sourceclose\", this._onMediaSourceClose);\n      if (this.appendSource) {\n        mediaSource.removeEventListener(\"startstreaming\", this._onStartStreaming);\n        mediaSource.removeEventListener(\"endstreaming\", this._onEndStreaming);\n      }\n      this.mediaSource = null;\n      this._objectUrl = null;\n    }\n    if (media) {\n      media.removeEventListener(\"emptied\", this._onMediaEmptied);\n      if (!transferringMedia) {\n        if (_objectUrl) {\n          self.URL.revokeObjectURL(_objectUrl);\n        }\n        if (this.mediaSrc === _objectUrl) {\n          media.removeAttribute(\"src\");\n          if (this.appendSource) {\n            removeSourceChildren(media);\n          }\n          media.load();\n        } else {\n          this.warn(\"media|source.src was changed by a third party - skip cleanup\");\n        }\n      }\n      this.media = null;\n    }\n    this.hls.trigger(Events.MEDIA_DETACHED, data);\n  }\n  onBufferReset() {\n    this.sourceBuffers.forEach(([type]) => {\n      if (type) {\n        this.resetBuffer(type);\n      }\n    });\n    this.initTracks();\n  }\n  resetBuffer(type) {\n    var _this$tracks$type;\n    const sb = (_this$tracks$type = this.tracks[type]) == null ? void 0 : _this$tracks$type.buffer;\n    this.removeBuffer(type);\n    if (sb) {\n      try {\n        var _this$mediaSource3;\n        if ((_this$mediaSource3 = this.mediaSource) != null && _this$mediaSource3.sourceBuffers.length) {\n          this.mediaSource.removeSourceBuffer(sb);\n        }\n      } catch (err) {\n        this.warn(`onBufferReset ${type}`, err);\n      }\n    }\n    delete this.tracks[type];\n  }\n  removeBuffer(type) {\n    this.removeBufferListeners(type);\n    this.sourceBuffers[sourceBufferNameToIndex(type)] = [null, null];\n    const track = this.tracks[type];\n    if (track) {\n      track.buffer = void 0;\n    }\n  }\n  resetQueue() {\n    if (this.operationQueue) {\n      this.operationQueue.destroy();\n    }\n    this.operationQueue = new BufferOperationQueue(this.tracks);\n  }\n  onBufferCodecs(event, data) {\n    const tracks = this.tracks;\n    const trackNames = Object.keys(data);\n    this.log(`BUFFER_CODECS: \"${trackNames}\" (current SB count ${this.sourceBufferCount})`);\n    const unmuxedToMuxed = \"audiovideo\" in data && (tracks.audio || tracks.video) || tracks.audiovideo && (\"audio\" in data || \"video\" in data);\n    const muxedToUnmuxed = !unmuxedToMuxed && this.sourceBufferCount && this.media && trackNames.some((sbName) => !tracks[sbName]);\n    if (unmuxedToMuxed || muxedToUnmuxed) {\n      this.warn(`Unsupported transition between \"${Object.keys(tracks)}\" and \"${trackNames}\" SourceBuffers`);\n      return;\n    }\n    trackNames.forEach((trackName) => {\n      var _this$transferData3, _this$transferData3$t, _trackCodec;\n      const parsedTrack = data[trackName];\n      const {\n        id,\n        codec,\n        levelCodec,\n        container,\n        metadata,\n        supplemental\n      } = parsedTrack;\n      let track = tracks[trackName];\n      const transferredTrack = (_this$transferData3 = this.transferData) == null ? void 0 : (_this$transferData3$t = _this$transferData3.tracks) == null ? void 0 : _this$transferData3$t[trackName];\n      const sbTrack = transferredTrack != null && transferredTrack.buffer ? transferredTrack : track;\n      const sbCodec = (sbTrack == null ? void 0 : sbTrack.pendingCodec) || (sbTrack == null ? void 0 : sbTrack.codec);\n      const trackLevelCodec = sbTrack == null ? void 0 : sbTrack.levelCodec;\n      if (!track) {\n        track = tracks[trackName] = {\n          buffer: void 0,\n          listeners: [],\n          codec,\n          supplemental,\n          container,\n          levelCodec,\n          metadata,\n          id\n        };\n      }\n      const currentCodecFull = pickMostCompleteCodecName(sbCodec, trackLevelCodec);\n      const currentCodec = currentCodecFull == null ? void 0 : currentCodecFull.replace(VIDEO_CODEC_PROFILE_REPLACE, \"$1\");\n      let trackCodec = pickMostCompleteCodecName(codec, levelCodec);\n      const nextCodec = (_trackCodec = trackCodec) == null ? void 0 : _trackCodec.replace(VIDEO_CODEC_PROFILE_REPLACE, \"$1\");\n      if (trackCodec && currentCodecFull && currentCodec !== nextCodec) {\n        if (trackName.slice(0, 5) === \"audio\") {\n          trackCodec = getCodecCompatibleName(trackCodec, this.appendSource);\n        }\n        this.log(`switching codec ${sbCodec} to ${trackCodec}`);\n        if (trackCodec !== (track.pendingCodec || track.codec)) {\n          track.pendingCodec = trackCodec;\n        }\n        track.container = container;\n        this.appendChangeType(trackName, container, trackCodec);\n      }\n    });\n    if (this.tracksReady || this.sourceBufferCount) {\n      data.tracks = this.sourceBufferTracks;\n    }\n    if (this.sourceBufferCount) {\n      return;\n    }\n    if (this.mediaSourceOpenOrEnded) {\n      this.checkPendingTracks();\n    }\n  }\n  get sourceBufferTracks() {\n    return Object.keys(this.tracks).reduce((baseTracks, type) => {\n      const track = this.tracks[type];\n      baseTracks[type] = {\n        id: track.id,\n        container: track.container,\n        codec: track.codec,\n        levelCodec: track.levelCodec\n      };\n      return baseTracks;\n    }, {});\n  }\n  appendChangeType(type, container, codec) {\n    const mimeType = `${container};codecs=${codec}`;\n    const operation = {\n      label: `change-type=${mimeType}`,\n      execute: () => {\n        const track = this.tracks[type];\n        if (track) {\n          const sb = track.buffer;\n          if (sb != null && sb.changeType) {\n            this.log(`changing ${type} sourceBuffer type to ${mimeType}`);\n            sb.changeType(mimeType);\n            track.codec = codec;\n            track.container = container;\n          }\n        }\n        this.shiftAndExecuteNext(type);\n      },\n      onStart: () => {\n      },\n      onComplete: () => {\n      },\n      onError: (error) => {\n        this.warn(`Failed to change ${type} SourceBuffer type`, error);\n      }\n    };\n    this.append(operation, type, this.isPending(this.tracks[type]));\n  }\n  blockAudio(partOrFrag) {\n    var _this$fragmentTracker;\n    const pStart = partOrFrag.start;\n    const pTime = pStart + partOrFrag.duration * 0.05;\n    const atGap = ((_this$fragmentTracker = this.fragmentTracker.getAppendedFrag(pStart, PlaylistLevelType.MAIN)) == null ? void 0 : _this$fragmentTracker.gap) === true;\n    if (atGap) {\n      return;\n    }\n    const op = {\n      label: \"block-audio\",\n      execute: () => {\n        var _this$fragmentTracker2;\n        const videoTrack = this.tracks.video;\n        if (this.lastVideoAppendEnd > pTime || videoTrack != null && videoTrack.buffer && BufferHelper.isBuffered(videoTrack.buffer, pTime) || ((_this$fragmentTracker2 = this.fragmentTracker.getAppendedFrag(pTime, PlaylistLevelType.MAIN)) == null ? void 0 : _this$fragmentTracker2.gap) === true) {\n          this.blockedAudioAppend = null;\n          this.shiftAndExecuteNext(\"audio\");\n        }\n      },\n      onStart: () => {\n      },\n      onComplete: () => {\n      },\n      onError: (error) => {\n        this.warn(\"Error executing block-audio operation\", error);\n      }\n    };\n    this.blockedAudioAppend = {\n      op,\n      frag: partOrFrag\n    };\n    this.append(op, \"audio\", true);\n  }\n  unblockAudio() {\n    const {\n      blockedAudioAppend,\n      operationQueue\n    } = this;\n    if (blockedAudioAppend && operationQueue) {\n      this.blockedAudioAppend = null;\n      operationQueue.unblockAudio(blockedAudioAppend.op);\n    }\n  }\n  onBufferAppending(event, eventData) {\n    const {\n      tracks\n    } = this;\n    const {\n      data,\n      type,\n      parent,\n      frag,\n      part,\n      chunkMeta,\n      offset\n    } = eventData;\n    const chunkStats = chunkMeta.buffering[type];\n    const {\n      sn,\n      cc\n    } = frag;\n    const bufferAppendingStart = self.performance.now();\n    chunkStats.start = bufferAppendingStart;\n    const fragBuffering = frag.stats.buffering;\n    const partBuffering = part ? part.stats.buffering : null;\n    if (fragBuffering.start === 0) {\n      fragBuffering.start = bufferAppendingStart;\n    }\n    if (partBuffering && partBuffering.start === 0) {\n      partBuffering.start = bufferAppendingStart;\n    }\n    const audioTrack = tracks.audio;\n    let checkTimestampOffset = false;\n    if (type === \"audio\" && (audioTrack == null ? void 0 : audioTrack.container) === \"audio/mpeg\") {\n      checkTimestampOffset = !this.lastMpegAudioChunk || chunkMeta.id === 1 || this.lastMpegAudioChunk.sn !== chunkMeta.sn;\n      this.lastMpegAudioChunk = chunkMeta;\n    }\n    const videoTrack = tracks.video;\n    const videoSb = videoTrack == null ? void 0 : videoTrack.buffer;\n    if (videoSb && sn !== \"initSegment\") {\n      const partOrFrag = part || frag;\n      const blockedAudioAppend = this.blockedAudioAppend;\n      if (type === \"audio\" && parent !== \"main\" && !this.blockedAudioAppend) {\n        const pStart = partOrFrag.start;\n        const pTime = pStart + partOrFrag.duration * 0.05;\n        const vbuffered = videoSb.buffered;\n        const vappending = this.currentOp(\"video\");\n        if (!vbuffered.length && !vappending) {\n          this.blockAudio(partOrFrag);\n        } else if (!vappending && !BufferHelper.isBuffered(videoSb, pTime) && this.lastVideoAppendEnd < pTime) {\n          this.blockAudio(partOrFrag);\n        }\n      } else if (type === \"video\") {\n        const videoAppendEnd = partOrFrag.end;\n        if (blockedAudioAppend) {\n          const audioStart = blockedAudioAppend.frag.start;\n          if (videoAppendEnd > audioStart || videoAppendEnd < this.lastVideoAppendEnd || BufferHelper.isBuffered(videoSb, audioStart)) {\n            this.unblockAudio();\n          }\n        }\n        this.lastVideoAppendEnd = videoAppendEnd;\n      }\n    }\n    const fragStart = (part || frag).start;\n    const operation = {\n      label: `append-${type}`,\n      execute: () => {\n        var _this$tracks$type2;\n        chunkStats.executeStart = self.performance.now();\n        const sb = (_this$tracks$type2 = this.tracks[type]) == null ? void 0 : _this$tracks$type2.buffer;\n        if (sb) {\n          if (checkTimestampOffset) {\n            this.updateTimestampOffset(sb, fragStart, 0.1, type, sn, cc);\n          } else if (offset !== void 0 && isFiniteNumber(offset)) {\n            this.updateTimestampOffset(sb, offset, 1e-6, type, sn, cc);\n          }\n        }\n        this.appendExecutor(data, type);\n      },\n      onStart: () => {\n      },\n      onComplete: () => {\n        const end = self.performance.now();\n        chunkStats.executeEnd = chunkStats.end = end;\n        if (fragBuffering.first === 0) {\n          fragBuffering.first = end;\n        }\n        if (partBuffering && partBuffering.first === 0) {\n          partBuffering.first = end;\n        }\n        const timeRanges = {};\n        this.sourceBuffers.forEach(([type2, sb]) => {\n          if (type2) {\n            timeRanges[type2] = BufferHelper.getBuffered(sb);\n          }\n        });\n        this.appendErrors[type] = 0;\n        if (type === \"audio\" || type === \"video\") {\n          this.appendErrors.audiovideo = 0;\n        } else {\n          this.appendErrors.audio = 0;\n          this.appendErrors.video = 0;\n        }\n        this.hls.trigger(Events.BUFFER_APPENDED, {\n          type,\n          frag,\n          part,\n          chunkMeta,\n          parent: frag.type,\n          timeRanges\n        });\n      },\n      onError: (error) => {\n        var _this$media;\n        const event2 = {\n          type: ErrorTypes.MEDIA_ERROR,\n          parent: frag.type,\n          details: ErrorDetails.BUFFER_APPEND_ERROR,\n          sourceBufferName: type,\n          frag,\n          part,\n          chunkMeta,\n          error,\n          err: error,\n          fatal: false\n        };\n        const mediaError = (_this$media = this.media) == null ? void 0 : _this$media.error;\n        if (error.code === DOMException.QUOTA_EXCEEDED_ERR || error.name == \"QuotaExceededError\" || `quota` in error) {\n          event2.details = ErrorDetails.BUFFER_FULL_ERROR;\n        } else if (error.code === DOMException.INVALID_STATE_ERR && this.mediaSourceOpenOrEnded && !mediaError) {\n          event2.errorAction = createDoNothingErrorAction(true);\n        } else if (error.name === TRACK_REMOVED_ERROR_NAME && this.sourceBufferCount === 0) {\n          event2.errorAction = createDoNothingErrorAction(true);\n        } else {\n          const appendErrorCount = ++this.appendErrors[type];\n          this.warn(`Failed ${appendErrorCount}/${this.hls.config.appendErrorMaxRetry} times to append segment in \"${type}\" sourceBuffer (${mediaError ? mediaError : \"no media error\"})`);\n          if (appendErrorCount >= this.hls.config.appendErrorMaxRetry || !!mediaError) {\n            event2.fatal = true;\n          }\n        }\n        this.hls.trigger(Events.ERROR, event2);\n      }\n    };\n    this.append(operation, type, this.isPending(this.tracks[type]));\n  }\n  getFlushOp(type, start, end) {\n    this.log(`queuing \"${type}\" remove ${start}-${end}`);\n    return {\n      label: \"remove\",\n      execute: () => {\n        this.removeExecutor(type, start, end);\n      },\n      onStart: () => {\n      },\n      onComplete: () => {\n        this.hls.trigger(Events.BUFFER_FLUSHED, {\n          type\n        });\n      },\n      onError: (error) => {\n        this.warn(`Failed to remove ${start}-${end} from \"${type}\" SourceBuffer`, error);\n      }\n    };\n  }\n  onBufferFlushing(event, data) {\n    const {\n      type,\n      startOffset,\n      endOffset\n    } = data;\n    if (type) {\n      this.append(this.getFlushOp(type, startOffset, endOffset), type);\n    } else {\n      this.sourceBuffers.forEach(([type2]) => {\n        if (type2) {\n          this.append(this.getFlushOp(type2, startOffset, endOffset), type2);\n        }\n      });\n    }\n  }\n  onFragParsed(event, data) {\n    const {\n      frag,\n      part\n    } = data;\n    const buffersAppendedTo = [];\n    const elementaryStreams = part ? part.elementaryStreams : frag.elementaryStreams;\n    if (elementaryStreams[ElementaryStreamTypes.AUDIOVIDEO]) {\n      buffersAppendedTo.push(\"audiovideo\");\n    } else {\n      if (elementaryStreams[ElementaryStreamTypes.AUDIO]) {\n        buffersAppendedTo.push(\"audio\");\n      }\n      if (elementaryStreams[ElementaryStreamTypes.VIDEO]) {\n        buffersAppendedTo.push(\"video\");\n      }\n    }\n    const onUnblocked = () => {\n      const now2 = self.performance.now();\n      frag.stats.buffering.end = now2;\n      if (part) {\n        part.stats.buffering.end = now2;\n      }\n      const stats = part ? part.stats : frag.stats;\n      this.hls.trigger(Events.FRAG_BUFFERED, {\n        frag,\n        part,\n        stats,\n        id: frag.type\n      });\n    };\n    if (buffersAppendedTo.length === 0) {\n      this.warn(`Fragments must have at least one ElementaryStreamType set. type: ${frag.type} level: ${frag.level} sn: ${frag.sn}`);\n    }\n    this.blockBuffers(onUnblocked, buffersAppendedTo).catch((error) => {\n      this.warn(`Fragment buffered callback ${error}`);\n      this.stepOperationQueue(this.sourceBufferTypes);\n    });\n  }\n  onFragChanged(event, data) {\n    this.trimBuffers();\n  }\n  get bufferedToEnd() {\n    return this.sourceBufferCount > 0 && !this.sourceBuffers.some(([type]) => {\n      var _this$tracks$type3, _this$tracks$type4;\n      return type && (!((_this$tracks$type3 = this.tracks[type]) != null && _this$tracks$type3.ended) || ((_this$tracks$type4 = this.tracks[type]) == null ? void 0 : _this$tracks$type4.ending));\n    });\n  }\n  // on BUFFER_EOS mark matching sourcebuffer(s) as \"ending\" and \"ended\" and queue endOfStream after remaining operations(s)\n  // an undefined data.type will mark all buffers as EOS.\n  onBufferEos(event, data) {\n    var _this$overrides;\n    this.sourceBuffers.forEach(([type]) => {\n      if (type) {\n        const track = this.tracks[type];\n        if (!data.type || data.type === type) {\n          track.ending = true;\n          if (!track.ended) {\n            track.ended = true;\n            this.log(`${type} buffer reached EOS`);\n          }\n        }\n      }\n    });\n    const allowEndOfStream = ((_this$overrides = this.overrides) == null ? void 0 : _this$overrides.endOfStream) !== false;\n    const allTracksEnding = this.sourceBufferCount > 0 && !this.sourceBuffers.some(([type]) => {\n      var _this$tracks$type5;\n      return type && !((_this$tracks$type5 = this.tracks[type]) != null && _this$tracks$type5.ended);\n    });\n    if (allTracksEnding) {\n      if (allowEndOfStream) {\n        this.log(`Queueing EOS`);\n        this.blockUntilOpen(() => {\n          this.tracksEnded();\n          const {\n            mediaSource\n          } = this;\n          if (!mediaSource || mediaSource.readyState !== \"open\") {\n            if (mediaSource) {\n              this.log(`Could not call mediaSource.endOfStream(). mediaSource.readyState: ${mediaSource.readyState}`);\n            }\n            return;\n          }\n          this.log(`Calling mediaSource.endOfStream()`);\n          mediaSource.endOfStream();\n          this.hls.trigger(Events.BUFFERED_TO_END, void 0);\n        });\n      } else {\n        this.tracksEnded();\n        this.hls.trigger(Events.BUFFERED_TO_END, void 0);\n      }\n    }\n  }\n  tracksEnded() {\n    this.sourceBuffers.forEach(([type]) => {\n      if (type !== null) {\n        const track = this.tracks[type];\n        if (track) {\n          track.ending = false;\n        }\n      }\n    });\n  }\n  onLevelUpdated(event, {\n    details\n  }) {\n    if (!details.fragments.length) {\n      return;\n    }\n    this.details = details;\n    this.updateDuration();\n  }\n  updateDuration() {\n    this.blockUntilOpen(() => {\n      const durationAndRange = this.getDurationAndRange();\n      if (!durationAndRange) {\n        return;\n      }\n      this.updateMediaSource(durationAndRange);\n    });\n  }\n  onError(event, data) {\n    if (data.details === ErrorDetails.BUFFER_APPEND_ERROR && data.frag) {\n      var _data$errorAction;\n      const nextAutoLevel = (_data$errorAction = data.errorAction) == null ? void 0 : _data$errorAction.nextAutoLevel;\n      if (isFiniteNumber(nextAutoLevel) && nextAutoLevel !== data.frag.level) {\n        this.resetAppendErrors();\n      }\n    }\n  }\n  resetAppendErrors() {\n    this.appendErrors = {\n      audio: 0,\n      video: 0,\n      audiovideo: 0\n    };\n  }\n  trimBuffers() {\n    const {\n      hls,\n      details,\n      media\n    } = this;\n    if (!media || details === null) {\n      return;\n    }\n    if (!this.sourceBufferCount) {\n      return;\n    }\n    const config = hls.config;\n    const currentTime = media.currentTime;\n    const targetDuration = details.levelTargetDuration;\n    const backBufferLength = details.live && config.liveBackBufferLength !== null ? config.liveBackBufferLength : config.backBufferLength;\n    if (isFiniteNumber(backBufferLength) && backBufferLength >= 0) {\n      const maxBackBufferLength = Math.max(backBufferLength, targetDuration);\n      const targetBackBufferPosition = Math.floor(currentTime / targetDuration) * targetDuration - maxBackBufferLength;\n      this.flushBackBuffer(currentTime, targetDuration, targetBackBufferPosition);\n    }\n    if (isFiniteNumber(config.frontBufferFlushThreshold) && config.frontBufferFlushThreshold > 0) {\n      const frontBufferLength = Math.max(config.maxBufferLength, config.frontBufferFlushThreshold);\n      const maxFrontBufferLength = Math.max(frontBufferLength, targetDuration);\n      const targetFrontBufferPosition = Math.floor(currentTime / targetDuration) * targetDuration + maxFrontBufferLength;\n      this.flushFrontBuffer(currentTime, targetDuration, targetFrontBufferPosition);\n    }\n  }\n  flushBackBuffer(currentTime, targetDuration, targetBackBufferPosition) {\n    this.sourceBuffers.forEach(([type, sb]) => {\n      if (sb) {\n        const buffered = BufferHelper.getBuffered(sb);\n        if (buffered.length > 0 && targetBackBufferPosition > buffered.start(0)) {\n          var _this$details;\n          this.hls.trigger(Events.BACK_BUFFER_REACHED, {\n            bufferEnd: targetBackBufferPosition\n          });\n          const track = this.tracks[type];\n          if ((_this$details = this.details) != null && _this$details.live) {\n            this.hls.trigger(Events.LIVE_BACK_BUFFER_REACHED, {\n              bufferEnd: targetBackBufferPosition\n            });\n          } else if (track != null && track.ended) {\n            this.log(`Cannot flush ${type} back buffer while SourceBuffer is in ended state`);\n            return;\n          }\n          this.hls.trigger(Events.BUFFER_FLUSHING, {\n            startOffset: 0,\n            endOffset: targetBackBufferPosition,\n            type\n          });\n        }\n      }\n    });\n  }\n  flushFrontBuffer(currentTime, targetDuration, targetFrontBufferPosition) {\n    this.sourceBuffers.forEach(([type, sb]) => {\n      if (sb) {\n        const buffered = BufferHelper.getBuffered(sb);\n        const numBufferedRanges = buffered.length;\n        if (numBufferedRanges < 2) {\n          return;\n        }\n        const bufferStart = buffered.start(numBufferedRanges - 1);\n        const bufferEnd = buffered.end(numBufferedRanges - 1);\n        if (targetFrontBufferPosition > bufferStart || currentTime >= bufferStart && currentTime <= bufferEnd) {\n          return;\n        }\n        this.hls.trigger(Events.BUFFER_FLUSHING, {\n          startOffset: bufferStart,\n          endOffset: Infinity,\n          type\n        });\n      }\n    });\n  }\n  /**\n   * Update Media Source duration to current level duration or override to Infinity if configuration parameter\n   * 'liveDurationInfinity` is set to `true`\n   * More details: https://github.com/video-dev/hls.js/issues/355\n   */\n  getDurationAndRange() {\n    var _this$overrides2;\n    const {\n      details,\n      mediaSource\n    } = this;\n    if (!details || !this.media || (mediaSource == null ? void 0 : mediaSource.readyState) !== \"open\") {\n      return null;\n    }\n    const playlistEnd = details.edge;\n    if (details.live && this.hls.config.liveDurationInfinity) {\n      const len = details.fragments.length;\n      if (len && details.live && !!mediaSource.setLiveSeekableRange) {\n        const start = Math.max(0, details.fragmentStart);\n        const end = Math.max(start, playlistEnd);\n        return {\n          duration: Infinity,\n          start,\n          end\n        };\n      }\n      return {\n        duration: Infinity\n      };\n    }\n    const overrideDuration = (_this$overrides2 = this.overrides) == null ? void 0 : _this$overrides2.duration;\n    if (overrideDuration) {\n      if (!isFiniteNumber(overrideDuration)) {\n        return null;\n      }\n      return {\n        duration: overrideDuration\n      };\n    }\n    const mediaDuration = this.media.duration;\n    const msDuration = isFiniteNumber(mediaSource.duration) ? mediaSource.duration : 0;\n    if (playlistEnd > msDuration && playlistEnd > mediaDuration || !isFiniteNumber(mediaDuration)) {\n      return {\n        duration: playlistEnd\n      };\n    }\n    return null;\n  }\n  updateMediaSource({\n    duration,\n    start,\n    end\n  }) {\n    const mediaSource = this.mediaSource;\n    if (!this.media || !mediaSource || mediaSource.readyState !== \"open\") {\n      return;\n    }\n    if (mediaSource.duration !== duration) {\n      if (isFiniteNumber(duration)) {\n        this.log(`Updating MediaSource duration to ${duration.toFixed(3)}`);\n      }\n      mediaSource.duration = duration;\n    }\n    if (start !== void 0 && end !== void 0) {\n      this.log(`MediaSource duration is set to ${mediaSource.duration}. Setting seekable range to ${start}-${end}.`);\n      mediaSource.setLiveSeekableRange(start, end);\n    }\n  }\n  get tracksReady() {\n    const pendingTrackCount = this.pendingTrackCount;\n    return pendingTrackCount > 0 && (pendingTrackCount >= this.bufferCodecEventsTotal || this.isPending(this.tracks.audiovideo));\n  }\n  checkPendingTracks() {\n    const {\n      bufferCodecEventsTotal,\n      pendingTrackCount,\n      tracks\n    } = this;\n    this.log(`checkPendingTracks (pending: ${pendingTrackCount} codec events expected: ${bufferCodecEventsTotal}) ${stringify(tracks)}`);\n    if (this.tracksReady) {\n      var _this$transferData4;\n      const transferredTracks = (_this$transferData4 = this.transferData) == null ? void 0 : _this$transferData4.tracks;\n      if (transferredTracks && Object.keys(transferredTracks).length) {\n        this.attachTransferred();\n      } else {\n        this.createSourceBuffers();\n      }\n    }\n  }\n  bufferCreated() {\n    if (this.sourceBufferCount) {\n      const tracks = {};\n      this.sourceBuffers.forEach(([type, buffer2]) => {\n        if (type) {\n          const track = this.tracks[type];\n          tracks[type] = {\n            buffer: buffer2,\n            container: track.container,\n            codec: track.codec,\n            supplemental: track.supplemental,\n            levelCodec: track.levelCodec,\n            id: track.id,\n            metadata: track.metadata\n          };\n        }\n      });\n      this.hls.trigger(Events.BUFFER_CREATED, {\n        tracks\n      });\n      this.log(`SourceBuffers created. Running queue: ${this.operationQueue}`);\n      this.sourceBuffers.forEach(([type]) => {\n        this.executeNext(type);\n      });\n    } else {\n      const error = new Error(\"could not create source buffer for media codec(s)\");\n      this.hls.trigger(Events.ERROR, {\n        type: ErrorTypes.MEDIA_ERROR,\n        details: ErrorDetails.BUFFER_INCOMPATIBLE_CODECS_ERROR,\n        fatal: true,\n        error,\n        reason: error.message\n      });\n    }\n  }\n  createSourceBuffers() {\n    const {\n      tracks,\n      sourceBuffers,\n      mediaSource\n    } = this;\n    if (!mediaSource) {\n      throw new Error(\"createSourceBuffers called when mediaSource was null\");\n    }\n    for (const trackName in tracks) {\n      const type = trackName;\n      const track = tracks[type];\n      if (this.isPending(track)) {\n        const codec = this.getTrackCodec(track, type);\n        const mimeType = `${track.container};codecs=${codec}`;\n        track.codec = codec;\n        this.log(`creating sourceBuffer(${mimeType})${this.currentOp(type) ? \" Queued\" : \"\"} ${stringify(track)}`);\n        try {\n          const sb = mediaSource.addSourceBuffer(mimeType);\n          const sbIndex = sourceBufferNameToIndex(type);\n          const sbTuple = [type, sb];\n          sourceBuffers[sbIndex] = sbTuple;\n          track.buffer = sb;\n        } catch (error) {\n          var _this$operationQueue;\n          this.error(`error while trying to add sourceBuffer: ${error.message}`);\n          this.shiftAndExecuteNext(type);\n          (_this$operationQueue = this.operationQueue) == null ? void 0 : _this$operationQueue.removeBlockers();\n          delete this.tracks[type];\n          this.hls.trigger(Events.ERROR, {\n            type: ErrorTypes.MEDIA_ERROR,\n            details: ErrorDetails.BUFFER_ADD_CODEC_ERROR,\n            fatal: false,\n            error,\n            sourceBufferName: type,\n            mimeType,\n            parent: track.id\n          });\n          return;\n        }\n        this.trackSourceBuffer(type, track);\n      }\n    }\n    this.bufferCreated();\n  }\n  getTrackCodec(track, trackName) {\n    const supplementalCodec = track.supplemental;\n    let trackCodec = track.codec;\n    if (supplementalCodec && (trackName === \"video\" || trackName === \"audiovideo\") && areCodecsMediaSourceSupported(supplementalCodec, \"video\")) {\n      trackCodec = replaceVideoCodec(trackCodec, supplementalCodec);\n    }\n    const codec = pickMostCompleteCodecName(trackCodec, track.levelCodec);\n    if (codec) {\n      if (trackName.slice(0, 5) === \"audio\") {\n        return getCodecCompatibleName(codec, this.appendSource);\n      }\n      return codec;\n    }\n    return \"\";\n  }\n  trackSourceBuffer(type, track) {\n    const buffer2 = track.buffer;\n    if (!buffer2) {\n      return;\n    }\n    const codec = this.getTrackCodec(track, type);\n    this.tracks[type] = {\n      buffer: buffer2,\n      codec,\n      container: track.container,\n      levelCodec: track.levelCodec,\n      supplemental: track.supplemental,\n      metadata: track.metadata,\n      id: track.id,\n      listeners: []\n    };\n    this.removeBufferListeners(type);\n    this.addBufferListener(type, \"updatestart\", this.onSBUpdateStart);\n    this.addBufferListener(type, \"updateend\", this.onSBUpdateEnd);\n    this.addBufferListener(type, \"error\", this.onSBUpdateError);\n    if (this.appendSource) {\n      this.addBufferListener(type, \"bufferedchange\", (type2, event) => {\n        const removedRanges = event.removedRanges;\n        if (removedRanges != null && removedRanges.length) {\n          this.hls.trigger(Events.BUFFER_FLUSHED, {\n            type: type2\n          });\n        }\n      });\n    }\n  }\n  get mediaSrc() {\n    var _this$media2, _this$media2$querySel;\n    const media = ((_this$media2 = this.media) == null ? void 0 : (_this$media2$querySel = _this$media2.querySelector) == null ? void 0 : _this$media2$querySel.call(_this$media2, \"source\")) || this.media;\n    return media == null ? void 0 : media.src;\n  }\n  onSBUpdateStart(type) {\n    const operation = this.currentOp(type);\n    if (!operation) {\n      return;\n    }\n    operation.onStart();\n  }\n  onSBUpdateEnd(type) {\n    var _this$mediaSource4;\n    if (((_this$mediaSource4 = this.mediaSource) == null ? void 0 : _this$mediaSource4.readyState) === \"closed\") {\n      this.resetBuffer(type);\n      return;\n    }\n    const operation = this.currentOp(type);\n    if (!operation) {\n      return;\n    }\n    operation.onComplete();\n    this.shiftAndExecuteNext(type);\n  }\n  onSBUpdateError(type, event) {\n    var _this$mediaSource5;\n    const error = new Error(`${type} SourceBuffer error. MediaSource readyState: ${(_this$mediaSource5 = this.mediaSource) == null ? void 0 : _this$mediaSource5.readyState}`);\n    this.error(`${error}`, event);\n    this.hls.trigger(Events.ERROR, {\n      type: ErrorTypes.MEDIA_ERROR,\n      details: ErrorDetails.BUFFER_APPENDING_ERROR,\n      sourceBufferName: type,\n      error,\n      fatal: false\n    });\n    const operation = this.currentOp(type);\n    if (operation) {\n      operation.onError(error);\n    }\n  }\n  updateTimestampOffset(sb, timestampOffset, tolerance, type, sn, cc) {\n    const delta = timestampOffset - sb.timestampOffset;\n    if (Math.abs(delta) >= tolerance) {\n      this.log(`Updating ${type} SourceBuffer timestampOffset to ${timestampOffset} (sn: ${sn} cc: ${cc})`);\n      sb.timestampOffset = timestampOffset;\n    }\n  }\n  // This method must result in an updateend event; if remove is not called, onSBUpdateEnd must be called manually\n  removeExecutor(type, startOffset, endOffset) {\n    const {\n      media,\n      mediaSource\n    } = this;\n    const track = this.tracks[type];\n    const sb = track == null ? void 0 : track.buffer;\n    if (!media || !mediaSource || !sb) {\n      this.warn(`Attempting to remove from the ${type} SourceBuffer, but it does not exist`);\n      this.shiftAndExecuteNext(type);\n      return;\n    }\n    const mediaDuration = isFiniteNumber(media.duration) ? media.duration : Infinity;\n    const msDuration = isFiniteNumber(mediaSource.duration) ? mediaSource.duration : Infinity;\n    const removeStart = Math.max(0, startOffset);\n    const removeEnd = Math.min(endOffset, mediaDuration, msDuration);\n    if (removeEnd > removeStart && (!track.ending || track.ended)) {\n      track.ended = false;\n      this.log(`Removing [${removeStart},${removeEnd}] from the ${type} SourceBuffer`);\n      sb.remove(removeStart, removeEnd);\n    } else {\n      this.shiftAndExecuteNext(type);\n    }\n  }\n  // This method must result in an updateend event; if append is not called, onSBUpdateEnd must be called manually\n  appendExecutor(data, type) {\n    const track = this.tracks[type];\n    const sb = track == null ? void 0 : track.buffer;\n    if (!sb) {\n      throw new HlsJsTrackRemovedError(`Attempting to append to the ${type} SourceBuffer, but it does not exist`);\n    }\n    track.ending = false;\n    track.ended = false;\n    sb.appendBuffer(data);\n  }\n  blockUntilOpen(callback) {\n    if (this.isUpdating() || this.isQueued()) {\n      this.blockBuffers(callback).catch((error) => {\n        this.warn(`SourceBuffer blocked callback ${error}`);\n        this.stepOperationQueue(this.sourceBufferTypes);\n      });\n    } else {\n      try {\n        callback();\n      } catch (error) {\n        this.warn(`Callback run without blocking ${this.operationQueue} ${error}`);\n      }\n    }\n  }\n  isUpdating() {\n    return this.sourceBuffers.some(([type, sb]) => type && sb.updating);\n  }\n  isQueued() {\n    return this.sourceBuffers.some(([type]) => type && !!this.currentOp(type));\n  }\n  isPending(track) {\n    return !!track && !track.buffer;\n  }\n  // Enqueues an operation to each SourceBuffer queue which, upon execution, resolves a promise. When all promises\n  // resolve, the onUnblocked function is executed. Functions calling this method do not need to unblock the queue\n  // upon completion, since we already do it here\n  blockBuffers(onUnblocked, bufferNames = this.sourceBufferTypes) {\n    if (!bufferNames.length) {\n      this.log(\"Blocking operation requested, but no SourceBuffers exist\");\n      return Promise.resolve().then(onUnblocked);\n    }\n    const {\n      operationQueue\n    } = this;\n    const blockingOperations = bufferNames.map((type) => this.appendBlocker(type));\n    const audioBlocked = bufferNames.length > 1 && !!this.blockedAudioAppend;\n    if (audioBlocked) {\n      this.unblockAudio();\n    }\n    return Promise.all(blockingOperations).then((result) => {\n      if (operationQueue !== this.operationQueue) {\n        return;\n      }\n      onUnblocked();\n      this.stepOperationQueue(this.sourceBufferTypes);\n    });\n  }\n  stepOperationQueue(bufferNames) {\n    bufferNames.forEach((type) => {\n      var _this$tracks$type6;\n      const sb = (_this$tracks$type6 = this.tracks[type]) == null ? void 0 : _this$tracks$type6.buffer;\n      if (!sb || sb.updating) {\n        return;\n      }\n      this.shiftAndExecuteNext(type);\n    });\n  }\n  append(operation, type, pending) {\n    if (this.operationQueue) {\n      this.operationQueue.append(operation, type, pending);\n    }\n  }\n  appendBlocker(type) {\n    if (this.operationQueue) {\n      return this.operationQueue.appendBlocker(type);\n    }\n  }\n  currentOp(type) {\n    if (this.operationQueue) {\n      return this.operationQueue.current(type);\n    }\n    return null;\n  }\n  executeNext(type) {\n    if (type && this.operationQueue) {\n      this.operationQueue.executeNext(type);\n    }\n  }\n  shiftAndExecuteNext(type) {\n    if (this.operationQueue) {\n      this.operationQueue.shiftAndExecuteNext(type);\n    }\n  }\n  get pendingTrackCount() {\n    return Object.keys(this.tracks).reduce((acc, type) => acc + (this.isPending(this.tracks[type]) ? 1 : 0), 0);\n  }\n  get sourceBufferCount() {\n    return this.sourceBuffers.reduce((acc, [type]) => acc + (type ? 1 : 0), 0);\n  }\n  get sourceBufferTypes() {\n    return this.sourceBuffers.map(([type]) => type).filter((type) => !!type);\n  }\n  addBufferListener(type, event, fn) {\n    const track = this.tracks[type];\n    if (!track) {\n      return;\n    }\n    const buffer2 = track.buffer;\n    if (!buffer2) {\n      return;\n    }\n    const listener = fn.bind(this, type);\n    track.listeners.push({\n      event,\n      listener\n    });\n    buffer2.addEventListener(event, listener);\n  }\n  removeBufferListeners(type) {\n    const track = this.tracks[type];\n    if (!track) {\n      return;\n    }\n    const buffer2 = track.buffer;\n    if (!buffer2) {\n      return;\n    }\n    track.listeners.forEach((l) => {\n      buffer2.removeEventListener(l.event, l.listener);\n    });\n    track.listeners.length = 0;\n  }\n}\nfunction removeSourceChildren(node) {\n  const sourceChildren = node.querySelectorAll(\"source\");\n  [].slice.call(sourceChildren).forEach((source) => {\n    node.removeChild(source);\n  });\n}\nfunction addSource(media, url) {\n  const source = self.document.createElement(\"source\");\n  source.type = \"video/mp4\";\n  source.src = url;\n  media.appendChild(source);\n}\nfunction sourceBufferNameToIndex(type) {\n  return type === \"audio\" ? 1 : 0;\n}\nclass CapLevelController {\n  constructor(hls) {\n    this.hls = void 0;\n    this.autoLevelCapping = void 0;\n    this.firstLevel = void 0;\n    this.media = void 0;\n    this.restrictedLevels = void 0;\n    this.timer = void 0;\n    this.clientRect = void 0;\n    this.streamController = void 0;\n    this.hls = hls;\n    this.autoLevelCapping = Number.POSITIVE_INFINITY;\n    this.firstLevel = -1;\n    this.media = null;\n    this.restrictedLevels = [];\n    this.timer = void 0;\n    this.clientRect = null;\n    this.registerListeners();\n  }\n  setStreamController(streamController) {\n    this.streamController = streamController;\n  }\n  destroy() {\n    if (this.hls) {\n      this.unregisterListener();\n    }\n    if (this.timer) {\n      this.stopCapping();\n    }\n    this.media = null;\n    this.clientRect = null;\n    this.hls = this.streamController = null;\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.FPS_DROP_LEVEL_CAPPING, this.onFpsDropLevelCapping, this);\n    hls.on(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.on(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.on(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n    hls.on(Events.BUFFER_CODECS, this.onBufferCodecs, this);\n    hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n  }\n  unregisterListener() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.FPS_DROP_LEVEL_CAPPING, this.onFpsDropLevelCapping, this);\n    hls.off(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.off(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.off(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n    hls.off(Events.BUFFER_CODECS, this.onBufferCodecs, this);\n    hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n  }\n  onFpsDropLevelCapping(event, data) {\n    const level = this.hls.levels[data.droppedLevel];\n    if (this.isLevelAllowed(level)) {\n      this.restrictedLevels.push({\n        bitrate: level.bitrate,\n        height: level.height,\n        width: level.width\n      });\n    }\n  }\n  onMediaAttaching(event, data) {\n    this.media = data.media instanceof HTMLVideoElement ? data.media : null;\n    this.clientRect = null;\n    if (this.timer && this.hls.levels.length) {\n      this.detectPlayerSize();\n    }\n  }\n  onManifestParsed(event, data) {\n    const hls = this.hls;\n    this.restrictedLevels = [];\n    this.firstLevel = data.firstLevel;\n    if (hls.config.capLevelToPlayerSize && data.video) {\n      this.startCapping();\n    }\n  }\n  onLevelsUpdated(event, data) {\n    if (this.timer && isFiniteNumber(this.autoLevelCapping)) {\n      this.detectPlayerSize();\n    }\n  }\n  // Only activate capping when playing a video stream; otherwise, multi-bitrate audio-only streams will be restricted\n  // to the first level\n  onBufferCodecs(event, data) {\n    const hls = this.hls;\n    if (hls.config.capLevelToPlayerSize && data.video) {\n      this.startCapping();\n    }\n  }\n  onMediaDetaching() {\n    this.stopCapping();\n    this.media = null;\n  }\n  detectPlayerSize() {\n    if (this.media) {\n      if (this.mediaHeight <= 0 || this.mediaWidth <= 0) {\n        this.clientRect = null;\n        return;\n      }\n      const levels = this.hls.levels;\n      if (levels.length) {\n        const hls = this.hls;\n        const maxLevel = this.getMaxLevel(levels.length - 1);\n        if (maxLevel !== this.autoLevelCapping) {\n          hls.logger.log(`Setting autoLevelCapping to ${maxLevel}: ${levels[maxLevel].height}p@${levels[maxLevel].bitrate} for media ${this.mediaWidth}x${this.mediaHeight}`);\n        }\n        hls.autoLevelCapping = maxLevel;\n        if (hls.autoLevelEnabled && hls.autoLevelCapping > this.autoLevelCapping && this.streamController) {\n          this.streamController.nextLevelSwitch();\n        }\n        this.autoLevelCapping = hls.autoLevelCapping;\n      }\n    }\n  }\n  /*\n   * returns level should be the one with the dimensions equal or greater than the media (player) dimensions (so the video will be downscaled)\n   */\n  getMaxLevel(capLevelIndex) {\n    const levels = this.hls.levels;\n    if (!levels.length) {\n      return -1;\n    }\n    const validLevels = levels.filter((level, index) => this.isLevelAllowed(level) && index <= capLevelIndex);\n    this.clientRect = null;\n    return CapLevelController.getMaxLevelByMediaSize(validLevels, this.mediaWidth, this.mediaHeight);\n  }\n  startCapping() {\n    if (this.timer) {\n      return;\n    }\n    this.autoLevelCapping = Number.POSITIVE_INFINITY;\n    self.clearInterval(this.timer);\n    this.timer = self.setInterval(this.detectPlayerSize.bind(this), 1e3);\n    this.detectPlayerSize();\n  }\n  stopCapping() {\n    this.restrictedLevels = [];\n    this.firstLevel = -1;\n    this.autoLevelCapping = Number.POSITIVE_INFINITY;\n    if (this.timer) {\n      self.clearInterval(this.timer);\n      this.timer = void 0;\n    }\n  }\n  getDimensions() {\n    if (this.clientRect) {\n      return this.clientRect;\n    }\n    const media = this.media;\n    const boundsRect = {\n      width: 0,\n      height: 0\n    };\n    if (media) {\n      const clientRect = media.getBoundingClientRect();\n      boundsRect.width = clientRect.width;\n      boundsRect.height = clientRect.height;\n      if (!boundsRect.width && !boundsRect.height) {\n        boundsRect.width = clientRect.right - clientRect.left || media.width || 0;\n        boundsRect.height = clientRect.bottom - clientRect.top || media.height || 0;\n      }\n    }\n    this.clientRect = boundsRect;\n    return boundsRect;\n  }\n  get mediaWidth() {\n    return this.getDimensions().width * this.contentScaleFactor;\n  }\n  get mediaHeight() {\n    return this.getDimensions().height * this.contentScaleFactor;\n  }\n  get contentScaleFactor() {\n    let pixelRatio = 1;\n    if (!this.hls.config.ignoreDevicePixelRatio) {\n      try {\n        pixelRatio = self.devicePixelRatio;\n      } catch (e) {\n      }\n    }\n    return Math.min(pixelRatio, this.hls.config.maxDevicePixelRatio);\n  }\n  isLevelAllowed(level) {\n    const restrictedLevels = this.restrictedLevels;\n    return !restrictedLevels.some((restrictedLevel) => {\n      return level.bitrate === restrictedLevel.bitrate && level.width === restrictedLevel.width && level.height === restrictedLevel.height;\n    });\n  }\n  static getMaxLevelByMediaSize(levels, width, height) {\n    if (!(levels != null && levels.length)) {\n      return -1;\n    }\n    const atGreatestBandwidth = (curLevel, nextLevel) => {\n      if (!nextLevel) {\n        return true;\n      }\n      return curLevel.width !== nextLevel.width || curLevel.height !== nextLevel.height;\n    };\n    let maxLevelIndex = levels.length - 1;\n    const squareSize = Math.max(width, height);\n    for (let i = 0; i < levels.length; i += 1) {\n      const level = levels[i];\n      if ((level.width >= squareSize || level.height >= squareSize) && atGreatestBandwidth(level, levels[i + 1])) {\n        maxLevelIndex = i;\n        break;\n      }\n    }\n    return maxLevelIndex;\n  }\n}\nconst CmObjectType = {\n  /**\n   * text file, such as a manifest or playlist\n   */\n  MANIFEST: \"m\",\n  /**\n   * audio only\n   */\n  AUDIO: \"a\",\n  /**\n   * video only\n   */\n  VIDEO: \"v\",\n  /**\n   * muxed audio and video\n   */\n  MUXED: \"av\",\n  /**\n   * init segment\n   */\n  INIT: \"i\",\n  /**\n   * caption or subtitle\n   */\n  CAPTION: \"c\",\n  /**\n   * ISOBMFF timed text track\n   */\n  TIMED_TEXT: \"tt\",\n  /**\n   * cryptographic key, license or certificate.\n   */\n  KEY: \"k\",\n  /**\n   * other\n   */\n  OTHER: \"o\"\n};\nconst CmcdObjectType = CmObjectType;\nconst CmStreamingFormat = {\n  /**\n   * HTTP Live Streaming (HLS)\n   */\n  HLS: \"h\"\n};\nconst CmcdStreamingFormat = CmStreamingFormat;\nconst CMCD_OBJECT = \"CMCD-Object\";\nconst CMCD_REQUEST = \"CMCD-Request\";\nconst CMCD_SESSION = \"CMCD-Session\";\nconst CMCD_STATUS = \"CMCD-Status\";\nconst CmcdHeaderField = {\n  /**\n   * keys whose values vary with the object being requested.\n   */\n  OBJECT: CMCD_OBJECT,\n  /**\n   * keys whose values vary with each request.\n   */\n  REQUEST: CMCD_REQUEST,\n  /**\n   * keys whose values are expected to be invariant over the life of the session.\n   */\n  SESSION: CMCD_SESSION,\n  /**\n   * keys whose values do not vary with every request or object.\n   */\n  STATUS: CMCD_STATUS\n};\nconst CmcdHeaderMap = {\n  [CmcdHeaderField.OBJECT]: [\"br\", \"ab\", \"d\", \"ot\", \"tb\", \"tpb\", \"lb\", \"tab\", \"lab\", \"url\"],\n  [CmcdHeaderField.REQUEST]: [\"pb\", \"bl\", \"tbl\", \"dl\", \"ltc\", \"mtp\", \"nor\", \"nrr\", \"rc\", \"sn\", \"sta\", \"su\", \"ttfb\", \"ttfbb\", \"ttlb\", \"cmsdd\", \"cmsds\", \"smrt\", \"df\", \"cs\"],\n  [CmcdHeaderField.SESSION]: [\"cid\", \"pr\", \"sf\", \"sid\", \"st\", \"v\", \"msd\"],\n  [CmcdHeaderField.STATUS]: [\"bs\", \"bsd\", \"cdn\", \"rtp\", \"bg\", \"pt\", \"ec\", \"e\"]\n};\nclass SfItem {\n  constructor(value, params) {\n    if (Array.isArray(value)) {\n      value = value.map((v) => v instanceof SfItem ? v : new SfItem(v));\n    }\n    this.value = value;\n    this.params = params;\n  }\n}\nconst DICT = \"Dict\";\nfunction format(value) {\n  if (Array.isArray(value)) {\n    return JSON.stringify(value);\n  }\n  if (value instanceof Map) {\n    return \"Map{}\";\n  }\n  if (value instanceof Set) {\n    return \"Set{}\";\n  }\n  if (typeof value === \"object\") {\n    return JSON.stringify(value);\n  }\n  return String(value);\n}\nfunction throwError(action, src, type, cause) {\n  return new Error(`failed to ${action} \"${format(src)}\" as ${type}`, {\n    cause\n  });\n}\nfunction serializeError(src, type, cause) {\n  return throwError(\"serialize\", src, type, cause);\n}\nclass SfToken {\n  constructor(description) {\n    this.description = description;\n  }\n}\nconst BARE_ITEM = \"Bare Item\";\nconst BOOLEAN = \"Boolean\";\nfunction serializeBoolean(value) {\n  if (typeof value !== \"boolean\") {\n    throw serializeError(value, BOOLEAN);\n  }\n  return value ? \"?1\" : \"?0\";\n}\nfunction encodeBase64(binary) {\n  return btoa(String.fromCharCode(...binary));\n}\nconst BYTES = \"Byte Sequence\";\nfunction serializeByteSequence(value) {\n  if (ArrayBuffer.isView(value) === false) {\n    throw serializeError(value, BYTES);\n  }\n  return `:${encodeBase64(value)}:`;\n}\nconst INTEGER = \"Integer\";\nfunction isInvalidInt(value) {\n  return value < -999999999999999 || 999999999999999 < value;\n}\nfunction serializeInteger(value) {\n  if (isInvalidInt(value)) {\n    throw serializeError(value, INTEGER);\n  }\n  return value.toString();\n}\nfunction serializeDate(value) {\n  return `@${serializeInteger(value.getTime() / 1e3)}`;\n}\nfunction roundToEven(value, precision) {\n  if (value < 0) {\n    return -roundToEven(-value, precision);\n  }\n  const decimalShift = Math.pow(10, precision);\n  const isEquidistant = Math.abs(value * decimalShift % 1 - 0.5) < Number.EPSILON;\n  if (isEquidistant) {\n    const flooredValue = Math.floor(value * decimalShift);\n    return (flooredValue % 2 === 0 ? flooredValue : flooredValue + 1) / decimalShift;\n  } else {\n    return Math.round(value * decimalShift) / decimalShift;\n  }\n}\nconst DECIMAL = \"Decimal\";\nfunction serializeDecimal(value) {\n  const roundedValue = roundToEven(value, 3);\n  if (Math.floor(Math.abs(roundedValue)).toString().length > 12) {\n    throw serializeError(value, DECIMAL);\n  }\n  const stringValue = roundedValue.toString();\n  return stringValue.includes(\".\") ? stringValue : `${stringValue}.0`;\n}\nconst STRING = \"String\";\nconst STRING_REGEX = /[\\x00-\\x1f\\x7f]+/;\nfunction serializeString$1(value) {\n  if (STRING_REGEX.test(value)) {\n    throw serializeError(value, STRING);\n  }\n  return `\"${value.replace(/\\\\/g, `\\\\\\\\`).replace(/\"/g, `\\\\\"`)}\"`;\n}\nfunction symbolToStr(symbol) {\n  return symbol.description || symbol.toString().slice(7, -1);\n}\nconst TOKEN = \"Token\";\nfunction serializeToken(token) {\n  const value = symbolToStr(token);\n  if (/^([a-zA-Z*])([!#$%&'*+\\-.^_`|~\\w:/]*)$/.test(value) === false) {\n    throw serializeError(value, TOKEN);\n  }\n  return value;\n}\nfunction serializeBareItem(value) {\n  switch (typeof value) {\n    case \"number\":\n      if (!isFiniteNumber(value)) {\n        throw serializeError(value, BARE_ITEM);\n      }\n      if (Number.isInteger(value)) {\n        return serializeInteger(value);\n      }\n      return serializeDecimal(value);\n    case \"string\":\n      return serializeString$1(value);\n    case \"symbol\":\n      return serializeToken(value);\n    case \"boolean\":\n      return serializeBoolean(value);\n    case \"object\":\n      if (value instanceof Date) {\n        return serializeDate(value);\n      }\n      if (value instanceof Uint8Array) {\n        return serializeByteSequence(value);\n      }\n      if (value instanceof SfToken) {\n        return serializeToken(value);\n      }\n    default:\n      throw serializeError(value, BARE_ITEM);\n  }\n}\nconst KEY = \"Key\";\nfunction serializeKey(value) {\n  if (/^[a-z*][a-z0-9\\-_.*]*$/.test(value) === false) {\n    throw serializeError(value, KEY);\n  }\n  return value;\n}\nfunction serializeParams(params) {\n  if (params == null) {\n    return \"\";\n  }\n  return Object.entries(params).map(([key, value]) => {\n    if (value === true) {\n      return `;${serializeKey(key)}`;\n    }\n    return `;${serializeKey(key)}=${serializeBareItem(value)}`;\n  }).join(\"\");\n}\nfunction serializeItem(value) {\n  if (value instanceof SfItem) {\n    return `${serializeBareItem(value.value)}${serializeParams(value.params)}`;\n  } else {\n    return serializeBareItem(value);\n  }\n}\nfunction serializeInnerList(value) {\n  return `(${value.value.map(serializeItem).join(\" \")})${serializeParams(value.params)}`;\n}\nfunction serializeDict(dict, options = {\n  whitespace: true\n}) {\n  if (typeof dict !== \"object\") {\n    throw serializeError(dict, DICT);\n  }\n  const entries = dict instanceof Map ? dict.entries() : Object.entries(dict);\n  const optionalWhiteSpace = (options === null || options === void 0 ? void 0 : options.whitespace) ? \" \" : \"\";\n  return Array.from(entries).map(([key, item]) => {\n    if (item instanceof SfItem === false) {\n      item = new SfItem(item);\n    }\n    let output = serializeKey(key);\n    if (item.value === true) {\n      output += serializeParams(item.params);\n    } else {\n      output += \"=\";\n      if (Array.isArray(item.value)) {\n        output += serializeInnerList(item);\n      } else {\n        output += serializeItem(item);\n      }\n    }\n    return output;\n  }).join(`,${optionalWhiteSpace}`);\n}\nfunction encodeSfDict(value, options) {\n  return serializeDict(value, options);\n}\nfunction isTokenField(key) {\n  return [\"ot\", \"sf\", \"st\", \"e\", \"sta\"].includes(key);\n}\nfunction isValid(value) {\n  if (typeof value === \"number\") {\n    return isFiniteNumber(value);\n  }\n  return value != null && value !== \"\" && value !== false;\n}\nfunction urlToRelativePath(url, base) {\n  const to = new URL(url);\n  const from = new URL(base);\n  if (to.origin !== from.origin) {\n    return url;\n  }\n  const toPath = to.pathname.split(\"/\").slice(1);\n  const fromPath = from.pathname.split(\"/\").slice(1, -1);\n  while (toPath[0] === fromPath[0]) {\n    toPath.shift();\n    fromPath.shift();\n  }\n  while (fromPath.length) {\n    fromPath.shift();\n    toPath.unshift(\"..\");\n  }\n  return toPath.join(\"/\");\n}\nconst toRounded = (value) => Math.round(value);\nconst toUrlSafe = (value, options) => {\n  if (options === null || options === void 0 ? void 0 : options.baseUrl) {\n    value = urlToRelativePath(value, options.baseUrl);\n  }\n  return encodeURIComponent(value);\n};\nconst toHundred = (value) => toRounded(value / 100) * 100;\nconst CmcdFormatters = {\n  /**\n   * Bitrate (kbps) rounded integer\n   */\n  br: toRounded,\n  /**\n   * Duration (milliseconds) rounded integer\n   */\n  d: toRounded,\n  /**\n   * Buffer Length (milliseconds) rounded nearest 100ms\n   */\n  bl: toHundred,\n  /**\n   * Deadline (milliseconds) rounded nearest 100ms\n   */\n  dl: toHundred,\n  /**\n   * Measured Throughput (kbps) rounded nearest 100kbps\n   */\n  mtp: toHundred,\n  /**\n   * Next Object Request URL encoded\n   */\n  nor: toUrlSafe,\n  /**\n   * Requested maximum throughput (kbps) rounded nearest 100kbps\n   */\n  rtp: toHundred,\n  /**\n   * Top Bitrate (kbps) rounded integer\n   */\n  tb: toRounded\n};\nfunction processCmcd(obj, options) {\n  const results = {};\n  if (obj == null || typeof obj !== \"object\") {\n    return results;\n  }\n  const keys = Object.keys(obj).sort();\n  const formatters = _extends({}, CmcdFormatters, options === null || options === void 0 ? void 0 : options.formatters);\n  const filter = options === null || options === void 0 ? void 0 : options.filter;\n  keys.forEach((key) => {\n    if ((filter === null || filter === void 0 ? void 0 : filter(key)) === false) {\n      return;\n    }\n    let value = obj[key];\n    const formatter = formatters[key];\n    if (formatter) {\n      value = formatter(value, options);\n    }\n    if (key === \"v\" && value === 1) {\n      return;\n    }\n    if (key == \"pr\" && value === 1) {\n      return;\n    }\n    if (!isValid(value)) {\n      return;\n    }\n    if (isTokenField(key) && typeof value === \"string\") {\n      value = new SfToken(value);\n    }\n    results[key] = value;\n  });\n  return results;\n}\nfunction encodeCmcd(cmcd, options = {}) {\n  if (!cmcd) {\n    return \"\";\n  }\n  return encodeSfDict(processCmcd(cmcd, options), _extends({\n    whitespace: false\n  }, options));\n}\nfunction toCmcdHeaders(cmcd, options = {}) {\n  const result = {};\n  if (!cmcd) {\n    return result;\n  }\n  const entries = Object.entries(cmcd);\n  const headerMap = Object.entries(CmcdHeaderMap).concat(Object.entries((options === null || options === void 0 ? void 0 : options.customHeaderMap) || {}));\n  const shards = entries.reduce((acc, entry) => {\n    var _a, _b;\n    const [key, value] = entry;\n    const field = ((_a = headerMap.find((entry2) => entry2[1].includes(key))) === null || _a === void 0 ? void 0 : _a[0]) || CmcdHeaderField.REQUEST;\n    (_b = acc[field]) !== null && _b !== void 0 ? _b : acc[field] = {};\n    acc[field][key] = value;\n    return acc;\n  }, {});\n  return Object.entries(shards).reduce((acc, [field, value]) => {\n    acc[field] = encodeCmcd(value, options);\n    return acc;\n  }, result);\n}\nfunction appendCmcdHeaders(headers, cmcd, options) {\n  return _extends(headers, toCmcdHeaders(cmcd, options));\n}\nconst CMCD_PARAM = \"CMCD\";\nfunction toCmcdQuery(cmcd, options = {}) {\n  if (!cmcd) {\n    return \"\";\n  }\n  const params = encodeCmcd(cmcd, options);\n  return `${CMCD_PARAM}=${encodeURIComponent(params)}`;\n}\nconst REGEX = /CMCD=[^&#]+/;\nfunction appendCmcdQuery(url, cmcd, options) {\n  const query = toCmcdQuery(cmcd, options);\n  if (!query) {\n    return url;\n  }\n  if (REGEX.test(url)) {\n    return url.replace(REGEX, query);\n  }\n  const separator = url.includes(\"?\") ? \"&\" : \"?\";\n  return `${url}${separator}${query}`;\n}\nclass CMCDController {\n  constructor(hls) {\n    this.hls = void 0;\n    this.config = void 0;\n    this.media = void 0;\n    this.sid = void 0;\n    this.cid = void 0;\n    this.useHeaders = false;\n    this.includeKeys = void 0;\n    this.initialized = false;\n    this.starved = false;\n    this.buffering = true;\n    this.audioBuffer = void 0;\n    this.videoBuffer = void 0;\n    this.onWaiting = () => {\n      if (this.initialized) {\n        this.starved = true;\n      }\n      this.buffering = true;\n    };\n    this.onPlaying = () => {\n      if (!this.initialized) {\n        this.initialized = true;\n      }\n      this.buffering = false;\n    };\n    this.applyPlaylistData = (context) => {\n      try {\n        this.apply(context, {\n          ot: CmcdObjectType.MANIFEST,\n          su: !this.initialized\n        });\n      } catch (error) {\n        this.hls.logger.warn(\"Could not generate manifest CMCD data.\", error);\n      }\n    };\n    this.applyFragmentData = (context) => {\n      try {\n        const {\n          frag,\n          part\n        } = context;\n        const level = this.hls.levels[frag.level];\n        const ot = this.getObjectType(frag);\n        const data = {\n          d: (part || frag).duration * 1e3,\n          ot\n        };\n        if (ot === CmcdObjectType.VIDEO || ot === CmcdObjectType.AUDIO || ot == CmcdObjectType.MUXED) {\n          data.br = level.bitrate / 1e3;\n          data.tb = this.getTopBandwidth(ot) / 1e3;\n          data.bl = this.getBufferLength(ot);\n        }\n        const next = part ? this.getNextPart(part) : this.getNextFrag(frag);\n        if (next != null && next.url && next.url !== frag.url) {\n          data.nor = next.url;\n        }\n        this.apply(context, data);\n      } catch (error) {\n        this.hls.logger.warn(\"Could not generate segment CMCD data.\", error);\n      }\n    };\n    this.hls = hls;\n    const config = this.config = hls.config;\n    const {\n      cmcd\n    } = config;\n    if (cmcd != null) {\n      config.pLoader = this.createPlaylistLoader();\n      config.fLoader = this.createFragmentLoader();\n      this.sid = cmcd.sessionId || hls.sessionId;\n      this.cid = cmcd.contentId;\n      this.useHeaders = cmcd.useHeaders === true;\n      this.includeKeys = cmcd.includeKeys;\n      this.registerListeners();\n    }\n  }\n  registerListeners() {\n    const hls = this.hls;\n    hls.on(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.on(Events.MEDIA_DETACHED, this.onMediaDetached, this);\n    hls.on(Events.BUFFER_CREATED, this.onBufferCreated, this);\n  }\n  unregisterListeners() {\n    const hls = this.hls;\n    hls.off(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.off(Events.MEDIA_DETACHED, this.onMediaDetached, this);\n    hls.off(Events.BUFFER_CREATED, this.onBufferCreated, this);\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.onMediaDetached();\n    this.hls = this.config = this.audioBuffer = this.videoBuffer = null;\n    this.onWaiting = this.onPlaying = this.media = null;\n  }\n  onMediaAttached(event, data) {\n    this.media = data.media;\n    this.media.addEventListener(\"waiting\", this.onWaiting);\n    this.media.addEventListener(\"playing\", this.onPlaying);\n  }\n  onMediaDetached() {\n    if (!this.media) {\n      return;\n    }\n    this.media.removeEventListener(\"waiting\", this.onWaiting);\n    this.media.removeEventListener(\"playing\", this.onPlaying);\n    this.media = null;\n  }\n  onBufferCreated(event, data) {\n    var _data$tracks$audio, _data$tracks$video;\n    this.audioBuffer = (_data$tracks$audio = data.tracks.audio) == null ? void 0 : _data$tracks$audio.buffer;\n    this.videoBuffer = (_data$tracks$video = data.tracks.video) == null ? void 0 : _data$tracks$video.buffer;\n  }\n  /**\n   * Create baseline CMCD data\n   */\n  createData() {\n    var _this$media;\n    return {\n      v: 1,\n      sf: CmcdStreamingFormat.HLS,\n      sid: this.sid,\n      cid: this.cid,\n      pr: (_this$media = this.media) == null ? void 0 : _this$media.playbackRate,\n      mtp: this.hls.bandwidthEstimate / 1e3\n    };\n  }\n  /**\n   * Apply CMCD data to a request.\n   */\n  apply(context, data = {}) {\n    _extends(data, this.createData());\n    const isVideo = data.ot === CmcdObjectType.INIT || data.ot === CmcdObjectType.VIDEO || data.ot === CmcdObjectType.MUXED;\n    if (this.starved && isVideo) {\n      data.bs = true;\n      data.su = true;\n      this.starved = false;\n    }\n    if (data.su == null) {\n      data.su = this.buffering;\n    }\n    const {\n      includeKeys\n    } = this;\n    if (includeKeys) {\n      data = Object.keys(data).reduce((acc, key) => {\n        includeKeys.includes(key) && (acc[key] = data[key]);\n        return acc;\n      }, {});\n    }\n    const options = {\n      baseUrl: context.url\n    };\n    if (this.useHeaders) {\n      if (!context.headers) {\n        context.headers = {};\n      }\n      appendCmcdHeaders(context.headers, data, options);\n    } else {\n      context.url = appendCmcdQuery(context.url, data, options);\n    }\n  }\n  getNextFrag(fragment) {\n    var _this$hls$levels$frag;\n    const levelDetails = (_this$hls$levels$frag = this.hls.levels[fragment.level]) == null ? void 0 : _this$hls$levels$frag.details;\n    if (levelDetails) {\n      const index = fragment.sn - levelDetails.startSN;\n      return levelDetails.fragments[index + 1];\n    }\n    return void 0;\n  }\n  getNextPart(part) {\n    var _this$hls$levels$frag2, _this$hls$levels$frag3;\n    const {\n      index,\n      fragment\n    } = part;\n    const partList = (_this$hls$levels$frag2 = this.hls.levels[fragment.level]) == null ? void 0 : (_this$hls$levels$frag3 = _this$hls$levels$frag2.details) == null ? void 0 : _this$hls$levels$frag3.partList;\n    if (partList) {\n      const {\n        sn\n      } = fragment;\n      for (let i = partList.length - 1; i >= 0; i--) {\n        const p = partList[i];\n        if (p.index === index && p.fragment.sn === sn) {\n          return partList[i + 1];\n        }\n      }\n    }\n    return void 0;\n  }\n  /**\n   * The CMCD object type.\n   */\n  getObjectType(fragment) {\n    const {\n      type\n    } = fragment;\n    if (type === \"subtitle\") {\n      return CmcdObjectType.TIMED_TEXT;\n    }\n    if (fragment.sn === \"initSegment\") {\n      return CmcdObjectType.INIT;\n    }\n    if (type === \"audio\") {\n      return CmcdObjectType.AUDIO;\n    }\n    if (type === \"main\") {\n      if (!this.hls.audioTracks.length) {\n        return CmcdObjectType.MUXED;\n      }\n      return CmcdObjectType.VIDEO;\n    }\n    return void 0;\n  }\n  /**\n   * Get the highest bitrate.\n   */\n  getTopBandwidth(type) {\n    let bitrate = 0;\n    let levels;\n    const hls = this.hls;\n    if (type === CmcdObjectType.AUDIO) {\n      levels = hls.audioTracks;\n    } else {\n      const max = hls.maxAutoLevel;\n      const len = max > -1 ? max + 1 : hls.levels.length;\n      levels = hls.levels.slice(0, len);\n    }\n    levels.forEach((level) => {\n      if (level.bitrate > bitrate) {\n        bitrate = level.bitrate;\n      }\n    });\n    return bitrate > 0 ? bitrate : NaN;\n  }\n  /**\n   * Get the buffer length for a media type in milliseconds\n   */\n  getBufferLength(type) {\n    const media = this.media;\n    const buffer2 = type === CmcdObjectType.AUDIO ? this.audioBuffer : this.videoBuffer;\n    if (!buffer2 || !media) {\n      return NaN;\n    }\n    const info = BufferHelper.bufferInfo(buffer2, media.currentTime, this.config.maxBufferHole);\n    return info.len * 1e3;\n  }\n  /**\n   * Create a playlist loader\n   */\n  createPlaylistLoader() {\n    const {\n      pLoader\n    } = this.config;\n    const apply = this.applyPlaylistData;\n    const Ctor = pLoader || this.config.loader;\n    return class CmcdPlaylistLoader {\n      constructor(config) {\n        this.loader = void 0;\n        this.loader = new Ctor(config);\n      }\n      get stats() {\n        return this.loader.stats;\n      }\n      get context() {\n        return this.loader.context;\n      }\n      destroy() {\n        this.loader.destroy();\n      }\n      abort() {\n        this.loader.abort();\n      }\n      load(context, config, callbacks) {\n        apply(context);\n        this.loader.load(context, config, callbacks);\n      }\n    };\n  }\n  /**\n   * Create a playlist loader\n   */\n  createFragmentLoader() {\n    const {\n      fLoader\n    } = this.config;\n    const apply = this.applyFragmentData;\n    const Ctor = fLoader || this.config.loader;\n    return class CmcdFragmentLoader {\n      constructor(config) {\n        this.loader = void 0;\n        this.loader = new Ctor(config);\n      }\n      get stats() {\n        return this.loader.stats;\n      }\n      get context() {\n        return this.loader.context;\n      }\n      destroy() {\n        this.loader.destroy();\n      }\n      abort() {\n        this.loader.abort();\n      }\n      load(context, config, callbacks) {\n        apply(context);\n        this.loader.load(context, config, callbacks);\n      }\n    };\n  }\n}\nconst PATHWAY_PENALTY_DURATION_MS = 3e5;\nclass ContentSteeringController extends Logger2 {\n  constructor(hls) {\n    super(\"content-steering\", hls.logger);\n    this.hls = void 0;\n    this.loader = null;\n    this.uri = null;\n    this.pathwayId = \".\";\n    this._pathwayPriority = null;\n    this.timeToLoad = 300;\n    this.reloadTimer = -1;\n    this.updated = 0;\n    this.started = false;\n    this.enabled = true;\n    this.levels = null;\n    this.audioTracks = null;\n    this.subtitleTracks = null;\n    this.penalizedPathways = {};\n    this.hls = hls;\n    this.registerListeners();\n  }\n  registerListeners() {\n    const hls = this.hls;\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    hls.on(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.on(Events.ERROR, this.onError, this);\n  }\n  unregisterListeners() {\n    const hls = this.hls;\n    if (!hls) {\n      return;\n    }\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    hls.off(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.off(Events.ERROR, this.onError, this);\n  }\n  pathways() {\n    return (this.levels || []).reduce((pathways, level) => {\n      if (pathways.indexOf(level.pathwayId) === -1) {\n        pathways.push(level.pathwayId);\n      }\n      return pathways;\n    }, []);\n  }\n  get pathwayPriority() {\n    return this._pathwayPriority;\n  }\n  set pathwayPriority(pathwayPriority) {\n    this.updatePathwayPriority(pathwayPriority);\n  }\n  startLoad() {\n    this.started = true;\n    this.clearTimeout();\n    if (this.enabled && this.uri) {\n      if (this.updated) {\n        const ttl = this.timeToLoad * 1e3 - (performance.now() - this.updated);\n        if (ttl > 0) {\n          this.scheduleRefresh(this.uri, ttl);\n          return;\n        }\n      }\n      this.loadSteeringManifest(this.uri);\n    }\n  }\n  stopLoad() {\n    this.started = false;\n    if (this.loader) {\n      this.loader.destroy();\n      this.loader = null;\n    }\n    this.clearTimeout();\n  }\n  clearTimeout() {\n    if (this.reloadTimer !== -1) {\n      self.clearTimeout(this.reloadTimer);\n      this.reloadTimer = -1;\n    }\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.stopLoad();\n    this.hls = null;\n    this.levels = this.audioTracks = this.subtitleTracks = null;\n  }\n  removeLevel(levelToRemove) {\n    const levels = this.levels;\n    if (levels) {\n      this.levels = levels.filter((level) => level !== levelToRemove);\n    }\n  }\n  onManifestLoading() {\n    this.stopLoad();\n    this.enabled = true;\n    this.timeToLoad = 300;\n    this.updated = 0;\n    this.uri = null;\n    this.pathwayId = \".\";\n    this.levels = this.audioTracks = this.subtitleTracks = null;\n  }\n  onManifestLoaded(event, data) {\n    const {\n      contentSteering\n    } = data;\n    if (contentSteering === null) {\n      return;\n    }\n    this.pathwayId = contentSteering.pathwayId;\n    this.uri = contentSteering.uri;\n    if (this.started) {\n      this.startLoad();\n    }\n  }\n  onManifestParsed(event, data) {\n    this.audioTracks = data.audioTracks;\n    this.subtitleTracks = data.subtitleTracks;\n  }\n  onError(event, data) {\n    const {\n      errorAction\n    } = data;\n    if ((errorAction == null ? void 0 : errorAction.action) === NetworkErrorAction.SendAlternateToPenaltyBox && errorAction.flags === ErrorActionFlags.MoveAllAlternatesMatchingHost) {\n      const levels = this.levels;\n      let pathwayPriority = this._pathwayPriority;\n      let errorPathway = this.pathwayId;\n      if (data.context) {\n        const {\n          groupId,\n          pathwayId,\n          type\n        } = data.context;\n        if (groupId && levels) {\n          errorPathway = this.getPathwayForGroupId(groupId, type, errorPathway);\n        } else if (pathwayId) {\n          errorPathway = pathwayId;\n        }\n      }\n      if (!(errorPathway in this.penalizedPathways)) {\n        this.penalizedPathways[errorPathway] = performance.now();\n      }\n      if (!pathwayPriority && levels) {\n        pathwayPriority = this.pathways();\n      }\n      if (pathwayPriority && pathwayPriority.length > 1) {\n        this.updatePathwayPriority(pathwayPriority);\n        errorAction.resolved = this.pathwayId !== errorPathway;\n      }\n      if (data.details === ErrorDetails.BUFFER_APPEND_ERROR && !data.fatal) {\n        errorAction.resolved = true;\n      } else if (!errorAction.resolved) {\n        this.warn(`Could not resolve ${data.details} (\"${data.error.message}\") with content-steering for Pathway: ${errorPathway} levels: ${levels ? levels.length : levels} priorities: ${stringify(pathwayPriority)} penalized: ${stringify(this.penalizedPathways)}`);\n      }\n    }\n  }\n  filterParsedLevels(levels) {\n    this.levels = levels;\n    let pathwayLevels = this.getLevelsForPathway(this.pathwayId);\n    if (pathwayLevels.length === 0) {\n      const pathwayId = levels[0].pathwayId;\n      this.log(`No levels found in Pathway ${this.pathwayId}. Setting initial Pathway to \"${pathwayId}\"`);\n      pathwayLevels = this.getLevelsForPathway(pathwayId);\n      this.pathwayId = pathwayId;\n    }\n    if (pathwayLevels.length !== levels.length) {\n      this.log(`Found ${pathwayLevels.length}/${levels.length} levels in Pathway \"${this.pathwayId}\"`);\n    }\n    return pathwayLevels;\n  }\n  getLevelsForPathway(pathwayId) {\n    if (this.levels === null) {\n      return [];\n    }\n    return this.levels.filter((level) => pathwayId === level.pathwayId);\n  }\n  updatePathwayPriority(pathwayPriority) {\n    this._pathwayPriority = pathwayPriority;\n    let levels;\n    const penalizedPathways = this.penalizedPathways;\n    const now2 = performance.now();\n    Object.keys(penalizedPathways).forEach((pathwayId) => {\n      if (now2 - penalizedPathways[pathwayId] > PATHWAY_PENALTY_DURATION_MS) {\n        delete penalizedPathways[pathwayId];\n      }\n    });\n    for (let i = 0; i < pathwayPriority.length; i++) {\n      const pathwayId = pathwayPriority[i];\n      if (pathwayId in penalizedPathways) {\n        continue;\n      }\n      if (pathwayId === this.pathwayId) {\n        return;\n      }\n      const selectedIndex = this.hls.nextLoadLevel;\n      const selectedLevel = this.hls.levels[selectedIndex];\n      levels = this.getLevelsForPathway(pathwayId);\n      if (levels.length > 0) {\n        this.log(`Setting Pathway to \"${pathwayId}\"`);\n        this.pathwayId = pathwayId;\n        reassignFragmentLevelIndexes(levels);\n        this.hls.trigger(Events.LEVELS_UPDATED, {\n          levels\n        });\n        const levelAfterChange = this.hls.levels[selectedIndex];\n        if (selectedLevel && levelAfterChange && this.levels) {\n          if (levelAfterChange.attrs[\"STABLE-VARIANT-ID\"] !== selectedLevel.attrs[\"STABLE-VARIANT-ID\"] && levelAfterChange.bitrate !== selectedLevel.bitrate) {\n            this.log(`Unstable Pathways change from bitrate ${selectedLevel.bitrate} to ${levelAfterChange.bitrate}`);\n          }\n          this.hls.nextLoadLevel = selectedIndex;\n        }\n        break;\n      }\n    }\n  }\n  getPathwayForGroupId(groupId, type, defaultPathway) {\n    const levels = this.getLevelsForPathway(defaultPathway).concat(this.levels || []);\n    for (let i = 0; i < levels.length; i++) {\n      if (type === PlaylistContextType.AUDIO_TRACK && levels[i].hasAudioGroup(groupId) || type === PlaylistContextType.SUBTITLE_TRACK && levels[i].hasSubtitleGroup(groupId)) {\n        return levels[i].pathwayId;\n      }\n    }\n    return defaultPathway;\n  }\n  clonePathways(pathwayClones) {\n    const levels = this.levels;\n    if (!levels) {\n      return;\n    }\n    const audioGroupCloneMap = {};\n    const subtitleGroupCloneMap = {};\n    pathwayClones.forEach((pathwayClone) => {\n      const {\n        ID: cloneId,\n        \"BASE-ID\": baseId,\n        \"URI-REPLACEMENT\": uriReplacement\n      } = pathwayClone;\n      if (levels.some((level) => level.pathwayId === cloneId)) {\n        return;\n      }\n      const clonedVariants = this.getLevelsForPathway(baseId).map((baseLevel) => {\n        const attributes = new AttrList(baseLevel.attrs);\n        attributes[\"PATHWAY-ID\"] = cloneId;\n        const clonedAudioGroupId = attributes.AUDIO && `${attributes.AUDIO}_clone_${cloneId}`;\n        const clonedSubtitleGroupId = attributes.SUBTITLES && `${attributes.SUBTITLES}_clone_${cloneId}`;\n        if (clonedAudioGroupId) {\n          audioGroupCloneMap[attributes.AUDIO] = clonedAudioGroupId;\n          attributes.AUDIO = clonedAudioGroupId;\n        }\n        if (clonedSubtitleGroupId) {\n          subtitleGroupCloneMap[attributes.SUBTITLES] = clonedSubtitleGroupId;\n          attributes.SUBTITLES = clonedSubtitleGroupId;\n        }\n        const url = performUriReplacement(baseLevel.uri, attributes[\"STABLE-VARIANT-ID\"], \"PER-VARIANT-URIS\", uriReplacement);\n        const clonedLevel = new Level({\n          attrs: attributes,\n          audioCodec: baseLevel.audioCodec,\n          bitrate: baseLevel.bitrate,\n          height: baseLevel.height,\n          name: baseLevel.name,\n          url,\n          videoCodec: baseLevel.videoCodec,\n          width: baseLevel.width\n        });\n        if (baseLevel.audioGroups) {\n          for (let i = 1; i < baseLevel.audioGroups.length; i++) {\n            clonedLevel.addGroupId(\"audio\", `${baseLevel.audioGroups[i]}_clone_${cloneId}`);\n          }\n        }\n        if (baseLevel.subtitleGroups) {\n          for (let i = 1; i < baseLevel.subtitleGroups.length; i++) {\n            clonedLevel.addGroupId(\"text\", `${baseLevel.subtitleGroups[i]}_clone_${cloneId}`);\n          }\n        }\n        return clonedLevel;\n      });\n      levels.push(...clonedVariants);\n      cloneRenditionGroups(this.audioTracks, audioGroupCloneMap, uriReplacement, cloneId);\n      cloneRenditionGroups(this.subtitleTracks, subtitleGroupCloneMap, uriReplacement, cloneId);\n    });\n  }\n  loadSteeringManifest(uri) {\n    const config = this.hls.config;\n    const Loader = config.loader;\n    if (this.loader) {\n      this.loader.destroy();\n    }\n    this.loader = new Loader(config);\n    let url;\n    try {\n      url = new self.URL(uri);\n    } catch (error) {\n      this.enabled = false;\n      this.log(`Failed to parse Steering Manifest URI: ${uri}`);\n      return;\n    }\n    if (url.protocol !== \"data:\") {\n      const throughput = (this.hls.bandwidthEstimate || config.abrEwmaDefaultEstimate) | 0;\n      url.searchParams.set(\"_HLS_pathway\", this.pathwayId);\n      url.searchParams.set(\"_HLS_throughput\", \"\" + throughput);\n    }\n    const context = {\n      responseType: \"json\",\n      url: url.href\n    };\n    const loadPolicy = config.steeringManifestLoadPolicy.default;\n    const legacyRetryCompatibility = loadPolicy.errorRetry || loadPolicy.timeoutRetry || {};\n    const loaderConfig = {\n      loadPolicy,\n      timeout: loadPolicy.maxLoadTimeMs,\n      maxRetry: legacyRetryCompatibility.maxNumRetry || 0,\n      retryDelay: legacyRetryCompatibility.retryDelayMs || 0,\n      maxRetryDelay: legacyRetryCompatibility.maxRetryDelayMs || 0\n    };\n    const callbacks = {\n      onSuccess: (response, stats, context2, networkDetails) => {\n        this.log(`Loaded steering manifest: \"${url}\"`);\n        const steeringData = response.data;\n        if ((steeringData == null ? void 0 : steeringData.VERSION) !== 1) {\n          this.log(`Steering VERSION ${steeringData.VERSION} not supported!`);\n          return;\n        }\n        this.updated = performance.now();\n        this.timeToLoad = steeringData.TTL;\n        const {\n          \"RELOAD-URI\": reloadUri,\n          \"PATHWAY-CLONES\": pathwayClones,\n          \"PATHWAY-PRIORITY\": pathwayPriority\n        } = steeringData;\n        if (reloadUri) {\n          try {\n            this.uri = new self.URL(reloadUri, url).href;\n          } catch (error) {\n            this.enabled = false;\n            this.log(`Failed to parse Steering Manifest RELOAD-URI: ${reloadUri}`);\n            return;\n          }\n        }\n        this.scheduleRefresh(this.uri || context2.url);\n        if (pathwayClones) {\n          this.clonePathways(pathwayClones);\n        }\n        const loadedSteeringData = {\n          steeringManifest: steeringData,\n          url: url.toString()\n        };\n        this.hls.trigger(Events.STEERING_MANIFEST_LOADED, loadedSteeringData);\n        if (pathwayPriority) {\n          this.updatePathwayPriority(pathwayPriority);\n        }\n      },\n      onError: (error, context2, networkDetails, stats) => {\n        this.log(`Error loading steering manifest: ${error.code} ${error.text} (${context2.url})`);\n        this.stopLoad();\n        if (error.code === 410) {\n          this.enabled = false;\n          this.log(`Steering manifest ${context2.url} no longer available`);\n          return;\n        }\n        let ttl = this.timeToLoad * 1e3;\n        if (error.code === 429) {\n          const loader = this.loader;\n          if (typeof (loader == null ? void 0 : loader.getResponseHeader) === \"function\") {\n            const retryAfter = loader.getResponseHeader(\"Retry-After\");\n            if (retryAfter) {\n              ttl = parseFloat(retryAfter) * 1e3;\n            }\n          }\n          this.log(`Steering manifest ${context2.url} rate limited`);\n          return;\n        }\n        this.scheduleRefresh(this.uri || context2.url, ttl);\n      },\n      onTimeout: (stats, context2, networkDetails) => {\n        this.log(`Timeout loading steering manifest (${context2.url})`);\n        this.scheduleRefresh(this.uri || context2.url);\n      }\n    };\n    this.log(`Requesting steering manifest: ${url}`);\n    this.loader.load(context, loaderConfig, callbacks);\n  }\n  scheduleRefresh(uri, ttlMs = this.timeToLoad * 1e3) {\n    this.clearTimeout();\n    this.reloadTimer = self.setTimeout(() => {\n      var _this$hls;\n      const media = (_this$hls = this.hls) == null ? void 0 : _this$hls.media;\n      if (media && !media.ended) {\n        this.loadSteeringManifest(uri);\n        return;\n      }\n      this.scheduleRefresh(uri, this.timeToLoad * 1e3);\n    }, ttlMs);\n  }\n}\nfunction cloneRenditionGroups(tracks, groupCloneMap, uriReplacement, cloneId) {\n  if (!tracks) {\n    return;\n  }\n  Object.keys(groupCloneMap).forEach((audioGroupId) => {\n    const clonedTracks = tracks.filter((track) => track.groupId === audioGroupId).map((track) => {\n      const clonedTrack = _extends({}, track);\n      clonedTrack.details = void 0;\n      clonedTrack.attrs = new AttrList(clonedTrack.attrs);\n      clonedTrack.url = clonedTrack.attrs.URI = performUriReplacement(track.url, track.attrs[\"STABLE-RENDITION-ID\"], \"PER-RENDITION-URIS\", uriReplacement);\n      clonedTrack.groupId = clonedTrack.attrs[\"GROUP-ID\"] = groupCloneMap[audioGroupId];\n      clonedTrack.attrs[\"PATHWAY-ID\"] = cloneId;\n      return clonedTrack;\n    });\n    tracks.push(...clonedTracks);\n  });\n}\nfunction performUriReplacement(uri, stableId, perOptionKey, uriReplacement) {\n  const {\n    HOST: host,\n    PARAMS: params,\n    [perOptionKey]: perOptionUris\n  } = uriReplacement;\n  let perVariantUri;\n  if (stableId) {\n    perVariantUri = perOptionUris == null ? void 0 : perOptionUris[stableId];\n    if (perVariantUri) {\n      uri = perVariantUri;\n    }\n  }\n  const url = new self.URL(uri);\n  if (host && !perVariantUri) {\n    url.host = host;\n  }\n  if (params) {\n    Object.keys(params).sort().forEach((key) => {\n      if (key) {\n        url.searchParams.set(key, params[key]);\n      }\n    });\n  }\n  return url.href;\n}\nfunction addEventListener(el, type, listener) {\n  removeEventListener(el, type, listener);\n  el.addEventListener(type, listener);\n}\nfunction removeEventListener(el, type, listener) {\n  el.removeEventListener(type, listener);\n}\nclass EMEController extends Logger2 {\n  constructor(hls) {\n    super(\"eme\", hls.logger);\n    this.hls = void 0;\n    this.config = void 0;\n    this.media = null;\n    this.keyFormatPromise = null;\n    this.keySystemAccessPromises = {};\n    this._requestLicenseFailureCount = 0;\n    this.mediaKeySessions = [];\n    this.keyIdToKeySessionPromise = {};\n    this.mediaKeys = null;\n    this.setMediaKeysQueue = EMEController.CDMCleanupPromise ? [EMEController.CDMCleanupPromise] : [];\n    this.onWaitingForKey = (event) => {\n      this.log(`\"${event.type}\" event`);\n    };\n    this.hls = hls;\n    this.config = hls.config;\n    this.registerListeners();\n  }\n  destroy() {\n    this.onDestroying();\n    this.onMediaDetached();\n    const config = this.config;\n    config.requestMediaKeySystemAccessFunc = null;\n    config.licenseXhrSetup = config.licenseResponseCallback = void 0;\n    config.drmSystems = config.drmSystemOptions = {};\n    this.hls = this.config = this.keyIdToKeySessionPromise = null;\n    this.onWaitingForKey = null;\n  }\n  registerListeners() {\n    this.hls.on(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    this.hls.on(Events.MEDIA_DETACHED, this.onMediaDetached, this);\n    this.hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    this.hls.on(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    this.hls.on(Events.DESTROYING, this.onDestroying, this);\n  }\n  unregisterListeners() {\n    this.hls.off(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    this.hls.off(Events.MEDIA_DETACHED, this.onMediaDetached, this);\n    this.hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    this.hls.off(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    this.hls.off(Events.DESTROYING, this.onDestroying, this);\n  }\n  getLicenseServerUrl(keySystem) {\n    const {\n      drmSystems,\n      widevineLicenseUrl\n    } = this.config;\n    const keySystemConfiguration = drmSystems[keySystem];\n    if (keySystemConfiguration) {\n      return keySystemConfiguration.licenseUrl;\n    }\n    if (keySystem === KeySystems.WIDEVINE && widevineLicenseUrl) {\n      return widevineLicenseUrl;\n    }\n  }\n  getLicenseServerUrlOrThrow(keySystem) {\n    const url = this.getLicenseServerUrl(keySystem);\n    if (url === void 0) {\n      throw new Error(`no license server URL configured for key-system \"${keySystem}\"`);\n    }\n    return url;\n  }\n  getServerCertificateUrl(keySystem) {\n    const {\n      drmSystems\n    } = this.config;\n    const keySystemConfiguration = drmSystems[keySystem];\n    if (keySystemConfiguration) {\n      return keySystemConfiguration.serverCertificateUrl;\n    } else {\n      this.log(`No Server Certificate in config.drmSystems[\"${keySystem}\"]`);\n    }\n  }\n  attemptKeySystemAccess(keySystemsToAttempt) {\n    const levels = this.hls.levels;\n    const uniqueCodec = (value, i, a) => !!value && a.indexOf(value) === i;\n    const audioCodecs = levels.map((level) => level.audioCodec).filter(uniqueCodec);\n    const videoCodecs = levels.map((level) => level.videoCodec).filter(uniqueCodec);\n    if (audioCodecs.length + videoCodecs.length === 0) {\n      videoCodecs.push(\"avc1.42e01e\");\n    }\n    return new Promise((resolve, reject) => {\n      const attempt = (keySystems) => {\n        const keySystem = keySystems.shift();\n        this.getMediaKeysPromise(keySystem, audioCodecs, videoCodecs).then((mediaKeys) => resolve({\n          keySystem,\n          mediaKeys\n        })).catch((error) => {\n          if (keySystems.length) {\n            attempt(keySystems);\n          } else if (error instanceof EMEKeyError) {\n            reject(error);\n          } else {\n            reject(new EMEKeyError({\n              type: ErrorTypes.KEY_SYSTEM_ERROR,\n              details: ErrorDetails.KEY_SYSTEM_NO_ACCESS,\n              error,\n              fatal: true\n            }, error.message));\n          }\n        });\n      };\n      attempt(keySystemsToAttempt);\n    });\n  }\n  requestMediaKeySystemAccess(keySystem, supportedConfigurations) {\n    const {\n      requestMediaKeySystemAccessFunc\n    } = this.config;\n    if (!(typeof requestMediaKeySystemAccessFunc === \"function\")) {\n      let errMessage = `Configured requestMediaKeySystemAccess is not a function ${requestMediaKeySystemAccessFunc}`;\n      if (requestMediaKeySystemAccess === null && self.location.protocol === \"http:\") {\n        errMessage = `navigator.requestMediaKeySystemAccess is not available over insecure protocol ${location.protocol}`;\n      }\n      return Promise.reject(new Error(errMessage));\n    }\n    return requestMediaKeySystemAccessFunc(keySystem, supportedConfigurations);\n  }\n  getMediaKeysPromise(keySystem, audioCodecs, videoCodecs) {\n    const mediaKeySystemConfigs = getSupportedMediaKeySystemConfigurations(keySystem, audioCodecs, videoCodecs, this.config.drmSystemOptions);\n    const keySystemAccessPromises = this.keySystemAccessPromises[keySystem];\n    let keySystemAccess = keySystemAccessPromises == null ? void 0 : keySystemAccessPromises.keySystemAccess;\n    if (!keySystemAccess) {\n      this.log(`Requesting encrypted media \"${keySystem}\" key-system access with config: ${stringify(mediaKeySystemConfigs)}`);\n      keySystemAccess = this.requestMediaKeySystemAccess(keySystem, mediaKeySystemConfigs);\n      const _keySystemAccessPromises = this.keySystemAccessPromises[keySystem] = {\n        keySystemAccess\n      };\n      keySystemAccess.catch((error) => {\n        this.log(`Failed to obtain access to key-system \"${keySystem}\": ${error}`);\n      });\n      return keySystemAccess.then((mediaKeySystemAccess) => {\n        this.log(`Access for key-system \"${mediaKeySystemAccess.keySystem}\" obtained`);\n        const certificateRequest = this.fetchServerCertificate(keySystem);\n        this.log(`Create media-keys for \"${keySystem}\"`);\n        _keySystemAccessPromises.mediaKeys = mediaKeySystemAccess.createMediaKeys().then((mediaKeys) => {\n          this.log(`Media-keys created for \"${keySystem}\"`);\n          _keySystemAccessPromises.hasMediaKeys = true;\n          return certificateRequest.then((certificate) => {\n            if (certificate) {\n              return this.setMediaKeysServerCertificate(mediaKeys, keySystem, certificate);\n            }\n            return mediaKeys;\n          });\n        });\n        _keySystemAccessPromises.mediaKeys.catch((error) => {\n          this.error(`Failed to create media-keys for \"${keySystem}\"}: ${error}`);\n        });\n        return _keySystemAccessPromises.mediaKeys;\n      });\n    }\n    return keySystemAccess.then(() => keySystemAccessPromises.mediaKeys);\n  }\n  createMediaKeySessionContext({\n    decryptdata,\n    keySystem,\n    mediaKeys\n  }) {\n    this.log(`Creating key-system session \"${keySystem}\" keyId: ${Hex.hexDump(decryptdata.keyId || [])}`);\n    const mediaKeysSession = mediaKeys.createSession();\n    const mediaKeySessionContext = {\n      decryptdata,\n      keySystem,\n      mediaKeys,\n      mediaKeysSession,\n      keyStatus: \"status-pending\"\n    };\n    this.mediaKeySessions.push(mediaKeySessionContext);\n    return mediaKeySessionContext;\n  }\n  renewKeySession(mediaKeySessionContext) {\n    const decryptdata = mediaKeySessionContext.decryptdata;\n    if (decryptdata.pssh) {\n      const keySessionContext = this.createMediaKeySessionContext(mediaKeySessionContext);\n      const keyId = this.getKeyIdString(decryptdata);\n      const scheme = \"cenc\";\n      this.keyIdToKeySessionPromise[keyId] = this.generateRequestWithPreferredKeySession(keySessionContext, scheme, decryptdata.pssh.buffer, \"expired\");\n    } else {\n      this.warn(`Could not renew expired session. Missing pssh initData.`);\n    }\n    this.removeSession(mediaKeySessionContext);\n  }\n  getKeyIdString(decryptdata) {\n    if (!decryptdata) {\n      throw new Error(\"Could not read keyId of undefined decryptdata\");\n    }\n    if (decryptdata.keyId === null) {\n      throw new Error(\"keyId is null\");\n    }\n    return Hex.hexDump(decryptdata.keyId);\n  }\n  updateKeySession(mediaKeySessionContext, data) {\n    var _mediaKeySessionConte;\n    const keySession = mediaKeySessionContext.mediaKeysSession;\n    this.log(`Updating key-session \"${keySession.sessionId}\" for keyID ${Hex.hexDump(((_mediaKeySessionConte = mediaKeySessionContext.decryptdata) == null ? void 0 : _mediaKeySessionConte.keyId) || [])}\n      } (data length: ${data ? data.byteLength : data})`);\n    return keySession.update(data);\n  }\n  getSelectedKeySystemFormats() {\n    return Object.keys(this.keySystemAccessPromises).map((keySystem) => ({\n      keySystem,\n      hasMediaKeys: this.keySystemAccessPromises[keySystem].hasMediaKeys\n    })).filter(({\n      hasMediaKeys\n    }) => !!hasMediaKeys).map(({\n      keySystem\n    }) => keySystemDomainToKeySystemFormat(keySystem)).filter((keySystem) => !!keySystem);\n  }\n  getKeySystemAccess(keySystemsToAttempt) {\n    return this.getKeySystemSelectionPromise(keySystemsToAttempt).then(({\n      keySystem,\n      mediaKeys\n    }) => {\n      return this.attemptSetMediaKeys(keySystem, mediaKeys);\n    });\n  }\n  selectKeySystem(keySystemsToAttempt) {\n    return new Promise((resolve, reject) => {\n      return this.getKeySystemSelectionPromise(keySystemsToAttempt).then(({\n        keySystem\n      }) => {\n        const keySystemFormat = keySystemDomainToKeySystemFormat(keySystem);\n        if (keySystemFormat) {\n          resolve(keySystemFormat);\n        } else {\n          reject(new Error(`Unable to find format for key-system \"${keySystem}\"`));\n        }\n      }).catch(reject);\n    });\n  }\n  selectKeySystemFormat(frag) {\n    const keyFormats = Object.keys(frag.levelkeys || {});\n    if (!this.keyFormatPromise) {\n      this.log(`Selecting key-system from fragment (sn: ${frag.sn} ${frag.type}: ${frag.level}) key formats ${keyFormats.join(\", \")}`);\n      this.keyFormatPromise = this.getKeyFormatPromise(keyFormats);\n    }\n    return this.keyFormatPromise;\n  }\n  getKeyFormatPromise(keyFormats) {\n    const keySystemsInConfig = getKeySystemsForConfig(this.config);\n    const keySystemsToAttempt = keyFormats.map(keySystemFormatToKeySystemDomain).filter((value) => !!value && keySystemsInConfig.indexOf(value) !== -1);\n    return this.selectKeySystem(keySystemsToAttempt);\n  }\n  loadKey(data) {\n    const decryptdata = data.keyInfo.decryptdata;\n    const keyId = this.getKeyIdString(decryptdata);\n    const keyDetails = `(keyId: ${keyId} format: \"${decryptdata.keyFormat}\" method: ${decryptdata.method} uri: ${decryptdata.uri})`;\n    this.log(`Starting session for key ${keyDetails}`);\n    let keyContextPromise = this.keyIdToKeySessionPromise[keyId];\n    if (!keyContextPromise) {\n      keyContextPromise = this.getKeySystemForKeyPromise(decryptdata).then(({\n        keySystem,\n        mediaKeys\n      }) => {\n        this.throwIfDestroyed();\n        this.log(`Handle encrypted media sn: ${data.frag.sn} ${data.frag.type}: ${data.frag.level} using key ${keyDetails}`);\n        return this.attemptSetMediaKeys(keySystem, mediaKeys).then(() => {\n          this.throwIfDestroyed();\n          return this.createMediaKeySessionContext({\n            keySystem,\n            mediaKeys,\n            decryptdata\n          });\n        });\n      });\n      const keySessionContextPromise = this.keyIdToKeySessionPromise[keyId] = keyContextPromise.then((keySessionContext) => {\n        const scheme = \"cenc\";\n        const initData = decryptdata.pssh ? decryptdata.pssh.buffer : null;\n        return this.generateRequestWithPreferredKeySession(keySessionContext, scheme, initData, \"playlist-key\");\n      });\n      keySessionContextPromise.catch((error) => this.handleError(error));\n    }\n    return keyContextPromise;\n  }\n  throwIfDestroyed(message = \"Invalid state\") {\n    if (!this.hls) {\n      throw new Error(\"invalid state\");\n    }\n  }\n  handleError(error) {\n    if (!this.hls) {\n      return;\n    }\n    this.error(error.message);\n    if (error instanceof EMEKeyError) {\n      this.hls.trigger(Events.ERROR, error.data);\n    } else {\n      this.hls.trigger(Events.ERROR, {\n        type: ErrorTypes.KEY_SYSTEM_ERROR,\n        details: ErrorDetails.KEY_SYSTEM_NO_KEYS,\n        error,\n        fatal: true\n      });\n    }\n  }\n  getKeySystemForKeyPromise(decryptdata) {\n    const keyId = this.getKeyIdString(decryptdata);\n    const mediaKeySessionContext = this.keyIdToKeySessionPromise[keyId];\n    if (!mediaKeySessionContext) {\n      const keySystem = keySystemFormatToKeySystemDomain(decryptdata.keyFormat);\n      const keySystemsToAttempt = keySystem ? [keySystem] : getKeySystemsForConfig(this.config);\n      return this.attemptKeySystemAccess(keySystemsToAttempt);\n    }\n    return mediaKeySessionContext;\n  }\n  getKeySystemSelectionPromise(keySystemsToAttempt) {\n    if (!keySystemsToAttempt.length) {\n      keySystemsToAttempt = getKeySystemsForConfig(this.config);\n    }\n    if (keySystemsToAttempt.length === 0) {\n      throw new EMEKeyError({\n        type: ErrorTypes.KEY_SYSTEM_ERROR,\n        details: ErrorDetails.KEY_SYSTEM_NO_CONFIGURED_LICENSE,\n        fatal: true\n      }, `Missing key-system license configuration options ${stringify({\n        drmSystems: this.config.drmSystems\n      })}`);\n    }\n    return this.attemptKeySystemAccess(keySystemsToAttempt);\n  }\n  attemptSetMediaKeys(keySystem, mediaKeys) {\n    if (this.mediaKeys === mediaKeys) {\n      return Promise.resolve();\n    }\n    const queue2 = this.setMediaKeysQueue.slice();\n    this.log(`Setting media-keys for \"${keySystem}\"`);\n    const setMediaKeysPromise = Promise.all(queue2).then(() => {\n      if (!this.media) {\n        this.mediaKeys = null;\n        throw new Error(\"Attempted to set mediaKeys without media element attached\");\n      }\n      return this.media.setMediaKeys(mediaKeys);\n    });\n    this.mediaKeys = mediaKeys;\n    this.setMediaKeysQueue.push(setMediaKeysPromise);\n    return setMediaKeysPromise.then(() => {\n      this.log(`Media-keys set for \"${keySystem}\"`);\n      queue2.push(setMediaKeysPromise);\n      this.setMediaKeysQueue = this.setMediaKeysQueue.filter((p) => queue2.indexOf(p) === -1);\n    });\n  }\n  generateRequestWithPreferredKeySession(context, initDataType, initData, reason) {\n    var _this$config$drmSyste, _this$config$drmSyste2;\n    const generateRequestFilter = (_this$config$drmSyste = this.config.drmSystems) == null ? void 0 : (_this$config$drmSyste2 = _this$config$drmSyste[context.keySystem]) == null ? void 0 : _this$config$drmSyste2.generateRequest;\n    if (generateRequestFilter) {\n      try {\n        const mappedInitData = generateRequestFilter.call(this.hls, initDataType, initData, context);\n        if (!mappedInitData) {\n          throw new Error(\"Invalid response from configured generateRequest filter\");\n        }\n        initDataType = mappedInitData.initDataType;\n        initData = mappedInitData.initData ? mappedInitData.initData : null;\n        context.decryptdata.pssh = initData ? new Uint8Array(initData) : null;\n      } catch (error) {\n        var _this$hls;\n        this.warn(error.message);\n        if ((_this$hls = this.hls) != null && _this$hls.config.debug) {\n          throw error;\n        }\n      }\n    }\n    if (initData === null) {\n      this.log(`Skipping key-session request for \"${reason}\" (no initData)`);\n      return Promise.resolve(context);\n    }\n    const keyId = this.getKeyIdString(context.decryptdata);\n    this.log(`Generating key-session request for \"${reason}\": ${keyId} (init data type: ${initDataType} length: ${initData ? initData.byteLength : null})`);\n    const licenseStatus = new EventEmitter$1();\n    const onmessage = context._onmessage = (event) => {\n      const keySession = context.mediaKeysSession;\n      if (!keySession) {\n        licenseStatus.emit(\"error\", new Error(\"invalid state\"));\n        return;\n      }\n      const {\n        messageType,\n        message\n      } = event;\n      this.log(`\"${messageType}\" message event for session \"${keySession.sessionId}\" message size: ${message.byteLength}`);\n      if (messageType === \"license-request\" || messageType === \"license-renewal\") {\n        this.renewLicense(context, message).catch((error) => {\n          if (licenseStatus.eventNames().length) {\n            licenseStatus.emit(\"error\", error);\n          } else {\n            this.handleError(error);\n          }\n        });\n      } else if (messageType === \"license-release\") {\n        if (context.keySystem === KeySystems.FAIRPLAY) {\n          this.updateKeySession(context, strToUtf8array(\"acknowledged\"));\n          this.removeSession(context);\n        }\n      } else {\n        this.warn(`unhandled media key message type \"${messageType}\"`);\n      }\n    };\n    const onkeystatuseschange = context._onkeystatuseschange = (event) => {\n      const keySession = context.mediaKeysSession;\n      if (!keySession) {\n        licenseStatus.emit(\"error\", new Error(\"invalid state\"));\n        return;\n      }\n      this.onKeyStatusChange(context);\n      const keyStatus = context.keyStatus;\n      licenseStatus.emit(\"keyStatus\", keyStatus);\n      if (keyStatus === \"expired\") {\n        this.warn(`${context.keySystem} expired for key ${keyId}`);\n        this.renewKeySession(context);\n      }\n    };\n    addEventListener(context.mediaKeysSession, \"message\", onmessage);\n    addEventListener(context.mediaKeysSession, \"keystatuseschange\", onkeystatuseschange);\n    const keyUsablePromise = new Promise((resolve, reject) => {\n      licenseStatus.on(\"error\", reject);\n      licenseStatus.on(\"keyStatus\", (keyStatus) => {\n        if (keyStatus.startsWith(\"usable\")) {\n          resolve();\n        } else if (keyStatus === \"output-restricted\") {\n          reject(new EMEKeyError({\n            type: ErrorTypes.KEY_SYSTEM_ERROR,\n            details: ErrorDetails.KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED,\n            fatal: false\n          }, \"HDCP level output restricted\"));\n        } else if (keyStatus === \"internal-error\") {\n          reject(new EMEKeyError({\n            type: ErrorTypes.KEY_SYSTEM_ERROR,\n            details: ErrorDetails.KEY_SYSTEM_STATUS_INTERNAL_ERROR,\n            fatal: true\n          }, `key status changed to \"${keyStatus}\"`));\n        } else if (keyStatus === \"expired\") {\n          reject(new Error(\"key expired while generating request\"));\n        } else {\n          this.warn(`unhandled key status change \"${keyStatus}\"`);\n        }\n      });\n    });\n    return context.mediaKeysSession.generateRequest(initDataType, initData).then(() => {\n      var _context$mediaKeysSes;\n      this.log(`Request generated for key-session \"${(_context$mediaKeysSes = context.mediaKeysSession) == null ? void 0 : _context$mediaKeysSes.sessionId}\" keyId: ${keyId}`);\n    }).catch((error) => {\n      throw new EMEKeyError({\n        type: ErrorTypes.KEY_SYSTEM_ERROR,\n        details: ErrorDetails.KEY_SYSTEM_NO_SESSION,\n        error,\n        fatal: false\n      }, `Error generating key-session request: ${error}`);\n    }).then(() => keyUsablePromise).catch((error) => {\n      licenseStatus.removeAllListeners();\n      this.removeSession(context);\n      throw error;\n    }).then(() => {\n      licenseStatus.removeAllListeners();\n      return context;\n    });\n  }\n  onKeyStatusChange(mediaKeySessionContext) {\n    mediaKeySessionContext.mediaKeysSession.keyStatuses.forEach((status2, keyId) => {\n      if (typeof keyId === \"string\" && typeof status2 === \"object\") {\n        const temp = keyId;\n        keyId = status2;\n        status2 = temp;\n      }\n      this.log(`key status change \"${status2}\" for keyStatuses keyId: ${Hex.hexDump(\"buffer\" in keyId ? new Uint8Array(keyId.buffer, keyId.byteOffset, keyId.byteLength) : new Uint8Array(keyId))} session keyId: ${Hex.hexDump(new Uint8Array(mediaKeySessionContext.decryptdata.keyId || []))} uri: ${mediaKeySessionContext.decryptdata.uri}`);\n      mediaKeySessionContext.keyStatus = status2;\n    });\n  }\n  fetchServerCertificate(keySystem) {\n    const config = this.config;\n    const Loader = config.loader;\n    const certLoader = new Loader(config);\n    const url = this.getServerCertificateUrl(keySystem);\n    if (!url) {\n      return Promise.resolve();\n    }\n    this.log(`Fetching server certificate for \"${keySystem}\"`);\n    return new Promise((resolve, reject) => {\n      const loaderContext = {\n        responseType: \"arraybuffer\",\n        url\n      };\n      const loadPolicy = config.certLoadPolicy.default;\n      const loaderConfig = {\n        loadPolicy,\n        timeout: loadPolicy.maxLoadTimeMs,\n        maxRetry: 0,\n        retryDelay: 0,\n        maxRetryDelay: 0\n      };\n      const loaderCallbacks = {\n        onSuccess: (response, stats, context, networkDetails) => {\n          resolve(response.data);\n        },\n        onError: (response, contex, networkDetails, stats) => {\n          reject(new EMEKeyError({\n            type: ErrorTypes.KEY_SYSTEM_ERROR,\n            details: ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,\n            fatal: true,\n            networkDetails,\n            response: _objectSpread2({\n              url: loaderContext.url,\n              data: void 0\n            }, response)\n          }, `\"${keySystem}\" certificate request failed (${url}). Status: ${response.code} (${response.text})`));\n        },\n        onTimeout: (stats, context, networkDetails) => {\n          reject(new EMEKeyError({\n            type: ErrorTypes.KEY_SYSTEM_ERROR,\n            details: ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED,\n            fatal: true,\n            networkDetails,\n            response: {\n              url: loaderContext.url,\n              data: void 0\n            }\n          }, `\"${keySystem}\" certificate request timed out (${url})`));\n        },\n        onAbort: (stats, context, networkDetails) => {\n          reject(new Error(\"aborted\"));\n        }\n      };\n      certLoader.load(loaderContext, loaderConfig, loaderCallbacks);\n    });\n  }\n  setMediaKeysServerCertificate(mediaKeys, keySystem, cert) {\n    return new Promise((resolve, reject) => {\n      mediaKeys.setServerCertificate(cert).then((success) => {\n        this.log(`setServerCertificate ${success ? \"success\" : \"not supported by CDM\"} (${cert == null ? void 0 : cert.byteLength}) on \"${keySystem}\"`);\n        resolve(mediaKeys);\n      }).catch((error) => {\n        reject(new EMEKeyError({\n          type: ErrorTypes.KEY_SYSTEM_ERROR,\n          details: ErrorDetails.KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED,\n          error,\n          fatal: true\n        }, error.message));\n      });\n    });\n  }\n  renewLicense(context, keyMessage) {\n    return this.requestLicense(context, new Uint8Array(keyMessage)).then((data) => {\n      return this.updateKeySession(context, new Uint8Array(data)).catch((error) => {\n        throw new EMEKeyError({\n          type: ErrorTypes.KEY_SYSTEM_ERROR,\n          details: ErrorDetails.KEY_SYSTEM_SESSION_UPDATE_FAILED,\n          error,\n          fatal: true\n        }, error.message);\n      });\n    });\n  }\n  unpackPlayReadyKeyMessage(xhr, licenseChallenge) {\n    const xmlString = String.fromCharCode.apply(null, new Uint16Array(licenseChallenge.buffer));\n    if (!xmlString.includes(\"PlayReadyKeyMessage\")) {\n      xhr.setRequestHeader(\"Content-Type\", \"text/xml; charset=utf-8\");\n      return licenseChallenge;\n    }\n    const keyMessageXml = new DOMParser().parseFromString(xmlString, \"application/xml\");\n    const headers = keyMessageXml.querySelectorAll(\"HttpHeader\");\n    if (headers.length > 0) {\n      let header;\n      for (let i = 0, len = headers.length; i < len; i++) {\n        var _header$querySelector, _header$querySelector2;\n        header = headers[i];\n        const name = (_header$querySelector = header.querySelector(\"name\")) == null ? void 0 : _header$querySelector.textContent;\n        const value = (_header$querySelector2 = header.querySelector(\"value\")) == null ? void 0 : _header$querySelector2.textContent;\n        if (name && value) {\n          xhr.setRequestHeader(name, value);\n        }\n      }\n    }\n    const challengeElement = keyMessageXml.querySelector(\"Challenge\");\n    const challengeText = challengeElement == null ? void 0 : challengeElement.textContent;\n    if (!challengeText) {\n      throw new Error(`Cannot find <Challenge> in key message`);\n    }\n    return strToUtf8array(atob(challengeText));\n  }\n  setupLicenseXHR(xhr, url, keysListItem, licenseChallenge) {\n    const licenseXhrSetup = this.config.licenseXhrSetup;\n    if (!licenseXhrSetup) {\n      xhr.open(\"POST\", url, true);\n      return Promise.resolve({\n        xhr,\n        licenseChallenge\n      });\n    }\n    return Promise.resolve().then(() => {\n      if (!keysListItem.decryptdata) {\n        throw new Error(\"Key removed\");\n      }\n      return licenseXhrSetup.call(this.hls, xhr, url, keysListItem, licenseChallenge);\n    }).catch((error) => {\n      if (!keysListItem.decryptdata) {\n        throw error;\n      }\n      xhr.open(\"POST\", url, true);\n      return licenseXhrSetup.call(this.hls, xhr, url, keysListItem, licenseChallenge);\n    }).then((licenseXhrSetupResult) => {\n      if (!xhr.readyState) {\n        xhr.open(\"POST\", url, true);\n      }\n      const finalLicenseChallenge = licenseXhrSetupResult ? licenseXhrSetupResult : licenseChallenge;\n      return {\n        xhr,\n        licenseChallenge: finalLicenseChallenge\n      };\n    });\n  }\n  requestLicense(keySessionContext, licenseChallenge) {\n    const keyLoadPolicy = this.config.keyLoadPolicy.default;\n    return new Promise((resolve, reject) => {\n      const url = this.getLicenseServerUrlOrThrow(keySessionContext.keySystem);\n      this.log(`Sending license request to URL: ${url}`);\n      const xhr = new XMLHttpRequest();\n      xhr.responseType = \"arraybuffer\";\n      xhr.onreadystatechange = () => {\n        if (!this.hls || !keySessionContext.mediaKeysSession) {\n          return reject(new Error(\"invalid state\"));\n        }\n        if (xhr.readyState === 4) {\n          if (xhr.status === 200) {\n            this._requestLicenseFailureCount = 0;\n            let data = xhr.response;\n            this.log(`License received ${data instanceof ArrayBuffer ? data.byteLength : data}`);\n            const licenseResponseCallback = this.config.licenseResponseCallback;\n            if (licenseResponseCallback) {\n              try {\n                data = licenseResponseCallback.call(this.hls, xhr, url, keySessionContext);\n              } catch (error) {\n                this.error(error);\n              }\n            }\n            resolve(data);\n          } else {\n            const retryConfig = keyLoadPolicy.errorRetry;\n            const maxNumRetry = retryConfig ? retryConfig.maxNumRetry : 0;\n            this._requestLicenseFailureCount++;\n            if (this._requestLicenseFailureCount > maxNumRetry || xhr.status >= 400 && xhr.status < 500) {\n              reject(new EMEKeyError({\n                type: ErrorTypes.KEY_SYSTEM_ERROR,\n                details: ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,\n                fatal: true,\n                networkDetails: xhr,\n                response: {\n                  url,\n                  data: void 0,\n                  code: xhr.status,\n                  text: xhr.statusText\n                }\n              }, `License Request XHR failed (${url}). Status: ${xhr.status} (${xhr.statusText})`));\n            } else {\n              const attemptsLeft = maxNumRetry - this._requestLicenseFailureCount + 1;\n              this.warn(`Retrying license request, ${attemptsLeft} attempts left`);\n              this.requestLicense(keySessionContext, licenseChallenge).then(resolve, reject);\n            }\n          }\n        }\n      };\n      if (keySessionContext.licenseXhr && keySessionContext.licenseXhr.readyState !== XMLHttpRequest.DONE) {\n        keySessionContext.licenseXhr.abort();\n      }\n      keySessionContext.licenseXhr = xhr;\n      this.setupLicenseXHR(xhr, url, keySessionContext, licenseChallenge).then(({\n        xhr: xhr2,\n        licenseChallenge: licenseChallenge2\n      }) => {\n        if (keySessionContext.keySystem == KeySystems.PLAYREADY) {\n          licenseChallenge2 = this.unpackPlayReadyKeyMessage(xhr2, licenseChallenge2);\n        }\n        xhr2.send(licenseChallenge2);\n      });\n    });\n  }\n  onDestroying() {\n    this.unregisterListeners();\n    this._clear();\n  }\n  onMediaAttached(event, data) {\n    if (!this.config.emeEnabled) {\n      return;\n    }\n    const media = data.media;\n    this.media = media;\n    addEventListener(media, \"waitingforkey\", this.onWaitingForKey);\n  }\n  onMediaDetached() {\n    const media = this.media;\n    if (media) {\n      removeEventListener(media, \"waitingforkey\", this.onWaitingForKey);\n      this.media = null;\n      this.mediaKeys = null;\n    }\n  }\n  _clear() {\n    var _media$setMediaKeys;\n    this._requestLicenseFailureCount = 0;\n    this.keyIdToKeySessionPromise = {};\n    if (!this.mediaKeys && !this.mediaKeySessions.length) {\n      return;\n    }\n    const media = this.media;\n    const mediaKeysList = this.mediaKeySessions.slice();\n    this.mediaKeySessions = [];\n    this.mediaKeys = null;\n    LevelKey.clearKeyUriToKeyIdMap();\n    const keySessionCount = mediaKeysList.length;\n    EMEController.CDMCleanupPromise = Promise.all(mediaKeysList.map((mediaKeySessionContext) => this.removeSession(mediaKeySessionContext)).concat(media == null ? void 0 : (_media$setMediaKeys = media.setMediaKeys(null)) == null ? void 0 : _media$setMediaKeys.catch((error) => {\n      var _this$hls2;\n      this.log(`Could not clear media keys: ${error}`);\n      (_this$hls2 = this.hls) == null ? void 0 : _this$hls2.trigger(Events.ERROR, {\n        type: ErrorTypes.OTHER_ERROR,\n        details: ErrorDetails.KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR,\n        fatal: false,\n        error: new Error(`Could not clear media keys: ${error}`)\n      });\n    }))).catch((error) => {\n      var _this$hls3;\n      this.log(`Could not close sessions and clear media keys: ${error}`);\n      (_this$hls3 = this.hls) == null ? void 0 : _this$hls3.trigger(Events.ERROR, {\n        type: ErrorTypes.OTHER_ERROR,\n        details: ErrorDetails.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,\n        fatal: false,\n        error: new Error(`Could not close sessions and clear media keys: ${error}`)\n      });\n    }).then(() => {\n      if (keySessionCount) {\n        this.log(\"finished closing key sessions and clearing media keys\");\n      }\n    });\n  }\n  onManifestLoading() {\n    this.keyFormatPromise = null;\n  }\n  onManifestLoaded(event, {\n    sessionKeys\n  }) {\n    if (!sessionKeys || !this.config.emeEnabled) {\n      return;\n    }\n    if (!this.keyFormatPromise) {\n      const keyFormats = sessionKeys.reduce((formats, sessionKey) => {\n        if (formats.indexOf(sessionKey.keyFormat) === -1) {\n          formats.push(sessionKey.keyFormat);\n        }\n        return formats;\n      }, []);\n      this.log(`Selecting key-system from session-keys ${keyFormats.join(\", \")}`);\n      this.keyFormatPromise = this.getKeyFormatPromise(keyFormats);\n    }\n  }\n  removeSession(mediaKeySessionContext) {\n    const {\n      mediaKeysSession,\n      licenseXhr\n    } = mediaKeySessionContext;\n    if (mediaKeysSession) {\n      this.log(`Remove licenses and keys and close session ${mediaKeysSession.sessionId}`);\n      if (mediaKeySessionContext._onmessage) {\n        mediaKeysSession.removeEventListener(\"message\", mediaKeySessionContext._onmessage);\n        mediaKeySessionContext._onmessage = void 0;\n      }\n      if (mediaKeySessionContext._onkeystatuseschange) {\n        mediaKeysSession.removeEventListener(\"keystatuseschange\", mediaKeySessionContext._onkeystatuseschange);\n        mediaKeySessionContext._onkeystatuseschange = void 0;\n      }\n      if (licenseXhr && licenseXhr.readyState !== XMLHttpRequest.DONE) {\n        licenseXhr.abort();\n      }\n      mediaKeySessionContext.mediaKeysSession = mediaKeySessionContext.decryptdata = mediaKeySessionContext.licenseXhr = void 0;\n      const index = this.mediaKeySessions.indexOf(mediaKeySessionContext);\n      if (index > -1) {\n        this.mediaKeySessions.splice(index, 1);\n      }\n      const {\n        drmSystemOptions\n      } = this.config;\n      const removePromise = isPersistentSessionType(drmSystemOptions) ? new Promise((resolve, reject) => {\n        self.setTimeout(() => reject(new Error(`MediaKeySession.remove() timeout`)), 8e3);\n        mediaKeysSession.remove().then(resolve);\n      }) : Promise.resolve();\n      return removePromise.catch((error) => {\n        var _this$hls4;\n        this.log(`Could not remove session: ${error}`);\n        (_this$hls4 = this.hls) == null ? void 0 : _this$hls4.trigger(Events.ERROR, {\n          type: ErrorTypes.OTHER_ERROR,\n          details: ErrorDetails.KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR,\n          fatal: false,\n          error: new Error(`Could not remove session: ${error}`)\n        });\n      }).then(() => {\n        return mediaKeysSession.close();\n      }).catch((error) => {\n        var _this$hls5;\n        this.log(`Could not close session: ${error}`);\n        (_this$hls5 = this.hls) == null ? void 0 : _this$hls5.trigger(Events.ERROR, {\n          type: ErrorTypes.OTHER_ERROR,\n          details: ErrorDetails.KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR,\n          fatal: false,\n          error: new Error(`Could not close session: ${error}`)\n        });\n      });\n    }\n  }\n}\nEMEController.CDMCleanupPromise = void 0;\nclass EMEKeyError extends Error {\n  constructor(data, message) {\n    super(message);\n    this.data = void 0;\n    data.error || (data.error = new Error(message));\n    this.data = data;\n    data.err = data.error;\n  }\n}\nclass FPSController {\n  constructor(hls) {\n    this.hls = void 0;\n    this.isVideoPlaybackQualityAvailable = false;\n    this.timer = void 0;\n    this.media = null;\n    this.lastTime = void 0;\n    this.lastDroppedFrames = 0;\n    this.lastDecodedFrames = 0;\n    this.streamController = void 0;\n    this.hls = hls;\n    this.registerListeners();\n  }\n  setStreamController(streamController) {\n    this.streamController = streamController;\n  }\n  registerListeners() {\n    this.hls.on(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    this.hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n  }\n  unregisterListeners() {\n    this.hls.off(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    this.hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n  }\n  destroy() {\n    if (this.timer) {\n      clearInterval(this.timer);\n    }\n    this.unregisterListeners();\n    this.isVideoPlaybackQualityAvailable = false;\n    this.media = null;\n  }\n  onMediaAttaching(event, data) {\n    const config = this.hls.config;\n    if (config.capLevelOnFPSDrop) {\n      const media = data.media instanceof self.HTMLVideoElement ? data.media : null;\n      this.media = media;\n      if (media && typeof media.getVideoPlaybackQuality === \"function\") {\n        this.isVideoPlaybackQualityAvailable = true;\n      }\n      self.clearInterval(this.timer);\n      this.timer = self.setInterval(this.checkFPSInterval.bind(this), config.fpsDroppedMonitoringPeriod);\n    }\n  }\n  onMediaDetaching() {\n    this.media = null;\n  }\n  checkFPS(video, decodedFrames, droppedFrames) {\n    const currentTime = performance.now();\n    if (decodedFrames) {\n      if (this.lastTime) {\n        const currentPeriod = currentTime - this.lastTime;\n        const currentDropped = droppedFrames - this.lastDroppedFrames;\n        const currentDecoded = decodedFrames - this.lastDecodedFrames;\n        const droppedFPS = 1e3 * currentDropped / currentPeriod;\n        const hls = this.hls;\n        hls.trigger(Events.FPS_DROP, {\n          currentDropped,\n          currentDecoded,\n          totalDroppedFrames: droppedFrames\n        });\n        if (droppedFPS > 0) {\n          if (currentDropped > hls.config.fpsDroppedMonitoringThreshold * currentDecoded) {\n            let currentLevel = hls.currentLevel;\n            hls.logger.warn(\"drop FPS ratio greater than max allowed value for currentLevel: \" + currentLevel);\n            if (currentLevel > 0 && (hls.autoLevelCapping === -1 || hls.autoLevelCapping >= currentLevel)) {\n              currentLevel = currentLevel - 1;\n              hls.trigger(Events.FPS_DROP_LEVEL_CAPPING, {\n                level: currentLevel,\n                droppedLevel: hls.currentLevel\n              });\n              hls.autoLevelCapping = currentLevel;\n              this.streamController.nextLevelSwitch();\n            }\n          }\n        }\n      }\n      this.lastTime = currentTime;\n      this.lastDroppedFrames = droppedFrames;\n      this.lastDecodedFrames = decodedFrames;\n    }\n  }\n  checkFPSInterval() {\n    const video = this.media;\n    if (video) {\n      if (this.isVideoPlaybackQualityAvailable) {\n        const videoPlaybackQuality = video.getVideoPlaybackQuality();\n        this.checkFPS(video, videoPlaybackQuality.totalVideoFrames, videoPlaybackQuality.droppedVideoFrames);\n      } else {\n        this.checkFPS(video, video.webkitDecodedFrameCount, video.webkitDroppedFrameCount);\n      }\n    }\n  }\n}\nfunction sendAddTrackEvent(track, videoEl) {\n  let event;\n  try {\n    event = new Event(\"addtrack\");\n  } catch (err) {\n    event = document.createEvent(\"Event\");\n    event.initEvent(\"addtrack\", false, false);\n  }\n  event.track = track;\n  videoEl.dispatchEvent(event);\n}\nfunction addCueToTrack(track, cue) {\n  const mode = track.mode;\n  if (mode === \"disabled\") {\n    track.mode = \"hidden\";\n  }\n  if (track.cues && !track.cues.getCueById(cue.id)) {\n    try {\n      track.addCue(cue);\n      if (!track.cues.getCueById(cue.id)) {\n        throw new Error(`addCue is failed for: ${cue}`);\n      }\n    } catch (err) {\n      logger.debug(`[texttrack-utils]: ${err}`);\n      try {\n        const textTrackCue = new self.TextTrackCue(cue.startTime, cue.endTime, cue.text);\n        textTrackCue.id = cue.id;\n        track.addCue(textTrackCue);\n      } catch (err2) {\n        logger.debug(`[texttrack-utils]: Legacy TextTrackCue fallback failed: ${err2}`);\n      }\n    }\n  }\n  if (mode === \"disabled\") {\n    track.mode = mode;\n  }\n}\nfunction clearCurrentCues(track, enterHandler) {\n  const mode = track.mode;\n  if (mode === \"disabled\") {\n    track.mode = \"hidden\";\n  }\n  if (track.cues) {\n    for (let i = track.cues.length; i--; ) {\n      if (enterHandler) {\n        track.cues[i].removeEventListener(\"enter\", enterHandler);\n      }\n      track.removeCue(track.cues[i]);\n    }\n  }\n  if (mode === \"disabled\") {\n    track.mode = mode;\n  }\n}\nfunction removeCuesInRange(track, start, end, predicate) {\n  const mode = track.mode;\n  if (mode === \"disabled\") {\n    track.mode = \"hidden\";\n  }\n  if (track.cues && track.cues.length > 0) {\n    const cues = getCuesInRange(track.cues, start, end);\n    for (let i = 0; i < cues.length; i++) {\n      if (!predicate || predicate(cues[i])) {\n        track.removeCue(cues[i]);\n      }\n    }\n  }\n  if (mode === \"disabled\") {\n    track.mode = mode;\n  }\n}\nfunction getFirstCueIndexFromTime(cues, time) {\n  if (time <= cues[0].startTime) {\n    return 0;\n  }\n  const len = cues.length - 1;\n  if (time > cues[len].endTime) {\n    return -1;\n  }\n  let left = 0;\n  let right = len;\n  let mid;\n  while (left <= right) {\n    mid = Math.floor((right + left) / 2);\n    if (time < cues[mid].startTime) {\n      right = mid - 1;\n    } else if (time > cues[mid].startTime && left < len) {\n      left = mid + 1;\n    } else {\n      return mid;\n    }\n  }\n  return cues[left].startTime - time < time - cues[right].startTime ? left : right;\n}\nfunction getCuesInRange(cues, start, end) {\n  const cuesFound = [];\n  const firstCueInRange = getFirstCueIndexFromTime(cues, start);\n  if (firstCueInRange > -1) {\n    for (let i = firstCueInRange, len = cues.length; i < len; i++) {\n      const cue = cues[i];\n      if (cue.startTime >= start && cue.endTime <= end) {\n        cuesFound.push(cue);\n      } else if (cue.startTime > end) {\n        return cuesFound;\n      }\n    }\n  }\n  return cuesFound;\n}\nfunction filterSubtitleTracks(textTrackList) {\n  const tracks = [];\n  for (let i = 0; i < textTrackList.length; i++) {\n    const track = textTrackList[i];\n    if ((track.kind === \"subtitles\" || track.kind === \"captions\") && track.label) {\n      tracks.push(textTrackList[i]);\n    }\n  }\n  return tracks;\n}\nclass SubtitleTrackController extends BasePlaylistController {\n  constructor(hls) {\n    super(hls, \"subtitle-track-controller\");\n    this.media = null;\n    this.tracks = [];\n    this.groupIds = null;\n    this.tracksInGroup = [];\n    this.trackId = -1;\n    this.currentTrack = null;\n    this.selectDefaultTrack = true;\n    this.queuedDefaultTrack = -1;\n    this.useTextTrackPolling = false;\n    this.subtitlePollingInterval = -1;\n    this._subtitleDisplay = true;\n    this.asyncPollTrackChange = () => this.pollTrackChange(0);\n    this.onTextTracksChanged = () => {\n      if (!this.useTextTrackPolling) {\n        self.clearInterval(this.subtitlePollingInterval);\n      }\n      if (!this.media || !this.hls.config.renderTextTracksNatively) {\n        return;\n      }\n      let textTrack = null;\n      const tracks = filterSubtitleTracks(this.media.textTracks);\n      for (let i = 0; i < tracks.length; i++) {\n        if (tracks[i].mode === \"hidden\") {\n          textTrack = tracks[i];\n        } else if (tracks[i].mode === \"showing\") {\n          textTrack = tracks[i];\n          break;\n        }\n      }\n      const trackId = this.findTrackForTextTrack(textTrack);\n      if (this.subtitleTrack !== trackId) {\n        this.setSubtitleTrack(trackId);\n      }\n    };\n    this.registerListeners();\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.tracks.length = 0;\n    this.tracksInGroup.length = 0;\n    this.currentTrack = null;\n    this.onTextTracksChanged = this.asyncPollTrackChange = null;\n    super.destroy();\n  }\n  get subtitleDisplay() {\n    return this._subtitleDisplay;\n  }\n  set subtitleDisplay(value) {\n    this._subtitleDisplay = value;\n    if (this.trackId > -1) {\n      this.toggleTrackModes();\n    }\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.on(Events.LEVEL_LOADING, this.onLevelLoading, this);\n    hls.on(Events.LEVEL_SWITCHING, this.onLevelSwitching, this);\n    hls.on(Events.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this);\n    hls.on(Events.ERROR, this.onError, this);\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.off(Events.LEVEL_LOADING, this.onLevelLoading, this);\n    hls.off(Events.LEVEL_SWITCHING, this.onLevelSwitching, this);\n    hls.off(Events.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this);\n    hls.off(Events.ERROR, this.onError, this);\n  }\n  // Listen for subtitle track change, then extract the current track ID.\n  onMediaAttached(event, data) {\n    this.media = data.media;\n    if (!this.media) {\n      return;\n    }\n    if (this.queuedDefaultTrack > -1) {\n      this.subtitleTrack = this.queuedDefaultTrack;\n      this.queuedDefaultTrack = -1;\n    }\n    this.useTextTrackPolling = !(this.media.textTracks && \"onchange\" in this.media.textTracks);\n    if (this.useTextTrackPolling) {\n      this.pollTrackChange(500);\n    } else {\n      this.media.textTracks.addEventListener(\"change\", this.asyncPollTrackChange);\n    }\n  }\n  pollTrackChange(timeout) {\n    self.clearInterval(this.subtitlePollingInterval);\n    this.subtitlePollingInterval = self.setInterval(this.onTextTracksChanged, timeout);\n  }\n  onMediaDetaching(event, data) {\n    const media = this.media;\n    if (!media) {\n      return;\n    }\n    const transferringMedia = !!data.transferMedia;\n    self.clearInterval(this.subtitlePollingInterval);\n    if (!this.useTextTrackPolling) {\n      media.textTracks.removeEventListener(\"change\", this.asyncPollTrackChange);\n    }\n    if (this.trackId > -1) {\n      this.queuedDefaultTrack = this.trackId;\n    }\n    this.subtitleTrack = -1;\n    this.media = null;\n    if (transferringMedia) {\n      return;\n    }\n    const textTracks = filterSubtitleTracks(media.textTracks);\n    textTracks.forEach((track) => {\n      clearCurrentCues(track);\n    });\n  }\n  onManifestLoading() {\n    this.tracks = [];\n    this.groupIds = null;\n    this.tracksInGroup = [];\n    this.trackId = -1;\n    this.currentTrack = null;\n    this.selectDefaultTrack = true;\n  }\n  // Fired whenever a new manifest is loaded.\n  onManifestParsed(event, data) {\n    this.tracks = data.subtitleTracks;\n  }\n  onSubtitleTrackLoaded(event, data) {\n    const {\n      id,\n      groupId,\n      details\n    } = data;\n    const trackInActiveGroup = this.tracksInGroup[id];\n    if (!trackInActiveGroup || trackInActiveGroup.groupId !== groupId) {\n      this.warn(`Subtitle track with id:${id} and group:${groupId} not found in active group ${trackInActiveGroup == null ? void 0 : trackInActiveGroup.groupId}`);\n      return;\n    }\n    const curDetails = trackInActiveGroup.details;\n    trackInActiveGroup.details = data.details;\n    this.log(`Subtitle track ${id} \"${trackInActiveGroup.name}\" lang:${trackInActiveGroup.lang} group:${groupId} loaded [${details.startSN}-${details.endSN}]`);\n    if (id === this.trackId) {\n      this.playlistLoaded(id, data, curDetails);\n    }\n  }\n  onLevelLoading(event, data) {\n    this.switchLevel(data.level);\n  }\n  onLevelSwitching(event, data) {\n    this.switchLevel(data.level);\n  }\n  switchLevel(levelIndex) {\n    const levelInfo = this.hls.levels[levelIndex];\n    if (!levelInfo) {\n      return;\n    }\n    const subtitleGroups = levelInfo.subtitleGroups || null;\n    const currentGroups = this.groupIds;\n    let currentTrack = this.currentTrack;\n    if (!subtitleGroups || (currentGroups == null ? void 0 : currentGroups.length) !== (subtitleGroups == null ? void 0 : subtitleGroups.length) || subtitleGroups != null && subtitleGroups.some((groupId) => (currentGroups == null ? void 0 : currentGroups.indexOf(groupId)) === -1)) {\n      this.groupIds = subtitleGroups;\n      this.trackId = -1;\n      this.currentTrack = null;\n      const subtitleTracks = this.tracks.filter((track) => !subtitleGroups || subtitleGroups.indexOf(track.groupId) !== -1);\n      if (subtitleTracks.length) {\n        if (this.selectDefaultTrack && !subtitleTracks.some((track) => track.default)) {\n          this.selectDefaultTrack = false;\n        }\n        subtitleTracks.forEach((track, i) => {\n          track.id = i;\n        });\n      } else if (!currentTrack && !this.tracksInGroup.length) {\n        return;\n      }\n      this.tracksInGroup = subtitleTracks;\n      const subtitlePreference = this.hls.config.subtitlePreference;\n      if (!currentTrack && subtitlePreference) {\n        this.selectDefaultTrack = false;\n        const groupIndex = findMatchingOption(subtitlePreference, subtitleTracks);\n        if (groupIndex > -1) {\n          currentTrack = subtitleTracks[groupIndex];\n        } else {\n          const allIndex = findMatchingOption(subtitlePreference, this.tracks);\n          currentTrack = this.tracks[allIndex];\n        }\n      }\n      let trackId = this.findTrackId(currentTrack);\n      if (trackId === -1 && currentTrack) {\n        trackId = this.findTrackId(null);\n      }\n      const subtitleTracksUpdated = {\n        subtitleTracks\n      };\n      this.log(`Updating subtitle tracks, ${subtitleTracks.length} track(s) found in \"${subtitleGroups == null ? void 0 : subtitleGroups.join(\",\")}\" group-id`);\n      this.hls.trigger(Events.SUBTITLE_TRACKS_UPDATED, subtitleTracksUpdated);\n      if (trackId !== -1 && this.trackId === -1) {\n        this.setSubtitleTrack(trackId);\n      }\n    }\n  }\n  findTrackId(currentTrack) {\n    const tracks = this.tracksInGroup;\n    const selectDefault = this.selectDefaultTrack;\n    for (let i = 0; i < tracks.length; i++) {\n      const track = tracks[i];\n      if (selectDefault && !track.default || !selectDefault && !currentTrack) {\n        continue;\n      }\n      if (!currentTrack || matchesOption(track, currentTrack)) {\n        return i;\n      }\n    }\n    if (currentTrack) {\n      for (let i = 0; i < tracks.length; i++) {\n        const track = tracks[i];\n        if (mediaAttributesIdentical(currentTrack.attrs, track.attrs, [\"LANGUAGE\", \"ASSOC-LANGUAGE\", \"CHARACTERISTICS\"])) {\n          return i;\n        }\n      }\n      for (let i = 0; i < tracks.length; i++) {\n        const track = tracks[i];\n        if (mediaAttributesIdentical(currentTrack.attrs, track.attrs, [\"LANGUAGE\"])) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n  findTrackForTextTrack(textTrack) {\n    if (textTrack) {\n      const tracks = this.tracksInGroup;\n      for (let i = 0; i < tracks.length; i++) {\n        const track = tracks[i];\n        if (subtitleTrackMatchesTextTrack(track, textTrack)) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n  onError(event, data) {\n    if (data.fatal || !data.context) {\n      return;\n    }\n    if (data.context.type === PlaylistContextType.SUBTITLE_TRACK && data.context.id === this.trackId && (!this.groupIds || this.groupIds.indexOf(data.context.groupId) !== -1)) {\n      this.checkRetry(data);\n    }\n  }\n  get allSubtitleTracks() {\n    return this.tracks;\n  }\n  /** get alternate subtitle tracks list from playlist **/\n  get subtitleTracks() {\n    return this.tracksInGroup;\n  }\n  /** get/set index of the selected subtitle track (based on index in subtitle track lists) **/\n  get subtitleTrack() {\n    return this.trackId;\n  }\n  set subtitleTrack(newId) {\n    this.selectDefaultTrack = false;\n    this.setSubtitleTrack(newId);\n  }\n  setSubtitleOption(subtitleOption) {\n    this.hls.config.subtitlePreference = subtitleOption;\n    if (subtitleOption) {\n      if (subtitleOption.id === -1) {\n        this.setSubtitleTrack(-1);\n        return null;\n      }\n      const allSubtitleTracks = this.allSubtitleTracks;\n      this.selectDefaultTrack = false;\n      if (allSubtitleTracks.length) {\n        const currentTrack = this.currentTrack;\n        if (currentTrack && matchesOption(subtitleOption, currentTrack)) {\n          return currentTrack;\n        }\n        const groupIndex = findMatchingOption(subtitleOption, this.tracksInGroup);\n        if (groupIndex > -1) {\n          const track = this.tracksInGroup[groupIndex];\n          this.setSubtitleTrack(groupIndex);\n          return track;\n        } else if (currentTrack) {\n          return null;\n        } else {\n          const allIndex = findMatchingOption(subtitleOption, allSubtitleTracks);\n          if (allIndex > -1) {\n            return allSubtitleTracks[allIndex];\n          }\n        }\n      }\n    }\n    return null;\n  }\n  loadPlaylist(hlsUrlParameters) {\n    super.loadPlaylist();\n    if (this.shouldLoadPlaylist(this.currentTrack)) {\n      this.scheduleLoading(this.currentTrack, hlsUrlParameters);\n    }\n  }\n  loadingPlaylist(currentTrack, hlsUrlParameters) {\n    super.loadingPlaylist(currentTrack, hlsUrlParameters);\n    const id = currentTrack.id;\n    const groupId = currentTrack.groupId;\n    const url = this.getUrlWithDirectives(currentTrack.url, hlsUrlParameters);\n    const details = currentTrack.details;\n    const age = details == null ? void 0 : details.age;\n    this.log(`Loading subtitle ${id} \"${currentTrack.name}\" lang:${currentTrack.lang} group:${groupId}${(hlsUrlParameters == null ? void 0 : hlsUrlParameters.msn) !== void 0 ? \" at sn \" + hlsUrlParameters.msn + \" part \" + hlsUrlParameters.part : \"\"}${age && details.live ? \" age \" + age.toFixed(1) + (details.type ? \" \" + details.type || \"\" : \"\") : \"\"} ${url}`);\n    this.hls.trigger(Events.SUBTITLE_TRACK_LOADING, {\n      url,\n      id,\n      groupId,\n      deliveryDirectives: hlsUrlParameters || null,\n      track: currentTrack\n    });\n  }\n  /**\n   * Disables the old subtitleTrack and sets current mode on the next subtitleTrack.\n   * This operates on the DOM textTracks.\n   * A value of -1 will disable all subtitle tracks.\n   */\n  toggleTrackModes() {\n    const {\n      media\n    } = this;\n    if (!media) {\n      return;\n    }\n    const textTracks = filterSubtitleTracks(media.textTracks);\n    const currentTrack = this.currentTrack;\n    let nextTrack;\n    if (currentTrack) {\n      nextTrack = textTracks.filter((textTrack) => subtitleTrackMatchesTextTrack(currentTrack, textTrack))[0];\n      if (!nextTrack) {\n        this.warn(`Unable to find subtitle TextTrack with name \"${currentTrack.name}\" and language \"${currentTrack.lang}\"`);\n      }\n    }\n    [].slice.call(textTracks).forEach((track) => {\n      if (track.mode !== \"disabled\" && track !== nextTrack) {\n        track.mode = \"disabled\";\n      }\n    });\n    if (nextTrack) {\n      const mode = this.subtitleDisplay ? \"showing\" : \"hidden\";\n      if (nextTrack.mode !== mode) {\n        nextTrack.mode = mode;\n      }\n    }\n  }\n  /**\n   * This method is responsible for validating the subtitle index and periodically reloading if live.\n   * Dispatches the SUBTITLE_TRACK_SWITCH event, which instructs the subtitle-stream-controller to load the selected track.\n   */\n  setSubtitleTrack(newId) {\n    const tracks = this.tracksInGroup;\n    if (!this.media) {\n      this.queuedDefaultTrack = newId;\n      return;\n    }\n    if (newId < -1 || newId >= tracks.length || !isFiniteNumber(newId)) {\n      this.warn(`Invalid subtitle track id: ${newId}`);\n      return;\n    }\n    this.selectDefaultTrack = false;\n    const lastTrack = this.currentTrack;\n    const track = tracks[newId] || null;\n    this.trackId = newId;\n    this.currentTrack = track;\n    this.toggleTrackModes();\n    if (!track) {\n      this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH, {\n        id: newId\n      });\n      return;\n    }\n    const trackLoaded = !!track.details && !track.details.live;\n    if (newId === this.trackId && track === lastTrack && trackLoaded) {\n      return;\n    }\n    this.log(`Switching to subtitle-track ${newId}` + (track ? ` \"${track.name}\" lang:${track.lang} group:${track.groupId}` : \"\"));\n    const {\n      id,\n      groupId = \"\",\n      name,\n      type,\n      url\n    } = track;\n    this.hls.trigger(Events.SUBTITLE_TRACK_SWITCH, {\n      id,\n      groupId,\n      name,\n      type,\n      url\n    });\n    const hlsUrlParameters = this.switchParams(track.url, lastTrack == null ? void 0 : lastTrack.details, track.details);\n    this.loadPlaylist(hlsUrlParameters);\n  }\n}\nfunction uuid() {\n  try {\n    return crypto.randomUUID();\n  } catch (error) {\n    try {\n      const url = URL.createObjectURL(new Blob());\n      const uuid2 = url.toString();\n      URL.revokeObjectURL(url);\n      return uuid2.slice(uuid2.lastIndexOf(\"/\") + 1);\n    } catch (error2) {\n      let dt = (/* @__PURE__ */ new Date()).getTime();\n      const uuid2 = \"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx\".replace(/[xy]/g, (c) => {\n        const r = (dt + Math.random() * 16) % 16 | 0;\n        dt = Math.floor(dt / 16);\n        return (c == \"x\" ? r : r & 3 | 8).toString(16);\n      });\n      return uuid2;\n    }\n  }\n}\nfunction hash(text) {\n  let hash2 = 5381;\n  let i = text.length;\n  while (i) {\n    hash2 = hash2 * 33 ^ text.charCodeAt(--i);\n  }\n  return (hash2 >>> 0).toString();\n}\nconst ALIGNED_END_THRESHOLD_SECONDS = 0.025;\nlet TimelineOccupancy = /* @__PURE__ */ function(TimelineOccupancy2) {\n  TimelineOccupancy2[TimelineOccupancy2[\"Point\"] = 0] = \"Point\";\n  TimelineOccupancy2[TimelineOccupancy2[\"Range\"] = 1] = \"Range\";\n  return TimelineOccupancy2;\n}({});\nfunction generateAssetIdentifier(interstitial, uri, assetListIndex) {\n  return `${interstitial.identifier}-${assetListIndex + 1}-${hash(uri)}`;\n}\nclass InterstitialEvent {\n  constructor(dateRange, base) {\n    this.base = void 0;\n    this._duration = null;\n    this._timelineStart = null;\n    this.appendInPlaceDisabled = void 0;\n    this.appendInPlaceStarted = void 0;\n    this.dateRange = void 0;\n    this.hasPlayed = false;\n    this.cumulativeDuration = 0;\n    this.resumeOffset = NaN;\n    this.playoutLimit = NaN;\n    this.restrictions = {\n      skip: false,\n      jump: false\n    };\n    this.snapOptions = {\n      out: false,\n      in: false\n    };\n    this.assetList = [];\n    this.assetListLoader = void 0;\n    this.assetListResponse = null;\n    this.resumeAnchor = void 0;\n    this.error = void 0;\n    this.resetOnResume = void 0;\n    this.base = base;\n    this.dateRange = dateRange;\n    this.setDateRange(dateRange);\n  }\n  setDateRange(dateRange) {\n    this.dateRange = dateRange;\n    this.resumeOffset = dateRange.attr.optionalFloat(\"X-RESUME-OFFSET\", this.resumeOffset);\n    this.playoutLimit = dateRange.attr.optionalFloat(\"X-PLAYOUT-LIMIT\", this.playoutLimit);\n    this.restrictions = dateRange.attr.enumeratedStringList(\"X-RESTRICT\", this.restrictions);\n    this.snapOptions = dateRange.attr.enumeratedStringList(\"X-SNAP\", this.snapOptions);\n  }\n  reset() {\n    var _this$assetListLoader;\n    this.appendInPlaceStarted = false;\n    (_this$assetListLoader = this.assetListLoader) == null ? void 0 : _this$assetListLoader.destroy();\n    this.assetListLoader = void 0;\n    if (!this.supplementsPrimary) {\n      this.assetListResponse = null;\n      this.assetList = [];\n      this._duration = null;\n    }\n  }\n  isAssetPastPlayoutLimit(assetIndex) {\n    var _this$assetList$asset;\n    if (assetIndex > 0 && assetIndex >= this.assetList.length) {\n      return true;\n    }\n    const playoutLimit = this.playoutLimit;\n    if (assetIndex <= 0 || isNaN(playoutLimit)) {\n      return false;\n    }\n    if (playoutLimit === 0) {\n      return true;\n    }\n    const assetOffset = ((_this$assetList$asset = this.assetList[assetIndex]) == null ? void 0 : _this$assetList$asset.startOffset) || 0;\n    return assetOffset > playoutLimit;\n  }\n  findAssetIndex(asset) {\n    const index = this.assetList.indexOf(asset);\n    return index;\n  }\n  get identifier() {\n    return this.dateRange.id;\n  }\n  get startDate() {\n    return this.dateRange.startDate;\n  }\n  get startTime() {\n    const startTime = this.dateRange.startTime;\n    if (this.snapOptions.out) {\n      const frag = this.dateRange.tagAnchor;\n      if (frag) {\n        return getSnapToFragmentTime(startTime, frag);\n      }\n    }\n    return startTime;\n  }\n  get startOffset() {\n    return this.cue.pre ? 0 : this.startTime;\n  }\n  get startIsAligned() {\n    if (this.startTime === 0 || this.snapOptions.out) {\n      return true;\n    }\n    const frag = this.dateRange.tagAnchor;\n    if (frag) {\n      const startTime = this.dateRange.startTime;\n      const snappedStart = getSnapToFragmentTime(startTime, frag);\n      return startTime - snappedStart < 0.1;\n    }\n    return false;\n  }\n  get resumptionOffset() {\n    const resumeOffset = this.resumeOffset;\n    const offset = isFiniteNumber(resumeOffset) ? resumeOffset : this.duration;\n    return this.cumulativeDuration + offset;\n  }\n  get resumeTime() {\n    const resumeTime = this.startOffset + this.resumptionOffset;\n    if (this.snapOptions.in) {\n      const frag = this.resumeAnchor;\n      if (frag) {\n        return getSnapToFragmentTime(resumeTime, frag);\n      }\n    }\n    return resumeTime;\n  }\n  get appendInPlace() {\n    if (this.appendInPlaceStarted) {\n      return true;\n    }\n    if (this.appendInPlaceDisabled) {\n      return false;\n    }\n    if (!this.cue.once && !this.cue.pre && // preroll starts at startPosition before startPosition is known (live)\n    this.startIsAligned && (isNaN(this.playoutLimit) && isNaN(this.resumeOffset) || this.resumeOffset && this.duration && Math.abs(this.resumeOffset - this.duration) < ALIGNED_END_THRESHOLD_SECONDS)) {\n      return true;\n    }\n    return false;\n  }\n  set appendInPlace(value) {\n    if (this.appendInPlaceStarted) {\n      this.resetOnResume = !value;\n      return;\n    }\n    this.appendInPlaceDisabled = !value;\n  }\n  // Extended timeline start time\n  get timelineStart() {\n    if (this._timelineStart !== null) {\n      return this._timelineStart;\n    }\n    return this.startTime;\n  }\n  set timelineStart(value) {\n    this._timelineStart = value;\n  }\n  get duration() {\n    const playoutLimit = this.playoutLimit;\n    let duration;\n    if (this._duration !== null) {\n      duration = this._duration;\n    } else if (this.dateRange.duration) {\n      duration = this.dateRange.duration;\n    } else {\n      duration = this.dateRange.plannedDuration || 0;\n    }\n    if (!isNaN(playoutLimit) && playoutLimit < duration) {\n      duration = playoutLimit;\n    }\n    return duration;\n  }\n  set duration(value) {\n    this._duration = value;\n  }\n  get cue() {\n    return this.dateRange.cue;\n  }\n  get timelineOccupancy() {\n    if (this.dateRange.attr[\"X-TIMELINE-OCCUPIES\"] === \"RANGE\") {\n      return TimelineOccupancy.Range;\n    }\n    return TimelineOccupancy.Point;\n  }\n  get supplementsPrimary() {\n    return this.dateRange.attr[\"X-TIMELINE-STYLE\"] === \"PRIMARY\";\n  }\n  get contentMayVary() {\n    return this.dateRange.attr[\"X-CONTENT-MAY-VARY\"] !== \"NO\";\n  }\n  get assetUrl() {\n    return this.dateRange.attr[\"X-ASSET-URI\"];\n  }\n  get assetListUrl() {\n    return this.dateRange.attr[\"X-ASSET-LIST\"];\n  }\n  get baseUrl() {\n    return this.base.url;\n  }\n  get assetListLoaded() {\n    return this.assetList.length > 0 || this.assetListResponse !== null;\n  }\n  toString() {\n    return eventToString(this);\n  }\n}\nfunction getSnapToFragmentTime(time, frag) {\n  return time - frag.start < frag.duration / 2 && !(Math.abs(time - (frag.start + frag.duration)) < ALIGNED_END_THRESHOLD_SECONDS) ? frag.start : frag.start + frag.duration;\n}\nfunction getInterstitialUrl(uri, sessionId, baseUrl) {\n  const url = new self.URL(uri, baseUrl);\n  if (url.protocol !== \"data:\") {\n    url.searchParams.set(\"_HLS_primary_id\", sessionId);\n  }\n  return url;\n}\nfunction getNextAssetIndex(interstitial, assetListIndex) {\n  while ((_interstitial$assetLi = interstitial.assetList[++assetListIndex]) != null && _interstitial$assetLi.error) {\n    var _interstitial$assetLi;\n  }\n  return assetListIndex;\n}\nfunction eventToString(interstitial) {\n  return `[\"${interstitial.identifier}\" ${interstitial.cue.pre ? \"<pre>\" : interstitial.cue.post ? \"<post>\" : \"\"}${interstitial.timelineStart.toFixed(2)}-${interstitial.resumeTime.toFixed(2)}]`;\n}\nfunction eventAssetToString(asset) {\n  const start = asset.timelineStart;\n  const duration = asset.duration || 0;\n  return `[\"${asset.identifier}\" ${start.toFixed(2)}-${(start + duration).toFixed(2)}]`;\n}\nclass HlsAssetPlayer {\n  constructor(HlsPlayerClass, userConfig, interstitial, assetItem) {\n    this.hls = void 0;\n    this.interstitial = void 0;\n    this.assetItem = void 0;\n    this.tracks = null;\n    this.hasDetails = false;\n    this.mediaAttached = null;\n    this._currentTime = void 0;\n    this._bufferedEosTime = void 0;\n    this.checkPlayout = () => {\n      if (this.reachedPlayout(this.currentTime)) {\n        this.hls.trigger(Events.PLAYOUT_LIMIT_REACHED, {});\n      }\n    };\n    const hls = this.hls = new HlsPlayerClass(userConfig);\n    this.interstitial = interstitial;\n    this.assetItem = assetItem;\n    let uri = assetItem.uri;\n    try {\n      uri = getInterstitialUrl(uri, userConfig.primarySessionId).href;\n    } catch (error) {\n    }\n    hls.loadSource(uri);\n    const detailsLoaded = () => {\n      this.hasDetails = true;\n    };\n    hls.once(Events.LEVEL_LOADED, detailsLoaded);\n    hls.once(Events.AUDIO_TRACK_LOADED, detailsLoaded);\n    hls.once(Events.SUBTITLE_TRACK_LOADED, detailsLoaded);\n    hls.on(Events.MEDIA_ATTACHING, (name, {\n      media\n    }) => {\n      this.removeMediaListeners();\n      this.mediaAttached = media;\n      const event = this.interstitial;\n      if (event.playoutLimit) {\n        media.addEventListener(\"timeupdate\", this.checkPlayout);\n        if (this.appendInPlace) {\n          hls.on(Events.BUFFER_APPENDED, () => {\n            const bufferedEnd = this.bufferedEnd;\n            if (this.reachedPlayout(bufferedEnd)) {\n              this._bufferedEosTime = bufferedEnd;\n              hls.trigger(Events.BUFFERED_TO_END, void 0);\n            }\n          });\n        }\n      }\n    });\n  }\n  get appendInPlace() {\n    var _this$interstitial;\n    return ((_this$interstitial = this.interstitial) == null ? void 0 : _this$interstitial.appendInPlace) || false;\n  }\n  bufferedInPlaceToEnd(media) {\n    var _this$hls;\n    if (!this.appendInPlace) {\n      return false;\n    }\n    if ((_this$hls = this.hls) != null && _this$hls.bufferedToEnd) {\n      return true;\n    }\n    if (!media || !this._bufferedEosTime) {\n      return false;\n    }\n    const start = this.timelineOffset;\n    const bufferInfo = BufferHelper.bufferInfo(media, start, 0);\n    const bufferedEnd = this.getAssetTime(bufferInfo.end);\n    return bufferedEnd >= this._bufferedEosTime - 0.02;\n  }\n  reachedPlayout(time) {\n    const interstitial = this.interstitial;\n    const playoutLimit = interstitial.playoutLimit;\n    return this.startOffset + time >= playoutLimit;\n  }\n  get destroyed() {\n    var _this$hls2;\n    return !((_this$hls2 = this.hls) != null && _this$hls2.userConfig);\n  }\n  get assetId() {\n    return this.assetItem.identifier;\n  }\n  get interstitialId() {\n    return this.assetItem.parentIdentifier;\n  }\n  get media() {\n    var _this$hls3;\n    return ((_this$hls3 = this.hls) == null ? void 0 : _this$hls3.media) || null;\n  }\n  get bufferedEnd() {\n    const media = this.media || this.mediaAttached;\n    if (!media) {\n      if (this._bufferedEosTime) {\n        return this._bufferedEosTime;\n      }\n      return this.currentTime;\n    }\n    const bufferInfo = BufferHelper.bufferInfo(media, media.currentTime, 1e-3);\n    return this.getAssetTime(bufferInfo.end);\n  }\n  get currentTime() {\n    const media = this.media || this.mediaAttached;\n    if (!media) {\n      return this._currentTime || 0;\n    }\n    return this.getAssetTime(media.currentTime);\n  }\n  get duration() {\n    const duration = this.assetItem.duration;\n    if (!duration) {\n      return 0;\n    }\n    return duration;\n  }\n  get remaining() {\n    const duration = this.duration;\n    if (!duration) {\n      return 0;\n    }\n    return Math.max(0, duration - this.currentTime);\n  }\n  get startOffset() {\n    return this.assetItem.startOffset;\n  }\n  get timelineOffset() {\n    var _this$hls4;\n    return ((_this$hls4 = this.hls) == null ? void 0 : _this$hls4.config.timelineOffset) || 0;\n  }\n  set timelineOffset(value) {\n    const timelineOffset = this.timelineOffset;\n    if (value !== timelineOffset) {\n      const diff = value - timelineOffset;\n      if (Math.abs(diff) > 1 / 9e4) {\n        if (this.hasDetails) {\n          throw new Error(`Cannot set timelineOffset after playlists are loaded`);\n        }\n        this.hls.config.timelineOffset = value;\n      }\n    }\n  }\n  getAssetTime(time) {\n    const timelineOffset = this.timelineOffset;\n    const duration = this.duration;\n    return Math.min(Math.max(0, time - timelineOffset), duration);\n  }\n  removeMediaListeners() {\n    const media = this.mediaAttached;\n    if (media) {\n      this._currentTime = media.currentTime;\n      this.bufferSnapShot();\n      media.removeEventListener(\"timeupdate\", this.checkPlayout);\n    }\n  }\n  bufferSnapShot() {\n    if (this.mediaAttached) {\n      var _this$hls5;\n      if ((_this$hls5 = this.hls) != null && _this$hls5.bufferedToEnd) {\n        this._bufferedEosTime = this.bufferedEnd;\n      }\n    }\n  }\n  destroy() {\n    this.removeMediaListeners();\n    this.hls.destroy();\n    this.hls = this.interstitial = null;\n    this.tracks = this.mediaAttached = this.checkPlayout = null;\n  }\n  attachMedia(data) {\n    this.hls.attachMedia(data);\n  }\n  detachMedia() {\n    this.removeMediaListeners();\n    this.mediaAttached = null;\n    this.hls.detachMedia();\n  }\n  resumeBuffering() {\n    this.hls.resumeBuffering();\n  }\n  pauseBuffering() {\n    this.hls.pauseBuffering();\n  }\n  transferMedia() {\n    this.bufferSnapShot();\n    return this.hls.transferMedia();\n  }\n  resetDetails() {\n    const hls = this.hls;\n    if (this.hasDetails) {\n      hls.stopLoad();\n      const deleteDetails = (obj) => delete obj.details;\n      hls.levels.forEach(deleteDetails);\n      hls.allAudioTracks.forEach(deleteDetails);\n      hls.allSubtitleTracks.forEach(deleteDetails);\n      this.hasDetails = false;\n    }\n  }\n  on(event, listener, context) {\n    this.hls.on(event, listener);\n  }\n  once(event, listener, context) {\n    this.hls.once(event, listener);\n  }\n  off(event, listener, context) {\n    this.hls.off(event, listener);\n  }\n  toString() {\n    var _this$hls6;\n    return `HlsAssetPlayer: ${eventAssetToString(this.assetItem)} ${(_this$hls6 = this.hls) == null ? void 0 : _this$hls6.sessionId} ${this.appendInPlace ? \"append-in-place\" : \"\"}`;\n  }\n}\nconst ABUTTING_THRESHOLD_SECONDS = 0.033;\nclass InterstitialsSchedule extends Logger2 {\n  constructor(onScheduleUpdate, logger2) {\n    super(\"interstitials-sched\", logger2);\n    this.onScheduleUpdate = void 0;\n    this.eventMap = {};\n    this.events = null;\n    this.items = null;\n    this.durations = {\n      primary: 0,\n      playout: 0,\n      integrated: 0\n    };\n    this.onScheduleUpdate = onScheduleUpdate;\n  }\n  destroy() {\n    this.reset();\n    this.onScheduleUpdate = null;\n  }\n  reset() {\n    this.eventMap = {};\n    this.setDurations(0, 0, 0);\n    if (this.events) {\n      this.events.forEach((interstitial) => interstitial.reset());\n    }\n    this.events = this.items = null;\n  }\n  resetErrorsInRange(start, end) {\n    if (this.events) {\n      return this.events.reduce((count, interstitial) => {\n        if (start <= interstitial.startOffset && end > interstitial.startOffset) {\n          delete interstitial.error;\n          return count + 1;\n        }\n        return count;\n      }, 0);\n    }\n    return 0;\n  }\n  get duration() {\n    const items = this.items;\n    return items ? items[items.length - 1].end : 0;\n  }\n  get length() {\n    return this.items ? this.items.length : 0;\n  }\n  getEvent(identifier) {\n    return identifier ? this.eventMap[identifier] || null : null;\n  }\n  hasEvent(identifier) {\n    return identifier in this.eventMap;\n  }\n  findItemIndex(item, time) {\n    if (item.event) {\n      return this.findEventIndex(item.event.identifier);\n    }\n    let index = -1;\n    if (item.nextEvent) {\n      index = this.findEventIndex(item.nextEvent.identifier) - 1;\n    } else if (item.previousEvent) {\n      index = this.findEventIndex(item.previousEvent.identifier) + 1;\n    }\n    const items = this.items;\n    if (items) {\n      if (!items[index]) {\n        if (time === void 0) {\n          time = item.start;\n        }\n        index = this.findItemIndexAtTime(time);\n      }\n      while (index >= 0 && (_items$index = items[index]) != null && _items$index.event) {\n        var _items$index;\n        index--;\n      }\n    }\n    return index;\n  }\n  findItemIndexAtTime(timelinePos, timelineType) {\n    const items = this.items;\n    if (items) {\n      for (let i = 0; i < items.length; i++) {\n        let timeRange = items[i];\n        if (timelineType && timelineType !== \"primary\") {\n          timeRange = timeRange[timelineType];\n        }\n        if (timelinePos === timeRange.start || timelinePos > timeRange.start && timelinePos < timeRange.end) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n  findJumpRestrictedIndex(startIndex, endIndex) {\n    const items = this.items;\n    if (items) {\n      for (let i = startIndex; i <= endIndex; i++) {\n        if (!items[i]) {\n          break;\n        }\n        const event = items[i].event;\n        if (event != null && event.restrictions.jump && !event.appendInPlace) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n  findEventIndex(identifier) {\n    const items = this.items;\n    if (items) {\n      for (let i = items.length; i--; ) {\n        var _items$i$event;\n        if (((_items$i$event = items[i].event) == null ? void 0 : _items$i$event.identifier) === identifier) {\n          return i;\n        }\n      }\n    }\n    return -1;\n  }\n  findAssetIndex(event, timelinePos) {\n    const assetList = event.assetList;\n    const length = assetList.length;\n    if (length > 1) {\n      for (let i = 0; i < length; i++) {\n        const asset = assetList[i];\n        if (!asset.error) {\n          const timelineStart = asset.timelineStart;\n          if (timelinePos === timelineStart || timelinePos > timelineStart && timelinePos < timelineStart + (asset.duration || 0)) {\n            return i;\n          }\n        }\n      }\n    }\n    return 0;\n  }\n  get assetIdAtEnd() {\n    var _this$items, _this$items2;\n    const interstitialAtEnd = (_this$items = this.items) == null ? void 0 : (_this$items2 = _this$items[this.length - 1]) == null ? void 0 : _this$items2.event;\n    if (interstitialAtEnd) {\n      const assetList = interstitialAtEnd.assetList;\n      const assetAtEnd = assetList[assetList.length - 1];\n      if (assetAtEnd) {\n        return assetAtEnd.identifier;\n      }\n    }\n    return null;\n  }\n  parseInterstitialDateRanges(mediaSelection, enableAppendInPlace) {\n    const details = mediaSelection.main.details;\n    const {\n      dateRanges\n    } = details;\n    const previousInterstitialEvents = this.events;\n    const interstitialEvents = this.parseDateRanges(dateRanges, {\n      url: details.url\n    }, enableAppendInPlace);\n    const ids = Object.keys(dateRanges);\n    const removedInterstitials = previousInterstitialEvents ? previousInterstitialEvents.filter((event) => !ids.includes(event.identifier)) : [];\n    if (interstitialEvents.length) {\n      interstitialEvents.sort((a, b) => {\n        const aPre = a.cue.pre;\n        const aPost = a.cue.post;\n        const bPre = b.cue.pre;\n        const bPost = b.cue.post;\n        if (aPre && !bPre) {\n          return -1;\n        }\n        if (bPre && !aPre) {\n          return 1;\n        }\n        if (aPost && !bPost) {\n          return 1;\n        }\n        if (bPost && !aPost) {\n          return -1;\n        }\n        if (!aPre && !bPre && !aPost && !bPost) {\n          const startA = a.startTime;\n          const startB = b.startTime;\n          if (startA !== startB) {\n            return startA - startB;\n          }\n        }\n        return a.dateRange.tagOrder - b.dateRange.tagOrder;\n      });\n    }\n    this.events = interstitialEvents;\n    removedInterstitials.forEach((interstitial) => {\n      this.removeEvent(interstitial);\n    });\n    this.updateSchedule(mediaSelection, removedInterstitials);\n  }\n  updateSchedule(mediaSelection, removedInterstitials = []) {\n    const events2 = this.events || [];\n    if (events2.length || removedInterstitials.length || this.length < 2) {\n      const currentItems = this.items;\n      const updatedItems = this.parseSchedule(events2, mediaSelection);\n      const updated = removedInterstitials.length || (currentItems == null ? void 0 : currentItems.length) !== updatedItems.length || updatedItems.some((item, i) => {\n        return Math.abs(item.playout.start - currentItems[i].playout.start) > 5e-3 || Math.abs(item.playout.end - currentItems[i].playout.end) > 5e-3;\n      });\n      if (updated) {\n        this.items = updatedItems;\n        this.onScheduleUpdate(removedInterstitials, currentItems);\n      }\n    }\n  }\n  parseDateRanges(dateRanges, baseData, enableAppendInPlace) {\n    const interstitialEvents = [];\n    const ids = Object.keys(dateRanges);\n    for (let i = 0; i < ids.length; i++) {\n      const id = ids[i];\n      const dateRange = dateRanges[id];\n      if (dateRange.isInterstitial) {\n        let interstitial = this.eventMap[id];\n        if (interstitial) {\n          interstitial.setDateRange(dateRange);\n        } else {\n          interstitial = new InterstitialEvent(dateRange, baseData);\n          this.eventMap[id] = interstitial;\n          if (enableAppendInPlace === false) {\n            interstitial.appendInPlace = enableAppendInPlace;\n          }\n        }\n        interstitialEvents.push(interstitial);\n      }\n    }\n    return interstitialEvents;\n  }\n  parseSchedule(interstitialEvents, mediaSelection) {\n    const schedule = [];\n    const details = mediaSelection.main.details;\n    const primaryDuration = details.live ? Infinity : details.edge;\n    let playoutDuration = 0;\n    interstitialEvents = interstitialEvents.filter((event) => !event.error && !(event.cue.once && event.hasPlayed));\n    if (interstitialEvents.length) {\n      this.resolveOffsets(interstitialEvents, mediaSelection);\n      let primaryPosition = 0;\n      let integratedTime = 0;\n      interstitialEvents.forEach((interstitial, i) => {\n        const preroll = interstitial.cue.pre;\n        const postroll = interstitial.cue.post;\n        const previousEvent = interstitialEvents[i - 1] || null;\n        const appendInPlace = interstitial.appendInPlace;\n        const eventStart = postroll ? primaryDuration : interstitial.startOffset;\n        const interstitialDuration = interstitial.duration;\n        const timelineDuration = interstitial.timelineOccupancy === TimelineOccupancy.Range ? interstitialDuration : 0;\n        const resumptionOffset = interstitial.resumptionOffset;\n        const inSameStartTimeSequence = (previousEvent == null ? void 0 : previousEvent.startTime) === eventStart;\n        const start = eventStart + interstitial.cumulativeDuration;\n        let end = appendInPlace ? start + interstitialDuration : eventStart + resumptionOffset;\n        if (preroll || !postroll && eventStart <= 0) {\n          const integratedStart = integratedTime;\n          integratedTime += timelineDuration;\n          interstitial.timelineStart = start;\n          const playoutStart = playoutDuration;\n          playoutDuration += interstitialDuration;\n          schedule.push({\n            event: interstitial,\n            start,\n            end,\n            playout: {\n              start: playoutStart,\n              end: playoutDuration\n            },\n            integrated: {\n              start: integratedStart,\n              end: integratedTime\n            }\n          });\n        } else if (eventStart <= primaryDuration) {\n          if (!inSameStartTimeSequence) {\n            const segmentDuration = eventStart - primaryPosition;\n            if (segmentDuration > ABUTTING_THRESHOLD_SECONDS) {\n              const timelineStart = primaryPosition;\n              const _integratedStart = integratedTime;\n              integratedTime += segmentDuration;\n              const _playoutStart = playoutDuration;\n              playoutDuration += segmentDuration;\n              const primarySegment = {\n                previousEvent: interstitialEvents[i - 1] || null,\n                nextEvent: interstitial,\n                start: timelineStart,\n                end: timelineStart + segmentDuration,\n                playout: {\n                  start: _playoutStart,\n                  end: playoutDuration\n                },\n                integrated: {\n                  start: _integratedStart,\n                  end: integratedTime\n                }\n              };\n              schedule.push(primarySegment);\n            } else if (segmentDuration > 0 && previousEvent) {\n              previousEvent.cumulativeDuration += segmentDuration;\n              schedule[schedule.length - 1].end = eventStart;\n            }\n          }\n          if (postroll) {\n            end = start;\n          }\n          interstitial.timelineStart = start;\n          const integratedStart = integratedTime;\n          integratedTime += timelineDuration;\n          const playoutStart = playoutDuration;\n          playoutDuration += interstitialDuration;\n          schedule.push({\n            event: interstitial,\n            start,\n            end,\n            playout: {\n              start: playoutStart,\n              end: playoutDuration\n            },\n            integrated: {\n              start: integratedStart,\n              end: integratedTime\n            }\n          });\n        } else {\n          return;\n        }\n        const resumeTime = interstitial.resumeTime;\n        if (postroll || resumeTime > primaryDuration) {\n          primaryPosition = primaryDuration;\n        } else {\n          primaryPosition = resumeTime;\n        }\n      });\n      if (primaryPosition < primaryDuration) {\n        var _schedule;\n        const timelineStart = primaryPosition;\n        const integratedStart = integratedTime;\n        const segmentDuration = primaryDuration - primaryPosition;\n        integratedTime += segmentDuration;\n        const playoutStart = playoutDuration;\n        playoutDuration += segmentDuration;\n        schedule.push({\n          previousEvent: ((_schedule = schedule[schedule.length - 1]) == null ? void 0 : _schedule.event) || null,\n          nextEvent: null,\n          start: primaryPosition,\n          end: timelineStart + segmentDuration,\n          playout: {\n            start: playoutStart,\n            end: playoutDuration\n          },\n          integrated: {\n            start: integratedStart,\n            end: integratedTime\n          }\n        });\n      }\n      this.setDurations(primaryDuration, playoutDuration, integratedTime);\n    } else {\n      const start = 0;\n      schedule.push({\n        previousEvent: null,\n        nextEvent: null,\n        start,\n        end: primaryDuration,\n        playout: {\n          start,\n          end: primaryDuration\n        },\n        integrated: {\n          start,\n          end: primaryDuration\n        }\n      });\n      this.setDurations(primaryDuration, primaryDuration, primaryDuration);\n    }\n    return schedule;\n  }\n  setDurations(primary, playout, integrated) {\n    this.durations = {\n      primary,\n      playout,\n      integrated\n    };\n  }\n  resolveOffsets(interstitialEvents, mediaSelection) {\n    const details = mediaSelection.main.details;\n    const primaryDuration = details.live ? Infinity : details.edge;\n    let cumulativeDuration = 0;\n    let lastScheduledStart = -1;\n    interstitialEvents.forEach((interstitial, i) => {\n      const preroll = interstitial.cue.pre;\n      const postroll = interstitial.cue.post;\n      const eventStart = preroll ? 0 : postroll ? primaryDuration : interstitial.startTime;\n      this.updateAssetDurations(interstitial);\n      const inSameStartTimeSequence = lastScheduledStart === eventStart;\n      if (inSameStartTimeSequence) {\n        interstitial.cumulativeDuration = cumulativeDuration;\n      } else {\n        cumulativeDuration = 0;\n        lastScheduledStart = eventStart;\n      }\n      if (!postroll && interstitial.snapOptions.in) {\n        interstitial.resumeAnchor = findFragmentByPTS(null, details.fragments, interstitial.startOffset + interstitial.resumptionOffset, 0, 0) || void 0;\n      }\n      if (interstitial.appendInPlace && !interstitial.appendInPlaceStarted) {\n        const alignedSegmentStart = this.primaryCanResumeInPlaceAt(interstitial, mediaSelection);\n        if (!alignedSegmentStart) {\n          interstitial.appendInPlace = false;\n        }\n      }\n      if (!interstitial.appendInPlace && i + 1 < interstitialEvents.length) {\n        const timeBetween = interstitialEvents[i + 1].startTime - interstitialEvents[i].resumeTime;\n        if (timeBetween < ABUTTING_THRESHOLD_SECONDS) {\n          interstitialEvents[i + 1].appendInPlace = false;\n          if (interstitialEvents[i + 1].appendInPlace) {\n            this.warn(`Could not change append strategy for abutting event ${interstitial}`);\n          }\n        }\n      }\n      const resumeOffset = isFiniteNumber(interstitial.resumeOffset) ? interstitial.resumeOffset : interstitial.duration;\n      cumulativeDuration += resumeOffset;\n    });\n  }\n  primaryCanResumeInPlaceAt(interstitial, mediaSelection) {\n    const resumeTime = interstitial.resumeTime;\n    const resumesInPlaceAt = interstitial.startTime + interstitial.resumptionOffset;\n    if (Math.abs(resumeTime - resumesInPlaceAt) > ALIGNED_END_THRESHOLD_SECONDS) {\n      this.log(`\"${interstitial.identifier}\" resumption ${resumeTime} not aligned with estimated timeline end ${resumesInPlaceAt}`);\n      return false;\n    }\n    if (!mediaSelection) {\n      this.log(`\"${interstitial.identifier}\" resumption ${resumeTime} can not be aligned with media (none selected)`);\n      return false;\n    }\n    const playlists = Object.keys(mediaSelection);\n    return !playlists.some((playlistType) => {\n      const details = mediaSelection[playlistType].details;\n      const playlistEnd = details.edge;\n      if (resumeTime >= playlistEnd) {\n        this.log(`\"${interstitial.identifier}\" resumption ${resumeTime} past ${playlistType} playlist end ${playlistEnd}`);\n        return false;\n      }\n      const startFragment = findFragmentByPTS(null, details.fragments, resumeTime);\n      if (!startFragment) {\n        this.log(`\"${interstitial.identifier}\" resumption ${resumeTime} does not align with any fragments in ${playlistType} playlist (${details.fragStart}-${details.fragmentEnd})`);\n        return true;\n      }\n      const allowance = playlistType === \"audio\" ? 0.175 : 0;\n      const alignedWithSegment = Math.abs(startFragment.start - resumeTime) < ALIGNED_END_THRESHOLD_SECONDS + allowance || Math.abs(startFragment.end - resumeTime) < ALIGNED_END_THRESHOLD_SECONDS + allowance;\n      if (!alignedWithSegment) {\n        this.log(`\"${interstitial.identifier}\" resumption ${resumeTime} not aligned with ${playlistType} fragment bounds (${startFragment.start}-${startFragment.end} sn: ${startFragment.sn} cc: ${startFragment.cc})`);\n        return true;\n      }\n      return false;\n    });\n  }\n  updateAssetDurations(interstitial) {\n    if (!interstitial.assetListLoaded) {\n      return;\n    }\n    const eventStart = interstitial.timelineStart;\n    let sumDuration = 0;\n    let hasUnknownDuration = false;\n    let hasErrors = false;\n    interstitial.assetList.forEach((asset, i) => {\n      const timelineStart = eventStart + sumDuration;\n      asset.startOffset = sumDuration;\n      asset.timelineStart = timelineStart;\n      hasUnknownDuration || (hasUnknownDuration = asset.duration === null);\n      hasErrors || (hasErrors = !!asset.error);\n      const duration = asset.error ? 0 : asset.duration || 0;\n      sumDuration += duration;\n    });\n    if (hasUnknownDuration && !hasErrors) {\n      interstitial.duration = Math.max(sumDuration, interstitial.duration);\n    } else {\n      interstitial.duration = sumDuration;\n    }\n  }\n  removeEvent(interstitial) {\n    interstitial.reset();\n    delete this.eventMap[interstitial.identifier];\n  }\n}\nfunction segmentToString(segment) {\n  return `[${segment.event ? '\"' + segment.event.identifier + '\"' : \"primary\"}: ${segment.start.toFixed(2)}-${segment.end.toFixed(2)}]`;\n}\nclass AssetListLoader {\n  constructor(hls) {\n    this.hls = void 0;\n    this.hls = hls;\n  }\n  destroy() {\n    this.hls = null;\n  }\n  loadAssetList(interstitial, hlsStartOffset) {\n    const assetListUrl = interstitial.assetListUrl;\n    let url;\n    try {\n      url = getInterstitialUrl(assetListUrl, this.hls.sessionId, interstitial.baseUrl);\n    } catch (error) {\n      const errorData = this.assignAssetListError(interstitial, ErrorDetails.ASSET_LIST_LOAD_ERROR, error, assetListUrl);\n      this.hls.trigger(Events.ERROR, errorData);\n      return;\n    }\n    if (hlsStartOffset && url.protocol !== \"data:\") {\n      url.searchParams.set(\"_HLS_start_offset\", \"\" + hlsStartOffset);\n    }\n    const config = this.hls.config;\n    const Loader = config.loader;\n    const loader = new Loader(config);\n    const context = {\n      responseType: \"json\",\n      url: url.href\n    };\n    const loadPolicy = config.interstitialAssetListLoadPolicy.default;\n    const loaderConfig = {\n      loadPolicy,\n      timeout: loadPolicy.maxLoadTimeMs,\n      maxRetry: 0,\n      retryDelay: 0,\n      maxRetryDelay: 0\n    };\n    const callbacks = {\n      onSuccess: (response, stats, context2, networkDetails) => {\n        const assetListResponse = response.data;\n        const assets = assetListResponse == null ? void 0 : assetListResponse.ASSETS;\n        if (!Array.isArray(assets)) {\n          const errorData = this.assignAssetListError(interstitial, ErrorDetails.ASSET_LIST_PARSING_ERROR, new Error(`Invalid interstitial asset list`), context2.url, stats, networkDetails);\n          this.hls.trigger(Events.ERROR, errorData);\n          return;\n        }\n        interstitial.assetListResponse = assetListResponse;\n        this.hls.trigger(Events.ASSET_LIST_LOADED, {\n          event: interstitial,\n          assetListResponse,\n          networkDetails\n        });\n      },\n      onError: (error, context2, networkDetails, stats) => {\n        const errorData = this.assignAssetListError(interstitial, ErrorDetails.ASSET_LIST_LOAD_ERROR, new Error(`Error loading X-ASSET-LIST: HTTP status ${error.code} ${error.text} (${context2.url})`), context2.url, stats, networkDetails);\n        this.hls.trigger(Events.ERROR, errorData);\n      },\n      onTimeout: (stats, context2, networkDetails) => {\n        const errorData = this.assignAssetListError(interstitial, ErrorDetails.ASSET_LIST_LOAD_TIMEOUT, new Error(`Timeout loading X-ASSET-LIST (${context2.url})`), context2.url, stats, networkDetails);\n        this.hls.trigger(Events.ERROR, errorData);\n      }\n    };\n    loader.load(context, loaderConfig, callbacks);\n    this.hls.trigger(Events.ASSET_LIST_LOADING, {\n      event: interstitial\n    });\n    return loader;\n  }\n  assignAssetListError(interstitial, details, error, url, stats, networkDetails) {\n    interstitial.error = error;\n    return {\n      type: ErrorTypes.NETWORK_ERROR,\n      details,\n      fatal: false,\n      interstitial,\n      url,\n      error,\n      networkDetails,\n      stats\n    };\n  }\n}\nfunction playWithCatch(media) {\n  media == null ? void 0 : media.play().catch(() => {\n  });\n}\nclass InterstitialsController extends Logger2 {\n  constructor(hls, HlsPlayerClass) {\n    super(\"interstitials\", hls.logger);\n    this.HlsPlayerClass = void 0;\n    this.hls = void 0;\n    this.assetListLoader = void 0;\n    this.mediaSelection = null;\n    this.altSelection = null;\n    this.media = null;\n    this.detachedData = null;\n    this.requiredTracks = null;\n    this.manager = null;\n    this.playerQueue = [];\n    this.bufferedPos = -1;\n    this.timelinePos = -1;\n    this.schedule = void 0;\n    this.playingItem = null;\n    this.bufferingItem = null;\n    this.waitingItem = null;\n    this.endedItem = null;\n    this.playingAsset = null;\n    this.endedAsset = null;\n    this.bufferingAsset = null;\n    this.shouldPlay = false;\n    this.onPlay = () => {\n      this.shouldPlay = true;\n    };\n    this.onPause = () => {\n      this.shouldPlay = false;\n    };\n    this.onSeeking = () => {\n      const currentTime = this.currentTime;\n      if (currentTime === void 0 || this.playbackDisabled) {\n        return;\n      }\n      const diff = currentTime - this.timelinePos;\n      const roundingError = Math.abs(diff) < 1 / 7056e5;\n      if (roundingError) {\n        return;\n      }\n      const backwardSeek = diff <= -0.01;\n      this.timelinePos = currentTime;\n      this.bufferedPos = currentTime;\n      const playingItem = this.playingItem;\n      if (!playingItem) {\n        this.checkBuffer();\n        return;\n      }\n      if (backwardSeek) {\n        const resetCount = this.schedule.resetErrorsInRange(currentTime, currentTime - diff);\n        if (resetCount) {\n          this.updateSchedule();\n        }\n      }\n      this.checkBuffer();\n      if (backwardSeek && currentTime < playingItem.start || currentTime >= playingItem.end) {\n        var _this$media;\n        const scheduleIndex = this.schedule.findItemIndexAtTime(this.timelinePos);\n        if (!this.isInterstitial(playingItem) && (_this$media = this.media) != null && _this$media.paused) {\n          this.shouldPlay = false;\n        }\n        if (!backwardSeek) {\n          const playingIndex = this.findItemIndex(playingItem);\n          if (scheduleIndex > playingIndex) {\n            const jumpIndex = this.schedule.findJumpRestrictedIndex(playingIndex + 1, scheduleIndex);\n            if (jumpIndex > playingIndex) {\n              this.setSchedulePosition(jumpIndex);\n              return;\n            }\n          }\n        }\n        this.setSchedulePosition(scheduleIndex);\n        return;\n      }\n      const playingAsset = this.playingAsset;\n      if (!playingAsset) {\n        if (this.playingLastItem && this.isInterstitial(playingItem)) {\n          const restartAsset = playingItem.event.assetList[0];\n          if (restartAsset) {\n            this.endedItem = this.playingItem;\n            this.playingItem = null;\n            this.setScheduleToAssetAtTime(currentTime, restartAsset);\n          }\n        }\n        return;\n      }\n      const start = playingAsset.timelineStart;\n      const duration = playingAsset.duration || 0;\n      if (backwardSeek && currentTime < start || currentTime >= start + duration) {\n        this.setScheduleToAssetAtTime(currentTime, playingAsset);\n      }\n    };\n    this.onTimeupdate = () => {\n      const currentTime = this.currentTime;\n      if (currentTime === void 0 || this.playbackDisabled) {\n        return;\n      }\n      if (currentTime > this.timelinePos) {\n        this.timelinePos = currentTime;\n        if (currentTime > this.bufferedPos) {\n          this.checkBuffer();\n        }\n      } else {\n        return;\n      }\n      const playingItem = this.playingItem;\n      if (!playingItem || this.playingLastItem) {\n        return;\n      }\n      if (currentTime >= playingItem.end) {\n        this.timelinePos = playingItem.end;\n        const playingIndex = this.findItemIndex(playingItem);\n        this.setSchedulePosition(playingIndex + 1);\n      }\n      const playingAsset = this.playingAsset;\n      if (!playingAsset) {\n        return;\n      }\n      const end = playingAsset.timelineStart + (playingAsset.duration || 0);\n      if (currentTime >= end) {\n        this.setScheduleToAssetAtTime(currentTime, playingAsset);\n      }\n    };\n    this.onScheduleUpdate = (removedInterstitials, previousItems) => {\n      const schedule = this.schedule;\n      const playingItem = this.playingItem;\n      const interstitialEvents = schedule.events || [];\n      const scheduleItems = schedule.items || [];\n      const durations = schedule.durations;\n      const removedIds = removedInterstitials.map((interstitial) => interstitial.identifier);\n      const interstitialsUpdated = !!(interstitialEvents.length || removedIds.length);\n      if (interstitialsUpdated || previousItems) {\n        this.log(`INTERSTITIALS_UPDATED (${interstitialEvents.length}): ${interstitialEvents}\nSchedule: ${scheduleItems.map((seg) => segmentToString(seg))} pos: ${this.timelinePos}`);\n      }\n      if (removedIds.length) {\n        this.log(`Removed events ${removedIds}`);\n      }\n      this.playerQueue.forEach((player) => {\n        if (player.interstitial.appendInPlace) {\n          const timelineStart = player.assetItem.timelineStart;\n          const diff = player.timelineOffset - timelineStart;\n          if (diff) {\n            try {\n              player.timelineOffset = timelineStart;\n            } catch (e) {\n              if (Math.abs(diff) > ALIGNED_END_THRESHOLD_SECONDS) {\n                this.warn(`${e} (\"${player.assetId}\" ${player.timelineOffset}->${timelineStart})`);\n              }\n            }\n          }\n        }\n      });\n      let trimInPlaceForPlayout = null;\n      if (playingItem) {\n        const updatedPlayingItem = this.updateItem(playingItem, this.timelinePos);\n        if (this.itemsMatch(playingItem, updatedPlayingItem)) {\n          this.playingItem = updatedPlayingItem;\n          this.waitingItem = this.endedItem = null;\n          trimInPlaceForPlayout = () => this.trimInPlace(updatedPlayingItem, playingItem);\n        }\n      } else {\n        this.waitingItem = this.updateItem(this.waitingItem);\n        this.endedItem = this.updateItem(this.endedItem);\n      }\n      const bufferingItem = this.bufferingItem;\n      if (bufferingItem) {\n        const updatedBufferingItem = this.updateItem(bufferingItem, this.bufferedPos);\n        if (this.itemsMatch(bufferingItem, updatedBufferingItem)) {\n          this.bufferingItem = updatedBufferingItem;\n          trimInPlaceForPlayout || (trimInPlaceForPlayout = () => this.trimInPlace(updatedBufferingItem, bufferingItem));\n        } else if (bufferingItem.event) {\n          this.bufferingItem = this.playingItem;\n          this.clearInterstitial(bufferingItem.event, null);\n        }\n      }\n      removedInterstitials.forEach((interstitial) => {\n        interstitial.assetList.forEach((asset) => {\n          this.clearAssetPlayer(asset.identifier, null);\n        });\n      });\n      if (interstitialsUpdated || previousItems) {\n        this.hls.trigger(Events.INTERSTITIALS_UPDATED, {\n          events: interstitialEvents.slice(0),\n          schedule: scheduleItems.slice(0),\n          durations,\n          removedIds\n        });\n        if (this.isInterstitial(playingItem) && removedIds.includes(playingItem.event.identifier)) {\n          this.warn(`Interstitial \"${playingItem.event.identifier}\" removed while playing`);\n          this.primaryFallback(playingItem.event);\n          return;\n        }\n        if (trimInPlaceForPlayout) {\n          trimInPlaceForPlayout();\n        }\n        this.checkBuffer();\n      }\n    };\n    this.hls = hls;\n    this.HlsPlayerClass = HlsPlayerClass;\n    this.assetListLoader = new AssetListLoader(hls);\n    this.schedule = new InterstitialsSchedule(this.onScheduleUpdate, hls.logger);\n    this.registerListeners();\n  }\n  registerListeners() {\n    const hls = this.hls;\n    hls.on(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.on(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n    hls.on(Events.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this);\n    hls.on(Events.AUDIO_TRACK_UPDATED, this.onAudioTrackUpdated, this);\n    hls.on(Events.SUBTITLE_TRACK_SWITCH, this.onSubtitleTrackSwitch, this);\n    hls.on(Events.SUBTITLE_TRACK_UPDATED, this.onSubtitleTrackUpdated, this);\n    hls.on(Events.EVENT_CUE_ENTER, this.onInterstitialCueEnter, this);\n    hls.on(Events.ASSET_LIST_LOADED, this.onAssetListLoaded, this);\n    hls.on(Events.BUFFER_APPENDED, this.onBufferAppended, this);\n    hls.on(Events.BUFFER_FLUSHED, this.onBufferFlushed, this);\n    hls.on(Events.BUFFERED_TO_END, this.onBufferedToEnd, this);\n    hls.on(Events.MEDIA_ENDED, this.onMediaEnded, this);\n    hls.on(Events.ERROR, this.onError, this);\n    hls.on(Events.DESTROYING, this.onDestroying, this);\n  }\n  unregisterListeners() {\n    const hls = this.hls;\n    if (!hls) {\n      return;\n    }\n    hls.off(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.off(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n    hls.off(Events.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this);\n    hls.off(Events.AUDIO_TRACK_UPDATED, this.onAudioTrackUpdated, this);\n    hls.off(Events.SUBTITLE_TRACK_SWITCH, this.onSubtitleTrackSwitch, this);\n    hls.off(Events.SUBTITLE_TRACK_UPDATED, this.onSubtitleTrackUpdated, this);\n    hls.off(Events.EVENT_CUE_ENTER, this.onInterstitialCueEnter, this);\n    hls.off(Events.ASSET_LIST_LOADED, this.onAssetListLoaded, this);\n    hls.off(Events.BUFFER_CODECS, this.onBufferCodecs, this);\n    hls.off(Events.BUFFER_APPENDED, this.onBufferAppended, this);\n    hls.off(Events.BUFFER_FLUSHED, this.onBufferFlushed, this);\n    hls.off(Events.BUFFERED_TO_END, this.onBufferedToEnd, this);\n    hls.off(Events.MEDIA_ENDED, this.onMediaEnded, this);\n    hls.off(Events.ERROR, this.onError, this);\n    hls.off(Events.DESTROYING, this.onDestroying, this);\n  }\n  startLoad() {\n    this.resumeBuffering();\n  }\n  stopLoad() {\n    this.pauseBuffering();\n  }\n  resumeBuffering() {\n    var _this$getBufferingPla;\n    (_this$getBufferingPla = this.getBufferingPlayer()) == null ? void 0 : _this$getBufferingPla.resumeBuffering();\n  }\n  pauseBuffering() {\n    var _this$getBufferingPla2;\n    (_this$getBufferingPla2 = this.getBufferingPlayer()) == null ? void 0 : _this$getBufferingPla2.pauseBuffering();\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.stopLoad();\n    if (this.assetListLoader) {\n      this.assetListLoader.destroy();\n    }\n    this.emptyPlayerQueue();\n    this.clearScheduleState();\n    if (this.schedule) {\n      this.schedule.destroy();\n    }\n    this.media = this.detachedData = this.mediaSelection = this.requiredTracks = this.altSelection = this.manager = null;\n    this.hls = this.HlsPlayerClass = this.schedule = this.log = null;\n    this.assetListLoader = null;\n    this.onPlay = this.onPause = this.onSeeking = this.onTimeupdate = null;\n    this.onScheduleUpdate = null;\n  }\n  onDestroying() {\n    const media = this.primaryMedia || this.media;\n    if (media) {\n      this.removeMediaListeners(media);\n    }\n  }\n  removeMediaListeners(media) {\n    removeEventListener(media, \"play\", this.onPlay);\n    removeEventListener(media, \"pause\", this.onPause);\n    removeEventListener(media, \"seeking\", this.onSeeking);\n    removeEventListener(media, \"timeupdate\", this.onTimeupdate);\n  }\n  onMediaAttaching(event, data) {\n    const media = this.media = data.media;\n    addEventListener(media, \"seeking\", this.onSeeking);\n    addEventListener(media, \"timeupdate\", this.onTimeupdate);\n    addEventListener(media, \"play\", this.onPlay);\n    addEventListener(media, \"pause\", this.onPause);\n  }\n  onMediaAttached(event, data) {\n    const playingItem = this.effectivePlayingItem;\n    const detachedMedia = this.detachedData;\n    this.detachedData = null;\n    if (playingItem === null) {\n      this.checkStart();\n    } else if (!detachedMedia) {\n      this.clearScheduleState();\n      const playingIndex = this.findItemIndex(playingItem);\n      this.setSchedulePosition(playingIndex);\n    }\n  }\n  clearScheduleState() {\n    this.playingItem = this.bufferingItem = this.waitingItem = this.endedItem = this.playingAsset = this.endedAsset = this.bufferingAsset = null;\n  }\n  onMediaDetaching(event, data) {\n    const transferringMedia = !!data.transferMedia;\n    const media = this.media;\n    this.media = null;\n    if (transferringMedia) {\n      return;\n    }\n    if (media) {\n      this.removeMediaListeners(media);\n    }\n    if (this.detachedData) {\n      const player = this.getBufferingPlayer();\n      if (player) {\n        this.playingAsset = this.endedAsset = this.bufferingAsset = this.bufferingItem = this.waitingItem = this.detachedData = null;\n        player.detachMedia();\n      }\n      this.shouldPlay = false;\n    }\n  }\n  get interstitialsManager() {\n    if (!this.manager) {\n      if (!this.hls) {\n        return null;\n      }\n      const c = this;\n      const effectiveBufferingItem = () => c.bufferingItem || c.waitingItem;\n      const getAssetPlayer = (asset) => asset ? c.getAssetPlayer(asset.identifier) : asset;\n      const getMappedTime = (item, timelineType, asset, controllerField, assetPlayerField) => {\n        if (item) {\n          let time = item[timelineType].start;\n          const interstitial = item.event;\n          if (interstitial) {\n            if (timelineType === \"playout\" || interstitial.timelineOccupancy !== TimelineOccupancy.Point) {\n              const assetPlayer = getAssetPlayer(asset);\n              if ((assetPlayer == null ? void 0 : assetPlayer.interstitial) === interstitial) {\n                time += assetPlayer.assetItem.startOffset + assetPlayer[assetPlayerField];\n              }\n            }\n          } else {\n            const value = controllerField === \"bufferedPos\" ? getBufferedEnd() : c[controllerField];\n            time += value - item.start;\n          }\n          return time;\n        }\n        return 0;\n      };\n      const findMappedTime = (primaryTime, timelineType) => {\n        if (primaryTime !== 0 && timelineType !== \"primary\" && c.schedule.length) {\n          var _c$schedule$items;\n          const index = c.schedule.findItemIndexAtTime(primaryTime);\n          const item = (_c$schedule$items = c.schedule.items) == null ? void 0 : _c$schedule$items[index];\n          if (item) {\n            const diff = item[timelineType].start - item.start;\n            return primaryTime + diff;\n          }\n        }\n        return primaryTime;\n      };\n      const getBufferedEnd = () => {\n        const value = c.bufferedPos;\n        if (value === Number.MAX_VALUE) {\n          return getMappedDuration(\"primary\");\n        }\n        return Math.max(value, 0);\n      };\n      const getMappedDuration = (timelineType) => {\n        var _c$primaryDetails;\n        if ((_c$primaryDetails = c.primaryDetails) != null && _c$primaryDetails.live) {\n          return c.primaryDetails.edge;\n        }\n        return c.schedule.durations[timelineType];\n      };\n      const seekTo = (time, timelineType) => {\n        var _item$event, _c$schedule$items2;\n        const item = c.effectivePlayingItem;\n        if (item != null && (_item$event = item.event) != null && _item$event.restrictions.skip) {\n          return;\n        }\n        c.log(`seek to ${time} \"${timelineType}\"`);\n        const playingItem = c.effectivePlayingItem;\n        const targetIndex = c.schedule.findItemIndexAtTime(time, timelineType);\n        const targetItem = (_c$schedule$items2 = c.schedule.items) == null ? void 0 : _c$schedule$items2[targetIndex];\n        const bufferingPlayer = c.getBufferingPlayer();\n        const bufferingInterstitial = bufferingPlayer == null ? void 0 : bufferingPlayer.interstitial;\n        const appendInPlace = bufferingInterstitial == null ? void 0 : bufferingInterstitial.appendInPlace;\n        const seekInItem = playingItem && c.itemsMatch(playingItem, targetItem);\n        if (playingItem && (appendInPlace || seekInItem)) {\n          const assetPlayer = getAssetPlayer(c.playingAsset);\n          const media = (assetPlayer == null ? void 0 : assetPlayer.media) || c.primaryMedia;\n          if (media) {\n            const currentTime = timelineType === \"primary\" ? media.currentTime : getMappedTime(playingItem, timelineType, c.playingAsset, \"timelinePos\", \"currentTime\");\n            const diff = time - currentTime;\n            const seekToTime = (appendInPlace ? currentTime : media.currentTime) + diff;\n            if (seekToTime >= 0 && (!assetPlayer || appendInPlace || seekToTime <= assetPlayer.duration)) {\n              media.currentTime = seekToTime;\n              return;\n            }\n          }\n        }\n        if (targetItem) {\n          let seekToTime = time;\n          if (timelineType !== \"primary\") {\n            const primarySegmentStart = targetItem[timelineType].start;\n            const diff = time - primarySegmentStart;\n            seekToTime = targetItem.start + diff;\n          }\n          const targetIsPrimary = !c.isInterstitial(targetItem);\n          if ((!c.isInterstitial(playingItem) || playingItem.event.appendInPlace) && (targetIsPrimary || targetItem.event.appendInPlace)) {\n            const media = c.media || (appendInPlace ? bufferingPlayer == null ? void 0 : bufferingPlayer.media : null);\n            if (media) {\n              media.currentTime = seekToTime;\n            }\n          } else if (playingItem) {\n            const playingIndex = c.findItemIndex(playingItem);\n            if (targetIndex > playingIndex) {\n              const jumpIndex = c.schedule.findJumpRestrictedIndex(playingIndex + 1, targetIndex);\n              if (jumpIndex > playingIndex) {\n                c.setSchedulePosition(jumpIndex);\n                return;\n              }\n            }\n            let assetIndex = 0;\n            if (targetIsPrimary) {\n              c.timelinePos = seekToTime;\n              c.checkBuffer();\n            } else {\n              var _targetItem$event;\n              const assetList = targetItem == null ? void 0 : (_targetItem$event = targetItem.event) == null ? void 0 : _targetItem$event.assetList;\n              if (assetList) {\n                const eventTime = time - (targetItem[timelineType] || targetItem).start;\n                for (let i = assetList.length; i--; ) {\n                  const asset = assetList[i];\n                  if (asset.duration && eventTime >= asset.startOffset && eventTime < asset.startOffset + asset.duration) {\n                    assetIndex = i;\n                    break;\n                  }\n                }\n              }\n            }\n            c.setSchedulePosition(targetIndex, assetIndex);\n          }\n        }\n      };\n      const getActiveInterstitial = () => {\n        const playingItem = c.effectivePlayingItem;\n        if (c.isInterstitial(playingItem)) {\n          return playingItem;\n        }\n        const bufferingItem = effectiveBufferingItem();\n        if (c.isInterstitial(bufferingItem)) {\n          return bufferingItem;\n        }\n        return null;\n      };\n      const interstitialPlayer = {\n        get currentTime() {\n          const interstitialItem = getActiveInterstitial();\n          const playingItem = c.effectivePlayingItem;\n          if (playingItem && playingItem === interstitialItem) {\n            return getMappedTime(playingItem, \"playout\", c.effectivePlayingAsset, \"timelinePos\", \"currentTime\") - playingItem.playout.start;\n          }\n          return 0;\n        },\n        set currentTime(time) {\n          const interstitialItem = getActiveInterstitial();\n          const playingItem = c.effectivePlayingItem;\n          if (playingItem && playingItem === interstitialItem) {\n            seekTo(time + playingItem.playout.start, \"playout\");\n          }\n        },\n        get duration() {\n          const interstitialItem = getActiveInterstitial();\n          if (interstitialItem) {\n            return interstitialItem.playout.end - interstitialItem.playout.start;\n          }\n          return 0;\n        },\n        get assetPlayers() {\n          var _getActiveInterstitia;\n          const assetList = (_getActiveInterstitia = getActiveInterstitial()) == null ? void 0 : _getActiveInterstitia.event.assetList;\n          if (assetList) {\n            return assetList.map((asset) => c.getAssetPlayer(asset.identifier));\n          }\n          return [];\n        },\n        get playingIndex() {\n          var _getActiveInterstitia2;\n          const interstitial = (_getActiveInterstitia2 = getActiveInterstitial()) == null ? void 0 : _getActiveInterstitia2.event;\n          if (interstitial && c.effectivePlayingAsset) {\n            return interstitial.findAssetIndex(c.effectivePlayingAsset);\n          }\n          return -1;\n        },\n        get scheduleItem() {\n          return getActiveInterstitial();\n        }\n      };\n      this.manager = {\n        get events() {\n          var _c$schedule, _c$schedule$events;\n          return ((_c$schedule = c.schedule) == null ? void 0 : (_c$schedule$events = _c$schedule.events) == null ? void 0 : _c$schedule$events.slice(0)) || [];\n        },\n        get schedule() {\n          var _c$schedule2, _c$schedule2$items;\n          return ((_c$schedule2 = c.schedule) == null ? void 0 : (_c$schedule2$items = _c$schedule2.items) == null ? void 0 : _c$schedule2$items.slice(0)) || [];\n        },\n        get interstitialPlayer() {\n          if (getActiveInterstitial()) {\n            return interstitialPlayer;\n          }\n          return null;\n        },\n        get playerQueue() {\n          return c.playerQueue.slice(0);\n        },\n        get bufferingAsset() {\n          return c.bufferingAsset;\n        },\n        get bufferingItem() {\n          return effectiveBufferingItem();\n        },\n        get bufferingIndex() {\n          const item = effectiveBufferingItem();\n          return c.findItemIndex(item);\n        },\n        get playingAsset() {\n          return c.effectivePlayingAsset;\n        },\n        get playingItem() {\n          return c.effectivePlayingItem;\n        },\n        get playingIndex() {\n          const item = c.effectivePlayingItem;\n          return c.findItemIndex(item);\n        },\n        primary: {\n          get bufferedEnd() {\n            return getBufferedEnd();\n          },\n          get currentTime() {\n            const timelinePos = c.timelinePos;\n            return timelinePos > 0 ? timelinePos : 0;\n          },\n          set currentTime(time) {\n            seekTo(time, \"primary\");\n          },\n          get duration() {\n            return getMappedDuration(\"primary\");\n          },\n          get seekableStart() {\n            var _c$primaryDetails2;\n            return ((_c$primaryDetails2 = c.primaryDetails) == null ? void 0 : _c$primaryDetails2.fragmentStart) || 0;\n          }\n        },\n        integrated: {\n          get bufferedEnd() {\n            return getMappedTime(effectiveBufferingItem(), \"integrated\", c.bufferingAsset, \"bufferedPos\", \"bufferedEnd\");\n          },\n          get currentTime() {\n            return getMappedTime(c.effectivePlayingItem, \"integrated\", c.effectivePlayingAsset, \"timelinePos\", \"currentTime\");\n          },\n          set currentTime(time) {\n            seekTo(time, \"integrated\");\n          },\n          get duration() {\n            return getMappedDuration(\"integrated\");\n          },\n          get seekableStart() {\n            var _c$primaryDetails3;\n            return findMappedTime(((_c$primaryDetails3 = c.primaryDetails) == null ? void 0 : _c$primaryDetails3.fragmentStart) || 0, \"integrated\");\n          }\n        },\n        skip: () => {\n          const item = c.effectivePlayingItem;\n          const event = item == null ? void 0 : item.event;\n          if (event && !event.restrictions.skip) {\n            const index = c.findItemIndex(item);\n            if (event.appendInPlace) {\n              const time = item.playout.start + item.event.duration;\n              seekTo(time + 1e-3, \"playout\");\n            } else {\n              c.advanceAfterAssetEnded(event, index, Infinity);\n            }\n          }\n        }\n      };\n    }\n    return this.manager;\n  }\n  // Schedule getters\n  get effectivePlayingItem() {\n    return this.waitingItem || this.playingItem || this.endedItem;\n  }\n  get effectivePlayingAsset() {\n    return this.playingAsset || this.endedAsset;\n  }\n  get playingLastItem() {\n    var _this$schedule;\n    const playingItem = this.playingItem;\n    const items = (_this$schedule = this.schedule) == null ? void 0 : _this$schedule.items;\n    if (!this.playbackStarted || !playingItem || !items) {\n      return false;\n    }\n    return this.findItemIndex(playingItem) === items.length - 1;\n  }\n  get playbackStarted() {\n    return this.effectivePlayingItem !== null;\n  }\n  // Media getters and event callbacks\n  get currentTime() {\n    var _this$bufferingItem, _this$bufferingItem$e, _media;\n    if (this.mediaSelection === null) {\n      return void 0;\n    }\n    const queuedForPlayback = this.waitingItem || this.playingItem;\n    if (this.isInterstitial(queuedForPlayback) && !queuedForPlayback.event.appendInPlace) {\n      return void 0;\n    }\n    let media = this.media;\n    if (!media && (_this$bufferingItem = this.bufferingItem) != null && (_this$bufferingItem$e = _this$bufferingItem.event) != null && _this$bufferingItem$e.appendInPlace) {\n      media = this.primaryMedia;\n    }\n    const currentTime = (_media = media) == null ? void 0 : _media.currentTime;\n    if (currentTime === void 0 || !isFiniteNumber(currentTime)) {\n      return void 0;\n    }\n    return currentTime;\n  }\n  get primaryMedia() {\n    var _this$detachedData;\n    return this.media || ((_this$detachedData = this.detachedData) == null ? void 0 : _this$detachedData.media) || null;\n  }\n  isInterstitial(item) {\n    return !!(item != null && item.event);\n  }\n  retreiveMediaSource(assetId, toSegment) {\n    const player = this.getAssetPlayer(assetId);\n    if (player) {\n      this.transferMediaFromPlayer(player, toSegment);\n    }\n  }\n  transferMediaFromPlayer(player, toSegment) {\n    const appendInPlace = player.interstitial.appendInPlace;\n    const playerMedia = player.media;\n    if (appendInPlace && playerMedia === this.primaryMedia) {\n      this.bufferingAsset = null;\n      if (!toSegment || this.isInterstitial(toSegment) && !toSegment.event.appendInPlace) {\n        if (toSegment && playerMedia) {\n          this.detachedData = {\n            media: playerMedia\n          };\n          return;\n        }\n      }\n      const attachMediaSourceData = player.transferMedia();\n      this.log(`transfer MediaSource from ${player} ${stringify(attachMediaSourceData)}`);\n      this.detachedData = attachMediaSourceData;\n    } else if (toSegment && playerMedia) {\n      this.shouldPlay || (this.shouldPlay = !playerMedia.paused);\n    }\n  }\n  transferMediaTo(player, media) {\n    var _this$detachedData2, _attachMediaSourceDat;\n    if (player.media === media) {\n      return;\n    }\n    let attachMediaSourceData = null;\n    const primaryPlayer = this.hls;\n    const isAssetPlayer = player !== primaryPlayer;\n    const appendInPlace = isAssetPlayer && player.interstitial.appendInPlace;\n    const detachedMediaSource = (_this$detachedData2 = this.detachedData) == null ? void 0 : _this$detachedData2.mediaSource;\n    let logFromSource;\n    if (primaryPlayer.media) {\n      if (appendInPlace) {\n        attachMediaSourceData = primaryPlayer.transferMedia();\n        this.detachedData = attachMediaSourceData;\n      }\n      logFromSource = `Primary`;\n    } else if (detachedMediaSource) {\n      const bufferingPlayer = this.getBufferingPlayer();\n      if (bufferingPlayer) {\n        attachMediaSourceData = bufferingPlayer.transferMedia();\n        logFromSource = `${bufferingPlayer}`;\n      } else {\n        logFromSource = `detached MediaSource`;\n      }\n    } else {\n      logFromSource = `detached media`;\n    }\n    if (!attachMediaSourceData) {\n      if (detachedMediaSource) {\n        attachMediaSourceData = this.detachedData;\n        this.log(`using detachedData: MediaSource ${stringify(attachMediaSourceData)}`);\n      } else if (!this.detachedData || primaryPlayer.media === media) {\n        const playerQueue = this.playerQueue;\n        if (playerQueue.length > 1) {\n          playerQueue.forEach((queuedPlayer) => {\n            if (isAssetPlayer && queuedPlayer.interstitial.appendInPlace !== appendInPlace) {\n              const interstitial = queuedPlayer.interstitial;\n              this.clearInterstitial(queuedPlayer.interstitial, null);\n              interstitial.appendInPlace = false;\n              if (interstitial.appendInPlace) {\n                this.warn(`Could not change append strategy for queued assets ${interstitial}`);\n              }\n            }\n          });\n        }\n        this.hls.detachMedia();\n        this.detachedData = {\n          media\n        };\n      }\n    }\n    const transferring = attachMediaSourceData && \"mediaSource\" in attachMediaSourceData && ((_attachMediaSourceDat = attachMediaSourceData.mediaSource) == null ? void 0 : _attachMediaSourceDat.readyState) !== \"closed\";\n    const dataToAttach = transferring && attachMediaSourceData ? attachMediaSourceData : media;\n    this.log(`${transferring ? \"transfering MediaSource\" : \"attaching media\"} to ${isAssetPlayer ? player : \"Primary\"} from ${logFromSource}`);\n    if (dataToAttach === attachMediaSourceData) {\n      const isAssetAtEndOfSchedule = isAssetPlayer && player.assetId === this.schedule.assetIdAtEnd;\n      dataToAttach.overrides = {\n        duration: this.schedule.duration,\n        endOfStream: !isAssetPlayer || isAssetAtEndOfSchedule,\n        cueRemoval: !isAssetPlayer\n      };\n    }\n    player.attachMedia(dataToAttach);\n  }\n  onInterstitialCueEnter() {\n    this.onTimeupdate();\n  }\n  // Scheduling methods\n  checkStart() {\n    const schedule = this.schedule;\n    const interstitialEvents = schedule.events;\n    if (!interstitialEvents || this.playbackDisabled || !this.media) {\n      return;\n    }\n    if (this.bufferedPos === -1) {\n      this.bufferedPos = 0;\n    }\n    const timelinePos = this.timelinePos;\n    const effectivePlayingItem = this.effectivePlayingItem;\n    if (timelinePos === -1) {\n      const startPosition = this.hls.startPosition;\n      this.timelinePos = startPosition;\n      if (interstitialEvents.length && interstitialEvents[0].cue.pre) {\n        const index = schedule.findEventIndex(interstitialEvents[0].identifier);\n        this.setSchedulePosition(index);\n      } else if (startPosition >= 0 || !this.primaryLive) {\n        const start = this.timelinePos = startPosition > 0 ? startPosition : 0;\n        const index = schedule.findItemIndexAtTime(start);\n        this.setSchedulePosition(index);\n      }\n    } else if (effectivePlayingItem && !this.playingItem) {\n      const index = schedule.findItemIndex(effectivePlayingItem);\n      this.setSchedulePosition(index);\n    }\n  }\n  advanceAfterAssetEnded(interstitial, index, assetListIndex) {\n    const nextAssetIndex = getNextAssetIndex(interstitial, assetListIndex);\n    if (!interstitial.isAssetPastPlayoutLimit(nextAssetIndex)) {\n      this.setSchedulePosition(index, nextAssetIndex);\n    } else {\n      const scheduleItems = this.schedule.items;\n      if (scheduleItems) {\n        const nextIndex = index + 1;\n        const scheduleLength = scheduleItems.length;\n        if (nextIndex >= scheduleLength) {\n          this.setSchedulePosition(-1);\n          return;\n        }\n        const resumptionTime = interstitial.resumeTime;\n        if (this.timelinePos < resumptionTime) {\n          this.timelinePos = resumptionTime;\n          this.checkBuffer();\n        }\n        this.setSchedulePosition(nextIndex);\n      }\n    }\n  }\n  setScheduleToAssetAtTime(time, playingAsset) {\n    const schedule = this.schedule;\n    const parentIdentifier = playingAsset.parentIdentifier;\n    const interstitial = schedule.getEvent(parentIdentifier);\n    if (interstitial) {\n      const itemIndex = schedule.findEventIndex(parentIdentifier);\n      const assetListIndex = schedule.findAssetIndex(interstitial, time);\n      this.advanceAfterAssetEnded(interstitial, itemIndex, assetListIndex - 1);\n    }\n  }\n  setSchedulePosition(index, assetListIndex) {\n    const scheduleItems = this.schedule.items;\n    if (!scheduleItems || this.playbackDisabled) {\n      return;\n    }\n    this.log(`setSchedulePosition ${index}, ${assetListIndex}`);\n    const scheduledItem = index >= 0 ? scheduleItems[index] : null;\n    const currentItem = this.playingItem;\n    const playingLastItem = this.playingLastItem;\n    if (this.isInterstitial(currentItem)) {\n      var _interstitial$assetLi;\n      const interstitial = currentItem.event;\n      const playingAsset = this.playingAsset;\n      const assetId = playingAsset == null ? void 0 : playingAsset.identifier;\n      const player = assetId ? this.getAssetPlayer(assetId) : null;\n      if (player && assetId && (!this.eventItemsMatch(currentItem, scheduledItem) || assetListIndex !== void 0 && assetId !== ((_interstitial$assetLi = interstitial.assetList) == null ? void 0 : _interstitial$assetLi[assetListIndex].identifier))) {\n        var _this$detachedData3;\n        const playingAssetListIndex = interstitial.findAssetIndex(playingAsset);\n        this.log(`INTERSTITIAL_ASSET_ENDED ${playingAssetListIndex + 1}/${interstitial.assetList.length} ${eventAssetToString(playingAsset)}`);\n        this.endedAsset = playingAsset;\n        this.playingAsset = null;\n        this.hls.trigger(Events.INTERSTITIAL_ASSET_ENDED, {\n          asset: playingAsset,\n          assetListIndex: playingAssetListIndex,\n          event: interstitial,\n          schedule: scheduleItems.slice(0),\n          scheduleIndex: index,\n          player\n        });\n        if (currentItem !== this.playingItem) {\n          if (this.itemsMatch(currentItem, this.playingItem) && !this.playingAsset) {\n            this.advanceAfterAssetEnded(interstitial, this.findItemIndex(this.playingItem), playingAssetListIndex);\n          }\n          return;\n        }\n        this.retreiveMediaSource(assetId, scheduledItem);\n        if (player.media && !((_this$detachedData3 = this.detachedData) != null && _this$detachedData3.mediaSource)) {\n          player.detachMedia();\n        }\n      }\n      if (!this.eventItemsMatch(currentItem, scheduledItem)) {\n        this.endedItem = currentItem;\n        this.playingItem = null;\n        this.log(`INTERSTITIAL_ENDED ${interstitial} ${segmentToString(currentItem)}`);\n        interstitial.hasPlayed = true;\n        this.hls.trigger(Events.INTERSTITIAL_ENDED, {\n          event: interstitial,\n          schedule: scheduleItems.slice(0),\n          scheduleIndex: index\n        });\n        if (interstitial.cue.once) {\n          this.updateSchedule();\n          const items = this.schedule.items;\n          if (scheduledItem && items) {\n            const updatedIndex = this.findItemIndex(scheduledItem);\n            this.advanceSchedule(updatedIndex, items, assetListIndex, currentItem, playingLastItem);\n          }\n          return;\n        }\n      }\n    }\n    this.advanceSchedule(index, scheduleItems, assetListIndex, currentItem, playingLastItem);\n  }\n  advanceSchedule(index, scheduleItems, assetListIndex, currentItem, playedLastItem) {\n    const scheduledItem = index >= 0 ? scheduleItems[index] : null;\n    const media = this.primaryMedia;\n    const playerQueue = this.playerQueue;\n    if (playerQueue.length) {\n      playerQueue.forEach((player) => {\n        const interstitial = player.interstitial;\n        const queuedIndex = this.schedule.findEventIndex(interstitial.identifier);\n        if (queuedIndex < index || queuedIndex > index + 1) {\n          this.clearInterstitial(interstitial, scheduledItem);\n        }\n      });\n    }\n    if (this.isInterstitial(scheduledItem)) {\n      this.timelinePos = Math.min(Math.max(this.timelinePos, scheduledItem.start), scheduledItem.end);\n      const interstitial = scheduledItem.event;\n      if (assetListIndex === void 0) {\n        assetListIndex = this.schedule.findAssetIndex(interstitial, this.timelinePos);\n        const assetIndexCandidate = getNextAssetIndex(interstitial, assetListIndex - 1);\n        if (interstitial.isAssetPastPlayoutLimit(assetIndexCandidate)) {\n          this.advanceAfterAssetEnded(interstitial, index, assetListIndex);\n          return;\n        }\n        assetListIndex = assetIndexCandidate;\n      }\n      const waitingItem = this.waitingItem;\n      if (!this.assetsBuffered(scheduledItem, media)) {\n        this.setBufferingItem(scheduledItem);\n      }\n      let player = this.preloadAssets(interstitial, assetListIndex);\n      if (!this.eventItemsMatch(scheduledItem, waitingItem || currentItem)) {\n        this.waitingItem = scheduledItem;\n        this.log(`INTERSTITIAL_STARTED ${segmentToString(scheduledItem)} ${interstitial.appendInPlace ? \"append in place\" : \"\"}`);\n        this.hls.trigger(Events.INTERSTITIAL_STARTED, {\n          event: interstitial,\n          schedule: scheduleItems.slice(0),\n          scheduleIndex: index\n        });\n      }\n      if (!interstitial.assetListLoaded) {\n        this.log(`Waiting for ASSET-LIST to complete loading ${interstitial}`);\n        return;\n      }\n      if (interstitial.assetListLoader) {\n        interstitial.assetListLoader.destroy();\n        interstitial.assetListLoader = void 0;\n      }\n      if (!media) {\n        this.log(`Waiting for attachMedia to start Interstitial ${interstitial}`);\n        return;\n      }\n      this.waitingItem = this.endedItem = null;\n      this.playingItem = scheduledItem;\n      const assetItem = interstitial.assetList[assetListIndex];\n      if (!assetItem) {\n        const nextItem = scheduleItems[index + 1];\n        const _media2 = this.media;\n        if (nextItem && _media2 && !this.isInterstitial(nextItem) && _media2.currentTime < nextItem.start) {\n          _media2.currentTime = this.timelinePos = nextItem.start;\n        }\n        this.advanceAfterAssetEnded(interstitial, index, assetListIndex || 0);\n        return;\n      }\n      if (!player) {\n        player = this.getAssetPlayer(assetItem.identifier);\n      }\n      if (player === null || player.destroyed) {\n        const assetListLength = interstitial.assetList.length;\n        this.warn(`asset ${assetListIndex + 1}/${assetListLength} player destroyed ${interstitial}`);\n        player = this.createAssetPlayer(interstitial, assetItem, assetListIndex);\n      }\n      if (!this.eventItemsMatch(scheduledItem, this.bufferingItem)) {\n        if (interstitial.appendInPlace && this.isAssetBuffered(assetItem)) {\n          return;\n        }\n      }\n      this.startAssetPlayer(player, assetListIndex, scheduleItems, index, media);\n      if (this.shouldPlay) {\n        playWithCatch(player.media);\n      }\n    } else if (scheduledItem !== null) {\n      this.resumePrimary(scheduledItem, index, currentItem);\n      if (this.shouldPlay) {\n        playWithCatch(this.hls.media);\n      }\n    } else if (playedLastItem && this.isInterstitial(currentItem)) {\n      this.endedItem = null;\n      this.playingItem = currentItem;\n      if (!currentItem.event.appendInPlace) {\n        this.attachPrimary(this.schedule.durations.primary, null);\n      }\n    }\n  }\n  get playbackDisabled() {\n    return this.hls.config.enableInterstitialPlayback === false;\n  }\n  get primaryDetails() {\n    var _this$mediaSelection, _this$mediaSelection$;\n    return (_this$mediaSelection = this.mediaSelection) == null ? void 0 : (_this$mediaSelection$ = _this$mediaSelection.main) == null ? void 0 : _this$mediaSelection$.details;\n  }\n  get primaryLive() {\n    var _this$primaryDetails;\n    return !!((_this$primaryDetails = this.primaryDetails) != null && _this$primaryDetails.live);\n  }\n  resumePrimary(scheduledItem, index, fromItem) {\n    var _this$detachedData4;\n    this.playingItem = scheduledItem;\n    this.playingAsset = this.endedAsset = null;\n    this.waitingItem = this.endedItem = null;\n    this.bufferedToItem(scheduledItem);\n    this.log(`resuming ${segmentToString(scheduledItem)}`);\n    if (!((_this$detachedData4 = this.detachedData) != null && _this$detachedData4.mediaSource)) {\n      let timelinePos = this.timelinePos;\n      if (timelinePos < scheduledItem.start || timelinePos >= scheduledItem.end) {\n        timelinePos = this.getPrimaryResumption(scheduledItem, index);\n        this.timelinePos = timelinePos;\n      }\n      this.attachPrimary(timelinePos, scheduledItem);\n    }\n    if (!fromItem) {\n      return;\n    }\n    const scheduleItems = this.schedule.items;\n    if (!scheduleItems) {\n      return;\n    }\n    this.log(`INTERSTITIALS_PRIMARY_RESUMED ${segmentToString(scheduledItem)}`);\n    this.hls.trigger(Events.INTERSTITIALS_PRIMARY_RESUMED, {\n      schedule: scheduleItems.slice(0),\n      scheduleIndex: index\n    });\n    this.checkBuffer();\n  }\n  getPrimaryResumption(scheduledItem, index) {\n    const itemStart = scheduledItem.start;\n    if (this.primaryLive) {\n      const details = this.primaryDetails;\n      if (index === 0) {\n        return this.hls.startPosition;\n      } else if (details && (itemStart < details.fragmentStart || itemStart > details.edge)) {\n        return this.hls.liveSyncPosition || -1;\n      }\n    }\n    return itemStart;\n  }\n  isAssetBuffered(asset) {\n    const player = this.getAssetPlayer(asset.identifier);\n    if (player != null && player.hls) {\n      return player.hls.bufferedToEnd;\n    }\n    const bufferInfo = BufferHelper.bufferInfo(this.primaryMedia, this.timelinePos, 0);\n    return bufferInfo.end + 1 >= asset.timelineStart + (asset.duration || 0);\n  }\n  attachPrimary(timelinePos, item, skipSeekToStartPosition) {\n    if (item) {\n      this.setBufferingItem(item);\n    } else {\n      this.bufferingItem = this.playingItem;\n    }\n    this.bufferingAsset = null;\n    const media = this.primaryMedia;\n    if (!media) {\n      return;\n    }\n    const hls = this.hls;\n    if (hls.media) {\n      this.checkBuffer();\n    } else {\n      this.transferMediaTo(hls, media);\n      if (skipSeekToStartPosition) {\n        this.startLoadingPrimaryAt(timelinePos, skipSeekToStartPosition);\n      }\n    }\n    if (!skipSeekToStartPosition) {\n      this.timelinePos = timelinePos;\n      this.startLoadingPrimaryAt(timelinePos, skipSeekToStartPosition);\n    }\n  }\n  startLoadingPrimaryAt(timelinePos, skipSeekToStartPosition) {\n    var _hls$mainForwardBuffe;\n    const hls = this.hls;\n    if (!hls.loadingEnabled || !hls.media || Math.abs((((_hls$mainForwardBuffe = hls.mainForwardBufferInfo) == null ? void 0 : _hls$mainForwardBuffe.start) || hls.media.currentTime) - timelinePos) > 0.5) {\n      hls.startLoad(timelinePos, skipSeekToStartPosition);\n    } else if (!hls.bufferingEnabled) {\n      hls.resumeBuffering();\n    }\n  }\n  // HLS.js event callbacks\n  onManifestLoading() {\n    this.stopLoad();\n    this.schedule.reset();\n    this.emptyPlayerQueue();\n    this.clearScheduleState();\n    this.shouldPlay = false;\n    this.bufferedPos = this.timelinePos = -1;\n    this.mediaSelection = this.altSelection = this.manager = this.requiredTracks = null;\n    this.hls.off(Events.BUFFER_CODECS, this.onBufferCodecs, this);\n    this.hls.on(Events.BUFFER_CODECS, this.onBufferCodecs, this);\n  }\n  onLevelUpdated(event, data) {\n    if (data.level === -1) {\n      return;\n    }\n    const main = this.hls.levels[data.level];\n    const currentSelection = _objectSpread2(_objectSpread2({}, this.mediaSelection || this.altSelection), {}, {\n      main\n    });\n    this.mediaSelection = currentSelection;\n    this.schedule.parseInterstitialDateRanges(currentSelection, this.hls.config.interstitialAppendInPlace);\n    if (!this.effectivePlayingItem && this.schedule.items) {\n      this.checkStart();\n    }\n  }\n  onAudioTrackUpdated(event, data) {\n    const audio = this.hls.audioTracks[data.id];\n    const previousSelection = this.mediaSelection;\n    if (!previousSelection) {\n      this.altSelection = _objectSpread2(_objectSpread2({}, this.altSelection), {}, {\n        audio\n      });\n      return;\n    }\n    const currentSelection = _objectSpread2(_objectSpread2({}, previousSelection), {}, {\n      audio\n    });\n    this.mediaSelection = currentSelection;\n  }\n  onSubtitleTrackUpdated(event, data) {\n    const subtitles = this.hls.subtitleTracks[data.id];\n    const previousSelection = this.mediaSelection;\n    if (!previousSelection) {\n      this.altSelection = _objectSpread2(_objectSpread2({}, this.altSelection), {}, {\n        subtitles\n      });\n      return;\n    }\n    const currentSelection = _objectSpread2(_objectSpread2({}, previousSelection), {}, {\n      subtitles\n    });\n    this.mediaSelection = currentSelection;\n  }\n  onAudioTrackSwitching(event, data) {\n    const audioOption = getBasicSelectionOption(data);\n    this.playerQueue.forEach((player) => player.hls.setAudioOption(data) || player.hls.setAudioOption(audioOption));\n  }\n  onSubtitleTrackSwitch(event, data) {\n    const subtitleOption = getBasicSelectionOption(data);\n    this.playerQueue.forEach((player) => player.hls.setSubtitleOption(data) || data.id !== -1 && player.hls.setSubtitleOption(subtitleOption));\n  }\n  onBufferCodecs(event, data) {\n    const requiredTracks = data.tracks;\n    if (requiredTracks) {\n      this.requiredTracks = requiredTracks;\n    }\n  }\n  onBufferAppended(event, data) {\n    this.checkBuffer();\n  }\n  onBufferFlushed(event, data) {\n    const playingItem = this.playingItem;\n    if (playingItem && !this.itemsMatch(playingItem, this.bufferingItem) && !this.isInterstitial(playingItem)) {\n      const timelinePos = this.timelinePos;\n      this.bufferedPos = timelinePos;\n      this.checkBuffer();\n    }\n  }\n  onBufferedToEnd(event) {\n    const interstitialEvents = this.schedule.events;\n    if (this.bufferedPos < Number.MAX_VALUE && interstitialEvents) {\n      for (let i = 0; i < interstitialEvents.length; i++) {\n        const interstitial = interstitialEvents[i];\n        if (interstitial.cue.post) {\n          var _this$schedule$items;\n          const scheduleIndex = this.schedule.findEventIndex(interstitial.identifier);\n          const item = (_this$schedule$items = this.schedule.items) == null ? void 0 : _this$schedule$items[scheduleIndex];\n          if (this.isInterstitial(item) && this.eventItemsMatch(item, this.bufferingItem)) {\n            this.bufferedToItem(item, 0);\n          }\n          break;\n        }\n      }\n      this.bufferedPos = Number.MAX_VALUE;\n    }\n  }\n  onMediaEnded(event) {\n    const playingItem = this.playingItem;\n    if (!this.playingLastItem && playingItem) {\n      const playingIndex = this.findItemIndex(playingItem);\n      this.setSchedulePosition(playingIndex + 1);\n    } else {\n      this.shouldPlay = false;\n    }\n  }\n  updateItem(previousItem, time) {\n    const items = this.schedule.items;\n    if (previousItem && items) {\n      const index = this.findItemIndex(previousItem, time);\n      return items[index] || null;\n    }\n    return null;\n  }\n  trimInPlace(updatedItem, itemBeforeUpdate) {\n    if (this.isInterstitial(updatedItem) && updatedItem.event.appendInPlace && itemBeforeUpdate.end - updatedItem.end > 0.25) {\n      updatedItem.event.assetList.forEach((asset, index) => {\n        if (updatedItem.event.isAssetPastPlayoutLimit(index)) {\n          this.clearAssetPlayer(asset.identifier, null);\n        }\n      });\n      const flushStart = updatedItem.end + 0.25;\n      const bufferInfo = BufferHelper.bufferInfo(this.primaryMedia, flushStart, 0);\n      if (bufferInfo.end > flushStart || (bufferInfo.nextStart || 0) > flushStart) {\n        this.attachPrimary(flushStart, null);\n        this.flushFrontBuffer(flushStart);\n      }\n    }\n  }\n  itemsMatch(a, b) {\n    return !!b && (a === b || a.event && b.event && this.eventItemsMatch(a, b) || !a.event && !b.event && this.findItemIndex(a) === this.findItemIndex(b));\n  }\n  eventItemsMatch(a, b) {\n    var _b$event;\n    return !!b && (a === b || a.event.identifier === ((_b$event = b.event) == null ? void 0 : _b$event.identifier));\n  }\n  findItemIndex(item, time) {\n    return item ? this.schedule.findItemIndex(item, time) : -1;\n  }\n  updateSchedule() {\n    const mediaSelection = this.mediaSelection;\n    if (!mediaSelection) {\n      return;\n    }\n    this.schedule.updateSchedule(mediaSelection, []);\n  }\n  // Schedule buffer control\n  checkBuffer(starved) {\n    const items = this.schedule.items;\n    if (!items) {\n      return;\n    }\n    const bufferInfo = BufferHelper.bufferInfo(this.primaryMedia, this.timelinePos, 0);\n    if (starved) {\n      this.bufferedPos = this.timelinePos;\n    }\n    starved || (starved = bufferInfo.len < 1);\n    this.updateBufferedPos(bufferInfo.end, items, starved);\n  }\n  updateBufferedPos(bufferEnd, items, bufferIsEmpty) {\n    const schedule = this.schedule;\n    const bufferingItem = this.bufferingItem;\n    if (this.bufferedPos > bufferEnd) {\n      return;\n    }\n    if (items.length === 1 && this.itemsMatch(items[0], bufferingItem)) {\n      this.bufferedPos = bufferEnd;\n      return;\n    }\n    const playingItem = this.playingItem;\n    const playingIndex = this.findItemIndex(playingItem);\n    let bufferEndIndex = schedule.findItemIndexAtTime(bufferEnd);\n    if (this.bufferedPos < bufferEnd) {\n      var _nextItemToBuffer$eve, _bufferingItem$event;\n      const bufferingIndex = this.findItemIndex(bufferingItem);\n      const nextToBufferIndex = Math.min(bufferingIndex + 1, items.length - 1);\n      const nextItemToBuffer = items[nextToBufferIndex];\n      if (bufferEndIndex === -1 && bufferingItem && bufferEnd >= bufferingItem.end || (_nextItemToBuffer$eve = nextItemToBuffer.event) != null && _nextItemToBuffer$eve.appendInPlace && bufferEnd + 0.01 >= nextItemToBuffer.start) {\n        bufferEndIndex = nextToBufferIndex;\n      }\n      if (nextToBufferIndex - playingIndex > 1 && (bufferingItem == null ? void 0 : (_bufferingItem$event = bufferingItem.event) == null ? void 0 : _bufferingItem$event.appendInPlace) === false) {\n        return;\n      }\n      this.bufferedPos = bufferEnd;\n      if (bufferEndIndex > bufferingIndex && bufferEndIndex > playingIndex) {\n        this.bufferedToItem(nextItemToBuffer);\n      } else {\n        const details = this.primaryDetails;\n        if (this.primaryLive && details && bufferEnd > details.edge - details.targetduration && nextItemToBuffer.start < details.edge + this.hls.config.interstitialLiveLookAhead && this.isInterstitial(nextItemToBuffer)) {\n          this.preloadAssets(nextItemToBuffer.event, 0);\n        }\n      }\n    } else if (bufferIsEmpty && playingItem && !this.itemsMatch(playingItem, bufferingItem)) {\n      if (bufferEndIndex === playingIndex) {\n        this.bufferedToItem(playingItem);\n      } else if (bufferEndIndex === playingIndex + 1) {\n        this.bufferedToItem(items[bufferEndIndex]);\n      }\n    }\n  }\n  assetsBuffered(item, media) {\n    const assetList = item.event.assetList;\n    if (assetList.length === 0) {\n      return false;\n    }\n    return !item.event.assetList.some((asset) => {\n      const player = this.getAssetPlayer(asset.identifier);\n      return !(player != null && player.bufferedInPlaceToEnd(media));\n    });\n  }\n  setBufferingItem(item) {\n    const bufferingLast = this.bufferingItem;\n    const schedule = this.schedule;\n    if (!this.itemsMatch(item, bufferingLast)) {\n      const {\n        items,\n        events: events2\n      } = schedule;\n      if (!items || !events2) {\n        return bufferingLast;\n      }\n      const isInterstitial = this.isInterstitial(item);\n      const bufferingPlayer = this.getBufferingPlayer();\n      this.bufferingItem = item;\n      this.bufferedPos = Math.max(item.start, Math.min(item.end, this.timelinePos));\n      const timeRemaining = bufferingPlayer ? bufferingPlayer.remaining : bufferingLast ? bufferingLast.end - this.timelinePos : 0;\n      this.log(`INTERSTITIALS_BUFFERED_TO_BOUNDARY ${segmentToString(item)}` + (bufferingLast ? ` (${timeRemaining.toFixed(2)} remaining)` : \"\"));\n      if (!this.playbackDisabled) {\n        if (isInterstitial) {\n          item.event.assetList.forEach((asset) => {\n            const player = this.getAssetPlayer(asset.identifier);\n            if (player) {\n              player.resumeBuffering();\n            }\n          });\n        } else {\n          this.hls.resumeBuffering();\n          this.playerQueue.forEach((player) => player.pauseBuffering());\n        }\n      }\n      this.hls.trigger(Events.INTERSTITIALS_BUFFERED_TO_BOUNDARY, {\n        events: events2.slice(0),\n        schedule: items.slice(0),\n        bufferingIndex: this.findItemIndex(item),\n        playingIndex: this.findItemIndex(this.playingItem)\n      });\n    } else if (this.bufferingItem !== item) {\n      this.bufferingItem = item;\n    }\n    return bufferingLast;\n  }\n  bufferedToItem(item, assetListIndex = 0) {\n    const bufferingLast = this.setBufferingItem(item);\n    if (this.playbackDisabled) {\n      return;\n    }\n    if (this.isInterstitial(item)) {\n      this.bufferedToEvent(item, assetListIndex);\n    } else if (bufferingLast !== null) {\n      this.bufferingAsset = null;\n      const detachedData = this.detachedData;\n      if (detachedData) {\n        if (detachedData.mediaSource) {\n          const skipSeekToStartPosition = true;\n          this.attachPrimary(item.start, item, skipSeekToStartPosition);\n        } else {\n          this.preloadPrimary(item);\n        }\n      } else {\n        this.preloadPrimary(item);\n      }\n    }\n  }\n  preloadPrimary(item) {\n    const index = this.findItemIndex(item);\n    const timelinePos = this.getPrimaryResumption(item, index);\n    this.startLoadingPrimaryAt(timelinePos);\n  }\n  bufferedToEvent(item, assetListIndex) {\n    const interstitial = item.event;\n    const neverLoaded = interstitial.assetList.length === 0 && !interstitial.assetListLoader;\n    const playOnce = interstitial.cue.once;\n    if (neverLoaded || !playOnce) {\n      const player = this.preloadAssets(interstitial, assetListIndex);\n      if (player != null && player.interstitial.appendInPlace) {\n        const assetItem = interstitial.assetList[assetListIndex];\n        const media = this.primaryMedia;\n        if (assetItem && media) {\n          this.bufferAssetPlayer(player, media);\n        }\n      }\n    }\n  }\n  preloadAssets(interstitial, assetListIndex) {\n    const uri = interstitial.assetUrl;\n    const assetListLength = interstitial.assetList.length;\n    const neverLoaded = assetListLength === 0 && !interstitial.assetListLoader;\n    const playOnce = interstitial.cue.once;\n    if (neverLoaded) {\n      const timelineStart = interstitial.timelineStart;\n      if (interstitial.appendInPlace) {\n        var _playingItem$nextEven;\n        const playingItem = this.playingItem;\n        if (!this.isInterstitial(playingItem) && (playingItem == null ? void 0 : (_playingItem$nextEven = playingItem.nextEvent) == null ? void 0 : _playingItem$nextEven.identifier) === interstitial.identifier) {\n          this.flushFrontBuffer(timelineStart + 0.25);\n        }\n      }\n      let hlsStartOffset;\n      let liveStartPosition = 0;\n      if (!this.playingItem && this.primaryLive) {\n        liveStartPosition = this.hls.startPosition;\n        if (liveStartPosition === -1) {\n          liveStartPosition = this.hls.liveSyncPosition || 0;\n        }\n      }\n      if (liveStartPosition && !(interstitial.cue.pre || interstitial.cue.post)) {\n        const startOffset = liveStartPosition - timelineStart;\n        if (startOffset > 0) {\n          hlsStartOffset = Math.round(startOffset * 1e3) / 1e3;\n        }\n      }\n      this.log(`Load interstitial asset ${assetListIndex + 1}/${uri ? 1 : assetListLength} ${interstitial}${hlsStartOffset ? ` live-start: ${liveStartPosition} start-offset: ${hlsStartOffset}` : \"\"}`);\n      if (uri) {\n        return this.createAsset(interstitial, 0, 0, timelineStart, interstitial.duration, uri);\n      }\n      const assetListLoader = this.assetListLoader.loadAssetList(interstitial, hlsStartOffset);\n      if (assetListLoader) {\n        interstitial.assetListLoader = assetListLoader;\n      }\n    } else if (!playOnce && assetListLength) {\n      for (let i = assetListIndex; i < assetListLength; i++) {\n        const asset = interstitial.assetList[i];\n        const playerIndex = this.getAssetPlayerQueueIndex(asset.identifier);\n        if ((playerIndex === -1 || this.playerQueue[playerIndex].destroyed) && !asset.error) {\n          this.createAssetPlayer(interstitial, asset, i);\n        }\n      }\n      return this.getAssetPlayer(interstitial.assetList[assetListIndex].identifier);\n    }\n    return null;\n  }\n  flushFrontBuffer(startOffset) {\n    const requiredTracks = this.requiredTracks;\n    if (!requiredTracks) {\n      return;\n    }\n    this.log(`Removing front buffer starting at ${startOffset}`);\n    const sourceBufferNames = Object.keys(requiredTracks);\n    sourceBufferNames.forEach((type) => {\n      this.hls.trigger(Events.BUFFER_FLUSHING, {\n        startOffset,\n        endOffset: Infinity,\n        type\n      });\n    });\n  }\n  // Interstitial Asset Player control\n  getAssetPlayerQueueIndex(assetId) {\n    const playerQueue = this.playerQueue;\n    for (let i = 0; i < playerQueue.length; i++) {\n      if (assetId === playerQueue[i].assetId) {\n        return i;\n      }\n    }\n    return -1;\n  }\n  getAssetPlayer(assetId) {\n    const index = this.getAssetPlayerQueueIndex(assetId);\n    return this.playerQueue[index] || null;\n  }\n  getBufferingPlayer() {\n    const {\n      playerQueue,\n      primaryMedia\n    } = this;\n    if (primaryMedia) {\n      for (let i = 0; i < playerQueue.length; i++) {\n        if (playerQueue[i].media === primaryMedia) {\n          return playerQueue[i];\n        }\n      }\n    }\n    return null;\n  }\n  createAsset(interstitial, assetListIndex, startOffset, timelineStart, duration, uri) {\n    const assetItem = {\n      parentIdentifier: interstitial.identifier,\n      identifier: generateAssetIdentifier(interstitial, uri, assetListIndex),\n      duration,\n      startOffset,\n      timelineStart,\n      uri\n    };\n    return this.createAssetPlayer(interstitial, assetItem, assetListIndex);\n  }\n  createAssetPlayer(interstitial, assetItem, assetListIndex) {\n    const primary = this.hls;\n    const userConfig = primary.userConfig;\n    let videoPreference = userConfig.videoPreference;\n    const currentLevel = primary.loadLevelObj || primary.levels[primary.currentLevel];\n    if (videoPreference || currentLevel) {\n      videoPreference = _extends({}, videoPreference);\n      if (currentLevel.videoCodec) {\n        videoPreference.videoCodec = currentLevel.videoCodec;\n      }\n      if (currentLevel.videoRange) {\n        videoPreference.allowedVideoRanges = [currentLevel.videoRange];\n      }\n    }\n    const selectedAudio = primary.audioTracks[primary.audioTrack];\n    const selectedSubtitle = primary.subtitleTracks[primary.subtitleTrack];\n    let startPosition = 0;\n    if (this.primaryLive || interstitial.appendInPlace) {\n      const timePastStart = this.timelinePos - assetItem.timelineStart;\n      if (timePastStart > 1) {\n        const duration = assetItem.duration;\n        if (duration && timePastStart < duration) {\n          startPosition = timePastStart;\n        }\n      }\n    }\n    const assetId = assetItem.identifier;\n    const playerConfig = _objectSpread2(_objectSpread2({}, userConfig), {}, {\n      autoStartLoad: true,\n      startFragPrefetch: true,\n      primarySessionId: primary.sessionId,\n      assetPlayerId: assetId,\n      abrEwmaDefaultEstimate: primary.bandwidthEstimate,\n      interstitialsController: void 0,\n      startPosition,\n      liveDurationInfinity: false,\n      testBandwidth: false,\n      videoPreference,\n      audioPreference: selectedAudio || userConfig.audioPreference,\n      subtitlePreference: selectedSubtitle || userConfig.subtitlePreference\n    });\n    if (interstitial.appendInPlace) {\n      interstitial.appendInPlaceStarted = true;\n      if (assetItem.timelineStart) {\n        playerConfig.timelineOffset = assetItem.timelineStart;\n      }\n    }\n    const cmcd = playerConfig.cmcd;\n    if (cmcd != null && cmcd.sessionId && cmcd.contentId) {\n      playerConfig.cmcd = _extends({}, cmcd, {\n        contentId: hash(assetItem.uri)\n      });\n    }\n    if (this.getAssetPlayer(assetId)) {\n      this.warn(`Duplicate date range identifier ${interstitial} and asset ${assetId}`);\n    }\n    const player = new HlsAssetPlayer(this.HlsPlayerClass, playerConfig, interstitial, assetItem);\n    this.playerQueue.push(player);\n    interstitial.assetList[assetListIndex] = assetItem;\n    const updateAssetPlayerDetails = (details) => {\n      if (details.live) {\n        const error = new Error(`Interstitials MUST be VOD assets ${interstitial}`);\n        const errorData = {\n          fatal: true,\n          type: ErrorTypes.OTHER_ERROR,\n          details: ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,\n          error\n        };\n        this.handleAssetItemError(errorData, interstitial, this.schedule.findEventIndex(interstitial.identifier), assetListIndex, error.message);\n        return;\n      }\n      const duration = details.edge - details.fragmentStart;\n      const currentAssetDuration = assetItem.duration;\n      if (currentAssetDuration === null || duration > currentAssetDuration) {\n        this.log(`Interstitial asset \"${assetId}\" duration change ${currentAssetDuration} > ${duration}`);\n        assetItem.duration = duration;\n        this.updateSchedule();\n      }\n    };\n    player.on(Events.LEVEL_UPDATED, (event, {\n      details\n    }) => updateAssetPlayerDetails(details));\n    player.on(Events.LEVEL_PTS_UPDATED, (event, {\n      details\n    }) => updateAssetPlayerDetails(details));\n    const onBufferCodecs = (event, data) => {\n      const inQueuPlayer = this.getAssetPlayer(assetId);\n      if (inQueuPlayer && data.tracks) {\n        inQueuPlayer.off(Events.BUFFER_CODECS, onBufferCodecs);\n        inQueuPlayer.tracks = data.tracks;\n        const media = this.primaryMedia;\n        if (this.bufferingAsset === inQueuPlayer.assetItem && media && !inQueuPlayer.media) {\n          this.bufferAssetPlayer(inQueuPlayer, media);\n        }\n      }\n    };\n    player.on(Events.BUFFER_CODECS, onBufferCodecs);\n    const bufferedToEnd = () => {\n      var _this$schedule$items2;\n      const inQueuPlayer = this.getAssetPlayer(assetId);\n      this.log(`buffered to end of asset ${inQueuPlayer}`);\n      if (!inQueuPlayer) {\n        return;\n      }\n      const scheduleIndex = this.schedule.findEventIndex(interstitial.identifier);\n      const item = (_this$schedule$items2 = this.schedule.items) == null ? void 0 : _this$schedule$items2[scheduleIndex];\n      if (this.isInterstitial(item)) {\n        const assetListIndex2 = interstitial.findAssetIndex(assetItem);\n        const nextAssetIndex = getNextAssetIndex(interstitial, assetListIndex2);\n        if (!interstitial.isAssetPastPlayoutLimit(nextAssetIndex)) {\n          this.bufferedToItem(item, nextAssetIndex);\n        } else {\n          var _this$schedule$items3;\n          const nextItem = (_this$schedule$items3 = this.schedule.items) == null ? void 0 : _this$schedule$items3[scheduleIndex + 1];\n          if (nextItem) {\n            this.bufferedToItem(nextItem);\n          }\n        }\n      }\n    };\n    player.on(Events.BUFFERED_TO_END, bufferedToEnd);\n    const endedWithAssetIndex = (assetIndex) => {\n      return () => {\n        const inQueuPlayer = this.getAssetPlayer(assetId);\n        if (!inQueuPlayer) {\n          return;\n        }\n        this.shouldPlay = true;\n        const scheduleIndex = this.schedule.findEventIndex(interstitial.identifier);\n        this.advanceAfterAssetEnded(interstitial, scheduleIndex, assetIndex);\n      };\n    };\n    player.once(Events.MEDIA_ENDED, endedWithAssetIndex(assetListIndex));\n    player.once(Events.PLAYOUT_LIMIT_REACHED, endedWithAssetIndex(Infinity));\n    player.on(Events.ERROR, (event, data) => {\n      const inQueuPlayer = this.getAssetPlayer(assetId);\n      if (data.details === ErrorDetails.BUFFER_STALLED_ERROR) {\n        if (inQueuPlayer != null && inQueuPlayer.media) {\n          const assetCurrentTime = inQueuPlayer.currentTime;\n          const distanceFromEnd = inQueuPlayer.duration - assetCurrentTime;\n          if (assetCurrentTime && interstitial.appendInPlace && distanceFromEnd / inQueuPlayer.media.playbackRate < 0.5) {\n            this.log(`Advancing buffer past end of asset ${assetId} ${interstitial} at ${inQueuPlayer.media.currentTime}`);\n            bufferedToEnd();\n          } else {\n            this.warn(`Stalled at ${assetCurrentTime} of ${assetCurrentTime + distanceFromEnd} in asset ${assetId} ${interstitial}`);\n            this.onTimeupdate();\n            this.checkBuffer(true);\n          }\n        }\n        return;\n      }\n      this.handleAssetItemError(data, interstitial, this.schedule.findEventIndex(interstitial.identifier), assetListIndex, `Asset player error ${data.error} ${interstitial}`);\n    });\n    player.on(Events.DESTROYING, () => {\n      const inQueuPlayer = this.getAssetPlayer(assetId);\n      if (!inQueuPlayer) {\n        return;\n      }\n      const error = new Error(`Asset player destroyed unexpectedly ${assetId}`);\n      const errorData = {\n        fatal: true,\n        type: ErrorTypes.OTHER_ERROR,\n        details: ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,\n        error\n      };\n      this.handleAssetItemError(errorData, interstitial, this.schedule.findEventIndex(interstitial.identifier), assetListIndex, error.message);\n    });\n    this.log(`INTERSTITIAL_ASSET_PLAYER_CREATED ${eventAssetToString(assetItem)}`);\n    this.hls.trigger(Events.INTERSTITIAL_ASSET_PLAYER_CREATED, {\n      asset: assetItem,\n      assetListIndex,\n      event: interstitial,\n      player\n    });\n    return player;\n  }\n  clearInterstitial(interstitial, toSegment) {\n    interstitial.assetList.forEach((asset) => {\n      this.clearAssetPlayer(asset.identifier, toSegment);\n    });\n    interstitial.reset();\n  }\n  resetAssetPlayer(assetId) {\n    const playerIndex = this.getAssetPlayerQueueIndex(assetId);\n    if (playerIndex !== -1) {\n      this.log(`reset asset player \"${assetId}\" after error`);\n      const player = this.playerQueue[playerIndex];\n      this.transferMediaFromPlayer(player, null);\n      player.resetDetails();\n    }\n  }\n  clearAssetPlayer(assetId, toSegment) {\n    const playerIndex = this.getAssetPlayerQueueIndex(assetId);\n    if (playerIndex !== -1) {\n      this.log(`clear asset player \"${assetId}\" toSegment: ${toSegment ? segmentToString(toSegment) : toSegment}`);\n      const player = this.playerQueue[playerIndex];\n      this.transferMediaFromPlayer(player, toSegment);\n      this.playerQueue.splice(playerIndex, 1);\n      player.destroy();\n    }\n  }\n  emptyPlayerQueue() {\n    let player;\n    while (player = this.playerQueue.pop()) {\n      player.destroy();\n    }\n    this.playerQueue = [];\n  }\n  startAssetPlayer(player, assetListIndex, scheduleItems, scheduleIndex, media) {\n    const {\n      interstitial,\n      assetItem,\n      assetId\n    } = player;\n    const assetListLength = interstitial.assetList.length;\n    const playingAsset = this.playingAsset;\n    this.endedAsset = null;\n    this.playingAsset = assetItem;\n    if (!playingAsset || playingAsset.identifier !== assetId) {\n      if (playingAsset) {\n        this.clearAssetPlayer(playingAsset.identifier, scheduleItems[scheduleIndex]);\n        delete playingAsset.error;\n      }\n      this.log(`INTERSTITIAL_ASSET_STARTED ${assetListIndex + 1}/${assetListLength} ${eventAssetToString(assetItem)}`);\n      this.hls.trigger(Events.INTERSTITIAL_ASSET_STARTED, {\n        asset: assetItem,\n        assetListIndex,\n        event: interstitial,\n        schedule: scheduleItems.slice(0),\n        scheduleIndex,\n        player\n      });\n    }\n    this.bufferAssetPlayer(player, media);\n  }\n  bufferAssetPlayer(player, media) {\n    var _this$schedule$items4, _this$detachedData5;\n    const {\n      interstitial,\n      assetItem\n    } = player;\n    const scheduleIndex = this.schedule.findEventIndex(interstitial.identifier);\n    const item = (_this$schedule$items4 = this.schedule.items) == null ? void 0 : _this$schedule$items4[scheduleIndex];\n    if (!item) {\n      return;\n    }\n    this.setBufferingItem(item);\n    this.bufferingAsset = assetItem;\n    const bufferingPlayer = this.getBufferingPlayer();\n    if (bufferingPlayer === player) {\n      return;\n    }\n    const appendInPlaceNext = interstitial.appendInPlace;\n    if (appendInPlaceNext && (bufferingPlayer == null ? void 0 : bufferingPlayer.interstitial.appendInPlace) === false) {\n      return;\n    }\n    const activeTracks = (bufferingPlayer == null ? void 0 : bufferingPlayer.tracks) || ((_this$detachedData5 = this.detachedData) == null ? void 0 : _this$detachedData5.tracks) || this.requiredTracks;\n    if (appendInPlaceNext && assetItem !== this.playingAsset) {\n      if (!player.tracks) {\n        return;\n      }\n      if (activeTracks && !isCompatibleTrackChange(activeTracks, player.tracks)) {\n        const error = new Error(`Asset ${eventAssetToString(assetItem)} SourceBuffer tracks ('${Object.keys(player.tracks)}') are not compatible with primary content tracks ('${Object.keys(activeTracks)}')`);\n        const errorData = {\n          fatal: true,\n          type: ErrorTypes.OTHER_ERROR,\n          details: ErrorDetails.INTERSTITIAL_ASSET_ITEM_ERROR,\n          error\n        };\n        const assetListIndex = interstitial.findAssetIndex(assetItem);\n        this.handleAssetItemError(errorData, interstitial, scheduleIndex, assetListIndex, error.message);\n        return;\n      }\n    }\n    this.transferMediaTo(player, media);\n  }\n  handleAssetItemError(data, interstitial, scheduleIndex, assetListIndex, errorMessage) {\n    if (data.details === ErrorDetails.BUFFER_STALLED_ERROR) {\n      return;\n    }\n    const assetItem = interstitial.assetList[assetListIndex];\n    this.warn(`INTERSTITIAL_ASSET_ERROR ${assetItem ? eventAssetToString(assetItem) : assetItem} ${data.error}`);\n    const assetId = assetItem == null ? void 0 : assetItem.identifier;\n    const playerIndex = this.getAssetPlayerQueueIndex(assetId);\n    const player = this.playerQueue[playerIndex] || null;\n    const items = this.schedule.items;\n    const interstitialAssetError = _extends({}, data, {\n      fatal: false,\n      errorAction: createDoNothingErrorAction(true),\n      asset: assetItem,\n      assetListIndex,\n      event: interstitial,\n      schedule: items,\n      scheduleIndex,\n      player\n    });\n    this.hls.trigger(Events.INTERSTITIAL_ASSET_ERROR, interstitialAssetError);\n    if (!data.fatal) {\n      return;\n    }\n    const playingAsset = this.playingAsset;\n    const error = new Error(errorMessage);\n    if (assetItem) {\n      this.clearAssetPlayer(assetId, null);\n      assetItem.error = error;\n    }\n    if (!interstitial.assetList.some((asset) => !asset.error)) {\n      interstitial.error = error;\n    } else {\n      for (let i = assetListIndex; i < interstitial.assetList.length; i++) {\n        this.resetAssetPlayer(interstitial.assetList[i].identifier);\n      }\n      this.updateSchedule();\n    }\n    if (interstitial.error) {\n      this.primaryFallback(interstitial);\n    } else if (playingAsset && playingAsset.identifier === assetId) {\n      this.advanceAfterAssetEnded(interstitial, scheduleIndex, assetListIndex);\n    }\n  }\n  primaryFallback(interstitial) {\n    const flushStart = interstitial.timelineStart;\n    const playingItem = this.effectivePlayingItem;\n    this.updateSchedule();\n    if (playingItem) {\n      this.log(`Fallback to primary from event \"${interstitial.identifier}\" start: ${flushStart} pos: ${this.timelinePos} playing: ${playingItem ? segmentToString(playingItem) : \"<none>\"} error: ${interstitial.error}`);\n      let timelinePos = this.timelinePos;\n      if (timelinePos === -1) {\n        timelinePos = this.hls.startPosition;\n      }\n      const newPlayingItem = this.updateItem(playingItem, timelinePos);\n      if (this.itemsMatch(playingItem, newPlayingItem)) {\n        this.clearInterstitial(interstitial, null);\n      }\n      if (interstitial.appendInPlace) {\n        this.attachPrimary(flushStart, null);\n        this.flushFrontBuffer(flushStart);\n      }\n      const scheduleIndex = this.schedule.findItemIndexAtTime(timelinePos);\n      this.setSchedulePosition(scheduleIndex);\n    } else {\n      this.checkStart();\n    }\n  }\n  // Asset List loading\n  onAssetListLoaded(event, data) {\n    var _this$bufferingItem2;\n    const interstitial = data.event;\n    const interstitialId = interstitial.identifier;\n    const assets = data.assetListResponse.ASSETS;\n    if (!this.schedule.hasEvent(interstitialId)) {\n      return;\n    }\n    const eventStart = interstitial.timelineStart;\n    const previousDuration = interstitial.duration;\n    let sumDuration = 0;\n    assets.forEach((asset, assetListIndex) => {\n      const duration = parseFloat(asset.DURATION);\n      this.createAsset(interstitial, assetListIndex, sumDuration, eventStart + sumDuration, duration, asset.URI);\n      sumDuration += duration;\n    });\n    interstitial.duration = sumDuration;\n    this.log(`Loaded asset-list with duration: ${sumDuration} (was: ${previousDuration}) ${interstitial}`);\n    const waitingItem = this.waitingItem;\n    const waitingForItem = (waitingItem == null ? void 0 : waitingItem.event.identifier) === interstitialId;\n    this.updateSchedule();\n    const bufferingEvent = (_this$bufferingItem2 = this.bufferingItem) == null ? void 0 : _this$bufferingItem2.event;\n    if (waitingForItem) {\n      var _this$schedule$items5;\n      const scheduleIndex = this.schedule.findEventIndex(interstitialId);\n      const item = (_this$schedule$items5 = this.schedule.items) == null ? void 0 : _this$schedule$items5[scheduleIndex];\n      if (item) {\n        if (!this.playingItem && this.timelinePos > item.end) {\n          const index = this.schedule.findItemIndexAtTime(this.timelinePos);\n          if (index !== scheduleIndex) {\n            interstitial.error = new Error(`Interstitial no longer within playback range ${this.timelinePos} ${interstitial}`);\n            this.primaryFallback(interstitial);\n            return;\n          }\n        }\n        this.setBufferingItem(item);\n      }\n      this.setSchedulePosition(scheduleIndex);\n    } else if ((bufferingEvent == null ? void 0 : bufferingEvent.identifier) === interstitialId && bufferingEvent.appendInPlace) {\n      const assetItem = interstitial.assetList[0];\n      const player = this.getAssetPlayer(assetItem.identifier);\n      const media = this.primaryMedia;\n      if (assetItem && player && media) {\n        this.bufferAssetPlayer(player, media);\n      }\n    }\n  }\n  onError(event, data) {\n    switch (data.details) {\n      case ErrorDetails.ASSET_LIST_PARSING_ERROR:\n      case ErrorDetails.ASSET_LIST_LOAD_ERROR:\n      case ErrorDetails.ASSET_LIST_LOAD_TIMEOUT: {\n        const interstitial = data.interstitial;\n        if (interstitial) {\n          this.primaryFallback(interstitial);\n        }\n        break;\n      }\n      case ErrorDetails.BUFFER_STALLED_ERROR: {\n        this.onTimeupdate();\n        this.checkBuffer(true);\n        break;\n      }\n    }\n  }\n}\nconst TICK_INTERVAL$2 = 500;\nclass SubtitleStreamController extends BaseStreamController {\n  constructor(hls, fragmentTracker, keyLoader) {\n    super(hls, fragmentTracker, keyLoader, \"subtitle-stream-controller\", PlaylistLevelType.SUBTITLE);\n    this.currentTrackId = -1;\n    this.tracksBuffered = [];\n    this.mainDetails = null;\n    this.registerListeners();\n  }\n  onHandlerDestroying() {\n    this.unregisterListeners();\n    super.onHandlerDestroying();\n    this.mainDetails = null;\n  }\n  registerListeners() {\n    super.registerListeners();\n    const {\n      hls\n    } = this;\n    hls.on(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.on(Events.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this);\n    hls.on(Events.SUBTITLE_TRACK_SWITCH, this.onSubtitleTrackSwitch, this);\n    hls.on(Events.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this);\n    hls.on(Events.SUBTITLE_FRAG_PROCESSED, this.onSubtitleFragProcessed, this);\n    hls.on(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n  }\n  unregisterListeners() {\n    super.unregisterListeners();\n    const {\n      hls\n    } = this;\n    hls.off(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.off(Events.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this);\n    hls.off(Events.SUBTITLE_TRACK_SWITCH, this.onSubtitleTrackSwitch, this);\n    hls.off(Events.SUBTITLE_TRACK_LOADED, this.onSubtitleTrackLoaded, this);\n    hls.off(Events.SUBTITLE_FRAG_PROCESSED, this.onSubtitleFragProcessed, this);\n    hls.off(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n  }\n  startLoad(startPosition, skipSeekToStartPosition) {\n    this.stopLoad();\n    this.state = State.IDLE;\n    this.setInterval(TICK_INTERVAL$2);\n    this.nextLoadPosition = this.lastCurrentTime = startPosition + this.timelineOffset;\n    this.startPosition = skipSeekToStartPosition ? -1 : startPosition;\n    this.tick();\n  }\n  onManifestLoading() {\n    super.onManifestLoading();\n    this.mainDetails = null;\n  }\n  onMediaDetaching(event, data) {\n    this.tracksBuffered = [];\n    super.onMediaDetaching(event, data);\n  }\n  onLevelLoaded(event, data) {\n    this.mainDetails = data.details;\n  }\n  onSubtitleFragProcessed(event, data) {\n    const {\n      frag,\n      success\n    } = data;\n    if (!this.fragContextChanged(frag)) {\n      if (isMediaFragment(frag)) {\n        this.fragPrevious = frag;\n      }\n      this.state = State.IDLE;\n    }\n    if (!success) {\n      return;\n    }\n    const buffered = this.tracksBuffered[this.currentTrackId];\n    if (!buffered) {\n      return;\n    }\n    let timeRange;\n    const fragStart = frag.start;\n    for (let i = 0; i < buffered.length; i++) {\n      if (fragStart >= buffered[i].start && fragStart <= buffered[i].end) {\n        timeRange = buffered[i];\n        break;\n      }\n    }\n    const fragEnd = frag.start + frag.duration;\n    if (timeRange) {\n      timeRange.end = fragEnd;\n    } else {\n      timeRange = {\n        start: fragStart,\n        end: fragEnd\n      };\n      buffered.push(timeRange);\n    }\n    this.fragmentTracker.fragBuffered(frag);\n    this.fragBufferedComplete(frag, null);\n    if (this.media) {\n      this.tick();\n    }\n  }\n  onBufferFlushing(event, data) {\n    const {\n      startOffset,\n      endOffset\n    } = data;\n    if (startOffset === 0 && endOffset !== Number.POSITIVE_INFINITY) {\n      const endOffsetSubtitles = endOffset - 1;\n      if (endOffsetSubtitles <= 0) {\n        return;\n      }\n      data.endOffsetSubtitles = Math.max(0, endOffsetSubtitles);\n      this.tracksBuffered.forEach((buffered) => {\n        for (let i = 0; i < buffered.length; ) {\n          if (buffered[i].end <= endOffsetSubtitles) {\n            buffered.shift();\n            continue;\n          } else if (buffered[i].start < endOffsetSubtitles) {\n            buffered[i].start = endOffsetSubtitles;\n          } else {\n            break;\n          }\n          i++;\n        }\n      });\n      this.fragmentTracker.removeFragmentsInRange(startOffset, endOffsetSubtitles, PlaylistLevelType.SUBTITLE);\n    }\n  }\n  // If something goes wrong, proceed to next frag, if we were processing one.\n  onError(event, data) {\n    const frag = data.frag;\n    if ((frag == null ? void 0 : frag.type) === PlaylistLevelType.SUBTITLE) {\n      if (data.details === ErrorDetails.FRAG_GAP) {\n        this.fragmentTracker.fragBuffered(frag, true);\n      }\n      if (this.fragCurrent) {\n        this.fragCurrent.abortRequests();\n      }\n      if (this.state !== State.STOPPED) {\n        this.state = State.IDLE;\n      }\n    }\n  }\n  // Got all new subtitle levels.\n  onSubtitleTracksUpdated(event, {\n    subtitleTracks\n  }) {\n    if (this.levels && subtitleOptionsIdentical(this.levels, subtitleTracks)) {\n      this.levels = subtitleTracks.map((mediaPlaylist) => new Level(mediaPlaylist));\n      return;\n    }\n    this.tracksBuffered = [];\n    this.levels = subtitleTracks.map((mediaPlaylist) => {\n      const level = new Level(mediaPlaylist);\n      this.tracksBuffered[level.id] = [];\n      return level;\n    });\n    this.fragmentTracker.removeFragmentsInRange(0, Number.POSITIVE_INFINITY, PlaylistLevelType.SUBTITLE);\n    this.fragPrevious = null;\n    this.mediaBuffer = null;\n  }\n  onSubtitleTrackSwitch(event, data) {\n    var _this$levels;\n    this.currentTrackId = data.id;\n    if (!((_this$levels = this.levels) != null && _this$levels.length) || this.currentTrackId === -1) {\n      this.clearInterval();\n      return;\n    }\n    const currentTrack = this.levels[this.currentTrackId];\n    if (currentTrack != null && currentTrack.details) {\n      this.mediaBuffer = this.mediaBufferTimeRanges;\n    } else {\n      this.mediaBuffer = null;\n    }\n    if (currentTrack && this.state !== State.STOPPED) {\n      this.setInterval(TICK_INTERVAL$2);\n    }\n  }\n  // Got a new set of subtitle fragments.\n  onSubtitleTrackLoaded(event, data) {\n    var _track$details;\n    const {\n      currentTrackId,\n      levels\n    } = this;\n    const {\n      details: newDetails,\n      id: trackId\n    } = data;\n    if (!levels) {\n      this.warn(`Subtitle tracks were reset while loading level ${trackId}`);\n      return;\n    }\n    const track = levels[trackId];\n    if (trackId >= levels.length || !track) {\n      return;\n    }\n    this.log(`Subtitle track ${trackId} loaded [${newDetails.startSN},${newDetails.endSN}]${newDetails.lastPartSn ? `[part-${newDetails.lastPartSn}-${newDetails.lastPartIndex}]` : \"\"},duration:${newDetails.totalduration}`);\n    this.mediaBuffer = this.mediaBufferTimeRanges;\n    let sliding = 0;\n    if (newDetails.live || (_track$details = track.details) != null && _track$details.live) {\n      if (newDetails.deltaUpdateFailed) {\n        return;\n      }\n      const mainDetails = this.mainDetails;\n      if (!mainDetails) {\n        this.startFragRequested = false;\n        return;\n      }\n      const mainSlidingStartFragment = mainDetails.fragments[0];\n      if (!track.details) {\n        if (newDetails.hasProgramDateTime && mainDetails.hasProgramDateTime) {\n          alignMediaPlaylistByPDT(newDetails, mainDetails);\n          sliding = newDetails.fragmentStart;\n        } else if (mainSlidingStartFragment) {\n          sliding = mainSlidingStartFragment.start;\n          addSliding(newDetails, sliding);\n        }\n      } else {\n        var _this$levelLastLoaded;\n        sliding = this.alignPlaylists(newDetails, track.details, (_this$levelLastLoaded = this.levelLastLoaded) == null ? void 0 : _this$levelLastLoaded.details);\n        if (sliding === 0 && mainSlidingStartFragment) {\n          sliding = mainSlidingStartFragment.start;\n          addSliding(newDetails, sliding);\n        }\n      }\n      if (mainDetails && !this.startFragRequested) {\n        this.setStartPosition(mainDetails, sliding);\n      }\n    }\n    track.details = newDetails;\n    this.levelLastLoaded = track;\n    if (trackId !== currentTrackId) {\n      return;\n    }\n    this.hls.trigger(Events.SUBTITLE_TRACK_UPDATED, {\n      details: newDetails,\n      id: trackId,\n      groupId: data.groupId\n    });\n    this.tick();\n    if (newDetails.live && !this.fragCurrent && this.media && this.state === State.IDLE) {\n      const foundFrag = findFragmentByPTS(null, newDetails.fragments, this.media.currentTime, 0);\n      if (!foundFrag) {\n        this.warn(\"Subtitle playlist not aligned with playback\");\n        track.details = void 0;\n      }\n    }\n  }\n  _handleFragmentLoadComplete(fragLoadedData) {\n    const {\n      frag,\n      payload\n    } = fragLoadedData;\n    const decryptData = frag.decryptdata;\n    const hls = this.hls;\n    if (this.fragContextChanged(frag)) {\n      return;\n    }\n    if (payload && payload.byteLength > 0 && decryptData != null && decryptData.key && decryptData.iv && isFullSegmentEncryption(decryptData.method)) {\n      const startTime = performance.now();\n      this.decrypter.decrypt(new Uint8Array(payload), decryptData.key.buffer, decryptData.iv.buffer, getAesModeFromFullSegmentMethod(decryptData.method)).catch((err) => {\n        hls.trigger(Events.ERROR, {\n          type: ErrorTypes.MEDIA_ERROR,\n          details: ErrorDetails.FRAG_DECRYPT_ERROR,\n          fatal: false,\n          error: err,\n          reason: err.message,\n          frag\n        });\n        throw err;\n      }).then((decryptedData) => {\n        const endTime = performance.now();\n        hls.trigger(Events.FRAG_DECRYPTED, {\n          frag,\n          payload: decryptedData,\n          stats: {\n            tstart: startTime,\n            tdecrypt: endTime\n          }\n        });\n      }).catch((err) => {\n        this.warn(`${err.name}: ${err.message}`);\n        this.state = State.IDLE;\n      });\n    }\n  }\n  doTick() {\n    if (!this.media) {\n      this.state = State.IDLE;\n      return;\n    }\n    if (this.state === State.IDLE) {\n      const {\n        currentTrackId,\n        levels\n      } = this;\n      const track = levels == null ? void 0 : levels[currentTrackId];\n      if (!track || !levels.length || !track.details) {\n        return;\n      }\n      if (this.waitForLive(track)) {\n        return;\n      }\n      const {\n        config\n      } = this;\n      const currentTime = this.getLoadPosition();\n      const bufferedInfo = BufferHelper.bufferedInfo(this.tracksBuffered[this.currentTrackId] || [], currentTime, config.maxBufferHole);\n      const {\n        end: targetBufferTime,\n        len: bufferLen\n      } = bufferedInfo;\n      const trackDetails = track.details;\n      const maxBufLen = this.hls.maxBufferLength + trackDetails.levelTargetDuration;\n      if (bufferLen > maxBufLen) {\n        return;\n      }\n      const fragments = trackDetails.fragments;\n      const fragLen = fragments.length;\n      const end = trackDetails.edge;\n      let foundFrag = null;\n      const fragPrevious = this.fragPrevious;\n      if (targetBufferTime < end) {\n        const tolerance = config.maxFragLookUpTolerance;\n        const lookupTolerance = targetBufferTime > end - tolerance ? 0 : tolerance;\n        foundFrag = findFragmentByPTS(fragPrevious, fragments, Math.max(fragments[0].start, targetBufferTime), lookupTolerance);\n        if (!foundFrag && fragPrevious && fragPrevious.start < fragments[0].start) {\n          foundFrag = fragments[0];\n        }\n      } else {\n        foundFrag = fragments[fragLen - 1];\n      }\n      foundFrag = this.filterReplacedPrimary(foundFrag, track.details);\n      if (!foundFrag) {\n        return;\n      }\n      const curSNIdx = foundFrag.sn - trackDetails.startSN;\n      const prevFrag = fragments[curSNIdx - 1];\n      if (prevFrag && prevFrag.cc === foundFrag.cc && this.fragmentTracker.getState(prevFrag) === FragmentState.NOT_LOADED) {\n        foundFrag = prevFrag;\n      }\n      if (this.fragmentTracker.getState(foundFrag) === FragmentState.NOT_LOADED) {\n        const fragToLoad = this.mapToInitFragWhenRequired(foundFrag);\n        if (fragToLoad) {\n          this.loadFragment(fragToLoad, track, targetBufferTime);\n        }\n      }\n    }\n  }\n  loadFragment(frag, level, targetBufferTime) {\n    if (!isMediaFragment(frag)) {\n      this._loadInitSegment(frag, level);\n    } else {\n      super.loadFragment(frag, level, targetBufferTime);\n    }\n  }\n  get mediaBufferTimeRanges() {\n    return new BufferableInstance(this.tracksBuffered[this.currentTrackId] || []);\n  }\n}\nclass BufferableInstance {\n  constructor(timeranges) {\n    this.buffered = void 0;\n    const getRange = (name, index, length) => {\n      index = index >>> 0;\n      if (index > length - 1) {\n        throw new DOMException(`Failed to execute '${name}' on 'TimeRanges': The index provided (${index}) is greater than the maximum bound (${length})`);\n      }\n      return timeranges[index][name];\n    };\n    this.buffered = {\n      get length() {\n        return timeranges.length;\n      },\n      end(index) {\n        return getRange(\"end\", index, timeranges.length);\n      },\n      start(index) {\n        return getRange(\"start\", index, timeranges.length);\n      }\n    };\n  }\n}\nconst specialCea608CharsCodes = {\n  42: 225,\n  // lowercase a, acute accent\n  92: 233,\n  // lowercase e, acute accent\n  94: 237,\n  // lowercase i, acute accent\n  95: 243,\n  // lowercase o, acute accent\n  96: 250,\n  // lowercase u, acute accent\n  123: 231,\n  // lowercase c with cedilla\n  124: 247,\n  // division symbol\n  125: 209,\n  // uppercase N tilde\n  126: 241,\n  // lowercase n tilde\n  127: 9608,\n  // Full block\n  // THIS BLOCK INCLUDES THE 16 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS\n  // THAT COME FROM HI BYTE=0x11 AND LOW BETWEEN 0x30 AND 0x3F\n  // THIS MEANS THAT \\x50 MUST BE ADDED TO THE VALUES\n  128: 174,\n  // Registered symbol (R)\n  129: 176,\n  // degree sign\n  130: 189,\n  // 1/2 symbol\n  131: 191,\n  // Inverted (open) question mark\n  132: 8482,\n  // Trademark symbol (TM)\n  133: 162,\n  // Cents symbol\n  134: 163,\n  // Pounds sterling\n  135: 9834,\n  // Music 8'th note\n  136: 224,\n  // lowercase a, grave accent\n  137: 32,\n  // transparent space (regular)\n  138: 232,\n  // lowercase e, grave accent\n  139: 226,\n  // lowercase a, circumflex accent\n  140: 234,\n  // lowercase e, circumflex accent\n  141: 238,\n  // lowercase i, circumflex accent\n  142: 244,\n  // lowercase o, circumflex accent\n  143: 251,\n  // lowercase u, circumflex accent\n  // THIS BLOCK INCLUDES THE 32 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS\n  // THAT COME FROM HI BYTE=0x12 AND LOW BETWEEN 0x20 AND 0x3F\n  144: 193,\n  // capital letter A with acute\n  145: 201,\n  // capital letter E with acute\n  146: 211,\n  // capital letter O with acute\n  147: 218,\n  // capital letter U with acute\n  148: 220,\n  // capital letter U with diaresis\n  149: 252,\n  // lowercase letter U with diaeresis\n  150: 8216,\n  // opening single quote\n  151: 161,\n  // inverted exclamation mark\n  152: 42,\n  // asterisk\n  153: 8217,\n  // closing single quote\n  154: 9473,\n  // box drawings heavy horizontal\n  155: 169,\n  // copyright sign\n  156: 8480,\n  // Service mark\n  157: 8226,\n  // (round) bullet\n  158: 8220,\n  // Left double quotation mark\n  159: 8221,\n  // Right double quotation mark\n  160: 192,\n  // uppercase A, grave accent\n  161: 194,\n  // uppercase A, circumflex\n  162: 199,\n  // uppercase C with cedilla\n  163: 200,\n  // uppercase E, grave accent\n  164: 202,\n  // uppercase E, circumflex\n  165: 203,\n  // capital letter E with diaresis\n  166: 235,\n  // lowercase letter e with diaresis\n  167: 206,\n  // uppercase I, circumflex\n  168: 207,\n  // uppercase I, with diaresis\n  169: 239,\n  // lowercase i, with diaresis\n  170: 212,\n  // uppercase O, circumflex\n  171: 217,\n  // uppercase U, grave accent\n  172: 249,\n  // lowercase u, grave accent\n  173: 219,\n  // uppercase U, circumflex\n  174: 171,\n  // left-pointing double angle quotation mark\n  175: 187,\n  // right-pointing double angle quotation mark\n  // THIS BLOCK INCLUDES THE 32 EXTENDED (TWO-BYTE) LINE 21 CHARACTERS\n  // THAT COME FROM HI BYTE=0x13 AND LOW BETWEEN 0x20 AND 0x3F\n  176: 195,\n  // Uppercase A, tilde\n  177: 227,\n  // Lowercase a, tilde\n  178: 205,\n  // Uppercase I, acute accent\n  179: 204,\n  // Uppercase I, grave accent\n  180: 236,\n  // Lowercase i, grave accent\n  181: 210,\n  // Uppercase O, grave accent\n  182: 242,\n  // Lowercase o, grave accent\n  183: 213,\n  // Uppercase O, tilde\n  184: 245,\n  // Lowercase o, tilde\n  185: 123,\n  // Open curly brace\n  186: 125,\n  // Closing curly brace\n  187: 92,\n  // Backslash\n  188: 94,\n  // Caret\n  189: 95,\n  // Underscore\n  190: 124,\n  // Pipe (vertical line)\n  191: 8764,\n  // Tilde operator\n  192: 196,\n  // Uppercase A, umlaut\n  193: 228,\n  // Lowercase A, umlaut\n  194: 214,\n  // Uppercase O, umlaut\n  195: 246,\n  // Lowercase o, umlaut\n  196: 223,\n  // Esszett (sharp S)\n  197: 165,\n  // Yen symbol\n  198: 164,\n  // Generic currency sign\n  199: 9475,\n  // Box drawings heavy vertical\n  200: 197,\n  // Uppercase A, ring\n  201: 229,\n  // Lowercase A, ring\n  202: 216,\n  // Uppercase O, stroke\n  203: 248,\n  // Lowercase o, strok\n  204: 9487,\n  // Box drawings heavy down and right\n  205: 9491,\n  // Box drawings heavy down and left\n  206: 9495,\n  // Box drawings heavy up and right\n  207: 9499\n  // Box drawings heavy up and left\n};\nconst getCharForByte = (byte) => String.fromCharCode(specialCea608CharsCodes[byte] || byte);\nconst NR_ROWS = 15;\nconst NR_COLS = 100;\nconst rowsLowCh1 = {\n  17: 1,\n  18: 3,\n  21: 5,\n  22: 7,\n  23: 9,\n  16: 11,\n  19: 12,\n  20: 14\n};\nconst rowsHighCh1 = {\n  17: 2,\n  18: 4,\n  21: 6,\n  22: 8,\n  23: 10,\n  19: 13,\n  20: 15\n};\nconst rowsLowCh2 = {\n  25: 1,\n  26: 3,\n  29: 5,\n  30: 7,\n  31: 9,\n  24: 11,\n  27: 12,\n  28: 14\n};\nconst rowsHighCh2 = {\n  25: 2,\n  26: 4,\n  29: 6,\n  30: 8,\n  31: 10,\n  27: 13,\n  28: 15\n};\nconst backgroundColors = [\"white\", \"green\", \"blue\", \"cyan\", \"red\", \"yellow\", \"magenta\", \"black\", \"transparent\"];\nclass CaptionsLogger {\n  constructor() {\n    this.time = null;\n    this.verboseLevel = 0;\n  }\n  log(severity, msg) {\n    if (this.verboseLevel >= severity) {\n      const m = typeof msg === \"function\" ? msg() : msg;\n      logger.log(`${this.time} [${severity}] ${m}`);\n    }\n  }\n}\nconst numArrayToHexArray = function numArrayToHexArray2(numArray) {\n  const hexArray = [];\n  for (let j = 0; j < numArray.length; j++) {\n    hexArray.push(numArray[j].toString(16));\n  }\n  return hexArray;\n};\nclass PenState {\n  constructor() {\n    this.foreground = \"white\";\n    this.underline = false;\n    this.italics = false;\n    this.background = \"black\";\n    this.flash = false;\n  }\n  reset() {\n    this.foreground = \"white\";\n    this.underline = false;\n    this.italics = false;\n    this.background = \"black\";\n    this.flash = false;\n  }\n  setStyles(styles) {\n    const attribs = [\"foreground\", \"underline\", \"italics\", \"background\", \"flash\"];\n    for (let i = 0; i < attribs.length; i++) {\n      const style = attribs[i];\n      if (styles.hasOwnProperty(style)) {\n        this[style] = styles[style];\n      }\n    }\n  }\n  isDefault() {\n    return this.foreground === \"white\" && !this.underline && !this.italics && this.background === \"black\" && !this.flash;\n  }\n  equals(other) {\n    return this.foreground === other.foreground && this.underline === other.underline && this.italics === other.italics && this.background === other.background && this.flash === other.flash;\n  }\n  copy(newPenState) {\n    this.foreground = newPenState.foreground;\n    this.underline = newPenState.underline;\n    this.italics = newPenState.italics;\n    this.background = newPenState.background;\n    this.flash = newPenState.flash;\n  }\n  toString() {\n    return \"color=\" + this.foreground + \", underline=\" + this.underline + \", italics=\" + this.italics + \", background=\" + this.background + \", flash=\" + this.flash;\n  }\n}\nclass StyledUnicodeChar {\n  constructor() {\n    this.uchar = \" \";\n    this.penState = new PenState();\n  }\n  reset() {\n    this.uchar = \" \";\n    this.penState.reset();\n  }\n  setChar(uchar, newPenState) {\n    this.uchar = uchar;\n    this.penState.copy(newPenState);\n  }\n  setPenState(newPenState) {\n    this.penState.copy(newPenState);\n  }\n  equals(other) {\n    return this.uchar === other.uchar && this.penState.equals(other.penState);\n  }\n  copy(newChar) {\n    this.uchar = newChar.uchar;\n    this.penState.copy(newChar.penState);\n  }\n  isEmpty() {\n    return this.uchar === \" \" && this.penState.isDefault();\n  }\n}\nclass Row {\n  constructor(logger2) {\n    this.chars = [];\n    this.pos = 0;\n    this.currPenState = new PenState();\n    this.cueStartTime = null;\n    this.logger = void 0;\n    for (let i = 0; i < NR_COLS; i++) {\n      this.chars.push(new StyledUnicodeChar());\n    }\n    this.logger = logger2;\n  }\n  equals(other) {\n    for (let i = 0; i < NR_COLS; i++) {\n      if (!this.chars[i].equals(other.chars[i])) {\n        return false;\n      }\n    }\n    return true;\n  }\n  copy(other) {\n    for (let i = 0; i < NR_COLS; i++) {\n      this.chars[i].copy(other.chars[i]);\n    }\n  }\n  isEmpty() {\n    let empty = true;\n    for (let i = 0; i < NR_COLS; i++) {\n      if (!this.chars[i].isEmpty()) {\n        empty = false;\n        break;\n      }\n    }\n    return empty;\n  }\n  /**\n   *  Set the cursor to a valid column.\n   */\n  setCursor(absPos) {\n    if (this.pos !== absPos) {\n      this.pos = absPos;\n    }\n    if (this.pos < 0) {\n      this.logger.log(3, \"Negative cursor position \" + this.pos);\n      this.pos = 0;\n    } else if (this.pos > NR_COLS) {\n      this.logger.log(3, \"Too large cursor position \" + this.pos);\n      this.pos = NR_COLS;\n    }\n  }\n  /**\n   * Move the cursor relative to current position.\n   */\n  moveCursor(relPos) {\n    const newPos = this.pos + relPos;\n    if (relPos > 1) {\n      for (let i = this.pos + 1; i < newPos + 1; i++) {\n        this.chars[i].setPenState(this.currPenState);\n      }\n    }\n    this.setCursor(newPos);\n  }\n  /**\n   * Backspace, move one step back and clear character.\n   */\n  backSpace() {\n    this.moveCursor(-1);\n    this.chars[this.pos].setChar(\" \", this.currPenState);\n  }\n  insertChar(byte) {\n    if (byte >= 144) {\n      this.backSpace();\n    }\n    const char = getCharForByte(byte);\n    if (this.pos >= NR_COLS) {\n      this.logger.log(0, () => \"Cannot insert \" + byte.toString(16) + \" (\" + char + \") at position \" + this.pos + \". Skipping it!\");\n      return;\n    }\n    this.chars[this.pos].setChar(char, this.currPenState);\n    this.moveCursor(1);\n  }\n  clearFromPos(startPos) {\n    let i;\n    for (i = startPos; i < NR_COLS; i++) {\n      this.chars[i].reset();\n    }\n  }\n  clear() {\n    this.clearFromPos(0);\n    this.pos = 0;\n    this.currPenState.reset();\n  }\n  clearToEndOfRow() {\n    this.clearFromPos(this.pos);\n  }\n  getTextString() {\n    const chars2 = [];\n    let empty = true;\n    for (let i = 0; i < NR_COLS; i++) {\n      const char = this.chars[i].uchar;\n      if (char !== \" \") {\n        empty = false;\n      }\n      chars2.push(char);\n    }\n    if (empty) {\n      return \"\";\n    } else {\n      return chars2.join(\"\");\n    }\n  }\n  setPenStyles(styles) {\n    this.currPenState.setStyles(styles);\n    const currChar = this.chars[this.pos];\n    currChar.setPenState(this.currPenState);\n  }\n}\nclass CaptionScreen {\n  constructor(logger2) {\n    this.rows = [];\n    this.currRow = NR_ROWS - 1;\n    this.nrRollUpRows = null;\n    this.lastOutputScreen = null;\n    this.logger = void 0;\n    for (let i = 0; i < NR_ROWS; i++) {\n      this.rows.push(new Row(logger2));\n    }\n    this.logger = logger2;\n  }\n  reset() {\n    for (let i = 0; i < NR_ROWS; i++) {\n      this.rows[i].clear();\n    }\n    this.currRow = NR_ROWS - 1;\n  }\n  equals(other) {\n    let equal = true;\n    for (let i = 0; i < NR_ROWS; i++) {\n      if (!this.rows[i].equals(other.rows[i])) {\n        equal = false;\n        break;\n      }\n    }\n    return equal;\n  }\n  copy(other) {\n    for (let i = 0; i < NR_ROWS; i++) {\n      this.rows[i].copy(other.rows[i]);\n    }\n  }\n  isEmpty() {\n    let empty = true;\n    for (let i = 0; i < NR_ROWS; i++) {\n      if (!this.rows[i].isEmpty()) {\n        empty = false;\n        break;\n      }\n    }\n    return empty;\n  }\n  backSpace() {\n    const row = this.rows[this.currRow];\n    row.backSpace();\n  }\n  clearToEndOfRow() {\n    const row = this.rows[this.currRow];\n    row.clearToEndOfRow();\n  }\n  /**\n   * Insert a character (without styling) in the current row.\n   */\n  insertChar(char) {\n    const row = this.rows[this.currRow];\n    row.insertChar(char);\n  }\n  setPen(styles) {\n    const row = this.rows[this.currRow];\n    row.setPenStyles(styles);\n  }\n  moveCursor(relPos) {\n    const row = this.rows[this.currRow];\n    row.moveCursor(relPos);\n  }\n  setCursor(absPos) {\n    this.logger.log(2, \"setCursor: \" + absPos);\n    const row = this.rows[this.currRow];\n    row.setCursor(absPos);\n  }\n  setPAC(pacData) {\n    this.logger.log(2, () => \"pacData = \" + stringify(pacData));\n    let newRow = pacData.row - 1;\n    if (this.nrRollUpRows && newRow < this.nrRollUpRows - 1) {\n      newRow = this.nrRollUpRows - 1;\n    }\n    if (this.nrRollUpRows && this.currRow !== newRow) {\n      for (let i = 0; i < NR_ROWS; i++) {\n        this.rows[i].clear();\n      }\n      const topRowIndex = this.currRow + 1 - this.nrRollUpRows;\n      const lastOutputScreen = this.lastOutputScreen;\n      if (lastOutputScreen) {\n        const prevLineTime = lastOutputScreen.rows[topRowIndex].cueStartTime;\n        const time = this.logger.time;\n        if (prevLineTime !== null && time !== null && prevLineTime < time) {\n          for (let i = 0; i < this.nrRollUpRows; i++) {\n            this.rows[newRow - this.nrRollUpRows + i + 1].copy(lastOutputScreen.rows[topRowIndex + i]);\n          }\n        }\n      }\n    }\n    this.currRow = newRow;\n    const row = this.rows[this.currRow];\n    if (pacData.indent !== null) {\n      const indent = pacData.indent;\n      const prevPos = Math.max(indent - 1, 0);\n      row.setCursor(pacData.indent);\n      pacData.color = row.chars[prevPos].penState.foreground;\n    }\n    const styles = {\n      foreground: pacData.color,\n      underline: pacData.underline,\n      italics: pacData.italics,\n      background: \"black\",\n      flash: false\n    };\n    this.setPen(styles);\n  }\n  /**\n   * Set background/extra foreground, but first do back_space, and then insert space (backwards compatibility).\n   */\n  setBkgData(bkgData) {\n    this.logger.log(2, () => \"bkgData = \" + stringify(bkgData));\n    this.backSpace();\n    this.setPen(bkgData);\n    this.insertChar(32);\n  }\n  setRollUpRows(nrRows) {\n    this.nrRollUpRows = nrRows;\n  }\n  rollUp() {\n    if (this.nrRollUpRows === null) {\n      this.logger.log(3, \"roll_up but nrRollUpRows not set yet\");\n      return;\n    }\n    this.logger.log(1, () => this.getDisplayText());\n    const topRowIndex = this.currRow + 1 - this.nrRollUpRows;\n    const topRow = this.rows.splice(topRowIndex, 1)[0];\n    topRow.clear();\n    this.rows.splice(this.currRow, 0, topRow);\n    this.logger.log(2, \"Rolling up\");\n  }\n  /**\n   * Get all non-empty rows with as unicode text.\n   */\n  getDisplayText(asOneRow) {\n    asOneRow = asOneRow || false;\n    const displayText = [];\n    let text = \"\";\n    let rowNr = -1;\n    for (let i = 0; i < NR_ROWS; i++) {\n      const rowText = this.rows[i].getTextString();\n      if (rowText) {\n        rowNr = i + 1;\n        if (asOneRow) {\n          displayText.push(\"Row \" + rowNr + \": '\" + rowText + \"'\");\n        } else {\n          displayText.push(rowText.trim());\n        }\n      }\n    }\n    if (displayText.length > 0) {\n      if (asOneRow) {\n        text = \"[\" + displayText.join(\" | \") + \"]\";\n      } else {\n        text = displayText.join(\"\\n\");\n      }\n    }\n    return text;\n  }\n  getTextAndFormat() {\n    return this.rows;\n  }\n}\nclass Cea608Channel {\n  constructor(channelNumber, outputFilter, logger2) {\n    this.chNr = void 0;\n    this.outputFilter = void 0;\n    this.mode = void 0;\n    this.verbose = void 0;\n    this.displayedMemory = void 0;\n    this.nonDisplayedMemory = void 0;\n    this.lastOutputScreen = void 0;\n    this.currRollUpRow = void 0;\n    this.writeScreen = void 0;\n    this.cueStartTime = void 0;\n    this.logger = void 0;\n    this.chNr = channelNumber;\n    this.outputFilter = outputFilter;\n    this.mode = null;\n    this.verbose = 0;\n    this.displayedMemory = new CaptionScreen(logger2);\n    this.nonDisplayedMemory = new CaptionScreen(logger2);\n    this.lastOutputScreen = new CaptionScreen(logger2);\n    this.currRollUpRow = this.displayedMemory.rows[NR_ROWS - 1];\n    this.writeScreen = this.displayedMemory;\n    this.mode = null;\n    this.cueStartTime = null;\n    this.logger = logger2;\n  }\n  reset() {\n    this.mode = null;\n    this.displayedMemory.reset();\n    this.nonDisplayedMemory.reset();\n    this.lastOutputScreen.reset();\n    this.outputFilter.reset();\n    this.currRollUpRow = this.displayedMemory.rows[NR_ROWS - 1];\n    this.writeScreen = this.displayedMemory;\n    this.mode = null;\n    this.cueStartTime = null;\n  }\n  getHandler() {\n    return this.outputFilter;\n  }\n  setHandler(newHandler) {\n    this.outputFilter = newHandler;\n  }\n  setPAC(pacData) {\n    this.writeScreen.setPAC(pacData);\n  }\n  setBkgData(bkgData) {\n    this.writeScreen.setBkgData(bkgData);\n  }\n  setMode(newMode) {\n    if (newMode === this.mode) {\n      return;\n    }\n    this.mode = newMode;\n    this.logger.log(2, () => \"MODE=\" + newMode);\n    if (this.mode === \"MODE_POP-ON\") {\n      this.writeScreen = this.nonDisplayedMemory;\n    } else {\n      this.writeScreen = this.displayedMemory;\n      this.writeScreen.reset();\n    }\n    if (this.mode !== \"MODE_ROLL-UP\") {\n      this.displayedMemory.nrRollUpRows = null;\n      this.nonDisplayedMemory.nrRollUpRows = null;\n    }\n    this.mode = newMode;\n  }\n  insertChars(chars2) {\n    for (let i = 0; i < chars2.length; i++) {\n      this.writeScreen.insertChar(chars2[i]);\n    }\n    const screen2 = this.writeScreen === this.displayedMemory ? \"DISP\" : \"NON_DISP\";\n    this.logger.log(2, () => screen2 + \": \" + this.writeScreen.getDisplayText(true));\n    if (this.mode === \"MODE_PAINT-ON\" || this.mode === \"MODE_ROLL-UP\") {\n      this.logger.log(1, () => \"DISPLAYED: \" + this.displayedMemory.getDisplayText(true));\n      this.outputDataUpdate();\n    }\n  }\n  ccRCL() {\n    this.logger.log(2, \"RCL - Resume Caption Loading\");\n    this.setMode(\"MODE_POP-ON\");\n  }\n  ccBS() {\n    this.logger.log(2, \"BS - BackSpace\");\n    if (this.mode === \"MODE_TEXT\") {\n      return;\n    }\n    this.writeScreen.backSpace();\n    if (this.writeScreen === this.displayedMemory) {\n      this.outputDataUpdate();\n    }\n  }\n  ccAOF() {\n  }\n  ccAON() {\n  }\n  ccDER() {\n    this.logger.log(2, \"DER- Delete to End of Row\");\n    this.writeScreen.clearToEndOfRow();\n    this.outputDataUpdate();\n  }\n  ccRU(nrRows) {\n    this.logger.log(2, \"RU(\" + nrRows + \") - Roll Up\");\n    this.writeScreen = this.displayedMemory;\n    this.setMode(\"MODE_ROLL-UP\");\n    this.writeScreen.setRollUpRows(nrRows);\n  }\n  ccFON() {\n    this.logger.log(2, \"FON - Flash On\");\n    this.writeScreen.setPen({\n      flash: true\n    });\n  }\n  ccRDC() {\n    this.logger.log(2, \"RDC - Resume Direct Captioning\");\n    this.setMode(\"MODE_PAINT-ON\");\n  }\n  ccTR() {\n    this.logger.log(2, \"TR\");\n    this.setMode(\"MODE_TEXT\");\n  }\n  ccRTD() {\n    this.logger.log(2, \"RTD\");\n    this.setMode(\"MODE_TEXT\");\n  }\n  ccEDM() {\n    this.logger.log(2, \"EDM - Erase Displayed Memory\");\n    this.displayedMemory.reset();\n    this.outputDataUpdate(true);\n  }\n  ccCR() {\n    this.logger.log(2, \"CR - Carriage Return\");\n    this.writeScreen.rollUp();\n    this.outputDataUpdate(true);\n  }\n  ccENM() {\n    this.logger.log(2, \"ENM - Erase Non-displayed Memory\");\n    this.nonDisplayedMemory.reset();\n  }\n  ccEOC() {\n    this.logger.log(2, \"EOC - End Of Caption\");\n    if (this.mode === \"MODE_POP-ON\") {\n      const tmp = this.displayedMemory;\n      this.displayedMemory = this.nonDisplayedMemory;\n      this.nonDisplayedMemory = tmp;\n      this.writeScreen = this.nonDisplayedMemory;\n      this.logger.log(1, () => \"DISP: \" + this.displayedMemory.getDisplayText());\n    }\n    this.outputDataUpdate(true);\n  }\n  ccTO(nrCols) {\n    this.logger.log(2, \"TO(\" + nrCols + \") - Tab Offset\");\n    this.writeScreen.moveCursor(nrCols);\n  }\n  ccMIDROW(secondByte) {\n    const styles = {\n      flash: false\n    };\n    styles.underline = secondByte % 2 === 1;\n    styles.italics = secondByte >= 46;\n    if (!styles.italics) {\n      const colorIndex = Math.floor(secondByte / 2) - 16;\n      const colors = [\"white\", \"green\", \"blue\", \"cyan\", \"red\", \"yellow\", \"magenta\"];\n      styles.foreground = colors[colorIndex];\n    } else {\n      styles.foreground = \"white\";\n    }\n    this.logger.log(2, \"MIDROW: \" + stringify(styles));\n    this.writeScreen.setPen(styles);\n  }\n  outputDataUpdate(dispatch = false) {\n    const time = this.logger.time;\n    if (time === null) {\n      return;\n    }\n    if (this.outputFilter) {\n      if (this.cueStartTime === null && !this.displayedMemory.isEmpty()) {\n        this.cueStartTime = time;\n      } else {\n        if (!this.displayedMemory.equals(this.lastOutputScreen)) {\n          this.outputFilter.newCue(this.cueStartTime, time, this.lastOutputScreen);\n          if (dispatch && this.outputFilter.dispatchCue) {\n            this.outputFilter.dispatchCue();\n          }\n          this.cueStartTime = this.displayedMemory.isEmpty() ? null : time;\n        }\n      }\n      this.lastOutputScreen.copy(this.displayedMemory);\n    }\n  }\n  cueSplitAtTime(t) {\n    if (this.outputFilter) {\n      if (!this.displayedMemory.isEmpty()) {\n        if (this.outputFilter.newCue) {\n          this.outputFilter.newCue(this.cueStartTime, t, this.displayedMemory);\n        }\n        this.cueStartTime = t;\n      }\n    }\n  }\n}\nclass Cea608Parser {\n  constructor(field, out1, out2) {\n    this.channels = void 0;\n    this.currentChannel = 0;\n    this.cmdHistory = createCmdHistory();\n    this.logger = void 0;\n    const logger2 = this.logger = new CaptionsLogger();\n    this.channels = [null, new Cea608Channel(field, out1, logger2), new Cea608Channel(field + 1, out2, logger2)];\n  }\n  getHandler(channel) {\n    return this.channels[channel].getHandler();\n  }\n  setHandler(channel, newHandler) {\n    this.channels[channel].setHandler(newHandler);\n  }\n  /**\n   * Add data for time t in forms of list of bytes (unsigned ints). The bytes are treated as pairs.\n   */\n  addData(time, byteList) {\n    this.logger.time = time;\n    for (let i = 0; i < byteList.length; i += 2) {\n      const a = byteList[i] & 127;\n      const b = byteList[i + 1] & 127;\n      let cmdFound = false;\n      let charsFound = null;\n      if (a === 0 && b === 0) {\n        continue;\n      } else {\n        this.logger.log(3, () => \"[\" + numArrayToHexArray([byteList[i], byteList[i + 1]]) + \"] -> (\" + numArrayToHexArray([a, b]) + \")\");\n      }\n      const cmdHistory = this.cmdHistory;\n      const isControlCode = a >= 16 && a <= 31;\n      if (isControlCode) {\n        if (hasCmdRepeated(a, b, cmdHistory)) {\n          setLastCmd(null, null, cmdHistory);\n          this.logger.log(3, () => \"Repeated command (\" + numArrayToHexArray([a, b]) + \") is dropped\");\n          continue;\n        }\n        setLastCmd(a, b, this.cmdHistory);\n        cmdFound = this.parseCmd(a, b);\n        if (!cmdFound) {\n          cmdFound = this.parseMidrow(a, b);\n        }\n        if (!cmdFound) {\n          cmdFound = this.parsePAC(a, b);\n        }\n        if (!cmdFound) {\n          cmdFound = this.parseBackgroundAttributes(a, b);\n        }\n      } else {\n        setLastCmd(null, null, cmdHistory);\n      }\n      if (!cmdFound) {\n        charsFound = this.parseChars(a, b);\n        if (charsFound) {\n          const currChNr = this.currentChannel;\n          if (currChNr && currChNr > 0) {\n            const channel = this.channels[currChNr];\n            channel.insertChars(charsFound);\n          } else {\n            this.logger.log(2, \"No channel found yet. TEXT-MODE?\");\n          }\n        }\n      }\n      if (!cmdFound && !charsFound) {\n        this.logger.log(2, () => \"Couldn't parse cleaned data \" + numArrayToHexArray([a, b]) + \" orig: \" + numArrayToHexArray([byteList[i], byteList[i + 1]]));\n      }\n    }\n  }\n  /**\n   * Parse Command.\n   * @returns True if a command was found\n   */\n  parseCmd(a, b) {\n    const cond1 = (a === 20 || a === 28 || a === 21 || a === 29) && b >= 32 && b <= 47;\n    const cond2 = (a === 23 || a === 31) && b >= 33 && b <= 35;\n    if (!(cond1 || cond2)) {\n      return false;\n    }\n    const chNr = a === 20 || a === 21 || a === 23 ? 1 : 2;\n    const channel = this.channels[chNr];\n    if (a === 20 || a === 21 || a === 28 || a === 29) {\n      if (b === 32) {\n        channel.ccRCL();\n      } else if (b === 33) {\n        channel.ccBS();\n      } else if (b === 34) {\n        channel.ccAOF();\n      } else if (b === 35) {\n        channel.ccAON();\n      } else if (b === 36) {\n        channel.ccDER();\n      } else if (b === 37) {\n        channel.ccRU(2);\n      } else if (b === 38) {\n        channel.ccRU(3);\n      } else if (b === 39) {\n        channel.ccRU(4);\n      } else if (b === 40) {\n        channel.ccFON();\n      } else if (b === 41) {\n        channel.ccRDC();\n      } else if (b === 42) {\n        channel.ccTR();\n      } else if (b === 43) {\n        channel.ccRTD();\n      } else if (b === 44) {\n        channel.ccEDM();\n      } else if (b === 45) {\n        channel.ccCR();\n      } else if (b === 46) {\n        channel.ccENM();\n      } else if (b === 47) {\n        channel.ccEOC();\n      }\n    } else {\n      channel.ccTO(b - 32);\n    }\n    this.currentChannel = chNr;\n    return true;\n  }\n  /**\n   * Parse midrow styling command\n   */\n  parseMidrow(a, b) {\n    let chNr = 0;\n    if ((a === 17 || a === 25) && b >= 32 && b <= 47) {\n      if (a === 17) {\n        chNr = 1;\n      } else {\n        chNr = 2;\n      }\n      if (chNr !== this.currentChannel) {\n        this.logger.log(0, \"Mismatch channel in midrow parsing\");\n        return false;\n      }\n      const channel = this.channels[chNr];\n      if (!channel) {\n        return false;\n      }\n      channel.ccMIDROW(b);\n      this.logger.log(3, () => \"MIDROW (\" + numArrayToHexArray([a, b]) + \")\");\n      return true;\n    }\n    return false;\n  }\n  /**\n   * Parse Preable Access Codes (Table 53).\n   * @returns {Boolean} Tells if PAC found\n   */\n  parsePAC(a, b) {\n    let row;\n    const case1 = (a >= 17 && a <= 23 || a >= 25 && a <= 31) && b >= 64 && b <= 127;\n    const case2 = (a === 16 || a === 24) && b >= 64 && b <= 95;\n    if (!(case1 || case2)) {\n      return false;\n    }\n    const chNr = a <= 23 ? 1 : 2;\n    if (b >= 64 && b <= 95) {\n      row = chNr === 1 ? rowsLowCh1[a] : rowsLowCh2[a];\n    } else {\n      row = chNr === 1 ? rowsHighCh1[a] : rowsHighCh2[a];\n    }\n    const channel = this.channels[chNr];\n    if (!channel) {\n      return false;\n    }\n    channel.setPAC(this.interpretPAC(row, b));\n    this.currentChannel = chNr;\n    return true;\n  }\n  /**\n   * Interpret the second byte of the pac, and return the information.\n   * @returns pacData with style parameters\n   */\n  interpretPAC(row, byte) {\n    let pacIndex;\n    const pacData = {\n      color: null,\n      italics: false,\n      indent: null,\n      underline: false,\n      row\n    };\n    if (byte > 95) {\n      pacIndex = byte - 96;\n    } else {\n      pacIndex = byte - 64;\n    }\n    pacData.underline = (pacIndex & 1) === 1;\n    if (pacIndex <= 13) {\n      pacData.color = [\"white\", \"green\", \"blue\", \"cyan\", \"red\", \"yellow\", \"magenta\", \"white\"][Math.floor(pacIndex / 2)];\n    } else if (pacIndex <= 15) {\n      pacData.italics = true;\n      pacData.color = \"white\";\n    } else {\n      pacData.indent = Math.floor((pacIndex - 16) / 2) * 4;\n    }\n    return pacData;\n  }\n  /**\n   * Parse characters.\n   * @returns An array with 1 to 2 codes corresponding to chars, if found. null otherwise.\n   */\n  parseChars(a, b) {\n    let channelNr;\n    let charCodes = null;\n    let charCode1 = null;\n    if (a >= 25) {\n      channelNr = 2;\n      charCode1 = a - 8;\n    } else {\n      channelNr = 1;\n      charCode1 = a;\n    }\n    if (charCode1 >= 17 && charCode1 <= 19) {\n      let oneCode;\n      if (charCode1 === 17) {\n        oneCode = b + 80;\n      } else if (charCode1 === 18) {\n        oneCode = b + 112;\n      } else {\n        oneCode = b + 144;\n      }\n      this.logger.log(2, () => \"Special char '\" + getCharForByte(oneCode) + \"' in channel \" + channelNr);\n      charCodes = [oneCode];\n    } else if (a >= 32 && a <= 127) {\n      charCodes = b === 0 ? [a] : [a, b];\n    }\n    if (charCodes) {\n      this.logger.log(3, () => \"Char codes =  \" + numArrayToHexArray(charCodes).join(\",\"));\n    }\n    return charCodes;\n  }\n  /**\n   * Parse extended background attributes as well as new foreground color black.\n   * @returns True if background attributes are found\n   */\n  parseBackgroundAttributes(a, b) {\n    const case1 = (a === 16 || a === 24) && b >= 32 && b <= 47;\n    const case2 = (a === 23 || a === 31) && b >= 45 && b <= 47;\n    if (!(case1 || case2)) {\n      return false;\n    }\n    let index;\n    const bkgData = {};\n    if (a === 16 || a === 24) {\n      index = Math.floor((b - 32) / 2);\n      bkgData.background = backgroundColors[index];\n      if (b % 2 === 1) {\n        bkgData.background = bkgData.background + \"_semi\";\n      }\n    } else if (b === 45) {\n      bkgData.background = \"transparent\";\n    } else {\n      bkgData.foreground = \"black\";\n      if (b === 47) {\n        bkgData.underline = true;\n      }\n    }\n    const chNr = a <= 23 ? 1 : 2;\n    const channel = this.channels[chNr];\n    channel.setBkgData(bkgData);\n    return true;\n  }\n  /**\n   * Reset state of parser and its channels.\n   */\n  reset() {\n    for (let i = 0; i < Object.keys(this.channels).length; i++) {\n      const channel = this.channels[i];\n      if (channel) {\n        channel.reset();\n      }\n    }\n    setLastCmd(null, null, this.cmdHistory);\n  }\n  /**\n   * Trigger the generation of a cue, and the start of a new one if displayScreens are not empty.\n   */\n  cueSplitAtTime(t) {\n    for (let i = 0; i < this.channels.length; i++) {\n      const channel = this.channels[i];\n      if (channel) {\n        channel.cueSplitAtTime(t);\n      }\n    }\n  }\n}\nfunction setLastCmd(a, b, cmdHistory) {\n  cmdHistory.a = a;\n  cmdHistory.b = b;\n}\nfunction hasCmdRepeated(a, b, cmdHistory) {\n  return cmdHistory.a === a && cmdHistory.b === b;\n}\nfunction createCmdHistory() {\n  return {\n    a: null,\n    b: null\n  };\n}\nvar VTTCue = function() {\n  if (optionalSelf != null && optionalSelf.VTTCue) {\n    return self.VTTCue;\n  }\n  const AllowedDirections = [\"\", \"lr\", \"rl\"];\n  const AllowedAlignments = [\"start\", \"middle\", \"end\", \"left\", \"right\"];\n  function isAllowedValue(allowed, value) {\n    if (typeof value !== \"string\") {\n      return false;\n    }\n    if (!Array.isArray(allowed)) {\n      return false;\n    }\n    const lcValue = value.toLowerCase();\n    if (~allowed.indexOf(lcValue)) {\n      return lcValue;\n    }\n    return false;\n  }\n  function findDirectionSetting(value) {\n    return isAllowedValue(AllowedDirections, value);\n  }\n  function findAlignSetting(value) {\n    return isAllowedValue(AllowedAlignments, value);\n  }\n  function extend2(obj, ...rest) {\n    let i = 1;\n    for (; i < arguments.length; i++) {\n      const cobj = arguments[i];\n      for (const p in cobj) {\n        obj[p] = cobj[p];\n      }\n    }\n    return obj;\n  }\n  function VTTCue2(startTime, endTime, text) {\n    const cue = this;\n    const baseObj = {\n      enumerable: true\n    };\n    cue.hasBeenReset = false;\n    let _id = \"\";\n    let _pauseOnExit = false;\n    let _startTime = startTime;\n    let _endTime = endTime;\n    let _text = text;\n    let _region = null;\n    let _vertical = \"\";\n    let _snapToLines = true;\n    let _line = \"auto\";\n    let _lineAlign = \"start\";\n    let _position = 50;\n    let _positionAlign = \"middle\";\n    let _size = 50;\n    let _align = \"middle\";\n    Object.defineProperty(cue, \"id\", extend2({}, baseObj, {\n      get: function() {\n        return _id;\n      },\n      set: function(value) {\n        _id = \"\" + value;\n      }\n    }));\n    Object.defineProperty(cue, \"pauseOnExit\", extend2({}, baseObj, {\n      get: function() {\n        return _pauseOnExit;\n      },\n      set: function(value) {\n        _pauseOnExit = !!value;\n      }\n    }));\n    Object.defineProperty(cue, \"startTime\", extend2({}, baseObj, {\n      get: function() {\n        return _startTime;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"Start time must be set to a number.\");\n        }\n        _startTime = value;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"endTime\", extend2({}, baseObj, {\n      get: function() {\n        return _endTime;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\") {\n          throw new TypeError(\"End time must be set to a number.\");\n        }\n        _endTime = value;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"text\", extend2({}, baseObj, {\n      get: function() {\n        return _text;\n      },\n      set: function(value) {\n        _text = \"\" + value;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"region\", extend2({}, baseObj, {\n      get: function() {\n        return _region;\n      },\n      set: function(value) {\n        _region = value;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"vertical\", extend2({}, baseObj, {\n      get: function() {\n        return _vertical;\n      },\n      set: function(value) {\n        const setting = findDirectionSetting(value);\n        if (setting === false) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _vertical = setting;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"snapToLines\", extend2({}, baseObj, {\n      get: function() {\n        return _snapToLines;\n      },\n      set: function(value) {\n        _snapToLines = !!value;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"line\", extend2({}, baseObj, {\n      get: function() {\n        return _line;\n      },\n      set: function(value) {\n        if (typeof value !== \"number\" && value !== \"auto\") {\n          throw new SyntaxError(\"An invalid number or illegal string was specified.\");\n        }\n        _line = value;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"lineAlign\", extend2({}, baseObj, {\n      get: function() {\n        return _lineAlign;\n      },\n      set: function(value) {\n        const setting = findAlignSetting(value);\n        if (!setting) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _lineAlign = setting;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"position\", extend2({}, baseObj, {\n      get: function() {\n        return _position;\n      },\n      set: function(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Position must be between 0 and 100.\");\n        }\n        _position = value;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"positionAlign\", extend2({}, baseObj, {\n      get: function() {\n        return _positionAlign;\n      },\n      set: function(value) {\n        const setting = findAlignSetting(value);\n        if (!setting) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _positionAlign = setting;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"size\", extend2({}, baseObj, {\n      get: function() {\n        return _size;\n      },\n      set: function(value) {\n        if (value < 0 || value > 100) {\n          throw new Error(\"Size must be between 0 and 100.\");\n        }\n        _size = value;\n        this.hasBeenReset = true;\n      }\n    }));\n    Object.defineProperty(cue, \"align\", extend2({}, baseObj, {\n      get: function() {\n        return _align;\n      },\n      set: function(value) {\n        const setting = findAlignSetting(value);\n        if (!setting) {\n          throw new SyntaxError(\"An invalid or illegal string was specified.\");\n        }\n        _align = setting;\n        this.hasBeenReset = true;\n      }\n    }));\n    cue.displayState = void 0;\n  }\n  VTTCue2.prototype.getCueAsHTML = function() {\n    const WebVTT2 = self.WebVTT;\n    return WebVTT2.convertCueToDOMTree(self, this.text);\n  };\n  return VTTCue2;\n}();\nclass StringDecoder {\n  decode(data, options) {\n    if (!data) {\n      return \"\";\n    }\n    if (typeof data !== \"string\") {\n      throw new Error(\"Error - expected string data.\");\n    }\n    return decodeURIComponent(encodeURIComponent(data));\n  }\n}\nfunction parseTimeStamp(input) {\n  function computeSeconds(h, m2, s, f) {\n    return (h | 0) * 3600 + (m2 | 0) * 60 + (s | 0) + parseFloat(f || 0);\n  }\n  const m = input.match(/^(?:(\\d+):)?(\\d{2}):(\\d{2})(\\.\\d+)?/);\n  if (!m) {\n    return null;\n  }\n  if (parseFloat(m[2]) > 59) {\n    return computeSeconds(m[2], m[3], 0, m[4]);\n  }\n  return computeSeconds(m[1], m[2], m[3], m[4]);\n}\nclass Settings {\n  constructor() {\n    this.values = /* @__PURE__ */ Object.create(null);\n  }\n  // Only accept the first assignment to any key.\n  set(k, v) {\n    if (!this.get(k) && v !== \"\") {\n      this.values[k] = v;\n    }\n  }\n  // Return the value for a key, or a default value.\n  // If 'defaultKey' is passed then 'dflt' is assumed to be an object with\n  // a number of possible default values as properties where 'defaultKey' is\n  // the key of the property that will be chosen; otherwise it's assumed to be\n  // a single value.\n  get(k, dflt, defaultKey) {\n    if (defaultKey) {\n      return this.has(k) ? this.values[k] : dflt[defaultKey];\n    }\n    return this.has(k) ? this.values[k] : dflt;\n  }\n  // Check whether we have a value for a key.\n  has(k) {\n    return k in this.values;\n  }\n  // Accept a setting if its one of the given alternatives.\n  alt(k, v, a) {\n    for (let n = 0; n < a.length; ++n) {\n      if (v === a[n]) {\n        this.set(k, v);\n        break;\n      }\n    }\n  }\n  // Accept a setting if its a valid (signed) integer.\n  integer(k, v) {\n    if (/^-?\\d+$/.test(v)) {\n      this.set(k, parseInt(v, 10));\n    }\n  }\n  // Accept a setting if its a valid percentage.\n  percent(k, v) {\n    if (/^([\\d]{1,3})(\\.[\\d]*)?%$/.test(v)) {\n      const percent = parseFloat(v);\n      if (percent >= 0 && percent <= 100) {\n        this.set(k, percent);\n        return true;\n      }\n    }\n    return false;\n  }\n}\nfunction parseOptions(input, callback, keyValueDelim, groupDelim) {\n  const groups = groupDelim ? input.split(groupDelim) : [input];\n  for (const i in groups) {\n    if (typeof groups[i] !== \"string\") {\n      continue;\n    }\n    const kv = groups[i].split(keyValueDelim);\n    if (kv.length !== 2) {\n      continue;\n    }\n    const k = kv[0];\n    const v = kv[1];\n    callback(k, v);\n  }\n}\nconst defaults = new VTTCue(0, 0, \"\");\nconst center = defaults.align === \"middle\" ? \"middle\" : \"center\";\nfunction parseCue(input, cue, regionList) {\n  const oInput = input;\n  function consumeTimeStamp() {\n    const ts = parseTimeStamp(input);\n    if (ts === null) {\n      throw new Error(\"Malformed timestamp: \" + oInput);\n    }\n    input = input.replace(/^[^\\sa-zA-Z-]+/, \"\");\n    return ts;\n  }\n  function consumeCueSettings(input2, cue2) {\n    const settings = new Settings();\n    parseOptions(input2, function(k, v) {\n      let vals;\n      switch (k) {\n        case \"region\":\n          for (let i = regionList.length - 1; i >= 0; i--) {\n            if (regionList[i].id === v) {\n              settings.set(k, regionList[i].region);\n              break;\n            }\n          }\n          break;\n        case \"vertical\":\n          settings.alt(k, v, [\"rl\", \"lr\"]);\n          break;\n        case \"line\":\n          vals = v.split(\",\");\n          settings.integer(k, vals[0]);\n          if (settings.percent(k, vals[0])) {\n            settings.set(\"snapToLines\", false);\n          }\n          settings.alt(k, vals[0], [\"auto\"]);\n          if (vals.length === 2) {\n            settings.alt(\"lineAlign\", vals[1], [\"start\", center, \"end\"]);\n          }\n          break;\n        case \"position\":\n          vals = v.split(\",\");\n          settings.percent(k, vals[0]);\n          if (vals.length === 2) {\n            settings.alt(\"positionAlign\", vals[1], [\"start\", center, \"end\", \"line-left\", \"line-right\", \"auto\"]);\n          }\n          break;\n        case \"size\":\n          settings.percent(k, v);\n          break;\n        case \"align\":\n          settings.alt(k, v, [\"start\", center, \"end\", \"left\", \"right\"]);\n          break;\n      }\n    }, /:/, /\\s/);\n    cue2.region = settings.get(\"region\", null);\n    cue2.vertical = settings.get(\"vertical\", \"\");\n    let line = settings.get(\"line\", \"auto\");\n    if (line === \"auto\" && defaults.line === -1) {\n      line = -1;\n    }\n    cue2.line = line;\n    cue2.lineAlign = settings.get(\"lineAlign\", \"start\");\n    cue2.snapToLines = settings.get(\"snapToLines\", true);\n    cue2.size = settings.get(\"size\", 100);\n    cue2.align = settings.get(\"align\", center);\n    let position = settings.get(\"position\", \"auto\");\n    if (position === \"auto\" && defaults.position === 50) {\n      position = cue2.align === \"start\" || cue2.align === \"left\" ? 0 : cue2.align === \"end\" || cue2.align === \"right\" ? 100 : 50;\n    }\n    cue2.position = position;\n  }\n  function skipWhitespace() {\n    input = input.replace(/^\\s+/, \"\");\n  }\n  skipWhitespace();\n  cue.startTime = consumeTimeStamp();\n  skipWhitespace();\n  if (input.slice(0, 3) !== \"-->\") {\n    throw new Error(\"Malformed time stamp (time stamps must be separated by '-->'): \" + oInput);\n  }\n  input = input.slice(3);\n  skipWhitespace();\n  cue.endTime = consumeTimeStamp();\n  skipWhitespace();\n  consumeCueSettings(input, cue);\n}\nfunction fixLineBreaks(input) {\n  return input.replace(/<br(?: \\/)?>/gi, \"\\n\");\n}\nclass VTTParser {\n  constructor() {\n    this.state = \"INITIAL\";\n    this.buffer = \"\";\n    this.decoder = new StringDecoder();\n    this.regionList = [];\n    this.cue = null;\n    this.oncue = void 0;\n    this.onparsingerror = void 0;\n    this.onflush = void 0;\n  }\n  parse(data) {\n    const _this = this;\n    if (data) {\n      _this.buffer += _this.decoder.decode(data, {\n        stream: true\n      });\n    }\n    function collectNextLine() {\n      let buffer2 = _this.buffer;\n      let pos = 0;\n      buffer2 = fixLineBreaks(buffer2);\n      while (pos < buffer2.length && buffer2[pos] !== \"\\r\" && buffer2[pos] !== \"\\n\") {\n        ++pos;\n      }\n      const line = buffer2.slice(0, pos);\n      if (buffer2[pos] === \"\\r\") {\n        ++pos;\n      }\n      if (buffer2[pos] === \"\\n\") {\n        ++pos;\n      }\n      _this.buffer = buffer2.slice(pos);\n      return line;\n    }\n    function parseHeader2(input) {\n      parseOptions(input, function(k, v) {\n      }, /:/);\n    }\n    try {\n      let line = \"\";\n      if (_this.state === \"INITIAL\") {\n        if (!/\\r\\n|\\n/.test(_this.buffer)) {\n          return this;\n        }\n        line = collectNextLine();\n        const m = line.match(/^(ï»¿)?WEBVTT([ \\t].*)?$/);\n        if (!(m != null && m[0])) {\n          throw new Error(\"Malformed WebVTT signature.\");\n        }\n        _this.state = \"HEADER\";\n      }\n      let alreadyCollectedLine = false;\n      while (_this.buffer) {\n        if (!/\\r\\n|\\n/.test(_this.buffer)) {\n          return this;\n        }\n        if (!alreadyCollectedLine) {\n          line = collectNextLine();\n        } else {\n          alreadyCollectedLine = false;\n        }\n        switch (_this.state) {\n          case \"HEADER\":\n            if (/:/.test(line)) {\n              parseHeader2(line);\n            } else if (!line) {\n              _this.state = \"ID\";\n            }\n            continue;\n          case \"NOTE\":\n            if (!line) {\n              _this.state = \"ID\";\n            }\n            continue;\n          case \"ID\":\n            if (/^NOTE($|[ \\t])/.test(line)) {\n              _this.state = \"NOTE\";\n              break;\n            }\n            if (!line) {\n              continue;\n            }\n            _this.cue = new VTTCue(0, 0, \"\");\n            _this.state = \"CUE\";\n            if (line.indexOf(\"-->\") === -1) {\n              _this.cue.id = line;\n              continue;\n            }\n          // Process line as start of a cue.\n          /* falls through */\n          case \"CUE\":\n            if (!_this.cue) {\n              _this.state = \"BADCUE\";\n              continue;\n            }\n            try {\n              parseCue(line, _this.cue, _this.regionList);\n            } catch (e) {\n              _this.cue = null;\n              _this.state = \"BADCUE\";\n              continue;\n            }\n            _this.state = \"CUETEXT\";\n            continue;\n          case \"CUETEXT\":\n            {\n              const hasSubstring = line.indexOf(\"-->\") !== -1;\n              if (!line || hasSubstring && (alreadyCollectedLine = true)) {\n                if (_this.oncue && _this.cue) {\n                  _this.oncue(_this.cue);\n                }\n                _this.cue = null;\n                _this.state = \"ID\";\n                continue;\n              }\n              if (_this.cue === null) {\n                continue;\n              }\n              if (_this.cue.text) {\n                _this.cue.text += \"\\n\";\n              }\n              _this.cue.text += line;\n            }\n            continue;\n          case \"BADCUE\":\n            if (!line) {\n              _this.state = \"ID\";\n            }\n        }\n      }\n    } catch (e) {\n      if (_this.state === \"CUETEXT\" && _this.cue && _this.oncue) {\n        _this.oncue(_this.cue);\n      }\n      _this.cue = null;\n      _this.state = _this.state === \"INITIAL\" ? \"BADWEBVTT\" : \"BADCUE\";\n    }\n    return this;\n  }\n  flush() {\n    const _this = this;\n    try {\n      if (_this.cue || _this.state === \"HEADER\") {\n        _this.buffer += \"\\n\\n\";\n        _this.parse();\n      }\n      if (_this.state === \"INITIAL\" || _this.state === \"BADWEBVTT\") {\n        throw new Error(\"Malformed WebVTT signature.\");\n      }\n    } catch (e) {\n      if (_this.onparsingerror) {\n        _this.onparsingerror(e);\n      }\n    }\n    if (_this.onflush) {\n      _this.onflush();\n    }\n    return this;\n  }\n}\nconst LINEBREAKS = /\\r\\n|\\n\\r|\\n|\\r/g;\nconst startsWith = function startsWith2(inputString, searchString, position = 0) {\n  return inputString.slice(position, position + searchString.length) === searchString;\n};\nconst cueString2millis = function cueString2millis2(timeString) {\n  let ts = parseInt(timeString.slice(-3));\n  const secs = parseInt(timeString.slice(-6, -4));\n  const mins = parseInt(timeString.slice(-9, -7));\n  const hours = timeString.length > 9 ? parseInt(timeString.substring(0, timeString.indexOf(\":\"))) : 0;\n  if (!isFiniteNumber(ts) || !isFiniteNumber(secs) || !isFiniteNumber(mins) || !isFiniteNumber(hours)) {\n    throw Error(`Malformed X-TIMESTAMP-MAP: Local:${timeString}`);\n  }\n  ts += 1e3 * secs;\n  ts += 60 * 1e3 * mins;\n  ts += 60 * 60 * 1e3 * hours;\n  return ts;\n};\nfunction generateCueId(startTime, endTime, text) {\n  return hash(startTime.toString()) + hash(endTime.toString()) + hash(text);\n}\nconst calculateOffset = function calculateOffset2(vttCCs, cc, presentationTime) {\n  let currCC = vttCCs[cc];\n  let prevCC = vttCCs[currCC.prevCC];\n  if (!prevCC || !prevCC.new && currCC.new) {\n    vttCCs.ccOffset = vttCCs.presentationOffset = currCC.start;\n    currCC.new = false;\n    return;\n  }\n  while ((_prevCC = prevCC) != null && _prevCC.new) {\n    var _prevCC;\n    vttCCs.ccOffset += currCC.start - prevCC.start;\n    currCC.new = false;\n    currCC = prevCC;\n    prevCC = vttCCs[currCC.prevCC];\n  }\n  vttCCs.presentationOffset = presentationTime;\n};\nfunction parseWebVTT(vttByteArray, initPTS, vttCCs, cc, timeOffset, callBack, errorCallBack) {\n  const parser = new VTTParser();\n  const vttLines = utf8ArrayToStr(new Uint8Array(vttByteArray)).trim().replace(LINEBREAKS, \"\\n\").split(\"\\n\");\n  const cues = [];\n  const init90kHz = initPTS ? toMpegTsClockFromTimescale(initPTS.baseTime, initPTS.timescale) : 0;\n  let cueTime = \"00:00.000\";\n  let timestampMapMPEGTS = 0;\n  let timestampMapLOCAL = 0;\n  let parsingError;\n  let inHeader = true;\n  parser.oncue = function(cue) {\n    const currCC = vttCCs[cc];\n    let cueOffset = vttCCs.ccOffset;\n    const webVttMpegTsMapOffset = (timestampMapMPEGTS - init90kHz) / 9e4;\n    if (currCC != null && currCC.new) {\n      if (timestampMapLOCAL !== void 0) {\n        cueOffset = vttCCs.ccOffset = currCC.start;\n      } else {\n        calculateOffset(vttCCs, cc, webVttMpegTsMapOffset);\n      }\n    }\n    if (webVttMpegTsMapOffset) {\n      if (!initPTS) {\n        parsingError = new Error(\"Missing initPTS for VTT MPEGTS\");\n        return;\n      }\n      cueOffset = webVttMpegTsMapOffset - vttCCs.presentationOffset;\n    }\n    const duration = cue.endTime - cue.startTime;\n    const startTime = normalizePts((cue.startTime + cueOffset - timestampMapLOCAL) * 9e4, timeOffset * 9e4) / 9e4;\n    cue.startTime = Math.max(startTime, 0);\n    cue.endTime = Math.max(startTime + duration, 0);\n    const text = cue.text.trim();\n    cue.text = decodeURIComponent(encodeURIComponent(text));\n    if (!cue.id) {\n      cue.id = generateCueId(cue.startTime, cue.endTime, text);\n    }\n    if (cue.endTime > 0) {\n      cues.push(cue);\n    }\n  };\n  parser.onparsingerror = function(error) {\n    parsingError = error;\n  };\n  parser.onflush = function() {\n    if (parsingError) {\n      errorCallBack(parsingError);\n      return;\n    }\n    callBack(cues);\n  };\n  vttLines.forEach((line) => {\n    if (inHeader) {\n      if (startsWith(line, \"X-TIMESTAMP-MAP=\")) {\n        inHeader = false;\n        line.slice(16).split(\",\").forEach((timestamp) => {\n          if (startsWith(timestamp, \"LOCAL:\")) {\n            cueTime = timestamp.slice(6);\n          } else if (startsWith(timestamp, \"MPEGTS:\")) {\n            timestampMapMPEGTS = parseInt(timestamp.slice(7));\n          }\n        });\n        try {\n          timestampMapLOCAL = cueString2millis(cueTime) / 1e3;\n        } catch (error) {\n          parsingError = error;\n        }\n        return;\n      } else if (line === \"\") {\n        inHeader = false;\n      }\n    }\n    parser.parse(line + \"\\n\");\n  });\n  parser.flush();\n}\nconst IMSC1_CODEC = \"stpp.ttml.im1t\";\nconst HMSF_REGEX = /^(\\d{2,}):(\\d{2}):(\\d{2}):(\\d{2})\\.?(\\d+)?$/;\nconst TIME_UNIT_REGEX = /^(\\d*(?:\\.\\d*)?)(h|m|s|ms|f|t)$/;\nconst textAlignToLineAlign = {\n  left: \"start\",\n  center: \"center\",\n  right: \"end\",\n  start: \"start\",\n  end: \"end\"\n};\nfunction parseIMSC1(payload, initPTS, callBack, errorCallBack) {\n  const results = findBox(new Uint8Array(payload), [\"mdat\"]);\n  if (results.length === 0) {\n    errorCallBack(new Error(\"Could not parse IMSC1 mdat\"));\n    return;\n  }\n  const ttmlList = results.map((mdat) => utf8ArrayToStr(mdat));\n  const syncTime = toTimescaleFromScale(initPTS.baseTime, 1, initPTS.timescale);\n  try {\n    ttmlList.forEach((ttml) => callBack(parseTTML(ttml, syncTime)));\n  } catch (error) {\n    errorCallBack(error);\n  }\n}\nfunction parseTTML(ttml, syncTime) {\n  const parser = new DOMParser();\n  const xmlDoc = parser.parseFromString(ttml, \"text/xml\");\n  const tt = xmlDoc.getElementsByTagName(\"tt\")[0];\n  if (!tt) {\n    throw new Error(\"Invalid ttml\");\n  }\n  const defaultRateInfo = {\n    frameRate: 30,\n    subFrameRate: 1,\n    frameRateMultiplier: 0,\n    tickRate: 0\n  };\n  const rateInfo = Object.keys(defaultRateInfo).reduce((result, key) => {\n    result[key] = tt.getAttribute(`ttp:${key}`) || defaultRateInfo[key];\n    return result;\n  }, {});\n  const trim2 = tt.getAttribute(\"xml:space\") !== \"preserve\";\n  const styleElements = collectionToDictionary(getElementCollection(tt, \"styling\", \"style\"));\n  const regionElements = collectionToDictionary(getElementCollection(tt, \"layout\", \"region\"));\n  const cueElements = getElementCollection(tt, \"body\", \"[begin]\");\n  return [].map.call(cueElements, (cueElement) => {\n    const cueText = getTextContent(cueElement, trim2);\n    if (!cueText || !cueElement.hasAttribute(\"begin\")) {\n      return null;\n    }\n    const startTime = parseTtmlTime(cueElement.getAttribute(\"begin\"), rateInfo);\n    const duration = parseTtmlTime(cueElement.getAttribute(\"dur\"), rateInfo);\n    let endTime = parseTtmlTime(cueElement.getAttribute(\"end\"), rateInfo);\n    if (startTime === null) {\n      throw timestampParsingError(cueElement);\n    }\n    if (endTime === null) {\n      if (duration === null) {\n        throw timestampParsingError(cueElement);\n      }\n      endTime = startTime + duration;\n    }\n    const cue = new VTTCue(startTime - syncTime, endTime - syncTime, cueText);\n    cue.id = generateCueId(cue.startTime, cue.endTime, cue.text);\n    const region = regionElements[cueElement.getAttribute(\"region\")];\n    const style = styleElements[cueElement.getAttribute(\"style\")];\n    const styles = getTtmlStyles(region, style, styleElements);\n    const {\n      textAlign\n    } = styles;\n    if (textAlign) {\n      const lineAlign = textAlignToLineAlign[textAlign];\n      if (lineAlign) {\n        cue.lineAlign = lineAlign;\n      }\n      cue.align = textAlign;\n    }\n    _extends(cue, styles);\n    return cue;\n  }).filter((cue) => cue !== null);\n}\nfunction getElementCollection(fromElement, parentName, childName) {\n  const parent = fromElement.getElementsByTagName(parentName)[0];\n  if (parent) {\n    return [].slice.call(parent.querySelectorAll(childName));\n  }\n  return [];\n}\nfunction collectionToDictionary(elementsWithId) {\n  return elementsWithId.reduce((dict, element) => {\n    const id = element.getAttribute(\"xml:id\");\n    if (id) {\n      dict[id] = element;\n    }\n    return dict;\n  }, {});\n}\nfunction getTextContent(element, trim2) {\n  return [].slice.call(element.childNodes).reduce((str, node, i) => {\n    var _node$childNodes;\n    if (node.nodeName === \"br\" && i) {\n      return str + \"\\n\";\n    }\n    if ((_node$childNodes = node.childNodes) != null && _node$childNodes.length) {\n      return getTextContent(node, trim2);\n    } else if (trim2) {\n      return str + node.textContent.trim().replace(/\\s+/g, \" \");\n    }\n    return str + node.textContent;\n  }, \"\");\n}\nfunction getTtmlStyles(region, style, styleElements) {\n  const ttsNs = \"http://www.w3.org/ns/ttml#styling\";\n  let regionStyle = null;\n  const styleAttributes = [\n    \"displayAlign\",\n    \"textAlign\",\n    \"color\",\n    \"backgroundColor\",\n    \"fontSize\",\n    \"fontFamily\"\n    // 'fontWeight',\n    // 'lineHeight',\n    // 'wrapOption',\n    // 'fontStyle',\n    // 'direction',\n    // 'writingMode'\n  ];\n  const regionStyleName = region != null && region.hasAttribute(\"style\") ? region.getAttribute(\"style\") : null;\n  if (regionStyleName && styleElements.hasOwnProperty(regionStyleName)) {\n    regionStyle = styleElements[regionStyleName];\n  }\n  return styleAttributes.reduce((styles, name) => {\n    const value = getAttributeNS(style, ttsNs, name) || getAttributeNS(region, ttsNs, name) || getAttributeNS(regionStyle, ttsNs, name);\n    if (value) {\n      styles[name] = value;\n    }\n    return styles;\n  }, {});\n}\nfunction getAttributeNS(element, ns, name) {\n  if (!element) {\n    return null;\n  }\n  return element.hasAttributeNS(ns, name) ? element.getAttributeNS(ns, name) : null;\n}\nfunction timestampParsingError(node) {\n  return new Error(`Could not parse ttml timestamp ${node}`);\n}\nfunction parseTtmlTime(timeAttributeValue, rateInfo) {\n  if (!timeAttributeValue) {\n    return null;\n  }\n  let seconds = parseTimeStamp(timeAttributeValue);\n  if (seconds === null) {\n    if (HMSF_REGEX.test(timeAttributeValue)) {\n      seconds = parseHoursMinutesSecondsFrames(timeAttributeValue, rateInfo);\n    } else if (TIME_UNIT_REGEX.test(timeAttributeValue)) {\n      seconds = parseTimeUnits(timeAttributeValue, rateInfo);\n    }\n  }\n  return seconds;\n}\nfunction parseHoursMinutesSecondsFrames(timeAttributeValue, rateInfo) {\n  const m = HMSF_REGEX.exec(timeAttributeValue);\n  const frames = (m[4] | 0) + (m[5] | 0) / rateInfo.subFrameRate;\n  return (m[1] | 0) * 3600 + (m[2] | 0) * 60 + (m[3] | 0) + frames / rateInfo.frameRate;\n}\nfunction parseTimeUnits(timeAttributeValue, rateInfo) {\n  const m = TIME_UNIT_REGEX.exec(timeAttributeValue);\n  const value = Number(m[1]);\n  const unit = m[2];\n  switch (unit) {\n    case \"h\":\n      return value * 3600;\n    case \"m\":\n      return value * 60;\n    case \"ms\":\n      return value * 1e3;\n    case \"f\":\n      return value / rateInfo.frameRate;\n    case \"t\":\n      return value / rateInfo.tickRate;\n  }\n  return value;\n}\nclass OutputFilter {\n  constructor(timelineController, trackName) {\n    this.timelineController = void 0;\n    this.cueRanges = [];\n    this.trackName = void 0;\n    this.startTime = null;\n    this.endTime = null;\n    this.screen = null;\n    this.timelineController = timelineController;\n    this.trackName = trackName;\n  }\n  dispatchCue() {\n    if (this.startTime === null) {\n      return;\n    }\n    this.timelineController.addCues(this.trackName, this.startTime, this.endTime, this.screen, this.cueRanges);\n    this.startTime = null;\n  }\n  newCue(startTime, endTime, screen2) {\n    if (this.startTime === null || this.startTime > startTime) {\n      this.startTime = startTime;\n    }\n    this.endTime = endTime;\n    this.screen = screen2;\n    this.timelineController.createCaptionsTrack(this.trackName);\n  }\n  reset() {\n    this.cueRanges = [];\n    this.startTime = null;\n  }\n}\nclass TimelineController {\n  constructor(hls) {\n    this.hls = void 0;\n    this.media = null;\n    this.config = void 0;\n    this.enabled = true;\n    this.Cues = void 0;\n    this.textTracks = [];\n    this.tracks = [];\n    this.initPTS = [];\n    this.unparsedVttFrags = [];\n    this.captionsTracks = {};\n    this.nonNativeCaptionsTracks = {};\n    this.cea608Parser1 = void 0;\n    this.cea608Parser2 = void 0;\n    this.lastCc = -1;\n    this.lastSn = -1;\n    this.lastPartIndex = -1;\n    this.prevCC = -1;\n    this.vttCCs = newVTTCCs();\n    this.captionsProperties = void 0;\n    this.hls = hls;\n    this.config = hls.config;\n    this.Cues = hls.config.cueHandler;\n    this.captionsProperties = {\n      textTrack1: {\n        label: this.config.captionsTextTrack1Label,\n        languageCode: this.config.captionsTextTrack1LanguageCode\n      },\n      textTrack2: {\n        label: this.config.captionsTextTrack2Label,\n        languageCode: this.config.captionsTextTrack2LanguageCode\n      },\n      textTrack3: {\n        label: this.config.captionsTextTrack3Label,\n        languageCode: this.config.captionsTextTrack3LanguageCode\n      },\n      textTrack4: {\n        label: this.config.captionsTextTrack4Label,\n        languageCode: this.config.captionsTextTrack4LanguageCode\n      }\n    };\n    hls.on(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    hls.on(Events.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this);\n    hls.on(Events.FRAG_LOADING, this.onFragLoading, this);\n    hls.on(Events.FRAG_LOADED, this.onFragLoaded, this);\n    hls.on(Events.FRAG_PARSING_USERDATA, this.onFragParsingUserdata, this);\n    hls.on(Events.FRAG_DECRYPTED, this.onFragDecrypted, this);\n    hls.on(Events.INIT_PTS_FOUND, this.onInitPtsFound, this);\n    hls.on(Events.SUBTITLE_TRACKS_CLEARED, this.onSubtitleTracksCleared, this);\n    hls.on(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n  }\n  destroy() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    hls.off(Events.SUBTITLE_TRACKS_UPDATED, this.onSubtitleTracksUpdated, this);\n    hls.off(Events.FRAG_LOADING, this.onFragLoading, this);\n    hls.off(Events.FRAG_LOADED, this.onFragLoaded, this);\n    hls.off(Events.FRAG_PARSING_USERDATA, this.onFragParsingUserdata, this);\n    hls.off(Events.FRAG_DECRYPTED, this.onFragDecrypted, this);\n    hls.off(Events.INIT_PTS_FOUND, this.onInitPtsFound, this);\n    hls.off(Events.SUBTITLE_TRACKS_CLEARED, this.onSubtitleTracksCleared, this);\n    hls.off(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n    this.hls = this.config = this.media = null;\n    this.cea608Parser1 = this.cea608Parser2 = void 0;\n  }\n  initCea608Parsers() {\n    const channel1 = new OutputFilter(this, \"textTrack1\");\n    const channel2 = new OutputFilter(this, \"textTrack2\");\n    const channel3 = new OutputFilter(this, \"textTrack3\");\n    const channel4 = new OutputFilter(this, \"textTrack4\");\n    this.cea608Parser1 = new Cea608Parser(1, channel1, channel2);\n    this.cea608Parser2 = new Cea608Parser(3, channel3, channel4);\n  }\n  addCues(trackName, startTime, endTime, screen2, cueRanges) {\n    let merged = false;\n    for (let i = cueRanges.length; i--; ) {\n      const cueRange = cueRanges[i];\n      const overlap = intersection(cueRange[0], cueRange[1], startTime, endTime);\n      if (overlap >= 0) {\n        cueRange[0] = Math.min(cueRange[0], startTime);\n        cueRange[1] = Math.max(cueRange[1], endTime);\n        merged = true;\n        if (overlap / (endTime - startTime) > 0.5) {\n          return;\n        }\n      }\n    }\n    if (!merged) {\n      cueRanges.push([startTime, endTime]);\n    }\n    if (this.config.renderTextTracksNatively) {\n      const track = this.captionsTracks[trackName];\n      this.Cues.newCue(track, startTime, endTime, screen2);\n    } else {\n      const cues = this.Cues.newCue(null, startTime, endTime, screen2);\n      this.hls.trigger(Events.CUES_PARSED, {\n        type: \"captions\",\n        cues,\n        track: trackName\n      });\n    }\n  }\n  // Triggered when an initial PTS is found; used for synchronisation of WebVTT.\n  onInitPtsFound(event, {\n    frag,\n    id,\n    initPTS,\n    timescale\n  }) {\n    const {\n      unparsedVttFrags\n    } = this;\n    if (id === PlaylistLevelType.MAIN) {\n      this.initPTS[frag.cc] = {\n        baseTime: initPTS,\n        timescale\n      };\n    }\n    if (unparsedVttFrags.length) {\n      this.unparsedVttFrags = [];\n      unparsedVttFrags.forEach((data) => {\n        if (this.initPTS[data.frag.cc]) {\n          this.onFragLoaded(Events.FRAG_LOADED, data);\n        } else {\n          this.hls.trigger(Events.SUBTITLE_FRAG_PROCESSED, {\n            success: false,\n            frag: data.frag,\n            error: new Error(\"Subtitle discontinuity domain does not match main\")\n          });\n        }\n      });\n    }\n  }\n  getExistingTrack(label, language) {\n    const {\n      media\n    } = this;\n    if (media) {\n      for (let i = 0; i < media.textTracks.length; i++) {\n        const textTrack = media.textTracks[i];\n        if (canReuseVttTextTrack(textTrack, {\n          name: label,\n          lang: language,\n          characteristics: \"transcribes-spoken-dialog,describes-music-and-sound\"\n        })) {\n          return textTrack;\n        }\n      }\n    }\n    return null;\n  }\n  createCaptionsTrack(trackName) {\n    if (this.config.renderTextTracksNatively) {\n      this.createNativeTrack(trackName);\n    } else {\n      this.createNonNativeTrack(trackName);\n    }\n  }\n  createNativeTrack(trackName) {\n    if (this.captionsTracks[trackName]) {\n      return;\n    }\n    const {\n      captionsProperties,\n      captionsTracks,\n      media\n    } = this;\n    const {\n      label,\n      languageCode\n    } = captionsProperties[trackName];\n    const existingTrack = this.getExistingTrack(label, languageCode);\n    if (!existingTrack) {\n      const textTrack = this.createTextTrack(\"captions\", label, languageCode);\n      if (textTrack) {\n        textTrack[trackName] = true;\n        captionsTracks[trackName] = textTrack;\n      }\n    } else {\n      captionsTracks[trackName] = existingTrack;\n      clearCurrentCues(captionsTracks[trackName]);\n      sendAddTrackEvent(captionsTracks[trackName], media);\n    }\n  }\n  createNonNativeTrack(trackName) {\n    if (this.nonNativeCaptionsTracks[trackName]) {\n      return;\n    }\n    const trackProperties = this.captionsProperties[trackName];\n    if (!trackProperties) {\n      return;\n    }\n    const label = trackProperties.label;\n    const track = {\n      _id: trackName,\n      label,\n      kind: \"captions\",\n      default: trackProperties.media ? !!trackProperties.media.default : false,\n      closedCaptions: trackProperties.media\n    };\n    this.nonNativeCaptionsTracks[trackName] = track;\n    this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND, {\n      tracks: [track]\n    });\n  }\n  createTextTrack(kind, label, lang) {\n    const media = this.media;\n    if (!media) {\n      return;\n    }\n    return media.addTextTrack(kind, label, lang);\n  }\n  onMediaAttaching(event, data) {\n    this.media = data.media;\n    if (!data.mediaSource) {\n      this._cleanTracks();\n    }\n  }\n  onMediaDetaching(event, data) {\n    const transferringMedia = !!data.transferMedia;\n    this.media = null;\n    if (transferringMedia) {\n      return;\n    }\n    const {\n      captionsTracks\n    } = this;\n    Object.keys(captionsTracks).forEach((trackName) => {\n      clearCurrentCues(captionsTracks[trackName]);\n      delete captionsTracks[trackName];\n    });\n    this.nonNativeCaptionsTracks = {};\n  }\n  onManifestLoading() {\n    this.lastCc = -1;\n    this.lastSn = -1;\n    this.lastPartIndex = -1;\n    this.prevCC = -1;\n    this.vttCCs = newVTTCCs();\n    this._cleanTracks();\n    this.tracks = [];\n    this.captionsTracks = {};\n    this.nonNativeCaptionsTracks = {};\n    this.textTracks = [];\n    this.unparsedVttFrags = [];\n    this.initPTS = [];\n    if (this.cea608Parser1 && this.cea608Parser2) {\n      this.cea608Parser1.reset();\n      this.cea608Parser2.reset();\n    }\n  }\n  _cleanTracks() {\n    const {\n      media\n    } = this;\n    if (!media) {\n      return;\n    }\n    const textTracks = media.textTracks;\n    if (textTracks) {\n      for (let i = 0; i < textTracks.length; i++) {\n        clearCurrentCues(textTracks[i]);\n      }\n    }\n  }\n  onSubtitleTracksUpdated(event, data) {\n    const tracks = data.subtitleTracks || [];\n    const hasIMSC1 = tracks.some((track) => track.textCodec === IMSC1_CODEC);\n    if (this.config.enableWebVTT || hasIMSC1 && this.config.enableIMSC1) {\n      const listIsIdentical = subtitleOptionsIdentical(this.tracks, tracks);\n      if (listIsIdentical) {\n        this.tracks = tracks;\n        return;\n      }\n      this.textTracks = [];\n      this.tracks = tracks;\n      if (this.config.renderTextTracksNatively) {\n        const media = this.media;\n        const inUseTracks = media ? filterSubtitleTracks(media.textTracks) : null;\n        this.tracks.forEach((track, index) => {\n          let textTrack;\n          if (inUseTracks) {\n            let inUseTrack = null;\n            for (let i = 0; i < inUseTracks.length; i++) {\n              if (inUseTracks[i] && canReuseVttTextTrack(inUseTracks[i], track)) {\n                inUseTrack = inUseTracks[i];\n                inUseTracks[i] = null;\n                break;\n              }\n            }\n            if (inUseTrack) {\n              textTrack = inUseTrack;\n            }\n          }\n          if (textTrack) {\n            clearCurrentCues(textTrack);\n          } else {\n            const textTrackKind = captionsOrSubtitlesFromCharacteristics(track);\n            textTrack = this.createTextTrack(textTrackKind, track.name, track.lang);\n            if (textTrack) {\n              textTrack.mode = \"disabled\";\n            }\n          }\n          if (textTrack) {\n            this.textTracks.push(textTrack);\n          }\n        });\n        if (inUseTracks != null && inUseTracks.length) {\n          const unusedTextTracks = inUseTracks.filter((t) => t !== null).map((t) => t.label);\n          if (unusedTextTracks.length) {\n            this.hls.logger.warn(`Media element contains unused subtitle tracks: ${unusedTextTracks.join(\", \")}. Replace media element for each source to clear TextTracks and captions menu.`);\n          }\n        }\n      } else if (this.tracks.length) {\n        const tracksList = this.tracks.map((track) => {\n          return {\n            label: track.name,\n            kind: track.type.toLowerCase(),\n            default: track.default,\n            subtitleTrack: track\n          };\n        });\n        this.hls.trigger(Events.NON_NATIVE_TEXT_TRACKS_FOUND, {\n          tracks: tracksList\n        });\n      }\n    }\n  }\n  onManifestLoaded(event, data) {\n    if (this.config.enableCEA708Captions && data.captions) {\n      data.captions.forEach((captionsTrack) => {\n        const instreamIdMatch = /(?:CC|SERVICE)([1-4])/.exec(captionsTrack.instreamId);\n        if (!instreamIdMatch) {\n          return;\n        }\n        const trackName = `textTrack${instreamIdMatch[1]}`;\n        const trackProperties = this.captionsProperties[trackName];\n        if (!trackProperties) {\n          return;\n        }\n        trackProperties.label = captionsTrack.name;\n        if (captionsTrack.lang) {\n          trackProperties.languageCode = captionsTrack.lang;\n        }\n        trackProperties.media = captionsTrack;\n      });\n    }\n  }\n  closedCaptionsForLevel(frag) {\n    const level = this.hls.levels[frag.level];\n    return level == null ? void 0 : level.attrs[\"CLOSED-CAPTIONS\"];\n  }\n  onFragLoading(event, data) {\n    if (this.enabled && data.frag.type === PlaylistLevelType.MAIN) {\n      var _data$part$index, _data$part;\n      const {\n        cea608Parser1,\n        cea608Parser2,\n        lastSn\n      } = this;\n      const {\n        cc,\n        sn\n      } = data.frag;\n      const partIndex = (_data$part$index = (_data$part = data.part) == null ? void 0 : _data$part.index) != null ? _data$part$index : -1;\n      if (cea608Parser1 && cea608Parser2) {\n        if (sn !== lastSn + 1 || sn === lastSn && partIndex !== this.lastPartIndex + 1 || cc !== this.lastCc) {\n          cea608Parser1.reset();\n          cea608Parser2.reset();\n        }\n      }\n      this.lastCc = cc;\n      this.lastSn = sn;\n      this.lastPartIndex = partIndex;\n    }\n  }\n  onFragLoaded(event, data) {\n    const {\n      frag,\n      payload\n    } = data;\n    if (frag.type === PlaylistLevelType.SUBTITLE) {\n      if (payload.byteLength) {\n        const decryptData = frag.decryptdata;\n        const decrypted = \"stats\" in data;\n        if (decryptData == null || !decryptData.encrypted || decrypted) {\n          const trackPlaylistMedia = this.tracks[frag.level];\n          const vttCCs = this.vttCCs;\n          if (!vttCCs[frag.cc]) {\n            vttCCs[frag.cc] = {\n              start: frag.start,\n              prevCC: this.prevCC,\n              new: true\n            };\n            this.prevCC = frag.cc;\n          }\n          if (trackPlaylistMedia && trackPlaylistMedia.textCodec === IMSC1_CODEC) {\n            this._parseIMSC1(frag, payload);\n          } else {\n            this._parseVTTs(data);\n          }\n        }\n      } else {\n        this.hls.trigger(Events.SUBTITLE_FRAG_PROCESSED, {\n          success: false,\n          frag,\n          error: new Error(\"Empty subtitle payload\")\n        });\n      }\n    }\n  }\n  _parseIMSC1(frag, payload) {\n    const hls = this.hls;\n    parseIMSC1(payload, this.initPTS[frag.cc], (cues) => {\n      this._appendCues(cues, frag.level);\n      hls.trigger(Events.SUBTITLE_FRAG_PROCESSED, {\n        success: true,\n        frag\n      });\n    }, (error) => {\n      hls.logger.log(`Failed to parse IMSC1: ${error}`);\n      hls.trigger(Events.SUBTITLE_FRAG_PROCESSED, {\n        success: false,\n        frag,\n        error\n      });\n    });\n  }\n  _parseVTTs(data) {\n    var _frag$initSegment;\n    const {\n      frag,\n      payload\n    } = data;\n    const {\n      initPTS,\n      unparsedVttFrags\n    } = this;\n    const maxAvCC = initPTS.length - 1;\n    if (!initPTS[frag.cc] && maxAvCC === -1) {\n      unparsedVttFrags.push(data);\n      return;\n    }\n    const hls = this.hls;\n    const payloadWebVTT = (_frag$initSegment = frag.initSegment) != null && _frag$initSegment.data ? appendUint8Array(frag.initSegment.data, new Uint8Array(payload)).buffer : payload;\n    parseWebVTT(payloadWebVTT, this.initPTS[frag.cc], this.vttCCs, frag.cc, frag.start, (cues) => {\n      this._appendCues(cues, frag.level);\n      hls.trigger(Events.SUBTITLE_FRAG_PROCESSED, {\n        success: true,\n        frag\n      });\n    }, (error) => {\n      const missingInitPTS = error.message === \"Missing initPTS for VTT MPEGTS\";\n      if (missingInitPTS) {\n        unparsedVttFrags.push(data);\n      } else {\n        this._fallbackToIMSC1(frag, payload);\n      }\n      hls.logger.log(`Failed to parse VTT cue: ${error}`);\n      if (missingInitPTS && maxAvCC > frag.cc) {\n        return;\n      }\n      hls.trigger(Events.SUBTITLE_FRAG_PROCESSED, {\n        success: false,\n        frag,\n        error\n      });\n    });\n  }\n  _fallbackToIMSC1(frag, payload) {\n    const trackPlaylistMedia = this.tracks[frag.level];\n    if (!trackPlaylistMedia.textCodec) {\n      parseIMSC1(payload, this.initPTS[frag.cc], () => {\n        trackPlaylistMedia.textCodec = IMSC1_CODEC;\n        this._parseIMSC1(frag, payload);\n      }, () => {\n        trackPlaylistMedia.textCodec = \"wvtt\";\n      });\n    }\n  }\n  _appendCues(cues, fragLevel) {\n    const hls = this.hls;\n    if (this.config.renderTextTracksNatively) {\n      const textTrack = this.textTracks[fragLevel];\n      if (!textTrack || textTrack.mode === \"disabled\") {\n        return;\n      }\n      cues.forEach((cue) => addCueToTrack(textTrack, cue));\n    } else {\n      const currentTrack = this.tracks[fragLevel];\n      if (!currentTrack) {\n        return;\n      }\n      const track = currentTrack.default ? \"default\" : \"subtitles\" + fragLevel;\n      hls.trigger(Events.CUES_PARSED, {\n        type: \"subtitles\",\n        cues,\n        track\n      });\n    }\n  }\n  onFragDecrypted(event, data) {\n    const {\n      frag\n    } = data;\n    if (frag.type === PlaylistLevelType.SUBTITLE) {\n      this.onFragLoaded(Events.FRAG_LOADED, data);\n    }\n  }\n  onSubtitleTracksCleared() {\n    this.tracks = [];\n    this.captionsTracks = {};\n  }\n  onFragParsingUserdata(event, data) {\n    if (!this.enabled || !this.config.enableCEA708Captions) {\n      return;\n    }\n    const {\n      frag,\n      samples\n    } = data;\n    if (frag.type === PlaylistLevelType.MAIN && this.closedCaptionsForLevel(frag) === \"NONE\") {\n      return;\n    }\n    for (let i = 0; i < samples.length; i++) {\n      const ccBytes = samples[i].bytes;\n      if (ccBytes) {\n        if (!this.cea608Parser1) {\n          this.initCea608Parsers();\n        }\n        const ccdatas = this.extractCea608Data(ccBytes);\n        this.cea608Parser1.addData(samples[i].pts, ccdatas[0]);\n        this.cea608Parser2.addData(samples[i].pts, ccdatas[1]);\n      }\n    }\n  }\n  onBufferFlushing(event, {\n    startOffset,\n    endOffset,\n    endOffsetSubtitles,\n    type\n  }) {\n    const {\n      media\n    } = this;\n    if (!media || media.currentTime < endOffset) {\n      return;\n    }\n    if (!type || type === \"video\") {\n      const {\n        captionsTracks\n      } = this;\n      Object.keys(captionsTracks).forEach((trackName) => removeCuesInRange(captionsTracks[trackName], startOffset, endOffset));\n    }\n    if (this.config.renderTextTracksNatively) {\n      if (startOffset === 0 && endOffsetSubtitles !== void 0) {\n        const {\n          textTracks\n        } = this;\n        Object.keys(textTracks).forEach((trackName) => removeCuesInRange(textTracks[trackName], startOffset, endOffsetSubtitles));\n      }\n    }\n  }\n  extractCea608Data(byteArray) {\n    const actualCCBytes = [[], []];\n    const count = byteArray[0] & 31;\n    let position = 2;\n    for (let j = 0; j < count; j++) {\n      const tmpByte = byteArray[position++];\n      const ccbyte1 = 127 & byteArray[position++];\n      const ccbyte2 = 127 & byteArray[position++];\n      if (ccbyte1 === 0 && ccbyte2 === 0) {\n        continue;\n      }\n      const ccValid = (4 & tmpByte) !== 0;\n      if (ccValid) {\n        const ccType = 3 & tmpByte;\n        if (0 === ccType || 1 === ccType) {\n          actualCCBytes[ccType].push(ccbyte1);\n          actualCCBytes[ccType].push(ccbyte2);\n        }\n      }\n    }\n    return actualCCBytes;\n  }\n}\nfunction captionsOrSubtitlesFromCharacteristics(track) {\n  if (track.characteristics) {\n    if (/transcribes-spoken-dialog/gi.test(track.characteristics) && /describes-music-and-sound/gi.test(track.characteristics)) {\n      return \"captions\";\n    }\n  }\n  return \"subtitles\";\n}\nfunction canReuseVttTextTrack(inUseTrack, manifestTrack) {\n  return !!inUseTrack && inUseTrack.kind === captionsOrSubtitlesFromCharacteristics(manifestTrack) && subtitleTrackMatchesTextTrack(manifestTrack, inUseTrack);\n}\nfunction intersection(x1, x2, y1, y2) {\n  return Math.min(x2, y2) - Math.max(x1, y1);\n}\nfunction newVTTCCs() {\n  return {\n    ccOffset: 0,\n    presentationOffset: 0,\n    0: {\n      start: 0,\n      prevCC: -1,\n      new: true\n    }\n  };\n}\nconst WHITESPACE_CHAR = /\\s/;\nconst Cues = {\n  newCue(track, startTime, endTime, captionScreen) {\n    const result = [];\n    let row;\n    let cue;\n    let indenting;\n    let indent;\n    let text;\n    const Cue = self.VTTCue || self.TextTrackCue;\n    for (let r = 0; r < captionScreen.rows.length; r++) {\n      row = captionScreen.rows[r];\n      indenting = true;\n      indent = 0;\n      text = \"\";\n      if (!row.isEmpty()) {\n        var _track$cues;\n        for (let c = 0; c < row.chars.length; c++) {\n          if (WHITESPACE_CHAR.test(row.chars[c].uchar) && indenting) {\n            indent++;\n          } else {\n            text += row.chars[c].uchar;\n            indenting = false;\n          }\n        }\n        row.cueStartTime = startTime;\n        if (startTime === endTime) {\n          endTime += 1e-4;\n        }\n        if (indent >= 16) {\n          indent--;\n        } else {\n          indent++;\n        }\n        const cueText = fixLineBreaks(text.trim());\n        const id = generateCueId(startTime, endTime, cueText);\n        if (!(track != null && (_track$cues = track.cues) != null && _track$cues.getCueById(id))) {\n          cue = new Cue(startTime, endTime, cueText);\n          cue.id = id;\n          cue.line = r + 1;\n          cue.align = \"left\";\n          cue.position = 10 + Math.min(80, Math.floor(indent * 8 / 32) * 10);\n          result.push(cue);\n        }\n      }\n    }\n    if (track && result.length) {\n      result.sort((cueA, cueB) => {\n        if (cueA.line === \"auto\" || cueB.line === \"auto\") {\n          return 0;\n        }\n        if (cueA.line > 8 && cueB.line > 8) {\n          return cueB.line - cueA.line;\n        }\n        return cueA.line - cueB.line;\n      });\n      result.forEach((cue2) => addCueToTrack(track, cue2));\n    }\n    return result;\n  }\n};\nfunction fetchSupported() {\n  if (\n    // @ts-ignore\n    self.fetch && self.AbortController && self.ReadableStream && self.Request\n  ) {\n    try {\n      new self.ReadableStream({});\n      return true;\n    } catch (e) {\n    }\n  }\n  return false;\n}\nconst BYTERANGE = /(\\d+)-(\\d+)\\/(\\d+)/;\nclass FetchLoader {\n  constructor(config) {\n    this.fetchSetup = void 0;\n    this.requestTimeout = void 0;\n    this.request = null;\n    this.response = null;\n    this.controller = void 0;\n    this.context = null;\n    this.config = null;\n    this.callbacks = null;\n    this.stats = void 0;\n    this.loader = null;\n    this.fetchSetup = config.fetchSetup || getRequest;\n    this.controller = new self.AbortController();\n    this.stats = new LoadStats();\n  }\n  destroy() {\n    this.loader = this.callbacks = this.context = this.config = this.request = null;\n    this.abortInternal();\n    this.response = null;\n    this.fetchSetup = this.controller = this.stats = null;\n  }\n  abortInternal() {\n    if (this.controller && !this.stats.loading.end) {\n      this.stats.aborted = true;\n      this.controller.abort();\n    }\n  }\n  abort() {\n    var _this$callbacks;\n    this.abortInternal();\n    if ((_this$callbacks = this.callbacks) != null && _this$callbacks.onAbort) {\n      this.callbacks.onAbort(this.stats, this.context, this.response);\n    }\n  }\n  load(context, config, callbacks) {\n    const stats = this.stats;\n    if (stats.loading.start) {\n      throw new Error(\"Loader can only be used once.\");\n    }\n    stats.loading.start = self.performance.now();\n    const initParams = getRequestParameters(context, this.controller.signal);\n    const isArrayBuffer = context.responseType === \"arraybuffer\";\n    const LENGTH = isArrayBuffer ? \"byteLength\" : \"length\";\n    const {\n      maxTimeToFirstByteMs,\n      maxLoadTimeMs\n    } = config.loadPolicy;\n    this.context = context;\n    this.config = config;\n    this.callbacks = callbacks;\n    this.request = this.fetchSetup(context, initParams);\n    self.clearTimeout(this.requestTimeout);\n    config.timeout = maxTimeToFirstByteMs && isFiniteNumber(maxTimeToFirstByteMs) ? maxTimeToFirstByteMs : maxLoadTimeMs;\n    this.requestTimeout = self.setTimeout(() => {\n      if (this.callbacks) {\n        this.abortInternal();\n        this.callbacks.onTimeout(stats, context, this.response);\n      }\n    }, config.timeout);\n    const fetchPromise = isPromise(this.request) ? this.request.then(self.fetch) : self.fetch(this.request);\n    fetchPromise.then((response) => {\n      var _this$callbacks2;\n      this.response = this.loader = response;\n      const first = Math.max(self.performance.now(), stats.loading.start);\n      self.clearTimeout(this.requestTimeout);\n      config.timeout = maxLoadTimeMs;\n      this.requestTimeout = self.setTimeout(() => {\n        if (this.callbacks) {\n          this.abortInternal();\n          this.callbacks.onTimeout(stats, context, this.response);\n        }\n      }, maxLoadTimeMs - (first - stats.loading.start));\n      if (!response.ok) {\n        const {\n          status: status2,\n          statusText\n        } = response;\n        throw new FetchError(statusText || \"fetch, bad network response\", status2, response);\n      }\n      stats.loading.first = first;\n      stats.total = getContentLength(response.headers) || stats.total;\n      const onProgress = (_this$callbacks2 = this.callbacks) == null ? void 0 : _this$callbacks2.onProgress;\n      if (onProgress && isFiniteNumber(config.highWaterMark)) {\n        return this.loadProgressively(response, stats, context, config.highWaterMark, onProgress);\n      }\n      if (isArrayBuffer) {\n        return response.arrayBuffer();\n      }\n      if (context.responseType === \"json\") {\n        return response.json();\n      }\n      return response.text();\n    }).then((responseData) => {\n      var _this$callbacks3, _this$callbacks4;\n      const response = this.response;\n      if (!response) {\n        throw new Error(\"loader destroyed\");\n      }\n      self.clearTimeout(this.requestTimeout);\n      stats.loading.end = Math.max(self.performance.now(), stats.loading.first);\n      const total = responseData[LENGTH];\n      if (total) {\n        stats.loaded = stats.total = total;\n      }\n      const loaderResponse = {\n        url: response.url,\n        data: responseData,\n        code: response.status\n      };\n      const onProgress = (_this$callbacks3 = this.callbacks) == null ? void 0 : _this$callbacks3.onProgress;\n      if (onProgress && !isFiniteNumber(config.highWaterMark)) {\n        onProgress(stats, context, responseData, response);\n      }\n      (_this$callbacks4 = this.callbacks) == null ? void 0 : _this$callbacks4.onSuccess(loaderResponse, stats, context, response);\n    }).catch((error) => {\n      var _this$callbacks5;\n      self.clearTimeout(this.requestTimeout);\n      if (stats.aborted) {\n        return;\n      }\n      const code2 = !error ? 0 : error.code || 0;\n      const text = !error ? null : error.message;\n      (_this$callbacks5 = this.callbacks) == null ? void 0 : _this$callbacks5.onError({\n        code: code2,\n        text\n      }, context, error ? error.details : null, stats);\n    });\n  }\n  getCacheAge() {\n    let result = null;\n    if (this.response) {\n      const ageHeader = this.response.headers.get(\"age\");\n      result = ageHeader ? parseFloat(ageHeader) : null;\n    }\n    return result;\n  }\n  getResponseHeader(name) {\n    return this.response ? this.response.headers.get(name) : null;\n  }\n  loadProgressively(response, stats, context, highWaterMark = 0, onProgress) {\n    const chunkCache = new ChunkCache();\n    const reader = response.body.getReader();\n    const pump = () => {\n      return reader.read().then((data) => {\n        if (data.done) {\n          if (chunkCache.dataLength) {\n            onProgress(stats, context, chunkCache.flush().buffer, response);\n          }\n          return Promise.resolve(new ArrayBuffer(0));\n        }\n        const chunk = data.value;\n        const len = chunk.length;\n        stats.loaded += len;\n        if (len < highWaterMark || chunkCache.dataLength) {\n          chunkCache.push(chunk);\n          if (chunkCache.dataLength >= highWaterMark) {\n            onProgress(stats, context, chunkCache.flush().buffer, response);\n          }\n        } else {\n          onProgress(stats, context, chunk.buffer, response);\n        }\n        return pump();\n      }).catch(() => {\n        return Promise.reject();\n      });\n    };\n    return pump();\n  }\n}\nfunction getRequestParameters(context, signal) {\n  const initParams = {\n    method: \"GET\",\n    mode: \"cors\",\n    credentials: \"same-origin\",\n    signal,\n    headers: new self.Headers(_extends({}, context.headers))\n  };\n  if (context.rangeEnd) {\n    initParams.headers.set(\"Range\", \"bytes=\" + context.rangeStart + \"-\" + String(context.rangeEnd - 1));\n  }\n  return initParams;\n}\nfunction getByteRangeLength(byteRangeHeader) {\n  const result = BYTERANGE.exec(byteRangeHeader);\n  if (result) {\n    return parseInt(result[2]) - parseInt(result[1]) + 1;\n  }\n}\nfunction getContentLength(headers) {\n  const contentRange = headers.get(\"Content-Range\");\n  if (contentRange) {\n    const byteRangeLength = getByteRangeLength(contentRange);\n    if (isFiniteNumber(byteRangeLength)) {\n      return byteRangeLength;\n    }\n  }\n  const contentLength = headers.get(\"Content-Length\");\n  if (contentLength) {\n    return parseInt(contentLength);\n  }\n}\nfunction getRequest(context, initParams) {\n  return new self.Request(context.url, initParams);\n}\nclass FetchError extends Error {\n  constructor(message, code2, details) {\n    super(message);\n    this.code = void 0;\n    this.details = void 0;\n    this.code = code2;\n    this.details = details;\n  }\n}\nconst AGE_HEADER_LINE_REGEX = /^age:\\s*[\\d.]+\\s*$/im;\nclass XhrLoader {\n  constructor(config) {\n    this.xhrSetup = void 0;\n    this.requestTimeout = void 0;\n    this.retryTimeout = void 0;\n    this.retryDelay = void 0;\n    this.config = null;\n    this.callbacks = null;\n    this.context = null;\n    this.loader = null;\n    this.stats = void 0;\n    this.xhrSetup = config ? config.xhrSetup || null : null;\n    this.stats = new LoadStats();\n    this.retryDelay = 0;\n  }\n  destroy() {\n    this.callbacks = null;\n    this.abortInternal();\n    this.loader = null;\n    this.config = null;\n    this.context = null;\n    this.xhrSetup = null;\n  }\n  abortInternal() {\n    const loader = this.loader;\n    self.clearTimeout(this.requestTimeout);\n    self.clearTimeout(this.retryTimeout);\n    if (loader) {\n      loader.onreadystatechange = null;\n      loader.onprogress = null;\n      if (loader.readyState !== 4) {\n        this.stats.aborted = true;\n        loader.abort();\n      }\n    }\n  }\n  abort() {\n    var _this$callbacks;\n    this.abortInternal();\n    if ((_this$callbacks = this.callbacks) != null && _this$callbacks.onAbort) {\n      this.callbacks.onAbort(this.stats, this.context, this.loader);\n    }\n  }\n  load(context, config, callbacks) {\n    if (this.stats.loading.start) {\n      throw new Error(\"Loader can only be used once.\");\n    }\n    this.stats.loading.start = self.performance.now();\n    this.context = context;\n    this.config = config;\n    this.callbacks = callbacks;\n    this.loadInternal();\n  }\n  loadInternal() {\n    const {\n      config,\n      context\n    } = this;\n    if (!config || !context) {\n      return;\n    }\n    const xhr = this.loader = new self.XMLHttpRequest();\n    const stats = this.stats;\n    stats.loading.first = 0;\n    stats.loaded = 0;\n    stats.aborted = false;\n    const xhrSetup = this.xhrSetup;\n    if (xhrSetup) {\n      Promise.resolve().then(() => {\n        if (this.loader !== xhr || this.stats.aborted) return;\n        return xhrSetup(xhr, context.url);\n      }).catch((error) => {\n        if (this.loader !== xhr || this.stats.aborted) return;\n        xhr.open(\"GET\", context.url, true);\n        return xhrSetup(xhr, context.url);\n      }).then(() => {\n        if (this.loader !== xhr || this.stats.aborted) return;\n        this.openAndSendXhr(xhr, context, config);\n      }).catch((error) => {\n        var _this$callbacks2;\n        (_this$callbacks2 = this.callbacks) == null ? void 0 : _this$callbacks2.onError({\n          code: xhr.status,\n          text: error.message\n        }, context, xhr, stats);\n        return;\n      });\n    } else {\n      this.openAndSendXhr(xhr, context, config);\n    }\n  }\n  openAndSendXhr(xhr, context, config) {\n    if (!xhr.readyState) {\n      xhr.open(\"GET\", context.url, true);\n    }\n    const headers = context.headers;\n    const {\n      maxTimeToFirstByteMs,\n      maxLoadTimeMs\n    } = config.loadPolicy;\n    if (headers) {\n      for (const header in headers) {\n        xhr.setRequestHeader(header, headers[header]);\n      }\n    }\n    if (context.rangeEnd) {\n      xhr.setRequestHeader(\"Range\", \"bytes=\" + context.rangeStart + \"-\" + (context.rangeEnd - 1));\n    }\n    xhr.onreadystatechange = this.readystatechange.bind(this);\n    xhr.onprogress = this.loadprogress.bind(this);\n    xhr.responseType = context.responseType;\n    self.clearTimeout(this.requestTimeout);\n    config.timeout = maxTimeToFirstByteMs && isFiniteNumber(maxTimeToFirstByteMs) ? maxTimeToFirstByteMs : maxLoadTimeMs;\n    this.requestTimeout = self.setTimeout(this.loadtimeout.bind(this), config.timeout);\n    xhr.send();\n  }\n  readystatechange() {\n    const {\n      context,\n      loader: xhr,\n      stats\n    } = this;\n    if (!context || !xhr) {\n      return;\n    }\n    const readyState = xhr.readyState;\n    const config = this.config;\n    if (stats.aborted) {\n      return;\n    }\n    if (readyState >= 2) {\n      if (stats.loading.first === 0) {\n        stats.loading.first = Math.max(self.performance.now(), stats.loading.start);\n        if (config.timeout !== config.loadPolicy.maxLoadTimeMs) {\n          self.clearTimeout(this.requestTimeout);\n          config.timeout = config.loadPolicy.maxLoadTimeMs;\n          this.requestTimeout = self.setTimeout(this.loadtimeout.bind(this), config.loadPolicy.maxLoadTimeMs - (stats.loading.first - stats.loading.start));\n        }\n      }\n      if (readyState === 4) {\n        self.clearTimeout(this.requestTimeout);\n        xhr.onreadystatechange = null;\n        xhr.onprogress = null;\n        const status2 = xhr.status;\n        const useResponseText = xhr.responseType === \"text\" ? xhr.responseText : null;\n        if (status2 >= 200 && status2 < 300) {\n          const data = useResponseText != null ? useResponseText : xhr.response;\n          if (data != null) {\n            var _this$callbacks3, _this$callbacks4;\n            stats.loading.end = Math.max(self.performance.now(), stats.loading.first);\n            const len = xhr.responseType === \"arraybuffer\" ? data.byteLength : data.length;\n            stats.loaded = stats.total = len;\n            stats.bwEstimate = stats.total * 8e3 / (stats.loading.end - stats.loading.first);\n            const onProgress = (_this$callbacks3 = this.callbacks) == null ? void 0 : _this$callbacks3.onProgress;\n            if (onProgress) {\n              onProgress(stats, context, data, xhr);\n            }\n            const _response = {\n              url: xhr.responseURL,\n              data,\n              code: status2\n            };\n            (_this$callbacks4 = this.callbacks) == null ? void 0 : _this$callbacks4.onSuccess(_response, stats, context, xhr);\n            return;\n          }\n        }\n        const retryConfig = config.loadPolicy.errorRetry;\n        const retryCount = stats.retry;\n        const response = {\n          url: context.url,\n          data: void 0,\n          code: status2\n        };\n        if (shouldRetry(retryConfig, retryCount, false, response)) {\n          this.retry(retryConfig);\n        } else {\n          var _this$callbacks5;\n          logger.error(`${status2} while loading ${context.url}`);\n          (_this$callbacks5 = this.callbacks) == null ? void 0 : _this$callbacks5.onError({\n            code: status2,\n            text: xhr.statusText\n          }, context, xhr, stats);\n        }\n      }\n    }\n  }\n  loadtimeout() {\n    if (!this.config) return;\n    const retryConfig = this.config.loadPolicy.timeoutRetry;\n    const retryCount = this.stats.retry;\n    if (shouldRetry(retryConfig, retryCount, true)) {\n      this.retry(retryConfig);\n    } else {\n      var _this$context;\n      logger.warn(`timeout while loading ${(_this$context = this.context) == null ? void 0 : _this$context.url}`);\n      const callbacks = this.callbacks;\n      if (callbacks) {\n        this.abortInternal();\n        callbacks.onTimeout(this.stats, this.context, this.loader);\n      }\n    }\n  }\n  retry(retryConfig) {\n    const {\n      context,\n      stats\n    } = this;\n    this.retryDelay = getRetryDelay(retryConfig, stats.retry);\n    stats.retry++;\n    logger.warn(`${status ? \"HTTP Status \" + status : \"Timeout\"} while loading ${context == null ? void 0 : context.url}, retrying ${stats.retry}/${retryConfig.maxNumRetry} in ${this.retryDelay}ms`);\n    this.abortInternal();\n    this.loader = null;\n    self.clearTimeout(this.retryTimeout);\n    this.retryTimeout = self.setTimeout(this.loadInternal.bind(this), this.retryDelay);\n  }\n  loadprogress(event) {\n    const stats = this.stats;\n    stats.loaded = event.loaded;\n    if (event.lengthComputable) {\n      stats.total = event.total;\n    }\n  }\n  getCacheAge() {\n    let result = null;\n    if (this.loader && AGE_HEADER_LINE_REGEX.test(this.loader.getAllResponseHeaders())) {\n      const ageHeader = this.loader.getResponseHeader(\"age\");\n      result = ageHeader ? parseFloat(ageHeader) : null;\n    }\n    return result;\n  }\n  getResponseHeader(name) {\n    if (this.loader && new RegExp(`^${name}:\\\\s*[\\\\d.]+\\\\s*$`, \"im\").test(this.loader.getAllResponseHeaders())) {\n      return this.loader.getResponseHeader(name);\n    }\n    return null;\n  }\n}\nconst defaultLoadPolicy = {\n  maxTimeToFirstByteMs: 8e3,\n  maxLoadTimeMs: 2e4,\n  timeoutRetry: null,\n  errorRetry: null\n};\nconst hlsDefaultConfig = _objectSpread2(_objectSpread2({\n  autoStartLoad: true,\n  // used by stream-controller\n  startPosition: -1,\n  // used by stream-controller\n  defaultAudioCodec: void 0,\n  // used by stream-controller\n  debug: false,\n  // used by logger\n  capLevelOnFPSDrop: false,\n  // used by fps-controller\n  capLevelToPlayerSize: false,\n  // used by cap-level-controller\n  ignoreDevicePixelRatio: false,\n  // used by cap-level-controller\n  maxDevicePixelRatio: Number.POSITIVE_INFINITY,\n  // used by cap-level-controller\n  preferManagedMediaSource: true,\n  initialLiveManifestSize: 1,\n  // used by stream-controller\n  maxBufferLength: 30,\n  // used by stream-controller\n  backBufferLength: Infinity,\n  // used by buffer-controller\n  frontBufferFlushThreshold: Infinity,\n  startOnSegmentBoundary: false,\n  // used by stream-controller\n  maxBufferSize: 60 * 1e3 * 1e3,\n  // used by stream-controller\n  maxFragLookUpTolerance: 0.25,\n  // used by stream-controller\n  maxBufferHole: 0.1,\n  // used by stream-controller and gap-controller\n  detectStallWithCurrentTimeMs: 1250,\n  // used by gap-controller\n  highBufferWatchdogPeriod: 2,\n  // used by gap-controller\n  nudgeOffset: 0.1,\n  // used by gap-controller\n  nudgeMaxRetry: 3,\n  // used by gap-controller\n  nudgeOnVideoHole: true,\n  // used by gap-controller\n  liveSyncMode: \"edge\",\n  // used by stream-controller\n  liveSyncDurationCount: 3,\n  // used by latency-controller\n  liveSyncOnStallIncrease: 1,\n  // used by latency-controller\n  liveMaxLatencyDurationCount: Infinity,\n  // used by latency-controller\n  liveSyncDuration: void 0,\n  // used by latency-controller\n  liveMaxLatencyDuration: void 0,\n  // used by latency-controller\n  maxLiveSyncPlaybackRate: 1,\n  // used by latency-controller\n  liveDurationInfinity: false,\n  // used by buffer-controller\n  /**\n   * @deprecated use backBufferLength\n   */\n  liveBackBufferLength: null,\n  // used by buffer-controller\n  maxMaxBufferLength: 600,\n  // used by stream-controller\n  enableWorker: true,\n  // used by transmuxer\n  workerPath: null,\n  // used by transmuxer\n  enableSoftwareAES: true,\n  // used by decrypter\n  startLevel: void 0,\n  // used by level-controller\n  startFragPrefetch: false,\n  // used by stream-controller\n  fpsDroppedMonitoringPeriod: 5e3,\n  // used by fps-controller\n  fpsDroppedMonitoringThreshold: 0.2,\n  // used by fps-controller\n  appendErrorMaxRetry: 3,\n  // used by buffer-controller\n  ignorePlaylistParsingErrors: false,\n  loader: XhrLoader,\n  // loader: FetchLoader,\n  fLoader: void 0,\n  // used by fragment-loader\n  pLoader: void 0,\n  // used by playlist-loader\n  xhrSetup: void 0,\n  // used by xhr-loader\n  licenseXhrSetup: void 0,\n  // used by eme-controller\n  licenseResponseCallback: void 0,\n  // used by eme-controller\n  abrController: AbrController,\n  bufferController: BufferController,\n  capLevelController: CapLevelController,\n  errorController: ErrorController,\n  fpsController: FPSController,\n  stretchShortVideoTrack: false,\n  // used by mp4-remuxer\n  maxAudioFramesDrift: 1,\n  // used by mp4-remuxer\n  forceKeyFrameOnDiscontinuity: true,\n  // used by ts-demuxer\n  abrEwmaFastLive: 3,\n  // used by abr-controller\n  abrEwmaSlowLive: 9,\n  // used by abr-controller\n  abrEwmaFastVoD: 3,\n  // used by abr-controller\n  abrEwmaSlowVoD: 9,\n  // used by abr-controller\n  abrEwmaDefaultEstimate: 5e5,\n  // 500 kbps  // used by abr-controller\n  abrEwmaDefaultEstimateMax: 5e6,\n  // 5 mbps\n  abrBandWidthFactor: 0.95,\n  // used by abr-controller\n  abrBandWidthUpFactor: 0.7,\n  // used by abr-controller\n  abrMaxWithRealBitrate: false,\n  // used by abr-controller\n  maxStarvationDelay: 4,\n  // used by abr-controller\n  maxLoadingDelay: 4,\n  // used by abr-controller\n  minAutoBitrate: 0,\n  // used by hls\n  emeEnabled: false,\n  // used by eme-controller\n  widevineLicenseUrl: void 0,\n  // used by eme-controller\n  drmSystems: {},\n  // used by eme-controller\n  drmSystemOptions: {},\n  // used by eme-controller\n  requestMediaKeySystemAccessFunc: requestMediaKeySystemAccess,\n  // used by eme-controller\n  requireKeySystemAccessOnStart: false,\n  // used by eme-controller\n  testBandwidth: true,\n  progressive: false,\n  lowLatencyMode: true,\n  cmcd: void 0,\n  enableDateRangeMetadataCues: true,\n  enableEmsgMetadataCues: true,\n  enableEmsgKLVMetadata: false,\n  enableID3MetadataCues: true,\n  enableInterstitialPlayback: true,\n  interstitialAppendInPlace: true,\n  interstitialLiveLookAhead: 10,\n  useMediaCapabilities: true,\n  preserveManualLevelOnError: false,\n  certLoadPolicy: {\n    default: defaultLoadPolicy\n  },\n  keyLoadPolicy: {\n    default: {\n      maxTimeToFirstByteMs: 8e3,\n      maxLoadTimeMs: 2e4,\n      timeoutRetry: {\n        maxNumRetry: 1,\n        retryDelayMs: 1e3,\n        maxRetryDelayMs: 2e4,\n        backoff: \"linear\"\n      },\n      errorRetry: {\n        maxNumRetry: 8,\n        retryDelayMs: 1e3,\n        maxRetryDelayMs: 2e4,\n        backoff: \"linear\"\n      }\n    }\n  },\n  manifestLoadPolicy: {\n    default: {\n      maxTimeToFirstByteMs: Infinity,\n      maxLoadTimeMs: 2e4,\n      timeoutRetry: {\n        maxNumRetry: 2,\n        retryDelayMs: 0,\n        maxRetryDelayMs: 0\n      },\n      errorRetry: {\n        maxNumRetry: 1,\n        retryDelayMs: 1e3,\n        maxRetryDelayMs: 8e3\n      }\n    }\n  },\n  playlistLoadPolicy: {\n    default: {\n      maxTimeToFirstByteMs: 1e4,\n      maxLoadTimeMs: 2e4,\n      timeoutRetry: {\n        maxNumRetry: 2,\n        retryDelayMs: 0,\n        maxRetryDelayMs: 0\n      },\n      errorRetry: {\n        maxNumRetry: 2,\n        retryDelayMs: 1e3,\n        maxRetryDelayMs: 8e3\n      }\n    }\n  },\n  fragLoadPolicy: {\n    default: {\n      maxTimeToFirstByteMs: 1e4,\n      maxLoadTimeMs: 12e4,\n      timeoutRetry: {\n        maxNumRetry: 4,\n        retryDelayMs: 0,\n        maxRetryDelayMs: 0\n      },\n      errorRetry: {\n        maxNumRetry: 6,\n        retryDelayMs: 1e3,\n        maxRetryDelayMs: 8e3\n      }\n    }\n  },\n  steeringManifestLoadPolicy: {\n    default: {\n      maxTimeToFirstByteMs: 1e4,\n      maxLoadTimeMs: 2e4,\n      timeoutRetry: {\n        maxNumRetry: 2,\n        retryDelayMs: 0,\n        maxRetryDelayMs: 0\n      },\n      errorRetry: {\n        maxNumRetry: 1,\n        retryDelayMs: 1e3,\n        maxRetryDelayMs: 8e3\n      }\n    }\n  },\n  interstitialAssetListLoadPolicy: {\n    default: {\n      maxTimeToFirstByteMs: 1e4,\n      maxLoadTimeMs: 3e4,\n      timeoutRetry: {\n        maxNumRetry: 0,\n        retryDelayMs: 0,\n        maxRetryDelayMs: 0\n      },\n      errorRetry: {\n        maxNumRetry: 0,\n        retryDelayMs: 1e3,\n        maxRetryDelayMs: 8e3\n      }\n    }\n  },\n  // These default settings are deprecated in favor of the above policies\n  // and are maintained for backwards compatibility\n  manifestLoadingTimeOut: 1e4,\n  manifestLoadingMaxRetry: 1,\n  manifestLoadingRetryDelay: 1e3,\n  manifestLoadingMaxRetryTimeout: 64e3,\n  levelLoadingTimeOut: 1e4,\n  levelLoadingMaxRetry: 4,\n  levelLoadingRetryDelay: 1e3,\n  levelLoadingMaxRetryTimeout: 64e3,\n  fragLoadingTimeOut: 2e4,\n  fragLoadingMaxRetry: 6,\n  fragLoadingRetryDelay: 1e3,\n  fragLoadingMaxRetryTimeout: 64e3\n}, timelineConfig()), {}, {\n  subtitleStreamController: SubtitleStreamController,\n  subtitleTrackController: SubtitleTrackController,\n  timelineController: TimelineController,\n  audioStreamController: AudioStreamController,\n  audioTrackController: AudioTrackController,\n  emeController: EMEController,\n  cmcdController: CMCDController,\n  contentSteeringController: ContentSteeringController,\n  interstitialsController: InterstitialsController\n});\nfunction timelineConfig() {\n  return {\n    cueHandler: Cues,\n    // used by timeline-controller\n    enableWebVTT: true,\n    // used by timeline-controller\n    enableIMSC1: true,\n    // used by timeline-controller\n    enableCEA708Captions: true,\n    // used by timeline-controller\n    captionsTextTrack1Label: \"English\",\n    // used by timeline-controller\n    captionsTextTrack1LanguageCode: \"en\",\n    // used by timeline-controller\n    captionsTextTrack2Label: \"Spanish\",\n    // used by timeline-controller\n    captionsTextTrack2LanguageCode: \"es\",\n    // used by timeline-controller\n    captionsTextTrack3Label: \"Unknown CC\",\n    // used by timeline-controller\n    captionsTextTrack3LanguageCode: \"\",\n    // used by timeline-controller\n    captionsTextTrack4Label: \"Unknown CC\",\n    // used by timeline-controller\n    captionsTextTrack4LanguageCode: \"\",\n    // used by timeline-controller\n    renderTextTracksNatively: true\n  };\n}\nfunction mergeConfig(defaultConfig, userConfig, logger2) {\n  if ((userConfig.liveSyncDurationCount || userConfig.liveMaxLatencyDurationCount) && (userConfig.liveSyncDuration || userConfig.liveMaxLatencyDuration)) {\n    throw new Error(\"Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration\");\n  }\n  if (userConfig.liveMaxLatencyDurationCount !== void 0 && (userConfig.liveSyncDurationCount === void 0 || userConfig.liveMaxLatencyDurationCount <= userConfig.liveSyncDurationCount)) {\n    throw new Error('Illegal hls.js config: \"liveMaxLatencyDurationCount\" must be greater than \"liveSyncDurationCount\"');\n  }\n  if (userConfig.liveMaxLatencyDuration !== void 0 && (userConfig.liveSyncDuration === void 0 || userConfig.liveMaxLatencyDuration <= userConfig.liveSyncDuration)) {\n    throw new Error('Illegal hls.js config: \"liveMaxLatencyDuration\" must be greater than \"liveSyncDuration\"');\n  }\n  const defaultsCopy = deepCpy(defaultConfig);\n  const deprecatedSettingTypes = [\"manifest\", \"level\", \"frag\"];\n  const deprecatedSettings = [\"TimeOut\", \"MaxRetry\", \"RetryDelay\", \"MaxRetryTimeout\"];\n  deprecatedSettingTypes.forEach((type) => {\n    const policyName = `${type === \"level\" ? \"playlist\" : type}LoadPolicy`;\n    const policyNotSet = userConfig[policyName] === void 0;\n    const report = [];\n    deprecatedSettings.forEach((setting) => {\n      const deprecatedSetting = `${type}Loading${setting}`;\n      const value = userConfig[deprecatedSetting];\n      if (value !== void 0 && policyNotSet) {\n        report.push(deprecatedSetting);\n        const settings = defaultsCopy[policyName].default;\n        userConfig[policyName] = {\n          default: settings\n        };\n        switch (setting) {\n          case \"TimeOut\":\n            settings.maxLoadTimeMs = value;\n            settings.maxTimeToFirstByteMs = value;\n            break;\n          case \"MaxRetry\":\n            settings.errorRetry.maxNumRetry = value;\n            settings.timeoutRetry.maxNumRetry = value;\n            break;\n          case \"RetryDelay\":\n            settings.errorRetry.retryDelayMs = value;\n            settings.timeoutRetry.retryDelayMs = value;\n            break;\n          case \"MaxRetryTimeout\":\n            settings.errorRetry.maxRetryDelayMs = value;\n            settings.timeoutRetry.maxRetryDelayMs = value;\n            break;\n        }\n      }\n    });\n    if (report.length) {\n      logger2.warn(`hls.js config: \"${report.join('\", \"')}\" setting(s) are deprecated, use \"${policyName}\": ${stringify(userConfig[policyName])}`);\n    }\n  });\n  return _objectSpread2(_objectSpread2({}, defaultsCopy), userConfig);\n}\nfunction deepCpy(obj) {\n  if (obj && typeof obj === \"object\") {\n    if (Array.isArray(obj)) {\n      return obj.map(deepCpy);\n    }\n    return Object.keys(obj).reduce((result, key) => {\n      result[key] = deepCpy(obj[key]);\n      return result;\n    }, {});\n  }\n  return obj;\n}\nfunction enableStreamingMode(config, logger2) {\n  const currentLoader = config.loader;\n  if (currentLoader !== FetchLoader && currentLoader !== XhrLoader) {\n    logger2.log(\"[config]: Custom loader detected, cannot enable progressive streaming\");\n    config.progressive = false;\n  } else {\n    const canStreamProgressively = fetchSupported();\n    if (canStreamProgressively) {\n      config.loader = FetchLoader;\n      config.progressive = true;\n      config.enableSoftwareAES = true;\n      logger2.log(\"[config]: Progressive streaming enabled, using FetchLoader\");\n    }\n  }\n}\nconst MAX_START_GAP_JUMP = 2;\nconst SKIP_BUFFER_HOLE_STEP_SECONDS = 0.1;\nconst SKIP_BUFFER_RANGE_START = 0.05;\nconst TICK_INTERVAL$1 = 100;\nclass GapController extends TaskLoop {\n  constructor(hls, fragmentTracker) {\n    super(\"gap-controller\", hls.logger);\n    this.hls = null;\n    this.fragmentTracker = null;\n    this.media = null;\n    this.mediaSource = void 0;\n    this.nudgeRetry = 0;\n    this.stallReported = false;\n    this.stalled = null;\n    this.moved = false;\n    this.seeking = false;\n    this.buffered = {};\n    this.lastCurrentTime = 0;\n    this.ended = 0;\n    this.waiting = 0;\n    this.onMediaPlaying = () => {\n      this.ended = 0;\n      this.waiting = 0;\n    };\n    this.onMediaWaiting = () => {\n      var _this$media;\n      if ((_this$media = this.media) != null && _this$media.seeking) {\n        return;\n      }\n      this.waiting = self.performance.now();\n      this.tick();\n    };\n    this.onMediaEnded = () => {\n      if (this.hls) {\n        var _this$media2;\n        this.ended = ((_this$media2 = this.media) == null ? void 0 : _this$media2.currentTime) || 1;\n        this.hls.trigger(Events.MEDIA_ENDED, {\n          stalled: false\n        });\n      }\n    };\n    this.hls = hls;\n    this.fragmentTracker = fragmentTracker;\n    this.registerListeners();\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    if (hls) {\n      hls.on(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n      hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n      hls.on(Events.BUFFER_APPENDED, this.onBufferAppended, this);\n    }\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    if (hls) {\n      hls.off(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n      hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n      hls.off(Events.BUFFER_APPENDED, this.onBufferAppended, this);\n    }\n  }\n  destroy() {\n    super.destroy();\n    this.unregisterListeners();\n    this.media = this.hls = this.fragmentTracker = null;\n    this.mediaSource = void 0;\n  }\n  onMediaAttached(event, data) {\n    this.setInterval(TICK_INTERVAL$1);\n    this.mediaSource = data.mediaSource;\n    const media = this.media = data.media;\n    addEventListener(media, \"playing\", this.onMediaPlaying);\n    addEventListener(media, \"waiting\", this.onMediaWaiting);\n    addEventListener(media, \"ended\", this.onMediaEnded);\n  }\n  onMediaDetaching(event, data) {\n    this.clearInterval();\n    const {\n      media\n    } = this;\n    if (media) {\n      removeEventListener(media, \"playing\", this.onMediaPlaying);\n      removeEventListener(media, \"waiting\", this.onMediaWaiting);\n      removeEventListener(media, \"ended\", this.onMediaEnded);\n      this.media = null;\n    }\n    this.mediaSource = void 0;\n  }\n  onBufferAppended(event, data) {\n    this.buffered = data.timeRanges;\n  }\n  get hasBuffered() {\n    return Object.keys(this.buffered).length > 0;\n  }\n  tick() {\n    var _this$media3;\n    if (!((_this$media3 = this.media) != null && _this$media3.readyState) || !this.hasBuffered) {\n      return;\n    }\n    const currentTime = this.media.currentTime;\n    this.poll(currentTime, this.lastCurrentTime);\n    this.lastCurrentTime = currentTime;\n  }\n  /**\n   * Checks if the playhead is stuck within a gap, and if so, attempts to free it.\n   * A gap is an unbuffered range between two buffered ranges (or the start and the first buffered range).\n   *\n   * @param lastCurrentTime - Previously read playhead position\n   */\n  poll(currentTime, lastCurrentTime) {\n    var _this$hls, _this$hls2;\n    const config = (_this$hls = this.hls) == null ? void 0 : _this$hls.config;\n    if (!config) {\n      return;\n    }\n    const media = this.media;\n    if (!media) {\n      return;\n    }\n    const {\n      seeking\n    } = media;\n    const seeked = this.seeking && !seeking;\n    const beginSeek = !this.seeking && seeking;\n    const pausedEndedOrHalted = media.paused && !seeking || media.ended || media.playbackRate === 0;\n    this.seeking = seeking;\n    if (currentTime !== lastCurrentTime) {\n      if (lastCurrentTime) {\n        this.ended = 0;\n      }\n      this.moved = true;\n      if (!seeking) {\n        this.nudgeRetry = 0;\n        if (config.nudgeOnVideoHole && !pausedEndedOrHalted && currentTime > lastCurrentTime) {\n          this.nudgeOnVideoHole(currentTime, lastCurrentTime);\n        }\n      }\n      if (this.waiting === 0) {\n        this.stallResolved(currentTime);\n      }\n      return;\n    }\n    if (beginSeek || seeked) {\n      if (seeked) {\n        this.stallResolved(currentTime);\n      }\n      return;\n    }\n    if (pausedEndedOrHalted) {\n      this.nudgeRetry = 0;\n      this.stallResolved(currentTime);\n      if (!this.ended && media.ended && this.hls) {\n        this.ended = currentTime || 1;\n        this.hls.trigger(Events.MEDIA_ENDED, {\n          stalled: false\n        });\n      }\n      return;\n    }\n    if (!BufferHelper.getBuffered(media).length) {\n      this.nudgeRetry = 0;\n      return;\n    }\n    const bufferInfo = BufferHelper.bufferInfo(media, currentTime, 0);\n    const nextStart = bufferInfo.nextStart || 0;\n    const fragmentTracker = this.fragmentTracker;\n    if (seeking && fragmentTracker && this.hls) {\n      const inFlightDependency = getInFlightDependency(this.hls.inFlightFragments, currentTime);\n      const hasEnoughBuffer = bufferInfo.len > MAX_START_GAP_JUMP;\n      const noBufferHole = !nextStart || inFlightDependency || nextStart - currentTime > MAX_START_GAP_JUMP && !fragmentTracker.getPartialFragment(currentTime);\n      if (hasEnoughBuffer || noBufferHole) {\n        return;\n      }\n      this.moved = false;\n    }\n    const levelDetails = (_this$hls2 = this.hls) == null ? void 0 : _this$hls2.latestLevelDetails;\n    if (!this.moved && this.stalled !== null && fragmentTracker) {\n      const isBuffered = bufferInfo.len > 0;\n      if (!isBuffered && !nextStart) {\n        return;\n      }\n      const startJump = Math.max(nextStart, bufferInfo.start || 0) - currentTime;\n      const isLive = !!(levelDetails != null && levelDetails.live);\n      const maxStartGapJump = isLive ? levelDetails.targetduration * 2 : MAX_START_GAP_JUMP;\n      const partialOrGap = fragmentTracker.getPartialFragment(currentTime);\n      if (startJump > 0 && (startJump <= maxStartGapJump || partialOrGap)) {\n        if (!media.paused) {\n          this._trySkipBufferHole(partialOrGap);\n        }\n        return;\n      }\n    }\n    const detectStallWithCurrentTimeMs = config.detectStallWithCurrentTimeMs;\n    const tnow = self.performance.now();\n    const tWaiting = this.waiting;\n    let stalled = this.stalled;\n    if (stalled === null) {\n      if (tWaiting > 0 && tnow - tWaiting < detectStallWithCurrentTimeMs) {\n        stalled = this.stalled = tWaiting;\n      } else {\n        this.stalled = tnow;\n        return;\n      }\n    }\n    const stalledDuration = tnow - stalled;\n    if (!seeking && (stalledDuration >= detectStallWithCurrentTimeMs || tWaiting) && this.hls) {\n      var _this$mediaSource;\n      if (((_this$mediaSource = this.mediaSource) == null ? void 0 : _this$mediaSource.readyState) === \"ended\" && !(levelDetails != null && levelDetails.live) && Math.abs(currentTime - ((levelDetails == null ? void 0 : levelDetails.edge) || 0)) < 1) {\n        if (this.ended) {\n          return;\n        }\n        this.ended = currentTime || 1;\n        this.hls.trigger(Events.MEDIA_ENDED, {\n          stalled: true\n        });\n        return;\n      }\n      this._reportStall(bufferInfo);\n      if (!this.media || !this.hls) {\n        return;\n      }\n    }\n    const bufferedWithHoles = BufferHelper.bufferInfo(media, currentTime, config.maxBufferHole);\n    this._tryFixBufferStall(bufferedWithHoles, stalledDuration, currentTime);\n  }\n  stallResolved(currentTime) {\n    const stalled = this.stalled;\n    if (stalled && this.hls) {\n      this.stalled = null;\n      if (this.stallReported) {\n        const stalledDuration = self.performance.now() - stalled;\n        this.log(`playback not stuck anymore @${currentTime}, after ${Math.round(stalledDuration)}ms`);\n        this.stallReported = false;\n        this.waiting = 0;\n        this.hls.trigger(Events.STALL_RESOLVED, {});\n      }\n    }\n  }\n  nudgeOnVideoHole(currentTime, lastCurrentTime) {\n    var _this$buffered$audio;\n    const videoSourceBuffered = this.buffered.video;\n    if (this.hls && this.media && this.fragmentTracker && (_this$buffered$audio = this.buffered.audio) != null && _this$buffered$audio.length && videoSourceBuffered && videoSourceBuffered.length > 1 && currentTime > videoSourceBuffered.end(0)) {\n      const audioBufferInfo = BufferHelper.bufferedInfo(BufferHelper.timeRangesToArray(this.buffered.audio), currentTime, 0);\n      if (audioBufferInfo.len > 1 && lastCurrentTime >= audioBufferInfo.start) {\n        const videoTimes = BufferHelper.timeRangesToArray(videoSourceBuffered);\n        const lastBufferedIndex = BufferHelper.bufferedInfo(videoTimes, lastCurrentTime, 0).bufferedIndex;\n        if (lastBufferedIndex > -1 && lastBufferedIndex < videoTimes.length - 1) {\n          const bufferedIndex = BufferHelper.bufferedInfo(videoTimes, currentTime, 0).bufferedIndex;\n          const holeStart = videoTimes[lastBufferedIndex].end;\n          const holeEnd = videoTimes[lastBufferedIndex + 1].start;\n          if ((bufferedIndex === -1 || bufferedIndex > lastBufferedIndex) && holeEnd - holeStart < 1 && // `maxBufferHole` may be too small and setting it to 0 should not disable this feature\n          currentTime - holeStart < 2) {\n            const error = new Error(`nudging playhead to flush pipeline after video hole. currentTime: ${currentTime} hole: ${holeStart} -> ${holeEnd} buffered index: ${bufferedIndex}`);\n            this.warn(error.message);\n            this.media.currentTime += 1e-6;\n            const frag = this.fragmentTracker.getPartialFragment(currentTime) || void 0;\n            const bufferInfo = BufferHelper.bufferInfo(this.media, currentTime, 0);\n            this.hls.trigger(Events.ERROR, {\n              type: ErrorTypes.MEDIA_ERROR,\n              details: ErrorDetails.BUFFER_SEEK_OVER_HOLE,\n              fatal: false,\n              error,\n              reason: error.message,\n              frag,\n              buffer: bufferInfo.len,\n              bufferInfo\n            });\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Detects and attempts to fix known buffer stalling issues.\n   * @param bufferInfo - The properties of the current buffer.\n   * @param stalledDurationMs - The amount of time Hls.js has been stalling for.\n   * @private\n   */\n  _tryFixBufferStall(bufferInfo, stalledDurationMs, currentTime) {\n    var _this$hls3, _this$hls4;\n    const {\n      fragmentTracker,\n      media\n    } = this;\n    const config = (_this$hls3 = this.hls) == null ? void 0 : _this$hls3.config;\n    if (!media || !fragmentTracker || !config) {\n      return;\n    }\n    const levelDetails = (_this$hls4 = this.hls) == null ? void 0 : _this$hls4.latestLevelDetails;\n    const partial = fragmentTracker.getPartialFragment(currentTime);\n    if (partial || levelDetails != null && levelDetails.live && currentTime < levelDetails.fragmentStart) {\n      const targetTime = this._trySkipBufferHole(partial);\n      if (targetTime || !this.media) {\n        return;\n      }\n    }\n    const bufferedRanges = bufferInfo.buffered;\n    const adjacentTraversal = this.adjacentTraversal(bufferInfo, currentTime);\n    if ((bufferedRanges && bufferedRanges.length > 1 && bufferInfo.len > config.maxBufferHole || bufferInfo.nextStart && (bufferInfo.nextStart - currentTime < config.maxBufferHole || adjacentTraversal)) && (stalledDurationMs > config.highBufferWatchdogPeriod * 1e3 || this.waiting)) {\n      this.warn(\"Trying to nudge playhead over buffer-hole\");\n      this._tryNudgeBuffer(bufferInfo);\n    }\n  }\n  adjacentTraversal(bufferInfo, currentTime) {\n    const fragmentTracker = this.fragmentTracker;\n    const nextStart = bufferInfo.nextStart;\n    if (fragmentTracker && nextStart) {\n      const current = fragmentTracker.getFragAtPos(currentTime, PlaylistLevelType.MAIN);\n      const next = fragmentTracker.getFragAtPos(nextStart, PlaylistLevelType.MAIN);\n      if (current && next) {\n        return next.sn - current.sn < 2;\n      }\n    }\n    return false;\n  }\n  /**\n   * Triggers a BUFFER_STALLED_ERROR event, but only once per stall period.\n   * @param bufferLen - The playhead distance from the end of the current buffer segment.\n   * @private\n   */\n  _reportStall(bufferInfo) {\n    const {\n      hls,\n      media,\n      stallReported,\n      stalled\n    } = this;\n    if (!stallReported && stalled !== null && media && hls) {\n      this.stallReported = true;\n      const error = new Error(`Playback stalling at @${media.currentTime} due to low buffer (${stringify(bufferInfo)})`);\n      this.warn(error.message);\n      hls.trigger(Events.ERROR, {\n        type: ErrorTypes.MEDIA_ERROR,\n        details: ErrorDetails.BUFFER_STALLED_ERROR,\n        fatal: false,\n        error,\n        buffer: bufferInfo.len,\n        bufferInfo,\n        stalled: {\n          start: stalled\n        }\n      });\n    }\n  }\n  /**\n   * Attempts to fix buffer stalls by jumping over known gaps caused by partial fragments\n   * @param partial - The partial fragment found at the current time (where playback is stalling).\n   * @private\n   */\n  _trySkipBufferHole(partial) {\n    var _this$hls5;\n    const {\n      fragmentTracker,\n      media\n    } = this;\n    const config = (_this$hls5 = this.hls) == null ? void 0 : _this$hls5.config;\n    if (!media || !fragmentTracker || !config) {\n      return 0;\n    }\n    const currentTime = media.currentTime;\n    const bufferInfo = BufferHelper.bufferInfo(media, currentTime, 0);\n    const startTime = currentTime < bufferInfo.start ? bufferInfo.start : bufferInfo.nextStart;\n    if (startTime && this.hls) {\n      const bufferStarved = bufferInfo.len <= config.maxBufferHole;\n      const waiting = bufferInfo.len > 0 && bufferInfo.len < 1 && media.readyState < 3;\n      const gapLength = startTime - currentTime;\n      if (gapLength > 0 && (bufferStarved || waiting)) {\n        if (gapLength > config.maxBufferHole) {\n          let startGap = false;\n          if (currentTime === 0) {\n            const startFrag = fragmentTracker.getAppendedFrag(0, PlaylistLevelType.MAIN);\n            if (startFrag && startTime < startFrag.end) {\n              startGap = true;\n            }\n          }\n          if (!startGap) {\n            const startProvisioned = partial || fragmentTracker.getAppendedFrag(currentTime, PlaylistLevelType.MAIN);\n            if (startProvisioned) {\n              var _this$hls$loadLevelOb;\n              if (!((_this$hls$loadLevelOb = this.hls.loadLevelObj) != null && _this$hls$loadLevelOb.details)) {\n                return 0;\n              }\n              const inFlightDependency = getInFlightDependency(this.hls.inFlightFragments, startTime);\n              if (inFlightDependency) {\n                return 0;\n              }\n              let moreToLoad = false;\n              let pos = startProvisioned.end;\n              while (pos < startTime) {\n                const provisioned = fragmentTracker.getAppendedFrag(pos, PlaylistLevelType.MAIN) || fragmentTracker.getPartialFragment(pos);\n                if (provisioned) {\n                  pos += provisioned.duration;\n                } else {\n                  moreToLoad = true;\n                  break;\n                }\n              }\n              if (moreToLoad) {\n                return 0;\n              }\n            }\n          }\n        }\n        const targetTime = Math.max(startTime + SKIP_BUFFER_RANGE_START, currentTime + SKIP_BUFFER_HOLE_STEP_SECONDS);\n        this.warn(`skipping hole, adjusting currentTime from ${currentTime} to ${targetTime}`);\n        this.moved = true;\n        media.currentTime = targetTime;\n        if (!(partial != null && partial.gap)) {\n          const error = new Error(`fragment loaded with buffer holes, seeking from ${currentTime} to ${targetTime}`);\n          this.hls.trigger(Events.ERROR, {\n            type: ErrorTypes.MEDIA_ERROR,\n            details: ErrorDetails.BUFFER_SEEK_OVER_HOLE,\n            fatal: false,\n            error,\n            reason: error.message,\n            frag: partial || void 0,\n            buffer: bufferInfo.len,\n            bufferInfo\n          });\n        }\n        return targetTime;\n      }\n    }\n    return 0;\n  }\n  /**\n   * Attempts to fix buffer stalls by advancing the mediaElement's current time by a small amount.\n   * @private\n   */\n  _tryNudgeBuffer(bufferInfo) {\n    const {\n      hls,\n      media,\n      nudgeRetry\n    } = this;\n    const config = hls == null ? void 0 : hls.config;\n    if (!media || !config) {\n      return 0;\n    }\n    const currentTime = media.currentTime;\n    this.nudgeRetry++;\n    if (nudgeRetry < config.nudgeMaxRetry) {\n      const targetTime = currentTime + (nudgeRetry + 1) * config.nudgeOffset;\n      const error = new Error(`Nudging 'currentTime' from ${currentTime} to ${targetTime}`);\n      this.warn(error.message);\n      media.currentTime = targetTime;\n      hls.trigger(Events.ERROR, {\n        type: ErrorTypes.MEDIA_ERROR,\n        details: ErrorDetails.BUFFER_NUDGE_ON_STALL,\n        error,\n        fatal: false,\n        buffer: bufferInfo.len,\n        bufferInfo\n      });\n    } else {\n      const error = new Error(`Playhead still not moving while enough data buffered @${currentTime} after ${config.nudgeMaxRetry} nudges`);\n      this.error(error.message);\n      hls.trigger(Events.ERROR, {\n        type: ErrorTypes.MEDIA_ERROR,\n        details: ErrorDetails.BUFFER_STALLED_ERROR,\n        error,\n        fatal: true,\n        buffer: bufferInfo.len,\n        bufferInfo\n      });\n    }\n  }\n}\nfunction getInFlightDependency(inFlightFragments, currentTime) {\n  const main = inFlight(inFlightFragments.main);\n  if (main && main.start <= currentTime) {\n    return main;\n  }\n  const audio = inFlight(inFlightFragments.audio);\n  if (audio && audio.start <= currentTime) {\n    return audio;\n  }\n  return null;\n}\nfunction inFlight(inFlightData) {\n  if (!inFlightData) {\n    return null;\n  }\n  switch (inFlightData.state) {\n    case State.IDLE:\n    case State.STOPPED:\n    case State.ENDED:\n    case State.ERROR:\n      return null;\n  }\n  return inFlightData.frag;\n}\nconst MIN_CUE_DURATION = 0.25;\nfunction getCueClass() {\n  if (typeof self === \"undefined\") return void 0;\n  return self.VTTCue || self.TextTrackCue;\n}\nfunction createCueWithDataFields(Cue, startTime, endTime, data, type) {\n  let cue = new Cue(startTime, endTime, \"\");\n  try {\n    cue.value = data;\n    if (type) {\n      cue.type = type;\n    }\n  } catch (e) {\n    cue = new Cue(startTime, endTime, stringify(type ? _objectSpread2({\n      type\n    }, data) : data));\n  }\n  return cue;\n}\nconst MAX_CUE_ENDTIME = (() => {\n  const Cue = getCueClass();\n  try {\n    Cue && new Cue(0, Number.POSITIVE_INFINITY, \"\");\n  } catch (e) {\n    return Number.MAX_VALUE;\n  }\n  return Number.POSITIVE_INFINITY;\n})();\nclass ID3TrackController {\n  constructor(hls) {\n    this.hls = void 0;\n    this.id3Track = null;\n    this.media = null;\n    this.dateRangeCuesAppended = {};\n    this.removeCues = true;\n    this.onEventCueEnter = () => {\n      if (!this.hls) {\n        return;\n      }\n      this.hls.trigger(Events.EVENT_CUE_ENTER, {});\n    };\n    this.hls = hls;\n    this._registerListeners();\n  }\n  destroy() {\n    this._unregisterListeners();\n    this.id3Track = null;\n    this.media = null;\n    this.dateRangeCuesAppended = {};\n    this.hls = this.onEventCueEnter = null;\n  }\n  _registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.on(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.FRAG_PARSING_METADATA, this.onFragParsingMetadata, this);\n    hls.on(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n    hls.on(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n    hls.on(Events.LEVEL_PTS_UPDATED, this.onLevelPtsUpdated, this);\n  }\n  _unregisterListeners() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MEDIA_ATTACHING, this.onMediaAttaching, this);\n    hls.off(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.FRAG_PARSING_METADATA, this.onFragParsingMetadata, this);\n    hls.off(Events.BUFFER_FLUSHING, this.onBufferFlushing, this);\n    hls.off(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n    hls.off(Events.LEVEL_PTS_UPDATED, this.onLevelPtsUpdated, this);\n  }\n  // Add ID3 metatadata text track.\n  onMediaAttaching(event, data) {\n    var _data$overrides;\n    this.media = data.media;\n    if (((_data$overrides = data.overrides) == null ? void 0 : _data$overrides.cueRemoval) === false) {\n      this.removeCues = false;\n    }\n  }\n  onMediaAttached() {\n    const details = this.hls.latestLevelDetails;\n    if (details) {\n      this.updateDateRangeCues(details);\n    }\n  }\n  onMediaDetaching(event, data) {\n    this.media = null;\n    const transferringMedia = !!data.transferMedia;\n    if (transferringMedia) {\n      return;\n    }\n    if (this.id3Track) {\n      if (this.removeCues) {\n        clearCurrentCues(this.id3Track, this.onEventCueEnter);\n      }\n      this.id3Track = null;\n    }\n    this.dateRangeCuesAppended = {};\n  }\n  onManifestLoading() {\n    this.dateRangeCuesAppended = {};\n  }\n  createTrack(media) {\n    const track = this.getID3Track(media.textTracks);\n    track.mode = \"hidden\";\n    return track;\n  }\n  getID3Track(textTracks) {\n    if (!this.media) {\n      return;\n    }\n    for (let i = 0; i < textTracks.length; i++) {\n      const textTrack = textTracks[i];\n      if (textTrack.kind === \"metadata\" && textTrack.label === \"id3\") {\n        sendAddTrackEvent(textTrack, this.media);\n        return textTrack;\n      }\n    }\n    return this.media.addTextTrack(\"metadata\", \"id3\");\n  }\n  onFragParsingMetadata(event, data) {\n    if (!this.media) {\n      return;\n    }\n    const {\n      hls: {\n        config: {\n          enableEmsgMetadataCues,\n          enableID3MetadataCues\n        }\n      }\n    } = this;\n    if (!enableEmsgMetadataCues && !enableID3MetadataCues) {\n      return;\n    }\n    const {\n      samples\n    } = data;\n    if (!this.id3Track) {\n      this.id3Track = this.createTrack(this.media);\n    }\n    const Cue = getCueClass();\n    if (!Cue) {\n      return;\n    }\n    for (let i = 0; i < samples.length; i++) {\n      const type = samples[i].type;\n      if (type === MetadataSchema.emsg && !enableEmsgMetadataCues || !enableID3MetadataCues) {\n        continue;\n      }\n      const frames = getId3Frames(samples[i].data);\n      if (frames) {\n        const startTime = samples[i].pts;\n        let endTime = startTime + samples[i].duration;\n        if (endTime > MAX_CUE_ENDTIME) {\n          endTime = MAX_CUE_ENDTIME;\n        }\n        const timeDiff = endTime - startTime;\n        if (timeDiff <= 0) {\n          endTime = startTime + MIN_CUE_DURATION;\n        }\n        for (let j = 0; j < frames.length; j++) {\n          const frame = frames[j];\n          if (!isId3TimestampFrame(frame)) {\n            this.updateId3CueEnds(startTime, type);\n            const cue = createCueWithDataFields(Cue, startTime, endTime, frame, type);\n            if (cue) {\n              this.id3Track.addCue(cue);\n            }\n          }\n        }\n      }\n    }\n  }\n  updateId3CueEnds(startTime, type) {\n    var _this$id3Track;\n    const cues = (_this$id3Track = this.id3Track) == null ? void 0 : _this$id3Track.cues;\n    if (cues) {\n      for (let i = cues.length; i--; ) {\n        const cue = cues[i];\n        if (cue.type === type && cue.startTime < startTime && cue.endTime === MAX_CUE_ENDTIME) {\n          cue.endTime = startTime;\n        }\n      }\n    }\n  }\n  onBufferFlushing(event, {\n    startOffset,\n    endOffset,\n    type\n  }) {\n    const {\n      id3Track,\n      hls\n    } = this;\n    if (!hls) {\n      return;\n    }\n    const {\n      config: {\n        enableEmsgMetadataCues,\n        enableID3MetadataCues\n      }\n    } = hls;\n    if (id3Track && (enableEmsgMetadataCues || enableID3MetadataCues)) {\n      let predicate;\n      if (type === \"audio\") {\n        predicate = (cue) => cue.type === MetadataSchema.audioId3 && enableID3MetadataCues;\n      } else if (type === \"video\") {\n        predicate = (cue) => cue.type === MetadataSchema.emsg && enableEmsgMetadataCues;\n      } else {\n        predicate = (cue) => cue.type === MetadataSchema.audioId3 && enableID3MetadataCues || cue.type === MetadataSchema.emsg && enableEmsgMetadataCues;\n      }\n      removeCuesInRange(id3Track, startOffset, endOffset, predicate);\n    }\n  }\n  onLevelUpdated(event, {\n    details\n  }) {\n    this.updateDateRangeCues(details, true);\n  }\n  onLevelPtsUpdated(event, data) {\n    if (Math.abs(data.drift) > 0.01) {\n      this.updateDateRangeCues(data.details);\n    }\n  }\n  updateDateRangeCues(details, removeOldCues) {\n    if (!this.media || !details.hasProgramDateTime || !this.hls.config.enableDateRangeMetadataCues) {\n      return;\n    }\n    const {\n      id3Track\n    } = this;\n    const {\n      dateRanges\n    } = details;\n    const ids = Object.keys(dateRanges);\n    let dateRangeCuesAppended = this.dateRangeCuesAppended;\n    if (id3Track && removeOldCues) {\n      var _id3Track$cues;\n      if ((_id3Track$cues = id3Track.cues) != null && _id3Track$cues.length) {\n        const idsToRemove = Object.keys(dateRangeCuesAppended).filter((id) => !ids.includes(id));\n        for (let i = idsToRemove.length; i--; ) {\n          const id = idsToRemove[i];\n          const cues = dateRangeCuesAppended[id].cues;\n          delete dateRangeCuesAppended[id];\n          Object.keys(cues).forEach((key) => {\n            try {\n              const cue = cues[key];\n              cue.removeEventListener(\"enter\", this.onEventCueEnter);\n              id3Track.removeCue(cue);\n            } catch (e) {\n            }\n          });\n        }\n      } else {\n        dateRangeCuesAppended = this.dateRangeCuesAppended = {};\n      }\n    }\n    const lastFragment = details.fragments[details.fragments.length - 1];\n    if (ids.length === 0 || !isFiniteNumber(lastFragment == null ? void 0 : lastFragment.programDateTime)) {\n      return;\n    }\n    if (!this.id3Track) {\n      this.id3Track = this.createTrack(this.media);\n    }\n    const Cue = getCueClass();\n    for (let i = 0; i < ids.length; i++) {\n      const id = ids[i];\n      const dateRange = dateRanges[id];\n      const startTime = dateRange.startTime;\n      const appendedDateRangeCues = dateRangeCuesAppended[id];\n      const cues = (appendedDateRangeCues == null ? void 0 : appendedDateRangeCues.cues) || {};\n      let durationKnown = (appendedDateRangeCues == null ? void 0 : appendedDateRangeCues.durationKnown) || false;\n      let endTime = MAX_CUE_ENDTIME;\n      const {\n        duration,\n        endDate\n      } = dateRange;\n      if (endDate && duration !== null) {\n        endTime = startTime + duration;\n        durationKnown = true;\n      } else if (dateRange.endOnNext && !durationKnown) {\n        const nextDateRangeWithSameClass = ids.reduce((candidateDateRange, id2) => {\n          if (id2 !== dateRange.id) {\n            const otherDateRange = dateRanges[id2];\n            if (otherDateRange.class === dateRange.class && otherDateRange.startDate > dateRange.startDate && (!candidateDateRange || dateRange.startDate < candidateDateRange.startDate)) {\n              return otherDateRange;\n            }\n          }\n          return candidateDateRange;\n        }, null);\n        if (nextDateRangeWithSameClass) {\n          endTime = nextDateRangeWithSameClass.startTime;\n          durationKnown = true;\n        }\n      }\n      const attributes = Object.keys(dateRange.attr);\n      for (let j = 0; j < attributes.length; j++) {\n        const key = attributes[j];\n        if (!isDateRangeCueAttribute(key)) {\n          continue;\n        }\n        const cue = cues[key];\n        if (cue) {\n          if (durationKnown && !appendedDateRangeCues.durationKnown) {\n            cue.endTime = endTime;\n          } else if (Math.abs(cue.startTime - startTime) > 0.01) {\n            cue.startTime = startTime;\n            cue.endTime = endTime;\n          }\n        } else if (Cue) {\n          let data = dateRange.attr[key];\n          if (isSCTE35Attribute(key)) {\n            data = hexToArrayBuffer(data);\n          }\n          const payload = {\n            key,\n            data\n          };\n          const _cue = createCueWithDataFields(Cue, startTime, endTime, payload, MetadataSchema.dateRange);\n          if (_cue) {\n            _cue.id = id;\n            this.id3Track.addCue(_cue);\n            cues[key] = _cue;\n            if (this.hls.config.interstitialsController) {\n              if (key === \"X-ASSET-LIST\" || key === \"X-ASSET-URL\") {\n                _cue.addEventListener(\"enter\", this.onEventCueEnter);\n              }\n            }\n          }\n        }\n      }\n      dateRangeCuesAppended[id] = {\n        cues,\n        dateRange,\n        durationKnown\n      };\n    }\n  }\n}\nclass LatencyController {\n  constructor(hls) {\n    this.hls = void 0;\n    this.config = void 0;\n    this.media = null;\n    this.currentTime = 0;\n    this.stallCount = 0;\n    this._latency = null;\n    this._targetLatencyUpdated = false;\n    this.onTimeupdate = () => {\n      const {\n        media\n      } = this;\n      const levelDetails = this.levelDetails;\n      if (!media || !levelDetails) {\n        return;\n      }\n      this.currentTime = media.currentTime;\n      const latency = this.computeLatency();\n      if (latency === null) {\n        return;\n      }\n      this._latency = latency;\n      const {\n        lowLatencyMode,\n        maxLiveSyncPlaybackRate\n      } = this.config;\n      if (!lowLatencyMode || maxLiveSyncPlaybackRate === 1 || !levelDetails.live) {\n        return;\n      }\n      const targetLatency = this.targetLatency;\n      if (targetLatency === null) {\n        return;\n      }\n      const distanceFromTarget = latency - targetLatency;\n      const liveMinLatencyDuration = Math.min(this.maxLatency, targetLatency + levelDetails.targetduration);\n      const inLiveRange = distanceFromTarget < liveMinLatencyDuration;\n      if (inLiveRange && distanceFromTarget > 0.05 && this.forwardBufferLength > 1) {\n        const max = Math.min(2, Math.max(1, maxLiveSyncPlaybackRate));\n        const rate = Math.round(2 / (1 + Math.exp(-0.75 * distanceFromTarget - this.edgeStalled)) * 20) / 20;\n        const playbackRate = Math.min(max, Math.max(1, rate));\n        this.changeMediaPlaybackRate(media, playbackRate);\n      } else if (media.playbackRate !== 1 && media.playbackRate !== 0) {\n        this.changeMediaPlaybackRate(media, 1);\n      }\n    };\n    this.hls = hls;\n    this.config = hls.config;\n    this.registerListeners();\n  }\n  get levelDetails() {\n    var _this$hls;\n    return ((_this$hls = this.hls) == null ? void 0 : _this$hls.latestLevelDetails) || null;\n  }\n  get latency() {\n    return this._latency || 0;\n  }\n  get maxLatency() {\n    const {\n      config\n    } = this;\n    if (config.liveMaxLatencyDuration !== void 0) {\n      return config.liveMaxLatencyDuration;\n    }\n    const levelDetails = this.levelDetails;\n    return levelDetails ? config.liveMaxLatencyDurationCount * levelDetails.targetduration : 0;\n  }\n  get targetLatency() {\n    const levelDetails = this.levelDetails;\n    if (levelDetails === null || this.hls === null) {\n      return null;\n    }\n    const {\n      holdBack,\n      partHoldBack,\n      targetduration\n    } = levelDetails;\n    const {\n      liveSyncDuration,\n      liveSyncDurationCount,\n      lowLatencyMode\n    } = this.config;\n    const userConfig = this.hls.userConfig;\n    let targetLatency = lowLatencyMode ? partHoldBack || holdBack : holdBack;\n    if (this._targetLatencyUpdated || userConfig.liveSyncDuration || userConfig.liveSyncDurationCount || targetLatency === 0) {\n      targetLatency = liveSyncDuration !== void 0 ? liveSyncDuration : liveSyncDurationCount * targetduration;\n    }\n    const maxLiveSyncOnStallIncrease = targetduration;\n    return targetLatency + Math.min(this.stallCount * this.config.liveSyncOnStallIncrease, maxLiveSyncOnStallIncrease);\n  }\n  set targetLatency(latency) {\n    this.stallCount = 0;\n    this.config.liveSyncDuration = latency;\n    this._targetLatencyUpdated = true;\n  }\n  get liveSyncPosition() {\n    const liveEdge = this.estimateLiveEdge();\n    const targetLatency = this.targetLatency;\n    if (liveEdge === null || targetLatency === null) {\n      return null;\n    }\n    const levelDetails = this.levelDetails;\n    if (levelDetails === null) {\n      return null;\n    }\n    const edge = levelDetails.edge;\n    const syncPosition = liveEdge - targetLatency - this.edgeStalled;\n    const min = edge - levelDetails.totalduration;\n    const max = edge - (this.config.lowLatencyMode && levelDetails.partTarget || levelDetails.targetduration);\n    return Math.min(Math.max(min, syncPosition), max);\n  }\n  get drift() {\n    const levelDetails = this.levelDetails;\n    if (levelDetails === null) {\n      return 1;\n    }\n    return levelDetails.drift;\n  }\n  get edgeStalled() {\n    const levelDetails = this.levelDetails;\n    if (levelDetails === null) {\n      return 0;\n    }\n    const maxLevelUpdateAge = (this.config.lowLatencyMode && levelDetails.partTarget || levelDetails.targetduration) * 3;\n    return Math.max(levelDetails.age - maxLevelUpdateAge, 0);\n  }\n  get forwardBufferLength() {\n    const {\n      media\n    } = this;\n    const levelDetails = this.levelDetails;\n    if (!media || !levelDetails) {\n      return 0;\n    }\n    const bufferedRanges = media.buffered.length;\n    return (bufferedRanges ? media.buffered.end(bufferedRanges - 1) : levelDetails.edge) - this.currentTime;\n  }\n  destroy() {\n    this.unregisterListeners();\n    this.onMediaDetaching();\n    this.hls = null;\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    if (!hls) {\n      return;\n    }\n    hls.on(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.on(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n    hls.on(Events.ERROR, this.onError, this);\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    if (!hls) {\n      return;\n    }\n    hls.off(Events.MEDIA_ATTACHED, this.onMediaAttached, this);\n    hls.off(Events.MEDIA_DETACHING, this.onMediaDetaching, this);\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.LEVEL_UPDATED, this.onLevelUpdated, this);\n    hls.off(Events.ERROR, this.onError, this);\n  }\n  onMediaAttached(event, data) {\n    this.media = data.media;\n    this.media.addEventListener(\"timeupdate\", this.onTimeupdate);\n  }\n  onMediaDetaching() {\n    if (this.media) {\n      this.media.removeEventListener(\"timeupdate\", this.onTimeupdate);\n      this.media = null;\n    }\n  }\n  onManifestLoading() {\n    this._latency = null;\n    this.stallCount = 0;\n  }\n  onLevelUpdated(event, {\n    details\n  }) {\n    if (details.advanced) {\n      this.onTimeupdate();\n    }\n    if (!details.live && this.media) {\n      this.media.removeEventListener(\"timeupdate\", this.onTimeupdate);\n    }\n  }\n  onError(event, data) {\n    var _this$levelDetails;\n    if (data.details !== ErrorDetails.BUFFER_STALLED_ERROR) {\n      return;\n    }\n    this.stallCount++;\n    if (this.hls && (_this$levelDetails = this.levelDetails) != null && _this$levelDetails.live) {\n      this.hls.logger.warn(\"[latency-controller]: Stall detected, adjusting target latency\");\n    }\n  }\n  changeMediaPlaybackRate(media, playbackRate) {\n    var _this$hls2, _this$targetLatency;\n    if (media.playbackRate === playbackRate) {\n      return;\n    }\n    (_this$hls2 = this.hls) == null ? void 0 : _this$hls2.logger.debug(`[latency-controller]: latency=${this.latency.toFixed(3)}, targetLatency=${(_this$targetLatency = this.targetLatency) == null ? void 0 : _this$targetLatency.toFixed(3)}, forwardBufferLength=${this.forwardBufferLength.toFixed(3)}: adjusting playback rate from ${media.playbackRate} to ${playbackRate}`);\n    media.playbackRate = playbackRate;\n  }\n  estimateLiveEdge() {\n    const levelDetails = this.levelDetails;\n    if (levelDetails === null) {\n      return null;\n    }\n    return levelDetails.edge + levelDetails.age;\n  }\n  computeLatency() {\n    const liveEdge = this.estimateLiveEdge();\n    if (liveEdge === null) {\n      return null;\n    }\n    return liveEdge - this.currentTime;\n  }\n}\nclass LevelController extends BasePlaylistController {\n  constructor(hls, contentSteeringController) {\n    super(hls, \"level-controller\");\n    this._levels = [];\n    this._firstLevel = -1;\n    this._maxAutoLevel = -1;\n    this._startLevel = void 0;\n    this.currentLevel = null;\n    this.currentLevelIndex = -1;\n    this.manualLevelIndex = -1;\n    this.steering = void 0;\n    this.onParsedComplete = void 0;\n    this.steering = contentSteeringController;\n    this._registerListeners();\n  }\n  _registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    hls.on(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.on(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n    hls.on(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n    hls.on(Events.ERROR, this.onError, this);\n  }\n  _unregisterListeners() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.MANIFEST_LOADED, this.onManifestLoaded, this);\n    hls.off(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.off(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n    hls.off(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n    hls.off(Events.ERROR, this.onError, this);\n  }\n  destroy() {\n    this._unregisterListeners();\n    this.steering = null;\n    this.resetLevels();\n    super.destroy();\n  }\n  stopLoad() {\n    const levels = this._levels;\n    levels.forEach((level) => {\n      level.loadError = 0;\n      level.fragmentError = 0;\n    });\n    super.stopLoad();\n  }\n  resetLevels() {\n    this._startLevel = void 0;\n    this.manualLevelIndex = -1;\n    this.currentLevelIndex = -1;\n    this.currentLevel = null;\n    this._levels = [];\n    this._maxAutoLevel = -1;\n  }\n  onManifestLoading(event, data) {\n    this.resetLevels();\n  }\n  onManifestLoaded(event, data) {\n    const preferManagedMediaSource = this.hls.config.preferManagedMediaSource;\n    const levels = [];\n    const redundantSet = {};\n    const generatePathwaySet = {};\n    let resolutionFound = false;\n    let videoCodecFound = false;\n    let audioCodecFound = false;\n    data.levels.forEach((levelParsed) => {\n      const attributes = levelParsed.attrs;\n      let {\n        audioCodec,\n        videoCodec\n      } = levelParsed;\n      if (audioCodec) {\n        levelParsed.audioCodec = audioCodec = getCodecCompatibleName(audioCodec, preferManagedMediaSource) || void 0;\n      }\n      if (videoCodec) {\n        videoCodec = levelParsed.videoCodec = convertAVC1ToAVCOTI(videoCodec);\n      }\n      const {\n        width,\n        height,\n        unknownCodecs\n      } = levelParsed;\n      let unknownUnsupportedCodecCount = unknownCodecs ? unknownCodecs.length : 0;\n      if (unknownCodecs) {\n        for (let i = unknownUnsupportedCodecCount; i--; ) {\n          const unknownCodec = unknownCodecs[i];\n          if (this.isAudioSupported(unknownCodec)) {\n            levelParsed.audioCodec = audioCodec = audioCodec ? `${audioCodec},${unknownCodec}` : unknownCodec;\n            unknownUnsupportedCodecCount--;\n            sampleEntryCodesISO.audio[audioCodec.substring(0, 4)] = 2;\n          } else if (this.isVideoSupported(unknownCodec)) {\n            levelParsed.videoCodec = videoCodec = videoCodec ? `${videoCodec},${unknownCodec}` : unknownCodec;\n            unknownUnsupportedCodecCount--;\n            sampleEntryCodesISO.video[videoCodec.substring(0, 4)] = 2;\n          }\n        }\n      }\n      resolutionFound || (resolutionFound = !!(width && height));\n      videoCodecFound || (videoCodecFound = !!videoCodec);\n      audioCodecFound || (audioCodecFound = !!audioCodec);\n      if (unknownUnsupportedCodecCount || audioCodec && !this.isAudioSupported(audioCodec) || videoCodec && !this.isVideoSupported(videoCodec)) {\n        this.log(`Some or all CODECS not supported \"${attributes.CODECS}\"`);\n        return;\n      }\n      const {\n        CODECS,\n        \"FRAME-RATE\": FRAMERATE,\n        \"HDCP-LEVEL\": HDCP,\n        \"PATHWAY-ID\": PATHWAY,\n        RESOLUTION,\n        \"VIDEO-RANGE\": VIDEO_RANGE\n      } = attributes;\n      const contentSteeringPrefix = `${PATHWAY || \".\"}-`;\n      const levelKey = `${contentSteeringPrefix}${levelParsed.bitrate}-${RESOLUTION}-${FRAMERATE}-${CODECS}-${VIDEO_RANGE}-${HDCP}`;\n      if (!redundantSet[levelKey]) {\n        const level = this.createLevel(levelParsed);\n        redundantSet[levelKey] = level;\n        generatePathwaySet[levelKey] = 1;\n        levels.push(level);\n      } else if (redundantSet[levelKey].uri !== levelParsed.url && !levelParsed.attrs[\"PATHWAY-ID\"]) {\n        const pathwayCount = generatePathwaySet[levelKey] += 1;\n        levelParsed.attrs[\"PATHWAY-ID\"] = new Array(pathwayCount + 1).join(\".\");\n        const level = this.createLevel(levelParsed);\n        redundantSet[levelKey] = level;\n        levels.push(level);\n      } else {\n        redundantSet[levelKey].addGroupId(\"audio\", attributes.AUDIO);\n        redundantSet[levelKey].addGroupId(\"text\", attributes.SUBTITLES);\n      }\n    });\n    this.filterAndSortMediaOptions(levels, data, resolutionFound, videoCodecFound, audioCodecFound);\n  }\n  createLevel(levelParsed) {\n    const level = new Level(levelParsed);\n    const supplemental = levelParsed.supplemental;\n    if (supplemental != null && supplemental.videoCodec && !this.isVideoSupported(supplemental.videoCodec)) {\n      const error = new Error(`SUPPLEMENTAL-CODECS not supported \"${supplemental.videoCodec}\"`);\n      this.log(error.message);\n      level.supportedResult = getUnsupportedResult(error, []);\n    }\n    return level;\n  }\n  isAudioSupported(codec) {\n    return areCodecsMediaSourceSupported(codec, \"audio\", this.hls.config.preferManagedMediaSource);\n  }\n  isVideoSupported(codec) {\n    return areCodecsMediaSourceSupported(codec, \"video\", this.hls.config.preferManagedMediaSource);\n  }\n  filterAndSortMediaOptions(filteredLevels, data, resolutionFound, videoCodecFound, audioCodecFound) {\n    let audioTracks = [];\n    let subtitleTracks = [];\n    let levels = filteredLevels;\n    if ((resolutionFound || videoCodecFound) && audioCodecFound) {\n      levels = levels.filter(({\n        videoCodec,\n        videoRange,\n        width,\n        height\n      }) => (!!videoCodec || !!(width && height)) && isVideoRange(videoRange));\n    }\n    if (levels.length === 0) {\n      Promise.resolve().then(() => {\n        if (this.hls) {\n          let message = \"no level with compatible codecs found in manifest\";\n          let reason = message;\n          if (data.levels.length) {\n            reason = `one or more CODECS in variant not supported: ${stringify(data.levels.map((level) => level.attrs.CODECS).filter((value, index, array) => array.indexOf(value) === index))}`;\n            this.warn(reason);\n            message += ` (${reason})`;\n          }\n          const error = new Error(message);\n          this.hls.trigger(Events.ERROR, {\n            type: ErrorTypes.MEDIA_ERROR,\n            details: ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,\n            fatal: true,\n            url: data.url,\n            error,\n            reason\n          });\n        }\n      });\n      return;\n    }\n    if (data.audioTracks) {\n      audioTracks = data.audioTracks.filter((track) => !track.audioCodec || this.isAudioSupported(track.audioCodec));\n      assignTrackIdsByGroup(audioTracks);\n    }\n    if (data.subtitles) {\n      subtitleTracks = data.subtitles;\n      assignTrackIdsByGroup(subtitleTracks);\n    }\n    const unsortedLevels = levels.slice(0);\n    levels.sort((a, b) => {\n      if (a.attrs[\"HDCP-LEVEL\"] !== b.attrs[\"HDCP-LEVEL\"]) {\n        return (a.attrs[\"HDCP-LEVEL\"] || \"\") > (b.attrs[\"HDCP-LEVEL\"] || \"\") ? 1 : -1;\n      }\n      if (resolutionFound && a.height !== b.height) {\n        return a.height - b.height;\n      }\n      if (a.frameRate !== b.frameRate) {\n        return a.frameRate - b.frameRate;\n      }\n      if (a.videoRange !== b.videoRange) {\n        return VideoRangeValues.indexOf(a.videoRange) - VideoRangeValues.indexOf(b.videoRange);\n      }\n      if (a.videoCodec !== b.videoCodec) {\n        const valueA = videoCodecPreferenceValue(a.videoCodec);\n        const valueB = videoCodecPreferenceValue(b.videoCodec);\n        if (valueA !== valueB) {\n          return valueB - valueA;\n        }\n      }\n      if (a.uri === b.uri && a.codecSet !== b.codecSet) {\n        const valueA = codecsSetSelectionPreferenceValue(a.codecSet);\n        const valueB = codecsSetSelectionPreferenceValue(b.codecSet);\n        if (valueA !== valueB) {\n          return valueB - valueA;\n        }\n      }\n      if (a.averageBitrate !== b.averageBitrate) {\n        return a.averageBitrate - b.averageBitrate;\n      }\n      return 0;\n    });\n    let firstLevelInPlaylist = unsortedLevels[0];\n    if (this.steering) {\n      levels = this.steering.filterParsedLevels(levels);\n      if (levels.length !== unsortedLevels.length) {\n        for (let i = 0; i < unsortedLevels.length; i++) {\n          if (unsortedLevels[i].pathwayId === levels[0].pathwayId) {\n            firstLevelInPlaylist = unsortedLevels[i];\n            break;\n          }\n        }\n      }\n    }\n    this._levels = levels;\n    for (let i = 0; i < levels.length; i++) {\n      if (levels[i] === firstLevelInPlaylist) {\n        var _this$hls$userConfig;\n        this._firstLevel = i;\n        const firstLevelBitrate = firstLevelInPlaylist.bitrate;\n        const bandwidthEstimate = this.hls.bandwidthEstimate;\n        this.log(`manifest loaded, ${levels.length} level(s) found, first bitrate: ${firstLevelBitrate}`);\n        if (((_this$hls$userConfig = this.hls.userConfig) == null ? void 0 : _this$hls$userConfig.abrEwmaDefaultEstimate) === void 0) {\n          const startingBwEstimate = Math.min(firstLevelBitrate, this.hls.config.abrEwmaDefaultEstimateMax);\n          if (startingBwEstimate > bandwidthEstimate && bandwidthEstimate === this.hls.abrEwmaDefaultEstimate) {\n            this.hls.bandwidthEstimate = startingBwEstimate;\n          }\n        }\n        break;\n      }\n    }\n    const audioOnly = audioCodecFound && !videoCodecFound;\n    const config = this.hls.config;\n    const altAudioEnabled = !!(config.audioStreamController && config.audioTrackController);\n    const edata = {\n      levels,\n      audioTracks,\n      subtitleTracks,\n      sessionData: data.sessionData,\n      sessionKeys: data.sessionKeys,\n      firstLevel: this._firstLevel,\n      stats: data.stats,\n      audio: audioCodecFound,\n      video: videoCodecFound,\n      altAudio: altAudioEnabled && !audioOnly && audioTracks.some((t) => !!t.url)\n    };\n    this.hls.trigger(Events.MANIFEST_PARSED, edata);\n  }\n  get levels() {\n    if (this._levels.length === 0) {\n      return null;\n    }\n    return this._levels;\n  }\n  get loadLevelObj() {\n    return this.currentLevel;\n  }\n  get level() {\n    return this.currentLevelIndex;\n  }\n  set level(newLevel) {\n    const levels = this._levels;\n    if (levels.length === 0) {\n      return;\n    }\n    if (newLevel < 0 || newLevel >= levels.length) {\n      const error = new Error(\"invalid level idx\");\n      const fatal = newLevel < 0;\n      this.hls.trigger(Events.ERROR, {\n        type: ErrorTypes.OTHER_ERROR,\n        details: ErrorDetails.LEVEL_SWITCH_ERROR,\n        level: newLevel,\n        fatal,\n        error,\n        reason: error.message\n      });\n      if (fatal) {\n        return;\n      }\n      newLevel = Math.min(newLevel, levels.length - 1);\n    }\n    const lastLevelIndex = this.currentLevelIndex;\n    const lastLevel = this.currentLevel;\n    const lastPathwayId = lastLevel ? lastLevel.attrs[\"PATHWAY-ID\"] : void 0;\n    const level = levels[newLevel];\n    const pathwayId = level.attrs[\"PATHWAY-ID\"];\n    this.currentLevelIndex = newLevel;\n    this.currentLevel = level;\n    if (lastLevelIndex === newLevel && lastLevel && lastPathwayId === pathwayId) {\n      return;\n    }\n    this.log(`Switching to level ${newLevel} (${level.height ? level.height + \"p \" : \"\"}${level.videoRange ? level.videoRange + \" \" : \"\"}${level.codecSet ? level.codecSet + \" \" : \"\"}@${level.bitrate})${pathwayId ? \" with Pathway \" + pathwayId : \"\"} from level ${lastLevelIndex}${lastPathwayId ? \" with Pathway \" + lastPathwayId : \"\"}`);\n    const levelSwitchingData = {\n      level: newLevel,\n      attrs: level.attrs,\n      details: level.details,\n      bitrate: level.bitrate,\n      averageBitrate: level.averageBitrate,\n      maxBitrate: level.maxBitrate,\n      realBitrate: level.realBitrate,\n      width: level.width,\n      height: level.height,\n      codecSet: level.codecSet,\n      audioCodec: level.audioCodec,\n      videoCodec: level.videoCodec,\n      audioGroups: level.audioGroups,\n      subtitleGroups: level.subtitleGroups,\n      loaded: level.loaded,\n      loadError: level.loadError,\n      fragmentError: level.fragmentError,\n      name: level.name,\n      id: level.id,\n      uri: level.uri,\n      url: level.url,\n      urlId: 0,\n      audioGroupIds: level.audioGroupIds,\n      textGroupIds: level.textGroupIds\n    };\n    this.hls.trigger(Events.LEVEL_SWITCHING, levelSwitchingData);\n    const levelDetails = level.details;\n    if (!levelDetails || levelDetails.live) {\n      const hlsUrlParameters = this.switchParams(level.uri, lastLevel == null ? void 0 : lastLevel.details, levelDetails);\n      this.loadPlaylist(hlsUrlParameters);\n    }\n  }\n  get manualLevel() {\n    return this.manualLevelIndex;\n  }\n  set manualLevel(newLevel) {\n    this.manualLevelIndex = newLevel;\n    if (this._startLevel === void 0) {\n      this._startLevel = newLevel;\n    }\n    if (newLevel !== -1) {\n      this.level = newLevel;\n    }\n  }\n  get firstLevel() {\n    return this._firstLevel;\n  }\n  set firstLevel(newLevel) {\n    this._firstLevel = newLevel;\n  }\n  get startLevel() {\n    if (this._startLevel === void 0) {\n      const configStartLevel = this.hls.config.startLevel;\n      if (configStartLevel !== void 0) {\n        return configStartLevel;\n      }\n      return this.hls.firstAutoLevel;\n    }\n    return this._startLevel;\n  }\n  set startLevel(newLevel) {\n    this._startLevel = newLevel;\n  }\n  get pathways() {\n    if (this.steering) {\n      return this.steering.pathways();\n    }\n    return [];\n  }\n  get pathwayPriority() {\n    if (this.steering) {\n      return this.steering.pathwayPriority;\n    }\n    return null;\n  }\n  set pathwayPriority(pathwayPriority) {\n    if (this.steering) {\n      const pathwaysList = this.steering.pathways();\n      const filteredPathwayPriority = pathwayPriority.filter((pathwayId) => {\n        return pathwaysList.indexOf(pathwayId) !== -1;\n      });\n      if (pathwayPriority.length < 1) {\n        this.warn(`pathwayPriority ${pathwayPriority} should contain at least one pathway from list: ${pathwaysList}`);\n        return;\n      }\n      this.steering.pathwayPriority = filteredPathwayPriority;\n    }\n  }\n  onError(event, data) {\n    if (data.fatal || !data.context) {\n      return;\n    }\n    if (data.context.type === PlaylistContextType.LEVEL && data.context.level === this.level) {\n      this.checkRetry(data);\n    }\n  }\n  // reset errors on the successful load of a fragment\n  onFragBuffered(event, {\n    frag\n  }) {\n    if (frag !== void 0 && frag.type === PlaylistLevelType.MAIN) {\n      const el = frag.elementaryStreams;\n      if (!Object.keys(el).some((type) => !!el[type])) {\n        return;\n      }\n      const level = this._levels[frag.level];\n      if (level != null && level.loadError) {\n        this.log(`Resetting level error count of ${level.loadError} on frag buffered`);\n        level.loadError = 0;\n      }\n    }\n  }\n  onLevelLoaded(event, data) {\n    var _data$deliveryDirecti2;\n    const {\n      level,\n      details\n    } = data;\n    const curLevel = data.levelInfo;\n    if (!curLevel) {\n      var _data$deliveryDirecti;\n      this.warn(`Invalid level index ${level}`);\n      if ((_data$deliveryDirecti = data.deliveryDirectives) != null && _data$deliveryDirecti.skip) {\n        details.deltaUpdateFailed = true;\n      }\n      return;\n    }\n    if (curLevel === this.currentLevel || data.withoutMultiVariant) {\n      if (curLevel.fragmentError === 0) {\n        curLevel.loadError = 0;\n      }\n      let previousDetails = curLevel.details;\n      if (previousDetails === data.details && previousDetails.advanced) {\n        previousDetails = void 0;\n      }\n      this.playlistLoaded(level, data, previousDetails);\n    } else if ((_data$deliveryDirecti2 = data.deliveryDirectives) != null && _data$deliveryDirecti2.skip) {\n      details.deltaUpdateFailed = true;\n    }\n  }\n  loadPlaylist(hlsUrlParameters) {\n    super.loadPlaylist();\n    if (this.shouldLoadPlaylist(this.currentLevel)) {\n      this.scheduleLoading(this.currentLevel, hlsUrlParameters);\n    }\n  }\n  loadingPlaylist(currentLevel, hlsUrlParameters) {\n    super.loadingPlaylist(currentLevel, hlsUrlParameters);\n    const url = this.getUrlWithDirectives(currentLevel.uri, hlsUrlParameters);\n    const currentLevelIndex = this.currentLevelIndex;\n    const pathwayId = currentLevel.attrs[\"PATHWAY-ID\"];\n    const details = currentLevel.details;\n    const age = details == null ? void 0 : details.age;\n    this.log(`Loading level index ${currentLevelIndex}${(hlsUrlParameters == null ? void 0 : hlsUrlParameters.msn) !== void 0 ? \" at sn \" + hlsUrlParameters.msn + \" part \" + hlsUrlParameters.part : \"\"}${pathwayId ? \" Pathway \" + pathwayId : \"\"}${age && details.live ? \" age \" + age.toFixed(1) + (details.type ? \" \" + details.type || \"\" : \"\") : \"\"} ${url}`);\n    this.hls.trigger(Events.LEVEL_LOADING, {\n      url,\n      level: currentLevelIndex,\n      levelInfo: currentLevel,\n      pathwayId: currentLevel.attrs[\"PATHWAY-ID\"],\n      id: 0,\n      // Deprecated Level urlId\n      deliveryDirectives: hlsUrlParameters || null\n    });\n  }\n  get nextLoadLevel() {\n    if (this.manualLevelIndex !== -1) {\n      return this.manualLevelIndex;\n    } else {\n      return this.hls.nextAutoLevel;\n    }\n  }\n  set nextLoadLevel(nextLevel) {\n    this.level = nextLevel;\n    if (this.manualLevelIndex === -1) {\n      this.hls.nextAutoLevel = nextLevel;\n    }\n  }\n  removeLevel(levelIndex) {\n    var _this$currentLevel;\n    if (this._levels.length === 1) {\n      return;\n    }\n    const levels = this._levels.filter((level, index) => {\n      if (index !== levelIndex) {\n        return true;\n      }\n      if (this.steering) {\n        this.steering.removeLevel(level);\n      }\n      if (level === this.currentLevel) {\n        this.currentLevel = null;\n        this.currentLevelIndex = -1;\n        if (level.details) {\n          level.details.fragments.forEach((f) => f.level = -1);\n        }\n      }\n      return false;\n    });\n    reassignFragmentLevelIndexes(levels);\n    this._levels = levels;\n    if (this.currentLevelIndex > -1 && (_this$currentLevel = this.currentLevel) != null && _this$currentLevel.details) {\n      this.currentLevelIndex = this.currentLevel.details.fragments[0].level;\n    }\n    if (this.manualLevelIndex > -1) {\n      this.manualLevelIndex = this.currentLevelIndex;\n    }\n    const maxLevel = levels.length - 1;\n    this._firstLevel = Math.min(this._firstLevel, maxLevel);\n    if (this._startLevel) {\n      this._startLevel = Math.min(this._startLevel, maxLevel);\n    }\n    this.hls.trigger(Events.LEVELS_UPDATED, {\n      levels\n    });\n  }\n  onLevelsUpdated(event, {\n    levels\n  }) {\n    this._levels = levels;\n  }\n  checkMaxAutoUpdated() {\n    const {\n      autoLevelCapping,\n      maxAutoLevel,\n      maxHdcpLevel\n    } = this.hls;\n    if (this._maxAutoLevel !== maxAutoLevel) {\n      this._maxAutoLevel = maxAutoLevel;\n      this.hls.trigger(Events.MAX_AUTO_LEVEL_UPDATED, {\n        autoLevelCapping,\n        levels: this.levels,\n        maxAutoLevel,\n        minAutoLevel: this.hls.minAutoLevel,\n        maxHdcpLevel\n      });\n    }\n  }\n}\nfunction assignTrackIdsByGroup(tracks) {\n  const groups = {};\n  tracks.forEach((track) => {\n    const groupId = track.groupId || \"\";\n    track.id = groups[groupId] = groups[groupId] || 0;\n    groups[groupId]++;\n  });\n}\nfunction getSourceBuffer() {\n  return self.SourceBuffer || self.WebKitSourceBuffer;\n}\nfunction isMSESupported() {\n  const mediaSource = getMediaSource();\n  if (!mediaSource) {\n    return false;\n  }\n  const sourceBuffer = getSourceBuffer();\n  return !sourceBuffer || sourceBuffer.prototype && typeof sourceBuffer.prototype.appendBuffer === \"function\" && typeof sourceBuffer.prototype.remove === \"function\";\n}\nfunction isSupported() {\n  if (!isMSESupported()) {\n    return false;\n  }\n  const mediaSource = getMediaSource();\n  return typeof (mediaSource == null ? void 0 : mediaSource.isTypeSupported) === \"function\" && ([\"avc1.42E01E,mp4a.40.2\", \"av01.0.01M.08\", \"vp09.00.50.08\"].some((codecsForVideoContainer) => mediaSource.isTypeSupported(mimeTypeForCodec(codecsForVideoContainer, \"video\"))) || [\"mp4a.40.2\", \"fLaC\"].some((codecForAudioContainer) => mediaSource.isTypeSupported(mimeTypeForCodec(codecForAudioContainer, \"audio\"))));\n}\nfunction changeTypeSupported() {\n  var _sourceBuffer$prototy;\n  const sourceBuffer = getSourceBuffer();\n  return typeof (sourceBuffer == null ? void 0 : (_sourceBuffer$prototy = sourceBuffer.prototype) == null ? void 0 : _sourceBuffer$prototy.changeType) === \"function\";\n}\nconst TICK_INTERVAL = 100;\nclass StreamController extends BaseStreamController {\n  constructor(hls, fragmentTracker, keyLoader) {\n    super(hls, fragmentTracker, keyLoader, \"stream-controller\", PlaylistLevelType.MAIN);\n    this.audioCodecSwap = false;\n    this.level = -1;\n    this._forceStartLoad = false;\n    this._hasEnoughToStart = false;\n    this.altAudio = 0;\n    this.audioOnly = false;\n    this.fragPlaying = null;\n    this.fragLastKbps = 0;\n    this.couldBacktrack = false;\n    this.backtrackFragment = null;\n    this.audioCodecSwitch = false;\n    this.videoBuffer = null;\n    this.onMediaPlaying = () => {\n      this.tick();\n    };\n    this.onMediaSeeked = () => {\n      const media = this.media;\n      const currentTime = media ? media.currentTime : null;\n      if (currentTime === null || !isFiniteNumber(currentTime)) {\n        return;\n      }\n      this.log(`Media seeked to ${currentTime.toFixed(3)}`);\n      if (!this.getBufferedFrag(currentTime)) {\n        return;\n      }\n      const bufferInfo = this.getFwdBufferInfoAtPos(media, currentTime, PlaylistLevelType.MAIN, 0);\n      if (bufferInfo === null || bufferInfo.len === 0) {\n        this.warn(`Main forward buffer length at ${currentTime} on \"seeked\" event ${bufferInfo ? bufferInfo.len : \"empty\"})`);\n        return;\n      }\n      this.tick();\n    };\n    this.registerListeners();\n  }\n  registerListeners() {\n    super.registerListeners();\n    const {\n      hls\n    } = this;\n    hls.on(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.on(Events.LEVEL_LOADING, this.onLevelLoading, this);\n    hls.on(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.on(Events.FRAG_LOAD_EMERGENCY_ABORTED, this.onFragLoadEmergencyAborted, this);\n    hls.on(Events.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this);\n    hls.on(Events.AUDIO_TRACK_SWITCHED, this.onAudioTrackSwitched, this);\n    hls.on(Events.BUFFER_CREATED, this.onBufferCreated, this);\n    hls.on(Events.BUFFER_FLUSHED, this.onBufferFlushed, this);\n    hls.on(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n    hls.on(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n  }\n  unregisterListeners() {\n    super.unregisterListeners();\n    const {\n      hls\n    } = this;\n    hls.off(Events.MANIFEST_PARSED, this.onManifestParsed, this);\n    hls.off(Events.LEVEL_LOADED, this.onLevelLoaded, this);\n    hls.off(Events.FRAG_LOAD_EMERGENCY_ABORTED, this.onFragLoadEmergencyAborted, this);\n    hls.off(Events.AUDIO_TRACK_SWITCHING, this.onAudioTrackSwitching, this);\n    hls.off(Events.AUDIO_TRACK_SWITCHED, this.onAudioTrackSwitched, this);\n    hls.off(Events.BUFFER_CREATED, this.onBufferCreated, this);\n    hls.off(Events.BUFFER_FLUSHED, this.onBufferFlushed, this);\n    hls.off(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n    hls.off(Events.FRAG_BUFFERED, this.onFragBuffered, this);\n  }\n  onHandlerDestroying() {\n    this.onMediaPlaying = this.onMediaSeeked = null;\n    this.unregisterListeners();\n    super.onHandlerDestroying();\n  }\n  startLoad(startPosition, skipSeekToStartPosition) {\n    if (this.levels) {\n      const {\n        lastCurrentTime,\n        hls\n      } = this;\n      this.stopLoad();\n      this.setInterval(TICK_INTERVAL);\n      this.level = -1;\n      if (!this.startFragRequested) {\n        let startLevel = hls.startLevel;\n        if (startLevel === -1) {\n          if (hls.config.testBandwidth && this.levels.length > 1) {\n            startLevel = 0;\n            this.bitrateTest = true;\n          } else {\n            startLevel = hls.firstAutoLevel;\n          }\n        }\n        hls.nextLoadLevel = startLevel;\n        this.level = hls.loadLevel;\n        this._hasEnoughToStart = !!skipSeekToStartPosition;\n      }\n      if (lastCurrentTime > 0 && startPosition === -1 && !skipSeekToStartPosition) {\n        this.log(`Override startPosition with lastCurrentTime @${lastCurrentTime.toFixed(3)}`);\n        startPosition = lastCurrentTime;\n      }\n      this.state = State.IDLE;\n      this.nextLoadPosition = this.lastCurrentTime = startPosition + this.timelineOffset;\n      this.startPosition = skipSeekToStartPosition ? -1 : startPosition;\n      this.tick();\n    } else {\n      this._forceStartLoad = true;\n      this.state = State.STOPPED;\n    }\n  }\n  stopLoad() {\n    this._forceStartLoad = false;\n    super.stopLoad();\n  }\n  doTick() {\n    switch (this.state) {\n      case State.WAITING_LEVEL: {\n        const {\n          levels,\n          level\n        } = this;\n        const currentLevel = levels == null ? void 0 : levels[level];\n        const details = currentLevel == null ? void 0 : currentLevel.details;\n        if (details && (!details.live || this.levelLastLoaded === currentLevel && !this.waitForLive(currentLevel))) {\n          if (this.waitForCdnTuneIn(details)) {\n            break;\n          }\n          this.state = State.IDLE;\n          break;\n        } else if (this.hls.nextLoadLevel !== this.level) {\n          this.state = State.IDLE;\n          break;\n        }\n        break;\n      }\n      case State.FRAG_LOADING_WAITING_RETRY:\n        {\n          var _this$media;\n          const now2 = self.performance.now();\n          const retryDate = this.retryDate;\n          if (!retryDate || now2 >= retryDate || (_this$media = this.media) != null && _this$media.seeking) {\n            const {\n              levels,\n              level\n            } = this;\n            const currentLevel = levels == null ? void 0 : levels[level];\n            this.resetStartWhenNotLoaded(currentLevel || null);\n            this.state = State.IDLE;\n          }\n        }\n        break;\n    }\n    if (this.state === State.IDLE) {\n      this.doTickIdle();\n    }\n    this.onTickEnd();\n  }\n  onTickEnd() {\n    var _this$media2;\n    super.onTickEnd();\n    if ((_this$media2 = this.media) != null && _this$media2.readyState && this.media.seeking === false) {\n      this.lastCurrentTime = this.media.currentTime;\n    }\n    this.checkFragmentChanged();\n  }\n  doTickIdle() {\n    const {\n      hls,\n      levelLastLoaded,\n      levels,\n      media\n    } = this;\n    if (levelLastLoaded === null || !media && !this.primaryPrefetch && (this.startFragRequested || !hls.config.startFragPrefetch)) {\n      return;\n    }\n    if (this.altAudio && this.audioOnly) {\n      return;\n    }\n    const level = this.buffering ? hls.nextLoadLevel : hls.loadLevel;\n    if (!(levels != null && levels[level])) {\n      return;\n    }\n    const levelInfo = levels[level];\n    const bufferInfo = this.getMainFwdBufferInfo();\n    if (bufferInfo === null) {\n      return;\n    }\n    const lastDetails = this.getLevelDetails();\n    if (lastDetails && this._streamEnded(bufferInfo, lastDetails)) {\n      const data = {};\n      if (this.altAudio === 2) {\n        data.type = \"video\";\n      }\n      this.hls.trigger(Events.BUFFER_EOS, data);\n      this.state = State.ENDED;\n      return;\n    }\n    if (!this.buffering) {\n      return;\n    }\n    if (hls.loadLevel !== level && hls.manualLevel === -1) {\n      this.log(`Adapting to level ${level} from level ${this.level}`);\n    }\n    this.level = hls.nextLoadLevel = level;\n    const levelDetails = levelInfo.details;\n    if (!levelDetails || this.state === State.WAITING_LEVEL || this.waitForLive(levelInfo)) {\n      this.level = level;\n      this.state = State.WAITING_LEVEL;\n      this.startFragRequested = false;\n      return;\n    }\n    const bufferLen = bufferInfo.len;\n    const maxBufLen = this.getMaxBufferLength(levelInfo.maxBitrate);\n    if (bufferLen >= maxBufLen) {\n      return;\n    }\n    if (this.backtrackFragment && this.backtrackFragment.start > bufferInfo.end) {\n      this.backtrackFragment = null;\n    }\n    const targetBufferTime = this.backtrackFragment ? this.backtrackFragment.start : bufferInfo.end;\n    let frag = this.getNextFragment(targetBufferTime, levelDetails);\n    if (this.couldBacktrack && !this.fragPrevious && frag && isMediaFragment(frag) && this.fragmentTracker.getState(frag) !== FragmentState.OK) {\n      var _this$backtrackFragme;\n      const backtrackSn = ((_this$backtrackFragme = this.backtrackFragment) != null ? _this$backtrackFragme : frag).sn;\n      const fragIdx = backtrackSn - levelDetails.startSN;\n      const backtrackFrag = levelDetails.fragments[fragIdx - 1];\n      if (backtrackFrag && frag.cc === backtrackFrag.cc) {\n        frag = backtrackFrag;\n        this.fragmentTracker.removeFragment(backtrackFrag);\n      }\n    } else if (this.backtrackFragment && bufferInfo.len) {\n      this.backtrackFragment = null;\n    }\n    if (frag && this.isLoopLoading(frag, targetBufferTime)) {\n      const gapStart = frag.gap;\n      if (!gapStart) {\n        const type = this.audioOnly && !this.altAudio ? ElementaryStreamTypes.AUDIO : ElementaryStreamTypes.VIDEO;\n        const mediaBuffer = (type === ElementaryStreamTypes.VIDEO ? this.videoBuffer : this.mediaBuffer) || this.media;\n        if (mediaBuffer) {\n          this.afterBufferFlushed(mediaBuffer, type, PlaylistLevelType.MAIN);\n        }\n      }\n      frag = this.getNextFragmentLoopLoading(frag, levelDetails, bufferInfo, PlaylistLevelType.MAIN, maxBufLen);\n    }\n    if (!frag) {\n      return;\n    }\n    if (frag.initSegment && !frag.initSegment.data && !this.bitrateTest) {\n      frag = frag.initSegment;\n    }\n    this.loadFragment(frag, levelInfo, targetBufferTime);\n  }\n  loadFragment(frag, level, targetBufferTime) {\n    const fragState = this.fragmentTracker.getState(frag);\n    if (fragState === FragmentState.NOT_LOADED || fragState === FragmentState.PARTIAL) {\n      if (!isMediaFragment(frag)) {\n        this._loadInitSegment(frag, level);\n      } else if (this.bitrateTest) {\n        this.log(`Fragment ${frag.sn} of level ${frag.level} is being downloaded to test bitrate and will not be buffered`);\n        this._loadBitrateTestFrag(frag, level);\n      } else {\n        super.loadFragment(frag, level, targetBufferTime);\n      }\n    } else {\n      this.clearTrackerIfNeeded(frag);\n    }\n  }\n  getBufferedFrag(position) {\n    return this.fragmentTracker.getBufferedFrag(position, PlaylistLevelType.MAIN);\n  }\n  followingBufferedFrag(frag) {\n    if (frag) {\n      return this.getBufferedFrag(frag.end + 0.5);\n    }\n    return null;\n  }\n  /*\n    on immediate level switch :\n     - pause playback if playing\n     - cancel any pending load request\n     - and trigger a buffer flush\n  */\n  immediateLevelSwitch() {\n    this.abortCurrentFrag();\n    this.flushMainBuffer(0, Number.POSITIVE_INFINITY);\n  }\n  /**\n   * try to switch ASAP without breaking video playback:\n   * in order to ensure smooth but quick level switching,\n   * we need to find the next flushable buffer range\n   * we should take into account new segment fetch time\n   */\n  nextLevelSwitch() {\n    const {\n      levels,\n      media\n    } = this;\n    if (media != null && media.readyState) {\n      let fetchdelay;\n      const fragPlayingCurrent = this.getAppendedFrag(media.currentTime);\n      if (fragPlayingCurrent && fragPlayingCurrent.start > 1) {\n        this.flushMainBuffer(0, fragPlayingCurrent.start - 1);\n      }\n      const levelDetails = this.getLevelDetails();\n      if (levelDetails != null && levelDetails.live) {\n        const bufferInfo = this.getMainFwdBufferInfo();\n        if (!bufferInfo || bufferInfo.len < levelDetails.targetduration * 2) {\n          return;\n        }\n      }\n      if (!media.paused && levels) {\n        const nextLevelId = this.hls.nextLoadLevel;\n        const nextLevel = levels[nextLevelId];\n        const fragLastKbps = this.fragLastKbps;\n        if (fragLastKbps && this.fragCurrent) {\n          fetchdelay = this.fragCurrent.duration * nextLevel.maxBitrate / (1e3 * fragLastKbps) + 1;\n        } else {\n          fetchdelay = 0;\n        }\n      } else {\n        fetchdelay = 0;\n      }\n      const bufferedFrag = this.getBufferedFrag(media.currentTime + fetchdelay);\n      if (bufferedFrag) {\n        const nextBufferedFrag = this.followingBufferedFrag(bufferedFrag);\n        if (nextBufferedFrag) {\n          this.abortCurrentFrag();\n          const maxStart = nextBufferedFrag.maxStartPTS ? nextBufferedFrag.maxStartPTS : nextBufferedFrag.start;\n          const fragDuration = nextBufferedFrag.duration;\n          const startPts = Math.max(bufferedFrag.end, maxStart + Math.min(Math.max(fragDuration - this.config.maxFragLookUpTolerance, fragDuration * (this.couldBacktrack ? 0.5 : 0.125)), fragDuration * (this.couldBacktrack ? 0.75 : 0.25)));\n          this.flushMainBuffer(startPts, Number.POSITIVE_INFINITY);\n        }\n      }\n    }\n  }\n  abortCurrentFrag() {\n    const fragCurrent = this.fragCurrent;\n    this.fragCurrent = null;\n    this.backtrackFragment = null;\n    if (fragCurrent) {\n      fragCurrent.abortRequests();\n      this.fragmentTracker.removeFragment(fragCurrent);\n    }\n    switch (this.state) {\n      case State.KEY_LOADING:\n      case State.FRAG_LOADING:\n      case State.FRAG_LOADING_WAITING_RETRY:\n      case State.PARSING:\n      case State.PARSED:\n        this.state = State.IDLE;\n        break;\n    }\n    this.nextLoadPosition = this.getLoadPosition();\n  }\n  flushMainBuffer(startOffset, endOffset) {\n    super.flushMainBuffer(startOffset, endOffset, this.altAudio === 2 ? \"video\" : null);\n  }\n  onMediaAttached(event, data) {\n    super.onMediaAttached(event, data);\n    const media = data.media;\n    addEventListener(media, \"playing\", this.onMediaPlaying);\n    addEventListener(media, \"seeked\", this.onMediaSeeked);\n  }\n  onMediaDetaching(event, data) {\n    const {\n      media\n    } = this;\n    if (media) {\n      removeEventListener(media, \"playing\", this.onMediaPlaying);\n      removeEventListener(media, \"seeked\", this.onMediaSeeked);\n    }\n    this.videoBuffer = null;\n    this.fragPlaying = null;\n    super.onMediaDetaching(event, data);\n    const transferringMedia = !!data.transferMedia;\n    if (transferringMedia) {\n      return;\n    }\n    this._hasEnoughToStart = false;\n  }\n  onManifestLoading() {\n    super.onManifestLoading();\n    this.log(\"Trigger BUFFER_RESET\");\n    this.hls.trigger(Events.BUFFER_RESET, void 0);\n    this.couldBacktrack = false;\n    this.fragLastKbps = 0;\n    this.fragPlaying = this.backtrackFragment = null;\n    this.altAudio = 0;\n    this.audioOnly = false;\n  }\n  onManifestParsed(event, data) {\n    let aac = false;\n    let heaac = false;\n    data.levels.forEach((level) => {\n      const codec = level.audioCodec;\n      if (codec) {\n        aac = aac || codec.indexOf(\"mp4a.40.2\") !== -1;\n        heaac = heaac || codec.indexOf(\"mp4a.40.5\") !== -1;\n      }\n    });\n    this.audioCodecSwitch = aac && heaac && !changeTypeSupported();\n    if (this.audioCodecSwitch) {\n      this.log(\"Both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC\");\n    }\n    this.levels = data.levels;\n    this.startFragRequested = false;\n  }\n  onLevelLoading(event, data) {\n    const {\n      levels\n    } = this;\n    if (!levels || this.state !== State.IDLE) {\n      return;\n    }\n    const level = data.levelInfo;\n    if (!level.details || level.details.live && (this.levelLastLoaded !== level || level.details.expired) || this.waitForCdnTuneIn(level.details)) {\n      this.state = State.WAITING_LEVEL;\n    }\n  }\n  onLevelLoaded(event, data) {\n    var _curLevel$details;\n    const {\n      levels,\n      startFragRequested\n    } = this;\n    const newLevelId = data.level;\n    const newDetails = data.details;\n    const duration = newDetails.totalduration;\n    if (!levels) {\n      this.warn(`Levels were reset while loading level ${newLevelId}`);\n      return;\n    }\n    this.log(`Level ${newLevelId} loaded [${newDetails.startSN},${newDetails.endSN}]${newDetails.lastPartSn ? `[part-${newDetails.lastPartSn}-${newDetails.lastPartIndex}]` : \"\"}, cc [${newDetails.startCC}, ${newDetails.endCC}] duration:${duration}`);\n    const curLevel = data.levelInfo;\n    const fragCurrent = this.fragCurrent;\n    if (fragCurrent && (this.state === State.FRAG_LOADING || this.state === State.FRAG_LOADING_WAITING_RETRY)) {\n      if (fragCurrent.level !== data.level && fragCurrent.loader) {\n        this.abortCurrentFrag();\n      }\n    }\n    let sliding = 0;\n    if (newDetails.live || (_curLevel$details = curLevel.details) != null && _curLevel$details.live) {\n      var _this$levelLastLoaded;\n      this.checkLiveUpdate(newDetails);\n      if (newDetails.deltaUpdateFailed) {\n        return;\n      }\n      sliding = this.alignPlaylists(newDetails, curLevel.details, (_this$levelLastLoaded = this.levelLastLoaded) == null ? void 0 : _this$levelLastLoaded.details);\n    }\n    curLevel.details = newDetails;\n    this.levelLastLoaded = curLevel;\n    if (!startFragRequested) {\n      this.setStartPosition(newDetails, sliding);\n    }\n    this.hls.trigger(Events.LEVEL_UPDATED, {\n      details: newDetails,\n      level: newLevelId\n    });\n    if (this.state === State.WAITING_LEVEL) {\n      if (this.waitForCdnTuneIn(newDetails)) {\n        return;\n      }\n      this.state = State.IDLE;\n    }\n    if (startFragRequested && newDetails.live) {\n      this.synchronizeToLiveEdge(newDetails);\n    }\n    this.tick();\n  }\n  synchronizeToLiveEdge(levelDetails) {\n    const {\n      config,\n      media\n    } = this;\n    if (!media) {\n      return;\n    }\n    const liveSyncPosition = this.hls.liveSyncPosition;\n    const currentTime = this.getLoadPosition();\n    const start = levelDetails.fragmentStart;\n    const end = levelDetails.edge;\n    const withinSlidingWindow = currentTime >= start - config.maxFragLookUpTolerance && currentTime <= end;\n    if (liveSyncPosition !== null && media.duration > liveSyncPosition && (currentTime < liveSyncPosition || !withinSlidingWindow)) {\n      const maxLatency = config.liveMaxLatencyDuration !== void 0 ? config.liveMaxLatencyDuration : config.liveMaxLatencyDurationCount * levelDetails.targetduration;\n      if (!withinSlidingWindow && media.readyState < 4 || currentTime < end - maxLatency) {\n        if (!this._hasEnoughToStart) {\n          this.nextLoadPosition = liveSyncPosition;\n        }\n        if (media.readyState) {\n          this.warn(`Playback: ${currentTime.toFixed(3)} is located too far from the end of live sliding playlist: ${end}, reset currentTime to : ${liveSyncPosition.toFixed(3)}`);\n          if (this.config.liveSyncMode === \"buffered\") {\n            var _bufferInfo$buffered;\n            const bufferInfo = BufferHelper.bufferInfo(media, liveSyncPosition, 0);\n            if (!(bufferInfo != null && (_bufferInfo$buffered = bufferInfo.buffered) != null && _bufferInfo$buffered.length)) {\n              media.currentTime = liveSyncPosition;\n              return;\n            }\n            const isLiveSyncInBuffer = bufferInfo.start <= currentTime;\n            if (isLiveSyncInBuffer) {\n              media.currentTime = liveSyncPosition;\n              return;\n            }\n            const {\n              nextStart\n            } = BufferHelper.bufferedInfo(bufferInfo.buffered, currentTime, 0);\n            if (nextStart) {\n              media.currentTime = nextStart;\n            }\n          } else {\n            media.currentTime = liveSyncPosition;\n          }\n        }\n      }\n    }\n  }\n  _handleFragmentLoadProgress(data) {\n    var _frag$initSegment;\n    const frag = data.frag;\n    const {\n      part,\n      payload\n    } = data;\n    const {\n      levels\n    } = this;\n    if (!levels) {\n      this.warn(`Levels were reset while fragment load was in progress. Fragment ${frag.sn} of level ${frag.level} will not be buffered`);\n      return;\n    }\n    const currentLevel = levels[frag.level];\n    if (!currentLevel) {\n      this.warn(`Level ${frag.level} not found on progress`);\n      return;\n    }\n    const details = currentLevel.details;\n    if (!details) {\n      this.warn(`Dropping fragment ${frag.sn} of level ${frag.level} after level details were reset`);\n      this.fragmentTracker.removeFragment(frag);\n      return;\n    }\n    const videoCodec = currentLevel.videoCodec;\n    const accurateTimeOffset = details.PTSKnown || !details.live;\n    const initSegmentData = (_frag$initSegment = frag.initSegment) == null ? void 0 : _frag$initSegment.data;\n    const audioCodec = this._getAudioCodec(currentLevel);\n    const transmuxer = this.transmuxer = this.transmuxer || new TransmuxerInterface(this.hls, PlaylistLevelType.MAIN, this._handleTransmuxComplete.bind(this), this._handleTransmuxerFlush.bind(this));\n    const partIndex = part ? part.index : -1;\n    const partial = partIndex !== -1;\n    const chunkMeta = new ChunkMetadata(frag.level, frag.sn, frag.stats.chunkCount, payload.byteLength, partIndex, partial);\n    const initPTS = this.initPTS[frag.cc];\n    transmuxer.push(payload, initSegmentData, audioCodec, videoCodec, frag, part, details.totalduration, accurateTimeOffset, chunkMeta, initPTS);\n  }\n  onAudioTrackSwitching(event, data) {\n    const hls = this.hls;\n    const fromAltAudio = this.altAudio === 2;\n    const altAudio = useAlternateAudio(data.url, hls);\n    if (!altAudio) {\n      if (this.mediaBuffer !== this.media) {\n        this.log(\"Switching on main audio, use media.buffered to schedule main fragment loading\");\n        this.mediaBuffer = this.media;\n        const fragCurrent = this.fragCurrent;\n        if (fragCurrent) {\n          this.log(\"Switching to main audio track, cancel main fragment load\");\n          fragCurrent.abortRequests();\n          this.fragmentTracker.removeFragment(fragCurrent);\n        }\n        this.resetTransmuxer();\n        this.resetLoadingState();\n      } else if (this.audioOnly) {\n        this.resetTransmuxer();\n      }\n      if (fromAltAudio) {\n        this.fragmentTracker.removeAllFragments();\n        hls.once(Events.BUFFER_FLUSHED, () => {\n          var _this$hls;\n          (_this$hls = this.hls) == null ? void 0 : _this$hls.trigger(Events.AUDIO_TRACK_SWITCHED, data);\n        });\n        hls.trigger(Events.BUFFER_FLUSHING, {\n          startOffset: 0,\n          endOffset: Number.POSITIVE_INFINITY,\n          type: null\n        });\n        return;\n      }\n      hls.trigger(Events.AUDIO_TRACK_SWITCHED, data);\n    } else {\n      this.altAudio = 1;\n    }\n  }\n  onAudioTrackSwitched(event, data) {\n    const altAudio = useAlternateAudio(data.url, this.hls);\n    if (altAudio) {\n      const videoBuffer = this.videoBuffer;\n      if (videoBuffer && this.mediaBuffer !== videoBuffer) {\n        this.log(\"Switching on alternate audio, use video.buffered to schedule main fragment loading\");\n        this.mediaBuffer = videoBuffer;\n      }\n    }\n    this.altAudio = altAudio ? 2 : 0;\n    this.tick();\n  }\n  onBufferCreated(event, data) {\n    const tracks = data.tracks;\n    let mediaTrack;\n    let name;\n    let alternate = false;\n    for (const type in tracks) {\n      const track = tracks[type];\n      if (track.id === \"main\") {\n        name = type;\n        mediaTrack = track;\n        if (type === \"video\") {\n          const videoTrack = tracks[type];\n          if (videoTrack) {\n            this.videoBuffer = videoTrack.buffer;\n          }\n        }\n      } else {\n        alternate = true;\n      }\n    }\n    if (alternate && mediaTrack) {\n      this.log(`Alternate track found, use ${name}.buffered to schedule main fragment loading`);\n      this.mediaBuffer = mediaTrack.buffer;\n    } else {\n      this.mediaBuffer = this.media;\n    }\n  }\n  onFragBuffered(event, data) {\n    const {\n      frag,\n      part\n    } = data;\n    const bufferedMainFragment = frag.type === PlaylistLevelType.MAIN;\n    if (bufferedMainFragment) {\n      if (this.fragContextChanged(frag)) {\n        this.warn(`Fragment ${frag.sn}${part ? \" p: \" + part.index : \"\"} of level ${frag.level} finished buffering, but was aborted. state: ${this.state}`);\n        if (this.state === State.PARSED) {\n          this.state = State.IDLE;\n        }\n        return;\n      }\n      const stats = part ? part.stats : frag.stats;\n      this.fragLastKbps = Math.round(8 * stats.total / (stats.buffering.end - stats.loading.first));\n      if (isMediaFragment(frag)) {\n        this.fragPrevious = frag;\n      }\n      this.fragBufferedComplete(frag, part);\n    }\n    const media = this.media;\n    if (!media) {\n      return;\n    }\n    if (!this._hasEnoughToStart && BufferHelper.getBuffered(media).length) {\n      this._hasEnoughToStart = true;\n      this.seekToStartPos();\n    }\n    if (bufferedMainFragment) {\n      this.tick();\n    }\n  }\n  get hasEnoughToStart() {\n    return this._hasEnoughToStart;\n  }\n  onError(event, data) {\n    var _data$context;\n    if (data.fatal) {\n      this.state = State.ERROR;\n      return;\n    }\n    switch (data.details) {\n      case ErrorDetails.FRAG_GAP:\n      case ErrorDetails.FRAG_PARSING_ERROR:\n      case ErrorDetails.FRAG_DECRYPT_ERROR:\n      case ErrorDetails.FRAG_LOAD_ERROR:\n      case ErrorDetails.FRAG_LOAD_TIMEOUT:\n      case ErrorDetails.KEY_LOAD_ERROR:\n      case ErrorDetails.KEY_LOAD_TIMEOUT:\n        this.onFragmentOrKeyLoadError(PlaylistLevelType.MAIN, data);\n        break;\n      case ErrorDetails.LEVEL_LOAD_ERROR:\n      case ErrorDetails.LEVEL_LOAD_TIMEOUT:\n      case ErrorDetails.LEVEL_PARSING_ERROR:\n        if (!data.levelRetry && this.state === State.WAITING_LEVEL && ((_data$context = data.context) == null ? void 0 : _data$context.type) === PlaylistContextType.LEVEL) {\n          this.state = State.IDLE;\n        }\n        break;\n      case ErrorDetails.BUFFER_ADD_CODEC_ERROR:\n      case ErrorDetails.BUFFER_APPEND_ERROR:\n        if (data.parent !== \"main\") {\n          return;\n        }\n        if (this.reduceLengthAndFlushBuffer(data)) {\n          this.resetLoadingState();\n        }\n        break;\n      case ErrorDetails.BUFFER_FULL_ERROR:\n        if (data.parent !== \"main\") {\n          return;\n        }\n        if (this.reduceLengthAndFlushBuffer(data)) {\n          this.flushMainBuffer(0, Number.POSITIVE_INFINITY);\n        }\n        break;\n      case ErrorDetails.INTERNAL_EXCEPTION:\n        this.recoverWorkerError(data);\n        break;\n    }\n  }\n  onFragLoadEmergencyAborted() {\n    this.state = State.IDLE;\n    if (!this._hasEnoughToStart) {\n      this.startFragRequested = false;\n      this.nextLoadPosition = this.lastCurrentTime;\n    }\n    this.tickImmediate();\n  }\n  onBufferFlushed(event, {\n    type\n  }) {\n    if (type !== ElementaryStreamTypes.AUDIO || !this.altAudio) {\n      const mediaBuffer = (type === ElementaryStreamTypes.VIDEO ? this.videoBuffer : this.mediaBuffer) || this.media;\n      if (mediaBuffer) {\n        this.afterBufferFlushed(mediaBuffer, type, PlaylistLevelType.MAIN);\n        this.tick();\n      }\n    }\n  }\n  onLevelsUpdated(event, data) {\n    if (this.level > -1 && this.fragCurrent) {\n      this.level = this.fragCurrent.level;\n      if (this.level === -1) {\n        this.resetWhenMissingContext(this.fragCurrent);\n      }\n    }\n    this.levels = data.levels;\n  }\n  swapAudioCodec() {\n    this.audioCodecSwap = !this.audioCodecSwap;\n  }\n  /**\n   * Seeks to the set startPosition if not equal to the mediaElement's current time.\n   */\n  seekToStartPos() {\n    const {\n      media\n    } = this;\n    if (!media) {\n      return;\n    }\n    const currentTime = media.currentTime;\n    let startPosition = this.startPosition;\n    if (startPosition >= 0 && currentTime < startPosition) {\n      if (media.seeking) {\n        this.log(`could not seek to ${startPosition}, already seeking at ${currentTime}`);\n        return;\n      }\n      const timelineOffset = this.timelineOffset;\n      if (timelineOffset && startPosition) {\n        startPosition += timelineOffset;\n      }\n      const details = this.getLevelDetails();\n      const buffered = BufferHelper.getBuffered(media);\n      const bufferStart = buffered.length ? buffered.start(0) : 0;\n      const delta = bufferStart - startPosition;\n      const skipTolerance = Math.max(this.config.maxBufferHole, this.config.maxFragLookUpTolerance);\n      if (this.config.startOnSegmentBoundary || delta > 0 && (delta < skipTolerance || this.loadingParts && delta < 2 * ((details == null ? void 0 : details.partTarget) || 0))) {\n        this.log(`adjusting start position by ${delta} to match buffer start`);\n        startPosition += delta;\n        this.startPosition = startPosition;\n      }\n      if (currentTime < startPosition) {\n        this.log(`seek to target start position ${startPosition} from current time ${currentTime} buffer start ${bufferStart}`);\n        media.currentTime = startPosition;\n      }\n    }\n  }\n  _getAudioCodec(currentLevel) {\n    let audioCodec = this.config.defaultAudioCodec || currentLevel.audioCodec;\n    if (this.audioCodecSwap && audioCodec) {\n      this.log(\"Swapping audio codec\");\n      if (audioCodec.indexOf(\"mp4a.40.5\") !== -1) {\n        audioCodec = \"mp4a.40.2\";\n      } else {\n        audioCodec = \"mp4a.40.5\";\n      }\n    }\n    return audioCodec;\n  }\n  _loadBitrateTestFrag(fragment, level) {\n    fragment.bitrateTest = true;\n    this._doFragLoad(fragment, level).then((data) => {\n      const {\n        hls\n      } = this;\n      const frag = data == null ? void 0 : data.frag;\n      if (!frag || this.fragContextChanged(frag)) {\n        return;\n      }\n      level.fragmentError = 0;\n      this.state = State.IDLE;\n      this.startFragRequested = false;\n      this.bitrateTest = false;\n      const stats = frag.stats;\n      stats.parsing.start = stats.parsing.end = stats.buffering.start = stats.buffering.end = self.performance.now();\n      hls.trigger(Events.FRAG_LOADED, data);\n      frag.bitrateTest = false;\n    });\n  }\n  _handleTransmuxComplete(transmuxResult) {\n    var _id3$samples;\n    const id = this.playlistType;\n    const {\n      hls\n    } = this;\n    const {\n      remuxResult,\n      chunkMeta\n    } = transmuxResult;\n    const context = this.getCurrentContext(chunkMeta);\n    if (!context) {\n      this.resetWhenMissingContext(chunkMeta);\n      return;\n    }\n    const {\n      frag,\n      part,\n      level\n    } = context;\n    const {\n      video,\n      text,\n      id3,\n      initSegment\n    } = remuxResult;\n    const {\n      details\n    } = level;\n    const audio = this.altAudio ? void 0 : remuxResult.audio;\n    if (this.fragContextChanged(frag)) {\n      this.fragmentTracker.removeFragment(frag);\n      return;\n    }\n    this.state = State.PARSING;\n    if (initSegment) {\n      if (initSegment != null && initSegment.tracks) {\n        const mapFragment = frag.initSegment || frag;\n        this._bufferInitSegment(level, initSegment.tracks, mapFragment, chunkMeta);\n        hls.trigger(Events.FRAG_PARSING_INIT_SEGMENT, {\n          frag: mapFragment,\n          id,\n          tracks: initSegment.tracks\n        });\n      }\n      const baseTime = initSegment.initPTS;\n      const timescale = initSegment.timescale;\n      const initPTS = this.initPTS[frag.cc];\n      if (isFiniteNumber(baseTime) && (!initPTS || initPTS.baseTime !== baseTime || initPTS.timescale !== timescale)) {\n        this.initPTS[frag.cc] = {\n          baseTime,\n          timescale\n        };\n        hls.trigger(Events.INIT_PTS_FOUND, {\n          frag,\n          id,\n          initPTS: baseTime,\n          timescale\n        });\n      }\n    }\n    if (video && details) {\n      if (audio && video.type === \"audiovideo\") {\n        this.logMuxedErr(frag);\n      }\n      const prevFrag = details.fragments[frag.sn - 1 - details.startSN];\n      const isFirstFragment = frag.sn === details.startSN;\n      const isFirstInDiscontinuity = !prevFrag || frag.cc > prevFrag.cc;\n      if (remuxResult.independent !== false) {\n        const {\n          startPTS,\n          endPTS,\n          startDTS,\n          endDTS\n        } = video;\n        if (part) {\n          part.elementaryStreams[video.type] = {\n            startPTS,\n            endPTS,\n            startDTS,\n            endDTS\n          };\n        } else {\n          if (video.firstKeyFrame && video.independent && chunkMeta.id === 1 && !isFirstInDiscontinuity) {\n            this.couldBacktrack = true;\n          }\n          if (video.dropped && video.independent) {\n            const bufferInfo = this.getMainFwdBufferInfo();\n            const targetBufferTime = (bufferInfo ? bufferInfo.end : this.getLoadPosition()) + this.config.maxBufferHole;\n            const startTime = video.firstKeyFramePTS ? video.firstKeyFramePTS : startPTS;\n            if (!isFirstFragment && targetBufferTime < startTime - this.config.maxBufferHole && !isFirstInDiscontinuity) {\n              this.backtrack(frag);\n              return;\n            } else if (isFirstInDiscontinuity) {\n              frag.gap = true;\n            }\n            frag.setElementaryStreamInfo(video.type, frag.start, endPTS, frag.start, endDTS, true);\n          } else if (isFirstFragment && startPTS - (details.appliedTimelineOffset || 0) > MAX_START_GAP_JUMP) {\n            frag.gap = true;\n          }\n        }\n        frag.setElementaryStreamInfo(video.type, startPTS, endPTS, startDTS, endDTS);\n        if (this.backtrackFragment) {\n          this.backtrackFragment = frag;\n        }\n        this.bufferFragmentData(video, frag, part, chunkMeta, isFirstFragment || isFirstInDiscontinuity);\n      } else if (isFirstFragment || isFirstInDiscontinuity) {\n        frag.gap = true;\n      } else {\n        this.backtrack(frag);\n        return;\n      }\n    }\n    if (audio) {\n      const {\n        startPTS,\n        endPTS,\n        startDTS,\n        endDTS\n      } = audio;\n      if (part) {\n        part.elementaryStreams[ElementaryStreamTypes.AUDIO] = {\n          startPTS,\n          endPTS,\n          startDTS,\n          endDTS\n        };\n      }\n      frag.setElementaryStreamInfo(ElementaryStreamTypes.AUDIO, startPTS, endPTS, startDTS, endDTS);\n      this.bufferFragmentData(audio, frag, part, chunkMeta);\n    }\n    if (details && id3 != null && (_id3$samples = id3.samples) != null && _id3$samples.length) {\n      const emittedID3 = {\n        id,\n        frag,\n        details,\n        samples: id3.samples\n      };\n      hls.trigger(Events.FRAG_PARSING_METADATA, emittedID3);\n    }\n    if (details && text) {\n      const emittedText = {\n        id,\n        frag,\n        details,\n        samples: text.samples\n      };\n      hls.trigger(Events.FRAG_PARSING_USERDATA, emittedText);\n    }\n  }\n  logMuxedErr(frag) {\n    this.warn(`${isMediaFragment(frag) ? \"Media\" : \"Init\"} segment with muxed audiovideo where only video expected: ${frag.url}`);\n  }\n  _bufferInitSegment(currentLevel, tracks, frag, chunkMeta) {\n    if (this.state !== State.PARSING) {\n      return;\n    }\n    this.audioOnly = !!tracks.audio && !tracks.video;\n    if (this.altAudio && !this.audioOnly) {\n      delete tracks.audio;\n      if (tracks.audiovideo) {\n        this.logMuxedErr(frag);\n      }\n    }\n    const {\n      audio,\n      video,\n      audiovideo\n    } = tracks;\n    if (audio) {\n      const levelCodec = currentLevel.audioCodec;\n      let audioCodec = pickMostCompleteCodecName(audio.codec, levelCodec);\n      if (audioCodec === \"mp4a\") {\n        audioCodec = \"mp4a.40.5\";\n      }\n      const ua = navigator.userAgent.toLowerCase();\n      if (this.audioCodecSwitch) {\n        if (audioCodec) {\n          if (audioCodec.indexOf(\"mp4a.40.5\") !== -1) {\n            audioCodec = \"mp4a.40.2\";\n          } else {\n            audioCodec = \"mp4a.40.5\";\n          }\n        }\n        const audioMetadata = audio.metadata;\n        if (audioMetadata && \"channelCount\" in audioMetadata && (audioMetadata.channelCount || 1) !== 1 && ua.indexOf(\"firefox\") === -1) {\n          audioCodec = \"mp4a.40.5\";\n        }\n      }\n      if (audioCodec && audioCodec.indexOf(\"mp4a.40.5\") !== -1 && ua.indexOf(\"android\") !== -1 && audio.container !== \"audio/mpeg\") {\n        audioCodec = \"mp4a.40.2\";\n        this.log(`Android: force audio codec to ${audioCodec}`);\n      }\n      if (levelCodec && levelCodec !== audioCodec) {\n        this.log(`Swapping manifest audio codec \"${levelCodec}\" for \"${audioCodec}\"`);\n      }\n      audio.levelCodec = audioCodec;\n      audio.id = PlaylistLevelType.MAIN;\n      this.log(`Init audio buffer, container:${audio.container}, codecs[selected/level/parsed]=[${audioCodec || \"\"}/${levelCodec || \"\"}/${audio.codec}]`);\n      delete tracks.audiovideo;\n    }\n    if (video) {\n      video.levelCodec = currentLevel.videoCodec;\n      video.id = PlaylistLevelType.MAIN;\n      const parsedVideoCodec = video.codec;\n      if ((parsedVideoCodec == null ? void 0 : parsedVideoCodec.length) === 4) {\n        switch (parsedVideoCodec) {\n          case \"hvc1\":\n          case \"hev1\":\n            video.codec = \"hvc1.1.6.L120.90\";\n            break;\n          case \"av01\":\n            video.codec = \"av01.0.04M.08\";\n            break;\n          case \"avc1\":\n            video.codec = \"avc1.42e01e\";\n            break;\n        }\n      }\n      this.log(`Init video buffer, container:${video.container}, codecs[level/parsed]=[${currentLevel.videoCodec || \"\"}/${parsedVideoCodec}]${video.codec !== parsedVideoCodec ? \" parsed-corrected=\" + video.codec : \"\"}${video.supplemental ? \" supplemental=\" + video.supplemental : \"\"}`);\n      delete tracks.audiovideo;\n    }\n    if (audiovideo) {\n      this.log(`Init audiovideo buffer, container:${audiovideo.container}, codecs[level/parsed]=[${currentLevel.codecs}/${audiovideo.codec}]`);\n      delete tracks.video;\n      delete tracks.audio;\n    }\n    const trackTypes = Object.keys(tracks);\n    if (trackTypes.length) {\n      this.hls.trigger(Events.BUFFER_CODECS, tracks);\n      if (!this.hls) {\n        return;\n      }\n      trackTypes.forEach((trackName) => {\n        const track = tracks[trackName];\n        const initSegment = track.initSegment;\n        if (initSegment != null && initSegment.byteLength) {\n          this.hls.trigger(Events.BUFFER_APPENDING, {\n            type: trackName,\n            data: initSegment,\n            frag,\n            part: null,\n            chunkMeta,\n            parent: frag.type\n          });\n        }\n      });\n    }\n    this.tickImmediate();\n  }\n  getMainFwdBufferInfo() {\n    const bufferOutput = this.mediaBuffer && this.altAudio === 2 ? this.mediaBuffer : this.media;\n    return this.getFwdBufferInfo(bufferOutput, PlaylistLevelType.MAIN);\n  }\n  get maxBufferLength() {\n    const {\n      levels,\n      level\n    } = this;\n    const levelInfo = levels == null ? void 0 : levels[level];\n    if (!levelInfo) {\n      return this.config.maxBufferLength;\n    }\n    return this.getMaxBufferLength(levelInfo.maxBitrate);\n  }\n  backtrack(frag) {\n    this.couldBacktrack = true;\n    this.backtrackFragment = frag;\n    this.resetTransmuxer();\n    this.flushBufferGap(frag);\n    this.fragmentTracker.removeFragment(frag);\n    this.fragPrevious = null;\n    this.nextLoadPosition = frag.start;\n    this.state = State.IDLE;\n  }\n  checkFragmentChanged() {\n    const video = this.media;\n    let fragPlayingCurrent = null;\n    if (video && video.readyState > 1 && video.seeking === false) {\n      const currentTime = video.currentTime;\n      if (BufferHelper.isBuffered(video, currentTime)) {\n        fragPlayingCurrent = this.getAppendedFrag(currentTime);\n      } else if (BufferHelper.isBuffered(video, currentTime + 0.1)) {\n        fragPlayingCurrent = this.getAppendedFrag(currentTime + 0.1);\n      }\n      if (fragPlayingCurrent) {\n        this.backtrackFragment = null;\n        const fragPlaying = this.fragPlaying;\n        const fragCurrentLevel = fragPlayingCurrent.level;\n        if (!fragPlaying || fragPlayingCurrent.sn !== fragPlaying.sn || fragPlaying.level !== fragCurrentLevel) {\n          this.fragPlaying = fragPlayingCurrent;\n          this.hls.trigger(Events.FRAG_CHANGED, {\n            frag: fragPlayingCurrent\n          });\n          if (!fragPlaying || fragPlaying.level !== fragCurrentLevel) {\n            this.hls.trigger(Events.LEVEL_SWITCHED, {\n              level: fragCurrentLevel\n            });\n          }\n        }\n      }\n    }\n  }\n  get nextLevel() {\n    const frag = this.nextBufferedFrag;\n    if (frag) {\n      return frag.level;\n    }\n    return -1;\n  }\n  get currentFrag() {\n    var _this$media3;\n    if (this.fragPlaying) {\n      return this.fragPlaying;\n    }\n    const currentTime = ((_this$media3 = this.media) == null ? void 0 : _this$media3.currentTime) || this.lastCurrentTime;\n    if (isFiniteNumber(currentTime)) {\n      return this.getAppendedFrag(currentTime);\n    }\n    return null;\n  }\n  get currentProgramDateTime() {\n    var _this$media4;\n    const currentTime = ((_this$media4 = this.media) == null ? void 0 : _this$media4.currentTime) || this.lastCurrentTime;\n    if (isFiniteNumber(currentTime)) {\n      const details = this.getLevelDetails();\n      const frag = this.currentFrag || (details ? findFragmentByPTS(null, details.fragments, currentTime) : null);\n      if (frag) {\n        const programDateTime = frag.programDateTime;\n        if (programDateTime !== null) {\n          const epocMs = programDateTime + (currentTime - frag.start) * 1e3;\n          return new Date(epocMs);\n        }\n      }\n    }\n    return null;\n  }\n  get currentLevel() {\n    const frag = this.currentFrag;\n    if (frag) {\n      return frag.level;\n    }\n    return -1;\n  }\n  get nextBufferedFrag() {\n    const frag = this.currentFrag;\n    if (frag) {\n      return this.followingBufferedFrag(frag);\n    }\n    return null;\n  }\n  get forceStartLoad() {\n    return this._forceStartLoad;\n  }\n}\nclass KeyLoader {\n  constructor(config) {\n    this.config = void 0;\n    this.keyUriToKeyInfo = {};\n    this.emeController = null;\n    this.config = config;\n  }\n  abort(type) {\n    for (const uri in this.keyUriToKeyInfo) {\n      const loader = this.keyUriToKeyInfo[uri].loader;\n      if (loader) {\n        var _loader$context;\n        if (type && type !== ((_loader$context = loader.context) == null ? void 0 : _loader$context.frag.type)) {\n          return;\n        }\n        loader.abort();\n      }\n    }\n  }\n  detach() {\n    for (const uri in this.keyUriToKeyInfo) {\n      const keyInfo = this.keyUriToKeyInfo[uri];\n      if (keyInfo.mediaKeySessionContext || keyInfo.decryptdata.isCommonEncryption) {\n        delete this.keyUriToKeyInfo[uri];\n      }\n    }\n  }\n  destroy() {\n    this.detach();\n    for (const uri in this.keyUriToKeyInfo) {\n      const loader = this.keyUriToKeyInfo[uri].loader;\n      if (loader) {\n        loader.destroy();\n      }\n    }\n    this.keyUriToKeyInfo = {};\n  }\n  createKeyLoadError(frag, details = ErrorDetails.KEY_LOAD_ERROR, error, networkDetails, response) {\n    return new LoadError({\n      type: ErrorTypes.NETWORK_ERROR,\n      details,\n      fatal: false,\n      frag,\n      response,\n      error,\n      networkDetails\n    });\n  }\n  loadClear(loadingFrag, encryptedFragments, startFragRequested) {\n    if (this.emeController && this.config.emeEnabled && !this.emeController.getSelectedKeySystemFormats().length) {\n      if (encryptedFragments.length) {\n        for (let i = 0, l = encryptedFragments.length; i < l; i++) {\n          const frag = encryptedFragments[i];\n          if (loadingFrag.cc <= frag.cc && (!isMediaFragment(loadingFrag) || !isMediaFragment(frag) || loadingFrag.sn < frag.sn) || !startFragRequested && i == l - 1) {\n            return this.emeController.selectKeySystemFormat(frag).then((keySystemFormat) => {\n              if (!this.emeController) {\n                return;\n              }\n              frag.setKeyFormat(keySystemFormat);\n              const keySystem = keySystemFormatToKeySystemDomain(keySystemFormat);\n              if (keySystem) {\n                return this.emeController.getKeySystemAccess([keySystem]);\n              }\n            });\n          }\n        }\n      }\n      if (this.config.requireKeySystemAccessOnStart) {\n        const keySystemsInConfig = getKeySystemsForConfig(this.config);\n        if (keySystemsInConfig.length) {\n          return this.emeController.getKeySystemAccess(keySystemsInConfig);\n        }\n      }\n    }\n    return null;\n  }\n  load(frag) {\n    if (!frag.decryptdata && frag.encrypted && this.emeController && this.config.emeEnabled) {\n      return this.emeController.selectKeySystemFormat(frag).then((keySystemFormat) => {\n        return this.loadInternal(frag, keySystemFormat);\n      });\n    }\n    return this.loadInternal(frag);\n  }\n  loadInternal(frag, keySystemFormat) {\n    var _keyInfo, _keyInfo2;\n    if (keySystemFormat) {\n      frag.setKeyFormat(keySystemFormat);\n    }\n    const decryptdata = frag.decryptdata;\n    if (!decryptdata) {\n      const error = new Error(keySystemFormat ? `Expected frag.decryptdata to be defined after setting format ${keySystemFormat}` : \"Missing decryption data on fragment in onKeyLoading\");\n      return Promise.reject(this.createKeyLoadError(frag, ErrorDetails.KEY_LOAD_ERROR, error));\n    }\n    const uri = decryptdata.uri;\n    if (!uri) {\n      return Promise.reject(this.createKeyLoadError(frag, ErrorDetails.KEY_LOAD_ERROR, new Error(`Invalid key URI: \"${uri}\"`)));\n    }\n    let keyInfo = this.keyUriToKeyInfo[uri];\n    if ((_keyInfo = keyInfo) != null && _keyInfo.decryptdata.key) {\n      decryptdata.key = keyInfo.decryptdata.key;\n      return Promise.resolve({\n        frag,\n        keyInfo\n      });\n    }\n    if ((_keyInfo2 = keyInfo) != null && _keyInfo2.keyLoadPromise) {\n      var _keyInfo$mediaKeySess;\n      switch ((_keyInfo$mediaKeySess = keyInfo.mediaKeySessionContext) == null ? void 0 : _keyInfo$mediaKeySess.keyStatus) {\n        case void 0:\n        case \"status-pending\":\n        case \"usable\":\n        case \"usable-in-future\":\n          return keyInfo.keyLoadPromise.then((keyLoadedData) => {\n            decryptdata.key = keyLoadedData.keyInfo.decryptdata.key;\n            return {\n              frag,\n              keyInfo\n            };\n          });\n      }\n    }\n    keyInfo = this.keyUriToKeyInfo[uri] = {\n      decryptdata,\n      keyLoadPromise: null,\n      loader: null,\n      mediaKeySessionContext: null\n    };\n    switch (decryptdata.method) {\n      case \"ISO-23001-7\":\n      case \"SAMPLE-AES\":\n      case \"SAMPLE-AES-CENC\":\n      case \"SAMPLE-AES-CTR\":\n        if (decryptdata.keyFormat === \"identity\") {\n          return this.loadKeyHTTP(keyInfo, frag);\n        }\n        return this.loadKeyEME(keyInfo, frag);\n      case \"AES-128\":\n      case \"AES-256\":\n      case \"AES-256-CTR\":\n        return this.loadKeyHTTP(keyInfo, frag);\n      default:\n        return Promise.reject(this.createKeyLoadError(frag, ErrorDetails.KEY_LOAD_ERROR, new Error(`Key supplied with unsupported METHOD: \"${decryptdata.method}\"`)));\n    }\n  }\n  loadKeyEME(keyInfo, frag) {\n    const keyLoadedData = {\n      frag,\n      keyInfo\n    };\n    if (this.emeController && this.config.emeEnabled) {\n      const keySessionContextPromise = this.emeController.loadKey(keyLoadedData);\n      if (keySessionContextPromise) {\n        return (keyInfo.keyLoadPromise = keySessionContextPromise.then((keySessionContext) => {\n          keyInfo.mediaKeySessionContext = keySessionContext;\n          return keyLoadedData;\n        })).catch((error) => {\n          keyInfo.keyLoadPromise = null;\n          throw error;\n        });\n      }\n    }\n    return Promise.resolve(keyLoadedData);\n  }\n  loadKeyHTTP(keyInfo, frag) {\n    const config = this.config;\n    const Loader = config.loader;\n    const keyLoader = new Loader(config);\n    frag.keyLoader = keyInfo.loader = keyLoader;\n    return keyInfo.keyLoadPromise = new Promise((resolve, reject) => {\n      const loaderContext = {\n        keyInfo,\n        frag,\n        responseType: \"arraybuffer\",\n        url: keyInfo.decryptdata.uri\n      };\n      const loadPolicy = config.keyLoadPolicy.default;\n      const loaderConfig = {\n        loadPolicy,\n        timeout: loadPolicy.maxLoadTimeMs,\n        maxRetry: 0,\n        retryDelay: 0,\n        maxRetryDelay: 0\n      };\n      const loaderCallbacks = {\n        onSuccess: (response, stats, context, networkDetails) => {\n          const {\n            frag: frag2,\n            keyInfo: keyInfo2,\n            url: uri\n          } = context;\n          if (!frag2.decryptdata || keyInfo2 !== this.keyUriToKeyInfo[uri]) {\n            return reject(this.createKeyLoadError(frag2, ErrorDetails.KEY_LOAD_ERROR, new Error(\"after key load, decryptdata unset or changed\"), networkDetails));\n          }\n          keyInfo2.decryptdata.key = frag2.decryptdata.key = new Uint8Array(response.data);\n          frag2.keyLoader = null;\n          keyInfo2.loader = null;\n          resolve({\n            frag: frag2,\n            keyInfo: keyInfo2\n          });\n        },\n        onError: (response, context, networkDetails, stats) => {\n          this.resetLoader(context);\n          reject(this.createKeyLoadError(frag, ErrorDetails.KEY_LOAD_ERROR, new Error(`HTTP Error ${response.code} loading key ${response.text}`), networkDetails, _objectSpread2({\n            url: loaderContext.url,\n            data: void 0\n          }, response)));\n        },\n        onTimeout: (stats, context, networkDetails) => {\n          this.resetLoader(context);\n          reject(this.createKeyLoadError(frag, ErrorDetails.KEY_LOAD_TIMEOUT, new Error(\"key loading timed out\"), networkDetails));\n        },\n        onAbort: (stats, context, networkDetails) => {\n          this.resetLoader(context);\n          reject(this.createKeyLoadError(frag, ErrorDetails.INTERNAL_ABORTED, new Error(\"key loading aborted\"), networkDetails));\n        }\n      };\n      keyLoader.load(loaderContext, loaderConfig, loaderCallbacks);\n    });\n  }\n  resetLoader(context) {\n    const {\n      frag,\n      keyInfo,\n      url: uri\n    } = context;\n    const loader = keyInfo.loader;\n    if (frag.keyLoader === loader) {\n      frag.keyLoader = null;\n      keyInfo.loader = null;\n    }\n    delete this.keyUriToKeyInfo[uri];\n    if (loader) {\n      loader.destroy();\n    }\n  }\n}\nfunction mapContextToLevelType(context) {\n  const {\n    type\n  } = context;\n  switch (type) {\n    case PlaylistContextType.AUDIO_TRACK:\n      return PlaylistLevelType.AUDIO;\n    case PlaylistContextType.SUBTITLE_TRACK:\n      return PlaylistLevelType.SUBTITLE;\n    default:\n      return PlaylistLevelType.MAIN;\n  }\n}\nfunction getResponseUrl(response, context) {\n  let url = response.url;\n  if (url === void 0 || url.indexOf(\"data:\") === 0) {\n    url = context.url;\n  }\n  return url;\n}\nclass PlaylistLoader {\n  constructor(hls) {\n    this.hls = void 0;\n    this.loaders = /* @__PURE__ */ Object.create(null);\n    this.variableList = null;\n    this.onManifestLoaded = this.checkAutostartLoad;\n    this.hls = hls;\n    this.registerListeners();\n  }\n  startLoad(startPosition) {\n  }\n  stopLoad() {\n    this.destroyInternalLoaders();\n  }\n  registerListeners() {\n    const {\n      hls\n    } = this;\n    hls.on(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.on(Events.LEVEL_LOADING, this.onLevelLoading, this);\n    hls.on(Events.AUDIO_TRACK_LOADING, this.onAudioTrackLoading, this);\n    hls.on(Events.SUBTITLE_TRACK_LOADING, this.onSubtitleTrackLoading, this);\n    hls.on(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n  }\n  unregisterListeners() {\n    const {\n      hls\n    } = this;\n    hls.off(Events.MANIFEST_LOADING, this.onManifestLoading, this);\n    hls.off(Events.LEVEL_LOADING, this.onLevelLoading, this);\n    hls.off(Events.AUDIO_TRACK_LOADING, this.onAudioTrackLoading, this);\n    hls.off(Events.SUBTITLE_TRACK_LOADING, this.onSubtitleTrackLoading, this);\n    hls.off(Events.LEVELS_UPDATED, this.onLevelsUpdated, this);\n  }\n  /**\n   * Returns defaults or configured loader-type overloads (pLoader and loader config params)\n   */\n  createInternalLoader(context) {\n    const config = this.hls.config;\n    const PLoader = config.pLoader;\n    const Loader = config.loader;\n    const InternalLoader = PLoader || Loader;\n    const loader = new InternalLoader(config);\n    this.loaders[context.type] = loader;\n    return loader;\n  }\n  getInternalLoader(context) {\n    return this.loaders[context.type];\n  }\n  resetInternalLoader(contextType) {\n    if (this.loaders[contextType]) {\n      delete this.loaders[contextType];\n    }\n  }\n  /**\n   * Call `destroy` on all internal loader instances mapped (one per context type)\n   */\n  destroyInternalLoaders() {\n    for (const contextType in this.loaders) {\n      const loader = this.loaders[contextType];\n      if (loader) {\n        loader.destroy();\n      }\n      this.resetInternalLoader(contextType);\n    }\n  }\n  destroy() {\n    this.variableList = null;\n    this.unregisterListeners();\n    this.destroyInternalLoaders();\n  }\n  onManifestLoading(event, data) {\n    const {\n      url\n    } = data;\n    this.variableList = null;\n    this.load({\n      id: null,\n      level: 0,\n      responseType: \"text\",\n      type: PlaylistContextType.MANIFEST,\n      url,\n      deliveryDirectives: null,\n      levelOrTrack: null\n    });\n  }\n  onLevelLoading(event, data) {\n    const {\n      id,\n      level,\n      pathwayId,\n      url,\n      deliveryDirectives,\n      levelInfo\n    } = data;\n    this.load({\n      id,\n      level,\n      pathwayId,\n      responseType: \"text\",\n      type: PlaylistContextType.LEVEL,\n      url,\n      deliveryDirectives,\n      levelOrTrack: levelInfo\n    });\n  }\n  onAudioTrackLoading(event, data) {\n    const {\n      id,\n      groupId,\n      url,\n      deliveryDirectives,\n      track\n    } = data;\n    this.load({\n      id,\n      groupId,\n      level: null,\n      responseType: \"text\",\n      type: PlaylistContextType.AUDIO_TRACK,\n      url,\n      deliveryDirectives,\n      levelOrTrack: track\n    });\n  }\n  onSubtitleTrackLoading(event, data) {\n    const {\n      id,\n      groupId,\n      url,\n      deliveryDirectives,\n      track\n    } = data;\n    this.load({\n      id,\n      groupId,\n      level: null,\n      responseType: \"text\",\n      type: PlaylistContextType.SUBTITLE_TRACK,\n      url,\n      deliveryDirectives,\n      levelOrTrack: track\n    });\n  }\n  onLevelsUpdated(event, data) {\n    const loader = this.loaders[PlaylistContextType.LEVEL];\n    if (loader) {\n      const context = loader.context;\n      if (context && !data.levels.some((lvl) => lvl === context.levelOrTrack)) {\n        loader.abort();\n        delete this.loaders[PlaylistContextType.LEVEL];\n      }\n    }\n  }\n  load(context) {\n    var _context$deliveryDire;\n    const config = this.hls.config;\n    let loader = this.getInternalLoader(context);\n    if (loader) {\n      const logger2 = this.hls.logger;\n      const loaderContext = loader.context;\n      if (loaderContext && loaderContext.levelOrTrack === context.levelOrTrack && (loaderContext.url === context.url || loaderContext.deliveryDirectives && !context.deliveryDirectives)) {\n        if (loaderContext.url === context.url) {\n          logger2.log(`[playlist-loader]: ignore ${context.url} ongoing request`);\n        } else {\n          logger2.log(`[playlist-loader]: ignore ${context.url} in favor of ${loaderContext.url}`);\n        }\n        return;\n      }\n      logger2.log(`[playlist-loader]: aborting previous loader for type: ${context.type}`);\n      loader.abort();\n    }\n    let loadPolicy;\n    if (context.type === PlaylistContextType.MANIFEST) {\n      loadPolicy = config.manifestLoadPolicy.default;\n    } else {\n      loadPolicy = _extends({}, config.playlistLoadPolicy.default, {\n        timeoutRetry: null,\n        errorRetry: null\n      });\n    }\n    loader = this.createInternalLoader(context);\n    if (isFiniteNumber((_context$deliveryDire = context.deliveryDirectives) == null ? void 0 : _context$deliveryDire.part)) {\n      let levelDetails;\n      if (context.type === PlaylistContextType.LEVEL && context.level !== null) {\n        levelDetails = this.hls.levels[context.level].details;\n      } else if (context.type === PlaylistContextType.AUDIO_TRACK && context.id !== null) {\n        levelDetails = this.hls.audioTracks[context.id].details;\n      } else if (context.type === PlaylistContextType.SUBTITLE_TRACK && context.id !== null) {\n        levelDetails = this.hls.subtitleTracks[context.id].details;\n      }\n      if (levelDetails) {\n        const partTarget = levelDetails.partTarget;\n        const targetDuration = levelDetails.targetduration;\n        if (partTarget && targetDuration) {\n          const maxLowLatencyPlaylistRefresh = Math.max(partTarget * 3, targetDuration * 0.8) * 1e3;\n          loadPolicy = _extends({}, loadPolicy, {\n            maxTimeToFirstByteMs: Math.min(maxLowLatencyPlaylistRefresh, loadPolicy.maxTimeToFirstByteMs),\n            maxLoadTimeMs: Math.min(maxLowLatencyPlaylistRefresh, loadPolicy.maxTimeToFirstByteMs)\n          });\n        }\n      }\n    }\n    const legacyRetryCompatibility = loadPolicy.errorRetry || loadPolicy.timeoutRetry || {};\n    const loaderConfig = {\n      loadPolicy,\n      timeout: loadPolicy.maxLoadTimeMs,\n      maxRetry: legacyRetryCompatibility.maxNumRetry || 0,\n      retryDelay: legacyRetryCompatibility.retryDelayMs || 0,\n      maxRetryDelay: legacyRetryCompatibility.maxRetryDelayMs || 0\n    };\n    const loaderCallbacks = {\n      onSuccess: (response, stats, context2, networkDetails) => {\n        const loader2 = this.getInternalLoader(context2);\n        this.resetInternalLoader(context2.type);\n        const string = response.data;\n        if (string.indexOf(\"#EXTM3U\") !== 0) {\n          this.handleManifestParsingError(response, context2, new Error(\"no EXTM3U delimiter\"), networkDetails || null, stats);\n          return;\n        }\n        stats.parsing.start = performance.now();\n        if (M3U8Parser.isMediaPlaylist(string) || context2.type !== PlaylistContextType.MANIFEST) {\n          this.handleTrackOrLevelPlaylist(response, stats, context2, networkDetails || null, loader2);\n        } else {\n          this.handleMasterPlaylist(response, stats, context2, networkDetails);\n        }\n      },\n      onError: (response, context2, networkDetails, stats) => {\n        this.handleNetworkError(context2, networkDetails, false, response, stats);\n      },\n      onTimeout: (stats, context2, networkDetails) => {\n        this.handleNetworkError(context2, networkDetails, true, void 0, stats);\n      }\n    };\n    loader.load(context, loaderConfig, loaderCallbacks);\n  }\n  checkAutostartLoad() {\n    if (!this.hls) {\n      return;\n    }\n    const {\n      config: {\n        autoStartLoad,\n        startPosition\n      },\n      forceStartLoad\n    } = this.hls;\n    if (autoStartLoad || forceStartLoad) {\n      this.hls.logger.log(`${autoStartLoad ? \"auto\" : \"force\"} startLoad with configured startPosition ${startPosition}`);\n      this.hls.startLoad(startPosition);\n    }\n  }\n  handleMasterPlaylist(response, stats, context, networkDetails) {\n    const hls = this.hls;\n    const string = response.data;\n    const url = getResponseUrl(response, context);\n    const parsedResult = M3U8Parser.parseMasterPlaylist(string, url);\n    if (parsedResult.playlistParsingError) {\n      this.handleManifestParsingError(response, context, parsedResult.playlistParsingError, networkDetails, stats);\n      return;\n    }\n    const {\n      contentSteering,\n      levels,\n      sessionData,\n      sessionKeys,\n      startTimeOffset,\n      variableList\n    } = parsedResult;\n    this.variableList = variableList;\n    const {\n      AUDIO: audioTracks = [],\n      SUBTITLES: subtitles,\n      \"CLOSED-CAPTIONS\": captions\n    } = M3U8Parser.parseMasterPlaylistMedia(string, url, parsedResult);\n    if (audioTracks.length) {\n      const embeddedAudioFound = audioTracks.some((audioTrack) => !audioTrack.url);\n      if (!embeddedAudioFound && levels[0].audioCodec && !levels[0].attrs.AUDIO) {\n        this.hls.logger.log(\"[playlist-loader]: audio codec signaled in quality level, but no embedded audio track signaled, create one\");\n        audioTracks.unshift({\n          type: \"main\",\n          name: \"main\",\n          groupId: \"main\",\n          default: false,\n          autoselect: false,\n          forced: false,\n          id: -1,\n          attrs: new AttrList({}),\n          bitrate: 0,\n          url: \"\"\n        });\n      }\n    }\n    hls.trigger(Events.MANIFEST_LOADED, {\n      levels,\n      audioTracks,\n      subtitles,\n      captions,\n      contentSteering,\n      url,\n      stats,\n      networkDetails,\n      sessionData,\n      sessionKeys,\n      startTimeOffset,\n      variableList\n    });\n  }\n  handleTrackOrLevelPlaylist(response, stats, context, networkDetails, loader) {\n    const hls = this.hls;\n    const {\n      id,\n      level,\n      type\n    } = context;\n    const url = getResponseUrl(response, context);\n    const levelId = isFiniteNumber(level) ? level : isFiniteNumber(id) ? id : 0;\n    const levelType = mapContextToLevelType(context);\n    const levelDetails = M3U8Parser.parseLevelPlaylist(response.data, url, levelId, levelType, 0, this.variableList);\n    if (type === PlaylistContextType.MANIFEST) {\n      const singleLevel = {\n        attrs: new AttrList({}),\n        bitrate: 0,\n        details: levelDetails,\n        name: \"\",\n        url\n      };\n      levelDetails.requestScheduled = stats.loading.start + computeReloadInterval(levelDetails, 0);\n      hls.trigger(Events.MANIFEST_LOADED, {\n        levels: [singleLevel],\n        audioTracks: [],\n        url,\n        stats,\n        networkDetails,\n        sessionData: null,\n        sessionKeys: null,\n        contentSteering: null,\n        startTimeOffset: null,\n        variableList: null\n      });\n    }\n    stats.parsing.end = performance.now();\n    context.levelDetails = levelDetails;\n    this.handlePlaylistLoaded(levelDetails, response, stats, context, networkDetails, loader);\n  }\n  handleManifestParsingError(response, context, error, networkDetails, stats) {\n    this.hls.trigger(Events.ERROR, {\n      type: ErrorTypes.NETWORK_ERROR,\n      details: ErrorDetails.MANIFEST_PARSING_ERROR,\n      fatal: context.type === PlaylistContextType.MANIFEST,\n      url: response.url,\n      err: error,\n      error,\n      reason: error.message,\n      response,\n      context,\n      networkDetails,\n      stats\n    });\n  }\n  handleNetworkError(context, networkDetails, timeout = false, response, stats) {\n    let message = `A network ${timeout ? \"timeout\" : \"error\" + (response ? \" (status \" + response.code + \")\" : \"\")} occurred while loading ${context.type}`;\n    if (context.type === PlaylistContextType.LEVEL) {\n      message += `: ${context.level} id: ${context.id}`;\n    } else if (context.type === PlaylistContextType.AUDIO_TRACK || context.type === PlaylistContextType.SUBTITLE_TRACK) {\n      message += ` id: ${context.id} group-id: \"${context.groupId}\"`;\n    }\n    const error = new Error(message);\n    this.hls.logger.warn(`[playlist-loader]: ${message}`);\n    let details = ErrorDetails.UNKNOWN;\n    let fatal = false;\n    const loader = this.getInternalLoader(context);\n    switch (context.type) {\n      case PlaylistContextType.MANIFEST:\n        details = timeout ? ErrorDetails.MANIFEST_LOAD_TIMEOUT : ErrorDetails.MANIFEST_LOAD_ERROR;\n        fatal = true;\n        break;\n      case PlaylistContextType.LEVEL:\n        details = timeout ? ErrorDetails.LEVEL_LOAD_TIMEOUT : ErrorDetails.LEVEL_LOAD_ERROR;\n        fatal = false;\n        break;\n      case PlaylistContextType.AUDIO_TRACK:\n        details = timeout ? ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT : ErrorDetails.AUDIO_TRACK_LOAD_ERROR;\n        fatal = false;\n        break;\n      case PlaylistContextType.SUBTITLE_TRACK:\n        details = timeout ? ErrorDetails.SUBTITLE_TRACK_LOAD_TIMEOUT : ErrorDetails.SUBTITLE_LOAD_ERROR;\n        fatal = false;\n        break;\n    }\n    if (loader) {\n      this.resetInternalLoader(context.type);\n    }\n    const errorData = {\n      type: ErrorTypes.NETWORK_ERROR,\n      details,\n      fatal,\n      url: context.url,\n      loader,\n      context,\n      error,\n      networkDetails,\n      stats\n    };\n    if (response) {\n      const url = (networkDetails == null ? void 0 : networkDetails.url) || context.url;\n      errorData.response = _objectSpread2({\n        url,\n        data: void 0\n      }, response);\n    }\n    this.hls.trigger(Events.ERROR, errorData);\n  }\n  handlePlaylistLoaded(levelDetails, response, stats, context, networkDetails, loader) {\n    const hls = this.hls;\n    const {\n      type,\n      level,\n      id,\n      groupId,\n      deliveryDirectives\n    } = context;\n    const url = getResponseUrl(response, context);\n    const parent = mapContextToLevelType(context);\n    const levelIndex = typeof context.level === \"number\" && parent === PlaylistLevelType.MAIN ? level : void 0;\n    if (!levelDetails.fragments.length) {\n      const _error = levelDetails.playlistParsingError = new Error(\"No Segments found in Playlist\");\n      hls.trigger(Events.ERROR, {\n        type: ErrorTypes.NETWORK_ERROR,\n        details: ErrorDetails.LEVEL_EMPTY_ERROR,\n        fatal: false,\n        url,\n        error: _error,\n        reason: _error.message,\n        response,\n        context,\n        level: levelIndex,\n        parent,\n        networkDetails,\n        stats\n      });\n      return;\n    }\n    if (!levelDetails.targetduration) {\n      levelDetails.playlistParsingError = new Error(\"Missing Target Duration\");\n    }\n    const error = levelDetails.playlistParsingError;\n    if (error) {\n      this.hls.logger.warn(error);\n      if (!hls.config.ignorePlaylistParsingErrors) {\n        hls.trigger(Events.ERROR, {\n          type: ErrorTypes.NETWORK_ERROR,\n          details: ErrorDetails.LEVEL_PARSING_ERROR,\n          fatal: false,\n          url,\n          error,\n          reason: error.message,\n          response,\n          context,\n          level: levelIndex,\n          parent,\n          networkDetails,\n          stats\n        });\n        return;\n      }\n      levelDetails.playlistParsingError = null;\n    }\n    if (levelDetails.live && loader) {\n      if (loader.getCacheAge) {\n        levelDetails.ageHeader = loader.getCacheAge() || 0;\n      }\n      if (!loader.getCacheAge || isNaN(levelDetails.ageHeader)) {\n        levelDetails.ageHeader = 0;\n      }\n    }\n    switch (type) {\n      case PlaylistContextType.MANIFEST:\n      case PlaylistContextType.LEVEL:\n        hls.trigger(Events.LEVEL_LOADED, {\n          details: levelDetails,\n          levelInfo: context.levelOrTrack || hls.levels[0],\n          level: levelIndex || 0,\n          id: id || 0,\n          stats,\n          networkDetails,\n          deliveryDirectives,\n          withoutMultiVariant: type === PlaylistContextType.MANIFEST\n        });\n        break;\n      case PlaylistContextType.AUDIO_TRACK:\n        hls.trigger(Events.AUDIO_TRACK_LOADED, {\n          details: levelDetails,\n          track: context.levelOrTrack,\n          id: id || 0,\n          groupId: groupId || \"\",\n          stats,\n          networkDetails,\n          deliveryDirectives\n        });\n        break;\n      case PlaylistContextType.SUBTITLE_TRACK:\n        hls.trigger(Events.SUBTITLE_TRACK_LOADED, {\n          details: levelDetails,\n          track: context.levelOrTrack,\n          id: id || 0,\n          groupId: groupId || \"\",\n          stats,\n          networkDetails,\n          deliveryDirectives\n        });\n        break;\n    }\n  }\n}\nclass Hls {\n  /**\n   * Get the video-dev/hls.js package version.\n   */\n  static get version() {\n    return version;\n  }\n  /**\n   * Check if the required MediaSource Extensions are available.\n   */\n  static isMSESupported() {\n    return isMSESupported();\n  }\n  /**\n   * Check if MediaSource Extensions are available and isTypeSupported checks pass for any baseline codecs.\n   */\n  static isSupported() {\n    return isSupported();\n  }\n  /**\n   * Get the MediaSource global used for MSE playback (ManagedMediaSource, MediaSource, or WebKitMediaSource).\n   */\n  static getMediaSource() {\n    return getMediaSource();\n  }\n  static get Events() {\n    return Events;\n  }\n  static get MetadataSchema() {\n    return MetadataSchema;\n  }\n  static get ErrorTypes() {\n    return ErrorTypes;\n  }\n  static get ErrorDetails() {\n    return ErrorDetails;\n  }\n  /**\n   * Get the default configuration applied to new instances.\n   */\n  static get DefaultConfig() {\n    if (!Hls.defaultConfig) {\n      return hlsDefaultConfig;\n    }\n    return Hls.defaultConfig;\n  }\n  /**\n   * Replace the default configuration applied to new instances.\n   */\n  static set DefaultConfig(defaultConfig) {\n    Hls.defaultConfig = defaultConfig;\n  }\n  /**\n   * Creates an instance of an HLS client that can attach to exactly one `HTMLMediaElement`.\n   * @param userConfig - Configuration options applied over `Hls.DefaultConfig`\n   */\n  constructor(userConfig = {}) {\n    this.config = void 0;\n    this.userConfig = void 0;\n    this.logger = void 0;\n    this.coreComponents = void 0;\n    this.networkControllers = void 0;\n    this._emitter = new EventEmitter$1();\n    this._autoLevelCapping = -1;\n    this._maxHdcpLevel = null;\n    this.abrController = void 0;\n    this.bufferController = void 0;\n    this.capLevelController = void 0;\n    this.latencyController = void 0;\n    this.levelController = void 0;\n    this.streamController = void 0;\n    this.audioStreamController = void 0;\n    this.subtititleStreamController = void 0;\n    this.audioTrackController = void 0;\n    this.subtitleTrackController = void 0;\n    this.interstitialsController = void 0;\n    this.gapController = void 0;\n    this.emeController = void 0;\n    this.cmcdController = void 0;\n    this._media = null;\n    this._url = null;\n    this._sessionId = void 0;\n    this.triggeringException = void 0;\n    this.started = false;\n    const logger2 = this.logger = enableLogs(userConfig.debug || false, \"Hls instance\", userConfig.assetPlayerId);\n    const config = this.config = mergeConfig(Hls.DefaultConfig, userConfig, logger2);\n    this.userConfig = userConfig;\n    if (config.progressive) {\n      enableStreamingMode(config, logger2);\n    }\n    const {\n      abrController: _AbrController,\n      bufferController: _BufferController,\n      capLevelController: _CapLevelController,\n      errorController: _ErrorController,\n      fpsController: _FpsController\n    } = config;\n    const errorController = new _ErrorController(this);\n    const abrController = this.abrController = new _AbrController(this);\n    const fragmentTracker = new FragmentTracker(this);\n    const _InterstitialsController = config.interstitialsController;\n    const interstitialsController = _InterstitialsController ? this.interstitialsController = new _InterstitialsController(this, Hls) : null;\n    const bufferController = this.bufferController = new _BufferController(this, fragmentTracker);\n    const capLevelController = this.capLevelController = new _CapLevelController(this);\n    const fpsController = new _FpsController(this);\n    const playListLoader = new PlaylistLoader(this);\n    const _ContentSteeringController = config.contentSteeringController;\n    const contentSteering = _ContentSteeringController ? new _ContentSteeringController(this) : null;\n    const levelController = this.levelController = new LevelController(this, contentSteering);\n    const id3TrackController = new ID3TrackController(this);\n    const keyLoader = new KeyLoader(this.config);\n    const streamController = this.streamController = new StreamController(this, fragmentTracker, keyLoader);\n    const gapController = this.gapController = new GapController(this, fragmentTracker);\n    capLevelController.setStreamController(streamController);\n    fpsController.setStreamController(streamController);\n    const networkControllers = [playListLoader, levelController, streamController];\n    if (interstitialsController) {\n      networkControllers.splice(1, 0, interstitialsController);\n    }\n    if (contentSteering) {\n      networkControllers.splice(1, 0, contentSteering);\n    }\n    this.networkControllers = networkControllers;\n    const coreComponents = [abrController, bufferController, gapController, capLevelController, fpsController, id3TrackController, fragmentTracker];\n    this.audioTrackController = this.createController(config.audioTrackController, networkControllers);\n    const AudioStreamControllerClass = config.audioStreamController;\n    if (AudioStreamControllerClass) {\n      networkControllers.push(this.audioStreamController = new AudioStreamControllerClass(this, fragmentTracker, keyLoader));\n    }\n    this.subtitleTrackController = this.createController(config.subtitleTrackController, networkControllers);\n    const SubtitleStreamControllerClass = config.subtitleStreamController;\n    if (SubtitleStreamControllerClass) {\n      networkControllers.push(this.subtititleStreamController = new SubtitleStreamControllerClass(this, fragmentTracker, keyLoader));\n    }\n    this.createController(config.timelineController, coreComponents);\n    keyLoader.emeController = this.emeController = this.createController(config.emeController, coreComponents);\n    this.cmcdController = this.createController(config.cmcdController, coreComponents);\n    this.latencyController = this.createController(LatencyController, coreComponents);\n    this.coreComponents = coreComponents;\n    networkControllers.push(errorController);\n    const onErrorOut = errorController.onErrorOut;\n    if (typeof onErrorOut === \"function\") {\n      this.on(Events.ERROR, onErrorOut, errorController);\n    }\n    this.on(Events.MANIFEST_LOADED, playListLoader.onManifestLoaded, playListLoader);\n  }\n  createController(ControllerClass, components) {\n    if (ControllerClass) {\n      const controllerInstance = new ControllerClass(this);\n      if (components) {\n        components.push(controllerInstance);\n      }\n      return controllerInstance;\n    }\n    return null;\n  }\n  // Delegate the EventEmitter through the public API of Hls.js\n  on(event, listener, context = this) {\n    this._emitter.on(event, listener, context);\n  }\n  once(event, listener, context = this) {\n    this._emitter.once(event, listener, context);\n  }\n  removeAllListeners(event) {\n    this._emitter.removeAllListeners(event);\n  }\n  off(event, listener, context = this, once2) {\n    this._emitter.off(event, listener, context, once2);\n  }\n  listeners(event) {\n    return this._emitter.listeners(event);\n  }\n  emit(event, name, eventObject) {\n    return this._emitter.emit(event, name, eventObject);\n  }\n  trigger(event, eventObject) {\n    if (this.config.debug) {\n      return this.emit(event, event, eventObject);\n    } else {\n      try {\n        return this.emit(event, event, eventObject);\n      } catch (error) {\n        this.logger.error(\"An internal error happened while handling event \" + event + '. Error message: \"' + error.message + '\". Here is a stacktrace:', error);\n        if (!this.triggeringException) {\n          this.triggeringException = true;\n          const fatal = event === Events.ERROR;\n          this.trigger(Events.ERROR, {\n            type: ErrorTypes.OTHER_ERROR,\n            details: ErrorDetails.INTERNAL_EXCEPTION,\n            fatal,\n            event,\n            error\n          });\n          this.triggeringException = false;\n        }\n      }\n    }\n    return false;\n  }\n  listenerCount(event) {\n    return this._emitter.listenerCount(event);\n  }\n  /**\n   * Dispose of the instance\n   */\n  destroy() {\n    this.logger.log(\"destroy\");\n    this.trigger(Events.DESTROYING, void 0);\n    this.detachMedia();\n    this.removeAllListeners();\n    this._autoLevelCapping = -1;\n    this._url = null;\n    this.networkControllers.forEach((component) => component.destroy());\n    this.networkControllers.length = 0;\n    this.coreComponents.forEach((component) => component.destroy());\n    this.coreComponents.length = 0;\n    const config = this.config;\n    config.xhrSetup = config.fetchSetup = void 0;\n    this.userConfig = null;\n  }\n  /**\n   * Attaches Hls.js to a media element\n   */\n  attachMedia(data) {\n    if (!data || \"media\" in data && !data.media) {\n      const error = new Error(`attachMedia failed: invalid argument (${data})`);\n      this.trigger(Events.ERROR, {\n        type: ErrorTypes.OTHER_ERROR,\n        details: ErrorDetails.ATTACH_MEDIA_ERROR,\n        fatal: true,\n        error\n      });\n      return;\n    }\n    this.logger.log(`attachMedia`);\n    if (this._media) {\n      this.logger.warn(`media must be detached before attaching`);\n      this.detachMedia();\n    }\n    const attachMediaSource = \"media\" in data;\n    const media = attachMediaSource ? data.media : data;\n    const attachingData = attachMediaSource ? data : {\n      media\n    };\n    this._media = media;\n    this.trigger(Events.MEDIA_ATTACHING, attachingData);\n  }\n  /**\n   * Detach Hls.js from the media\n   */\n  detachMedia() {\n    this.logger.log(\"detachMedia\");\n    this.trigger(Events.MEDIA_DETACHING, {});\n    this._media = null;\n  }\n  /**\n   * Detach HTMLMediaElement, MediaSource, and SourceBuffers without reset, for attaching to another instance\n   */\n  transferMedia() {\n    this._media = null;\n    const transferMedia = this.bufferController.transferMedia();\n    this.trigger(Events.MEDIA_DETACHING, {\n      transferMedia\n    });\n    return transferMedia;\n  }\n  /**\n   * Set the source URL. Can be relative or absolute.\n   */\n  loadSource(url) {\n    this.stopLoad();\n    const media = this.media;\n    const loadedSource = this._url;\n    const loadingSource = this._url = urlToolkitExports.buildAbsoluteURL(self.location.href, url, {\n      alwaysNormalize: true\n    });\n    this._autoLevelCapping = -1;\n    this._maxHdcpLevel = null;\n    this.logger.log(`loadSource:${loadingSource}`);\n    if (media && loadedSource && (loadedSource !== loadingSource || this.bufferController.hasSourceTypes())) {\n      this.detachMedia();\n      this.attachMedia(media);\n    }\n    this.trigger(Events.MANIFEST_LOADING, {\n      url\n    });\n  }\n  /**\n   * Gets the currently loaded URL\n   */\n  get url() {\n    return this._url;\n  }\n  /**\n   * Whether or not enough has been buffered to seek to start position or use `media.currentTime` to determine next load position\n   */\n  get hasEnoughToStart() {\n    return this.streamController.hasEnoughToStart;\n  }\n  /**\n   * Get the startPosition set on startLoad(position) or on autostart with config.startPosition\n   */\n  get startPosition() {\n    return this.streamController.startPositionValue;\n  }\n  /**\n   * Start loading data from the stream source.\n   * Depending on default config, client starts loading automatically when a source is set.\n   *\n   * @param startPosition - Set the start position to stream from.\n   * Defaults to -1 (None: starts from earliest point)\n   */\n  startLoad(startPosition = -1, skipSeekToStartPosition) {\n    this.logger.log(`startLoad(${startPosition + (skipSeekToStartPosition ? \", <skip seek to start>\" : \"\")})`);\n    this.started = true;\n    this.resumeBuffering();\n    for (let i = 0; i < this.networkControllers.length; i++) {\n      this.networkControllers[i].startLoad(startPosition, skipSeekToStartPosition);\n      if (!this.started || !this.networkControllers) {\n        break;\n      }\n    }\n  }\n  /**\n   * Stop loading of any stream data.\n   */\n  stopLoad() {\n    this.logger.log(\"stopLoad\");\n    this.started = false;\n    for (let i = 0; i < this.networkControllers.length; i++) {\n      this.networkControllers[i].stopLoad();\n      if (this.started || !this.networkControllers) {\n        break;\n      }\n    }\n  }\n  /**\n   * Returns whether loading, toggled with `startLoad()` and `stopLoad()`, is active or not`.\n   */\n  get loadingEnabled() {\n    return this.started;\n  }\n  /**\n   * Returns state of fragment loading toggled by calling `pauseBuffering()` and `resumeBuffering()`.\n   */\n  get bufferingEnabled() {\n    return this.streamController.bufferingEnabled;\n  }\n  /**\n   * Resumes stream controller segment loading after `pauseBuffering` has been called.\n   */\n  resumeBuffering() {\n    if (!this.bufferingEnabled) {\n      this.logger.log(`resume buffering`);\n      this.networkControllers.forEach((controller) => {\n        if (controller.resumeBuffering) {\n          controller.resumeBuffering();\n        }\n      });\n    }\n  }\n  /**\n   * Prevents stream controller from loading new segments until `resumeBuffering` is called.\n   * This allows for media buffering to be paused without interupting playlist loading.\n   */\n  pauseBuffering() {\n    if (this.bufferingEnabled) {\n      this.logger.log(`pause buffering`);\n      this.networkControllers.forEach((controller) => {\n        if (controller.pauseBuffering) {\n          controller.pauseBuffering();\n        }\n      });\n    }\n  }\n  get inFlightFragments() {\n    const inFlightData = {\n      [PlaylistLevelType.MAIN]: this.streamController.inFlightFrag\n    };\n    if (this.audioStreamController) {\n      inFlightData[PlaylistLevelType.AUDIO] = this.audioStreamController.inFlightFrag;\n    }\n    if (this.subtititleStreamController) {\n      inFlightData[PlaylistLevelType.SUBTITLE] = this.subtititleStreamController.inFlightFrag;\n    }\n    return inFlightData;\n  }\n  /**\n   * Swap through possible audio codecs in the stream (for example to switch from stereo to 5.1)\n   */\n  swapAudioCodec() {\n    this.logger.log(\"swapAudioCodec\");\n    this.streamController.swapAudioCodec();\n  }\n  /**\n   * When the media-element fails, this allows to detach and then re-attach it\n   * as one call (convenience method).\n   *\n   * Automatic recovery of media-errors by this process is configurable.\n   */\n  recoverMediaError() {\n    this.logger.log(\"recoverMediaError\");\n    const media = this._media;\n    const time = media == null ? void 0 : media.currentTime;\n    this.detachMedia();\n    if (media) {\n      this.attachMedia(media);\n      if (time) {\n        this.startLoad(time);\n      }\n    }\n  }\n  removeLevel(levelIndex) {\n    this.levelController.removeLevel(levelIndex);\n  }\n  /**\n   * @returns a UUID for this player instance\n   */\n  get sessionId() {\n    let _sessionId = this._sessionId;\n    if (!_sessionId) {\n      _sessionId = this._sessionId = uuid();\n    }\n    return _sessionId;\n  }\n  /**\n   * @returns an array of levels (variants) sorted by HDCP-LEVEL, RESOLUTION (height), FRAME-RATE, CODECS, VIDEO-RANGE, and BANDWIDTH\n   */\n  get levels() {\n    const levels = this.levelController.levels;\n    return levels ? levels : [];\n  }\n  /**\n   * @returns LevelDetails of last loaded level (variant) or `null` prior to loading a media playlist.\n   */\n  get latestLevelDetails() {\n    return this.streamController.getLevelDetails() || null;\n  }\n  /**\n   * @returns Level object of selected level (variant) or `null` prior to selecting a level or once the level is removed.\n   */\n  get loadLevelObj() {\n    return this.levelController.loadLevelObj;\n  }\n  /**\n   * Index of quality level (variant) currently played\n   */\n  get currentLevel() {\n    return this.streamController.currentLevel;\n  }\n  /**\n   * Set quality level index immediately. This will flush the current buffer to replace the quality asap. That means playback will interrupt at least shortly to re-buffer and re-sync eventually. Set to -1 for automatic level selection.\n   */\n  set currentLevel(newLevel) {\n    this.logger.log(`set currentLevel:${newLevel}`);\n    this.levelController.manualLevel = newLevel;\n    this.streamController.immediateLevelSwitch();\n  }\n  /**\n   * Index of next quality level loaded as scheduled by stream controller.\n   */\n  get nextLevel() {\n    return this.streamController.nextLevel;\n  }\n  /**\n   * Set quality level index for next loaded data.\n   * This will switch the video quality asap, without interrupting playback.\n   * May abort current loading of data, and flush parts of buffer (outside currently played fragment region).\n   * @param newLevel - Pass -1 for automatic level selection\n   */\n  set nextLevel(newLevel) {\n    this.logger.log(`set nextLevel:${newLevel}`);\n    this.levelController.manualLevel = newLevel;\n    this.streamController.nextLevelSwitch();\n  }\n  /**\n   * Return the quality level of the currently or last (of none is loaded currently) segment\n   */\n  get loadLevel() {\n    return this.levelController.level;\n  }\n  /**\n   * Set quality level index for next loaded data in a conservative way.\n   * This will switch the quality without flushing, but interrupt current loading.\n   * Thus the moment when the quality switch will appear in effect will only be after the already existing buffer.\n   * @param newLevel - Pass -1 for automatic level selection\n   */\n  set loadLevel(newLevel) {\n    this.logger.log(`set loadLevel:${newLevel}`);\n    this.levelController.manualLevel = newLevel;\n  }\n  /**\n   * get next quality level loaded\n   */\n  get nextLoadLevel() {\n    return this.levelController.nextLoadLevel;\n  }\n  /**\n   * Set quality level of next loaded segment in a fully \"non-destructive\" way.\n   * Same as `loadLevel` but will wait for next switch (until current loading is done).\n   */\n  set nextLoadLevel(level) {\n    this.levelController.nextLoadLevel = level;\n  }\n  /**\n   * Return \"first level\": like a default level, if not set,\n   * falls back to index of first level referenced in manifest\n   */\n  get firstLevel() {\n    return Math.max(this.levelController.firstLevel, this.minAutoLevel);\n  }\n  /**\n   * Sets \"first-level\", see getter.\n   */\n  set firstLevel(newLevel) {\n    this.logger.log(`set firstLevel:${newLevel}`);\n    this.levelController.firstLevel = newLevel;\n  }\n  /**\n   * Return the desired start level for the first fragment that will be loaded.\n   * The default value of -1 indicates automatic start level selection.\n   * Setting hls.nextAutoLevel without setting a startLevel will result in\n   * the nextAutoLevel value being used for one fragment load.\n   */\n  get startLevel() {\n    const startLevel = this.levelController.startLevel;\n    if (startLevel === -1 && this.abrController.forcedAutoLevel > -1) {\n      return this.abrController.forcedAutoLevel;\n    }\n    return startLevel;\n  }\n  /**\n   * set  start level (level of first fragment that will be played back)\n   * if not overrided by user, first level appearing in manifest will be used as start level\n   * if -1 : automatic start level selection, playback will start from level matching download bandwidth\n   * (determined from download of first segment)\n   */\n  set startLevel(newLevel) {\n    this.logger.log(`set startLevel:${newLevel}`);\n    if (newLevel !== -1) {\n      newLevel = Math.max(newLevel, this.minAutoLevel);\n    }\n    this.levelController.startLevel = newLevel;\n  }\n  /**\n   * Whether level capping is enabled.\n   * Default value is set via `config.capLevelToPlayerSize`.\n   */\n  get capLevelToPlayerSize() {\n    return this.config.capLevelToPlayerSize;\n  }\n  /**\n   * Enables or disables level capping. If disabled after previously enabled, `nextLevelSwitch` will be immediately called.\n   */\n  set capLevelToPlayerSize(shouldStartCapping) {\n    const newCapLevelToPlayerSize = !!shouldStartCapping;\n    if (newCapLevelToPlayerSize !== this.config.capLevelToPlayerSize) {\n      if (newCapLevelToPlayerSize) {\n        this.capLevelController.startCapping();\n      } else {\n        this.capLevelController.stopCapping();\n        this.autoLevelCapping = -1;\n        this.streamController.nextLevelSwitch();\n      }\n      this.config.capLevelToPlayerSize = newCapLevelToPlayerSize;\n    }\n  }\n  /**\n   * Capping/max level value that should be used by automatic level selection algorithm (`ABRController`)\n   */\n  get autoLevelCapping() {\n    return this._autoLevelCapping;\n  }\n  /**\n   * Returns the current bandwidth estimate in bits per second, when available. Otherwise, `NaN` is returned.\n   */\n  get bandwidthEstimate() {\n    const {\n      bwEstimator\n    } = this.abrController;\n    if (!bwEstimator) {\n      return NaN;\n    }\n    return bwEstimator.getEstimate();\n  }\n  set bandwidthEstimate(abrEwmaDefaultEstimate) {\n    this.abrController.resetEstimator(abrEwmaDefaultEstimate);\n  }\n  get abrEwmaDefaultEstimate() {\n    const {\n      bwEstimator\n    } = this.abrController;\n    if (!bwEstimator) {\n      return NaN;\n    }\n    return bwEstimator.defaultEstimate;\n  }\n  /**\n   * get time to first byte estimate\n   * @type {number}\n   */\n  get ttfbEstimate() {\n    const {\n      bwEstimator\n    } = this.abrController;\n    if (!bwEstimator) {\n      return NaN;\n    }\n    return bwEstimator.getEstimateTTFB();\n  }\n  /**\n   * Capping/max level value that should be used by automatic level selection algorithm (`ABRController`)\n   */\n  set autoLevelCapping(newLevel) {\n    if (this._autoLevelCapping !== newLevel) {\n      this.logger.log(`set autoLevelCapping:${newLevel}`);\n      this._autoLevelCapping = newLevel;\n      this.levelController.checkMaxAutoUpdated();\n    }\n  }\n  get maxHdcpLevel() {\n    return this._maxHdcpLevel;\n  }\n  set maxHdcpLevel(value) {\n    if (isHdcpLevel(value) && this._maxHdcpLevel !== value) {\n      this._maxHdcpLevel = value;\n      this.levelController.checkMaxAutoUpdated();\n    }\n  }\n  /**\n   * True when automatic level selection enabled\n   */\n  get autoLevelEnabled() {\n    return this.levelController.manualLevel === -1;\n  }\n  /**\n   * Level set manually (if any)\n   */\n  get manualLevel() {\n    return this.levelController.manualLevel;\n  }\n  /**\n   * min level selectable in auto mode according to config.minAutoBitrate\n   */\n  get minAutoLevel() {\n    const {\n      levels,\n      config: {\n        minAutoBitrate\n      }\n    } = this;\n    if (!levels) return 0;\n    const len = levels.length;\n    for (let i = 0; i < len; i++) {\n      if (levels[i].maxBitrate >= minAutoBitrate) {\n        return i;\n      }\n    }\n    return 0;\n  }\n  /**\n   * max level selectable in auto mode according to autoLevelCapping\n   */\n  get maxAutoLevel() {\n    const {\n      levels,\n      autoLevelCapping,\n      maxHdcpLevel\n    } = this;\n    let maxAutoLevel;\n    if (autoLevelCapping === -1 && levels != null && levels.length) {\n      maxAutoLevel = levels.length - 1;\n    } else {\n      maxAutoLevel = autoLevelCapping;\n    }\n    if (maxHdcpLevel) {\n      for (let i = maxAutoLevel; i--; ) {\n        const hdcpLevel = levels[i].attrs[\"HDCP-LEVEL\"];\n        if (hdcpLevel && hdcpLevel <= maxHdcpLevel) {\n          return i;\n        }\n      }\n    }\n    return maxAutoLevel;\n  }\n  get firstAutoLevel() {\n    return this.abrController.firstAutoLevel;\n  }\n  /**\n   * next automatically selected quality level\n   */\n  get nextAutoLevel() {\n    return this.abrController.nextAutoLevel;\n  }\n  /**\n   * this setter is used to force next auto level.\n   * this is useful to force a switch down in auto mode:\n   * in case of load error on level N, hls.js can set nextAutoLevel to N-1 for example)\n   * forced value is valid for one fragment. upon successful frag loading at forced level,\n   * this value will be resetted to -1 by ABR controller.\n   */\n  set nextAutoLevel(nextLevel) {\n    this.abrController.nextAutoLevel = nextLevel;\n  }\n  /**\n   * get the datetime value relative to media.currentTime for the active level Program Date Time if present\n   */\n  get playingDate() {\n    return this.streamController.currentProgramDateTime;\n  }\n  get mainForwardBufferInfo() {\n    return this.streamController.getMainFwdBufferInfo();\n  }\n  get maxBufferLength() {\n    return this.streamController.maxBufferLength;\n  }\n  /**\n   * Find and select the best matching audio track, making a level switch when a Group change is necessary.\n   * Updates `hls.config.audioPreference`. Returns the selected track, or null when no matching track is found.\n   */\n  setAudioOption(audioOption) {\n    var _this$audioTrackContr;\n    return ((_this$audioTrackContr = this.audioTrackController) == null ? void 0 : _this$audioTrackContr.setAudioOption(audioOption)) || null;\n  }\n  /**\n   * Find and select the best matching subtitle track, making a level switch when a Group change is necessary.\n   * Updates `hls.config.subtitlePreference`. Returns the selected track, or null when no matching track is found.\n   */\n  setSubtitleOption(subtitleOption) {\n    var _this$subtitleTrackCo;\n    return ((_this$subtitleTrackCo = this.subtitleTrackController) == null ? void 0 : _this$subtitleTrackCo.setSubtitleOption(subtitleOption)) || null;\n  }\n  /**\n   * Get the complete list of audio tracks across all media groups\n   */\n  get allAudioTracks() {\n    const audioTrackController = this.audioTrackController;\n    return audioTrackController ? audioTrackController.allAudioTracks : [];\n  }\n  /**\n   * Get the list of selectable audio tracks\n   */\n  get audioTracks() {\n    const audioTrackController = this.audioTrackController;\n    return audioTrackController ? audioTrackController.audioTracks : [];\n  }\n  /**\n   * index of the selected audio track (index in audio track lists)\n   */\n  get audioTrack() {\n    const audioTrackController = this.audioTrackController;\n    return audioTrackController ? audioTrackController.audioTrack : -1;\n  }\n  /**\n   * selects an audio track, based on its index in audio track lists\n   */\n  set audioTrack(audioTrackId) {\n    const audioTrackController = this.audioTrackController;\n    if (audioTrackController) {\n      audioTrackController.audioTrack = audioTrackId;\n    }\n  }\n  /**\n   * get the complete list of subtitle tracks across all media groups\n   */\n  get allSubtitleTracks() {\n    const subtitleTrackController = this.subtitleTrackController;\n    return subtitleTrackController ? subtitleTrackController.allSubtitleTracks : [];\n  }\n  /**\n   * get alternate subtitle tracks list from playlist\n   */\n  get subtitleTracks() {\n    const subtitleTrackController = this.subtitleTrackController;\n    return subtitleTrackController ? subtitleTrackController.subtitleTracks : [];\n  }\n  /**\n   * index of the selected subtitle track (index in subtitle track lists)\n   */\n  get subtitleTrack() {\n    const subtitleTrackController = this.subtitleTrackController;\n    return subtitleTrackController ? subtitleTrackController.subtitleTrack : -1;\n  }\n  get media() {\n    return this._media;\n  }\n  /**\n   * select an subtitle track, based on its index in subtitle track lists\n   */\n  set subtitleTrack(subtitleTrackId) {\n    const subtitleTrackController = this.subtitleTrackController;\n    if (subtitleTrackController) {\n      subtitleTrackController.subtitleTrack = subtitleTrackId;\n    }\n  }\n  /**\n   * Whether subtitle display is enabled or not\n   */\n  get subtitleDisplay() {\n    const subtitleTrackController = this.subtitleTrackController;\n    return subtitleTrackController ? subtitleTrackController.subtitleDisplay : false;\n  }\n  /**\n   * Enable/disable subtitle display rendering\n   */\n  set subtitleDisplay(value) {\n    const subtitleTrackController = this.subtitleTrackController;\n    if (subtitleTrackController) {\n      subtitleTrackController.subtitleDisplay = value;\n    }\n  }\n  /**\n   * get mode for Low-Latency HLS loading\n   */\n  get lowLatencyMode() {\n    return this.config.lowLatencyMode;\n  }\n  /**\n   * Enable/disable Low-Latency HLS part playlist and segment loading, and start live streams at playlist PART-HOLD-BACK rather than HOLD-BACK.\n   */\n  set lowLatencyMode(mode) {\n    this.config.lowLatencyMode = mode;\n  }\n  /**\n   * Position (in seconds) of live sync point (ie edge of live position minus safety delay defined by ```hls.config.liveSyncDuration```)\n   * @returns null prior to loading live Playlist\n   */\n  get liveSyncPosition() {\n    return this.latencyController.liveSyncPosition;\n  }\n  /**\n   * Estimated position (in seconds) of live edge (ie edge of live playlist plus time sync playlist advanced)\n   * @returns 0 before first playlist is loaded\n   */\n  get latency() {\n    return this.latencyController.latency;\n  }\n  /**\n   * maximum distance from the edge before the player seeks forward to ```hls.liveSyncPosition```\n   * configured using ```liveMaxLatencyDurationCount``` (multiple of target duration) or ```liveMaxLatencyDuration```\n   * @returns 0 before first playlist is loaded\n   */\n  get maxLatency() {\n    return this.latencyController.maxLatency;\n  }\n  /**\n   * target distance from the edge as calculated by the latency controller\n   */\n  get targetLatency() {\n    return this.latencyController.targetLatency;\n  }\n  set targetLatency(latency) {\n    this.latencyController.targetLatency = latency;\n  }\n  /**\n   * the rate at which the edge of the current live playlist is advancing or 1 if there is none\n   */\n  get drift() {\n    return this.latencyController.drift;\n  }\n  /**\n   * set to true when startLoad is called before MANIFEST_PARSED event\n   */\n  get forceStartLoad() {\n    return this.streamController.forceStartLoad;\n  }\n  /**\n   * ContentSteering pathways getter\n   */\n  get pathways() {\n    return this.levelController.pathways;\n  }\n  /**\n   * ContentSteering pathwayPriority getter/setter\n   */\n  get pathwayPriority() {\n    return this.levelController.pathwayPriority;\n  }\n  set pathwayPriority(pathwayPriority) {\n    this.levelController.pathwayPriority = pathwayPriority;\n  }\n  /**\n   * returns true when all SourceBuffers are buffered to the end\n   */\n  get bufferedToEnd() {\n    var _this$bufferControlle;\n    return !!((_this$bufferControlle = this.bufferController) != null && _this$bufferControlle.bufferedToEnd);\n  }\n  /**\n   * returns Interstitials Program Manager\n   */\n  get interstitialsManager() {\n    var _this$interstitialsCo;\n    return ((_this$interstitialsCo = this.interstitialsController) == null ? void 0 : _this$interstitialsCo.interstitialsManager) || null;\n  }\n  /**\n   * returns mediaCapabilities.decodingInfo for a variant/rendition\n   */\n  getMediaDecodingInfo(level, audioTracks = this.allAudioTracks) {\n    const audioTracksByGroup = getAudioTracksByGroup(audioTracks);\n    return getMediaDecodingInfoPromise(level, audioTracksByGroup, navigator.mediaCapabilities);\n  }\n}\nHls.defaultConfig = void 0;\nfunction getSegmentRuntimeId(segmentRequestUrl, byteRange) {\n  if (!byteRange)\n    return segmentRequestUrl;\n  return `${segmentRequestUrl}|${byteRange.start}-${byteRange.end}`;\n}\nfunction getByteRange(rangeStart, rangeEnd) {\n  if (rangeStart !== void 0 && rangeEnd !== void 0 && rangeStart <= rangeEnd) {\n    return { start: rangeStart, end: rangeEnd };\n  }\n}\nconst global$1 = globalThis || void 0 || self;\nvar __defProp2 = Object.defineProperty;\nvar __defNormalProp2 = (obj, key, value) => key in obj ? __defProp2(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __publicField2 = (obj, key, value) => __defNormalProp2(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\nclass RequestError extends Error {\n  /**\n   * Constructs a new RequestError.\n   * @param type - The specific error type.\n   * @param message - Optional message describing the error.\n   */\n  constructor(type, message) {\n    super(message);\n    __publicField2(this, \"timestamp\");\n    this.type = type;\n    this.timestamp = performance.now();\n  }\n}\nclass CoreRequestError extends Error {\n  /**\n   * Constructs a new CoreRequestError.\n   * @param type - The type of the error, either 'failed' or 'aborted'.\n   */\n  constructor(type) {\n    super();\n    this.type = type;\n  }\n}\nclass HttpRequestExecutor {\n  constructor(request, httpConfig, eventTarget) {\n    __publicField2(this, \"requestControls\");\n    __publicField2(this, \"abortController\", new AbortController());\n    __publicField2(this, \"expectedBytesLength\");\n    __publicField2(this, \"requestByteRange\");\n    __publicField2(this, \"onChunkDownloaded\");\n    this.request = request;\n    this.httpConfig = httpConfig;\n    this.onChunkDownloaded = eventTarget.getEventDispatcher(\"onChunkDownloaded\");\n    const { byteRange } = this.request.segment;\n    if (byteRange) this.requestByteRange = { ...byteRange };\n    if (request.loadedBytes !== 0) {\n      this.requestByteRange = this.requestByteRange ?? { start: 0 };\n      this.requestByteRange.start = this.requestByteRange.start + request.loadedBytes;\n    }\n    if (this.request.totalBytes) {\n      this.expectedBytesLength = this.request.totalBytes - this.request.loadedBytes;\n    }\n    this.requestControls = this.request.start(\n      { downloadSource: \"http\" },\n      {\n        abort: () => this.abortController.abort(\"abort\"),\n        notReceivingBytesTimeoutMs: this.httpConfig.httpNotReceivingBytesTimeoutMs\n      }\n    );\n    void this.fetch();\n  }\n  async fetch() {\n    var _a, _b, _c, _d;\n    const { segment } = this.request;\n    try {\n      let request = await ((_b = (_a = this.httpConfig).httpRequestSetup) == null ? void 0 : _b.call(\n        _a,\n        segment.url,\n        segment.byteRange,\n        this.abortController.signal,\n        this.requestByteRange\n      ));\n      if (!request) {\n        const headers = new Headers(\n          this.requestByteRange ? {\n            Range: `bytes=${this.requestByteRange.start}-${this.requestByteRange.end ?? \"\"}`\n          } : void 0\n        );\n        request = new Request(segment.url, {\n          headers,\n          signal: this.abortController.signal\n        });\n      }\n      if (this.abortController.signal.aborted) {\n        throw new DOMException(\n          \"Request aborted before request fetch\",\n          \"AbortError\"\n        );\n      }\n      const response = await window.fetch(request);\n      this.handleResponseHeaders(response);\n      if (!response.body) return;\n      const { requestControls } = this;\n      requestControls.firstBytesReceived();\n      const reader = response.body.getReader();\n      for await (const chunk of readStream(reader)) {\n        this.requestControls.addLoadedChunk(chunk);\n        this.onChunkDownloaded(chunk.byteLength, \"http\");\n      }\n      const isValid2 = await ((_d = (_c = this.httpConfig).validateHTTPSegment) == null ? void 0 : _d.call(\n        _c,\n        segment.url,\n        segment.byteRange,\n        this.request.data\n      )) ?? true;\n      if (!isValid2) {\n        this.request.clearLoadedBytes();\n        throw new RequestError(\n          \"http-segment-validation-failed\"\n        );\n      }\n      requestControls.completeOnSuccess();\n    } catch (error) {\n      this.handleError(error);\n    }\n  }\n  handleResponseHeaders(response) {\n    if (!response.ok) {\n      if (response.status === 406) {\n        this.request.clearLoadedBytes();\n        throw new RequestError(\n          \"http-bytes-mismatch\",\n          response.statusText\n        );\n      } else {\n        throw new RequestError(\"http-error\", response.statusText);\n      }\n    }\n    const { requestByteRange } = this;\n    if (requestByteRange) {\n      if (response.status === 200) {\n        if (this.request.segment.byteRange) {\n          throw new RequestError(\"http-unexpected-status-code\");\n        } else {\n          this.request.clearLoadedBytes();\n        }\n      } else {\n        if (response.status !== 206) {\n          throw new RequestError(\n            \"http-unexpected-status-code\",\n            response.statusText\n          );\n        }\n        const contentLengthHeader = response.headers.get(\"Content-Length\");\n        if (contentLengthHeader && this.expectedBytesLength !== void 0 && this.expectedBytesLength !== +contentLengthHeader) {\n          this.request.clearLoadedBytes();\n          throw new RequestError(\"http-bytes-mismatch\", response.statusText);\n        }\n        const contentRangeHeader = response.headers.get(\"Content-Range\");\n        const contentRange = contentRangeHeader ? parseContentRangeHeader(contentRangeHeader) : void 0;\n        if (contentRange) {\n          const { from, to } = contentRange;\n          const responseExpectedBytesLength = to !== void 0 && from !== void 0 ? to - from + 1 : void 0;\n          if (responseExpectedBytesLength !== void 0 && this.expectedBytesLength !== responseExpectedBytesLength || from !== void 0 && requestByteRange.start !== from || to !== void 0 && requestByteRange.end !== void 0 && requestByteRange.end !== to) {\n            this.request.clearLoadedBytes();\n            throw new RequestError(\"http-bytes-mismatch\", response.statusText);\n          }\n        }\n      }\n    }\n    if (response.status === 200 && this.request.totalBytes === void 0) {\n      const contentLengthHeader = response.headers.get(\"Content-Length\");\n      if (contentLengthHeader) this.request.setTotalBytes(+contentLengthHeader);\n    }\n  }\n  handleError(error) {\n    if (error instanceof Error) {\n      if (error.name !== \"abort\") return;\n      const httpLoaderError = error instanceof RequestError ? error : new RequestError(\"http-error\", error.message);\n      this.requestControls.abortOnError(httpLoaderError);\n    }\n  }\n}\nasync function* readStream(reader) {\n  while (true) {\n    const { done, value } = await reader.read();\n    if (done) break;\n    yield value;\n  }\n}\nconst rangeHeaderRegex = /^bytes (?:(?:(\\d+)|)-(?:(\\d+)|)|\\*)\\/(?:(\\d+)|\\*)$/;\nfunction parseContentRangeHeader(headerValue) {\n  const match = rangeHeaderRegex.exec(headerValue.trim());\n  if (!match) return;\n  const [, from, to, total] = match;\n  return {\n    from: from ? parseInt(from) : void 0,\n    to: to ? parseInt(to) : void 0,\n    total: total ? parseInt(total) : void 0\n  };\n}\nfunction getDefaultExportFromCjs$1(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, \"default\") ? x[\"default\"] : x;\n}\nvar browser$1 = { exports: {} };\nvar process = browser$1.exports = {};\nvar cachedSetTimeout;\nvar cachedClearTimeout;\nfunction defaultSetTimout() {\n  throw new Error(\"setTimeout has not been defined\");\n}\nfunction defaultClearTimeout() {\n  throw new Error(\"clearTimeout has not been defined\");\n}\n(function() {\n  try {\n    if (typeof setTimeout === \"function\") {\n      cachedSetTimeout = setTimeout;\n    } else {\n      cachedSetTimeout = defaultSetTimout;\n    }\n  } catch (e) {\n    cachedSetTimeout = defaultSetTimout;\n  }\n  try {\n    if (typeof clearTimeout === \"function\") {\n      cachedClearTimeout = clearTimeout;\n    } else {\n      cachedClearTimeout = defaultClearTimeout;\n    }\n  } catch (e) {\n    cachedClearTimeout = defaultClearTimeout;\n  }\n})();\nfunction runTimeout(fun) {\n  if (cachedSetTimeout === setTimeout) {\n    return setTimeout(fun, 0);\n  }\n  if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n    cachedSetTimeout = setTimeout;\n    return setTimeout(fun, 0);\n  }\n  try {\n    return cachedSetTimeout(fun, 0);\n  } catch (e) {\n    try {\n      return cachedSetTimeout.call(null, fun, 0);\n    } catch (e2) {\n      return cachedSetTimeout.call(this, fun, 0);\n    }\n  }\n}\nfunction runClearTimeout(marker) {\n  if (cachedClearTimeout === clearTimeout) {\n    return clearTimeout(marker);\n  }\n  if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n    cachedClearTimeout = clearTimeout;\n    return clearTimeout(marker);\n  }\n  try {\n    return cachedClearTimeout(marker);\n  } catch (e) {\n    try {\n      return cachedClearTimeout.call(null, marker);\n    } catch (e2) {\n      return cachedClearTimeout.call(this, marker);\n    }\n  }\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\nfunction cleanUpNextTick() {\n  if (!draining || !currentQueue) {\n    return;\n  }\n  draining = false;\n  if (currentQueue.length) {\n    queue = currentQueue.concat(queue);\n  } else {\n    queueIndex = -1;\n  }\n  if (queue.length) {\n    drainQueue();\n  }\n}\nfunction drainQueue() {\n  if (draining) {\n    return;\n  }\n  var timeout = runTimeout(cleanUpNextTick);\n  draining = true;\n  var len = queue.length;\n  while (len) {\n    currentQueue = queue;\n    queue = [];\n    while (++queueIndex < len) {\n      if (currentQueue) {\n        currentQueue[queueIndex].run();\n      }\n    }\n    queueIndex = -1;\n    len = queue.length;\n  }\n  currentQueue = null;\n  draining = false;\n  runClearTimeout(timeout);\n}\nprocess.nextTick = function(fun) {\n  var args = new Array(arguments.length - 1);\n  if (arguments.length > 1) {\n    for (var i = 1; i < arguments.length; i++) {\n      args[i - 1] = arguments[i];\n    }\n  }\n  queue.push(new Item(fun, args));\n  if (queue.length === 1 && !draining) {\n    runTimeout(drainQueue);\n  }\n};\nfunction Item(fun, array) {\n  this.fun = fun;\n  this.array = array;\n}\nItem.prototype.run = function() {\n  this.fun.apply(null, this.array);\n};\nprocess.title = \"browser\";\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = \"\";\nprocess.versions = {};\nfunction noop$1() {\n}\nprocess.on = noop$1;\nprocess.addListener = noop$1;\nprocess.once = noop$1;\nprocess.off = noop$1;\nprocess.removeListener = noop$1;\nprocess.removeAllListeners = noop$1;\nprocess.emit = noop$1;\nprocess.prependListener = noop$1;\nprocess.prependOnceListener = noop$1;\nprocess.listeners = function(name) {\n  return [];\n};\nprocess.binding = function(name) {\n  throw new Error(\"process.binding is not supported\");\n};\nprocess.cwd = function() {\n  return \"/\";\n};\nprocess.chdir = function(dir) {\n  throw new Error(\"process.chdir is not supported\");\n};\nprocess.umask = function() {\n  return 0;\n};\nvar browserExports$1 = browser$1.exports;\nconst process$1 = /* @__PURE__ */ getDefaultExportFromCjs$1(browserExports$1);\nvar commonjsGlobal = typeof globalThis !== \"undefined\" ? globalThis : typeof window !== \"undefined\" ? window : typeof global$1 !== \"undefined\" ? global$1 : typeof self !== \"undefined\" ? self : {};\nfunction getDefaultExportFromCjs(x) {\n  return x && x.__esModule && Object.prototype.hasOwnProperty.call(x, \"default\") ? x[\"default\"] : x;\n}\nvar browser = { exports: {} };\nvar ms;\nvar hasRequiredMs;\nfunction requireMs() {\n  if (hasRequiredMs) return ms;\n  hasRequiredMs = 1;\n  var s = 1e3;\n  var m = s * 60;\n  var h = m * 60;\n  var d = h * 24;\n  var w = d * 7;\n  var y = d * 365.25;\n  ms = function(val, options) {\n    options = options || {};\n    var type = typeof val;\n    if (type === \"string\" && val.length > 0) {\n      return parse(val);\n    } else if (type === \"number\" && isFinite(val)) {\n      return options.long ? fmtLong(val) : fmtShort(val);\n    }\n    throw new Error(\n      \"val is not a non-empty string or a valid number. val=\" + JSON.stringify(val)\n    );\n  };\n  function parse(str) {\n    str = String(str);\n    if (str.length > 100) {\n      return;\n    }\n    var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n      str\n    );\n    if (!match) {\n      return;\n    }\n    var n = parseFloat(match[1]);\n    var type = (match[2] || \"ms\").toLowerCase();\n    switch (type) {\n      case \"years\":\n      case \"year\":\n      case \"yrs\":\n      case \"yr\":\n      case \"y\":\n        return n * y;\n      case \"weeks\":\n      case \"week\":\n      case \"w\":\n        return n * w;\n      case \"days\":\n      case \"day\":\n      case \"d\":\n        return n * d;\n      case \"hours\":\n      case \"hour\":\n      case \"hrs\":\n      case \"hr\":\n      case \"h\":\n        return n * h;\n      case \"minutes\":\n      case \"minute\":\n      case \"mins\":\n      case \"min\":\n      case \"m\":\n        return n * m;\n      case \"seconds\":\n      case \"second\":\n      case \"secs\":\n      case \"sec\":\n      case \"s\":\n        return n * s;\n      case \"milliseconds\":\n      case \"millisecond\":\n      case \"msecs\":\n      case \"msec\":\n      case \"ms\":\n        return n;\n      default:\n        return void 0;\n    }\n  }\n  function fmtShort(ms2) {\n    var msAbs = Math.abs(ms2);\n    if (msAbs >= d) {\n      return Math.round(ms2 / d) + \"d\";\n    }\n    if (msAbs >= h) {\n      return Math.round(ms2 / h) + \"h\";\n    }\n    if (msAbs >= m) {\n      return Math.round(ms2 / m) + \"m\";\n    }\n    if (msAbs >= s) {\n      return Math.round(ms2 / s) + \"s\";\n    }\n    return ms2 + \"ms\";\n  }\n  function fmtLong(ms2) {\n    var msAbs = Math.abs(ms2);\n    if (msAbs >= d) {\n      return plural(ms2, msAbs, d, \"day\");\n    }\n    if (msAbs >= h) {\n      return plural(ms2, msAbs, h, \"hour\");\n    }\n    if (msAbs >= m) {\n      return plural(ms2, msAbs, m, \"minute\");\n    }\n    if (msAbs >= s) {\n      return plural(ms2, msAbs, s, \"second\");\n    }\n    return ms2 + \" ms\";\n  }\n  function plural(ms2, msAbs, n, name) {\n    var isPlural = msAbs >= n * 1.5;\n    return Math.round(ms2 / n) + \" \" + name + (isPlural ? \"s\" : \"\");\n  }\n  return ms;\n}\nvar common$2;\nvar hasRequiredCommon;\nfunction requireCommon() {\n  if (hasRequiredCommon) return common$2;\n  hasRequiredCommon = 1;\n  function setup(env) {\n    createDebug.debug = createDebug;\n    createDebug.default = createDebug;\n    createDebug.coerce = coerce;\n    createDebug.disable = disable;\n    createDebug.enable = enable;\n    createDebug.enabled = enabled;\n    createDebug.humanize = requireMs();\n    createDebug.destroy = destroy;\n    Object.keys(env).forEach((key) => {\n      createDebug[key] = env[key];\n    });\n    createDebug.names = [];\n    createDebug.skips = [];\n    createDebug.formatters = {};\n    function selectColor(namespace) {\n      let hash2 = 0;\n      for (let i = 0; i < namespace.length; i++) {\n        hash2 = (hash2 << 5) - hash2 + namespace.charCodeAt(i);\n        hash2 |= 0;\n      }\n      return createDebug.colors[Math.abs(hash2) % createDebug.colors.length];\n    }\n    createDebug.selectColor = selectColor;\n    function createDebug(namespace) {\n      let prevTime;\n      let enableOverride = null;\n      let namespacesCache;\n      let enabledCache;\n      function debug2(...args) {\n        if (!debug2.enabled) {\n          return;\n        }\n        const self2 = debug2;\n        const curr = Number(/* @__PURE__ */ new Date());\n        const ms2 = curr - (prevTime || curr);\n        self2.diff = ms2;\n        self2.prev = prevTime;\n        self2.curr = curr;\n        prevTime = curr;\n        args[0] = createDebug.coerce(args[0]);\n        if (typeof args[0] !== \"string\") {\n          args.unshift(\"%O\");\n        }\n        let index = 0;\n        args[0] = args[0].replace(/%([a-zA-Z%])/g, (match, format2) => {\n          if (match === \"%%\") {\n            return \"%\";\n          }\n          index++;\n          const formatter = createDebug.formatters[format2];\n          if (typeof formatter === \"function\") {\n            const val = args[index];\n            match = formatter.call(self2, val);\n            args.splice(index, 1);\n            index--;\n          }\n          return match;\n        });\n        createDebug.formatArgs.call(self2, args);\n        const logFn = self2.log || createDebug.log;\n        logFn.apply(self2, args);\n      }\n      debug2.namespace = namespace;\n      debug2.useColors = createDebug.useColors();\n      debug2.color = createDebug.selectColor(namespace);\n      debug2.extend = extend2;\n      debug2.destroy = createDebug.destroy;\n      Object.defineProperty(debug2, \"enabled\", {\n        enumerable: true,\n        configurable: false,\n        get: () => {\n          if (enableOverride !== null) {\n            return enableOverride;\n          }\n          if (namespacesCache !== createDebug.namespaces) {\n            namespacesCache = createDebug.namespaces;\n            enabledCache = createDebug.enabled(namespace);\n          }\n          return enabledCache;\n        },\n        set: (v) => {\n          enableOverride = v;\n        }\n      });\n      if (typeof createDebug.init === \"function\") {\n        createDebug.init(debug2);\n      }\n      return debug2;\n    }\n    function extend2(namespace, delimiter) {\n      const newDebug = createDebug(this.namespace + (typeof delimiter === \"undefined\" ? \":\" : delimiter) + namespace);\n      newDebug.log = this.log;\n      return newDebug;\n    }\n    function enable(namespaces) {\n      createDebug.save(namespaces);\n      createDebug.namespaces = namespaces;\n      createDebug.names = [];\n      createDebug.skips = [];\n      const split = (typeof namespaces === \"string\" ? namespaces : \"\").trim().replace(\" \", \",\").split(\",\").filter(Boolean);\n      for (const ns of split) {\n        if (ns[0] === \"-\") {\n          createDebug.skips.push(ns.slice(1));\n        } else {\n          createDebug.names.push(ns);\n        }\n      }\n    }\n    function matchesTemplate(search, template) {\n      let searchIndex = 0;\n      let templateIndex = 0;\n      let starIndex = -1;\n      let matchIndex = 0;\n      while (searchIndex < search.length) {\n        if (templateIndex < template.length && (template[templateIndex] === search[searchIndex] || template[templateIndex] === \"*\")) {\n          if (template[templateIndex] === \"*\") {\n            starIndex = templateIndex;\n            matchIndex = searchIndex;\n            templateIndex++;\n          } else {\n            searchIndex++;\n            templateIndex++;\n          }\n        } else if (starIndex !== -1) {\n          templateIndex = starIndex + 1;\n          matchIndex++;\n          searchIndex = matchIndex;\n        } else {\n          return false;\n        }\n      }\n      while (templateIndex < template.length && template[templateIndex] === \"*\") {\n        templateIndex++;\n      }\n      return templateIndex === template.length;\n    }\n    function disable() {\n      const namespaces = [\n        ...createDebug.names,\n        ...createDebug.skips.map((namespace) => \"-\" + namespace)\n      ].join(\",\");\n      createDebug.enable(\"\");\n      return namespaces;\n    }\n    function enabled(name) {\n      for (const skip of createDebug.skips) {\n        if (matchesTemplate(name, skip)) {\n          return false;\n        }\n      }\n      for (const ns of createDebug.names) {\n        if (matchesTemplate(name, ns)) {\n          return true;\n        }\n      }\n      return false;\n    }\n    function coerce(val) {\n      if (val instanceof Error) {\n        return val.stack || val.message;\n      }\n      return val;\n    }\n    function destroy() {\n      console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\");\n    }\n    createDebug.enable(createDebug.load());\n    return createDebug;\n  }\n  common$2 = setup;\n  return common$2;\n}\nvar hasRequiredBrowser;\nfunction requireBrowser() {\n  if (hasRequiredBrowser) return browser.exports;\n  hasRequiredBrowser = 1;\n  (function(module, exports) {\n    exports.formatArgs = formatArgs;\n    exports.save = save;\n    exports.load = load;\n    exports.useColors = useColors;\n    exports.storage = localstorage();\n    exports.destroy = /* @__PURE__ */ (() => {\n      let warned = false;\n      return () => {\n        if (!warned) {\n          warned = true;\n          console.warn(\"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.\");\n        }\n      };\n    })();\n    exports.colors = [\n      \"#0000CC\",\n      \"#0000FF\",\n      \"#0033CC\",\n      \"#0033FF\",\n      \"#0066CC\",\n      \"#0066FF\",\n      \"#0099CC\",\n      \"#0099FF\",\n      \"#00CC00\",\n      \"#00CC33\",\n      \"#00CC66\",\n      \"#00CC99\",\n      \"#00CCCC\",\n      \"#00CCFF\",\n      \"#3300CC\",\n      \"#3300FF\",\n      \"#3333CC\",\n      \"#3333FF\",\n      \"#3366CC\",\n      \"#3366FF\",\n      \"#3399CC\",\n      \"#3399FF\",\n      \"#33CC00\",\n      \"#33CC33\",\n      \"#33CC66\",\n      \"#33CC99\",\n      \"#33CCCC\",\n      \"#33CCFF\",\n      \"#6600CC\",\n      \"#6600FF\",\n      \"#6633CC\",\n      \"#6633FF\",\n      \"#66CC00\",\n      \"#66CC33\",\n      \"#9900CC\",\n      \"#9900FF\",\n      \"#9933CC\",\n      \"#9933FF\",\n      \"#99CC00\",\n      \"#99CC33\",\n      \"#CC0000\",\n      \"#CC0033\",\n      \"#CC0066\",\n      \"#CC0099\",\n      \"#CC00CC\",\n      \"#CC00FF\",\n      \"#CC3300\",\n      \"#CC3333\",\n      \"#CC3366\",\n      \"#CC3399\",\n      \"#CC33CC\",\n      \"#CC33FF\",\n      \"#CC6600\",\n      \"#CC6633\",\n      \"#CC9900\",\n      \"#CC9933\",\n      \"#CCCC00\",\n      \"#CCCC33\",\n      \"#FF0000\",\n      \"#FF0033\",\n      \"#FF0066\",\n      \"#FF0099\",\n      \"#FF00CC\",\n      \"#FF00FF\",\n      \"#FF3300\",\n      \"#FF3333\",\n      \"#FF3366\",\n      \"#FF3399\",\n      \"#FF33CC\",\n      \"#FF33FF\",\n      \"#FF6600\",\n      \"#FF6633\",\n      \"#FF9900\",\n      \"#FF9933\",\n      \"#FFCC00\",\n      \"#FFCC33\"\n    ];\n    function useColors() {\n      if (typeof window !== \"undefined\" && window.process && (window.process.type === \"renderer\" || window.process.__nwjs)) {\n        return true;\n      }\n      if (typeof navigator !== \"undefined\" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n        return false;\n      }\n      let m;\n      return typeof document !== \"undefined\" && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n      typeof window !== \"undefined\" && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n      // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n      typeof navigator !== \"undefined\" && navigator.userAgent && (m = navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/)) && parseInt(m[1], 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n      typeof navigator !== \"undefined\" && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n    }\n    function formatArgs(args) {\n      args[0] = (this.useColors ? \"%c\" : \"\") + this.namespace + (this.useColors ? \" %c\" : \" \") + args[0] + (this.useColors ? \"%c \" : \" \") + \"+\" + module.exports.humanize(this.diff);\n      if (!this.useColors) {\n        return;\n      }\n      const c = \"color: \" + this.color;\n      args.splice(1, 0, c, \"color: inherit\");\n      let index = 0;\n      let lastC = 0;\n      args[0].replace(/%[a-zA-Z%]/g, (match) => {\n        if (match === \"%%\") {\n          return;\n        }\n        index++;\n        if (match === \"%c\") {\n          lastC = index;\n        }\n      });\n      args.splice(lastC, 0, c);\n    }\n    exports.log = console.debug || console.log || (() => {\n    });\n    function save(namespaces) {\n      try {\n        if (namespaces) {\n          exports.storage.setItem(\"debug\", namespaces);\n        } else {\n          exports.storage.removeItem(\"debug\");\n        }\n      } catch (error) {\n      }\n    }\n    function load() {\n      let r;\n      try {\n        r = exports.storage.getItem(\"debug\");\n      } catch (error) {\n      }\n      if (!r && typeof process$1 !== \"undefined\" && \"env\" in process$1) {\n        r = process$1.env.DEBUG;\n      }\n      return r;\n    }\n    function localstorage() {\n      try {\n        return localStorage;\n      } catch (error) {\n      }\n    }\n    module.exports = requireCommon()(exports);\n    const { formatters } = module.exports;\n    formatters.j = function(v) {\n      try {\n        return JSON.stringify(v);\n      } catch (error) {\n        return \"[UnexpectedJSONParseError]: \" + error.message;\n      }\n    };\n  })(browser, browser.exports);\n  return browser.exports;\n}\nvar browserExports = requireBrowser();\nconst debug$3 = /* @__PURE__ */ getDefaultExportFromCjs(browserExports);\nvar events = { exports: {} };\nvar hasRequiredEvents;\nfunction requireEvents() {\n  if (hasRequiredEvents) return events.exports;\n  hasRequiredEvents = 1;\n  var R = typeof Reflect === \"object\" ? Reflect : null;\n  var ReflectApply = R && typeof R.apply === \"function\" ? R.apply : function ReflectApply2(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  };\n  var ReflectOwnKeys;\n  if (R && typeof R.ownKeys === \"function\") {\n    ReflectOwnKeys = R.ownKeys;\n  } else if (Object.getOwnPropertySymbols) {\n    ReflectOwnKeys = function ReflectOwnKeys2(target) {\n      return Object.getOwnPropertyNames(target).concat(Object.getOwnPropertySymbols(target));\n    };\n  } else {\n    ReflectOwnKeys = function ReflectOwnKeys2(target) {\n      return Object.getOwnPropertyNames(target);\n    };\n  }\n  function ProcessEmitWarning(warning) {\n    if (console && console.warn) console.warn(warning);\n  }\n  var NumberIsNaN = Number.isNaN || function NumberIsNaN2(value) {\n    return value !== value;\n  };\n  function EventEmitter2() {\n    EventEmitter2.init.call(this);\n  }\n  events.exports = EventEmitter2;\n  events.exports.once = once2;\n  EventEmitter2.EventEmitter = EventEmitter2;\n  EventEmitter2.prototype._events = void 0;\n  EventEmitter2.prototype._eventsCount = 0;\n  EventEmitter2.prototype._maxListeners = void 0;\n  var defaultMaxListeners = 10;\n  function checkListener(listener) {\n    if (typeof listener !== \"function\") {\n      throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n    }\n  }\n  Object.defineProperty(EventEmitter2, \"defaultMaxListeners\", {\n    enumerable: true,\n    get: function() {\n      return defaultMaxListeners;\n    },\n    set: function(arg) {\n      if (typeof arg !== \"number\" || arg < 0 || NumberIsNaN(arg)) {\n        throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + \".\");\n      }\n      defaultMaxListeners = arg;\n    }\n  });\n  EventEmitter2.init = function() {\n    if (this._events === void 0 || this._events === Object.getPrototypeOf(this)._events) {\n      this._events = /* @__PURE__ */ Object.create(null);\n      this._eventsCount = 0;\n    }\n    this._maxListeners = this._maxListeners || void 0;\n  };\n  EventEmitter2.prototype.setMaxListeners = function setMaxListeners(n) {\n    if (typeof n !== \"number\" || n < 0 || NumberIsNaN(n)) {\n      throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + \".\");\n    }\n    this._maxListeners = n;\n    return this;\n  };\n  function _getMaxListeners(that) {\n    if (that._maxListeners === void 0)\n      return EventEmitter2.defaultMaxListeners;\n    return that._maxListeners;\n  }\n  EventEmitter2.prototype.getMaxListeners = function getMaxListeners() {\n    return _getMaxListeners(this);\n  };\n  EventEmitter2.prototype.emit = function emit(type) {\n    var args = [];\n    for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n    var doError = type === \"error\";\n    var events2 = this._events;\n    if (events2 !== void 0)\n      doError = doError && events2.error === void 0;\n    else if (!doError)\n      return false;\n    if (doError) {\n      var er;\n      if (args.length > 0)\n        er = args[0];\n      if (er instanceof Error) {\n        throw er;\n      }\n      var err = new Error(\"Unhandled error.\" + (er ? \" (\" + er.message + \")\" : \"\"));\n      err.context = er;\n      throw err;\n    }\n    var handler = events2[type];\n    if (handler === void 0)\n      return false;\n    if (typeof handler === \"function\") {\n      ReflectApply(handler, this, args);\n    } else {\n      var len = handler.length;\n      var listeners = arrayClone(handler, len);\n      for (var i = 0; i < len; ++i)\n        ReflectApply(listeners[i], this, args);\n    }\n    return true;\n  };\n  function _addListener(target, type, listener, prepend) {\n    var m;\n    var events2;\n    var existing;\n    checkListener(listener);\n    events2 = target._events;\n    if (events2 === void 0) {\n      events2 = target._events = /* @__PURE__ */ Object.create(null);\n      target._eventsCount = 0;\n    } else {\n      if (events2.newListener !== void 0) {\n        target.emit(\n          \"newListener\",\n          type,\n          listener.listener ? listener.listener : listener\n        );\n        events2 = target._events;\n      }\n      existing = events2[type];\n    }\n    if (existing === void 0) {\n      existing = events2[type] = listener;\n      ++target._eventsCount;\n    } else {\n      if (typeof existing === \"function\") {\n        existing = events2[type] = prepend ? [listener, existing] : [existing, listener];\n      } else if (prepend) {\n        existing.unshift(listener);\n      } else {\n        existing.push(listener);\n      }\n      m = _getMaxListeners(target);\n      if (m > 0 && existing.length > m && !existing.warned) {\n        existing.warned = true;\n        var w = new Error(\"Possible EventEmitter memory leak detected. \" + existing.length + \" \" + String(type) + \" listeners added. Use emitter.setMaxListeners() to increase limit\");\n        w.name = \"MaxListenersExceededWarning\";\n        w.emitter = target;\n        w.type = type;\n        w.count = existing.length;\n        ProcessEmitWarning(w);\n      }\n    }\n    return target;\n  }\n  EventEmitter2.prototype.addListener = function addListener(type, listener) {\n    return _addListener(this, type, listener, false);\n  };\n  EventEmitter2.prototype.on = EventEmitter2.prototype.addListener;\n  EventEmitter2.prototype.prependListener = function prependListener(type, listener) {\n    return _addListener(this, type, listener, true);\n  };\n  function onceWrapper() {\n    if (!this.fired) {\n      this.target.removeListener(this.type, this.wrapFn);\n      this.fired = true;\n      if (arguments.length === 0)\n        return this.listener.call(this.target);\n      return this.listener.apply(this.target, arguments);\n    }\n  }\n  function _onceWrap(target, type, listener) {\n    var state = { fired: false, wrapFn: void 0, target, type, listener };\n    var wrapped = onceWrapper.bind(state);\n    wrapped.listener = listener;\n    state.wrapFn = wrapped;\n    return wrapped;\n  }\n  EventEmitter2.prototype.once = function once3(type, listener) {\n    checkListener(listener);\n    this.on(type, _onceWrap(this, type, listener));\n    return this;\n  };\n  EventEmitter2.prototype.prependOnceListener = function prependOnceListener(type, listener) {\n    checkListener(listener);\n    this.prependListener(type, _onceWrap(this, type, listener));\n    return this;\n  };\n  EventEmitter2.prototype.removeListener = function removeListener(type, listener) {\n    var list, events2, position, i, originalListener;\n    checkListener(listener);\n    events2 = this._events;\n    if (events2 === void 0)\n      return this;\n    list = events2[type];\n    if (list === void 0)\n      return this;\n    if (list === listener || list.listener === listener) {\n      if (--this._eventsCount === 0)\n        this._events = /* @__PURE__ */ Object.create(null);\n      else {\n        delete events2[type];\n        if (events2.removeListener)\n          this.emit(\"removeListener\", type, list.listener || listener);\n      }\n    } else if (typeof list !== \"function\") {\n      position = -1;\n      for (i = list.length - 1; i >= 0; i--) {\n        if (list[i] === listener || list[i].listener === listener) {\n          originalListener = list[i].listener;\n          position = i;\n          break;\n        }\n      }\n      if (position < 0)\n        return this;\n      if (position === 0)\n        list.shift();\n      else {\n        spliceOne(list, position);\n      }\n      if (list.length === 1)\n        events2[type] = list[0];\n      if (events2.removeListener !== void 0)\n        this.emit(\"removeListener\", type, originalListener || listener);\n    }\n    return this;\n  };\n  EventEmitter2.prototype.off = EventEmitter2.prototype.removeListener;\n  EventEmitter2.prototype.removeAllListeners = function removeAllListeners(type) {\n    var listeners, events2, i;\n    events2 = this._events;\n    if (events2 === void 0)\n      return this;\n    if (events2.removeListener === void 0) {\n      if (arguments.length === 0) {\n        this._events = /* @__PURE__ */ Object.create(null);\n        this._eventsCount = 0;\n      } else if (events2[type] !== void 0) {\n        if (--this._eventsCount === 0)\n          this._events = /* @__PURE__ */ Object.create(null);\n        else\n          delete events2[type];\n      }\n      return this;\n    }\n    if (arguments.length === 0) {\n      var keys = Object.keys(events2);\n      var key;\n      for (i = 0; i < keys.length; ++i) {\n        key = keys[i];\n        if (key === \"removeListener\") continue;\n        this.removeAllListeners(key);\n      }\n      this.removeAllListeners(\"removeListener\");\n      this._events = /* @__PURE__ */ Object.create(null);\n      this._eventsCount = 0;\n      return this;\n    }\n    listeners = events2[type];\n    if (typeof listeners === \"function\") {\n      this.removeListener(type, listeners);\n    } else if (listeners !== void 0) {\n      for (i = listeners.length - 1; i >= 0; i--) {\n        this.removeListener(type, listeners[i]);\n      }\n    }\n    return this;\n  };\n  function _listeners(target, type, unwrap) {\n    var events2 = target._events;\n    if (events2 === void 0)\n      return [];\n    var evlistener = events2[type];\n    if (evlistener === void 0)\n      return [];\n    if (typeof evlistener === \"function\")\n      return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n    return unwrap ? unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n  }\n  EventEmitter2.prototype.listeners = function listeners(type) {\n    return _listeners(this, type, true);\n  };\n  EventEmitter2.prototype.rawListeners = function rawListeners(type) {\n    return _listeners(this, type, false);\n  };\n  EventEmitter2.listenerCount = function(emitter, type) {\n    if (typeof emitter.listenerCount === \"function\") {\n      return emitter.listenerCount(type);\n    } else {\n      return listenerCount.call(emitter, type);\n    }\n  };\n  EventEmitter2.prototype.listenerCount = listenerCount;\n  function listenerCount(type) {\n    var events2 = this._events;\n    if (events2 !== void 0) {\n      var evlistener = events2[type];\n      if (typeof evlistener === \"function\") {\n        return 1;\n      } else if (evlistener !== void 0) {\n        return evlistener.length;\n      }\n    }\n    return 0;\n  }\n  EventEmitter2.prototype.eventNames = function eventNames() {\n    return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n  };\n  function arrayClone(arr, n) {\n    var copy = new Array(n);\n    for (var i = 0; i < n; ++i)\n      copy[i] = arr[i];\n    return copy;\n  }\n  function spliceOne(list, index) {\n    for (; index + 1 < list.length; index++)\n      list[index] = list[index + 1];\n    list.pop();\n  }\n  function unwrapListeners(arr) {\n    var ret = new Array(arr.length);\n    for (var i = 0; i < ret.length; ++i) {\n      ret[i] = arr[i].listener || arr[i];\n    }\n    return ret;\n  }\n  function once2(emitter, name) {\n    return new Promise(function(resolve, reject) {\n      function errorListener(err) {\n        emitter.removeListener(name, resolver);\n        reject(err);\n      }\n      function resolver() {\n        if (typeof emitter.removeListener === \"function\") {\n          emitter.removeListener(\"error\", errorListener);\n        }\n        resolve([].slice.call(arguments));\n      }\n      eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n      if (name !== \"error\") {\n        addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n      }\n    });\n  }\n  function addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n    if (typeof emitter.on === \"function\") {\n      eventTargetAgnosticAddListener(emitter, \"error\", handler, flags);\n    }\n  }\n  function eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n    if (typeof emitter.on === \"function\") {\n      if (flags.once) {\n        emitter.once(name, listener);\n      } else {\n        emitter.on(name, listener);\n      }\n    } else if (typeof emitter.addEventListener === \"function\") {\n      emitter.addEventListener(name, function wrapListener(arg) {\n        if (flags.once) {\n          emitter.removeEventListener(name, wrapListener);\n        }\n        listener(arg);\n      });\n    } else {\n      throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n    }\n  }\n  return events.exports;\n}\nvar eventsExports = requireEvents();\nconst EventEmitter = /* @__PURE__ */ getDefaultExportFromCjs(eventsExports);\nvar once$1 = { exports: {} };\nvar wrappy_1;\nvar hasRequiredWrappy;\nfunction requireWrappy() {\n  if (hasRequiredWrappy) return wrappy_1;\n  hasRequiredWrappy = 1;\n  wrappy_1 = wrappy;\n  function wrappy(fn, cb) {\n    if (fn && cb) return wrappy(fn)(cb);\n    if (typeof fn !== \"function\")\n      throw new TypeError(\"need wrapper function\");\n    Object.keys(fn).forEach(function(k) {\n      wrapper[k] = fn[k];\n    });\n    return wrapper;\n    function wrapper() {\n      var args = new Array(arguments.length);\n      for (var i = 0; i < args.length; i++) {\n        args[i] = arguments[i];\n      }\n      var ret = fn.apply(this, args);\n      var cb2 = args[args.length - 1];\n      if (typeof ret === \"function\" && ret !== cb2) {\n        Object.keys(cb2).forEach(function(k) {\n          ret[k] = cb2[k];\n        });\n      }\n      return ret;\n    }\n  }\n  return wrappy_1;\n}\nvar hasRequiredOnce;\nfunction requireOnce() {\n  if (hasRequiredOnce) return once$1.exports;\n  hasRequiredOnce = 1;\n  var wrappy = requireWrappy();\n  once$1.exports = wrappy(once2);\n  once$1.exports.strict = wrappy(onceStrict);\n  once2.proto = once2(function() {\n    Object.defineProperty(Function.prototype, \"once\", {\n      value: function() {\n        return once2(this);\n      },\n      configurable: true\n    });\n    Object.defineProperty(Function.prototype, \"onceStrict\", {\n      value: function() {\n        return onceStrict(this);\n      },\n      configurable: true\n    });\n  });\n  function once2(fn) {\n    var f = function() {\n      if (f.called) return f.value;\n      f.called = true;\n      return f.value = fn.apply(this, arguments);\n    };\n    f.called = false;\n    return f;\n  }\n  function onceStrict(fn) {\n    var f = function() {\n      if (f.called)\n        throw new Error(f.onceError);\n      f.called = true;\n      return f.value = fn.apply(this, arguments);\n    };\n    var name = fn.name || \"Function wrapped with `once`\";\n    f.onceError = name + \" shouldn't be called more than once\";\n    f.called = false;\n    return f;\n  }\n  return once$1.exports;\n}\nvar onceExports = requireOnce();\nconst once = /* @__PURE__ */ getDefaultExportFromCjs(onceExports);\n/*! queue-microtask. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nvar queueMicrotask_1;\nvar hasRequiredQueueMicrotask;\nfunction requireQueueMicrotask() {\n  if (hasRequiredQueueMicrotask) return queueMicrotask_1;\n  hasRequiredQueueMicrotask = 1;\n  let promise;\n  queueMicrotask_1 = typeof queueMicrotask === \"function\" ? queueMicrotask.bind(typeof window !== \"undefined\" ? window : commonjsGlobal) : (cb) => (promise || (promise = Promise.resolve())).then(cb).catch((err) => setTimeout(() => {\n    throw err;\n  }, 0));\n  return queueMicrotask_1;\n}\n/*! run-parallel. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nvar runParallel_1;\nvar hasRequiredRunParallel;\nfunction requireRunParallel() {\n  if (hasRequiredRunParallel) return runParallel_1;\n  hasRequiredRunParallel = 1;\n  runParallel_1 = runParallel;\n  const queueMicrotask2 = requireQueueMicrotask();\n  function runParallel(tasks, cb) {\n    let results, pending, keys;\n    let isSync = true;\n    if (Array.isArray(tasks)) {\n      results = [];\n      pending = tasks.length;\n    } else {\n      keys = Object.keys(tasks);\n      results = {};\n      pending = keys.length;\n    }\n    function done(err) {\n      function end() {\n        if (cb) cb(err, results);\n        cb = null;\n      }\n      if (isSync) queueMicrotask2(end);\n      else end();\n    }\n    function each(i, err, result) {\n      results[i] = result;\n      if (--pending === 0 || err) {\n        done(err);\n      }\n    }\n    if (!pending) {\n      done(null);\n    } else if (keys) {\n      keys.forEach(function(key) {\n        tasks[key](function(err, result) {\n          each(key, err, result);\n        });\n      });\n    } else {\n      tasks.forEach(function(task, i) {\n        task(function(err, result) {\n          each(i, err, result);\n        });\n      });\n    }\n    isSync = false;\n  }\n  return runParallel_1;\n}\nvar runParallelExports = requireRunParallel();\nconst parallel = /* @__PURE__ */ getDefaultExportFromCjs(runParallelExports);\nconst scope$1 = typeof window !== \"undefined\" ? window : self;\nconst RTCPeerConnection = scope$1.RTCPeerConnection || scope$1.mozRTCPeerConnection || scope$1.webkitRTCPeerConnection;\nconst RTCSessionDescription = scope$1.RTCSessionDescription || scope$1.mozRTCSessionDescription || scope$1.webkitRTCSessionDescription;\nconst RTCIceCandidate = scope$1.RTCIceCandidate || scope$1.mozRTCIceCandidate || scope$1.webkitRTCIceCandidate;\nvar fixedSize;\nvar hasRequiredFixedSize;\nfunction requireFixedSize() {\n  if (hasRequiredFixedSize) return fixedSize;\n  hasRequiredFixedSize = 1;\n  fixedSize = class FixedFIFO {\n    constructor(hwm) {\n      if (!(hwm > 0) || (hwm - 1 & hwm) !== 0) throw new Error(\"Max size for a FixedFIFO should be a power of two\");\n      this.buffer = new Array(hwm);\n      this.mask = hwm - 1;\n      this.top = 0;\n      this.btm = 0;\n      this.next = null;\n    }\n    clear() {\n      this.top = this.btm = 0;\n      this.next = null;\n      this.buffer.fill(void 0);\n    }\n    push(data) {\n      if (this.buffer[this.top] !== void 0) return false;\n      this.buffer[this.top] = data;\n      this.top = this.top + 1 & this.mask;\n      return true;\n    }\n    shift() {\n      const last = this.buffer[this.btm];\n      if (last === void 0) return void 0;\n      this.buffer[this.btm] = void 0;\n      this.btm = this.btm + 1 & this.mask;\n      return last;\n    }\n    peek() {\n      return this.buffer[this.btm];\n    }\n    isEmpty() {\n      return this.buffer[this.btm] === void 0;\n    }\n  };\n  return fixedSize;\n}\nvar fastFifo;\nvar hasRequiredFastFifo;\nfunction requireFastFifo() {\n  if (hasRequiredFastFifo) return fastFifo;\n  hasRequiredFastFifo = 1;\n  const FixedFIFO = requireFixedSize();\n  fastFifo = class FastFIFO {\n    constructor(hwm) {\n      this.hwm = hwm || 16;\n      this.head = new FixedFIFO(this.hwm);\n      this.tail = this.head;\n      this.length = 0;\n    }\n    clear() {\n      this.head = this.tail;\n      this.head.clear();\n      this.length = 0;\n    }\n    push(val) {\n      this.length++;\n      if (!this.head.push(val)) {\n        const prev = this.head;\n        this.head = prev.next = new FixedFIFO(2 * this.head.buffer.length);\n        this.head.push(val);\n      }\n    }\n    shift() {\n      if (this.length !== 0) this.length--;\n      const val = this.tail.shift();\n      if (val === void 0 && this.tail.next) {\n        const next = this.tail.next;\n        this.tail.next = null;\n        this.tail = next;\n        return this.tail.shift();\n      }\n      return val;\n    }\n    peek() {\n      const val = this.tail.peek();\n      if (val === void 0 && this.tail.next) return this.tail.next.peek();\n      return val;\n    }\n    isEmpty() {\n      return this.length === 0;\n    }\n  };\n  return fastFifo;\n}\nvar browserDecoder;\nvar hasRequiredBrowserDecoder;\nfunction requireBrowserDecoder() {\n  if (hasRequiredBrowserDecoder) return browserDecoder;\n  hasRequiredBrowserDecoder = 1;\n  browserDecoder = class BrowserDecoder {\n    constructor(encoding) {\n      this.decoder = new TextDecoder(encoding === \"utf16le\" ? \"utf16-le\" : encoding);\n    }\n    get remaining() {\n      return -1;\n    }\n    decode(data) {\n      return this.decoder.decode(data, { stream: true });\n    }\n    flush() {\n      return this.decoder.decode(new Uint8Array(0));\n    }\n  };\n  return browserDecoder;\n}\nvar textDecoder;\nvar hasRequiredTextDecoder;\nfunction requireTextDecoder() {\n  if (hasRequiredTextDecoder) return textDecoder;\n  hasRequiredTextDecoder = 1;\n  const PassThroughDecoder = requireBrowserDecoder();\n  const UTF8Decoder = requireBrowserDecoder();\n  textDecoder = class TextDecoder {\n    constructor(encoding = \"utf8\") {\n      this.encoding = normalizeEncoding(encoding);\n      switch (this.encoding) {\n        case \"utf8\":\n          this.decoder = new UTF8Decoder();\n          break;\n        case \"utf16le\":\n        case \"base64\":\n          throw new Error(\"Unsupported encoding: \" + this.encoding);\n        default:\n          this.decoder = new PassThroughDecoder(this.encoding);\n      }\n    }\n    get remaining() {\n      return this.decoder.remaining;\n    }\n    push(data) {\n      if (typeof data === \"string\") return data;\n      return this.decoder.decode(data);\n    }\n    // For Node.js compatibility\n    write(data) {\n      return this.push(data);\n    }\n    end(data) {\n      let result = \"\";\n      if (data) result = this.push(data);\n      result += this.decoder.flush();\n      return result;\n    }\n  };\n  function normalizeEncoding(encoding) {\n    encoding = encoding.toLowerCase();\n    switch (encoding) {\n      case \"utf8\":\n      case \"utf-8\":\n        return \"utf8\";\n      case \"ucs2\":\n      case \"ucs-2\":\n      case \"utf16le\":\n      case \"utf-16le\":\n        return \"utf16le\";\n      case \"latin1\":\n      case \"binary\":\n        return \"latin1\";\n      case \"base64\":\n      case \"ascii\":\n      case \"hex\":\n        return encoding;\n      default:\n        throw new Error(\"Unknown encoding: \" + encoding);\n    }\n  }\n  return textDecoder;\n}\nvar streamx;\nvar hasRequiredStreamx;\nfunction requireStreamx() {\n  if (hasRequiredStreamx) return streamx;\n  hasRequiredStreamx = 1;\n  const { EventEmitter: EventEmitter2 } = requireEvents();\n  const STREAM_DESTROYED = new Error(\"Stream was destroyed\");\n  const PREMATURE_CLOSE = new Error(\"Premature close\");\n  const FIFO = requireFastFifo();\n  const TextDecoder2 = requireTextDecoder();\n  const MAX = (1 << 29) - 1;\n  const OPENING = 1;\n  const PREDESTROYING = 2;\n  const DESTROYING = 4;\n  const DESTROYED = 8;\n  const NOT_OPENING = MAX ^ OPENING;\n  const NOT_PREDESTROYING = MAX ^ PREDESTROYING;\n  const READ_ACTIVE = 1 << 4;\n  const READ_UPDATING = 2 << 4;\n  const READ_PRIMARY = 4 << 4;\n  const READ_QUEUED = 8 << 4;\n  const READ_RESUMED = 16 << 4;\n  const READ_PIPE_DRAINED = 32 << 4;\n  const READ_ENDING = 64 << 4;\n  const READ_EMIT_DATA = 128 << 4;\n  const READ_EMIT_READABLE = 256 << 4;\n  const READ_EMITTED_READABLE = 512 << 4;\n  const READ_DONE = 1024 << 4;\n  const READ_NEXT_TICK = 2048 << 4;\n  const READ_NEEDS_PUSH = 4096 << 4;\n  const READ_READ_AHEAD = 8192 << 4;\n  const READ_FLOWING = READ_RESUMED | READ_PIPE_DRAINED;\n  const READ_ACTIVE_AND_NEEDS_PUSH = READ_ACTIVE | READ_NEEDS_PUSH;\n  const READ_PRIMARY_AND_ACTIVE = READ_PRIMARY | READ_ACTIVE;\n  const READ_EMIT_READABLE_AND_QUEUED = READ_EMIT_READABLE | READ_QUEUED;\n  const READ_RESUMED_READ_AHEAD = READ_RESUMED | READ_READ_AHEAD;\n  const READ_NOT_ACTIVE = MAX ^ READ_ACTIVE;\n  const READ_NON_PRIMARY = MAX ^ READ_PRIMARY;\n  const READ_NON_PRIMARY_AND_PUSHED = MAX ^ (READ_PRIMARY | READ_NEEDS_PUSH);\n  const READ_PUSHED = MAX ^ READ_NEEDS_PUSH;\n  const READ_PAUSED = MAX ^ READ_RESUMED;\n  const READ_NOT_QUEUED = MAX ^ (READ_QUEUED | READ_EMITTED_READABLE);\n  const READ_NOT_ENDING = MAX ^ READ_ENDING;\n  const READ_PIPE_NOT_DRAINED = MAX ^ READ_FLOWING;\n  const READ_NOT_NEXT_TICK = MAX ^ READ_NEXT_TICK;\n  const READ_NOT_UPDATING = MAX ^ READ_UPDATING;\n  const READ_NO_READ_AHEAD = MAX ^ READ_READ_AHEAD;\n  const READ_PAUSED_NO_READ_AHEAD = MAX ^ READ_RESUMED_READ_AHEAD;\n  const WRITE_ACTIVE = 1 << 18;\n  const WRITE_UPDATING = 2 << 18;\n  const WRITE_PRIMARY = 4 << 18;\n  const WRITE_QUEUED = 8 << 18;\n  const WRITE_UNDRAINED = 16 << 18;\n  const WRITE_DONE = 32 << 18;\n  const WRITE_EMIT_DRAIN = 64 << 18;\n  const WRITE_NEXT_TICK = 128 << 18;\n  const WRITE_WRITING = 256 << 18;\n  const WRITE_FINISHING = 512 << 18;\n  const WRITE_CORKED = 1024 << 18;\n  const WRITE_NOT_ACTIVE = MAX ^ (WRITE_ACTIVE | WRITE_WRITING);\n  const WRITE_NON_PRIMARY = MAX ^ WRITE_PRIMARY;\n  const WRITE_NOT_FINISHING = MAX ^ (WRITE_ACTIVE | WRITE_FINISHING);\n  const WRITE_DRAINED = MAX ^ WRITE_UNDRAINED;\n  const WRITE_NOT_QUEUED = MAX ^ WRITE_QUEUED;\n  const WRITE_NOT_NEXT_TICK = MAX ^ WRITE_NEXT_TICK;\n  const WRITE_NOT_UPDATING = MAX ^ WRITE_UPDATING;\n  const WRITE_NOT_CORKED = MAX ^ WRITE_CORKED;\n  const ACTIVE = READ_ACTIVE | WRITE_ACTIVE;\n  const NOT_ACTIVE = MAX ^ ACTIVE;\n  const DONE = READ_DONE | WRITE_DONE;\n  const DESTROY_STATUS = DESTROYING | DESTROYED | PREDESTROYING;\n  const OPEN_STATUS = DESTROY_STATUS | OPENING;\n  const AUTO_DESTROY = DESTROY_STATUS | DONE;\n  const NON_PRIMARY = WRITE_NON_PRIMARY & READ_NON_PRIMARY;\n  const ACTIVE_OR_TICKING = WRITE_NEXT_TICK | READ_NEXT_TICK;\n  const TICKING = ACTIVE_OR_TICKING & NOT_ACTIVE;\n  const IS_OPENING = OPEN_STATUS | TICKING;\n  const READ_PRIMARY_STATUS = OPEN_STATUS | READ_ENDING | READ_DONE;\n  const READ_STATUS = OPEN_STATUS | READ_DONE | READ_QUEUED;\n  const READ_ENDING_STATUS = OPEN_STATUS | READ_ENDING | READ_QUEUED;\n  const READ_READABLE_STATUS = OPEN_STATUS | READ_EMIT_READABLE | READ_QUEUED | READ_EMITTED_READABLE;\n  const SHOULD_NOT_READ = OPEN_STATUS | READ_ACTIVE | READ_ENDING | READ_DONE | READ_NEEDS_PUSH | READ_READ_AHEAD;\n  const READ_BACKPRESSURE_STATUS = DESTROY_STATUS | READ_ENDING | READ_DONE;\n  const READ_UPDATE_SYNC_STATUS = READ_UPDATING | OPEN_STATUS | READ_NEXT_TICK | READ_PRIMARY;\n  const READ_NEXT_TICK_OR_OPENING = READ_NEXT_TICK | OPENING;\n  const WRITE_PRIMARY_STATUS = OPEN_STATUS | WRITE_FINISHING | WRITE_DONE;\n  const WRITE_QUEUED_AND_UNDRAINED = WRITE_QUEUED | WRITE_UNDRAINED;\n  const WRITE_QUEUED_AND_ACTIVE = WRITE_QUEUED | WRITE_ACTIVE;\n  const WRITE_DRAIN_STATUS = WRITE_QUEUED | WRITE_UNDRAINED | OPEN_STATUS | WRITE_ACTIVE;\n  const WRITE_STATUS = OPEN_STATUS | WRITE_ACTIVE | WRITE_QUEUED | WRITE_CORKED;\n  const WRITE_PRIMARY_AND_ACTIVE = WRITE_PRIMARY | WRITE_ACTIVE;\n  const WRITE_ACTIVE_AND_WRITING = WRITE_ACTIVE | WRITE_WRITING;\n  const WRITE_FINISHING_STATUS = OPEN_STATUS | WRITE_FINISHING | WRITE_QUEUED_AND_ACTIVE | WRITE_DONE;\n  const WRITE_BACKPRESSURE_STATUS = WRITE_UNDRAINED | DESTROY_STATUS | WRITE_FINISHING | WRITE_DONE;\n  const WRITE_UPDATE_SYNC_STATUS = WRITE_UPDATING | OPEN_STATUS | WRITE_NEXT_TICK | WRITE_PRIMARY;\n  const WRITE_DROP_DATA = WRITE_FINISHING | WRITE_DONE | DESTROY_STATUS;\n  const asyncIterator = Symbol.asyncIterator || Symbol(\"asyncIterator\");\n  class WritableState {\n    constructor(stream, { highWaterMark = 16384, map = null, mapWritable, byteLength: byteLength2, byteLengthWritable } = {}) {\n      this.stream = stream;\n      this.queue = new FIFO();\n      this.highWaterMark = highWaterMark;\n      this.buffered = 0;\n      this.error = null;\n      this.pipeline = null;\n      this.drains = null;\n      this.byteLength = byteLengthWritable || byteLength2 || defaultByteLength;\n      this.map = mapWritable || map;\n      this.afterWrite = afterWrite.bind(this);\n      this.afterUpdateNextTick = updateWriteNT.bind(this);\n    }\n    get ended() {\n      return (this.stream._duplexState & WRITE_DONE) !== 0;\n    }\n    push(data) {\n      if ((this.stream._duplexState & WRITE_DROP_DATA) !== 0) return false;\n      if (this.map !== null) data = this.map(data);\n      this.buffered += this.byteLength(data);\n      this.queue.push(data);\n      if (this.buffered < this.highWaterMark) {\n        this.stream._duplexState |= WRITE_QUEUED;\n        return true;\n      }\n      this.stream._duplexState |= WRITE_QUEUED_AND_UNDRAINED;\n      return false;\n    }\n    shift() {\n      const data = this.queue.shift();\n      this.buffered -= this.byteLength(data);\n      if (this.buffered === 0) this.stream._duplexState &= WRITE_NOT_QUEUED;\n      return data;\n    }\n    end(data) {\n      if (typeof data === \"function\") this.stream.once(\"finish\", data);\n      else if (data !== void 0 && data !== null) this.push(data);\n      this.stream._duplexState = (this.stream._duplexState | WRITE_FINISHING) & WRITE_NON_PRIMARY;\n    }\n    autoBatch(data, cb) {\n      const buffer2 = [];\n      const stream = this.stream;\n      buffer2.push(data);\n      while ((stream._duplexState & WRITE_STATUS) === WRITE_QUEUED_AND_ACTIVE) {\n        buffer2.push(stream._writableState.shift());\n      }\n      if ((stream._duplexState & OPEN_STATUS) !== 0) return cb(null);\n      stream._writev(buffer2, cb);\n    }\n    update() {\n      const stream = this.stream;\n      stream._duplexState |= WRITE_UPDATING;\n      do {\n        while ((stream._duplexState & WRITE_STATUS) === WRITE_QUEUED) {\n          const data = this.shift();\n          stream._duplexState |= WRITE_ACTIVE_AND_WRITING;\n          stream._write(data, this.afterWrite);\n        }\n        if ((stream._duplexState & WRITE_PRIMARY_AND_ACTIVE) === 0) this.updateNonPrimary();\n      } while (this.continueUpdate() === true);\n      stream._duplexState &= WRITE_NOT_UPDATING;\n    }\n    updateNonPrimary() {\n      const stream = this.stream;\n      if ((stream._duplexState & WRITE_FINISHING_STATUS) === WRITE_FINISHING) {\n        stream._duplexState = stream._duplexState | WRITE_ACTIVE;\n        stream._final(afterFinal.bind(this));\n        return;\n      }\n      if ((stream._duplexState & DESTROY_STATUS) === DESTROYING) {\n        if ((stream._duplexState & ACTIVE_OR_TICKING) === 0) {\n          stream._duplexState |= ACTIVE;\n          stream._destroy(afterDestroy.bind(this));\n        }\n        return;\n      }\n      if ((stream._duplexState & IS_OPENING) === OPENING) {\n        stream._duplexState = (stream._duplexState | ACTIVE) & NOT_OPENING;\n        stream._open(afterOpen.bind(this));\n      }\n    }\n    continueUpdate() {\n      if ((this.stream._duplexState & WRITE_NEXT_TICK) === 0) return false;\n      this.stream._duplexState &= WRITE_NOT_NEXT_TICK;\n      return true;\n    }\n    updateCallback() {\n      if ((this.stream._duplexState & WRITE_UPDATE_SYNC_STATUS) === WRITE_PRIMARY) this.update();\n      else this.updateNextTick();\n    }\n    updateNextTick() {\n      if ((this.stream._duplexState & WRITE_NEXT_TICK) !== 0) return;\n      this.stream._duplexState |= WRITE_NEXT_TICK;\n      if ((this.stream._duplexState & WRITE_UPDATING) === 0) queueMicrotask(this.afterUpdateNextTick);\n    }\n  }\n  class ReadableState {\n    constructor(stream, { highWaterMark = 16384, map = null, mapReadable, byteLength: byteLength2, byteLengthReadable } = {}) {\n      this.stream = stream;\n      this.queue = new FIFO();\n      this.highWaterMark = highWaterMark === 0 ? 1 : highWaterMark;\n      this.buffered = 0;\n      this.readAhead = highWaterMark > 0;\n      this.error = null;\n      this.pipeline = null;\n      this.byteLength = byteLengthReadable || byteLength2 || defaultByteLength;\n      this.map = mapReadable || map;\n      this.pipeTo = null;\n      this.afterRead = afterRead.bind(this);\n      this.afterUpdateNextTick = updateReadNT.bind(this);\n    }\n    get ended() {\n      return (this.stream._duplexState & READ_DONE) !== 0;\n    }\n    pipe(pipeTo, cb) {\n      if (this.pipeTo !== null) throw new Error(\"Can only pipe to one destination\");\n      if (typeof cb !== \"function\") cb = null;\n      this.stream._duplexState |= READ_PIPE_DRAINED;\n      this.pipeTo = pipeTo;\n      this.pipeline = new Pipeline(this.stream, pipeTo, cb);\n      if (cb) this.stream.on(\"error\", noop22);\n      if (isStreamx(pipeTo)) {\n        pipeTo._writableState.pipeline = this.pipeline;\n        if (cb) pipeTo.on(\"error\", noop22);\n        pipeTo.on(\"finish\", this.pipeline.finished.bind(this.pipeline));\n      } else {\n        const onerror = this.pipeline.done.bind(this.pipeline, pipeTo);\n        const onclose = this.pipeline.done.bind(this.pipeline, pipeTo, null);\n        pipeTo.on(\"error\", onerror);\n        pipeTo.on(\"close\", onclose);\n        pipeTo.on(\"finish\", this.pipeline.finished.bind(this.pipeline));\n      }\n      pipeTo.on(\"drain\", afterDrain.bind(this));\n      this.stream.emit(\"piping\", pipeTo);\n      pipeTo.emit(\"pipe\", this.stream);\n    }\n    push(data) {\n      const stream = this.stream;\n      if (data === null) {\n        this.highWaterMark = 0;\n        stream._duplexState = (stream._duplexState | READ_ENDING) & READ_NON_PRIMARY_AND_PUSHED;\n        return false;\n      }\n      if (this.map !== null) {\n        data = this.map(data);\n        if (data === null) {\n          stream._duplexState &= READ_PUSHED;\n          return this.buffered < this.highWaterMark;\n        }\n      }\n      this.buffered += this.byteLength(data);\n      this.queue.push(data);\n      stream._duplexState = (stream._duplexState | READ_QUEUED) & READ_PUSHED;\n      return this.buffered < this.highWaterMark;\n    }\n    shift() {\n      const data = this.queue.shift();\n      this.buffered -= this.byteLength(data);\n      if (this.buffered === 0) this.stream._duplexState &= READ_NOT_QUEUED;\n      return data;\n    }\n    unshift(data) {\n      const pending = [this.map !== null ? this.map(data) : data];\n      while (this.buffered > 0) pending.push(this.shift());\n      for (let i = 0; i < pending.length - 1; i++) {\n        const data2 = pending[i];\n        this.buffered += this.byteLength(data2);\n        this.queue.push(data2);\n      }\n      this.push(pending[pending.length - 1]);\n    }\n    read() {\n      const stream = this.stream;\n      if ((stream._duplexState & READ_STATUS) === READ_QUEUED) {\n        const data = this.shift();\n        if (this.pipeTo !== null && this.pipeTo.write(data) === false) stream._duplexState &= READ_PIPE_NOT_DRAINED;\n        if ((stream._duplexState & READ_EMIT_DATA) !== 0) stream.emit(\"data\", data);\n        return data;\n      }\n      if (this.readAhead === false) {\n        stream._duplexState |= READ_READ_AHEAD;\n        this.updateNextTick();\n      }\n      return null;\n    }\n    drain() {\n      const stream = this.stream;\n      while ((stream._duplexState & READ_STATUS) === READ_QUEUED && (stream._duplexState & READ_FLOWING) !== 0) {\n        const data = this.shift();\n        if (this.pipeTo !== null && this.pipeTo.write(data) === false) stream._duplexState &= READ_PIPE_NOT_DRAINED;\n        if ((stream._duplexState & READ_EMIT_DATA) !== 0) stream.emit(\"data\", data);\n      }\n    }\n    update() {\n      const stream = this.stream;\n      stream._duplexState |= READ_UPDATING;\n      do {\n        this.drain();\n        while (this.buffered < this.highWaterMark && (stream._duplexState & SHOULD_NOT_READ) === READ_READ_AHEAD) {\n          stream._duplexState |= READ_ACTIVE_AND_NEEDS_PUSH;\n          stream._read(this.afterRead);\n          this.drain();\n        }\n        if ((stream._duplexState & READ_READABLE_STATUS) === READ_EMIT_READABLE_AND_QUEUED) {\n          stream._duplexState |= READ_EMITTED_READABLE;\n          stream.emit(\"readable\");\n        }\n        if ((stream._duplexState & READ_PRIMARY_AND_ACTIVE) === 0) this.updateNonPrimary();\n      } while (this.continueUpdate() === true);\n      stream._duplexState &= READ_NOT_UPDATING;\n    }\n    updateNonPrimary() {\n      const stream = this.stream;\n      if ((stream._duplexState & READ_ENDING_STATUS) === READ_ENDING) {\n        stream._duplexState = (stream._duplexState | READ_DONE) & READ_NOT_ENDING;\n        stream.emit(\"end\");\n        if ((stream._duplexState & AUTO_DESTROY) === DONE) stream._duplexState |= DESTROYING;\n        if (this.pipeTo !== null) this.pipeTo.end();\n      }\n      if ((stream._duplexState & DESTROY_STATUS) === DESTROYING) {\n        if ((stream._duplexState & ACTIVE_OR_TICKING) === 0) {\n          stream._duplexState |= ACTIVE;\n          stream._destroy(afterDestroy.bind(this));\n        }\n        return;\n      }\n      if ((stream._duplexState & IS_OPENING) === OPENING) {\n        stream._duplexState = (stream._duplexState | ACTIVE) & NOT_OPENING;\n        stream._open(afterOpen.bind(this));\n      }\n    }\n    continueUpdate() {\n      if ((this.stream._duplexState & READ_NEXT_TICK) === 0) return false;\n      this.stream._duplexState &= READ_NOT_NEXT_TICK;\n      return true;\n    }\n    updateCallback() {\n      if ((this.stream._duplexState & READ_UPDATE_SYNC_STATUS) === READ_PRIMARY) this.update();\n      else this.updateNextTick();\n    }\n    updateNextTickIfOpen() {\n      if ((this.stream._duplexState & READ_NEXT_TICK_OR_OPENING) !== 0) return;\n      this.stream._duplexState |= READ_NEXT_TICK;\n      if ((this.stream._duplexState & READ_UPDATING) === 0) queueMicrotask(this.afterUpdateNextTick);\n    }\n    updateNextTick() {\n      if ((this.stream._duplexState & READ_NEXT_TICK) !== 0) return;\n      this.stream._duplexState |= READ_NEXT_TICK;\n      if ((this.stream._duplexState & READ_UPDATING) === 0) queueMicrotask(this.afterUpdateNextTick);\n    }\n  }\n  class TransformState {\n    constructor(stream) {\n      this.data = null;\n      this.afterTransform = afterTransform.bind(stream);\n      this.afterFinal = null;\n    }\n  }\n  class Pipeline {\n    constructor(src, dst, cb) {\n      this.from = src;\n      this.to = dst;\n      this.afterPipe = cb;\n      this.error = null;\n      this.pipeToFinished = false;\n    }\n    finished() {\n      this.pipeToFinished = true;\n    }\n    done(stream, err) {\n      if (err) this.error = err;\n      if (stream === this.to) {\n        this.to = null;\n        if (this.from !== null) {\n          if ((this.from._duplexState & READ_DONE) === 0 || !this.pipeToFinished) {\n            this.from.destroy(this.error || new Error(\"Writable stream closed prematurely\"));\n          }\n          return;\n        }\n      }\n      if (stream === this.from) {\n        this.from = null;\n        if (this.to !== null) {\n          if ((stream._duplexState & READ_DONE) === 0) {\n            this.to.destroy(this.error || new Error(\"Readable stream closed before ending\"));\n          }\n          return;\n        }\n      }\n      if (this.afterPipe !== null) this.afterPipe(this.error);\n      this.to = this.from = this.afterPipe = null;\n    }\n  }\n  function afterDrain() {\n    this.stream._duplexState |= READ_PIPE_DRAINED;\n    this.updateCallback();\n  }\n  function afterFinal(err) {\n    const stream = this.stream;\n    if (err) stream.destroy(err);\n    if ((stream._duplexState & DESTROY_STATUS) === 0) {\n      stream._duplexState |= WRITE_DONE;\n      stream.emit(\"finish\");\n    }\n    if ((stream._duplexState & AUTO_DESTROY) === DONE) {\n      stream._duplexState |= DESTROYING;\n    }\n    stream._duplexState &= WRITE_NOT_FINISHING;\n    if ((stream._duplexState & WRITE_UPDATING) === 0) this.update();\n    else this.updateNextTick();\n  }\n  function afterDestroy(err) {\n    const stream = this.stream;\n    if (!err && this.error !== STREAM_DESTROYED) err = this.error;\n    if (err) stream.emit(\"error\", err);\n    stream._duplexState |= DESTROYED;\n    stream.emit(\"close\");\n    const rs = stream._readableState;\n    const ws = stream._writableState;\n    if (rs !== null && rs.pipeline !== null) rs.pipeline.done(stream, err);\n    if (ws !== null) {\n      while (ws.drains !== null && ws.drains.length > 0) ws.drains.shift().resolve(false);\n      if (ws.pipeline !== null) ws.pipeline.done(stream, err);\n    }\n  }\n  function afterWrite(err) {\n    const stream = this.stream;\n    if (err) stream.destroy(err);\n    stream._duplexState &= WRITE_NOT_ACTIVE;\n    if (this.drains !== null) tickDrains(this.drains);\n    if ((stream._duplexState & WRITE_DRAIN_STATUS) === WRITE_UNDRAINED) {\n      stream._duplexState &= WRITE_DRAINED;\n      if ((stream._duplexState & WRITE_EMIT_DRAIN) === WRITE_EMIT_DRAIN) {\n        stream.emit(\"drain\");\n      }\n    }\n    this.updateCallback();\n  }\n  function afterRead(err) {\n    if (err) this.stream.destroy(err);\n    this.stream._duplexState &= READ_NOT_ACTIVE;\n    if (this.readAhead === false && (this.stream._duplexState & READ_RESUMED) === 0) this.stream._duplexState &= READ_NO_READ_AHEAD;\n    this.updateCallback();\n  }\n  function updateReadNT() {\n    if ((this.stream._duplexState & READ_UPDATING) === 0) {\n      this.stream._duplexState &= READ_NOT_NEXT_TICK;\n      this.update();\n    }\n  }\n  function updateWriteNT() {\n    if ((this.stream._duplexState & WRITE_UPDATING) === 0) {\n      this.stream._duplexState &= WRITE_NOT_NEXT_TICK;\n      this.update();\n    }\n  }\n  function tickDrains(drains) {\n    for (let i = 0; i < drains.length; i++) {\n      if (--drains[i].writes === 0) {\n        drains.shift().resolve(true);\n        i--;\n      }\n    }\n  }\n  function afterOpen(err) {\n    const stream = this.stream;\n    if (err) stream.destroy(err);\n    if ((stream._duplexState & DESTROYING) === 0) {\n      if ((stream._duplexState & READ_PRIMARY_STATUS) === 0) stream._duplexState |= READ_PRIMARY;\n      if ((stream._duplexState & WRITE_PRIMARY_STATUS) === 0) stream._duplexState |= WRITE_PRIMARY;\n      stream.emit(\"open\");\n    }\n    stream._duplexState &= NOT_ACTIVE;\n    if (stream._writableState !== null) {\n      stream._writableState.updateCallback();\n    }\n    if (stream._readableState !== null) {\n      stream._readableState.updateCallback();\n    }\n  }\n  function afterTransform(err, data) {\n    if (data !== void 0 && data !== null) this.push(data);\n    this._writableState.afterWrite(err);\n  }\n  function newListener(name) {\n    if (this._readableState !== null) {\n      if (name === \"data\") {\n        this._duplexState |= READ_EMIT_DATA | READ_RESUMED_READ_AHEAD;\n        this._readableState.updateNextTick();\n      }\n      if (name === \"readable\") {\n        this._duplexState |= READ_EMIT_READABLE;\n        this._readableState.updateNextTick();\n      }\n    }\n    if (this._writableState !== null) {\n      if (name === \"drain\") {\n        this._duplexState |= WRITE_EMIT_DRAIN;\n        this._writableState.updateNextTick();\n      }\n    }\n  }\n  class Stream extends EventEmitter2 {\n    constructor(opts) {\n      super();\n      this._duplexState = 0;\n      this._readableState = null;\n      this._writableState = null;\n      if (opts) {\n        if (opts.open) this._open = opts.open;\n        if (opts.destroy) this._destroy = opts.destroy;\n        if (opts.predestroy) this._predestroy = opts.predestroy;\n        if (opts.signal) {\n          opts.signal.addEventListener(\"abort\", abort.bind(this));\n        }\n      }\n      this.on(\"newListener\", newListener);\n    }\n    _open(cb) {\n      cb(null);\n    }\n    _destroy(cb) {\n      cb(null);\n    }\n    _predestroy() {\n    }\n    get readable() {\n      return this._readableState !== null ? true : void 0;\n    }\n    get writable() {\n      return this._writableState !== null ? true : void 0;\n    }\n    get destroyed() {\n      return (this._duplexState & DESTROYED) !== 0;\n    }\n    get destroying() {\n      return (this._duplexState & DESTROY_STATUS) !== 0;\n    }\n    destroy(err) {\n      if ((this._duplexState & DESTROY_STATUS) === 0) {\n        if (!err) err = STREAM_DESTROYED;\n        this._duplexState = (this._duplexState | DESTROYING) & NON_PRIMARY;\n        if (this._readableState !== null) {\n          this._readableState.highWaterMark = 0;\n          this._readableState.error = err;\n        }\n        if (this._writableState !== null) {\n          this._writableState.highWaterMark = 0;\n          this._writableState.error = err;\n        }\n        this._duplexState |= PREDESTROYING;\n        this._predestroy();\n        this._duplexState &= NOT_PREDESTROYING;\n        if (this._readableState !== null) this._readableState.updateNextTick();\n        if (this._writableState !== null) this._writableState.updateNextTick();\n      }\n    }\n  }\n  class Readable extends Stream {\n    constructor(opts) {\n      super(opts);\n      this._duplexState |= OPENING | WRITE_DONE | READ_READ_AHEAD;\n      this._readableState = new ReadableState(this, opts);\n      if (opts) {\n        if (this._readableState.readAhead === false) this._duplexState &= READ_NO_READ_AHEAD;\n        if (opts.read) this._read = opts.read;\n        if (opts.eagerOpen) this._readableState.updateNextTick();\n        if (opts.encoding) this.setEncoding(opts.encoding);\n      }\n    }\n    setEncoding(encoding) {\n      const dec = new TextDecoder2(encoding);\n      const map = this._readableState.map || echo;\n      this._readableState.map = mapOrSkip;\n      return this;\n      function mapOrSkip(data) {\n        const next = dec.push(data);\n        return next === \"\" && (data.byteLength !== 0 || dec.remaining > 0) ? null : map(next);\n      }\n    }\n    _read(cb) {\n      cb(null);\n    }\n    pipe(dest, cb) {\n      this._readableState.updateNextTick();\n      this._readableState.pipe(dest, cb);\n      return dest;\n    }\n    read() {\n      this._readableState.updateNextTick();\n      return this._readableState.read();\n    }\n    push(data) {\n      this._readableState.updateNextTickIfOpen();\n      return this._readableState.push(data);\n    }\n    unshift(data) {\n      this._readableState.updateNextTickIfOpen();\n      return this._readableState.unshift(data);\n    }\n    resume() {\n      this._duplexState |= READ_RESUMED_READ_AHEAD;\n      this._readableState.updateNextTick();\n      return this;\n    }\n    pause() {\n      this._duplexState &= this._readableState.readAhead === false ? READ_PAUSED_NO_READ_AHEAD : READ_PAUSED;\n      return this;\n    }\n    static _fromAsyncIterator(ite, opts) {\n      let destroy;\n      const rs = new Readable({\n        ...opts,\n        read(cb) {\n          ite.next().then(push2).then(cb.bind(null, null)).catch(cb);\n        },\n        predestroy() {\n          destroy = ite.return();\n        },\n        destroy(cb) {\n          if (!destroy) return cb(null);\n          destroy.then(cb.bind(null, null)).catch(cb);\n        }\n      });\n      return rs;\n      function push2(data) {\n        if (data.done) rs.push(null);\n        else rs.push(data.value);\n      }\n    }\n    static from(data, opts) {\n      if (isReadStreamx(data)) return data;\n      if (data[asyncIterator]) return this._fromAsyncIterator(data[asyncIterator](), opts);\n      if (!Array.isArray(data)) data = data === void 0 ? [] : [data];\n      let i = 0;\n      return new Readable({\n        ...opts,\n        read(cb) {\n          this.push(i === data.length ? null : data[i++]);\n          cb(null);\n        }\n      });\n    }\n    static isBackpressured(rs) {\n      return (rs._duplexState & READ_BACKPRESSURE_STATUS) !== 0 || rs._readableState.buffered >= rs._readableState.highWaterMark;\n    }\n    static isPaused(rs) {\n      return (rs._duplexState & READ_RESUMED) === 0;\n    }\n    [asyncIterator]() {\n      const stream = this;\n      let error = null;\n      let promiseResolve = null;\n      let promiseReject = null;\n      this.on(\"error\", (err) => {\n        error = err;\n      });\n      this.on(\"readable\", onreadable);\n      this.on(\"close\", onclose);\n      return {\n        [asyncIterator]() {\n          return this;\n        },\n        next() {\n          return new Promise(function(resolve, reject) {\n            promiseResolve = resolve;\n            promiseReject = reject;\n            const data = stream.read();\n            if (data !== null) ondata(data);\n            else if ((stream._duplexState & DESTROYED) !== 0) ondata(null);\n          });\n        },\n        return() {\n          return destroy(null);\n        },\n        throw(err) {\n          return destroy(err);\n        }\n      };\n      function onreadable() {\n        if (promiseResolve !== null) ondata(stream.read());\n      }\n      function onclose() {\n        if (promiseResolve !== null) ondata(null);\n      }\n      function ondata(data) {\n        if (promiseReject === null) return;\n        if (error) promiseReject(error);\n        else if (data === null && (stream._duplexState & READ_DONE) === 0) promiseReject(STREAM_DESTROYED);\n        else promiseResolve({ value: data, done: data === null });\n        promiseReject = promiseResolve = null;\n      }\n      function destroy(err) {\n        stream.destroy(err);\n        return new Promise((resolve, reject) => {\n          if (stream._duplexState & DESTROYED) return resolve({ value: void 0, done: true });\n          stream.once(\"close\", function() {\n            if (err) reject(err);\n            else resolve({ value: void 0, done: true });\n          });\n        });\n      }\n    }\n  }\n  class Writable extends Stream {\n    constructor(opts) {\n      super(opts);\n      this._duplexState |= OPENING | READ_DONE;\n      this._writableState = new WritableState(this, opts);\n      if (opts) {\n        if (opts.writev) this._writev = opts.writev;\n        if (opts.write) this._write = opts.write;\n        if (opts.final) this._final = opts.final;\n        if (opts.eagerOpen) this._writableState.updateNextTick();\n      }\n    }\n    cork() {\n      this._duplexState |= WRITE_CORKED;\n    }\n    uncork() {\n      this._duplexState &= WRITE_NOT_CORKED;\n      this._writableState.updateNextTick();\n    }\n    _writev(batch, cb) {\n      cb(null);\n    }\n    _write(data, cb) {\n      this._writableState.autoBatch(data, cb);\n    }\n    _final(cb) {\n      cb(null);\n    }\n    static isBackpressured(ws) {\n      return (ws._duplexState & WRITE_BACKPRESSURE_STATUS) !== 0;\n    }\n    static drained(ws) {\n      if (ws.destroyed) return Promise.resolve(false);\n      const state = ws._writableState;\n      const pending = isWritev(ws) ? Math.min(1, state.queue.length) : state.queue.length;\n      const writes = pending + (ws._duplexState & WRITE_WRITING ? 1 : 0);\n      if (writes === 0) return Promise.resolve(true);\n      if (state.drains === null) state.drains = [];\n      return new Promise((resolve) => {\n        state.drains.push({ writes, resolve });\n      });\n    }\n    write(data) {\n      this._writableState.updateNextTick();\n      return this._writableState.push(data);\n    }\n    end(data) {\n      this._writableState.updateNextTick();\n      this._writableState.end(data);\n      return this;\n    }\n  }\n  class Duplex extends Readable {\n    // and Writable\n    constructor(opts) {\n      super(opts);\n      this._duplexState = OPENING | this._duplexState & READ_READ_AHEAD;\n      this._writableState = new WritableState(this, opts);\n      if (opts) {\n        if (opts.writev) this._writev = opts.writev;\n        if (opts.write) this._write = opts.write;\n        if (opts.final) this._final = opts.final;\n      }\n    }\n    cork() {\n      this._duplexState |= WRITE_CORKED;\n    }\n    uncork() {\n      this._duplexState &= WRITE_NOT_CORKED;\n      this._writableState.updateNextTick();\n    }\n    _writev(batch, cb) {\n      cb(null);\n    }\n    _write(data, cb) {\n      this._writableState.autoBatch(data, cb);\n    }\n    _final(cb) {\n      cb(null);\n    }\n    write(data) {\n      this._writableState.updateNextTick();\n      return this._writableState.push(data);\n    }\n    end(data) {\n      this._writableState.updateNextTick();\n      this._writableState.end(data);\n      return this;\n    }\n  }\n  class Transform extends Duplex {\n    constructor(opts) {\n      super(opts);\n      this._transformState = new TransformState(this);\n      if (opts) {\n        if (opts.transform) this._transform = opts.transform;\n        if (opts.flush) this._flush = opts.flush;\n      }\n    }\n    _write(data, cb) {\n      if (this._readableState.buffered >= this._readableState.highWaterMark) {\n        this._transformState.data = data;\n      } else {\n        this._transform(data, this._transformState.afterTransform);\n      }\n    }\n    _read(cb) {\n      if (this._transformState.data !== null) {\n        const data = this._transformState.data;\n        this._transformState.data = null;\n        cb(null);\n        this._transform(data, this._transformState.afterTransform);\n      } else {\n        cb(null);\n      }\n    }\n    destroy(err) {\n      super.destroy(err);\n      if (this._transformState.data !== null) {\n        this._transformState.data = null;\n        this._transformState.afterTransform();\n      }\n    }\n    _transform(data, cb) {\n      cb(null, data);\n    }\n    _flush(cb) {\n      cb(null);\n    }\n    _final(cb) {\n      this._transformState.afterFinal = cb;\n      this._flush(transformAfterFlush.bind(this));\n    }\n  }\n  class PassThrough extends Transform {\n  }\n  function transformAfterFlush(err, data) {\n    const cb = this._transformState.afterFinal;\n    if (err) return cb(err);\n    if (data !== null && data !== void 0) this.push(data);\n    this.push(null);\n    cb(null);\n  }\n  function pipelinePromise(...streams) {\n    return new Promise((resolve, reject) => {\n      return pipeline(...streams, (err) => {\n        if (err) return reject(err);\n        resolve();\n      });\n    });\n  }\n  function pipeline(stream, ...streams) {\n    const all = Array.isArray(stream) ? [...stream, ...streams] : [stream, ...streams];\n    const done = all.length && typeof all[all.length - 1] === \"function\" ? all.pop() : null;\n    if (all.length < 2) throw new Error(\"Pipeline requires at least 2 streams\");\n    let src = all[0];\n    let dest = null;\n    let error = null;\n    for (let i = 1; i < all.length; i++) {\n      dest = all[i];\n      if (isStreamx(src)) {\n        src.pipe(dest, onerror);\n      } else {\n        errorHandle(src, true, i > 1, onerror);\n        src.pipe(dest);\n      }\n      src = dest;\n    }\n    if (done) {\n      let fin = false;\n      const autoDestroy = isStreamx(dest) || !!(dest._writableState && dest._writableState.autoDestroy);\n      dest.on(\"error\", (err) => {\n        if (error === null) error = err;\n      });\n      dest.on(\"finish\", () => {\n        fin = true;\n        if (!autoDestroy) done(error);\n      });\n      if (autoDestroy) {\n        dest.on(\"close\", () => done(error || (fin ? null : PREMATURE_CLOSE)));\n      }\n    }\n    return dest;\n    function errorHandle(s, rd, wr, onerror2) {\n      s.on(\"error\", onerror2);\n      s.on(\"close\", onclose);\n      function onclose() {\n        if (s._readableState && !s._readableState.ended) return onerror2(PREMATURE_CLOSE);\n        if (wr && s._writableState && !s._writableState.ended) return onerror2(PREMATURE_CLOSE);\n      }\n    }\n    function onerror(err) {\n      if (!err || error) return;\n      error = err;\n      for (const s of all) {\n        s.destroy(err);\n      }\n    }\n  }\n  function echo(s) {\n    return s;\n  }\n  function isStream(stream) {\n    return !!stream._readableState || !!stream._writableState;\n  }\n  function isStreamx(stream) {\n    return typeof stream._duplexState === \"number\" && isStream(stream);\n  }\n  function isEnded(stream) {\n    return !!stream._readableState && stream._readableState.ended;\n  }\n  function isFinished(stream) {\n    return !!stream._writableState && stream._writableState.ended;\n  }\n  function getStreamError(stream, opts = {}) {\n    const err = stream._readableState && stream._readableState.error || stream._writableState && stream._writableState.error;\n    return !opts.all && err === STREAM_DESTROYED ? null : err;\n  }\n  function isReadStreamx(stream) {\n    return isStreamx(stream) && stream.readable;\n  }\n  function isDisturbed(stream) {\n    return (stream._duplexState & OPENING) !== OPENING || (stream._duplexState & ACTIVE_OR_TICKING) !== 0;\n  }\n  function isTypedArray(data) {\n    return typeof data === \"object\" && data !== null && typeof data.byteLength === \"number\";\n  }\n  function defaultByteLength(data) {\n    return isTypedArray(data) ? data.byteLength : 1024;\n  }\n  function noop22() {\n  }\n  function abort() {\n    this.destroy(new Error(\"Stream aborted.\"));\n  }\n  function isWritev(s) {\n    return s._writev !== Writable.prototype._writev && s._writev !== Duplex.prototype._writev;\n  }\n  streamx = {\n    pipeline,\n    pipelinePromise,\n    isStream,\n    isStreamx,\n    isEnded,\n    isFinished,\n    isDisturbed,\n    getStreamError,\n    Stream,\n    Writable,\n    Readable,\n    Duplex,\n    Transform,\n    // Export PassThrough for compatibility with Node.js core's stream module\n    PassThrough\n  };\n  return streamx;\n}\nvar streamxExports = requireStreamx();\nvar errCode$1;\nvar hasRequiredErrCode;\nfunction requireErrCode() {\n  if (hasRequiredErrCode) return errCode$1;\n  hasRequiredErrCode = 1;\n  function assign(obj, props) {\n    for (const key in props) {\n      Object.defineProperty(obj, key, {\n        value: props[key],\n        enumerable: true,\n        configurable: true\n      });\n    }\n    return obj;\n  }\n  function createError(err, code2, props) {\n    if (!err || typeof err === \"string\") {\n      throw new TypeError(\"Please pass an Error to err-code\");\n    }\n    if (!props) {\n      props = {};\n    }\n    if (typeof code2 === \"object\") {\n      props = code2;\n      code2 = \"\";\n    }\n    if (code2) {\n      props.code = code2;\n    }\n    try {\n      return assign(err, props);\n    } catch (_) {\n      props.message = err.message;\n      props.stack = err.stack;\n      const ErrClass = function() {\n      };\n      ErrClass.prototype = Object.create(Object.getPrototypeOf(err));\n      const output = assign(new ErrClass(), props);\n      return output;\n    }\n  }\n  errCode$1 = createError;\n  return errCode$1;\n}\nvar errCodeExports = requireErrCode();\nconst errCode = /* @__PURE__ */ getDefaultExportFromCjs(errCodeExports);\n/* Common package for dealing with hex/string/uint8 conversions (and sha1 hashing)\n*\n* @author   Jimmy Wärting <jimmy@warting.se> (https://jimmy.warting.se/opensource)\n* @license  MIT\n*/\nconst alphabet = \"0123456789abcdef\";\nconst encodeLookup = [];\nconst decodeLookup = [];\nfor (let i = 0; i < 256; i++) {\n  encodeLookup[i] = alphabet[i >> 4 & 15] + alphabet[i & 15];\n  if (i < 16) {\n    if (i < 10) {\n      decodeLookup[48 + i] = i;\n    } else {\n      decodeLookup[97 - 10 + i] = i;\n    }\n  }\n}\nconst arr2hex = (data) => {\n  const length = data.length;\n  let string = \"\";\n  let i = 0;\n  while (i < length) {\n    string += encodeLookup[data[i++]];\n  }\n  return string;\n};\nconst hex2arr = (str) => {\n  const sizeof = str.length >> 1;\n  const length = sizeof << 1;\n  const array = new Uint8Array(sizeof);\n  let n = 0;\n  let i = 0;\n  while (i < length) {\n    array[n++] = decodeLookup[str.charCodeAt(i++)] << 4 | decodeLookup[str.charCodeAt(i++)];\n  }\n  return array;\n};\nvar chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nvar lookup$1 = typeof Uint8Array === \"undefined\" ? [] : new Uint8Array(256);\nfor (var i$1 = 0; i$1 < chars.length; i$1++) {\n  lookup$1[chars.charCodeAt(i$1)] = i$1;\n}\nconst decoder = new TextDecoder();\nconst arr2text = (data, enc) => {\n  return decoder.decode(data);\n};\nconst encoder = new TextEncoder();\nconst text2arr = (str) => encoder.encode(str);\nconst bin2hex = (str) => {\n  let res = \"\";\n  let c;\n  let i = 0;\n  const len = str.length;\n  while (i < len) {\n    c = str.charCodeAt(i++);\n    res += alphabet[c >> 4] + alphabet[c & 15];\n  }\n  return res;\n};\nconst MAX_ARGUMENTS_LENGTH = 65536;\nconst hex2bin = (hex) => {\n  const points = hex2arr(hex);\n  if (points.length <= MAX_ARGUMENTS_LENGTH) return String.fromCharCode(...points);\n  let res = \"\";\n  let i = 0;\n  while (i < points.length) {\n    res += String.fromCharCode(...points.subarray(i, i += MAX_ARGUMENTS_LENGTH));\n  }\n  return res;\n};\nconst scope = typeof window !== \"undefined\" ? window : self;\nconst crypto$1 = scope.crypto || scope.msCrypto || {};\ncrypto$1.subtle || crypto$1.webkitSubtle;\nconst randomBytes = (size) => {\n  const view2 = new Uint8Array(size);\n  return crypto$1.getRandomValues(view2);\n};\n/*! simple-peer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nconst Debug = debug$3(\"simple-peer\");\nconst MAX_BUFFERED_AMOUNT$1 = 64 * 1024;\nconst ICECOMPLETE_TIMEOUT = 5 * 1e3;\nconst CHANNEL_CLOSING_TIMEOUT = 5 * 1e3;\nfunction filterTrickle(sdp) {\n  return sdp.replace(/a=ice-options:trickle\\s\\n/g, \"\");\n}\nfunction warn(message) {\n  console.warn(message);\n}\nlet Peer$1 = class Peer extends streamxExports.Duplex {\n  constructor(opts) {\n    opts = Object.assign({\n      allowHalfOpen: false\n    }, opts);\n    super(opts);\n    __publicField2(this, \"_pc\");\n    this.__objectMode = !!opts.objectMode;\n    this._id = arr2hex(randomBytes(4)).slice(0, 7);\n    this._debug(\"new peer %o\", opts);\n    this.channelName = opts.initiator ? opts.channelName || arr2hex(randomBytes(20)) : null;\n    this.initiator = opts.initiator || false;\n    this.channelConfig = opts.channelConfig || Peer.channelConfig;\n    this.channelNegotiated = this.channelConfig.negotiated;\n    this.config = Object.assign({}, Peer.config, opts.config);\n    this.offerOptions = opts.offerOptions || {};\n    this.answerOptions = opts.answerOptions || {};\n    this.sdpTransform = opts.sdpTransform || ((sdp) => sdp);\n    this.trickle = opts.trickle !== void 0 ? opts.trickle : true;\n    this.allowHalfTrickle = opts.allowHalfTrickle !== void 0 ? opts.allowHalfTrickle : false;\n    this.iceCompleteTimeout = opts.iceCompleteTimeout || ICECOMPLETE_TIMEOUT;\n    this._destroying = false;\n    this._connected = false;\n    this.remoteAddress = void 0;\n    this.remoteFamily = void 0;\n    this.remotePort = void 0;\n    this.localAddress = void 0;\n    this.localFamily = void 0;\n    this.localPort = void 0;\n    if (!RTCPeerConnection) {\n      if (typeof window === \"undefined\") {\n        throw errCode(new Error(\"No WebRTC support: Specify `opts.wrtc` option in this environment\"), \"ERR_WEBRTC_SUPPORT\");\n      } else {\n        throw errCode(new Error(\"No WebRTC support: Not a supported browser\"), \"ERR_WEBRTC_SUPPORT\");\n      }\n    }\n    this._pcReady = false;\n    this._channelReady = false;\n    this._iceComplete = false;\n    this._iceCompleteTimer = null;\n    this._channel = null;\n    this._pendingCandidates = [];\n    this._isNegotiating = false;\n    this._firstNegotiation = true;\n    this._batchedNegotiation = false;\n    this._queuedNegotiation = false;\n    this._sendersAwaitingStable = [];\n    this._closingInterval = null;\n    this._remoteTracks = [];\n    this._remoteStreams = [];\n    this._chunk = null;\n    this._cb = null;\n    this._interval = null;\n    try {\n      this._pc = new RTCPeerConnection(this.config);\n    } catch (err) {\n      this.__destroy(errCode(err, \"ERR_PC_CONSTRUCTOR\"));\n      return;\n    }\n    this._isReactNativeWebrtc = typeof this._pc._peerConnectionId === \"number\";\n    this._pc.oniceconnectionstatechange = () => {\n      this._onIceStateChange();\n    };\n    this._pc.onicegatheringstatechange = () => {\n      this._onIceStateChange();\n    };\n    this._pc.onconnectionstatechange = () => {\n      this._onConnectionStateChange();\n    };\n    this._pc.onsignalingstatechange = () => {\n      this._onSignalingStateChange();\n    };\n    this._pc.onicecandidate = (event) => {\n      this._onIceCandidate(event);\n    };\n    if (typeof this._pc.peerIdentity === \"object\") {\n      this._pc.peerIdentity.catch((err) => {\n        this.__destroy(errCode(err, \"ERR_PC_PEER_IDENTITY\"));\n      });\n    }\n    if (this.initiator || this.channelNegotiated) {\n      this._setupData({\n        channel: this._pc.createDataChannel(this.channelName, this.channelConfig)\n      });\n    } else {\n      this._pc.ondatachannel = (event) => {\n        this._setupData(event);\n      };\n    }\n    this._debug(\"initial negotiation\");\n    this._needsNegotiation();\n    this._onFinishBound = () => {\n      this._onFinish();\n    };\n    this.once(\"finish\", this._onFinishBound);\n  }\n  get bufferSize() {\n    return this._channel && this._channel.bufferedAmount || 0;\n  }\n  // HACK: it's possible channel.readyState is \"closing\" before peer.destroy() fires\n  // https://bugs.chromium.org/p/chromium/issues/detail?id=882743\n  get connected() {\n    return this._connected && this._channel.readyState === \"open\";\n  }\n  address() {\n    return { port: this.localPort, family: this.localFamily, address: this.localAddress };\n  }\n  signal(data) {\n    if (this._destroying) return;\n    if (this.destroyed) throw errCode(new Error(\"cannot signal after peer is destroyed\"), \"ERR_DESTROYED\");\n    if (typeof data === \"string\") {\n      try {\n        data = JSON.parse(data);\n      } catch (err) {\n        data = {};\n      }\n    }\n    this._debug(\"signal()\");\n    if (data.renegotiate && this.initiator) {\n      this._debug(\"got request to renegotiate\");\n      this._needsNegotiation();\n    }\n    if (data.transceiverRequest && this.initiator) {\n      this._debug(\"got request for transceiver\");\n      this.addTransceiver(data.transceiverRequest.kind, data.transceiverRequest.init);\n    }\n    if (data.candidate) {\n      if (this._pc.remoteDescription && this._pc.remoteDescription.type) {\n        this._addIceCandidate(data.candidate);\n      } else {\n        this._pendingCandidates.push(data.candidate);\n      }\n    }\n    if (data.sdp) {\n      this._pc.setRemoteDescription(new RTCSessionDescription(data)).then(() => {\n        if (this.destroyed) return;\n        this._pendingCandidates.forEach((candidate) => {\n          this._addIceCandidate(candidate);\n        });\n        this._pendingCandidates = [];\n        if (this._pc.remoteDescription.type === \"offer\") this._createAnswer();\n      }).catch((err) => {\n        this.__destroy(errCode(err, \"ERR_SET_REMOTE_DESCRIPTION\"));\n      });\n    }\n    if (!data.sdp && !data.candidate && !data.renegotiate && !data.transceiverRequest) {\n      this.__destroy(errCode(new Error(\"signal() called with invalid signal data\"), \"ERR_SIGNALING\"));\n    }\n  }\n  _addIceCandidate(candidate) {\n    const iceCandidateObj = new RTCIceCandidate(candidate);\n    this._pc.addIceCandidate(iceCandidateObj).catch((err) => {\n      if (!iceCandidateObj.address || iceCandidateObj.address.endsWith(\".local\")) {\n        warn(\"Ignoring unsupported ICE candidate.\");\n      } else {\n        this.__destroy(errCode(err, \"ERR_ADD_ICE_CANDIDATE\"));\n      }\n    });\n  }\n  /**\n   * Send text/binary data to the remote peer.\n   * @param {ArrayBufferView|ArrayBuffer|Uint8Array|string|Blob} chunk\n   */\n  send(chunk) {\n    if (this._destroying) return;\n    if (this.destroyed) throw errCode(new Error(\"cannot send after peer is destroyed\"), \"ERR_DESTROYED\");\n    this._channel.send(chunk);\n  }\n  _needsNegotiation() {\n    this._debug(\"_needsNegotiation\");\n    if (this._batchedNegotiation) return;\n    this._batchedNegotiation = true;\n    queueMicrotask(() => {\n      this._batchedNegotiation = false;\n      if (this.initiator || !this._firstNegotiation) {\n        this._debug(\"starting batched negotiation\");\n        this.negotiate();\n      } else {\n        this._debug(\"non-initiator initial negotiation request discarded\");\n      }\n      this._firstNegotiation = false;\n    });\n  }\n  negotiate() {\n    if (this._destroying) return;\n    if (this.destroyed) throw errCode(new Error(\"cannot negotiate after peer is destroyed\"), \"ERR_DESTROYED\");\n    if (this.initiator) {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true;\n        this._debug(\"already negotiating, queueing\");\n      } else {\n        this._debug(\"start negotiation\");\n        setTimeout(() => {\n          this._createOffer();\n        }, 0);\n      }\n    } else {\n      if (this._isNegotiating) {\n        this._queuedNegotiation = true;\n        this._debug(\"already negotiating, queueing\");\n      } else {\n        this._debug(\"requesting negotiation from initiator\");\n        this.emit(\"signal\", {\n          // request initiator to renegotiate\n          type: \"renegotiate\",\n          renegotiate: true\n        });\n      }\n    }\n    this._isNegotiating = true;\n  }\n  _final(cb) {\n    if (!this._readableState.ended) this.push(null);\n    cb(null);\n  }\n  __destroy(err) {\n    this.end();\n    this._destroy(() => {\n    }, err);\n  }\n  _destroy(cb, err) {\n    if (this.destroyed || this._destroying) return;\n    this._destroying = true;\n    this._debug(\"destroying (error: %s)\", err && (err.message || err));\n    setTimeout(() => {\n      this._connected = false;\n      this._pcReady = false;\n      this._channelReady = false;\n      this._remoteTracks = null;\n      this._remoteStreams = null;\n      this._senderMap = null;\n      clearInterval(this._closingInterval);\n      this._closingInterval = null;\n      clearInterval(this._interval);\n      this._interval = null;\n      this._chunk = null;\n      this._cb = null;\n      if (this._onFinishBound) this.removeListener(\"finish\", this._onFinishBound);\n      this._onFinishBound = null;\n      if (this._channel) {\n        try {\n          this._channel.close();\n        } catch (err2) {\n        }\n        this._channel.onmessage = null;\n        this._channel.onopen = null;\n        this._channel.onclose = null;\n        this._channel.onerror = null;\n      }\n      if (this._pc) {\n        try {\n          this._pc.close();\n        } catch (err2) {\n        }\n        this._pc.oniceconnectionstatechange = null;\n        this._pc.onicegatheringstatechange = null;\n        this._pc.onsignalingstatechange = null;\n        this._pc.onicecandidate = null;\n        this._pc.ontrack = null;\n        this._pc.ondatachannel = null;\n      }\n      this._pc = null;\n      this._channel = null;\n      if (err) this.emit(\"error\", err);\n      cb();\n    }, 0);\n  }\n  _setupData(event) {\n    if (!event.channel) {\n      return this.__destroy(errCode(new Error(\"Data channel event is missing `channel` property\"), \"ERR_DATA_CHANNEL\"));\n    }\n    this._channel = event.channel;\n    this._channel.binaryType = \"arraybuffer\";\n    if (typeof this._channel.bufferedAmountLowThreshold === \"number\") {\n      this._channel.bufferedAmountLowThreshold = MAX_BUFFERED_AMOUNT$1;\n    }\n    this.channelName = this._channel.label;\n    this._channel.onmessage = (event2) => {\n      this._onChannelMessage(event2);\n    };\n    this._channel.onbufferedamountlow = () => {\n      this._onChannelBufferedAmountLow();\n    };\n    this._channel.onopen = () => {\n      this._onChannelOpen();\n    };\n    this._channel.onclose = () => {\n      this._onChannelClose();\n    };\n    this._channel.onerror = (event2) => {\n      const err = event2.error instanceof Error ? event2.error : new Error(`Datachannel error: ${event2.message} ${event2.filename}:${event2.lineno}:${event2.colno}`);\n      this.__destroy(errCode(err, \"ERR_DATA_CHANNEL\"));\n    };\n    let isClosing = false;\n    this._closingInterval = setInterval(() => {\n      if (this._channel && this._channel.readyState === \"closing\") {\n        if (isClosing) this._onChannelClose();\n        isClosing = true;\n      } else {\n        isClosing = false;\n      }\n    }, CHANNEL_CLOSING_TIMEOUT);\n  }\n  _write(chunk, cb) {\n    if (this.destroyed) return cb(errCode(new Error(\"cannot write after peer is destroyed\"), \"ERR_DATA_CHANNEL\"));\n    if (this._connected) {\n      try {\n        this.send(chunk);\n      } catch (err) {\n        return this.__destroy(errCode(err, \"ERR_DATA_CHANNEL\"));\n      }\n      if (this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT$1) {\n        this._debug(\"start backpressure: bufferedAmount %d\", this._channel.bufferedAmount);\n        this._cb = cb;\n      } else {\n        cb(null);\n      }\n    } else {\n      this._debug(\"write before connect\");\n      this._chunk = chunk;\n      this._cb = cb;\n    }\n  }\n  // When stream finishes writing, close socket. Half open connections are not\n  // supported.\n  _onFinish() {\n    if (this.destroyed) return;\n    const destroySoon = () => {\n      setTimeout(() => this.__destroy(), 1e3);\n    };\n    if (this._connected) {\n      destroySoon();\n    } else {\n      this.once(\"connect\", destroySoon);\n    }\n  }\n  _startIceCompleteTimeout() {\n    if (this.destroyed) return;\n    if (this._iceCompleteTimer) return;\n    this._debug(\"started iceComplete timeout\");\n    this._iceCompleteTimer = setTimeout(() => {\n      if (!this._iceComplete) {\n        this._iceComplete = true;\n        this._debug(\"iceComplete timeout completed\");\n        this.emit(\"iceTimeout\");\n        this.emit(\"_iceComplete\");\n      }\n    }, this.iceCompleteTimeout);\n  }\n  _createOffer() {\n    if (this.destroyed) return;\n    this._pc.createOffer(this.offerOptions).then((offer) => {\n      if (this.destroyed) return;\n      if (!this.trickle && !this.allowHalfTrickle) offer.sdp = filterTrickle(offer.sdp);\n      offer.sdp = this.sdpTransform(offer.sdp);\n      const sendOffer = () => {\n        if (this.destroyed) return;\n        const signal = this._pc.localDescription || offer;\n        this._debug(\"signal\");\n        this.emit(\"signal\", {\n          type: signal.type,\n          sdp: signal.sdp\n        });\n      };\n      const onSuccess = () => {\n        this._debug(\"createOffer success\");\n        if (this.destroyed) return;\n        if (this.trickle || this._iceComplete) sendOffer();\n        else this.once(\"_iceComplete\", sendOffer);\n      };\n      const onError = (err) => {\n        this.__destroy(errCode(err, \"ERR_SET_LOCAL_DESCRIPTION\"));\n      };\n      this._pc.setLocalDescription(offer).then(onSuccess).catch(onError);\n    }).catch((err) => {\n      this.__destroy(errCode(err, \"ERR_CREATE_OFFER\"));\n    });\n  }\n  _createAnswer() {\n    if (this.destroyed) return;\n    this._pc.createAnswer(this.answerOptions).then((answer) => {\n      if (this.destroyed) return;\n      if (!this.trickle && !this.allowHalfTrickle) answer.sdp = filterTrickle(answer.sdp);\n      answer.sdp = this.sdpTransform(answer.sdp);\n      const sendAnswer = () => {\n        var _a;\n        if (this.destroyed) return;\n        const signal = this._pc.localDescription || answer;\n        this._debug(\"signal\");\n        this.emit(\"signal\", {\n          type: signal.type,\n          sdp: signal.sdp\n        });\n        if (!this.initiator) (_a = this._requestMissingTransceivers) == null ? void 0 : _a.call(this);\n      };\n      const onSuccess = () => {\n        if (this.destroyed) return;\n        if (this.trickle || this._iceComplete) sendAnswer();\n        else this.once(\"_iceComplete\", sendAnswer);\n      };\n      const onError = (err) => {\n        this.__destroy(errCode(err, \"ERR_SET_LOCAL_DESCRIPTION\"));\n      };\n      this._pc.setLocalDescription(answer).then(onSuccess).catch(onError);\n    }).catch((err) => {\n      this.__destroy(errCode(err, \"ERR_CREATE_ANSWER\"));\n    });\n  }\n  _onConnectionStateChange() {\n    if (this.destroyed || this._destroying) return;\n    if (this._pc.connectionState === \"failed\") {\n      this.__destroy(errCode(new Error(\"Connection failed.\"), \"ERR_CONNECTION_FAILURE\"));\n    }\n  }\n  _onIceStateChange() {\n    if (this.destroyed) return;\n    const iceConnectionState = this._pc.iceConnectionState;\n    const iceGatheringState = this._pc.iceGatheringState;\n    this._debug(\n      \"iceStateChange (connection: %s) (gathering: %s)\",\n      iceConnectionState,\n      iceGatheringState\n    );\n    this.emit(\"iceStateChange\", iceConnectionState, iceGatheringState);\n    if (iceConnectionState === \"connected\" || iceConnectionState === \"completed\") {\n      this._pcReady = true;\n      this._maybeReady();\n    }\n    if (iceConnectionState === \"failed\") {\n      this.__destroy(errCode(new Error(\"Ice connection failed.\"), \"ERR_ICE_CONNECTION_FAILURE\"));\n    }\n    if (iceConnectionState === \"closed\") {\n      this.__destroy(errCode(new Error(\"Ice connection closed.\"), \"ERR_ICE_CONNECTION_CLOSED\"));\n    }\n  }\n  getStats(cb) {\n    const flattenValues = (report) => {\n      if (Object.prototype.toString.call(report.values) === \"[object Array]\") {\n        report.values.forEach((value) => {\n          Object.assign(report, value);\n        });\n      }\n      return report;\n    };\n    if (this._pc.getStats.length === 0 || this._isReactNativeWebrtc) {\n      this._pc.getStats().then((res) => {\n        const reports = [];\n        res.forEach((report) => {\n          reports.push(flattenValues(report));\n        });\n        cb(null, reports);\n      }, (err) => cb(err));\n    } else if (this._pc.getStats.length > 0) {\n      this._pc.getStats((res) => {\n        if (this.destroyed) return;\n        const reports = [];\n        res.result().forEach((result) => {\n          const report = {};\n          result.names().forEach((name) => {\n            report[name] = result.stat(name);\n          });\n          report.id = result.id;\n          report.type = result.type;\n          report.timestamp = result.timestamp;\n          reports.push(flattenValues(report));\n        });\n        cb(null, reports);\n      }, (err) => cb(err));\n    } else {\n      cb(null, []);\n    }\n  }\n  _maybeReady() {\n    this._debug(\"maybeReady pc %s channel %s\", this._pcReady, this._channelReady);\n    if (this._connected || this._connecting || !this._pcReady || !this._channelReady) return;\n    this._connecting = true;\n    const findCandidatePair = () => {\n      if (this.destroyed || this._destroying) return;\n      this.getStats((err, items) => {\n        if (this.destroyed || this._destroying) return;\n        if (err) items = [];\n        const remoteCandidates = {};\n        const localCandidates = {};\n        const candidatePairs = {};\n        let foundSelectedCandidatePair = false;\n        items.forEach((item) => {\n          if (item.type === \"remotecandidate\" || item.type === \"remote-candidate\") {\n            remoteCandidates[item.id] = item;\n          }\n          if (item.type === \"localcandidate\" || item.type === \"local-candidate\") {\n            localCandidates[item.id] = item;\n          }\n          if (item.type === \"candidatepair\" || item.type === \"candidate-pair\") {\n            candidatePairs[item.id] = item;\n          }\n        });\n        const setSelectedCandidatePair = (selectedCandidatePair) => {\n          foundSelectedCandidatePair = true;\n          let local = localCandidates[selectedCandidatePair.localCandidateId];\n          if (local && (local.ip || local.address)) {\n            this.localAddress = local.ip || local.address;\n            this.localPort = Number(local.port);\n          } else if (local && local.ipAddress) {\n            this.localAddress = local.ipAddress;\n            this.localPort = Number(local.portNumber);\n          } else if (typeof selectedCandidatePair.googLocalAddress === \"string\") {\n            local = selectedCandidatePair.googLocalAddress.split(\":\");\n            this.localAddress = local[0];\n            this.localPort = Number(local[1]);\n          }\n          if (this.localAddress) {\n            this.localFamily = this.localAddress.includes(\":\") ? \"IPv6\" : \"IPv4\";\n          }\n          let remote = remoteCandidates[selectedCandidatePair.remoteCandidateId];\n          if (remote && (remote.ip || remote.address)) {\n            this.remoteAddress = remote.ip || remote.address;\n            this.remotePort = Number(remote.port);\n          } else if (remote && remote.ipAddress) {\n            this.remoteAddress = remote.ipAddress;\n            this.remotePort = Number(remote.portNumber);\n          } else if (typeof selectedCandidatePair.googRemoteAddress === \"string\") {\n            remote = selectedCandidatePair.googRemoteAddress.split(\":\");\n            this.remoteAddress = remote[0];\n            this.remotePort = Number(remote[1]);\n          }\n          if (this.remoteAddress) {\n            this.remoteFamily = this.remoteAddress.includes(\":\") ? \"IPv6\" : \"IPv4\";\n          }\n          this._debug(\n            \"connect local: %s:%s remote: %s:%s\",\n            this.localAddress,\n            this.localPort,\n            this.remoteAddress,\n            this.remotePort\n          );\n        };\n        items.forEach((item) => {\n          if (item.type === \"transport\" && item.selectedCandidatePairId) {\n            setSelectedCandidatePair(candidatePairs[item.selectedCandidatePairId]);\n          }\n          if (item.type === \"googCandidatePair\" && item.googActiveConnection === \"true\" || (item.type === \"candidatepair\" || item.type === \"candidate-pair\") && item.selected) {\n            setSelectedCandidatePair(item);\n          }\n        });\n        if (!foundSelectedCandidatePair && (!Object.keys(candidatePairs).length || Object.keys(localCandidates).length)) {\n          setTimeout(findCandidatePair, 100);\n          return;\n        } else {\n          this._connecting = false;\n          this._connected = true;\n        }\n        if (this._chunk) {\n          try {\n            this.send(this._chunk);\n          } catch (err2) {\n            return this.__destroy(errCode(err2, \"ERR_DATA_CHANNEL\"));\n          }\n          this._chunk = null;\n          this._debug('sent chunk from \"write before connect\"');\n          const cb = this._cb;\n          this._cb = null;\n          cb(null);\n        }\n        if (typeof this._channel.bufferedAmountLowThreshold !== \"number\") {\n          this._interval = setInterval(() => this._onInterval(), 150);\n          if (this._interval.unref) this._interval.unref();\n        }\n        this._debug(\"connect\");\n        this.emit(\"connect\");\n      });\n    };\n    findCandidatePair();\n  }\n  _onInterval() {\n    if (!this._cb || !this._channel || this._channel.bufferedAmount > MAX_BUFFERED_AMOUNT$1) {\n      return;\n    }\n    this._onChannelBufferedAmountLow();\n  }\n  _onSignalingStateChange() {\n    if (this.destroyed) return;\n    if (this._pc.signalingState === \"stable\") {\n      this._isNegotiating = false;\n      this._debug(\"flushing sender queue\", this._sendersAwaitingStable);\n      this._sendersAwaitingStable.forEach((sender) => {\n        this._pc.removeTrack(sender);\n        this._queuedNegotiation = true;\n      });\n      this._sendersAwaitingStable = [];\n      if (this._queuedNegotiation) {\n        this._debug(\"flushing negotiation queue\");\n        this._queuedNegotiation = false;\n        this._needsNegotiation();\n      } else {\n        this._debug(\"negotiated\");\n        this.emit(\"negotiated\");\n      }\n    }\n    this._debug(\"signalingStateChange %s\", this._pc.signalingState);\n    this.emit(\"signalingStateChange\", this._pc.signalingState);\n  }\n  _onIceCandidate(event) {\n    if (this.destroyed) return;\n    if (event.candidate && this.trickle) {\n      this.emit(\"signal\", {\n        type: \"candidate\",\n        candidate: {\n          candidate: event.candidate.candidate,\n          sdpMLineIndex: event.candidate.sdpMLineIndex,\n          sdpMid: event.candidate.sdpMid\n        }\n      });\n    } else if (!event.candidate && !this._iceComplete) {\n      this._iceComplete = true;\n      this.emit(\"_iceComplete\");\n    }\n    if (event.candidate) {\n      this._startIceCompleteTimeout();\n    }\n  }\n  _onChannelMessage(event) {\n    if (this.destroyed) return;\n    let data = event.data;\n    if (data instanceof ArrayBuffer) {\n      data = new Uint8Array(data);\n    } else if (this.__objectMode === false) {\n      data = text2arr(data);\n    }\n    this.push(data);\n  }\n  _onChannelBufferedAmountLow() {\n    if (this.destroyed || !this._cb) return;\n    this._debug(\"ending backpressure: bufferedAmount %d\", this._channel.bufferedAmount);\n    const cb = this._cb;\n    this._cb = null;\n    cb(null);\n  }\n  _onChannelOpen() {\n    if (this._connected || this.destroyed) return;\n    this._debug(\"on channel open\");\n    this._channelReady = true;\n    this._maybeReady();\n  }\n  _onChannelClose() {\n    if (this.destroyed) return;\n    this._debug(\"on channel close\");\n    this.__destroy();\n  }\n  _debug() {\n    const args = [].slice.call(arguments);\n    args[0] = \"[\" + this._id + \"] \" + args[0];\n    Debug.apply(null, args);\n  }\n};\nPeer$1.WEBRTC_SUPPORT = !!RTCPeerConnection;\nPeer$1.config = {\n  iceServers: [\n    {\n      urls: [\n        \"stun:stun.l.google.com:19302\",\n        \"stun:global.stun.twilio.com:3478\"\n      ]\n    }\n  ],\n  sdpSemantics: \"unified-plan\"\n};\nPeer$1.channelConfig = {};\nvar queueMicrotaskExports = requireQueueMicrotask();\nconst queueMicrotask$1 = /* @__PURE__ */ getDefaultExportFromCjs(queueMicrotaskExports);\nconst UDPTracker = {};\nconst common$1 = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  default: UDPTracker\n}, Symbol.toStringTag, { value: \"Module\" }));\nconst DEFAULT_ANNOUNCE_PEERS = 50;\nconst MAX_ANNOUNCE_PEERS = 82;\nconst parseUrl = (str) => {\n  const url = new URL(str.replace(/^udp:/, \"http:\"));\n  if (str.match(/^udp:/)) {\n    Object.defineProperties(url, {\n      href: { value: url.href.replace(/^http/, \"udp\") },\n      protocol: { value: url.protocol.replace(/^http/, \"udp\") },\n      origin: { value: url.origin.replace(/^http/, \"udp\") }\n    });\n  }\n  return url;\n};\nconst common = {\n  DEFAULT_ANNOUNCE_PEERS,\n  MAX_ANNOUNCE_PEERS,\n  parseUrl,\n  ...common$1\n};\n/*! simple-websocket. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */\nconst debug$2 = debug$3(\"simple-websocket\");\nconst _WebSocket = typeof UDPTracker !== \"function\" ? WebSocket : UDPTracker;\nconst MAX_BUFFERED_AMOUNT = 64 * 1024;\nclass Socket extends streamxExports.Duplex {\n  constructor(opts = {}) {\n    if (typeof opts === \"string\") {\n      opts = { url: opts };\n    }\n    opts = Object.assign({\n      allowHalfOpen: false\n    }, opts);\n    super(opts);\n    this.__objectMode = !!opts.objectMode;\n    if (opts.objectMode != null) delete opts.objectMode;\n    if (opts.url == null && opts.socket == null) {\n      throw new Error(\"Missing required `url` or `socket` option\");\n    }\n    if (opts.url != null && opts.socket != null) {\n      throw new Error(\"Must specify either `url` or `socket` option, not both\");\n    }\n    this._id = arr2hex(randomBytes(4)).slice(0, 7);\n    this._debug(\"new websocket: %o\", opts);\n    this.connected = false;\n    this._chunk = null;\n    this._cb = null;\n    this._interval = null;\n    if (opts.socket) {\n      this.url = opts.socket.url;\n      this._ws = opts.socket;\n      this.connected = opts.socket.readyState === _WebSocket.OPEN;\n    } else {\n      this.url = opts.url;\n      try {\n        if (typeof UDPTracker === \"function\") {\n          this._ws = new _WebSocket(opts.url, {\n            ...opts,\n            encoding: void 0\n            // encoding option breaks ws internals\n          });\n        } else {\n          this._ws = new _WebSocket(opts.url);\n        }\n      } catch (err) {\n        queueMicrotask$1(() => this.destroy(err));\n        return;\n      }\n    }\n    this._ws.binaryType = \"arraybuffer\";\n    if (opts.socket && this.connected) {\n      queueMicrotask$1(() => this._handleOpen());\n    } else {\n      this._ws.onopen = () => this._handleOpen();\n    }\n    this._ws.onmessage = (event) => this._handleMessage(event);\n    this._ws.onclose = () => this._handleClose();\n    this._ws.onerror = (err) => this._handleError(err);\n    this._handleFinishBound = () => this._handleFinish();\n    this.once(\"finish\", this._handleFinishBound);\n  }\n  /**\n   * Send text/binary data to the WebSocket server.\n   * @param {TypedArrayView|ArrayBuffer|Uint8Array|string|Blob|Object} chunk\n   */\n  send(chunk) {\n    this._ws.send(chunk);\n  }\n  _final(cb) {\n    if (!this._readableState.ended) this.push(null);\n    cb(null);\n  }\n  _destroy(cb) {\n    if (this.destroyed) return;\n    if (!this._writableState.ended) this.end();\n    this.connected = false;\n    clearInterval(this._interval);\n    this._interval = null;\n    this._chunk = null;\n    this._cb = null;\n    if (this._handleFinishBound) {\n      this.removeListener(\"finish\", this._handleFinishBound);\n    }\n    this._handleFinishBound = null;\n    if (this._ws) {\n      const ws = this._ws;\n      const onClose = () => {\n        ws.onclose = null;\n      };\n      if (ws.readyState === _WebSocket.CLOSED) {\n        onClose();\n      } else {\n        try {\n          ws.onclose = onClose;\n          ws.close();\n        } catch (err) {\n          onClose();\n        }\n      }\n      ws.onopen = null;\n      ws.onmessage = null;\n      ws.onerror = () => {\n      };\n    }\n    this._ws = null;\n    cb();\n  }\n  _write(chunk, cb) {\n    if (this.destroyed) return cb(new Error(\"cannot write after socket is destroyed\"));\n    if (this.connected) {\n      try {\n        this.send(chunk);\n      } catch (err) {\n        return this.destroy(err);\n      }\n      if (typeof UDPTracker !== \"function\" && this._ws.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n        this._debug(\"start backpressure: bufferedAmount %d\", this._ws.bufferedAmount);\n        this._cb = cb;\n      } else {\n        cb(null);\n      }\n    } else {\n      this._debug(\"write before connect\");\n      this._chunk = chunk;\n      this._cb = cb;\n    }\n  }\n  _handleOpen() {\n    if (this.connected || this.destroyed) return;\n    this.connected = true;\n    if (this._chunk) {\n      try {\n        this.send(this._chunk);\n      } catch (err) {\n        return this.destroy(err);\n      }\n      this._chunk = null;\n      this._debug('sent chunk from \"write before connect\"');\n      const cb = this._cb;\n      this._cb = null;\n      cb(null);\n    }\n    if (typeof UDPTracker !== \"function\") {\n      this._interval = setInterval(() => this._onInterval(), 150);\n      if (this._interval.unref) this._interval.unref();\n    }\n    this._debug(\"connect\");\n    this.emit(\"connect\");\n  }\n  _handleMessage(event) {\n    if (this.destroyed) return;\n    let data = event.data;\n    if (data instanceof ArrayBuffer) data = new Uint8Array(data);\n    if (this.__objectMode === false) data = text2arr(data);\n    this.push(data);\n  }\n  _handleClose() {\n    if (this.destroyed) return;\n    this._debug(\"on close\");\n    this.destroy();\n  }\n  _handleError(_) {\n    this.destroy(new Error(`Error connecting to ${this.url}`));\n  }\n  // When stream finishes writing, close socket. Half open connections are not\n  // supported.\n  _handleFinish() {\n    if (this.destroyed) return;\n    const destroySoon = () => {\n      setTimeout(() => this.destroy(), 1e3);\n    };\n    if (this.connected) {\n      destroySoon();\n    } else {\n      this.once(\"connect\", destroySoon);\n    }\n  }\n  _onInterval() {\n    if (!this._cb || !this._ws || this._ws.bufferedAmount > MAX_BUFFERED_AMOUNT) {\n      return;\n    }\n    this._debug(\"ending backpressure: bufferedAmount %d\", this._ws.bufferedAmount);\n    const cb = this._cb;\n    this._cb = null;\n    cb(null);\n  }\n  _debug() {\n    const args = [].slice.call(arguments);\n    args[0] = \"[\" + this._id + \"] \" + args[0];\n    debug$2.apply(null, args);\n  }\n}\nSocket.WEBSOCKET_SUPPORT = !!_WebSocket;\nclass Tracker extends EventEmitter {\n  constructor(client, announceUrl) {\n    super();\n    this.client = client;\n    this.announceUrl = announceUrl;\n    this.interval = null;\n    this.destroyed = false;\n  }\n  setInterval(intervalMs) {\n    if (intervalMs == null) intervalMs = this.DEFAULT_ANNOUNCE_INTERVAL;\n    clearInterval(this.interval);\n    if (intervalMs) {\n      this.interval = setInterval(() => {\n        this.announce(this.client._defaultAnnounceOpts());\n      }, intervalMs);\n      if (this.interval.unref) this.interval.unref();\n    }\n  }\n}\nconst debug$1 = debug$3(\"bittorrent-tracker:websocket-tracker\");\nconst socketPool = {};\nconst RECONNECT_MINIMUM = 10 * 1e3;\nconst RECONNECT_MAXIMUM = 60 * 60 * 1e3;\nconst RECONNECT_VARIANCE = 5 * 60 * 1e3;\nconst OFFER_TIMEOUT = 50 * 1e3;\nclass WebSocketTracker extends Tracker {\n  constructor(client, announceUrl) {\n    super(client, announceUrl);\n    debug$1(\"new websocket tracker %s\", announceUrl);\n    this.peers = {};\n    this.socket = null;\n    this.reconnecting = false;\n    this.retries = 0;\n    this.reconnectTimer = null;\n    this.expectingResponse = false;\n    this._openSocket();\n  }\n  announce(opts) {\n    if (this.destroyed || this.reconnecting) return;\n    if (!this.socket.connected) {\n      this.socket.once(\"connect\", () => {\n        this.announce(opts);\n      });\n      return;\n    }\n    const params = Object.assign({}, opts, {\n      action: \"announce\",\n      info_hash: this.client._infoHashBinary,\n      peer_id: this.client._peerIdBinary\n    });\n    if (this._trackerId) params.trackerid = this._trackerId;\n    if (opts.event === \"stopped\" || opts.event === \"completed\") {\n      this._send(params);\n    } else {\n      const numwant = Math.min(opts.numwant, 5);\n      this._generateOffers(numwant, (offers) => {\n        params.numwant = numwant;\n        params.offers = offers;\n        this._send(params);\n      });\n    }\n  }\n  scrape(opts) {\n    if (this.destroyed || this.reconnecting) return;\n    if (!this.socket.connected) {\n      this.socket.once(\"connect\", () => {\n        this.scrape(opts);\n      });\n      return;\n    }\n    const infoHashes = Array.isArray(opts.infoHash) && opts.infoHash.length > 0 ? opts.infoHash.map((infoHash) => hex2bin(infoHash)) : opts.infoHash && hex2bin(opts.infoHash) || this.client._infoHashBinary;\n    const params = {\n      action: \"scrape\",\n      info_hash: infoHashes\n    };\n    this._send(params);\n  }\n  destroy(cb = noop2) {\n    if (this.destroyed) return cb(null);\n    this.destroyed = true;\n    clearInterval(this.interval);\n    clearTimeout(this.reconnectTimer);\n    for (const peerId in this.peers) {\n      const peer = this.peers[peerId];\n      clearTimeout(peer.trackerTimeout);\n      peer.destroy();\n    }\n    this.peers = null;\n    if (this.socket) {\n      this.socket.removeListener(\"connect\", this._onSocketConnectBound);\n      this.socket.removeListener(\"data\", this._onSocketDataBound);\n      this.socket.removeListener(\"close\", this._onSocketCloseBound);\n      this.socket.removeListener(\"error\", this._onSocketErrorBound);\n      this.socket = null;\n    }\n    this._onSocketConnectBound = null;\n    this._onSocketErrorBound = null;\n    this._onSocketDataBound = null;\n    this._onSocketCloseBound = null;\n    if (socketPool[this.announceUrl]) {\n      socketPool[this.announceUrl].consumers -= 1;\n    }\n    if (socketPool[this.announceUrl].consumers > 0) return cb();\n    let socket = socketPool[this.announceUrl];\n    delete socketPool[this.announceUrl];\n    socket.on(\"error\", noop2);\n    socket.once(\"close\", cb);\n    let timeout;\n    if (!this.expectingResponse) return destroyCleanup();\n    timeout = setTimeout(destroyCleanup, common.DESTROY_TIMEOUT);\n    socket.once(\"data\", destroyCleanup);\n    function destroyCleanup() {\n      if (timeout) {\n        clearTimeout(timeout);\n        timeout = null;\n      }\n      socket.removeListener(\"data\", destroyCleanup);\n      socket.destroy();\n      socket = null;\n    }\n  }\n  _openSocket() {\n    this.destroyed = false;\n    if (!this.peers) this.peers = {};\n    this._onSocketConnectBound = () => {\n      this._onSocketConnect();\n    };\n    this._onSocketErrorBound = (err) => {\n      this._onSocketError(err);\n    };\n    this._onSocketDataBound = (data) => {\n      this._onSocketData(data);\n    };\n    this._onSocketCloseBound = () => {\n      this._onSocketClose();\n    };\n    this.socket = socketPool[this.announceUrl];\n    if (this.socket) {\n      socketPool[this.announceUrl].consumers += 1;\n      if (this.socket.connected) {\n        this._onSocketConnectBound();\n      }\n    } else {\n      const parsedUrl = new URL(this.announceUrl);\n      let agent;\n      if (this.client._proxyOpts) {\n        agent = parsedUrl.protocol === \"wss:\" ? this.client._proxyOpts.httpsAgent : this.client._proxyOpts.httpAgent;\n        if (!agent && this.client._proxyOpts.socksProxy) {\n          agent = this.client._proxyOpts.socksProxy;\n        }\n      }\n      this.socket = socketPool[this.announceUrl] = new Socket({ url: this.announceUrl, agent });\n      this.socket.consumers = 1;\n      this.socket.once(\"connect\", this._onSocketConnectBound);\n    }\n    this.socket.on(\"data\", this._onSocketDataBound);\n    this.socket.once(\"close\", this._onSocketCloseBound);\n    this.socket.once(\"error\", this._onSocketErrorBound);\n  }\n  _onSocketConnect() {\n    if (this.destroyed) return;\n    if (this.reconnecting) {\n      this.reconnecting = false;\n      this.retries = 0;\n      this.announce(this.client._defaultAnnounceOpts());\n    }\n  }\n  _onSocketData(data) {\n    if (this.destroyed) return;\n    this.expectingResponse = false;\n    try {\n      data = JSON.parse(arr2text(data));\n    } catch (err) {\n      this.client.emit(\"warning\", new Error(\"Invalid tracker response\"));\n      return;\n    }\n    if (data.action === \"announce\") {\n      this._onAnnounceResponse(data);\n    } else if (data.action === \"scrape\") {\n      this._onScrapeResponse(data);\n    } else {\n      this._onSocketError(new Error(`invalid action in WS response: ${data.action}`));\n    }\n  }\n  _onAnnounceResponse(data) {\n    if (data.info_hash !== this.client._infoHashBinary) {\n      debug$1(\n        \"ignoring websocket data from %s for %s (looking for %s: reused socket)\",\n        this.announceUrl,\n        bin2hex(data.info_hash),\n        this.client.infoHash\n      );\n      return;\n    }\n    if (data.peer_id && data.peer_id === this.client._peerIdBinary) {\n      return;\n    }\n    debug$1(\n      \"received %s from %s for %s\",\n      JSON.stringify(data),\n      this.announceUrl,\n      this.client.infoHash\n    );\n    const failure = data[\"failure reason\"];\n    if (failure) return this.client.emit(\"warning\", new Error(failure));\n    const warning = data[\"warning message\"];\n    if (warning) this.client.emit(\"warning\", new Error(warning));\n    const interval = data.interval || data[\"min interval\"];\n    if (interval) this.setInterval(interval * 1e3);\n    const trackerId = data[\"tracker id\"];\n    if (trackerId) {\n      this._trackerId = trackerId;\n    }\n    if (data.complete != null) {\n      const response = Object.assign({}, data, {\n        announce: this.announceUrl,\n        infoHash: bin2hex(data.info_hash)\n      });\n      this.client.emit(\"update\", response);\n    }\n    let peer;\n    if (data.offer && data.peer_id) {\n      debug$1(\"creating peer (from remote offer)\");\n      peer = this._createPeer();\n      peer.id = bin2hex(data.peer_id);\n      peer.once(\"signal\", (answer) => {\n        const params = {\n          action: \"announce\",\n          info_hash: this.client._infoHashBinary,\n          peer_id: this.client._peerIdBinary,\n          to_peer_id: data.peer_id,\n          answer,\n          offer_id: data.offer_id\n        };\n        if (this._trackerId) params.trackerid = this._trackerId;\n        this._send(params);\n      });\n      this.client.emit(\"peer\", peer);\n      peer.signal(data.offer);\n    }\n    if (data.answer && data.peer_id) {\n      const offerId = bin2hex(data.offer_id);\n      peer = this.peers[offerId];\n      if (peer) {\n        peer.id = bin2hex(data.peer_id);\n        this.client.emit(\"peer\", peer);\n        peer.signal(data.answer);\n        clearTimeout(peer.trackerTimeout);\n        peer.trackerTimeout = null;\n        delete this.peers[offerId];\n      } else {\n        debug$1(`got unexpected answer: ${JSON.stringify(data.answer)}`);\n      }\n    }\n  }\n  _onScrapeResponse(data) {\n    data = data.files || {};\n    const keys = Object.keys(data);\n    if (keys.length === 0) {\n      this.client.emit(\"warning\", new Error(\"invalid scrape response\"));\n      return;\n    }\n    keys.forEach((infoHash) => {\n      const response = Object.assign(data[infoHash], {\n        announce: this.announceUrl,\n        infoHash: bin2hex(infoHash)\n      });\n      this.client.emit(\"scrape\", response);\n    });\n  }\n  _onSocketClose() {\n    if (this.destroyed) return;\n    this.destroy();\n    this._startReconnectTimer();\n  }\n  _onSocketError(err) {\n    if (this.destroyed) return;\n    this.destroy();\n    this.client.emit(\"warning\", err);\n    this._startReconnectTimer();\n  }\n  _startReconnectTimer() {\n    const ms2 = Math.floor(Math.random() * RECONNECT_VARIANCE) + Math.min(Math.pow(2, this.retries) * RECONNECT_MINIMUM, RECONNECT_MAXIMUM);\n    this.reconnecting = true;\n    clearTimeout(this.reconnectTimer);\n    this.reconnectTimer = setTimeout(() => {\n      this.retries++;\n      this._openSocket();\n    }, ms2);\n    if (this.reconnectTimer.unref) this.reconnectTimer.unref();\n    debug$1(\"reconnecting socket in %s ms\", ms2);\n  }\n  _send(params) {\n    if (this.destroyed) return;\n    this.expectingResponse = true;\n    const message = JSON.stringify(params);\n    debug$1(\"send %s\", message);\n    this.socket.send(message);\n  }\n  _generateOffers(numwant, cb) {\n    const self2 = this;\n    const offers = [];\n    debug$1(\"generating %s offers\", numwant);\n    for (let i = 0; i < numwant; ++i) {\n      generateOffer();\n    }\n    checkDone();\n    function generateOffer() {\n      const offerId = arr2hex(randomBytes(20));\n      debug$1(\"creating peer (from _generateOffers)\");\n      const peer = self2.peers[offerId] = self2._createPeer({ initiator: true });\n      peer.once(\"signal\", (offer) => {\n        offers.push({\n          offer,\n          offer_id: hex2bin(offerId)\n        });\n        checkDone();\n      });\n      peer.trackerTimeout = setTimeout(() => {\n        debug$1(\"tracker timeout: destroying peer\");\n        peer.trackerTimeout = null;\n        delete self2.peers[offerId];\n        peer.destroy();\n      }, OFFER_TIMEOUT);\n      if (peer.trackerTimeout.unref) peer.trackerTimeout.unref();\n    }\n    function checkDone() {\n      if (offers.length === numwant) {\n        debug$1(\"generated %s offers\", numwant);\n        cb(offers);\n      }\n    }\n  }\n  _createPeer(opts) {\n    const self2 = this;\n    opts = Object.assign({\n      trickle: false,\n      config: self2.client._rtcConfig,\n      wrtc: self2.client._wrtc\n    }, opts);\n    const peer = new Peer$1(opts);\n    peer.once(\"error\", onError);\n    peer.once(\"connect\", onConnect);\n    return peer;\n    function onError(err) {\n      self2.client.emit(\"warning\", new Error(`Connection error: ${err.message}`));\n      peer.destroy();\n    }\n    function onConnect() {\n      peer.removeListener(\"error\", onError);\n      peer.removeListener(\"connect\", onConnect);\n    }\n  }\n}\nWebSocketTracker.prototype.DEFAULT_ANNOUNCE_INTERVAL = 30 * 1e3;\nWebSocketTracker._socketPool = socketPool;\nfunction noop2() {\n}\nconst debug = debug$3(\"bittorrent-tracker:client\");\nclass Client extends EventEmitter {\n  constructor(opts = {}) {\n    super();\n    if (!opts.peerId) throw new Error(\"Option `peerId` is required\");\n    if (!opts.infoHash) throw new Error(\"Option `infoHash` is required\");\n    if (!opts.announce) throw new Error(\"Option `announce` is required\");\n    if (!process$1.browser && !opts.port) throw new Error(\"Option `port` is required\");\n    this.peerId = typeof opts.peerId === \"string\" ? opts.peerId : arr2hex(opts.peerId);\n    this._peerIdBuffer = hex2arr(this.peerId);\n    this._peerIdBinary = hex2bin(this.peerId);\n    this.infoHash = typeof opts.infoHash === \"string\" ? opts.infoHash.toLowerCase() : arr2hex(opts.infoHash);\n    this._infoHashBuffer = hex2arr(this.infoHash);\n    this._infoHashBinary = hex2bin(this.infoHash);\n    debug(\"new client %s\", this.infoHash);\n    this.destroyed = false;\n    this._port = opts.port;\n    this._getAnnounceOpts = opts.getAnnounceOpts;\n    this._rtcConfig = opts.rtcConfig;\n    this._userAgent = opts.userAgent;\n    this._proxyOpts = opts.proxyOpts;\n    this._wrtc = typeof opts.wrtc === \"function\" ? opts.wrtc() : opts.wrtc;\n    let announce = typeof opts.announce === \"string\" ? [opts.announce] : opts.announce == null ? [] : opts.announce;\n    announce = announce.map((announceUrl) => {\n      if (ArrayBuffer.isView(announceUrl)) announceUrl = arr2text(announceUrl);\n      if (announceUrl[announceUrl.length - 1] === \"/\") {\n        announceUrl = announceUrl.substring(0, announceUrl.length - 1);\n      }\n      return announceUrl;\n    });\n    announce = Array.from(new Set(announce));\n    const webrtcSupport = this._wrtc !== false && (!!this._wrtc || Peer$1.WEBRTC_SUPPORT);\n    const nextTickWarn = (err) => {\n      queueMicrotask$1(() => {\n        this.emit(\"warning\", err);\n      });\n    };\n    this._trackers = announce.map((announceUrl) => {\n      let parsedUrl;\n      try {\n        parsedUrl = common.parseUrl(announceUrl);\n      } catch (err) {\n        nextTickWarn(new Error(`Invalid tracker URL: ${announceUrl}`));\n        return null;\n      }\n      const port = parsedUrl.port;\n      if (port < 0 || port > 65535) {\n        nextTickWarn(new Error(`Invalid tracker port: ${announceUrl}`));\n        return null;\n      }\n      const protocol = parsedUrl.protocol;\n      if ((protocol === \"http:\" || protocol === \"https:\") && typeof UDPTracker === \"function\") {\n        return new UDPTracker(this, announceUrl);\n      } else if (protocol === \"udp:\" && typeof UDPTracker === \"function\") {\n        return new UDPTracker(this, announceUrl);\n      } else if ((protocol === \"ws:\" || protocol === \"wss:\") && webrtcSupport) {\n        if (protocol === \"ws:\" && typeof window !== \"undefined\" && window.location.protocol === \"https:\") {\n          nextTickWarn(new Error(`Unsupported tracker protocol: ${announceUrl}`));\n          return null;\n        }\n        return new WebSocketTracker(this, announceUrl);\n      } else {\n        nextTickWarn(new Error(`Unsupported tracker protocol: ${announceUrl}`));\n        return null;\n      }\n    }).filter(Boolean);\n  }\n  /**\n   * Send a `start` announce to the trackers.\n   * @param {Object} opts\n   * @param {number=} opts.uploaded\n   * @param {number=} opts.downloaded\n   * @param {number=} opts.left (if not set, calculated automatically)\n   */\n  start(opts) {\n    opts = this._defaultAnnounceOpts(opts);\n    opts.event = \"started\";\n    debug(\"send `start` %o\", opts);\n    this._announce(opts);\n    this._trackers.forEach((tracker) => {\n      tracker.setInterval();\n    });\n  }\n  /**\n   * Send a `stop` announce to the trackers.\n   * @param {Object} opts\n   * @param {number=} opts.uploaded\n   * @param {number=} opts.downloaded\n   * @param {number=} opts.numwant\n   * @param {number=} opts.left (if not set, calculated automatically)\n   */\n  stop(opts) {\n    opts = this._defaultAnnounceOpts(opts);\n    opts.event = \"stopped\";\n    debug(\"send `stop` %o\", opts);\n    this._announce(opts);\n  }\n  /**\n   * Send a `complete` announce to the trackers.\n   * @param {Object} opts\n   * @param {number=} opts.uploaded\n   * @param {number=} opts.downloaded\n   * @param {number=} opts.numwant\n   * @param {number=} opts.left (if not set, calculated automatically)\n   */\n  complete(opts) {\n    if (!opts) opts = {};\n    opts = this._defaultAnnounceOpts(opts);\n    opts.event = \"completed\";\n    debug(\"send `complete` %o\", opts);\n    this._announce(opts);\n  }\n  /**\n   * Send a `update` announce to the trackers.\n   * @param {Object} opts\n   * @param {number=} opts.uploaded\n   * @param {number=} opts.downloaded\n   * @param {number=} opts.numwant\n   * @param {number=} opts.left (if not set, calculated automatically)\n   */\n  update(opts) {\n    opts = this._defaultAnnounceOpts(opts);\n    if (opts.event) delete opts.event;\n    debug(\"send `update` %o\", opts);\n    this._announce(opts);\n  }\n  _announce(opts) {\n    this._trackers.forEach((tracker) => {\n      tracker.announce(opts);\n    });\n  }\n  /**\n   * Send a scrape request to the trackers.\n   * @param {Object} opts\n   */\n  scrape(opts) {\n    debug(\"send `scrape`\");\n    if (!opts) opts = {};\n    this._trackers.forEach((tracker) => {\n      tracker.scrape(opts);\n    });\n  }\n  setInterval(intervalMs) {\n    debug(\"setInterval %d\", intervalMs);\n    this._trackers.forEach((tracker) => {\n      tracker.setInterval(intervalMs);\n    });\n  }\n  destroy(cb) {\n    if (this.destroyed) return;\n    this.destroyed = true;\n    debug(\"destroy\");\n    const tasks = this._trackers.map((tracker) => (cb2) => {\n      tracker.destroy(cb2);\n    });\n    parallel(tasks, cb);\n    this._trackers = [];\n    this._getAnnounceOpts = null;\n  }\n  _defaultAnnounceOpts(opts = {}) {\n    if (opts.numwant == null) opts.numwant = common.DEFAULT_ANNOUNCE_PEERS;\n    if (opts.uploaded == null) opts.uploaded = 0;\n    if (opts.downloaded == null) opts.downloaded = 0;\n    if (this._getAnnounceOpts) opts = Object.assign({}, opts, this._getAnnounceOpts());\n    return opts;\n  }\n}\nClient.scrape = (opts, cb) => {\n  cb = once(cb);\n  if (!opts.infoHash) throw new Error(\"Option `infoHash` is required\");\n  if (!opts.announce) throw new Error(\"Option `announce` is required\");\n  const clientOpts = Object.assign({}, opts, {\n    infoHash: Array.isArray(opts.infoHash) ? opts.infoHash[0] : opts.infoHash,\n    peerId: text2arr(\"01234567890123456789\"),\n    // dummy value\n    port: 6881\n    // dummy value\n  });\n  const client = new Client(clientOpts);\n  client.once(\"error\", cb);\n  client.once(\"warning\", cb);\n  let len = Array.isArray(opts.infoHash) ? opts.infoHash.length : 1;\n  const results = {};\n  client.on(\"scrape\", (data) => {\n    len -= 1;\n    results[data.infoHash] = data;\n    if (len === 0) {\n      client.destroy();\n      const keys = Object.keys(results);\n      if (keys.length === 1) {\n        cb(null, results[keys[0]]);\n      } else {\n        cb(null, results);\n      }\n    }\n  });\n  client.scrape({ infoHash: opts.infoHash });\n  return client;\n};\nvar md5$1 = { exports: {} };\nvar hasRequiredMd5;\nfunction requireMd5() {\n  if (hasRequiredMd5) return md5$1.exports;\n  hasRequiredMd5 = 1;\n  function FF(a, b, c, d, m, s, k) {\n    var n = a + (b & c | ~b & d) + (m >>> 0) + k;\n    return (n << s | n >>> 32 - s) + b;\n  }\n  function GG(a, b, c, d, m, s, k) {\n    var n = a + (b & d | c & ~d) + (m >>> 0) + k;\n    return (n << s | n >>> 32 - s) + b;\n  }\n  function HH(a, b, c, d, m, s, k) {\n    var n = a + (b ^ c ^ d) + (m >>> 0) + k;\n    return (n << s | n >>> 32 - s) + b;\n  }\n  function II(a, b, c, d, m, s, k) {\n    var n = a + (c ^ (b | ~d)) + (m >>> 0) + k;\n    return (n << s | n >>> 32 - s) + b;\n  }\n  function byteToHex(byte) {\n    return (256 + (byte & 255)).toString(16).substr(-2);\n  }\n  function bs(byte) {\n    return String.fromCharCode(byte & 255);\n  }\n  function wordToBytes(word) {\n    return bs(word) + bs(word >>> 8) + bs(word >>> 16) + bs(word >>> 24);\n  }\n  var utf8toBytes = function(utf8) {\n    return unescape(encodeURIComponent(utf8));\n  };\n  function bytesToWords(bytes2) {\n    var bytes_count = bytes2.length, bits_count = bytes_count << 3, words = new Uint32Array(bytes_count + 72 >>> 6 << 4);\n    for (var i = 0, n = bytes2.length; i < n; ++i)\n      words[i >>> 2] |= bytes2.charCodeAt(i) << ((i & 3) << 3);\n    words[bytes_count >> 2] |= 128 << (bits_count & 31);\n    words[words.length - 2] = bits_count;\n    return words;\n  }\n  var exports = md5$1.exports = function md52(utf8) {\n    return utf8toMD5(utf8).toHex();\n  };\n  var bytesToMD5 = exports.fromBytes = function(bytes2) {\n    var words = bytesToWords(bytes2), a = 1732584193, b = 4023233417, c = 2562383102, d = 271733878, S11 = 7, S12 = 12, S13 = 17, S14 = 22, S21 = 5, S22 = 9, S23 = 14, S24 = 20, S31 = 4, S32 = 11, S33 = 16, S34 = 23, S41 = 6, S42 = 10, S43 = 15, S44 = 21;\n    for (var i = 0, ws = words.length; i < ws; i += 16) {\n      var AA = a, BB = b, CC = c, DD = d;\n      a = FF(a, b, c, d, words[i + 0], S11, 3614090360);\n      d = FF(d, a, b, c, words[i + 1], S12, 3905402710);\n      c = FF(c, d, a, b, words[i + 2], S13, 606105819);\n      b = FF(b, c, d, a, words[i + 3], S14, 3250441966);\n      a = FF(a, b, c, d, words[i + 4], S11, 4118548399);\n      d = FF(d, a, b, c, words[i + 5], S12, 1200080426);\n      c = FF(c, d, a, b, words[i + 6], S13, 2821735955);\n      b = FF(b, c, d, a, words[i + 7], S14, 4249261313);\n      a = FF(a, b, c, d, words[i + 8], S11, 1770035416);\n      d = FF(d, a, b, c, words[i + 9], S12, 2336552879);\n      c = FF(c, d, a, b, words[i + 10], S13, 4294925233);\n      b = FF(b, c, d, a, words[i + 11], S14, 2304563134);\n      a = FF(a, b, c, d, words[i + 12], S11, 1804603682);\n      d = FF(d, a, b, c, words[i + 13], S12, 4254626195);\n      c = FF(c, d, a, b, words[i + 14], S13, 2792965006);\n      b = FF(b, c, d, a, words[i + 15], S14, 1236535329);\n      a = GG(a, b, c, d, words[i + 1], S21, 4129170786);\n      d = GG(d, a, b, c, words[i + 6], S22, 3225465664);\n      c = GG(c, d, a, b, words[i + 11], S23, 643717713);\n      b = GG(b, c, d, a, words[i + 0], S24, 3921069994);\n      a = GG(a, b, c, d, words[i + 5], S21, 3593408605);\n      d = GG(d, a, b, c, words[i + 10], S22, 38016083);\n      c = GG(c, d, a, b, words[i + 15], S23, 3634488961);\n      b = GG(b, c, d, a, words[i + 4], S24, 3889429448);\n      a = GG(a, b, c, d, words[i + 9], S21, 568446438);\n      d = GG(d, a, b, c, words[i + 14], S22, 3275163606);\n      c = GG(c, d, a, b, words[i + 3], S23, 4107603335);\n      b = GG(b, c, d, a, words[i + 8], S24, 1163531501);\n      a = GG(a, b, c, d, words[i + 13], S21, 2850285829);\n      d = GG(d, a, b, c, words[i + 2], S22, 4243563512);\n      c = GG(c, d, a, b, words[i + 7], S23, 1735328473);\n      b = GG(b, c, d, a, words[i + 12], S24, 2368359562);\n      a = HH(a, b, c, d, words[i + 5], S31, 4294588738);\n      d = HH(d, a, b, c, words[i + 8], S32, 2272392833);\n      c = HH(c, d, a, b, words[i + 11], S33, 1839030562);\n      b = HH(b, c, d, a, words[i + 14], S34, 4259657740);\n      a = HH(a, b, c, d, words[i + 1], S31, 2763975236);\n      d = HH(d, a, b, c, words[i + 4], S32, 1272893353);\n      c = HH(c, d, a, b, words[i + 7], S33, 4139469664);\n      b = HH(b, c, d, a, words[i + 10], S34, 3200236656);\n      a = HH(a, b, c, d, words[i + 13], S31, 681279174);\n      d = HH(d, a, b, c, words[i + 0], S32, 3936430074);\n      c = HH(c, d, a, b, words[i + 3], S33, 3572445317);\n      b = HH(b, c, d, a, words[i + 6], S34, 76029189);\n      a = HH(a, b, c, d, words[i + 9], S31, 3654602809);\n      d = HH(d, a, b, c, words[i + 12], S32, 3873151461);\n      c = HH(c, d, a, b, words[i + 15], S33, 530742520);\n      b = HH(b, c, d, a, words[i + 2], S34, 3299628645);\n      a = II(a, b, c, d, words[i + 0], S41, 4096336452);\n      d = II(d, a, b, c, words[i + 7], S42, 1126891415);\n      c = II(c, d, a, b, words[i + 14], S43, 2878612391);\n      b = II(b, c, d, a, words[i + 5], S44, 4237533241);\n      a = II(a, b, c, d, words[i + 12], S41, 1700485571);\n      d = II(d, a, b, c, words[i + 3], S42, 2399980690);\n      c = II(c, d, a, b, words[i + 10], S43, 4293915773);\n      b = II(b, c, d, a, words[i + 1], S44, 2240044497);\n      a = II(a, b, c, d, words[i + 8], S41, 1873313359);\n      d = II(d, a, b, c, words[i + 15], S42, 4264355552);\n      c = II(c, d, a, b, words[i + 6], S43, 2734768916);\n      b = II(b, c, d, a, words[i + 13], S44, 1309151649);\n      a = II(a, b, c, d, words[i + 4], S41, 4149444226);\n      d = II(d, a, b, c, words[i + 11], S42, 3174756917);\n      c = II(c, d, a, b, words[i + 2], S43, 718787259);\n      b = II(b, c, d, a, words[i + 9], S44, 3951481745);\n      a = a + AA >>> 0;\n      b = b + BB >>> 0;\n      c = c + CC >>> 0;\n      d = d + DD >>> 0;\n    }\n    var hash_bytes = new String(wordToBytes(a) + wordToBytes(b) + wordToBytes(c) + wordToBytes(d));\n    hash_bytes.toHex = function() {\n      var hex = \"\";\n      for (var i2 = 0, n = hash_bytes.length; i2 < n; ++i2)\n        hex += byteToHex(hash_bytes.charCodeAt(i2));\n      return hex;\n    };\n    return hash_bytes;\n  };\n  var utf8toMD5 = exports.fromUtf8 = function(utf8) {\n    return bytesToMD5(utf8toBytes(utf8));\n  };\n  var b64 = \"./0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz\";\n  function to64(u, n) {\n    for (var s = \"\"; --n >= 0; u >>>= 6)\n      s += b64.charAt(u & 63);\n    return s;\n  }\n  var MAX_KEY_LENGTH = 64, b64_map = [0, 6, 12, 1, 7, 13, 2, 8, 14, 3, 9, 15, 4, 10, 5, 11];\n  var gen_salt = exports.salt = function(n) {\n    var s = \"\";\n    if (!n)\n      n = 8;\n    do {\n      s += b64.charAt(64 * Math.random() >>> 0);\n    } while (--n);\n    return s;\n  };\n  exports.crypt = function(key, setting) {\n    if (key.length > MAX_KEY_LENGTH)\n      throw Error(\"too long key\");\n    if (!setting)\n      setting = \"$1$\" + gen_salt();\n    key = utf8toBytes(key);\n    var salt = utf8toBytes(setting.replace(/^\\$1\\$([^$]+)(?:\\$.*)?$/, \"$1\")), md = bytesToMD5(key + salt + key), s = key + \"$1$\" + salt;\n    for (var kl = key.length; kl > 16; kl -= 16)\n      s += md;\n    s += md.slice(0, kl);\n    for (var kl = key.length; kl; kl >>= 1)\n      s += kl & 1 ? \"\\0\" : key.charAt(0);\n    md = bytesToMD5(s);\n    for (var i = 0; i < 1e3; ++i)\n      md = bytesToMD5((i & 1 ? key : md) + (i % 3 ? salt : \"\") + (i % 7 ? key : \"\") + (i & 1 ? md : key));\n    var h = \"$1$\" + salt + \"$\";\n    for (var i = 0; i < 15; i += 3)\n      h += to64(\n        md.charCodeAt(b64_map[i + 0]) << 16 | md.charCodeAt(b64_map[i + 1]) << 8 | md.charCodeAt(b64_map[i + 2]),\n        4\n      );\n    return h + to64(md.charCodeAt(b64_map[15]), 2);\n  };\n  return md5$1.exports;\n}\nvar md5Exports = requireMd5();\nconst md5 = /* @__PURE__ */ getDefaultExportFromCjs(md5Exports);\nconst PACKAGE_VERSION = \"2.2.1\";\nconst TRACKER_CLIENT_VERSION_PREFIX = `-PM${formatVersion(PACKAGE_VERSION)}-`;\nconst HASH_SYMBOLS = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\";\nconst PEER_ID_LENGTH = 20;\nfunction getStreamHash(streamId) {\n  const binary15BytesHashString = md5.fromUtf8(streamId).slice(1);\n  const base64Hash20CharsString = btoa(binary15BytesHashString);\n  return base64Hash20CharsString;\n}\nfunction generatePeerId(trackerClientVersionPrefix) {\n  const trackerClientId = [trackerClientVersionPrefix];\n  const randomCharsCount = PEER_ID_LENGTH - trackerClientVersionPrefix.length;\n  for (let i = 0; i < randomCharsCount; i++) {\n    trackerClientId.push(\n      HASH_SYMBOLS[Math.floor(Math.random() * HASH_SYMBOLS.length)]\n    );\n  }\n  return trackerClientId.join(\"\");\n}\nfunction formatVersion(versionString) {\n  const splittedVersion = versionString.split(\".\");\n  return `${splittedVersion[0].padStart(2, \"0\")}${splittedVersion[1].padStart(2, \"0\")}`;\n}\nfunction getStreamString(stream) {\n  return `${stream.type}-${stream.index}`;\n}\nfunction getSegmentString(segment) {\n  const { externalId } = segment;\n  return `(${getStreamString(segment.stream)} | ${externalId})`;\n}\nfunction getControlledPromise() {\n  let resolve;\n  let reject;\n  const promise = new Promise((res, rej) => {\n    resolve = res;\n    reject = rej;\n  });\n  return {\n    promise,\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    resolve,\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    reject\n  };\n}\nfunction joinChunks(chunks, totalBytes) {\n  if (totalBytes === void 0) {\n    totalBytes = chunks.reduce((sum, chunk) => sum + chunk.byteLength, 0);\n  }\n  const buffer2 = new Uint8Array(totalBytes);\n  let offset = 0;\n  for (const chunk of chunks) {\n    buffer2.set(chunk, offset);\n    offset += chunk.byteLength;\n  }\n  return buffer2;\n}\nfunction getRandomItem(items) {\n  return items[Math.floor(Math.random() * items.length)];\n}\nfunction utf8ToUintArray(utf8String) {\n  const encoder2 = new TextEncoder();\n  const bytes2 = new Uint8Array(utf8String.length);\n  encoder2.encodeInto(utf8String, bytes2);\n  return bytes2;\n}\nfunction hexToUtf8(hexString) {\n  const bytes2 = new Uint8Array(hexString.length / 2);\n  for (let i = 0; i < hexString.length; i += 2) {\n    bytes2[i / 2] = parseInt(hexString.slice(i, i + 2), 16);\n  }\n  const decoder2 = new TextDecoder();\n  return decoder2.decode(bytes2);\n}\nfunction* arrayBackwards(arr) {\n  for (let i = arr.length - 1; i >= 0; i--) {\n    yield arr[i];\n  }\n}\nfunction isObject(item) {\n  return !!item && typeof item === \"object\" && !Array.isArray(item);\n}\nfunction isArray(item) {\n  return Array.isArray(item);\n}\nfunction filterUndefinedProps(obj) {\n  function filter(obj2) {\n    if (isObject(obj2)) {\n      const result = {};\n      Object.keys(obj2).forEach((key) => {\n        if (obj2[key] !== void 0) {\n          const value = filter(obj2[key]);\n          if (value !== void 0) {\n            result[key] = value;\n          }\n        }\n      });\n      return result;\n    } else {\n      return obj2;\n    }\n  }\n  return filter(obj);\n}\nfunction deepCopy(item) {\n  if (isArray(item)) {\n    return item.map((element) => deepCopy(element));\n  } else if (isObject(item)) {\n    const copy = {};\n    for (const key of Object.keys(item)) {\n      copy[key] = deepCopy(item[key]);\n    }\n    return copy;\n  } else {\n    return item;\n  }\n}\nfunction shuffleArray(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n  return array;\n}\nfunction overrideConfig(target, updates, defaults2 = {}) {\n  if (typeof target !== \"object\" || target === null || typeof updates !== \"object\" || updates === null) {\n    return target;\n  }\n  Object.keys(updates).forEach((key) => {\n    if (key === \"__proto__\" || key === \"constructor\" || key === \"prototype\") {\n      throw new Error(`Attempt to modify restricted property '${String(key)}'`);\n    }\n    const updateValue = updates[key];\n    const defaultValue = defaults2[key];\n    if (key in target) {\n      if (updateValue === void 0) {\n        target[key] = defaultValue === void 0 ? void 0 : defaultValue;\n      } else {\n        target[key] = updateValue;\n      }\n    }\n  });\n  return target;\n}\nfunction mergeAndFilterConfig(options) {\n  const { defaultConfig, baseConfig = {}, specificStreamConfig = {} } = options;\n  const mergedConfig = deepCopy({\n    ...defaultConfig,\n    ...baseConfig,\n    ...specificStreamConfig\n  });\n  const keysOfT = Object.keys(defaultConfig);\n  const filteredConfig = {};\n  keysOfT.forEach((key) => {\n    if (key in mergedConfig) {\n      filteredConfig[key] = mergedConfig[key];\n    }\n  });\n  return filteredConfig;\n}\nvar PeerCommandType$1 = /* @__PURE__ */ ((PeerCommandType2) => {\n  PeerCommandType2[PeerCommandType2[\"SegmentsAnnouncement\"] = 0] = \"SegmentsAnnouncement\";\n  PeerCommandType2[PeerCommandType2[\"SegmentRequest\"] = 1] = \"SegmentRequest\";\n  PeerCommandType2[PeerCommandType2[\"SegmentData\"] = 2] = \"SegmentData\";\n  PeerCommandType2[PeerCommandType2[\"SegmentDataSendingCompleted\"] = 3] = \"SegmentDataSendingCompleted\";\n  PeerCommandType2[PeerCommandType2[\"SegmentAbsent\"] = 4] = \"SegmentAbsent\";\n  PeerCommandType2[PeerCommandType2[\"CancelSegmentRequest\"] = 5] = \"CancelSegmentRequest\";\n  return PeerCommandType2;\n})(PeerCommandType$1 || {});\nvar SerializedItem = /* @__PURE__ */ ((SerializedItem2) => {\n  SerializedItem2[SerializedItem2[\"Min\"] = -1] = \"Min\";\n  SerializedItem2[SerializedItem2[\"Int\"] = 0] = \"Int\";\n  SerializedItem2[SerializedItem2[\"SimilarIntArray\"] = 1] = \"SimilarIntArray\";\n  SerializedItem2[SerializedItem2[\"String\"] = 2] = \"String\";\n  SerializedItem2[SerializedItem2[\"Max\"] = 3] = \"Max\";\n  return SerializedItem2;\n})(SerializedItem || {});\nfunction abs(num) {\n  return num < 0 ? -num : num;\n}\nfunction getRequiredBytesForInt(num) {\n  const binaryString = num.toString(2);\n  const necessaryBits = num < 0 ? binaryString.length : binaryString.length + 1;\n  return Math.ceil(necessaryBits / 8);\n}\nfunction intToBytes(num) {\n  const isNegative = num < 0;\n  const bytesAmountNumber = getRequiredBytesForInt(num);\n  const bytes2 = new Uint8Array(bytesAmountNumber);\n  const bytesAmount = BigInt(bytesAmountNumber);\n  num = abs(num);\n  for (let i = 0; i < bytesAmountNumber; i++) {\n    const shift = 8n * (bytesAmount - 1n - BigInt(i));\n    const byte = num >> shift & 0xffn;\n    bytes2[i] = Number(byte);\n  }\n  if (isNegative) bytes2[0] = bytes2[0] | 128;\n  return bytes2;\n}\nfunction bytesToInt(bytes2) {\n  const byteLength2 = BigInt(bytes2.length);\n  const getNumberPart = (byte, i) => {\n    const shift = 8n * (byteLength2 - 1n - BigInt(i));\n    return BigInt(byte) << shift;\n  };\n  let number = getNumberPart(bytes2[0] & 127, 0);\n  for (let i = 1; i < byteLength2; i++) {\n    number = getNumberPart(bytes2[i], i) | number;\n  }\n  if ((bytes2[0] & 128) >> 7 !== 0) number = -number;\n  return number;\n}\nfunction serializeInt(num) {\n  const numBytes = intToBytes(num);\n  const numberMetadata = 0 << 4 | numBytes.length;\n  return new Uint8Array([numberMetadata, ...numBytes]);\n}\nfunction deserializeInt(bytes2) {\n  const metadata = bytes2[0];\n  const code2 = metadata >> 4;\n  if (code2 !== 0) {\n    throw new Error(\n      \"Trying to deserialize integer with invalid serialized item code\"\n    );\n  }\n  const numberBytesLength = metadata & 15;\n  const start = 1;\n  const end = start + numberBytesLength;\n  return {\n    number: bytesToInt(bytes2.slice(start, end)),\n    byteLength: numberBytesLength + 1\n  };\n}\nfunction serializeSimilarIntArray(numbers) {\n  const commonPartNumbersMap = /* @__PURE__ */ new Map();\n  for (const number of numbers) {\n    const common2 = number & ~0xffn;\n    const diffByte = number & 0xffn;\n    const bytes2 = commonPartNumbersMap.get(common2) ?? new ResizableUint8Array();\n    if (!bytes2.length) commonPartNumbersMap.set(common2, bytes2);\n    bytes2.push(Number(diffByte));\n  }\n  const result = new ResizableUint8Array();\n  result.push([1 << 4, commonPartNumbersMap.size]);\n  for (const [commonPart, binaryArray] of commonPartNumbersMap) {\n    const { length } = binaryArray.getBytesChunks();\n    const commonPartWithLength = commonPart | BigInt(length) & 0xffn;\n    binaryArray.unshift(serializeInt(commonPartWithLength));\n    result.push(binaryArray.getBuffer());\n  }\n  return result.getBuffer();\n}\nfunction deserializeSimilarIntArray(bytes2) {\n  const [codeByte, commonPartArraysAmount] = bytes2;\n  const code2 = codeByte >> 4;\n  if (code2 !== 1) {\n    throw new Error(\n      \"Trying to deserialize similar int array with invalid serialized item code\"\n    );\n  }\n  let offset = 2;\n  const originalIntArr = [];\n  for (let i = 0; i < commonPartArraysAmount; i++) {\n    const { number: commonPartWithLength, byteLength: byteLength2 } = deserializeInt(\n      bytes2.slice(offset)\n    );\n    offset += byteLength2;\n    const arrayLength = commonPartWithLength & 0xffn;\n    const commonPart = commonPartWithLength & ~0xffn;\n    for (let j = 0; j < arrayLength; j++) {\n      const diffPart = BigInt(bytes2[offset]);\n      originalIntArr.push(commonPart | diffPart);\n      offset++;\n    }\n  }\n  return { numbers: originalIntArr, byteLength: offset };\n}\nfunction serializeString(string) {\n  const { length } = string;\n  const bytes2 = new ResizableUint8Array();\n  bytes2.push([\n    2 << 4 | length >> 8 & 15,\n    length & 255\n  ]);\n  bytes2.push(new TextEncoder().encode(string));\n  return bytes2.getBuffer();\n}\nfunction deserializeString(bytes2) {\n  const [codeByte, lengthByte] = bytes2;\n  const code2 = codeByte >> 4;\n  if (code2 !== 2) {\n    throw new Error(\n      \"Trying to deserialize bytes (sting) with invalid serialized item code.\"\n    );\n  }\n  const length = (codeByte & 15) << 8 | lengthByte;\n  const stringBytes = bytes2.slice(2, length + 2);\n  const string = new TextDecoder(\"utf8\").decode(stringBytes);\n  return { string, byteLength: length + 2 };\n}\nclass ResizableUint8Array {\n  constructor() {\n    __publicField2(this, \"bytes\", []);\n    __publicField2(this, \"_length\", 0);\n  }\n  push(bytes2) {\n    this.addBytes(bytes2, \"end\");\n  }\n  unshift(bytes2) {\n    this.addBytes(bytes2, \"start\");\n  }\n  addBytes(bytes2, position) {\n    let bytesToAdd;\n    if (bytes2 instanceof Uint8Array) {\n      bytesToAdd = bytes2;\n    } else if (Array.isArray(bytes2)) {\n      bytesToAdd = new Uint8Array(bytes2);\n    } else {\n      bytesToAdd = new Uint8Array([bytes2]);\n    }\n    this._length += bytesToAdd.length;\n    this.bytes[position === \"start\" ? \"unshift\" : \"push\"](bytesToAdd);\n  }\n  getBytesChunks() {\n    return this.bytes;\n  }\n  getBuffer() {\n    return joinChunks(this.bytes, this._length);\n  }\n  get length() {\n    return this._length;\n  }\n}\nconst FRAME_PART_LENGTH = 4;\nconst commandFrameStart = stringToUtf8CodesBuffer(\"cstr\", FRAME_PART_LENGTH);\nconst commandFrameEnd = stringToUtf8CodesBuffer(\"cend\", FRAME_PART_LENGTH);\nconst commandDivFrameStart = stringToUtf8CodesBuffer(\"dstr\", FRAME_PART_LENGTH);\nconst commandDivFrameEnd = stringToUtf8CodesBuffer(\"dend\", FRAME_PART_LENGTH);\nconst startFrames = [commandFrameStart, commandDivFrameStart];\nconst endFrames = [commandFrameEnd, commandDivFrameEnd];\nconst commandFramesLength = commandFrameStart.length + commandFrameEnd.length;\nfunction isCommandChunk(buffer2) {\n  const { length } = commandFrameStart;\n  const bufferEndingToCompare = buffer2.slice(-length);\n  return startFrames.some(\n    (frame) => areBuffersEqual(buffer2, frame, FRAME_PART_LENGTH)\n  ) && endFrames.some(\n    (frame) => areBuffersEqual(bufferEndingToCompare, frame, FRAME_PART_LENGTH)\n  );\n}\nfunction isFirstCommandChunk(buffer2) {\n  return areBuffersEqual(buffer2, commandFrameStart, FRAME_PART_LENGTH);\n}\nfunction isLastCommandChunk(buffer2) {\n  return areBuffersEqual(\n    buffer2.slice(-4),\n    commandFrameEnd,\n    FRAME_PART_LENGTH\n  );\n}\nclass BinaryCommandJoiningError extends Error {\n  constructor(type) {\n    super();\n    this.type = type;\n  }\n}\nclass BinaryCommandChunksJoiner {\n  constructor(onComplete) {\n    __publicField2(this, \"chunks\", new ResizableUint8Array());\n    __publicField2(this, \"status\", \"joining\");\n    this.onComplete = onComplete;\n  }\n  addCommandChunk(chunk) {\n    if (this.status === \"completed\") return;\n    const isFirstChunk = isFirstCommandChunk(chunk);\n    if (!this.chunks.length && !isFirstChunk) {\n      throw new BinaryCommandJoiningError(\"no-first-chunk\");\n    }\n    if (this.chunks.length && isFirstChunk) {\n      throw new BinaryCommandJoiningError(\"incomplete-joining\");\n    }\n    this.chunks.push(this.unframeCommandChunk(chunk));\n    if (!isLastCommandChunk(chunk)) return;\n    this.status = \"completed\";\n    this.onComplete(this.chunks.getBuffer());\n  }\n  unframeCommandChunk(chunk) {\n    return chunk.slice(FRAME_PART_LENGTH, chunk.length - FRAME_PART_LENGTH);\n  }\n}\nclass BinaryCommandCreator {\n  constructor(commandType, maxChunkLength) {\n    __publicField2(this, \"bytes\", new ResizableUint8Array());\n    __publicField2(this, \"resultBuffers\", []);\n    __publicField2(this, \"status\", \"creating\");\n    this.maxChunkLength = maxChunkLength;\n    this.bytes.push(commandType);\n  }\n  addInteger(name, value) {\n    this.bytes.push(name.charCodeAt(0));\n    const bytes2 = serializeInt(BigInt(value));\n    this.bytes.push(bytes2);\n  }\n  addSimilarIntArr(name, arr) {\n    this.bytes.push(name.charCodeAt(0));\n    const bytes2 = serializeSimilarIntArray(\n      arr.map((num) => BigInt(num))\n    );\n    this.bytes.push(bytes2);\n  }\n  addString(name, string) {\n    this.bytes.push(name.charCodeAt(0));\n    const bytes2 = serializeString(string);\n    this.bytes.push(bytes2);\n  }\n  complete() {\n    if (!this.bytes.length) throw new Error(\"Buffer is empty\");\n    if (this.status === \"completed\") return;\n    this.status = \"completed\";\n    const unframedBuffer = this.bytes.getBuffer();\n    if (unframedBuffer.length + commandFramesLength <= this.maxChunkLength) {\n      this.resultBuffers.push(\n        frameBuffer(unframedBuffer, commandFrameStart, commandFrameEnd)\n      );\n      return;\n    }\n    let chunksCount = Math.ceil(unframedBuffer.length / this.maxChunkLength);\n    if (Math.ceil(unframedBuffer.length / chunksCount) + commandFramesLength > this.maxChunkLength) {\n      chunksCount++;\n    }\n    for (const [i, chunk] of splitBufferToEqualChunks(\n      unframedBuffer,\n      chunksCount\n    )) {\n      if (i === 0) {\n        this.resultBuffers.push(\n          frameBuffer(chunk, commandFrameStart, commandDivFrameEnd)\n        );\n      } else if (i === chunksCount - 1) {\n        this.resultBuffers.push(\n          frameBuffer(chunk, commandDivFrameStart, commandFrameEnd)\n        );\n      } else {\n        this.resultBuffers.push(\n          frameBuffer(chunk, commandDivFrameStart, commandDivFrameEnd)\n        );\n      }\n    }\n  }\n  getResultBuffers() {\n    if (this.status === \"creating\" || !this.resultBuffers.length) {\n      throw new Error(\"Command is not complete.\");\n    }\n    return this.resultBuffers;\n  }\n}\nfunction deserializeCommand(bytes2) {\n  const [commandCode] = bytes2;\n  const deserializedCommand = {\n    c: commandCode\n  };\n  let offset = 1;\n  while (offset < bytes2.length) {\n    const name = String.fromCharCode(bytes2[offset]);\n    offset++;\n    const dataType = getDataTypeFromByte(bytes2[offset]);\n    switch (dataType) {\n      case SerializedItem.Int:\n        {\n          const { number, byteLength: byteLength2 } = deserializeInt(\n            bytes2.slice(offset)\n          );\n          deserializedCommand[name] = Number(number);\n          offset += byteLength2;\n        }\n        break;\n      case SerializedItem.SimilarIntArray:\n        {\n          const { numbers, byteLength: byteLength2 } = deserializeSimilarIntArray(bytes2.slice(offset));\n          deserializedCommand[name] = numbers.map((n) => Number(n));\n          offset += byteLength2;\n        }\n        break;\n      case SerializedItem.String:\n        {\n          const { string, byteLength: byteLength2 } = deserializeString(\n            bytes2.slice(offset)\n          );\n          deserializedCommand[name] = string;\n          offset += byteLength2;\n        }\n        break;\n    }\n  }\n  return deserializedCommand;\n}\nfunction getDataTypeFromByte(byte) {\n  const typeCode = byte >> 4;\n  if (typeCode <= SerializedItem.Min || typeCode >= SerializedItem.Max) {\n    throw new Error(\"Not existing type\");\n  }\n  return typeCode;\n}\nfunction stringToUtf8CodesBuffer(string, length) {\n  if (string.length !== length) {\n    throw new Error(\"Wrong string length\");\n  }\n  const buffer2 = new Uint8Array(length);\n  for (let i = 0; i < string.length; i++) buffer2[i] = string.charCodeAt(i);\n  return buffer2;\n}\nfunction* splitBufferToEqualChunks(buffer2, chunksCount) {\n  const chunkLength = Math.ceil(buffer2.length / chunksCount);\n  for (let i = 0; i < chunksCount; i++) {\n    yield [i, buffer2.slice(i * chunkLength, (i + 1) * chunkLength)];\n  }\n}\nfunction frameBuffer(buffer2, frameStart, frameEnd) {\n  const result = new Uint8Array(\n    buffer2.length + frameStart.length + frameEnd.length\n  );\n  result.set(frameStart);\n  result.set(buffer2, frameStart.length);\n  result.set(frameEnd, frameStart.length + buffer2.length);\n  return result;\n}\nfunction areBuffersEqual(buffer1, buffer2, length) {\n  for (let i = 0; i < length; i++) {\n    if (buffer1[i] !== buffer2[i]) return false;\n  }\n  return true;\n}\nfunction serializeSegmentAnnouncementCommand(command, maxChunkSize) {\n  const { c: commandCode, p: loadingByHttp, l: loaded } = command;\n  const creator = new BinaryCommandCreator(commandCode, maxChunkSize);\n  if (loaded == null ? void 0 : loaded.length) creator.addSimilarIntArr(\"l\", loaded);\n  if (loadingByHttp == null ? void 0 : loadingByHttp.length) {\n    creator.addSimilarIntArr(\"p\", loadingByHttp);\n  }\n  creator.complete();\n  return creator.getResultBuffers();\n}\nfunction serializePeerSegmentCommand(command, maxChunkSize) {\n  const creator = new BinaryCommandCreator(command.c, maxChunkSize);\n  creator.addInteger(\"i\", command.i);\n  creator.addInteger(\"r\", command.r);\n  creator.complete();\n  return creator.getResultBuffers();\n}\nfunction serializePeerSendSegmentCommand(command, maxChunkSize) {\n  const creator = new BinaryCommandCreator(command.c, maxChunkSize);\n  creator.addInteger(\"i\", command.i);\n  creator.addInteger(\"s\", command.s);\n  creator.addInteger(\"r\", command.r);\n  creator.complete();\n  return creator.getResultBuffers();\n}\nfunction serializePeerSegmentRequestCommand(command, maxChunkSize) {\n  const creator = new BinaryCommandCreator(command.c, maxChunkSize);\n  creator.addInteger(\"i\", command.i);\n  creator.addInteger(\"r\", command.r);\n  if (command.b) creator.addInteger(\"b\", command.b);\n  creator.complete();\n  return creator.getResultBuffers();\n}\nfunction serializePeerCommand(command, maxChunkSize) {\n  switch (command.c) {\n    case PeerCommandType$1.CancelSegmentRequest:\n    case PeerCommandType$1.SegmentAbsent:\n    case PeerCommandType$1.SegmentDataSendingCompleted:\n      return serializePeerSegmentCommand(command, maxChunkSize);\n    case PeerCommandType$1.SegmentRequest:\n      return serializePeerSegmentRequestCommand(command, maxChunkSize);\n    case PeerCommandType$1.SegmentsAnnouncement:\n      return serializeSegmentAnnouncementCommand(command, maxChunkSize);\n    case PeerCommandType$1.SegmentData:\n      return serializePeerSendSegmentCommand(command, maxChunkSize);\n  }\n}\nconst Command = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({\n  __proto__: null,\n  BinaryCommandChunksJoiner,\n  BinaryCommandJoiningError,\n  PeerCommandType: PeerCommandType$1,\n  deserializeCommand,\n  isCommandChunk,\n  serializePeerCommand\n}, Symbol.toStringTag, { value: \"Module\" }));\nclass PeerProtocol {\n  constructor(connection, peerConfig, eventHandlers, eventTarget) {\n    __publicField2(this, \"commandChunks\");\n    __publicField2(this, \"uploadingContext\");\n    __publicField2(this, \"onChunkDownloaded\");\n    __publicField2(this, \"onChunkUploaded\");\n    __publicField2(this, \"onDataReceived\", (data) => {\n      if (isCommandChunk(data)) {\n        this.receivingCommandBytes(data);\n      } else {\n        this.eventHandlers.onSegmentChunkReceived(data);\n        this.onChunkDownloaded(data.byteLength, \"p2p\", this.connection.idUtf8);\n      }\n    });\n    this.connection = connection;\n    this.peerConfig = peerConfig;\n    this.eventHandlers = eventHandlers;\n    this.onChunkDownloaded = eventTarget.getEventDispatcher(\"onChunkDownloaded\");\n    this.onChunkUploaded = eventTarget.getEventDispatcher(\"onChunkUploaded\");\n    connection.on(\"data\", this.onDataReceived);\n  }\n  sendCommand(command) {\n    const binaryCommandBuffers = serializePeerCommand(\n      command,\n      this.peerConfig.webRtcMaxMessageSize\n    );\n    for (const buffer2 of binaryCommandBuffers) {\n      this.connection.write(buffer2);\n    }\n  }\n  stopUploadingSegmentData() {\n    var _a;\n    (_a = this.uploadingContext) == null ? void 0 : _a.stopUploading();\n    this.uploadingContext = void 0;\n  }\n  getUploadingRequestId() {\n    var _a;\n    return (_a = this.uploadingContext) == null ? void 0 : _a.requestId;\n  }\n  async splitSegmentDataToChunksAndUploadAsync(data, requestId) {\n    if (this.uploadingContext) {\n      throw new Error(`Some segment data is already uploading.`);\n    }\n    const chunks = getBufferChunks(data, this.peerConfig.webRtcMaxMessageSize);\n    const { promise, resolve, reject } = getControlledPromise();\n    let isUploadingSegmentData = false;\n    const uploadingContext = {\n      stopUploading: () => {\n        isUploadingSegmentData = false;\n      },\n      requestId\n    };\n    this.uploadingContext = uploadingContext;\n    const sendChunk = () => {\n      if (!isUploadingSegmentData) {\n        reject();\n        return;\n      }\n      while (true) {\n        const chunk = chunks.next().value;\n        if (!chunk) {\n          resolve();\n          break;\n        }\n        const drained = this.connection.write(chunk);\n        this.onChunkUploaded(chunk.byteLength, this.connection.idUtf8);\n        if (!drained) break;\n      }\n    };\n    try {\n      this.connection.on(\"drain\", sendChunk);\n      isUploadingSegmentData = true;\n      sendChunk();\n      await promise;\n    } finally {\n      this.connection.off(\"drain\", sendChunk);\n      if (this.uploadingContext === uploadingContext) {\n        this.uploadingContext = void 0;\n      }\n    }\n  }\n  receivingCommandBytes(buffer2) {\n    if (!this.commandChunks) {\n      this.commandChunks = new BinaryCommandChunksJoiner(\n        (commandBuffer) => {\n          this.commandChunks = void 0;\n          const command = deserializeCommand(commandBuffer);\n          this.eventHandlers.onCommandReceived(command);\n        }\n      );\n    }\n    try {\n      this.commandChunks.addCommandChunk(buffer2);\n    } catch (err) {\n      if (!(err instanceof BinaryCommandJoiningError)) return;\n      this.commandChunks = void 0;\n    }\n  }\n}\nfunction* getBufferChunks(data, maxChunkSize) {\n  let bytesLeft = data.byteLength;\n  while (bytesLeft > 0) {\n    const bytesToSend = bytesLeft >= maxChunkSize ? maxChunkSize : bytesLeft;\n    const from = data.byteLength - bytesLeft;\n    const buffer2 = data.slice(from, from + bytesToSend);\n    bytesLeft -= bytesToSend;\n    yield buffer2;\n  }\n}\nconst { PeerCommandType } = Command;\nclass Peer2 {\n  constructor(connection, eventHandlers, peerConfig, streamType, eventTarget) {\n    __publicField2(this, \"id\");\n    __publicField2(this, \"peerProtocol\");\n    __publicField2(this, \"downloadingContext\");\n    __publicField2(this, \"loadedSegments\", /* @__PURE__ */ new Set());\n    __publicField2(this, \"httpLoadingSegments\", /* @__PURE__ */ new Set());\n    __publicField2(this, \"downloadingErrors\", []);\n    __publicField2(this, \"logger\", debug$3(\"p2pml-core:peer\"));\n    __publicField2(this, \"onPeerClosed\");\n    __publicField2(this, \"onCommandReceived\", async (command) => {\n      var _a, _b, _c;\n      switch (command.c) {\n        case PeerCommandType.SegmentsAnnouncement:\n          this.loadedSegments = new Set(command.l);\n          this.httpLoadingSegments = new Set(command.p);\n          this.eventHandlers.onSegmentsAnnouncement();\n          break;\n        case PeerCommandType.SegmentRequest:\n          this.peerProtocol.stopUploadingSegmentData();\n          this.eventHandlers.onSegmentRequested(\n            this,\n            command.i,\n            command.r,\n            command.b\n          );\n          break;\n        case PeerCommandType.SegmentData:\n          {\n            if (!this.downloadingContext) break;\n            if (this.downloadingContext.isSegmentDataCommandReceived) break;\n            const { request, controls, requestId } = this.downloadingContext;\n            if (request.segment.externalId !== command.i || requestId !== command.r) {\n              break;\n            }\n            this.downloadingContext.isSegmentDataCommandReceived = true;\n            controls.firstBytesReceived();\n            if (request.totalBytes === void 0) {\n              request.setTotalBytes(command.s);\n            } else if (request.totalBytes - request.loadedBytes !== command.s) {\n              request.clearLoadedBytes();\n              this.sendCancelSegmentRequestCommand(request.segment, requestId);\n              this.cancelSegmentDownloading(\n                \"peer-response-bytes-length-mismatch\"\n              );\n              this.destroy();\n            }\n          }\n          break;\n        case PeerCommandType.SegmentDataSendingCompleted: {\n          const { downloadingContext } = this;\n          if (!(downloadingContext == null ? void 0 : downloadingContext.isSegmentDataCommandReceived)) return;\n          const { request, controls } = downloadingContext;\n          const isWrongSegment = downloadingContext.request.segment.externalId !== command.i || downloadingContext.requestId !== command.r;\n          if (isWrongSegment) {\n            request.clearLoadedBytes();\n            this.cancelSegmentDownloading(\"peer-protocol-violation\");\n            this.destroy();\n            return;\n          }\n          const isWrongBytes = request.loadedBytes !== request.totalBytes;\n          if (isWrongBytes) {\n            request.clearLoadedBytes();\n            this.cancelSegmentDownloading(\"peer-response-bytes-length-mismatch\");\n            this.destroy();\n            return;\n          }\n          const isValid2 = await ((_b = (_a = this.peerConfig).validateP2PSegment) == null ? void 0 : _b.call(\n            _a,\n            request.segment.url,\n            request.segment.byteRange,\n            request.data\n          )) ?? true;\n          if (this.downloadingContext !== downloadingContext) return;\n          if (!isValid2) {\n            request.clearLoadedBytes();\n            this.cancelSegmentDownloading(\"p2p-segment-validation-failed\");\n            this.destroy();\n            return;\n          }\n          this.downloadingErrors = [];\n          controls.completeOnSuccess();\n          this.downloadingContext = void 0;\n          break;\n        }\n        case PeerCommandType.SegmentAbsent:\n          if (((_c = this.downloadingContext) == null ? void 0 : _c.request.segment.externalId) === command.i && this.downloadingContext.requestId === command.r) {\n            this.cancelSegmentDownloading(\"peer-segment-absent\");\n            this.loadedSegments.delete(command.i);\n          }\n          break;\n        case PeerCommandType.CancelSegmentRequest: {\n          const uploadingRequestId = this.peerProtocol.getUploadingRequestId();\n          if (uploadingRequestId !== command.r) break;\n          this.peerProtocol.stopUploadingSegmentData();\n          break;\n        }\n      }\n    });\n    __publicField2(this, \"onSegmentChunkReceived\", (chunk) => {\n      var _a;\n      if (!((_a = this.downloadingContext) == null ? void 0 : _a.isSegmentDataCommandReceived)) return;\n      const { request, controls } = this.downloadingContext;\n      const isOverflow = request.totalBytes !== void 0 && request.loadedBytes + chunk.byteLength > request.totalBytes;\n      if (isOverflow) {\n        request.clearLoadedBytes();\n        this.cancelSegmentDownloading(\"peer-response-bytes-length-mismatch\");\n        this.destroy();\n        return;\n      }\n      controls.addLoadedChunk(chunk);\n    });\n    __publicField2(this, \"onPeerConnectionClosed\", () => {\n      this.destroy();\n    });\n    __publicField2(this, \"onConnectionError\", (error) => {\n      this.logger(`peer connection error ${this.id} %O`, error);\n      this.eventTarget.getEventDispatcher(\"onPeerError\")({\n        peerId: this.id,\n        streamType: this.streamType,\n        error\n      });\n      const { code: code2 } = error;\n      if (code2 === \"ERR_DATA_CHANNEL\") {\n        this.destroy();\n      } else if (code2 === \"ERR_CONNECTION_FAILURE\") {\n        this.destroy();\n      }\n    });\n    __publicField2(this, \"destroy\", () => {\n      this.cancelSegmentDownloading(\"peer-closed\");\n      this.connection.destroy();\n      this.eventHandlers.onPeerClosed(this);\n      this.onPeerClosed({\n        peerId: this.id,\n        streamType: this.streamType\n      });\n      this.logger(`peer closed ${this.id}`);\n    });\n    this.connection = connection;\n    this.eventHandlers = eventHandlers;\n    this.peerConfig = peerConfig;\n    this.streamType = streamType;\n    this.eventTarget = eventTarget;\n    this.onPeerClosed = eventTarget.getEventDispatcher(\"onPeerClose\");\n    this.id = Peer2.getPeerIdFromConnection(connection);\n    this.peerProtocol = new PeerProtocol(\n      connection,\n      peerConfig,\n      {\n        onSegmentChunkReceived: this.onSegmentChunkReceived,\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        onCommandReceived: this.onCommandReceived\n      },\n      eventTarget\n    );\n    eventTarget.getEventDispatcher(\"onPeerConnect\")({\n      peerId: this.id,\n      streamType\n    });\n    connection.on(\"error\", this.onConnectionError);\n    connection.on(\"close\", this.onPeerConnectionClosed);\n    connection.on(\"end\", this.onPeerConnectionClosed);\n    connection.on(\"finish\", this.onPeerConnectionClosed);\n  }\n  get downloadingSegment() {\n    var _a;\n    return (_a = this.downloadingContext) == null ? void 0 : _a.request.segment;\n  }\n  getSegmentStatus(segment) {\n    const { externalId } = segment;\n    if (this.loadedSegments.has(externalId)) return \"loaded\";\n    if (this.httpLoadingSegments.has(externalId)) return \"http-loading\";\n  }\n  downloadSegment(segmentRequest) {\n    if (this.downloadingContext) {\n      throw new Error(\"Some segment already is downloading\");\n    }\n    this.downloadingContext = {\n      request: segmentRequest,\n      requestId: Math.floor(Math.random() * 1e3),\n      isSegmentDataCommandReceived: false,\n      controls: segmentRequest.start(\n        { downloadSource: \"p2p\", peerId: this.id },\n        {\n          notReceivingBytesTimeoutMs: this.peerConfig.p2pNotReceivingBytesTimeoutMs,\n          abort: (error) => {\n            if (!this.downloadingContext) return;\n            const { request, requestId } = this.downloadingContext;\n            this.sendCancelSegmentRequestCommand(request.segment, requestId);\n            this.downloadingErrors.push(error);\n            this.downloadingContext = void 0;\n            const timeoutErrors = this.downloadingErrors.filter(\n              (error2) => error2.type === \"bytes-receiving-timeout\"\n            );\n            if (timeoutErrors.length >= this.peerConfig.p2pErrorRetries) {\n              this.destroy();\n            }\n          }\n        }\n      )\n    };\n    const command = {\n      c: PeerCommandType.SegmentRequest,\n      r: this.downloadingContext.requestId,\n      i: segmentRequest.segment.externalId\n    };\n    if (segmentRequest.loadedBytes) command.b = segmentRequest.loadedBytes;\n    this.peerProtocol.sendCommand(command);\n  }\n  async uploadSegmentData(segment, requestId, data) {\n    const { externalId } = segment;\n    this.logger(`send segment ${segment.externalId} to ${this.id}`);\n    const command = {\n      c: PeerCommandType.SegmentData,\n      i: externalId,\n      r: requestId,\n      s: data.byteLength\n    };\n    this.peerProtocol.sendCommand(command);\n    try {\n      await this.peerProtocol.splitSegmentDataToChunksAndUploadAsync(\n        data,\n        requestId\n      );\n      this.sendSegmentDataSendingCompletedCommand(segment, requestId);\n      this.logger(`segment ${externalId} has been sent to ${this.id}`);\n    } catch {\n      this.logger(`cancel segment uploading ${externalId}`);\n    }\n  }\n  cancelSegmentDownloading(type) {\n    if (!this.downloadingContext) return;\n    const { request, controls } = this.downloadingContext;\n    const { segment } = request;\n    this.logger(`cancel segment request ${segment.externalId} (${type})`);\n    const error = new RequestError(type);\n    controls.abortOnError(error);\n    this.downloadingContext = void 0;\n    this.downloadingErrors.push(error);\n  }\n  sendSegmentsAnnouncementCommand(loadedSegmentsIds, httpLoadingSegmentsIds) {\n    const command = {\n      c: PeerCommandType.SegmentsAnnouncement,\n      p: httpLoadingSegmentsIds,\n      l: loadedSegmentsIds\n    };\n    this.peerProtocol.sendCommand(command);\n  }\n  sendSegmentAbsentCommand(segmentExternalId, requestId) {\n    this.peerProtocol.sendCommand({\n      c: PeerCommandType.SegmentAbsent,\n      i: segmentExternalId,\n      r: requestId\n    });\n  }\n  sendCancelSegmentRequestCommand(segment, requestId) {\n    this.peerProtocol.sendCommand({\n      c: PeerCommandType.CancelSegmentRequest,\n      i: segment.externalId,\n      r: requestId\n    });\n  }\n  sendSegmentDataSendingCompletedCommand(segment, requestId) {\n    this.peerProtocol.sendCommand({\n      c: PeerCommandType.SegmentDataSendingCompleted,\n      r: requestId,\n      i: segment.externalId\n    });\n  }\n  static getPeerIdFromConnection(connection) {\n    return hexToUtf8(connection.id);\n  }\n}\nfunction isSafariOrWkWebview() {\n  const isSafari2 = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  const isWkWebview = /\\b(iPad|iPhone|Macintosh).*AppleWebKit(?!.*Safari)/i.test(\n    navigator.userAgent\n  );\n  return isSafari2 || isWkWebview;\n}\nconst _P2PTrackerClient = class _P2PTrackerClient2 {\n  constructor(streamSwarmId, stream, eventHandlers, config, eventTarget) {\n    __publicField2(this, \"streamShortId\");\n    __publicField2(this, \"client\");\n    __publicField2(this, \"_peers\", /* @__PURE__ */ new Map());\n    __publicField2(this, \"logger\", debug$3(\"p2pml-core:p2p-tracker-client\"));\n    __publicField2(this, \"onReceivePeerConnection\", (peerConnection) => {\n      const itemId = Peer2.getPeerIdFromConnection(peerConnection);\n      let peerItem = this._peers.get(itemId);\n      if (peerItem == null ? void 0 : peerItem.peer) {\n        peerConnection.destroy();\n        return;\n      }\n      if (!peerItem) {\n        peerItem = { potentialConnections: /* @__PURE__ */ new Set() };\n        peerConnection.idUtf8 = itemId;\n        this._peers.set(itemId, peerItem);\n      }\n      peerItem.potentialConnections.add(peerConnection);\n      peerConnection.on(\"connect\", () => {\n        if (peerItem.peer) return;\n        for (const connection of peerItem.potentialConnections) {\n          if (connection !== peerConnection) connection.destroy();\n        }\n        peerItem.potentialConnections.clear();\n        peerItem.peer = new Peer2(\n          peerConnection,\n          {\n            onPeerClosed: this.onPeerClosed,\n            onSegmentRequested: this.eventHandlers.onSegmentRequested,\n            onSegmentsAnnouncement: this.eventHandlers.onSegmentsAnnouncement\n          },\n          this.config,\n          this.stream.type,\n          this.eventTarget\n        );\n        this.logger(\n          `connected with peer: ${peerItem.peer.id} ${this.streamShortId}`\n        );\n        this.eventHandlers.onPeerConnected(peerItem.peer);\n      });\n    });\n    __publicField2(this, \"onTrackerClientWarning\", (warning) => {\n      this.logger(\"tracker warning %s:\", this.streamShortId, warning);\n      this.eventTarget.getEventDispatcher(\"onTrackerWarning\")({\n        streamType: this.stream.type,\n        warning\n      });\n    });\n    __publicField2(this, \"onTrackerClientError\", (error) => {\n      this.logger(\"tracker error in stream %s:\", this.streamShortId, error);\n      this.eventTarget.getEventDispatcher(\"onTrackerError\")({\n        streamType: this.stream.type,\n        error\n      });\n    });\n    __publicField2(this, \"onPeerClosed\", (peer) => {\n      this.logger(`peer closed: ${peer.id}`);\n      this._peers.delete(peer.id);\n    });\n    this.stream = stream;\n    this.eventHandlers = eventHandlers;\n    this.config = config;\n    this.eventTarget = eventTarget;\n    const streamHash = getStreamHash(streamSwarmId);\n    this.streamShortId = getStreamString(stream);\n    let peerId = _P2PTrackerClient2.PEER_ID_BY_INFO_HASH.get(streamHash);\n    if (!peerId) {\n      peerId = generatePeerId(config.trackerClientVersionPrefix);\n      _P2PTrackerClient2.PEER_ID_BY_INFO_HASH.set(streamHash, peerId);\n    }\n    this.client = new Client({\n      infoHash: utf8ToUintArray(streamHash),\n      peerId: utf8ToUintArray(peerId),\n      announce: isSafariOrWkWebview() ? config.announceTrackers.slice(0, 1) : config.announceTrackers,\n      rtcConfig: this.config.rtcConfig\n    });\n    this.client.on(\"peer\", this.onReceivePeerConnection);\n    this.client.on(\"warning\", this.onTrackerClientWarning);\n    this.client.on(\"error\", this.onTrackerClientError);\n    this.logger(\n      `create new client; \nstream: ${this.streamShortId}; hash: ${streamHash}\npeerId: ${peerId}`\n    );\n  }\n  start() {\n    this.client.start();\n  }\n  destroy() {\n    this.client.destroy();\n    for (const { peer, potentialConnections } of this._peers.values()) {\n      peer == null ? void 0 : peer.destroy();\n      for (const connection of potentialConnections) {\n        connection.destroy();\n      }\n    }\n    this._peers.clear();\n    this.logger(\"destroy client; stream:\", this.streamShortId);\n  }\n  *peers() {\n    for (const peerItem of this._peers.values()) {\n      if (peerItem.peer) yield peerItem.peer;\n    }\n  }\n  static clearPeerIdCache() {\n    _P2PTrackerClient2.PEER_ID_BY_INFO_HASH.clear();\n  }\n};\n__publicField2(_P2PTrackerClient, \"PEER_ID_BY_INFO_HASH\", /* @__PURE__ */ new Map());\nlet P2PTrackerClient = _P2PTrackerClient;\nconst PEER_PROTOCOL_VERSION = \"v2\";\nfunction getStreamSwarmId(swarmId, stream) {\n  return `${PEER_PROTOCOL_VERSION}-${swarmId}-${getStreamId(stream)}`;\n}\nfunction getSegmentFromStreamsMap(streams, segmentRuntimeId) {\n  for (const stream of streams.values()) {\n    const segment = stream.segments.get(segmentRuntimeId);\n    if (segment) return segment;\n  }\n}\nfunction getSegmentFromStreamByExternalId(stream, segmentExternalId) {\n  for (const segment of stream.segments.values()) {\n    if (segment.externalId === segmentExternalId) return segment;\n  }\n}\nfunction getStreamId(stream) {\n  return `${stream.type}-${stream.index}`;\n}\nfunction getSegmentAvgDuration(stream) {\n  const { segments } = stream;\n  let sumDuration = 0;\n  const { size } = segments;\n  for (const segment of segments.values()) {\n    const duration = segment.endTime - segment.startTime;\n    sumDuration += duration;\n  }\n  return sumDuration / size;\n}\nfunction calculateTimeWindows(timeWindowsConfig, availableMemoryInPercent) {\n  const {\n    highDemandTimeWindow,\n    httpDownloadTimeWindow,\n    p2pDownloadTimeWindow\n  } = timeWindowsConfig;\n  const result = {\n    highDemandTimeWindow,\n    httpDownloadTimeWindow,\n    p2pDownloadTimeWindow\n  };\n  if (availableMemoryInPercent <= 5) {\n    result.httpDownloadTimeWindow = 0;\n    result.p2pDownloadTimeWindow = 0;\n  } else if (availableMemoryInPercent <= 10) {\n    result.p2pDownloadTimeWindow = result.httpDownloadTimeWindow;\n  }\n  return result;\n}\nfunction getSegmentPlaybackStatuses(segment, playback, timeWindowsConfig, currentP2PLoader, availableMemoryPercent) {\n  const {\n    highDemandTimeWindow,\n    httpDownloadTimeWindow,\n    p2pDownloadTimeWindow\n  } = calculateTimeWindows(timeWindowsConfig, availableMemoryPercent);\n  return {\n    isHighDemand: isSegmentInTimeWindow(\n      segment,\n      playback,\n      highDemandTimeWindow\n    ),\n    isHttpDownloadable: isSegmentInTimeWindow(\n      segment,\n      playback,\n      httpDownloadTimeWindow\n    ),\n    isP2PDownloadable: isSegmentInTimeWindow(segment, playback, p2pDownloadTimeWindow) && currentP2PLoader.isSegmentLoadingOrLoadedBySomeone(segment)\n  };\n}\nfunction isSegmentInTimeWindow(segment, playback, timeWindowLength) {\n  const { startTime, endTime } = segment;\n  const { position, rate } = playback;\n  const rightMargin = position + timeWindowLength * rate;\n  return !(rightMargin < startTime || position > endTime);\n}\nclass P2PLoader {\n  constructor(streamManifestUrl, stream, requests, segmentStorage, config, eventTarget, onSegmentAnnouncement) {\n    __publicField2(this, \"trackerClient\");\n    __publicField2(this, \"isAnnounceMicrotaskCreated\", false);\n    __publicField2(this, \"onPeerConnected\", (peer) => {\n      if (this.config.isP2PUploadDisabled) return;\n      const { httpLoading, loaded } = this.getSegmentsAnnouncement();\n      peer.sendSegmentsAnnouncementCommand(loaded, httpLoading);\n    });\n    __publicField2(this, \"broadcastAnnouncement\", (sendEmptyAnnouncement = false) => {\n      if (sendEmptyAnnouncement) {\n        this.sendSegmentsAnnouncement([], []);\n        return;\n      }\n      if (this.isAnnounceMicrotaskCreated || this.config.isP2PUploadDisabled) {\n        return;\n      }\n      const { loaded, httpLoading } = this.getSegmentsAnnouncement();\n      this.sendSegmentsAnnouncement(loaded, httpLoading);\n    });\n    __publicField2(this, \"sendSegmentsAnnouncement\", (loaded, httpLoading) => {\n      this.isAnnounceMicrotaskCreated = true;\n      queueMicrotask(() => {\n        for (const peer of this.trackerClient.peers()) {\n          peer.sendSegmentsAnnouncementCommand(loaded, httpLoading);\n        }\n        this.isAnnounceMicrotaskCreated = false;\n      });\n    });\n    __publicField2(this, \"onSegmentRequested\", async (peer, segmentExternalId, requestId, byteFrom) => {\n      const segment = getSegmentFromStreamByExternalId(\n        this.stream,\n        segmentExternalId\n      );\n      if (!segment) return;\n      if (this.config.isP2PUploadDisabled) {\n        peer.sendSegmentAbsentCommand(segmentExternalId, requestId);\n        return;\n      }\n      const swarmId2 = this.config.swarmId ?? this.streamManifestUrl;\n      const streamSwarmId2 = getStreamSwarmId(swarmId2, this.stream);\n      const segmentData = await this.segmentStorage.getSegmentData(\n        swarmId2,\n        streamSwarmId2,\n        segment.externalId\n      );\n      if (!segmentData) {\n        peer.sendSegmentAbsentCommand(segmentExternalId, requestId);\n        return;\n      }\n      await peer.uploadSegmentData(\n        segment,\n        requestId,\n        byteFrom !== void 0 ? segmentData.slice(byteFrom) : segmentData\n      );\n    });\n    this.streamManifestUrl = streamManifestUrl;\n    this.stream = stream;\n    this.requests = requests;\n    this.segmentStorage = segmentStorage;\n    this.config = config;\n    this.eventTarget = eventTarget;\n    this.onSegmentAnnouncement = onSegmentAnnouncement;\n    const swarmId = this.config.swarmId ?? this.streamManifestUrl;\n    const streamSwarmId = getStreamSwarmId(swarmId, this.stream);\n    this.trackerClient = new P2PTrackerClient(\n      streamSwarmId,\n      this.stream,\n      {\n        onPeerConnected: this.onPeerConnected,\n        // eslint-disable-next-line @typescript-eslint/no-misused-promises\n        onSegmentRequested: this.onSegmentRequested,\n        onSegmentsAnnouncement: this.onSegmentAnnouncement\n      },\n      this.config,\n      this.eventTarget\n    );\n    this.eventTarget.addEventListener(\n      `onStorageUpdated-${streamSwarmId}`,\n      this.broadcastAnnouncement\n    );\n    this.segmentStorage.setSegmentChangeCallback((streamId) => {\n      this.eventTarget.dispatchEvent(`onStorageUpdated-${streamId}`);\n    });\n    this.trackerClient.start();\n  }\n  downloadSegment(segment) {\n    const peersWithSegment = [];\n    for (const peer2 of this.trackerClient.peers()) {\n      if (!peer2.downloadingSegment && peer2.getSegmentStatus(segment) === \"loaded\") {\n        peersWithSegment.push(peer2);\n      }\n    }\n    if (peersWithSegment.length === 0) return;\n    const peer = getRandomItem(peersWithSegment);\n    const request = this.requests.getOrCreateRequest(segment);\n    peer.downloadSegment(request);\n  }\n  isSegmentLoadingOrLoadedBySomeone(segment) {\n    for (const peer of this.trackerClient.peers()) {\n      if (peer.getSegmentStatus(segment)) return true;\n    }\n    return false;\n  }\n  isSegmentLoadedBySomeone(segment) {\n    for (const peer of this.trackerClient.peers()) {\n      if (peer.getSegmentStatus(segment) === \"loaded\") return true;\n    }\n    return false;\n  }\n  get connectedPeerCount() {\n    let count = 0;\n    const iterator = this.trackerClient.peers();\n    while (!iterator.next().done) count++;\n    return count;\n  }\n  getSegmentsAnnouncement() {\n    const swarmId = this.config.swarmId ?? this.streamManifestUrl;\n    const streamSwarmId = getStreamSwarmId(swarmId, this.stream);\n    const loaded = this.segmentStorage.getStoredSegmentIds(\n      swarmId,\n      streamSwarmId\n    );\n    const httpLoading = [];\n    for (const request of this.requests.httpRequests()) {\n      const segment = this.stream.segments.get(request.segment.runtimeId);\n      if (!segment) continue;\n      httpLoading.push(segment.externalId);\n    }\n    return { loaded, httpLoading };\n  }\n  destroy() {\n    const swarmId = this.config.swarmId ?? this.streamManifestUrl;\n    const streamSwarmId = getStreamSwarmId(swarmId, this.stream);\n    this.eventTarget.removeEventListener(\n      `onStorageUpdated-${streamSwarmId}`,\n      this.broadcastAnnouncement\n    );\n    this.trackerClient.destroy();\n  }\n}\nclass P2PLoadersContainer {\n  constructor(streamManifestUrl, stream, requests, segmentStorage, config, eventTarget, onSegmentAnnouncement) {\n    __publicField2(this, \"loaders\", /* @__PURE__ */ new Map());\n    __publicField2(this, \"_currentLoaderItem\");\n    __publicField2(this, \"logger\", debug$3(\"p2pml-core:p2p-loaders-container\"));\n    this.streamManifestUrl = streamManifestUrl;\n    this.requests = requests;\n    this.segmentStorage = segmentStorage;\n    this.config = config;\n    this.eventTarget = eventTarget;\n    this.onSegmentAnnouncement = onSegmentAnnouncement;\n    this._currentLoaderItem = this.findOrCreateLoaderForStream(stream);\n    this.logger(\n      `set current p2p loader: ${getStreamString(stream)}`\n    );\n  }\n  createLoader(stream) {\n    if (this.loaders.has(stream.runtimeId)) {\n      throw new Error(\"Loader for this stream already exists\");\n    }\n    const loader = new P2PLoader(\n      this.streamManifestUrl,\n      stream,\n      this.requests,\n      this.segmentStorage,\n      this.config,\n      this.eventTarget,\n      () => {\n        if (this._currentLoaderItem.loader === loader) {\n          this.onSegmentAnnouncement();\n        }\n      }\n    );\n    const loggerInfo = getStreamString(stream);\n    this.logger(`created new loader: ${loggerInfo}`);\n    return {\n      loader,\n      stream,\n      loggerInfo: getStreamString(stream)\n    };\n  }\n  findOrCreateLoaderForStream(stream) {\n    const loaderItem = this.loaders.get(stream.runtimeId);\n    if (loaderItem) {\n      clearTimeout(loaderItem.destroyTimeoutId);\n      loaderItem.destroyTimeoutId = void 0;\n      return loaderItem;\n    } else {\n      const loader = this.createLoader(stream);\n      this.loaders.set(stream.runtimeId, loader);\n      return loader;\n    }\n  }\n  changeCurrentLoader(stream) {\n    const swarmId = this.config.swarmId ?? this.streamManifestUrl;\n    const streamSwarmId = getStreamSwarmId(\n      swarmId,\n      this._currentLoaderItem.stream\n    );\n    const ids = this.segmentStorage.getStoredSegmentIds(swarmId, streamSwarmId);\n    if (!ids.length) this.destroyAndRemoveLoader(this._currentLoaderItem);\n    else this.setLoaderDestroyTimeout(this._currentLoaderItem);\n    this._currentLoaderItem = this.findOrCreateLoaderForStream(stream);\n    this.logger(\n      `change current p2p loader: ${getStreamString(stream)}`\n    );\n  }\n  setLoaderDestroyTimeout(item) {\n    item.destroyTimeoutId = window.setTimeout(\n      () => this.destroyAndRemoveLoader(item),\n      this.config.p2pInactiveLoaderDestroyTimeoutMs\n    );\n  }\n  destroyAndRemoveLoader(item) {\n    item.loader.destroy();\n    this.loaders.delete(item.stream.runtimeId);\n    this.logger(`destroy p2p loader: `, item.loggerInfo);\n  }\n  get currentLoader() {\n    return this._currentLoaderItem.loader;\n  }\n  destroy() {\n    for (const { loader, destroyTimeoutId } of this.loaders.values()) {\n      loader.destroy();\n      clearTimeout(destroyTimeoutId);\n    }\n    this.loaders.clear();\n  }\n}\nfunction mapSegmentWithStreamToSegment(segment) {\n  return {\n    runtimeId: segment.runtimeId,\n    externalId: segment.externalId,\n    url: segment.url,\n    byteRange: segment.byteRange,\n    startTime: segment.startTime,\n    endTime: segment.endTime\n  };\n}\nlet Request$1 = class Request2 {\n  constructor(segment, requestProcessQueueCallback, bandwidthCalculators, playback, playbackConfig, eventTarget) {\n    __publicField2(this, \"currentAttempt\");\n    __publicField2(this, \"_failedAttempts\", new FailedRequestAttempts());\n    __publicField2(this, \"finalData\");\n    __publicField2(this, \"bytes\", []);\n    __publicField2(this, \"_loadedBytes\", 0);\n    __publicField2(this, \"_totalBytes\");\n    __publicField2(this, \"_status\", \"not-started\");\n    __publicField2(this, \"progress\");\n    __publicField2(this, \"notReceivingBytesTimeout\");\n    __publicField2(this, \"_abortRequestCallback\");\n    __publicField2(this, \"_logger\");\n    __publicField2(this, \"_isHandledByProcessQueue\", false);\n    __publicField2(this, \"onSegmentError\");\n    __publicField2(this, \"onSegmentAbort\");\n    __publicField2(this, \"onSegmentStart\");\n    __publicField2(this, \"onSegmentLoaded\");\n    __publicField2(this, \"abortOnTimeout\", () => {\n      var _a;\n      this.throwErrorIfNotLoadingStatus();\n      if (!this.currentAttempt) return;\n      this.setStatus(\"failed\");\n      const error = new RequestError(\"bytes-receiving-timeout\");\n      (_a = this._abortRequestCallback) == null ? void 0 : _a.call(this, error);\n      this.logger(\n        `${this.downloadSource} ${this.segment.externalId} failed ${error.type}`\n      );\n      this._failedAttempts.add({\n        ...this.currentAttempt,\n        error\n      });\n      this.onSegmentError({\n        segment: mapSegmentWithStreamToSegment(this.segment),\n        error,\n        downloadSource: this.currentAttempt.downloadSource,\n        peerId: this.currentAttempt.downloadSource === \"p2p\" ? this.currentAttempt.peerId : void 0,\n        streamType: this.segment.stream.type\n      });\n      this.notReceivingBytesTimeout.clear();\n      this.manageBandwidthCalculatorsState(\"stop\");\n      this.requestProcessQueueCallback();\n    });\n    __publicField2(this, \"abortOnError\", (error) => {\n      this.throwErrorIfNotLoadingStatus();\n      if (!this.currentAttempt) return;\n      this.setStatus(\"failed\");\n      this.logger(\n        `${this.downloadSource} ${this.segment.externalId} failed ${error.type}`\n      );\n      this._failedAttempts.add({\n        ...this.currentAttempt,\n        error\n      });\n      this.onSegmentError({\n        segment: mapSegmentWithStreamToSegment(this.segment),\n        error,\n        downloadSource: this.currentAttempt.downloadSource,\n        peerId: this.currentAttempt.downloadSource === \"p2p\" ? this.currentAttempt.peerId : void 0,\n        streamType: this.segment.stream.type\n      });\n      this.notReceivingBytesTimeout.clear();\n      this.manageBandwidthCalculatorsState(\"stop\");\n      this.requestProcessQueueCallback();\n    });\n    __publicField2(this, \"completeOnSuccess\", () => {\n      this.throwErrorIfNotLoadingStatus();\n      if (!this.currentAttempt) return;\n      this.manageBandwidthCalculatorsState(\"stop\");\n      this.notReceivingBytesTimeout.clear();\n      this.setStatus(\"succeed\");\n      this._totalBytes = this._loadedBytes;\n      this.onSegmentLoaded({\n        segmentUrl: this.segment.url,\n        bytesLength: this.data.byteLength,\n        downloadSource: this.currentAttempt.downloadSource,\n        peerId: this.currentAttempt.downloadSource === \"p2p\" ? this.currentAttempt.peerId : void 0,\n        streamType: this.segment.stream.type\n      });\n      this.logger(\n        `${this.currentAttempt.downloadSource} ${this.segment.externalId} succeed`\n      );\n      this.requestProcessQueueCallback();\n    });\n    __publicField2(this, \"addLoadedChunk\", (chunk) => {\n      this.throwErrorIfNotLoadingStatus();\n      if (!this.currentAttempt || !this.progress) return;\n      this.notReceivingBytesTimeout.restart();\n      const { byteLength: byteLength2 } = chunk;\n      const { all: allBC, http: httpBC } = this.bandwidthCalculators;\n      allBC.addBytes(byteLength2);\n      if (this.currentAttempt.downloadSource === \"http\") {\n        httpBC.addBytes(byteLength2);\n      }\n      this.bytes.push(chunk);\n      this.progress.lastLoadedChunkTimestamp = performance.now();\n      this.progress.loadedBytes += byteLength2;\n      this._loadedBytes += byteLength2;\n    });\n    __publicField2(this, \"firstBytesReceived\", () => {\n      this.throwErrorIfNotLoadingStatus();\n      this.notReceivingBytesTimeout.restart();\n    });\n    this.segment = segment;\n    this.requestProcessQueueCallback = requestProcessQueueCallback;\n    this.bandwidthCalculators = bandwidthCalculators;\n    this.playback = playback;\n    this.playbackConfig = playbackConfig;\n    this.onSegmentError = eventTarget.getEventDispatcher(\"onSegmentError\");\n    this.onSegmentAbort = eventTarget.getEventDispatcher(\"onSegmentAbort\");\n    this.onSegmentStart = eventTarget.getEventDispatcher(\"onSegmentStart\");\n    this.onSegmentLoaded = eventTarget.getEventDispatcher(\"onSegmentLoaded\");\n    const { byteRange } = this.segment;\n    if (byteRange) {\n      const { end, start } = byteRange;\n      this._totalBytes = end - start + 1;\n    }\n    this.notReceivingBytesTimeout = new Timeout(this.abortOnTimeout);\n    const { type } = this.segment.stream;\n    this._logger = debug$3(`p2pml-core:request-${type}`);\n  }\n  clearLoadedBytes() {\n    this._loadedBytes = 0;\n    this.bytes = [];\n    this._totalBytes = void 0;\n    this.finalData = void 0;\n  }\n  get status() {\n    return this._status;\n  }\n  setStatus(status2) {\n    this._status = status2;\n    this._isHandledByProcessQueue = false;\n  }\n  get downloadSource() {\n    var _a;\n    return (_a = this.currentAttempt) == null ? void 0 : _a.downloadSource;\n  }\n  get loadedBytes() {\n    return this._loadedBytes;\n  }\n  get totalBytes() {\n    return this._totalBytes;\n  }\n  get data() {\n    if (!this.finalData) this.finalData = joinChunks(this.bytes);\n    return this.finalData;\n  }\n  get failedAttempts() {\n    return this._failedAttempts;\n  }\n  get isHandledByProcessQueue() {\n    return this._isHandledByProcessQueue;\n  }\n  markHandledByProcessQueue() {\n    this._isHandledByProcessQueue = true;\n  }\n  setTotalBytes(value) {\n    if (this._totalBytes !== void 0) {\n      throw new Error(\"Request total bytes value is already set\");\n    }\n    this._totalBytes = value;\n  }\n  start(requestData, controls) {\n    if (this._status === \"succeed\") {\n      throw new Error(\n        `Request ${this.segment.externalId} has been already succeed.`\n      );\n    }\n    if (this._status === \"loading\") {\n      throw new Error(\n        `Request ${this.segment.externalId} has been already started.`\n      );\n    }\n    this.setStatus(\"loading\");\n    this.currentAttempt = { ...requestData };\n    this.progress = {\n      startFromByte: this._loadedBytes,\n      loadedBytes: 0,\n      startTimestamp: performance.now()\n    };\n    this.manageBandwidthCalculatorsState(\"start\");\n    const { notReceivingBytesTimeoutMs, abort } = controls;\n    this._abortRequestCallback = abort;\n    if (notReceivingBytesTimeoutMs !== void 0) {\n      this.notReceivingBytesTimeout.start(notReceivingBytesTimeoutMs);\n    }\n    this.logger(\n      `${requestData.downloadSource} ${this.segment.externalId} started`\n    );\n    this.onSegmentStart({\n      segment: mapSegmentWithStreamToSegment(this.segment),\n      downloadSource: requestData.downloadSource,\n      peerId: requestData.downloadSource === \"p2p\" ? requestData.peerId : void 0\n    });\n    return {\n      firstBytesReceived: this.firstBytesReceived,\n      addLoadedChunk: this.addLoadedChunk,\n      completeOnSuccess: this.completeOnSuccess,\n      abortOnError: this.abortOnError\n    };\n  }\n  abortFromProcessQueue() {\n    var _a, _b, _c, _d;\n    this.throwErrorIfNotLoadingStatus();\n    this.setStatus(\"aborted\");\n    this.logger(\n      `${(_a = this.currentAttempt) == null ? void 0 : _a.downloadSource} ${this.segment.externalId} aborted`\n    );\n    (_b = this._abortRequestCallback) == null ? void 0 : _b.call(this, new RequestError(\"abort\"));\n    this.onSegmentAbort({\n      segment: mapSegmentWithStreamToSegment(this.segment),\n      downloadSource: (_c = this.currentAttempt) == null ? void 0 : _c.downloadSource,\n      peerId: ((_d = this.currentAttempt) == null ? void 0 : _d.downloadSource) === \"p2p\" ? this.currentAttempt.peerId : void 0,\n      streamType: this.segment.stream.type\n    });\n    this._abortRequestCallback = void 0;\n    this.manageBandwidthCalculatorsState(\"stop\");\n    this.notReceivingBytesTimeout.clear();\n  }\n  throwErrorIfNotLoadingStatus() {\n    if (this._status !== \"loading\") {\n      throw new Error(`Request has been already ${this.status}.`);\n    }\n  }\n  logger(message) {\n    var _a;\n    this._logger.color = ((_a = this.currentAttempt) == null ? void 0 : _a.downloadSource) === \"http\" ? \"green\" : \"red\";\n    this._logger(message);\n    this._logger.color = \"\";\n  }\n  manageBandwidthCalculatorsState(state) {\n    var _a;\n    const { all, http } = this.bandwidthCalculators;\n    const method = state === \"start\" ? \"startLoading\" : \"stopLoading\";\n    if (((_a = this.currentAttempt) == null ? void 0 : _a.downloadSource) === \"http\") http[method]();\n    all[method]();\n  }\n};\nclass FailedRequestAttempts {\n  constructor() {\n    __publicField2(this, \"attempts\", []);\n  }\n  add(attempt) {\n    this.attempts.push(attempt);\n  }\n  get httpAttemptsCount() {\n    return this.attempts.reduce(\n      (sum, attempt) => attempt.downloadSource === \"http\" ? sum + 1 : sum,\n      0\n    );\n  }\n  get lastAttempt() {\n    return this.attempts[this.attempts.length - 1];\n  }\n  clear() {\n    this.attempts = [];\n  }\n}\nclass Timeout {\n  constructor(action) {\n    __publicField2(this, \"timeoutId\");\n    __publicField2(this, \"ms\");\n    this.action = action;\n  }\n  start(ms2) {\n    if (this.timeoutId) {\n      throw new Error(\"Timeout is already started.\");\n    }\n    this.ms = ms2;\n    this.timeoutId = window.setTimeout(this.action, this.ms);\n  }\n  restart(ms2) {\n    if (this.timeoutId) clearTimeout(this.timeoutId);\n    if (ms2) this.ms = ms2;\n    if (!this.ms) return;\n    this.timeoutId = window.setTimeout(this.action, this.ms);\n  }\n  clear() {\n    clearTimeout(this.timeoutId);\n    this.timeoutId = void 0;\n  }\n}\nclass RequestsContainer {\n  constructor(requestProcessQueueCallback, bandwidthCalculators, playback, config, eventTarget) {\n    __publicField2(this, \"requests\", /* @__PURE__ */ new Map());\n    this.requestProcessQueueCallback = requestProcessQueueCallback;\n    this.bandwidthCalculators = bandwidthCalculators;\n    this.playback = playback;\n    this.config = config;\n    this.eventTarget = eventTarget;\n  }\n  get executingHttpCount() {\n    let count = 0;\n    for (const request of this.httpRequests()) {\n      if (request.status === \"loading\") count++;\n    }\n    return count;\n  }\n  get executingP2PCount() {\n    let count = 0;\n    for (const request of this.p2pRequests()) {\n      if (request.status === \"loading\") count++;\n    }\n    return count;\n  }\n  get(segment) {\n    return this.requests.get(segment);\n  }\n  getOrCreateRequest(segment) {\n    let request = this.requests.get(segment);\n    if (!request) {\n      request = new Request$1(\n        segment,\n        this.requestProcessQueueCallback,\n        this.bandwidthCalculators,\n        this.playback,\n        this.config,\n        this.eventTarget\n      );\n      this.requests.set(segment, request);\n    }\n    return request;\n  }\n  remove(request) {\n    this.requests.delete(request.segment);\n  }\n  items() {\n    return this.requests.values();\n  }\n  *httpRequests() {\n    for (const request of this.requests.values()) {\n      if (request.downloadSource === \"http\") yield request;\n    }\n  }\n  *p2pRequests() {\n    for (const request of this.requests.values()) {\n      if (request.downloadSource === \"p2p\") yield request;\n    }\n  }\n  destroy() {\n    for (const request of this.requests.values()) {\n      if (request.status !== \"loading\") continue;\n      request.abortFromProcessQueue();\n    }\n    this.requests.clear();\n  }\n}\nclass EngineRequest {\n  constructor(segment, engineCallbacks) {\n    __publicField2(this, \"_status\", \"pending\");\n    __publicField2(this, \"_shouldBeStartedImmediately\", false);\n    this.segment = segment;\n    this.engineCallbacks = engineCallbacks;\n  }\n  get status() {\n    return this._status;\n  }\n  get shouldBeStartedImmediately() {\n    return this._shouldBeStartedImmediately;\n  }\n  resolve(data, bandwidth) {\n    if (this._status !== \"pending\") return;\n    this._status = \"succeed\";\n    this.engineCallbacks.onSuccess({ data, bandwidth });\n  }\n  reject() {\n    if (this._status !== \"pending\") return;\n    this._status = \"failed\";\n    this.engineCallbacks.onError(new CoreRequestError(\"failed\"));\n  }\n  abort() {\n    if (this._status !== \"pending\") return;\n    this._status = \"aborted\";\n    this.engineCallbacks.onError(new CoreRequestError(\"aborted\"));\n  }\n  markAsShouldBeStartedImmediately() {\n    this._shouldBeStartedImmediately = true;\n  }\n}\nfunction* generateQueue(lastRequestedSegment, playback, playbackConfig, currentP2PLoader, availablePercentMemory) {\n  const { runtimeId, stream } = lastRequestedSegment;\n  const requestedSegment = stream.segments.get(runtimeId);\n  if (!requestedSegment) return;\n  const queueSegments = stream.segments.values();\n  let first;\n  do {\n    const next = queueSegments.next();\n    if (next.done) return;\n    first = next.value;\n  } while (first !== requestedSegment);\n  const firstStatuses = getSegmentPlaybackStatuses(\n    first,\n    playback,\n    playbackConfig,\n    currentP2PLoader,\n    availablePercentMemory\n  );\n  if (isNotActualStatuses(firstStatuses)) {\n    const next = queueSegments.next();\n    if (next.done) return;\n    const second = next.value;\n    const secondStatuses = getSegmentPlaybackStatuses(\n      second,\n      playback,\n      playbackConfig,\n      currentP2PLoader,\n      availablePercentMemory\n    );\n    if (isNotActualStatuses(secondStatuses)) return;\n    firstStatuses.isHighDemand = true;\n    yield { segment: first, statuses: firstStatuses };\n    yield { segment: second, statuses: secondStatuses };\n  } else {\n    yield { segment: first, statuses: firstStatuses };\n  }\n  for (const segment of queueSegments) {\n    const statuses = getSegmentPlaybackStatuses(\n      segment,\n      playback,\n      playbackConfig,\n      currentP2PLoader,\n      availablePercentMemory\n    );\n    if (isNotActualStatuses(statuses)) break;\n    yield { segment, statuses };\n  }\n}\nfunction isNotActualStatuses(statuses) {\n  const {\n    isHighDemand = false,\n    isHttpDownloadable = false,\n    isP2PDownloadable = false\n  } = statuses;\n  return !isHighDemand && !isHttpDownloadable && !isP2PDownloadable;\n}\nconst FAILED_ATTEMPTS_CLEAR_INTERVAL = 6e4;\nconst PEER_UPDATE_LATENCY = 1e3;\nclass HybridLoader {\n  constructor(streamManifestUrl, lastRequestedSegment, streamDetails, config, bandwidthCalculators, segmentStorage, eventTarget) {\n    __publicField2(this, \"requests\");\n    __publicField2(this, \"engineRequest\");\n    __publicField2(this, \"p2pLoaders\");\n    __publicField2(this, \"playback\");\n    __publicField2(this, \"segmentAvgDuration\");\n    __publicField2(this, \"logger\");\n    __publicField2(this, \"storageCleanUpIntervalId\");\n    __publicField2(this, \"levelChangedTimestamp\");\n    __publicField2(this, \"lastQueueProcessingTimeStamp\");\n    __publicField2(this, \"randomHttpDownloadInterval\");\n    __publicField2(this, \"isProcessQueueMicrotaskCreated\", false);\n    __publicField2(this, \"requestProcessQueueMicrotask\", (force = true) => {\n      const now2 = performance.now();\n      if (!force && this.lastQueueProcessingTimeStamp !== void 0 && now2 - this.lastQueueProcessingTimeStamp <= 1e3 || this.isProcessQueueMicrotaskCreated) {\n        return;\n      }\n      this.isProcessQueueMicrotaskCreated = true;\n      queueMicrotask(() => {\n        try {\n          this.processQueue();\n          this.lastQueueProcessingTimeStamp = now2;\n        } finally {\n          this.isProcessQueueMicrotaskCreated = false;\n        }\n      });\n    });\n    this.streamManifestUrl = streamManifestUrl;\n    this.lastRequestedSegment = lastRequestedSegment;\n    this.streamDetails = streamDetails;\n    this.config = config;\n    this.bandwidthCalculators = bandwidthCalculators;\n    this.segmentStorage = segmentStorage;\n    this.eventTarget = eventTarget;\n    const activeStream = this.lastRequestedSegment.stream;\n    this.playback = { position: this.lastRequestedSegment.startTime, rate: 1 };\n    this.segmentAvgDuration = getSegmentAvgDuration(activeStream);\n    this.requests = new RequestsContainer(\n      this.requestProcessQueueMicrotask,\n      this.bandwidthCalculators,\n      this.playback,\n      this.config,\n      this.eventTarget\n    );\n    this.p2pLoaders = new P2PLoadersContainer(\n      this.streamManifestUrl,\n      this.lastRequestedSegment.stream,\n      this.requests,\n      this.segmentStorage,\n      this.config,\n      this.eventTarget,\n      this.requestProcessQueueMicrotask\n    );\n    this.logger = debug$3(`p2pml-core:hybrid-loader-${activeStream.type}`);\n    this.logger.color = \"coral\";\n    this.setIntervalLoading();\n  }\n  setIntervalLoading() {\n    const peersCount = this.p2pLoaders.currentLoader.connectedPeerCount;\n    const randomTimeout = Math.random() * PEER_UPDATE_LATENCY * peersCount + PEER_UPDATE_LATENCY;\n    this.randomHttpDownloadInterval = window.setTimeout(() => {\n      this.loadRandomThroughHttp();\n      this.setIntervalLoading();\n    }, randomTimeout);\n  }\n  // api method for engines\n  async loadSegment(segment, callbacks) {\n    var _a;\n    this.logger(`requests: ${getSegmentString(segment)}`);\n    const { stream } = segment;\n    if (stream !== this.lastRequestedSegment.stream) {\n      this.logger(`stream changed to ${getStreamString(stream)}`);\n      this.p2pLoaders.changeCurrentLoader(stream);\n    }\n    this.lastRequestedSegment = segment;\n    const swarmId = this.config.swarmId ?? this.streamManifestUrl;\n    const streamSwarmId = getStreamSwarmId(swarmId, stream);\n    this.segmentStorage.onSegmentRequested(\n      swarmId,\n      streamSwarmId,\n      segment.externalId,\n      segment.startTime,\n      segment.endTime,\n      stream.type,\n      this.streamDetails.isLive\n    );\n    const engineRequest = new EngineRequest(segment, callbacks);\n    try {\n      const hasSegment = this.segmentStorage.hasSegment(\n        swarmId,\n        streamSwarmId,\n        segment.externalId\n      );\n      if (hasSegment) {\n        const data = await this.segmentStorage.getSegmentData(\n          swarmId,\n          streamSwarmId,\n          segment.externalId\n        );\n        if (data) {\n          const { queueDownloadRatio } = this.generateQueue();\n          engineRequest.resolve(data, this.getBandwidth(queueDownloadRatio));\n          return;\n        }\n      }\n      (_a = this.engineRequest) == null ? void 0 : _a.abort();\n      this.engineRequest = engineRequest;\n    } catch {\n      engineRequest.reject();\n    } finally {\n      this.requestProcessQueueMicrotask();\n    }\n  }\n  processRequests(queueSegmentIds, queueDownloadRatio) {\n    var _a;\n    const { stream } = this.lastRequestedSegment;\n    const { httpErrorRetries } = this.config;\n    const now2 = performance.now();\n    for (const request of this.requests.items()) {\n      const {\n        downloadSource: type,\n        status: status2,\n        segment,\n        isHandledByProcessQueue\n      } = request;\n      const engineRequest = ((_a = this.engineRequest) == null ? void 0 : _a.segment) === segment ? this.engineRequest : void 0;\n      switch (status2) {\n        case \"loading\":\n          if (!queueSegmentIds.has(segment.runtimeId) && !engineRequest) {\n            request.abortFromProcessQueue();\n            this.requests.remove(request);\n          }\n          break;\n        case \"succeed\": {\n          if (!type) break;\n          if (type === \"http\") {\n            this.p2pLoaders.currentLoader.broadcastAnnouncement();\n          }\n          if (engineRequest) {\n            engineRequest.resolve(\n              request.data,\n              this.getBandwidth(queueDownloadRatio)\n            );\n            this.engineRequest = void 0;\n          }\n          this.requests.remove(request);\n          const swarmId = this.config.swarmId ?? this.streamManifestUrl;\n          const streamSwarmId = getStreamSwarmId(swarmId, stream);\n          void this.segmentStorage.storeSegment(\n            swarmId,\n            streamSwarmId,\n            segment.externalId,\n            request.data,\n            segment.startTime,\n            segment.endTime,\n            segment.stream.type,\n            this.streamDetails.isLive\n          );\n          break;\n        }\n        case \"failed\":\n          if (type === \"http\" && !isHandledByProcessQueue) {\n            this.p2pLoaders.currentLoader.broadcastAnnouncement();\n          }\n          if (!engineRequest && !stream.segments.has(request.segment.runtimeId)) {\n            this.requests.remove(request);\n          }\n          if (request.failedAttempts.httpAttemptsCount >= httpErrorRetries && engineRequest) {\n            this.engineRequest = void 0;\n            engineRequest.reject();\n          }\n          break;\n        case \"not-started\":\n          this.requests.remove(request);\n          break;\n        case \"aborted\":\n          this.requests.remove(request);\n          break;\n      }\n      request.markHandledByProcessQueue();\n      const { lastAttempt } = request.failedAttempts;\n      if (lastAttempt && now2 - lastAttempt.error.timestamp > FAILED_ATTEMPTS_CLEAR_INTERVAL) {\n        request.failedAttempts.clear();\n      }\n    }\n  }\n  processQueue() {\n    var _a;\n    const { queue: queue2, queueSegmentIds, queueDownloadRatio } = this.generateQueue();\n    this.processRequests(queueSegmentIds, queueDownloadRatio);\n    const {\n      simultaneousHttpDownloads,\n      simultaneousP2PDownloads,\n      httpErrorRetries\n    } = this.config;\n    if (((_a = this.engineRequest) == null ? void 0 : _a.shouldBeStartedImmediately) && this.engineRequest.status === \"pending\" && this.requests.executingHttpCount < simultaneousHttpDownloads) {\n      const { segment } = this.engineRequest;\n      const request = this.requests.get(segment);\n      if (!request || request.status === \"not-started\" || request.status === \"failed\" && request.failedAttempts.httpAttemptsCount < this.config.httpErrorRetries) {\n        this.loadThroughHttp(segment);\n      }\n    }\n    for (const item of queue2) {\n      const { statuses, segment } = item;\n      const request = this.requests.get(segment);\n      if (statuses.isHighDemand) {\n        if ((request == null ? void 0 : request.downloadSource) === \"http\" && request.status === \"loading\") {\n          continue;\n        }\n        if ((request == null ? void 0 : request.downloadSource) === \"http\" && request.status === \"failed\" && request.failedAttempts.httpAttemptsCount >= httpErrorRetries) {\n          continue;\n        }\n        const isP2PLoadingRequest = (request == null ? void 0 : request.status) === \"loading\" && request.downloadSource === \"p2p\";\n        if (this.requests.executingHttpCount < simultaneousHttpDownloads) {\n          if (isP2PLoadingRequest) request.abortFromProcessQueue();\n          this.loadThroughHttp(segment);\n          continue;\n        }\n        if (this.abortLastHttpLoadingInQueueAfterItem(queue2, segment) && this.requests.executingHttpCount < simultaneousHttpDownloads) {\n          if (isP2PLoadingRequest) request.abortFromProcessQueue();\n          this.loadThroughHttp(segment);\n          continue;\n        }\n        if (isP2PLoadingRequest) continue;\n        if (this.requests.executingP2PCount < simultaneousP2PDownloads) {\n          this.loadThroughP2P(segment);\n          continue;\n        }\n        if (this.abortLastP2PLoadingInQueueAfterItem(queue2, segment) && this.requests.executingP2PCount < simultaneousP2PDownloads) {\n          this.loadThroughP2P(segment);\n          continue;\n        }\n      } else if (statuses.isP2PDownloadable) {\n        if ((request == null ? void 0 : request.status) === \"loading\") continue;\n        if (this.requests.executingP2PCount < simultaneousP2PDownloads) {\n          this.loadThroughP2P(segment);\n        } else if (this.p2pLoaders.currentLoader.isSegmentLoadedBySomeone(segment)) {\n          if (this.abortLastP2PLoadingInQueueAfterItem(queue2, segment) && this.requests.executingP2PCount < simultaneousP2PDownloads) {\n            this.loadThroughP2P(segment);\n          }\n        }\n      }\n    }\n  }\n  // api method for engines\n  abortSegmentRequest(segmentRuntimeId) {\n    var _a;\n    if (((_a = this.engineRequest) == null ? void 0 : _a.segment.runtimeId) !== segmentRuntimeId) return;\n    this.engineRequest.abort();\n    this.logger(\n      \"abort: \",\n      getSegmentString(this.engineRequest.segment)\n    );\n    this.engineRequest = void 0;\n    this.requestProcessQueueMicrotask();\n  }\n  loadThroughHttp(segment) {\n    const request = this.requests.getOrCreateRequest(segment);\n    new HttpRequestExecutor(request, this.config, this.eventTarget);\n    this.p2pLoaders.currentLoader.broadcastAnnouncement();\n  }\n  loadThroughP2P(segment) {\n    this.p2pLoaders.currentLoader.downloadSegment(segment);\n  }\n  loadRandomThroughHttp() {\n    const availableStorageCapacityPercent = this.getAvailableStorageCapacityPercent();\n    if (availableStorageCapacityPercent <= 10) return;\n    const { simultaneousHttpDownloads, httpErrorRetries } = this.config;\n    const p2pLoader = this.p2pLoaders.currentLoader;\n    if (this.requests.executingHttpCount >= simultaneousHttpDownloads || !p2pLoader.connectedPeerCount) {\n      return;\n    }\n    const segmentsToLoad = [];\n    for (const { segment, statuses } of generateQueue(\n      this.lastRequestedSegment,\n      this.playback,\n      this.config,\n      this.p2pLoaders.currentLoader,\n      availableStorageCapacityPercent\n    )) {\n      const swarmId = this.config.swarmId ?? this.streamManifestUrl;\n      const streamSwarmId = getStreamSwarmId(\n        swarmId,\n        segment.stream\n      );\n      if (!statuses.isHttpDownloadable || statuses.isP2PDownloadable || this.segmentStorage.hasSegment(\n        swarmId,\n        streamSwarmId,\n        segment.externalId\n      )) {\n        continue;\n      }\n      const request = this.requests.get(segment);\n      if (request && (request.status === \"loading\" || request.status === \"succeed\" || request.failedAttempts.httpAttemptsCount >= httpErrorRetries)) {\n        continue;\n      }\n      segmentsToLoad.push(segment);\n    }\n    if (!segmentsToLoad.length) return;\n    const availableHttpDownloads = simultaneousHttpDownloads - this.requests.executingHttpCount;\n    if (availableHttpDownloads === 0) return;\n    const peersCount = p2pLoader.connectedPeerCount + 1;\n    const safeRandomSegmentsCount = Math.min(\n      segmentsToLoad.length,\n      simultaneousHttpDownloads * peersCount\n    );\n    const randomIndices = shuffleArray(\n      Array.from({ length: safeRandomSegmentsCount }, (_, i) => i)\n    );\n    let probability = safeRandomSegmentsCount / peersCount;\n    for (const randomIndex of randomIndices) {\n      if (this.requests.executingHttpCount >= simultaneousHttpDownloads) {\n        break;\n      }\n      if (probability >= 1 || Math.random() <= probability) {\n        const segment = segmentsToLoad[randomIndex];\n        this.loadThroughHttp(segment);\n      }\n      probability--;\n      if (probability <= 0) break;\n    }\n  }\n  abortLastHttpLoadingInQueueAfterItem(queue2, segment) {\n    for (const { segment: itemSegment } of arrayBackwards(queue2)) {\n      if (itemSegment === segment) break;\n      const request = this.requests.get(itemSegment);\n      if ((request == null ? void 0 : request.downloadSource) === \"http\" && request.status === \"loading\") {\n        request.abortFromProcessQueue();\n        return true;\n      }\n    }\n    return false;\n  }\n  abortLastP2PLoadingInQueueAfterItem(queue2, segment) {\n    for (const { segment: itemSegment } of arrayBackwards(queue2)) {\n      if (itemSegment === segment) break;\n      const request = this.requests.get(itemSegment);\n      if ((request == null ? void 0 : request.downloadSource) === \"p2p\" && request.status === \"loading\") {\n        request.abortFromProcessQueue();\n        return true;\n      }\n    }\n    return false;\n  }\n  getAvailableStorageCapacityPercent() {\n    const { totalCapacity, usedCapacity } = this.segmentStorage.getUsage();\n    return 100 - usedCapacity / totalCapacity * 100;\n  }\n  generateQueue() {\n    var _a;\n    const queue2 = [];\n    const queueSegmentIds = /* @__PURE__ */ new Set();\n    let maxPossibleLength = 0;\n    let alreadyLoadedCount = 0;\n    const availableStorageCapacityPercent = this.getAvailableStorageCapacityPercent();\n    for (const item of generateQueue(\n      this.lastRequestedSegment,\n      this.playback,\n      this.config,\n      this.p2pLoaders.currentLoader,\n      availableStorageCapacityPercent\n    )) {\n      maxPossibleLength++;\n      const { segment } = item;\n      const swarmId = this.config.swarmId ?? this.streamManifestUrl;\n      const streamSwarmId = getStreamSwarmId(\n        swarmId,\n        segment.stream\n      );\n      if (this.segmentStorage.hasSegment(\n        swarmId,\n        streamSwarmId,\n        segment.externalId\n      ) || ((_a = this.requests.get(segment)) == null ? void 0 : _a.status) === \"succeed\") {\n        alreadyLoadedCount++;\n        continue;\n      }\n      queue2.push(item);\n      queueSegmentIds.add(segment.runtimeId);\n    }\n    return {\n      queue: queue2,\n      queueSegmentIds,\n      maxPossibleLength,\n      alreadyLoadedCount,\n      queueDownloadRatio: maxPossibleLength !== 0 ? alreadyLoadedCount / maxPossibleLength : 0\n    };\n  }\n  getBandwidth(queueDownloadRatio) {\n    const { http, all } = this.bandwidthCalculators;\n    const { activeLevelBitrate } = this.streamDetails;\n    if (this.streamDetails.activeLevelBitrate === 0) {\n      return all.getBandwidthLoadingOnly(3);\n    }\n    const bandwidth = Math.max(\n      all.getBandwidth(30, this.levelChangedTimestamp),\n      all.getBandwidth(60, this.levelChangedTimestamp),\n      all.getBandwidth(90, this.levelChangedTimestamp)\n    );\n    if (queueDownloadRatio >= 0.8 || bandwidth >= activeLevelBitrate * 0.9) {\n      return Math.max(\n        all.getBandwidthLoadingOnly(1),\n        all.getBandwidthLoadingOnly(3),\n        all.getBandwidthLoadingOnly(5)\n      );\n    }\n    const httpRealBandwidth = Math.max(\n      http.getBandwidthLoadingOnly(1),\n      http.getBandwidthLoadingOnly(3),\n      http.getBandwidthLoadingOnly(5)\n    );\n    return Math.max(bandwidth, httpRealBandwidth);\n  }\n  notifyLevelChanged() {\n    this.levelChangedTimestamp = performance.now();\n  }\n  sendBroadcastAnnouncement(sendEmptySegmentsAnnouncement = false) {\n    this.p2pLoaders.currentLoader.broadcastAnnouncement(\n      sendEmptySegmentsAnnouncement\n    );\n  }\n  updatePlayback(position, rate) {\n    var _a;\n    const isRateChanged = this.playback.rate !== rate;\n    const isPositionChanged = this.playback.position !== position;\n    if (!isRateChanged && !isPositionChanged) return;\n    const isPositionSignificantlyChanged = Math.abs(position - this.playback.position) / this.segmentAvgDuration > 0.5;\n    if (isPositionChanged) this.playback.position = position;\n    if (isRateChanged && rate !== 0) this.playback.rate = rate;\n    if (isPositionSignificantlyChanged) {\n      this.logger(\"position significantly changed\");\n      (_a = this.engineRequest) == null ? void 0 : _a.markAsShouldBeStartedImmediately();\n    }\n    this.segmentStorage.onPlaybackUpdated(position, rate);\n    this.requestProcessQueueMicrotask(isPositionSignificantlyChanged);\n  }\n  updateStream(stream) {\n    if (stream !== this.lastRequestedSegment.stream) return;\n    this.logger(`update stream: ${getStreamString(stream)}`);\n    this.requestProcessQueueMicrotask();\n  }\n  destroy() {\n    var _a;\n    clearInterval(this.storageCleanUpIntervalId);\n    clearInterval(this.randomHttpDownloadInterval);\n    this.storageCleanUpIntervalId = void 0;\n    (_a = this.engineRequest) == null ? void 0 : _a.abort();\n    this.requests.destroy();\n    this.p2pLoaders.destroy();\n  }\n}\nclass BandwidthCalculator {\n  constructor(clearThresholdMs = 2e4) {\n    __publicField2(this, \"loadingsCount\", 0);\n    __publicField2(this, \"bytes\", []);\n    __publicField2(this, \"loadingOnlyTimestamps\", []);\n    __publicField2(this, \"timestamps\", []);\n    __publicField2(this, \"noLoadingsTime\", 0);\n    __publicField2(this, \"loadingsStoppedAt\", 0);\n    this.clearThresholdMs = clearThresholdMs;\n  }\n  addBytes(bytesLength, now2 = performance.now()) {\n    this.bytes.push(bytesLength);\n    this.loadingOnlyTimestamps.push(now2 - this.noLoadingsTime);\n    this.timestamps.push(now2);\n  }\n  startLoading(now2 = performance.now()) {\n    this.clearStale();\n    if (this.loadingsCount === 0 && this.loadingsStoppedAt !== 0) {\n      this.noLoadingsTime += now2 - this.loadingsStoppedAt;\n    }\n    this.loadingsCount++;\n  }\n  stopLoading(now2 = performance.now()) {\n    if (this.loadingsCount > 0) {\n      this.loadingsCount--;\n      if (this.loadingsCount === 0) this.loadingsStoppedAt = now2;\n    }\n  }\n  getBandwidthLoadingOnly(seconds, ignoreThresholdTimestamp = Number.NEGATIVE_INFINITY) {\n    if (!this.loadingOnlyTimestamps.length) return 0;\n    const milliseconds = seconds * 1e3;\n    const lastItemTimestamp = this.loadingOnlyTimestamps[this.loadingOnlyTimestamps.length - 1];\n    let lastCountedTimestamp = lastItemTimestamp;\n    const threshold = lastItemTimestamp - milliseconds;\n    let totalBytes = 0;\n    for (let i = this.bytes.length - 1; i >= 0; i--) {\n      const timestamp = this.loadingOnlyTimestamps[i];\n      if (timestamp < threshold || this.timestamps[i] < ignoreThresholdTimestamp) {\n        break;\n      }\n      lastCountedTimestamp = timestamp;\n      totalBytes += this.bytes[i];\n    }\n    return totalBytes * 8e3 / (lastItemTimestamp - lastCountedTimestamp);\n  }\n  getBandwidth(seconds, ignoreThresholdTimestamp = Number.NEGATIVE_INFINITY, now2 = performance.now()) {\n    if (!this.timestamps.length) return 0;\n    const milliseconds = seconds * 1e3;\n    const threshold = now2 - milliseconds;\n    let lastCountedTimestamp = now2;\n    let totalBytes = 0;\n    for (let i = this.bytes.length - 1; i >= 0; i--) {\n      const timestamp = this.timestamps[i];\n      if (timestamp < threshold || timestamp < ignoreThresholdTimestamp) break;\n      lastCountedTimestamp = timestamp;\n      totalBytes += this.bytes[i];\n    }\n    return totalBytes * 8e3 / (now2 - lastCountedTimestamp);\n  }\n  clearStale() {\n    if (!this.loadingOnlyTimestamps.length) return;\n    const threshold = this.loadingOnlyTimestamps[this.loadingOnlyTimestamps.length - 1] - this.clearThresholdMs;\n    let samplesToRemove = 0;\n    for (const timestamp of this.loadingOnlyTimestamps) {\n      if (timestamp > threshold) break;\n      samplesToRemove++;\n    }\n    this.bytes.splice(0, samplesToRemove);\n    this.loadingOnlyTimestamps.splice(0, samplesToRemove);\n    this.timestamps.splice(0, samplesToRemove);\n  }\n}\nconst getStorageItemId = (streamId, segmentId) => `${streamId}|${segmentId}`;\nconst isAndroid = (userAgent) => /Android/i.test(userAgent);\nconst isIPadOrIPhone = (userAgent) => /iPad|iPhone/i.test(userAgent);\nconst isAndroidWebview = (userAgent) => /Android/i.test(userAgent) && !/Chrome|Firefox/i.test(userAgent);\nconst BYTES_PER_MiB = 1048576;\nclass SegmentMemoryStorage {\n  constructor() {\n    __publicField2(this, \"userAgent\", navigator.userAgent);\n    __publicField2(this, \"segmentMemoryStorageLimit\", 4 * 1024);\n    __publicField2(this, \"currentStorageUsage\", 0);\n    __publicField2(this, \"cache\", /* @__PURE__ */ new Map());\n    __publicField2(this, \"logger\");\n    __publicField2(this, \"coreConfig\");\n    __publicField2(this, \"mainStreamConfig\");\n    __publicField2(this, \"secondaryStreamConfig\");\n    __publicField2(this, \"currentPlayback\");\n    __publicField2(this, \"lastRequestedSegment\");\n    __publicField2(this, \"segmentChangeCallback\");\n    this.logger = debug$3(\"p2pml-core:segment-memory-storage\");\n    this.logger.color = \"RebeccaPurple\";\n  }\n  // eslint-disable-next-line @typescript-eslint/require-await\n  async initialize(coreConfig, mainStreamConfig, secondaryStreamConfig) {\n    this.coreConfig = coreConfig;\n    this.mainStreamConfig = mainStreamConfig;\n    this.secondaryStreamConfig = secondaryStreamConfig;\n    this.setMemoryStorageLimit();\n    this.logger(\"initialized\");\n  }\n  onPlaybackUpdated(position, rate) {\n    this.currentPlayback = { position, rate };\n  }\n  onSegmentRequested(swarmId, streamId, segmentId, startTime, endTime, streamType, isLiveStream) {\n    this.lastRequestedSegment = {\n      streamId,\n      segmentId,\n      startTime,\n      endTime,\n      swarmId,\n      streamType,\n      isLiveStream\n    };\n  }\n  // eslint-disable-next-line @typescript-eslint/require-await\n  async storeSegment(_swarmId, streamId, segmentId, data, startTime, endTime, streamType, isLiveStream) {\n    this.clear(isLiveStream, data.byteLength);\n    const storageId = getStorageItemId(streamId, segmentId);\n    this.cache.set(storageId, {\n      data,\n      segmentId,\n      streamId,\n      startTime,\n      endTime,\n      streamType\n    });\n    this.increaseStorageUsage(data.byteLength);\n    this.logger(`add segment: ${segmentId} to ${streamId}`);\n    if (!this.segmentChangeCallback) {\n      throw new Error(\"dispatchStorageUpdatedEvent is not set\");\n    }\n    this.segmentChangeCallback(streamId);\n  }\n  // eslint-disable-next-line @typescript-eslint/require-await\n  async getSegmentData(_swarmId, streamId, segmentId) {\n    const segmentStorageId = getStorageItemId(streamId, segmentId);\n    const dataItem = this.cache.get(segmentStorageId);\n    if (dataItem === void 0) return void 0;\n    return dataItem.data;\n  }\n  getUsage() {\n    if (!this.lastRequestedSegment || !this.currentPlayback) {\n      return {\n        totalCapacity: this.segmentMemoryStorageLimit,\n        usedCapacity: this.currentStorageUsage\n      };\n    }\n    const playbackPosition = this.currentPlayback.position;\n    let calculatedUsedCapacity = 0;\n    for (const { endTime, data } of this.cache.values()) {\n      if (playbackPosition > endTime) continue;\n      calculatedUsedCapacity += data.byteLength;\n    }\n    return {\n      totalCapacity: this.segmentMemoryStorageLimit,\n      usedCapacity: calculatedUsedCapacity / BYTES_PER_MiB\n    };\n  }\n  hasSegment(_swarmId, streamId, externalId) {\n    const segmentStorageId = getStorageItemId(streamId, externalId);\n    const segment = this.cache.get(segmentStorageId);\n    return segment !== void 0;\n  }\n  getStoredSegmentIds(_swarmId, streamId) {\n    const externalIds = [];\n    for (const { segmentId, streamId: streamCacheId } of this.cache.values()) {\n      if (streamCacheId !== streamId) continue;\n      externalIds.push(segmentId);\n    }\n    return externalIds;\n  }\n  clear(isLiveStream, newSegmentSize) {\n    if (!this.currentPlayback || !this.mainStreamConfig || !this.secondaryStreamConfig || !this.coreConfig) {\n      return;\n    }\n    const isMemoryLimitReached = this.isMemoryLimitReached(newSegmentSize);\n    if (!isMemoryLimitReached && !isLiveStream) return;\n    const affectedStreams = /* @__PURE__ */ new Set();\n    const sortedCache = Array.from(this.cache.values()).sort(\n      (a, b) => a.startTime - b.startTime\n    );\n    for (const segmentData of sortedCache) {\n      const { streamId, segmentId, data } = segmentData;\n      const storageId = getStorageItemId(streamId, segmentId);\n      const shouldRemove = this.shouldRemoveSegment(\n        segmentData,\n        isLiveStream,\n        this.currentPlayback.position\n      );\n      if (!shouldRemove) continue;\n      this.cache.delete(storageId);\n      affectedStreams.add(streamId);\n      this.decreaseStorageUsage(data.byteLength);\n      this.logger(`Removed segment ${segmentId} from stream ${streamId}`);\n      if (!this.isMemoryLimitReached(newSegmentSize) && !isLiveStream) break;\n    }\n    this.sendUpdatesToAffectedStreams(affectedStreams);\n  }\n  isMemoryLimitReached(segmentByteLength) {\n    return this.currentStorageUsage + segmentByteLength / BYTES_PER_MiB > this.segmentMemoryStorageLimit;\n  }\n  setSegmentChangeCallback(callback) {\n    this.segmentChangeCallback = callback;\n  }\n  sendUpdatesToAffectedStreams(affectedStreams) {\n    if (affectedStreams.size === 0) return;\n    affectedStreams.forEach((stream) => {\n      if (!this.segmentChangeCallback) {\n        throw new Error(\"dispatchStorageUpdatedEvent is not set\");\n      }\n      this.segmentChangeCallback(stream);\n    });\n  }\n  shouldRemoveSegment(segmentData, isLiveStream, currentPlaybackPosition) {\n    const { endTime, streamType } = segmentData;\n    const highDemandTimeWindow = this.getStreamTimeWindow(\n      streamType,\n      \"highDemandTimeWindow\"\n    );\n    if (currentPlaybackPosition <= endTime) return false;\n    if (isLiveStream) {\n      return currentPlaybackPosition > highDemandTimeWindow + endTime;\n    }\n    return true;\n  }\n  increaseStorageUsage(segmentByteLength) {\n    this.currentStorageUsage += segmentByteLength / BYTES_PER_MiB;\n  }\n  decreaseStorageUsage(segmentByteLength) {\n    this.currentStorageUsage -= segmentByteLength / BYTES_PER_MiB;\n  }\n  setMemoryStorageLimit() {\n    var _a;\n    if ((_a = this.coreConfig) == null ? void 0 : _a.segmentMemoryStorageLimit) {\n      this.segmentMemoryStorageLimit = this.coreConfig.segmentMemoryStorageLimit;\n      return;\n    }\n    if (isAndroidWebview(this.userAgent) || isIPadOrIPhone(this.userAgent)) {\n      this.segmentMemoryStorageLimit = 1024;\n    } else if (isAndroid(this.userAgent)) {\n      this.segmentMemoryStorageLimit = 2 * 1024;\n    }\n  }\n  getStreamTimeWindow(streamType, configKey) {\n    const config = streamType === \"main\" ? this.mainStreamConfig : this.secondaryStreamConfig;\n    return (config == null ? void 0 : config[configKey]) ?? 0;\n  }\n  destroy() {\n    this.cache.clear();\n  }\n}\nclass EventTarget {\n  constructor() {\n    __publicField2(this, \"events\", /* @__PURE__ */ new Map());\n  }\n  dispatchEvent(eventName, ...args) {\n    const listeners = this.events.get(eventName);\n    if (!listeners) return;\n    for (const listener of listeners) {\n      listener(...args);\n    }\n  }\n  getEventDispatcher(eventName) {\n    let listeners = this.events.get(eventName);\n    if (!listeners) {\n      listeners = [];\n      this.events.set(eventName, listeners);\n    }\n    const definedListeners = listeners;\n    return (...args) => {\n      for (const listener of definedListeners) {\n        listener(...args);\n      }\n    };\n  }\n  addEventListener(eventName, listener) {\n    const listeners = this.events.get(eventName);\n    if (!listeners) {\n      this.events.set(eventName, [listener]);\n    } else {\n      listeners.push(listener);\n    }\n  }\n  removeEventListener(eventName, listener) {\n    const listeners = this.events.get(eventName);\n    if (listeners) {\n      const index = listeners.indexOf(listener);\n      if (index !== -1) {\n        listeners.splice(index, 1);\n      }\n    }\n  }\n}\nconst _Core = class _Core2 {\n  /**\n   * Constructs a new Core instance with optional initial configuration.\n   *\n   * @param config - Optional partial configuration to override default settings.\n   *\n   * @example\n   * // Create a Core instance with custom configuration for HTTP and P2P downloads.\n   * const core = new Core({\n   *   simultaneousHttpDownloads: 5,\n   *   simultaneousP2PDownloads: 5,\n   *   httpErrorRetries: 5,\n   *   p2pErrorRetries: 5\n   * });\n   *\n   * @example\n   * // Create a Core instance using the default configuration.\n   * const core = new Core();\n   */\n  constructor(config) {\n    __publicField2(this, \"eventTarget\", new EventTarget());\n    __publicField2(this, \"manifestResponseUrl\");\n    __publicField2(this, \"streams\", /* @__PURE__ */ new Map());\n    __publicField2(this, \"mainStreamConfig\");\n    __publicField2(this, \"secondaryStreamConfig\");\n    __publicField2(this, \"commonCoreConfig\");\n    __publicField2(this, \"bandwidthCalculators\", {\n      all: new BandwidthCalculator(),\n      http: new BandwidthCalculator()\n    });\n    __publicField2(this, \"segmentStorage\");\n    __publicField2(this, \"mainStreamLoader\");\n    __publicField2(this, \"secondaryStreamLoader\");\n    __publicField2(this, \"streamDetails\", {\n      isLive: false,\n      activeLevelBitrate: 0\n    });\n    const filteredConfig = filterUndefinedProps(config ?? {});\n    this.commonCoreConfig = mergeAndFilterConfig({\n      defaultConfig: _Core2.DEFAULT_COMMON_CORE_CONFIG,\n      baseConfig: filteredConfig\n    });\n    this.mainStreamConfig = mergeAndFilterConfig({\n      defaultConfig: _Core2.DEFAULT_STREAM_CONFIG,\n      baseConfig: filteredConfig,\n      specificStreamConfig: filteredConfig.mainStream\n    });\n    this.secondaryStreamConfig = mergeAndFilterConfig({\n      defaultConfig: _Core2.DEFAULT_STREAM_CONFIG,\n      baseConfig: filteredConfig,\n      specificStreamConfig: filteredConfig.secondaryStream\n    });\n  }\n  /**\n   * Retrieves the current configuration for the core instance, ensuring immutability.\n   *\n   * @returns A deep readonly version of the core configuration.\n   */\n  getConfig() {\n    return {\n      ...deepCopy(this.commonCoreConfig),\n      mainStream: deepCopy(this.mainStreamConfig),\n      secondaryStream: deepCopy(this.secondaryStreamConfig)\n    };\n  }\n  /**\n   * Applies a set of dynamic configuration updates to the core, merging with the existing configuration.\n   *\n   * @param dynamicConfig - A set of configuration changes to apply.\n   *\n   * @example\n   * // Example of dynamically updating the download time windows and timeout settings.\n   * const dynamicConfig = {\n   *   httpDownloadTimeWindow: 60,  // Set HTTP download time window to 60 seconds\n   *   p2pDownloadTimeWindow: 60,   // Set P2P download time window to 60 seconds\n   *   httpNotReceivingBytesTimeoutMs: 1500,  // Set HTTP timeout to 1500 milliseconds\n   *   p2pNotReceivingBytesTimeoutMs: 1500    // Set P2P timeout to 1500 milliseconds\n   * };\n   * core.applyDynamicConfig(dynamicConfig);\n   */\n  applyDynamicConfig(dynamicConfig) {\n    const { mainStream, secondaryStream } = dynamicConfig;\n    const mainStreamConfigCopy = deepCopy(this.mainStreamConfig);\n    const secondaryStreamConfigCopy = deepCopy(this.secondaryStreamConfig);\n    this.overrideAllConfigs(dynamicConfig, mainStream, secondaryStream);\n    this.processSpecificDynamicConfigParams(\n      mainStreamConfigCopy,\n      dynamicConfig,\n      \"main\"\n    );\n    this.processSpecificDynamicConfigParams(\n      secondaryStreamConfigCopy,\n      dynamicConfig,\n      \"secondary\"\n    );\n  }\n  processSpecificDynamicConfigParams(prevConfig, updatedConfig, streamType) {\n    const isP2PDisabled = this.getUpdatedStreamProperty(\n      \"isP2PDisabled\",\n      updatedConfig,\n      streamType\n    );\n    if (isP2PDisabled && prevConfig.isP2PDisabled !== isP2PDisabled) {\n      this.destroyStreamLoader(streamType);\n    }\n    const isP2PUploadDisabled = this.getUpdatedStreamProperty(\n      \"isP2PUploadDisabled\",\n      updatedConfig,\n      streamType\n    );\n    if (isP2PUploadDisabled !== void 0 && prevConfig.isP2PUploadDisabled !== isP2PUploadDisabled) {\n      const streamLoader = streamType === \"main\" ? this.mainStreamLoader : this.secondaryStreamLoader;\n      streamLoader == null ? void 0 : streamLoader.sendBroadcastAnnouncement(isP2PUploadDisabled);\n    }\n  }\n  getUpdatedStreamProperty(propertyName, updatedConfig, streamType) {\n    const updatedStreamConfig = streamType === \"main\" ? updatedConfig.mainStream : updatedConfig.secondaryStream;\n    return (updatedStreamConfig == null ? void 0 : updatedStreamConfig[propertyName]) ?? updatedConfig[propertyName];\n  }\n  /**\n   * Adds an event listener for the specified event type on the core event target.\n   *\n   * @param eventName - The name of the event to listen for.\n   * @param listener - The callback function to invoke when the event is fired.\n   */\n  addEventListener(eventName, listener) {\n    this.eventTarget.addEventListener(eventName, listener);\n  }\n  /**\n   * Removes an event listener for the specified event type on the core event target.\n   *\n   * @param eventName - The name of the event to listen for.\n   * @param listener - The callback function to be removed.\n   */\n  removeEventListener(eventName, listener) {\n    this.eventTarget.removeEventListener(eventName, listener);\n  }\n  /**\n   * Sets the response URL for the manifest, stripping any query parameters.\n   *\n   * @param url - The full URL to the manifest response.\n   */\n  setManifestResponseUrl(url) {\n    this.manifestResponseUrl = url.split(\"?\")[0];\n  }\n  /**\n   * Checks if a segment is already stored within the core.\n   *\n   * @param segmentRuntimeId - The runtime identifier of the segment to check.\n   * @returns `true` if the segment is present, otherwise `false`.\n   */\n  hasSegment(segmentRuntimeId) {\n    return !!getSegmentFromStreamsMap(\n      this.streams,\n      segmentRuntimeId\n    );\n  }\n  /**\n   * Retrieves a specific stream by its runtime identifier, if it exists.\n   *\n   * @param streamRuntimeId - The runtime identifier of the stream to retrieve.\n   * @returns The stream with its segments, or `undefined` if not found.\n   */\n  getStream(streamRuntimeId) {\n    return this.streams.get(streamRuntimeId);\n  }\n  /**\n   * Ensures a stream exists in the map; adds it if it does not.\n   *\n   * @param stream - The stream to potentially add to the map.\n   */\n  addStreamIfNoneExists(stream) {\n    if (this.streams.has(stream.runtimeId)) return;\n    this.streams.set(stream.runtimeId, {\n      ...stream,\n      segments: /* @__PURE__ */ new Map()\n    });\n  }\n  /**\n   * Updates the segments associated with a specific stream.\n   *\n   * @param streamRuntimeId - The runtime identifier of the stream to update.\n   * @param addSegments - Optional segments to add to the stream.\n   * @param removeSegmentIds - Optional segment IDs to remove from the stream.\n   */\n  updateStream(streamRuntimeId, addSegments, removeSegmentIds) {\n    var _a, _b;\n    const stream = this.streams.get(streamRuntimeId);\n    if (!stream) return;\n    if (addSegments) {\n      for (const segment of addSegments) {\n        if (stream.segments.has(segment.runtimeId)) continue;\n        stream.segments.set(segment.runtimeId, { ...segment, stream });\n      }\n    }\n    if (removeSegmentIds) {\n      for (const id of removeSegmentIds) {\n        stream.segments.delete(id);\n      }\n    }\n    (_a = this.mainStreamLoader) == null ? void 0 : _a.updateStream(stream);\n    (_b = this.secondaryStreamLoader) == null ? void 0 : _b.updateStream(stream);\n  }\n  /**\n   * Loads a segment given its runtime identifier and invokes the provided callbacks during the process.\n   * Initializes segment storage if it has not been initialized yet.\n   *\n   * @param segmentRuntimeId - The runtime identifier of the segment to load.\n   * @param callbacks - The callbacks to be invoked during segment loading.\n   * @throws {Error} - Throws if the manifest response URL is not defined.\n   */\n  async loadSegment(segmentRuntimeId, callbacks) {\n    if (!this.manifestResponseUrl) {\n      throw new Error(\"Manifest response url is not defined\");\n    }\n    await this.initializeSegmentStorage();\n    const segment = this.identifySegment(segmentRuntimeId);\n    const loader = this.getStreamHybridLoader(segment);\n    void loader.loadSegment(segment, callbacks);\n  }\n  /**\n   * Aborts the loading of a segment specified by its runtime identifier.\n   *\n   * @param segmentRuntimeId - The runtime identifier of the segment whose loading is to be aborted.\n   */\n  abortSegmentLoading(segmentRuntimeId) {\n    var _a, _b;\n    (_a = this.mainStreamLoader) == null ? void 0 : _a.abortSegmentRequest(segmentRuntimeId);\n    (_b = this.secondaryStreamLoader) == null ? void 0 : _b.abortSegmentRequest(segmentRuntimeId);\n  }\n  /**\n   * Updates the playback parameters while play head moves, specifically position and playback rate, for stream loaders.\n   *\n   * @param position - The new position in the stream, in seconds.\n   * @param rate - The new playback rate.\n   */\n  updatePlayback(position, rate) {\n    var _a, _b;\n    (_a = this.mainStreamLoader) == null ? void 0 : _a.updatePlayback(position, rate);\n    (_b = this.secondaryStreamLoader) == null ? void 0 : _b.updatePlayback(position, rate);\n  }\n  /**\n   * Sets the active level bitrate, used for adjusting quality levels in adaptive streaming.\n   * Notifies the stream loaders if a change occurs.\n   *\n   * @param bitrate - The new bitrate to set as active.\n   */\n  setActiveLevelBitrate(bitrate) {\n    var _a, _b;\n    if (bitrate !== this.streamDetails.activeLevelBitrate) {\n      this.streamDetails.activeLevelBitrate = bitrate;\n      (_a = this.mainStreamLoader) == null ? void 0 : _a.notifyLevelChanged();\n      (_b = this.secondaryStreamLoader) == null ? void 0 : _b.notifyLevelChanged();\n    }\n  }\n  /**\n   * Updates the 'isLive' status of the stream\n   *\n   * @param isLive - Boolean indicating whether the stream is live.\n   */\n  setIsLive(isLive) {\n    this.streamDetails.isLive = isLive;\n  }\n  /**\n   * Identify if a segment is loadable by the P2P core based on the segment's stream type and configuration.\n   * @param segmentRuntimeId Segment runtime identifier to check.\n   * @returns `true` if the segment is loadable by the P2P core, otherwise `false`.\n   */\n  isSegmentLoadable(segmentRuntimeId) {\n    try {\n      const segment = this.identifySegment(segmentRuntimeId);\n      if (segment.stream.type === \"main\" && this.mainStreamConfig.isP2PDisabled) {\n        return false;\n      }\n      if (segment.stream.type === \"secondary\" && this.secondaryStreamConfig.isP2PDisabled) {\n        return false;\n      }\n      return true;\n    } catch {\n      return false;\n    }\n  }\n  /**\n   * Cleans up resources used by the Core instance, including destroying any active stream loaders\n   * and clearing stored segments.\n   */\n  destroy() {\n    var _a, _b, _c;\n    this.streams.clear();\n    (_a = this.mainStreamLoader) == null ? void 0 : _a.destroy();\n    (_b = this.secondaryStreamLoader) == null ? void 0 : _b.destroy();\n    (_c = this.segmentStorage) == null ? void 0 : _c.destroy();\n    this.mainStreamLoader = void 0;\n    this.secondaryStreamLoader = void 0;\n    this.segmentStorage = void 0;\n    this.manifestResponseUrl = void 0;\n    this.streamDetails = { isLive: false, activeLevelBitrate: 0 };\n    P2PTrackerClient.clearPeerIdCache();\n  }\n  async initializeSegmentStorage() {\n    if (this.segmentStorage) return;\n    const { isLive } = this.streamDetails;\n    const createCustomStorage = this.commonCoreConfig.customSegmentStorageFactory;\n    if (createCustomStorage && typeof createCustomStorage !== \"function\") {\n      throw new Error(\"Storage configuration is invalid\");\n    }\n    const segmentStorage = createCustomStorage ? createCustomStorage(isLive) : new SegmentMemoryStorage();\n    await segmentStorage.initialize(\n      this.commonCoreConfig,\n      this.mainStreamConfig,\n      this.secondaryStreamConfig\n    );\n    this.segmentStorage = segmentStorage;\n  }\n  identifySegment(segmentRuntimeId) {\n    if (!this.manifestResponseUrl) {\n      throw new Error(\"Manifest response url is undefined\");\n    }\n    const segment = getSegmentFromStreamsMap(\n      this.streams,\n      segmentRuntimeId\n    );\n    if (!segment) {\n      throw new Error(`Not found segment with id: ${segmentRuntimeId}`);\n    }\n    return segment;\n  }\n  overrideAllConfigs(dynamicConfig, mainStream, secondaryStream) {\n    overrideConfig(this.commonCoreConfig, dynamicConfig);\n    overrideConfig(this.mainStreamConfig, dynamicConfig);\n    overrideConfig(this.secondaryStreamConfig, dynamicConfig);\n    if (mainStream) {\n      overrideConfig(this.mainStreamConfig, mainStream);\n    }\n    if (secondaryStream) {\n      overrideConfig(this.secondaryStreamConfig, secondaryStream);\n    }\n  }\n  destroyStreamLoader(streamType) {\n    var _a, _b;\n    if (streamType === \"main\") {\n      (_a = this.mainStreamLoader) == null ? void 0 : _a.destroy();\n      this.mainStreamLoader = void 0;\n    } else {\n      (_b = this.secondaryStreamLoader) == null ? void 0 : _b.destroy();\n      this.secondaryStreamLoader = void 0;\n    }\n  }\n  getStreamHybridLoader(segment) {\n    if (segment.stream.type === \"main\") {\n      this.mainStreamLoader ?? (this.mainStreamLoader = this.createNewHybridLoader(segment));\n      return this.mainStreamLoader;\n    } else {\n      this.secondaryStreamLoader ?? (this.secondaryStreamLoader = this.createNewHybridLoader(segment));\n      return this.secondaryStreamLoader;\n    }\n  }\n  createNewHybridLoader(segment) {\n    if (!this.manifestResponseUrl) {\n      throw new Error(\"Manifest response url is not defined\");\n    }\n    if (!this.segmentStorage) {\n      throw new Error(\"Segment storage is not initialized\");\n    }\n    const streamConfig = segment.stream.type === \"main\" ? this.mainStreamConfig : this.secondaryStreamConfig;\n    return new HybridLoader(\n      this.manifestResponseUrl,\n      segment,\n      this.streamDetails,\n      streamConfig,\n      this.bandwidthCalculators,\n      this.segmentStorage,\n      this.eventTarget\n    );\n  }\n};\n__publicField2(_Core, \"DEFAULT_COMMON_CORE_CONFIG\", {\n  segmentMemoryStorageLimit: void 0,\n  customSegmentStorageFactory: void 0\n});\n__publicField2(_Core, \"DEFAULT_STREAM_CONFIG\", {\n  isP2PUploadDisabled: false,\n  isP2PDisabled: false,\n  simultaneousHttpDownloads: 2,\n  simultaneousP2PDownloads: 3,\n  highDemandTimeWindow: 15,\n  httpDownloadTimeWindow: 3e3,\n  p2pDownloadTimeWindow: 6e3,\n  webRtcMaxMessageSize: 64 * 1024 - 1,\n  p2pNotReceivingBytesTimeoutMs: 2e3,\n  p2pInactiveLoaderDestroyTimeoutMs: 30 * 1e3,\n  httpNotReceivingBytesTimeoutMs: 3e3,\n  httpErrorRetries: 3,\n  p2pErrorRetries: 3,\n  trackerClientVersionPrefix: TRACKER_CLIENT_VERSION_PREFIX,\n  announceTrackers: [\n    \"wss://tracker.novage.com.ua\",\n    \"wss://tracker.webtorrent.dev\",\n    \"wss://tracker.openwebtorrent.com\"\n  ],\n  rtcConfig: {\n    iceServers: [\n      { urls: \"stun:stun.l.google.com:19302\" },\n      { urls: \"stun:global.stun.twilio.com:3478\" }\n    ]\n  },\n  validateP2PSegment: void 0,\n  validateHTTPSegment: void 0,\n  httpRequestSetup: void 0,\n  swarmId: void 0\n});\nlet Core = _Core;\nconst debug$4 = browserExports.debug;\nvar __classPrivateFieldSet$2 = function(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet$2 = function(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _FragmentLoaderBase_instances, _FragmentLoaderBase_callbacks, _FragmentLoaderBase_createDefaultLoader, _FragmentLoaderBase_defaultLoader, _FragmentLoaderBase_core, _FragmentLoaderBase_response, _FragmentLoaderBase_segmentId, _FragmentLoaderBase_handleError, _FragmentLoaderBase_abortInternal;\nconst DEFAULT_DOWNLOAD_LATENCY = 10;\nclass FragmentLoaderBase {\n  constructor(config, core2) {\n    _FragmentLoaderBase_instances.add(this);\n    Object.defineProperty(this, \"context\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"config\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"stats\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    _FragmentLoaderBase_callbacks.set(this, void 0);\n    _FragmentLoaderBase_createDefaultLoader.set(this, void 0);\n    _FragmentLoaderBase_defaultLoader.set(this, void 0);\n    _FragmentLoaderBase_core.set(this, void 0);\n    _FragmentLoaderBase_response.set(this, void 0);\n    _FragmentLoaderBase_segmentId.set(this, void 0);\n    __classPrivateFieldSet$2(this, _FragmentLoaderBase_core, core2, \"f\");\n    __classPrivateFieldSet$2(this, _FragmentLoaderBase_createDefaultLoader, () => new config.loader(config), \"f\");\n    this.stats = {\n      aborted: false,\n      chunkCount: 0,\n      loading: { start: 0, first: 0, end: 0 },\n      buffering: { start: 0, first: 0, end: 0 },\n      parsing: { start: 0, end: 0 },\n      // set total and loaded to 1 to prevent hls.js\n      // on progress loading monitoring in AbrController\n      total: 1,\n      loaded: 1,\n      bwEstimate: 0,\n      retry: 0\n    };\n  }\n  load(context, config, callbacks) {\n    this.context = context;\n    this.config = config;\n    __classPrivateFieldSet$2(this, _FragmentLoaderBase_callbacks, callbacks, \"f\");\n    const { stats } = this;\n    const { rangeStart: start, rangeEnd: end } = context;\n    const byteRange = getByteRange(start, end !== void 0 ? end - 1 : void 0);\n    __classPrivateFieldSet$2(this, _FragmentLoaderBase_segmentId, getSegmentRuntimeId(context.url, byteRange), \"f\");\n    const isSegmentDownloadableByP2PCore = __classPrivateFieldGet$2(this, _FragmentLoaderBase_core, \"f\").isSegmentLoadable(__classPrivateFieldGet$2(this, _FragmentLoaderBase_segmentId, \"f\"));\n    if (!__classPrivateFieldGet$2(this, _FragmentLoaderBase_core, \"f\").hasSegment(__classPrivateFieldGet$2(this, _FragmentLoaderBase_segmentId, \"f\")) || !isSegmentDownloadableByP2PCore) {\n      __classPrivateFieldSet$2(this, _FragmentLoaderBase_defaultLoader, __classPrivateFieldGet$2(this, _FragmentLoaderBase_createDefaultLoader, \"f\").call(this), \"f\");\n      __classPrivateFieldGet$2(this, _FragmentLoaderBase_defaultLoader, \"f\").stats = this.stats;\n      __classPrivateFieldGet$2(this, _FragmentLoaderBase_defaultLoader, \"f\").load(context, config, callbacks);\n      return;\n    }\n    const onSuccess = (response) => {\n      __classPrivateFieldSet$2(this, _FragmentLoaderBase_response, response, \"f\");\n      const loadedBytes = __classPrivateFieldGet$2(this, _FragmentLoaderBase_response, \"f\").data.byteLength;\n      stats.loading = getLoadingStat(__classPrivateFieldGet$2(this, _FragmentLoaderBase_response, \"f\").bandwidth, loadedBytes, performance.now());\n      stats.total = loadedBytes;\n      stats.loaded = loadedBytes;\n      if (callbacks.onProgress) {\n        callbacks.onProgress(this.stats, context, __classPrivateFieldGet$2(this, _FragmentLoaderBase_response, \"f\").data, void 0);\n      }\n      callbacks.onSuccess({ data: __classPrivateFieldGet$2(this, _FragmentLoaderBase_response, \"f\").data, url: context.url }, this.stats, context, void 0);\n    };\n    const onError = (error) => {\n      if (error instanceof CoreRequestError && error.type === \"aborted\" && this.stats.aborted) {\n        return;\n      }\n      __classPrivateFieldGet$2(this, _FragmentLoaderBase_instances, \"m\", _FragmentLoaderBase_handleError).call(this, error);\n    };\n    void __classPrivateFieldGet$2(this, _FragmentLoaderBase_core, \"f\").loadSegment(__classPrivateFieldGet$2(this, _FragmentLoaderBase_segmentId, \"f\"), { onSuccess, onError });\n  }\n  abort() {\n    var _a, _b;\n    if (__classPrivateFieldGet$2(this, _FragmentLoaderBase_defaultLoader, \"f\")) {\n      __classPrivateFieldGet$2(this, _FragmentLoaderBase_defaultLoader, \"f\").abort();\n    } else {\n      __classPrivateFieldGet$2(this, _FragmentLoaderBase_instances, \"m\", _FragmentLoaderBase_abortInternal).call(this);\n      (_b = (_a = __classPrivateFieldGet$2(this, _FragmentLoaderBase_callbacks, \"f\")) == null ? void 0 : _a.onAbort) == null ? void 0 : _b.call(_a, this.stats, this.context, {});\n    }\n  }\n  destroy() {\n    if (__classPrivateFieldGet$2(this, _FragmentLoaderBase_defaultLoader, \"f\")) {\n      __classPrivateFieldGet$2(this, _FragmentLoaderBase_defaultLoader, \"f\").destroy();\n    } else {\n      if (!this.stats.aborted)\n        __classPrivateFieldGet$2(this, _FragmentLoaderBase_instances, \"m\", _FragmentLoaderBase_abortInternal).call(this);\n      __classPrivateFieldSet$2(this, _FragmentLoaderBase_callbacks, null, \"f\");\n      this.config = null;\n    }\n  }\n}\n_FragmentLoaderBase_callbacks = /* @__PURE__ */ new WeakMap(), _FragmentLoaderBase_createDefaultLoader = /* @__PURE__ */ new WeakMap(), _FragmentLoaderBase_defaultLoader = /* @__PURE__ */ new WeakMap(), _FragmentLoaderBase_core = /* @__PURE__ */ new WeakMap(), _FragmentLoaderBase_response = /* @__PURE__ */ new WeakMap(), _FragmentLoaderBase_segmentId = /* @__PURE__ */ new WeakMap(), _FragmentLoaderBase_instances = /* @__PURE__ */ new WeakSet(), _FragmentLoaderBase_handleError = function _FragmentLoaderBase_handleError2(thrownError) {\n  var _a;\n  const error = { code: 0, text: \"\" };\n  if (thrownError instanceof CoreRequestError && thrownError.type === \"failed\") {\n    error.text = thrownError.message;\n  } else if (thrownError instanceof Error) {\n    error.text = thrownError.message;\n  }\n  (_a = __classPrivateFieldGet$2(this, _FragmentLoaderBase_callbacks, \"f\")) == null ? void 0 : _a.onError(error, this.context, null, this.stats);\n}, _FragmentLoaderBase_abortInternal = function _FragmentLoaderBase_abortInternal2() {\n  if (!__classPrivateFieldGet$2(this, _FragmentLoaderBase_response, \"f\") && __classPrivateFieldGet$2(this, _FragmentLoaderBase_segmentId, \"f\")) {\n    this.stats.aborted = true;\n    __classPrivateFieldGet$2(this, _FragmentLoaderBase_core, \"f\").abortSegmentLoading(__classPrivateFieldGet$2(this, _FragmentLoaderBase_segmentId, \"f\"));\n  }\n};\nfunction getLoadingStat(targetBitrate, loadedBytes, loadingEndTime) {\n  const timeForLoading = loadedBytes * 8e3 / targetBitrate;\n  const first = loadingEndTime - timeForLoading;\n  const start = first - DEFAULT_DOWNLOAD_LATENCY;\n  return { start, first, end: loadingEndTime };\n}\nvar __classPrivateFieldSet$1 = function(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nvar __classPrivateFieldGet$1 = function(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _PlaylistLoaderBase_defaultLoader;\nclass PlaylistLoaderBase {\n  constructor(config) {\n    _PlaylistLoaderBase_defaultLoader.set(this, void 0);\n    Object.defineProperty(this, \"context\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"stats\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    __classPrivateFieldSet$1(this, _PlaylistLoaderBase_defaultLoader, new config.loader(config), \"f\");\n    this.stats = __classPrivateFieldGet$1(this, _PlaylistLoaderBase_defaultLoader, \"f\").stats;\n    this.context = __classPrivateFieldGet$1(this, _PlaylistLoaderBase_defaultLoader, \"f\").context;\n  }\n  load(context, config, callbacks) {\n    __classPrivateFieldGet$1(this, _PlaylistLoaderBase_defaultLoader, \"f\").load(context, config, callbacks);\n  }\n  abort() {\n    __classPrivateFieldGet$1(this, _PlaylistLoaderBase_defaultLoader, \"f\").abort();\n  }\n  destroy() {\n    __classPrivateFieldGet$1(this, _PlaylistLoaderBase_defaultLoader, \"f\").destroy();\n  }\n}\n_PlaylistLoaderBase_defaultLoader = /* @__PURE__ */ new WeakMap();\nclass SegmentManager {\n  constructor(core2) {\n    Object.defineProperty(this, \"core\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    this.core = core2;\n  }\n  processMainManifest(data) {\n    const { levels, audioTracks } = data;\n    for (const [index, level] of levels.entries()) {\n      const { url } = level;\n      this.core.addStreamIfNoneExists({\n        runtimeId: Array.isArray(url) ? url[0] : url,\n        type: \"main\",\n        index\n      });\n    }\n    for (const [index, track] of audioTracks.entries()) {\n      const { url } = track;\n      this.core.addStreamIfNoneExists({\n        runtimeId: Array.isArray(url) ? url[0] : url,\n        type: \"secondary\",\n        index\n      });\n    }\n  }\n  updatePlaylist(data) {\n    const { details: { url, fragments, live } } = data;\n    const playlist = this.core.getStream(url);\n    if (!playlist)\n      return;\n    const segmentToRemoveIds = new Set(playlist.segments.keys());\n    const newSegments = [];\n    fragments.forEach((fragment, index) => {\n      const { url: responseUrl, byteRange: fragByteRange, sn, start: startTime, end: endTime } = fragment;\n      if (sn === \"initSegment\")\n        return;\n      const [start, end] = fragByteRange;\n      const byteRange = getByteRange(start, end !== void 0 ? end - 1 : void 0);\n      const runtimeId = getSegmentRuntimeId(responseUrl, byteRange);\n      segmentToRemoveIds.delete(runtimeId);\n      if (playlist.segments.has(runtimeId))\n        return;\n      newSegments.push({\n        runtimeId,\n        url: responseUrl,\n        externalId: live ? sn : index,\n        byteRange,\n        startTime,\n        endTime\n      });\n    });\n    if (!newSegments.length && !segmentToRemoveIds.size)\n      return;\n    this.core.updateStream(url, newSegments, segmentToRemoveIds.values());\n  }\n}\nvar __classPrivateFieldGet = function(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = function(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;\n};\nfunction injectMixin(HlsJsClass) {\n  var _HlsJsWithP2PClass_p2pEngine, _a;\n  return _a = class HlsJsWithP2PClass extends HlsJsClass {\n    get p2pEngine() {\n      return __classPrivateFieldGet(this, _HlsJsWithP2PClass_p2pEngine, \"f\");\n    }\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    constructor(...args) {\n      var _a2;\n      const config = args[0];\n      const { p2p, ...hlsJsConfig } = config ?? {};\n      const p2pEngine = new HlsJsP2PEngine(p2p);\n      super({ ...hlsJsConfig, ...p2pEngine.getConfigForHlsJs() });\n      _HlsJsWithP2PClass_p2pEngine.set(this, void 0);\n      p2pEngine.bindHls(this);\n      __classPrivateFieldSet(this, _HlsJsWithP2PClass_p2pEngine, p2pEngine, \"f\");\n      (_a2 = p2p == null ? void 0 : p2p.onHlsJsCreated) == null ? void 0 : _a2.call(p2p, this);\n    }\n  }, _HlsJsWithP2PClass_p2pEngine = /* @__PURE__ */ new WeakMap(), _a;\n}\nconst MAX_LIVE_SYNC_DURATION = 120;\nclass HlsJsP2PEngine {\n  /**\n   * Enhances a given Hls.js class by injecting additional P2P (peer-to-peer) functionalities.\n   *\n   * @returns {HlsWithP2PInstance} - The enhanced Hls.js class with P2P functionalities.\n   *\n   * @example\n   * const HlsWithP2P = HlsJsP2PEngine.injectMixin(Hls);\n   *\n   * const hls = new HlsWithP2P({\n   *   // Hls.js configuration\n   *   startLevel: 0, // Example of Hls.js config parameter\n   *   p2p: {\n   *     core: {\n   *       // P2P core configuration\n   *     },\n   *     onHlsJsCreated(hls) {\n   *       // Do something with the Hls.js instance\n   *     },\n   *   },\n   * });\n   */\n  static injectMixin(hls) {\n    return injectMixin(hls);\n  }\n  /**\n   * Constructs an instance of HlsJsP2PEngine.\n   * @param config Optional configuration for P2P engine setup.\n   */\n  constructor(config) {\n    Object.defineProperty(this, \"core\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"segmentManager\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"hlsInstanceGetter\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"currentHlsInstance\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: void 0\n    });\n    Object.defineProperty(this, \"debug\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: debug$4(\"p2pml-hlsjs:engine\")\n    });\n    Object.defineProperty(this, \"updateMediaElementEventHandlers\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: (type) => {\n        var _a;\n        const media = (_a = this.currentHlsInstance) == null ? void 0 : _a.media;\n        if (!media)\n          return;\n        const method = type === \"register\" ? \"addEventListener\" : \"removeEventListener\";\n        media[method](\"timeupdate\", this.handlePlaybackUpdate);\n        media[method](\"seeking\", this.handlePlaybackUpdate);\n        media[method](\"ratechange\", this.handlePlaybackUpdate);\n      }\n    });\n    Object.defineProperty(this, \"handleManifestLoaded\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: (event, data) => {\n        const networkDetails = data.networkDetails;\n        if (networkDetails instanceof XMLHttpRequest) {\n          this.core.setManifestResponseUrl(networkDetails.responseURL);\n        } else if (networkDetails instanceof Response) {\n          this.core.setManifestResponseUrl(networkDetails.url);\n        }\n        this.segmentManager.processMainManifest(data);\n      }\n    });\n    Object.defineProperty(this, \"handleLevelSwitching\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: (event, data) => {\n        if (data.bitrate)\n          this.core.setActiveLevelBitrate(data.bitrate);\n      }\n    });\n    Object.defineProperty(this, \"handleLevelUpdated\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: (event, data) => {\n        if (this.currentHlsInstance && data.details.live && data.details.fragments[0].type === \"main\" && !this.currentHlsInstance.userConfig.liveSyncDuration && !this.currentHlsInstance.userConfig.liveSyncDurationCount && data.details.fragments.length > 4) {\n          this.updateLiveSyncDurationCount(data);\n        }\n        this.core.setIsLive(data.details.live);\n        this.segmentManager.updatePlaylist(data);\n      }\n    });\n    Object.defineProperty(this, \"handleMediaAttached\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: () => {\n        this.updateMediaElementEventHandlers(\"register\");\n      }\n    });\n    Object.defineProperty(this, \"handleMediaDetached\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: () => {\n        this.updateMediaElementEventHandlers(\"unregister\");\n      }\n    });\n    Object.defineProperty(this, \"handlePlaybackUpdate\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: (event) => {\n        const media = event.target;\n        this.core.updatePlayback(media.currentTime, media.playbackRate);\n      }\n    });\n    Object.defineProperty(this, \"destroyCore\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: () => this.core.destroy()\n    });\n    Object.defineProperty(this, \"destroy\", {\n      enumerable: true,\n      configurable: true,\n      writable: true,\n      value: () => {\n        this.destroyCore();\n        this.updateHlsEventsHandlers(\"unregister\");\n        this.updateMediaElementEventHandlers(\"unregister\");\n        this.currentHlsInstance = void 0;\n      }\n    });\n    this.core = new Core(config == null ? void 0 : config.core);\n    this.segmentManager = new SegmentManager(this.core);\n  }\n  /**\n   * Adds an event listener for the specified event.\n   * @param eventName The name of the event to listen for.\n   * @param listener The callback function to be invoked when the event is triggered.\n   *\n   * @example\n   * // Listening for a segment being successfully loaded\n   * p2pEngine.addEventListener('onSegmentLoaded', (details) => {\n   *   console.log('Segment Loaded:', details);\n   * });\n   *\n   * @example\n   * // Handling segment load errors\n   * p2pEngine.addEventListener('onSegmentError', (errorDetails) => {\n   *   console.error('Error loading segment:', errorDetails);\n   * });\n   *\n   * @example\n   * // Tracking data downloaded from peers\n   * p2pEngine.addEventListener('onChunkDownloaded', (bytesLength, downloadSource, peerId) => {\n   *   console.log(`Downloaded ${bytesLength} bytes from ${downloadSource} ${peerId ? 'from peer ' + peerId : 'from server'}`);\n   * });\n   */\n  addEventListener(eventName, listener) {\n    this.core.addEventListener(eventName, listener);\n  }\n  /**\n   * Removes an event listener for the specified event.\n   * @param eventName The name of the event.\n   * @param listener The callback function that was previously added.\n   */\n  removeEventListener(eventName, listener) {\n    this.core.removeEventListener(eventName, listener);\n  }\n  /**\n   * provides the Hls.js P2P specific configuration for Hls.js loaders.\n   * @returns An object with fragment loader (fLoader) and playlist loader (pLoader).\n   */\n  getConfigForHlsJs() {\n    return {\n      fLoader: this.createFragmentLoaderClass(),\n      pLoader: this.createPlaylistLoaderClass()\n    };\n  }\n  /**\n   * Returns the configuration of the HLS.js P2P engine.\n   * @returns A readonly version of the HlsJsP2PEngineConfig.\n   */\n  getConfig() {\n    return { core: this.core.getConfig() };\n  }\n  /**\n   * Applies dynamic configuration updates to the P2P engine.\n   * @param dynamicConfig Configuration changes to apply.\n   *\n   * @example\n   * // Assuming `hlsP2PEngine` is an instance of HlsJsP2PEngine\n   *\n   * const newDynamicConfig = {\n   *   core: {\n   *     // Increase the number of cached segments to 1000\n   *     cachedSegmentsCount: 1000,\n   *     // 50 minutes of segments will be downloaded further through HTTP connections if P2P fails\n   *     httpDownloadTimeWindow: 3000,\n   *     // 100 minutes of segments will be downloaded further through P2P connections\n   *     p2pDownloadTimeWindow: 6000,\n   * };\n   *\n   * hlsP2PEngine.applyDynamicConfig(newDynamicConfig);\n   */\n  applyDynamicConfig(dynamicConfig) {\n    if (dynamicConfig.core)\n      this.core.applyDynamicConfig(dynamicConfig.core);\n  }\n  /**\n   * Sets the HLS instance for handling media.\n   * @param hls The HLS instance or a function that returns an HLS instance.\n   */\n  bindHls(hls) {\n    this.hlsInstanceGetter = typeof hls === \"function\" ? hls : () => hls;\n  }\n  initHlsEvents() {\n    var _a;\n    const hlsInstance = (_a = this.hlsInstanceGetter) == null ? void 0 : _a.call(this);\n    if (this.currentHlsInstance === hlsInstance)\n      return;\n    if (this.currentHlsInstance)\n      this.destroy();\n    this.currentHlsInstance = hlsInstance;\n    this.updateHlsEventsHandlers(\"register\");\n    this.updateMediaElementEventHandlers(\"register\");\n  }\n  updateHlsEventsHandlers(type) {\n    const hls = this.currentHlsInstance;\n    if (!hls)\n      return;\n    const method = type === \"register\" ? \"on\" : \"off\";\n    hls[method](\"hlsManifestLoaded\", this.handleManifestLoaded);\n    hls[method](\"hlsLevelSwitching\", this.handleLevelSwitching);\n    hls[method](\"hlsLevelUpdated\", this.handleLevelUpdated);\n    hls[method](\"hlsAudioTrackLoaded\", this.handleLevelUpdated);\n    hls[method](\"hlsDestroying\", this.destroy);\n    hls[method](\"hlsMediaAttaching\", this.destroyCore);\n    hls[method](\"hlsManifestLoading\", this.destroyCore);\n    hls[method](\"hlsMediaDetached\", this.handleMediaDetached);\n    hls[method](\"hlsMediaAttached\", this.handleMediaAttached);\n  }\n  updateLiveSyncDurationCount(data) {\n    const fragmentDuration = data.details.targetduration;\n    const maxLiveSyncCount = Math.floor(MAX_LIVE_SYNC_DURATION / fragmentDuration);\n    const newLiveSyncDurationCount = Math.min(data.details.fragments.length - 1, maxLiveSyncCount);\n    if (this.currentHlsInstance && this.currentHlsInstance.config.liveSyncDurationCount !== newLiveSyncDurationCount) {\n      this.debug(`Setting liveSyncDurationCount to ${newLiveSyncDurationCount}`);\n      this.currentHlsInstance.config.liveSyncDurationCount = newLiveSyncDurationCount;\n    }\n  }\n  createFragmentLoaderClass() {\n    const { core: core2 } = this;\n    const engine = this;\n    return class FragmentLoader extends FragmentLoaderBase {\n      constructor(config) {\n        super(config, core2);\n      }\n      static getEngine() {\n        return engine;\n      }\n    };\n  }\n  createPlaylistLoaderClass() {\n    const engine = this;\n    return class PlaylistLoader extends PlaylistLoaderBase {\n      constructor(config) {\n        super(config);\n        engine.initHlsEvents();\n      }\n    };\n  }\n}\nconst HlsWithP2P = HlsJsP2PEngine.injectMixin(Hls);\nlet alreadyRegistered = false;\nconst registerSourceHandler = function(vjs) {\n  if (!Hls.isSupported()) {\n    logger$1.info(\"Hls.js is not supported in this browser.\");\n    return;\n  }\n  const html5 = vjs.getTech(\"Html5\");\n  if (!html5) {\n    logger$1.error('No \"Html5\" tech found in videojs');\n    return;\n  }\n  if (alreadyRegistered) return;\n  alreadyRegistered = true;\n  html5.registerSourceHandler({\n    canHandleSource: function(source) {\n      const hlsTypeRE = /^application\\/x-mpegURL|application\\/vnd\\.apple\\.mpegurl$/i;\n      const hlsExtRE = /\\.m3u8/i;\n      if (hlsTypeRE.test(source.type)) return \"probably\";\n      if (hlsExtRE.test(source.src)) return \"maybe\";\n      return \"\";\n    },\n    handleSource: function(source, tech) {\n      if (tech.hlsProvider) {\n        tech.hlsProvider.dispose();\n      }\n      tech.hlsProvider = new Html5Hlsjs(vjs, source, tech);\n      return tech.hlsProvider;\n    }\n  }, 0);\n  vjs.Html5Hlsjs = Html5Hlsjs;\n};\nconst Plugin$7 = videojs.getPlugin(\"plugin\");\nclass HLSJSConfigHandler extends Plugin$7 {\n  constructor(player, options) {\n    super(player, options);\n    if (!options) return;\n    if (!player.srOptions_) {\n      player.srOptions_ = {};\n    }\n    if (!player.srOptions_.hlsjsConfig) {\n      player.srOptions_.hlsjsConfig = options.hlsjsConfig;\n    }\n    if (options.levelLabelHandler && !player.srOptions_.levelLabelHandler) {\n      player.srOptions_.levelLabelHandler = options.levelLabelHandler;\n    }\n    registerSourceHandler(videojs);\n  }\n  dispose() {\n    this.player.srOptions_ = void 0;\n    const tech = this.player.tech(true);\n    if (tech.hlsProvider) {\n      tech.hlsProvider.dispose();\n      tech.hlsProvider = void 0;\n    }\n    super.dispose();\n  }\n}\nvideojs.registerPlugin(\"hlsjs\", HLSJSConfigHandler);\nclass Html5Hlsjs {\n  constructor(vjs, source, tech) {\n    __publicField(this, \"videoElement\");\n    __publicField(this, \"errorCounts\", {});\n    __publicField(this, \"player\");\n    __publicField(this, \"tech\");\n    __publicField(this, \"source\");\n    __publicField(this, \"vjs\");\n    __publicField(this, \"maxNetworkErrorRecovery\", 5);\n    __publicField(this, \"hls\");\n    __publicField(this, \"hlsjsConfig\", null);\n    __publicField(this, \"_duration\", null);\n    __publicField(this, \"metadata\", null);\n    __publicField(this, \"isLive\", null);\n    __publicField(this, \"dvrDuration\", null);\n    __publicField(this, \"edgeMargin\", null);\n    __publicField(this, \"liveEnded\", false);\n    __publicField(this, \"handlers\", {\n      play: null,\n      error: null\n    });\n    __publicField(this, \"audioMode\", false);\n    this.vjs = vjs;\n    this.source = source;\n    this.tech = tech;\n    this.tech.name_ = \"Hlsjs\";\n    this.videoElement = tech.el();\n    this.player = vjs(tech.options_.playerId);\n    this.handlers.error = (event) => {\n      let errorTxt;\n      const mediaError = (event.currentTarget || event.target).error;\n      if (!mediaError) return;\n      logger$1.info(mediaError);\n      switch (mediaError.code) {\n        case mediaError.MEDIA_ERR_ABORTED:\n          errorTxt = \"You aborted the video playback\";\n          break;\n        case mediaError.MEDIA_ERR_DECODE:\n          errorTxt = \"The video playback was aborted due to a corruption problem or because the video used features your browser did not support\";\n          this._handleMediaError(mediaError);\n          break;\n        case mediaError.MEDIA_ERR_NETWORK:\n          errorTxt = \"A network error caused the video download to fail part-way\";\n          break;\n        case mediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:\n          errorTxt = \"The video could not be loaded, either because the server or network failed or because the format is not supported\";\n          break;\n        default:\n          errorTxt = mediaError.message;\n      }\n      logger$1.error(`MEDIA_ERROR: ${errorTxt}`);\n    };\n    this.videoElement.addEventListener(\"error\", this.handlers.error);\n    this.initialize();\n  }\n  duration() {\n    if (this._duration === Infinity) return Infinity;\n    if (!isNaN(this.videoElement.duration)) return this.videoElement.duration;\n    return this._duration || 0;\n  }\n  seekable() {\n    if (this.hls.media) {\n      if (!this.isLive) {\n        return this.vjs.createTimeRanges(0, this.hls.media.duration);\n      }\n      const startTime = Math.round(this.hls.media.duration - this.dvrDuration);\n      const endTime = Math.round(this.hls.media.duration - this.edgeMargin);\n      return this.vjs.createTimeRanges(startTime, endTime);\n    }\n    return this.vjs.createTimeRanges();\n  }\n  dispose() {\n    this.videoElement.removeEventListener(\"play\", this.handlers.play);\n    this.videoElement.removeEventListener(\"error\", this.handlers.error);\n    this.hls.destroy();\n  }\n  // ---------------------------------------------------------------------------\n  _getHumanErrorMsg(error) {\n    switch (error.code) {\n      default:\n        return error.message;\n    }\n  }\n  _handleUnrecoverableError(error) {\n    if (this.hls.levels.filter((l) => l.id > -1).length > 1) {\n      this._removeQuality(this.hls.loadLevel);\n      return;\n    }\n    this.hls.destroy();\n    logger$1.info(\"bubbling error up to VIDEOJS\");\n    this.tech.error = () => ({\n      ...error,\n      message: this._getHumanErrorMsg(error)\n    });\n    this.tech.trigger(\"error\");\n  }\n  _handleMediaError(error) {\n    if (this.errorCounts[Hls.ErrorTypes.MEDIA_ERROR] === 1) {\n      logger$1.info(\"trying to recover media error\");\n      this.hls.recoverMediaError();\n      return;\n    }\n    if (this.errorCounts[Hls.ErrorTypes.MEDIA_ERROR] === 2) {\n      logger$1.info(\"2nd try to recover media error (by swapping audio codec\");\n      this.hls.swapAudioCodec();\n      this.hls.recoverMediaError();\n      return;\n    }\n    if (this.errorCounts[Hls.ErrorTypes.MEDIA_ERROR] > 2) {\n      this._handleUnrecoverableError(error);\n    }\n  }\n  _handleNetworkError(error) {\n    var _a, _b;\n    if (navigator.onLine === false) return;\n    if (this.liveEnded) {\n      logger$1.info(\"Forcing end of live stream after a network error\");\n      (_a = this.player) == null ? void 0 : _a.handleTechEnded_();\n      (_b = this.hls) == null ? void 0 : _b.stopLoad();\n      return;\n    }\n    if (this.errorCounts[Hls.ErrorTypes.NETWORK_ERROR] <= this.maxNetworkErrorRecovery) {\n      logger$1.info(\"trying to recover network error\");\n      setTimeout(() => this.hls.startLoad(), 1e3);\n      this.hls.once(Hls.Events.FRAG_LOADED, () => {\n        this.errorCounts[Hls.ErrorTypes.NETWORK_ERROR] = 0;\n      });\n      return;\n    }\n    this._handleUnrecoverableError(error);\n  }\n  _onError(_event, data) {\n    const error = {\n      message: `HLS.js error: ${data.type} - fatal: ${data.fatal} - ${data.details}`\n    };\n    if (this.errorCounts[data.type]) this.errorCounts[data.type] += 1;\n    else this.errorCounts[data.type] = 1;\n    if (!/googlebot/i.test(navigator.userAgent)) {\n      if (data.fatal) logger$1.error(error.message, { currentTime: this.player.currentTime(), data });\n      else logger$1.clientWarn(error.message);\n    }\n    if (data.type === Hls.ErrorTypes.NETWORK_ERROR) {\n      error.code = 2;\n      this._handleNetworkError(error);\n    } else if (data.fatal && data.type === Hls.ErrorTypes.MEDIA_ERROR && data.details !== Hls.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR) {\n      error.code = 3;\n      this._handleMediaError(error);\n    } else if (data.fatal) {\n      this._handleUnrecoverableError(error);\n    }\n  }\n  // ---------------------------------------------------------------------------\n  buildLevelLabel(level) {\n    return this.player.srOptions_.levelLabelHandler(level, this.player);\n  }\n  _removeQuality(index) {\n    this.hls.removeLevel(index);\n    this.player.peertubeResolutions().remove(index);\n    this.hls.currentLevel = -1;\n  }\n  _notifyVideoQualities() {\n    if (!this.metadata) return;\n    const resolutions = [];\n    this.metadata.levels.forEach((level, index) => {\n      resolutions.push({\n        id: index,\n        height: level.height,\n        width: level.width,\n        bitrate: level.bitrate,\n        label: this.buildLevelLabel(level),\n        selected: level.id === this.hls.manualLevel,\n        selectCallback: () => this.manuallySelectVideoLevel(index)\n      });\n    });\n    const videoResolutions = resolutions.filter((r) => r.height !== 0);\n    if (videoResolutions.length !== 0 && this.getSeparateAudioTrack()) {\n      const audioTrackUrl = this.getSeparateAudioTrack();\n      resolutions.push({\n        id: -2,\n        // -1 is for \"Auto quality\"\n        label: this.player.localize(\"Audio only\"),\n        selected: false,\n        selectCallback: () => {\n          if (this.audioMode) return;\n          this.audioMode = true;\n          this.updateToAudioOrVideo(audioTrackUrl);\n        }\n      });\n    }\n    resolutions.push({\n      id: -1,\n      label: this.player.localize(\"Auto\"),\n      selected: true,\n      selectCallback: () => this.manuallySelectVideoLevel(-1)\n    });\n    this.player.peertubeResolutions().add(resolutions);\n  }\n  manuallySelectVideoLevel(index) {\n    if (this.audioMode) {\n      this.audioMode = false;\n      this.updateToAudioOrVideo(this.source.src, index);\n      return;\n    }\n    this.hls.currentLevel = index;\n  }\n  _startLoad() {\n    this.hls.startLoad(-1);\n    this.videoElement.removeEventListener(\"play\", this.handlers.play);\n  }\n  _onMetaData(_event, data) {\n    this.metadata = data;\n    this._notifyVideoQualities();\n  }\n  initialize() {\n    this.liveEnded = false;\n    this.buildBaseConfig();\n    if ([\"\", \"auto\"].includes(this.videoElement.preload) && !this.videoElement.autoplay && this.hlsjsConfig.autoStartLoad === void 0) {\n      this.hlsjsConfig.autoStartLoad = false;\n    }\n    if (this.hlsjsConfig.autoStartLoad === false) {\n      this.handlers.play = this._startLoad.bind(this);\n      this.videoElement.addEventListener(\"play\", this.handlers.play);\n    }\n    this.hls = new HlsWithP2P({\n      ...omit(this.hlsjsConfig, [\"p2pMediaLoaderOptions\"]),\n      p2p: {\n        core: this.hlsjsConfig.p2pMediaLoaderOptions\n      }\n    });\n    this.player.trigger(\"hlsjs-initialized\", { hlsjs: this.hls });\n    this.hls.on(Hls.Events.ERROR, (event, data) => this._onError(event, data));\n    this.hls.on(Hls.Events.MANIFEST_PARSED, (event, data) => this._onMetaData(event, data));\n    this.hls.on(Hls.Events.LEVEL_LOADED, (_event, data) => {\n      if (this.hlsjsConfig.liveSyncDuration) {\n        this.edgeMargin = this.hlsjsConfig.liveSyncDuration;\n      } else if (this.hlsjsConfig.liveSyncDurationCount) {\n        this.edgeMargin = this.hlsjsConfig.liveSyncDurationCount * data.details.targetduration;\n      }\n      if (this.isLive && !data.details.live) {\n        this.liveEnded = true;\n        this.player.trigger(\"hlsjs-live-ended\");\n      }\n      this.isLive = data.details.live;\n      this.dvrDuration = data.details.totalduration;\n      this._duration = this.isLive ? Infinity : data.details.totalduration;\n      if (this.isLive) this.maxNetworkErrorRecovery = 30;\n    });\n    this.registerLevelEventSwitch();\n    this.hls.once(Hls.Events.FRAG_LOADED, () => {\n      this.tech.trigger(\"loadedmetadata\");\n    });\n    this.hls.attachMedia(this.videoElement);\n    this.hls.loadSource(this.source.src);\n  }\n  updateToAudioOrVideo(newSource, startLevel) {\n    this.player.addClass(\"vjs-updating-resolution\");\n    const currentTime = this.player.currentTime();\n    this.dispose();\n    this.buildBaseConfig();\n    this.hlsjsConfig.autoStartLoad = true;\n    this.player.autoplay(\"play\");\n    this.hls = new HlsWithP2P({\n      ...omit(this.hlsjsConfig, [\"p2pMediaLoaderOptions\"]),\n      p2p: {\n        core: this.hlsjsConfig.p2pMediaLoaderOptions\n      },\n      startPosition: this.duration() === Infinity ? void 0 : currentTime,\n      startLevel\n    });\n    this.player.trigger(\"hlsjs-initialized\", { hlsjs: this.hls });\n    this.hls.on(Hls.Events.ERROR, (event, data) => this._onError(event, data));\n    this.registerLevelEventSwitch();\n    this.hls.attachMedia(this.videoElement);\n    this.hls.loadSource(newSource);\n    this.player.one(\"canplay\", () => {\n      this.player.removeClass(\"vjs-updating-resolution\");\n    });\n  }\n  registerLevelEventSwitch() {\n    this.hls.on(Hls.Events.LEVEL_SWITCHING, (_e, data) => {\n      let resolutionId = data.level;\n      let autoResolutionChosenId = -1;\n      if (this.audioMode) {\n        resolutionId = -2;\n      } else if (this.hls.autoLevelEnabled) {\n        resolutionId = -1;\n        autoResolutionChosenId = data.level;\n      }\n      this.player.peertubeResolutions().select({ id: resolutionId, autoResolutionChosenId, fireCallback: false });\n    });\n  }\n  buildBaseConfig() {\n    const techOptions = this.tech.options_;\n    const srOptions_ = this.player.srOptions_;\n    const hlsjsConfigRef = (srOptions_ == null ? void 0 : srOptions_.hlsjsConfig) || techOptions.hlsjsConfig;\n    this.hlsjsConfig = hlsjsConfigRef ? { ...hlsjsConfigRef } : {};\n  }\n  getSeparateAudioTrack() {\n    if (this.metadata.audioTracks.length === 0) return void 0;\n    return this.metadata.audioTracks[0].url;\n  }\n}\nconst debugLogger$6 = debug$5(\"peertube:player:p2p-media-loader\");\nconst Plugin$6 = videojs.getPlugin(\"plugin\");\nclass P2pMediaLoaderPlugin extends Plugin$6 {\n  constructor(player, options) {\n    super(player);\n    this.options = options;\n    this.statsP2PBytes = {\n      pendingDownload: [],\n      pendingUpload: [],\n      peersWithWebSeed: 0,\n      peersP2POnly: 0,\n      totalDownload: 0,\n      totalUpload: 0\n    };\n    this.statsHTTPBytes = {\n      pendingDownload: [],\n      totalDownload: 0\n    };\n    this.liveEnded = false;\n    if (!videojs.Html5Hlsjs) {\n      if (player.canPlayType(\"application/vnd.apple.mpegurl\")) {\n        this.fallbackToBuiltInIOS();\n        return;\n      }\n      const message = \"HLS.js does not seem to be supported. Cannot fallback to built-in HLS\";\n      logger$1.warn(message);\n      const error = {\n        code: MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED,\n        message,\n        MEDIA_ERR_ABORTED: MediaError.MEDIA_ERR_ABORTED,\n        MEDIA_ERR_DECODE: MediaError.MEDIA_ERR_DECODE,\n        MEDIA_ERR_NETWORK: MediaError.MEDIA_ERR_NETWORK,\n        MEDIA_ERR_SRC_NOT_SUPPORTED: MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED\n      };\n      player.ready(() => player.error(error));\n      return;\n    }\n    {\n      const onHLSJSInitialized = (_, { hlsjs }) => {\n        var _a, _b;\n        (_b = (_a = this.hlsjs) == null ? void 0 : _a.p2pEngine) == null ? void 0 : _b.destroy();\n        clearInterval(this.networkInfoInterval);\n        this.hlsjs = hlsjs;\n        debugLogger$6(\"hls.js initialized, initializing p2p-media-loader plugin\", { hlsjs });\n        player.ready(() => this.initializePlugin());\n      };\n      player.on(\"hlsjs-initialized\", onHLSJSInitialized);\n      const onHLSJSLiveEnded = () => {\n        debugLogger$6(\"hls.js says the live is ended\");\n        this.liveEnded = true;\n      };\n      player.on(\"hlsjs-live-ended\", onHLSJSLiveEnded);\n      this.on(\"dispose\", () => {\n        this.player.off(\"hlsjs-initialized\", onHLSJSInitialized);\n        this.player.off(\"hlsjs-live-ended\", onHLSJSLiveEnded);\n      });\n    }\n    player.src({\n      type: options.type,\n      src: options.src\n    });\n  }\n  dispose() {\n    var _a, _b, _c, _d;\n    (_b = (_a = this.hlsjs) == null ? void 0 : _a.p2pEngine) == null ? void 0 : _b.destroy();\n    (_c = this.hlsjs) == null ? void 0 : _c.destroy();\n    (_d = this.options.segmentValidator) == null ? void 0 : _d.destroy();\n    clearInterval(this.networkInfoInterval);\n    super.dispose();\n  }\n  // ---------------------------------------------------------------------------\n  getCurrentLevel() {\n    if (!this.hlsjs) return void 0;\n    return this.hlsjs.levels[this.hlsjs.currentLevel];\n  }\n  // ---------------------------------------------------------------------------\n  getLiveLatency() {\n    return Math.round(this.hlsjs.latency);\n  }\n  getLiveLatencyFromEdge() {\n    return Math.round(this.hlsjs.latency - this.hlsjs.targetLatency);\n  }\n  // ---------------------------------------------------------------------------\n  getHLSJS() {\n    return this.hlsjs;\n  }\n  initializePlugin() {\n    this.hlsjs.p2pEngine.addEventListener(\"onSegmentError\", (details) => {\n      if (navigator.onLine === false || this.liveEnded || details.downloadSource !== \"http\") return;\n      const segment = details.segment;\n      logger$1.clientError(`Segment ${segment.runtimeId} error.`, details);\n      if (this.options.redundancyUrlManager) {\n        this.options.redundancyUrlManager.onSegmentError(segment.url);\n      }\n    });\n    this.hlsjs.p2pEngine.addEventListener(\"onSegmentLoaded\", (details) => {\n      if (details.downloadSource !== \"http\") return;\n      if (this.options.redundancyUrlManager) {\n        this.options.redundancyUrlManager.onSegmentSuccess(details.segmentUrl);\n      }\n    });\n    const redundancyUrlsCount = this.options.redundancyUrlManager ? this.options.redundancyUrlManager.countBaseUrls() : 0;\n    this.totalHTTPPeers = 1 + redundancyUrlsCount;\n    this.statsP2PBytes.peersWithWebSeed = this.totalHTTPPeers;\n    this.runStats();\n    let initResolutionChange = true;\n    this.hlsjs.on(Hls.Events.LEVEL_SWITCHED, () => {\n      const level = this.getCurrentLevel();\n      const resolution = Math.min((level == null ? void 0 : level.height) || 0, (level == null ? void 0 : level.width) || 0);\n      this.player.trigger(\"resolution-change\", { resolution, initResolutionChange });\n      initResolutionChange = false;\n    });\n    this.hlsjs.on(Hls.Events.MANIFEST_PARSED, (_event, data) => {\n      if (Array.isArray(data.levels) && data.levels.length >= 1) {\n        const level = data.levels[0];\n        this.player.trigger(\"video-ratio-changed\", { ratio: level.width / level.height });\n      }\n    });\n    this.hlsjs.on(Hls.Events.ERROR, (_event, errorData) => {\n      if (errorData.type !== Hls.ErrorTypes.MEDIA_ERROR) return;\n      if (errorData.details === Hls.ErrorDetails.BUFFER_STALLED_ERROR) {\n        this.player.trigger(\"buffer-stalled\");\n      }\n    });\n  }\n  runStats() {\n    this.connectedPeers = /* @__PURE__ */ new Set();\n    if (this.hlsjs.p2pEngine.getConfig().core.mainStream.isP2PDisabled) {\n      this.hlsjs.on(Hls.Events.FRAG_LOADED, (e, data) => {\n        const bytes2 = data.frag.stats.loaded;\n        this.statsHTTPBytes.pendingDownload.push(bytes2);\n        this.statsHTTPBytes.totalDownload += bytes2;\n      });\n    }\n    this.hlsjs.p2pEngine.addEventListener(\"onChunkDownloaded\", (bytes2, method) => {\n      const elem = method === \"p2p\" ? this.statsP2PBytes : this.statsHTTPBytes;\n      elem.pendingDownload.push(bytes2);\n      elem.totalDownload += bytes2;\n    });\n    this.hlsjs.p2pEngine.addEventListener(\"onChunkUploaded\", (bytes2) => {\n      this.statsP2PBytes.pendingUpload.push(bytes2);\n      this.statsP2PBytes.totalUpload += bytes2;\n    });\n    this.hlsjs.p2pEngine.addEventListener(\"onPeerConnect\", (peer) => {\n      if (peer.streamType !== \"main\") return;\n      this.connectedPeers.add(peer.peerId);\n      this.statsP2PBytes.peersP2POnly = this.connectedPeers.size;\n      this.statsP2PBytes.peersWithWebSeed = this.totalHTTPPeers + this.statsP2PBytes.peersP2POnly;\n    });\n    this.hlsjs.p2pEngine.addEventListener(\"onPeerClose\", (peer) => {\n      if (peer.streamType !== \"main\") return;\n      this.connectedPeers.delete(peer.peerId);\n      this.statsP2PBytes.peersP2POnly = this.connectedPeers.size;\n      this.statsP2PBytes.peersWithWebSeed = this.totalHTTPPeers + this.statsP2PBytes.peersP2POnly;\n    });\n    this.networkInfoInterval = setInterval(() => {\n      const p2pDownloadSpeed = this.arraySum(this.statsP2PBytes.pendingDownload);\n      const p2pUploadSpeed = this.arraySum(this.statsP2PBytes.pendingUpload);\n      const httpDownloadSpeed = this.arraySum(this.statsHTTPBytes.pendingDownload);\n      this.statsP2PBytes.pendingDownload = [];\n      this.statsP2PBytes.pendingUpload = [];\n      this.statsHTTPBytes.pendingDownload = [];\n      return this.player.trigger(\"network-info\", {\n        source: \"p2p-media-loader\",\n        bandwidthEstimate: this.hlsjs.bandwidthEstimate / 8,\n        http: {\n          downloadSpeed: httpDownloadSpeed,\n          downloaded: this.statsHTTPBytes.totalDownload\n        },\n        p2p: this.options.p2pEnabled ? {\n          downloadSpeed: p2pDownloadSpeed,\n          uploadSpeed: p2pUploadSpeed,\n          peersWithWebSeed: this.statsP2PBytes.peersWithWebSeed,\n          peersP2POnly: this.statsP2PBytes.peersP2POnly,\n          downloaded: this.statsP2PBytes.totalDownload,\n          uploaded: this.statsP2PBytes.totalUpload\n        } : void 0\n      });\n    }, 1e3);\n  }\n  arraySum(data) {\n    return data.reduce((a, b) => a + b, 0);\n  }\n  fallbackToBuiltInIOS() {\n    logger$1.info(\"HLS.js does not seem to be supported. Fallback to built-in HLS.\");\n    this.player.src({\n      type: this.options.type,\n      src: addQueryParams(this.options.src, {\n        videoFileToken: this.options.videoFileToken(),\n        reinjectVideoFileToken: \"true\"\n      })\n    });\n    this.getResolutionButton().hide();\n  }\n  getResolutionButton() {\n    const settingsButton = this.player.controlBar.getDescendant([\"settingsButton\"]);\n    return settingsButton.menu.getChild(\"resolutionMenuButton\");\n  }\n}\nvideojs.registerPlugin(\"p2pMediaLoader\", P2pMediaLoaderPlugin);\nvar LIBVERSION = \"2.0.3\", UA_MAX_LENGTH = 500, USER_AGENT = \"user-agent\", EMPTY = \"\", UNKNOWN = \"?\", FUNC_TYPE = \"function\", UNDEF_TYPE = \"undefined\", OBJ_TYPE = \"object\", STR_TYPE = \"string\", UA_BROWSER = \"browser\", UA_CPU = \"cpu\", UA_DEVICE = \"device\", UA_ENGINE = \"engine\", UA_OS = \"os\", UA_RESULT = \"result\", NAME = \"name\", TYPE = \"type\", VENDOR = \"vendor\", VERSION = \"version\", ARCHITECTURE = \"architecture\", MAJOR = \"major\", MODEL = \"model\", CONSOLE = \"console\", MOBILE = \"mobile\", TABLET = \"tablet\", SMARTTV = \"smarttv\", WEARABLE = \"wearable\", XR = \"xr\", EMBEDDED = \"embedded\", INAPP = \"inapp\", BRANDS = \"brands\", FORMFACTORS = \"formFactors\", FULLVERLIST = \"fullVersionList\", PLATFORM = \"platform\", PLATFORMVER = \"platformVersion\", BITNESS = \"bitness\", CH_HEADER = \"sec-ch-ua\", CH_HEADER_FULL_VER_LIST = CH_HEADER + \"-full-version-list\", CH_HEADER_ARCH = CH_HEADER + \"-arch\", CH_HEADER_BITNESS = CH_HEADER + \"-\" + BITNESS, CH_HEADER_FORM_FACTORS = CH_HEADER + \"-form-factors\", CH_HEADER_MOBILE = CH_HEADER + \"-\" + MOBILE, CH_HEADER_MODEL = CH_HEADER + \"-\" + MODEL, CH_HEADER_PLATFORM = CH_HEADER + \"-\" + PLATFORM, CH_HEADER_PLATFORM_VER = CH_HEADER_PLATFORM + \"-version\", CH_ALL_VALUES = [BRANDS, FULLVERLIST, MOBILE, MODEL, PLATFORM, PLATFORMVER, ARCHITECTURE, FORMFACTORS, BITNESS], AMAZON = \"Amazon\", APPLE = \"Apple\", ASUS = \"ASUS\", BLACKBERRY = \"BlackBerry\", GOOGLE = \"Google\", HUAWEI = \"Huawei\", LENOVO = \"Lenovo\", HONOR = \"Honor\", LG = \"LG\", MICROSOFT = \"Microsoft\", MOTOROLA = \"Motorola\", NVIDIA = \"Nvidia\", ONEPLUS = \"OnePlus\", OPPO = \"OPPO\", SAMSUNG = \"Samsung\", SHARP = \"Sharp\", SONY = \"Sony\", XIAOMI = \"Xiaomi\", ZEBRA = \"Zebra\", CHROME = \"Chrome\", CHROMIUM = \"Chromium\", CHROMECAST = \"Chromecast\", EDGE = \"Edge\", FIREFOX = \"Firefox\", OPERA = \"Opera\", FACEBOOK = \"Facebook\", SOGOU = \"Sogou\", PREFIX_MOBILE = \"Mobile \", SUFFIX_BROWSER = \" Browser\", WINDOWS = \"Windows\";\nvar isWindow = typeof window !== UNDEF_TYPE, NAVIGATOR = isWindow && window.navigator ? window.navigator : void 0, NAVIGATOR_UADATA = NAVIGATOR && NAVIGATOR.userAgentData ? NAVIGATOR.userAgentData : void 0;\nvar extend = function(defaultRgx, extensions) {\n  var mergedRgx = {};\n  var extraRgx = extensions;\n  if (!isExtensions(extensions)) {\n    extraRgx = {};\n    for (var i in extensions) {\n      for (var j in extensions[i]) {\n        extraRgx[j] = extensions[i][j].concat(extraRgx[j] ? extraRgx[j] : []);\n      }\n    }\n  }\n  for (var k in defaultRgx) {\n    mergedRgx[k] = extraRgx[k] && extraRgx[k].length % 2 === 0 ? extraRgx[k].concat(defaultRgx[k]) : defaultRgx[k];\n  }\n  return mergedRgx;\n}, enumerize = function(arr) {\n  var enums = {};\n  for (var i = 0; i < arr.length; i++) {\n    enums[arr[i].toUpperCase()] = arr[i];\n  }\n  return enums;\n}, has = function(str1, str2) {\n  if (typeof str1 === OBJ_TYPE && str1.length > 0) {\n    for (var i in str1) {\n      if (lowerize(str1[i]) == lowerize(str2)) return true;\n    }\n    return false;\n  }\n  return isString(str1) ? lowerize(str2).indexOf(lowerize(str1)) !== -1 : false;\n}, isExtensions = function(obj, deep) {\n  for (var prop in obj) {\n    return /^(browser|cpu|device|engine|os)$/.test(prop) || (deep ? isExtensions(obj[prop]) : false);\n  }\n}, isString = function(val) {\n  return typeof val === STR_TYPE;\n}, itemListToArray = function(header) {\n  if (!header) return void 0;\n  var arr = [];\n  var tokens = strip(/\\\\?\\\"/g, header).split(\",\");\n  for (var i = 0; i < tokens.length; i++) {\n    if (tokens[i].indexOf(\";\") > -1) {\n      var token = trim(tokens[i]).split(\";v=\");\n      arr[i] = { brand: token[0], version: token[1] };\n    } else {\n      arr[i] = trim(tokens[i]);\n    }\n  }\n  return arr;\n}, lowerize = function(str) {\n  return isString(str) ? str.toLowerCase() : str;\n}, majorize = function(version2) {\n  return isString(version2) ? strip(/[^\\d\\.]/g, version2).split(\".\")[0] : void 0;\n}, setProps = function(arr) {\n  for (var i in arr) {\n    var propName = arr[i];\n    if (typeof propName == OBJ_TYPE && propName.length == 2) {\n      this[propName[0]] = propName[1];\n    } else {\n      this[propName] = void 0;\n    }\n  }\n  return this;\n}, strip = function(pattern, str) {\n  return isString(str) ? str.replace(pattern, EMPTY) : str;\n}, stripQuotes = function(str) {\n  return strip(/\\\\?\\\"/g, str);\n}, trim = function(str, len) {\n  if (isString(str)) {\n    str = strip(/^\\s\\s*/, str);\n    return typeof len === UNDEF_TYPE ? str : str.substring(0, UA_MAX_LENGTH);\n  }\n};\nvar rgxMapper = function(ua, arrays) {\n  if (!ua || !arrays) return;\n  var i = 0, j, k, p, q, matches, match;\n  while (i < arrays.length && !matches) {\n    var regex = arrays[i], props = arrays[i + 1];\n    j = k = 0;\n    while (j < regex.length && !matches) {\n      if (!regex[j]) {\n        break;\n      }\n      matches = regex[j++].exec(ua);\n      if (!!matches) {\n        for (p = 0; p < props.length; p++) {\n          match = matches[++k];\n          q = props[p];\n          if (typeof q === OBJ_TYPE && q.length > 0) {\n            if (q.length === 2) {\n              if (typeof q[1] == FUNC_TYPE) {\n                this[q[0]] = q[1].call(this, match);\n              } else {\n                this[q[0]] = q[1];\n              }\n            } else if (q.length === 3) {\n              if (typeof q[1] === FUNC_TYPE && !(q[1].exec && q[1].test)) {\n                this[q[0]] = match ? q[1].call(this, match, q[2]) : void 0;\n              } else {\n                this[q[0]] = match ? match.replace(q[1], q[2]) : void 0;\n              }\n            } else if (q.length === 4) {\n              this[q[0]] = match ? q[3].call(this, match.replace(q[1], q[2])) : void 0;\n            }\n          } else {\n            this[q] = match ? match : void 0;\n          }\n        }\n      }\n    }\n    i += 2;\n  }\n}, strMapper = function(str, map) {\n  for (var i in map) {\n    if (typeof map[i] === OBJ_TYPE && map[i].length > 0) {\n      for (var j = 0; j < map[i].length; j++) {\n        if (has(map[i][j], str)) {\n          return i === UNKNOWN ? void 0 : i;\n        }\n      }\n    } else if (has(map[i], str)) {\n      return i === UNKNOWN ? void 0 : i;\n    }\n  }\n  return map.hasOwnProperty(\"*\") ? map[\"*\"] : str;\n};\nvar windowsVersionMap = {\n  \"ME\": \"4.90\",\n  \"NT 3.11\": \"NT3.51\",\n  \"NT 4.0\": \"NT4.0\",\n  \"2000\": \"NT 5.0\",\n  \"XP\": [\"NT 5.1\", \"NT 5.2\"],\n  \"Vista\": \"NT 6.0\",\n  \"7\": \"NT 6.1\",\n  \"8\": \"NT 6.2\",\n  \"8.1\": \"NT 6.3\",\n  \"10\": [\"NT 6.4\", \"NT 10.0\"],\n  \"RT\": \"ARM\"\n}, formFactorsMap = {\n  \"embedded\": \"Automotive\",\n  \"mobile\": \"Mobile\",\n  \"tablet\": [\"Tablet\", \"EInk\"],\n  \"smarttv\": \"TV\",\n  \"wearable\": \"Watch\",\n  \"xr\": [\"VR\", \"XR\"],\n  \"?\": [\"Desktop\", \"Unknown\"],\n  \"*\": void 0\n};\nvar defaultRegexes = {\n  browser: [\n    [\n      // Most common regardless engine\n      /\\b(?:crmo|crios)\\/([\\w\\.]+)/i\n      // Chrome for Android/iOS\n    ],\n    [VERSION, [NAME, PREFIX_MOBILE + \"Chrome\"]],\n    [\n      /edg(?:e|ios|a)?\\/([\\w\\.]+)/i\n      // Microsoft Edge\n    ],\n    [VERSION, [NAME, \"Edge\"]],\n    [\n      // Presto based\n      /(opera mini)\\/([-\\w\\.]+)/i,\n      // Opera Mini\n      /(opera [mobiletab]{3,6})\\b.+version\\/([-\\w\\.]+)/i,\n      // Opera Mobi/Tablet\n      /(opera)(?:.+version\\/|[\\/ ]+)([\\w\\.]+)/i\n      // Opera\n    ],\n    [NAME, VERSION],\n    [\n      /opios[\\/ ]+([\\w\\.]+)/i\n      // Opera mini on iphone >= 8.0\n    ],\n    [VERSION, [NAME, OPERA + \" Mini\"]],\n    [\n      /\\bop(?:rg)?x\\/([\\w\\.]+)/i\n      // Opera GX\n    ],\n    [VERSION, [NAME, OPERA + \" GX\"]],\n    [\n      /\\bopr\\/([\\w\\.]+)/i\n      // Opera Webkit\n    ],\n    [VERSION, [NAME, OPERA]],\n    [\n      // Mixed\n      /\\bb[ai]*d(?:uhd|[ub]*[aekoprswx]{5,6})[\\/ ]?([\\w\\.]+)/i\n      // Baidu\n    ],\n    [VERSION, [NAME, \"Baidu\"]],\n    [\n      /\\b(?:mxbrowser|mxios|myie2)\\/?([-\\w\\.]*)\\b/i\n      // Maxthon\n    ],\n    [VERSION, [NAME, \"Maxthon\"]],\n    [\n      /(kindle)\\/([\\w\\.]+)/i,\n      // Kindle\n      /(lunascape|maxthon|netfront|jasmine|blazer|sleipnir)[\\/ ]?([\\w\\.]*)/i,\n      // Lunascape/Maxthon/Netfront/Jasmine/Blazer/Sleipnir\n      // Trident based\n      /(avant|iemobile|slim(?:browser|boat|jet))[\\/ ]?([\\d\\.]*)/i,\n      // Avant/IEMobile/SlimBrowser/SlimBoat/Slimjet\n      /(?:ms|\\()(ie) ([\\w\\.]+)/i,\n      // Internet Explorer\n      // Blink/Webkit/KHTML based                                         // Flock/RockMelt/Midori/Epiphany/Silk/Skyfire/Bolt/Iron/Iridium/PhantomJS/Bowser/QupZilla/Falkon/LG Browser/Otter/qutebrowser/Dooble\n      /(flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|qupzilla|falkon|rekonq|puffin|brave|whale(?!.+naver)|qqbrowserlite|duckduckgo|klar|helio|(?=comodo_)?dragon|otter|dooble|(?:lg |qute)browser)\\/([-\\w\\.]+)/i,\n      // Rekonq/Puffin/Brave/Whale/QQBrowserLite/QQ//Vivaldi/DuckDuckGo/Klar/Helio/Dragon\n      /(heytap|ovi|115|surf)browser\\/([\\d\\.]+)/i,\n      // HeyTap/Ovi/115/Surf\n      /(ecosia|weibo)(?:__| \\w+@)([\\d\\.]+)/i\n      // Ecosia/Weibo\n    ],\n    [NAME, VERSION],\n    [\n      /quark(?:pc)?\\/([-\\w\\.]+)/i\n      // Quark\n    ],\n    [VERSION, [NAME, \"Quark\"]],\n    [\n      /\\bddg\\/([\\w\\.]+)/i\n      // DuckDuckGo\n    ],\n    [VERSION, [NAME, \"DuckDuckGo\"]],\n    [\n      /(?:\\buc? ?browser|(?:juc.+)ucweb)[\\/ ]?([\\w\\.]+)/i\n      // UCBrowser\n    ],\n    [VERSION, [NAME, \"UCBrowser\"]],\n    [\n      /microm.+\\bqbcore\\/([\\w\\.]+)/i,\n      // WeChat Desktop for Windows Built-in Browser\n      /\\bqbcore\\/([\\w\\.]+).+microm/i,\n      /micromessenger\\/([\\w\\.]+)/i\n      // WeChat\n    ],\n    [VERSION, [NAME, \"WeChat\"]],\n    [\n      /konqueror\\/([\\w\\.]+)/i\n      // Konqueror\n    ],\n    [VERSION, [NAME, \"Konqueror\"]],\n    [\n      /trident.+rv[: ]([\\w\\.]{1,9})\\b.+like gecko/i\n      // IE11\n    ],\n    [VERSION, [NAME, \"IE\"]],\n    [\n      /ya(?:search)?browser\\/([\\w\\.]+)/i\n      // Yandex\n    ],\n    [VERSION, [NAME, \"Yandex\"]],\n    [\n      /slbrowser\\/([\\w\\.]+)/i\n      // Smart Lenovo Browser\n    ],\n    [VERSION, [NAME, \"Smart \" + LENOVO + SUFFIX_BROWSER]],\n    [\n      /(avast|avg)\\/([\\w\\.]+)/i\n      // Avast/AVG Secure Browser\n    ],\n    [[NAME, /(.+)/, \"$1 Secure\" + SUFFIX_BROWSER], VERSION],\n    [\n      /\\bfocus\\/([\\w\\.]+)/i\n      // Firefox Focus\n    ],\n    [VERSION, [NAME, FIREFOX + \" Focus\"]],\n    [\n      /\\bopt\\/([\\w\\.]+)/i\n      // Opera Touch\n    ],\n    [VERSION, [NAME, OPERA + \" Touch\"]],\n    [\n      /coc_coc\\w+\\/([\\w\\.]+)/i\n      // Coc Coc Browser\n    ],\n    [VERSION, [NAME, \"Coc Coc\"]],\n    [\n      /dolfin\\/([\\w\\.]+)/i\n      // Dolphin\n    ],\n    [VERSION, [NAME, \"Dolphin\"]],\n    [\n      /coast\\/([\\w\\.]+)/i\n      // Opera Coast\n    ],\n    [VERSION, [NAME, OPERA + \" Coast\"]],\n    [\n      /miuibrowser\\/([\\w\\.]+)/i\n      // MIUI Browser\n    ],\n    [VERSION, [NAME, \"MIUI\" + SUFFIX_BROWSER]],\n    [\n      /fxios\\/([\\w\\.-]+)/i\n      // Firefox for iOS\n    ],\n    [VERSION, [NAME, PREFIX_MOBILE + FIREFOX]],\n    [\n      /\\bqihoobrowser\\/?([\\w\\.]*)/i\n      // 360\n    ],\n    [VERSION, [NAME, \"360\"]],\n    [\n      /\\b(qq)\\/([\\w\\.]+)/i\n      // QQ\n    ],\n    [[NAME, /(.+)/, \"$1Browser\"], VERSION],\n    [\n      /(oculus|sailfish|huawei|vivo|pico)browser\\/([\\w\\.]+)/i\n    ],\n    [[NAME, /(.+)/, \"$1\" + SUFFIX_BROWSER], VERSION],\n    [\n      // Oculus/Sailfish/HuaweiBrowser/VivoBrowser/PicoBrowser\n      /samsungbrowser\\/([\\w\\.]+)/i\n      // Samsung Internet\n    ],\n    [VERSION, [NAME, SAMSUNG + \" Internet\"]],\n    [\n      /metasr[\\/ ]?([\\d\\.]+)/i\n      // Sogou Explorer\n    ],\n    [VERSION, [NAME, SOGOU + \" Explorer\"]],\n    [\n      /(sogou)mo\\w+\\/([\\d\\.]+)/i\n      // Sogou Mobile\n    ],\n    [[NAME, SOGOU + \" Mobile\"], VERSION],\n    [\n      /(electron)\\/([\\w\\.]+) safari/i,\n      // Electron-based App\n      /(tesla)(?: qtcarbrowser|\\/(20\\d\\d\\.[-\\w\\.]+))/i,\n      // Tesla\n      /m?(qqbrowser|2345(?=browser|chrome|explorer))\\w*[\\/ ]?v?([\\w\\.]+)/i\n      // QQ/2345\n    ],\n    [NAME, VERSION],\n    [\n      /(lbbrowser|rekonq)/i\n      // LieBao Browser/Rekonq\n    ],\n    [NAME],\n    [\n      /ome\\/([\\w\\.]+) \\w* ?(iron) saf/i,\n      // Iron\n      /ome\\/([\\w\\.]+).+qihu (360)[es]e/i\n      // 360\n    ],\n    [VERSION, NAME],\n    [\n      // WebView\n      /((?:fban\\/fbios|fb_iab\\/fb4a)(?!.+fbav)|;fbav\\/([\\w\\.]+);)/i\n      // Facebook App for iOS & Android\n    ],\n    [[NAME, FACEBOOK], VERSION, [TYPE, INAPP]],\n    [\n      /(Klarna)\\/([\\w\\.]+)/i,\n      // Klarna Shopping Browser for iOS & Android\n      /(kakao(?:talk|story))[\\/ ]([\\w\\.]+)/i,\n      // Kakao App\n      /(naver)\\(.*?(\\d+\\.[\\w\\.]+).*\\)/i,\n      // Naver InApp\n      /(daum)apps[\\/ ]([\\w\\.]+)/i,\n      // Daum App\n      /safari (line)\\/([\\w\\.]+)/i,\n      // Line App for iOS\n      /\\b(line)\\/([\\w\\.]+)\\/iab/i,\n      // Line App for Android\n      /(alipay)client\\/([\\w\\.]+)/i,\n      // Alipay\n      /(twitter)(?:and| f.+e\\/([\\w\\.]+))/i,\n      // Twitter\n      /(instagram|snapchat)[\\/ ]([-\\w\\.]+)/i\n      // Instagram/Snapchat\n    ],\n    [NAME, VERSION, [TYPE, INAPP]],\n    [\n      /\\bgsa\\/([\\w\\.]+) .*safari\\//i\n      // Google Search Appliance on iOS\n    ],\n    [VERSION, [NAME, \"GSA\"], [TYPE, INAPP]],\n    [\n      /musical_ly(?:.+app_?version\\/|_)([\\w\\.]+)/i\n      // TikTok\n    ],\n    [VERSION, [NAME, \"TikTok\"], [TYPE, INAPP]],\n    [\n      /\\[(linkedin)app\\]/i\n      // LinkedIn App for iOS & Android\n    ],\n    [NAME, [TYPE, INAPP]],\n    [\n      /(chromium)[\\/ ]([-\\w\\.]+)/i\n      // Chromium\n    ],\n    [NAME, VERSION],\n    [\n      /headlesschrome(?:\\/([\\w\\.]+)| )/i\n      // Chrome Headless\n    ],\n    [VERSION, [NAME, CHROME + \" Headless\"]],\n    [\n      / wv\\).+(chrome)\\/([\\w\\.]+)/i\n      // Chrome WebView\n    ],\n    [[NAME, CHROME + \" WebView\"], VERSION],\n    [\n      /droid.+ version\\/([\\w\\.]+)\\b.+(?:mobile safari|safari)/i\n      // Android Browser\n    ],\n    [VERSION, [NAME, \"Android\" + SUFFIX_BROWSER]],\n    [\n      /chrome\\/([\\w\\.]+) mobile/i\n      // Chrome Mobile\n    ],\n    [VERSION, [NAME, PREFIX_MOBILE + \"Chrome\"]],\n    [\n      /(chrome|omniweb|arora|[tizenoka]{5} ?browser)\\/v?([\\w\\.]+)/i\n      // Chrome/OmniWeb/Arora/Tizen/Nokia\n    ],\n    [NAME, VERSION],\n    [\n      /version\\/([\\w\\.\\,]+) .*mobile(?:\\/\\w+ | ?)safari/i\n      // Safari Mobile\n    ],\n    [VERSION, [NAME, PREFIX_MOBILE + \"Safari\"]],\n    [\n      /iphone .*mobile(?:\\/\\w+ | ?)safari/i\n    ],\n    [[NAME, PREFIX_MOBILE + \"Safari\"]],\n    [\n      /version\\/([\\w\\.\\,]+) .*(safari)/i\n      // Safari\n    ],\n    [VERSION, NAME],\n    [\n      /webkit.+?(mobile ?safari|safari)(\\/[\\w\\.]+)/i\n      // Safari < 3.0\n    ],\n    [NAME, [VERSION, \"1\"]],\n    [\n      /(webkit|khtml)\\/([\\w\\.]+)/i\n    ],\n    [NAME, VERSION],\n    [\n      // Gecko based\n      /(?:mobile|tablet);.*(firefox)\\/([\\w\\.-]+)/i\n      // Firefox Mobile\n    ],\n    [[NAME, PREFIX_MOBILE + FIREFOX], VERSION],\n    [\n      /(navigator|netscape\\d?)\\/([-\\w\\.]+)/i\n      // Netscape\n    ],\n    [[NAME, \"Netscape\"], VERSION],\n    [\n      /(wolvic|librewolf)\\/([\\w\\.]+)/i\n      // Wolvic/LibreWolf\n    ],\n    [NAME, VERSION],\n    [\n      /mobile vr; rv:([\\w\\.]+)\\).+firefox/i\n      // Firefox Reality\n    ],\n    [VERSION, [NAME, FIREFOX + \" Reality\"]],\n    [\n      /ekiohf.+(flow)\\/([\\w\\.]+)/i,\n      // Flow\n      /(swiftfox)/i,\n      // Swiftfox\n      /(icedragon|iceweasel|camino|chimera|fennec|maemo browser|minimo|conkeror)[\\/ ]?([\\w\\.\\+]+)/i,\n      // IceDragon/Iceweasel/Camino/Chimera/Fennec/Maemo/Minimo/Conkeror\n      /(seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\\/([-\\w\\.]+)$/i,\n      // Firefox/SeaMonkey/K-Meleon/IceCat/IceApe/Firebird/Phoenix\n      /(firefox)\\/([\\w\\.]+)/i,\n      // Other Firefox-based\n      /(mozilla)\\/([\\w\\.]+) .+rv\\:.+gecko\\/\\d+/i,\n      // Mozilla\n      // Other\n      /(amaya|dillo|doris|icab|ladybird|lynx|mosaic|netsurf|obigo|polaris|w3m|(?:go|ice|up)[\\. ]?browser)[-\\/ ]?v?([\\w\\.]+)/i,\n      // Polaris/Lynx/Dillo/iCab/Doris/Amaya/w3m/NetSurf/Obigo/Mosaic/Go/ICE/UP.Browser/Ladybird\n      /\\b(links) \\(([\\w\\.]+)/i\n      // Links\n    ],\n    [NAME, [VERSION, /_/g, \".\"]],\n    [\n      /(cobalt)\\/([\\w\\.]+)/i\n      // Cobalt\n    ],\n    [NAME, [VERSION, /[^\\d\\.]+./, EMPTY]]\n  ],\n  cpu: [\n    [\n      /\\b((amd|x|x86[-_]?|wow|win)64)\\b/i\n      // AMD64 (x64)\n    ],\n    [[ARCHITECTURE, \"amd64\"]],\n    [\n      /(ia32(?=;))/i,\n      // IA32 (quicktime)\n      /\\b((i[346]|x)86)(pc)?\\b/i\n      // IA32 (x86)\n    ],\n    [[ARCHITECTURE, \"ia32\"]],\n    [\n      /\\b(aarch64|arm(v?[89]e?l?|_?64))\\b/i\n      // ARM64\n    ],\n    [[ARCHITECTURE, \"arm64\"]],\n    [\n      /\\b(arm(v[67])?ht?n?[fl]p?)\\b/i\n      // ARMHF\n    ],\n    [[ARCHITECTURE, \"armhf\"]],\n    [\n      // PocketPC mistakenly identified as PowerPC\n      /( (ce|mobile); ppc;|\\/[\\w\\.]+arm\\b)/i\n    ],\n    [[ARCHITECTURE, \"arm\"]],\n    [\n      /((ppc|powerpc)(64)?)( mac|;|\\))/i\n      // PowerPC\n    ],\n    [[ARCHITECTURE, /ower/, EMPTY, lowerize]],\n    [\n      / sun4\\w[;\\)]/i\n      // SPARC\n    ],\n    [[ARCHITECTURE, \"sparc\"]],\n    [\n      /\\b(avr32|ia64(?=;)|68k(?=\\))|\\barm(?=v([1-7]|[5-7]1)l?|;|eabi)|(irix|mips|sparc)(64)?\\b|pa-risc)/i\n      // IA64, 68K, ARM/64, AVR/32, IRIX/64, MIPS/64, SPARC/64, PA-RISC\n    ],\n    [[ARCHITECTURE, lowerize]]\n  ],\n  device: [\n    [\n      //////////////////////////\n      // MOBILES & TABLETS\n      /////////////////////////\n      // Samsung\n      /\\b(sch-i[89]0\\d|shw-m380s|sm-[ptx]\\w{2,4}|gt-[pn]\\d{2,4}|sgh-t8[56]9|nexus 10)/i\n    ],\n    [MODEL, [VENDOR, SAMSUNG], [TYPE, TABLET]],\n    [\n      /\\b((?:s[cgp]h|gt|sm)-(?![lr])\\w+|sc[g-]?[\\d]+a?|galaxy nexus)/i,\n      /samsung[- ]((?!sm-[lr])[-\\w]+)/i,\n      /sec-(sgh\\w+)/i\n    ],\n    [MODEL, [VENDOR, SAMSUNG], [TYPE, MOBILE]],\n    [\n      // Apple\n      /(?:\\/|\\()(ip(?:hone|od)[\\w, ]*)(?:\\/|;)/i\n      // iPod/iPhone\n    ],\n    [MODEL, [VENDOR, APPLE], [TYPE, MOBILE]],\n    [\n      /\\((ipad);[-\\w\\),; ]+apple/i,\n      // iPad\n      /applecoremedia\\/[\\w\\.]+ \\((ipad)/i,\n      /\\b(ipad)\\d\\d?,\\d\\d?[;\\]].+ios/i\n    ],\n    [MODEL, [VENDOR, APPLE], [TYPE, TABLET]],\n    [\n      /(macintosh);/i\n    ],\n    [MODEL, [VENDOR, APPLE]],\n    [\n      // Sharp\n      /\\b(sh-?[altvz]?\\d\\d[a-ekm]?)/i\n    ],\n    [MODEL, [VENDOR, SHARP], [TYPE, MOBILE]],\n    [\n      // Honor\n      /\\b((?:brt|eln|hey2?|gdi|jdn)-a?[lnw]09|(?:ag[rm]3?|jdn2|kob2)-a?[lw]0[09]hn)(?: bui|\\)|;)/i\n    ],\n    [MODEL, [VENDOR, HONOR], [TYPE, TABLET]],\n    [\n      /honor([-\\w ]+)[;\\)]/i\n    ],\n    [MODEL, [VENDOR, HONOR], [TYPE, MOBILE]],\n    [\n      // Huawei\n      /\\b((?:ag[rs][2356]?k?|bah[234]?|bg[2o]|bt[kv]|cmr|cpn|db[ry]2?|jdn2|got|kob2?k?|mon|pce|scm|sht?|[tw]gr|vrd)-[ad]?[lw][0125][09]b?|605hw|bg2-u03|(?:gem|fdr|m2|ple|t1)-[7a]0[1-4][lu]|t1-a2[13][lw]|mediapad[\\w\\. ]*(?= bui|\\)))\\b(?!.+d\\/s)/i\n    ],\n    [MODEL, [VENDOR, HUAWEI], [TYPE, TABLET]],\n    [\n      /(?:huawei)([-\\w ]+)[;\\)]/i,\n      /\\b(nexus 6p|\\w{2,4}e?-[atu]?[ln][\\dx][012359c][adn]?)\\b(?!.+d\\/s)/i\n    ],\n    [MODEL, [VENDOR, HUAWEI], [TYPE, MOBILE]],\n    [\n      // Xiaomi\n      /oid[^\\)]+; (2[\\dbc]{4}(182|283|rp\\w{2})[cgl]|m2105k81a?c)(?: bui|\\))/i,\n      /\\b((?:red)?mi[-_ ]?pad[\\w- ]*)(?: bui|\\))/i\n      // Mi Pad tablets\n    ],\n    [[MODEL, /_/g, \" \"], [VENDOR, XIAOMI], [TYPE, TABLET]],\n    [\n      /\\b(poco[\\w ]+|m2\\d{3}j\\d\\d[a-z]{2})(?: bui|\\))/i,\n      // Xiaomi POCO\n      /\\b; (\\w+) build\\/hm\\1/i,\n      // Xiaomi Hongmi 'numeric' models\n      /\\b(hm[-_ ]?note?[_ ]?(?:\\d\\w)?) bui/i,\n      // Xiaomi Hongmi\n      /\\b(redmi[\\-_ ]?(?:note|k)?[\\w_ ]+)(?: bui|\\))/i,\n      // Xiaomi Redmi\n      /oid[^\\)]+; (m?[12][0-389][01]\\w{3,6}[c-y])( bui|; wv|\\))/i,\n      // Xiaomi Redmi 'numeric' models\n      /\\b(mi[-_ ]?(?:a\\d|one|one[_ ]plus|note lte|max|cc)?[_ ]?(?:\\d?\\w?)[_ ]?(?:plus|se|lite|pro)?)(?: bui|\\))/i,\n      // Xiaomi Mi\n      / ([\\w ]+) miui\\/v?\\d/i\n    ],\n    [[MODEL, /_/g, \" \"], [VENDOR, XIAOMI], [TYPE, MOBILE]],\n    [\n      // OPPO\n      /; (\\w+) bui.+ oppo/i,\n      /\\b(cph[12]\\d{3}|p(?:af|c[al]|d\\w|e[ar])[mt]\\d0|x9007|a101op)\\b/i\n    ],\n    [MODEL, [VENDOR, OPPO], [TYPE, MOBILE]],\n    [\n      /\\b(opd2(\\d{3}a?))(?: bui|\\))/i\n    ],\n    [MODEL, [VENDOR, strMapper, { \"OnePlus\": [\"304\", \"403\", \"203\"], \"*\": OPPO }], [TYPE, TABLET]],\n    [\n      // BLU Vivo Series\n      /(vivo (5r?|6|8l?|go|one|s|x[il]?[2-4]?)[\\w\\+ ]*)(?: bui|\\))/i\n    ],\n    [MODEL, [VENDOR, \"BLU\"], [TYPE, MOBILE]],\n    [\n      // Vivo\n      /; vivo (\\w+)(?: bui|\\))/i,\n      /\\b(v[12]\\d{3}\\w?[at])(?: bui|;)/i\n    ],\n    [MODEL, [VENDOR, \"Vivo\"], [TYPE, MOBILE]],\n    [\n      // Realme\n      /\\b(rmx[1-3]\\d{3})(?: bui|;|\\))/i\n    ],\n    [MODEL, [VENDOR, \"Realme\"], [TYPE, MOBILE]],\n    [\n      // Motorola\n      /\\b(milestone|droid(?:[2-4x]| (?:bionic|x2|pro|razr))?:?( 4g)?)\\b[\\w ]+build\\//i,\n      /\\bmot(?:orola)?[- ](\\w*)/i,\n      /((?:moto(?! 360)[\\w\\(\\) ]+|xt\\d{3,4}|nexus 6)(?= bui|\\)))/i\n    ],\n    [MODEL, [VENDOR, MOTOROLA], [TYPE, MOBILE]],\n    [\n      /\\b(mz60\\d|xoom[2 ]{0,2}) build\\//i\n    ],\n    [MODEL, [VENDOR, MOTOROLA], [TYPE, TABLET]],\n    [\n      // LG\n      /((?=lg)?[vl]k\\-?\\d{3}) bui| 3\\.[-\\w; ]{10}lg?-([06cv9]{3,4})/i\n    ],\n    [MODEL, [VENDOR, LG], [TYPE, TABLET]],\n    [\n      /(lm(?:-?f100[nv]?|-[\\w\\.]+)(?= bui|\\))|nexus [45])/i,\n      /\\blg[-e;\\/ ]+(?!.*(?:browser|netcast|android tv|watch))(\\w+)/i,\n      /\\blg-?([\\d\\w]+) bui/i\n    ],\n    [MODEL, [VENDOR, LG], [TYPE, MOBILE]],\n    [\n      // Lenovo\n      /(ideatab[-\\w ]+|602lv|d-42a|a101lv|a2109a|a3500-hv|s[56]000|pb-6505[my]|tb-?x?\\d{3,4}(?:f[cu]|xu|[av])|yt\\d?-[jx]?\\d+[lfmx])( bui|;|\\)|\\/)/i,\n      /lenovo ?(b[68]0[08]0-?[hf]?|tab(?:[\\w- ]+?)|tb[\\w-]{6,7})( bui|;|\\)|\\/)/i\n    ],\n    [MODEL, [VENDOR, LENOVO], [TYPE, TABLET]],\n    [\n      // Nokia\n      /(nokia) (t[12][01])/i\n    ],\n    [VENDOR, MODEL, [TYPE, TABLET]],\n    [\n      /(?:maemo|nokia).*(n900|lumia \\d+|rm-\\d+)/i,\n      /nokia[-_ ]?(([-\\w\\. ]*))/i\n    ],\n    [[MODEL, /_/g, \" \"], [TYPE, MOBILE], [VENDOR, \"Nokia\"]],\n    [\n      // Google\n      /(pixel (c|tablet))\\b/i\n      // Google Pixel C/Tablet\n    ],\n    [MODEL, [VENDOR, GOOGLE], [TYPE, TABLET]],\n    [\n      /droid.+; (pixel[\\daxl ]{0,6})(?: bui|\\))/i\n      // Google Pixel\n    ],\n    [MODEL, [VENDOR, GOOGLE], [TYPE, MOBILE]],\n    [\n      // Sony\n      /droid.+; (a?\\d[0-2]{2}so|[c-g]\\d{4}|so[-gl]\\w+|xq-a\\w[4-7][12])(?= bui|\\).+chrome\\/(?![1-6]{0,1}\\d\\.))/i\n    ],\n    [MODEL, [VENDOR, SONY], [TYPE, MOBILE]],\n    [\n      /sony tablet [ps]/i,\n      /\\b(?:sony)?sgp\\w+(?: bui|\\))/i\n    ],\n    [[MODEL, \"Xperia Tablet\"], [VENDOR, SONY], [TYPE, TABLET]],\n    [\n      // OnePlus\n      / (kb2005|in20[12]5|be20[12][59])\\b/i,\n      /(?:one)?(?:plus)? (a\\d0\\d\\d)(?: b|\\))/i\n    ],\n    [MODEL, [VENDOR, ONEPLUS], [TYPE, MOBILE]],\n    [\n      // Amazon\n      /(alexa)webm/i,\n      /(kf[a-z]{2}wi|aeo(?!bc)\\w\\w)( bui|\\))/i,\n      // Kindle Fire without Silk / Echo Show\n      /(kf[a-z]+)( bui|\\)).+silk\\//i\n      // Kindle Fire HD\n    ],\n    [MODEL, [VENDOR, AMAZON], [TYPE, TABLET]],\n    [\n      /((?:sd|kf)[0349hijorstuw]+)( bui|\\)).+silk\\//i\n      // Fire Phone\n    ],\n    [[MODEL, /(.+)/g, \"Fire Phone $1\"], [VENDOR, AMAZON], [TYPE, MOBILE]],\n    [\n      // BlackBerry\n      /(playbook);[-\\w\\),; ]+(rim)/i\n      // BlackBerry PlayBook\n    ],\n    [MODEL, VENDOR, [TYPE, TABLET]],\n    [\n      /\\b((?:bb[a-f]|st[hv])100-\\d)/i,\n      /\\(bb10; (\\w+)/i\n      // BlackBerry 10\n    ],\n    [MODEL, [VENDOR, BLACKBERRY], [TYPE, MOBILE]],\n    [\n      // Asus\n      /(?:\\b|asus_)(transfo[prime ]{4,10} \\w+|eeepc|slider \\w+|nexus 7|padfone|p00[cj])/i\n    ],\n    [MODEL, [VENDOR, ASUS], [TYPE, TABLET]],\n    [\n      / (z[bes]6[027][012][km][ls]|zenfone \\d\\w?)\\b/i\n    ],\n    [MODEL, [VENDOR, ASUS], [TYPE, MOBILE]],\n    [\n      // HTC\n      /(nexus 9)/i\n      // HTC Nexus 9\n    ],\n    [MODEL, [VENDOR, \"HTC\"], [TYPE, TABLET]],\n    [\n      /(htc)[-;_ ]{1,2}([\\w ]+(?=\\)| bui)|\\w+)/i,\n      // HTC\n      // ZTE\n      /(zte)[- ]([\\w ]+?)(?: bui|\\/|\\))/i,\n      /(alcatel|geeksphone|nexian|panasonic(?!(?:;|\\.))|sony(?!-bra))[-_ ]?([-\\w]*)/i\n      // Alcatel/GeeksPhone/Nexian/Panasonic/Sony\n    ],\n    [VENDOR, [MODEL, /_/g, \" \"], [TYPE, MOBILE]],\n    [\n      // TCL\n      /tcl (xess p17aa)/i,\n      /droid [\\w\\.]+; ((?:8[14]9[16]|9(?:0(?:48|60|8[01])|1(?:3[27]|66)|2(?:6[69]|9[56])|466))[gqswx])(_\\w(\\w|\\w\\w))?(\\)| bui)/i\n    ],\n    [MODEL, [VENDOR, \"TCL\"], [TYPE, TABLET]],\n    [\n      /droid [\\w\\.]+; (418(?:7d|8v)|5087z|5102l|61(?:02[dh]|25[adfh]|27[ai]|56[dh]|59k|65[ah])|a509dl|t(?:43(?:0w|1[adepqu])|50(?:6d|7[adju])|6(?:09dl|10k|12b|71[efho]|76[hjk])|7(?:66[ahju]|67[hw]|7[045][bh]|71[hk]|73o|76[ho]|79w|81[hks]?|82h|90[bhsy]|99b)|810[hs]))(_\\w(\\w|\\w\\w))?(\\)| bui)/i\n    ],\n    [MODEL, [VENDOR, \"TCL\"], [TYPE, MOBILE]],\n    [\n      // itel\n      /(itel) ((\\w+))/i\n    ],\n    [[VENDOR, lowerize], MODEL, [TYPE, strMapper, { \"tablet\": [\"p10001l\", \"w7001\"], \"*\": \"mobile\" }]],\n    [\n      // Acer\n      /droid.+; ([ab][1-7]-?[0178a]\\d\\d?)/i\n    ],\n    [MODEL, [VENDOR, \"Acer\"], [TYPE, TABLET]],\n    [\n      // Meizu\n      /droid.+; (m[1-5] note) bui/i,\n      /\\bmz-([-\\w]{2,})/i\n    ],\n    [MODEL, [VENDOR, \"Meizu\"], [TYPE, MOBILE]],\n    [\n      // Ulefone\n      /; ((?:power )?armor(?:[\\w ]{0,8}))(?: bui|\\))/i\n    ],\n    [MODEL, [VENDOR, \"Ulefone\"], [TYPE, MOBILE]],\n    [\n      // Energizer\n      /; (energy ?\\w+)(?: bui|\\))/i,\n      /; energizer ([\\w ]+)(?: bui|\\))/i\n    ],\n    [MODEL, [VENDOR, \"Energizer\"], [TYPE, MOBILE]],\n    [\n      // Cat\n      /; cat (b35);/i,\n      /; (b15q?|s22 flip|s48c|s62 pro)(?: bui|\\))/i\n    ],\n    [MODEL, [VENDOR, \"Cat\"], [TYPE, MOBILE]],\n    [\n      // Smartfren\n      /((?:new )?andromax[\\w- ]+)(?: bui|\\))/i\n    ],\n    [MODEL, [VENDOR, \"Smartfren\"], [TYPE, MOBILE]],\n    [\n      // Nothing\n      /droid.+; (a(?:015|06[35]|142p?))/i\n    ],\n    [MODEL, [VENDOR, \"Nothing\"], [TYPE, MOBILE]],\n    [\n      // Archos\n      /; (x67 5g|tikeasy \\w+|ac[1789]\\d\\w+)( b|\\))/i,\n      /archos ?(5|gamepad2?|([\\w ]*[t1789]|hello) ?\\d+[\\w ]*)( b|\\))/i\n    ],\n    [MODEL, [VENDOR, \"Archos\"], [TYPE, TABLET]],\n    [\n      /archos ([\\w ]+)( b|\\))/i,\n      /; (ac[3-6]\\d\\w{2,8})( b|\\))/i\n    ],\n    [MODEL, [VENDOR, \"Archos\"], [TYPE, MOBILE]],\n    [\n      // MIXED\n      /(imo) (tab \\w+)/i,\n      // IMO\n      /(infinix) (x1101b?)/i\n      // Infinix XPad\n    ],\n    [VENDOR, MODEL, [TYPE, TABLET]],\n    [\n      /(blackberry|benq|palm(?=\\-)|sonyericsson|acer|asus(?! zenw)|dell|jolla|meizu|motorola|polytron|infinix|tecno|micromax|advan)[-_ ]?([-\\w]*)/i,\n      // BlackBerry/BenQ/Palm/Sony-Ericsson/Acer/Asus/Dell/Meizu/Motorola/Polytron/Infinix/Tecno/Micromax/Advan\n      /; (blu|hmd|imo|tcl)[_ ]([\\w\\+ ]+?)(?: bui|\\)|; r)/i,\n      // BLU/HMD/IMO/TCL\n      /(hp) ([\\w ]+\\w)/i,\n      // HP iPAQ\n      /(microsoft); (lumia[\\w ]+)/i,\n      // Microsoft Lumia\n      /(lenovo)[-_ ]?([-\\w ]+?)(?: bui|\\)|\\/)/i,\n      // Lenovo\n      /(oppo) ?([\\w ]+) bui/i\n      // OPPO\n    ],\n    [VENDOR, MODEL, [TYPE, MOBILE]],\n    [\n      /(kobo)\\s(ereader|touch)/i,\n      // Kobo\n      /(hp).+(touchpad(?!.+tablet)|tablet)/i,\n      // HP TouchPad\n      /(kindle)\\/([\\w\\.]+)/i\n      // Kindle\n    ],\n    [VENDOR, MODEL, [TYPE, TABLET]],\n    [\n      /(surface duo)/i\n      // Surface Duo\n    ],\n    [MODEL, [VENDOR, MICROSOFT], [TYPE, TABLET]],\n    [\n      /droid [\\d\\.]+; (fp\\du?)(?: b|\\))/i\n      // Fairphone\n    ],\n    [MODEL, [VENDOR, \"Fairphone\"], [TYPE, MOBILE]],\n    [\n      /((?:tegranote|shield t(?!.+d tv))[\\w- ]*?)(?: b|\\))/i\n      // Nvidia Tablets\n    ],\n    [MODEL, [VENDOR, NVIDIA], [TYPE, TABLET]],\n    [\n      /(sprint) (\\w+)/i\n      // Sprint Phones\n    ],\n    [VENDOR, MODEL, [TYPE, MOBILE]],\n    [\n      /(kin\\.[onetw]{3})/i\n      // Microsoft Kin\n    ],\n    [[MODEL, /\\./g, \" \"], [VENDOR, MICROSOFT], [TYPE, MOBILE]],\n    [\n      /droid.+; ([c6]+|et5[16]|mc[239][23]x?|vc8[03]x?)\\)/i\n      // Zebra\n    ],\n    [MODEL, [VENDOR, ZEBRA], [TYPE, TABLET]],\n    [\n      /droid.+; (ec30|ps20|tc[2-8]\\d[kx])\\)/i\n    ],\n    [MODEL, [VENDOR, ZEBRA], [TYPE, MOBILE]],\n    [\n      ///////////////////\n      // SMARTTVS\n      ///////////////////\n      /smart-tv.+(samsung)/i\n      // Samsung\n    ],\n    [VENDOR, [TYPE, SMARTTV]],\n    [\n      /hbbtv.+maple;(\\d+)/i\n    ],\n    [[MODEL, /^/, \"SmartTV\"], [VENDOR, SAMSUNG], [TYPE, SMARTTV]],\n    [\n      /tcast.+(lg)e?. ([-\\w]+)/i\n      // LG SmartTV\n    ],\n    [VENDOR, MODEL, [TYPE, SMARTTV]],\n    [\n      /(nux; netcast.+smarttv|lg (netcast\\.tv-201\\d|android tv))/i\n    ],\n    [[VENDOR, LG], [TYPE, SMARTTV]],\n    [\n      /(apple) ?tv/i\n      // Apple TV\n    ],\n    [VENDOR, [MODEL, APPLE + \" TV\"], [TYPE, SMARTTV]],\n    [\n      /crkey.*devicetype\\/chromecast/i\n      // Google Chromecast Third Generation\n    ],\n    [[MODEL, CHROMECAST + \" Third Generation\"], [VENDOR, GOOGLE], [TYPE, SMARTTV]],\n    [\n      /crkey.*devicetype\\/([^/]*)/i\n      // Google Chromecast with specific device type\n    ],\n    [[MODEL, /^/, \"Chromecast \"], [VENDOR, GOOGLE], [TYPE, SMARTTV]],\n    [\n      /fuchsia.*crkey/i\n      // Google Chromecast Nest Hub\n    ],\n    [[MODEL, CHROMECAST + \" Nest Hub\"], [VENDOR, GOOGLE], [TYPE, SMARTTV]],\n    [\n      /crkey/i\n      // Google Chromecast, Linux-based or unknown\n    ],\n    [[MODEL, CHROMECAST], [VENDOR, GOOGLE], [TYPE, SMARTTV]],\n    [\n      /(portaltv)/i\n      // Facebook Portal TV\n    ],\n    [MODEL, [VENDOR, FACEBOOK], [TYPE, SMARTTV]],\n    [\n      /droid.+aft(\\w+)( bui|\\))/i\n      // Fire TV\n    ],\n    [MODEL, [VENDOR, AMAZON], [TYPE, SMARTTV]],\n    [\n      /(shield \\w+ tv)/i\n      // Nvidia Shield TV\n    ],\n    [MODEL, [VENDOR, NVIDIA], [TYPE, SMARTTV]],\n    [\n      /\\(dtv[\\);].+(aquos)/i,\n      /(aquos-tv[\\w ]+)\\)/i\n      // Sharp\n    ],\n    [MODEL, [VENDOR, SHARP], [TYPE, SMARTTV]],\n    [\n      /(bravia[\\w ]+)( bui|\\))/i\n      // Sony\n    ],\n    [MODEL, [VENDOR, SONY], [TYPE, SMARTTV]],\n    [\n      /(mi(tv|box)-?\\w+) bui/i\n      // Xiaomi\n    ],\n    [MODEL, [VENDOR, XIAOMI], [TYPE, SMARTTV]],\n    [\n      /Hbbtv.*(technisat) (.*);/i\n      // TechniSAT\n    ],\n    [VENDOR, MODEL, [TYPE, SMARTTV]],\n    [\n      /\\b(roku)[\\dx]*[\\)\\/]((?:dvp-)?[\\d\\.]*)/i,\n      // Roku\n      /hbbtv\\/\\d+\\.\\d+\\.\\d+ +\\([\\w\\+ ]*; *([\\w\\d][^;]*);([^;]*)/i\n      // HbbTV devices\n    ],\n    [[VENDOR, trim], [MODEL, trim], [TYPE, SMARTTV]],\n    [\n      // SmartTV from Unidentified Vendors\n      /droid.+; ([\\w- ]+) (?:android tv|smart[- ]?tv)/i\n    ],\n    [MODEL, [TYPE, SMARTTV]],\n    [\n      /\\b(android tv|smart[- ]?tv|opera tv|tv; rv:)\\b/i\n    ],\n    [[TYPE, SMARTTV]],\n    [\n      ///////////////////\n      // CONSOLES\n      ///////////////////\n      /(ouya)/i,\n      // Ouya\n      /(nintendo) (\\w+)/i\n      // Nintendo\n    ],\n    [VENDOR, MODEL, [TYPE, CONSOLE]],\n    [\n      /droid.+; (shield)( bui|\\))/i\n      // Nvidia Portable\n    ],\n    [MODEL, [VENDOR, NVIDIA], [TYPE, CONSOLE]],\n    [\n      /(playstation \\w+)/i\n      // Playstation\n    ],\n    [MODEL, [VENDOR, SONY], [TYPE, CONSOLE]],\n    [\n      /\\b(xbox(?: one)?(?!; xbox))[\\); ]/i\n      // Microsoft Xbox\n    ],\n    [MODEL, [VENDOR, MICROSOFT], [TYPE, CONSOLE]],\n    [\n      ///////////////////\n      // WEARABLES\n      ///////////////////\n      /\\b(sm-[lr]\\d\\d[0156][fnuw]?s?|gear live)\\b/i\n      // Samsung Galaxy Watch\n    ],\n    [MODEL, [VENDOR, SAMSUNG], [TYPE, WEARABLE]],\n    [\n      /((pebble))app/i,\n      // Pebble\n      /(asus|google|lg|oppo) ((pixel |zen)?watch[\\w ]*)( bui|\\))/i\n      // Asus ZenWatch / LG Watch / Pixel Watch\n    ],\n    [VENDOR, MODEL, [TYPE, WEARABLE]],\n    [\n      /(ow(?:19|20)?we?[1-3]{1,3})/i\n      // Oppo Watch\n    ],\n    [MODEL, [VENDOR, OPPO], [TYPE, WEARABLE]],\n    [\n      /(watch)(?: ?os[,\\/]|\\d,\\d\\/)[\\d\\.]+/i\n      // Apple Watch\n    ],\n    [MODEL, [VENDOR, APPLE], [TYPE, WEARABLE]],\n    [\n      /(opwwe\\d{3})/i\n      // OnePlus Watch\n    ],\n    [MODEL, [VENDOR, ONEPLUS], [TYPE, WEARABLE]],\n    [\n      /(moto 360)/i\n      // Motorola 360\n    ],\n    [MODEL, [VENDOR, MOTOROLA], [TYPE, WEARABLE]],\n    [\n      /(smartwatch 3)/i\n      // Sony SmartWatch\n    ],\n    [MODEL, [VENDOR, SONY], [TYPE, WEARABLE]],\n    [\n      /(g watch r)/i\n      // LG G Watch R\n    ],\n    [MODEL, [VENDOR, LG], [TYPE, WEARABLE]],\n    [\n      /droid.+; (wt63?0{2,3})\\)/i\n    ],\n    [MODEL, [VENDOR, ZEBRA], [TYPE, WEARABLE]],\n    [\n      ///////////////////\n      // XR\n      ///////////////////\n      /droid.+; (glass) \\d/i\n      // Google Glass\n    ],\n    [MODEL, [VENDOR, GOOGLE], [TYPE, XR]],\n    [\n      /(pico) (4|neo3(?: link|pro)?)/i\n      // Pico\n    ],\n    [VENDOR, MODEL, [TYPE, XR]],\n    [\n      /(quest( \\d| pro)?s?).+vr/i\n      // Meta Quest\n    ],\n    [MODEL, [VENDOR, FACEBOOK], [TYPE, XR]],\n    [\n      ///////////////////\n      // EMBEDDED\n      ///////////////////\n      /(tesla)(?: qtcarbrowser|\\/[-\\w\\.]+)/i\n      // Tesla\n    ],\n    [VENDOR, [TYPE, EMBEDDED]],\n    [\n      /(aeobc)\\b/i\n      // Echo Dot\n    ],\n    [MODEL, [VENDOR, AMAZON], [TYPE, EMBEDDED]],\n    [\n      /(homepod).+mac os/i\n      // Apple HomePod\n    ],\n    [MODEL, [VENDOR, APPLE], [TYPE, EMBEDDED]],\n    [\n      /windows iot/i\n    ],\n    [[TYPE, EMBEDDED]],\n    [\n      ////////////////////\n      // MIXED (GENERIC)\n      ///////////////////\n      /droid .+?; ([^;]+?)(?: bui|; wv\\)|\\) applew).+?(mobile|vr|\\d) safari/i\n    ],\n    [MODEL, [TYPE, strMapper, { \"mobile\": \"Mobile\", \"xr\": \"VR\", \"*\": TABLET }]],\n    [\n      /\\b((tablet|tab)[;\\/]|focus\\/\\d(?!.+mobile))/i\n      // Unidentifiable Tablet\n    ],\n    [[TYPE, TABLET]],\n    [\n      /(phone|mobile(?:[;\\/]| [ \\w\\/\\.]*safari)|pda(?=.+windows ce))/i\n      // Unidentifiable Mobile\n    ],\n    [[TYPE, MOBILE]],\n    [\n      /droid .+?; ([\\w\\. -]+)( bui|\\))/i\n      // Generic Android Device\n    ],\n    [MODEL, [VENDOR, \"Generic\"]]\n  ],\n  engine: [\n    [\n      /windows.+ edge\\/([\\w\\.]+)/i\n      // EdgeHTML\n    ],\n    [VERSION, [NAME, EDGE + \"HTML\"]],\n    [\n      /(arkweb)\\/([\\w\\.]+)/i\n      // ArkWeb\n    ],\n    [NAME, VERSION],\n    [\n      /webkit\\/537\\.36.+chrome\\/(?!27)([\\w\\.]+)/i\n      // Blink\n    ],\n    [VERSION, [NAME, \"Blink\"]],\n    [\n      /(presto)\\/([\\w\\.]+)/i,\n      // Presto\n      /(webkit|trident|netfront|netsurf|amaya|lynx|w3m|goanna|servo)\\/([\\w\\.]+)/i,\n      // WebKit/Trident/NetFront/NetSurf/Amaya/Lynx/w3m/Goanna/Servo\n      /ekioh(flow)\\/([\\w\\.]+)/i,\n      // Flow\n      /(khtml|tasman|links)[\\/ ]\\(?([\\w\\.]+)/i,\n      // KHTML/Tasman/Links\n      /(icab)[\\/ ]([23]\\.[\\d\\.]+)/i,\n      // iCab\n      /\\b(libweb)/i\n      // LibWeb\n    ],\n    [NAME, VERSION],\n    [\n      /ladybird\\//i\n    ],\n    [[NAME, \"LibWeb\"]],\n    [\n      /rv\\:([\\w\\.]{1,9})\\b.+(gecko)/i\n      // Gecko\n    ],\n    [VERSION, NAME]\n  ],\n  os: [\n    [\n      // Windows\n      /microsoft (windows) (vista|xp)/i\n      // Windows (iTunes)\n    ],\n    [NAME, VERSION],\n    [\n      /(windows (?:phone(?: os)?|mobile|iot))[\\/ ]?([\\d\\.\\w ]*)/i\n      // Windows Phone\n    ],\n    [NAME, [VERSION, strMapper, windowsVersionMap]],\n    [\n      /windows nt 6\\.2; (arm)/i,\n      // Windows RT\n      /windows[\\/ ]([ntce\\d\\. ]+\\w)(?!.+xbox)/i,\n      /(?:win(?=3|9|n)|win 9x )([nt\\d\\.]+)/i\n    ],\n    [[VERSION, strMapper, windowsVersionMap], [NAME, WINDOWS]],\n    [\n      // iOS/macOS\n      /[adehimnop]{4,7}\\b(?:.*os ([\\w]+) like mac|; opera)/i,\n      // iOS\n      /(?:ios;fbsv\\/|iphone.+ios[\\/ ])([\\d\\.]+)/i,\n      /cfnetwork\\/.+darwin/i\n    ],\n    [[VERSION, /_/g, \".\"], [NAME, \"iOS\"]],\n    [\n      /(mac os x) ?([\\w\\. ]*)/i,\n      /(macintosh|mac_powerpc\\b)(?!.+haiku)/i\n      // Mac OS\n    ],\n    [[NAME, \"macOS\"], [VERSION, /_/g, \".\"]],\n    [\n      // Google Chromecast\n      /android ([\\d\\.]+).*crkey/i\n      // Google Chromecast, Android-based\n    ],\n    [VERSION, [NAME, CHROMECAST + \" Android\"]],\n    [\n      /fuchsia.*crkey\\/([\\d\\.]+)/i\n      // Google Chromecast, Fuchsia-based\n    ],\n    [VERSION, [NAME, CHROMECAST + \" Fuchsia\"]],\n    [\n      /crkey\\/([\\d\\.]+).*devicetype\\/smartspeaker/i\n      // Google Chromecast, Linux-based Smart Speaker\n    ],\n    [VERSION, [NAME, CHROMECAST + \" SmartSpeaker\"]],\n    [\n      /linux.*crkey\\/([\\d\\.]+)/i\n      // Google Chromecast, Legacy Linux-based\n    ],\n    [VERSION, [NAME, CHROMECAST + \" Linux\"]],\n    [\n      /crkey\\/([\\d\\.]+)/i\n      // Google Chromecast, unknown\n    ],\n    [VERSION, [NAME, CHROMECAST]],\n    [\n      // Mobile OSes\n      /droid ([\\w\\.]+)\\b.+(android[- ]x86|harmonyos)/i\n      // Android-x86/HarmonyOS\n    ],\n    [VERSION, NAME],\n    [\n      /(ubuntu) ([\\w\\.]+) like android/i\n      // Ubuntu Touch\n    ],\n    [[NAME, /(.+)/, \"$1 Touch\"], VERSION],\n    [\n      // Android/Blackberry/WebOS/QNX/Bada/RIM/KaiOS/Maemo/MeeGo/S40/Sailfish OS/OpenHarmony/Tizen\n      /(android|bada|blackberry|kaios|maemo|meego|openharmony|qnx|rim tablet os|sailfish|series40|symbian|tizen|webos)\\w*[-\\/\\.; ]?([\\d\\.]*)/i\n    ],\n    [NAME, VERSION],\n    [\n      /\\(bb(10);/i\n      // BlackBerry 10\n    ],\n    [VERSION, [NAME, BLACKBERRY]],\n    [\n      /(?:symbian ?os|symbos|s60(?=;)|series ?60)[-\\/ ]?([\\w\\.]*)/i\n      // Symbian\n    ],\n    [VERSION, [NAME, \"Symbian\"]],\n    [\n      /mozilla\\/[\\d\\.]+ \\((?:mobile|tablet|tv|mobile; [\\w ]+); rv:.+ gecko\\/([\\w\\.]+)/i\n      // Firefox OS\n    ],\n    [VERSION, [NAME, FIREFOX + \" OS\"]],\n    [\n      /web0s;.+rt(tv)/i,\n      /\\b(?:hp)?wos(?:browser)?\\/([\\w\\.]+)/i\n      // WebOS\n    ],\n    [VERSION, [NAME, \"webOS\"]],\n    [\n      /watch(?: ?os[,\\/]|\\d,\\d\\/)([\\d\\.]+)/i\n      // watchOS\n    ],\n    [VERSION, [NAME, \"watchOS\"]],\n    [\n      // Google ChromeOS\n      /(cros) [\\w]+(?:\\)| ([\\w\\.]+)\\b)/i\n      // Chromium OS\n    ],\n    [[NAME, \"Chrome OS\"], VERSION],\n    [\n      // Smart TVs\n      /panasonic;(viera)/i,\n      // Panasonic Viera\n      /(netrange)mmh/i,\n      // Netrange\n      /(nettv)\\/(\\d+\\.[\\w\\.]+)/i,\n      // NetTV\n      // Console\n      /(nintendo|playstation) (\\w+)/i,\n      // Nintendo/Playstation\n      /(xbox); +xbox ([^\\);]+)/i,\n      // Microsoft Xbox (360, One, X, S, Series X, Series S)\n      /(pico) .+os([\\w\\.]+)/i,\n      // Pico\n      // Other\n      /\\b(joli|palm)\\b ?(?:os)?\\/?([\\w\\.]*)/i,\n      // Joli/Palm\n      /(mint)[\\/\\(\\) ]?(\\w*)/i,\n      // Mint\n      /(mageia|vectorlinux)[; ]/i,\n      // Mageia/VectorLinux\n      /([kxln]?ubuntu|debian|suse|opensuse|gentoo|arch(?= linux)|slackware|fedora|mandriva|centos|pclinuxos|red ?hat|zenwalk|linpus|raspbian|plan 9|minix|risc os|contiki|deepin|manjaro|elementary os|sabayon|linspire)(?: gnu\\/linux)?(?: enterprise)?(?:[- ]linux)?(?:-gnu)?[-\\/ ]?(?!chrom|package)([-\\w\\.]*)/i,\n      // Ubuntu/Debian/SUSE/Gentoo/Arch/Slackware/Fedora/Mandriva/CentOS/PCLinuxOS/RedHat/Zenwalk/Linpus/Raspbian/Plan9/Minix/RISCOS/Contiki/Deepin/Manjaro/elementary/Sabayon/Linspire\n      /(hurd|linux)(?: arm\\w*| x86\\w*| ?)([\\w\\.]*)/i,\n      // Hurd/Linux\n      /(gnu) ?([\\w\\.]*)/i,\n      // GNU\n      /\\b([-frentopcghs]{0,5}bsd|dragonfly)[\\/ ]?(?!amd|[ix346]{1,2}86)([\\w\\.]*)/i,\n      // FreeBSD/NetBSD/OpenBSD/PC-BSD/GhostBSD/DragonFly\n      /(haiku) (\\w+)/i\n      // Haiku\n    ],\n    [NAME, VERSION],\n    [\n      /(sunos) ?([\\w\\.\\d]*)/i\n      // Solaris\n    ],\n    [[NAME, \"Solaris\"], VERSION],\n    [\n      /((?:open)?solaris)[-\\/ ]?([\\w\\.]*)/i,\n      // Solaris\n      /(aix) ((\\d)(?=\\.|\\)| )[\\w\\.])*/i,\n      // AIX\n      /\\b(beos|os\\/2|amigaos|morphos|openvms|fuchsia|hp-ux|serenityos)/i,\n      // BeOS/OS2/AmigaOS/MorphOS/OpenVMS/Fuchsia/HP-UX/SerenityOS\n      /(unix) ?([\\w\\.]*)/i\n      // UNIX\n    ],\n    [NAME, VERSION]\n  ]\n};\nvar defaultProps = function() {\n  var props = { init: {}, isIgnore: {}, isIgnoreRgx: {}, toString: {} };\n  setProps.call(props.init, [\n    [UA_BROWSER, [NAME, VERSION, MAJOR, TYPE]],\n    [UA_CPU, [ARCHITECTURE]],\n    [UA_DEVICE, [TYPE, MODEL, VENDOR]],\n    [UA_ENGINE, [NAME, VERSION]],\n    [UA_OS, [NAME, VERSION]]\n  ]);\n  setProps.call(props.isIgnore, [\n    [UA_BROWSER, [VERSION, MAJOR]],\n    [UA_ENGINE, [VERSION]],\n    [UA_OS, [VERSION]]\n  ]);\n  setProps.call(props.isIgnoreRgx, [\n    [UA_BROWSER, / ?browser$/i],\n    [UA_OS, / ?os$/i]\n  ]);\n  setProps.call(props.toString, [\n    [UA_BROWSER, [NAME, VERSION]],\n    [UA_CPU, [ARCHITECTURE]],\n    [UA_DEVICE, [VENDOR, MODEL]],\n    [UA_ENGINE, [NAME, VERSION]],\n    [UA_OS, [NAME, VERSION]]\n  ]);\n  return props;\n}();\nvar createIData = function(item, itemType) {\n  var init_props = defaultProps.init[itemType], is_ignoreProps = defaultProps.isIgnore[itemType] || 0, is_ignoreRgx = defaultProps.isIgnoreRgx[itemType] || 0, toString_props = defaultProps.toString[itemType] || 0;\n  function IData() {\n    setProps.call(this, init_props);\n  }\n  IData.prototype.getItem = function() {\n    return item;\n  };\n  IData.prototype.withClientHints = function() {\n    if (!NAVIGATOR_UADATA) {\n      return item.parseCH().get();\n    }\n    return NAVIGATOR_UADATA.getHighEntropyValues(CH_ALL_VALUES).then(function(res) {\n      return item.setCH(new UACHData(res, false)).parseCH().get();\n    });\n  };\n  IData.prototype.withFeatureCheck = function() {\n    return item.detectFeature().get();\n  };\n  if (itemType != UA_RESULT) {\n    IData.prototype.is = function(strToCheck) {\n      var is = false;\n      for (var i in this) {\n        if (this.hasOwnProperty(i) && !has(is_ignoreProps, i) && lowerize(is_ignoreRgx ? strip(is_ignoreRgx, this[i]) : this[i]) == lowerize(is_ignoreRgx ? strip(is_ignoreRgx, strToCheck) : strToCheck)) {\n          is = true;\n          if (strToCheck != UNDEF_TYPE) break;\n        } else if (strToCheck == UNDEF_TYPE && is) {\n          is = !is;\n          break;\n        }\n      }\n      return is;\n    };\n    IData.prototype.toString = function() {\n      var str = EMPTY;\n      for (var i in toString_props) {\n        if (typeof this[toString_props[i]] !== UNDEF_TYPE) {\n          str += (str ? \" \" : EMPTY) + this[toString_props[i]];\n        }\n      }\n      return str || UNDEF_TYPE;\n    };\n  }\n  if (!NAVIGATOR_UADATA) {\n    IData.prototype.then = function(cb) {\n      var that = this;\n      var IDataResolve = function() {\n        for (var prop in that) {\n          if (that.hasOwnProperty(prop)) {\n            this[prop] = that[prop];\n          }\n        }\n      };\n      IDataResolve.prototype = {\n        is: IData.prototype.is,\n        toString: IData.prototype.toString\n      };\n      var resolveData = new IDataResolve();\n      cb(resolveData);\n      return resolveData;\n    };\n  }\n  return new IData();\n};\nfunction UACHData(uach, isHttpUACH) {\n  uach = uach || {};\n  setProps.call(this, CH_ALL_VALUES);\n  if (isHttpUACH) {\n    setProps.call(this, [\n      [BRANDS, itemListToArray(uach[CH_HEADER])],\n      [FULLVERLIST, itemListToArray(uach[CH_HEADER_FULL_VER_LIST])],\n      [MOBILE, /\\?1/.test(uach[CH_HEADER_MOBILE])],\n      [MODEL, stripQuotes(uach[CH_HEADER_MODEL])],\n      [PLATFORM, stripQuotes(uach[CH_HEADER_PLATFORM])],\n      [PLATFORMVER, stripQuotes(uach[CH_HEADER_PLATFORM_VER])],\n      [ARCHITECTURE, stripQuotes(uach[CH_HEADER_ARCH])],\n      [FORMFACTORS, itemListToArray(uach[CH_HEADER_FORM_FACTORS])],\n      [BITNESS, stripQuotes(uach[CH_HEADER_BITNESS])]\n    ]);\n  } else {\n    for (var prop in uach) {\n      if (this.hasOwnProperty(prop) && typeof uach[prop] !== UNDEF_TYPE) this[prop] = uach[prop];\n    }\n  }\n}\nfunction UAItem(itemType, ua, rgxMap, uaCH) {\n  this.get = function(prop) {\n    if (!prop) return this.data;\n    return this.data.hasOwnProperty(prop) ? this.data[prop] : void 0;\n  };\n  this.set = function(prop, val) {\n    this.data[prop] = val;\n    return this;\n  };\n  this.setCH = function(ch) {\n    this.uaCH = ch;\n    return this;\n  };\n  this.detectFeature = function() {\n    if (NAVIGATOR && NAVIGATOR.userAgent == this.ua) {\n      switch (this.itemType) {\n        case UA_BROWSER:\n          if (NAVIGATOR.brave && typeof NAVIGATOR.brave.isBrave == FUNC_TYPE) {\n            this.set(NAME, \"Brave\");\n          }\n          break;\n        case UA_DEVICE:\n          if (!this.get(TYPE) && NAVIGATOR_UADATA && NAVIGATOR_UADATA[MOBILE]) {\n            this.set(TYPE, MOBILE);\n          }\n          if (this.get(MODEL) == \"Macintosh\" && NAVIGATOR && typeof NAVIGATOR.standalone !== UNDEF_TYPE && NAVIGATOR.maxTouchPoints && NAVIGATOR.maxTouchPoints > 2) {\n            this.set(MODEL, \"iPad\").set(TYPE, TABLET);\n          }\n          break;\n        case UA_OS:\n          if (!this.get(NAME) && NAVIGATOR_UADATA && NAVIGATOR_UADATA[PLATFORM]) {\n            this.set(NAME, NAVIGATOR_UADATA[PLATFORM]);\n          }\n          break;\n        case UA_RESULT:\n          var data = this.data;\n          var detect = function(itemType2) {\n            return data[itemType2].getItem().detectFeature().get();\n          };\n          this.set(UA_BROWSER, detect(UA_BROWSER)).set(UA_CPU, detect(UA_CPU)).set(UA_DEVICE, detect(UA_DEVICE)).set(UA_ENGINE, detect(UA_ENGINE)).set(UA_OS, detect(UA_OS));\n      }\n    }\n    return this;\n  };\n  this.parseUA = function() {\n    if (this.itemType != UA_RESULT) {\n      rgxMapper.call(this.data, this.ua, this.rgxMap);\n    }\n    if (this.itemType == UA_BROWSER) {\n      this.set(MAJOR, majorize(this.get(VERSION)));\n    }\n    return this;\n  };\n  this.parseCH = function() {\n    var uaCH2 = this.uaCH, rgxMap2 = this.rgxMap;\n    switch (this.itemType) {\n      case UA_BROWSER:\n      case UA_ENGINE:\n        var brands = uaCH2[FULLVERLIST] || uaCH2[BRANDS], prevName;\n        if (brands) {\n          for (var i in brands) {\n            var brandName = brands[i].brand || brands[i], brandVersion = brands[i].version;\n            if (this.itemType == UA_BROWSER && !/not.a.brand/i.test(brandName) && (!prevName || /chrom/i.test(prevName) && brandName != CHROMIUM)) {\n              brandName = strMapper(brandName, {\n                \"Chrome\": \"Google Chrome\",\n                \"Edge\": \"Microsoft Edge\",\n                \"Chrome WebView\": \"Android WebView\",\n                \"Chrome Headless\": \"HeadlessChrome\",\n                \"Huawei Browser\": \"HuaweiBrowser\",\n                \"MIUI Browser\": \"Miui Browser\",\n                \"Opera Mobi\": \"OperaMobile\",\n                \"Yandex\": \"YaBrowser\"\n              });\n              this.set(NAME, brandName).set(VERSION, brandVersion).set(MAJOR, majorize(brandVersion));\n              prevName = brandName;\n            }\n            if (this.itemType == UA_ENGINE && brandName == CHROMIUM) {\n              this.set(VERSION, brandVersion);\n            }\n          }\n        }\n        break;\n      case UA_CPU:\n        var archName = uaCH2[ARCHITECTURE];\n        if (archName) {\n          if (archName && uaCH2[BITNESS] == \"64\") archName += \"64\";\n          rgxMapper.call(this.data, archName + \";\", rgxMap2);\n        }\n        break;\n      case UA_DEVICE:\n        if (uaCH2[MOBILE]) {\n          this.set(TYPE, MOBILE);\n        }\n        if (uaCH2[MODEL]) {\n          this.set(MODEL, uaCH2[MODEL]);\n          if (!this.get(TYPE) || !this.get(VENDOR)) {\n            var reParse = {};\n            rgxMapper.call(reParse, \"droid 9; \" + uaCH2[MODEL] + \")\", rgxMap2);\n            if (!this.get(TYPE) && !!reParse.type) {\n              this.set(TYPE, reParse.type);\n            }\n            if (!this.get(VENDOR) && !!reParse.vendor) {\n              this.set(VENDOR, reParse.vendor);\n            }\n          }\n        }\n        if (uaCH2[FORMFACTORS]) {\n          var ff;\n          if (typeof uaCH2[FORMFACTORS] !== \"string\") {\n            var idx = 0;\n            while (!ff && idx < uaCH2[FORMFACTORS].length) {\n              ff = strMapper(uaCH2[FORMFACTORS][idx++], formFactorsMap);\n            }\n          } else {\n            ff = strMapper(uaCH2[FORMFACTORS], formFactorsMap);\n          }\n          this.set(TYPE, ff);\n        }\n        break;\n      case UA_OS:\n        var osName = uaCH2[PLATFORM];\n        if (osName) {\n          var osVersion = uaCH2[PLATFORMVER];\n          if (osName == WINDOWS) osVersion = parseInt(majorize(osVersion), 10) >= 13 ? \"11\" : \"10\";\n          this.set(NAME, osName).set(VERSION, osVersion);\n        }\n        if (this.get(NAME) == WINDOWS && uaCH2[MODEL] == \"Xbox\") {\n          this.set(NAME, \"Xbox\").set(VERSION, void 0);\n        }\n        break;\n      case UA_RESULT:\n        var data = this.data;\n        var parse = function(itemType2) {\n          return data[itemType2].getItem().setCH(uaCH2).parseCH().get();\n        };\n        this.set(UA_BROWSER, parse(UA_BROWSER)).set(UA_CPU, parse(UA_CPU)).set(UA_DEVICE, parse(UA_DEVICE)).set(UA_ENGINE, parse(UA_ENGINE)).set(UA_OS, parse(UA_OS));\n    }\n    return this;\n  };\n  setProps.call(this, [\n    [\"itemType\", itemType],\n    [\"ua\", ua],\n    [\"uaCH\", uaCH],\n    [\"rgxMap\", rgxMap],\n    [\"data\", createIData(this, itemType)]\n  ]);\n  return this;\n}\nfunction UAParser(ua, extensions, headers) {\n  if (typeof ua === OBJ_TYPE) {\n    if (isExtensions(ua, true)) {\n      if (typeof extensions === OBJ_TYPE) {\n        headers = extensions;\n      }\n      extensions = ua;\n    } else {\n      headers = ua;\n      extensions = void 0;\n    }\n    ua = void 0;\n  } else if (typeof ua === STR_TYPE && !isExtensions(extensions, true)) {\n    headers = extensions;\n    extensions = void 0;\n  }\n  if (headers && typeof headers.append === FUNC_TYPE) {\n    var kv = {};\n    headers.forEach(function(v, k) {\n      kv[k] = v;\n    });\n    headers = kv;\n  }\n  if (!(this instanceof UAParser)) {\n    return new UAParser(ua, extensions, headers).getResult();\n  }\n  var userAgent = typeof ua === STR_TYPE ? ua : (\n    // Passed user-agent string\n    headers && headers[USER_AGENT] ? headers[USER_AGENT] : (\n      // User-Agent from passed headers\n      NAVIGATOR && NAVIGATOR.userAgent ? NAVIGATOR.userAgent : (\n        // navigator.userAgent\n        EMPTY\n      )\n    )\n  ), httpUACH = new UACHData(headers, true), regexMap = extensions ? extend(defaultRegexes, extensions) : defaultRegexes, createItemFunc = function(itemType) {\n    if (itemType == UA_RESULT) {\n      return function() {\n        return new UAItem(itemType, userAgent, regexMap, httpUACH).set(\"ua\", userAgent).set(UA_BROWSER, this.getBrowser()).set(UA_CPU, this.getCPU()).set(UA_DEVICE, this.getDevice()).set(UA_ENGINE, this.getEngine()).set(UA_OS, this.getOS()).get();\n      };\n    } else {\n      return function() {\n        return new UAItem(itemType, userAgent, regexMap[itemType], httpUACH).parseUA().get();\n      };\n    }\n  };\n  setProps.call(this, [\n    [\"getBrowser\", createItemFunc(UA_BROWSER)],\n    [\"getCPU\", createItemFunc(UA_CPU)],\n    [\"getDevice\", createItemFunc(UA_DEVICE)],\n    [\"getEngine\", createItemFunc(UA_ENGINE)],\n    [\"getOS\", createItemFunc(UA_OS)],\n    [\"getResult\", createItemFunc(UA_RESULT)],\n    [\"getUA\", function() {\n      return userAgent;\n    }],\n    [\"setUA\", function(ua2) {\n      if (isString(ua2))\n        userAgent = ua2.length > UA_MAX_LENGTH ? trim(ua2, UA_MAX_LENGTH) : ua2;\n      return this;\n    }]\n  ]).setUA(userAgent);\n  return this;\n}\nUAParser.VERSION = LIBVERSION;\nUAParser.BROWSER = enumerize([NAME, VERSION, MAJOR, TYPE]);\nUAParser.CPU = enumerize([ARCHITECTURE]);\nUAParser.DEVICE = enumerize([MODEL, VENDOR, TYPE, CONSOLE, MOBILE, SMARTTV, TABLET, WEARABLE, EMBEDDED]);\nUAParser.ENGINE = UAParser.OS = enumerize([NAME, VERSION]);\nconst debugLogger$5 = debug$5(\"peertube:player:peertube\");\nconst Plugin$5 = videojs.getPlugin(\"plugin\");\nclass PeerTubePlugin extends Plugin$5 {\n  constructor(player, options) {\n    super(player);\n    this.options = options;\n    this.setUserAgentInfo();\n    this.menuOpened = false;\n    this.mouseInControlBar = false;\n    this.mouseInSettings = false;\n    this.hasInitialSeek = false;\n    this.videoViewUrl = options.videoViewUrl;\n    this.authorizationHeader = options.authorizationHeader;\n    this.hasAutoplay = options.hasAutoplay;\n    this.initialInactivityTimeout = this.player.options_.inactivityTimeout;\n    this.currentSubtitle = this.options.subtitle() || getStoredLastSubtitle();\n    this.initializePlayer();\n    this.initOnVideoChange();\n    this.player.removeClass(\"vjs-can-play\");\n    this.deleteLegacyIndexedDB();\n    this.player.on(\"autoplay-failure\", () => {\n      debugLogger$5(\"Autoplay failed\");\n      this.player.removeClass(\"vjs-has-autoplay\");\n      this.player.poster(options.poster());\n      if (isIOS() || isSafari()) this.player.hasStarted(false);\n    });\n    this.player.on(\"ratechange\", () => {\n      this.currentPlaybackRate = this.player.playbackRate();\n      this.player.defaultPlaybackRate(this.currentPlaybackRate);\n    });\n    this.player.one(\"canplay\", () => {\n      const playerOptions = this.player.options_;\n      const volume = getStoredVolume();\n      if (volume !== void 0) this.player.volume(volume);\n      const muted = playerOptions.muted !== void 0 ? playerOptions.muted : getStoredMute();\n      if (muted !== void 0) this.player.muted(muted);\n      this.player.addClass(\"vjs-can-play\");\n    });\n    this.player.ready(() => {\n      this.player.on(\"volumechange\", () => {\n        saveVolumeInStore(this.player.volume());\n        saveMuteInStore(this.player.muted());\n      });\n      this.player.textTracks().addEventListener(\"change\", () => {\n        const showing = this.player.textTracks().tracks_.find((t) => {\n          return t.kind === \"captions\" && t.mode === \"showing\";\n        });\n        if (!showing) {\n          saveLastSubtitle(\"off\");\n          this.currentSubtitle = void 0;\n          return;\n        }\n        if (this.currentSubtitle === showing.language) return;\n        this.currentSubtitle = showing.language;\n        saveLastSubtitle(showing.language);\n        savePreferredSubtitle(showing.language);\n      });\n      this.player.on(\"video-change\", () => {\n        this.initOnVideoChange();\n        this.hideFatalError();\n      });\n      this.updatePlayerSizeClasses();\n      if (typeof ResizeObserver !== \"undefined\") {\n        this.resizeObserver = new ResizeObserver(() => {\n          this.updatePlayerSizeClasses();\n        });\n        this.resizeObserver.observe(this.player.el());\n      }\n    });\n    this.player.on(\"resolution-change\", (_, { resolution }) => {\n      if (this.player.paused()) {\n        this.player.on(\"play\", () => this.adaptPosterForAudioOnly(resolution));\n        return;\n      }\n      this.adaptPosterForAudioOnly(resolution);\n    });\n    this.initOnRatioChange();\n  }\n  dispose() {\n    if (this.videoViewInterval) clearInterval(this.videoViewInterval);\n    if (this.resizeObserver) this.resizeObserver.disconnect();\n    super.dispose();\n  }\n  onMenuOpened() {\n    this.menuOpened = true;\n    this.alterInactivity();\n  }\n  onMenuClosed() {\n    this.menuOpened = false;\n    this.alterInactivity();\n  }\n  displayFatalError() {\n    if (this.errorModal) return;\n    debugLogger$5(\"Display fatal error\");\n    this.player.loadingSpinner.hide();\n    const buildModal = (error) => {\n      const localize = this.player.localize.bind(this.player);\n      const wrapper = document.createElement(\"div\");\n      const header = document.createElement(\"h1\");\n      header.innerText = localize(\"Failed to play video\");\n      wrapper.appendChild(header);\n      const desc = document.createElement(\"div\");\n      desc.innerText = localize(\"The video failed to play due to technical issues.\");\n      wrapper.appendChild(desc);\n      const details = document.createElement(\"p\");\n      details.classList.add(\"error-details\");\n      details.innerText = error.message;\n      wrapper.appendChild(details);\n      return wrapper;\n    };\n    this.errorModal = this.player.createModal(buildModal(this.player.error()), {\n      temporary: true,\n      uncloseable: true\n    });\n    this.errorModal.addClass(\"vjs-custom-error-display\");\n    this.player.addClass(\"vjs-error-display-enabled\");\n    if (/googlebot/i.test(navigator.userAgent)) {\n      console.error(this.player.error());\n    } else {\n      logger$1.error(\"Fatal error in player\", this.player.error());\n    }\n  }\n  hideFatalError() {\n    if (!this.errorModal) return;\n    debugLogger$5(\"Hiding fatal error\");\n    this.player.removeClass(\"vjs-error-display-enabled\");\n    this.player.removeChild(this.errorModal);\n    this.errorModal.close();\n    this.errorModal = void 0;\n    if (this.player.loadingSpinner) {\n      this.player.loadingSpinner.show();\n    }\n  }\n  setUserAgentInfo() {\n    const userAgent = UAParser(window.navigator.userAgent);\n    const defaultDevice = isMobile() ? \"mobile\" : \"desktop\";\n    this.userAgentInfo = {\n      client: userAgent.browser.name,\n      os: userAgent.os.name,\n      device: userAgent.device.type || defaultDevice\n    };\n  }\n  initializePlayer() {\n    if (isMobile()) this.player.addClass(\"vjs-is-mobile\");\n    this.initSmoothProgressBar();\n    this.patchMenuEscapeKey();\n    this.player.ready(() => {\n      this.listenControlBarMouse();\n    });\n    this.listenFullScreenChange();\n  }\n  initOnVideoChange() {\n    if (this.hasAutoplay() !== false) this.player.addClass(\"vjs-has-autoplay\");\n    else this.player.removeClass(\"vjs-has-autoplay\");\n    if (this.currentPlaybackRate && this.currentPlaybackRate !== 1) {\n      debugLogger$5(\"Setting playback rate to \" + this.currentPlaybackRate);\n      this.player.playbackRate(this.currentPlaybackRate);\n    }\n    this.player.ready(() => {\n      this.initCaptions();\n      this.updateControlBar();\n    });\n    this.handleStartStopTime();\n    this.runUserViewing();\n  }\n  initOnRatioChange() {\n    if (!this.options.autoPlayerRatio) return;\n    const defaultRatio = getComputedStyle(this.player.el()).getPropertyValue(this.options.autoPlayerRatio.cssRatioVariable);\n    const tryToUpdateRatioFromOptions = () => {\n      if (!this.options.videoRatio()) return;\n      this.adaptPlayerFromRatio({ ratio: this.options.videoRatio(), defaultRatio });\n      this.updatePlayerSizeClasses();\n    };\n    tryToUpdateRatioFromOptions();\n    this.player.on(\"video-change\", () => tryToUpdateRatioFromOptions());\n    this.player.on(\"video-ratio-changed\", (_event, data) => {\n      if (this.options.videoRatio()) return;\n      this.adaptPlayerFromRatio({ ratio: data.ratio, defaultRatio });\n      this.updatePlayerSizeClasses();\n    });\n  }\n  adaptPlayerFromRatio(options) {\n    const { ratio, defaultRatio } = options;\n    const el = this.player.el();\n    const portraitMode = getComputedStyle(el).getPropertyValue(this.options.autoPlayerRatio.cssPlayerPortraitModeVariable) === \"1\";\n    const currentRatio = isNaN(ratio) || !portraitMode && ratio < 1 ? defaultRatio : ratio;\n    el.style.setProperty(this.options.autoPlayerRatio.cssRatioVariable, currentRatio + \"\");\n  }\n  // ---------------------------------------------------------------------------\n  runUserViewing() {\n    const startTime = timeToInt(this.options.startTime());\n    let lastCurrentTime = startTime;\n    let lastViewEvent;\n    let ended = false;\n    this.disableUserViewing();\n    this.videoViewOnPlayHandler = () => {\n      debugLogger$5(\"Notify user is watching on play: \" + startTime);\n      this.notifyUserIsWatching(startTime, lastViewEvent);\n    };\n    this.videoViewOnSeekedHandler = () => {\n      if (this.hasInitialSeek) {\n        this.hasInitialSeek = false;\n        return;\n      }\n      const currentTime = Math.floor(this.player.currentTime());\n      if (currentTime === 0 && this.player.loop()) {\n        debugLogger$5(\"Disabling viewing notification after first video loop.\");\n        this.disableUserViewing();\n        return;\n      }\n      const diff = currentTime - lastCurrentTime;\n      if (diff > 0 && diff < 3) return;\n      debugLogger$5(\"Detected seek event for user watching\");\n      lastViewEvent = \"seek\";\n    };\n    this.videoViewOnEndedHandler = () => {\n      ended = true;\n      if (this.options.isLive()) return;\n      const currentTime = Math.floor(this.player.duration());\n      lastCurrentTime = currentTime;\n      debugLogger$5(\"Notify user is watching on end: \" + currentTime);\n      this.notifyUserIsWatching(currentTime, lastViewEvent);\n      lastViewEvent = void 0;\n    };\n    this.player.one(\"play\", this.videoViewOnPlayHandler);\n    this.player.on(\"seeked\", this.videoViewOnSeekedHandler);\n    this.player.one(\"ended\", this.videoViewOnEndedHandler);\n    this.videoViewInterval = setInterval(() => {\n      if (ended) return;\n      const currentTime = Math.floor(this.player.currentTime());\n      if (currentTime === lastCurrentTime) return;\n      debugLogger$5(\"Notify user is watching: \" + currentTime);\n      lastCurrentTime = currentTime;\n      this.notifyUserIsWatching(currentTime, lastViewEvent).catch((err) => logger$1.error(\"Cannot notify user is watching.\", err));\n      lastViewEvent = void 0;\n    }, this.options.videoViewIntervalMs);\n  }\n  disableUserViewing() {\n    if (this.videoViewInterval) {\n      clearInterval(this.videoViewInterval);\n      this.videoViewInterval = void 0;\n    }\n    if (this.videoViewOnPlayHandler) {\n      this.player.off(\"play\", this.videoViewOnPlayHandler);\n      this.videoViewOnPlayHandler = void 0;\n    }\n    if (this.videoViewOnSeekedHandler) {\n      this.player.off(\"seeked\", this.videoViewOnSeekedHandler);\n      this.videoViewOnSeekedHandler = void 0;\n    }\n    if (this.videoViewOnEndedHandler) {\n      this.player.off(\"ended\", this.videoViewOnEndedHandler);\n      this.videoViewOnEndedHandler = void 0;\n    }\n  }\n  notifyUserIsWatching(currentTime, viewEvent) {\n    if (!this.authorizationHeader()) {\n      saveVideoWatchHistory(this.options.videoUUID(), currentTime);\n    }\n    if (!this.videoViewUrl()) return Promise.resolve(true);\n    const sessionId = getPlayerSessionId();\n    const body = {\n      currentTime,\n      viewEvent,\n      sessionId,\n      client: this.userAgentInfo.client || void 0,\n      device: this.userAgentInfo.device || void 0,\n      operatingSystem: this.userAgentInfo.os || void 0\n    };\n    const headers = new Headers({ \"Content-type\": \"application/json; charset=UTF-8\" });\n    if (this.authorizationHeader()) headers.set(\"Authorization\", this.authorizationHeader());\n    return fetch(this.videoViewUrl(), { method: \"POST\", body: JSON.stringify(body), headers });\n  }\n  // ---------------------------------------------------------------------------\n  adaptPosterForAudioOnly(resolution) {\n    debugLogger$5(\"Check if we need to adapt player for audio only\", resolution);\n    if (resolution === 0) {\n      this.player.audioPosterMode(true);\n      this.player.poster(this.options.poster());\n      return;\n    }\n    this.player.audioPosterMode(false);\n    this.player.poster(\"\");\n  }\n  // ---------------------------------------------------------------------------\n  updatePlayerSizeClasses() {\n    requestAnimationFrame(() => {\n      if (!this.player) return;\n      debugLogger$5(\"Updating player size classes\");\n      const width = this.player.currentWidth();\n      const breakpoints = [350, 570, 750];\n      for (const breakpoint of breakpoints) {\n        if (width <= breakpoint) {\n          this.player.addClass(\"vjs-size-\" + breakpoint);\n        } else {\n          this.player.removeClass(\"vjs-size-\" + breakpoint);\n        }\n      }\n    });\n  }\n  // ---------------------------------------------------------------------------\n  listenFullScreenChange() {\n    this.player.on(\"fullscreenchange\", () => {\n      if (this.player.isFullscreen()) this.player.focus();\n    });\n  }\n  listenControlBarMouse() {\n    const controlBar = this.player.controlBar;\n    const settingsButton = controlBar.settingsButton;\n    controlBar.on(\"mouseenter\", () => {\n      this.mouseInControlBar = true;\n      this.alterInactivity();\n    });\n    controlBar.on(\"mouseleave\", () => {\n      this.mouseInControlBar = false;\n      this.alterInactivity();\n    });\n    settingsButton.dialog.on(\"mouseenter\", () => {\n      this.mouseInSettings = true;\n      this.alterInactivity();\n    });\n    settingsButton.dialog.on(\"mouseleave\", () => {\n      this.mouseInSettings = false;\n      this.alterInactivity();\n    });\n  }\n  alterInactivity() {\n    if (this.menuOpened || this.mouseInSettings || this.mouseInControlBar) {\n      this.setInactivityTimeout(0);\n      return;\n    }\n    this.setInactivityTimeout(this.initialInactivityTimeout);\n    this.player.reportUserActivity(true);\n  }\n  setInactivityTimeout(timeout) {\n    this.player.cache_.inactivityTimeout = timeout;\n    this.player.options_.inactivityTimeout = timeout;\n  }\n  initCaptions() {\n    if (this.currentSubtitle) debugLogger$5(\"Init captions with current subtitle \" + this.currentSubtitle);\n    else debugLogger$5(\"Init captions without current subtitle\");\n    this.player.tech(true).clearTracks(\"text\");\n    this.player.removeClass(\"vjs-has-captions\");\n    for (const caption of this.options.videoCaptions()) {\n      this.player.addRemoteTextTrack({\n        kind: \"captions\",\n        label: caption.automaticallyGenerated ? this.player.localize(\"{1} (auto-generated)\", [caption.label]) : caption.label,\n        language: caption.language,\n        id: caption.language,\n        src: caption.src,\n        default: this.currentSubtitle === caption.language\n      }, true);\n      this.player.addClass(\"vjs-has-captions\");\n    }\n    this.player.trigger(\"captions-changed\");\n  }\n  updateControlBar() {\n    debugLogger$5(\"Updating control bar\");\n    if (this.options.isLive()) {\n      this.getPlaybackRateButton().hide();\n      this.player.controlBar.getChild(\"progressControl\").hide();\n      this.player.controlBar.getChild(\"currentTimeDisplay\").hide();\n      this.player.controlBar.getChild(\"timeDivider\").hide();\n      this.player.controlBar.getChild(\"durationDisplay\").hide();\n      this.player.controlBar.getChild(\"peerTubeLiveDisplay\").show();\n    } else {\n      this.getPlaybackRateButton().show();\n      this.player.controlBar.getChild(\"progressControl\").show();\n      this.player.controlBar.getChild(\"currentTimeDisplay\").show();\n      this.player.controlBar.getChild(\"timeDivider\").show();\n      this.player.controlBar.getChild(\"durationDisplay\").show();\n      this.player.controlBar.getChild(\"peerTubeLiveDisplay\").hide();\n    }\n    if (this.options.videoCaptions().length === 0) {\n      this.getCaptionsButton().hide();\n    } else {\n      this.getCaptionsButton().show();\n    }\n  }\n  handleStartStopTime() {\n    this.player.duration(this.options.videoDuration());\n    if (this.stopTimeHandler) {\n      this.player.off(\"timeupdate\", this.stopTimeHandler);\n      this.stopTimeHandler = void 0;\n    }\n    this.player.one(\"canplaythrough\", () => {\n      const startTime = this.options.startTime();\n      if (startTime !== null && startTime !== void 0) {\n        debugLogger$5(\"Start the video at \" + startTime);\n        this.hasInitialSeek = true;\n        this.player.currentTime(timeToInt(startTime));\n      }\n      if (this.options.stopTime()) {\n        const stopTime = timeToInt(this.options.stopTime());\n        this.stopTimeHandler = () => {\n          if (this.player.currentTime() <= stopTime) return;\n          debugLogger$5(\"Stopping the video at \" + this.options.stopTime());\n          this.player.pause();\n          this.player.trigger(\"auto-stopped\");\n          this.player.off(\"timeupdate\", this.stopTimeHandler);\n          this.stopTimeHandler = void 0;\n        };\n        this.player.on(\"timeupdate\", this.stopTimeHandler);\n      }\n    });\n  }\n  // Thanks: https://github.com/videojs/video.js/issues/4460#issuecomment-312861657\n  initSmoothProgressBar() {\n    const SeekBar = videojs.getComponent(\"SeekBar\");\n    SeekBar.prototype.getPercent = function getPercent() {\n      const time = this.player_.currentTime();\n      const percent = time / this.player_.duration();\n      return percent >= 1 ? 1 : percent;\n    };\n    SeekBar.prototype.handleMouseMove = function handleMouseMove(event) {\n      let newTime = this.calculateDistance(event) * this.player_.duration();\n      if (newTime === this.player_.duration()) {\n        newTime = newTime - 0.1;\n      }\n      this.player_.currentTime(newTime);\n      this.update();\n    };\n  }\n  patchMenuEscapeKey() {\n    const Menu2 = videojs.getComponent(\"Menu\");\n    const fn = Menu2.prototype.handleKeyDown;\n    Menu2.prototype.handleKeyDown = function handleKeyDown(event) {\n      if (event.key === \"Escape\") {\n        event.preventDefault();\n        event.stopPropagation();\n        this.trigger(\"escaped-key\");\n        return;\n      }\n      if (event.key === \"ArrowRight\") {\n        event.preventDefault();\n        event.stopPropagation();\n        this.trigger(\"arrow-right\", event.target);\n        return;\n      }\n      if (event.key === \"ArrowLeft\") {\n        event.preventDefault();\n        event.stopPropagation();\n        this.trigger(\"arrow-left\");\n        return;\n      }\n      fn.call(this, event);\n    };\n  }\n  getCaptionsButton() {\n    const settingsButton = this.player.controlBar.getDescendant([\"settingsButton\"]);\n    return settingsButton.menu.getChild(\"captionsButton\");\n  }\n  getPlaybackRateButton() {\n    const settingsButton = this.player.controlBar.getDescendant([\"settingsButton\"]);\n    return settingsButton.menu.getChild(\"playbackRateMenuButton\");\n  }\n  // We don't use webtorrent anymore, so we can safely remove old chunks from IndexedDB\n  deleteLegacyIndexedDB() {\n    try {\n      if (typeof window.indexedDB === \"undefined\") return;\n      if (!window.indexedDB) return;\n      if (typeof window.indexedDB.databases !== \"function\") return;\n      window.indexedDB.databases().then((databases) => {\n        for (const db of databases) {\n          window.indexedDB.deleteDatabase(db.name);\n        }\n      });\n    } catch (err) {\n      debugLogger$5(\"Cannot delete legacy indexed DB\", err);\n    }\n  }\n}\nvideojs.registerPlugin(\"peertube\", PeerTubePlugin);\nclass ControlBarOptionsBuilder {\n  constructor(options) {\n    this.options = options;\n  }\n  getChildrenOptions() {\n    const children = {\n      ...this.getPreviousVideo(),\n      playToggle: {},\n      ...this.getNextVideo(),\n      ...this.getTimeControls(),\n      ...this.getProgressControl(),\n      p2PInfoButton: {},\n      muteToggle: {},\n      volumeControl: {},\n      captionToggleButton: {},\n      ...this.getSettingsButton(),\n      ...this.getPeerTubeLinkButton(),\n      ...this.getTheaterButton(),\n      fullscreenToggle: {}\n    };\n    return children;\n  }\n  getSettingsButton() {\n    const settingEntries = [];\n    settingEntries.push(\"playbackRateMenuButton\");\n    settingEntries.push(\"captionsButton\");\n    settingEntries.push(\"resolutionMenuButton\");\n    return {\n      settingsButton: {\n        setup: {\n          maxHeightOffset: 60\n        },\n        entries: settingEntries\n      }\n    };\n  }\n  getTimeControls() {\n    return {\n      peerTubeLiveDisplay: {},\n      currentTimeDisplay: {},\n      timeDivider: {},\n      durationDisplay: {}\n    };\n  }\n  getProgressControl() {\n    return {\n      progressControl: {\n        children: {\n          seekBar: {\n            children: {\n              loadProgressBar: {},\n              mouseTimeDisplay: {},\n              playProgressBar: {}\n            }\n          }\n        }\n      }\n    };\n  }\n  getPreviousVideo() {\n    const buttonOptions = {\n      type: \"previous\",\n      handler: () => this.options.previousVideo().handler(),\n      isDisabled: () => !this.options.previousVideo().enabled,\n      isDisplayed: () => this.options.previousVideo().displayControlBarButton\n    };\n    return { previousVideoButton: buttonOptions };\n  }\n  getNextVideo() {\n    const buttonOptions = {\n      type: \"next\",\n      handler: () => this.options.nextVideo().handler(),\n      isDisabled: () => !this.options.nextVideo().enabled,\n      isDisplayed: () => this.options.nextVideo().displayControlBarButton\n    };\n    return { nextVideoButton: buttonOptions };\n  }\n  getPeerTubeLinkButton() {\n    const options = {\n      isDisplayed: this.options.peertubeLink,\n      shortUUID: this.options.videoShortUUID,\n      instanceName: this.options.instanceName\n    };\n    return { peerTubeLinkButton: options };\n  }\n  getTheaterButton() {\n    const options = {\n      isDisplayed: () => this.options.theaterButton\n    };\n    return {\n      theaterButton: options\n    };\n  }\n}\nfunction isSameOrigin(current, target) {\n  const currentUrl = new URL(current);\n  const targetUrl = new URL(target);\n  if (currentUrl.hostname === \"localhost\" && targetUrl.hostname === \"localhost\") return true;\n  return currentUrl.origin === targetUrl.origin;\n}\nclass RedundancyUrlManager {\n  constructor(baseUrls = []) {\n    __publicField(this, \"map\", /* @__PURE__ */ new Map());\n    this.baseUrls = baseUrls;\n  }\n  onSegmentError(segmentUrl) {\n    if (!this.map.has(segmentUrl)) return;\n    const customSegmentUrl = this.map.get(segmentUrl);\n    this.map.delete(segmentUrl);\n    const baseUrl = getBaseUrl(customSegmentUrl);\n    const oldLength = baseUrl.length;\n    this.baseUrls = this.baseUrls.filter((u) => u !== baseUrl && u !== baseUrl + \"/\");\n    if (oldLength !== this.baseUrls.length) {\n      logger$1.info(`Removed redundancy of segment URL ${customSegmentUrl}.`);\n    }\n  }\n  onSegmentSuccess(segmentUrl) {\n    this.map.delete(segmentUrl);\n  }\n  buildUrl(url) {\n    const max = this.baseUrls.length + 1;\n    const i = this.getRandomInt(max);\n    if (i === max - 1) return url;\n    const newBaseUrl = this.baseUrls[i];\n    const slashPart = newBaseUrl.endsWith(\"/\") ? \"\" : \"/\";\n    const newUrl = newBaseUrl + slashPart + getFilename(url);\n    this.map.set(url, newUrl);\n    return newUrl;\n  }\n  countBaseUrls() {\n    return this.baseUrls.length;\n  }\n  getRandomInt(max) {\n    return Math.floor(Math.random() * Math.floor(max));\n  }\n}\nfunction getFilename(url) {\n  return url.split(\"/\").pop();\n}\nfunction getBaseUrl(url) {\n  const baseUrl = url.split(\"/\");\n  baseUrl.pop();\n  return baseUrl.join(\"/\");\n}\nvar buffer = {};\nvar base64Js = {};\nbase64Js.byteLength = byteLength;\nbase64Js.toByteArray = toByteArray;\nbase64Js.fromByteArray = fromByteArray;\nvar lookup = [];\nvar revLookup = [];\nvar Arr = typeof Uint8Array !== \"undefined\" ? Uint8Array : Array;\nvar code = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\nfor (var i = 0, len = code.length; i < len; ++i) {\n  lookup[i] = code[i];\n  revLookup[code.charCodeAt(i)] = i;\n}\nrevLookup[\"-\".charCodeAt(0)] = 62;\nrevLookup[\"_\".charCodeAt(0)] = 63;\nfunction getLens(b64) {\n  var len = b64.length;\n  if (len % 4 > 0) {\n    throw new Error(\"Invalid string. Length must be a multiple of 4\");\n  }\n  var validLen = b64.indexOf(\"=\");\n  if (validLen === -1) validLen = len;\n  var placeHoldersLen = validLen === len ? 0 : 4 - validLen % 4;\n  return [validLen, placeHoldersLen];\n}\nfunction byteLength(b64) {\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\nfunction _byteLength(b64, validLen, placeHoldersLen) {\n  return (validLen + placeHoldersLen) * 3 / 4 - placeHoldersLen;\n}\nfunction toByteArray(b64) {\n  var tmp;\n  var lens = getLens(b64);\n  var validLen = lens[0];\n  var placeHoldersLen = lens[1];\n  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen));\n  var curByte = 0;\n  var len = placeHoldersLen > 0 ? validLen - 4 : validLen;\n  var i;\n  for (i = 0; i < len; i += 4) {\n    tmp = revLookup[b64.charCodeAt(i)] << 18 | revLookup[b64.charCodeAt(i + 1)] << 12 | revLookup[b64.charCodeAt(i + 2)] << 6 | revLookup[b64.charCodeAt(i + 3)];\n    arr[curByte++] = tmp >> 16 & 255;\n    arr[curByte++] = tmp >> 8 & 255;\n    arr[curByte++] = tmp & 255;\n  }\n  if (placeHoldersLen === 2) {\n    tmp = revLookup[b64.charCodeAt(i)] << 2 | revLookup[b64.charCodeAt(i + 1)] >> 4;\n    arr[curByte++] = tmp & 255;\n  }\n  if (placeHoldersLen === 1) {\n    tmp = revLookup[b64.charCodeAt(i)] << 10 | revLookup[b64.charCodeAt(i + 1)] << 4 | revLookup[b64.charCodeAt(i + 2)] >> 2;\n    arr[curByte++] = tmp >> 8 & 255;\n    arr[curByte++] = tmp & 255;\n  }\n  return arr;\n}\nfunction tripletToBase64(num) {\n  return lookup[num >> 18 & 63] + lookup[num >> 12 & 63] + lookup[num >> 6 & 63] + lookup[num & 63];\n}\nfunction encodeChunk(uint8, start, end) {\n  var tmp;\n  var output = [];\n  for (var i = start; i < end; i += 3) {\n    tmp = (uint8[i] << 16 & 16711680) + (uint8[i + 1] << 8 & 65280) + (uint8[i + 2] & 255);\n    output.push(tripletToBase64(tmp));\n  }\n  return output.join(\"\");\n}\nfunction fromByteArray(uint8) {\n  var tmp;\n  var len = uint8.length;\n  var extraBytes = len % 3;\n  var parts = [];\n  var maxChunkLength = 16383;\n  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {\n    parts.push(encodeChunk(uint8, i, i + maxChunkLength > len2 ? len2 : i + maxChunkLength));\n  }\n  if (extraBytes === 1) {\n    tmp = uint8[len - 1];\n    parts.push(\n      lookup[tmp >> 2] + lookup[tmp << 4 & 63] + \"==\"\n    );\n  } else if (extraBytes === 2) {\n    tmp = (uint8[len - 2] << 8) + uint8[len - 1];\n    parts.push(\n      lookup[tmp >> 10] + lookup[tmp >> 4 & 63] + lookup[tmp << 2 & 63] + \"=\"\n    );\n  }\n  return parts.join(\"\");\n}\nvar ieee754 = {};\n/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */\nieee754.read = function(buffer2, offset, isLE, mLen, nBytes) {\n  var e, m;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var nBits = -7;\n  var i = isLE ? nBytes - 1 : 0;\n  var d = isLE ? -1 : 1;\n  var s = buffer2[offset + i];\n  i += d;\n  e = s & (1 << -nBits) - 1;\n  s >>= -nBits;\n  nBits += eLen;\n  for (; nBits > 0; e = e * 256 + buffer2[offset + i], i += d, nBits -= 8) {\n  }\n  m = e & (1 << -nBits) - 1;\n  e >>= -nBits;\n  nBits += mLen;\n  for (; nBits > 0; m = m * 256 + buffer2[offset + i], i += d, nBits -= 8) {\n  }\n  if (e === 0) {\n    e = 1 - eBias;\n  } else if (e === eMax) {\n    return m ? NaN : (s ? -1 : 1) * Infinity;\n  } else {\n    m = m + Math.pow(2, mLen);\n    e = e - eBias;\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen);\n};\nieee754.write = function(buffer2, value, offset, isLE, mLen, nBytes) {\n  var e, m, c;\n  var eLen = nBytes * 8 - mLen - 1;\n  var eMax = (1 << eLen) - 1;\n  var eBias = eMax >> 1;\n  var rt = mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0;\n  var i = isLE ? 0 : nBytes - 1;\n  var d = isLE ? 1 : -1;\n  var s = value < 0 || value === 0 && 1 / value < 0 ? 1 : 0;\n  value = Math.abs(value);\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0;\n    e = eMax;\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2);\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--;\n      c *= 2;\n    }\n    if (e + eBias >= 1) {\n      value += rt / c;\n    } else {\n      value += rt * Math.pow(2, 1 - eBias);\n    }\n    if (value * c >= 2) {\n      e++;\n      c /= 2;\n    }\n    if (e + eBias >= eMax) {\n      m = 0;\n      e = eMax;\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen);\n      e = e + eBias;\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen);\n      e = 0;\n    }\n  }\n  for (; mLen >= 8; buffer2[offset + i] = m & 255, i += d, m /= 256, mLen -= 8) {\n  }\n  e = e << mLen | m;\n  eLen += mLen;\n  for (; eLen > 0; buffer2[offset + i] = e & 255, i += d, e /= 256, eLen -= 8) {\n  }\n  buffer2[offset + i - d] |= s * 128;\n};\n/*!\n * The buffer module from node.js, for the browser.\n *\n * @author   Feross Aboukhadijeh <https://feross.org>\n * @license  MIT\n */\n(function(exports) {\n  const base64 = base64Js;\n  const ieee754$1 = ieee754;\n  const customInspectSymbol = typeof Symbol === \"function\" && typeof Symbol[\"for\"] === \"function\" ? Symbol[\"for\"](\"nodejs.util.inspect.custom\") : null;\n  exports.Buffer = Buffer3;\n  exports.SlowBuffer = SlowBuffer;\n  exports.INSPECT_MAX_BYTES = 50;\n  const K_MAX_LENGTH = 2147483647;\n  exports.kMaxLength = K_MAX_LENGTH;\n  const { Uint8Array: GlobalUint8Array, ArrayBuffer: GlobalArrayBuffer, SharedArrayBuffer: GlobalSharedArrayBuffer } = globalThis;\n  Buffer3.TYPED_ARRAY_SUPPORT = typedArraySupport();\n  if (!Buffer3.TYPED_ARRAY_SUPPORT && typeof console !== \"undefined\" && typeof console.error === \"function\") {\n    console.error(\n      \"This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.\"\n    );\n  }\n  function typedArraySupport() {\n    try {\n      const arr = new GlobalUint8Array(1);\n      const proto = { foo: function() {\n        return 42;\n      } };\n      Object.setPrototypeOf(proto, GlobalUint8Array.prototype);\n      Object.setPrototypeOf(arr, proto);\n      return arr.foo() === 42;\n    } catch (e) {\n      return false;\n    }\n  }\n  Object.defineProperty(Buffer3.prototype, \"parent\", {\n    enumerable: true,\n    get: function() {\n      if (!Buffer3.isBuffer(this)) return void 0;\n      return this.buffer;\n    }\n  });\n  Object.defineProperty(Buffer3.prototype, \"offset\", {\n    enumerable: true,\n    get: function() {\n      if (!Buffer3.isBuffer(this)) return void 0;\n      return this.byteOffset;\n    }\n  });\n  function createBuffer(length) {\n    if (length > K_MAX_LENGTH) {\n      throw new RangeError('The value \"' + length + '\" is invalid for option \"size\"');\n    }\n    const buf = new GlobalUint8Array(length);\n    Object.setPrototypeOf(buf, Buffer3.prototype);\n    return buf;\n  }\n  function Buffer3(arg, encodingOrOffset, length) {\n    if (typeof arg === \"number\") {\n      if (typeof encodingOrOffset === \"string\") {\n        throw new TypeError(\n          'The \"string\" argument must be of type string. Received type number'\n        );\n      }\n      return allocUnsafe(arg);\n    }\n    return from(arg, encodingOrOffset, length);\n  }\n  Buffer3.poolSize = 8192;\n  function from(value, encodingOrOffset, length) {\n    if (typeof value === \"string\") {\n      return fromString(value, encodingOrOffset);\n    }\n    if (GlobalArrayBuffer.isView(value)) {\n      return fromArrayView(value);\n    }\n    if (value == null) {\n      throw new TypeError(\n        \"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \" + typeof value\n      );\n    }\n    if (isInstance(value, GlobalArrayBuffer) || value && isInstance(value.buffer, GlobalArrayBuffer)) {\n      return fromArrayBuffer(value, encodingOrOffset, length);\n    }\n    if (typeof GlobalSharedArrayBuffer !== \"undefined\" && (isInstance(value, GlobalSharedArrayBuffer) || value && isInstance(value.buffer, GlobalSharedArrayBuffer))) {\n      return fromArrayBuffer(value, encodingOrOffset, length);\n    }\n    if (typeof value === \"number\") {\n      throw new TypeError(\n        'The \"value\" argument must not be of type number. Received type number'\n      );\n    }\n    const valueOf = value.valueOf && value.valueOf();\n    if (valueOf != null && valueOf !== value) {\n      return Buffer3.from(valueOf, encodingOrOffset, length);\n    }\n    const b = fromObject(value);\n    if (b) return b;\n    if (typeof Symbol !== \"undefined\" && Symbol.toPrimitive != null && typeof value[Symbol.toPrimitive] === \"function\") {\n      return Buffer3.from(value[Symbol.toPrimitive](\"string\"), encodingOrOffset, length);\n    }\n    throw new TypeError(\n      \"The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type \" + typeof value\n    );\n  }\n  Buffer3.from = function(value, encodingOrOffset, length) {\n    return from(value, encodingOrOffset, length);\n  };\n  Object.setPrototypeOf(Buffer3.prototype, GlobalUint8Array.prototype);\n  Object.setPrototypeOf(Buffer3, GlobalUint8Array);\n  function assertSize(size) {\n    if (typeof size !== \"number\") {\n      throw new TypeError('\"size\" argument must be of type number');\n    } else if (size < 0) {\n      throw new RangeError('The value \"' + size + '\" is invalid for option \"size\"');\n    }\n  }\n  function alloc(size, fill, encoding) {\n    assertSize(size);\n    if (size <= 0) {\n      return createBuffer(size);\n    }\n    if (fill !== void 0) {\n      return typeof encoding === \"string\" ? createBuffer(size).fill(fill, encoding) : createBuffer(size).fill(fill);\n    }\n    return createBuffer(size);\n  }\n  Buffer3.alloc = function(size, fill, encoding) {\n    return alloc(size, fill, encoding);\n  };\n  function allocUnsafe(size) {\n    assertSize(size);\n    return createBuffer(size < 0 ? 0 : checked(size) | 0);\n  }\n  Buffer3.allocUnsafe = function(size) {\n    return allocUnsafe(size);\n  };\n  Buffer3.allocUnsafeSlow = function(size) {\n    return allocUnsafe(size);\n  };\n  function fromString(string, encoding) {\n    if (typeof encoding !== \"string\" || encoding === \"\") {\n      encoding = \"utf8\";\n    }\n    if (!Buffer3.isEncoding(encoding)) {\n      throw new TypeError(\"Unknown encoding: \" + encoding);\n    }\n    const length = byteLength2(string, encoding) | 0;\n    let buf = createBuffer(length);\n    const actual = buf.write(string, encoding);\n    if (actual !== length) {\n      buf = buf.slice(0, actual);\n    }\n    return buf;\n  }\n  function fromArrayLike(array) {\n    const length = array.length < 0 ? 0 : checked(array.length) | 0;\n    const buf = createBuffer(length);\n    for (let i = 0; i < length; i += 1) {\n      buf[i] = array[i] & 255;\n    }\n    return buf;\n  }\n  function fromArrayView(arrayView) {\n    if (isInstance(arrayView, GlobalUint8Array)) {\n      const copy = new GlobalUint8Array(arrayView);\n      return fromArrayBuffer(copy.buffer, copy.byteOffset, copy.byteLength);\n    }\n    return fromArrayLike(arrayView);\n  }\n  function fromArrayBuffer(array, byteOffset, length) {\n    if (byteOffset < 0 || array.byteLength < byteOffset) {\n      throw new RangeError('\"offset\" is outside of buffer bounds');\n    }\n    if (array.byteLength < byteOffset + (length || 0)) {\n      throw new RangeError('\"length\" is outside of buffer bounds');\n    }\n    let buf;\n    if (byteOffset === void 0 && length === void 0) {\n      buf = new GlobalUint8Array(array);\n    } else if (length === void 0) {\n      buf = new GlobalUint8Array(array, byteOffset);\n    } else {\n      buf = new GlobalUint8Array(array, byteOffset, length);\n    }\n    Object.setPrototypeOf(buf, Buffer3.prototype);\n    return buf;\n  }\n  function fromObject(obj) {\n    if (Buffer3.isBuffer(obj)) {\n      const len = checked(obj.length) | 0;\n      const buf = createBuffer(len);\n      if (buf.length === 0) {\n        return buf;\n      }\n      obj.copy(buf, 0, 0, len);\n      return buf;\n    }\n    if (obj.length !== void 0) {\n      if (typeof obj.length !== \"number\" || numberIsNaN(obj.length)) {\n        return createBuffer(0);\n      }\n      return fromArrayLike(obj);\n    }\n    if (obj.type === \"Buffer\" && Array.isArray(obj.data)) {\n      return fromArrayLike(obj.data);\n    }\n  }\n  function checked(length) {\n    if (length >= K_MAX_LENGTH) {\n      throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\" + K_MAX_LENGTH.toString(16) + \" bytes\");\n    }\n    return length | 0;\n  }\n  function SlowBuffer(length) {\n    if (+length != length) {\n      length = 0;\n    }\n    return Buffer3.alloc(+length);\n  }\n  Buffer3.isBuffer = function isBuffer(b) {\n    return b != null && b._isBuffer === true && b !== Buffer3.prototype;\n  };\n  Buffer3.compare = function compare(a, b) {\n    if (isInstance(a, GlobalUint8Array)) a = Buffer3.from(a, a.offset, a.byteLength);\n    if (isInstance(b, GlobalUint8Array)) b = Buffer3.from(b, b.offset, b.byteLength);\n    if (!Buffer3.isBuffer(a) || !Buffer3.isBuffer(b)) {\n      throw new TypeError(\n        'The \"buf1\", \"buf2\" arguments must be one of type Buffer or Uint8Array'\n      );\n    }\n    if (a === b) return 0;\n    let x = a.length;\n    let y = b.length;\n    for (let i = 0, len = Math.min(x, y); i < len; ++i) {\n      if (a[i] !== b[i]) {\n        x = a[i];\n        y = b[i];\n        break;\n      }\n    }\n    if (x < y) return -1;\n    if (y < x) return 1;\n    return 0;\n  };\n  Buffer3.isEncoding = function isEncoding(encoding) {\n    switch (String(encoding).toLowerCase()) {\n      case \"hex\":\n      case \"utf8\":\n      case \"utf-8\":\n      case \"ascii\":\n      case \"latin1\":\n      case \"binary\":\n      case \"base64\":\n      case \"ucs2\":\n      case \"ucs-2\":\n      case \"utf16le\":\n      case \"utf-16le\":\n        return true;\n      default:\n        return false;\n    }\n  };\n  Buffer3.concat = function concat(list, length) {\n    if (!Array.isArray(list)) {\n      throw new TypeError('\"list\" argument must be an Array of Buffers');\n    }\n    if (list.length === 0) {\n      return Buffer3.alloc(0);\n    }\n    let i;\n    if (length === void 0) {\n      length = 0;\n      for (i = 0; i < list.length; ++i) {\n        length += list[i].length;\n      }\n    }\n    const buffer2 = Buffer3.allocUnsafe(length);\n    let pos = 0;\n    for (i = 0; i < list.length; ++i) {\n      let buf = list[i];\n      if (isInstance(buf, GlobalUint8Array)) {\n        if (pos + buf.length > buffer2.length) {\n          if (!Buffer3.isBuffer(buf)) buf = Buffer3.from(buf);\n          buf.copy(buffer2, pos);\n        } else {\n          GlobalUint8Array.prototype.set.call(\n            buffer2,\n            buf,\n            pos\n          );\n        }\n      } else if (!Buffer3.isBuffer(buf)) {\n        throw new TypeError('\"list\" argument must be an Array of Buffers');\n      } else {\n        buf.copy(buffer2, pos);\n      }\n      pos += buf.length;\n    }\n    return buffer2;\n  };\n  function byteLength2(string, encoding) {\n    if (Buffer3.isBuffer(string)) {\n      return string.length;\n    }\n    if (GlobalArrayBuffer.isView(string) || isInstance(string, GlobalArrayBuffer)) {\n      return string.byteLength;\n    }\n    if (typeof string !== \"string\") {\n      throw new TypeError(\n        'The \"string\" argument must be one of type string, Buffer, or ArrayBuffer. Received type ' + typeof string\n      );\n    }\n    const len = string.length;\n    const mustMatch = arguments.length > 2 && arguments[2] === true;\n    if (!mustMatch && len === 0) return 0;\n    let loweredCase = false;\n    for (; ; ) {\n      switch (encoding) {\n        case \"ascii\":\n        case \"latin1\":\n        case \"binary\":\n          return len;\n        case \"utf8\":\n        case \"utf-8\":\n          return utf8ToBytes(string).length;\n        case \"ucs2\":\n        case \"ucs-2\":\n        case \"utf16le\":\n        case \"utf-16le\":\n          return len * 2;\n        case \"hex\":\n          return len >>> 1;\n        case \"base64\":\n          return base64ToBytes(string).length;\n        default:\n          if (loweredCase) {\n            return mustMatch ? -1 : utf8ToBytes(string).length;\n          }\n          encoding = (\"\" + encoding).toLowerCase();\n          loweredCase = true;\n      }\n    }\n  }\n  Buffer3.byteLength = byteLength2;\n  function slowToString(encoding, start, end) {\n    let loweredCase = false;\n    if (start === void 0 || start < 0) {\n      start = 0;\n    }\n    if (start > this.length) {\n      return \"\";\n    }\n    if (end === void 0 || end > this.length) {\n      end = this.length;\n    }\n    if (end <= 0) {\n      return \"\";\n    }\n    end >>>= 0;\n    start >>>= 0;\n    if (end <= start) {\n      return \"\";\n    }\n    if (!encoding) encoding = \"utf8\";\n    while (true) {\n      switch (encoding) {\n        case \"hex\":\n          return hexSlice(this, start, end);\n        case \"utf8\":\n        case \"utf-8\":\n          return utf8Slice(this, start, end);\n        case \"ascii\":\n          return asciiSlice(this, start, end);\n        case \"latin1\":\n        case \"binary\":\n          return latin1Slice(this, start, end);\n        case \"base64\":\n          return base64Slice(this, start, end);\n        case \"ucs2\":\n        case \"ucs-2\":\n        case \"utf16le\":\n        case \"utf-16le\":\n          return utf16leSlice(this, start, end);\n        default:\n          if (loweredCase) throw new TypeError(\"Unknown encoding: \" + encoding);\n          encoding = (encoding + \"\").toLowerCase();\n          loweredCase = true;\n      }\n    }\n  }\n  Buffer3.prototype._isBuffer = true;\n  function swap(b, n, m) {\n    const i = b[n];\n    b[n] = b[m];\n    b[m] = i;\n  }\n  Buffer3.prototype.swap16 = function swap16() {\n    const len = this.length;\n    if (len % 2 !== 0) {\n      throw new RangeError(\"Buffer size must be a multiple of 16-bits\");\n    }\n    for (let i = 0; i < len; i += 2) {\n      swap(this, i, i + 1);\n    }\n    return this;\n  };\n  Buffer3.prototype.swap32 = function swap32() {\n    const len = this.length;\n    if (len % 4 !== 0) {\n      throw new RangeError(\"Buffer size must be a multiple of 32-bits\");\n    }\n    for (let i = 0; i < len; i += 4) {\n      swap(this, i, i + 3);\n      swap(this, i + 1, i + 2);\n    }\n    return this;\n  };\n  Buffer3.prototype.swap64 = function swap64() {\n    const len = this.length;\n    if (len % 8 !== 0) {\n      throw new RangeError(\"Buffer size must be a multiple of 64-bits\");\n    }\n    for (let i = 0; i < len; i += 8) {\n      swap(this, i, i + 7);\n      swap(this, i + 1, i + 6);\n      swap(this, i + 2, i + 5);\n      swap(this, i + 3, i + 4);\n    }\n    return this;\n  };\n  Buffer3.prototype.toString = function toString() {\n    const length = this.length;\n    if (length === 0) return \"\";\n    if (arguments.length === 0) return utf8Slice(this, 0, length);\n    return slowToString.apply(this, arguments);\n  };\n  Buffer3.prototype.toLocaleString = Buffer3.prototype.toString;\n  Buffer3.prototype.equals = function equals(b) {\n    if (!Buffer3.isBuffer(b)) throw new TypeError(\"Argument must be a Buffer\");\n    if (this === b) return true;\n    return Buffer3.compare(this, b) === 0;\n  };\n  Buffer3.prototype.inspect = function inspect() {\n    let str = \"\";\n    const max = exports.INSPECT_MAX_BYTES;\n    str = this.toString(\"hex\", 0, max).replace(/(.{2})/g, \"$1 \").trim();\n    if (this.length > max) str += \" ... \";\n    return \"<Buffer \" + str + \">\";\n  };\n  if (customInspectSymbol) {\n    Buffer3.prototype[customInspectSymbol] = Buffer3.prototype.inspect;\n  }\n  Buffer3.prototype.compare = function compare(target, start, end, thisStart, thisEnd) {\n    if (isInstance(target, GlobalUint8Array)) {\n      target = Buffer3.from(target, target.offset, target.byteLength);\n    }\n    if (!Buffer3.isBuffer(target)) {\n      throw new TypeError(\n        'The \"target\" argument must be one of type Buffer or Uint8Array. Received type ' + typeof target\n      );\n    }\n    if (start === void 0) {\n      start = 0;\n    }\n    if (end === void 0) {\n      end = target ? target.length : 0;\n    }\n    if (thisStart === void 0) {\n      thisStart = 0;\n    }\n    if (thisEnd === void 0) {\n      thisEnd = this.length;\n    }\n    if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {\n      throw new RangeError(\"out of range index\");\n    }\n    if (thisStart >= thisEnd && start >= end) {\n      return 0;\n    }\n    if (thisStart >= thisEnd) {\n      return -1;\n    }\n    if (start >= end) {\n      return 1;\n    }\n    start >>>= 0;\n    end >>>= 0;\n    thisStart >>>= 0;\n    thisEnd >>>= 0;\n    if (this === target) return 0;\n    let x = thisEnd - thisStart;\n    let y = end - start;\n    const len = Math.min(x, y);\n    const thisCopy = this.slice(thisStart, thisEnd);\n    const targetCopy = target.slice(start, end);\n    for (let i = 0; i < len; ++i) {\n      if (thisCopy[i] !== targetCopy[i]) {\n        x = thisCopy[i];\n        y = targetCopy[i];\n        break;\n      }\n    }\n    if (x < y) return -1;\n    if (y < x) return 1;\n    return 0;\n  };\n  function bidirectionalIndexOf(buffer2, val, byteOffset, encoding, dir) {\n    if (buffer2.length === 0) return -1;\n    if (typeof byteOffset === \"string\") {\n      encoding = byteOffset;\n      byteOffset = 0;\n    } else if (byteOffset > 2147483647) {\n      byteOffset = 2147483647;\n    } else if (byteOffset < -2147483648) {\n      byteOffset = -2147483648;\n    }\n    byteOffset = +byteOffset;\n    if (numberIsNaN(byteOffset)) {\n      byteOffset = dir ? 0 : buffer2.length - 1;\n    }\n    if (byteOffset < 0) byteOffset = buffer2.length + byteOffset;\n    if (byteOffset >= buffer2.length) {\n      if (dir) return -1;\n      else byteOffset = buffer2.length - 1;\n    } else if (byteOffset < 0) {\n      if (dir) byteOffset = 0;\n      else return -1;\n    }\n    if (typeof val === \"string\") {\n      val = Buffer3.from(val, encoding);\n    }\n    if (Buffer3.isBuffer(val)) {\n      if (val.length === 0) {\n        return -1;\n      }\n      return arrayIndexOf(buffer2, val, byteOffset, encoding, dir);\n    } else if (typeof val === \"number\") {\n      val = val & 255;\n      if (typeof GlobalUint8Array.prototype.indexOf === \"function\") {\n        if (dir) {\n          return GlobalUint8Array.prototype.indexOf.call(buffer2, val, byteOffset);\n        } else {\n          return GlobalUint8Array.prototype.lastIndexOf.call(buffer2, val, byteOffset);\n        }\n      }\n      return arrayIndexOf(buffer2, [val], byteOffset, encoding, dir);\n    }\n    throw new TypeError(\"val must be string, number or Buffer\");\n  }\n  function arrayIndexOf(arr, val, byteOffset, encoding, dir) {\n    let indexSize = 1;\n    let arrLength = arr.length;\n    let valLength = val.length;\n    if (encoding !== void 0) {\n      encoding = String(encoding).toLowerCase();\n      if (encoding === \"ucs2\" || encoding === \"ucs-2\" || encoding === \"utf16le\" || encoding === \"utf-16le\") {\n        if (arr.length < 2 || val.length < 2) {\n          return -1;\n        }\n        indexSize = 2;\n        arrLength /= 2;\n        valLength /= 2;\n        byteOffset /= 2;\n      }\n    }\n    function read(buf, i2) {\n      if (indexSize === 1) {\n        return buf[i2];\n      } else {\n        return buf.readUInt16BE(i2 * indexSize);\n      }\n    }\n    let i;\n    if (dir) {\n      let foundIndex = -1;\n      for (i = byteOffset; i < arrLength; i++) {\n        if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {\n          if (foundIndex === -1) foundIndex = i;\n          if (i - foundIndex + 1 === valLength) return foundIndex * indexSize;\n        } else {\n          if (foundIndex !== -1) i -= i - foundIndex;\n          foundIndex = -1;\n        }\n      }\n    } else {\n      if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength;\n      for (i = byteOffset; i >= 0; i--) {\n        let found = true;\n        for (let j = 0; j < valLength; j++) {\n          if (read(arr, i + j) !== read(val, j)) {\n            found = false;\n            break;\n          }\n        }\n        if (found) return i;\n      }\n    }\n    return -1;\n  }\n  Buffer3.prototype.includes = function includes(val, byteOffset, encoding) {\n    return this.indexOf(val, byteOffset, encoding) !== -1;\n  };\n  Buffer3.prototype.indexOf = function indexOf(val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, true);\n  };\n  Buffer3.prototype.lastIndexOf = function lastIndexOf(val, byteOffset, encoding) {\n    return bidirectionalIndexOf(this, val, byteOffset, encoding, false);\n  };\n  function hexWrite(buf, string, offset, length) {\n    offset = Number(offset) || 0;\n    const remaining = buf.length - offset;\n    if (!length) {\n      length = remaining;\n    } else {\n      length = Number(length);\n      if (length > remaining) {\n        length = remaining;\n      }\n    }\n    const strLen = string.length;\n    if (length > strLen / 2) {\n      length = strLen / 2;\n    }\n    let i;\n    for (i = 0; i < length; ++i) {\n      const parsed = parseInt(string.substr(i * 2, 2), 16);\n      if (numberIsNaN(parsed)) return i;\n      buf[offset + i] = parsed;\n    }\n    return i;\n  }\n  function utf8Write(buf, string, offset, length) {\n    return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length);\n  }\n  function asciiWrite(buf, string, offset, length) {\n    return blitBuffer(asciiToBytes(string), buf, offset, length);\n  }\n  function base64Write(buf, string, offset, length) {\n    return blitBuffer(base64ToBytes(string), buf, offset, length);\n  }\n  function ucs2Write(buf, string, offset, length) {\n    return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length);\n  }\n  Buffer3.prototype.write = function write(string, offset, length, encoding) {\n    if (offset === void 0) {\n      encoding = \"utf8\";\n      length = this.length;\n      offset = 0;\n    } else if (length === void 0 && typeof offset === \"string\") {\n      encoding = offset;\n      length = this.length;\n      offset = 0;\n    } else if (isFinite(offset)) {\n      offset = offset >>> 0;\n      if (isFinite(length)) {\n        length = length >>> 0;\n        if (encoding === void 0) encoding = \"utf8\";\n      } else {\n        encoding = length;\n        length = void 0;\n      }\n    } else {\n      throw new Error(\n        \"Buffer.write(string, encoding, offset[, length]) is no longer supported\"\n      );\n    }\n    const remaining = this.length - offset;\n    if (length === void 0 || length > remaining) length = remaining;\n    if (string.length > 0 && (length < 0 || offset < 0) || offset > this.length) {\n      throw new RangeError(\"Attempt to write outside buffer bounds\");\n    }\n    if (!encoding) encoding = \"utf8\";\n    let loweredCase = false;\n    for (; ; ) {\n      switch (encoding) {\n        case \"hex\":\n          return hexWrite(this, string, offset, length);\n        case \"utf8\":\n        case \"utf-8\":\n          return utf8Write(this, string, offset, length);\n        case \"ascii\":\n        case \"latin1\":\n        case \"binary\":\n          return asciiWrite(this, string, offset, length);\n        case \"base64\":\n          return base64Write(this, string, offset, length);\n        case \"ucs2\":\n        case \"ucs-2\":\n        case \"utf16le\":\n        case \"utf-16le\":\n          return ucs2Write(this, string, offset, length);\n        default:\n          if (loweredCase) throw new TypeError(\"Unknown encoding: \" + encoding);\n          encoding = (\"\" + encoding).toLowerCase();\n          loweredCase = true;\n      }\n    }\n  };\n  Buffer3.prototype.toJSON = function toJSON() {\n    return {\n      type: \"Buffer\",\n      data: Array.prototype.slice.call(this._arr || this, 0)\n    };\n  };\n  function base64Slice(buf, start, end) {\n    if (start === 0 && end === buf.length) {\n      return base64.fromByteArray(buf);\n    } else {\n      return base64.fromByteArray(buf.slice(start, end));\n    }\n  }\n  function utf8Slice(buf, start, end) {\n    end = Math.min(buf.length, end);\n    const res = [];\n    let i = start;\n    while (i < end) {\n      const firstByte = buf[i];\n      let codePoint = null;\n      let bytesPerSequence = firstByte > 239 ? 4 : firstByte > 223 ? 3 : firstByte > 191 ? 2 : 1;\n      if (i + bytesPerSequence <= end) {\n        let secondByte, thirdByte, fourthByte, tempCodePoint;\n        switch (bytesPerSequence) {\n          case 1:\n            if (firstByte < 128) {\n              codePoint = firstByte;\n            }\n            break;\n          case 2:\n            secondByte = buf[i + 1];\n            if ((secondByte & 192) === 128) {\n              tempCodePoint = (firstByte & 31) << 6 | secondByte & 63;\n              if (tempCodePoint > 127) {\n                codePoint = tempCodePoint;\n              }\n            }\n            break;\n          case 3:\n            secondByte = buf[i + 1];\n            thirdByte = buf[i + 2];\n            if ((secondByte & 192) === 128 && (thirdByte & 192) === 128) {\n              tempCodePoint = (firstByte & 15) << 12 | (secondByte & 63) << 6 | thirdByte & 63;\n              if (tempCodePoint > 2047 && (tempCodePoint < 55296 || tempCodePoint > 57343)) {\n                codePoint = tempCodePoint;\n              }\n            }\n            break;\n          case 4:\n            secondByte = buf[i + 1];\n            thirdByte = buf[i + 2];\n            fourthByte = buf[i + 3];\n            if ((secondByte & 192) === 128 && (thirdByte & 192) === 128 && (fourthByte & 192) === 128) {\n              tempCodePoint = (firstByte & 15) << 18 | (secondByte & 63) << 12 | (thirdByte & 63) << 6 | fourthByte & 63;\n              if (tempCodePoint > 65535 && tempCodePoint < 1114112) {\n                codePoint = tempCodePoint;\n              }\n            }\n        }\n      }\n      if (codePoint === null) {\n        codePoint = 65533;\n        bytesPerSequence = 1;\n      } else if (codePoint > 65535) {\n        codePoint -= 65536;\n        res.push(codePoint >>> 10 & 1023 | 55296);\n        codePoint = 56320 | codePoint & 1023;\n      }\n      res.push(codePoint);\n      i += bytesPerSequence;\n    }\n    return decodeCodePointsArray(res);\n  }\n  const MAX_ARGUMENTS_LENGTH2 = 4096;\n  function decodeCodePointsArray(codePoints) {\n    const len = codePoints.length;\n    if (len <= MAX_ARGUMENTS_LENGTH2) {\n      return String.fromCharCode.apply(String, codePoints);\n    }\n    let res = \"\";\n    let i = 0;\n    while (i < len) {\n      res += String.fromCharCode.apply(\n        String,\n        codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH2)\n      );\n    }\n    return res;\n  }\n  function asciiSlice(buf, start, end) {\n    let ret = \"\";\n    end = Math.min(buf.length, end);\n    for (let i = start; i < end; ++i) {\n      ret += String.fromCharCode(buf[i] & 127);\n    }\n    return ret;\n  }\n  function latin1Slice(buf, start, end) {\n    let ret = \"\";\n    end = Math.min(buf.length, end);\n    for (let i = start; i < end; ++i) {\n      ret += String.fromCharCode(buf[i]);\n    }\n    return ret;\n  }\n  function hexSlice(buf, start, end) {\n    const len = buf.length;\n    if (!start || start < 0) start = 0;\n    if (!end || end < 0 || end > len) end = len;\n    let out = \"\";\n    for (let i = start; i < end; ++i) {\n      out += hexSliceLookupTable[buf[i]];\n    }\n    return out;\n  }\n  function utf16leSlice(buf, start, end) {\n    const bytes2 = buf.slice(start, end);\n    let res = \"\";\n    for (let i = 0; i < bytes2.length - 1; i += 2) {\n      res += String.fromCharCode(bytes2[i] + bytes2[i + 1] * 256);\n    }\n    return res;\n  }\n  Buffer3.prototype.slice = function slice(start, end) {\n    const len = this.length;\n    start = ~~start;\n    end = end === void 0 ? len : ~~end;\n    if (start < 0) {\n      start += len;\n      if (start < 0) start = 0;\n    } else if (start > len) {\n      start = len;\n    }\n    if (end < 0) {\n      end += len;\n      if (end < 0) end = 0;\n    } else if (end > len) {\n      end = len;\n    }\n    if (end < start) end = start;\n    const newBuf = this.subarray(start, end);\n    Object.setPrototypeOf(newBuf, Buffer3.prototype);\n    return newBuf;\n  };\n  function checkOffset(offset, ext, length) {\n    if (offset % 1 !== 0 || offset < 0) throw new RangeError(\"offset is not uint\");\n    if (offset + ext > length) throw new RangeError(\"Trying to access beyond buffer length\");\n  }\n  Buffer3.prototype.readUintLE = Buffer3.prototype.readUIntLE = function readUIntLE(offset, byteLength3, noAssert) {\n    offset = offset >>> 0;\n    byteLength3 = byteLength3 >>> 0;\n    if (!noAssert) checkOffset(offset, byteLength3, this.length);\n    let val = this[offset];\n    let mul = 1;\n    let i = 0;\n    while (++i < byteLength3 && (mul *= 256)) {\n      val += this[offset + i] * mul;\n    }\n    return val;\n  };\n  Buffer3.prototype.readUintBE = Buffer3.prototype.readUIntBE = function readUIntBE(offset, byteLength3, noAssert) {\n    offset = offset >>> 0;\n    byteLength3 = byteLength3 >>> 0;\n    if (!noAssert) {\n      checkOffset(offset, byteLength3, this.length);\n    }\n    let val = this[offset + --byteLength3];\n    let mul = 1;\n    while (byteLength3 > 0 && (mul *= 256)) {\n      val += this[offset + --byteLength3] * mul;\n    }\n    return val;\n  };\n  Buffer3.prototype.readUint8 = Buffer3.prototype.readUInt8 = function readUInt8(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 1, this.length);\n    return this[offset];\n  };\n  Buffer3.prototype.readUint16LE = Buffer3.prototype.readUInt16LE = function readUInt16LE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 2, this.length);\n    return this[offset] | this[offset + 1] << 8;\n  };\n  Buffer3.prototype.readUint16BE = Buffer3.prototype.readUInt16BE = function readUInt16BE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 2, this.length);\n    return this[offset] << 8 | this[offset + 1];\n  };\n  Buffer3.prototype.readUint32LE = Buffer3.prototype.readUInt32LE = function readUInt32LE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 4, this.length);\n    return (this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16) + this[offset + 3] * 16777216;\n  };\n  Buffer3.prototype.readUint32BE = Buffer3.prototype.readUInt32BE = function readUInt32BE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 4, this.length);\n    return this[offset] * 16777216 + (this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3]);\n  };\n  Buffer3.prototype.readBigUInt64LE = defineBigIntMethod(function readBigUInt64LE(offset) {\n    offset = offset >>> 0;\n    validateNumber(offset, \"offset\");\n    const first = this[offset];\n    const last = this[offset + 7];\n    if (first === void 0 || last === void 0) {\n      boundsError(offset, this.length - 8);\n    }\n    const lo = first + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 24;\n    const hi = this[++offset] + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + last * 2 ** 24;\n    return BigInt(lo) + (BigInt(hi) << BigInt(32));\n  });\n  Buffer3.prototype.readBigUInt64BE = defineBigIntMethod(function readBigUInt64BE(offset) {\n    offset = offset >>> 0;\n    validateNumber(offset, \"offset\");\n    const first = this[offset];\n    const last = this[offset + 7];\n    if (first === void 0 || last === void 0) {\n      boundsError(offset, this.length - 8);\n    }\n    const hi = first * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + this[++offset];\n    const lo = this[++offset] * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + last;\n    return (BigInt(hi) << BigInt(32)) + BigInt(lo);\n  });\n  Buffer3.prototype.readIntLE = function readIntLE(offset, byteLength3, noAssert) {\n    offset = offset >>> 0;\n    byteLength3 = byteLength3 >>> 0;\n    if (!noAssert) checkOffset(offset, byteLength3, this.length);\n    let val = this[offset];\n    let mul = 1;\n    let i = 0;\n    while (++i < byteLength3 && (mul *= 256)) {\n      val += this[offset + i] * mul;\n    }\n    mul *= 128;\n    if (val >= mul) val -= Math.pow(2, 8 * byteLength3);\n    return val;\n  };\n  Buffer3.prototype.readIntBE = function readIntBE(offset, byteLength3, noAssert) {\n    offset = offset >>> 0;\n    byteLength3 = byteLength3 >>> 0;\n    if (!noAssert) checkOffset(offset, byteLength3, this.length);\n    let i = byteLength3;\n    let mul = 1;\n    let val = this[offset + --i];\n    while (i > 0 && (mul *= 256)) {\n      val += this[offset + --i] * mul;\n    }\n    mul *= 128;\n    if (val >= mul) val -= Math.pow(2, 8 * byteLength3);\n    return val;\n  };\n  Buffer3.prototype.readInt8 = function readInt8(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 1, this.length);\n    if (!(this[offset] & 128)) return this[offset];\n    return (255 - this[offset] + 1) * -1;\n  };\n  Buffer3.prototype.readInt16LE = function readInt16LE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 2, this.length);\n    const val = this[offset] | this[offset + 1] << 8;\n    return val & 32768 ? val | 4294901760 : val;\n  };\n  Buffer3.prototype.readInt16BE = function readInt16BE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 2, this.length);\n    const val = this[offset + 1] | this[offset] << 8;\n    return val & 32768 ? val | 4294901760 : val;\n  };\n  Buffer3.prototype.readInt32LE = function readInt32LE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 4, this.length);\n    return this[offset] | this[offset + 1] << 8 | this[offset + 2] << 16 | this[offset + 3] << 24;\n  };\n  Buffer3.prototype.readInt32BE = function readInt32BE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 4, this.length);\n    return this[offset] << 24 | this[offset + 1] << 16 | this[offset + 2] << 8 | this[offset + 3];\n  };\n  Buffer3.prototype.readBigInt64LE = defineBigIntMethod(function readBigInt64LE(offset) {\n    offset = offset >>> 0;\n    validateNumber(offset, \"offset\");\n    const first = this[offset];\n    const last = this[offset + 7];\n    if (first === void 0 || last === void 0) {\n      boundsError(offset, this.length - 8);\n    }\n    const val = this[offset + 4] + this[offset + 5] * 2 ** 8 + this[offset + 6] * 2 ** 16 + (last << 24);\n    return (BigInt(val) << BigInt(32)) + BigInt(first + this[++offset] * 2 ** 8 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 24);\n  });\n  Buffer3.prototype.readBigInt64BE = defineBigIntMethod(function readBigInt64BE(offset) {\n    offset = offset >>> 0;\n    validateNumber(offset, \"offset\");\n    const first = this[offset];\n    const last = this[offset + 7];\n    if (first === void 0 || last === void 0) {\n      boundsError(offset, this.length - 8);\n    }\n    const val = (first << 24) + // Overflow\n    this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + this[++offset];\n    return (BigInt(val) << BigInt(32)) + BigInt(this[++offset] * 2 ** 24 + this[++offset] * 2 ** 16 + this[++offset] * 2 ** 8 + last);\n  });\n  Buffer3.prototype.readFloatLE = function readFloatLE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 4, this.length);\n    return ieee754$1.read(this, offset, true, 23, 4);\n  };\n  Buffer3.prototype.readFloatBE = function readFloatBE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 4, this.length);\n    return ieee754$1.read(this, offset, false, 23, 4);\n  };\n  Buffer3.prototype.readDoubleLE = function readDoubleLE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 8, this.length);\n    return ieee754$1.read(this, offset, true, 52, 8);\n  };\n  Buffer3.prototype.readDoubleBE = function readDoubleBE(offset, noAssert) {\n    offset = offset >>> 0;\n    if (!noAssert) checkOffset(offset, 8, this.length);\n    return ieee754$1.read(this, offset, false, 52, 8);\n  };\n  function checkInt(buf, value, offset, ext, max, min) {\n    if (!Buffer3.isBuffer(buf)) throw new TypeError('\"buffer\" argument must be a Buffer instance');\n    if (value > max || value < min) throw new RangeError('\"value\" argument is out of bounds');\n    if (offset + ext > buf.length) throw new RangeError(\"Index out of range\");\n  }\n  Buffer3.prototype.writeUintLE = Buffer3.prototype.writeUIntLE = function writeUIntLE(value, offset, byteLength3, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    byteLength3 = byteLength3 >>> 0;\n    if (!noAssert) {\n      const maxBytes = Math.pow(2, 8 * byteLength3) - 1;\n      checkInt(this, value, offset, byteLength3, maxBytes, 0);\n    }\n    let mul = 1;\n    let i = 0;\n    this[offset] = value & 255;\n    while (++i < byteLength3 && (mul *= 256)) {\n      this[offset + i] = value / mul & 255;\n    }\n    return offset + byteLength3;\n  };\n  Buffer3.prototype.writeUintBE = Buffer3.prototype.writeUIntBE = function writeUIntBE(value, offset, byteLength3, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    byteLength3 = byteLength3 >>> 0;\n    if (!noAssert) {\n      const maxBytes = Math.pow(2, 8 * byteLength3) - 1;\n      checkInt(this, value, offset, byteLength3, maxBytes, 0);\n    }\n    let i = byteLength3 - 1;\n    let mul = 1;\n    this[offset + i] = value & 255;\n    while (--i >= 0 && (mul *= 256)) {\n      this[offset + i] = value / mul & 255;\n    }\n    return offset + byteLength3;\n  };\n  Buffer3.prototype.writeUint8 = Buffer3.prototype.writeUInt8 = function writeUInt8(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 1, 255, 0);\n    this[offset] = value & 255;\n    return offset + 1;\n  };\n  Buffer3.prototype.writeUint16LE = Buffer3.prototype.writeUInt16LE = function writeUInt16LE(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 2, 65535, 0);\n    this[offset] = value & 255;\n    this[offset + 1] = value >>> 8;\n    return offset + 2;\n  };\n  Buffer3.prototype.writeUint16BE = Buffer3.prototype.writeUInt16BE = function writeUInt16BE(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 2, 65535, 0);\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 255;\n    return offset + 2;\n  };\n  Buffer3.prototype.writeUint32LE = Buffer3.prototype.writeUInt32LE = function writeUInt32LE(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 4, 4294967295, 0);\n    this[offset + 3] = value >>> 24;\n    this[offset + 2] = value >>> 16;\n    this[offset + 1] = value >>> 8;\n    this[offset] = value & 255;\n    return offset + 4;\n  };\n  Buffer3.prototype.writeUint32BE = Buffer3.prototype.writeUInt32BE = function writeUInt32BE(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 4, 4294967295, 0);\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 255;\n    return offset + 4;\n  };\n  function wrtBigUInt64LE(buf, value, offset, min, max) {\n    checkIntBI(value, min, max, buf, offset, 7);\n    let lo = Number(value & BigInt(4294967295));\n    buf[offset++] = lo;\n    lo = lo >> 8;\n    buf[offset++] = lo;\n    lo = lo >> 8;\n    buf[offset++] = lo;\n    lo = lo >> 8;\n    buf[offset++] = lo;\n    let hi = Number(value >> BigInt(32) & BigInt(4294967295));\n    buf[offset++] = hi;\n    hi = hi >> 8;\n    buf[offset++] = hi;\n    hi = hi >> 8;\n    buf[offset++] = hi;\n    hi = hi >> 8;\n    buf[offset++] = hi;\n    return offset;\n  }\n  function wrtBigUInt64BE(buf, value, offset, min, max) {\n    checkIntBI(value, min, max, buf, offset, 7);\n    let lo = Number(value & BigInt(4294967295));\n    buf[offset + 7] = lo;\n    lo = lo >> 8;\n    buf[offset + 6] = lo;\n    lo = lo >> 8;\n    buf[offset + 5] = lo;\n    lo = lo >> 8;\n    buf[offset + 4] = lo;\n    let hi = Number(value >> BigInt(32) & BigInt(4294967295));\n    buf[offset + 3] = hi;\n    hi = hi >> 8;\n    buf[offset + 2] = hi;\n    hi = hi >> 8;\n    buf[offset + 1] = hi;\n    hi = hi >> 8;\n    buf[offset] = hi;\n    return offset + 8;\n  }\n  Buffer3.prototype.writeBigUInt64LE = defineBigIntMethod(function writeBigUInt64LE(value, offset = 0) {\n    return wrtBigUInt64LE(this, value, offset, BigInt(0), BigInt(\"0xffffffffffffffff\"));\n  });\n  Buffer3.prototype.writeBigUInt64BE = defineBigIntMethod(function writeBigUInt64BE(value, offset = 0) {\n    return wrtBigUInt64BE(this, value, offset, BigInt(0), BigInt(\"0xffffffffffffffff\"));\n  });\n  Buffer3.prototype.writeIntLE = function writeIntLE(value, offset, byteLength3, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) {\n      const limit = Math.pow(2, 8 * byteLength3 - 1);\n      checkInt(this, value, offset, byteLength3, limit - 1, -limit);\n    }\n    let i = 0;\n    let mul = 1;\n    let sub = 0;\n    this[offset] = value & 255;\n    while (++i < byteLength3 && (mul *= 256)) {\n      if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {\n        sub = 1;\n      }\n      this[offset + i] = (value / mul >> 0) - sub & 255;\n    }\n    return offset + byteLength3;\n  };\n  Buffer3.prototype.writeIntBE = function writeIntBE(value, offset, byteLength3, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) {\n      const limit = Math.pow(2, 8 * byteLength3 - 1);\n      checkInt(this, value, offset, byteLength3, limit - 1, -limit);\n    }\n    let i = byteLength3 - 1;\n    let mul = 1;\n    let sub = 0;\n    this[offset + i] = value & 255;\n    while (--i >= 0 && (mul *= 256)) {\n      if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {\n        sub = 1;\n      }\n      this[offset + i] = (value / mul >> 0) - sub & 255;\n    }\n    return offset + byteLength3;\n  };\n  Buffer3.prototype.writeInt8 = function writeInt8(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 1, 127, -128);\n    if (value < 0) value = 255 + value + 1;\n    this[offset] = value & 255;\n    return offset + 1;\n  };\n  Buffer3.prototype.writeInt16LE = function writeInt16LE(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 2, 32767, -32768);\n    this[offset] = value & 255;\n    this[offset + 1] = value >>> 8;\n    return offset + 2;\n  };\n  Buffer3.prototype.writeInt16BE = function writeInt16BE(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 2, 32767, -32768);\n    this[offset] = value >>> 8;\n    this[offset + 1] = value & 255;\n    return offset + 2;\n  };\n  Buffer3.prototype.writeInt32LE = function writeInt32LE(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 4, 2147483647, -2147483648);\n    this[offset] = value & 255;\n    this[offset + 1] = value >>> 8;\n    this[offset + 2] = value >>> 16;\n    this[offset + 3] = value >>> 24;\n    return offset + 4;\n  };\n  Buffer3.prototype.writeInt32BE = function writeInt32BE(value, offset, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) checkInt(this, value, offset, 4, 2147483647, -2147483648);\n    if (value < 0) value = 4294967295 + value + 1;\n    this[offset] = value >>> 24;\n    this[offset + 1] = value >>> 16;\n    this[offset + 2] = value >>> 8;\n    this[offset + 3] = value & 255;\n    return offset + 4;\n  };\n  Buffer3.prototype.writeBigInt64LE = defineBigIntMethod(function writeBigInt64LE(value, offset = 0) {\n    return wrtBigUInt64LE(this, value, offset, -BigInt(\"0x8000000000000000\"), BigInt(\"0x7fffffffffffffff\"));\n  });\n  Buffer3.prototype.writeBigInt64BE = defineBigIntMethod(function writeBigInt64BE(value, offset = 0) {\n    return wrtBigUInt64BE(this, value, offset, -BigInt(\"0x8000000000000000\"), BigInt(\"0x7fffffffffffffff\"));\n  });\n  function checkIEEE754(buf, value, offset, ext, max, min) {\n    if (offset + ext > buf.length) throw new RangeError(\"Index out of range\");\n    if (offset < 0) throw new RangeError(\"Index out of range\");\n  }\n  function writeFloat(buf, value, offset, littleEndian, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkIEEE754(buf, value, offset, 4);\n    }\n    ieee754$1.write(buf, value, offset, littleEndian, 23, 4);\n    return offset + 4;\n  }\n  Buffer3.prototype.writeFloatLE = function writeFloatLE(value, offset, noAssert) {\n    return writeFloat(this, value, offset, true, noAssert);\n  };\n  Buffer3.prototype.writeFloatBE = function writeFloatBE(value, offset, noAssert) {\n    return writeFloat(this, value, offset, false, noAssert);\n  };\n  function writeDouble(buf, value, offset, littleEndian, noAssert) {\n    value = +value;\n    offset = offset >>> 0;\n    if (!noAssert) {\n      checkIEEE754(buf, value, offset, 8);\n    }\n    ieee754$1.write(buf, value, offset, littleEndian, 52, 8);\n    return offset + 8;\n  }\n  Buffer3.prototype.writeDoubleLE = function writeDoubleLE(value, offset, noAssert) {\n    return writeDouble(this, value, offset, true, noAssert);\n  };\n  Buffer3.prototype.writeDoubleBE = function writeDoubleBE(value, offset, noAssert) {\n    return writeDouble(this, value, offset, false, noAssert);\n  };\n  Buffer3.prototype.copy = function copy(target, targetStart, start, end) {\n    if (!Buffer3.isBuffer(target)) throw new TypeError(\"argument should be a Buffer\");\n    if (!start) start = 0;\n    if (!end && end !== 0) end = this.length;\n    if (targetStart >= target.length) targetStart = target.length;\n    if (!targetStart) targetStart = 0;\n    if (end > 0 && end < start) end = start;\n    if (end === start) return 0;\n    if (target.length === 0 || this.length === 0) return 0;\n    if (targetStart < 0) {\n      throw new RangeError(\"targetStart out of bounds\");\n    }\n    if (start < 0 || start >= this.length) throw new RangeError(\"Index out of range\");\n    if (end < 0) throw new RangeError(\"sourceEnd out of bounds\");\n    if (end > this.length) end = this.length;\n    if (target.length - targetStart < end - start) {\n      end = target.length - targetStart + start;\n    }\n    const len = end - start;\n    if (this === target && typeof GlobalUint8Array.prototype.copyWithin === \"function\") {\n      this.copyWithin(targetStart, start, end);\n    } else {\n      GlobalUint8Array.prototype.set.call(\n        target,\n        this.subarray(start, end),\n        targetStart\n      );\n    }\n    return len;\n  };\n  Buffer3.prototype.fill = function fill(val, start, end, encoding) {\n    if (typeof val === \"string\") {\n      if (typeof start === \"string\") {\n        encoding = start;\n        start = 0;\n        end = this.length;\n      } else if (typeof end === \"string\") {\n        encoding = end;\n        end = this.length;\n      }\n      if (encoding !== void 0 && typeof encoding !== \"string\") {\n        throw new TypeError(\"encoding must be a string\");\n      }\n      if (typeof encoding === \"string\" && !Buffer3.isEncoding(encoding)) {\n        throw new TypeError(\"Unknown encoding: \" + encoding);\n      }\n      if (val.length === 1) {\n        const code2 = val.charCodeAt(0);\n        if (encoding === \"utf8\" && code2 < 128 || encoding === \"latin1\") {\n          val = code2;\n        }\n      }\n    } else if (typeof val === \"number\") {\n      val = val & 255;\n    } else if (typeof val === \"boolean\") {\n      val = Number(val);\n    }\n    if (start < 0 || this.length < start || this.length < end) {\n      throw new RangeError(\"Out of range index\");\n    }\n    if (end <= start) {\n      return this;\n    }\n    start = start >>> 0;\n    end = end === void 0 ? this.length : end >>> 0;\n    if (!val) val = 0;\n    let i;\n    if (typeof val === \"number\") {\n      for (i = start; i < end; ++i) {\n        this[i] = val;\n      }\n    } else {\n      const bytes2 = Buffer3.isBuffer(val) ? val : Buffer3.from(val, encoding);\n      const len = bytes2.length;\n      if (len === 0) {\n        throw new TypeError('The value \"' + val + '\" is invalid for argument \"value\"');\n      }\n      for (i = 0; i < end - start; ++i) {\n        this[i + start] = bytes2[i % len];\n      }\n    }\n    return this;\n  };\n  const errors = {};\n  function E(sym, getMessage, Base) {\n    errors[sym] = class NodeError extends Base {\n      constructor() {\n        super();\n        Object.defineProperty(this, \"message\", {\n          value: getMessage.apply(this, arguments),\n          writable: true,\n          configurable: true\n        });\n        this.name = `${this.name} [${sym}]`;\n        this.stack;\n        delete this.name;\n      }\n      get code() {\n        return sym;\n      }\n      set code(value) {\n        Object.defineProperty(this, \"code\", {\n          configurable: true,\n          enumerable: true,\n          value,\n          writable: true\n        });\n      }\n      toString() {\n        return `${this.name} [${sym}]: ${this.message}`;\n      }\n    };\n  }\n  E(\n    \"ERR_BUFFER_OUT_OF_BOUNDS\",\n    function(name) {\n      if (name) {\n        return `${name} is outside of buffer bounds`;\n      }\n      return \"Attempt to access memory outside buffer bounds\";\n    },\n    RangeError\n  );\n  E(\n    \"ERR_INVALID_ARG_TYPE\",\n    function(name, actual) {\n      return `The \"${name}\" argument must be of type number. Received type ${typeof actual}`;\n    },\n    TypeError\n  );\n  E(\n    \"ERR_OUT_OF_RANGE\",\n    function(str, range, input) {\n      let msg = `The value of \"${str}\" is out of range.`;\n      let received = input;\n      if (Number.isInteger(input) && Math.abs(input) > 2 ** 32) {\n        received = addNumericalSeparator(String(input));\n      } else if (typeof input === \"bigint\") {\n        received = String(input);\n        if (input > BigInt(2) ** BigInt(32) || input < -(BigInt(2) ** BigInt(32))) {\n          received = addNumericalSeparator(received);\n        }\n        received += \"n\";\n      }\n      msg += ` It must be ${range}. Received ${received}`;\n      return msg;\n    },\n    RangeError\n  );\n  function addNumericalSeparator(val) {\n    let res = \"\";\n    let i = val.length;\n    const start = val[0] === \"-\" ? 1 : 0;\n    for (; i >= start + 4; i -= 3) {\n      res = `_${val.slice(i - 3, i)}${res}`;\n    }\n    return `${val.slice(0, i)}${res}`;\n  }\n  function checkBounds(buf, offset, byteLength3) {\n    validateNumber(offset, \"offset\");\n    if (buf[offset] === void 0 || buf[offset + byteLength3] === void 0) {\n      boundsError(offset, buf.length - (byteLength3 + 1));\n    }\n  }\n  function checkIntBI(value, min, max, buf, offset, byteLength3) {\n    if (value > max || value < min) {\n      const n = typeof min === \"bigint\" ? \"n\" : \"\";\n      let range;\n      {\n        if (min === 0 || min === BigInt(0)) {\n          range = `>= 0${n} and < 2${n} ** ${(byteLength3 + 1) * 8}${n}`;\n        } else {\n          range = `>= -(2${n} ** ${(byteLength3 + 1) * 8 - 1}${n}) and < 2 ** ${(byteLength3 + 1) * 8 - 1}${n}`;\n        }\n      }\n      throw new errors.ERR_OUT_OF_RANGE(\"value\", range, value);\n    }\n    checkBounds(buf, offset, byteLength3);\n  }\n  function validateNumber(value, name) {\n    if (typeof value !== \"number\") {\n      throw new errors.ERR_INVALID_ARG_TYPE(name, \"number\", value);\n    }\n  }\n  function boundsError(value, length, type) {\n    if (Math.floor(value) !== value) {\n      validateNumber(value, type);\n      throw new errors.ERR_OUT_OF_RANGE(\"offset\", \"an integer\", value);\n    }\n    if (length < 0) {\n      throw new errors.ERR_BUFFER_OUT_OF_BOUNDS();\n    }\n    throw new errors.ERR_OUT_OF_RANGE(\n      \"offset\",\n      `>= ${0} and <= ${length}`,\n      value\n    );\n  }\n  const INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g;\n  function base64clean(str) {\n    str = str.split(\"=\")[0];\n    str = str.trim().replace(INVALID_BASE64_RE, \"\");\n    if (str.length < 2) return \"\";\n    while (str.length % 4 !== 0) {\n      str = str + \"=\";\n    }\n    return str;\n  }\n  function utf8ToBytes(string, units) {\n    units = units || Infinity;\n    let codePoint;\n    const length = string.length;\n    let leadSurrogate = null;\n    const bytes2 = [];\n    for (let i = 0; i < length; ++i) {\n      codePoint = string.charCodeAt(i);\n      if (codePoint > 55295 && codePoint < 57344) {\n        if (!leadSurrogate) {\n          if (codePoint > 56319) {\n            if ((units -= 3) > -1) bytes2.push(239, 191, 189);\n            continue;\n          } else if (i + 1 === length) {\n            if ((units -= 3) > -1) bytes2.push(239, 191, 189);\n            continue;\n          }\n          leadSurrogate = codePoint;\n          continue;\n        }\n        if (codePoint < 56320) {\n          if ((units -= 3) > -1) bytes2.push(239, 191, 189);\n          leadSurrogate = codePoint;\n          continue;\n        }\n        codePoint = (leadSurrogate - 55296 << 10 | codePoint - 56320) + 65536;\n      } else if (leadSurrogate) {\n        if ((units -= 3) > -1) bytes2.push(239, 191, 189);\n      }\n      leadSurrogate = null;\n      if (codePoint < 128) {\n        if ((units -= 1) < 0) break;\n        bytes2.push(codePoint);\n      } else if (codePoint < 2048) {\n        if ((units -= 2) < 0) break;\n        bytes2.push(\n          codePoint >> 6 | 192,\n          codePoint & 63 | 128\n        );\n      } else if (codePoint < 65536) {\n        if ((units -= 3) < 0) break;\n        bytes2.push(\n          codePoint >> 12 | 224,\n          codePoint >> 6 & 63 | 128,\n          codePoint & 63 | 128\n        );\n      } else if (codePoint < 1114112) {\n        if ((units -= 4) < 0) break;\n        bytes2.push(\n          codePoint >> 18 | 240,\n          codePoint >> 12 & 63 | 128,\n          codePoint >> 6 & 63 | 128,\n          codePoint & 63 | 128\n        );\n      } else {\n        throw new Error(\"Invalid code point\");\n      }\n    }\n    return bytes2;\n  }\n  function asciiToBytes(str) {\n    const byteArray = [];\n    for (let i = 0; i < str.length; ++i) {\n      byteArray.push(str.charCodeAt(i) & 255);\n    }\n    return byteArray;\n  }\n  function utf16leToBytes(str, units) {\n    let c, hi, lo;\n    const byteArray = [];\n    for (let i = 0; i < str.length; ++i) {\n      if ((units -= 2) < 0) break;\n      c = str.charCodeAt(i);\n      hi = c >> 8;\n      lo = c % 256;\n      byteArray.push(lo);\n      byteArray.push(hi);\n    }\n    return byteArray;\n  }\n  function base64ToBytes(str) {\n    return base64.toByteArray(base64clean(str));\n  }\n  function blitBuffer(src, dst, offset, length) {\n    let i;\n    for (i = 0; i < length; ++i) {\n      if (i + offset >= dst.length || i >= src.length) break;\n      dst[i + offset] = src[i];\n    }\n    return i;\n  }\n  function isInstance(obj, type) {\n    return obj instanceof type || obj != null && obj.constructor != null && obj.constructor.name != null && obj.constructor.name === type.name;\n  }\n  function numberIsNaN(obj) {\n    return obj !== obj;\n  }\n  const hexSliceLookupTable = function() {\n    const alphabet2 = \"0123456789abcdef\";\n    const table = new Array(256);\n    for (let i = 0; i < 16; ++i) {\n      const i16 = i * 16;\n      for (let j = 0; j < 16; ++j) {\n        table[i16 + j] = alphabet2[i] + alphabet2[j];\n      }\n    }\n    return table;\n  }();\n  function defineBigIntMethod(fn) {\n    return typeof BigInt === \"undefined\" ? BufferBigIntNotDefined : fn;\n  }\n  function BufferBigIntNotDefined() {\n    throw new Error(\"BigInt not supported\");\n  }\n})(buffer);\nconst Buffer2 = buffer.Buffer;\nconst debugLogger$4 = debug$5(\"peertube:player:segment-validator\");\nconst maxRetries = 10;\nclass SegmentValidator {\n  constructor(options) {\n    __publicField(this, \"destroyed\", false);\n    __publicField(this, \"segmentJSONPromise\");\n    this.options = options;\n  }\n  async validate(url, byteRange, data, retry = 1) {\n    if (this.destroyed) return false;\n    this.loadSha256SegmentsPromiseIfNeeded();\n    const filename = removeQueryParams(url).split(\"/\").pop();\n    const segmentValue = (await this.segmentJSONPromise)[filename];\n    if (!segmentValue && retry > maxRetries) {\n      logger$1.clientError(`Unknown segment name ${filename} in segment validator`);\n      return false;\n    }\n    if (!segmentValue) {\n      logger$1.info(`Refetching sha segments for ${filename}`);\n      await wait(500);\n      this.loadSha256SegmentsPromise();\n      return this.validate(url, byteRange, data, retry + 1);\n    }\n    let hashShouldBe;\n    let range = \"\";\n    if (typeof segmentValue === \"string\") {\n      hashShouldBe = segmentValue;\n    } else {\n      range = byteRange.start + \"-\" + byteRange.end;\n      hashShouldBe = segmentValue[range];\n    }\n    if (hashShouldBe === void 0) {\n      logger$1.clientError(`Unknown segment name ${filename}/${range} in segment validator`);\n      return false;\n    }\n    debugLogger$4(`Validating ${filename}` + (range ? ` range ${range}` : \"\"));\n    const calculatedSha = await this.sha256Hex(data);\n    if (calculatedSha !== hashShouldBe) {\n      logger$1.clientError(\n        `Hashes does not correspond for segment ${filename}/${range} (expected: ${hashShouldBe} instead of ${calculatedSha})`\n      );\n      return true;\n    }\n  }\n  destroy() {\n    this.destroyed = true;\n  }\n  loadSha256SegmentsPromiseIfNeeded() {\n    if (this.segmentJSONPromise) return;\n    this.loadSha256SegmentsPromise();\n  }\n  loadSha256SegmentsPromise() {\n    this.segmentJSONPromise = this.fetchSha256Segments();\n  }\n  fetchSha256Segments() {\n    let headers = {};\n    if (isSameOrigin(this.options.serverUrl, this.options.segmentsSha256Url)) {\n      if (this.options.requiresPassword) headers = { \"x-peertube-video-password\": this.options.videoPassword() };\n      else if (this.options.requiresUserAuth) headers = { Authorization: this.options.authorizationHeader() };\n    }\n    return fetch(this.options.segmentsSha256Url, { headers }).then((res) => res.json()).catch((err) => {\n      logger$1.clientError(\"Cannot get sha256 segments\", err);\n      return {};\n    });\n  }\n  async sha256Hex(data) {\n    if (!data) return void 0;\n    if (window.crypto.subtle) {\n      return window.crypto.subtle.digest(\"SHA-256\", data).then((data2) => this.bufferToHex(data2));\n    }\n    const shaModule = (await import(\"./index-CmBpR0aG.js\").then((n) => n.i)).default;\n    return new shaModule.sha256().update(Buffer2.from(data)).digest(\"hex\");\n  }\n  // Thanks: https://stackoverflow.com/a/53307879\n  bufferToHex(buffer2) {\n    if (!buffer2) return \"\";\n    let s = \"\";\n    const h = \"0123456789abcdef\";\n    const o = new Uint8Array(buffer2);\n    o.forEach((v) => {\n      s += h[v >> 4] + h[v & 15];\n    });\n    return s;\n  }\n}\nconst debugLogger$3 = debug$5(\"peertube:player:hls\");\nclass HLSOptionsBuilder {\n  constructor(options) {\n    this.options = options;\n  }\n  async getPluginOptions() {\n    const segmentsSha256Url = this.options.hls.segmentsSha256Url;\n    if (!segmentsSha256Url) {\n      logger$1.info(\"No segmentsSha256Url found. Disabling P2P & redundancy.\");\n    }\n    const redundancyUrlManager = segmentsSha256Url ? new RedundancyUrlManager(this.options.hls.redundancyBaseUrls) : null;\n    const segmentValidator = segmentsSha256Url ? new SegmentValidator({\n      segmentsSha256Url,\n      authorizationHeader: this.options.authorizationHeader,\n      requiresUserAuth: this.options.requiresUserAuth,\n      serverUrl: this.options.serverUrl,\n      requiresPassword: this.options.requiresPassword,\n      videoPassword: this.options.videoPassword\n    }) : null;\n    const p2pMediaLoaderConfig = await this.options.pluginsManager.runHook(\n      \"filter:internal.player.p2p-media-loader.options.result\",\n      this.getP2PMediaLoaderOptions({ redundancyUrlManager, segmentValidator })\n    );\n    const p2pMediaLoader = {\n      requiresUserAuth: this.options.requiresUserAuth,\n      videoFileToken: this.options.videoFileToken,\n      p2pEnabled: segmentsSha256Url && this.options.p2pEnabled,\n      redundancyUrlManager,\n      type: \"application/x-mpegURL\",\n      src: this.options.hls.playlistUrl,\n      segmentValidator\n    };\n    const hlsjs = {\n      hlsjsConfig: this.getHLSJSOptions(p2pMediaLoaderConfig),\n      levelLabelHandler: (level, player) => {\n        const resolution = Math.min(level.height || 0, level.width || 0);\n        const file = this.options.hls.videoFiles.find((f) => f.resolution.id === resolution);\n        const resolutionLabel = getResolutionLabel({\n          resolution,\n          height: (file == null ? void 0 : file.height) ?? level.height,\n          width: (file == null ? void 0 : file.width) ?? level.width\n        });\n        return player.localize(getResolutionAndFPSLabel(resolutionLabel, (file == null ? void 0 : file.fps) ?? level.frameRate));\n      }\n    };\n    debugLogger$3(\"Creating HLS player options\", { hlsjs, p2pMediaLoader, loaderOptions: p2pMediaLoaderConfig });\n    return { p2pMediaLoader, hlsjs };\n  }\n  // ---------------------------------------------------------------------------\n  getP2PMediaLoaderOptions(options) {\n    var _a;\n    const { redundancyUrlManager, segmentValidator } = options;\n    let isP2PUploadDisabled = false;\n    if (((_a = navigator == null ? void 0 : navigator.connection) == null ? void 0 : _a.type) === \"cellular\" || peertubeLocalStorage.getItem(\"peertube-videojs-p2p-consume-only\") === \"true\") {\n      logger$1.info(\"We are on a cellular connection: disabling seeding.\");\n      isP2PUploadDisabled = true;\n    }\n    const announceTrackers = this.options.hls.trackerAnnounce.filter((t) => t.startsWith(\"ws\"));\n    const specificLiveOrVODOptions = this.options.isLive ? this.getP2PMediaLoaderLiveOptions() : this.getP2PMediaLoaderVODOptions();\n    const loaderOptions = {\n      announceTrackers,\n      rtcConfig: getRtcConfig(this.options.stunServers),\n      httpRequestSetup: (segmentUrlArg, segmentByteRange, requestAbortSignal, requestByteRange) => {\n        const { requiresUserAuth, requiresPassword } = this.options;\n        const segmentUrl = redundancyUrlManager ? redundancyUrlManager.buildUrl(segmentUrlArg) : segmentUrlArg;\n        const headers = new Headers();\n        if (requestByteRange) {\n          headers.set(\"Range\", `bytes=${requestByteRange.start}-${requestByteRange.end ?? \"\"}`);\n        }\n        if (isSameOrigin(this.options.serverUrl, segmentUrl)) {\n          if (requiresPassword) {\n            headers.set(\"x-peertube-video-password\", this.options.videoPassword());\n          } else if (requiresUserAuth) {\n            headers.set(\"Authorization\", this.options.authorizationHeader());\n          }\n        }\n        return Promise.resolve(\n          new Request(segmentUrl, {\n            headers,\n            signal: requestAbortSignal\n          })\n        );\n      },\n      validateP2PSegment: segmentValidator ? segmentValidator.validate.bind(segmentValidator) : null,\n      validateHTTPSegment: segmentValidator ? segmentValidator.validate.bind(segmentValidator) : null,\n      isP2PDisabled: !this.options.p2pEnabled,\n      isP2PUploadDisabled,\n      swarmId: this.options.hls.playlistUrl,\n      ...specificLiveOrVODOptions\n    };\n    return { loader: loaderOptions };\n  }\n  getP2PMediaLoaderLiveOptions() {\n    const base = {\n      highDemandTimeWindow: 4\n    };\n    const latencyMode = this.options.liveOptions.latencyMode;\n    switch (latencyMode) {\n      case LiveVideoLatencyMode.SMALL_LATENCY:\n        return {\n          ...base,\n          isP2PDisabled: true\n        };\n      case LiveVideoLatencyMode.HIGH_LATENCY:\n        return base;\n      default:\n        return base;\n    }\n  }\n  getP2PMediaLoaderVODOptions() {\n    return {\n      highDemandTimeWindow: 15,\n      segmentMemoryStorageLimit: 1024\n    };\n  }\n  // ---------------------------------------------------------------------------\n  getHLSJSOptions(p2pMediaLoaderConfig) {\n    const specificLiveOrVODOptions = this.options.isLive ? this.getHLSLiveOptions() : this.getHLSVODOptions();\n    const base = {\n      capLevelToPlayerSize: true,\n      autoStartLoad: false,\n      p2pMediaLoaderOptions: p2pMediaLoaderConfig.loader,\n      // p2p-media-loader uses hls.js loader to fetch m3u8 playlists\n      xhrSetup: (xhr, url) => {\n        const { requiresUserAuth, requiresPassword } = this.options;\n        if (isSameOrigin(this.options.serverUrl, url)) {\n          if (requiresPassword) {\n            xhr.setRequestHeader(\"x-peertube-video-password\", this.options.videoPassword());\n          } else if (requiresUserAuth) {\n            xhr.setRequestHeader(\"Authorization\", this.options.authorizationHeader());\n          }\n        }\n      },\n      ...specificLiveOrVODOptions\n    };\n    const averageBandwidth = getAverageBandwidthInStore();\n    if (!averageBandwidth) return base;\n    return {\n      ...base,\n      abrEwmaDefaultEstimate: averageBandwidth * 8,\n      // We want bit/s\n      backBufferLength: 90,\n      startLevel: -1,\n      testBandwidth: false,\n      debug: false,\n      enableWorker: false\n    };\n  }\n  getHLSLiveOptions() {\n    const latencyMode = this.options.liveOptions.latencyMode;\n    switch (latencyMode) {\n      case LiveVideoLatencyMode.SMALL_LATENCY:\n        return {\n          liveSyncDurationCount: 2\n        };\n      case LiveVideoLatencyMode.HIGH_LATENCY:\n        return {\n          liveSyncDurationCount: 10\n        };\n      default:\n        return {\n          liveSyncDurationCount: 5\n        };\n    }\n  }\n  getHLSVODOptions() {\n    return {\n      liveSyncDurationCount: 5\n    };\n  }\n}\nclass WebVideoOptionsBuilder {\n  constructor(options) {\n    this.options = options;\n  }\n  getPluginOptions() {\n    var _a;\n    return {\n      videoFileToken: this.options.videoFileToken,\n      videoFiles: this.options.webVideo.videoFiles.length !== 0 ? this.options.webVideo.videoFiles : ((_a = this.options.hls) == null ? void 0 : _a.videoFiles) || []\n    };\n  }\n}\nconst ClickableComponent = videojs.getComponent(\"ClickableComponent\");\nclass PlaylistButton extends ClickableComponent {\n  // FIXME: eslint -> it's not a useless constructor, we need to extend constructor options typings\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(player, options) {\n    super(player, options);\n  }\n  createEl() {\n    this.wrapper = super.createEl(\"div\", {\n      className: \"vjs-playlist-button\",\n      tabIndex: -1\n    });\n    const icon = super.createEl(\"div\", {\n      className: \"vjs-playlist-icon\",\n      tabIndex: -1\n    });\n    this.playlistInfoElement = super.createEl(\"div\", {\n      className: \"vjs-playlist-info\",\n      tabIndex: -1\n    });\n    this.wrapper.appendChild(icon);\n    this.wrapper.appendChild(this.playlistInfoElement);\n    this.update();\n    return this.wrapper;\n  }\n  update() {\n    this.playlistInfoElement.innerText = this.options_.getCurrentPosition() + \"/\" + this.options_.playlist.videosLength;\n    this.wrapper.title = this.player().localize(\"Playlist: {1}\", [this.options_.playlist.displayName]);\n  }\n  handleClick() {\n    const playlistMenu = this.options_.playlistMenu;\n    playlistMenu.open();\n  }\n}\nvideojs.registerComponent(\"PlaylistButton\", PlaylistButton);\nconst Component$9 = videojs.getComponent(\"Component\");\nclass PlaylistMenuItem extends Component$9 {\n  constructor(player, options) {\n    super(player, options);\n    this.emitTapEvents();\n    this.element = options.element;\n    this.clickHandler = () => this.switchPlaylistItem();\n    this.keyDownHandler = (event) => this.handleKeyDown(event);\n    this.on([\"click\", \"tap\"], this.clickHandler);\n    this.on(\"keydown\", this.keyDownHandler);\n  }\n  dispose() {\n    this.off([\"click\", \"tap\"], this.clickHandler);\n    this.off(\"keydown\", this.keyDownHandler);\n    super.dispose();\n  }\n  createEl() {\n    const li = super.createEl(\"li\", {\n      className: \"vjs-playlist-menu-item\"\n    });\n    if (!this.options_.element.video) {\n      li.classList.add(\"vjs-disabled\");\n    }\n    const positionBlock = super.createEl(\"div\", {\n      className: \"item-position-block\"\n    });\n    const position = super.createEl(\"div\", {\n      className: \"item-position\",\n      innerText: this.options_.element.position\n    });\n    positionBlock.appendChild(position);\n    li.appendChild(positionBlock);\n    if (this.options_.element.video) {\n      this.buildAvailableVideo(li, positionBlock, this.options_);\n    } else {\n      this.buildUnavailableVideo(li);\n    }\n    return li;\n  }\n  setSelected(selected) {\n    if (selected) this.addClass(\"vjs-selected\");\n    else this.removeClass(\"vjs-selected\");\n  }\n  getElement() {\n    return this.element;\n  }\n  buildAvailableVideo(li, positionBlock, options) {\n    const videoElement = options.element;\n    const player = super.createEl(\"div\", {\n      className: \"item-player\"\n    });\n    positionBlock.appendChild(player);\n    const thumbnail = super.createEl(\"img\", {\n      src: window.location.origin + videoElement.video.thumbnailPath\n    });\n    const infoBlock = super.createEl(\"div\", {\n      className: \"info-block\"\n    });\n    const title = super.createEl(\"div\", {\n      innerText: videoElement.video.name,\n      className: \"title\"\n    });\n    const channel = super.createEl(\"div\", {\n      innerText: videoElement.video.channel.displayName,\n      className: \"channel\"\n    });\n    infoBlock.appendChild(title);\n    infoBlock.appendChild(channel);\n    if (videoElement.startTimestamp || videoElement.stopTimestamp) {\n      let html = \"\";\n      if (videoElement.startTimestamp) html += secondsToTime(videoElement.startTimestamp);\n      if (videoElement.stopTimestamp) html += \" - \" + secondsToTime(videoElement.stopTimestamp);\n      const timestamps = super.createEl(\"div\", {\n        innerText: html,\n        className: \"timestamps\"\n      });\n      infoBlock.append(timestamps);\n    }\n    li.append(thumbnail);\n    li.append(infoBlock);\n  }\n  buildUnavailableVideo(li) {\n    const block = super.createEl(\"div\", {\n      className: \"item-unavailable\",\n      innerText: this.player().localize(\"Unavailable video\")\n    });\n    li.appendChild(block);\n  }\n  handleKeyDown(event) {\n    if (event.code === \"Space\" || event.code === \"Enter\") {\n      this.switchPlaylistItem();\n    }\n  }\n  switchPlaylistItem() {\n    this.options_.onClicked();\n  }\n}\nComponent$9.registerComponent(\"PlaylistMenuItem\", PlaylistMenuItem);\nconst Component$8 = videojs.getComponent(\"Component\");\nclass PlaylistMenu extends Component$8 {\n  constructor(player, options) {\n    super(player, options);\n    this.menuItems = [];\n    this.userInactiveHandler = () => {\n      this.close();\n    };\n    this.onMouseEnter = () => {\n      this.player().off(\"userinactive\", this.userInactiveHandler);\n    };\n    this.onMouseLeave = () => {\n      this.player().one(\"userinactive\", this.userInactiveHandler);\n    };\n    this.onPlayerCick = (event) => {\n      let current = event.target;\n      do {\n        if (current.classList.contains(\"vjs-playlist-menu\") || current.classList.contains(\"vjs-playlist-button\")) {\n          return;\n        }\n        current = current.parentElement;\n      } while (current);\n      this.close();\n    };\n    this.el().addEventListener(\"mouseenter\", this.onMouseEnter);\n    this.el().addEventListener(\"mouseleave\", this.onMouseLeave);\n    this.player().on(\"click\", this.onPlayerCick);\n  }\n  dispose() {\n    this.el().removeEventListener(\"mouseenter\", this.onMouseEnter);\n    this.el().removeEventListener(\"mouseleave\", this.onMouseLeave);\n    this.player().off(\"userinactive\", this.userInactiveHandler);\n    this.player().off(\"click\", this.onPlayerCick);\n    for (const item of this.menuItems) {\n      item.dispose();\n    }\n    super.dispose();\n  }\n  createEl() {\n    this.menuItems = [];\n    const menu = super.createEl(\"div\", {\n      className: \"vjs-playlist-menu\",\n      tabIndex: -1\n    });\n    const header = super.createEl(\"div\", {\n      className: \"header\"\n    });\n    const headerLeft = super.createEl(\"div\");\n    const leftTitle = super.createEl(\"div\", {\n      innerText: this.options_.playlist.displayName,\n      className: \"title\"\n    });\n    const playlistChannel = this.options_.playlist.videoChannel;\n    const leftSubtitle = super.createEl(\"div\", {\n      innerText: playlistChannel ? this.player().localize(\"By {1}\", [playlistChannel.displayName]) : \"\",\n      className: \"channel\"\n    });\n    headerLeft.appendChild(leftTitle);\n    headerLeft.appendChild(leftSubtitle);\n    const tick = super.createEl(\"div\", {\n      className: \"cross\"\n    });\n    tick.addEventListener(\"click\", () => this.close());\n    header.appendChild(headerLeft);\n    header.appendChild(tick);\n    const list = super.createEl(\"ol\");\n    for (const playlistElement of this.options_.elements) {\n      const item = new PlaylistMenuItem(this.player(), {\n        element: playlistElement,\n        onClicked: () => this.onItemClicked(playlistElement)\n      });\n      list.appendChild(item.el());\n      this.menuItems.push(item);\n    }\n    menu.appendChild(header);\n    menu.appendChild(list);\n    this.update();\n    return menu;\n  }\n  update() {\n    this.updateSelected(this.options_.getCurrentPosition());\n  }\n  open() {\n    this.player().addClass(\"playlist-menu-displayed\");\n  }\n  close() {\n    this.player().removeClass(\"playlist-menu-displayed\");\n  }\n  updateSelected(newPosition) {\n    for (const item of this.menuItems) {\n      item.setSelected(item.getElement().position === newPosition);\n    }\n  }\n  onItemClicked(element) {\n    this.options_.onItemClicked(element);\n  }\n}\nComponent$8.registerComponent(\"PlaylistMenu\", PlaylistMenu);\nconst Plugin$4 = videojs.getPlugin(\"plugin\");\nclass PlaylistPlugin extends Plugin$4 {\n  constructor(player, options) {\n    super(player, options);\n    this.player.addClass(\"vjs-playlist\");\n    this.playlistMenu = new PlaylistMenu(player, options);\n    this.playlistButton = new PlaylistButton(player, { ...options, playlistMenu: this.playlistMenu });\n    player.addChild(this.playlistMenu, options);\n    player.addChild(this.playlistButton, options);\n  }\n  dispose() {\n    this.player.removeClass(\"vjs-playlist\");\n    this.playlistMenu.dispose();\n    this.playlistButton.dispose();\n    this.player.removeChild(this.playlistMenu);\n    this.player.removeChild(this.playlistButton);\n    super.dispose();\n  }\n}\nvideojs.registerPlugin(\"playlist\", PlaylistPlugin);\nconst Plugin$3 = videojs.getPlugin(\"plugin\");\nclass PeerTubeResolutionsPlugin extends Plugin$3 {\n  constructor(player) {\n    super(player);\n    this.resolutions = [];\n    player.on(\"video-change\", () => {\n      this.resolutions = [];\n      this.trigger(\"resolutions-removed\");\n    });\n  }\n  add(resolutions) {\n    for (const r of resolutions) {\n      this.resolutions.push(r);\n    }\n    this.currentSelection = this.getSelected();\n    this.sort();\n    this.trigger(\"resolutions-added\");\n  }\n  remove(resolutionIndex) {\n    this.resolutions = this.resolutions.filter((r) => r.id !== resolutionIndex);\n    this.trigger(\"resolutions-removed\");\n  }\n  getResolutions() {\n    return this.resolutions;\n  }\n  getSelected() {\n    return this.resolutions.find((r) => r.selected);\n  }\n  getAutoResolutionChosen() {\n    return this.resolutions.find((r) => r.id === this.autoResolutionChosenId);\n  }\n  select(options) {\n    var _a;\n    const { id, autoResolutionChosenId, fireCallback } = options;\n    if (((_a = this.currentSelection) == null ? void 0 : _a.id) === id && this.autoResolutionChosenId === autoResolutionChosenId) return;\n    if (autoResolutionChosenId !== void 0) {\n      this.autoResolutionChosenId = autoResolutionChosenId;\n    }\n    for (const r of this.resolutions) {\n      r.selected = r.id === id;\n      if (r.selected) {\n        this.currentSelection = r;\n        if (fireCallback) r.selectCallback();\n      }\n    }\n    this.trigger(\"resolutions-changed\");\n  }\n  sort() {\n    this.resolutions.sort((a, b) => {\n      if (a.id === -1) return 1;\n      if (b.id === -1) return -1;\n      if (a.height > b.height) return -1;\n      if (a.height === b.height) return 0;\n      return 1;\n    });\n  }\n}\nvideojs.registerPlugin(\"peertubeResolutions\", PeerTubeResolutionsPlugin);\nconst Menu$1 = videojs.getComponent(\"Menu\");\nconst Component$7 = videojs.getComponent(\"Component\");\nclass MenuFocusFixed extends Menu$1 {\n  stepForward() {\n    let stepChild = 0;\n    if (this.focusedChild_ !== void 0) {\n      stepChild = this.focusedChild_ + 1;\n    }\n    this.focus(stepChild);\n  }\n  stepBack() {\n    let stepChild = 0;\n    if (this.focusedChild_ !== void 0) {\n      stepChild = this.focusedChild_ - 1;\n    }\n    this.focus(stepChild);\n  }\n  focus(item) {\n    if (item === void 0) {\n      this.focusedChild_ = -1;\n      item = 0;\n    }\n    this._focus(item);\n  }\n  _focus(item) {\n    const children = this.children().slice();\n    const haveTitle = children.length && children[0].hasClass(\"vjs-menu-title\");\n    if (haveTitle) {\n      children.shift();\n    }\n    if (children.length > 0) {\n      if (item < 0) {\n        item = 0;\n      } else if (item >= children.length) {\n        item = children.length - 1;\n      }\n      const el = children[item].el();\n      if (el.classList.contains(\"vjs-hidden\")) {\n        if (this.focusedChild_ < item) {\n          if (item === children.length - 1) return;\n          return this.focus(item + 1);\n        } else {\n          if (item === 0) return;\n          return this.focus(item - 1);\n        }\n      }\n      this.focusedChild_ = item;\n      el.focus();\n    }\n  }\n}\nComponent$7.registerComponent(\"MenuFocusFixed\", MenuFocusFixed);\nconst MenuItem$1 = videojs.getComponent(\"MenuItem\");\nclass ResolutionMenuItem extends MenuItem$1 {\n  constructor(player, options) {\n    super(player, { ...options, selectable: true });\n    this.autoResolutionChosen = \"\";\n    this.resolutionId = options.resolutionId;\n    this.label = options.label;\n    this.updateSelectionHandler = () => this.updateSelection();\n    player.peertubeResolutions().on(\"resolutions-changed\", this.updateSelectionHandler);\n  }\n  dispose() {\n    this.player().peertubeResolutions().off(\"resolutions-changed\", this.updateSelectionHandler);\n    super.dispose();\n  }\n  handleClick(event) {\n    super.handleClick(event);\n    this.player().peertubeResolutions().select({ id: this.resolutionId, fireCallback: true });\n  }\n  updateSelection() {\n    var _a;\n    const selectedResolution = this.player().peertubeResolutions().getSelected();\n    if (this.resolutionId === -1) {\n      this.autoResolutionChosen = (_a = this.player().peertubeResolutions().getAutoResolutionChosen()) == null ? void 0 : _a.label;\n    }\n    this.selected(this.resolutionId === selectedResolution.id);\n  }\n  getLabel() {\n    if (this.resolutionId === -1) {\n      return this.label + \" <small>\" + this.autoResolutionChosen + \"</small>\";\n    }\n    return this.label;\n  }\n}\nvideojs.registerComponent(\"ResolutionMenuItem\", ResolutionMenuItem);\nconst Menu = videojs.getComponent(\"Menu\");\nconst MenuButton = videojs.getComponent(\"MenuButton\");\nclass ResolutionMenuButton extends MenuButton {\n  constructor(player, options) {\n    super(player, options);\n    this.controlText(\"Quality\");\n    player.peertubeResolutions().on(\"resolutions-added\", () => this.update());\n    player.peertubeResolutions().on(\"resolutions-removed\", () => this.update());\n    player.peertubeResolutions().on(\"resolutions-changed\", () => {\n      setTimeout(() => this.trigger(\"label-updated\"));\n    });\n  }\n  createEl() {\n    const el = super.createEl();\n    this.labelEl_ = videojs.dom.createEl(\"div\", {\n      className: \"vjs-resolution-value\"\n    });\n    el.appendChild(this.labelEl_);\n    return el;\n  }\n  updateARIAAttributes() {\n    this.el().setAttribute(\"aria-label\", \"Quality\");\n  }\n  createMenu() {\n    const menu = new Menu(this.player_, { menuButton: this });\n    const resolutions = this.player().peertubeResolutions().getResolutions();\n    for (const r of resolutions) {\n      const label = r.label === \"0p\" ? this.player().localize(\"Audio only\") : r.label;\n      const component = new ResolutionMenuItem(\n        this.player_,\n        {\n          id: r.id + \"\",\n          resolutionId: r.id,\n          label,\n          selected: r.selected\n        }\n      );\n      menu.addItem(component);\n    }\n    return menu;\n  }\n  update() {\n    super.update();\n    this.trigger(\"resolution-menu-changed\");\n  }\n  buildCSSClass() {\n    return \"vjs-resolution-button \" + super.buildCSSClass();\n  }\n  buildWrapperCSSClass() {\n    return \"vjs-resolution-control \" + super.buildWrapperCSSClass();\n  }\n}\nvideojs.registerComponent(\"ResolutionMenuButton\", ResolutionMenuButton);\nconst Component$6 = videojs.getComponent(\"Component\");\nclass SettingsDialog extends Component$6 {\n  constructor(player) {\n    super(player);\n    this.hide();\n  }\n  /**\n   * Create the component's DOM element\n   */\n  createEl() {\n    const uniqueId = this.player().id();\n    const dialogLabelId = \"TTsettingsDialogLabel-\" + uniqueId;\n    const dialogDescriptionId = \"TTsettingsDialogDescription-\" + uniqueId;\n    return super.createEl(\"div\", {\n      className: \"vjs-settings-dialog vjs-modal-overlay\",\n      id: \"vjs-settings-dialog-\" + uniqueId,\n      tabIndex: -1\n    }, {\n      \"role\": \"dialog\",\n      \"aria-labelledby\": dialogLabelId,\n      \"aria-describedby\": dialogDescriptionId\n    });\n  }\n  show() {\n    this.player().addClass(\"vjs-settings-dialog-opened\");\n    super.show();\n  }\n  hide() {\n    this.player().removeClass(\"vjs-settings-dialog-opened\");\n    super.hide();\n  }\n}\nComponent$6.registerComponent(\"SettingsDialog\", SettingsDialog);\nconst debugLogger$2 = debug$5(\"peertube:player:settings\");\nconst MenuItem = videojs.getComponent(\"MenuItem\");\nconst Component$5 = videojs.getComponent(\"Component\");\nclass SettingsMenuItem extends MenuItem {\n  constructor(player, options) {\n    super(player, options);\n    this.settingsButton = options.menuButton;\n    this.dialog = this.settingsButton.dialog;\n    this.mainMenu = this.settingsButton.menu;\n    this.panel = this.dialog.getChild(\"settingsPanel\");\n    this.panelChild = this.panel.getChild(\"settingsPanelChild\");\n    this.panelChildEl = this.panelChild.el();\n    this.size = null;\n    this.menuToLoad = \"mainmenu\";\n    const subMenuName = toTitleCase(options.entry);\n    const SubMenuComponent = videojs.getComponent(subMenuName);\n    if (!SubMenuComponent) {\n      throw new Error(`Component ${subMenuName} does not exist`);\n    }\n    const newOptions = Object.assign({}, options, { entry: options.menuButton, menuButton: this });\n    this.subMenu = new SubMenuComponent(this.player(), newOptions);\n    const subMenuClass = this.subMenu.buildCSSClass().split(\" \")[0];\n    this.settingsSubMenuEl_.className += \" \" + subMenuClass;\n    this.eventHandlers();\n    player.ready(() => {\n      setTimeout(() => {\n        if (!this.player_) return;\n        this.build();\n        if (subMenuName === \"PlaybackRateMenuButton\") {\n          player.on(\"ratechange\", this.submenuClickHandler);\n          player.on(\"playbackrateschange\", () => {\n            setTimeout(() => this.rebuildAfterMenuChange());\n          });\n        }\n        if (subMenuName === \"CaptionsButton\") {\n          player.on(\"captions-changed\", () => {\n            setTimeout(() => this.rebuildAfterMenuChange());\n          });\n          player.on(\"texttrackchange\", this.submenuClickHandler);\n        }\n        if (subMenuName === \"ResolutionMenuButton\") {\n          this.subMenu.on(\"resolution-menu-changed\", () => {\n            this.rebuildAfterMenuChange();\n          });\n        }\n        this.reset();\n      }, 0);\n    });\n  }\n  dispose() {\n    this.settingsSubMenuEl_.removeEventListener(\"transitionend\", this.transitionEndHandler);\n    super.dispose();\n  }\n  eventHandlers() {\n    this.submenuClickHandler = this.onSubmenuClick.bind(this);\n    this.transitionEndHandler = this.onTransitionEnd.bind(this);\n  }\n  onSubmenuClick(event) {\n    let target = null;\n    if (event.type === \"tap\") {\n      target = event.target;\n    } else {\n      target = event.currentTarget || event.target;\n    }\n    if (target == null ? void 0 : target.classList.contains(\"vjs-back-button\")) {\n      this.loadMainMenu();\n      return;\n    }\n    setTimeout(() => this.update(event), 0);\n    this.subMenu.menu.removeClass(\"vjs-hidden\");\n  }\n  /**\n   * Create the component's DOM element\n   */\n  createEl() {\n    const el = videojs.dom.createEl(\"li\", {\n      className: \"vjs-menu-item\",\n      tabIndex: 0\n    });\n    this.settingsSubMenuTitleEl_ = videojs.dom.createEl(\"div\", {\n      className: \"vjs-settings-sub-menu-title\"\n    });\n    el.appendChild(this.settingsSubMenuTitleEl_);\n    this.settingsSubMenuValueEl_ = videojs.dom.createEl(\"div\", {\n      className: \"vjs-settings-sub-menu-value\"\n    });\n    el.appendChild(this.settingsSubMenuValueEl_);\n    this.settingsSubMenuEl_ = videojs.dom.createEl(\"div\", {\n      className: \"vjs-settings-sub-menu\"\n    });\n    return el;\n  }\n  /**\n   * Handle click on menu item\n   *\n   * @method handleClick\n   */\n  handleClick(event) {\n    this.menuToLoad = \"submenu\";\n    videojs.dom.removeClass(this.el(), \"open\");\n    super.handleClick(event);\n    this.mainMenu.el().style.opacity = \"0\";\n    if (videojs.dom.hasClass(this.settingsSubMenuEl_, \"vjs-hidden\")) {\n      videojs.dom.removeClass(this.settingsSubMenuEl_, \"vjs-hidden\");\n      setTimeout(() => {\n        this.settingsSubMenuEl_.style.opacity = \"1\";\n        this.settingsSubMenuEl_.style.marginRight = \"0px\";\n      }, 0);\n      this.settingsButton.setDialogSize(this.size);\n      this.subMenu.menu.focus();\n    } else {\n      videojs.dom.addClass(this.settingsSubMenuEl_, \"vjs-hidden\");\n    }\n  }\n  /**\n   * Create back button\n   *\n   * @method createBackButton\n   */\n  createBackButton() {\n    const button = this.subMenu.menu.addChild(\"MenuItem\", {}, 0);\n    button.setAttribute(\"aria-label\", this.player().localize(\"Go back\"));\n    button.addClass(\"vjs-back-button\");\n    button.el().innerHTML = this.player().localize(this.subMenu.controlText());\n  }\n  onTransitionEnd(event) {\n    if (event.propertyName !== \"margin-right\") {\n      return;\n    }\n    if (this.menuToLoad === \"mainmenu\") {\n      videojs.dom.addClass(this.settingsSubMenuEl_, \"vjs-hidden\");\n      this.settingsSubMenuEl_.style.opacity = \"0\";\n    }\n  }\n  reset() {\n    videojs.dom.addClass(this.settingsSubMenuEl_, \"vjs-hidden\");\n    this.settingsSubMenuEl_.style.opacity = \"0\";\n    this.setMargin();\n  }\n  loadMainMenu() {\n    const mainMenuEl = this.mainMenu.el();\n    this.menuToLoad = \"mainmenu\";\n    this.mainMenu.show();\n    mainMenuEl.style.opacity = \"0\";\n    const mainMenuAny = this.mainMenu;\n    this.settingsButton.setDialogSize([mainMenuAny.width(), mainMenuAny.height()]);\n    setTimeout(() => {\n      this.setMargin();\n      mainMenuEl.style.opacity = \"1\";\n      this.mainMenu.focus();\n    }, 0);\n  }\n  build() {\n    this.subMenu.on(\"label-updated\", () => {\n      this.update();\n    });\n    this.settingsSubMenuTitleEl_.innerHTML = this.player().localize(this.subMenu.controlText());\n    this.settingsSubMenuEl_.appendChild(this.subMenu.menu.el());\n    this.panelChildEl.appendChild(this.settingsSubMenuEl_);\n    this.update();\n    this.createBackButton();\n    this.setSize();\n    this.bindClickEvents();\n    this.bindKeyEvents();\n    this.settingsSubMenuEl_.addEventListener(\"transitionend\", this.transitionEndHandler, false);\n  }\n  update(event) {\n    if (this.subMenu.name() === \"PlaybackRateMenuButton\") {\n      this.settingsSubMenuValueEl_.innerHTML = this.subMenu.labelEl_.textContent;\n    } else {\n      for (const subMenuItem of this.subMenu.menu.children_) {\n        if (!(subMenuItem instanceof MenuItem)) {\n          continue;\n        }\n        const subMenuItemExtended = subMenuItem;\n        if (subMenuItemExtended.isSelected_) {\n          if (typeof subMenuItemExtended.getLabel === \"function\") {\n            this.settingsSubMenuValueEl_.innerHTML = subMenuItemExtended.getLabel();\n            break;\n          }\n          this.settingsSubMenuValueEl_.innerHTML = this.player().localize(subMenuItemExtended.options_.label);\n        }\n      }\n    }\n    let target = null;\n    if (event && event.type === \"tap\") {\n      target = event.target;\n    } else if (event) {\n      target = event.currentTarget;\n    }\n    if (target && !target.classList.contains(\"vjs-back-button\")) {\n      this.settingsButton.hideDialog();\n    }\n  }\n  bindClickEvents() {\n    for (const item of this.subMenu.menu.children()) {\n      if (!(item instanceof Component$5)) continue;\n      item.on([\"tap\", \"click\"], this.submenuClickHandler);\n    }\n  }\n  bindKeyEvents() {\n    this.subMenu.menu.on(\"escaped-key\", () => {\n      this.trigger(\"escaped-key\");\n    });\n    this.subMenu.menu.on(\"arrow-left\", () => {\n      debugLogger$2(\"Detected arrow left on sub menu \" + this.subMenu.name());\n      this.loadMainMenu();\n    });\n  }\n  // save size of submenus on first init\n  // if number of submenu items change dynamically more logic will be needed\n  setSize() {\n    this.dialog.removeClass(\"vjs-hidden\");\n    videojs.dom.removeClass(this.settingsSubMenuEl_, \"vjs-hidden\");\n    this.size = this.settingsButton.getComponentSize(this.settingsSubMenuEl_);\n    this.setMargin();\n    this.dialog.addClass(\"vjs-hidden\");\n    videojs.dom.addClass(this.settingsSubMenuEl_, \"vjs-hidden\");\n  }\n  setMargin() {\n    if (!this.size) return;\n    const [width] = this.size;\n    this.settingsSubMenuEl_.style.marginRight = `-${width}px`;\n  }\n  /**\n   * Hide the sub menu\n   */\n  hideSubMenu() {\n    if (!this.el()) {\n      return;\n    }\n    if (videojs.dom.hasClass(this.el(), \"open\")) {\n      videojs.dom.addClass(this.settingsSubMenuEl_, \"vjs-hidden\");\n      videojs.dom.removeClass(this.el(), \"open\");\n    }\n  }\n  rebuildAfterMenuChange() {\n    debugLogger$2(\"Rebuilding menu \" + this.subMenu.name() + \" after change\");\n    this.settingsSubMenuEl_.innerHTML = \"\";\n    this.settingsSubMenuEl_.appendChild(this.subMenu.menu.el());\n    this.update();\n    this.createBackButton();\n    this.setSize();\n    this.bindClickEvents();\n    this.bindKeyEvents();\n  }\n}\nSettingsMenuItem.prototype.contentElType = \"button\";\nvideojs.registerComponent(\"SettingsMenuItem\", SettingsMenuItem);\nconst debugLogger$1 = debug$5(\"peertube:player:settings\");\nconst Button = videojs.getComponent(\"Button\");\nconst Component$4 = videojs.getComponent(\"Component\");\nclass SettingsButton extends Button {\n  constructor(player, options) {\n    super(player, options);\n    this.settingsButtonOptions = options;\n    this.controlText(\"Settings\");\n    this.dialog = this.player().addChild(\"settingsDialog\");\n    this.dialogEl = this.dialog.el();\n    this.menu = null;\n    this.panel = this.dialog.addChild(\"settingsPanel\");\n    this.panelChild = this.panel.addChild(\"settingsPanelChild\");\n    this.addClass(\"vjs-settings\");\n    this.setAttribute(\"aria-controls\", \"vjs-settings-dialog-\" + this.player().id());\n    this.addSettingsItemHandler = this.onAddSettingsItem.bind(this);\n    this.disposeSettingsItemHandler = this.onDisposeSettingsItem.bind(this);\n    this.documentClickHandler = this.onDocumentClick.bind(this);\n    this.userInactiveHandler = this.onUserInactive.bind(this);\n    this.buildMenu();\n    this.bindEvents();\n    this.player().one(\"play\", () => this.hideDialog());\n  }\n  onDocumentClick(event) {\n    var _a, _b, _c;\n    const element = event.target;\n    if (((_a = element == null ? void 0 : element.classList) == null ? void 0 : _a.contains(\"vjs-settings\")) || ((_c = (_b = element == null ? void 0 : element.parentElement) == null ? void 0 : _b.classList) == null ? void 0 : _c.contains(\"vjs-settings\"))) {\n      return;\n    }\n    if (!this.dialog.hasClass(\"vjs-hidden\")) {\n      this.hideDialog();\n    }\n  }\n  onDisposeSettingsItem(_event, name) {\n    if (name === void 0) {\n      const children = this.menu.children();\n      while (children.length > 0) {\n        children[0].dispose();\n        this.menu.removeChild(children[0]);\n      }\n      this.addClass(\"vjs-hidden\");\n    } else {\n      const item = this.menu.getChild(name);\n      if (item) {\n        item.dispose();\n        this.menu.removeChild(item);\n      }\n    }\n    this.hideDialog();\n    if (this.settingsButtonOptions.entries.length === 0) {\n      this.addClass(\"vjs-hidden\");\n    }\n  }\n  dispose() {\n    document.removeEventListener(\"click\", this.documentClickHandler);\n    if (this.isInIframe()) {\n      window.removeEventListener(\"blur\", this.documentClickHandler);\n    }\n    super.dispose();\n  }\n  onAddSettingsItem(event, data) {\n    const [entry, options] = data;\n    this.addMenuItem(entry, options);\n    this.removeClass(\"vjs-hidden\");\n  }\n  onUserInactive() {\n    if (!this.dialog.hasClass(\"vjs-hidden\")) {\n      this.hideDialog();\n    }\n  }\n  bindEvents() {\n    document.addEventListener(\"click\", this.documentClickHandler);\n    if (this.isInIframe()) {\n      window.addEventListener(\"blur\", this.documentClickHandler);\n    }\n    this.player().on(\"addsettingsitem\", this.addSettingsItemHandler);\n    this.player().on(\"disposesettingsitem\", this.disposeSettingsItemHandler);\n    this.player().on(\"userinactive\", this.userInactiveHandler);\n  }\n  buildCSSClass() {\n    return `vjs-icon-settings ${super.buildCSSClass()}`;\n  }\n  handleClick() {\n    if (this.dialog.hasClass(\"vjs-hidden\")) {\n      this.showDialog();\n    } else {\n      this.hideDialog();\n    }\n  }\n  showDialog() {\n    this.player().peertube().onMenuOpened();\n    this.menu.el().style.opacity = \"1\";\n    this.dialog.show();\n    this.el().setAttribute(\"aria-expanded\", \"true\");\n    this.setDialogSize(this.getComponentSize(this.menu));\n    this.menu.focus();\n  }\n  hideDialog() {\n    this.player_.peertube().onMenuClosed();\n    this.dialog.hide();\n    this.el().setAttribute(\"aria-expanded\", \"false\");\n    this.setDialogSize(this.getComponentSize(this.menu));\n    this.menu.el().style.opacity = \"1\";\n    this.resetChildren();\n  }\n  getComponentSize(element) {\n    let width = null;\n    let height = null;\n    if (element instanceof Component$4) {\n      const el = element.el();\n      width = el.offsetWidth;\n      height = el.offsetHeight;\n    } else {\n      width = element.offsetWidth;\n      height = element.offsetHeight;\n    }\n    return [width, height];\n  }\n  setDialogSize([width, height]) {\n    if (typeof height !== \"number\") {\n      return;\n    }\n    const offset = this.settingsButtonOptions.setup.maxHeightOffset;\n    const maxHeight = this.player().el().offsetHeight - offset;\n    const panelEl = this.panel.el();\n    if (height > maxHeight) {\n      height = maxHeight;\n      width += 15;\n      panelEl.style.maxHeight = `${height}px`;\n    } else if (panelEl.style.maxHeight !== \"\") {\n      panelEl.style.maxHeight = \"\";\n    }\n    this.dialogEl.style.width = `${width}px`;\n    this.dialogEl.style.height = `${height}px`;\n  }\n  buildMenu() {\n    this.menu = new MenuFocusFixed(this.player());\n    this.menu.on(\"escaped-key\", () => {\n      this.hideDialog();\n      this.focus();\n    });\n    this.menu.on(\"arrow-right\", (_, el) => {\n      debugLogger$1(\"Detected arrow right on menu item\", el);\n      el.click();\n    });\n    this.menu.addClass(\"vjs-main-menu\");\n    const entries = this.settingsButtonOptions.entries;\n    if (entries.length === 0) {\n      this.addClass(\"vjs-hidden\");\n      this.panelChild.addChild(this.menu);\n      return;\n    }\n    for (const entry of entries) {\n      this.addMenuItem(entry, this.settingsButtonOptions);\n    }\n    this.panelChild.addChild(this.menu);\n  }\n  addMenuItem(entry, options) {\n    const openSubMenu = function() {\n      if (videojs.dom.hasClass(this.el_, \"open\")) {\n        videojs.dom.removeClass(this.el_, \"open\");\n      } else {\n        videojs.dom.addClass(this.el_, \"open\");\n      }\n    };\n    options.name = toTitleCase(entry);\n    const newOptions = Object.assign({}, options, { entry, menuButton: this });\n    const settingsMenuItem = new SettingsMenuItem(this.player(), newOptions);\n    this.menu.addChild(settingsMenuItem);\n    settingsMenuItem.on(\"click\", videojs.bind(this, this.hideChildren));\n    settingsMenuItem.on(\"click\", openSubMenu);\n    settingsMenuItem.on(\"escaped-key\", () => {\n      this.hideDialog();\n      this.focus();\n    });\n  }\n  resetChildren() {\n    for (const menuChild of this.menu.children()) {\n      menuChild.reset();\n    }\n  }\n  /**\n   * Hide all the sub menus\n   */\n  hideChildren() {\n    for (const menuChild of this.menu.children()) {\n      menuChild.hideSubMenu();\n    }\n  }\n  isInIframe() {\n    return window.self !== window.top;\n  }\n}\nComponent$4.registerComponent(\"SettingsButton\", SettingsButton);\nconst Component$3 = videojs.getComponent(\"Component\");\nclass SettingsPanel extends Component$3 {\n  createEl() {\n    return super.createEl(\"div\", {\n      className: \"vjs-settings-panel\",\n      tabIndex: -1\n    });\n  }\n}\nComponent$3.registerComponent(\"SettingsPanel\", SettingsPanel);\nconst Component$2 = videojs.getComponent(\"Component\");\nclass SettingsPanelChild extends Component$2 {\n  createEl() {\n    return super.createEl(\"div\", {\n      className: \"vjs-settings-panel-child\",\n      tabIndex: -1\n    });\n  }\n}\nComponent$2.registerComponent(\"SettingsPanelChild\", SettingsPanelChild);\nconst Component$1 = videojs.getComponent(\"Component\");\nclass StatsCard extends Component$1 {\n  constructor(player, options) {\n    super(player, options);\n    this.metadataStore = {};\n    this.intervalMs = 300;\n    this.playerNetworkInfo = {};\n  }\n  createEl() {\n    this.containerEl = videojs.dom.createEl(\"div\", {\n      className: \"vjs-stats-content\"\n    });\n    this.containerEl.style.display = \"none\";\n    this.infoListEl = videojs.dom.createEl(\"div\", {\n      className: \"vjs-stats-list\"\n    });\n    const closeButton = videojs.dom.createEl(\"button\", {\n      className: \"vjs-stats-close\",\n      tabindex: \"0\",\n      title: \"Close stats\",\n      innerText: \"[x]\"\n    }, { \"aria-label\": \"Close stats\" });\n    closeButton.onclick = () => this.hide();\n    this.containerEl.appendChild(closeButton);\n    this.containerEl.appendChild(this.infoListEl);\n    this.populateInfoBlocks();\n    this.onNetworkInfoHandler = (_event, data) => {\n      this.mode = data.source;\n      const p2pStats = data.p2p;\n      const httpStats = data.http;\n      this.playerNetworkInfo.downloadSpeed = bytes(((p2pStats == null ? void 0 : p2pStats.downloadSpeed) || 0) + (httpStats.downloadSpeed || 0)).join(\" \");\n      this.playerNetworkInfo.uploadSpeed = bytes((p2pStats == null ? void 0 : p2pStats.uploadSpeed) || 0).join(\" \");\n      this.playerNetworkInfo.totalDownloaded = bytes(((p2pStats == null ? void 0 : p2pStats.downloaded) || 0) + httpStats.downloaded).join(\" \");\n      this.playerNetworkInfo.totalUploaded = bytes((p2pStats == null ? void 0 : p2pStats.uploaded) || 0).join(\" \");\n      this.playerNetworkInfo.numPeers = p2pStats == null ? void 0 : p2pStats.peersWithWebSeed;\n      if (data.source === \"p2p-media-loader\") {\n        this.playerNetworkInfo.averageBandwidth = bytes(data.bandwidthEstimate).join(\" \") + \"/s\";\n        this.playerNetworkInfo.downloadedFromServer = bytes(httpStats.downloaded).join(\" \");\n        this.playerNetworkInfo.downloadedFromPeers = bytes((p2pStats == null ? void 0 : p2pStats.downloaded) || 0).join(\" \");\n      }\n    };\n    this.player().on(\"network-info\", this.onNetworkInfoHandler);\n    return this.containerEl;\n  }\n  dispose() {\n    if (this.updateInterval) clearInterval(this.updateInterval);\n    this.player().off(\"network-info\", this.onNetworkInfoHandler);\n    super.dispose();\n  }\n  toggle() {\n    if (this.updateInterval) this.hide();\n    else this.show();\n  }\n  show() {\n    this.containerEl.style.display = \"block\";\n    this.updateInterval = setInterval(async () => {\n      if (!this.mode) return;\n      try {\n        const options = this.mode === \"p2p-media-loader\" ? this.buildHLSOptions() : await this.buildWebVideoOptions();\n        this.populateInfoValues(options);\n      } catch (err) {\n        logger$1.error(\"Cannot update stats.\", err);\n        clearInterval(this.updateInterval);\n      }\n    }, this.intervalMs);\n  }\n  hide() {\n    clearInterval(this.updateInterval);\n    this.containerEl.style.display = \"none\";\n  }\n  buildHLSOptions() {\n    const p2pMediaLoader = this.player_.p2pMediaLoader();\n    const level = p2pMediaLoader.getCurrentLevel();\n    const codecs = (level == null ? void 0 : level.videoCodec) || (level == null ? void 0 : level.audioCodec) ? `${(level == null ? void 0 : level.videoCodec) || \"\"} / ${(level == null ? void 0 : level.audioCodec) || \"\"}` : void 0;\n    const resolution = (level == null ? void 0 : level.height) ? `${level.height}p${(level == null ? void 0 : level.attrs[\"FRAME-RATE\"]) || \"\"}` : void 0;\n    const buffer2 = this.timeRangesToString(this.player().buffered());\n    let progress;\n    let latency;\n    let latencyFromEdge;\n    if (this.options_.videoIsLive) {\n      latency = secondsToTime(p2pMediaLoader.getLiveLatency());\n      latencyFromEdge = secondsToTime(p2pMediaLoader.getLiveLatencyFromEdge());\n    } else {\n      progress = this.player().bufferedPercent();\n    }\n    return {\n      playerNetworkInfo: this.playerNetworkInfo,\n      resolution,\n      codecs,\n      buffer: buffer2,\n      latency,\n      latencyFromEdge,\n      progress\n    };\n  }\n  async buildWebVideoOptions() {\n    var _a;\n    const videoFile = this.player_.webVideo().getCurrentVideoFile();\n    if (!this.metadataStore[videoFile.fileUrl]) {\n      this.metadataStore[videoFile.fileUrl] = await fetch(videoFile.metadataUrl).then((res) => res.json());\n    }\n    const metadata = this.metadataStore[videoFile.fileUrl];\n    let colorSpace = \"unknown\";\n    let codecs = \"unknown\";\n    if ((_a = metadata == null ? void 0 : metadata.streams) == null ? void 0 : _a[0]) {\n      const stream = metadata.streams[0];\n      colorSpace = stream[\"color_space\"] !== \"unknown\" ? stream[\"color_space\"] : \"bt709\";\n      codecs = stream[\"codec_name\"] || \"avc1\";\n    }\n    const resolution = (videoFile == null ? void 0 : videoFile.resolution.label) + (videoFile == null ? void 0 : videoFile.fps);\n    const buffer2 = this.timeRangesToString(this.player_.buffered());\n    const progress = this.player_.bufferedPercent();\n    return {\n      playerNetworkInfo: this.playerNetworkInfo,\n      progress,\n      colorSpace,\n      codecs,\n      resolution,\n      buffer: buffer2\n    };\n  }\n  populateInfoBlocks() {\n    this.playerMode = this.buildInfoRow(this.player().localize(\"Player mode\"));\n    this.p2p = this.buildInfoRow(this.player().localize(\"P2P\"));\n    this.uuid = this.buildInfoRow(this.player().localize(\"Video UUID\"));\n    this.viewport = this.buildInfoRow(this.player().localize(\"Viewport / Frames\"));\n    this.resolution = this.buildInfoRow(this.player().localize(\"Resolution\"));\n    this.volume = this.buildInfoRow(this.player().localize(\"Volume\"));\n    this.codecs = this.buildInfoRow(this.player().localize(\"Codecs\"));\n    this.color = this.buildInfoRow(this.player().localize(\"Color\"));\n    this.connection = this.buildInfoRow(this.player().localize(\"Connection Speed\"));\n    this.network = this.buildInfoRow(this.player().localize(\"Network Activity\"));\n    this.transferred = this.buildInfoRow(this.player().localize(\"Total Transfered\"));\n    this.download = this.buildInfoRow(this.player().localize(\"Download Breakdown\"));\n    this.bufferProgress = this.buildInfoRow(this.player().localize(\"Buffer Progress\"));\n    this.bufferState = this.buildInfoRow(this.player().localize(\"Buffer State\"));\n    this.liveLatency = this.buildInfoRow(this.player().localize(\"Live Latency\"));\n    this.infoListEl.appendChild(this.playerMode.root);\n    this.infoListEl.appendChild(this.p2p.root);\n    this.infoListEl.appendChild(this.uuid.root);\n    this.infoListEl.appendChild(this.viewport.root);\n    this.infoListEl.appendChild(this.resolution.root);\n    this.infoListEl.appendChild(this.volume.root);\n    this.infoListEl.appendChild(this.codecs.root);\n    this.infoListEl.appendChild(this.color.root);\n    this.infoListEl.appendChild(this.connection.root);\n    this.infoListEl.appendChild(this.network.root);\n    this.infoListEl.appendChild(this.transferred.root);\n    this.infoListEl.appendChild(this.download.root);\n    this.infoListEl.appendChild(this.bufferProgress.root);\n    this.infoListEl.appendChild(this.bufferState.root);\n    this.infoListEl.appendChild(this.liveLatency.root);\n  }\n  populateInfoValues(options) {\n    const { playerNetworkInfo, progress, colorSpace, codecs, resolution, buffer: buffer2, latency, latencyFromEdge } = options;\n    const { downloadedFromServer, downloadedFromPeers } = playerNetworkInfo;\n    const player = this.player();\n    const videoQuality = player.getVideoPlaybackQuality();\n    const vw = Math.max(document.documentElement.clientWidth || 0, window.innerWidth || 0);\n    const vh = Math.max(document.documentElement.clientHeight || 0, window.innerHeight || 0);\n    const pr = (window.devicePixelRatio || 1).toFixed(2);\n    const vp = `${vw}x${vh}*${pr}`;\n    const { droppedVideoFrames, totalVideoFrames } = videoQuality;\n    const frames = player.localize(\"{1} / {2} dropped of {3}\", [vp, droppedVideoFrames + \"\", totalVideoFrames + \"\"]);\n    const duration = player.duration();\n    let volume = `${Math.round(player.volume() * 100)}`;\n    if (player.muted()) volume += player.localize(\" (muted)\");\n    const networkActivity = playerNetworkInfo.downloadSpeed ? `${playerNetworkInfo.downloadSpeed} ⇓ / ${playerNetworkInfo.uploadSpeed} ⇑` : void 0;\n    let totalTransferred = playerNetworkInfo.totalDownloaded ? `${playerNetworkInfo.totalDownloaded} ⇓` : \"\";\n    if (playerNetworkInfo.totalUploaded) {\n      totalTransferred += `/ ${playerNetworkInfo.totalUploaded} ⇑`;\n    }\n    const downloadBreakdown = playerNetworkInfo.downloadedFromServer ? player.localize(\"{1} from servers · {2} from peers\", [downloadedFromServer, downloadedFromPeers]) : void 0;\n    const bufferProgress = progress !== void 0 ? `${(progress * 100).toFixed(1)}% (${(progress * duration).toFixed(1)}s)` : void 0;\n    const p2pEnabled = this.options_.p2pEnabled && this.mode === \"p2p-media-loader\";\n    this.setInfoValue(this.playerMode, this.mode === \"p2p-media-loader\" ? \"P2P Media Loader (v2)\" : \"Web Video\");\n    this.setInfoValue(this.p2p, player.localize(p2pEnabled ? \"enabled\" : \"disabled\"));\n    this.setInfoValue(this.uuid, this.options_.videoUUID);\n    this.setInfoValue(this.viewport, frames);\n    this.setInfoValue(this.resolution, resolution);\n    this.setInfoValue(this.volume, volume);\n    this.setInfoValue(this.codecs, codecs);\n    this.setInfoValue(this.color, colorSpace);\n    this.setInfoValue(this.transferred, totalTransferred);\n    this.setInfoValue(this.connection, playerNetworkInfo.averageBandwidth);\n    this.setInfoValue(this.network, networkActivity);\n    this.setInfoValue(this.download, downloadBreakdown);\n    this.setInfoValue(this.bufferProgress, bufferProgress);\n    this.setInfoValue(this.bufferState, buffer2);\n    if (latency && latencyFromEdge) {\n      this.setInfoValue(this.liveLatency, player.localize(\"{1} (from edge: {2})\", [latency, latencyFromEdge]));\n    }\n  }\n  setInfoValue(el, value) {\n    if (!value) {\n      el.root.style.display = \"none\";\n      return;\n    }\n    el.root.style.display = \"block\";\n    if (el.value.innerText === value) return;\n    el.value.innerText = value;\n  }\n  buildInfoRow(labelText) {\n    const root = videojs.dom.createEl(\"div\");\n    root.style.display = \"none\";\n    const label = videojs.dom.createEl(\"div\", { innerText: labelText });\n    const value = videojs.dom.createEl(\"span\");\n    root.appendChild(label);\n    root.appendChild(value);\n    return { root, value };\n  }\n  timeRangesToString(r) {\n    let result = \"\";\n    for (let i = 0; i < r.length; i++) {\n      const start = Math.floor(r.start(i));\n      const end = Math.floor(r.end(i));\n      result += `[${secondsToTime(start)}, ${secondsToTime(end)}] `;\n    }\n    return result;\n  }\n}\nvideojs.registerComponent(\"StatsCard\", StatsCard);\nconst Plugin$2 = videojs.getPlugin(\"plugin\");\nclass StatsForNerdsPlugin extends Plugin$2 {\n  constructor(player, options) {\n    super(player);\n    this.player.ready(() => {\n      player.addClass(\"vjs-stats-for-nerds\");\n    });\n    this.statsCard = new StatsCard(player, options);\n    player.addChild(this.statsCard);\n  }\n  dispose() {\n    if (this.statsCard) {\n      this.statsCard.dispose();\n      this.player.removeChild(this.statsCard);\n    }\n    super.dispose();\n  }\n  show() {\n    this.statsCard.show();\n  }\n}\nvideojs.registerPlugin(\"stats\", StatsForNerdsPlugin);\nfunction getMainTemplate(options) {\n  return `\n    <div class=\"vjs-upnext-top\">\n      <span class=\"vjs-upnext-headtext\">${options.headText}</span>\n      <div class=\"vjs-upnext-title\"></div>\n    </div>\n    <div class=\"vjs-upnext-autoplay-icon\">\n      <svg height=\"100%\" version=\"1.1\" viewbox=\"0 0 98 98\" width=\"100%\">\n        <circle class=\"vjs-upnext-svg-autoplay-circle\" cx=\"49\" cy=\"49\" fill=\"#000\" fill-opacity=\"0.8\" r=\"48\"></circle>\n        <circle class=\"vjs-upnext-svg-autoplay-ring\" cx=\"-49\" cy=\"49\" fill-opacity=\"0\" r=\"46.5\"\n                stroke=\"#FFFFFF\" stroke-width=\"4\" transform=\"rotate(-90)\"\n        ></circle>\n        <polygon class=\"vjs-upnext-svg-autoplay-triangle\" fill=\"#fff\" points=\"32,27 72,49 32,71\"></polygon></svg>\n    </div>\n    <span class=\"vjs-upnext-bottom\">\n      <span class=\"vjs-upnext-cancel\">\n        <button class=\"vjs-upnext-cancel-button\" tabindex=\"0\" aria-label=\"Cancel autoplay\">${options.cancelText}</button>\n      </span>\n      <span class=\"vjs-upnext-suspended\">${options.suspendedText}</span>\n    </span>\n  `;\n}\nconst Component = videojs.getComponent(\"Component\");\nclass EndCard extends Component {\n  constructor(player, options) {\n    super(player, options);\n    this.dashOffsetTotal = 586;\n    this.dashOffsetStart = 293;\n    this.interval = 50;\n    this.upNextEvents = new videojs.EventTarget();\n    this.ticks = 0;\n    this.totalTicks = this.options_.timeout / this.interval;\n    this.onEndedHandler = () => {\n      if (!this.options_.isDisplayed()) return;\n      player.addClass(\"vjs-upnext--showing\");\n      this.showCard((canceled) => {\n        player.removeClass(\"vjs-upnext--showing\");\n        this.container.style.display = \"none\";\n        if (!canceled) {\n          this.options_.next();\n        }\n      });\n    };\n    this.onPlayingHandler = () => {\n      this.upNextEvents.trigger(\"playing\");\n    };\n    player.on([\"auto-stopped\", \"ended\"], this.onEndedHandler);\n    player.on(\"playing\", this.onPlayingHandler);\n  }\n  dispose() {\n    if (this.onEndedHandler) this.player().off([\"auto-stopped\", \"ended\"], this.onEndedHandler);\n    if (this.onPlayingHandler) this.player().off(\"playing\", this.onPlayingHandler);\n    if (this.timeout) clearTimeout(this.timeout);\n    super.dispose();\n  }\n  createEl() {\n    const container = super.createEl(\"div\", {\n      className: \"vjs-upnext-content\",\n      innerHTML: getMainTemplate(this.options_)\n    });\n    this.container = container;\n    container.style.display = \"none\";\n    this.autoplayRing = container.getElementsByClassName(\"vjs-upnext-svg-autoplay-ring\")[0];\n    this.title = container.getElementsByClassName(\"vjs-upnext-title\")[0];\n    this.cancelButton = container.getElementsByClassName(\"vjs-upnext-cancel-button\")[0];\n    this.suspendedMessage = container.getElementsByClassName(\"vjs-upnext-suspended\")[0];\n    this.nextButton = container.getElementsByClassName(\"vjs-upnext-autoplay-icon\")[0];\n    this.cancelButton.onclick = () => {\n      this.upNextEvents.trigger(\"cancel\");\n    };\n    this.nextButton.onclick = () => {\n      this.upNextEvents.trigger(\"next\");\n    };\n    return container;\n  }\n  showCard(cb) {\n    this.autoplayRing.setAttribute(\"stroke-dasharray\", `${this.dashOffsetStart}`);\n    this.autoplayRing.setAttribute(\"stroke-dashoffset\", `${-this.dashOffsetStart}`);\n    this.title.innerText = this.options_.getTitle();\n    if (this.totalTicks === 0) {\n      return cb(false);\n    }\n    this.upNextEvents.one(\"cancel\", () => {\n      clearTimeout(this.timeout);\n      this.timeout = void 0;\n      cb(true);\n    });\n    this.upNextEvents.one(\"playing\", () => {\n      clearTimeout(this.timeout);\n      this.timeout = void 0;\n      cb(true);\n    });\n    this.upNextEvents.one(\"next\", () => {\n      clearTimeout(this.timeout);\n      this.timeout = void 0;\n      cb(false);\n    });\n    const goToPercent = (percent) => {\n      const newOffset = Math.max(-this.dashOffsetTotal, -this.dashOffsetStart - percent * this.dashOffsetTotal / 2 / 100);\n      this.autoplayRing.setAttribute(\"stroke-dashoffset\", \"\" + newOffset);\n    };\n    const tick = () => {\n      goToPercent(this.ticks++ * 100 / this.totalTicks);\n    };\n    const update = () => {\n      if (this.options_.isSuspended()) {\n        this.suspendedMessage.innerText = this.options_.suspendedText;\n        goToPercent(0);\n        this.ticks = 0;\n        this.timeout = setTimeout(update.bind(this), 300);\n      } else if (this.ticks >= this.totalTicks) {\n        clearTimeout(this.timeout);\n        this.timeout = void 0;\n        cb(false);\n      } else {\n        this.suspendedMessage.innerText = \"\";\n        tick();\n        this.timeout = setTimeout(update.bind(this), this.interval);\n      }\n    };\n    this.container.style.display = \"block\";\n    this.timeout = setTimeout(update.bind(this), this.interval);\n  }\n}\nvideojs.registerComponent(\"EndCard\", EndCard);\nconst Plugin$1 = videojs.getPlugin(\"plugin\");\nclass UpNextPlugin extends Plugin$1 {\n  constructor(player, options) {\n    super(player);\n    const settings = {\n      next: options.next,\n      getTitle: options.getTitle,\n      timeout: options.timeout,\n      cancelText: player.localize(\"Cancel\"),\n      headText: player.localize(\"Up Next\"),\n      suspendedText: player.localize(\"Autoplay is suspended\"),\n      isDisplayed: options.isDisplayed,\n      isSuspended: options.isSuspended\n    };\n    this.player.ready(() => {\n      player.addClass(\"vjs-upnext\");\n    });\n    const component = new EndCard(player, settings);\n    player.addChild(component);\n    this.on(\"dispose\", () => player.removeChild(component));\n  }\n}\nvideojs.registerPlugin(\"upnext\", UpNextPlugin);\nconst debugLogger = debug$5(\"peertube:player:web-video-plugin\");\nconst Plugin = videojs.getPlugin(\"plugin\");\nclass WebVideoPlugin extends Plugin {\n  constructor(player, options) {\n    super(player, options);\n    this.videoFiles = options.videoFiles;\n    this.videoFileToken = options.videoFileToken;\n    const videoFile = this.pickAverageVideoFile();\n    if (videoFile) this.updateVideoFile({ videoFile, isUserResolutionChange: false });\n    this.onLoadedMetadata = () => {\n      player.trigger(\"video-ratio-changed\", { ratio: this.player.videoWidth() / this.player.videoHeight() });\n    };\n    player.on(\"loadedmetadata\", this.onLoadedMetadata);\n    player.ready(() => {\n      if (this.videoFiles.length === 0) {\n        this.player.addClass(\"disabled\");\n        return;\n      }\n      this.buildQualities();\n      this.setupNetworkInfoInterval();\n    });\n  }\n  dispose() {\n    if (this.networkInfoInterval) clearInterval(this.networkInfoInterval);\n    if (this.onLoadedMetadata) this.player.off(\"loadedmetadata\", this.onLoadedMetadata);\n    if (this.onErrorHandler) this.player.off(\"error\", this.onErrorHandler);\n    if (this.onPlayHandler) this.player.off(\"canplay\", this.onPlayHandler);\n    super.dispose();\n  }\n  getCurrentResolutionId() {\n    var _a;\n    return (_a = this.currentVideoFile) == null ? void 0 : _a.resolution.id;\n  }\n  updateVideoFile(options) {\n    this.currentVideoFile = options.videoFile;\n    debugLogger(\"Updating web video file to \" + this.currentVideoFile.fileUrl);\n    const paused = this.player.paused();\n    const playbackRate = this.player.playbackRate();\n    const currentTime = this.player.currentTime();\n    if (!this.onErrorHandler) {\n      this.onErrorHandler = () => this.player.peertube().displayFatalError();\n      this.player.one(\"error\", this.onErrorHandler);\n    }\n    let httpUrl = this.currentVideoFile.fileUrl;\n    if (this.videoFileToken()) {\n      httpUrl = addQueryParams(httpUrl, { videoFileToken: this.videoFileToken() });\n    }\n    const oldAutoplayValue = this.player.autoplay();\n    if (options.isUserResolutionChange) {\n      this.player.autoplay(false);\n      this.player.addClass(\"vjs-updating-resolution\");\n    }\n    this.player.src(httpUrl);\n    this.onPlayHandler = () => {\n      var _a;\n      this.player.playbackRate(playbackRate);\n      this.player.currentTime(currentTime);\n      this.player.trigger(\"resolution-change\", {\n        resolution: (_a = this.currentVideoFile) == null ? void 0 : _a.resolution.id,\n        initResolutionChange: !options.isUserResolutionChange\n      });\n      if (options.isUserResolutionChange) {\n        this.player.trigger(\"web-video-source-change\");\n        this.tryToPlay().then(() => {\n          if (paused) this.player.pause();\n          this.player.autoplay(oldAutoplayValue);\n        });\n      }\n    };\n    this.player.one(\"canplay\", this.onPlayHandler);\n  }\n  getCurrentVideoFile() {\n    return this.currentVideoFile;\n  }\n  tryToPlay() {\n    debugLogger(\"Try to play manually the video\");\n    const playPromise = this.player.play();\n    if (playPromise === void 0) return;\n    return playPromise.catch((err) => {\n      if (err.message.includes(\"The play() request was interrupted by a call to pause()\")) {\n        return;\n      }\n      logger$1.warn(err);\n      this.player.pause();\n      this.player.posterImage.show();\n      this.player.removeClass(\"vjs-has-autoplay\");\n      this.player.removeClass(\"vjs-playing-audio-only-content\");\n    }).finally(() => {\n      this.player.removeClass(\"vjs-updating-resolution\");\n    });\n  }\n  pickAverageVideoFile() {\n    if (!this.videoFiles || this.videoFiles.length === 0) return void 0;\n    if (this.videoFiles.length === 1) return this.videoFiles[0];\n    const files = this.videoFiles.filter((f) => f.resolution.id !== 0);\n    return files[Math.floor(files.length / 2)];\n  }\n  buildQualities() {\n    const resolutions = this.videoFiles.map((videoFile) => {\n      var _a;\n      return {\n        id: videoFile.resolution.id,\n        label: this.player.localize(getResolutionAndFPSLabel(videoFile.resolution.label, videoFile.fps)),\n        height: videoFile.resolution.id,\n        selected: videoFile.id === ((_a = this.currentVideoFile) == null ? void 0 : _a.id),\n        selectCallback: () => this.updateVideoFile({ videoFile, isUserResolutionChange: true })\n      };\n    });\n    this.player.peertubeResolutions().add(resolutions);\n  }\n  setupNetworkInfoInterval() {\n    this.networkInfoInterval = setInterval(() => {\n      var _a;\n      return this.player.trigger(\"network-info\", {\n        source: \"web-video\",\n        http: {\n          downloaded: this.player.bufferedPercent() * ((_a = this.currentVideoFile) == null ? void 0 : _a.size)\n        }\n      });\n    }, 1e3);\n  }\n}\nvideojs.registerPlugin(\"webVideo\", WebVideoPlugin);\nconst CaptionsButton = videojs.getComponent(\"CaptionsButton\");\nCaptionsButton.prototype.controlText_ = \"Subtitles/CC\";\nCaptionsButton.prototype.label_ = \" \";\nconst PlaybackRateMenuButton = videojs.getComponent(\"PlaybackRateMenuButton\");\nPlaybackRateMenuButton.prototype.controlText_ = \"Speed\";\nconst PlayProgressBar = videojs.getComponent(\"PlayProgressBar\");\nif (PlayProgressBar.prototype.options_.children.includes(\"timeTooltip\") !== true) {\n  PlayProgressBar.prototype.options_.children.push(\"timeTooltip\");\n}\nclass PeerTubePlayer {\n  constructor(options) {\n    __publicField(this, \"pluginsManager\");\n    __publicField(this, \"videojsDecodeErrors\", 0);\n    __publicField(this, \"player\");\n    __publicField(this, \"currentLoadOptions\");\n    this.options = options;\n    this.pluginsManager = options.pluginsManager;\n  }\n  unload() {\n    if (!this.player) return;\n    this.disposeDynamicPluginsIfNeeded();\n    this.player.reset();\n  }\n  async load(loadOptions) {\n    this.currentLoadOptions = loadOptions;\n    this.setPoster(\"\");\n    this.disposeDynamicPluginsIfNeeded();\n    await this.buildPlayerIfNeeded();\n    if (this.currentLoadOptions.mode === \"p2p-media-loader\") {\n      await this.loadP2PMediaLoader();\n    } else {\n      this.loadWebVideo();\n    }\n    this.loadDynamicPlugins();\n    if (this.options.controlBar === false) {\n      this.player.controlBar.hide();\n    } else {\n      this.player.controlBar.show();\n    }\n    this.player.autoplay(this.getAutoPlayValue(this.currentLoadOptions.autoplay));\n    if (!this.player.autoplay()) {\n      this.setPoster(loadOptions.poster);\n    }\n    this.player.trigger(\"video-change\");\n  }\n  getPlayer() {\n    return this.player;\n  }\n  destroy() {\n    if (this.player) this.player.dispose();\n  }\n  setPoster(url) {\n    var _a;\n    if (!this.player) {\n      this.options.playerElement().poster = url;\n      return;\n    }\n    (_a = this.player) == null ? void 0 : _a.poster(url);\n    this.options.playerElement().poster = \"\";\n  }\n  enable() {\n    if (!this.player) return;\n    this.player.el().style.pointerEvents = \"auto\";\n  }\n  disable() {\n    if (!this.player) return;\n    if (this.player.isFullscreen()) {\n      this.player.exitFullscreen();\n    }\n    this.player.hasStarted(false);\n    this.player.removeClass(\"vjs-has-autoplay\");\n    this.player.bigPlayButton.hide();\n    this.player.el().style.pointerEvents = \"none\";\n  }\n  setCurrentTime(currentTime) {\n    if (this.player.paused()) {\n      this.currentLoadOptions.startTime = currentTime;\n      this.player.play();\n      return;\n    }\n    this.player.currentTime(currentTime);\n    this.player.userActive(true);\n  }\n  async loadP2PMediaLoader() {\n    const hlsOptionsBuilder = new HLSOptionsBuilder({\n      ...pick(this.options, [\"pluginsManager\", \"serverUrl\", \"authorizationHeader\", \"stunServers\"]),\n      ...pick(this.currentLoadOptions, [\n        \"videoPassword\",\n        \"requiresUserAuth\",\n        \"videoFileToken\",\n        \"requiresPassword\",\n        \"isLive\",\n        \"p2pEnabled\",\n        \"liveOptions\",\n        \"hls\"\n      ])\n    });\n    const { hlsjs, p2pMediaLoader } = await hlsOptionsBuilder.getPluginOptions();\n    this.player.hlsjs(hlsjs);\n    this.player.p2pMediaLoader(p2pMediaLoader);\n  }\n  loadWebVideo() {\n    const webVideoOptionsBuilder = new WebVideoOptionsBuilder(pick(this.currentLoadOptions, [\n      \"videoFileToken\",\n      \"webVideo\",\n      \"hls\"\n    ]));\n    this.player.webVideo(webVideoOptionsBuilder.getPluginOptions());\n  }\n  async buildPlayerIfNeeded() {\n    if (this.player) return;\n    await TranslationsManager.loadLocaleInVideoJS(this.options.serverUrl, this.options.language, videojs);\n    const videojsOptions = await this.pluginsManager.runHook(\n      \"filter:internal.player.videojs.options.result\",\n      this.getVideojsOptions()\n    );\n    this.player = videojs(this.options.playerElement(), videojsOptions);\n    this.player.ready(() => {\n      if (!isNaN(+this.options.playbackRate)) {\n        this.player.playbackRate(+this.options.playbackRate);\n      }\n      let alreadyFallback = false;\n      const handleError = () => {\n        if (alreadyFallback) return;\n        alreadyFallback = true;\n        if (this.currentLoadOptions.mode === \"p2p-media-loader\") {\n          this.tryToRecoverHLSError(this.player.error());\n        } else {\n          this.maybeFallbackToWebVideo();\n        }\n      };\n      this.player.on(\"video-change\", () => alreadyFallback = false);\n      this.player.on(\"error\", () => handleError());\n      this.player.on(\"network-info\", (_, data) => {\n        if (data.source !== \"p2p-media-loader\" || isNaN(data.bandwidthEstimate)) return;\n        saveAverageBandwidth(data.bandwidthEstimate);\n      });\n      this.player.contextMenu(this.getContextMenuOptions());\n      this.displayNotificationWhenOffline();\n    });\n  }\n  disposeDynamicPluginsIfNeeded() {\n    if (!this.player) return;\n    if (this.player.usingPlugin(\"peertubeMobile\")) this.player.peertubeMobile().dispose();\n    if (this.player.usingPlugin(\"peerTubeHotkeysPlugin\")) this.player.peerTubeHotkeysPlugin().dispose();\n    if (this.player.usingPlugin(\"playlist\")) this.player.playlist().dispose();\n    if (this.player.usingPlugin(\"bezels\")) this.player.bezels().dispose();\n    if (this.player.usingPlugin(\"upnext\")) this.player.upnext().dispose();\n    if (this.player.usingPlugin(\"stats\")) this.player.stats().dispose();\n    if (this.player.usingPlugin(\"storyboard\")) this.player.storyboard().dispose();\n    if (this.player.usingPlugin(\"chapters\")) this.player.chapters().dispose();\n    if (this.player.usingPlugin(\"peertubeNSFW\")) this.player.peertubeNSFW().dispose();\n    if (this.player.usingPlugin(\"peertubeDock\")) this.player.peertubeDock().dispose();\n    if (this.player.usingPlugin(\"p2pMediaLoader\")) this.player.p2pMediaLoader().dispose();\n    if (this.player.usingPlugin(\"hlsjs\")) this.player.hlsjs().dispose();\n    if (this.player.usingPlugin(\"webVideo\")) this.player.webVideo().dispose();\n  }\n  loadDynamicPlugins() {\n    if (isMobile()) this.player.peertubeMobile();\n    this.player.bezels();\n    this.player.stats({\n      videoUUID: this.currentLoadOptions.videoUUID,\n      videoIsLive: this.currentLoadOptions.isLive,\n      mode: this.currentLoadOptions.mode,\n      p2pEnabled: this.currentLoadOptions.p2pEnabled\n    });\n    if (this.options.enableHotkeys === true) {\n      this.player.peerTubeHotkeysPlugin({ isLive: this.currentLoadOptions.isLive });\n    }\n    if (this.currentLoadOptions.playlist) {\n      this.player.playlist(this.currentLoadOptions.playlist);\n    }\n    if (this.currentLoadOptions.upnext) {\n      this.player.upnext({\n        timeout: this.currentLoadOptions.upnext.timeout,\n        getTitle: () => this.currentLoadOptions.nextVideo.getVideoTitle(),\n        next: () => this.currentLoadOptions.nextVideo.handler(),\n        isDisplayed: () => this.currentLoadOptions.nextVideo.enabled && this.currentLoadOptions.upnext.isEnabled(),\n        isSuspended: () => this.currentLoadOptions.upnext.isSuspended(this.player)\n      });\n    }\n    if (this.currentLoadOptions.storyboard) {\n      this.player.storyboard(this.currentLoadOptions.storyboard);\n    }\n    if (this.currentLoadOptions.videoChapters) {\n      this.player.chapters({ chapters: this.currentLoadOptions.videoChapters });\n    }\n    if (this.currentLoadOptions.dock) {\n      this.player.peertubeDock(this.currentLoadOptions.dock);\n    }\n    if (this.currentLoadOptions.nsfwWarning) {\n      this.player.peertubeNSFW(this.currentLoadOptions.nsfwWarning);\n    }\n  }\n  async tryToRecoverHLSError(err) {\n    if (err.code === MediaError.MEDIA_ERR_DECODE) {\n      if (this.videojsDecodeErrors === 0) {\n        this.options.errorNotifier(this.player.localize(\"The video failed to play, will try to fast forward.\"));\n      }\n      if (this.videojsDecodeErrors === 20) {\n        this.maybeFallbackToWebVideo();\n        return;\n      }\n      logger$1.info(\"Fast forwarding HLS to recover from an error.\", {\n        err,\n        videoShortUUID: this.currentLoadOptions.videoShortUUID,\n        currentTime: this.player.currentTime(),\n        resolution: this.player.videoHeight()\n      });\n      this.videojsDecodeErrors++;\n      await this.load({\n        ...this.currentLoadOptions,\n        mode: \"p2p-media-loader\",\n        startTime: this.player.currentTime() + 2,\n        autoplay: true\n      });\n    } else {\n      this.maybeFallbackToWebVideo();\n    }\n  }\n  async maybeFallbackToWebVideo() {\n    if (this.currentLoadOptions.mode === \"web-video\") {\n      this.player.peertube().displayFatalError();\n      return;\n    }\n    logger$1.info(\"Fallback to web-video.\");\n    await this.load({\n      ...this.currentLoadOptions,\n      mode: \"web-video\",\n      startTime: this.player.currentTime(),\n      autoplay: true\n    });\n  }\n  getVideojsOptions() {\n    const html5 = {\n      preloadTextTracks: false,\n      // Prevent a bug on iOS where the text tracks added by peertube plugin are removed on play\n      // See https://github.com/Chocobozzz/PeerTube/issues/6351\n      nativeTextTracks: false\n    };\n    const plugins = {\n      peertube: {\n        hasAutoplay: () => this.getAutoPlayValue(this.currentLoadOptions.autoplay),\n        videoViewUrl: () => this.currentLoadOptions.videoViewUrl,\n        videoViewIntervalMs: this.options.videoViewIntervalMs,\n        authorizationHeader: this.options.authorizationHeader,\n        videoDuration: () => this.currentLoadOptions.duration,\n        startTime: () => this.currentLoadOptions.startTime,\n        stopTime: () => this.currentLoadOptions.stopTime,\n        videoCaptions: () => this.currentLoadOptions.videoCaptions,\n        isLive: () => this.currentLoadOptions.isLive,\n        videoUUID: () => this.currentLoadOptions.videoUUID,\n        subtitle: () => this.currentLoadOptions.subtitle,\n        videoRatio: () => this.currentLoadOptions.videoRatio,\n        poster: () => this.currentLoadOptions.poster,\n        autoPlayerRatio: this.options.autoPlayerRatio\n      },\n      metrics: {\n        mode: () => this.currentLoadOptions.mode,\n        metricsUrl: () => this.options.metricsUrl,\n        metricsInterval: () => this.options.metricsInterval,\n        videoUUID: () => this.currentLoadOptions.videoUUID\n      }\n    };\n    const controlBarOptionsBuilder = new ControlBarOptionsBuilder({\n      ...this.options,\n      videoShortUUID: () => this.currentLoadOptions.videoShortUUID,\n      p2pEnabled: () => this.currentLoadOptions.p2pEnabled,\n      nextVideo: () => this.currentLoadOptions.nextVideo,\n      previousVideo: () => this.currentLoadOptions.previousVideo\n    });\n    const videojsOptions = {\n      html5,\n      // We don't use text track settings for now\n      textTrackSettings: false,\n      // FIXME: typings\n      controls: this.options.controls !== void 0 ? this.options.controls : true,\n      loop: this.options.loop !== void 0 ? this.options.loop : false,\n      muted: this.options.muted !== void 0 ? this.options.muted : void 0,\n      // Undefined so the player knows it has to check the local storage\n      autoplay: this.getAutoPlayValue(this.currentLoadOptions.autoplay),\n      poster: this.currentLoadOptions.poster,\n      inactivityTimeout: this.options.inactivityTimeout,\n      playbackRates: [0.25, 0.5, 0.75, 1, 1.25, 1.5, 1.75, 2],\n      plugins,\n      controlBar: {\n        children: controlBarOptionsBuilder.getChildrenOptions()\n        // FIXME: typings\n      },\n      language: this.options.language && !isDefaultLocale(this.options.language) ? this.options.language : void 0\n    };\n    return videojsOptions;\n  }\n  getAutoPlayValue(autoplay) {\n    if (autoplay !== true) return false;\n    return this.currentLoadOptions.forceAutoplay ? \"any\" : \"play\";\n  }\n  displayNotificationWhenOffline() {\n    const offlineNotificationElem = document.createElement(\"div\");\n    offlineNotificationElem.classList.add(\"vjs-peertube-offline-notification\");\n    offlineNotificationElem.innerText = this.player.localize(\"You seem to be offline and the video may not work\");\n    let offlineNotificationElemAdded = false;\n    const handleOnline = () => {\n      if (!offlineNotificationElemAdded) return;\n      this.player.el().removeChild(offlineNotificationElem);\n      offlineNotificationElemAdded = false;\n      logger$1.info(\"The browser is online\");\n    };\n    const handleOffline = () => {\n      if (offlineNotificationElemAdded) return;\n      this.player.el().appendChild(offlineNotificationElem);\n      offlineNotificationElemAdded = true;\n      logger$1.info(\"The browser is offline\");\n    };\n    window.addEventListener(\"online\", handleOnline);\n    window.addEventListener(\"offline\", handleOffline);\n    this.player.on(\"dispose\", () => {\n      window.removeEventListener(\"online\", handleOnline);\n      window.removeEventListener(\"offline\", handleOffline);\n    });\n  }\n  getContextMenuOptions() {\n    const content = () => {\n      const self2 = this;\n      const player = this.player;\n      const shortUUID = self2.currentLoadOptions.videoShortUUID;\n      const isLoopEnabled = player.options_[\"loop\"];\n      const items = [\n        {\n          icon: \"repeat\",\n          label: player.localize(\"Play in loop\") + (isLoopEnabled ? '<span class=\"vjs-icon-tick-white\"></span>' : \"\"),\n          listener: function() {\n            player.options_[\"loop\"] = !isLoopEnabled;\n          }\n        },\n        {\n          label: player.localize(\"Copy the video URL\"),\n          listener: function() {\n            copyToClipboard(buildVideoLink({ shortUUID }), player.el());\n          }\n        },\n        {\n          label: player.localize(\"Copy the video URL at the current time\"),\n          listener: function() {\n            const url = buildVideoLink({ shortUUID });\n            copyToClipboard(decorateVideoLink({ url, startTime: player.currentTime() }), player.el());\n          }\n        },\n        {\n          icon: \"code\",\n          label: player.localize(\"Copy embed code\"),\n          listener: () => {\n            copyToClipboard(\n              buildVideoOrPlaylistEmbed({ embedUrl: self2.currentLoadOptions.embedUrl, embedTitle: self2.currentLoadOptions.embedTitle }),\n              player.el()\n            );\n          }\n        }\n      ];\n      items.push({\n        icon: \"info\",\n        label: player.localize(\"Stats for nerds\"),\n        listener: () => {\n          player.stats().show();\n        }\n      });\n      return items.map((i) => ({\n        ...i,\n        label: `<span class=\"vjs-icon-${i.icon || \"link-2\"}\"></span>` + i.label\n      }));\n    };\n    return { content };\n  }\n}\nexport {\n  PeerTubePlayer as P,\n  getStoredVolume as a,\n  getStoredMute as b,\n  getStoredTheater as c,\n  saveMuteInStore as d,\n  saveTheaterInStore as e,\n  saveAverageBandwidth as f,\n  getDefaultExportFromCjs$4 as g,\n  getAverageBandwidthInStore as h,\n  saveLastSubtitle as i,\n  getStoredLastSubtitle as j,\n  savePreferredSubtitle as k,\n  getStoredPreferredSubtitle as l,\n  saveVideoWatchHistory as m,\n  getStoredVideoWatchHistory as n,\n  cleanupVideoWatch as o,\n  getPlayerSessionId as p,\n  saveVolumeInStore as s,\n  videojs as v\n};\n"],
  "mappings": "yFAAA,IAAIA,GAAYC,OAAOC,eACnBC,GAAkBA,CAACC,EAAKC,EAAKC,IAAUD,KAAOD,EAAMJ,GAAUI,EAAKC,EAAK,CAAEE,WAAY,GAAMC,aAAc,GAAMC,SAAU,GAAMH,MAAAA,CAAM,CAAC,EAAIF,EAAIC,CAAG,EAAIC,EACtJI,GAAgBA,CAACN,EAAKC,EAAKC,IAAUH,GAAgBC,EAAK,OAAOC,GAAQ,SAAWA,EAAM,GAAKA,EAAKC,CAAK,EACvGK,GAAyB,CAC7B,gDAAiD,GACjD,gDAAiD,GACjD,kDAAmD,GACnD,kDAAmD,GACnD,6CAA8C,GAC9C,6CAA8C,GAC9C,sDAAuD,GACvD,sDAAuD,GACvD,8CAA+C,GAC/C,8CAA+C,GAC/C,0DAA2D,GAC3D,0DAA2D,GAC3D,0CAA2C,GAC3C,0CAA2C,GAC3C,4DAA6D,GAC7D,4DAA6D,GAC7D,mDAAoD,GACpD,mDAAoD,GACpD,0DAA2D,GAC3D,0DAA2D,GAC3D,uCAAwC,GACxC,uCAAwC,GACxC,+CAAgD,GAChD,+CAAgD,GAChD,gDAAiD,GACjD,gDAAiD,GACjD,+CAAgD,GAChD,4DAA6D,GAC7D,4DAA6D,GAC7D,0DAA2D,GAC3D,0DAA2D,GAC3D,yDAA0D,GAC1D,yDAA0D,GAC1D,sDAAuD,GACvD,sDAAuD,GACvD,uCAAwC,GACxC,uCAAwC,GACxC,0DAA2D,GAC3D,2DAA4D,GAC5D,6CAA8C,GAC9C,6CAA8C,GAC9C,sDAAuD,GACvD,sDAAuD,GACvD,4CAA6C,GAC7C,4CAA6C,GAC7C,qDAAsD,GACtD,qDAAsD,GACtD,sCAAuC,GACvC,sCAAuC,GACvC,+CAAgD,GAChD,+CAAgD,GAChD,kDAAmD,GACnD,gDAAiD,GACjD,yDAA0D,GAC1D,qDAAsD,GACtD,yDAA0D,GAC1D,8DAA+D,GAC/D,+CAAgD,GAChD,gDAAiD,EACnD,EACMC,GAAyB,CAC7B,0BAA2B,GAC3B,0BAA2B,GAC3B,kCAAmC,GACnC,mCAAoC,GACpC,0CAA2C,GAC3C,iDAAkD,GAClD,mCAAoC,GACpC,mCAAoC,GACpC,mDAAoD,GACpD,mCAAoC,GACpC,mDAAoD,GACpD,4CAA6C,GAC7C,sCAAuC,GACvC,sDAAuD,GACvD,kDAAmD,GACnD,yBAA0B,GAC1B,iCAAkC,GAClC,oBAAqB,GACrB,qBAAsB,GACtB,+BAAgC,GAChC,8BAA+B,GAC/B,oCAAqC,GACrC,2BAA4B,GAC5B,+BAAgC,GAChC,mCAAoC,GACpC,sBAAuB,GACvB,6BAA8B,GAC9B,8BAA+B,GAC/B,sCAAuC,GACvC,oCAAqC,GACrC,2BAA4B,GAC5B,6BAA8B,EAChC,EACAX,OAAOY,OAAO,CAAC,EAAGF,GAAwBC,EAAsB,EAChE,IAAME,GAAyB,CAC7B,gCAAiC,GACjC,gCAAiC,GACjC,+CAAgD,GAChD,+CAAgD,GAChD,yCAA0C,GAC1C,yCAA0C,GAC1C,+CAAgD,GAChD,+CAAgD,GAChD,wCAAyC,GACzC,wCAAyC,GACzC,0CAA2C,GAC3C,0CAA2C,GAC3C,qDAAsD,GACtD,qDAAsD,GACtD,6CAA8C,GAC9C,6CAA8C,GAC9C,6CAA8C,GAC9C,6CAA8C,GAC9C,qDAAsD,GACtD,qDAAsD,GACtD,qDAAsD,GACtD,qDAAsD,GACtD,sDAAuD,GACvD,sDAAuD,GACvD,sDAAuD,GACvD,sDAAuD,GACvD,8BAA+B,GAC/B,wCAAyC,GACzC,wCAAyC,GACzC,sCAAuC,GACvC,wCAAyC,GACzC,6CAA8C,GAC9C,gDAAiD,GACjD,oDAAqD,GACrD,iDAAkD,GAClD,qDAAsD,GACtD,6CAA8C,GAC9C,6CAA8C,GAC9C,+CAAgD,GAChD,sDAAuD,GACvD,iDAAkD,GAClD,qDAAsD,GACtD,yDAA0D,GAC1D,+CAAgD,GAChD,sDAAuD,GACvD,uCAAwC,GACxC,uCAAwC,GACxC,+CAAgD,GAChD,+CAAgD,GAChD,qCAAsC,GACtC,qCAAsC,GACtC,wCAAyC,GACzC,gDAAiD,GACjD,2CAA4C,GAC5C,qDAAsD,GACtD,6CAA8C,GAC9C,yCAA0C,GAC1C,kDAAmD,GACnD,oCAAqC,GACrC,kCAAmC,GACnC,kCAAmC,GACnC,4DAA6D,GAC7D,0DAA2D,GAC3D,gEAAiE,GACjE,oDAAqD,GACrD,iDAAkD,GAClD,qDAAsD,GACtD,wDAAyD,GACzD,sDAAuD,GACvD,gCAAiC,GACjC,8CAA+C,GAC/C,2DAA4D,GAC5D,2CAA4C,GAC5C,8BAA+B,GAC/B,oCAAqC,EACvC,EACMC,GAAyB,CAC7B,+BAAgC,GAChC,uCAAwC,GACxC,2BAA4B,GAC5B,2BAA4B,GAC5B,4BAA6B,GAC7B,0BAA2B,GAC3B,gCAAiC,GACjC,mCAAoC,GACpC,mCAAoC,GACpC,mCAAoC,GACpC,gCAAiC,GACjC,kCAAmC,GACnC,kCAAmC,GACnC,yCAA0C,GAC1C,mCAAoC,GACpC,mCAAoC,GACpC,mCAAoC,GACpC,0BAA2B,GAC3B,4BAA6B,GAC7B,6BAA8B,GAC9B,yCAA0C,GAC1C,0BAA2B,GAC3B,0BAA2B,GAC3B,0BAA2B,GAC3B,mCAAoC,GACpC,4CAA6C,GAC7C,2CAA4C,GAC5C,2CAA4C,EAC9C,EACAd,OAAOY,OAAO,CAAC,EAAGC,GAAwBC,EAAsB,EAChE,IAAMC,GAAuB,CAC3BC,aAAc,EACdC,cAAe,CACjB,EACMC,GAAkB,CACtBC,UAAW,EACXC,OAAQ,IACRC,OAAQ,IACRC,OAAQ,IACRC,OAAQ,IACRC,OAAQ,IACRC,QAAS,KACTC,QAAS,KACTC,KAAM,IACR,EACMC,GAAW,CACfC,QAAS,EACTC,aAAc,CAChB,EACA,SAASC,GAAUC,EAAM,CACvB,GAAI,CAACA,EACH,MAAO,GACT,GAAI,OAAOA,GAAS,SAClB,OAAOC,KAAKC,MAAMF,CAAI,EACxB,IAAMG,EAAM,IAAIC,OAAO,+DAA+D,EAChFC,EAAUL,EAAKM,MAAMH,CAAG,EAC9B,GAAIE,EAAS,CACX,IAAME,EAAQC,SAASH,EAAQI,OAAO,OAAY,IAAK,EAAE,EACnDC,EAAUF,SAASH,EAAQI,OAAO,SAAc,IAAK,EAAE,EACvDE,EAAUH,SAASH,EAAQI,OAAO,SAAc,IAAK,EAAE,EAC7D,OAAOF,EAAQ,KAAOG,EAAU,GAAKC,CACvC,CACA,IAAMC,EAAQZ,EAAKa,MAAM,GAAG,EAAEC,QAAQ,EAChCC,EAAc,CAClB,EAAG,EACH,EAAG,GACH,EAAG,IACL,EACIC,EAAS,EACb,QAASC,EAAI,EAAGA,EAAIL,EAAMM,OAAQD,IAAK,CACrC,IAAME,EAAUX,SAASI,EAAMK,CAAC,EAAG,EAAE,EACrC,GAAIG,MAAMD,CAAO,EACf,MAAO,GACTH,GAAUD,EAAYE,CAAC,EAAIE,CAC7B,CACA,OAAOH,CACT,CACA,SAASK,GAAcC,EAAS,CAC9B,IAAIC,EACJ,IAAIZ,EACAa,EAAU,QACVC,EACA,OAAOH,GAAY,SACrBX,EAAUW,GAEVX,EAAUW,EAAQX,QAClBa,GAAWD,EAAKD,EAAQI,UAAY,MAAQH,IAAO,OAASA,EAAK,QACjEE,EAASH,EAAQG,QAEnB,IAAIzB,EAAO,GACX,GAAIW,IAAY,GAAKa,IAAY,OAC/B,MAAO,KACT,IAAMG,EAAgBtD,GAChBmD,IAAY,gBACPnD,EAAMuD,eAAe,EACvBvD,EAEHwD,EAAaJ,GAAU,IACvBK,EAAeL,GAAU,IACzBM,EAAgBP,IAAY,OAAS,GAAK,IAC1CjB,EAAQN,KAAKC,MAAMS,EAAU,IAAI,EACnCJ,GAAS,GAAKA,EAAQ,IAAMiB,IAAY,OAC1CxB,EAAO,IAAMO,EAAQsB,EACdtB,GAAS,EAChBP,EAAO2B,EAAapB,CAAK,EAAIsB,EACtBL,IAAY,SACnBxB,EAAO,KAAO6B,GAChBlB,GAAW,KACX,IAAMD,EAAUT,KAAKC,MAAMS,EAAU,EAAE,EACvC,OAAID,GAAW,GAAKA,EAAU,IAAMc,IAAY,OAC9CxB,GAAQ,IAAMU,EAAUoB,EACjBpB,GAAW,EAClBV,GAAQ2B,EAAajB,CAAO,EAAIoB,EACzBN,IAAY,SACnBxB,GAAQ,KAAO8B,GACjBnB,EAAUV,KAAK+B,MAAMrB,CAAO,EAAI,GAC5BA,GAAW,GAAKA,EAAU,IAAMa,IAAY,OAC9CxB,GAAQ,IAAMW,EAAUoB,EACjBpB,GAAW,EAClBX,GAAQ2B,EAAahB,CAAO,EAAIoB,EACzBP,IAAY,SACnBxB,GAAQ,MACHA,CACT,CACA,SAASiC,GAAKC,EAAQC,EAAM,CAC1B,IAAMnB,EAAS,CAAC,EAChB,QAAW5C,KAAO+D,EACZnE,OAAOoE,UAAUC,eAAeC,KAAKJ,EAAQ9D,CAAG,IAClD4C,EAAO5C,CAAG,EAAI8D,EAAO9D,CAAG,GAG5B,OAAO4C,CACT,CACA,SAASuB,GAAKL,EAAQC,EAAM,CAC1B,IAAMnB,EAAS,CAAC,EACVwB,EAAU,IAAIC,IAAIN,CAAI,EAC5B,OAAW,CAAC/D,EAAKC,CAAK,IAAKL,OAAO0E,QAAQR,CAAM,EAC1CM,EAAQG,IAAIvE,CAAG,IAEnB4C,EAAO5C,CAAG,EAAIC,GAEhB,OAAO2C,CACT,CACA,SAAS4B,GAAeC,EAAKC,EAAQ,CACnC,IAAMC,EAAS,IAAIC,IAAIH,CAAG,EAC1B,QAAWzE,KAAOJ,OAAOmE,KAAKW,CAAM,EAClCC,EAAOE,aAAaC,OAAO9E,EAAK0E,EAAO1E,CAAG,CAAC,EAE7C,OAAO2E,EAAOI,SAAS,CACzB,CACA,SAASC,GAAkBP,EAAK,CAC9B,IAAME,EAAS,IAAIC,IAAIH,CAAG,EAC1BE,OAAAA,EAAOE,aAAaI,QAAQ,CAACC,EAAIC,IAAMR,EAAOE,aAAaO,OAAOD,CAAC,CAAC,EAC7DR,EAAOI,SAAS,CACzB,CACA,SAASM,GAAoBC,EAAO,CAClC,MAAO,MAAQA,EAAMC,SACvB,CACA,SAASC,GAAeF,EAAOG,EAAM,CACnC,OAAOC,OAAOC,SAASC,OAASP,GAAoBC,CAAK,CAC3D,CACA,SAASO,GAAkB3C,EAAS,CAClC,GAAM,CAAEuB,IAAAA,CAAI,EAAIvB,EACVwB,EAAS,IAAIoB,gBACnB,GAAI5C,EAAQ6C,YAAc,QAAU7C,EAAQ6C,YAAc,KAAM,CAC9D,IAAMC,EAAenE,KAAKC,MAAMoB,EAAQ6C,SAAS,EACjDrB,EAAOuB,IAAI,QAAShD,GAAc+C,CAAY,CAAC,CACjD,CACA,GAAI9C,EAAQgD,SAAU,CACpB,IAAMC,EAActE,KAAKC,MAAMoB,EAAQgD,QAAQ,EAC/CxB,EAAOuB,IAAI,OAAQhD,GAAckD,CAAW,CAAC,CAC/C,CACA,OAAIjD,EAAQkD,UACV1B,EAAOuB,IAAI,WAAY/C,EAAQkD,QAAQ,EACrClD,EAAQmD,OAAS,IACnB3B,EAAOuB,IAAI,OAAQ,GAAG,EACpB/C,EAAQoD,WAAa,IACvB5B,EAAOuB,IAAI,WAAY,GAAG,EACxB/C,EAAQqD,QAAU,IACpB7B,EAAOuB,IAAI,QAAS,GAAG,EACrB/C,EAAQsD,QAAU,IACpB9B,EAAOuB,IAAI,QAAS,GAAG,EACrB/C,EAAQuD,eAAiB,IAC3B/B,EAAOuB,IAAI,eAAgB,GAAG,EAC5B/C,EAAQwD,WAAa,IACvBhC,EAAOuB,IAAI,WAAY,GAAG,EACxB/C,EAAQyD,aAAe,IACzBjC,EAAOuB,IAAI,aAAc,GAAG,EAC1B/C,EAAQ0D,eAAiB,IAC3BlC,EAAOuB,IAAI,eAAgB,GAAG,EAC5B/C,EAAQ2D,MAAQ,QAClBnC,EAAOuB,IAAI,MAAO/C,EAAQ2D,IAAM,IAAM,GAAG,EACvC3D,EAAQ4D,MAAQ,QAClBpC,EAAOuB,IAAI,MAAO/C,EAAQ4D,IAAM,IAAM,GAAG,EACvC5D,EAAQ6D,UAAY,QACtBrC,EAAOuB,IAAI,IAAK/C,EAAQ6D,QAAU,EAAE,EAC/BC,GAASvC,EAAKC,CAAM,CAC7B,CACA,SAASsC,GAASvC,EAAKC,EAAQ,CAC7B,IAAIuC,EAAY,GAIhB,OAHAvC,EAAOO,QAAQ,IAAM,CACnBgC,EAAY,EACd,CAAC,EACGA,EACKxC,EAAM,IAAMC,EAAOK,SAAS,EAC9BN,CACT,CACA,IAAMyC,GAAe,CACnB,QAAS,UACT,GAAM,6CACN,QAAS,YACT,QAAS,oBACT,QAAS,UACT,QAAS,mDACT,GAAM,YACN,QAAS,aACT,QAAS,UACT,QAAS,iCACT,QAAS,QACT,QAAS,cACT,GAAM,cACN,QAAS,SACT,GAAM,WACN,QAAS,SACT,GAAM,cACN,QAAS,WACT,QAAS,qBACT,IAAO,YACP,QAAS,kBACT,QAAS,aACT,GAAM,gBACN,GAAM,UACN,QAAS,SACT,QAAS,wBACT,QAAS,0BACT,QAAS,wCACT,QAAS,kBACT,GAAM,QACN,QAAS,UACT,QAAS,qBACT,IAAO,YACP,QAAS,eACT,QAAS,oGACT,QAAS,uBACT,aAAc,mDACd,aAAc,kDAChB,EACMC,GAAoB,CACxB,SAAU,KACV,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,GAAM,QACN,QAAS,aACT,UAAW,aACX,UAAW,aACX,QAAS,aACT,GAAM,YACR,EACMC,GAAmBxH,OAAOmE,KAAKmD,EAAY,EAAEG,OAAOzH,OAAOmE,KAAKoD,EAAiB,CAAC,EACxF,SAASG,IAAmB,CAC1B,MAAO,OACT,CACA,SAASC,GAAgBC,EAAQ,CAC/B,OAAOC,GAAkBD,CAAM,IAAMC,GAAkBH,GAAiB,CAAC,CAC3E,CACAF,GAAiBM,IAAKC,GAAM,IAAMA,CAAC,EACnC,SAASC,GAAYJ,EAAQ,CAC3B,OAAOJ,GAAiBS,SAASL,CAAM,CACzC,CACA,SAASC,GAAkBD,EAAQ,CACjC,OAAKA,IAESL,GAAkBK,CAAM,GACtBA,EAClB,CACA,SAASM,GAAeN,EAAQ,CAC9B,OAAIA,EAAOK,SAAS,GAAG,IAAM,GACpBL,EACFA,EAAO/E,MAAM,GAAG,EAAE,CAAC,CAC5B,CACA,IAAMsF,GAAqC,IAAI1D,IAAI,CACjDvD,GAAgBC,UAChBD,GAAgBE,OAChBF,GAAgBG,OAChBH,GAAgBI,OAChBJ,GAAgBK,OAChBL,GAAgBM,OAChBN,GAAgBO,QAChBP,GAAgBQ,QAChBR,GAAgBS,IAAI,CACrB,EACKyG,GAAsB,CAC1B,KAAMlH,GAAgBS,KACtB,KAAMT,GAAgBO,QACtB,KAAMP,GAAgBM,OACtB,IAAKN,GAAgBK,OACrB,IAAKL,GAAgBI,OACrB,IAAKJ,GAAgBG,OACrB,IAAKH,GAAgBE,MACvB,EACA,SAASiH,GAAmB/E,EAAS,CACnC,GAAM,CAAEgF,OAAAA,EAAQC,MAAAA,CAAM,EAAIjF,EAC1B,GAAIA,EAAQkF,aAAe,EACzB,MAAO,aACT,IAAIA,EAAalF,EAAQkF,WACzB,GAAI,CAACL,GAAmBxD,IAAI6D,CAAU,GAAK,OAAOF,GAAW,UAAY,OAAOC,GAAU,SAAU,CAClG,IAAME,EAAMxG,KAAKwG,IAAIH,EAAQC,CAAK,EACTH,GAAoBK,CAAG,IAE9CD,EAAaJ,GAAoBK,CAAG,EACxC,CACA,MAAO,GAAGD,CAAU,GACtB,CACA,SAASE,GAAyBC,EAAiBC,EAAK,CACtD,OAAIA,GAAOA,GAAO,GACTD,EAAkBC,EACpBD,CACT,CACA,IAAME,GAA4B,IAAIC,IACtC,SAASC,GAAQC,EAAU,CACzB,OAAO,IAAIC,MAAMD,EAAU,CACzB3C,IAAK,SAASlG,EAAK+I,EAAM7I,EAAO,CAC9B,OAAIL,OAAOoE,UAAUC,eAAeC,KAAK6E,GAAeD,CAAI,EAC1DF,EAASE,CAAI,EAAI7I,EAEjB2I,EAASI,QAAQF,EAAM7I,CAAK,EAEvB,EACT,EACAgJ,IAAK,SAASC,EAAQC,EAAM,CAC1B,GAAI,OAAOP,EAASO,CAAI,GAAM,WAC5B,OAAOP,EAASO,CAAI,EACf,GAAIV,GAAUlE,IAAI4E,CAAI,EAC3B,OAAOP,EAASQ,QAAQD,CAAI,CAEhC,CACF,CAAC,CACH,CACA,IAAMJ,GAAN,KAAoB,CAClBK,QAAQpJ,EAAK,CACX,IAAMqJ,EAAYC,OAAOtJ,CAAG,EAC5B,OAAIyI,GAAUlE,IAAIvE,CAAG,EACZsJ,OAAOb,GAAUQ,IAAII,CAAS,CAAC,EAEjC,IACT,CACAL,QAAQhJ,EAAKuJ,EAAK,CAChBd,GAAUxC,IAAIqD,OAAOtJ,CAAG,EAAGsJ,OAAOC,CAAG,CAAC,CACxC,CACAC,WAAWxJ,EAAK,CACdyI,GAAUrD,OAAOpF,CAAG,CACtB,CACAyJ,OAAQ,CACNhB,GAAUgB,MAAM,CAClB,CACAzJ,IAAI6C,EAAG,CACL,GAAI6G,UAAU5G,SAAW,EACvB,MAAM,IAAI6G,UAAU,gFAAgF,EAGtG,OADYC,MAAMC,KAAKpB,GAAU1E,KAAK,CAAC,EAC5BlB,CAAC,CACd,CACA,IAAIC,QAAS,CACX,OAAO2F,GAAUqB,IACnB,CACF,EACIC,GACAC,GACJ,SAASC,IAAgB,CACvB,IAAMC,EAAuB,IAAInB,GAC3BoB,EAAyB,IAAIpB,GACnCgB,GAAuBpB,GAAQuB,CAAoB,EACnDF,GAAyBrB,GAAQwB,CAAsB,CACzD,CACA,GAAI,CACFJ,GAAuBK,aACvBJ,GAAyBK,cAC3B,MAAc,CACZJ,GAAc,CAChB,EACI,CAACF,IAAwB,CAACC,KAC5BC,GAAc,EAEhB,IAAMK,GAA4B,CAChCC,aAAc,eACdC,cAAe,gBACfC,WAAY,YACd,EACMC,GAAN,MAAMA,CAAgB,CACpBC,YAAYC,EAAO,CACjBvK,GAAc,KAAM,aAAa,EACjCA,GAAc,KAAM,cAAc,EAClCA,GAAc,KAAM,WAAW,EAC3BuK,IACF,KAAKC,YAAcD,EAAMC,YACzB,KAAKC,aAAeF,EAAME,aACtBF,EAAMG,YAAc,SACtB,KAAKA,UAAY,SAEjB,KAAKA,UAAYH,EAAMG,UAG7B,CACA,OAAOC,cAAcC,EAAe,CAClC,IAAMC,EAA0BD,EAAc7B,QAAQkB,GAA0BC,YAAY,EACtFY,EAA2BF,EAAc7B,QAAQkB,GAA0BE,aAAa,EACxFY,EAAwBH,EAAc7B,QAAQkB,GAA0BG,UAAU,EACxF,MAAI,CAACS,GAA2B,CAACC,GAA4B,CAACC,EAA8B,KACrF,IAAIV,EAAgB,CACzBG,YAAaK,EACbJ,aAAcK,EACdJ,UAAWK,CACb,CAAC,CACH,CACA,OAAOC,mBAAmBJ,EAAeK,EAAQ,CAC/CL,EAAcjC,QAAQsB,GAA0BC,aAAce,EAAOT,WAAW,EAChFI,EAAcjC,QAAQsB,GAA0BE,cAAec,EAAOR,YAAY,EAClFG,EAAcjC,QAAQsB,GAA0BG,WAAYa,EAAOP,SAAS,CAC9E,CACA,OAAOQ,kBAAkBN,EAAe,CACtCA,EAAczB,WAAWc,GAA0BC,YAAY,EAC/DU,EAAczB,WAAWc,GAA0BE,aAAa,EAChES,EAAczB,WAAWc,GAA0BG,UAAU,CAC/D,CACF,EACIe,GAAW,KAAa,CAC1Bb,aAAc,CACZtK,GAAc,KAAM,QAAS,CAAA,CAAE,CACjC,CACAoL,KAAKC,EAASC,EAAM,CAClB,KAAKC,SAAS,OAAQF,EAASC,CAAI,EAC/BA,EAAME,QAAQC,IAAIJ,EAASC,CAAI,EAC9BE,QAAQC,IAAIJ,CAAO,CAC1B,CACAK,KAAKL,EAASC,EAAM,CAClB,KAAKC,SAAS,OAAQF,EAASC,CAAI,EACnC,KAAKK,WAAWN,EAASC,CAAI,CAC/B,CACAK,WAAWN,EAASC,EAAM,CACpBA,EAAME,QAAQE,KAAKL,EAASC,CAAI,EAC/BE,QAAQE,KAAKL,CAAO,CAC3B,CACAO,MAAMP,EAASC,EAAM,CACnB,KAAKC,SAAS,QAASF,EAASC,CAAI,EACpC,KAAKO,YAAYR,EAASC,CAAI,CAChC,CACAO,YAAYR,EAASC,EAAM,CACrBA,EAAME,QAAQI,MAAMP,EAASC,CAAI,EAChCE,QAAQI,MAAMP,CAAO,CAC5B,CACAS,QAAQC,EAAOC,EAAM,CACnB,KAAKC,MAAMC,KAAK,CAAEH,MAAAA,EAAOC,KAAAA,CAAK,CAAC,CACjC,CACAG,sBAAsBC,EAAW,CAC/B,KAAKN,QAAQ,OAAQ,CAACT,EAASC,IAAS,KAAKe,cAAcD,EAAW,KAAKE,sBAAsB,OAAQjB,EAASC,CAAI,CAAC,CAAC,EACxH,KAAKQ,QAAQ,QAAS,CAACT,EAASC,IAAS,KAAKe,cAAcD,EAAW,KAAKE,sBAAsB,QAASjB,EAASC,CAAI,CAAC,CAAC,CAC5H,CACAe,cAAcD,EAAWG,EAAS,CAChC,GAAI,CAACA,EAAS,OACd,IAAMC,EAAU,IAAIC,QAAQ,CAC1B,OAAU,mBACV,eAAgB,kBAClB,CAAC,EACD,GAAI,CACF,IAAMxB,EAASZ,GAAgBM,cAAcjB,EAAoB,EAC7DuB,GAAQuB,EAAQ5G,IAAI,gBAAiB,GAAGqF,EAAOP,SAAS,IAAIO,EAAOT,WAAW,EAAE,CACtF,OAASkC,EAAK,CACZlB,QAAQI,MAAM,0CAA2C,CAAEc,IAAAA,CAAI,CAAC,CAClE,CACAC,MAAMP,EAAY,6BAA8B,CAC9CI,QAAAA,EACAI,OAAQ,OACRC,KAAMC,KAAKC,UAAUR,CAAO,CAC9B,CAAC,EAAES,MAAON,GAAQlB,QAAQI,MAAM,2CAA4Cc,CAAG,CAAC,CAClF,CACAJ,sBAAsBP,EAAOV,EAASC,EAAM,CAC1C,OAAKD,EACE,CACLA,QAAS,KAAK4B,6BAA6B5B,CAAO,EAClD6B,UAAWC,UAAUD,UACrB9I,IAAKiB,OAAOC,SAAS8H,KACrBrB,MAAAA,EACAsB,WAAY,KAAKC,2BAA2BjC,EAASC,CAAI,EACzDA,KAAM,KAAKiC,0BAA0BjC,CAAI,CAC3C,EARqB,IASvB,CACA2B,6BAA6B5B,EAAS,CACpC,OAAI,OAAOA,GAAY,SAAiBA,EACpCA,aAAmBmC,MAAcnC,EAAQA,QACtCyB,KAAKC,UAAU1B,CAAO,CAC/B,CACAiC,2BAA2BjC,EAASC,EAAM,CACxC,GAAID,aAAmBmC,MAAO,OAAO,KAAKC,WAAWpC,CAAO,EAC5D,GAAIC,aAAgBkC,MAAO,OAAO,KAAKC,WAAWnC,CAAI,EACtD,GAA6BA,GAAKoB,eAAgBc,MAAO,OAAO,KAAKC,WAAWnC,EAAKoB,GAAG,CAE1F,CACAa,0BAA0BjC,EAAM,CAE9B,GADI,CAACA,GACDA,aAAgBkC,MAAO,OAC3B,IAAIjL,EACJ,GAAI,CACFA,EAASuK,KAAKC,UAAUzB,EAAM,CAAC3L,EAAKC,IAAU,CAC5C,GAAID,IAAQ,MACZ,OAAOC,CACT,CAAC,CACH,OAAS8M,EAAK,CACZlB,QAAQI,MAAM,yBAA0Bc,CAAG,CAC7C,CACA,OAAOnK,CACT,CACAgJ,SAASQ,EAAOV,EAASC,EAAM,CAC7B,QAAWoC,KAAW,KAAKzB,MACrByB,EAAQ3B,QAAUA,GACtB2B,EAAQ1B,KAAKX,EAASC,CAAI,CAE9B,CACAmC,WAAWf,EAAK,CACd,MAAO,GAAGA,EAAIrB,OAAO;EACvBqB,EAAIiB,OAAS,EAAE,EACf,CACF,EACMC,GAAWvI,OAAOwI,QAAU,IAAI1C,GACtC9F,OAAOwI,OAASD,GAChB,IAAME,GAAuB,MAAMA,EAAqB,CACtD,OAAOC,sBAAsB3B,EAAWjF,EAAQ,CAC9C,IAAM6G,EAAOF,GAAqBG,cAAc7B,EAAWjF,CAAM,EACjE,OAAK6G,EACErB,MAAMqB,EAAO,cAAc,EAAEE,KAAMC,GAAQA,EAAIC,KAAK,CAAC,EAAEpB,MAAON,GAAQ,CAC3EkB,GAAShC,MAAM,iCAAkCc,CAAG,CAEtD,CAAC,EAJiB2B,QAAQC,QAAQ,MAAM,CAK1C,CACA,OAAOC,oBAAoBnC,EAAWjF,EAAQqH,EAAU,CACtD,IAAMR,EAAOF,GAAqBG,cAAc7B,EAAWjF,CAAM,EACjE,GAAI,CAAC6G,EAAM,OAAOK,QAAQC,QAAQ,MAAM,EACxC,IAAIG,EACAX,GAAqBY,mBAAmBV,CAAI,EAC9CS,EAAIJ,QAAQC,QAAQR,GAAqBY,mBAAmBV,CAAI,CAAC,EAEjES,EAAI9B,MAAMqB,EAAO,cAAc,EAAEE,KAAMC,GAAQA,EAAIC,KAAK,CAAC,EAAEF,KAAME,IAC/DN,GAAqBY,mBAAmBV,CAAI,EAAII,EACzCA,EACR,EAAEpB,MAAON,GAAQ,CAChBkB,GAAShC,MAAM,iCAAkCc,CAAG,CAEtD,CAAC,EAEH,IAAMiC,EAAiBvH,GAAkBD,CAAM,EAC/C,OAAOsH,EAAEP,KAAME,GAASI,EAASI,YAAYnH,GAAekH,CAAc,EAAGP,CAAI,CAAC,CACpF,CACA,OAAOH,cAAc7B,EAAWjF,EAAQ,CACtC,IAAMwH,EAAiBvH,GAAkBD,CAAM,EAC/C,GAAI,GAACI,GAAYoH,CAAc,GAAKzH,GAAgByH,CAAc,GAClE,OAAOvC,EAAY,mBAAqBuC,CAC1C,CACF,EACA3O,GAAc8N,GAAsB,qBAAsB,CAAC,CAAC,EAC5D,IAAIe,GAAsBf,GAC1B,SAASgB,GAAgBC,EAAMC,EAAW,CACnCA,IAAWA,EAAYC,SAASpC,MACrC,IAAMqC,EAAKD,SAASE,cAAc,UAAU,EAC5CD,EAAGtP,MAAQmP,EACXG,EAAGE,aAAa,WAAY,EAAE,EAC9BF,EAAGG,MAAMC,SAAW,WACpBJ,EAAGG,MAAME,KAAO,UAChBP,EAAUQ,YAAYN,CAAE,EACxBA,EAAGO,OAAO,EACVR,SAASS,YAAY,MAAM,EAC3BV,EAAUW,YAAYT,CAAE,CAC1B,CACA,SAASU,GAAKC,EAAK,CACjB,OAAO,IAAIxB,QAASF,GAAQ,CAC1B2B,WAAW,IAAM3B,EAAI,EAAG0B,CAAG,CAC7B,CAAC,CACH,CACA,SAASE,GAA0BlN,EAAS,CAC1C,GAAM,CAAEmN,SAAAA,EAAUC,WAAAA,EAAYC,YAAAA,EAAaC,WAAAA,EAAa,EAAM,EAAItN,EAC5DuN,EAASnB,SAASE,cAAc,QAAQ,EAQ9C,GAPAiB,EAAOjK,MAAQ8J,EACfG,EAAOtI,MAAQqI,EAAa,OAAS,MACrCC,EAAOvI,OAASsI,EAAa,OAAS,MACtCC,EAAOC,IAAML,EACbI,EAAOE,YAAc,IACrBF,EAAOG,gBAAkB,GACzBH,EAAOI,QAAQC,IAAI,oBAAqB,gBAAiB,eAAgB,aAAa,EAClFN,EAAY,CACd,IAAMO,EAAUzB,SAASE,cAAc,KAAK,EAC5CuB,OAAAA,EAAQrB,MAAMC,SAAW,WACzBoB,EAAQrB,MAAMsB,WAAaT,GAAe,EAAIA,EAAc,KAAKU,QAAQ,CAAC,EAAI,IAAM,SACpFR,EAAOf,MAAMC,SAAW,WACxBc,EAAOf,MAAMwB,MAAQ,IACrBH,EAAQlB,YAAYY,CAAM,EACnBM,EAAQI,SACjB,CACA,OAAOV,EAAOU,SAChB,CACA,SAASC,IAAQ,CACf,MAAI,mBAAmBC,KAAK7D,UAAU8D,QAAQ,EACrC,GAEF,CAAC,EAAE9D,UAAU+D,gBAAkB/D,UAAU+D,eAAiB,GAAK/D,UAAU8D,SAASzJ,SAAS,UAAU,EAC9G,CACA,SAAS2J,IAAW,CAClB,MAAO,iCAAiCH,KAAK7D,UAAUD,SAAS,CAClE,CACA,SAASkE,IAAW,CAClB,MAAO,4BAA4BJ,KAAK7D,UAAUD,SAAS,CAC7D,CACA,IAAImE,GAAmB,OAAOC,WAAe,IAAcA,WAAa,OAAOjM,OAAW,IAAcA,OAAS,OAAOkM,OAAW,IAAcA,OAAS,OAAOC,KAAS,IAAcA,KAAO,CAAC,EAChM,SAASC,GAA0BC,EAAG,CACpC,OAAOA,GAAKA,EAAEC,YAAcpS,OAAOoE,UAAUC,eAAeC,KAAK6N,EAAG,SAAS,EAAIA,EAAE,QAAaA,CAClG,CACA,SAASE,GAAsBC,EAAG,CAChC,GAAItS,OAAOoE,UAAUC,eAAeC,KAAKgO,EAAG,YAAY,EAAG,OAAOA,EAClE,IAAIC,EAAID,EAAEE,QACV,GAAI,OAAOD,GAAK,WAAY,CAC1B,IAAIE,EAAI,SAASC,GAAK,CACpB,OAAI,gBAAgBA,EACXC,QAAQC,UAAUL,EAAGzI,UAAW,KAAKiB,WAAW,EAElDwH,EAAEM,MAAM,KAAM/I,SAAS,CAChC,EACA2I,EAAErO,UAAYmO,EAAEnO,SAClB,MAAOqO,EAAI,CAAC,EACZzS,cAAOC,eAAewS,EAAG,aAAc,CAAEpS,MAAO,EAAK,CAAC,EACtDL,OAAOmE,KAAKmO,CAAC,EAAEjN,QAAQ,SAASE,EAAG,CACjC,IAAIuN,EAAI9S,OAAO+S,yBAAyBT,EAAG/M,CAAC,EAC5CvF,OAAOC,eAAewS,EAAGlN,EAAGuN,EAAEzJ,IAAMyJ,EAAI,CACtCxS,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOiJ,EAAE/M,CAAC,CACZ,CACF,CAAC,CACH,CAAC,EACMkN,CACT,CACA,IAAIO,GACAC,GACJ,SAASC,IAAgB,CACvB,GAAID,GAAmB,OAAOD,GAC9BC,GAAoB,EACpB,IAAIE,EACJ,OAAI,OAAOrN,OAAW,IACpBqN,EAAMrN,OACG,OAAOgM,GAAqB,IACrCqB,EAAMrB,GACG,OAAOG,KAAS,IACzBkB,EAAMlB,KAENkB,EAAM,CAAC,EAETH,GAAWG,EACJH,EACT,CACA,IAAMI,GAAwB,CAAC,EACzBC,GAA0CrT,OAAOsT,OAAuBtT,OAAOC,eAAe,CAClGsT,UAAW,KACXf,QAASY,EACX,EAAGI,OAAOC,YAAa,CAAEpT,MAAO,QAAS,CAAC,CAAC,EACrCqT,GAA6BrB,GAAsBgB,EAAuB,EAC5EM,GACAC,GACJ,SAASC,IAAkB,CACzB,GAAID,GAAqB,OAAOD,GAChCC,GAAsB,EACtB,IAAIE,EAAW,OAAOhC,GAAqB,IAAcA,GAAmB,OAAOhM,OAAW,IAAcA,OAAS,CAAC,EAClHiO,EAASL,GACTM,EACJ,OAAI,OAAOtE,SAAa,IACtBsE,EAAQtE,UAERsE,EAAQF,EAAS,2BAA2B,EACvCE,IACHA,EAAQF,EAAS,2BAA2B,EAAIC,IAGpDJ,GAAaK,EACNL,EACT,CACA,IAAIM,GAAa,CAAEC,QAAS,CAAC,CAAE,EAC3BC,GACJ,SAASC,IAAkB,CACzB,OAAID,KACJA,GAAsB,EACrB,SAASE,EAAQ,CAChB,SAASC,GAAY,CACnB,OAAOD,EAAOH,QAAUI,EAAYtU,OAAOY,OAASZ,OAAOY,OAAO2T,KAAK,EAAI,SAASjC,EAAG,CACrF,QAASkC,EAAI,EAAGA,EAAI1K,UAAU5G,OAAQsR,IAAK,CACzC,IAAIC,EAAI3K,UAAU0K,CAAC,EACnB,QAASE,KAAKD,GAAI,CAAC,GAAGpQ,eAAeC,KAAKmQ,EAAGC,CAAC,IAAMpC,EAAEoC,CAAC,EAAID,EAAEC,CAAC,EAChE,CACA,OAAOpC,CACT,EAAG+B,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,QAASI,EAAUzB,MAAM,KAAM/I,SAAS,CAClH,CACAuK,EAAOH,QAAUI,EAAWD,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,OACnG,EAAGD,EAAU,GACNA,GAAWC,OACpB,CACA,IAAIS,GAAU,CAAET,QAAS,CAAC,CAAE,EACxBU,GACJ,SAASC,IAAiB,CACxB,OAAID,KACJA,GAAqB,EACpB,SAASP,EAAQH,EAAS,CACzB,SAASY,EAAQC,EAAa,CAC5B,GAAIA,GAA4B,OAAOA,GAApB,SAAiC,CAClD,IAAIC,EAAaD,EAAYE,OAASF,EAAYD,SAAWC,EAAYG,SACrEF,IAAYD,EAAcC,EAChC,CACA,GAAiB,OAAOD,GAApB,SAAiC,OAAOI,EAAMJ,CAAW,EAC7D,IAAIK,EAAS1L,OAAOqL,CAAW,EAC3BM,EAAgBC,EAAMF,EAAOG,YAAY,CAAC,EAC9C,GAAIF,EAAe,OAAOA,EAC1B,IAAIA,EAAgBG,EAAQJ,EAAOG,YAAY,CAAC,EAChD,GAAIF,EAAe,OAAOA,EAC1B,GAAID,EAAOlS,SAAW,EAAG,OAAOkS,EAAOK,WAAW,CAAC,CAErD,CACAX,EAAQY,WAAa,SAAoBC,EAAOC,EAAY,CAC1D,GAAID,GAAsB,OAAOA,GAApB,SAA2B,CACtC,IAAIE,EAAWF,EAAMV,OAASU,EAAMb,SAAWa,EAAMT,SACrD,GAAIW,GAAa,KACf,MAAO,GAET,GAAI,OAAOD,GAAe,SAAU,CAClC,IAAIP,EAAgBC,EAAMM,EAAWL,YAAY,CAAC,EAClD,GAAIF,EACF,OAAOA,IAAkBQ,EAE3B,IAAIR,EAAgBG,EAAQI,EAAWL,YAAY,CAAC,EACpD,GAAIF,EACF,OAAOA,IAAkBQ,CAE7B,SAAW,OAAOD,GAAe,SAC/B,OAAOA,IAAeC,EAExB,MAAO,EACT,CACF,EACA3B,EAAUG,EAAOH,QAAUY,EAC3B,IAAIQ,EAAQpB,EAAQ4B,KAAO5B,EAAQoB,MAAQ,CACzC,UAAa,EACb,IAAO,EACP,MAAS,GACT,MAAS,GACT,KAAQ,GACR,IAAO,GACP,cAAe,GACf,YAAa,GACb,IAAO,GACP,MAAS,GACT,UAAW,GACX,YAAa,GACb,IAAO,GACP,KAAQ,GACR,KAAQ,GACR,GAAM,GACN,MAAS,GACT,KAAQ,GACR,OAAU,GACV,OAAU,GACV,QAAW,GACX,eAAgB,GAChB,gBAAiB,GACjB,WAAY,IACZ,WAAY,IACZ,WAAY,IACZ,WAAY,IACZ,WAAY,IACZ,WAAY,IACZ,cAAe,IACf,cAAe,IACf,gBAAiB,IACjB,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IACL,KAAM,IACN,IAAK,IACL,IAAK,GACP,EACIE,EAAUtB,EAAQsB,QAAU,CAC9B,QAAW,GACX,SAAK,GACL,SAAK,GACL,SAAK,GACL,SAAK,GACL,IAAO,GACP,QAAW,GACX,OAAU,GACV,MAAS,GACT,MAAS,GACT,KAAQ,GACR,OAAU,GACV,OAAU,GACV,IAAO,GACP,SAAY,GACZ,KAAQ,GACR,KAAQ,GACR,IAAO,GACP,IAAO,GACP,IAAO,EACT,EAIA,IAAKvS,EAAI,GAAIA,EAAI,IAAKA,IAAKqS,EAAM5L,OAAOqM,aAAa9S,CAAC,CAAC,EAAIA,EAAI,GAC/D,QAASA,EAAI,GAAIA,EAAI,GAAIA,IAAKqS,EAAMrS,EAAI,EAAE,EAAIA,EAC9C,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAAKqS,EAAM,IAAMrS,CAAC,EAAIA,EAAI,IAC9C,IAAKA,EAAI,EAAGA,EAAI,GAAIA,IAAKqS,EAAM,UAAYrS,CAAC,EAAIA,EAAI,GACpD,IAAIkS,EAAQjB,EAAQiB,MAAQjB,EAAQtN,MAAQ,CAAC,EAC7C,IAAK3D,KAAKqS,EAAOH,EAAMG,EAAMrS,CAAC,CAAC,EAAIA,EACnC,QAAS+S,KAASR,EAChBF,EAAMU,CAAK,EAAIR,EAAQQ,CAAK,CAEhC,EAAGrB,GAASA,GAAQT,OAAO,GACpBS,GAAQT,OACjB,CACA,IAAI+B,GAAwB,CAAE/B,QAAS,CAAC,CAAE,EACtCgC,GACJ,SAASC,IAA+B,CACtC,OAAID,KACJA,GAAmC,EAClC,SAAS7B,EAAQ,CAChB,SAAS+B,EAAuB5B,EAAG,CACjC,GAAeA,IAAX,OAAc,MAAM,IAAI6B,eAAe,2DAA2D,EACtG,OAAO7B,CACT,CACAH,EAAOH,QAAUkC,EAAwB/B,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,OAChH,EAAG+B,EAAqB,GACjBA,GAAsB/B,OAC/B,CACA,IAAIoC,GAAgB,CAAEpC,QAAS,CAAC,CAAE,EAC9BqC,GAAiB,CAAErC,QAAS,CAAC,CAAE,EAC/BsC,GACJ,SAASC,IAAwB,CAC/B,OAAID,KACJA,GAA4B,EAC3B,SAASnC,EAAQ,CAChB,SAASqC,EAAgBjC,EAAGD,EAAG,CAC7B,OAAOH,EAAOH,QAAUwC,EAAkB1W,OAAOuW,eAAiBvW,OAAOuW,eAAehC,KAAK,EAAI,SAASoC,EAAIC,EAAI,CAChH,OAAOD,EAAGpD,UAAYqD,EAAID,CAC5B,EAAGtC,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,QAASwC,EAAgBjC,EAAGD,CAAC,CACvG,CACAH,EAAOH,QAAUwC,EAAiBrC,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,OACzG,EAAGqC,EAAc,GACVA,GAAerC,OACxB,CACA,IAAI2C,GACJ,SAASC,IAAuB,CAC9B,OAAID,KACJA,GAA2B,EAC1B,SAASxC,EAAQ,CAChB,IAAI0C,EAAkBN,GAAsB,EAC5C,SAASO,EAAevC,EAAGwC,EAAG,CAC5BxC,EAAErQ,UAAYpE,OAAOkX,OAAOD,EAAE7S,SAAS,EAAGqQ,EAAErQ,UAAU2G,YAAc0J,EAAGsC,EAAgBtC,EAAGwC,CAAC,CAC7F,CACA5C,EAAOH,QAAU8C,EAAgB3C,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,OACxG,EAAGoC,EAAa,GACTA,GAAcpC,OACvB,CACA,IAAIiD,GACAC,GACJ,SAASC,IAAe,CACtB,GAAID,GAAkB,OAAOD,GAC7BC,GAAmB,EACnBD,GAAQG,EACR,SAASA,EAAenX,EAAKoX,EAAS,CACpC,IAAI1I,EACAxC,EAAQ,KACZ,GAAI,CACFwC,EAAOtB,KAAKiK,MAAMrX,EAAKoX,CAAO,CAChC,OAASpK,EAAK,CACZd,EAAQc,CACV,CACA,MAAO,CAACd,EAAOwC,CAAI,CACrB,CACA,OAAOsI,EACT,CACA,IAAIM,GAAM,CAAEvD,QAAS,CAAC,CAAE,EACpBwD,GACAC,GACJ,SAASC,IAAoB,CAC3B,GAAID,GAAuB,OAAOD,GAClCC,GAAwB,EACxBD,GAAeG,EACf,IAAI1S,EAAWnF,OAAOoE,UAAUe,SAChC,SAAS0S,EAAWC,EAAI,CACtB,GAAI,CAACA,EACH,MAAO,GAET,IAAIC,EAAS5S,EAASb,KAAKwT,CAAE,EAC7B,OAAOC,IAAW,qBAAuB,OAAOD,GAAO,YAAcC,IAAW,mBAAqB,OAAOjS,OAAW,MACtHgS,IAAOhS,OAAOyK,YAAcuH,IAAOhS,OAAOkS,OAASF,IAAOhS,OAAOmS,SAAWH,IAAOhS,OAAOoS,OAC7F,CACA,OAAOR,EACT,CACA,IAAIS,GACAC,GACJ,SAASC,IAAqB,CAC5B,GAAID,GAAwB,OAAOD,GACnCC,GAAyB,EACzB,IAAIE,EAAUpF,GAAc,EACxBqF,EAAsB,SAA8BC,EAAUC,EAAoB,CACpF,OAAIA,IAAuB,SACzBA,EAAqB,IAEhB,SAAStL,EAAKuL,EAAUC,EAAc,CAC3C,GAAIxL,EAAK,CACPqL,EAASrL,CAAG,EACZ,MACF,CACA,GAAIuL,EAASE,YAAc,KAAOF,EAASE,YAAc,IAAK,CAC5D,IAAIC,EAAQF,EACZ,GAAIF,EACF,GAAIH,EAAQQ,YAAa,CACvB,IAAIC,EAAUC,EAAWN,EAASzL,SAAWyL,EAASzL,QAAQ,cAAc,CAAC,EAC7E,GAAI,CACF4L,EAAQ,IAAIC,YAAYC,CAAO,EAAEE,OAAON,CAAY,CACtD,MAAY,CACZ,CACF,MACEE,EAAQnP,OAAOqM,aAAalD,MAAM,KAAM,IAAIqG,WAAWP,CAAY,CAAC,EAGxEH,EAAS,CACPK,MAAAA,CACF,CAAC,EACD,MACF,CACAL,EAAS,KAAMG,CAAY,CAC7B,CACF,EACA,SAASK,EAAWG,EAAmB,CACrC,OAAIA,IAAsB,SACxBA,EAAoB,IAEfA,EAAkB5D,YAAY,EAAE1S,MAAM,GAAG,EAAEuW,OAAO,SAASL,EAASM,EAAa,CACtF,IAAIC,EAAqBD,EAAYxW,MAAM,GAAG,EAAG0W,EAAOD,EAAmB,CAAC,EAAGjZ,EAAQiZ,EAAmB,CAAC,EAC3G,OAAIC,EAAKC,KAAK,IAAM,UACXnZ,EAAMmZ,KAAK,EAEbT,CACT,EAAG,OAAO,CACZ,CACAZ,OAAAA,GAAcI,EACPJ,EACT,CACA,IAAIsB,GACJ,SAASC,IAAa,CACpB,GAAID,GAAgB,OAAOhC,GAAIvD,QAC/BuF,GAAiB,EACjB,IAAInB,EAAUpF,GAAc,EACxBoB,EAAYF,GAAgB,EAC5ByD,EAAaD,GAAkB,EACnC+B,EAAUxB,YAAcE,GAAmB,EAQ3C,IAAIuB,EAAe,SAAuB3M,EAAS,CACjD,IAAIjK,EAAS,CAAC,EACd,OAAKiK,GAGLA,EAAQuM,KAAK,EAAE3W,MAAM;CAAI,EAAEwC,QAAQ,SAASwU,EAAK,CAC/C,IAAIC,EAAQD,EAAIE,QAAQ,GAAG,EACvB3Z,EAAMyZ,EAAIG,MAAM,EAAGF,CAAK,EAAEN,KAAK,EAAEjE,YAAY,EAC7ClV,EAAQwZ,EAAIG,MAAMF,EAAQ,CAAC,EAAEN,KAAK,EAClC,OAAOxW,EAAO5C,CAAG,EAAM,IACzB4C,EAAO5C,CAAG,EAAIC,EACL2J,MAAMiQ,QAAQjX,EAAO5C,CAAG,CAAC,EAClC4C,EAAO5C,CAAG,EAAEuM,KAAKtM,CAAK,EAEtB2C,EAAO5C,CAAG,EAAI,CAAC4C,EAAO5C,CAAG,EAAGC,CAAK,CAErC,CAAC,EACM2C,CACT,EACAyU,GAAIvD,QAAUyF,EACdlC,GAAIvD,QAAQ1B,QAAUmH,EACtBA,EAAUO,eAAiB5B,EAAQ4B,gBAAkBC,EACrDR,EAAUS,eAAiB,oBAAqB,IAAIT,EAAUO,eAAmBP,EAAUO,eAAiB5B,EAAQ8B,eACpHC,EAAa,CAAC,MAAO,MAAO,OAAQ,QAAS,OAAQ,QAAQ,EAAG,SAAShN,EAAQ,CAC/EsM,EAAUtM,IAAW,SAAW,MAAQA,CAAM,EAAI,SAASiN,EAAKhX,EAASkV,EAAU,CACjFlV,OAAAA,EAAUiX,EAAWD,EAAKhX,EAASkV,CAAQ,EAC3ClV,EAAQ+J,OAASA,EAAOmN,YAAY,EAC7BC,EAAWnX,CAAO,CAC3B,CACF,CAAC,EACD,SAAS+W,EAAaK,EAAOC,EAAU,CACrC,QAAS1X,EAAI,EAAGA,EAAIyX,EAAMxX,OAAQD,IAChC0X,EAASD,EAAMzX,CAAC,CAAC,CAErB,CACA,SAAS2X,EAAQza,EAAK,CACpB,QAAS8C,KAAK9C,EACZ,GAAIA,EAAIkE,eAAepB,CAAC,EAAG,MAAO,GAEpC,MAAO,EACT,CACA,SAASsX,EAAWD,EAAKhX,EAASkV,EAAU,CAC1C,IAAI1T,EAASwV,EACb,OAAIzC,EAAWvU,CAAO,GACpBkV,EAAWlV,EACP,OAAOgX,GAAQ,WACjBxV,EAAS,CACPwV,IAAAA,CACF,IAGFxV,EAASwP,EAAU,CAAC,EAAGhR,EAAS,CAC9BgX,IAAAA,CACF,CAAC,EAEHxV,EAAO0T,SAAWA,EACX1T,CACT,CACA,SAAS6U,EAAUW,EAAKhX,EAASkV,EAAU,CACzClV,OAAAA,EAAUiX,EAAWD,EAAKhX,EAASkV,CAAQ,EACpCiC,EAAWnX,CAAO,CAC3B,CACA,SAASmX,EAAWnX,EAAS,CAC3B,GAAI,OAAOA,EAAQkV,SAAa,IAC9B,MAAM,IAAIvK,MAAM,2BAA2B,EAE7C,IAAI4M,EAAS,GACTrC,EAAW,SAAgBrL,GAAKuL,GAAUoC,GAAO,CAC9CD,IACHA,EAAS,GACTvX,EAAQkV,SAASrL,GAAKuL,GAAUoC,EAAK,EAEzC,EACA,SAASC,GAAmB,CACtBC,EAAIC,aAAe,GACrB1K,WAAW2K,EAAU,CAAC,CAE1B,CACA,SAASC,GAAU,CACjB,IAAIL,GAAQ,OAMZ,GALIE,EAAItC,SACNoC,GAAQE,EAAItC,SAEZoC,GAAQE,EAAII,cAAgBC,EAAOL,CAAG,EAEpCM,EACF,GAAI,CACFR,GAAQvN,KAAKiK,MAAMsD,EAAK,CAC1B,MAAY,CACZ,CAEF,OAAOA,EACT,CACA,SAASS,EAAUC,GAAK,CACtBC,oBAAaC,CAAY,EACnBF,cAAevN,QACnBuN,GAAM,IAAIvN,MAAM,IAAMuN,IAAO,+BAA+B,GAE9DA,GAAI5C,WAAa,EACVJ,EAASgD,GAAKG,CAAe,CACtC,CACA,SAAST,GAAW,CAClB,GAAIU,CAAAA,EACJ,KAAIC,GACJJ,aAAaC,CAAY,EACrBpY,EAAQwY,QAAUd,EAAIe,SAAW,OACnCF,GAAU,IAEVA,GAAUb,EAAIe,SAAW,KAAO,IAAMf,EAAIe,OAE5C,IAAIrD,GAAWiD,EACXxO,GAAM,KACV,OAAI0O,KAAY,GACdnD,GAAW,CACTpL,KAAM6N,EAAQ,EACdvC,WAAYiD,GACZxO,OAAAA,EACAJ,QAAS,CAAC,EACVpI,IAAKyV,EACL0B,WAAYhB,CACd,EACIA,EAAIiB,wBACNvD,GAASzL,QAAU2M,EAAaoB,EAAIiB,sBAAsB,CAAC,IAG7D9O,GAAM,IAAIc,MAAM,+BAA+B,EAE1CuK,EAASrL,GAAKuL,GAAUA,GAASpL,IAAI,EAC9C,CACA,IAAI0N,EAAM1X,EAAQ0X,KAAO,KACpBA,IACC1X,EAAQ4Y,MAAQ5Y,EAAQwY,OAC1Bd,EAAM,IAAIrB,EAAUS,eAEpBY,EAAM,IAAIrB,EAAUO,gBAGxB,IAAI9Z,EACAwb,EACAtB,EAAMU,EAAInW,IAAMvB,EAAQgX,KAAOhX,EAAQuB,IACvCwI,EAAS2N,EAAI3N,OAAS/J,EAAQ+J,QAAU,MACxCC,EAAOhK,EAAQgK,MAAQhK,EAAQ6Y,KAC/BlP,EAAU+N,EAAI/N,QAAU3J,EAAQ2J,SAAW,CAAC,EAC5CmP,EAAO,CAAC,CAAC9Y,EAAQ8Y,KACjBd,EAAS,GACTI,EACAC,EAAkB,CACpBrO,KAAM,OACNL,QAAS,CAAC,EACV2L,WAAY,EACZvL,OAAAA,EACAxI,IAAKyV,EACL0B,WAAYhB,CACd,EAgCA,GA/BI,SAAU1X,GAAWA,EAAQuL,OAAS,KACxCyM,EAAS,GACTrO,EAAQ,QAAaA,EAAQ,SAAcA,EAAQ,OAAY,oBAC3DI,IAAW,OAASA,IAAW,SACjCJ,EAAQ,cAAc,GAAKA,EAAQ,cAAc,IAAMA,EAAQ,cAAc,EAAI,oBACjFK,EAAOC,KAAKC,UAAUlK,EAAQuL,OAAS,GAAOvB,EAAOhK,EAAQuL,IAAI,IAGrEmM,EAAIqB,mBAAqBtB,EACzBC,EAAIsB,OAASpB,EACbF,EAAIuB,QAAUhB,EACdP,EAAIwB,WAAa,UAAW,CAC5B,EACAxB,EAAIyB,QAAU,UAAW,CACvBb,EAAU,EACZ,EACAZ,EAAI0B,UAAYnB,EAChBP,EAAI2B,KAAKtP,EAAQiN,EAAK,CAAC8B,EAAM9Y,EAAQsZ,SAAUtZ,EAAQuZ,QAAQ,EAC1DT,IACHpB,EAAI8B,gBAAkB,CAAC,CAACxZ,EAAQwZ,iBAE9B,CAACV,GAAQ9Y,EAAQyZ,QAAU,IAC7BrB,EAAenL,WAAW,UAAW,CACnC,GAAIqL,CAAAA,EACJA,CAAAA,EAAU,GACVZ,EAAIgC,MAAM,SAAS,EACnB,IAAIxI,GAAI,IAAIvG,MAAM,wBAAwB,EAC1CuG,GAAEsB,KAAO,YACTyF,EAAU/G,EAAC,EACb,EAAGlR,EAAQyZ,OAAO,GAEhB/B,EAAIiC,iBACN,IAAK7c,KAAO6M,EACNA,EAAQ5I,eAAejE,CAAG,GAC5B4a,EAAIiC,iBAAiB7c,EAAK6M,EAAQ7M,CAAG,CAAC,UAGjCkD,EAAQ2J,SAAW,CAAC2N,EAAQtX,EAAQ2J,OAAO,EACpD,MAAM,IAAIgB,MAAM,mDAAmD,EAErE,MAAI,iBAAkB3K,IACpB0X,EAAIkC,aAAe5Z,EAAQ4Z,cAEzB,eAAgB5Z,GAAW,OAAOA,EAAQ6Z,YAAe,YAC3D7Z,EAAQ6Z,WAAWnC,CAAG,EAExBA,EAAIoC,KAAK9P,GAAQ,IAAI,EACd0N,CACT,CACA,SAASK,EAAOL,EAAK,CACnB,GAAI,CACF,GAAIA,EAAIkC,eAAiB,WACvB,OAAOlC,EAAIqC,YAEb,IAAIC,EAAwBtC,EAAIqC,aAAerC,EAAIqC,YAAYE,gBAAgBC,WAAa,cAC5F,GAAIxC,EAAIkC,eAAiB,IAAM,CAACI,EAC9B,OAAOtC,EAAIqC,WAEf,MAAY,CACZ,CACA,OAAO,IACT,CACA,SAASlD,GAAQ,CACjB,CACA,OAAO1C,GAAIvD,OACb,CACA,IAAIuJ,GAAe,CAAEvJ,QAAS,CAAC,CAAE,EAC7BwJ,GACAC,GACJ,SAASC,IAAa,CACpB,GAAID,GAAgB,OAAOD,GAC3BC,GAAiB,EACjB,IAAIE,EAAYhK,GAAgB,EAC5BiK,EAAa9d,OAAOkX,QAA0B,UAAW,CAC3D,SAAS6G,GAAI,CACb,CACA,OAAO,SAAS9G,EAAG,CACjB,GAAInN,UAAU5G,SAAW,EACvB,MAAM,IAAI+K,MAAM,gDAAgD,EAElE8P,OAAAA,EAAE3Z,UAAY6S,EACP,IAAI8G,CACb,CACF,EAAE,EACF,SAASC,EAAaC,EAAWnS,EAAS,CACxC,KAAKvC,KAAO,eACZ,KAAKuM,KAAOmI,EAAUnI,KACtB,KAAKhK,QAAUA,GAAWmS,EAAUnS,OACtC,CACAkS,EAAa5Z,UAAY0Z,EAAW7P,MAAM7J,SAAS,EACnD4Z,EAAa5Z,UAAU2G,YAAciT,EACrCA,EAAaE,OAAS,CACpBC,aAAc,CACZrI,KAAM,EACNhK,QAAS,6BACX,EACAsS,aAAc,CACZtI,KAAM,EACNhK,QAAS,uBACX,CACF,EACA,SAASuS,EAAgBC,EAAO,CAC9B,SAASC,EAAeC,EAAGC,GAAIC,GAAGnM,GAAG,CACnC,OAAQiM,EAAI,GAAK,MAAQC,GAAK,GAAK,IAAMC,GAAI,IAAMnM,GAAI,GAAK,GAC9D,CACA,IAAIoM,EAAIL,EAAMhc,MAAM,sCAAsC,EAC1D,OAAKqc,EAGDA,EAAE,CAAC,EACEJ,EAAeI,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAEC,QAAQ,IAAK,EAAE,EAAGD,EAAE,CAAC,CAAC,EACpDA,EAAE,CAAC,EAAI,GACTJ,EAAeI,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAG,EAAGA,EAAE,CAAC,CAAC,EAElCJ,EAAe,EAAGI,EAAE,CAAC,EAAGA,EAAE,CAAC,EAAGA,EAAE,CAAC,CAAC,EAPlC,IASX,CACA,SAASE,GAAY,CACnB,KAAKC,OAAShB,EAAW,IAAI,CAC/B,CACAe,EAAUza,UAAY,CAEpBiC,IAAK,SAASd,EAAGwZ,EAAG,CACd,CAAC,KAAK1V,IAAI9D,CAAC,GAAKwZ,IAAM,KACxB,KAAKD,OAAOvZ,CAAC,EAAIwZ,EAErB,EAMA1V,IAAK,SAAS9D,EAAGyZ,EAAMC,EAAY,CACjC,OAAIA,EACK,KAAKta,IAAIY,CAAC,EAAI,KAAKuZ,OAAOvZ,CAAC,EAAIyZ,EAAKC,CAAU,EAEhD,KAAKta,IAAIY,CAAC,EAAI,KAAKuZ,OAAOvZ,CAAC,EAAIyZ,CACxC,EAEAra,IAAK,SAASY,EAAG,CACf,OAAOA,KAAK,KAAKuZ,MACnB,EAEAI,IAAK,SAAS3Z,EAAGwZ,EAAGtM,EAAG,CACrB,QAASH,EAAI,EAAGA,EAAIG,EAAEvP,OAAQ,EAAEoP,EAC9B,GAAIyM,IAAMtM,EAAEH,CAAC,EAAG,CACd,KAAKjM,IAAId,EAAGwZ,CAAC,EACb,KACF,CAEJ,EAEAI,QAAS,SAAS5Z,EAAGwZ,EAAG,CAClB,UAAUtN,KAAKsN,CAAC,GAClB,KAAK1Y,IAAId,EAAG/C,SAASuc,EAAG,EAAE,CAAC,CAE/B,EAEAK,QAAS,SAAS7Z,EAAGwZ,EAAG,CACtB,OAAIA,EAAEzc,MAAM,0BAA0B,IACpCyc,EAAIM,WAAWN,CAAC,EACZA,GAAK,GAAKA,GAAK,MACjB,KAAK1Y,IAAId,EAAGwZ,CAAC,EACN,IAGJ,EACT,CACF,EACA,SAASO,EAAchB,EAAO9F,EAAU+G,EAAeC,EAAY,CACjE,IAAI/c,GAAS+c,EAAalB,EAAMzb,MAAM2c,CAAU,EAAI,CAAClB,CAAK,EAC1D,QAASrb,MAAKR,GACZ,GAAI,OAAOA,GAAOQ,EAAC,GAAM,SAGzB,KAAIwc,GAAKhd,GAAOQ,EAAC,EAAEJ,MAAM0c,CAAa,EACtC,GAAIE,GAAGvc,SAAW,EAGlB,KAAIqC,GAAIka,GAAG,CAAC,EAAEjG,KAAK,EACfuF,GAAIU,GAAG,CAAC,EAAEjG,KAAK,EACnBhB,EAASjT,GAAGwZ,EAAC,GAEjB,CACA,SAASW,EAAUpB,EAAOqB,EAAKC,EAAY,CACzC,IAAIC,EAASvB,EACb,SAASwB,IAAmB,CAC1B,IAAIC,GAAK1B,EAAgBC,CAAK,EAC9B,GAAIyB,KAAO,KACT,MAAM,IAAI/B,EACRA,EAAaE,OAAOE,aACpB,wBAA0ByB,CAC5B,EAEFvB,OAAAA,EAAQA,EAAMM,QAAQ,iBAAkB,EAAE,EACnCmB,EACT,CACA,SAASC,GAAmBC,GAAQC,GAAM,CACxC,IAAIC,EAAW,IAAItB,EACnBS,EAAcW,GAAQ,SAAS1a,GAAGwZ,GAAG,CACnC,OAAQxZ,GAAC,CACP,IAAK,SACH,QAAStC,GAAI2c,EAAW1c,OAAS,EAAGD,IAAK,EAAGA,KAC1C,GAAI2c,EAAW3c,EAAC,EAAEmd,KAAOrB,GAAG,CAC1BoB,EAAS9Z,IAAId,GAAGqa,EAAW3c,EAAC,EAAEod,MAAM,EACpC,KACF,CAEF,MACF,IAAK,WACHF,EAASjB,IAAI3Z,GAAGwZ,GAAG,CAAC,KAAM,IAAI,CAAC,EAC/B,MACF,IAAK,OACH,IAAIuB,EAAOvB,GAAElc,MAAM,GAAG,EAAG0d,GAAQD,EAAK,CAAC,EACvCH,EAAShB,QAAQ5Z,GAAGgb,EAAK,EACzBJ,EAASf,QAAQ7Z,GAAGgb,EAAK,GAAIJ,EAAS9Z,IAAI,cAAe,EAAK,EAC9D8Z,EAASjB,IAAI3Z,GAAGgb,GAAO,CAAC,MAAM,CAAC,EAC3BD,EAAKpd,SAAW,GAClBid,EAASjB,IAAI,YAAaoB,EAAK,CAAC,EAAG,CAAC,QAAS,SAAU,KAAK,CAAC,EAE/D,MACF,IAAK,WACHA,EAAOvB,GAAElc,MAAM,GAAG,EAClBsd,EAASf,QAAQ7Z,GAAG+a,EAAK,CAAC,CAAC,EACvBA,EAAKpd,SAAW,GAClBid,EAASjB,IAAI,gBAAiBoB,EAAK,CAAC,EAAG,CAAC,QAAS,SAAU,KAAK,CAAC,EAEnE,MACF,IAAK,OACHH,EAASf,QAAQ7Z,GAAGwZ,EAAC,EACrB,MACF,IAAK,QACHoB,EAASjB,IAAI3Z,GAAGwZ,GAAG,CAAC,QAAS,SAAU,MAAO,OAAQ,OAAO,CAAC,EAC9D,KACJ,CACF,EAAG,IAAK,IAAI,EACZmB,GAAKG,OAASF,EAAS9W,IAAI,SAAU,IAAI,EACzC6W,GAAKM,SAAWL,EAAS9W,IAAI,WAAY,EAAE,EAC3C,GAAI,CACF6W,GAAKO,KAAON,EAAS9W,IAAI,OAAQ,MAAM,CACzC,MAAY,CACZ,CACA6W,GAAKQ,UAAYP,EAAS9W,IAAI,YAAa,OAAO,EAClD6W,GAAKS,YAAcR,EAAS9W,IAAI,cAAe,EAAI,EACnD6W,GAAKhW,KAAOiW,EAAS9W,IAAI,OAAQ,GAAG,EACpC,GAAI,CACF6W,GAAKU,MAAQT,EAAS9W,IAAI,QAAS,QAAQ,CAC7C,MAAY,CACV6W,GAAKU,MAAQT,EAAS9W,IAAI,QAAS,QAAQ,CAC7C,CACA,GAAI,CACF6W,GAAKnQ,SAAWoQ,EAAS9W,IAAI,WAAY,MAAM,CACjD,MAAY,CACV6W,GAAKnQ,SAAWoQ,EAAS9W,IAAI,WAAY,CACvCwX,MAAO,EACP7Q,KAAM,EACN8Q,OAAQ,GACRC,OAAQ,GACRC,IAAK,IACLC,MAAO,GACT,EAAGf,GAAKU,KAAK,CACf,CACAV,GAAKgB,cAAgBf,EAAS9W,IAAI,gBAAiB,CACjDwX,MAAO,QACP7Q,KAAM,QACN8Q,OAAQ,SACRC,OAAQ,SACRC,IAAK,MACLC,MAAO,KACT,EAAGf,GAAKU,KAAK,CACf,CACA,SAASO,IAAiB,CACxB7C,EAAQA,EAAMM,QAAQ,OAAQ,EAAE,CAClC,CAIA,GAHAuC,GAAe,EACfxB,EAAIxZ,UAAY2Z,GAAiB,EACjCqB,GAAe,EACX7C,EAAM8C,OAAO,EAAG,CAAC,IAAM,MACzB,MAAM,IAAIpD,EACRA,EAAaE,OAAOE,aACpB,kEAAoEyB,CACtE,EAEFvB,EAAQA,EAAM8C,OAAO,CAAC,EACtBD,GAAe,EACfxB,EAAI0B,QAAUvB,GAAiB,EAC/BqB,GAAe,EACfnB,GAAmB1B,EAAOqB,CAAG,CAC/B,CACA,IAAI2B,EAAmBzD,EAAUjO,eAAiBiO,EAAUjO,cAAc,UAAU,EAChF2R,EAAW,CACbC,EAAG,OACHve,EAAG,IACHwe,EAAG,IACHC,EAAG,IACHC,KAAM,OACNC,GAAI,KACJ7C,EAAG,OACH8C,KAAM,MACR,EACIC,EAAsB,CACxBC,MAAO,sBACPC,KAAM,kBACNC,KAAM,oBACNC,IAAK,kBACLC,OAAQ,oBACRC,QAAS,oBACTC,KAAM,kBACNC,MAAO,eACT,EACIC,EAAiB,CACnBxD,EAAG,QACH8C,KAAM,MACR,EACIW,EAAe,CACjBZ,GAAI,MACN,EACA,SAASa,EAAanK,EAASgG,EAAO,CACpC,SAASoE,GAAY,CACnB,GAAI,CAACpE,EACH,OAAO,KAET,SAASqE,GAAQ3f,GAAQ,CACvBsb,OAAAA,EAAQA,EAAM8C,OAAOpe,GAAOE,MAAM,EAC3BF,EACT,CACA,IAAIyb,GAAKH,EAAMhc,MAAM,qBAAqB,EAC1C,OAAOqgB,GAAQlE,GAAG,CAAC,EAAIA,GAAG,CAAC,EAAIA,GAAG,CAAC,CAAC,CACtC,CACA,SAASmE,EAAUlE,GAAG,CACpB4C,OAAAA,EAAiBuB,UAAYnE,GAC7BA,GAAI4C,EAAiBwB,YACrBxB,EAAiBwB,YAAc,GACxBpE,EACT,CACA,SAASqE,GAAUC,GAAUC,GAAS,CACpC,MAAO,CAACT,EAAaS,GAAQC,SAAS,GAAKV,EAAaS,GAAQC,SAAS,IAAMF,GAASE,SAC1F,CACA,SAAStT,GAAc2J,GAAM4J,GAAY,CACvC,IAAIC,GAAU7B,EAAShI,EAAI,EAC3B,GAAI,CAAC6J,GACH,OAAO,KAET,IAAIH,GAAU3K,EAAQ5I,SAASE,cAAcwT,EAAO,EAChD7Z,GAAOgZ,EAAehJ,EAAI,EAC9B,OAAIhQ,IAAQ4Z,KACVF,GAAQ1Z,EAAI,EAAI4Z,GAAW3J,KAAK,GAE3ByJ,EACT,CAEA,QADII,GAAU/K,EAAQ5I,SAASE,cAAc,KAAK,EAAG0T,GAAUD,GAAS5O,GAAG8O,EAAW,CAAA,GAC9E9O,GAAIiO,EAAU,KAAO,MAAM,CACjC,GAAIjO,GAAE,CAAC,IAAM,IAAK,CAChB,GAAIA,GAAE,CAAC,IAAM,IAAK,CACZ8O,EAASrgB,QAAUqgB,EAASA,EAASrgB,OAAS,CAAC,IAAMuR,GAAE2M,OAAO,CAAC,EAAExC,QAAQ,IAAK,EAAE,IAClF2E,EAASC,IAAI,EACbF,GAAUA,GAAQG,YAEpB,QACF,CACA,IAAI1D,GAAK1B,EAAgB5J,GAAE2M,OAAO,EAAG3M,GAAEvR,OAAS,CAAC,CAAC,EAC9CwgB,GACJ,GAAI3D,GAAI,CACN2D,GAAOpL,EAAQ5I,SAASiU,4BAA4B,YAAa5D,EAAE,EACnEuD,GAAQrT,YAAYyT,EAAI,EACxB,QACF,CACA,IAAI/E,GAAIlK,GAAEnS,MAAM,kDAAkD,EAQlE,GAPI,CAACqc,KAGL+E,GAAO9T,GAAc+O,GAAE,CAAC,EAAGA,GAAE,CAAC,CAAC,EAC3B,CAAC+E,KAGD,CAACX,GAAUO,GAASI,EAAI,EAC1B,SAEF,GAAI/E,GAAE,CAAC,EAAG,CACR,IAAIiF,EAAUjF,GAAE,CAAC,EAAE9b,MAAM,GAAG,EAC5B+gB,EAAQve,QAAQ,SAASwe,GAAI,CAC3B,IAAIC,GAAU,OAAOrS,KAAKoS,EAAE,EACxBE,GAAYD,GAAUD,GAAG7J,MAAM,CAAC,EAAI6J,GACxC,GAAI/B,EAAoBzd,eAAe0f,EAAS,EAAG,CACjD,IAAIC,GAAWF,GAAU,mBAAqB,QAC1CG,GAAYnC,EAAoBiC,EAAS,EAC7CL,GAAK5T,MAAMkU,EAAQ,EAAIC,EACzB,CACF,CAAC,EACDP,GAAKQ,UAAYN,EAAQO,KAAK,GAAG,CACnC,CACAZ,EAAS5W,KAAKgS,GAAE,CAAC,CAAC,EAClB2E,GAAQrT,YAAYyT,EAAI,EACxBJ,GAAUI,GACV,QACF,CACAJ,GAAQrT,YAAYqI,EAAQ5I,SAAS0U,eAAexB,EAAUnO,EAAC,CAAC,CAAC,CACnE,CACA,OAAO4O,EACT,CACA,IAAIgB,EAAkB,CACpB,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,KAAM,IAAI,EACX,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,MAAO,KAAK,EACb,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,OAAQ,MAAM,EACf,CAAC,QAAS,OAAO,CAAC,EAEpB,SAASC,EAAgBpP,EAAU,CACjC,QAASjS,EAAI,EAAGA,EAAIohB,EAAgBnhB,OAAQD,IAAK,CAC/C,IAAIshB,EAAeF,EAAgBphB,CAAC,EACpC,GAAIiS,GAAYqP,EAAa,CAAC,GAAKrP,GAAYqP,EAAa,CAAC,EAC3D,MAAO,EAEX,CACA,MAAO,EACT,CACA,SAASC,EAAcC,EAAQ,CAC7B,IAAIC,EAAY,CAAA,EAAIlV,EAAO,GAAI0F,EAC/B,GAAI,CAACuP,GAAU,CAACA,EAAOE,WACrB,MAAO,MAET,SAASC,GAAUC,GAAYnB,GAAM,CACnC,QAASoB,EAAKpB,GAAKiB,WAAWzhB,OAAS,EAAG4hB,GAAM,EAAGA,IACjDD,GAAWlY,KAAK+W,GAAKiB,WAAWG,CAAE,CAAC,CAEvC,CACA,SAASC,GAAaF,GAAY,CAChC,GAAI,CAACA,IAAc,CAACA,GAAW3hB,OAC7B,OAAO,KAET,IAAIwgB,GAAOmB,GAAWrB,IAAI,EAAGwB,EAAQtB,GAAKZ,aAAeY,GAAKuB,UAC9D,GAAID,EAAO,CACT,IAAIrG,GAAIqG,EAAM1iB,MAAM,YAAY,EAChC,OAAIqc,IACFkG,GAAW3hB,OAAS,EACbyb,GAAE,CAAC,GAELqG,CACT,CACA,GAAItB,GAAKN,UAAY,OACnB,OAAO2B,GAAaF,EAAU,EAEhC,GAAInB,GAAKiB,WACPC,OAAAA,GAAUC,GAAYnB,EAAI,EACnBqB,GAAaF,EAAU,CAElC,CAEA,IADAD,GAAUF,EAAWD,CAAM,EACpBjV,EAAOuV,GAAaL,CAAS,GAClC,QAASzhB,GAAI,EAAGA,GAAIuM,EAAKtM,OAAQD,KAE/B,GADAiS,EAAW1F,EAAKiG,WAAWxS,EAAC,EACxBqhB,EAAgBpP,CAAQ,EAC1B,MAAO,MAIb,MAAO,KACT,CACA,SAASgQ,EAAevF,EAAK,CAC3B,GAAI,OAAOA,EAAIc,MAAS,WAAad,EAAIgB,aAAehB,EAAIc,MAAQ,GAAKd,EAAIc,MAAQ,KACnF,OAAOd,EAAIc,KAEb,GAAI,CAACd,EAAIwF,OAAS,CAACxF,EAAIwF,MAAMC,eAAiB,CAACzF,EAAIwF,MAAMC,cAAcC,aACrE,MAAO,GAGT,QADIF,EAAQxF,EAAIwF,MAAOG,EAAYH,EAAMC,cAAeG,EAAQ,EACvDtiB,GAAI,EAAGA,GAAIqiB,EAAUpiB,QAAUoiB,EAAUriB,EAAC,IAAMkiB,EAAOliB,KAC1DqiB,EAAUriB,EAAC,EAAEuiB,OAAS,WACxBD,IAGJ,MAAO,EAAEA,EAAQ,EACnB,CACA,SAASE,GAAW,CACpB,CACAA,EAASrhB,UAAUshB,YAAc,SAASC,EAAQC,EAAK,CACrDA,EAAMA,GAAO,KAAKA,IAClB,QAAS1c,KAAQyc,EACXA,EAAOthB,eAAe6E,CAAI,IAC5B0c,EAAI9V,MAAM5G,CAAI,EAAIyc,EAAOzc,CAAI,EAGnC,EACAuc,EAASrhB,UAAUyhB,YAAc,SAASlc,EAAKmc,EAAM,CACnD,OAAOnc,IAAQ,EAAI,EAAIA,EAAMmc,CAC/B,EACA,SAASC,EAAYzN,EAASqH,EAAKqG,EAAc,CAC/CP,EAASnhB,KAAK,IAAI,EAClB,KAAKqb,IAAMA,EACX,KAAK8E,OAAShC,EAAanK,EAASqH,EAAInQ,IAAI,EAC5C,IAAImW,EAAS,CACXM,MAAO,yBACPC,gBAAiB,qBACjBnW,SAAU,WACVC,KAAM,EACNiR,MAAO,EACPkF,IAAK,EACLC,OAAQ,EACRC,QAAS,SACTC,YAAa3G,EAAIa,WAAa,GAAK,gBAAkBb,EAAIa,WAAa,KAAO,cAAgB,cAC7F+F,YAAa,WACf,EACA,KAAKb,YAAYC,EAAQ,KAAKlB,MAAM,EACpC,KAAKmB,IAAMtN,EAAQ5I,SAASE,cAAc,KAAK,EAC/C+V,EAAS,CACPa,UAAWhC,EAAc,KAAKC,MAAM,EACpC6B,YAAa3G,EAAIa,WAAa,GAAK,gBAAkBb,EAAIa,WAAa,KAAO,cAAgB,cAC7F+F,YAAa,YACbE,UAAW9G,EAAIiB,QAAU,SAAW,SAAWjB,EAAIiB,MACnD8F,KAAMV,EAAaU,KACnBC,WAAY,WACZ5W,SAAU,UACZ,EACA,KAAK2V,YAAYC,CAAM,EACvB,KAAKC,IAAI3V,YAAY,KAAKwU,MAAM,EAChC,IAAImC,GAAU,EACd,OAAQjH,EAAIuB,cAAa,CACvB,IAAK,QACL,IAAK,YACH0F,GAAUjH,EAAI5P,SACd,MACF,IAAK,SACH6W,GAAUjH,EAAI5P,SAAW4P,EAAIzV,KAAO,EACpC,MACF,IAAK,MACL,IAAK,aACH0c,GAAUjH,EAAI5P,SAAW4P,EAAIzV,KAC7B,KACJ,CACIyV,EAAIa,WAAa,GACnB,KAAKkF,YAAY,CACf1V,KAAM,KAAK6V,YAAYe,GAAS,GAAG,EACnCre,MAAO,KAAKsd,YAAYlG,EAAIzV,KAAM,GAAG,CACvC,CAAC,EAED,KAAKwb,YAAY,CACfS,IAAK,KAAKN,YAAYe,GAAS,GAAG,EAClCte,OAAQ,KAAKud,YAAYlG,EAAIzV,KAAM,GAAG,CACxC,CAAC,EAEH,KAAK2c,KAAO,SAASC,GAAK,CACxB,KAAKpB,YAAY,CACfS,IAAK,KAAKN,YAAYiB,GAAIX,IAAK,IAAI,EACnCC,OAAQ,KAAKP,YAAYiB,GAAIV,OAAQ,IAAI,EACzCpW,KAAM,KAAK6V,YAAYiB,GAAI9W,KAAM,IAAI,EACrCiR,MAAO,KAAK4E,YAAYiB,GAAI7F,MAAO,IAAI,EACvC3Y,OAAQ,KAAKud,YAAYiB,GAAIxe,OAAQ,IAAI,EACzCC,MAAO,KAAKsd,YAAYiB,GAAIve,MAAO,IAAI,CACzC,CAAC,CACH,CACF,CACAwd,EAAY3hB,UAAY0Z,EAAW2H,EAASrhB,SAAS,EACrD2hB,EAAY3hB,UAAU2G,YAAcgb,EACpC,SAASgB,EAAY5mB,EAAK,CACxB,IAAI6mB,EAAI1e,EAAQC,EAAO4d,GACvB,GAAIhmB,EAAIylB,IAAK,CACXtd,EAASnI,EAAIylB,IAAIqB,aACjB1e,EAAQpI,EAAIylB,IAAIsB,YAChBf,GAAMhmB,EAAIylB,IAAIuB,UACd,IAAIC,IAASA,GAAQjnB,EAAIylB,IAAIjB,cAAgByC,GAAQA,GAAM,CAAC,IAAMA,GAAMC,gBAAkBD,GAAMC,eAAe,EAC/GlnB,EAAMA,EAAIylB,IAAI0B,sBAAsB,EACpCN,EAAKI,GAAQnlB,KAAKwG,IAAI2e,GAAM,CAAC,GAAKA,GAAM,CAAC,EAAE9e,QAAU,EAAGnI,EAAImI,OAAS8e,GAAMlkB,MAAM,EAAI,CACvF,CACA,KAAK8M,KAAO7P,EAAI6P,KAChB,KAAKiR,MAAQ9gB,EAAI8gB,MACjB,KAAKkF,IAAMhmB,EAAIgmB,KAAOA,GACtB,KAAK7d,OAASnI,EAAImI,QAAUA,EAC5B,KAAK8d,OAASjmB,EAAIimB,QAAUD,IAAOhmB,EAAImI,QAAUA,GACjD,KAAKC,MAAQpI,EAAIoI,OAASA,EAC1B,KAAKgf,WAAaP,IAAO,OAASA,EAAK7mB,EAAIonB,UAC7C,CACAR,EAAY3iB,UAAUyiB,KAAO,SAASW,EAAMC,EAAQ,CAElD,OADAA,EAASA,IAAW,OAASA,EAAS,KAAKF,WACnCC,EAAI,CACV,IAAK,KACH,KAAKxX,MAAQyX,EACb,KAAKxG,OAASwG,EACd,MACF,IAAK,KACH,KAAKzX,MAAQyX,EACb,KAAKxG,OAASwG,EACd,MACF,IAAK,KACH,KAAKtB,KAAOsB,EACZ,KAAKrB,QAAUqB,EACf,MACF,IAAK,KACH,KAAKtB,KAAOsB,EACZ,KAAKrB,QAAUqB,EACf,KACJ,CACF,EACAV,EAAY3iB,UAAUsjB,SAAW,SAASC,EAAI,CAC5C,OAAO,KAAK3X,KAAO2X,EAAG1G,OAAS,KAAKA,MAAQ0G,EAAG3X,MAAQ,KAAKmW,IAAMwB,EAAGvB,QAAU,KAAKA,OAASuB,EAAGxB,GAClG,EACAY,EAAY3iB,UAAUwjB,YAAc,SAASC,EAAO,CAClD,QAAS5kB,EAAI,EAAGA,EAAI4kB,EAAM3kB,OAAQD,IAChC,GAAI,KAAKykB,SAASG,EAAM5kB,CAAC,CAAC,EACxB,MAAO,GAGX,MAAO,EACT,EACA8jB,EAAY3iB,UAAU0jB,OAAS,SAASrY,EAAW,CACjD,OAAO,KAAK0W,KAAO1W,EAAU0W,KAAO,KAAKC,QAAU3W,EAAU2W,QAAU,KAAKpW,MAAQP,EAAUO,MAAQ,KAAKiR,OAASxR,EAAUwR,KAChI,EACA8F,EAAY3iB,UAAU2jB,qBAAuB,SAAStY,EAAW+X,EAAM,CACrE,OAAQA,EAAI,CACV,IAAK,KACH,OAAO,KAAKxX,KAAOP,EAAUO,KAC/B,IAAK,KACH,OAAO,KAAKiR,MAAQxR,EAAUwR,MAChC,IAAK,KACH,OAAO,KAAKkF,IAAM1W,EAAU0W,IAC9B,IAAK,KACH,OAAO,KAAKC,OAAS3W,EAAU2W,MACnC,CACF,EACAW,EAAY3iB,UAAU4jB,oBAAsB,SAASL,EAAI,CACvD,IAAIxV,EAAIlQ,KAAKwG,IAAI,EAAGxG,KAAKgmB,IAAI,KAAKhH,MAAO0G,EAAG1G,KAAK,EAAIhf,KAAKwG,IAAI,KAAKuH,KAAM2X,EAAG3X,IAAI,CAAC,EAAGkY,EAAIjmB,KAAKwG,IAAI,EAAGxG,KAAKgmB,IAAI,KAAK7B,OAAQuB,EAAGvB,MAAM,EAAInkB,KAAKwG,IAAI,KAAK0d,IAAKwB,EAAGxB,GAAG,CAAC,EAAGgC,EAAgBhW,EAAI+V,EACxL,OAAOC,GAAiB,KAAK7f,OAAS,KAAKC,MAC7C,EACAwe,EAAY3iB,UAAUgkB,kBAAoB,SAASC,EAAW,CAC5D,MAAO,CACLlC,IAAK,KAAKA,IAAMkC,EAAUlC,IAC1BC,OAAQiC,EAAUjC,OAAS,KAAKA,OAChCpW,KAAM,KAAKA,KAAOqY,EAAUrY,KAC5BiR,MAAOoH,EAAUpH,MAAQ,KAAKA,MAC9B3Y,OAAQ,KAAKA,OACbC,MAAO,KAAKA,KACd,CACF,EACAwe,EAAYuB,qBAAuB,SAASnoB,EAAK,CAC/C,IAAImI,EAASnI,EAAIylB,IAAMzlB,EAAIylB,IAAIqB,aAAe9mB,EAAIijB,QAAUjjB,EAAI8mB,aAAe,EAC3E1e,EAAQpI,EAAIylB,IAAMzlB,EAAIylB,IAAIsB,YAAc/mB,EAAIijB,QAAUjjB,EAAI+mB,YAAc,EACxEf,EAAMhmB,EAAIylB,IAAMzlB,EAAIylB,IAAIuB,UAAYhnB,EAAIijB,QAAUjjB,EAAIgnB,UAAY,EACtEhnB,EAAMA,EAAIylB,IAAMzlB,EAAIylB,IAAI0B,sBAAsB,EAAInnB,EAAIijB,QAAUjjB,EAAImnB,sBAAsB,EAAInnB,EAC9F,IAAIooB,GAAM,CACRvY,KAAM7P,EAAI6P,KACViR,MAAO9gB,EAAI8gB,MACXkF,IAAKhmB,EAAIgmB,KAAOA,EAChB7d,OAAQnI,EAAImI,QAAUA,EACtB8d,OAAQjmB,EAAIimB,QAAUD,GAAOhmB,EAAImI,QAAUA,GAC3CC,MAAOpI,EAAIoI,OAASA,CACtB,EACA,OAAOggB,EACT,EACA,SAASC,EAAsBlQ,EAASmQ,EAAUC,EAAcC,EAAc,CAC5E,SAASC,GAAiBnH,GAAGoH,GAAO,CAElC,QADIC,GAAeC,GAAoB,IAAIhC,EAAYtF,EAAC,EAAGuH,GAAa,EAC/D/lB,GAAI,EAAGA,GAAI4lB,GAAM3lB,OAAQD,KAAK,CACrC,KAAOwe,GAAEsG,qBAAqBW,EAAcG,GAAM5lB,EAAC,CAAC,GAAKwe,GAAEqG,OAAOY,CAAY,GAAKjH,GAAEmG,YAAYe,CAAY,GAC3GlH,GAAEoF,KAAKgC,GAAM5lB,EAAC,CAAC,EAEjB,GAAIwe,GAAEqG,OAAOY,CAAY,EACvB,OAAOjH,GAET,IAAIvS,GAAIuS,GAAEuG,oBAAoBU,CAAY,EACtCM,GAAa9Z,KACf4Z,GAAgB,IAAI/B,EAAYtF,EAAC,EACjCuH,GAAa9Z,IAEfuS,GAAI,IAAIsF,EAAYgC,EAAiB,CACvC,CACA,OAAOD,IAAiBC,EAC1B,CACA,IAAIE,GAAc,IAAIlC,EAAY0B,CAAQ,EAAG9I,GAAM8I,EAAS9I,IAAKuJ,GAAUhE,EAAevF,EAAG,EAAG6H,GAAO,CAAA,EACvG,GAAI7H,GAAIgB,YAAa,CACnB,IAAIzW,EACJ,OAAQyV,GAAIa,SAAQ,CAClB,IAAK,GACHgH,GAAO,CAAC,KAAM,IAAI,EAClBtd,EAAO,SACP,MACF,IAAK,KACHsd,GAAO,CAAC,KAAM,IAAI,EAClBtd,EAAO,QACP,MACF,IAAK,KACHsd,GAAO,CAAC,KAAM,IAAI,EAClBtd,EAAO,QACP,KACJ,CACA,IAAIif,GAAOF,GAAY1B,WAAYxX,GAAWoZ,GAAOlnB,KAAK+B,MAAMklB,EAAO,EAAGE,GAAcV,EAAaxe,CAAI,EAAIif,GAAME,EAAc7B,GAAK,CAAC,EACnIvlB,KAAKqnB,IAAIvZ,EAAQ,EAAIqZ,KACvBrZ,GAAWA,GAAW,EAAI,GAAK,EAC/BA,IAAY9N,KAAKsnB,KAAKH,GAAcD,EAAI,EAAIA,IAE1CD,GAAU,IACZnZ,IAAY4P,GAAIa,WAAa,GAAKkI,EAAapgB,OAASogB,EAAangB,MACrEif,GAAOA,GAAK1kB,QAAQ,GAEtBmmB,GAAYpC,KAAKwC,EAAatZ,EAAQ,CACxC,KAAO,CACL,IAAIyZ,GAAuBP,GAAY1B,WAAamB,EAAapgB,OAAS,IAC1E,OAAQqX,GAAIe,UAAS,CACnB,IAAK,SACHwI,IAAWM,GAAuB,EAClC,MACF,IAAK,MACHN,IAAWM,GACX,KACJ,CACA,OAAQ7J,GAAIa,SAAQ,CAClB,IAAK,GACHiI,EAAS/C,YAAY,CACnBS,IAAKsC,EAAS5C,YAAYqD,GAAS,GAAG,CACxC,CAAC,EACD,MACF,IAAK,KACHT,EAAS/C,YAAY,CACnB1V,KAAMyY,EAAS5C,YAAYqD,GAAS,GAAG,CACzC,CAAC,EACD,MACF,IAAK,KACHT,EAAS/C,YAAY,CACnBzE,MAAOwH,EAAS5C,YAAYqD,GAAS,GAAG,CAC1C,CAAC,EACD,KACJ,CACA1B,GAAO,CAAC,KAAM,KAAM,KAAM,IAAI,EAC9ByB,GAAc,IAAIlC,EAAY0B,CAAQ,CACxC,CACA,IAAIgB,GAAeb,GAAiBK,GAAazB,EAAI,EACrDiB,EAAS5B,KAAK4C,GAAarB,kBAAkBM,CAAY,CAAC,CAC5D,CACA,SAASgB,GAAU,CACnB,CACAA,EAAQC,cAAgB,UAAW,CACjC,MAAO,CACL1Q,OAAQ,SAASkD,EAAM,CACrB,GAAI,CAACA,EACH,MAAO,GAET,GAAI,OAAOA,GAAS,SAClB,MAAM,IAAIlO,MAAM,+BAA+B,EAEjD,OAAO2b,mBAAmBC,mBAAmB1N,CAAI,CAAC,CACpD,CACF,CACF,EACAuN,EAAQI,oBAAsB,SAASxR,EAASyR,EAAS,CACvD,MAAI,CAACzR,GAAW,CAACyR,EACR,KAEFtH,EAAanK,EAASyR,CAAO,CACtC,EACA,IAAIC,EAAoB,IACpBC,EAAa,aACbC,EAAyB,OAC7BR,OAAAA,EAAQS,YAAc,SAAS7R,EAAS8R,EAAMC,EAAS,CACrD,GAAI,CAAC/R,GAAW,CAAC8R,GAAQ,CAACC,EACxB,OAAO,KAET,KAAOA,EAAQC,YACbD,EAAQja,YAAYia,EAAQC,UAAU,EAExC,IAAIC,EAAgBjS,EAAQ5I,SAASE,cAAc,KAAK,EACxD2a,EAAcza,MAAMC,SAAW,WAC/Bwa,EAAcza,MAAME,KAAO,IAC3Bua,EAAcza,MAAMmR,MAAQ,IAC5BsJ,EAAcza,MAAMqW,IAAM,IAC1BoE,EAAcza,MAAMsW,OAAS,IAC7BmE,EAAcza,MAAM0a,OAASN,EAC7BG,EAAQpa,YAAYsa,CAAa,EACjC,SAASE,GAAcC,GAAO,CAC5B,QAAS5F,GAAK,EAAGA,GAAK4F,GAAMxnB,OAAQ4hB,KAClC,GAAI4F,GAAM5F,EAAE,EAAE6F,cAAgB,CAACD,GAAM5F,EAAE,EAAE8F,aACvC,MAAO,GAGX,MAAO,EACT,CACA,GAAI,CAACH,GAAcL,CAAI,EAAG,CACxB,QAASnnB,GAAI,EAAGA,GAAImnB,EAAKlnB,OAAQD,KAC/BsnB,EAActa,YAAYma,EAAKnnB,EAAC,EAAE2nB,YAAY,EAEhD,MACF,CACA,IAAIjC,GAAe,CAAA,EAAID,GAAe3B,EAAYuB,qBAAqBiC,CAAa,EAAGM,GAAW5oB,KAAK+B,MAAM0kB,GAAapgB,OAAS0hB,EAAoB,GAAG,EAAI,IAC1JhE,EAAe,CACjBU,KAAMmE,GAAW,MAAQZ,CAC3B,GACC,UAAW,CAEV,QADIxB,GAAU9I,GACLmF,GAAK,EAAGA,GAAKsF,EAAKlnB,OAAQ4hB,KACjCnF,GAAMyK,EAAKtF,EAAE,EACb2D,GAAW,IAAI1C,EAAYzN,EAASqH,GAAKqG,CAAY,EACrDuE,EAActa,YAAYwY,GAAS7C,GAAG,EACtC4C,EAAsBlQ,EAASmQ,GAAUC,GAAcC,EAAY,EACnEhJ,GAAIiL,aAAenC,GAAS7C,IAC5B+C,GAAahc,KAAKoa,EAAYuB,qBAAqBG,EAAQ,CAAC,CAEhE,GAAG,CACL,EACAiB,EAAQoB,OAAS,SAASxS,EAASyS,EAAOC,EAAU,CAC7CA,IACHA,EAAWD,EACXA,EAAQ,CAAC,GAENA,IACHA,EAAQ,CAAC,GAEX,KAAKjlB,OAASwS,EACd,KAAKyS,MAAQA,EACb,KAAKE,MAAQ,UACb,KAAKC,OAAS,GACd,KAAKC,QAAUH,GAAY,IAAIlS,YAAY,MAAM,EACjD,KAAK8G,WAAa,CAAA,CACpB,EACA8J,EAAQoB,OAAO1mB,UAAY,CAGzBgnB,mBAAoB,SAAS5W,EAAG,CAC9B,GAAIA,aAAawJ,EACf,KAAKqN,gBAAkB,KAAKA,eAAe7W,CAAC,MAE5C,OAAMA,CAEV,EACAgD,MAAO,SAAS2E,EAAM,CACpB,IAAImP,EAAQ,KACRnP,IACFmP,EAAMJ,QAAUI,EAAMH,QAAQlS,OAAOkD,EAAM,CAAEoP,OAAQ,EAAK,CAAC,GAE7D,SAASC,GAAkB,CAGzB,QAFIC,GAAUH,EAAMJ,OAChBQ,GAAM,EACHA,GAAMD,GAAQvoB,QAAUuoB,GAAQC,EAAG,IAAM,MAAQD,GAAQC,EAAG,IAAM;GACvE,EAAEA,GAEJ,IAAIC,GAAQF,GAAQrK,OAAO,EAAGsK,EAAG,EACjC,OAAID,GAAQC,EAAG,IAAM,MACnB,EAAEA,GAEAD,GAAQC,EAAG,IAAM;GACnB,EAAEA,GAEJJ,EAAMJ,OAASO,GAAQrK,OAAOsK,EAAG,EAC1BC,EACT,CACA,SAASC,EAAYtN,GAAO,CAC1B,IAAI6B,GAAW,IAAItB,EAgCnB,GA/BAS,EAAchB,GAAO,SAAS/Y,EAAGwZ,GAAG,CAClC,OAAQxZ,EAAC,CACP,IAAK,KACH4a,GAAS9Z,IAAId,EAAGwZ,EAAC,EACjB,MACF,IAAK,QACHoB,GAASf,QAAQ7Z,EAAGwZ,EAAC,EACrB,MACF,IAAK,QACHoB,GAAShB,QAAQ5Z,EAAGwZ,EAAC,EACrB,MACF,IAAK,eACL,IAAK,iBACH,IAAI8M,GAAK9M,GAAElc,MAAM,GAAG,EACpB,GAAIgpB,GAAG3oB,SAAW,EAChB,MAEF,IAAI4oB,GAAS,IAAIjN,EAGjB,GAFAiN,GAAO1M,QAAQ,IAAKyM,GAAG,CAAC,CAAC,EACzBC,GAAO1M,QAAQ,IAAKyM,GAAG,CAAC,CAAC,EACrB,CAACC,GAAOnnB,IAAI,GAAG,GAAK,CAACmnB,GAAOnnB,IAAI,GAAG,EACrC,MAEFwb,GAAS9Z,IAAId,EAAI,IAAKumB,GAAOziB,IAAI,GAAG,CAAC,EACrC8W,GAAS9Z,IAAId,EAAI,IAAKumB,GAAOziB,IAAI,GAAG,CAAC,EACrC,MACF,IAAK,SACH8W,GAASjB,IAAI3Z,EAAGwZ,GAAG,CAAC,IAAI,CAAC,EACzB,KACJ,CACF,EAAG,IAAK,IAAI,EACRoB,GAASxb,IAAI,IAAI,EAAG,CACtB,IAAI0b,GAAS,IAAKiL,EAAMP,MAAMgB,WAAaT,EAAMxlB,OAAOimB,WACxD1L,GAAO9X,MAAQ4X,GAAS9W,IAAI,QAAS,GAAG,EACxCgX,GAAO2L,MAAQ7L,GAAS9W,IAAI,QAAS,CAAC,EACtCgX,GAAO4L,cAAgB9L,GAAS9W,IAAI,gBAAiB,CAAC,EACtDgX,GAAO6L,cAAgB/L,GAAS9W,IAAI,gBAAiB,GAAG,EACxDgX,GAAO8L,gBAAkBhM,GAAS9W,IAAI,kBAAmB,CAAC,EAC1DgX,GAAO+L,gBAAkBjM,GAAS9W,IAAI,kBAAmB,GAAG,EAC5DgX,GAAOgM,OAASlM,GAAS9W,IAAI,SAAU,EAAE,EACzCiiB,EAAMgB,UAAYhB,EAAMgB,SAASjM,EAAM,EACvCiL,EAAM1L,WAAWjT,KAAK,CACpByT,GAAID,GAAS9W,IAAI,IAAI,EACrBgX,OAAAA,EACF,CAAC,CACH,CACF,CACA,SAASkM,GAAkBjO,GAAO,CAChC,IAAI6B,GAAW,IAAItB,EACnBS,EAAchB,GAAO,SAAS/Y,GAAGwZ,EAAG,CAClC,OAAQxZ,GAAC,CACP,IAAK,QACH4a,GAAShB,QAAQ5Z,GAAI,IAAKwZ,CAAC,EAC3B,MACF,IAAK,OACHoB,GAAS9Z,IAAId,GAAI,IAAK8Y,EAAgBU,CAAC,CAAC,EACxC,KACJ,CACF,EAAG,SAAU,GAAG,EAChBuM,EAAMkB,gBAAkBlB,EAAMkB,eAAe,CAC3C,OAAUrM,GAAS9W,IAAI,QAAQ,EAC/B,MAAS8W,GAAS9W,IAAI,OAAO,CAC/B,CAAC,CACH,CACA,SAASojB,GAAanO,GAAO,CACvBA,GAAMhc,MAAM,iBAAiB,EAC/Bgd,EAAchB,GAAO,SAAS/Y,GAAGwZ,GAAG,CAClC,OAAQxZ,GAAC,CACP,IAAK,kBACHgnB,GAAkBxN,EAAC,EACnB,KACJ,CACF,EAAG,GAAG,EAENO,EAAchB,GAAO,SAAS/Y,GAAGwZ,GAAG,CAClC,OAAQxZ,GAAC,CACP,IAAK,SACHqmB,EAAY7M,EAAC,EACb,KACJ,CACF,EAAG,GAAG,CAEV,CACA,GAAI,CACF,IAAI0B,GACJ,GAAI6K,EAAML,QAAU,UAAW,CAC7B,GAAI,CAAC,UAAUxZ,KAAK6Z,EAAMJ,MAAM,EAC9B,OAAO,KAETzK,GAAO+K,EAAgB,EACvB,IAAI7M,GAAI8B,GAAKne,MAAM,oBAAoB,EACvC,GAAI,CAACqc,IAAK,CAACA,GAAE,CAAC,EACZ,MAAM,IAAIX,EAAaA,EAAaE,OAAOC,YAAY,EAEzDmN,EAAML,MAAQ,QAChB,CAEA,QADIyB,GAAuB,GACpBpB,EAAMJ,QAAQ,CACnB,GAAI,CAAC,UAAUzZ,KAAK6Z,EAAMJ,MAAM,EAC9B,OAAO,KAOT,OALKwB,GAGHA,GAAuB,GAFvBjM,GAAO+K,EAAgB,EAIjBF,EAAML,MAAK,CACjB,IAAK,SACC,IAAIxZ,KAAKgP,EAAI,EACfgM,GAAahM,EAAI,EACPA,KACV6K,EAAML,MAAQ,MAEhB,SACF,IAAK,OACExK,KACH6K,EAAML,MAAQ,MAEhB,SACF,IAAK,KACH,GAAI,iBAAiBxZ,KAAKgP,EAAI,EAAG,CAC/B6K,EAAML,MAAQ,OACd,KACF,CACA,GAAI,CAACxK,GACH,SAEF6K,EAAM3L,IAAM,IAAK2L,EAAMP,MAAM4B,QAAUrB,EAAMxlB,OAAO6mB,QAAQ,EAAG,EAAG,EAAE,EACpE,GAAI,CACFrB,EAAM3L,IAAIiB,MAAQ,QACpB,MAAY,CACV0K,EAAM3L,IAAIiB,MAAQ,QACpB,CAEA,GADA0K,EAAML,MAAQ,MACVxK,GAAK1G,QAAQ,KAAK,IAAM,GAAI,CAC9BuR,EAAM3L,IAAIS,GAAKK,GACf,QACF,CAGF,IAAK,MACH,GAAI,CACFf,EAAUe,GAAM6K,EAAM3L,IAAK2L,EAAM1L,UAAU,CAC7C,OAASpL,GAAG,CACV8W,EAAMF,mBAAmB5W,EAAC,EAC1B8W,EAAM3L,IAAM,KACZ2L,EAAML,MAAQ,SACd,QACF,CACAK,EAAML,MAAQ,UACd,SACF,IAAK,UACH,IAAI2B,EAAenM,GAAK1G,QAAQ,KAAK,IAAM,GAC3C,GAAI,CAAC0G,IAAQmM,IAAiBF,GAAuB,IAAO,CAC1DpB,EAAMuB,OAASvB,EAAMuB,MAAMvB,EAAM3L,GAAG,EACpC2L,EAAM3L,IAAM,KACZ2L,EAAML,MAAQ,KACd,QACF,CACIK,EAAM3L,IAAInQ,OACZ8b,EAAM3L,IAAInQ,MAAQ;GAEpB8b,EAAM3L,IAAInQ,MAAQiR,GAAK7B,QAAQ,UAAW;CAAI,EAAEA,QAAQ,SAAU;CAAI,EACtE,SACF,IAAK,SACE6B,KACH6K,EAAML,MAAQ,MAEhB,QACJ,CACF,CACF,OAASzW,GAAG,CACV8W,EAAMF,mBAAmB5W,EAAC,EACtB8W,EAAML,QAAU,WAAaK,EAAM3L,KAAO2L,EAAMuB,OAClDvB,EAAMuB,MAAMvB,EAAM3L,GAAG,EAEvB2L,EAAM3L,IAAM,KACZ2L,EAAML,MAAQK,EAAML,QAAU,UAAY,YAAc,QAC1D,CACA,OAAO,IACT,EACA6B,MAAO,UAAW,CAChB,IAAIxB,EAAQ,KACZ,GAAI,CAMF,GALAA,EAAMJ,QAAUI,EAAMH,QAAQlS,OAAO,GACjCqS,EAAM3L,KAAO2L,EAAML,QAAU,YAC/BK,EAAMJ,QAAU;;EAChBI,EAAM9T,MAAM,GAEV8T,EAAML,QAAU,UAClB,MAAM,IAAIjN,EAAaA,EAAaE,OAAOC,YAAY,CAE3D,OAAS3J,EAAG,CACV8W,EAAMF,mBAAmB5W,CAAC,CAC5B,CACA8W,OAAAA,EAAMyB,SAAWzB,EAAMyB,QAAQ,EACxB,IACT,CACF,EACArP,GAAMgM,EACChM,EACT,CACA,IAAIsP,GACAC,GACJ,SAASC,IAAgB,CACvB,GAAID,GAAmB,OAAOD,GAC9BC,GAAoB,EACpB,IAAIE,EAAc,OACdC,EAAmB,CACrB,GAAI,EACJ,GAAM,EACN,GAAM,CACR,EACIC,EAAe,CACjB,MAAS,EACT,OAAU,EACV,IAAO,EACP,KAAQ,EACR,MAAS,EACT,KAAQ,EACR,YAAa,EACb,aAAc,CAChB,EACA,SAASC,EAAqBjtB,EAAO,CACnC,GAAI,OAAOA,GAAU,SACnB,MAAO,GAET,IAAIktB,EAAMH,EAAiB/sB,EAAMkV,YAAY,CAAC,EAC9C,OAAOgY,EAAMltB,EAAMkV,YAAY,EAAI,EACrC,CACA,SAASiY,EAAiBntB,EAAO,CAC/B,GAAI,OAAOA,GAAU,SACnB,MAAO,GAET,IAAIugB,EAAQyM,EAAahtB,EAAMkV,YAAY,CAAC,EAC5C,OAAOqL,EAAQvgB,EAAMkV,YAAY,EAAI,EACvC,CACA,SAASkY,EAAQtnB,EAAWkb,EAAS7R,EAAM,CACzC,KAAKmb,aAAe,GACpB,IAAI+C,EAAM,GACNC,EAAe,GACfC,EAAaznB,EACb0nB,EAAWxM,EACXyM,EAAQte,EACRue,EAAU,KACVC,EAAY,GACZC,EAAe,GACfC,EAAQ,OACRC,EAAa,QACbC,EAAY,OACZC,EAAiB,OACjBC,EAAQ,IACRC,EAAS,SACbvuB,OAAOwuB,iBAAiB,KAAM,CAC5B,GAAM,CACJluB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOqkB,CACT,EACArnB,IAAK,SAAShG,EAAO,CACnBqtB,EAAM,GAAKrtB,CACb,CACF,EACA,YAAe,CACbC,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOskB,CACT,EACAtnB,IAAK,SAAShG,EAAO,CACnBstB,EAAe,CAAC,CAACttB,CACnB,CACF,EACA,UAAa,CACXC,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOukB,CACT,EACAvnB,IAAK,SAAShG,EAAO,CACnB,GAAI,OAAOA,GAAU,SACnB,MAAM,IAAI0J,UAAU,qCAAqC,EAE3D6jB,EAAavtB,EACb,KAAKsqB,aAAe,EACtB,CACF,EACA,QAAW,CACTrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOwkB,CACT,EACAxnB,IAAK,SAAShG,EAAO,CACnB,GAAI,OAAOA,GAAU,SACnB,MAAM,IAAI0J,UAAU,mCAAmC,EAEzD8jB,EAAWxtB,EACX,KAAKsqB,aAAe,EACtB,CACF,EACA,KAAQ,CACNrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOykB,CACT,EACAznB,IAAK,SAAShG,EAAO,CACnBytB,EAAQ,GAAKztB,EACb,KAAKsqB,aAAe,EACtB,CACF,EACA,OAAU,CACRrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAO0kB,CACT,EACA1nB,IAAK,SAAShG,EAAO,CACnB0tB,EAAU1tB,EACV,KAAKsqB,aAAe,EACtB,CACF,EACA,SAAY,CACVrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAO2kB,CACT,EACA3nB,IAAK,SAAShG,EAAO,CACnB,IAAIouB,EAAUnB,EAAqBjtB,CAAK,EACxC,GAAIouB,IAAY,GACd,MAAM,IAAIC,YAAY,iEAAiE,EAEzFV,EAAYS,EACZ,KAAK9D,aAAe,EACtB,CACF,EACA,YAAe,CACbrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAO4kB,CACT,EACA5nB,IAAK,SAAShG,EAAO,CACnB4tB,EAAe,CAAC,CAAC5tB,EACjB,KAAKsqB,aAAe,EACtB,CACF,EACA,KAAQ,CACNrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAO6kB,CACT,EACA7nB,IAAK,SAAShG,EAAO,CACnB,GAAI,OAAOA,GAAU,UAAYA,IAAU8sB,EACzC,MAAM,IAAIuB,YAAY,0DAA0D,EAElFR,EAAQ7tB,EACR,KAAKsqB,aAAe,EACtB,CACF,EACA,UAAa,CACXrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAO8kB,CACT,EACA9nB,IAAK,SAAShG,EAAO,CACnB,IAAIouB,EAAUjB,EAAiBntB,CAAK,EAC/BouB,GAGHN,EAAaM,EACb,KAAK9D,aAAe,IAHpB1e,QAAQE,KAAK,wDAAwD,CAKzE,CACF,EACA,SAAY,CACV7L,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAO+kB,CACT,EACA/nB,IAAK,SAAShG,EAAO,CACnB,GAAIA,EAAQ,GAAKA,EAAQ,IACvB,MAAM,IAAI4N,MAAM,qCAAqC,EAEvDmgB,EAAY/tB,EACZ,KAAKsqB,aAAe,EACtB,CACF,EACA,cAAiB,CACfrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOglB,CACT,EACAhoB,IAAK,SAAShG,EAAO,CACnB,IAAIouB,EAAUjB,EAAiBntB,CAAK,EAC/BouB,GAGHJ,EAAiBI,EACjB,KAAK9D,aAAe,IAHpB1e,QAAQE,KAAK,4DAA4D,CAK7E,CACF,EACA,KAAQ,CACN7L,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOilB,CACT,EACAjoB,IAAK,SAAShG,EAAO,CACnB,GAAIA,EAAQ,GAAKA,EAAQ,IACvB,MAAM,IAAI4N,MAAM,iCAAiC,EAEnDqgB,EAAQjuB,EACR,KAAKsqB,aAAe,EACtB,CACF,EACA,MAAS,CACPrqB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOklB,CACT,EACAloB,IAAK,SAAShG,EAAO,CACnB,IAAIouB,EAAUjB,EAAiBntB,CAAK,EACpC,GAAI,CAACouB,EACH,MAAM,IAAIC,YAAY,8DAA8D,EAEtFH,EAASE,EACT,KAAK9D,aAAe,EACtB,CACF,CACF,CAAC,EACD,KAAKC,aAAe,MACtB,CACA6C,OAAAA,EAAQrpB,UAAUuqB,aAAe,UAAW,CAC1C,OAAOC,OAAO9E,oBAAoBhkB,OAAQ,KAAK0J,IAAI,CACrD,EACAwd,GAASS,EACFT,EACT,CACA,IAAI6B,GACAC,GACJ,SAASC,IAAmB,CAC1B,GAAID,GAAsB,OAAOD,GACjCC,GAAuB,EACvB,IAAIE,EAAgB,CAClB,GAAI,GACJ,GAAM,EACR,EACA,SAASC,EAAkB5uB,EAAO,CAChC,GAAI,OAAOA,GAAU,SACnB,MAAO,GAET,IAAIgsB,EAAS2C,EAAc3uB,EAAMkV,YAAY,CAAC,EAC9C,OAAO8W,EAAShsB,EAAMkV,YAAY,EAAI,EACxC,CACA,SAAS2Z,EAAoB7uB,EAAO,CAClC,OAAO,OAAOA,GAAU,UAAaA,GAAS,GAAKA,GAAS,GAC9D,CACA,SAAS0rB,GAAY,CACnB,IAAIoD,EAAS,IACTC,EAAS,EACTC,EAAiB,EACjBC,EAAiB,IACjBC,EAAmB,EACnBC,EAAmB,IACnBC,EAAU,GACdzvB,OAAOwuB,iBAAiB,KAAM,CAC5B,MAAS,CACPluB,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAO8lB,CACT,EACA9oB,IAAK,SAAShG,EAAO,CACnB,GAAI,CAAC6uB,EAAoB7uB,CAAK,EAC5B,MAAM,IAAI4N,MAAM,kCAAkC,EAEpDkhB,EAAS9uB,CACX,CACF,EACA,MAAS,CACPC,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAO+lB,CACT,EACA/oB,IAAK,SAAShG,EAAO,CACnB,GAAI,OAAOA,GAAU,SACnB,MAAM,IAAI0J,UAAU,gCAAgC,EAEtDqlB,EAAS/uB,CACX,CACF,EACA,cAAiB,CACfC,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOimB,CACT,EACAjpB,IAAK,SAAShG,EAAO,CACnB,GAAI,CAAC6uB,EAAoB7uB,CAAK,EAC5B,MAAM,IAAI4N,MAAM,0CAA0C,EAE5DqhB,EAAiBjvB,CACnB,CACF,EACA,cAAiB,CACfC,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOgmB,CACT,EACAhpB,IAAK,SAAShG,EAAO,CACnB,GAAI,CAAC6uB,EAAoB7uB,CAAK,EAC5B,MAAM,IAAI4N,MAAM,0CAA0C,EAE5DohB,EAAiBhvB,CACnB,CACF,EACA,gBAAmB,CACjBC,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOmmB,CACT,EACAnpB,IAAK,SAAShG,EAAO,CACnB,GAAI,CAAC6uB,EAAoB7uB,CAAK,EAC5B,MAAM,IAAI4N,MAAM,4CAA4C,EAE9DuhB,EAAmBnvB,CACrB,CACF,EACA,gBAAmB,CACjBC,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOkmB,CACT,EACAlpB,IAAK,SAAShG,EAAO,CACnB,GAAI,CAAC6uB,EAAoB7uB,CAAK,EAC5B,MAAM,IAAI4N,MAAM,4CAA4C,EAE9DshB,EAAmBlvB,CACrB,CACF,EACA,OAAU,CACRC,WAAY,GACZ+I,IAAK,UAAW,CACd,OAAOomB,CACT,EACAppB,IAAK,SAAShG,EAAO,CACnB,IAAIouB,EAAUQ,EAAkB5uB,CAAK,EACjCouB,IAAY,GACdxiB,QAAQE,KAAK,qDAAqD,EAElEsjB,EAAUhB,CAEd,CACF,CACF,CAAC,CACH,CACAI,OAAAA,GAAY9C,EACL8C,EACT,CACA,IAAIa,GACJ,SAASC,IAAsB,CAC7B,GAAID,GAAyB,OAAOjS,GAAavJ,QACjDwb,GAA0B,EAC1B,IAAIpX,EAAUpF,GAAc,EACxB6X,EAAQtN,GAAavJ,QAAU,CACjC0a,OAAQhR,GAAW,EACnB+O,OAAQO,GAAc,EACtBnB,UAAWgD,GAAiB,CAC9B,EACAzW,EAAQyS,MAAQA,EAChBzS,EAAQsW,OAAS7D,EAAM6D,OACvB,IAAIgB,EAAU7E,EAAM4B,OAChBkD,EAAa9E,EAAMgB,UACnB+D,EAAexX,EAAQqU,OACvBoD,EAAkBzX,EAAQyT,UAC9BhB,OAAAA,EAAMiF,KAAO,UAAW,CACtB1X,EAAQqU,OAASiD,EACjBtX,EAAQyT,UAAY8D,CACtB,EACA9E,EAAMkF,QAAU,UAAW,CACzB3X,EAAQqU,OAASmD,EACjBxX,EAAQyT,UAAYgE,CACtB,EACKzX,EAAQqU,QACX5B,EAAMiF,KAAK,EAENvS,GAAavJ,OACtB,CACA,IAAItB,GAAY,CAAEsB,QAAS,CAAC,CAAE,EAC1Bgc,GAA2B,CAAEhc,QAAS,CAAC,CAAE,EACzCic,GACJ,SAASC,IAAkC,CACzC,OAAID,KACJA,GAAsC,EACrC,SAAS9b,EAAQ,CAChB,SAASgc,GAA4B,CACnC,GAAI,CACF,IAAI5b,EAAI,CAAC6b,QAAQlsB,UAAUmsB,QAAQjsB,KAAKqO,QAAQC,UAAU0d,QAAS,CAAA,EAAI,UAAW,CAClF,CAAC,CAAC,CACJ,MAAa,CACb,CACA,OAAQjc,EAAOH,QAAUmc,EAA4B,UAAsC,CACzF,MAAO,CAAC,CAAC5b,CACX,EAAGJ,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,SAAS,CACnF,CACAG,EAAOH,QAAUmc,EAA2Bhc,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,OACnH,EAAGgc,EAAwB,GACpBA,GAAyBhc,OAClC,CACA,IAAIsc,GACJ,SAASC,IAAmB,CAC1B,OAAID,KACJA,GAAuB,EACtB,SAASnc,EAAQ,CAChB,IAAIqc,EAA4BN,GAAgC,EAC5DrZ,EAAkBN,GAAsB,EAC5C,SAASka,EAAWlc,EAAGD,EAAGE,EAAG,CAC3B,GAAIgc,EAA0B,EAAG,OAAO/d,QAAQC,UAAUC,MAAM,KAAM/I,SAAS,EAC/E,IAAImN,EAAI,CAAC,IAAI,EACbA,EAAEtK,KAAKkG,MAAMoE,EAAGzC,CAAC,EACjB,IAAItF,EAAI,IAAKuF,EAAEF,KAAK1B,MAAM4B,EAAGwC,CAAC,GAC9B,OAAOvC,GAAKqC,EAAgB7H,EAAGwF,EAAEtQ,SAAS,EAAG8K,CAC/C,CACAmF,EAAOH,QAAUyc,EAAYtc,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,OACpG,EAAGtB,EAAS,GACLA,GAAUsB,OACnB,CACA,IAAI0c,GAAW,CAAE1c,QAAS,CAAC,CAAE,EACzB2c,GACJ,SAASC,IAAkB,CACzB,OAAID,KACJA,GAAsB,EACrB,SAASxc,EAAQ,CAChB,IAAI0C,EAAkBN,GAAsB,EAC5C,SAASsa,EAAUtc,EAAGD,EAAG,CACvB,GAAkB,OAAOA,GAArB,YAAmCA,IAAT,KAAY,MAAM,IAAIzK,UAAU,oDAAoD,EAClH0K,EAAErQ,UAAYpE,OAAOkX,OAAO1C,GAAKA,EAAEpQ,UAAW,CAC5C2G,YAAa,CACX1K,MAAOoU,EACPjU,SAAU,GACVD,aAAc,EAChB,CACF,CAAC,EAAGP,OAAOC,eAAewU,EAAG,YAAa,CACxCjU,SAAU,EACZ,CAAC,EAAGgU,GAAKuC,EAAgBtC,EAAGD,CAAC,CAC/B,CACAH,EAAOH,QAAU6c,EAAW1c,EAAOH,QAAQ9B,WAAa,GAAMiC,EAAOH,QAAQ,QAAaG,EAAOH,OACnG,EAAG0c,EAAQ,GACJA,GAAS1c,OAClB,CAYA,IAAI8c,GACAC,GACJ,SAASC,IAAc,CACrB,GAAID,GAAiB,OAAOD,GAC5BC,GAAkB,EAClB,IAAI3Y,EAAUpF,GAAc,EACxB2K,EAAYhK,GAAgB,EAC5BS,EAAYF,GAAgB,EAC5B+c,EAAWtc,GAAe,EAC1BuB,EAAyBD,GAA6B,EACtDa,EAAiBF,GAAqB,EACtCsa,EAAiB/Z,GAAa,EAC9Bga,EAAM3X,GAAW,EACjB4X,EAAO3B,GAAoB,EAC3BgB,EAAaF,GAAiB,EAC9BM,EAAYD,GAAgB,EAChC,SAASS,EAAsB/c,EAAG,CAChC,OAAOA,GAAK,OAAOA,GAAM,UAAY,YAAaA,EAAIA,EAAI,CAAE,QAAWA,CAAE,CAC3E,CAwDA,QAvDIgd,EAAkCD,EAAsBjZ,CAAO,EAC/DmZ,EAAoCF,EAAsB1T,CAAS,EACnE6T,EAAoCH,EAAsBjd,CAAS,EACnEqd,EAAmCJ,EAAsBJ,CAAQ,EACjES,EAAkDL,EAAsBnb,CAAsB,EAC9Fyb,EAA0CN,EAAsBva,CAAc,EAC9E8a,EAA0CP,EAAsBH,CAAc,EAC9EW,EAA+BR,EAAsBF,CAAG,EACxDW,EAA+BT,EAAsBD,CAAI,EACzDW,EAAsCV,EAAsBZ,CAAU,EACtEuB,EAAqCX,EAAsBR,CAAS,EACpEoB,EAAW,SACXC,EAAS,CAAC,EACV1lB,EAAQ,SAAgB6M,EAAMzB,EAAI,CACpCsa,OAAAA,EAAO7Y,CAAI,EAAI6Y,EAAO7Y,CAAI,GAAK,CAAA,EAC3BzB,IACFsa,EAAO7Y,CAAI,EAAI6Y,EAAO7Y,CAAI,EAAE9R,OAAOqQ,CAAE,GAEhCsa,EAAO7Y,CAAI,CACpB,EACI9M,EAAO,SAAe8M,EAAMzB,EAAI,CAClCpL,EAAM6M,EAAMzB,CAAE,CAChB,EACIua,EAAa,SAAqB9Y,EAAMzB,EAAI,CAC9C,IAAIgC,EAAQpN,EAAM6M,CAAI,EAAEQ,QAAQjC,CAAE,EAClC,OAAIgC,GAAS,GACJ,IAETsY,EAAO7Y,CAAI,EAAI6Y,EAAO7Y,CAAI,EAAES,MAAM,EAClCoY,EAAO7Y,CAAI,EAAE+Y,OAAOxY,EAAO,CAAC,EACrB,GACT,EACIyY,EAAW,SAAmBhZ,EAAMzB,EAAI,CAC1CpL,EAAM6M,EAAM,CAAA,EAAG9R,OAAOqQ,CAAE,EAAEhQ,IAAI,SAAS0qB,EAAU,CAC/C,IAAIrhB,EAAU,SAASshB,GAAW,CAChCJ,OAAAA,EAAW9Y,EAAMkZ,CAAQ,EAClBD,EAAS3f,MAAM,OAAQ/I,SAAS,CACzC,EACA,OAAOqH,CACT,CAAC,CAAC,CACJ,EACIuhB,GAAgB,CAClBC,SAAU,EACZ,EACIC,GAAS,CACX,CAAC,oBAAqB,iBAAkB,oBAAqB,oBAAqB,mBAAoB,kBAAmB,YAAY,EAErI,CAAC,0BAA2B,uBAAwB,0BAA2B,0BAA2B,yBAA0B,wBAAyB,qBAAqB,EAElL,CAAC,uBAAwB,sBAAuB,uBAAwB,uBAAwB,sBAAuB,qBAAsB,kBAAkB,EAE/J,CAAC,sBAAuB,mBAAoB,sBAAuB,sBAAuB,qBAAsB,oBAAqB,gBAAgB,CAAC,EAEpJC,GAAUD,GAAO,CAAC,EAClBE,GACK7vB,GAAI,EAAGA,GAAI2vB,GAAO1vB,OAAQD,KACjC,GAAI2vB,GAAO3vB,EAAC,EAAE,CAAC,IAAKwuB,EAAkB,QAAY,CAChDqB,GAAaF,GAAO3vB,EAAC,EACrB,KACF,CAEF,GAAI6vB,GAAY,CACd,QAASC,EAAK,EAAGA,EAAKD,GAAW5vB,OAAQ6vB,IACvCL,GAAcG,GAAQE,CAAE,CAAC,EAAID,GAAWC,CAAE,EAE5CL,GAAcC,SAAWG,GAAW,CAAC,IAAMD,GAAQ,CAAC,CACtD,CACA,IAAIG,GAAU,CAAA,EACVC,GAAmB,SAA2B1pB,EAAM2pB,EAAM,CAC5D,OAAO,SAAS3Z,EAAM/M,EAAO2mB,EAAM,CACjC,IAAIC,EAAMF,EAAKG,OAAO7mB,CAAK,EACvB8mB,EAAY,IAAIlxB,OAAO,KAAOgxB,EAAM,IAAI,EAK5C,GAJI7Z,IAAS,OACX4Z,EAAKI,QAAQha,EAAKiB,YAAY,EAAI,GAAG,EAEvC2Y,EAAKI,QAAQhqB,EAAO,GAAG,EACnBypB,GAAS,CACXA,GAAQrmB,KAAK,CAAA,EAAGlF,OAAO0rB,CAAI,CAAC,EAC5B,IAAIb,EAASU,GAAQ9vB,OAAS,IAC9B8vB,GAAQV,OAAO,EAAGA,EAAS,EAAIA,EAAS,CAAC,CAC3C,CACA,GAAKd,EAAgB,QAAWvlB,QAGhC,KAAI6L,EAAK0Z,EAAgB,QAAWvlB,QAAQsN,CAAI,EAC5C,CAACzB,GAAMyB,IAAS,UAClBzB,EAAK0Z,EAAgB,QAAWvlB,QAAQJ,MAAQ2lB,EAAgB,QAAWvlB,QAAQC,KAEjF,GAAC4L,GAAM,CAACsb,GAAO,CAACE,EAAU7hB,KAAK8H,CAAI,IAGvCzB,EAAG9N,MAAMiQ,QAAQkZ,CAAI,EAAI,QAAU,MAAM,EAAE3B,EAAgB,QAAWvlB,QAASknB,CAAI,EACrF,CACF,EACA,SAASK,GAAejqB,EAAM,CAC5B,IAAIiD,EAAQ,OACRinB,EACAP,EAAO,UAAgB,CACzB,QAASQ,EAAO5pB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAM0pB,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ER,EAAKQ,CAAI,EAAI7pB,UAAU6pB,CAAI,EAE7BF,EAAU,MAAOjnB,EAAO2mB,CAAI,CAC9B,EACAM,OAAAA,EAAYR,GAAiB1pB,EAAM2pB,CAAI,EACvCA,EAAKU,aAAe,SAASC,EAAS,CACpC,OAAOL,GAAejqB,EAAO,KAAOsqB,CAAO,CAC7C,EACAX,EAAKG,OAAS,CACZS,IAAK,uBACLC,IAAK,GACLC,MAAO,uBACPnoB,KAAM,iBACNM,KAAM,aACNE,MAAO,QACP4nB,QAASznB,CACX,EACA0mB,EAAK1mB,MAAQ,SAAS4mB,EAAK,CACzB,GAAI,OAAOA,GAAQ,SAAU,CAC3B,GAAI,CAACF,EAAKG,OAAOhvB,eAAe+uB,CAAG,EACjC,MAAM,IAAInlB,MAAM,IAAMmlB,EAAM,4BAA4B,EAE1D5mB,EAAQ4mB,CACV,CACA,OAAO5mB,CACT,EACA0mB,EAAKF,QAAU,UAAW,CACxB,OAAOA,GAAU,CAAA,EAAGvrB,OAAOurB,EAAO,EAAI,CAAA,CACxC,EACAE,EAAKF,QAAQkB,OAAS,SAASC,EAAO,CACpC,OAAQnB,IAAW,CAAA,GAAIkB,OAAO,SAASE,EAAa,CAClD,OAAO,IAAIhyB,OAAO,KAAO+xB,EAAQ,IAAI,EAAE1iB,KAAK2iB,EAAY,CAAC,CAAC,CAC5D,CAAC,CACH,EACAlB,EAAKF,QAAQnpB,MAAQ,UAAW,CAC1BmpB,KACFA,GAAQ9vB,OAAS,EAErB,EACAgwB,EAAKF,QAAQqB,QAAU,UAAW,CAC5BrB,KAAY,OACdA,GAAQ9vB,OAAS,EACjB8vB,GAAU,KAEd,EACAE,EAAKF,QAAQsB,OAAS,UAAW,CAC3BtB,KAAY,OACdA,GAAU,CAAA,EAEd,EACAE,EAAK7mB,MAAQ,UAAW,CACtB,QAASkoB,EAAQzqB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAMuqB,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFrB,EAAKqB,CAAK,EAAI1qB,UAAU0qB,CAAK,EAE/B,OAAOf,EAAU,QAASjnB,EAAO2mB,CAAI,CACvC,EACAD,EAAK/mB,KAAO,UAAW,CACrB,QAASsoB,EAAQ3qB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAMyqB,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFvB,EAAKuB,CAAK,EAAI5qB,UAAU4qB,CAAK,EAE/B,OAAOjB,EAAU,OAAQjnB,EAAO2mB,CAAI,CACtC,EACAD,EAAKc,MAAQ,UAAW,CACtB,QAASW,EAAQ7qB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAM2qB,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFzB,EAAKyB,CAAK,EAAI9qB,UAAU8qB,CAAK,EAE/B,OAAOnB,EAAU,QAASjnB,EAAO2mB,CAAI,CACvC,EACOD,CACT,CACA,IAAIhnB,EAAMsnB,GAAe,SAAS,EAC9BqB,GAAgB3oB,EAAI0nB,aACpBzuB,GAAWnF,OAAOoE,UAAUe,SAC5BhB,GAAO,SAAeD,EAAQ,CAChC,OAAO4wB,GAAU5wB,CAAM,EAAIlE,OAAOmE,KAAKD,CAAM,EAAI,CAAA,CACnD,EACA,SAAS6wB,GAAK7wB,EAAQ4T,EAAI,CACxB3T,GAAKD,CAAM,EAAEmB,QAAQ,SAASjF,EAAK,CACjC,OAAO0X,EAAG5T,EAAO9D,CAAG,EAAGA,CAAG,CAC5B,CAAC,CACH,CACA,SAASgZ,GAAOlV,EAAQ4T,EAAIkd,EAAS,CACnC,OAAIA,IAAY,SACdA,EAAU,GAEL7wB,GAAKD,CAAM,EAAEkV,OAAO,SAAS6b,EAAO70B,EAAK,CAC9C,OAAO0X,EAAGmd,EAAO/wB,EAAO9D,CAAG,EAAGA,CAAG,CACnC,EAAG40B,CAAO,CACZ,CACA,SAASp0B,GAAO0I,EAAQ,CACtB,QAASoqB,EAAO5pB,UAAU5G,OAAQgyB,EAAU,IAAIlrB,MAAM0pB,EAAO,EAAIA,EAAO,EAAI,CAAC,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IACrGuB,EAAQvB,EAAO,CAAC,EAAI7pB,UAAU6pB,CAAI,EAEpC,OAAI3zB,OAAOY,OACF8wB,EAAkB,QAAW7e,MAAM,OAAQ,CAACvJ,CAAM,EAAE7B,OAAOytB,CAAO,CAAC,GAE5EA,EAAQ7vB,QAAQ,SAAS8vB,EAAQ,CAC1BA,GAGLJ,GAAKI,EAAQ,SAAS90B,EAAOD,EAAK,CAChCkJ,EAAOlJ,CAAG,EAAIC,CAChB,CAAC,CACH,CAAC,EACMiJ,EACT,CACA,SAASwrB,GAAUz0B,EAAO,CACxB,MAAO,CAAC,CAACA,GAAS,OAAOA,GAAU,QACrC,CACA,SAAS+0B,GAAQ/0B,EAAO,CACtB,OAAOy0B,GAAUz0B,CAAK,GAAK8E,GAASb,KAAKjE,CAAK,IAAM,mBAAqBA,EAAM0K,cAAgB/K,MACjG,CACA,SAASq1B,GAAc1lB,EAAIzG,EAAM,CAC/B,GAAI,CAACyG,GAAM,CAACzG,EACV,MAAO,GAET,GAAI,OAAOsoB,EAAgB,QAAW8D,kBAAqB,WAAY,CACrE,IAAIC,EACJ,GAAI,CACFA,EAAqB/D,EAAgB,QAAW8D,iBAAiB3lB,CAAE,CACrE,MAAY,CACV,MAAO,EACT,CACA,OAAO4lB,EAAqBA,EAAmBC,iBAAiBtsB,CAAI,GAAKqsB,EAAmBrsB,CAAI,EAAI,EACtG,CACA,MAAO,EACT,CACA,IAAIusB,GAAcjE,EAAgB,QAAW5jB,WAAa4jB,EAAgB,QAAW5jB,UAAUD,WAAa,GACxG+nB,GAAmB,yBAAyBC,KAAKF,EAAW,EAC5DG,GAAqBF,GAAmBrW,WAAWqW,GAAiBlS,IAAI,CAAC,EAAI,KAC7EqS,GAAU,QAAQpkB,KAAKgkB,EAAW,EAClCK,GAAc,UAAW,CAC3B,IAAIxzB,EAAQmzB,GAAYnzB,MAAM,YAAY,EAC1C,OAAIA,GAASA,EAAM,CAAC,EACXA,EAAM,CAAC,EAET,IACT,EAAE,EACEyzB,GAAa,WAAWtkB,KAAKgkB,EAAW,EACxCO,GAAkB,UAAW,CAC/B,IAAI1zB,EAAQmzB,GAAYnzB,MAAM,wCAAwC,EACtE,GAAI,CAACA,EACH,OAAO,KAET,IAAI2zB,EAAQ3zB,EAAM,CAAC,GAAK+c,WAAW/c,EAAM,CAAC,CAAC,EACvC4zB,EAAQ5zB,EAAM,CAAC,GAAK+c,WAAW/c,EAAM,CAAC,CAAC,EAC3C,OAAI2zB,GAASC,EACJ7W,WAAW/c,EAAM,CAAC,EAAI,IAAMA,EAAM,CAAC,CAAC,EAClC2zB,GAGJ,IACT,EAAE,EACEE,GAAoBJ,IAAcC,GAAkB,GAAKJ,GAAqB,IAC9EQ,GAAa,WAAW3kB,KAAKgkB,EAAW,EACxCY,GAAU,OAAO5kB,KAAKgkB,EAAW,EACjCa,GAAY,CAACD,KAAY,UAAU5kB,KAAKgkB,EAAW,GAAK,SAAShkB,KAAKgkB,EAAW,GACjFc,GAAiB,UAAW,CAC9B,IAAIj0B,EAAQmzB,GAAYnzB,MAAM,uBAAuB,EACrD,OAAIA,GAASA,EAAM,CAAC,EACX+c,WAAW/c,EAAM,CAAC,CAAC,EAErB,IACT,EAAE,EACEk0B,GAAa,UAAW,CAC1B,IAAIxzB,EAAS,kBAAkB2yB,KAAKF,EAAW,EAC3CgB,EAAWzzB,GAAUqc,WAAWrc,EAAO,CAAC,CAAC,EAC7C,MAAI,CAACyzB,GAAY,gBAAgBhlB,KAAKgkB,EAAW,GAAK,UAAUhkB,KAAKgkB,EAAW,IAC9EgB,EAAW,IAENA,CACT,EAAE,EACEC,GAAY,UAAUjlB,KAAKgkB,EAAW,GAAK,CAACa,IAAa,CAACP,IAAc,CAACM,GACzEM,GAAa,WAAWllB,KAAKgkB,EAAW,EACxCmB,GAAgBtG,GAAQuG,GAAO,IAAM,iBAAkBrF,EAAgB,SAAcA,EAAgB,QAAW5jB,UAAU+D,gBAAkB6f,EAAgB,QAAWsF,eAAiBtF,EAAgB,QAAW9hB,oBAAoB8hB,EAAgB,QAAWsF,gBAClQC,GAAU,QAAQtlB,KAAKgkB,EAAW,GAAKiB,IAAaE,IAAiB,CAAC,UAAUnlB,KAAKgkB,EAAW,EAChGuB,GAAY,UAAUvlB,KAAKgkB,EAAW,GAAK,CAACsB,GAC5CE,EAASD,IAAaD,IAAWlB,GACjCqB,GAAiBR,IAAaO,IAAW,CAACX,GAC1Ca,EAA2Bn3B,OAAOsT,OAAO,CAC3CC,UAAW,KACXsiB,QAAAA,GACAC,YAAAA,GACAC,WAAAA,GACAC,gBAAAA,GACAG,kBAAAA,GACAC,WAAAA,GACAC,QAAAA,GACAC,UAAAA,GACAC,eAAAA,GACAC,WAAAA,GACAE,UAAAA,GACAC,WAAAA,GACAC,cAAAA,GACAG,QAAAA,GACAC,UAAAA,GACAC,OAAAA,EACAC,cAAAA,CACF,CAAC,EACD,SAASE,EAAiBC,EAAK,CAC7B,OAAO,OAAOA,GAAQ,UAAY/G,EAAQ+G,EAAI7d,KAAK,CACrD,CACA,SAAS8d,EAAkBD,EAAK,CAC9B,GAAIA,EAAItd,QAAQ,GAAG,GAAK,EACtB,MAAM,IAAI9L,MAAM,yCAAyC,CAE7D,CACA,SAASspB,EAAYrT,EAAW,CAC9B,OAAO,IAAI9hB,OAAO,UAAY8hB,EAAY,SAAS,CACrD,CACA,SAAS2S,IAAS,CAChB,OAAOpF,EAAkB,UAAeD,EAAgB,QAAW9hB,QACrE,CACA,SAAS8nB,GAAKn3B,EAAO,CACnB,OAAOy0B,GAAUz0B,CAAK,GAAKA,EAAMo3B,WAAa,CAChD,CACA,SAASC,IAAY,CACnB,GAAI,CACF,OAAOlG,EAAgB,QAAWmG,SAAWnG,EAAgB,QAAWvf,IAC1E,MAAY,CACV,MAAO,EACT,CACF,CACA,SAAS2lB,GAAcvqB,EAAQ,CAC7B,OAAO,SAASwqB,EAAUC,EAAS,CACjC,GAAI,CAACV,EAAiBS,CAAQ,EAC5B,OAAOpG,EAAkB,QAAWpkB,CAAM,EAAE,IAAI,EAE9C+pB,EAAiBU,CAAO,IAC1BA,EAAUrG,EAAkB,QAAWsG,cAAcD,CAAO,GAE9D,IAAIE,EAAMR,GAAKM,CAAO,EAAIA,EAAUrG,EAAkB,QACtD,OAAOuG,EAAI3qB,CAAM,GAAK2qB,EAAI3qB,CAAM,EAAEwqB,CAAQ,CAC5C,CACF,CACA,SAASI,GAAS7U,EAAS8U,EAAYC,EAAYC,EAAS,CACtDhV,IAAY,SACdA,EAAU,OAER8U,IAAe,SACjBA,EAAa,CAAC,GAEZC,IAAe,SACjBA,EAAa,CAAC,GAEhB,IAAIxoB,EAAK8hB,EAAkB,QAAW7hB,cAAcwT,CAAO,EAC3DpjB,cAAOq4B,oBAAoBH,CAAU,EAAE7yB,QAAQ,SAAS2e,EAAU,CAChE,IAAIra,EAAMuuB,EAAWlU,CAAQ,EACzBA,EAASjK,QAAQ,OAAO,IAAM,IAAMiK,IAAa,QAAUA,IAAa,QAC1E9X,EAAIC,KAAK;;GAAqH,6DAA+D6X,EAAW,OAASra,EAAM,IAAI,EAC3NgG,EAAGE,aAAamU,EAAUra,CAAG,GACpBqa,IAAa,cACtBlB,GAAYnT,EAAIhG,CAAG,GACVgG,EAAGqU,CAAQ,IAAMra,GAAOqa,IAAa,cAC9CrU,EAAGqU,CAAQ,EAAIra,EAEnB,CAAC,EACD3J,OAAOq4B,oBAAoBF,CAAU,EAAE9yB,QAAQ,SAASizB,EAAU,CAChE3oB,EAAGE,aAAayoB,EAAUH,EAAWG,CAAQ,CAAC,CAChD,CAAC,EACGF,GACFG,GAAc5oB,EAAIyoB,CAAO,EAEpBzoB,CACT,CACA,SAASmT,GAAYnT,EAAIH,EAAM,CAC7B,OAAI,OAAOG,EAAGmT,YAAgB,IAC5BnT,EAAGsV,UAAYzV,EAEfG,EAAGmT,YAActT,EAEZG,CACT,CACA,SAAS6oB,GAAUC,EAAOd,EAAQ,CAC5BA,EAAOrN,WACTqN,EAAOe,aAAaD,EAAOd,EAAOrN,UAAU,EAE5CqN,EAAO1nB,YAAYwoB,CAAK,CAE5B,CACA,SAASE,GAAS1V,EAAS2V,EAAc,CAEvC,OADAtB,EAAkBsB,CAAY,EAC1B3V,EAAQ4V,UACH5V,EAAQ4V,UAAUC,SAASF,CAAY,EAEzCrB,EAAYqB,CAAY,EAAEnnB,KAAKwR,EAAQiB,SAAS,CACzD,CACA,SAAS6U,GAAS9V,EAAS+V,EAAY,CACrC,OAAI/V,EAAQ4V,UACV5V,EAAQ4V,UAAU3nB,IAAI8nB,CAAU,EACtBL,GAAS1V,EAAS+V,CAAU,IACtC/V,EAAQiB,WAAajB,EAAQiB,UAAY,IAAM8U,GAAYxf,KAAK,GAE3DyJ,CACT,CACA,SAASgW,GAAYhW,EAASiW,EAAe,CAC3C,OAAKjW,GAIDA,EAAQ4V,UACV5V,EAAQ4V,UAAUM,OAAOD,CAAa,GAEtC5B,EAAkB4B,CAAa,EAC/BjW,EAAQiB,UAAYjB,EAAQiB,UAAUrhB,MAAM,KAAK,EAAEqxB,OAAO,SAAS1S,EAAG,CACpE,OAAOA,IAAM0X,CACf,CAAC,EAAE/U,KAAK,GAAG,GAENlB,IAXL/W,EAAIC,KAAK,2DAA2D,EAC7D,KAWX,CACA,SAASitB,GAAYnW,EAASoW,EAAeC,EAAW,CACtD,IAAIC,EAAOZ,GAAS1V,EAASoW,CAAa,EAO1C,GANI,OAAOC,GAAc,aACvBA,EAAYA,EAAUrW,EAASoW,CAAa,GAE1C,OAAOC,GAAc,YACvBA,EAAY,CAACC,GAEXD,IAAcC,EAGlB,OAAID,EACFP,GAAS9V,EAASoW,CAAa,EAE/BJ,GAAYhW,EAASoW,CAAa,EAE7BpW,CACT,CACA,SAASuW,GAAc7pB,EAAIwoB,EAAY,CACrCn4B,OAAOq4B,oBAAoBF,CAAU,EAAE9yB,QAAQ,SAASizB,EAAU,CAChE,IAAImB,EAAYtB,EAAWG,CAAQ,EAC/BmB,IAAc,MAAQ,OAAOA,EAAc,KAAeA,IAAc,GAC1E9pB,EAAG+pB,gBAAgBpB,CAAQ,EAE3B3oB,EAAGE,aAAayoB,EAAUmB,IAAc,GAAO,GAAKA,CAAS,CAEjE,CAAC,CACH,CACA,SAASE,GAAcC,EAAK,CAC1B,IAAIz5B,EAAM,CAAC,EACP05B,EAAgB,kEACpB,GAAID,GAAOA,EAAIzB,YAAcyB,EAAIzB,WAAWj1B,OAAS,EAEnD,QADI42B,EAAQF,EAAIzB,WACPrT,EAAKgV,EAAM52B,OAAS,EAAG4hB,GAAM,EAAGA,IAAM,CAC7C,IAAIwT,EAAWwB,EAAMhV,CAAE,EAAEvb,KACrBwwB,EAAUD,EAAMhV,CAAE,EAAEzkB,OACpB,OAAOu5B,EAAItB,CAAQ,GAAM,WAAauB,EAAc9f,QAAQ,IAAMue,EAAW,GAAG,IAAM,MACxFyB,EAAUA,IAAY,MAExB55B,EAAIm4B,CAAQ,EAAIyB,CAClB,CAEF,OAAO55B,CACT,CACA,SAAS65B,GAAarqB,EAAIsqB,EAAW,CACnC,OAAOtqB,EAAGqqB,aAAaC,CAAS,CAClC,CACA,SAASpqB,GAAaF,EAAIsqB,EAAW55B,EAAO,CAC1CsP,EAAGE,aAAaoqB,EAAW55B,CAAK,CAClC,CACA,SAASq5B,GAAgB/pB,EAAIsqB,EAAW,CACtCtqB,EAAG+pB,gBAAgBO,CAAS,CAC9B,CACA,SAASC,IAAqB,CAC5BzI,EAAkB,QAAWnkB,KAAK6sB,MAAM,EACxC1I,EAAkB,QAAW2I,cAAgB,UAAW,CACtD,MAAO,EACT,CACF,CACA,SAASC,IAAuB,CAC9B5I,EAAkB,QAAW2I,cAAgB,UAAW,CACtD,MAAO,EACT,CACF,CACA,SAAS9S,GAAsB3X,EAAI,CACjC,GAAIA,GAAMA,EAAG2X,uBAAyB3X,EAAG8T,WAAY,CACnD,IAAI6W,EAAO3qB,EAAG2X,sBAAsB,EAChCtkB,EAAS,CAAC,EACd,OAAC,SAAU,SAAU,OAAQ,QAAS,MAAO,OAAO,EAAEqC,QAAQ,SAASE,EAAG,CACpE+0B,EAAK/0B,CAAC,IAAM,SACdvC,EAAOuC,CAAC,EAAI+0B,EAAK/0B,CAAC,EAEtB,CAAC,EACIvC,EAAOsF,SACVtF,EAAOsF,OAAS+W,WAAWgW,GAAc1lB,EAAI,QAAQ,CAAC,GAEnD3M,EAAOuF,QACVvF,EAAOuF,MAAQ8W,WAAWgW,GAAc1lB,EAAI,OAAO,CAAC,GAE/C3M,CACT,CACF,CACA,SAASu3B,GAAa5qB,EAAI,CACxB,GAAI,CAACA,GAAMA,GAAM,CAACA,EAAG6qB,aACnB,MAAO,CACLxqB,KAAM,EACNmW,IAAK,EACL5d,MAAO,EACPD,OAAQ,CACV,EAMF,QAJIC,EAAQoH,EAAGuX,YACX5e,EAASqH,EAAGsX,aACZjX,EAAO,EACPmW,EAAM,EACHxW,EAAG6qB,cAAgB7qB,IAAO8hB,EAAkB,QAAWiB,GAAc+H,iBAAiB,GAC3FzqB,GAAQL,EAAG+qB,WACXvU,GAAOxW,EAAGwX,UACVxX,EAAKA,EAAG6qB,aAEV,MAAO,CACLxqB,KAAAA,EACAmW,IAAAA,EACA5d,MAAAA,EACAD,OAAAA,CACF,CACF,CACA,SAASqyB,GAAoBhrB,EAAIirB,EAAQ,CACvC,IAAIC,EAAa,CACf1oB,EAAG,EACH+V,EAAG,CACL,EACA,GAAI+O,EAEF,QADI6D,EAAOnrB,EACJmrB,GAAQA,EAAKtd,SAASjI,YAAY,IAAM,QAAQ,CACrD,IAAIwlB,EAAY1F,GAAcyF,EAAM,WAAW,EAC/C,GAAI,UAAUrpB,KAAKspB,CAAS,EAAG,CAC7B,IAAIjc,EAASic,EAAU/gB,MAAM,EAAG,EAAE,EAAEnX,MAAM,KAAK,EAAEiF,IAAIkzB,MAAM,EAC3DH,EAAW1oB,GAAK2M,EAAO,CAAC,EACxB+b,EAAW3S,GAAKpJ,EAAO,CAAC,CAC1B,SAAW,YAAYrN,KAAKspB,CAAS,EAAG,CACtC,IAAIE,EAAUF,EAAU/gB,MAAM,EAAG,EAAE,EAAEnX,MAAM,KAAK,EAAEiF,IAAIkzB,MAAM,EAC5DH,EAAW1oB,GAAK8oB,EAAQ,EAAE,EAC1BJ,EAAW3S,GAAK+S,EAAQ,EAAE,CAC5B,CACAH,EAAOA,EAAKrX,UACd,CAEF,IAAI1T,EAAW,CAAC,EACZmrB,EAAYX,GAAaK,EAAOtxB,MAAM,EACtCwd,EAAMyT,GAAa5qB,CAAE,EACrBwrB,EAAOrU,EAAIve,MACX6yB,EAAOtU,EAAIxe,OACX+yB,EAAUT,EAAOS,SAAWvU,EAAIX,IAAM+U,EAAU/U,KAChDmV,GAAUV,EAAOU,SAAWxU,EAAI9W,KAAOkrB,EAAUlrB,MACrD,OAAI4qB,EAAOW,iBACTD,GAAUV,EAAOW,eAAe,CAAC,EAAEC,MAAQ1U,EAAI9W,KAC/CqrB,EAAUT,EAAOW,eAAe,CAAC,EAAEE,MAAQ3U,EAAIX,IAC3C8Q,IACFqE,IAAWT,EAAW1oB,EACtBkpB,GAAWR,EAAW3S,IAG1BnY,EAASmY,EAAI,EAAIjmB,KAAKwG,IAAI,EAAGxG,KAAKgmB,IAAI,EAAGoT,EAAUD,CAAI,CAAC,EACxDrrB,EAASoC,EAAIlQ,KAAKwG,IAAI,EAAGxG,KAAKgmB,IAAI,EAAGqT,GAAUH,CAAI,CAAC,EAC7CprB,CACT,CACA,SAAS2rB,GAAWr7B,EAAO,CACzB,OAAOy0B,GAAUz0B,CAAK,GAAKA,EAAMo3B,WAAa,CAChD,CACA,SAASkE,GAAQhsB,EAAI,CACnB,KAAOA,EAAG2a,YACR3a,EAAGS,YAAYT,EAAG2a,UAAU,EAE9B,OAAO3a,CACT,CACA,SAASisB,GAAiBxD,EAAS,CACjC,OAAI,OAAOA,GAAY,aACrBA,EAAUA,EAAQ,IAEZpuB,MAAMiQ,QAAQme,CAAO,EAAIA,EAAU,CAACA,CAAO,GAAGtwB,IAAI,SAASzH,EAAO,CAIxE,GAHI,OAAOA,GAAU,aACnBA,EAAQA,EAAM,GAEZm3B,GAAKn3B,CAAK,GAAKq7B,GAAWr7B,CAAK,EACjC,OAAOA,EAET,GAAI,OAAOA,GAAU,UAAY,KAAKoR,KAAKpR,CAAK,EAC9C,OAAOoxB,EAAkB,QAAWrN,eAAe/jB,CAAK,CAE5D,CAAC,EAAE6zB,OAAO,SAAS7zB,EAAO,CACxB,OAAOA,CACT,CAAC,CACH,CACA,SAASk4B,GAAc5oB,EAAIyoB,EAAS,CAClCwD,OAAAA,GAAiBxD,CAAO,EAAE/yB,QAAQ,SAASqe,EAAM,CAC/C,OAAO/T,EAAGM,YAAYyT,CAAI,CAC5B,CAAC,EACM/T,CACT,CACA,SAASksB,GAAclsB,EAAIyoB,EAAS,CAClC,OAAOG,GAAcoD,GAAQhsB,CAAE,EAAGyoB,CAAO,CAC3C,CACA,SAAS0D,GAAkBlB,EAAQ,CAOjC,OANIA,EAAOmB,SAAW,QAAUnB,EAAOoB,UAAY,QAG/CpB,EAAOmB,SAAW,GAAKnB,EAAOoB,UAAY,QAG1CpB,EAAOrhB,OAAS,WAAaqhB,EAAOmB,SAAW,GAAKnB,EAAOoB,UAAY,EAClE,GAELpB,EAAAA,EAAOmB,SAAW,GAAKnB,EAAOoB,UAAY,EAIhD,CACA,IAAIC,GAAIrE,GAAc,eAAe,EACjCsE,GAAKtE,GAAc,kBAAkB,EACrCuE,GAAsBn8B,OAAOsT,OAAO,CACtCC,UAAW,KACXsjB,OAAAA,GACAW,KAAAA,GACAE,UAAAA,GACAO,SAAAA,GACAnV,YAAAA,GACA0V,UAAAA,GACAG,SAAAA,GACAI,SAAAA,GACAE,YAAAA,GACAG,YAAAA,GACAI,cAAAA,GACAG,cAAAA,GACAK,aAAAA,GACAnqB,aAAAA,GACA6pB,gBAAAA,GACAQ,mBAAAA,GACAG,qBAAAA,GACA/S,sBAAAA,GACAiT,aAAAA,GACA6B,mBAAoBzB,GACpBe,WAAAA,GACAC,QAAAA,GACAC,iBAAAA,GACArD,cAAAA,GACAsD,cAAAA,GACAC,kBAAAA,GACAG,EAAAA,GACAC,GAAAA,EACF,CAAC,EACGG,GAAgB,GAChBC,GACAC,GAAY,UAAsB,CACpC,GAAID,GAAUh5B,QAAQi5B,YAAc,GAGpC,KAAIC,EAAOxyB,MAAM5F,UAAU4V,MAAM1V,KAAKmtB,EAAkB,QAAWgL,qBAAqB,OAAO,CAAC,EAC5FC,EAAS1yB,MAAM5F,UAAU4V,MAAM1V,KAAKmtB,EAAkB,QAAWgL,qBAAqB,OAAO,CAAC,EAC9FE,EAAO3yB,MAAM5F,UAAU4V,MAAM1V,KAAKmtB,EAAkB,QAAWgL,qBAAqB,UAAU,CAAC,EAC/FG,EAAWJ,EAAK/0B,OAAOi1B,EAAQC,CAAI,EACvC,GAAIC,GAAYA,EAAS15B,OAAS,EAChC,QAAS4hB,EAAK,EAAGtQ,EAAIooB,EAAS15B,OAAQ4hB,EAAKtQ,EAAGsQ,IAAM,CAClD,IAAI+X,EAAUD,EAAS9X,CAAE,EACzB,GAAI+X,GAAWA,EAAQ7C,cACrB,GAAI6C,EAAQC,SAAW,OAAQ,CAC7B,IAAIx5B,EAAUu5B,EAAQ7C,aAAa,YAAY,EAC3C12B,IAAY,MACdg5B,GAAUO,CAAO,CAErB,MACK,CACLE,GAAiB,CAAC,EAClB,KACF,CACF,MACUV,IACVU,GAAiB,CAAC,EAEtB,EACA,SAASA,GAAiBC,EAAOC,EAAK,CAC/BpG,GAAO,IAGRoG,IACFX,GAAYW,GAEdzL,EAAgB,QAAWjhB,WAAWgsB,GAAWS,CAAK,EACxD,CACA,SAASE,IAAkB,CACzBb,GAAgB,GAChB7K,EAAgB,QAAW2L,oBAAoB,OAAQD,EAAe,CACxE,CACIrG,GAAO,IACLpF,EAAkB,QAAWxW,aAAe,WAC9CiiB,GAAgB,EAEhB1L,EAAgB,QAAW4L,iBAAiB,OAAQF,EAAe,GAGvE,IAAIG,GAAqB,SAA6BnZ,EAAW,CAC/D,IAAIoZ,EAAS7L,EAAkB,QAAW7hB,cAAc,OAAO,EAC/D0tB,OAAAA,EAAOpZ,UAAYA,EACZoZ,CACT,EACIC,GAAiB,SAAyB5tB,EAAIyoB,EAAS,CACrDzoB,EAAG6tB,WACL7tB,EAAG6tB,WAAWC,QAAUrF,EAExBzoB,EAAGmT,YAAcsV,CAErB,EACIsF,GAAe,EACfC,GAAQD,GACZ,SAASE,IAAU,CACjB,OAAOD,IACT,CACA,IAAIE,GACCrM,EAAgB,QAAWsM,UAC9BD,GAA8B,UAAW,CACvC,SAASE,GAAe,CACtB,KAAKC,MAAQ,QAAU/7B,KAAKC,MAAMsvB,EAAgB,QAAWyM,aAAezM,EAAgB,QAAWyM,YAAYC,IAAI,GAAKC,KAAKD,IAAI,CAAC,EACtI,KAAK/hB,KAAO,CAAC,CACf,CACA,IAAIiiB,EAASL,EAAa35B,UAC1Bg6B,OAAAA,EAAO/3B,IAAM,SAAcjG,EAAKC,EAAO,CACrC,IAAIg+B,EAASj+B,EAAI,KAAK49B,KAAK,GAAKJ,GAAQ,EACxC,OAAKx9B,EAAI,KAAK49B,KAAK,IACjB59B,EAAI,KAAK49B,KAAK,EAAIK,GAEpB,KAAKliB,KAAKkiB,CAAM,EAAIh+B,EACb,IACT,EACA+9B,EAAO/0B,IAAM,SAAcjJ,EAAK,CAC9B,IAAIi+B,EAASj+B,EAAI,KAAK49B,KAAK,EAC3B,GAAIK,EACF,OAAO,KAAKliB,KAAKkiB,CAAM,EAEzBnyB,EAAI,mCAAoC9L,CAAG,CAE7C,EACAg+B,EAAOz5B,IAAM,SAAcvE,EAAK,CAC9B,IAAIi+B,EAASj+B,EAAI,KAAK49B,KAAK,EAC3B,OAAOK,KAAU,KAAKliB,IACxB,EACAiiB,EAAO,OAAY,SAAiBh+B,EAAK,CACvC,IAAIi+B,EAASj+B,EAAI,KAAK49B,KAAK,EACvBK,IACF,OAAO,KAAKliB,KAAKkiB,CAAM,EACvB,OAAOj+B,EAAI,KAAK49B,KAAK,EAEzB,EACOD,CACT,EAAE,GAEJ,IAAIO,GAAU9M,EAAgB,QAAWsM,QAA0B,IAAIA,QAAY,IAAID,GACvF,SAASU,GAAeC,EAAMjlB,EAAM,CAClC,GAAK+kB,GAAQ35B,IAAI65B,CAAI,EAGrB,KAAIriB,EAAOmiB,GAAQj1B,IAAIm1B,CAAI,EACvBriB,EAAKsiB,SAASllB,CAAI,EAAErW,SAAW,IACjC,OAAOiZ,EAAKsiB,SAASllB,CAAI,EACrBilB,EAAKrB,oBACPqB,EAAKrB,oBAAoB5jB,EAAM4C,EAAKuiB,WAAY,EAAK,EAC5CF,EAAKG,aACdH,EAAKG,YAAY,KAAOplB,EAAM4C,EAAKuiB,UAAU,GAG7C1+B,OAAOq4B,oBAAoBlc,EAAKsiB,QAAQ,EAAEv7B,QAAU,IACtD,OAAOiZ,EAAKsiB,SACZ,OAAOtiB,EAAKuiB,WACZ,OAAOviB,EAAKyiB,UAEV5+B,OAAOq4B,oBAAoBlc,CAAI,EAAEjZ,SAAW,GAC9Co7B,GAAQ,OAAUE,CAAI,EAE1B,CACA,SAASK,GAAsB/mB,EAAI0mB,EAAMM,EAAOtmB,EAAU,CACxDsmB,EAAMz5B,QAAQ,SAASkU,EAAM,CAC3BzB,EAAG0mB,EAAMjlB,EAAMf,CAAQ,CACzB,CAAC,CACH,CACA,SAASumB,GAASnE,EAAQ,CACxB,GAAIA,EAAOoE,OACT,OAAOpE,EAET,SAASqE,GAAa,CACpB,MAAO,EACT,CACA,SAASC,GAAc,CACrB,MAAO,EACT,CACA,GAAI,CAACtE,GAAU,CAACA,EAAOuE,sBAAwB,CAACvE,EAAOwE,8BAA+B,CACpF,IAAIC,EAAMzE,GAAUpJ,EAAgB,QAAW7b,MAC/CilB,EAAS,CAAC,EACV,QAASx6B,KAAOi/B,EACVj/B,IAAQ,UAAYA,IAAQ,UAAYA,IAAQ,eAAiBA,IAAQ,mBAAqBA,IAAQ,mBAAqBA,IAAQ,SAC/HA,IAAQ,eAAiBi/B,EAAIC,iBACjC1E,EAAOx6B,CAAG,EAAIi/B,EAAIj/B,CAAG,IAoC3B,GAhCKw6B,EAAOtxB,SACVsxB,EAAOtxB,OAASsxB,EAAO2E,YAAc9N,EAAkB,SAEpDmJ,EAAO4E,gBACV5E,EAAO4E,cAAgB5E,EAAO6E,cAAgB7E,EAAOtxB,OAASsxB,EAAO8E,UAAY9E,EAAO6E,aAE1F7E,EAAO0E,eAAiB,UAAW,CAC7BD,EAAIC,gBACND,EAAIC,eAAe,EAErB1E,EAAO+E,YAAc,GACrBN,EAAIM,YAAc,GAClB/E,EAAOgF,iBAAmB,EAC5B,EACAhF,EAAOgF,iBAAmB,GAC1BhF,EAAOiF,gBAAkB,UAAW,CAC9BR,EAAIQ,iBACNR,EAAIQ,gBAAgB,EAEtBjF,EAAOkF,aAAe,GACtBT,EAAIS,aAAe,GACnBlF,EAAOuE,qBAAuBF,CAChC,EACArE,EAAOuE,qBAAuBD,EAC9BtE,EAAOmF,yBAA2B,UAAW,CACvCV,EAAIU,0BACNV,EAAIU,yBAAyB,EAE/BnF,EAAOwE,8BAAgCH,EACvCrE,EAAOiF,gBAAgB,CACzB,EACAjF,EAAOwE,8BAAgCF,EACnCtE,EAAOoF,UAAY,MAAQpF,EAAOoF,UAAY,OAAQ,CACxD,IAAIC,EAAMxO,EAAkB,QAAWlU,gBACnCjQ,EAAOmkB,EAAkB,QAAWnkB,KACxCstB,EAAOY,MAAQZ,EAAOoF,SAAWC,GAAOA,EAAIC,YAAc5yB,GAAQA,EAAK4yB,YAAc,IAAMD,GAAOA,EAAIE,YAAc7yB,GAAQA,EAAK6yB,YAAc,GAC/IvF,EAAOa,MAAQb,EAAOwF,SAAWH,GAAOA,EAAII,WAAa/yB,GAAQA,EAAK+yB,WAAa,IAAMJ,GAAOA,EAAIK,WAAahzB,GAAQA,EAAKgzB,WAAa,EAC7I,CACA1F,EAAO3lB,MAAQ2lB,EAAO1lB,UAAY0lB,EAAO9lB,QACrC8lB,EAAOmB,SAAW,MAAQnB,EAAOmB,SAAW,SAC9CnB,EAAOmB,OAASnB,EAAOmB,OAAS,EAAI,EAAInB,EAAOmB,OAAS,EAAI,EAAInB,EAAOmB,OAAS,EAAI,EAAI,EAE5F,CACAnB,OAAAA,EAAOoE,OAAS,GACTpE,CACT,CACA,IAAI2F,GACAC,GAAkB,UAA4B,CAChD,GAAI,OAAOD,IAAqB,UAAW,CACzCA,GAAmB,GACnB,GAAI,CACF,IAAIE,EAAOzgC,OAAOC,eAAe,CAAC,EAAG,UAAW,CAC9CoJ,IAAK,UAAgB,CACnBk3B,GAAmB,EACrB,CACF,CAAC,EACD/O,EAAgB,QAAW4L,iBAAiB,OAAQ,KAAMqD,CAAI,EAC9DjP,EAAgB,QAAW2L,oBAAoB,OAAQ,KAAMsD,CAAI,CACnE,MAAY,CACZ,CACF,CACA,OAAOF,EACT,EACIG,GAAgB,CAAC,aAAc,WAAW,EAC9C,SAASC,GAAGnC,EAAMjlB,EAAMzB,EAAI,CAC1B,GAAI9N,MAAMiQ,QAAQV,CAAI,EACpB,OAAOslB,GAAsB8B,GAAInC,EAAMjlB,EAAMzB,CAAE,EAE5CwmB,GAAQ35B,IAAI65B,CAAI,GACnBF,GAAQj4B,IAAIm4B,EAAM,CAAC,CAAC,EAEtB,IAAIriB,EAAOmiB,GAAQj1B,IAAIm1B,CAAI,EAmC3B,GAlCKriB,EAAKsiB,WACRtiB,EAAKsiB,SAAW,CAAC,GAEdtiB,EAAKsiB,SAASllB,CAAI,IACrB4C,EAAKsiB,SAASllB,CAAI,EAAI,CAAA,GAEnBzB,EAAG8oB,OACN9oB,EAAG8oB,KAAOhD,GAAQ,GAEpBzhB,EAAKsiB,SAASllB,CAAI,EAAE5M,KAAKmL,CAAE,EACtBqE,EAAKuiB,aACRviB,EAAKyiB,SAAW,GAChBziB,EAAKuiB,WAAa,SAAS9D,EAAQ5vB,EAAO,CACxC,GAAImR,CAAAA,EAAKyiB,SAGThE,CAAAA,EAASmE,GAASnE,CAAM,EACxB,IAAI6D,EAAWtiB,EAAKsiB,SAAS7D,EAAOrhB,IAAI,EACxC,GAAIklB,EAEF,QADIoC,EAAepC,EAASzkB,MAAM,CAAC,EAC1B2E,EAAI,EAAGrM,EAAIuuB,EAAa39B,OAAQyb,EAAIrM,GACvCsoB,CAAAA,EAAOwE,8BAA8B,EADKzgB,IAI5C,GAAI,CACFkiB,EAAaliB,CAAC,EAAEra,KAAKk6B,EAAM5D,EAAQ5vB,CAAK,CAC1C,OAASwJ,EAAG,CACVtI,EAAIG,MAAMmI,CAAC,CACb,EAIR,GAEE2H,EAAKsiB,SAASllB,CAAI,EAAErW,SAAW,EACjC,GAAIs7B,EAAKpB,iBAAkB,CACzB,IAAI95B,EAAU,GACVk9B,GAAgB,GAAKE,GAAc3mB,QAAQR,CAAI,EAAI,KACrDjW,EAAU,CACRw9B,QAAS,EACX,GAEFtC,EAAKpB,iBAAiB7jB,EAAM4C,EAAKuiB,WAAYp7B,CAAO,CACtD,MAAWk7B,EAAKuC,aACdvC,EAAKuC,YAAY,KAAOxnB,EAAM4C,EAAKuiB,UAAU,CAGnD,CACA,SAAS3K,GAAIyK,EAAMjlB,EAAMzB,EAAI,CAC3B,GAAKwmB,GAAQ35B,IAAI65B,CAAI,EAGrB,KAAIriB,EAAOmiB,GAAQj1B,IAAIm1B,CAAI,EAC3B,GAAKriB,EAAKsiB,SAGV,IAAIz0B,MAAMiQ,QAAQV,CAAI,EACpB,OAAOslB,GAAsB9K,GAAKyK,EAAMjlB,EAAMzB,CAAE,EAElD,IAAIkpB,EAAa,SAAqBrxB,EAAIgH,EAAI,CAC5CwF,EAAKsiB,SAAS9nB,CAAE,EAAI,CAAA,EACpB4nB,GAAe5uB,EAAIgH,CAAE,CACvB,EACA,GAAI4C,IAAS,OAAQ,CACnB,QAAS9E,KAAK0H,EAAKsiB,SACbz+B,OAAOoE,UAAUC,eAAeC,KAAK6X,EAAKsiB,UAAY,CAAC,EAAGhqB,CAAC,GAC7DusB,EAAWxC,EAAM/pB,CAAC,EAGtB,MACF,CACA,IAAIgqB,EAAWtiB,EAAKsiB,SAASllB,CAAI,EACjC,GAAKklB,EAGL,IAAI,CAAC3mB,EAAI,CACPkpB,EAAWxC,EAAMjlB,CAAI,EACrB,MACF,CACA,GAAIzB,EAAG8oB,KACL,QAAStuB,EAAI,EAAGA,EAAImsB,EAASv7B,OAAQoP,IAC/BmsB,EAASnsB,CAAC,EAAEsuB,OAAS9oB,EAAG8oB,MAC1BnC,EAASnM,OAAOhgB,IAAK,CAAC,EAI5BisB,GAAeC,EAAMjlB,CAAI,IAC3B,CACA,SAAS0nB,GAAQzC,EAAM5D,EAAQ5vB,EAAO,CACpC,IAAIk2B,EAAW5C,GAAQ35B,IAAI65B,CAAI,EAAIF,GAAQj1B,IAAIm1B,CAAI,EAAI,CAAC,EACpD7G,EAAS6G,EAAK/a,YAAc+a,EAAK2C,cAarC,GAZI,OAAOvG,GAAW,SACpBA,EAAS,CACPrhB,KAAMqhB,EACNtxB,OAAQk1B,CACV,EACU5D,EAAOtxB,SACjBsxB,EAAOtxB,OAASk1B,GAElB5D,EAASmE,GAASnE,CAAM,EACpBsG,EAASxC,YACXwC,EAASxC,WAAWp6B,KAAKk6B,EAAM5D,EAAQ5vB,CAAK,EAE1C2sB,GAAU,CAACiD,EAAOuE,qBAAqB,GAAKvE,EAAOwG,UAAY,GACjEH,GAAQ38B,KAAK,KAAMqzB,EAAQiD,EAAQ5vB,CAAK,UAC/B,CAAC2sB,GAAU,CAACiD,EAAOgF,kBAAoBhF,EAAOtxB,QAAUsxB,EAAOtxB,OAAOsxB,EAAOrhB,IAAI,EAAG,CACxF+kB,GAAQ35B,IAAIi2B,EAAOtxB,MAAM,GAC5Bg1B,GAAQj4B,IAAIu0B,EAAOtxB,OAAQ,CAAC,CAAC,EAE/B,IAAI+3B,EAAa/C,GAAQj1B,IAAIuxB,EAAOtxB,MAAM,EACtCsxB,EAAOtxB,OAAOsxB,EAAOrhB,IAAI,IAC3B8nB,EAAWzC,SAAW,GAClB,OAAOhE,EAAOtxB,OAAOsxB,EAAOrhB,IAAI,GAAM,YACxCqhB,EAAOtxB,OAAOsxB,EAAOrhB,IAAI,EAAE,EAE7B8nB,EAAWzC,SAAW,GAE1B,CACA,MAAO,CAAChE,EAAOgF,gBACjB,CACA,SAAS0B,GAAI9C,EAAMjlB,EAAMzB,EAAI,CAC3B,GAAI9N,MAAMiQ,QAAQV,CAAI,EACpB,OAAOslB,GAAsByC,GAAK9C,EAAMjlB,EAAMzB,CAAE,EAElD,IAAIypB,EAAO,SAASC,GAAQ,CAC1BzN,GAAIyK,EAAMjlB,EAAMioB,CAAK,EACrB1pB,EAAGjF,MAAM,KAAM/I,SAAS,CAC1B,EACAy3B,EAAKX,KAAO9oB,EAAG8oB,KAAO9oB,EAAG8oB,MAAQhD,GAAQ,EACzC+C,GAAGnC,EAAMjlB,EAAMgoB,CAAI,CACrB,CACA,SAASE,GAAIjD,EAAMjlB,EAAMzB,EAAI,CAC3B,IAAIypB,EAAO,SAASC,GAAQ,CAC1BzN,GAAIyK,EAAMjlB,EAAMioB,CAAK,EACrB1pB,EAAGjF,MAAM,KAAM/I,SAAS,CAC1B,EACAy3B,EAAKX,KAAO9oB,EAAG8oB,KAAO9oB,EAAG8oB,MAAQhD,GAAQ,EACzC+C,GAAGnC,EAAMjlB,EAAMgoB,CAAI,CACrB,CACA,IAAIG,GAA0B1hC,OAAOsT,OAAO,CAC1CC,UAAW,KACXwrB,SAAAA,GACA4B,GAAAA,GACA5M,IAAAA,GACAkN,QAAAA,GACAK,IAAAA,GACAG,IAAAA,EACF,CAAC,EACGE,GAA0B,GAC1BptB,GAAO,SAAeujB,EAAShgB,EAAI8pB,EAAK,CACrC9pB,EAAG8oB,OACN9oB,EAAG8oB,KAAOhD,GAAQ,GAEpB,IAAIiE,EAAQ/pB,EAAGvD,KAAKujB,CAAO,EAC3B+J,OAAAA,EAAMjB,KAAOgB,EAAMA,EAAM,IAAM9pB,EAAG8oB,KAAO9oB,EAAG8oB,KACrCiB,CACT,EACIC,GAAW,SAAmBhqB,EAAIklB,EAAO,CAC3C,IAAI+E,EAAOvQ,EAAgB,QAAWyM,YAAYC,IAAI,EAClD8D,EAAY,UAAsB,CACpC,IAAIC,EAAOzQ,EAAgB,QAAWyM,YAAYC,IAAI,EAClD+D,EAAOF,GAAQ/E,IACjBllB,EAAGjF,MAAM,OAAQ/I,SAAS,EAC1Bi4B,EAAOE,EAEX,EACA,OAAOD,CACT,EACIE,GAAW,SAAmBX,EAAMvE,EAAOmF,EAAWrK,EAAS,CAC7DA,IAAY,SACdA,EAAUtG,EAAgB,SAE5B,IAAIzU,EACAqlB,EAAS,UAAmB,CAC9BtK,EAAQrc,aAAasB,CAAO,EAC5BA,EAAU,IACZ,EACIslB,EAAY,UAAsB,CACpC,IAAI/W,EAAQ,KACR6H,EAAOrpB,UACPw4B,EAAS,UAAiB,CAC5BvlB,EAAU,KACVulB,EAAS,KAEPf,EAAK1uB,MAAMyY,EAAO6H,CAAI,CAE1B,EACA2E,EAAQrc,aAAasB,CAAO,EAC5BA,EAAU+a,EAAQvnB,WAAW+xB,EAAQtF,CAAK,CAC5C,EACAqF,OAAAA,EAAUD,OAASA,EACZC,CACT,EACIE,EAAe,UAAwB,CAC3C,EACAA,EAAan+B,UAAUo+B,eAAiB,CAAC,EACzCD,EAAan+B,UAAUu8B,GAAK,SAASpnB,EAAMzB,EAAI,CAC7C,IAAI2qB,EAAM,KAAKrF,iBACf,KAAKA,iBAAmB,UAAW,CACnC,EACAuD,GAAG,KAAMpnB,EAAMzB,CAAE,EACjB,KAAKslB,iBAAmBqF,CAC1B,EACAF,EAAan+B,UAAUg5B,iBAAmBmF,EAAan+B,UAAUu8B,GACjE4B,EAAan+B,UAAU2vB,IAAM,SAASxa,EAAMzB,EAAI,CAC9Cic,GAAI,KAAMxa,EAAMzB,CAAE,CACpB,EACAyqB,EAAan+B,UAAU+4B,oBAAsBoF,EAAan+B,UAAU2vB,IACpEwO,EAAan+B,UAAUk9B,IAAM,SAAS/nB,EAAMzB,EAAI,CAC9C,IAAI2qB,EAAM,KAAKrF,iBACf,KAAKA,iBAAmB,UAAW,CACnC,EACAkE,GAAI,KAAM/nB,EAAMzB,CAAE,EAClB,KAAKslB,iBAAmBqF,CAC1B,EACAF,EAAan+B,UAAUq9B,IAAM,SAASloB,EAAMzB,EAAI,CAC9C,IAAI2qB,EAAM,KAAKrF,iBACf,KAAKA,iBAAmB,UAAW,CACnC,EACAqE,GAAI,KAAMloB,EAAMzB,CAAE,EAClB,KAAKslB,iBAAmBqF,CAC1B,EACAF,EAAan+B,UAAU68B,QAAU,SAASrG,EAAQ,CAChD,IAAIrhB,EAAOqhB,EAAOrhB,MAAQqhB,EACtB,OAAOA,GAAW,WACpBA,EAAS,CACPrhB,KAAAA,CACF,GAEFqhB,EAASmE,GAASnE,CAAM,EACpB,KAAK4H,eAAejpB,CAAI,GAAK,KAAK,KAAOA,CAAI,GAC/C,KAAK,KAAOA,CAAI,EAAEqhB,CAAM,EAE1BqG,GAAQ,KAAMrG,CAAM,CACtB,EACA2H,EAAan+B,UAAUs+B,cAAgBH,EAAan+B,UAAU68B,QAC9D,IAAI0B,GACJJ,EAAan+B,UAAUw+B,aAAe,SAAShI,EAAQ,CACrD,IAAIiI,EAAQ,KACPF,KACHA,GAA4B,IAAI75B,KAElC,IAAIyQ,EAAOqhB,EAAOrhB,MAAQqhB,EACtB9yB,EAAM66B,GAAUt5B,IAAI,IAAI,EACvBvB,IACHA,EAAsB,IAAIgB,IAC1B65B,GAAUt8B,IAAI,KAAMyB,CAAG,GAEzB,IAAIg7B,EAAah7B,EAAIuB,IAAIkQ,CAAI,EAC7BzR,EAAI,OAAUyR,CAAI,EAClBiY,EAAgB,QAAW/V,aAAaqnB,CAAU,EAClD,IAAI/lB,EAAUyU,EAAgB,QAAWjhB,WAAW,UAAW,CAC7DzI,EAAI,OAAUyR,CAAI,EACdzR,EAAIoC,OAAS,IACfpC,EAAM,KACN66B,GAAU,OAAUE,CAAK,GAE3BA,EAAM5B,QAAQrG,CAAM,CACtB,EAAG,CAAC,EACJ9yB,EAAIzB,IAAIkT,EAAMwD,CAAO,CACvB,EACA,IAAIgmB,GAAU,SAAkB5iC,EAAK,CACnC,OAAI,OAAOA,EAAIoJ,MAAS,WACfpJ,EAAIoJ,KAAK,EAEd,OAAOpJ,EAAIoJ,MAAS,SACfpJ,EAAIoJ,KAETpJ,EAAI6iC,MACC7iC,EAAI6iC,MAET7iC,EAAI4K,aAAe5K,EAAI4K,YAAYxB,KAC9BpJ,EAAI4K,YAAYxB,KAElB,OAAOpJ,CAChB,EACI8iC,GAAY,SAAoB/+B,EAAQ,CAC1C,OAAOA,aAAkBq+B,GAAgB,CAAC,CAACr+B,EAAOg/B,aAAe,CAAC,KAAM,MAAO,MAAO,SAAS,EAAEC,MAAM,SAAS59B,EAAG,CACjH,OAAO,OAAOrB,EAAOqB,CAAC,GAAM,UAC9B,CAAC,CACH,EACI69B,GAAqB,SAA6B95B,EAAQkP,EAAU,CAClEyqB,GAAU35B,CAAM,EAClBkP,EAAS,GAEJlP,EAAO+5B,mBACV/5B,EAAO+5B,iBAAmB,CAAA,GAE5B/5B,EAAO+5B,iBAAiB12B,KAAK6L,CAAQ,EAEzC,EACI8qB,GAAmB,SAA2B/pB,EAAM,CACtD,OAGE,OAAOA,GAAS,UAAY,KAAK9H,KAAK8H,CAAI,GAAKvP,MAAMiQ,QAAQV,CAAI,GAAK,CAAC,CAACA,EAAKrW,MAEjF,EACIqgC,GAAiB,SAAyBj6B,EAAQnJ,EAAKqjC,EAAQ,CACjE,GAAI,CAACl6B,GAAU,CAACA,EAAOkU,UAAY,CAACylB,GAAU35B,CAAM,EAClD,MAAM,IAAI2E,MAAM,sBAAwB80B,GAAQ5iC,CAAG,EAAI,IAAMqjC,EAAS,yCAAyC,CAEnH,EACIC,GAAoB,SAA4BlqB,EAAMpZ,EAAKqjC,EAAQ,CACrE,GAAI,CAACF,GAAiB/pB,CAAI,EACxB,MAAM,IAAItL,MAAM,0BAA4B80B,GAAQ5iC,CAAG,EAAI,IAAMqjC,EAAS,wCAAwC,CAEtH,EACIE,GAAmB,SAA2BC,EAAUxjC,EAAKqjC,EAAQ,CACvE,GAAI,OAAOG,GAAa,WACtB,MAAM,IAAI11B,MAAM,wBAA0B80B,GAAQ5iC,CAAG,EAAI,IAAMqjC,EAAS,uBAAuB,CAEnG,EACII,GAAsB,SAA8BtY,EAAO6H,EAAMqQ,EAAQ,CAC3E,IAAIK,EAAkB1Q,EAAKjwB,OAAS,GAAKiwB,EAAK,CAAC,IAAM7H,GAAS6H,EAAK,CAAC,IAAM7H,EAAM4X,YAC5E55B,EACAiQ,EACAoqB,EACJ,OAAIE,GACFv6B,EAASgiB,EAAM4X,YACX/P,EAAKjwB,QAAU,GACjBiwB,EAAK2Q,MAAM,EAEbvqB,EAAO4Z,EAAK,CAAC,EACbwQ,EAAWxQ,EAAK,CAAC,IAEjB7pB,EAAS6pB,EAAK,CAAC,EACf5Z,EAAO4Z,EAAK,CAAC,EACbwQ,EAAWxQ,EAAK,CAAC,GAEnBoQ,GAAej6B,EAAQgiB,EAAOkY,CAAM,EACpCC,GAAkBlqB,EAAM+R,EAAOkY,CAAM,EACrCE,GAAiBC,EAAUrY,EAAOkY,CAAM,EACxCG,EAAWpvB,GAAK+W,EAAOqY,CAAQ,EACxB,CACLE,gBAAAA,EACAv6B,OAAAA,EACAiQ,KAAAA,EACAoqB,SAAAA,CACF,CACF,EACII,GAAS,SAAiBz6B,EAAQ+D,EAAQkM,EAAMoqB,EAAU,CAC5DJ,GAAej6B,EAAQA,EAAQ+D,CAAM,EACjC/D,EAAOkU,SACTkkB,GAAQr0B,CAAM,EAAE/D,EAAQiQ,EAAMoqB,CAAQ,EAEtCr6B,EAAO+D,CAAM,EAAEkM,EAAMoqB,CAAQ,CAEjC,EACIK,GAAe,CAwBjBrD,GAAI,UAAe,CAEjB,QADIkC,EAAQ,KACHnP,EAAO5pB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAM0pB,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ER,EAAKQ,CAAI,EAAI7pB,UAAU6pB,CAAI,EAE7B,IAAIsQ,EAAuBL,GAAoB,KAAMzQ,EAAM,IAAI,EAAG0Q,EAAkBI,EAAqBJ,gBAAiBv6B,EAAS26B,EAAqB36B,OAAQiQ,EAAO0qB,EAAqB1qB,KAAMoqB,EAAWM,EAAqBN,SAElO,GADAI,GAAOz6B,EAAQ,KAAMiQ,EAAMoqB,CAAQ,EAC/B,CAACE,EAAiB,CACpB,IAAIK,EAA0B,UAAoC,CAChE,OAAOrB,EAAM9O,IAAIzqB,EAAQiQ,EAAMoqB,CAAQ,CACzC,EACAO,EAAwBtD,KAAO+C,EAAS/C,KACxC,IAAIuD,EAA+B,UAAyC,CAC1E,OAAOtB,EAAM9O,IAAI,UAAWmQ,CAAuB,CACrD,EACAC,EAA6BvD,KAAO+C,EAAS/C,KAC7CmD,GAAO,KAAM,KAAM,UAAWG,CAAuB,EACrDH,GAAOz6B,EAAQ,KAAM,UAAW66B,CAA4B,CAC9D,CACF,EAwBA7C,IAAK,UAAgB,CAEnB,QADI8C,EAAS,KACJ7P,EAAQzqB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAMuqB,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFrB,EAAKqB,CAAK,EAAI1qB,UAAU0qB,CAAK,EAE/B,IAAI6P,EAAwBT,GAAoB,KAAMzQ,EAAM,KAAK,EAAG0Q,EAAkBQ,EAAsBR,gBAAiBv6B,EAAS+6B,EAAsB/6B,OAAQiQ,EAAO8qB,EAAsB9qB,KAAMoqB,EAAWU,EAAsBV,SACxO,GAAIE,EACFE,GAAOz6B,EAAQ,MAAOiQ,EAAMoqB,CAAQ,MAC/B,CACL,IAAIxyB,EAAU,SAASshB,GAAW,CAChC2R,EAAOrQ,IAAIzqB,EAAQiQ,EAAMkZ,CAAQ,EACjC,QAASgC,EAAQ3qB,UAAU5G,OAAQohC,GAAQ,IAAIt6B,MAAMyqB,CAAK,EAAGC,GAAQ,EAAGA,GAAQD,EAAOC,KACrF4P,GAAM5P,EAAK,EAAI5qB,UAAU4qB,EAAK,EAEhCiP,EAAS9wB,MAAM,KAAMyxB,EAAK,CAC5B,EACAnzB,EAAQyvB,KAAO+C,EAAS/C,KACxBmD,GAAOz6B,EAAQ,MAAOiQ,EAAMpI,CAAO,CACrC,CACF,EAyBAswB,IAAK,UAAgB,CAEnB,QADI8C,EAAS,KACJ5P,EAAQ7qB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAM2qB,CAAK,EAAGC,EAAQ,EAAGA,EAAQD,EAAOC,IACpFzB,EAAKyB,CAAK,EAAI9qB,UAAU8qB,CAAK,EAE/B,IAAI4P,EAAwBZ,GAAoB,KAAMzQ,EAAM,KAAK,EAAG0Q,EAAkBW,EAAsBX,gBAAiBv6B,EAASk7B,EAAsBl7B,OAAQiQ,EAAOirB,EAAsBjrB,KAAMoqB,EAAWa,EAAsBb,SACxO,GAAIE,EACFE,GAAOz6B,EAAQ,MAAOiQ,EAAMoqB,CAAQ,MAC/B,CACL,IAAIxyB,EAAU,SAASshB,GAAW,CAChC8R,EAAOxQ,IAAIzqB,EAAQiQ,EAAMkZ,CAAQ,EACjC,QAASgS,EAAQ36B,UAAU5G,OAAQohC,GAAQ,IAAIt6B,MAAMy6B,CAAK,EAAGC,GAAQ,EAAGA,GAAQD,EAAOC,KACrFJ,GAAMI,EAAK,EAAI56B,UAAU46B,EAAK,EAEhCf,EAAS9wB,MAAM,KAAMyxB,EAAK,CAC5B,EACAnzB,EAAQyvB,KAAO+C,EAAS/C,KACxBmD,GAAOz6B,EAAQ,MAAOiQ,EAAMpI,CAAO,CACrC,CACF,EAoBA4iB,IAAK,SAAe4Q,EAAcC,EAAgBjB,EAAU,CAC1D,GAAI,CAACgB,GAAgBrB,GAAiBqB,CAAY,EAChD5Q,GAAI,KAAKmP,YAAayB,EAAcC,CAAc,MAC7C,CACL,IAAIt7B,EAASq7B,EACTprB,EAAOqrB,EACXrB,GAAej6B,EAAQ,KAAM,KAAK,EAClCm6B,GAAkBlqB,EAAM,KAAM,KAAK,EACnCmqB,GAAiBC,EAAU,KAAM,KAAK,EACtCA,EAAWpvB,GAAK,KAAMovB,CAAQ,EAC9B,KAAK5P,IAAI,UAAW4P,CAAQ,EACxBr6B,EAAOkU,UACTuW,GAAIzqB,EAAQiQ,EAAMoqB,CAAQ,EAC1B5P,GAAIzqB,EAAQ,UAAWq6B,CAAQ,GACtBV,GAAU35B,CAAM,IACzBA,EAAOyqB,IAAIxa,EAAMoqB,CAAQ,EACzBr6B,EAAOyqB,IAAI,UAAW4P,CAAQ,EAElC,CACF,EAaA1C,QAAS,SAAmBrG,EAAQ5vB,EAAO,CACzCu4B,GAAe,KAAKL,YAAa,KAAM,SAAS,EAChD,IAAI3pB,EAAOqhB,GAAU,OAAOA,GAAW,SAAWA,EAAOrhB,KAAOqhB,EAChE,GAAI,CAAC0I,GAAiB/pB,CAAI,EAAG,CAC3B,IAAIlN,EAAQ,0BAA4B02B,GAAQ,IAAI,EAAI,6FACxD,GAAInI,GACD,KAAK1uB,KAAOA,GAAKG,MAAMA,CAAK,MAE7B,OAAM,IAAI4B,MAAM5B,CAAK,CAEzB,CACA,OAAO40B,GAAQ,KAAKiC,YAAatI,EAAQ5vB,CAAK,CAChD,CACF,EACA,SAAS65B,GAAQv7B,EAAQhG,EAAS,CAC5BA,IAAY,SACdA,EAAU,CAAC,GAEb,IAAIwhC,EAAWxhC,EAASyhC,EAAcD,EAASC,YAC/C,GAAIA,EAAa,CACf,GAAI,CAACz7B,EAAOy7B,CAAW,EAAEvnB,SACvB,MAAM,IAAIvP,MAAM,oBAAsB82B,EAAc,iCAAiC,EAEvFz7B,EAAO45B,YAAc55B,EAAOy7B,CAAW,CACzC,MACEz7B,EAAO45B,YAAcjL,GAAS,OAAQ,CACpC/T,UAAW,eACb,CAAC,EAEHtjB,OAAAA,GAAO0I,EAAQ06B,EAAY,EACvB16B,EAAO+5B,kBACT/5B,EAAO+5B,iBAAiBh+B,QAAQ,SAASmT,EAAU,CACjDA,EAAS,CACX,CAAC,EAEHlP,EAAOq3B,GAAG,UAAW,UAAW,CAC9Br3B,EAAOyqB,IAAI,EACX,CAACzqB,EAAQA,EAAO07B,IAAK17B,EAAO45B,WAAW,EAAE79B,QAAQ,SAASsE,EAAK,CACzDA,GAAO20B,GAAQ35B,IAAIgF,CAAG,GACxB20B,GAAQ,OAAU30B,CAAG,CAEzB,CAAC,EACD6nB,EAAgB,QAAWjhB,WAAW,UAAW,CAC/CjH,EAAO45B,YAAc,IACvB,EAAG,CAAC,CACN,CAAC,EACM55B,CACT,CACA,IAAI27B,GAAgB,CAOlBha,MAAO,CAAC,EAcRia,SAAU,SAAkBC,EAAc,CACxC,IAAItC,EAAQ,KACR,OAAOsC,GAAiB,aAC1BA,EAAeA,EAAa,GAE9B,IAAIC,EACJrQ,OAAAA,GAAKoQ,EAAc,SAAS9kC,EAAOD,EAAK,CAClCyiC,EAAM5X,MAAM7qB,CAAG,IAAMC,IACvB+kC,EAAUA,GAAW,CAAC,EACtBA,EAAQhlC,CAAG,EAAI,CACb6J,KAAM44B,EAAM5X,MAAM7qB,CAAG,EACrBilC,GAAIhlC,CACN,GAEFwiC,EAAM5X,MAAM7qB,CAAG,EAAIC,CACrB,CAAC,EACG+kC,GAAWnC,GAAU,IAAI,GAC3B,KAAKhC,QAAQ,CACXmE,QAAAA,EACA7rB,KAAM,cACR,CAAC,EAEI6rB,CACT,CACF,EACA,SAASE,GAASh8B,EAAQi8B,EAAc,CACtC3kC,OAAAA,GAAO0I,EAAQ27B,EAAa,EAC5B37B,EAAO2hB,MAAQrqB,GAAO,CAAC,EAAG0I,EAAO2hB,MAAOsa,CAAY,EAChD,OAAOj8B,EAAOk8B,oBAAuB,YAAcvC,GAAU35B,CAAM,GACrEA,EAAOq3B,GAAG,eAAgBr3B,EAAOk8B,kBAAkB,EAE9Cl8B,CACT,CACA,IAAIiM,GAAc,SAAsBwC,EAAQ,CAC9C,OAAI,OAAOA,GAAW,SACbA,EAEFA,EAAO6G,QAAQ,IAAK,SAAS6mB,EAAG,CACrC,OAAOA,EAAElwB,YAAY,CACvB,CAAC,CACH,EACImwB,GAAe,SAAsB3tB,EAAQ,CAC/C,OAAI,OAAOA,GAAW,SACbA,EAEFA,EAAO6G,QAAQ,IAAK,SAAS6mB,EAAG,CACrC,OAAOA,EAAEjrB,YAAY,CACvB,CAAC,CACH,EACImrB,GAAkB,SAA0BC,EAAMC,EAAM,CAC1D,OAAOH,GAAaE,CAAI,IAAMF,GAAaG,CAAI,CACjD,EACA,SAASC,IAAe,CAEtB,QADI9iC,EAAS,CAAC,EACL0wB,EAAO5pB,UAAU5G,OAAQgyB,EAAU,IAAIlrB,MAAM0pB,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAClFuB,EAAQvB,CAAI,EAAI7pB,UAAU6pB,CAAI,EAEhCuB,OAAAA,EAAQ7vB,QAAQ,SAAS8vB,EAAQ,CAC1BA,GAGLJ,GAAKI,EAAQ,SAAS90B,EAAOD,EAAK,CAChC,GAAI,CAACg1B,GAAQ/0B,CAAK,EAAG,CACnB2C,EAAO5C,CAAG,EAAIC,EACd,MACF,CACK+0B,GAAQpyB,EAAO5C,CAAG,CAAC,IACtB4C,EAAO5C,CAAG,EAAI,CAAC,GAEjB4C,EAAO5C,CAAG,EAAI0lC,GAAa9iC,EAAO5C,CAAG,EAAGC,CAAK,CAC/C,CAAC,CACH,CAAC,EACM2C,CACT,CACA,IAAI+iC,GAA0B,UAAW,CACvC,SAASC,GAAW,CAClB,KAAKC,KAAO,CAAC,CACf,CACA,IAAI7H,EAAS4H,EAAS5hC,UACtBg6B,OAAAA,EAAOz5B,IAAM,SAAcvE,EAAK,CAC9B,OAAOA,KAAO,KAAK6lC,IACrB,EACA7H,EAAO,OAAY,SAAiBh+B,EAAK,CACvC,IAAIm5B,EAAO,KAAK50B,IAAIvE,CAAG,EACvB,cAAO,KAAK6lC,KAAK7lC,CAAG,EACbm5B,CACT,EACA6E,EAAO/3B,IAAM,SAAcjG,EAAKC,EAAO,CACrC,YAAK4lC,KAAK7lC,CAAG,EAAIC,EACV,IACT,EACA+9B,EAAO/4B,QAAU,SAAiBmT,EAAU0tB,EAAS,CACnD,QAAS9lC,KAAO,KAAK6lC,KACnBztB,EAASlU,KAAK4hC,EAAS,KAAKD,KAAK7lC,CAAG,EAAGA,EAAK,IAAI,CAEpD,EACO4lC,CACT,EAAE,EACEG,GAAQ3U,EAAgB,QAAW1oB,IAAM0oB,EAAgB,QAAW1oB,IAAMi9B,GAC1EK,GAA0B,UAAW,CACvC,SAASC,GAAW,CAClB,KAAKC,KAAO,CAAC,CACf,CACA,IAAIlI,EAASiI,EAASjiC,UACtBg6B,OAAAA,EAAOz5B,IAAM,SAAcvE,EAAK,CAC9B,OAAOA,KAAO,KAAKkmC,IACrB,EACAlI,EAAO,OAAY,SAAiBh+B,EAAK,CACvC,IAAIm5B,EAAO,KAAK50B,IAAIvE,CAAG,EACvB,cAAO,KAAKkmC,KAAKlmC,CAAG,EACbm5B,CACT,EACA6E,EAAOltB,IAAM,SAAa9Q,EAAK,CAC7B,YAAKkmC,KAAKlmC,CAAG,EAAI,EACV,IACT,EACAg+B,EAAO/4B,QAAU,SAAiBmT,EAAU0tB,EAAS,CACnD,QAAS9lC,KAAO,KAAKkmC,KACnB9tB,EAASlU,KAAK4hC,EAAS9lC,EAAKA,EAAK,IAAI,CAEzC,EACOimC,CACT,EAAE,EACEE,GAAQ/U,EAAgB,QAAW/sB,IAAM+sB,EAAgB,QAAW/sB,IAAM2hC,GAC1EI,GAA6B,UAAW,CAC1C,SAASC,EAAW3J,EAAQx5B,EAASojC,EAAO,CAC1C,IAAI7D,EAAQ,KAWZ,GAVI,CAAC/F,GAAU,KAAK6J,KAClB,KAAKC,QAAU9J,EAAS,KAExB,KAAK8J,QAAU9J,EAEjB,KAAK+J,YAAc,GACnB,KAAKC,iBAAmB,KACxB,KAAKC,SAAWjB,GAAa,CAAC,EAAG,KAAKiB,QAAQ,EAC9CzjC,EAAU,KAAKyjC,SAAWjB,GAAa,KAAKiB,SAAUzjC,CAAO,EAC7D,KAAK0jC,IAAM1jC,EAAQ8c,IAAM9c,EAAQqM,IAAMrM,EAAQqM,GAAGyQ,GAC9C,CAAC,KAAK4mB,IAAK,CACb,IAAI5mB,EAAK0c,GAAUA,EAAO1c,IAAM0c,EAAO1c,GAAG,GAAK,YAC/C,KAAK4mB,IAAM5mB,EAAK,cAAgBwd,GAAQ,CAC1C,CACA,KAAKoF,MAAQ1/B,EAAQiG,MAAQ,KACzBjG,EAAQqM,GACV,KAAKq1B,IAAM1hC,EAAQqM,GACVrM,EAAQ20B,WAAa,KAC9B,KAAK+M,IAAM,KAAK/M,SAAS,GAEvB30B,EAAQ4gB,WAAa,KAAK8gB,KAC5B1hC,EAAQ4gB,UAAUrhB,MAAM,GAAG,EAAEwC,QAAQ,SAASmc,EAAG,CAC/C,OAAOqhB,EAAM9J,SAASvX,CAAC,CACzB,CAAC,EAECle,EAAQuhC,UAAY,KACtBA,GAAQ,KAAM,CACZE,YAAa,KAAKC,IAAM,MAAQ,IAClC,CAAC,EACD,KAAKiC,qBAAuB,KAAKA,qBAAqB1yB,KAAK,IAAI,EAC/D,KAAKosB,GAAG,KAAKiG,QAAS,iBAAkB,KAAKK,oBAAoB,GAEnE3B,GAAS,KAAM,KAAKv6B,YAAYw6B,YAAY,EAC5C,KAAK2B,UAAY,CAAA,EACjB,KAAKC,YAAc,CAAC,EACpB,KAAKC,gBAAkB,CAAC,EACxB,KAAKC,eAAiB,IAAId,GAC1B,KAAKe,gBAAkB,IAAIf,GAC3B,KAAKgB,QAAU,IAAIhB,GACnB,KAAKiB,WAAa,IAAIrB,GACtB,KAAKsB,yBAA2B,GAC5BnkC,EAAQokC,eAAiB,IAC3B,KAAKA,aAAa,EAEpB,KAAKhB,MAAMA,CAAK,EACZpjC,EAAQqkC,sBAAwB,IAClC,KAAKC,oBAAoB,CAE7B,CACA,IAAIxJ,EAASqI,EAAWriC,UACxBg6B,OAAAA,EAAOyJ,QAAU,SAAiBvkC,EAAS,CAIzC,GAHIA,IAAY,SACdA,EAAU,CAAC,GAET,MAAKujC,YAWT,IARI,KAAKiB,cACP,KAAKA,YAAY5kC,OAAS,GAE5B,KAAK+9B,QAAQ,CACX1nB,KAAM,UACN6nB,QAAS,EACX,CAAC,EACD,KAAKyF,YAAc,GACf,KAAKK,UACP,QAASpiB,EAAK,KAAKoiB,UAAUhkC,OAAS,EAAG4hB,GAAM,EAAGA,IAC5C,KAAKoiB,UAAUpiB,CAAE,EAAE+iB,SACrB,KAAKX,UAAUpiB,CAAE,EAAE+iB,QAAQ,EAIjC,KAAKX,UAAY,KACjB,KAAKC,YAAc,KACnB,KAAKC,gBAAkB,KACvB,KAAKN,iBAAmB,KACpB,KAAK9B,MACH,KAAKA,IAAIvhB,aACPngB,EAAQykC,UACV,KAAK/C,IAAIvhB,WAAWukB,aAAa1kC,EAAQykC,UAAW,KAAK/C,GAAG,EAE5D,KAAKA,IAAIvhB,WAAWrT,YAAY,KAAK40B,GAAG,GAG5C,KAAKA,IAAM,MAEb,KAAK4B,QAAU,KACjB,EACAxI,EAAO6J,WAAa,UAAsB,CACxC,MAAO3X,EAAQ,KAAKuW,WACtB,EACAzI,EAAOtB,OAAS,UAAkB,CAChC,OAAO,KAAK8J,OACd,EACAxI,EAAO96B,QAAU,SAAiBnD,EAAK,CACrC,OAAKA,GAGL,KAAK4mC,SAAWjB,GAAa,KAAKiB,SAAU5mC,CAAG,EACxC,KAAK4mC,UAHH,KAAKA,QAIhB,EACA3I,EAAOzuB,GAAK,UAAc,CACxB,OAAO,KAAKq1B,GACd,EACA5G,EAAOnG,SAAW,SAAoB7U,EAAS8U,EAAYC,EAAY,CACrE,OAAOF,GAAS7U,EAAS8U,EAAYC,CAAU,CACjD,EACAiG,EAAO8J,SAAW,SAAkBnwB,EAAQrM,EAAQy8B,EAAc,CAC5DA,IAAiB,SACnBA,EAAepwB,GAEjB,IAAIqwB,EAAQ,KAAKxB,QAAQyB,UAAY,KAAKzB,QAAQyB,SAAS,EACvDC,EAAY,KAAK1B,QAAQ0B,WAAa,KAAK1B,QAAQ0B,UAAU,EAC7DD,EAAWC,GAAaA,EAAUF,CAAK,EACvCG,EAAcH,GAASA,EAAMvlC,MAAM,GAAG,EAAE,CAAC,EACzC2lC,EAAcF,GAAaA,EAAUC,CAAW,EAChDE,EAAkBN,EACtB,OAAIE,GAAYA,EAAStwB,CAAM,EAC7B0wB,EAAkBJ,EAAStwB,CAAM,EACxBywB,GAAeA,EAAYzwB,CAAM,IAC1C0wB,EAAkBD,EAAYzwB,CAAM,GAElCrM,IACF+8B,EAAkBA,EAAgB7pB,QAAQ,aAAc,SAAStc,EAAOwX,GAAO,CAC7E,IAAIzZ,GAAQqL,EAAOoO,GAAQ,CAAC,EACxByO,GAAMloB,GACV,OAAI,OAAOA,GAAU,MACnBkoB,GAAMjmB,GAEDimB,EACT,CAAC,GAEIkgB,CACT,EACArK,EAAO6I,qBAAuB,UAAgC,CAC9D,EACA7I,EAAOsK,UAAY,UAAqB,CACtC,OAAO,KAAKC,YAAc,KAAK3D,GACjC,EACA5G,EAAOhe,GAAK,UAAc,CACxB,OAAO,KAAK4mB,GACd,EACA5I,EAAO70B,KAAO,UAAgB,CAC5B,OAAO,KAAKy5B,KACd,EACA5E,EAAOwK,SAAW,UAAoB,CACpC,OAAO,KAAK1B,SACd,EACA9I,EAAOyK,aAAe,SAAsBzoB,EAAI,CAC9C,OAAO,KAAK+mB,YAAY/mB,CAAE,CAC5B,EACAge,EAAO0K,SAAW,SAAkBv/B,EAAM,CACxC,GAAKA,EAGL,OAAO,KAAK69B,gBAAgB79B,CAAI,CAClC,EACA60B,EAAO2K,cAAgB,UAAyB,CAC9C,QAASrV,EAAO5pB,UAAU5G,OAAQiS,EAAQ,IAAInL,MAAM0pB,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAChFxe,EAAMwe,CAAI,EAAI7pB,UAAU6pB,CAAI,EAE9Bxe,EAAQA,EAAMiE,OAAO,SAAS4vB,EAAK12B,EAAG,CACpC,OAAO02B,EAAIvhC,OAAO6K,CAAC,CACrB,EAAG,CAAA,CAAE,EAEL,QADI22B,EAAe,KACVnkB,EAAK,EAAGA,EAAK3P,EAAMjS,OAAQ4hB,IAElC,GADAmkB,EAAeA,EAAaH,SAAS3zB,EAAM2P,CAAE,CAAC,EAC1C,CAACmkB,GAAgB,CAACA,EAAaH,SACjC,OAGJ,OAAOG,CACT,EACA7K,EAAO8K,SAAW,SAAkBzQ,EAAOn1B,EAASwW,EAAO,CACrDxW,IAAY,SACdA,EAAU,CAAC,GAETwW,IAAU,SACZA,EAAQ,KAAKotB,UAAUhkC,QAEzB,IAAIimC,EACAC,EACJ,GAAI,OAAO3Q,GAAU,SAAU,CAC7B2Q,EAAgB1D,GAAajN,CAAK,EAClC,IAAI4Q,EAAqB/lC,EAAQgmC,gBAAkBF,EACnD9lC,EAAQiG,KAAO6/B,EACf,IAAIG,EAAiB9C,EAAW+C,aAAaH,CAAkB,EAC/D,GAAI,CAACE,EACH,MAAM,IAAIt7B,MAAM,aAAeo7B,EAAqB,iBAAiB,EAEvE,GAAI,OAAOE,GAAmB,WAC5B,OAAO,KAETJ,EAAY,IAAII,EAAe,KAAK3C,SAAW,KAAMtjC,CAAO,CAC9D,MACE6lC,EAAY1Q,EAed,GAbI0Q,EAAUrC,kBACZqC,EAAUrC,iBAAiB12B,YAAY+4B,CAAS,EAElD,KAAKjC,UAAU5U,OAAOxY,EAAO,EAAGqvB,CAAS,EACzCA,EAAUrC,iBAAmB,KACzB,OAAOqC,EAAU/oB,IAAO,aAC1B,KAAK+mB,YAAYgC,EAAU/oB,GAAG,CAAC,EAAI+oB,GAErCC,EAAgBA,GAAiBD,EAAU5/B,MAAQm8B,GAAayD,EAAU5/B,KAAK,CAAC,EAC5E6/B,IACF,KAAKhC,gBAAgBgC,CAAa,EAAID,EACtC,KAAK/B,gBAAgB7xB,GAAY6zB,CAAa,CAAC,EAAID,GAEjD,OAAOA,EAAUx5B,IAAO,YAAcw5B,EAAUx5B,GAAG,EAAG,CACxD,IAAI85B,EAAU,KACV,KAAKvC,UAAUptB,EAAQ,CAAC,IACtB,KAAKotB,UAAUptB,EAAQ,CAAC,EAAEkrB,IAC5ByE,EAAU,KAAKvC,UAAUptB,EAAQ,CAAC,EAAEkrB,IAC3BxN,GAAK,KAAK0P,UAAUptB,EAAQ,CAAC,CAAC,IACvC2vB,EAAU,KAAKvC,UAAUptB,EAAQ,CAAC,IAGtC,KAAK4uB,UAAU,EAAEhQ,aAAayQ,EAAUx5B,GAAG,EAAG85B,CAAO,CACvD,CACA,OAAON,CACT,EACA/K,EAAOhuB,YAAc,SAAqB+4B,EAAW,CAInD,GAHI,OAAOA,GAAc,WACvBA,EAAY,KAAKL,SAASK,CAAS,GAEjC,GAACA,GAAa,CAAC,KAAKjC,WAIxB,SADIwC,EAAa,GACR5kB,EAAK,KAAKoiB,UAAUhkC,OAAS,EAAG4hB,GAAM,EAAGA,IAChD,GAAI,KAAKoiB,UAAUpiB,CAAE,IAAMqkB,EAAW,CACpCO,EAAa,GACb,KAAKxC,UAAU5U,OAAOxN,EAAI,CAAC,EAC3B,KACF,CAEF,GAAK4kB,EAGLP,CAAAA,EAAUrC,iBAAmB,KAC7B,KAAKK,YAAYgC,EAAU/oB,GAAG,CAAC,EAAI,KACnC,KAAKgnB,gBAAgB1B,GAAayD,EAAU5/B,KAAK,CAAC,CAAC,EAAI,KACvD,KAAK69B,gBAAgB7xB,GAAY4zB,EAAU5/B,KAAK,CAAC,CAAC,EAAI,KACtD,IAAIogC,EAASR,EAAUx5B,GAAG,EACtBg6B,GAAUA,EAAOlmB,aAAe,KAAKilB,UAAU,GACjD,KAAKA,UAAU,EAAEt4B,YAAY+4B,EAAUx5B,GAAG,CAAC,GAE/C,EACAyuB,EAAOsJ,aAAe,UAAwB,CAC5C,IAAItD,EAAS,KACTwE,EAAW,KAAK7B,SAAS6B,SAC7B,GAAIA,EAAU,CACZ,IAAIgB,EAAgB,KAAK7C,SACrB8C,EAAY,SAAoBpR,EAAO,CACzC,IAAIlvB,EAAOkvB,EAAMlvB,KACbk3B,EAAOhI,EAAMgI,KAIjB,GAHImJ,EAAcrgC,CAAI,IAAM,SAC1Bk3B,EAAOmJ,EAAcrgC,CAAI,GAEvBk3B,IAAS,GAGb,CAAIA,IAAS,KACXA,EAAO,CAAC,GAEVA,EAAKqJ,cAAgB1F,EAAO2C,SAAS+C,cACrC,IAAIC,GAAW3F,EAAO8E,SAAS3/B,EAAMk3B,CAAI,EACrCsJ,KACF3F,EAAO76B,CAAI,EAAIwgC,IAEnB,EACIC,EACAC,EAAQxD,EAAW+C,aAAa,MAAM,EACtCx/B,MAAMiQ,QAAQ2uB,CAAQ,EACxBoB,EAAkBpB,EAElBoB,EAAkBhqC,OAAOmE,KAAKykC,CAAQ,EAExCoB,EAAgBviC,OAAOzH,OAAOmE,KAAK,KAAK4iC,QAAQ,EAAE7S,OAAO,SAASuE,EAAO,CACvE,MAAO,CAACuR,EAAgBE,KAAK,SAASC,EAAQ,CAC5C,OAAI,OAAOA,GAAW,SACb1R,IAAU0R,EAEZ1R,IAAU0R,EAAO5gC,IAC1B,CAAC,CACH,CAAC,CAAC,EAAEzB,IAAI,SAAS2wB,EAAO,CACtB,IAAIlvB,EACAk3B,EACJ,OAAI,OAAOhI,GAAU,UACnBlvB,EAAOkvB,EACPgI,EAAOmI,EAASr/B,CAAI,GAAK66B,EAAO2C,SAASx9B,CAAI,GAAK,CAAC,IAEnDA,EAAOkvB,EAAMlvB,KACbk3B,EAAOhI,GAEF,CACLlvB,KAAAA,EACAk3B,KAAAA,CACF,CACF,CAAC,EAAEvM,OAAO,SAASuE,EAAO,CACxB,IAAIjX,EAAIilB,EAAW+C,aAAa/Q,EAAMgI,KAAK6I,gBAAkB5D,GAAajN,EAAMlvB,IAAI,CAAC,EACrF,OAAOiY,GAAK,CAACyoB,EAAMG,OAAO5oB,CAAC,CAC7B,CAAC,EAAEnc,QAAQwkC,CAAS,CACtB,CACF,EACAzL,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,EACT,EACAjM,EAAOsI,MAAQ,SAAe5uB,EAAIsE,EAAM,CAItC,GAHIA,IAAS,SACXA,EAAO,IAEL,EAACtE,EAGL,IAAI,CAAC,KAAKwyB,SAAU,CAClB,KAAKxC,YAAc,KAAKA,aAAe,CAAA,EACvC,KAAKA,YAAYn7B,KAAKmL,CAAE,EACxB,MACF,CACIsE,EACFtE,EAAGxT,KAAK,IAAI,EAEZ,KAAKiM,WAAWuH,EAAI,CAAC,EAEzB,EACAsmB,EAAOmM,aAAe,UAAwB,CAC5C,KAAKD,SAAW,GAChB,KAAK/5B,WAAW,UAAW,CACzB,IAAIi6B,EAAa,KAAK1C,YACtB,KAAKA,YAAc,CAAA,EACf0C,GAAcA,EAAWtnC,OAAS,GACpCsnC,EAAWnlC,QAAQ,SAASyS,EAAI,CAC9BA,EAAGxT,KAAK,IAAI,CACd,EAAG,IAAI,EAET,KAAK28B,QAAQ,OAAO,CACtB,EAAG,CAAC,CACN,EACA7C,EAAOnC,EAAI,SAAapE,EAAUC,EAAS,CACzC,OAAOmE,GAAEpE,EAAUC,GAAW,KAAK4Q,UAAU,CAAC,CAChD,EACAtK,EAAOlC,GAAK,SAAcrE,EAAUC,EAAS,CAC3C,OAAOoE,GAAGrE,EAAUC,GAAW,KAAK4Q,UAAU,CAAC,CACjD,EACAtK,EAAOzF,SAAW,SAAoBC,EAAc,CAClD,OAAOD,GAAS,KAAKqM,IAAKpM,CAAY,CACxC,EACAwF,EAAOrF,SAAW,SAAoBC,EAAY,CAChDD,GAAS,KAAKiM,IAAKhM,CAAU,CAC/B,EACAoF,EAAOnF,YAAc,SAAuBC,EAAe,CACzDD,GAAY,KAAK+L,IAAK9L,CAAa,CACrC,EACAkF,EAAOhF,YAAc,SAAuBC,EAAeC,EAAW,CACpEF,GAAY,KAAK4L,IAAK3L,EAAeC,CAAS,CAChD,EACA8E,EAAOqM,KAAO,UAAgB,CAC5B,KAAKxR,YAAY,YAAY,CAC/B,EACAmF,EAAOsM,KAAO,UAAgB,CAC5B,KAAK3R,SAAS,YAAY,CAC5B,EACAqF,EAAOuM,YAAc,UAAuB,CAC1C,KAAK5R,SAAS,kBAAkB,CAClC,EACAqF,EAAOwM,cAAgB,UAAyB,CAC9C,KAAK3R,YAAY,kBAAkB,CACrC,EACAmF,EAAOpE,aAAe,SAAwBC,EAAW,CACvD,OAAOD,GAAa,KAAKgL,IAAK/K,CAAS,CACzC,EACAmE,EAAOvuB,aAAe,SAAwBoqB,EAAW55B,EAAO,CAC9DwP,GAAa,KAAKm1B,IAAK/K,EAAW55B,CAAK,CACzC,EACA+9B,EAAO1E,gBAAkB,SAA2BO,EAAW,CAC7DP,GAAgB,KAAKsL,IAAK/K,CAAS,CACrC,EACAmE,EAAO71B,MAAQ,SAAesiC,EAAKC,EAAe,CAChD,OAAO,KAAKC,UAAU,QAASF,EAAKC,CAAa,CACnD,EACA1M,EAAO91B,OAAS,SAAgBuiC,EAAKC,EAAe,CAClD,OAAO,KAAKC,UAAU,SAAUF,EAAKC,CAAa,CACpD,EACA1M,EAAO4M,WAAa,SAAoBziC,EAAOD,EAAQ,CACrD,KAAKC,MAAMA,EAAO,EAAI,EACtB,KAAKD,OAAOA,CAAM,CACpB,EACA81B,EAAO2M,UAAY,SAAmBE,EAAeJ,EAAKC,EAAe,CACvE,GAAID,IAAQ,OAAQ,EACdA,IAAQ,MAAQA,IAAQA,KAC1BA,EAAM,IAEH,GAAKA,GAAK9wB,QAAQ,GAAG,IAAM,KAAO,GAAK8wB,GAAK9wB,QAAQ,IAAI,IAAM,GACjE,KAAKirB,IAAIl1B,MAAMm7B,CAAa,EAAIJ,EACvBA,IAAQ,OACjB,KAAK7F,IAAIl1B,MAAMm7B,CAAa,EAAI,GAEhC,KAAKjG,IAAIl1B,MAAMm7B,CAAa,EAAIJ,EAAM,KAEnCC,GACH,KAAK7J,QAAQ,iBAAiB,EAEhC,MACF,CACA,GAAI,CAAC,KAAK+D,IACR,MAAO,GAET,IAAIr7B,EAAM,KAAKq7B,IAAIl1B,MAAMm7B,CAAa,EAClCC,EAAUvhC,EAAIoQ,QAAQ,IAAI,EAC9B,OACSvX,SADL0oC,IAAY,GACEvhC,EAAIqQ,MAAM,EAAGkxB,CAAO,EAEtB,KAAKlG,IAAI,SAAWU,GAAauF,CAAa,CAAC,EAFtB,EAAE,CAG7C,EACA7M,EAAO+M,iBAAmB,SAA0BF,EAAe,CACjE,IAAIG,EAAwB,EAC5B,GAAIH,IAAkB,SAAWA,IAAkB,SACjD,MAAM,IAAIh9B,MAAM,qDAAqD,EAIvE,GAFAm9B,EAAwB/V,GAAc,KAAK2P,IAAKiG,CAAa,EAC7DG,EAAwB/rB,WAAW+rB,CAAqB,EACpDA,IAA0B,GAAKhoC,MAAMgoC,CAAqB,EAAG,CAC/D,IAAIC,EAAO,SAAW3F,GAAauF,CAAa,EAChDG,EAAwB,KAAKpG,IAAIqG,CAAI,CACvC,CACA,OAAOD,CACT,EACAhN,EAAOkN,kBAAoB,UAA6B,CACtD,MAAO,CACL/iC,MAAO,KAAK4iC,iBAAiB,OAAO,EACpC7iC,OAAQ,KAAK6iC,iBAAiB,QAAQ,CACxC,CACF,EACA/M,EAAOmN,aAAe,UAAwB,CAC5C,OAAO,KAAKJ,iBAAiB,OAAO,CACtC,EACA/M,EAAOoN,cAAgB,UAAyB,CAC9C,OAAO,KAAKL,iBAAiB,QAAQ,CACvC,EACA/M,EAAOjE,MAAQ,UAAiB,CAC9B,KAAK6K,IAAI7K,MAAM,CACjB,EACAiE,EAAOqN,KAAO,UAAgB,CAC5B,KAAKzG,IAAIyG,KAAK,CAChB,EACArN,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CAChD,KAAKgM,UACFjV,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GACvDA,EAAOiF,gBAAgB,EAEzB,KAAK+G,QAAQ8E,cAAc9Q,CAAM,EAErC,EACAwD,EAAOuN,eAAiB,SAAwB/Q,EAAQ,CACtD,KAAK8Q,cAAc9Q,CAAM,CAC3B,EACAwD,EAAOwN,cAAgB,UAAyB,CAC9C,IAAIC,EAAa,EACbC,EAAa,KACbC,EAAuB,GACvBC,EAAqB,IACrBC,EACJ,KAAKtL,GAAG,aAAc,SAAS/F,EAAQ,CACjCA,EAAOsR,QAAQhpC,SAAW,IAC5B4oC,EAAa,CACXtQ,MAAOZ,EAAOsR,QAAQ,CAAC,EAAE1Q,MACzBC,MAAOb,EAAOsR,QAAQ,CAAC,EAAEzQ,KAC3B,EACAoQ,EAAara,EAAgB,QAAWyM,YAAYC,IAAI,EACxD+N,EAAa,GAEjB,CAAC,EACD,KAAKtL,GAAG,YAAa,SAAS/F,EAAQ,CACpC,GAAIA,EAAOsR,QAAQhpC,OAAS,EAC1B+oC,EAAa,WACJH,EAAY,CACrB,IAAIK,EAAQvR,EAAOsR,QAAQ,CAAC,EAAE1Q,MAAQsQ,EAAWtQ,MAC7C4Q,EAAQxR,EAAOsR,QAAQ,CAAC,EAAEzQ,MAAQqQ,EAAWrQ,MAC7C4Q,EAAgBpqC,KAAKqqC,KAAKH,EAAQA,EAAQC,EAAQA,CAAK,EACvDC,EAAgBN,IAClBE,EAAa,GAEjB,CACF,CAAC,EACD,IAAIM,EAAQ,UAAkB,CAC5BN,EAAa,EACf,EACA,KAAKtL,GAAG,aAAc4L,CAAK,EAC3B,KAAK5L,GAAG,cAAe4L,CAAK,EAC5B,KAAK5L,GAAG,WAAY,SAAS/F,EAAQ,CAEnC,GADAkR,EAAa,KACTG,IAAe,GAAM,CACvB,IAAIO,EAAYhb,EAAgB,QAAWyM,YAAYC,IAAI,EAAI2N,EAC3DW,EAAYR,IACdpR,EAAO0E,eAAe,EACtB,KAAK2B,QAAQ,KAAK,EAEtB,CACF,CAAC,CACH,EACA7C,EAAOwJ,oBAAsB,UAA+B,CAC1D,GAAI,GAAC,KAAK9K,OAAO,GAAK,CAAC,KAAKA,OAAO,EAAE2P,oBAGrC,KAAIC,EAASn4B,GAAK,KAAKuoB,OAAO,EAAG,KAAKA,OAAO,EAAE2P,kBAAkB,EAC7DE,EACJ,KAAKhM,GAAG,aAAc,UAAW,CAC/B+L,EAAO,EACP,KAAKE,cAAcD,CAAY,EAC/BA,EAAe,KAAKE,YAAYH,EAAQ,GAAG,CAC7C,CAAC,EACD,IAAII,EAAW,SAAmBlS,EAAQ,CACxC8R,EAAO,EACP,KAAKE,cAAcD,CAAY,CACjC,EACA,KAAKhM,GAAG,YAAa+L,CAAM,EAC3B,KAAK/L,GAAG,WAAYmM,CAAQ,EAC5B,KAAKnM,GAAG,cAAemM,CAAQ,EACjC,EACA1O,EAAO7tB,WAAa,SAAqBuH,EAAIiF,EAAS,CACpD,IAAIwnB,EAAS,KACTwI,EACJj1B,OAAAA,EAAKvD,GAAK,KAAMuD,CAAE,EAClB,KAAKk1B,sBAAsB,EAC3BD,EAAYvb,EAAgB,QAAWjhB,WAAW,UAAW,CACvDg0B,EAAO8C,eAAe1iC,IAAIooC,CAAS,GACrCxI,EAAO8C,eAAe,OAAU0F,CAAS,EAE3Cj1B,EAAG,CACL,EAAGiF,CAAO,EACV,KAAKsqB,eAAen2B,IAAI67B,CAAS,EAC1BA,CACT,EACA3O,EAAO3iB,aAAe,SAAuBsxB,EAAW,CACtD,OAAI,KAAK1F,eAAe1iC,IAAIooC,CAAS,IACnC,KAAK1F,eAAe,OAAU0F,CAAS,EACvCvb,EAAgB,QAAW/V,aAAasxB,CAAS,GAE5CA,CACT,EACA3O,EAAOyO,YAAc,SAAsB/0B,EAAIm1B,EAAU,CACvDn1B,EAAKvD,GAAK,KAAMuD,CAAE,EAClB,KAAKk1B,sBAAsB,EAC3B,IAAIE,EAAa1b,EAAgB,QAAWqb,YAAY/0B,EAAIm1B,CAAQ,EACpE,YAAK3F,gBAAgBp2B,IAAIg8B,CAAU,EAC5BA,CACT,EACA9O,EAAOwO,cAAgB,SAAwBM,EAAY,CACzD,OAAI,KAAK5F,gBAAgB3iC,IAAIuoC,CAAU,IACrC,KAAK5F,gBAAgB,OAAU4F,CAAU,EACzC1b,EAAgB,QAAWob,cAAcM,CAAU,GAE9CA,CACT,EACA9O,EAAO+O,sBAAwB,SAAgCr1B,EAAI,CACjE,IAAIs1B,EAAS,KACb,GAAI,CAAC,KAAKC,aACR,OAAO,KAAK98B,WAAWuH,EAAI,IAAM,EAAE,EAErC,KAAKk1B,sBAAsB,EAC3B,IAAI5sB,EACJtI,OAAAA,EAAKvD,GAAK,KAAMuD,CAAE,EAClBsI,EAAKoR,EAAgB,QAAW2b,sBAAsB,UAAW,CAC3DC,EAAO7F,QAAQ5iC,IAAIyb,CAAE,GACvBgtB,EAAO7F,QAAQ,OAAUnnB,CAAE,EAE7BtI,EAAG,CACL,CAAC,EACD,KAAKyvB,QAAQr2B,IAAIkP,CAAE,EACZA,CACT,EACAge,EAAOkP,2BAA6B,SAAoC/jC,EAAMuO,EAAI,CAChF,IAAIy1B,EAAS,KACb,GAAI,MAAK/F,WAAW7iC,IAAI4E,CAAI,EAG5B,MAAKyjC,sBAAsB,EAC3Bl1B,EAAKvD,GAAK,KAAMuD,CAAE,EAClB,IAAIsI,EAAK,KAAK+sB,sBAAsB,UAAW,CAC7Cr1B,EAAG,EACCy1B,EAAO/F,WAAW7iC,IAAI4E,CAAI,GAC5BgkC,EAAO/F,WAAW,OAAUj+B,CAAI,CAEpC,CAAC,EACD,YAAKi+B,WAAWnhC,IAAIkD,EAAM6W,CAAE,EACrB7W,EACT,EACA60B,EAAOoP,0BAA4B,SAAmCjkC,EAAM,CACrE,KAAKi+B,WAAW7iC,IAAI4E,CAAI,IAG7B,KAAKkkC,qBAAqB,KAAKjG,WAAWn+B,IAAIE,CAAI,CAAC,EACnD,KAAKi+B,WAAW,OAAUj+B,CAAI,EAChC,EACA60B,EAAOqP,qBAAuB,SAA8BrtB,EAAI,CAC9D,OAAK,KAAKitB,cAGN,KAAK9F,QAAQ5iC,IAAIyb,CAAE,IACrB,KAAKmnB,QAAQ,OAAUnnB,CAAE,EACzBoR,EAAgB,QAAWic,qBAAqBrtB,CAAE,GAE7CA,GANE,KAAK3E,aAAa2E,CAAE,CAO/B,EACAge,EAAO4O,sBAAwB,UAAiC,CAC9D,IAAIU,EAAS,KACT,KAAKjG,2BAGT,KAAKA,yBAA2B,GAChC,KAAKnG,IAAI,UAAW,UAAW,CAC7B,CAAC,CAAC,aAAc,2BAA2B,EAAG,CAAC,UAAW,sBAAsB,EAAG,CAAC,iBAAkB,cAAc,EAAG,CAAC,kBAAmB,eAAe,CAAC,EAAEj8B,QAAQ,SAASsoC,EAAM,CAClL,IAAIC,EAASD,EAAK,CAAC,EAAGE,EAAaF,EAAK,CAAC,EACzCD,EAAOE,CAAM,EAAEvoC,QAAQ,SAASsE,EAAKvJ,EAAK,CACxC,OAAOstC,EAAOG,CAAU,EAAEztC,CAAG,CAC/B,CAAC,CACH,CAAC,EACDstC,EAAOjG,yBAA2B,EACpC,CAAC,EACH,EACAhB,EAAWqH,kBAAoB,SAA2BvkC,EAAMwkC,EAAqB,CACnF,GAAI,OAAOxkC,GAAS,UAAY,CAACA,EAC/B,MAAM,IAAI0E,MAAM,4BAA8B1E,EAAO,gCAAgC,EAEvF,IAAI0gC,EAAQxD,EAAW+C,aAAa,MAAM,EACtCY,EAASH,GAASA,EAAMG,OAAO2D,CAAmB,EAClDC,EAASvH,IAAesH,GAAuBtH,EAAWriC,UAAU6pC,cAAcF,EAAoB3pC,SAAS,EACnH,GAAIgmC,GAAU,CAAC4D,EAAQ,CACrB,IAAIE,EACJ,MAAI9D,EACF8D,EAAS,qDAETA,EAAS,+BAEL,IAAIjgC,MAAM,uBAAyB1E,EAAO,MAAQ2kC,EAAS,GAAG,CACtE,CACA3kC,EAAOm8B,GAAan8B,CAAI,EACnBk9B,EAAW0H,cACd1H,EAAW0H,YAAc,CAAC,GAE5B,IAAIC,EAAU3H,EAAW+C,aAAa,QAAQ,EAC9C,GAAIjgC,IAAS,UAAY6kC,GAAWA,EAAQC,QAAS,CACnD,IAAIA,EAAUD,EAAQC,QAClBC,EAActuC,OAAOmE,KAAKkqC,CAAO,EACrC,GAAIA,GAAWC,EAAYprC,OAAS,GAAKorC,EAAYxmC,IAAI,SAASymC,EAAO,CACvE,OAAOF,EAAQE,CAAK,CACtB,CAAC,EAAEpL,MAAM7S,OAAO,EACd,MAAM,IAAIriB,MAAM,kEAAkE,CAEtF,CACAw4B,OAAAA,EAAW0H,YAAY5kC,CAAI,EAAIwkC,EAC/BtH,EAAW0H,YAAY54B,GAAYhM,CAAI,CAAC,EAAIwkC,EACrCA,CACT,EACAtH,EAAW+C,aAAe,SAAsBjgC,EAAM,CACpD,GAAI,GAACA,GAAQ,CAACk9B,EAAW0H,aAGzB,OAAO1H,EAAW0H,YAAY5kC,CAAI,CACpC,EACOk9B,CACT,EAAE,EACFD,GAAWpiC,UAAUipC,aAAe,OAAO7b,EAAgB,QAAW2b,uBAA0B,YAAc,OAAO3b,EAAgB,QAAWic,sBAAyB,WACzKjH,GAAWsH,kBAAkB,YAAatH,EAAU,EACpD,SAASgI,GAAWhL,EAAQ1pB,EAAO20B,EAAU,CAC3C,GAAI,OAAO30B,GAAU,UAAYA,EAAQ,GAAKA,EAAQ20B,EACpD,MAAM,IAAIxgC,MAAM,sBAAwBu1B,EAAS,0CAA4C1pB,EAAQ,wCAA0C20B,EAAW,IAAI,CAElK,CACA,SAASC,GAASlL,EAAQmL,EAAYC,EAAQC,EAAY,CACxDL,OAAAA,GAAWhL,EAAQqL,EAAYD,EAAO1rC,OAAS,CAAC,EACzC0rC,EAAOC,CAAU,EAAEF,CAAU,CACtC,CACA,SAASG,GAAoBF,EAAQ,CACnC,IAAIG,EACJ,OAAIH,IAAW,QAAUA,EAAO1rC,SAAW,EACzC6rC,EAAgB,CACd7rC,OAAQ,EACR2d,MAAO,UAAiB,CACtB,MAAM,IAAI5S,MAAM,iCAAiC,CACnD,EACA+S,IAAK,UAAe,CAClB,MAAM,IAAI/S,MAAM,iCAAiC,CACnD,CACF,EAEA8gC,EAAgB,CACd7rC,OAAQ0rC,EAAO1rC,OACf2d,MAAO6tB,GAASn6B,KAAK,KAAM,QAAS,EAAGq6B,CAAM,EAC7C5tB,IAAK0tB,GAASn6B,KAAK,KAAM,MAAO,EAAGq6B,CAAM,CAC3C,EAEEpd,EAAgB,QAAWhe,QAAUge,EAAgB,QAAWhe,OAAOmH,WACzEo0B,EAAcvd,EAAgB,QAAWhe,OAAOmH,QAAQ,EAAI,UAAW,CACrE,OAAQi0B,GAAU,CAAA,GAAI9vB,OAAO,CAC/B,GAEKiwB,CACT,CACA,SAASC,GAAiBnuB,EAAOG,EAAK,CACpC,OAAIhX,MAAMiQ,QAAQ4G,CAAK,EACdiuB,GAAoBjuB,CAAK,EACvBA,IAAU,QAAUG,IAAQ,OAC9B8tB,GAAoB,EAEtBA,GAAoB,CAAC,CAACjuB,EAAOG,CAAG,CAAC,CAAC,CAC3C,CACA,SAASiuB,GAAgBC,EAAUC,EAAU,CAC3C,IAAIC,EAAmB,EACnBvuB,EACAG,EACJ,GAAI,CAACmuB,EACH,MAAO,IAEL,CAACD,GAAY,CAACA,EAAShsC,UACzBgsC,EAAWF,GAAiB,EAAG,CAAC,GAElC,QAASlqB,EAAK,EAAGA,EAAKoqB,EAAShsC,OAAQ4hB,IACrCjE,EAAQquB,EAASruB,MAAMiE,CAAE,EACzB9D,EAAMkuB,EAASluB,IAAI8D,CAAE,EACjB9D,EAAMmuB,IACRnuB,EAAMmuB,GAERC,GAAoBpuB,EAAMH,EAE5B,OAAOuuB,EAAmBD,CAC5B,CACA,SAASE,GAAYhvC,EAAO,CAC1B,GAAIA,aAAiBgvC,GACnB,OAAOhvC,EAEL,OAAOA,GAAU,SACnB,KAAKyV,KAAOzV,EACH,OAAOA,GAAU,SAC1B,KAAKyL,QAAUzL,EACNy0B,GAAUz0B,CAAK,IACpB,OAAOA,EAAMyV,MAAS,WACxB,KAAKA,KAAOzV,EAAMyV,MAEpBlV,GAAO,KAAMP,CAAK,GAEf,KAAKyL,UACR,KAAKA,QAAUujC,GAAYC,gBAAgB,KAAKx5B,IAAI,GAAK,GAE7D,CACAu5B,GAAYjrC,UAAU0R,KAAO,EAC7Bu5B,GAAYjrC,UAAU0H,QAAU,GAChCujC,GAAYjrC,UAAU2X,OAAS,KAC/BszB,GAAYE,WAAa,CAAC,mBAAoB,oBAAqB,oBAAqB,mBAAoB,8BAA+B,qBAAqB,EAChKF,GAAYC,gBAAkB,CAC5B,EAAG,iCACH,EAAG,8DACH,EAAG,8HACH,EAAG,qHACH,EAAG,mEACL,EACA,QAASE,GAAS,EAAGA,GAASH,GAAYE,WAAWrsC,OAAQssC,KAC3DH,GAAYA,GAAYE,WAAWC,EAAM,CAAC,EAAIA,GAC9CH,GAAYjrC,UAAUirC,GAAYE,WAAWC,EAAM,CAAC,EAAIA,GAE1D,SAASC,GAAWpvC,EAAO,CACzB,OAA2BA,GAAU,MAAQ,OAAOA,EAAMsO,MAAS,UACrE,CACA,SAAS+gC,GAAervC,EAAO,CACzBovC,GAAWpvC,CAAK,GAClBA,EAAMsO,KAAK,KAAM,SAAS6F,EAAG,CAC7B,CAAC,CAEL,CACA,IAAIm7B,GAAe,SAAuBxqB,EAAO,CAC/C,IAAIoD,EAAM,CAAC,OAAQ,QAAS,WAAY,KAAM,kCAAmC,OAAQ,KAAK,EAAEnP,OAAO,SAAS4vB,EAAK9/B,EAAM4b,EAAI,CAC7H,OAAIK,EAAMjc,CAAI,IACZ8/B,EAAI9/B,CAAI,EAAIic,EAAMjc,CAAI,GAEjB8/B,CACT,EAAG,CACD5e,KAAMjF,EAAMiF,MAAQpgB,MAAM5F,UAAU0D,IAAIxD,KAAK6gB,EAAMiF,KAAM,SAASzK,EAAK,CACrE,MAAO,CACLxZ,UAAWwZ,EAAIxZ,UACfkb,QAAS1B,EAAI0B,QACb7R,KAAMmQ,EAAInQ,KACV4Q,GAAIT,EAAIS,EACV,CACF,CAAC,CACH,CAAC,EACD,OAAOmI,CACT,EACIqnB,GAAmB,SAA2BC,EAAM,CACtD,IAAIC,EAAWD,EAAK3T,GAAG,OAAO,EAC1B6T,EAAY/lC,MAAM5F,UAAU0D,IAAIxD,KAAKwrC,EAAU,SAASr7B,EAAG,CAC7D,OAAOA,EAAE0Q,KACX,CAAC,EACG6qB,EAAShmC,MAAM5F,UAAU0D,IAAIxD,KAAKwrC,EAAU,SAASG,EAAS,CAChE,IAAIphC,EAAO8gC,GAAaM,EAAQ9qB,KAAK,EACrC,OAAI8qB,EAAQn/B,MACVjC,EAAKiC,IAAMm/B,EAAQn/B,KAEdjC,CACT,CAAC,EACD,OAAOmhC,EAAOvoC,OAAOuC,MAAM5F,UAAU8vB,OAAO5vB,KAAKurC,EAAKK,WAAW,EAAG,SAAS/qB,EAAO,CAClF,OAAO4qB,EAAUh2B,QAAQoL,CAAK,IAAM,EACtC,CAAC,EAAErd,IAAI6nC,EAAY,CAAC,CACtB,EACIQ,GAAmB,SAA2BthC,EAAMghC,EAAM,CAC5DhhC,OAAAA,EAAKxJ,QAAQ,SAAS8f,EAAO,CAC3B,IAAIirB,EAAaP,EAAKQ,mBAAmBlrB,CAAK,EAAEA,MAC5C,CAACA,EAAMrU,KAAOqU,EAAMiF,MACtBjF,EAAMiF,KAAK/kB,QAAQ,SAASsa,EAAK,CAC/B,OAAOywB,EAAWE,OAAO3wB,CAAG,CAC9B,CAAC,CAEL,CAAC,EACMkwB,EAAKK,WAAW,CACzB,EACIK,GAAqB,CACvBX,iBAAAA,GACAO,iBAAAA,GACAR,aAAAA,EACF,EACIa,GAAmB,mBACnBC,GAA8B,SAASC,EAAY,CACrD7e,EAAwB,QAAW8e,EAAcD,CAAU,EAC3D,SAASC,EAAa7T,EAAQx5B,EAAS,CACrC,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAM+N,eAAiB,SAASp8B,EAAG,CACjC,OAAOquB,EAAM6I,cAAcl3B,CAAC,CAC9B,EACAquB,EAAMgO,OAAS,SAASr8B,EAAG,CACzB,OAAOquB,EAAMiO,MAAMt8B,CAAC,CACtB,EACAquB,EAAMkO,QAAUlO,EAAMmO,eAAiBnO,EAAMoO,eAAiB,GAC9DpO,EAAMqO,UAAU,CAACrO,EAAMkE,SAASoK,WAAW,EAC3CtO,EAAMzK,QAAQyK,EAAMkE,SAAS3O,OAAO,EACpCyK,EAAM8F,WAAa1Q,GAAS,MAAO,CACjC/T,UAAWssB,GAAmB,UAChC,EAAG,CACDY,KAAM,UACR,CAAC,EACDvO,EAAMwO,QAAUpZ,GAAS,IAAK,CAC5B/T,UAAWssB,GAAmB,gCAC9BpwB,GAAIyiB,EAAMlzB,GAAG,EAAEqqB,aAAa,kBAAkB,CAChD,CAAC,EACDlX,GAAY+f,EAAMwO,QAASxO,EAAMyO,YAAY,CAAC,EAC9CzO,EAAMmC,IAAI/0B,YAAY4yB,EAAMwO,OAAO,EACnCxO,EAAMmC,IAAI/0B,YAAY4yB,EAAM8F,UAAU,EAC/B9F,CACT,CACA,IAAIzE,EAASuS,EAAavsC,UAC1Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,KAAKmmB,cAAc,EAC9BkH,SAAU,EACZ,EAAG,CACD,mBAAoB,KAAKnxB,GAAG,EAAI,eAChC,cAAe,OACf,aAAc,KAAKoxB,MAAM,EACzB,KAAQ,QACV,CAAC,CACH,EACApT,EAAOyJ,QAAU,UAAmB,CAClC,KAAKc,WAAa,KAClB,KAAK0I,QAAU,KACf,KAAKI,oBAAsB,KAC3Bf,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAOiM,cAAgB,UAAyB,CAC9C,OAAOmG,GAAmB,eAAiBE,EAAWtsC,UAAUimC,cAAc/lC,KAAK,IAAI,CACzF,EACA85B,EAAOoT,MAAQ,UAAiB,CAC9B,OAAO,KAAKtJ,SAAS,KAAKnB,SAASyK,OAAS,cAAc,CAC5D,EACApT,EAAOkT,YAAc,UAAuB,CAC1C,IAAII,EAAO,KAAK3K,SAASuK,aAAe,KAAKpJ,SAAS,yBAAyB,EAC/E,OAAI,KAAKgJ,UAAU,IACjBQ,GAAQ,IAAM,KAAKxJ,SAAS,qFAAqF,GAE5GwJ,CACT,EACAtT,EAAOzhB,KAAO,UAAgB,CAC5B,GAAI,CAAC,KAAKo0B,QAAS,CACjB,IAAIjU,EAAS,KAAKA,OAAO,EACzB,KAAKmE,QAAQ,iBAAiB,EAC9B,KAAK8P,QAAU,IACX,KAAKhK,SAAS4K,YAAc,CAAC,KAAKX,gBAAkB,CAAC,KAAKC,iBAC5D,KAAKW,KAAK,EAEZ,KAAKC,YAAc,CAAC/U,EAAOgV,OAAO,EAC9B,KAAK/K,SAASgL,aAAe,KAAKF,aACpC/U,EAAOkV,MAAM,EAEf,KAAKrR,GAAG,UAAW,KAAKiQ,cAAc,EACtC,KAAKqB,aAAenV,EAAOh2B,SAAS,EACpCg2B,EAAOh2B,SAAS,EAAK,EACrB,KAAK2jC,KAAK,EACV,KAAKyH,kBAAkB,EACvB,KAAKviC,GAAG,EAAEE,aAAa,cAAe,OAAO,EAC7C,KAAKoxB,QAAQ,WAAW,EACxB,KAAK+P,eAAiB,EACxB,CACF,EACA5S,EAAO+T,OAAS,SAAgB9xC,EAAO,CACrC,OAAI,OAAOA,GAAU,WACnB,KAAKA,EAAQ,OAAS,OAAO,EAAE,EAE1B,KAAK0wC,OACd,EACA3S,EAAO0S,MAAQ,UAAiB,CAC9B,GAAK,KAAKC,QAGV,KAAIjU,EAAS,KAAKA,OAAO,EACzB,KAAKmE,QAAQ,kBAAkB,EAC/B,KAAK8P,QAAU,GACX,KAAKc,aAAe,KAAK9K,SAASgL,aACpCjV,EAAO6J,KAAK,EAEd,KAAK5S,IAAI,UAAW,KAAK6c,cAAc,EACnC,KAAKqB,cACPnV,EAAOh2B,SAAS,EAAI,EAEtB,KAAK4jC,KAAK,EACV,KAAK/6B,GAAG,EAAEE,aAAa,cAAe,MAAM,EAC5C,KAAKoxB,QAAQ,YAAY,EACzB,KAAKmR,iBAAiB,EAClB,KAAKrL,SAASsL,WAChB,KAAKxK,QAAQ,EAEjB,EACAzJ,EAAO8S,UAAY,SAAmB7wC,EAAO,CAC3C,GAAI,OAAOA,GAAU,UAAW,CAC9B,IAAIiyC,EAAa,KAAKC,WAAa,CAAC,CAAClyC,EACjCywC,EAAQ,KAAKhI,SAAS,aAAa,EACvC,GAAIwJ,GAAc,CAACxB,EAAO,CACxB,IAAI0B,EAAO,KAAK7J,WAChB,KAAKA,WAAa,KAAK3D,IACvB8L,EAAQ,KAAK5H,SAAS,cAAe,CACnCuJ,YAAa,oBACf,CAAC,EACD,KAAK9J,WAAa6J,EAClB,KAAK7R,GAAGmQ,EAAO,QAAS,KAAKD,MAAM,CACrC,CACI,CAACyB,GAAcxB,IACjB,KAAK/c,IAAI+c,EAAO,QAAS,KAAKD,MAAM,EACpC,KAAKzgC,YAAY0gC,CAAK,EACtBA,EAAMjJ,QAAQ,EAElB,CACA,OAAO,KAAK0K,UACd,EACAnU,EAAOwT,KAAO,UAAgB,CAC5B,KAAKc,SAAS,KAAKta,QAAQ,CAAC,CAC9B,EACAgG,EAAOsU,SAAW,SAAkBta,EAAS,CAC3C,IAAIsQ,EAAY,KAAKA,UAAU,EAC3BiK,EAAWjK,EAAUjlB,WACrBmvB,EAAgBlK,EAAUmK,YAC9B,KAAK5R,QAAQ,iBAAiB,EAC9B,KAAKgQ,eAAiB,GACtB0B,EAASviC,YAAYs4B,CAAS,EAC9B,KAAKoK,MAAM,EACXjX,GAAc6M,EAAWtQ,CAAO,EAChC,KAAK6I,QAAQ,WAAW,EACpB2R,EACFD,EAASja,aAAagQ,EAAWkK,CAAa,EAE9CD,EAAS1iC,YAAYy4B,CAAS,EAEhC,IAAIqK,EAAc,KAAKjK,SAAS,aAAa,EACzCiK,GACFJ,EAAS1iC,YAAY8iC,EAAY/N,GAAG,CAExC,EACA5G,EAAO0U,MAAQ,UAAiB,CAC9B,KAAK7R,QAAQ,kBAAkB,EAC/BtF,GAAQ,KAAK+M,UAAU,CAAC,EACxB,KAAKzH,QAAQ,YAAY,CAC3B,EACA7C,EAAOhG,QAAU,SAAiB/3B,EAAO,CACvC,OAAI,OAAOA,EAAU,MACnB,KAAK2yC,SAAW3yC,GAEX,KAAK2yC,QACd,EACA5U,EAAO8T,kBAAoB,UAA6B,CACtD,IAAIe,EAAWxhB,EAAkB,QAAWyhB,cACxCC,EAAW,KAAKvM,QAAQ5B,IAC5B,KAAKyM,oBAAsB,MACvB0B,EAASra,SAASma,CAAQ,GAAKE,IAAaF,KAC9C,KAAKxB,oBAAsBwB,EAC3B,KAAK9Y,MAAM,EAEf,EACAiE,EAAOgU,iBAAmB,UAA4B,CAChD,KAAKX,sBACP,KAAKA,oBAAoBtX,MAAM,EAC/B,KAAKsX,oBAAsB,KAE/B,EACArT,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CAEpD,GADAA,EAAOiF,gBAAgB,EACnBlO,EAAiB,QAAWjc,WAAWklB,EAAQ,QAAQ,GAAK,KAAKsW,UAAU,EAAG,CAChFtW,EAAO0E,eAAe,EACtB,KAAKwR,MAAM,EACX,MACF,CACA,GAAKnf,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,EAMzD,SAHIwY,EAAe,KAAKC,cAAc,EAClCJ,EAAW,KAAKjO,IAAIjN,cAAc,QAAQ,EAC1Cub,EACKxuB,EAAK,EAAGA,EAAKsuB,EAAalwC,OAAQ4hB,IACzC,GAAImuB,IAAaG,EAAatuB,CAAE,EAAG,CACjCwuB,EAAaxuB,EACb,KACF,CAEE2M,EAAkB,QAAWyhB,gBAAkB,KAAKlO,MACtDsO,EAAa,GAEX1Y,EAAO2Y,UAAYD,IAAe,GACpCF,EAAaA,EAAalwC,OAAS,CAAC,EAAEi3B,MAAM,EAC5CS,EAAO0E,eAAe,GACb,CAAC1E,EAAO2Y,UAAYD,IAAeF,EAAalwC,OAAS,IAClEkwC,EAAa,CAAC,EAAEjZ,MAAM,EACtBS,EAAO0E,eAAe,GAE1B,EACAlB,EAAOiV,cAAgB,UAAyB,CAC9C,IAAIG,EAAc,KAAKxO,IAAIyO,iBAAiB,GAAG,EAC/C,OAAOzpC,MAAM5F,UAAU8vB,OAAO5vB,KAAKkvC,EAAa,SAAS/a,EAAO,CAC9D,OAAQA,aAAiBjH,EAAgB,QAAWkiB,mBAAqBjb,aAAiBjH,EAAgB,QAAWmiB,kBAAoBlb,EAAMmb,aAAa,MAAM,IAAMnb,aAAiBjH,EAAgB,QAAWqiB,kBAAoBpb,aAAiBjH,EAAgB,QAAWsiB,mBAAqBrb,aAAiBjH,EAAgB,QAAWuiB,qBAAuBtb,aAAiBjH,EAAgB,QAAWwiB,oBAAsB,CAACvb,EAAMmb,aAAa,UAAU,GAAKnb,aAAiBjH,EAAgB,QAAWyiB,mBAAqBxb,aAAiBjH,EAAgB,QAAW0iB,mBAAqBzb,aAAiBjH,EAAgB,QAAW2iB,kBAAoB1b,EAAMmb,aAAa,UAAU,GAAKnb,EAAMuB,aAAa,UAAU,IAAM,IAAMvB,EAAMmb,aAAa,iBAAiB,CACpwB,CAAC,CACH,EACOjD,CACT,EAAEnK,EAAU,EACZiK,GAAYrsC,UAAU2iC,SAAW,CAC/BgL,YAAa,GACbM,UAAW,EACb,EACA7L,GAAWsH,kBAAkB,cAAe2C,EAAW,EACvD,IAAI2D,GAA4B,SAASC,EAAc,CACrDxiB,EAAwB,QAAWyiB,EAAYD,CAAY,EAC3D,SAASC,EAAWtE,EAAQ,CAC1B,IAAInN,EACAmN,IAAW,SACbA,EAAS,CAAA,GAEXnN,EAAQwR,EAAa/vC,KAAK,IAAI,GAAK,KACnCu+B,EAAM0R,QAAU,CAAA,EAChBv0C,OAAOC,eAAe2xB,EAAgC,QAAWiR,CAAK,EAAG,SAAU,CACjFx5B,IAAK,UAAgB,CACnB,OAAO,KAAKkrC,QAAQrxC,MACtB,CACF,CAAC,EACD,QAAS4hB,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IACnC+d,EAAM2R,SAASxE,EAAOlrB,CAAE,CAAC,EAE3B,OAAO+d,CACT,CACA,IAAIzE,EAASkW,EAAWlwC,UACxBg6B,OAAAA,EAAOoW,SAAW,SAAkBrvB,EAAO,CACzC,IAAIif,EAAS,KACTtqB,EAAQ,KAAKy6B,QAAQrxC,OACnB,GAAK4W,KAAS,MAClB9Z,OAAOC,eAAe,KAAM6Z,EAAO,CACjCzQ,IAAK,UAAgB,CACnB,OAAO,KAAKkrC,QAAQz6B,CAAK,CAC3B,CACF,CAAC,EAEC,KAAKy6B,QAAQx6B,QAAQoL,CAAK,IAAM,KAClC,KAAKovB,QAAQ5nC,KAAKwY,CAAK,EACvB,KAAK8b,QAAQ,CACX9b,MAAAA,EACA5L,KAAM,WACNjQ,OAAQ,IACV,CAAC,GAEH6b,EAAMsvB,aAAe,UAAW,CAC9BrQ,EAAOnD,QAAQ,CACb9b,MAAAA,EACA5L,KAAM,cACNjQ,OAAQ86B,CACV,CAAC,CACH,EACInB,GAAU9d,CAAK,GACjBA,EAAMiY,iBAAiB,cAAejY,EAAMsvB,YAAY,CAE5D,EACArW,EAAOsW,YAAc,SAAqBC,EAAQ,CAEhD,QADIxvB,EACKL,EAAK,EAAG/c,EAAI,KAAK7E,OAAQ4hB,EAAK/c,EAAG+c,IACxC,GAAI,KAAKA,CAAE,IAAM6vB,EAAQ,CACvBxvB,EAAQ,KAAKL,CAAE,EACXK,EAAM4O,KACR5O,EAAM4O,IAAI,EAEZ,KAAKwgB,QAAQjiB,OAAOxN,EAAI,CAAC,EACzB,KACF,CAEGK,GAGL,KAAK8b,QAAQ,CACX9b,MAAAA,EACA5L,KAAM,cACNjQ,OAAQ,IACV,CAAC,CACH,EACA80B,EAAOwW,aAAe,SAAsBx0B,EAAI,CAE9C,QADIpd,EAAS,KACJ8hB,EAAK,EAAG/c,EAAI,KAAK7E,OAAQ4hB,EAAK/c,EAAG+c,IAAM,CAC9C,IAAIK,EAAQ,KAAKL,CAAE,EACnB,GAAIK,EAAM/E,KAAOA,EAAI,CACnBpd,EAASmiB,EACT,KACF,CACF,CACA,OAAOniB,CACT,EACOsxC,CACT,EAAE/R,CAAY,EACd6R,GAAUhwC,UAAUo+B,eAAiB,CACnCqS,OAAQ,SACRC,SAAU,WACVC,YAAa,cACbC,YAAa,aACf,EACA,QAASr/B,MAASy+B,GAAUhwC,UAAUo+B,eACpC4R,GAAUhwC,UAAU,KAAOuR,EAAK,EAAI,KAEtC,IAAIs/B,GAAkB,SAAwBC,EAAM/vB,EAAO,CACzD,QAASL,EAAK,EAAGA,EAAKowB,EAAKhyC,OAAQ4hB,IAC7B,CAAC9kB,OAAOmE,KAAK+wC,EAAKpwB,CAAE,CAAC,EAAE5hB,QAAUiiB,EAAM/E,KAAO80B,EAAKpwB,CAAE,EAAE1E,KAG3D80B,EAAKpwB,CAAE,EAAEqwB,QAAU,GAEvB,EACIC,GAAiC,SAASC,EAAY,CACxDxjB,EAAwB,QAAWyjB,EAAiBD,CAAU,EAC9D,SAASC,EAAgBtF,EAAQ,CAC/B,IAAInN,EACAmN,IAAW,SACbA,EAAS,CAAA,GAEX,QAASlrB,EAAKkrB,EAAO9sC,OAAS,EAAG4hB,GAAM,EAAGA,IACxC,GAAIkrB,EAAOlrB,CAAE,EAAEqwB,QAAS,CACtBF,GAAgBjF,EAAQA,EAAOlrB,CAAE,CAAC,EAClC,KACF,CAEF+d,OAAAA,EAAQwS,EAAW/wC,KAAK,KAAM0rC,CAAM,GAAK,KACzCnN,EAAM0S,UAAY,GACX1S,CACT,CACA,IAAIzE,EAASkX,EAAgBlxC,UAC7Bg6B,OAAAA,EAAOoW,SAAW,SAAkBrvB,EAAO,CACzC,IAAIif,EAAS,KACTjf,EAAMgwB,SACRF,GAAgB,KAAM9vB,CAAK,EAE7BkwB,EAAWjxC,UAAUowC,SAASlwC,KAAK,KAAM6gB,CAAK,EACzCA,EAAMiY,mBAGXjY,EAAMqwB,eAAiB,UAAW,CAC5BpR,EAAOmR,YAGXnR,EAAOmR,UAAY,GACnBN,GAAgB7Q,EAAQjf,CAAK,EAC7Bif,EAAOmR,UAAY,GACnBnR,EAAOnD,QAAQ,QAAQ,EACzB,EACA9b,EAAMiY,iBAAiB,gBAAiBjY,EAAMqwB,cAAc,EAC9D,EACApX,EAAOsW,YAAc,SAAqBC,EAAQ,CAChDU,EAAWjxC,UAAUswC,YAAYpwC,KAAK,KAAMqwC,CAAM,EAC9CA,EAAOxX,qBAAuBwX,EAAOa,iBACvCb,EAAOxX,oBAAoB,gBAAiBwX,EAAOa,cAAc,EACjEb,EAAOa,eAAiB,KAE5B,EACOF,CACT,EAAElB,EAAS,EACPqB,GAAgB,SAAwBP,EAAM/vB,EAAO,CACvD,QAASL,EAAK,EAAGA,EAAKowB,EAAKhyC,OAAQ4hB,IAC7B,CAAC9kB,OAAOmE,KAAK+wC,EAAKpwB,CAAE,CAAC,EAAE5hB,QAAUiiB,EAAM/E,KAAO80B,EAAKpwB,CAAE,EAAE1E,KAG3D80B,EAAKpwB,CAAE,EAAE4wB,SAAW,GAExB,EACIC,GAAiC,SAASN,EAAY,CACxDxjB,EAAwB,QAAW+jB,EAAiBP,CAAU,EAC9D,SAASO,EAAgB5F,EAAQ,CAC/B,IAAInN,EACAmN,IAAW,SACbA,EAAS,CAAA,GAEX,QAASlrB,EAAKkrB,EAAO9sC,OAAS,EAAG4hB,GAAM,EAAGA,IACxC,GAAIkrB,EAAOlrB,CAAE,EAAE4wB,SAAU,CACvBD,GAAczF,EAAQA,EAAOlrB,CAAE,CAAC,EAChC,KACF,CAEF+d,OAAAA,EAAQwS,EAAW/wC,KAAK,KAAM0rC,CAAM,GAAK,KACzCnN,EAAM0S,UAAY,GAClBv1C,OAAOC,eAAe2xB,EAAgC,QAAWiR,CAAK,EAAG,gBAAiB,CACxFx5B,IAAK,UAAgB,CACnB,QAASwsC,EAAM,EAAGA,EAAM,KAAK3yC,OAAQ2yC,IACnC,GAAI,KAAKA,CAAG,EAAEH,SACZ,OAAOG,EAGX,MAAO,EACT,EACAxvC,IAAK,UAAgB,CACrB,CACF,CAAC,EACMw8B,CACT,CACA,IAAIzE,EAASwX,EAAgBxxC,UAC7Bg6B,OAAAA,EAAOoW,SAAW,SAAkBrvB,EAAO,CACzC,IAAIif,EAAS,KACTjf,EAAMuwB,UACRD,GAAc,KAAMtwB,CAAK,EAE3BkwB,EAAWjxC,UAAUowC,SAASlwC,KAAK,KAAM6gB,CAAK,EACzCA,EAAMiY,mBAGXjY,EAAM2wB,gBAAkB,UAAW,CAC7B1R,EAAOmR,YAGXnR,EAAOmR,UAAY,GACnBE,GAAcrR,EAAQjf,CAAK,EAC3Bif,EAAOmR,UAAY,GACnBnR,EAAOnD,QAAQ,QAAQ,EACzB,EACA9b,EAAMiY,iBAAiB,iBAAkBjY,EAAM2wB,eAAe,EAChE,EACA1X,EAAOsW,YAAc,SAAqBC,EAAQ,CAChDU,EAAWjxC,UAAUswC,YAAYpwC,KAAK,KAAMqwC,CAAM,EAC9CA,EAAOxX,qBAAuBwX,EAAOmB,kBACvCnB,EAAOxX,oBAAoB,iBAAkBwX,EAAOmB,eAAe,EACnEnB,EAAOmB,gBAAkB,KAE7B,EACOF,CACT,EAAExB,EAAS,EACP2B,GAAgC,SAASV,EAAY,CACvDxjB,EAAwB,QAAWmkB,EAAgBX,CAAU,EAC7D,SAASW,GAAiB,CACxB,OAAOX,EAAWxiC,MAAM,KAAM/I,SAAS,GAAK,IAC9C,CACA,IAAIs0B,EAAS4X,EAAe5xC,UAC5Bg6B,OAAAA,EAAOoW,SAAW,SAAkBrvB,EAAO,CACzC,IAAI0d,EAAQ,KACZwS,EAAWjxC,UAAUowC,SAASlwC,KAAK,KAAM6gB,CAAK,EACzC,KAAK8wB,eACR,KAAKA,aAAe,UAAW,CAC7B,OAAOpT,EAAMD,aAAa,QAAQ,CACpC,GAEG,KAAKsT,gCACR,KAAKC,+BAAiC,UAAW,CAC/C,OAAOtT,EAAM5B,QAAQ,wBAAwB,CAC/C,GAEF9b,EAAMiY,iBAAiB,aAAc,KAAK6Y,YAAY,EACtD,IAAIG,EAA2B,CAAC,WAAY,UAAU,EAClDA,EAAyBr8B,QAAQoL,EAAMkxB,IAAI,IAAM,IACnDlxB,EAAMiY,iBAAiB,aAAc,KAAK+Y,8BAA8B,CAE5E,EACA/X,EAAOsW,YAAc,SAAqBC,EAAQ,CAChDU,EAAWjxC,UAAUswC,YAAYpwC,KAAK,KAAMqwC,CAAM,EAC9CA,EAAOxX,sBACL,KAAK8Y,cACPtB,EAAOxX,oBAAoB,aAAc,KAAK8Y,YAAY,EAExD,KAAKK,yBACP3B,EAAOxX,oBAAoB,aAAc,KAAKgZ,8BAA8B,EAGlF,EACOH,CACT,EAAE5B,EAAS,EACPmC,GAAuC,UAAW,CACpD,SAASC,EAAsBC,EAAe,CACxCA,IAAkB,SACpBA,EAAgB,CAAA,GAElB,KAAKC,eAAiB,CAAA,EACtB12C,OAAOC,eAAe,KAAM,SAAU,CACpCoJ,IAAK,UAAgB,CACnB,OAAO,KAAKqtC,eAAexzC,MAC7B,CACF,CAAC,EACD,QAAS4hB,EAAK,EAAG5hB,EAASuzC,EAAcvzC,OAAQ4hB,EAAK5hB,EAAQ4hB,IAC3D,KAAK6xB,iBAAiBF,EAAc3xB,CAAE,CAAC,CAE3C,CACA,IAAIsZ,EAASoY,EAAsBpyC,UACnCg6B,OAAAA,EAAOuY,iBAAmB,SAA0BC,EAAc,CAChE,IAAI98B,EAAQ,KAAK48B,eAAexzC,OAC1B,GAAK4W,KAAS,MAClB9Z,OAAOC,eAAe,KAAM6Z,EAAO,CACjCzQ,IAAK,UAAgB,CACnB,OAAO,KAAKqtC,eAAe58B,CAAK,CAClC,CACF,CAAC,EAEC,KAAK48B,eAAe38B,QAAQ68B,CAAY,IAAM,IAChD,KAAKF,eAAe/pC,KAAKiqC,CAAY,CAEzC,EACAxY,EAAOyY,wBAA0B,SAAiC1xB,EAAO,CAEvE,QADI2xB,EACKhyB,EAAK,EAAG5hB,EAAS,KAAKwzC,eAAexzC,OAAQ4hB,EAAK5hB,EAAQ4hB,IACjE,GAAIK,IAAU,KAAKuxB,eAAe5xB,CAAE,EAAEK,MAAO,CAC3C2xB,EAAgB,KAAKJ,eAAe5xB,CAAE,EACtC,KACF,CAEF,OAAOgyB,CACT,EACA1Y,EAAO2Y,oBAAsB,SAA6BH,EAAc,CACtE,QAAS9xB,EAAK,EAAG5hB,EAAS,KAAKwzC,eAAexzC,OAAQ4hB,EAAK5hB,EAAQ4hB,IACjE,GAAI8xB,IAAiB,KAAKF,eAAe5xB,CAAE,EAAG,CACxC,KAAK4xB,eAAe5xB,CAAE,EAAEK,OAAS,OAAO,KAAKuxB,eAAe5xB,CAAE,EAAEK,MAAM4O,KAAQ,YAChF,KAAK2iB,eAAe5xB,CAAE,EAAEK,MAAM4O,IAAI,EAEhC,OAAO,KAAK2iB,eAAe5xB,CAAE,EAAEiP,KAAQ,YACzC,KAAK2iB,eAAe5xB,CAAE,EAAEiP,IAAI,EAE9B,KAAK2iB,eAAepkB,OAAOxN,EAAI,CAAC,EAChC,KACF,CAEJ,EACO0xB,CACT,EAAE,EACEQ,GAAmC,UAAW,CAChD,SAASC,EAAkB7sB,EAAM,CAC/B6sB,EAAkB7yC,UAAU8yC,SAAS5yC,KAAK,KAAM8lB,CAAI,EACpDpqB,OAAOC,eAAe,KAAM,SAAU,CACpCoJ,IAAK,UAAgB,CACnB,OAAO,KAAK8tC,OACd,CACF,CAAC,CACH,CACA,IAAI/Y,EAAS6Y,EAAkB7yC,UAC/Bg6B,OAAAA,EAAO8Y,SAAW,SAAkB9sB,EAAM,CACxC,IAAIgtB,EAAY,KAAKl0C,QAAU,EAC3B4hB,EAAK,EACL/c,EAAIqiB,EAAKlnB,OACb,KAAKm0C,MAAQjtB,EACb,KAAK+sB,QAAU/sB,EAAKlnB,OACpB,IAAIo0C,EAAa,SAAqBx9B,EAAO,CACrC,GAAKA,KAAS,MAClB9Z,OAAOC,eAAe,KAAM,GAAK6Z,EAAO,CACtCzQ,IAAK,UAAgB,CACnB,OAAO,KAAKguC,MAAMv9B,CAAK,CACzB,CACF,CAAC,CAEL,EACA,GAAIs9B,EAAYrvC,EAEd,IADA+c,EAAKsyB,EACEtyB,EAAK/c,EAAG+c,IACbwyB,EAAWhzC,KAAK,KAAMwgB,CAAE,CAG9B,EACAsZ,EAAOmZ,WAAa,SAAoBn3B,EAAI,CAE1C,QADIpd,EAAS,KACJ8hB,EAAK,EAAG/c,EAAI,KAAK7E,OAAQ4hB,EAAK/c,EAAG+c,IAAM,CAC9C,IAAInF,EAAM,KAAKmF,CAAE,EACjB,GAAInF,EAAIS,KAAOA,EAAI,CACjBpd,EAAS2c,EACT,KACF,CACF,CACA,OAAO3c,CACT,EACOi0C,CACT,EAAE,EACEO,GAAiB,CACnBC,YAAa,cACbC,SAAU,WACVC,KAAM,OACNC,KAAM,OACNC,UAAW,YACXC,WAAY,YACd,EACIC,GAAiB,CACnB,YAAe,cACf,aAAgB,eAChB,KAAQ,OACR,YAAa,YACb,YAAe,cACf,WAAc,YAChB,EACIC,GAAgB,CAClBH,UAAW,YACXH,SAAU,WACVO,aAAc,eACdC,SAAU,WACVC,SAAU,UACZ,EACIC,GAAgB,CAClBxZ,SAAU,WACVyZ,OAAQ,SACRC,QAAS,SACX,EACIC,GAAwB,SAASlE,EAAc,CACjDxiB,EAAwB,QAAW2mB,EAAQnE,CAAY,EACvD,SAASmE,EAAOl1C,EAAS,CACvB,IAAIu/B,EACAv/B,IAAY,SACdA,EAAU,CAAC,GAEbu/B,EAAQwR,EAAa/vC,KAAK,IAAI,GAAK,KACnC,IAAIm0C,EAAa,CACfr4B,GAAI9c,EAAQ8c,IAAM,aAAewd,GAAQ,EACzCyY,KAAM/yC,EAAQ+yC,MAAQ,GACtBhO,SAAU/kC,EAAQ+kC,UAAY,EAChC,EACImJ,EAAQluC,EAAQkuC,OAAS,GACzBkH,EAAQ,SAAgBC,EAAM,CAChC34C,OAAOC,eAAe2xB,EAAgC,QAAWiR,CAAK,EAAG8V,EAAM,CAC7EtvC,IAAK,UAAgB,CACnB,OAAOovC,EAAWE,CAAI,CACxB,EACAtyC,IAAK,UAAgB,CACrB,CACF,CAAC,CACH,EACA,QAASjG,KAAOq4C,EACdC,EAAMt4C,CAAG,EAEXJ,cAAOC,eAAe2xB,EAAgC,QAAWiR,CAAK,EAAG,QAAS,CAChFx5B,IAAK,UAAgB,CACnB,OAAOmoC,CACT,EACAnrC,IAAK,SAAcuyC,EAAU,CACvBA,IAAapH,IACfA,EAAQoH,EACR,KAAK3X,QAAQ,aAAa,EAE9B,CACF,CAAC,EACM4B,CACT,CACA,OAAO2V,CACT,EAAEjW,CAAY,EACVsW,GAAY,SAAmBh0C,EAAK,CACtC,IAAIi0C,EAAQ,CAAC,WAAY,WAAY,OAAQ,WAAY,SAAU,OAAQ,MAAM,EAC7ErmC,EAAIgf,EAAkB,QAAW7hB,cAAc,GAAG,EACtD6C,EAAE5E,KAAOhJ,EAET,QADIk0C,EAAU,CAAC,EACNj0B,EAAK,EAAGA,EAAKg0B,EAAM51C,OAAQ4hB,IAClCi0B,EAAQD,EAAMh0B,CAAE,CAAC,EAAIrS,EAAEqmC,EAAMh0B,CAAE,CAAC,EAElC,OAAIi0B,EAAQC,WAAa,UACvBD,EAAQE,KAAOF,EAAQE,KAAKr6B,QAAQ,OAAQ,EAAE,GAE5Cm6B,EAAQC,WAAa,WACvBD,EAAQE,KAAOF,EAAQE,KAAKr6B,QAAQ,QAAS,EAAE,GAE5Cm6B,EAAQC,WACXD,EAAQC,SAAWxnB,EAAgB,QAAWzrB,SAASizC,UAEpDD,EAAQE,OACXF,EAAQE,KAAOznB,EAAgB,QAAWzrB,SAASkzC,MAE9CF,CACT,EACIG,GAAiB,SAAyBr0C,EAAK,CACjD,GAAI,CAACA,EAAIvC,MAAM,cAAc,EAAG,CAC9B,IAAImQ,EAAIgf,EAAkB,QAAW7hB,cAAc,GAAG,EACtD6C,EAAE5E,KAAOhJ,EACTA,EAAM4N,EAAE5E,IACV,CACA,OAAOhJ,CACT,EACIs0C,GAAmB,SAA2B1qC,EAAM,CACtD,GAAI,OAAOA,GAAS,SAAU,CAC5B,IAAI2qC,EAAc,yEACdC,EAAYD,EAAYzjB,KAAKlnB,CAAI,EACrC,GAAI4qC,EACF,OAAOA,EAAU71B,IAAI,EAAEjO,YAAY,CAEvC,CACA,MAAO,EACT,EACI+jC,GAAgB,SAAwBz0C,EAAK00C,EAAQ,CACnDA,IAAW,SACbA,EAAS/nB,EAAgB,QAAWzrB,UAEtC,IAAIyzC,EAAUX,GAAUh0C,CAAG,EACvB40C,EAAcD,EAAQR,WAAa,IAAMO,EAAOP,SAAWQ,EAAQR,SACnEU,EAAcD,EAAcD,EAAQP,OAASM,EAAOP,SAAWO,EAAON,KAC1E,OAAOS,CACT,EACIC,GAAsB35C,OAAOsT,OAAO,CACtCC,UAAW,KACXqmC,SAAUf,GACVK,eAAAA,GACAC,iBAAAA,GACAG,cAAAA,EACF,CAAC,EACGO,GAAY,SAAoBC,EAAY30B,EAAO,CACrD,IAAI40B,EAAS,IAAIvoB,EAAgB,QAAW5C,OAAO9D,OAAO0G,EAAgB,QAAYA,EAAgB,QAAWzG,MAAOyG,EAAgB,QAAW5C,OAAOjF,cAAc,CAAC,EACrKqwB,EAAS,CAAA,EACbD,EAAOltB,MAAQ,SAASlN,EAAK,CAC3BwF,EAAMmrB,OAAO3wB,CAAG,CAClB,EACAo6B,EAAO1uB,eAAiB,SAAShf,EAAO,CACtC2tC,EAAOrtC,KAAKN,CAAK,CACnB,EACA0tC,EAAOhtB,QAAU,UAAW,CAC1B5H,EAAM8b,QAAQ,CACZ1nB,KAAM,aACNjQ,OAAQ6b,CACV,CAAC,CACH,EACA40B,EAAOviC,MAAMsiC,CAAU,EACnBE,EAAO92C,OAAS,IACdsuB,EAAgB,QAAWvlB,SAAWulB,EAAgB,QAAWvlB,QAAQguC,gBAC3EzoB,EAAgB,QAAWvlB,QAAQguC,eAAe,iCAAmC90B,EAAMrU,GAAG,EAEhGkpC,EAAO30C,QAAQ,SAASgH,EAAO,CAC7B,OAAOH,EAAIG,MAAMA,CAAK,CACxB,CAAC,EACGmlB,EAAgB,QAAWvlB,SAAWulB,EAAgB,QAAWvlB,QAAQiuC,UAC3E1oB,EAAgB,QAAWvlB,QAAQiuC,SAAS,GAGhDH,EAAOjtB,MAAM,CACf,EACIqtB,GAAY,SAAoBrpC,EAAKqU,EAAO,CAC9C,IAAIsb,EAAO,CACTnmB,IAAKxJ,CACP,EACI4oC,EAAcJ,GAAcxoC,CAAG,EAC/B4oC,IACFjZ,EAAKvkB,KAAOw9B,GAEd,IAAI58B,EAAkBqI,EAAMi1B,MAAMV,YAAY,IAAM,kBAChD58B,IACF2jB,EAAK3jB,gBAAkBA,GAEzBiV,EAAa,QAAW0O,EAAMlsB,GAAK,KAAM,SAASpH,EAAKuL,EAAUC,EAAc,CAC7E,GAAIxL,EACF,OAAOjB,EAAIG,MAAMc,EAAKuL,CAAQ,EAEhCyM,EAAMk1B,QAAU,GACZ,OAAO7oB,EAAgB,QAAW5C,QAAW,WAC3CzJ,EAAMi1B,OACRj1B,EAAMi1B,MAAM3Y,IAAI,CAAC,cAAe,YAAY,EAAG,SAAS7G,EAAQ,CAC9D,GAAIA,EAAOrhB,OAAS,aAAc,CAChCrN,EAAIG,MAAM,oDAAsD8Y,EAAMrU,GAAG,EACzE,MACF,CACA,OAAO+oC,GAAUlhC,EAAcwM,CAAK,CACtC,CAAC,EAGH00B,GAAUlhC,EAAcwM,CAAK,CAEjC,CAAC,CAAC,CACJ,EACIm1B,GAA4B,SAASC,EAAQ,CAC/C1oB,EAAwB,QAAW2oB,EAAYD,CAAM,EACrD,SAASC,EAAWl3C,EAAS,CAC3B,IAAIu/B,EAIJ,GAHIv/B,IAAY,SACdA,EAAU,CAAC,GAET,CAACA,EAAQusC,KACX,MAAM,IAAI5hC,MAAM,0BAA0B,EAE5C,IAAIkS,EAAW2lB,GAAaxiC,EAAS,CACnC+yC,KAAM2B,GAAc10C,EAAQ+yC,IAAI,GAAK,YACrChO,SAAU/kC,EAAQ+kC,UAAY/kC,EAAQm3C,SAAW,EACnD,CAAC,EACGj1B,EAAO4yB,GAAcj4B,EAASqF,IAAI,GAAK,WACvCk1B,EAAWv6B,EAAS,SACpBA,EAASk2B,OAAS,YAAcl2B,EAASk2B,OAAS,cACpD7wB,EAAO,UAETqd,EAAQ0X,EAAOj2C,KAAK,KAAM6b,CAAQ,GAAK,KACvC0iB,EAAMuX,MAAQj6B,EAAS0vB,KACvBhN,EAAMwU,MAAQ,CAAA,EACdxU,EAAM8X,YAAc,CAAA,EACpB9X,EAAM+X,SAAW/X,EAAMuX,MAAMS,oBAAsB,GACnD,IAAIzwB,EAAO,IAAI4sB,GAAiBnU,EAAMwU,KAAK,EACvCyD,EAAa,IAAI9D,GAAiBnU,EAAM8X,WAAW,EACnDI,EAAU,GACdlY,EAAMmY,kBAAoBzmC,GAAKqd,EAAgC,QAAWiR,CAAK,EAAG,SAASjI,EAAQ,CAIjG,GAHIA,IAAW,SACbA,EAAS,CAAC,GAER,MAAKwf,MAAMnS,WAAW,EAG1B,IAAI,CAAC,KAAKmS,MAAM9P,SAAU,CACpB1P,EAAOrhB,OAAS,eAClB,KAAK0hC,KAAO,KAAKb,MAAMc,0BAA0B,KAAKF,iBAAiB,GAEzE,MACF,CACA,KAAKF,WAAa,KAAKA,WACnBC,IACF,KAAK9Z,QAAQ,WAAW,EACxB8Z,EAAU,IAERngB,EAAOrhB,OAAS,eAClB,KAAK0hC,KAAO,KAAKb,MAAMc,0BAA0B,KAAKF,iBAAiB,GAE3E,CAAC,EACD,IAAIG,EAAiB,UAA2B,CAC9CtY,EAAMuY,aAAa,CACrB,EACAvY,OAAAA,EAAMuX,MAAM9Y,IAAI,UAAW6Z,CAAc,EACrC31B,IAAS,YACXqd,EAAMwY,cAAc,EAEtBr7C,OAAOwuB,iBAAiBoD,EAAgC,QAAWiR,CAAK,EAAG,CAUzE,QAAW,CACTx5B,IAAK,UAAgB,CACnB,OAAOqxC,CACT,EACAr0C,IAAK,UAAgB,CACrB,CACF,EAUAmf,KAAM,CACJnc,IAAK,UAAgB,CACnB,OAAOmc,CACT,EACAnf,IAAK,SAAci1C,GAAS,CACrBlD,GAAckD,EAAO,GAGtB91B,IAAS81B,KAGb91B,EAAO81B,GACH,CAAC,KAAKV,UAAYp1B,IAAS,YAAc,KAAK4E,KAAKlnB,SAAW,GAChEi3C,GAAU,KAAKrpC,IAAK,IAAI,EAE1B,KAAKsqC,aAAa,EACd51B,IAAS,YACX,KAAK61B,cAAc,EAErB,KAAKpa,QAAQ,YAAY,EAC3B,CACF,EAOA7W,KAAM,CACJ/gB,IAAK,UAAgB,CACnB,OAAK,KAAKgxC,QAGHjwB,EAFE,IAGX,EACA/jB,IAAK,UAAgB,CACrB,CACF,EAOAy0C,WAAY,CACVzxC,IAAK,UAAgB,CACnB,GAAI,CAAC,KAAKgxC,QACR,OAAO,KAET,GAAI,KAAKjwB,KAAKlnB,SAAW,EACvB,OAAO43C,EAIT,QAFIS,GAAK,KAAKnB,MAAMoB,YAAY,EAC5BC,GAAS,CAAA,EACJ32B,GAAK,EAAG/c,GAAI,KAAKqiB,KAAKlnB,OAAQ4hB,GAAK/c,GAAG+c,KAAM,CACnD,IAAInF,GAAM,KAAKyK,KAAKtF,EAAE,GAClBnF,GAAIxZ,WAAao1C,IAAM57B,GAAI0B,SAAWk6B,IAE/B57B,GAAIxZ,YAAcwZ,GAAI0B,SAAW1B,GAAIxZ,WAAao1C,IAAM57B,GAAIxZ,UAAY,IAAOo1C,KACxFE,GAAO9uC,KAAKgT,EAAG,CAEnB,CAEA,GADAo7B,EAAU,GACNU,GAAOv4C,SAAW,KAAKy3C,YAAYz3C,OACrC63C,EAAU,OAEV,SAASlF,GAAM,EAAGA,GAAM4F,GAAOv4C,OAAQ2yC,KACjC,KAAK8E,YAAY5gC,QAAQ0hC,GAAO5F,EAAG,CAAC,IAAM,KAC5CkF,EAAU,IAIhB,YAAKJ,YAAcc,GACnBX,EAAW5D,SAAS,KAAKyD,WAAW,EAC7BG,CACT,EAEAz0C,IAAK,UAAgB,CACrB,CACF,CACF,CAAC,EACG8Z,EAASrP,KACX+xB,EAAM/xB,IAAMqP,EAASrP,IAChB+xB,EAAM+X,WACT/X,EAAMwX,QAAU,KAEdxX,EAAM+X,UAAYz6B,EAASk2B,OAAS,aAAel2B,EAASk2B,OAAS,aACvE8D,GAAUtX,EAAM/xB,IAAK8gB,EAAgC,QAAWiR,CAAK,CAAC,GAGxEA,EAAMwX,QAAU,GAEXxX,CACT,CACA,IAAIzE,EAASoc,EAAWp2C,UACxBg6B,OAAAA,EAAOid,cAAgB,UAAyB,CAC9C,KAAKJ,KAAO,KAAKb,MAAMc,0BAA0B,KAAKF,iBAAiB,EACvE,KAAKZ,MAAMzZ,GAAG,aAAc,KAAKqa,iBAAiB,CACpD,EACA5c,EAAOgd,aAAe,UAAwB,CACxC,KAAKH,OACP,KAAKb,MAAMsB,yBAAyB,KAAKT,IAAI,EAC7C,KAAKA,KAAO,QAEd,KAAKb,MAAMrmB,IAAI,aAAc,KAAKinB,iBAAiB,CACrD,EACA5c,EAAOkS,OAAS,SAAgBqL,EAAa,CAC3C,IAAIh8B,EAAMg8B,EACV,GAAI,EAAE,iBAAkBh8B,GAAM,CAC5BA,EAAM,IAAI6R,EAAgB,QAAWzG,MAAM4B,OAAOgvB,EAAYx1C,UAAWw1C,EAAYt6B,QAASs6B,EAAYnsC,IAAI,EAC9G,QAAStG,KAAQyyC,EACTzyC,KAAQyW,IACZA,EAAIzW,CAAI,EAAIyyC,EAAYzyC,CAAI,GAGhCyW,EAAIS,GAAKu7B,EAAYv7B,GACrBT,EAAIi8B,aAAeD,CACrB,CAEA,QADI3L,EAAS,KAAKoK,MAAMlK,WAAW,EAC1BprB,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IAC/BkrB,EAAOlrB,CAAE,IAAM,MACjBkrB,EAAOlrB,CAAE,EAAE+2B,UAAUl8B,CAAG,EAG5B,KAAK03B,MAAM1qC,KAAKgT,CAAG,EACnB,KAAKyK,KAAK8sB,SAAS,KAAKG,KAAK,CAC/B,EACAjZ,EAAOyd,UAAY,SAAmBC,EAAY,CAEhD,QADIh3B,EAAK,KAAKuyB,MAAMn0C,OACb4hB,KAAM,CACX,IAAInF,EAAM,KAAK03B,MAAMvyB,CAAE,EACvB,GAAInF,IAAQm8B,GAAcn8B,EAAIi8B,cAAgBj8B,EAAIi8B,eAAiBE,EAAY,CAC7E,KAAKzE,MAAM/kB,OAAOxN,EAAI,CAAC,EACvB,KAAKsF,KAAK8sB,SAAS,KAAKG,KAAK,EAC7B,KACF,CACF,CACF,EACOmD,CACT,EAAEjC,EAAK,EACP+B,GAAUl2C,UAAUo+B,eAAiB,CACnCuZ,UAAW,WACb,EACA,IAAIC,GAA6B,SAASzB,EAAQ,CAChD1oB,EAAwB,QAAWoqB,EAAa1B,CAAM,EACtD,SAAS0B,EAAY34C,EAAS,CAC5B,IAAIu/B,EACAv/B,IAAY,SACdA,EAAU,CAAC,GAEb,IAAI6c,EAAW2lB,GAAaxiC,EAAS,CACnC+yC,KAAM0B,GAAez0C,EAAQ+yC,IAAI,GAAK,EACxC,CAAC,EACDxT,EAAQ0X,EAAOj2C,KAAK,KAAM6b,CAAQ,GAAK,KACvC,IAAIg1B,EAAU,GACdn1C,cAAOC,eAAe2xB,EAAgC,QAAWiR,CAAK,EAAG,UAAW,CAClFx5B,IAAK,UAAgB,CACnB,OAAO8rC,CACT,EACA9uC,IAAK,SAAc61C,EAAY,CACzB,OAAOA,GAAe,WAAaA,IAAe/G,IAGtDA,EAAU+G,EACV,KAAKjb,QAAQ,eAAe,EAC9B,CACF,CAAC,EACG9gB,EAASg1B,UACXtS,EAAMsS,QAAUh1B,EAASg1B,SAE3BtS,EAAMwX,QAAU,GACTxX,CACT,CACA,OAAOoZ,CACT,EAAE1D,EAAK,EACH4D,GAA6B,SAAS5B,EAAQ,CAChD1oB,EAAwB,QAAWuqB,EAAa7B,CAAM,EACtD,SAAS6B,EAAY94C,EAAS,CAC5B,IAAIu/B,EACAv/B,IAAY,SACdA,EAAU,CAAC,GAEb,IAAI6c,EAAW2lB,GAAaxiC,EAAS,CACnC+yC,KAAMmB,GAAel0C,EAAQ+yC,IAAI,GAAK,EACxC,CAAC,EACDxT,EAAQ0X,EAAOj2C,KAAK,KAAM6b,CAAQ,GAAK,KACvC,IAAIu1B,EAAW,GACf11C,cAAOC,eAAe2xB,EAAgC,QAAWiR,CAAK,EAAG,WAAY,CACnFx5B,IAAK,UAAgB,CACnB,OAAOqsC,CACT,EACArvC,IAAK,SAAcg2C,EAAa,CAC1B,OAAOA,GAAgB,WAAaA,IAAgB3G,IAGxDA,EAAW2G,EACX,KAAKpb,QAAQ,gBAAgB,EAC/B,CACF,CAAC,EACG9gB,EAASu1B,WACX7S,EAAM6S,SAAWv1B,EAASu1B,UAErB7S,CACT,CACA,OAAOuZ,CACT,EAAE7D,EAAK,EACH+D,GAAO,EACPC,GAAU,EACVC,GAAS,EACTC,GAAQ,EACRC,GAAmC,SAASrI,EAAc,CAC5DxiB,EAAwB,QAAW8qB,EAAmBtI,CAAY,EAClE,SAASsI,EAAkBr5C,EAAS,CAClC,IAAIu/B,EACAv/B,IAAY,SACdA,EAAU,CAAC,GAEbu/B,EAAQwR,EAAa/vC,KAAK,IAAI,GAAK,KACnC,IAAI2W,EACAkK,EAAQ,IAAIm1B,GAAUh3C,CAAO,EACjCu/B,OAAAA,EAAMwT,KAAOlxB,EAAMkxB,KACnBxT,EAAM/xB,IAAMqU,EAAMrU,IAClB+xB,EAAM4X,QAAUt1B,EAAMkjB,SACtBxF,EAAM2O,MAAQrsB,EAAMqsB,MACpB3O,EAAM,QAAa1d,EAAM,QACzBnlB,OAAOwuB,iBAAiBoD,EAAgC,QAAWiR,CAAK,EAAG,CAOzE5nB,WAAY,CACV5R,IAAK,UAAgB,CACnB,OAAO4R,CACT,CACF,EAQAkK,MAAO,CACL9b,IAAK,UAAgB,CACnB,OAAO8b,CACT,CACF,CACF,CAAC,EACDlK,EAAaqhC,GACbn3B,EAAMiY,iBAAiB,aAAc,UAAW,CAC9CniB,EAAauhC,GACb3Z,EAAM5B,QAAQ,CACZ1nB,KAAM,OACNjQ,OAAQsoB,EAAgC,QAAWiR,CAAK,CAC1D,CAAC,CACH,CAAC,EACMA,CACT,CACA,OAAO8Z,CACT,EAAEpa,CAAY,EACdma,GAAiBt4C,UAAUo+B,eAAiB,CAC1Coa,KAAM,MACR,EACAF,GAAiBJ,KAAOA,GACxBI,GAAiBH,QAAUA,GAC3BG,GAAiBF,OAASA,GAC1BE,GAAiBD,MAAQA,GACzB,IAAII,GAAS,CACXC,MAAO,CACLC,UAAW3H,GACX4H,WAAYhB,GACZiB,YAAa,OACf,EACAv3C,MAAO,CACLq3C,UAAWpH,GACXqH,WAAYb,GACZc,YAAa,OACf,EACAztC,KAAM,CACJutC,UAAWhH,GACXiH,WAAY1C,GACZ2C,YAAa,MACf,CACF,EACAj9C,OAAOmE,KAAK04C,EAAM,EAAEx3C,QAAQ,SAASkU,EAAM,CACzCsjC,GAAOtjC,CAAI,EAAE2jC,WAAa3jC,EAAO,SACjCsjC,GAAOtjC,CAAI,EAAE4jC,YAAc5jC,EAAO,SACpC,CAAC,EACD,IAAI6jC,GAAS,CACXC,WAAY,CACVN,UAAWhH,GACXiH,WAAY1C,GACZ2C,YAAa,aACbC,WAAY,mBACZC,YAAa,mBACf,EACAG,aAAc,CACZP,UAAWxG,GACXyG,WAAYN,GACZO,YAAa,qBACbC,WAAY,qBACZC,YAAa,qBACf,CACF,EACII,GAAM7rB,EAAkB,QAAW,CAAC,EAAGmrB,GAAQO,EAAM,EACzDA,GAAOjoC,MAAQnV,OAAOmE,KAAKi5C,EAAM,EACjCP,GAAO1nC,MAAQnV,OAAOmE,KAAK04C,EAAM,EACjCU,GAAIpoC,MAAQ,CAAA,EAAG1N,OAAO21C,GAAOjoC,KAAK,EAAE1N,OAAOo1C,GAAO1nC,KAAK,EACvD,SAASqoC,GAAkBlyB,EAAO+qB,EAAM7E,EAAOnJ,EAAU/kC,EAAS,CAC5DA,IAAY,SACdA,EAAU,CAAC,GAEb,IAAI0sC,EAAS1kB,EAAM4kB,WAAW,EAC9B5sC,EAAQ+yC,KAAOA,EACX7E,IACFluC,EAAQkuC,MAAQA,GAEdnJ,IACF/kC,EAAQ+kC,SAAWA,GAErB/kC,EAAQusC,KAAOvkB,EACf,IAAInG,EAAQ,IAAIo4B,GAAI/tC,KAAKwtC,WAAW15C,CAAO,EAC3C0sC,OAAAA,EAAOwE,SAASrvB,CAAK,EACdA,CACT,CACA,IAAIs4B,GAAuB,SAAS/M,EAAY,CAC9C7e,EAAwB,QAAWoY,EAAOyG,CAAU,EACpD,SAASzG,EAAM3mC,EAASojC,EAAO,CAC7B,IAAI7D,EACJ,OAAIv/B,IAAY,SACdA,EAAU,CAAC,GAETojC,IAAU,SACZA,EAAQ,UAAkB,CAC1B,GAEFpjC,EAAQqkC,oBAAsB,GAC9B9E,EAAQ6N,EAAWpsC,KAAK,KAAM,KAAMhB,EAASojC,CAAK,GAAK,KACvD7D,EAAM6a,kBAAoB,SAASlpC,EAAG,CACpC,OAAOquB,EAAM8a,iBAAiBnpC,CAAC,CACjC,EACAquB,EAAM+a,eAAiB,SAASppC,EAAG,CACjC,OAAOquB,EAAMgb,cAAcrpC,CAAC,CAC9B,EACAquB,EAAMib,kBAAoB,SAAStpC,EAAG,CACpC,OAAOquB,EAAMkb,iBAAiBvpC,CAAC,CACjC,EACAquB,EAAMmb,yBAA2B,SAASxpC,EAAG,CAC3C,OAAOquB,EAAMob,wBAAwBzpC,CAAC,CACxC,EACAquB,EAAMqb,sBAAwB,SAAS1pC,EAAG,CACxC,OAAOquB,EAAMsb,qBAAqB3pC,CAAC,CACrC,EACAquB,EAAMub,eAAiC,IAAI35C,IAC3Co+B,EAAMwb,YAAc,GACpBxb,EAAMlC,GAAG,UAAW,UAAW,CAC7B,KAAK0d,YAAc,EACrB,CAAC,EACDxb,EAAMlC,GAAG,YAAa,UAAW,CAC/B,KAAK0d,YAAc,EACrB,CAAC,EACDd,GAAIpoC,MAAM9P,QAAQ,SAASkE,EAAM,CAC/B,IAAIuvC,EAAQyE,GAAIh0C,CAAI,EAChBjG,GAAWA,EAAQw1C,EAAMoE,UAAU,IACrCra,EAAMiW,EAAMqE,WAAW,EAAI75C,EAAQw1C,EAAMoE,UAAU,EAEvD,CAAC,EACIra,EAAMyb,wBACTzb,EAAM0b,iBAAiB,EAEpB1b,EAAM2b,0BACT3b,EAAM4b,oBAAoB,EAE5B,CAAC,OAAQ,QAAS,OAAO,EAAEp5C,QAAQ,SAAS8f,EAAO,CAC7C7hB,EAAQ,SAAW6hB,EAAQ,QAAQ,IAAM,KAC3C0d,EAAM,iBAAmB1d,EAAQ,QAAQ,EAAI,GAEjD,CAAC,EACG7hB,EAAQo7C,iBAAmB,IAASp7C,EAAQq7C,mBAAqB,GACnE9b,EAAM+b,yBAA2B,IACxBt7C,EAAQo7C,iBAAmB,IAAQp7C,EAAQq7C,mBAAqB,MACzE9b,EAAM+b,yBAA2B,IAE9B/b,EAAM+b,0BACT/b,EAAMgc,kBAAkB,EAE1Bhc,EAAMgY,kBAAoBv3C,EAAQu3C,oBAAsB,GACxDhY,EAAMic,sBAAwB,IAAIvB,GAAI/tC,KAAKutC,UAC3Cla,EAAMkc,mBAAmB,EACpBz7C,EAAQ07C,wBACXnc,EAAM+I,cAAc,EAElB/I,EAAM93B,cACR83B,EAAMG,MAAQH,EAAM93B,YAAYxB,MAAQ,gBAEnCs5B,CACT,CACA,IAAIzE,EAAS6L,EAAM7lC,UACnBg6B,OAAAA,EAAO6gB,iBAAmB,SAA0BnuC,EAAK,CACvD,IAAIszB,EAAS,KACR,KAAKkG,UACR,KAAKhJ,IAAI,QAAS,UAAW,CAC3B,OAAO8C,EAAO7zB,WAAW,UAAW,CAClC,OAAO6zB,EAAO6a,iBAAiBnuC,CAAG,CACpC,EAAG,CAAC,CACN,CAAC,EAEH,KAAKmwB,QAAQ,CACXnwB,IAAAA,EACAyI,KAAM,WACR,CAAC,CACH,EACA6kB,EAAOmgB,iBAAmB,UAA4B,CACpD,KAAK5d,GAAG,iBAAkB,KAAK+c,iBAAiB,EAChD,KAAKwB,eAAiB,GACtB,KAAK5d,IAAI,QAAS,KAAKsc,cAAc,CACvC,EACAxf,EAAO+gB,kBAAoB,UAA6B,CACtD,KAAKD,eAAiB,GACtB,KAAKE,qBAAqB,EAC1B,KAAKrrB,IAAI,iBAAkB,KAAK2pB,iBAAiB,CACnD,EACAtf,EAAOyf,cAAgB,SAAuBjjB,EAAQ,CACpD,KAAKwkB,qBAAqB,EAC1B,KAAKC,iBAAmB,KAAKxS,YAAYt4B,GAAK,KAAM,UAAW,CAC7D,IAAI+qC,EAAqB,KAAKrQ,gBAAgB,EAC1C,KAAKsQ,mBAAqBD,GAC5B,KAAKre,QAAQ,UAAU,EAEzB,KAAKse,iBAAmBD,EACpBA,IAAuB,GACzB,KAAKF,qBAAqB,CAE9B,CAAC,EAAG,GAAG,CACT,EACAhhB,EAAOuf,iBAAmB,SAA0B/iB,EAAQ,CAC1D,KAAK4kB,UAAY,KAAKrQ,SAAS,CACjC,EACA/Q,EAAO8Q,SAAW,UAAoB,CACpC,OAAOF,GAAiB,EAAG,CAAC,CAC9B,EACA5Q,EAAO6Q,gBAAkB,UAA6B,CACpD,OAAOA,GAAgB,KAAKC,SAAS,EAAG,KAAKsQ,SAAS,CACxD,EACAphB,EAAOghB,qBAAuB,UAAgC,CAC5D,KAAKxS,cAAc,KAAKyS,gBAAgB,CAC1C,EACAjhB,EAAOqgB,oBAAsB,UAA+B,CAC1D,KAAKgB,kBAAoB,GACzB,KAAK9e,GAAG,OAAQ,KAAKmd,iBAAiB,EACtC,KAAKnd,GAAG,QAAS,KAAKqd,wBAAwB,CAChD,EACA5f,EAAOshB,qBAAuB,UAAgC,CAC5D,KAAKD,kBAAoB,GACzB,KAAKxB,wBAAwB,EAC7B,KAAKlqB,IAAI,OAAQ,KAAK+pB,iBAAiB,EACvC,KAAK/pB,IAAI,QAAS,KAAKiqB,wBAAwB,CACjD,EACA5f,EAAO2f,iBAAmB,UAA4B,CAChD,KAAK4B,qBACP,KAAK1B,wBAAwB,EAE/B,KAAK0B,oBAAsB,KAAK9S,YAAY,UAAW,CACrD,KAAK5L,QAAQ,CACX1nB,KAAM,aACNjQ,OAAQ,KACRs2C,kBAAmB,EACrB,CAAC,CACH,EAAG,GAAG,CACR,EACAxhB,EAAO6f,wBAA0B,UAAmC,CAClE,KAAKrR,cAAc,KAAK+S,mBAAmB,EAC3C,KAAK1e,QAAQ,CACX1nB,KAAM,aACNjQ,OAAQ,KACRs2C,kBAAmB,EACrB,CAAC,CACH,EACAxhB,EAAOyJ,QAAU,UAAmB,CAClC,KAAKgY,YAAYhD,GAAO1nC,KAAK,EACzB,KAAK+pC,gBACP,KAAKC,kBAAkB,EAErB,KAAKM,mBACP,KAAKC,qBAAqB,EAE5BhP,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAOyhB,YAAc,SAAqB/gB,EAAO,CAC/C,IAAIyF,EAAS,KACbzF,EAAQ,CAAA,EAAGr3B,OAAOq3B,CAAK,EACvBA,EAAMz5B,QAAQ,SAASkU,EAAM,CAG3B,QAFI27B,EAAO3Q,EAAOhrB,EAAO,QAAQ,EAAE,GAAK,CAAA,EACpCuL,EAAKowB,EAAKhyC,OACP4hB,KAAM,CACX,IAAIK,EAAQ+vB,EAAKpwB,CAAE,EACfvL,IAAS,QACXgrB,EAAOub,sBAAsB36B,CAAK,EAEpC+vB,EAAKR,YAAYvvB,CAAK,CACxB,CACF,CAAC,CACH,EACAiZ,EAAO2hB,sBAAwB,UAAiC,CAG9D,QAFI7K,EAAO,KAAK4J,uBAAyB,CAAA,EACrCh6B,EAAKowB,EAAKhyC,OACP4hB,KAAM,CACX,IAAIK,EAAQ+vB,EAAKpwB,CAAE,EACnB,KAAKg7B,sBAAsB36B,CAAK,CAClC,CACF,EACAiZ,EAAO4hB,MAAQ,UAAiB,CAChC,EACA5hB,EAAOsb,YAAc,UAAuB,CAC5C,EACAtb,EAAO6hB,eAAiB,UAA0B,CAClD,EACA7hB,EAAO/xB,MAAQ,SAAec,EAAK,CACjC,OAAIA,IAAQ,SACV,KAAK+yC,OAAS,IAAI7Q,GAAYliC,CAAG,EACjC,KAAK8zB,QAAQ,OAAO,GAEf,KAAKif,MACd,EACA9hB,EAAO+hB,OAAS,UAAkB,CAChC,OAAI,KAAK9B,YACArP,GAAiB,EAAG,CAAC,EAEvBA,GAAiB,CAC1B,EACA5Q,EAAOuI,KAAO,UAAgB,CAC9B,EACAvI,EAAOgiB,aAAe,UAAwB,CAC9C,EACAhiB,EAAOiiB,UAAY,UAAqB,CACxC,EACAjiB,EAAOkiB,eAAiB,UAA0B,CAC5C,KAAKb,mBACP,KAAKxe,QAAQ,CACX1nB,KAAM,aACNjQ,OAAQ,KACRs2C,kBAAmB,EACrB,CAAC,CAEL,EACAxhB,EAAO2gB,mBAAqB,UAA8B,CACxD,IAAI3R,EAAS,KACbyP,GAAO1nC,MAAM9P,QAAQ,SAASkE,EAAM,CAClC,IAAIuvC,EAAQ+D,GAAOtzC,CAAI,EACnBg3C,EAAmB,UAA6B,CAClDnT,EAAOnM,QAAQ13B,EAAO,aAAa,CACrC,EACIymC,EAAS5C,EAAO0L,EAAMoE,UAAU,EAAE,EACtClN,EAAO5S,iBAAiB,cAAemjB,CAAgB,EACvDvQ,EAAO5S,iBAAiB,WAAYmjB,CAAgB,EACpDnT,EAAOzM,GAAG,UAAW,UAAW,CAC9BqP,EAAO7S,oBAAoB,cAAeojB,CAAgB,EAC1DvQ,EAAO7S,oBAAoB,WAAYojB,CAAgB,CACzD,CAAC,CACH,CAAC,CACH,EACAniB,EAAOoiB,iBAAmB,UAA4B,CACpD,IAAIjT,EAAS,KACb,GAAI/b,CAAAA,EAAgB,QAAW5C,OAG/B,GAAI6C,EAAkB,QAAWnkB,KAAKwrB,SAAS,KAAKnpB,GAAG,CAAC,EAAG,CACzD,GAAI,CAAC,KAAKo3B,SAAS,QAAQ,GAAK3R,GAAQpD,EAAa,OAAU,GAAKhyB,OAAOmE,KAAK6tB,EAAa,OAAU,EAAE9uB,OAAS,EAAG,CACnH,KAAK+9B,QAAQ,aAAa,EAC1B,MACF,CACA,IAAIwf,EAAShvB,EAAkB,QAAW7hB,cAAc,QAAQ,EAChE6wC,EAAO3vC,IAAM,KAAKi2B,SAAS,QAAQ,GAAK,iDACxC0Z,EAAOnkC,OAAS,UAAW,CACzBixB,EAAOtM,QAAQ,aAAa,CAC9B,EACAwf,EAAOlkC,QAAU,UAAW,CAC1BgxB,EAAOtM,QAAQ,YAAY,CAC7B,EACA,KAAKN,GAAG,UAAW,UAAW,CAC5B8f,EAAOnkC,OAAS,KAChBmkC,EAAOlkC,QAAU,IACnB,CAAC,EACDiV,EAAgB,QAAW5C,OAAS,GACpC,KAAKjf,GAAG,EAAE8T,WAAWxT,YAAYwwC,CAAM,CACzC,MACE,KAAK/Z,MAAM,KAAK8Z,gBAAgB,CAEpC,EACApiB,EAAOygB,kBAAoB,UAA6B,CACtD,IAAInR,EAAS,KACTsC,EAAS,KAAKE,WAAW,EACzBwQ,EAAe,KAAKC,iBAAiB,EACrCC,EAAiB,SAAyBpsC,EAAG,CAC/C,OAAOw7B,EAAOwE,SAAShgC,EAAE2Q,KAAK,CAChC,EACI07B,EAAoB,SAA4BrsC,EAAG,CACrD,OAAOw7B,EAAO0E,YAAYlgC,EAAE2Q,KAAK,CACnC,EACAu7B,EAAa/f,GAAG,WAAYigB,CAAc,EAC1CF,EAAa/f,GAAG,cAAekgB,CAAiB,EAChD,KAAKL,iBAAiB,EACtB,IAAIM,EAAgB,UAA0B,CAC5C,OAAOpT,EAAOzM,QAAQ,iBAAiB,CACzC,EACI8f,EAAoB,UAA8B,CACpDD,EAAc,EACd,QAASh8B,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IAAM,CACzC,IAAIK,GAAQ6qB,EAAOlrB,CAAE,EACrBK,GAAMgY,oBAAoB,YAAa2jB,CAAa,EAChD37B,GAAMK,OAAS,WACjBL,GAAMiY,iBAAiB,YAAa0jB,CAAa,CAErD,CACF,EACAC,EAAkB,EAClB/Q,EAAO5S,iBAAiB,SAAU2jB,CAAiB,EACnD/Q,EAAO5S,iBAAiB,WAAY2jB,CAAiB,EACrD/Q,EAAO5S,iBAAiB,cAAe2jB,CAAiB,EACxD,KAAKpgB,GAAG,UAAW,UAAW,CAC5B+f,EAAa3sB,IAAI,WAAY6sB,CAAc,EAC3CF,EAAa3sB,IAAI,cAAe8sB,CAAiB,EACjD7Q,EAAO7S,oBAAoB,SAAU4jB,CAAiB,EACtD/Q,EAAO7S,oBAAoB,WAAY4jB,CAAiB,EACxD/Q,EAAO7S,oBAAoB,cAAe4jB,CAAiB,EAC3D,QAASj8B,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IAAM,CACzC,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACrBK,EAAMgY,oBAAoB,YAAa2jB,CAAa,CACtD,CACF,CAAC,CACH,EACA1iB,EAAO4iB,aAAe,SAAsB3K,EAAM7E,EAAOnJ,EAAU,CACjE,GAAI,CAACgO,EACH,MAAM,IAAIpoC,MAAM,iDAAiD,EAEnE,OAAOuvC,GAAkB,KAAMnH,EAAM7E,EAAOnJ,CAAQ,CACtD,EACAjK,EAAO6iB,sBAAwB,SAA+B39C,EAAS,CACrE,IAAI6hB,EAAQ2gB,GAAaxiC,EAAS,CAChCusC,KAAM,IACR,CAAC,EACD,OAAO,IAAIuN,GAAOE,aAAaN,WAAW73B,CAAK,CACjD,EACAiZ,EAAOiS,mBAAqB,SAA4B/sC,EAAS49C,EAAe,CAC9E,IAAIC,EAAS,KACT79C,IAAY,SACdA,EAAU,CAAC,GAEb,IAAI89C,EAAmB,KAAKH,sBAAsB39C,CAAO,EACzD,OAAI49C,IAAkB,IAAQA,IAAkB,KAC9Ch1C,EAAIC,KAAK,kKAAkK,EAC3K+0C,EAAgB,IAElB,KAAKG,mBAAmB,EAAE1K,iBAAiByK,CAAgB,EAC3D,KAAKT,iBAAiB,EAAEnM,SAAS4M,EAAiBj8B,KAAK,EACnD+7B,IAAkB,IACpB,KAAKxa,MAAM,UAAW,CACpB,OAAOya,EAAOrC,sBAAsBtK,SAAS4M,EAAiBj8B,KAAK,CACrE,CAAC,EAEIi8B,CACT,EACAhjB,EAAO0hB,sBAAwB,SAA+B36B,EAAO,CACnE,IAAIyxB,EAAe,KAAKyK,mBAAmB,EAAExK,wBAAwB1xB,CAAK,EAC1E,KAAKk8B,mBAAmB,EAAEtK,oBAAoBH,CAAY,EAC1D,KAAK+J,iBAAiB,EAAEjM,YAAYvvB,CAAK,EACzC,KAAK25B,sBAAsBpK,YAAYvvB,CAAK,CAC9C,EACAiZ,EAAOkjB,wBAA0B,UAAmC,CAClE,MAAO,CAAC,CACV,EACAljB,EAAOmjB,wBAA0B,UAAmC,CAClE,IAAIC,EAAe,KAAKza,SAASj4B,SAAW0iB,EAAgB,QAAW1iB,QACvE,GAAI0yC,EACF,OAAOA,EAAaC,OAAO,CAE/B,EACArjB,EAAOsjB,wBAA0B,UAAmC,CAClE,MAAO,EACT,EACAtjB,EAAOujB,2BAA6B,UAAsC,CAC1E,EACAvjB,EAAO8c,0BAA4B,SAAmC0G,EAAI,CACxE,IAAIC,EAAS,KACTzhC,EAAKwd,GAAQ,EACjB,MAAI,CAAC,KAAK0M,UAAY,KAAKwH,OAAO,GAChC,KAAKsM,eAAeltC,IAAIkP,CAAE,EAC1B,KAAKkhB,IAAI,UAAW,UAAW,CACzBugB,EAAOzD,eAAez5C,IAAIyb,CAAE,IAC9ByhC,EAAOzD,eAAe,OAAUh+B,CAAE,EAClCwhC,EAAG,EAEP,CAAC,GAED,KAAKtU,2BAA2BltB,EAAIwhC,CAAE,EAEjCxhC,CACT,EACAge,EAAOsd,yBAA2B,SAAkCt7B,EAAI,CAClE,KAAKg+B,eAAez5C,IAAIyb,CAAE,EAC5B,KAAKg+B,eAAe,OAAUh+B,CAAE,EAEhC,KAAKotB,0BAA0BptB,CAAE,CAErC,EACAge,EAAO0jB,UAAY,UAAqB,CACxC,EACA1jB,EAAO2jB,YAAc,UAAuB,CAC5C,EACA3jB,EAAO4jB,eAAiB,UAA0B,CAClD,EACA5jB,EAAO6jB,0BAA4B,UAAqC,CACxE,EACA7jB,EAAO8jB,0BAA4B,UAAqC,CACxE,EACA9jB,EAAO+jB,YAAc,UAAwB,CAC3C,MAAO,EACT,EACAlY,EAAMkY,YAAc,UAAwB,CAC1C,MAAO,EACT,EACAlY,EAAMmY,cAAgB,SAAuBC,EAAQ/+C,EAAS,CAC5D,OAAO2mC,EAAMkY,YAAYE,EAAO9oC,IAAI,CACtC,EACA0wB,EAAMG,OAAS,SAAgBjB,EAAW,CACxC,OAAOA,EAAU/kC,qBAAqB6lC,GAASd,aAAqBc,GAASd,IAAcc,CAC7F,EACAA,EAAMqY,aAAe,SAAsB/4C,EAAMsmC,EAAM,CAIrD,GAHK5F,EAAMsY,SACTtY,EAAMsY,OAAS,CAAC,GAEd,CAACtY,EAAMG,OAAOyF,CAAI,EACpB,MAAM,IAAI5hC,MAAM,QAAU1E,EAAO,iBAAiB,EAEpD,GAAI,CAAC0gC,EAAMkY,YACT,MAAM,IAAIl0C,MAAM,qDAAqD,EAEvE,GAAI,CAACg8B,EAAMmY,cACT,MAAM,IAAIn0C,MAAM,uDAAuD,EAEzE1E,OAAAA,EAAOm8B,GAAan8B,CAAI,EACxB0gC,EAAMsY,OAAOh5C,CAAI,EAAIsmC,EACrB5F,EAAMsY,OAAOhtC,GAAYhM,CAAI,CAAC,EAAIsmC,EAC9BtmC,IAAS,QACX0gC,EAAMuY,kBAAkB71C,KAAKpD,CAAI,EAE5BsmC,CACT,EACA5F,EAAMwY,QAAU,SAAiBl5C,EAAM,CACrC,GAAKA,EAGL,IAAI0gC,EAAMsY,QAAUtY,EAAMsY,OAAOh5C,CAAI,EACnC,OAAO0gC,EAAMsY,OAAOh5C,CAAI,EAG1B,GADAA,EAAOm8B,GAAan8B,CAAI,EACpBioB,EAAgB,SAAcA,EAAgB,QAAWkxB,SAAWlxB,EAAgB,QAAWkxB,QAAQn5C,CAAI,EAC7G2C,OAAAA,EAAIC,KAAK,OAAS5C,EAAO,2GAA2G,EAC7HioB,EAAgB,QAAWkxB,QAAQn5C,CAAI,EAElD,EACO0gC,CACT,EAAEzD,EAAU,EACZ+W,GAAIpoC,MAAM9P,QAAQ,SAASkE,EAAM,CAC/B,IAAIuvC,EAAQyE,GAAIh0C,CAAI,EACpBk0C,GAAKr5C,UAAU00C,EAAMoE,UAAU,EAAI,UAAW,CAC5C,YAAKpE,EAAMqE,WAAW,EAAI,KAAKrE,EAAMqE,WAAW,GAAK,IAAIrE,EAAMiE,UACxD,KAAKjE,EAAMqE,WAAW,CAC/B,CACF,CAAC,EACDM,GAAKr5C,UAAUu+C,sBAAwB,GACvClF,GAAKr5C,UAAUw+C,oBAAsB,GACrCnF,GAAKr5C,UAAUy+C,yBAA2B,GAC1CpF,GAAKr5C,UAAU0+C,qBAAuB,GACtCrF,GAAKr5C,UAAUk6C,uBAAyB,GACxCb,GAAKr5C,UAAU2+C,kBAAoB,GACnCtF,GAAKr5C,UAAUo6C,yBAA2B,GAC1Cf,GAAKr5C,UAAUw6C,yBAA2B,GAC1CnB,GAAKr5C,UAAU4+C,2BAA6B,GAC5CvF,GAAKwF,mBAAqB,SAASC,EAAO,CACxCA,EAAMC,sBAAwB,SAASC,EAAStpC,EAAO,CACrD,IAAI2kB,EAAWykB,EAAMG,eAChB5kB,IACHA,EAAWykB,EAAMG,eAAiB,CAAA,GAEhCvpC,IAAU,SACZA,EAAQ2kB,EAASv7B,QAEnBu7B,EAASnM,OAAOxY,EAAO,EAAGspC,CAAO,CACnC,EACAF,EAAMf,YAAc,SAAS5oC,EAAM,CAGjC,QAFIklB,EAAWykB,EAAMG,gBAAkB,CAAA,EACnCC,EACKx+B,EAAK,EAAGA,EAAK2Z,EAASv7B,OAAQ4hB,IAErC,GADAw+B,EAAM7kB,EAAS3Z,CAAE,EAAEq9B,YAAY5oC,CAAI,EAC/B+pC,EACF,OAAOA,EAGX,MAAO,EACT,EACAJ,EAAMK,oBAAsB,SAASpuB,EAAQ7xB,EAAS,CAGpD,QAFIm7B,EAAWykB,EAAMG,gBAAkB,CAAA,EACnCC,EACKx+B,EAAK,EAAGA,EAAK2Z,EAASv7B,OAAQ4hB,IAErC,GADAw+B,EAAM7kB,EAAS3Z,CAAE,EAAE0+B,gBAAgBruB,EAAQ7xB,CAAO,EAC9CggD,EACF,OAAO7kB,EAAS3Z,CAAE,EAGtB,OAAO,IACT,EACAo+B,EAAMd,cAAgB,SAASC,EAAQ/+C,EAAS,CAC9C,IAAImgD,EAAKP,EAAMK,oBAAoBlB,EAAQ/+C,CAAO,EAClD,OAAImgD,EACKA,EAAGD,gBAAgBnB,EAAQ/+C,CAAO,EAEpC,EACT,EACA,IAAIogD,EAAa,CAAC,WAAY,UAAW,UAAU,EACnDA,EAAWr+C,QAAQ,SAASm+B,EAAQ,CAClC,IAAImgB,EAAa,KAAKngB,CAAM,EACxB,OAAOmgB,GAAe,aAG1B,KAAKngB,CAAM,EAAI,UAAW,CACxB,OAAI,KAAKogB,gBAAkB,KAAKA,eAAepgB,CAAM,EAC5C,KAAKogB,eAAepgB,CAAM,EAAE3wB,MAAM,KAAK+wC,eAAgB95C,SAAS,EAElE65C,EAAW9wC,MAAM,KAAM/I,SAAS,CACzC,EACF,EAAGo5C,EAAM9+C,SAAS,EAClB8+C,EAAM9+C,UAAUy/C,UAAY,SAAS1uB,EAAQ,CAC3C,IAAIsuB,EAAKP,EAAMK,oBAAoBpuB,EAAQ,KAAK4R,QAAQ,EACnD0c,IACCP,EAAMY,oBACRL,EAAKP,EAAMY,oBAEX53C,EAAIG,MAAM,iDAAiD,GAG/D,KAAK8xC,qBAAqB,EAC1B,KAAKpqB,IAAI,UAAW,KAAKmqB,qBAAqB,EAC1CuF,IAAOP,EAAMY,sBACf,KAAKC,eAAiB5uB,GAExB,KAAKyuB,eAAiBH,EAAGO,aAAa7uB,EAAQ,KAAM,KAAK4R,QAAQ,EACjE,KAAKzF,IAAI,UAAW,KAAK4c,qBAAqB,CAChD,EACAgF,EAAM9+C,UAAU+5C,qBAAuB,UAAW,CAC5C,KAAK4F,iBACP,KAAKlE,YAAY,CAAC,QAAS,OAAO,CAAC,EACnC,KAAKkE,eAAiB,MAExB,KAAKhE,sBAAsB,EACvB,KAAK6D,iBACH,KAAKA,eAAe/b,SACtB,KAAK+b,eAAe/b,QAAQ,EAE9B,KAAK+b,eAAiB,KAE1B,CACF,EACApd,GAAWsH,kBAAkB,OAAQ2P,EAAI,EACzCA,GAAK6E,aAAa,OAAQ7E,EAAI,EAC9BA,GAAK+E,kBAAoB,CAAA,EACzB,IAAIyB,GAAc,CAAC,EACfC,GAAsB,CAAC,EACvBC,GAAa,CAAC,EAClB,SAASC,GAAI7qC,EAAM8qC,EAAY,CAC7BJ,GAAY1qC,CAAI,EAAI0qC,GAAY1qC,CAAI,GAAK,CAAA,EACzC0qC,GAAY1qC,CAAI,EAAE5M,KAAK03C,CAAU,CACnC,CACA,SAASR,GAAU/mB,EAAQhsB,EAAKwzC,EAAM,CACpCxnB,EAAOvsB,WAAW,UAAW,CAC3B,OAAOg0C,GAAgBzzC,EAAKmzC,GAAYnzC,EAAIyI,IAAI,EAAG+qC,EAAMxnB,CAAM,CACjE,EAAG,CAAC,CACN,CACA,SAAS0nB,GAAQH,EAAYxU,EAAM,CACjCwU,EAAWh/C,QAAQ,SAASo/C,EAAI,CAC9B,OAAOA,EAAGD,SAAWC,EAAGD,QAAQ3U,CAAI,CACtC,CAAC,CACH,CACA,SAASxmC,GAAIg7C,EAAYxU,EAAMxiC,EAAQ,CACrC,OAAOg3C,EAAWK,YAAYC,GAAmBt3C,CAAM,EAAGwiC,EAAKxiC,CAAM,EAAE,CAAC,CAC1E,CACA,SAAShH,GAAIg+C,EAAYxU,EAAMxiC,EAAQu3C,EAAK,CAC1C,OAAO/U,EAAKxiC,CAAM,EAAEg3C,EAAWjrC,OAAOurC,GAAmBt3C,CAAM,EAAGu3C,CAAG,CAAC,CACxE,CACA,SAASC,GAAQR,EAAYxU,EAAMxiC,EAAQu3C,EAAK,CAC1CA,IAAQ,SACVA,EAAM,MAER,IAAIE,EAAa,OAASpf,GAAar4B,CAAM,EACzC03C,EAAkBV,EAAWjrC,OAAOurC,GAAmBG,CAAU,EAAGF,CAAG,EACvEI,EAAaD,IAAoBZ,GACjCxkB,EAAcqlB,EAAa,KAAOnV,EAAKxiC,CAAM,EAAE03C,CAAe,EAClEE,OAAAA,GAAaZ,EAAYh3C,EAAQsyB,EAAaqlB,CAAU,EACjDrlB,CACT,CACA,IAAIulB,GAAiB,CACnBhW,SAAU,EACVsM,YAAa,EACbrM,SAAU,EACVxoC,MAAO,EACPw5C,OAAQ,EACRrO,OAAQ,EACRqT,SAAU,EACVC,OAAQ,EACRC,MAAO,CACT,EACIC,GAAiB,CACnBhF,eAAgB,EAChBiF,SAAU,EACVC,UAAW,CACb,EACIC,GAAmB,CACrB9e,KAAM,EACNqL,MAAO,CACT,EACA,SAAS2S,GAAmBt3C,EAAQ,CAClC,OAAO,SAAShN,EAAOokD,EAAI,CACzB,OAAIpkD,IAAU8jD,GACLA,GAELM,EAAGp3C,CAAM,EACJo3C,EAAGp3C,CAAM,EAAEhN,CAAK,EAElBA,CACT,CACF,CACA,SAAS4kD,GAAaS,EAAKr4C,EAAQhN,EAAO2kD,EAAY,CACpD,QAASlgC,EAAK4gC,EAAIxiD,OAAS,EAAG4hB,GAAM,EAAGA,IAAM,CAC3C,IAAI2/B,EAAKiB,EAAI5gC,CAAE,EACX2/B,EAAGp3C,CAAM,GACXo3C,EAAGp3C,CAAM,EAAE23C,EAAY3kD,CAAK,CAEhC,CACF,CACA,SAASslD,GAAoB7oB,EAAQ,CACnConB,GAAoBpnB,EAAO1c,GAAG,CAAC,EAAI,IACrC,CACA,SAASwlC,GAAmB9oB,EAAQ+oB,EAAW,CAC7C,IAAIH,EAAMxB,GAAoBpnB,EAAO1c,GAAG,CAAC,EACrCqkC,EAAK,KACT,GAAsBiB,GAAQ,KAC5BjB,OAAAA,EAAKoB,EAAU/oB,CAAM,EACrBonB,GAAoBpnB,EAAO1c,GAAG,CAAC,EAAI,CAAC,CAACylC,EAAWpB,CAAE,CAAC,EAC5CA,EAET,QAAS3/B,EAAK,EAAGA,EAAK4gC,EAAIxiD,OAAQ4hB,IAAM,CACtC,IAAIghC,EAASJ,EAAI5gC,CAAE,EAAGihC,EAAMD,EAAO,CAAC,EAAGE,EAAMF,EAAO,CAAC,EACjDC,IAAQF,IAGZpB,EAAKuB,EACP,CACA,OAAIvB,IAAO,OACTA,EAAKoB,EAAU/oB,CAAM,EACrB4oB,EAAI/4C,KAAK,CAACk5C,EAAWpB,CAAE,CAAC,GAEnBA,CACT,CACA,SAASF,GAAgBzzC,EAAKuzC,EAAYC,EAAMxnB,EAAQkM,EAAKid,EAAS,CAChEn1C,IAAQ,SACVA,EAAM,CAAC,GAELuzC,IAAe,SACjBA,EAAa,CAAA,GAEXrb,IAAQ,SACVA,EAAM,CAAA,GAEJid,IAAY,SACdA,EAAU,IAEZ,IAAIC,EAAc7B,EAAYwB,EAAYK,EAAY,CAAC,EAAGC,EAASD,EAAYlsC,MAAM,CAAC,EACtF,GAAI,OAAO6rC,GAAc,SACvBtB,GAAgBzzC,EAAKmzC,GAAY4B,CAAS,EAAGvB,EAAMxnB,EAAQkM,EAAKid,CAAO,UAC9DJ,EAAW,CACpB,IAAIpB,EAAKmB,GAAmB9oB,EAAQ+oB,CAAS,EAC7C,GAAI,CAACpB,EAAGZ,UACN7a,OAAAA,EAAIr8B,KAAK83C,CAAE,EACJF,GAAgBzzC,EAAKq1C,EAAQ7B,EAAMxnB,EAAQkM,EAAKid,CAAO,EAEhExB,EAAGZ,UAAUjjD,GAAO,CAAC,EAAGkQ,CAAG,EAAG,SAAS3D,EAAKi5C,EAAM,CAChD,GAAIj5C,EACF,OAAOo3C,GAAgBzzC,EAAKq1C,EAAQ7B,EAAMxnB,EAAQkM,EAAKid,CAAO,EAEhEjd,EAAIr8B,KAAK83C,CAAE,EACXF,GAAgB6B,EAAMt1C,EAAIyI,OAAS6sC,EAAK7sC,KAAO4sC,EAASlC,GAAYmC,EAAK7sC,IAAI,EAAG+qC,EAAMxnB,EAAQkM,EAAKid,CAAO,CAC5G,CAAC,CACH,MAAWE,EAAOjjD,OAChBqhD,GAAgBzzC,EAAKq1C,EAAQ7B,EAAMxnB,EAAQkM,EAAKid,CAAO,EAC9CA,EACT3B,EAAKxzC,EAAKk4B,CAAG,EAEbub,GAAgBzzC,EAAKmzC,GAAY,GAAG,EAAGK,EAAMxnB,EAAQkM,EAAK,EAAI,CAElE,CACA,IAAIqd,GAAgB,CAClBC,KAAM,YACNC,IAAK,YACLC,IAAK,YACLC,IAAK,YACLC,IAAK,YACLC,IAAK,mBACLC,IAAK,YACLC,IAAK,aACLC,IAAK,YACLC,IAAK,cACLC,KAAM,aACNC,IAAK,YACLC,IAAK,YACLC,KAAM,wBACNC,IAAK,uBACLC,IAAK,aACLC,KAAM,aACNC,IAAK,YACLC,IAAK,YACLC,IAAK,gBACLC,KAAM,YACR,EACIC,GAAc,SAAsB72C,EAAK,CACvCA,IAAQ,SACVA,EAAM,IAER,IAAI82C,EAAMzO,GAAiBroC,CAAG,EAC1B+2C,EAAWxB,GAAcuB,EAAIryC,YAAY,CAAC,EAC9C,OAAOsyC,GAAY,EACrB,EACIC,GAAe,SAAuBhrB,EAAQhsB,EAAK,CACrD,GAAI,CAACA,EACH,MAAO,GAET,GAAIgsB,EAAOirB,OAAO5yB,OAAOrkB,MAAQA,GAAOgsB,EAAOirB,OAAO5yB,OAAO5b,KAC3D,OAAOujB,EAAOirB,OAAO5yB,OAAO5b,KAE9B,IAAIyuC,EAAkBlrB,EAAOirB,OAAO7yB,QAAQhB,OAAO,SAAS+zB,EAAI,CAC9D,OAAOA,EAAGn3C,MAAQA,CACpB,CAAC,EACD,GAAIk3C,EAAgB9kD,OAClB,OAAO8kD,EAAgB,CAAC,EAAEzuC,KAG5B,QADI2b,EAAU4H,EAAOZ,GAAG,QAAQ,EACvBpX,EAAK,EAAGA,EAAKoQ,EAAQhyB,OAAQ4hB,IAAM,CAC1C,IAAIpG,EAAIwW,EAAQpQ,CAAE,EAClB,GAAIpG,EAAEnF,MAAQmF,EAAE5N,KAAO4N,EAAE5N,MAAQA,EAC/B,OAAO4N,EAAEnF,IAEb,CACA,OAAOouC,GAAY72C,CAAG,CACxB,EACIo3C,GAAe,SAASC,EAAcr3C,EAAK,CAC7C,GAAI9G,MAAMiQ,QAAQnJ,CAAG,EAAG,CACtB,IAAIs3C,EAAS,CAAA,EACbt3C,EAAIzL,QAAQ,SAASgjD,EAAQ,CAC3BA,EAASF,EAAcE,CAAM,EACzBr+C,MAAMiQ,QAAQouC,CAAM,EACtBD,EAASA,EAAO3gD,OAAO4gD,CAAM,EACpBvzB,GAAUuzB,CAAM,GACzBD,EAAOz7C,KAAK07C,CAAM,CAEtB,CAAC,EACDv3C,EAAMs3C,CACR,MAAW,OAAOt3C,GAAQ,UAAYA,EAAI0I,KAAK,EAC7C1I,EAAM,CAACw3C,GAAU,CACfx3C,IAAAA,CACF,CAAC,CAAC,EACOgkB,GAAUhkB,CAAG,GAAK,OAAOA,EAAIA,KAAQ,UAAYA,EAAIA,KAAOA,EAAIA,IAAI0I,KAAK,EAClF1I,EAAM,CAACw3C,GAAUx3C,CAAG,CAAC,EAErBA,EAAM,CAAA,EAER,OAAOA,CACT,EACA,SAASw3C,GAAUx3C,EAAK,CACtB,GAAI,CAACA,EAAIyI,KAAM,CACb,IAAIsuC,EAAWF,GAAY72C,EAAIA,GAAG,EAC9B+2C,IACF/2C,EAAIyI,KAAOsuC,EAEf,CACA,OAAO/2C,CACT,CACA,IAAIy3C,GAA8B,SAAS7X,EAAY,CACrD7e,EAAwB,QAAW22B,EAAc9X,CAAU,EAC3D,SAAS8X,EAAa1rB,EAAQx5B,EAASojC,EAAO,CAC5C,IAAI7D,EACAkE,EAAWjB,GAAa,CAC1B7N,SAAU,EACZ,EAAG30B,CAAO,EAEV,GADAu/B,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQiK,EAAUL,CAAK,GAAK,KACtD,CAACpjC,EAAQwmC,cAAc5U,SAAW5xB,EAAQwmC,cAAc5U,QAAQhyB,SAAW,EAC7E,QAAS4hB,EAAK,EAAG2jC,EAAInlD,EAAQwmC,cAAc4e,UAAW5jC,EAAK2jC,EAAEvlD,OAAQ4hB,IAAM,CACzE,IAAI6jC,EAAWjjB,GAAa+iB,EAAE3jC,CAAE,CAAC,EAC7B+qB,EAAO4N,GAAKgF,QAAQkG,CAAQ,EAIhC,GAHKA,IACH9Y,EAAOrJ,GAAWgD,aAAamf,CAAQ,GAErC9Y,GAAQA,EAAK+Y,YAAY,EAAG,CAC9B9rB,EAAO+rB,UAAUF,CAAQ,EACzB,KACF,CACF,MAEA7rB,EAAOhsB,IAAIxN,EAAQwmC,cAAc5U,OAAO,EAE1C,OAAO2N,CACT,CACA,OAAO2lB,CACT,EAAEhiB,EAAU,EACZA,GAAWsH,kBAAkB,cAAeya,EAAW,EACvD,IAAIO,GAAsC,SAASpY,EAAY,CAC7D7e,EAAwB,QAAWk3B,EAAqBrY,CAAU,EAClE,SAASqY,EAAoBjsB,EAAQx5B,EAAS,CAC5C,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC9Cu/B,EAAMkE,SAAS0L,aACjB5P,EAAM4P,YAAY5P,EAAMkE,SAAS0L,WAAW,EAE9C5P,EAAMmmB,iBAAmB,SAASx0C,EAAG,CACnC,OAAOquB,EAAMomB,gBAAgBz0C,CAAC,CAChC,EACAquB,EAAMqmB,gBAAkB,SAAS10C,EAAG,CAClC,OAAOquB,EAAMsmB,eAAe30C,CAAC,CAC/B,EACAquB,EAAMumB,aAAe,SAAS50C,EAAG,CAC/B,OAAOquB,EAAMwmB,YAAY70C,CAAC,CAC5B,EACAquB,EAAM+N,eAAiB,SAASp8B,EAAG,CACjC,OAAOquB,EAAM6I,cAAcl3B,CAAC,CAC9B,EACAquB,EAAM+I,cAAc,EACpB/I,EAAMvO,OAAO,EACNuO,CACT,CACA,IAAIzE,EAAS2qB,EAAoB3kD,UACjCg6B,OAAAA,EAAOnG,SAAW,SAAoB2B,EAAKkf,EAAO3gB,EAAY,CACxDyB,IAAQ,SACVA,EAAM,OAEJkf,IAAU,SACZA,EAAQ,CAAC,GAEP3gB,IAAe,SACjBA,EAAa,CAAC,GAEhB2gB,EAAQl4C,GAAO,CACbsjB,UAAW,KAAKmmB,cAAc,EAC9BkH,SAAU,CACZ,EAAGuH,CAAK,EACJlf,IAAQ,UACV1tB,EAAIG,MAAM,yDAA2DutB,EAAM,0CAA0C,EAEvHzB,EAAav3B,GAAO,CAClBwwC,KAAM,QACR,EAAGjZ,CAAU,EACb,KAAKmxB,UAAYxQ,EAAMvH,SACvB,IAAI5hC,EAAKsoB,GAAS2B,EAAKkf,EAAO3gB,CAAU,EACxCxoB,OAAAA,EAAGM,YAAYgoB,GAAS,OAAQ,CAC9B/T,UAAW,sBACb,EAAG,CACD,cAAe,EACjB,CAAC,CAAC,EACF,KAAKqlC,oBAAoB55C,CAAE,EACpBA,CACT,EACAyuB,EAAOyJ,QAAU,UAAmB,CAClC,KAAK2hB,eAAiB,KACtB9Y,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAOmrB,oBAAsB,SAA6B55C,EAAI,CAC5D,YAAK65C,eAAiBvxB,GAAS,OAAQ,CACrC/T,UAAW,kBACb,EAAG,CAED,YAAa,QACf,CAAC,EACGvU,GACFA,EAAGM,YAAY,KAAKu5C,cAAc,EAEpC,KAAK/W,YAAY,KAAKgX,aAAc95C,CAAE,EAC/B,KAAK65C,cACd,EACAprB,EAAOqU,YAAc,SAAqBjjC,EAAMG,EAAI,CAIlD,GAHIA,IAAO,SACTA,EAAK,KAAKA,GAAG,GAEXH,IAAS,OACX,OAAO,KAAKi6C,cAAgB,YAE9B,IAAIC,EAAgB,KAAKxhB,SAAS14B,CAAI,EACtC,KAAKi6C,aAAej6C,EACpBsT,GAAY,KAAK0mC,eAAgBE,CAAa,EAC1C,CAAC,KAAKC,gBAAkB,CAAC,KAAK/iB,QAAQG,SAAS6iB,qBACjDj6C,EAAGE,aAAa,QAAS65C,CAAa,CAE1C,EACAtrB,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,0BAA4BqG,EAAWtsC,UAAUimC,cAAc/lC,KAAK,IAAI,CACjF,EACA85B,EAAO9J,OAAS,UAAkB,CAC3B,KAAKu1B,WACR,KAAKA,SAAW,GAChB,KAAK5wB,YAAY,cAAc,EAC/B,KAAK+L,IAAIn1B,aAAa,gBAAiB,OAAO,EAC1C,OAAO,KAAKy5C,UAAc,KAC5B,KAAKtkB,IAAIn1B,aAAa,WAAY,KAAKy5C,SAAS,EAElD,KAAK3oB,GAAG,CAAC,MAAO,OAAO,EAAG,KAAKyoB,YAAY,EAC3C,KAAKzoB,GAAG,UAAW,KAAKiQ,cAAc,EAE1C,EACAxS,EAAO/J,QAAU,UAAmB,CAClC,KAAKw1B,SAAW,GAChB,KAAK9wB,SAAS,cAAc,EAC5B,KAAKiM,IAAIn1B,aAAa,gBAAiB,MAAM,EACzC,OAAO,KAAKy5C,UAAc,KAC5B,KAAKtkB,IAAItL,gBAAgB,UAAU,EAErC,KAAK3F,IAAI,YAAa,KAAKi1B,gBAAgB,EAC3C,KAAKj1B,IAAI,WAAY,KAAKm1B,eAAe,EACzC,KAAKn1B,IAAI,CAAC,MAAO,OAAO,EAAG,KAAKq1B,YAAY,EAC5C,KAAKr1B,IAAI,UAAW,KAAK6c,cAAc,CACzC,EACAxS,EAAO6I,qBAAuB,UAAgC,CAC5D,KAAKwL,YAAY,KAAKgX,YAAY,CACpC,EACArrB,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAC5C,KAAKmM,SAAS+iB,cAChB,KAAK/iB,SAAS+iB,aAAaxlD,KAAK,KAAMwF,SAAS,CAEnD,EACAs0B,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CAChDjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,OAAO,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,OAAO,GACnHA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKoB,QAAQ,OAAO,GAEpByP,EAAWtsC,UAAUsnC,cAAcpnC,KAAK,KAAMs2B,CAAM,CAExD,EACOmuB,CACT,EAAEviB,EAAU,EACZA,GAAWsH,kBAAkB,qBAAsBgb,EAAmB,EACtE,IAAIiB,GAA8B,SAASC,EAAqB,CAC9Dn4B,EAAwB,QAAWo4B,EAAcD,CAAmB,EACpE,SAASC,EAAantB,EAAQx5B,EAAS,CACrC,IAAIu/B,EACJA,OAAAA,EAAQmnB,EAAoB1lD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC3Du/B,EAAMqnB,OAAO,EACbrnB,EAAMsnB,QAAU,SAAS31C,EAAG,CAC1B,OAAOquB,EAAMqnB,OAAO11C,CAAC,CACvB,EACAsoB,EAAO6D,GAAG,eAAgBkC,EAAMsnB,OAAO,EAChCtnB,CACT,CACA,IAAIzE,EAAS6rB,EAAa7lD,UAC1Bg6B,OAAAA,EAAOyJ,QAAU,UAAmB,CAClC,KAAK/K,OAAO,EAAE/I,IAAI,eAAgB,KAAKo2B,OAAO,EAC9CH,EAAoB5lD,UAAUyjC,QAAQvjC,KAAK,IAAI,CACjD,EACA85B,EAAOnG,SAAW,UAAsB,CACtC,IAAItoB,EAAKsoB,GAAS,MAAO,CACvB/T,UAAW,aAEXqtB,SAAU,EACZ,CAAC,EACD,OAAO5hC,CACT,EACAyuB,EAAO8rB,OAAS,SAAgBtvB,EAAQ,CACtC,IAAI/1B,EAAM,KAAKi4B,OAAO,EAAEstB,OAAO,EAC/B,KAAKC,OAAOxlD,CAAG,EACXA,EACF,KAAK4lC,KAAK,EAEV,KAAKC,KAAK,CAEd,EACAtM,EAAOisB,OAAS,SAAgBxlD,EAAK,CACnC,IAAIylD,EAAkB,GAClBzlD,IACFylD,EAAkB,QAAUzlD,EAAM,MAEpC,KAAKmgC,IAAIl1B,MAAMw6C,gBAAkBA,CACnC,EACAlsB,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChD,GAAK,KAAKgM,QAAQ9/B,SAAS,EAG3B,KAAIyjD,EAAoB,KAAK3jB,QAAQ4jB,YAAY,KAAK,GAAK,KAAK5jB,QAAQ6jB,IAAIC,UAAY,KAAK9jB,QAAQ6jB,IAAIC,SAASxnD,OAAS,EACvH,KAAK0jC,QAAQiJ,KAAK,EAAI,GAG1B,GAAGrZ,IAAcH,KAAYk0B,IAC3B,KAAK3jB,QAAQiJ,KAAK,EAAI,EAAE1V,MAAM,EAE5B,KAAKyM,QAAQkL,OAAO,EACtBpC,GAAe,KAAK9I,QAAQD,KAAK,CAAC,EAElC,KAAKC,QAAQoL,MAAM,EAEvB,EACOiY,CACT,EAAEnB,EAAmB,EACrBtiB,GAAWsH,kBAAkB,cAAeic,EAAW,EACvD,IAAIY,GAAW,OACXC,GAAY,OACZC,GAAU,CACZC,UAAW,YACXC,UAAW,aACXC,MAAO,QACPC,mBAAoB,6CACpBC,eAAgB,2BAChBC,sBAAuB,aACvBC,kBAAmB,QACnBC,OAAQ,mCACR5K,OAAQ,8BACR6K,UAAW,wDACb,EACA,SAASC,GAAetlC,EAAOulC,EAAS,CACtC,IAAIC,EACJ,GAAIxlC,EAAM/iB,SAAW,EACnBuoD,EAAMxlC,EAAM,CAAC,EAAIA,EAAM,CAAC,EAAIA,EAAM,CAAC,EAAIA,EAAM,CAAC,EAAIA,EAAM,CAAC,EAAIA,EAAM,CAAC,UAC3DA,EAAM/iB,SAAW,EAC1BuoD,EAAMxlC,EAAMjM,MAAM,CAAC,MAEnB,OAAM,IAAI/L,MAAM,gCAAkCgY,EAAQ,8CAA8C,EAE1G,MAAO,QAAUzjB,SAASipD,EAAIzxC,MAAM,EAAG,CAAC,EAAG,EAAE,EAAI,IAAMxX,SAASipD,EAAIzxC,MAAM,EAAG,CAAC,EAAG,EAAE,EAAI,IAAMxX,SAASipD,EAAIzxC,MAAM,EAAG,CAAC,EAAG,EAAE,EAAI,IAAMwxC,EAAU,GAC/I,CACA,SAASE,GAAe/7C,EAAI2tB,EAAQ+N,EAAM,CACxC,GAAI,CACF17B,EAAGG,MAAMwtB,CAAM,EAAI+N,CACrB,MAAY,CACV,MACF,CACF,CACA,IAAIsgB,GAAmC,SAASjb,EAAY,CAC1D7e,EAAwB,QAAW+5B,EAAmBlb,CAAU,EAChE,SAASkb,EAAkB9uB,EAAQx5B,EAASojC,EAAO,CACjD,IAAI7D,EACJA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,EAASojC,CAAK,GAAK,KACzD,IAAImlB,EAAuB,SAA+Br3C,EAAG,CAC3D,OAAOquB,EAAMie,cAActsC,CAAC,CAC9B,EACAsoB,OAAAA,EAAO6D,GAAG,YAAa,SAASnsB,EAAG,CACjC,OAAOquB,EAAMipB,cAAct3C,CAAC,CAC9B,CAAC,EACDsoB,EAAO6D,GAAG,kBAAmBkrB,CAAoB,EACjD/uB,EAAO6D,GAAG,iBAAkB,SAASnsB,EAAG,CACtC,OAAOquB,EAAMkpB,eAAev3C,CAAC,CAC/B,CAAC,EACDsoB,EAAO4J,MAAMnyB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAG,UAAW,CAC9E,GAAI/F,EAAOsd,OAAStd,EAAOsd,MAAMwE,yBAA0B,CACzD,KAAKlU,KAAK,EACV,MACF,CACA5N,EAAO6D,GAAG,mBAAoBkrB,CAAoB,EAClD/uB,EAAO6D,GAAG,eAAgBkrB,CAAoB,EAC9Cr6B,EAAgB,QAAW4L,iBAAiB,oBAAqByuB,CAAoB,EACrF/uB,EAAO6D,GAAG,UAAW,UAAW,CAC9B,OAAOnP,EAAgB,QAAW2L,oBAAoB,oBAAqB0uB,CAAoB,CACjG,CAAC,EAED,QADI7b,EAAS,KAAKjJ,SAAS+C,cAAckG,QAAU,CAAA,EAC1ClrB,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IACnC,KAAK8hB,QAAQyJ,mBAAmBL,EAAOlrB,CAAE,EAAG,EAAI,EAElD,KAAKinC,eAAe,CACtB,CAAC,CAAC,EACKlpB,CACT,CACA,IAAIzE,EAASwtB,EAAkBxnD,UAC/Bg6B,OAAAA,EAAO2tB,eAAiB,UAA0B,CAUhD,QATIC,EAAQ,CACVtU,SAAU,EACVG,UAAW,CACb,EACIvyB,EAAY,KAAKshB,QAAQsJ,WAAW,EACpC+b,EAAW,KAAKrlB,QAAQmhB,OAAOmE,iBAC/BC,EACAC,EACAC,EACKvnC,EAAK,EAAGA,EAAKQ,EAAUpiB,OAAQ4hB,IAAM,CAC5C,IAAIK,EAAQG,EAAUR,CAAE,EACpBmnC,GAAYA,EAAS9W,SAAW8W,EAAS5jB,UAAY4jB,EAAS5jB,WAAaljB,EAAMkjB,UAAYljB,EAAMkxB,QAAQ2V,EACzG7mC,EAAMkxB,OAAS4V,EAAS5V,KAC1BgW,EAAiBlnC,EACPknC,IACVA,EAAiBlnC,GAEV8mC,GAAY,CAACA,EAAS9W,SAC/BkX,EAAiB,KACjBF,EAAY,KACZC,EAAgB,MACPjnC,EAAM,UACXA,EAAMkxB,OAAS,gBAAkB,CAAC8V,EACpCA,EAAYhnC,EACHA,EAAMkxB,QAAQ2V,GAAS,CAACI,IACjCA,EAAgBjnC,GAGtB,CACIknC,EACFA,EAAe7mC,KAAO,UACb4mC,EACTA,EAAc5mC,KAAO,UACZ2mC,IACTA,EAAU3mC,KAAO,UAErB,EACA4Y,EAAO0tB,cAAgB,UAAyB,CAC1C,KAAKllB,QAAQwT,OAAS,KAAKxT,QAAQwT,MAAMwE,yBAC3C,KAAKlU,KAAK,EAEV,KAAKD,KAAK,CAEd,EACArM,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,wBACb,EAAG,CACD,UAAa,MACb,YAAa,MACb,cAAe,MACjB,CAAC,CACH,EACAka,EAAOkuB,aAAe,UAAwB,CACxC,OAAO96B,EAAgB,QAAW5C,QAAW,YAC/C4C,EAAgB,QAAW5C,OAAOzE,YAAYqH,EAAgB,QAAY,CAAA,EAAI,KAAKwT,GAAG,CAE1F,EACA5G,EAAO0iB,cAAgB,UAAyB,CAC9C,IAAI9Q,EAAS,KAAKpJ,QAAQsJ,WAAW,EACjCqc,EAA6B,KAAKxlB,SAASwlB,2BAE/C,GADA,KAAKD,aAAa,EACdC,EAA4B,CAE9B,QADIC,EAAgB,CAAA,EACX3W,EAAM,EAAGA,EAAM7F,EAAO9sC,OAAQ,EAAE2yC,EAAK,CAC5C,IAAI1wB,EAAQ6qB,EAAO6F,CAAG,EAClB1wB,EAAMK,OAAS,WAGnBgnC,EAAc7/C,KAAKwY,CAAK,CAC1B,CACA,KAAKsnC,eAAeD,CAAa,EACjC,MACF,CAIA,QAHIE,EAAoB,KACpBC,EAAyB,KACzB7nC,EAAKkrB,EAAO9sC,OACT4hB,KAAM,CACX,IAAI8nC,EAAS5c,EAAOlrB,CAAE,EAClB8nC,EAAOpnC,OAAS,YACdonC,EAAOvW,OAAS,eAClBqW,EAAoBE,EAEpBD,EAAyBC,EAG/B,CACID,GACE,KAAK3yB,aAAa,WAAW,IAAM,OACrC,KAAKnqB,aAAa,YAAa,KAAK,EAEtC,KAAK48C,eAAeE,CAAsB,GACjCD,IACL,KAAK1yB,aAAa,WAAW,IAAM,aACrC,KAAKnqB,aAAa,YAAa,WAAW,EAE5C,KAAK48C,eAAeC,CAAiB,EAEzC,EACAtuB,EAAOyuB,mBAAqB,SAA4B1nC,EAAO,CAI7D,QAHI2nC,EAAY,KAAKlmB,QAAQmmB,kBAAkBC,UAAU,EACrD5iC,EAAOjF,EAAM21B,WACbh2B,EAAKsF,EAAKlnB,OACP4hB,KAAM,CACX,IAAInF,EAAMyK,EAAKtF,CAAE,EACjB,GAAKnF,EAGL,KAAI8E,EAAS9E,EAAIiL,aA+BjB,GA9BIkiC,EAAU7mC,QACZxB,EAAO6F,WAAWxa,MAAMmW,MAAQ6mC,EAAU7mC,OAExC6mC,EAAUG,aACZvB,GAAejnC,EAAO6F,WAAY,QAASihC,GAAeuB,EAAU7mC,OAAS,OAAQ6mC,EAAUG,WAAW,CAAC,EAEzGH,EAAU5mC,kBACZzB,EAAO6F,WAAWxa,MAAMoW,gBAAkB4mC,EAAU5mC,iBAElD4mC,EAAUI,mBACZxB,GAAejnC,EAAO6F,WAAY,kBAAmBihC,GAAeuB,EAAU5mC,iBAAmB,OAAQ4mC,EAAUI,iBAAiB,CAAC,EAEnIJ,EAAUK,cACRL,EAAUM,cACZ1B,GAAejnC,EAAQ,kBAAmB8mC,GAAeuB,EAAUK,YAAaL,EAAUM,aAAa,CAAC,EAExG3oC,EAAO3U,MAAMoW,gBAAkB4mC,EAAUK,aAGzCL,EAAUO,YACRP,EAAUO,YAAc,aAC1B5oC,EAAO6F,WAAWxa,MAAMw9C,WAAa,eAAiB3C,GAAW,iBAAmBA,GAAW,iBAAmBA,GACzGmC,EAAUO,YAAc,SACjC5oC,EAAO6F,WAAWxa,MAAMw9C,WAAa,WAAa3C,GAAW,aAAeA,GAAW,aAAeA,GAC7FmC,EAAUO,YAAc,YACjC5oC,EAAO6F,WAAWxa,MAAMw9C,WAAa,WAAa1C,GAAY,WAAaA,GAAY,eAAiBD,GAAW,YAAcA,GACxHmC,EAAUO,YAAc,YACjC5oC,EAAO6F,WAAWxa,MAAMw9C,WAAa,WAAa3C,GAAW,aAAeA,GAAW,aAAeA,GAAW,aAAeA,KAGhImC,EAAUS,aAAeT,EAAUS,cAAgB,EAAG,CACxD,IAAI1iC,EAAW2G,EAAgB,QAAWnS,WAAWoF,EAAO3U,MAAM+a,QAAQ,EAC1EpG,EAAO3U,MAAM+a,SAAWA,EAAWiiC,EAAUS,YAAc,KAC3D9oC,EAAO3U,MAAMxH,OAAS,OACtBmc,EAAO3U,MAAMqW,IAAM,MACrB,CACI2mC,EAAUU,YAAcV,EAAUU,aAAe,YAC/CV,EAAUU,aAAe,aAC3B/oC,EAAO6F,WAAWxa,MAAM29C,YAAc,aAEtChpC,EAAO6F,WAAWxa,MAAM09C,WAAa3C,GAAQiC,EAAUU,UAAU,GAGvE,CACF,EACApvB,EAAOquB,eAAiB,SAAwBzc,EAAQ,CAItD,GAHKhmC,MAAMiQ,QAAQ+1B,CAAM,IACvBA,EAAS,CAACA,CAAM,GAEd,SAAOxe,EAAgB,QAAW5C,QAAW,YAAcohB,EAAO7M,MAAM,SAASuqB,GAAQ,CAC3F,MAAO,CAACA,GAAO5S,UACjB,CAAC,GAID,SADI1wB,EAAO,CAAA,EACFtF,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ,EAAE4hB,EAErC,QADIK,EAAQ6qB,EAAOlrB,CAAE,EACZ2jC,EAAI,EAAGA,EAAItjC,EAAM21B,WAAW53C,OAAQ,EAAEulD,EAC7Cr+B,EAAKzd,KAAKwY,EAAM21B,WAAW2N,CAAC,CAAC,EAGjCj3B,EAAgB,QAAW5C,OAAOzE,YAAYqH,EAAgB,QAAYpH,EAAM,KAAK4a,GAAG,EACxF,QAAS6Q,EAAM,EAAGA,EAAM7F,EAAO9sC,OAAQ,EAAE2yC,EAAK,CAE5C,QADI8X,EAAU3d,EAAO6F,CAAG,EACf+X,EAAK,EAAGA,EAAKD,EAAQ7S,WAAW53C,OAAQ,EAAE0qD,EAAI,CACrD,IAAIC,EAAQF,EAAQ7S,WAAW8S,CAAE,EAAEhjC,aACnCmO,GAAS80B,EAAO,oBAAoB,EACpC90B,GAAS80B,EAAO,uBAAyBF,EAAQtlB,SAAWslB,EAAQtlB,SAAWwN,EAAI,EAC/E8X,EAAQtlB,UACVx4B,GAAag+C,EAAO,OAAQF,EAAQtlB,QAAQ,CAEhD,CACI,KAAKzB,QAAQmmB,mBACf,KAAKF,mBAAmBc,CAAO,CAEnC,EACF,EACO/B,CACT,EAAEplB,EAAU,EACZA,GAAWsH,kBAAkB,mBAAoB6d,EAAgB,EACjE,IAAImC,GAAiC,SAASpd,EAAY,CACxD7e,EAAwB,QAAWk8B,EAAiBrd,CAAU,EAC9D,SAASqd,GAAkB,CACzB,OAAOrd,EAAW79B,MAAM,KAAM/I,SAAS,GAAK,IAC9C,CACA,IAAIs0B,EAAS2vB,EAAgB3pD,UAC7Bg6B,OAAAA,EAAOnG,SAAW,UAAsB,CACtC,IAAI+1B,EAAU,KAAKpnB,QAAQonB,QAAQ,EAC/BC,EAAa,KAAK/lB,SAAS8lB,EAAU,eAAiB,cAAc,EACpEvb,EAAcxa,GAAS,OAAQ,CACjC/T,UAAW,mBACXpB,YAAa,KAAKolB,SAAS,kBAAmB,CAAC+lB,CAAU,CAAC,CAC5D,CAAC,EACGt+C,EAAK+gC,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACvD4f,UAAW,sBACXqJ,IAAK,KACP,CAAC,EACD5d,OAAAA,EAAGM,YAAYwiC,CAAW,EACnB9iC,CACT,EACOo+C,CACT,EAAEvnB,EAAU,EACZA,GAAWsH,kBAAkB,iBAAkBggB,EAAc,EAC7D,IAAII,GAA0B,SAASlE,EAAqB,CAC1Dn4B,EAAwB,QAAWs8B,EAASnE,CAAmB,EAC/D,SAASmE,GAAU,CACjB,OAAOnE,EAAoBn3C,MAAM,KAAM/I,SAAS,GAAK,IACvD,CACA,IAAIs0B,EAAS+vB,EAAQ/pD,UACrBg6B,OAAAA,EAAOnG,SAAW,SAAoB2B,EAAKkf,EAAO3gB,EAAY,CACxD2gB,IAAU,SACZA,EAAQ,CAAC,GAEP3gB,IAAe,SACjBA,EAAa,CAAC,GAEhByB,EAAM,SACNkf,EAAQl4C,GAAO,CACbsjB,UAAW,KAAKmmB,cAAc,CAChC,EAAGyO,CAAK,EACR3gB,EAAav3B,GAAO,CAElB2Y,KAAM,QACR,EAAG4e,CAAU,EACb,IAAIxoB,EAAKsoB,GAAS2B,EAAKkf,EAAO3gB,CAAU,EACxCxoB,OAAAA,EAAGM,YAAYgoB,GAAS,OAAQ,CAC9B/T,UAAW,sBACb,EAAG,CACD,cAAe,EACjB,CAAC,CAAC,EACF,KAAKqlC,oBAAoB55C,CAAE,EACpBA,CACT,EACAyuB,EAAO8K,SAAW,SAAkBzQ,EAAOn1B,EAAS,CAC9CA,IAAY,SACdA,EAAU,CAAC,GAEb,IAAI4gB,EAAY,KAAKnZ,YAAYxB,KACjC2C,OAAAA,EAAIC,KAAK,+DAAiE+X,EAAY,uDAAuD,EACtIsiB,GAAWpiC,UAAU8kC,SAAS5kC,KAAK,KAAMm0B,EAAOn1B,CAAO,CAChE,EACA86B,EAAO9J,OAAS,UAAkB,CAChC01B,EAAoB5lD,UAAUkwB,OAAOhwB,KAAK,IAAI,EAC9C,KAAK0gC,IAAItL,gBAAgB,UAAU,CACrC,EACA0E,EAAO/J,QAAU,UAAmB,CAClC21B,EAAoB5lD,UAAUiwB,QAAQ/vB,KAAK,IAAI,EAC/C,KAAK0gC,IAAIn1B,aAAa,WAAY,UAAU,CAC9C,EACAuuB,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CACpD,GAAIjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,OAAO,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,OAAO,EAAG,CACtHA,EAAOiF,gBAAgB,EACvB,MACF,CACAmqB,EAAoB5lD,UAAUsnC,cAAcpnC,KAAK,KAAMs2B,CAAM,CAC/D,EACOuzB,CACT,EAAErF,EAAmB,EACrBtiB,GAAWsH,kBAAkB,SAAUogB,EAAO,EAC9C,IAAIE,GAAgC,SAASC,EAAS,CACpDx8B,EAAwB,QAAWy8B,EAAgBD,CAAO,EAC1D,SAASC,EAAexxB,EAAQx5B,EAAS,CACvC,IAAIu/B,EACJA,OAAAA,EAAQwrB,EAAQ/pD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cu/B,EAAM0rB,WAAa,GACnB1rB,EAAMlC,GAAG,YAAa,SAASnsB,EAAG,CAChC,OAAOquB,EAAM2rB,gBAAgBh6C,CAAC,CAChC,CAAC,EACMquB,CACT,CACA,IAAIzE,EAASkwB,EAAelqD,UAC5Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,qBACT,EACAjM,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChD,IAAI6zB,EAAc,KAAK7nB,QAAQD,KAAK,EACpC,GAAI,KAAK4nB,YAAc3zB,EAAOoF,SAAWpF,EAAOwF,QAAS,CACvD,IAAImqB,EAAoB,KAAK3jB,QAAQ4jB,YAAY,KAAK,GAAK,KAAK5jB,QAAQ6jB,IAAIC,UAAY,KAAK9jB,QAAQ6jB,IAAIC,SAASxnD,OAAS,EAC3HwsC,GAAe+e,CAAW,EACtB,KAAK7nB,QAAQiJ,KAAK,EAAI,GAG1B,GAAGrZ,IAAcH,KAAYk0B,IAC3B,KAAK3jB,QAAQiJ,KAAK,EAAI,EAAE1V,MAAM,EAEhC,MACF,CACA,IAAIynB,EAAK,KAAKhb,QAAQkC,SAAS,YAAY,EACvC4lB,EAAa9M,GAAMA,EAAG9Y,SAAS,YAAY,EAC/C,GAAI,CAAC4lB,EAAY,CACf,KAAK9nB,QAAQiJ,KAAK,EAAI,EAAE1V,MAAM,EAC9B,MACF,CACA,IAAIw0B,EAAY,UAAsB,CACpC,OAAOD,EAAWv0B,MAAM,CAC1B,EACIsV,GAAWgf,CAAW,EACxBA,EAAY9/C,KAAKggD,EAAW,UAAW,CACvC,CAAC,EAED,KAAKp+C,WAAWo+C,EAAW,CAAC,CAEhC,EACAvwB,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CACpD,KAAK2zB,WAAa,GAClBF,EAAQjqD,UAAUsnC,cAAcpnC,KAAK,KAAMs2B,CAAM,CACnD,EACAwD,EAAOowB,gBAAkB,SAAyB5zB,EAAQ,CACxD,KAAK2zB,WAAa,EACpB,EACOD,CACT,EAAEJ,EAAO,EACTE,GAAchqD,UAAUqlD,aAAe,aACvCjjB,GAAWsH,kBAAkB,gBAAiBsgB,EAAa,EAC3D,IAAIQ,GAA8B,SAASP,EAAS,CAClDx8B,EAAwB,QAAWg9B,EAAcR,CAAO,EACxD,SAASQ,EAAa/xB,EAAQx5B,EAAS,CACrC,IAAIu/B,EACJA,OAAAA,EAAQwrB,EAAQ/pD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cu/B,EAAM4P,YAAYnvC,GAAWA,EAAQmvC,aAAe5P,EAAMqF,SAAS,OAAO,CAAC,EACpErF,CACT,CACA,IAAIzE,EAASywB,EAAazqD,UAC1Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,oBAAsBgkB,EAAQjqD,UAAUimC,cAAc/lC,KAAK,IAAI,CACxE,EACA85B,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChD,KAAKqG,QAAQ,CACX1nB,KAAM,QACN6nB,QAAS,EACX,CAAC,CACH,EACAhD,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CAChDjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GACtDA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKoB,QAAQ,OAAO,GAEpBotB,EAAQjqD,UAAUsnC,cAAcpnC,KAAK,KAAMs2B,CAAM,CAErD,EACOi0B,CACT,EAAEX,EAAO,EACT1nB,GAAWsH,kBAAkB,cAAe8gB,EAAW,EACvD,IAAIE,GAA6B,SAAST,EAAS,CACjDx8B,EAAwB,QAAWk9B,EAAaV,CAAO,EACvD,SAASU,EAAYjyB,EAAQx5B,EAAS,CACpC,IAAIu/B,EACJ,OAAIv/B,IAAY,SACdA,EAAU,CAAC,GAEbu/B,EAAQwrB,EAAQ/pD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/CA,EAAQ0rD,OAAS1rD,EAAQ0rD,SAAW,QAAU1rD,EAAQ0rD,OACtDnsB,EAAMlC,GAAG7D,EAAQ,OAAQ,SAAStoB,EAAG,CACnC,OAAOquB,EAAMosB,WAAWz6C,CAAC,CAC3B,CAAC,EACDquB,EAAMlC,GAAG7D,EAAQ,QAAS,SAAStoB,EAAG,CACpC,OAAOquB,EAAMqsB,YAAY16C,CAAC,CAC5B,CAAC,EACGlR,EAAQ0rD,QACVnsB,EAAMlC,GAAG7D,EAAQ,QAAS,SAAStoB,EAAG,CACpC,OAAOquB,EAAMssB,YAAY36C,CAAC,CAC5B,CAAC,EAEIquB,CACT,CACA,IAAIzE,EAAS2wB,EAAY3qD,UACzBg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,oBAAsBgkB,EAAQjqD,UAAUimC,cAAc/lC,KAAK,IAAI,CACxE,EACA85B,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAC5C,KAAKgM,QAAQkL,OAAO,EACtBpC,GAAe,KAAK9I,QAAQD,KAAK,CAAC,EAElC,KAAKC,QAAQoL,MAAM,CAEvB,EACA5T,EAAOgxB,aAAe,SAAsBx0B,EAAQ,CAClD,KAAK3B,YAAY,WAAW,EACxB,KAAK2N,QAAQkL,OAAO,EACtB,KAAKod,YAAYt0B,CAAM,EAEvB,KAAKq0B,WAAWr0B,CAAM,CAE1B,EACAwD,EAAO6wB,WAAa,SAAoBr0B,EAAQ,CAC9C,KAAK3B,YAAY,WAAW,EAC5B,KAAKA,YAAY,YAAY,EAC7B,KAAKF,SAAS,aAAa,EAC3B,KAAK0Z,YAAY,OAAO,CAC1B,EACArU,EAAO8wB,YAAc,SAAqBt0B,EAAQ,CAChD,KAAK3B,YAAY,aAAa,EAC9B,KAAKF,SAAS,YAAY,EAC1B,KAAK0Z,YAAY,MAAM,CACzB,EACArU,EAAO+wB,YAAc,SAAqBv0B,EAAQ,CAChD,IAAIwJ,EAAS,KACb,KAAKnL,YAAY,aAAa,EAC9B,KAAKF,SAAS,WAAW,EACzB,KAAK0Z,YAAY,QAAQ,EACzB,KAAKnR,IAAI,KAAKsF,QAAS,SAAU,SAASpyB,EAAG,CAC3C,OAAO4vB,EAAOgrB,aAAa56C,CAAC,CAC9B,CAAC,CACH,EACOu6C,CACT,EAAEb,EAAO,EACTY,GAAW1qD,UAAUqlD,aAAe,OACpCjjB,GAAWsH,kBAAkB,aAAcghB,EAAU,EACrD,IAAIO,GAAwB,SAAgC1sD,EAAS2sD,EAAO,CAC1E3sD,EAAUA,EAAU,EAAI,EAAIA,EAC5B,IAAI+b,EAAIzc,KAAKC,MAAMS,EAAU,EAAE,EAC3Bgc,EAAI1c,KAAKC,MAAMS,EAAU,GAAK,EAAE,EAChC6b,EAAIvc,KAAKC,MAAMS,EAAU,IAAI,EAC7B4sD,EAAKttD,KAAKC,MAAMotD,EAAQ,GAAK,EAAE,EAC/BE,EAAKvtD,KAAKC,MAAMotD,EAAQ,IAAI,EAChC,OAAIlsD,MAAMT,CAAO,GAAKA,IAAY8sD,OAChCjxC,EAAIG,EAAID,EAAI,KAEdF,EAAIA,EAAI,GAAKgxC,EAAK,EAAIhxC,EAAI,IAAM,GAChCG,IAAMH,GAAK+wC,GAAM,KAAO5wC,EAAI,GAAK,IAAMA,EAAIA,GAAK,IAChDD,EAAIA,EAAI,GAAK,IAAMA,EAAIA,EAChBF,EAAIG,EAAID,CACjB,EACIgxC,GAAiBL,GACrB,SAASM,GAAcC,EAAsB,CAC3CF,GAAiBE,CACnB,CACA,SAASC,IAAkB,CACzBH,GAAiBL,EACnB,CACA,SAASS,GAAWntD,EAAS2sD,EAAO,CAClC,OAAIA,IAAU,SACZA,EAAQ3sD,GAEH+sD,GAAe/sD,EAAS2sD,CAAK,CACtC,CACA,IAAIS,GAA8B,SAASrf,EAAY,CACrD7e,EAAwB,QAAWm+B,EAActf,CAAU,EAC3D,SAASsf,EAAalzB,EAAQx5B,EAAS,CACrC,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAMlC,GAAG7D,EAAQ,CAAC,aAAc,OAAO,EAAG,SAAStoB,EAAG,CACpD,OAAOquB,EAAMotB,cAAcz7C,CAAC,CAC9B,CAAC,EACDquB,EAAMqtB,gBAAgB,EACfrtB,CACT,CACA,IAAIzE,EAAS4xB,EAAa5rD,UAC1Bg6B,OAAAA,EAAOnG,SAAW,UAAsB,CACtC,IAAI/T,EAAY,KAAKmmB,cAAc,EAC/B16B,EAAK+gC,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACvD4f,UAAWA,EAAY,+BACzB,CAAC,EACGisC,EAAOl4B,GAAS,OAAQ,CAC1B/T,UAAW,mBACXpB,YAAa,KAAKolB,SAAS,KAAKkoB,UAAU,EAAI,MAChD,EAAG,CACDhf,KAAM,cACR,CAAC,EACDzhC,OAAAA,EAAGM,YAAYkgD,CAAI,EACnB,KAAKxnB,WAAa1Q,GAAS,OAAQ,CACjC/T,UAAWA,EAAY,UACzB,EAAG,CAED,YAAa,MAKb,KAAQ,cACV,CAAC,EACDvU,EAAGM,YAAY,KAAK04B,UAAU,EACvBh5B,CACT,EACAyuB,EAAOyJ,QAAU,UAAmB,CAClC,KAAKc,WAAa,KAClB,KAAK0nB,UAAY,KACjB3f,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAO8xB,gBAAkB,SAAyBluD,EAAM,CACtD,IAAIoiC,EAAS,KACTpiC,IAAS,SACXA,EAAO,GAETA,EAAO8tD,GAAW9tD,CAAI,EAClB,KAAKsuD,iBAAmBtuD,IAG5B,KAAKsuD,eAAiBtuD,EACtB,KAAKsrC,2BAA2B,8BAA+B,UAAW,CACxE,GAAKlJ,EAAOuE,WAGZ,KAAI4nB,EAAUnsB,EAAOisB,UACjBE,GAAWnsB,EAAOuE,WAAWre,aAAeimC,IAC9CA,EAAU,KACVrkD,EAAIC,KAAK,oJAAoJ,GAE/Ji4B,EAAOisB,UAAY5+B,EAAkB,QAAWrN,eAAeggB,EAAOksB,cAAc,EAC/ElsB,EAAOisB,YAGRE,EACFnsB,EAAOuE,WAAWX,aAAa5D,EAAOisB,UAAWE,CAAO,EAExDnsB,EAAOuE,WAAW14B,YAAYm0B,EAAOisB,SAAS,GAElD,CAAC,EACH,EACAjyB,EAAO6xB,cAAgB,SAAuBr1B,EAAQ,CACtD,EACOo1B,CACT,EAAExpB,EAAU,EACZupB,GAAY3rD,UAAUgsD,WAAa,OACnCL,GAAY3rD,UAAUqlD,aAAe,OACrCjjB,GAAWsH,kBAAkB,cAAeiiB,EAAW,EACvD,IAAIS,GAAqC,SAASC,EAAc,CAC9D5+B,EAAwB,QAAW6+B,EAAqBD,CAAY,EACpE,SAASC,GAAsB,CAC7B,OAAOD,EAAa59C,MAAM,KAAM/I,SAAS,GAAK,IAChD,CACA,IAAIs0B,EAASsyB,EAAoBtsD,UACjCg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,kBACT,EACAjM,EAAO6xB,cAAgB,SAAuBr1B,EAAQ,CACpD,IAAI54B,EACA,KAAK4kC,QAAQye,MAAM,EACrBrjD,EAAO,KAAK4kC,QAAQuI,SAAS,EAE7BntC,EAAO,KAAK4kC,QAAQyZ,UAAU,EAAI,KAAKzZ,QAAQ+pB,SAAS,EAAEnV,YAAc,KAAK5U,QAAQ4U,YAAY,EAEnG,KAAK0U,gBAAgBluD,CAAI,CAC3B,EACO0uD,CACT,EAAEX,EAAW,EACbS,GAAmBpsD,UAAUgsD,WAAa,eAC1CI,GAAmBpsD,UAAUqlD,aAAe,eAC5CjjB,GAAWsH,kBAAkB,qBAAsB0iB,EAAkB,EACrE,IAAII,GAAkC,SAASH,EAAc,CAC3D5+B,EAAwB,QAAWg/B,EAAkBJ,CAAY,EACjE,SAASI,EAAiB/zB,EAAQx5B,EAAS,CACzC,IAAIu/B,EACJA,EAAQ4tB,EAAansD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACpD,IAAI2sD,EAAgB,SAAwBz7C,EAAG,CAC7C,OAAOquB,EAAMotB,cAAcz7C,CAAC,CAC9B,EACAquB,OAAAA,EAAMlC,GAAG7D,EAAQ,iBAAkBmzB,CAAa,EAChDptB,EAAMlC,GAAG7D,EAAQ,YAAamzB,CAAa,EAC3CptB,EAAMlC,GAAG7D,EAAQ,iBAAkBmzB,CAAa,EACzCptB,CACT,CACA,IAAIzE,EAASyyB,EAAiBzsD,UAC9Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,cACT,EACAjM,EAAO6xB,cAAgB,SAAuBr1B,EAAQ,CACpD,IAAIuU,EAAW,KAAKvI,QAAQuI,SAAS,EACrC,KAAK+gB,gBAAgB/gB,CAAQ,CAC/B,EACO0hB,CACT,EAAEd,EAAW,EACba,GAAgBxsD,UAAUgsD,WAAa,WACvCQ,GAAgBxsD,UAAUqlD,aAAe,WACzCjjB,GAAWsH,kBAAkB,kBAAmB8iB,EAAe,EAC/D,IAAIE,GAA8B,SAASpgB,EAAY,CACrD7e,EAAwB,QAAWk/B,EAAcrgB,CAAU,EAC3D,SAASqgB,GAAe,CACtB,OAAOrgB,EAAW79B,MAAM,KAAM/I,SAAS,GAAK,IAC9C,CACA,IAAIs0B,EAAS2yB,EAAa3sD,UAC1Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,IAAItoB,EAAK+gC,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACvD4f,UAAW,mCACb,EAAG,CAID,cAAe,EACjB,CAAC,EACG0B,EAAM8qB,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,KAAK,EACpD6rD,EAAOzf,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,OAAQ,CAC1Dwe,YAAa,GACf,CAAC,EACD8C,OAAAA,EAAI3V,YAAYkgD,CAAI,EACpBxgD,EAAGM,YAAY2V,CAAG,EACXjW,CACT,EACOohD,CACT,EAAEvqB,EAAU,EACZA,GAAWsH,kBAAkB,cAAegjB,EAAW,EACvD,IAAIE,GAAuC,SAASP,EAAc,CAChE5+B,EAAwB,QAAWo/B,EAAuBR,CAAY,EACtE,SAASQ,EAAsBn0B,EAAQx5B,EAAS,CAC9C,IAAIu/B,EACJA,OAAAA,EAAQ4tB,EAAansD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACpDu/B,EAAMlC,GAAG7D,EAAQ,iBAAkB,SAAStoB,EAAG,CAC7C,OAAOquB,EAAMotB,cAAcz7C,CAAC,CAC9B,CAAC,EACMquB,CACT,CACA,IAAIzE,EAAS6yB,EAAsB7sD,UACnCg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,oBACT,EACAjM,EAAOnG,SAAW,UAAsB,CACtC,IAAItoB,EAAK8gD,EAAarsD,UAAU6zB,SAAS3zB,KAAK,IAAI,EAClD,OAAI,KAAKyiC,SAASmqB,kBAAoB,IACpCvhD,EAAG+oB,aAAaT,GAAS,OAAQ,CAAC,EAAG,CACnC,cAAe,EACjB,EAAG,GAAG,EAAG,KAAK0Q,UAAU,EAEnBh5B,CACT,EACAyuB,EAAO6xB,cAAgB,SAAuBr1B,EAAQ,CACpD,GAAI,OAAO,KAAKgM,QAAQuI,SAAS,GAAM,SAGvC,KAAIntC,EACA,KAAK4kC,QAAQye,MAAM,EACrBrjD,EAAO,EACE,KAAK4kC,QAAQuqB,qBACtBnvD,EAAO,KAAK4kC,QAAQuqB,qBAAqB,EAEzCnvD,EAAO,KAAK4kC,QAAQwqB,cAAc,EAEpC,KAAKlB,gBAAgBluD,CAAI,EAC3B,EACOivD,CACT,EAAElB,EAAW,EACbiB,GAAqB5sD,UAAUgsD,WAAa,iBAC5CY,GAAqB5sD,UAAUqlD,aAAe,iBAC9CjjB,GAAWsH,kBAAkB,uBAAwBkjB,EAAoB,EACzE,IAAIK,GAA8B,SAAS3gB,EAAY,CACrD7e,EAAwB,QAAWy/B,EAAc5gB,CAAU,EAC3D,SAAS4gB,EAAax0B,EAAQx5B,EAAS,CACrC,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAM0uB,cAAc,EACpB1uB,EAAMlC,GAAGkC,EAAM/F,OAAO,EAAG,iBAAkB,SAAStoB,EAAG,CACrD,OAAOquB,EAAM0uB,cAAc/8C,CAAC,CAC9B,CAAC,EACMquB,CACT,CACA,IAAIzE,EAASkzB,EAAaltD,UAC1Bg6B,OAAAA,EAAOnG,SAAW,UAAsB,CACtC,IAAItoB,EAAK+gC,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACvD4f,UAAW,8BACb,CAAC,EACD,YAAKykB,WAAa1Q,GAAS,MAAO,CAChC/T,UAAW,kBACb,EAAG,CACD,YAAa,KACf,CAAC,EACD,KAAKykB,WAAW14B,YAAYgoB,GAAS,OAAQ,CAC3C/T,UAAW,mBACXpB,YAAa,KAAKolB,SAAS,aAAa,EAAI,MAC9C,CAAC,CAAC,EACF,KAAKS,WAAW14B,YAAYwhB,EAAkB,QAAWrN,eAAe,KAAK8jB,SAAS,MAAM,CAAC,CAAC,EAC9Fv4B,EAAGM,YAAY,KAAK04B,UAAU,EACvBh5B,CACT,EACAyuB,EAAOyJ,QAAU,UAAmB,CAClC,KAAKc,WAAa,KAClB+H,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAOmzB,cAAgB,SAAuB32B,EAAQ,CAChD,KAAKkC,OAAO,EAAEqS,SAAS,IAAMsgB,IAC/B,KAAKhlB,KAAK,EAEV,KAAKC,KAAK,CAEd,EACO4mB,CACT,EAAE9qB,EAAU,EACZA,GAAWsH,kBAAkB,cAAeujB,EAAW,EACvD,IAAIG,GAA6B,SAASnD,EAAS,CACjDx8B,EAAwB,QAAW4/B,EAAapD,CAAO,EACvD,SAASoD,EAAY30B,EAAQx5B,EAAS,CACpC,IAAIu/B,EACJA,OAAAA,EAAQwrB,EAAQ/pD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cu/B,EAAM6uB,qBAAqB,EACvB7uB,EAAM+D,QAAQ+qB,cAChB9uB,EAAM+uB,6BAA+B,SAASp9C,EAAG,CAC/C,OAAOquB,EAAM6uB,qBAAqBl9C,CAAC,CACrC,EACAquB,EAAMlC,GAAGkC,EAAM+D,QAAQ+qB,YAAa,iBAAkB9uB,EAAM+uB,4BAA4B,GAEnF/uB,CACT,CACA,IAAIzE,EAASqzB,EAAYrtD,UACzBg6B,OAAAA,EAAOnG,SAAW,UAAsB,CACtC,IAAItoB,EAAK0+C,EAAQjqD,UAAU6zB,SAAS3zB,KAAK,KAAM,SAAU,CACvD4f,UAAW,sCACb,CAAC,EACD,YAAK2tC,QAAU55B,GAAS,OAAQ,CAC9B/T,UAAW,wBACXpB,YAAa,KAAKolB,SAAS,MAAM,CACnC,EAAG,CACD,cAAe,MACjB,CAAC,EACDv4B,EAAGM,YAAY,KAAK4hD,OAAO,EACpBliD,CACT,EACAyuB,EAAOszB,qBAAuB,UAAgC,CACxD,CAAC,KAAK9qB,QAAQ+qB,aAAe,KAAK/qB,QAAQ+qB,YAAYG,WAAW,GACnE,KAAKjiD,aAAa,gBAAiB,EAAI,EACvC,KAAKkpB,SAAS,kBAAkB,EAChC,KAAK0Z,YAAY,sCAAsC,IAEvD,KAAK5iC,aAAa,gBAAiB,EAAK,EACxC,KAAKopB,YAAY,kBAAkB,EACnC,KAAKwZ,YAAY,qCAAqC,EAE1D,EACArU,EAAOirB,YAAc,UAAuB,CAC1C,KAAKziB,QAAQ+qB,YAAYI,eAAe,CAC1C,EACA3zB,EAAOyJ,QAAU,UAAmB,CAC9B,KAAKjB,QAAQ+qB,aACf,KAAK59B,IAAI,KAAK6S,QAAQ+qB,YAAa,iBAAkB,KAAKC,4BAA4B,EAExF,KAAKC,QAAU,KACfxD,EAAQjqD,UAAUyjC,QAAQvjC,KAAK,IAAI,CACrC,EACOmtD,CACT,EAAEvD,EAAO,EACTsD,GAAWptD,UAAUqlD,aAAe,uCACpCjjB,GAAWsH,kBAAkB,aAAc0jB,EAAU,EACrD,IAAIQ,GAAQ,SAAgBC,EAAQhqC,EAAKxf,EAAK,CAC5CwpD,OAAAA,EAASj3B,OAAOi3B,CAAM,EACfhwD,KAAKgmB,IAAIxf,EAAKxG,KAAKwG,IAAIwf,EAAK7kB,MAAM6uD,CAAM,EAAIhqC,EAAMgqC,CAAM,CAAC,CAClE,EACIC,GAAyB,SAASxhB,EAAY,CAChD7e,EAAwB,QAAWsgC,EAASzhB,CAAU,EACtD,SAASyhB,EAAQr1B,EAAQx5B,EAAS,CAChC,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAMuvB,iBAAmB,SAAS59C,EAAG,CACnC,OAAOquB,EAAM2rB,gBAAgBh6C,CAAC,CAChC,EACAquB,EAAMwvB,eAAiB,SAAS79C,EAAG,CACjC,OAAOquB,EAAMyvB,cAAc99C,CAAC,CAC9B,EACAquB,EAAM+N,eAAiB,SAASp8B,EAAG,CACjC,OAAOquB,EAAM6I,cAAcl3B,CAAC,CAC9B,EACAquB,EAAMumB,aAAe,SAAS50C,EAAG,CAC/B,OAAOquB,EAAMwmB,YAAY70C,CAAC,CAC5B,EACAquB,EAAM0vB,iBAAmB,SAAS/9C,EAAG,CACnC,OAAOquB,EAAM2vB,gBAAgBh+C,CAAC,CAChC,EACAquB,EAAMsnB,QAAU,SAAS31C,EAAG,CAC1B,OAAOquB,EAAMqnB,OAAO11C,CAAC,CACvB,EACAquB,EAAM4vB,IAAM5vB,EAAMiG,SAASjG,EAAMkE,SAAS2rB,OAAO,EACjD7vB,EAAMriB,SAAS,CAAC,CAACqiB,EAAMkE,SAASvmB,QAAQ,EACxCqiB,EAAMvO,OAAO,EACNuO,CACT,CACA,IAAIzE,EAAS+zB,EAAQ/tD,UACrBg6B,OAAAA,EAAO+W,QAAU,UAAmB,CAClC,OAAO,KAAK0U,QACd,EACAzrB,EAAO9J,OAAS,UAAkB,CAC5B,KAAK6gB,QAAQ,IAGjB,KAAKxU,GAAG,YAAa,KAAKyxB,gBAAgB,EAC1C,KAAKzxB,GAAG,aAAc,KAAKyxB,gBAAgB,EAC3C,KAAKzxB,GAAG,UAAW,KAAKiQ,cAAc,EACtC,KAAKjQ,GAAG,QAAS,KAAKyoB,YAAY,EAClC,KAAKzoB,GAAG,KAAKiG,QAAS,kBAAmB,KAAKsjB,MAAM,EAChD,KAAKyI,aACP,KAAKhyB,GAAG,KAAKiG,QAAS,KAAK+rB,YAAa,KAAKzI,MAAM,EAErD,KAAKjxB,YAAY,UAAU,EAC3B,KAAKppB,aAAa,WAAY,CAAC,EAC/B,KAAKg6C,SAAW,GAClB,EACAzrB,EAAO/J,QAAU,UAAmB,CAClC,GAAK,KAAK8gB,QAAQ,EAGlB,KAAIlV,EAAM,KAAKwyB,IAAIztB,IAAI7D,cACvB,KAAKpN,IAAI,YAAa,KAAKq+B,gBAAgB,EAC3C,KAAKr+B,IAAI,aAAc,KAAKq+B,gBAAgB,EAC5C,KAAKr+B,IAAI,UAAW,KAAK6c,cAAc,EACvC,KAAK7c,IAAI,QAAS,KAAKq1B,YAAY,EACnC,KAAKr1B,IAAI,KAAK6S,QAAS,kBAAmB,KAAKujB,OAAO,EACtD,KAAKp2B,IAAIkM,EAAK,YAAa,KAAKsyB,gBAAgB,EAChD,KAAKx+B,IAAIkM,EAAK,UAAW,KAAKoyB,cAAc,EAC5C,KAAKt+B,IAAIkM,EAAK,YAAa,KAAKsyB,gBAAgB,EAChD,KAAKx+B,IAAIkM,EAAK,WAAY,KAAKoyB,cAAc,EAC7C,KAAK34B,gBAAgB,UAAU,EAC/B,KAAKX,SAAS,UAAU,EACpB,KAAK45B,aACP,KAAK5+B,IAAI,KAAK6S,QAAS,KAAK+rB,YAAa,KAAKzI,MAAM,EAEtD,KAAKL,SAAW,GAClB,EACAzrB,EAAOnG,SAAW,SAAmB1e,EAAMu/B,EAAO3gB,EAAY,CAC5D,OAAI2gB,IAAU,SACZA,EAAQ,CAAC,GAEP3gB,IAAe,SACjBA,EAAa,CAAC,GAEhB2gB,EAAM50B,UAAY40B,EAAM50B,UAAY,cACpC40B,EAAQl4C,GAAO,CACb2wC,SAAU,CACZ,EAAGuH,CAAK,EACR3gB,EAAav3B,GAAO,CAClB,KAAQ,SACR,gBAAiB,EACjB,gBAAiB,EACjB,gBAAiB,IACjB,SAAY,CACd,EAAGu3B,CAAU,EACNuY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAMiV,EAAMu/B,EAAO3gB,CAAU,CACzE,EACAiG,EAAOowB,gBAAkB,SAAyB5zB,EAAQ,CACxD,IAAIqF,EAAM,KAAKwyB,IAAIztB,IAAI7D,cACnBvG,EAAOrhB,OAAS,aAClBqhB,EAAO0E,eAAe,EAEpB1E,EAAOrhB,OAAS,cAAgB,CAAC+c,IACnCsE,EAAO0E,eAAe,EAExBpF,GAAmB,EACnB,KAAKnB,SAAS,aAAa,EAC3B,KAAKkI,QAAQ,cAAc,EAC3B,KAAKN,GAAGV,EAAK,YAAa,KAAKsyB,gBAAgB,EAC/C,KAAK5xB,GAAGV,EAAK,UAAW,KAAKoyB,cAAc,EAC3C,KAAK1xB,GAAGV,EAAK,YAAa,KAAKsyB,gBAAgB,EAC/C,KAAK5xB,GAAGV,EAAK,WAAY,KAAKoyB,cAAc,EAC5C,KAAKG,gBAAgB53B,EAAQ,EAAI,CACnC,EACAwD,EAAOo0B,gBAAkB,SAAyB53B,EAAQ,CAC1D,EACAwD,EAAOk0B,cAAgB,UAAyB,CAC9C,IAAIryB,EAAM,KAAKwyB,IAAIztB,IAAI7D,cACvB9G,GAAqB,EACrB,KAAKpB,YAAY,aAAa,EAC9B,KAAKgI,QAAQ,gBAAgB,EAC7B,KAAKlN,IAAIkM,EAAK,YAAa,KAAKsyB,gBAAgB,EAChD,KAAKx+B,IAAIkM,EAAK,UAAW,KAAKoyB,cAAc,EAC5C,KAAKt+B,IAAIkM,EAAK,YAAa,KAAKsyB,gBAAgB,EAChD,KAAKx+B,IAAIkM,EAAK,WAAY,KAAKoyB,cAAc,EAC7C,KAAKnI,OAAO,CACd,EACA9rB,EAAO8rB,OAAS,UAAkB,CAChC,IAAI9lB,EAAS,KACb,GAAI,GAAC,KAAKY,KAAO,CAAC,KAAKytB,KAGvB,KAAIG,EAAW,KAAKC,YAAY,EAChC,OAAID,IAAa,KAAKE,YAGtB,KAAKA,UAAYF,EACjB,KAAKtlB,2BAA2B,gBAAiB,UAAW,CAC1D,IAAIylB,EAAU3uB,EAAO5jB,SAAS,EAAI,SAAW,QAC7C4jB,EAAOquB,IAAI9iD,GAAG,EAAEG,MAAMijD,CAAO,GAAKH,EAAW,KAAKvhD,QAAQ,CAAC,EAAI,GACjE,CAAC,GACMuhD,EACT,EACAx0B,EAAOy0B,YAAc,UAAuB,CAC1C,OAAO73B,OAAOg3B,GAAM,KAAKgB,WAAW,EAAG,EAAG,CAAC,EAAE3hD,QAAQ,CAAC,CAAC,CACzD,EACA+sB,EAAO60B,kBAAoB,SAA2Br4B,EAAQ,CAC5D,IAAI7qB,EAAW4qB,GAAoB,KAAKqK,IAAKpK,CAAM,EACnD,OAAI,KAAKpa,SAAS,EACTzQ,EAASmY,EAEXnY,EAASoC,CAClB,EACAisB,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CAChDjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,MAAM,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,MAAM,GACjHA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKqzB,SAAS,GACLvhC,EAAiB,QAAWjc,WAAWklB,EAAQ,OAAO,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,IAAI,GACvHA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKszB,YAAY,GAEjBziB,EAAWtsC,UAAUsnC,cAAcpnC,KAAK,KAAMs2B,CAAM,CAExD,EACAwD,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChDA,EAAOiF,gBAAgB,EACvBjF,EAAO0E,eAAe,CACxB,EACAlB,EAAO5d,SAAW,SAAkB4yC,EAAM,CACxC,GAAIA,IAAS,OACX,OAAO,KAAKC,WAAa,GAE3B,KAAKA,UAAY,CAAC,CAACD,EACf,KAAKC,UACP,KAAKt6B,SAAS,qBAAqB,EAEnC,KAAKA,SAAS,uBAAuB,CAEzC,EACOo5B,CACT,EAAE3rB,EAAU,EACZA,GAAWsH,kBAAkB,SAAUokB,EAAM,EAC7C,IAAIoB,GAAa,SAAqBtxD,EAAMgf,EAAK,CAC/C,OAAOgxC,GAAMhwD,EAAOgf,EAAM,IAAK,EAAG,GAAG,EAAE3P,QAAQ,CAAC,EAAI,GACtD,EACIkiD,GAAkC,SAAS7iB,EAAY,CACzD7e,EAAwB,QAAW2hC,EAAkB9iB,CAAU,EAC/D,SAAS8iB,EAAiB12B,EAAQx5B,EAAS,CACzC,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAM4wB,SAAW,CAAA,EACjB5wB,EAAMlC,GAAG7D,EAAQ,WAAY,SAAStoB,EAAG,CACvC,OAAOquB,EAAMqnB,OAAO11C,CAAC,CACvB,CAAC,EACMquB,CACT,CACA,IAAIzE,EAASo1B,EAAiBpvD,UAC9Bg6B,OAAAA,EAAOnG,SAAW,UAAsB,CACtC,IAAItoB,EAAK+gC,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACvD4f,UAAW,mBACb,CAAC,EACG/S,EAAU8mB,GAAS,OAAQ,CAC7B/T,UAAW,kBACb,CAAC,EACGwvC,EAAaz7B,GAAS,OAAQ,CAChCnV,YAAa,KAAKolB,SAAS,QAAQ,CACrC,CAAC,EACGyrB,EAAYliC,EAAkB,QAAWrN,eAAe,IAAI,EAChE,YAAKwvC,cAAgB37B,GAAS,OAAQ,CACpC/T,UAAW,qCACXpB,YAAa,IACf,CAAC,EACDnT,EAAGM,YAAYkB,CAAO,EACtBA,EAAQlB,YAAYyjD,CAAU,EAC9BviD,EAAQlB,YAAY0jD,CAAS,EAC7BxiD,EAAQlB,YAAY,KAAK2jD,aAAa,EAC/BjkD,CACT,EACAyuB,EAAOyJ,QAAU,UAAmB,CAClC,KAAK4rB,SAAW,KAChB,KAAKG,cAAgB,KACrBljB,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAO8rB,OAAS,SAAgBtvB,EAAQ,CACtC,IAAIwJ,EAAS,KACb,KAAKkJ,2BAA2B,yBAA0B,UAAW,CACnE,IAAIqkB,EAAcvtB,EAAOwC,QAAQ+qB,YAC7BziB,EAAW9K,EAAOwC,QAAQsI,SAAS,EACnCC,EAAWwiB,GAAeA,EAAYkC,OAAO,EAAIlC,EAAYmC,YAAY,EAAI1vB,EAAOwC,QAAQuI,SAAS,EACrG4kB,EAAc3vB,EAAOwC,QAAQmtB,YAAY,EACzCnrB,EAAWxE,EAAOqvB,SAClBr0C,EAAUk0C,GAAWS,EAAa5kB,CAAQ,EAC1C/K,EAAO4vB,WAAa50C,IACtBglB,EAAOY,IAAIl1B,MAAMvH,MAAQ6W,EACzB0D,GAAYshB,EAAOwvB,cAAex0C,CAAO,EACzCglB,EAAO4vB,SAAW50C,GAEpB,QAAS0F,EAAK,EAAGA,EAAKoqB,EAAShsC,OAAQ4hB,IAAM,CAC3C,IAAIjE,GAAQquB,EAASruB,MAAMiE,CAAE,EACzB9D,GAAMkuB,EAASluB,IAAI8D,CAAE,EACrBmvC,GAAOrrB,EAAS9jB,CAAE,EACjBmvC,KACHA,GAAO7vB,EAAOY,IAAI/0B,YAAYgoB,GAAS,CAAC,EACxC2Q,EAAS9jB,CAAE,EAAImvC,IAEbA,EAAAA,GAAKC,QAAQrzC,QAAUA,IAASozC,GAAKC,QAAQlzC,MAAQA,MAGzDizC,GAAKC,QAAQrzC,MAAQA,GACrBozC,GAAKC,QAAQlzC,IAAMA,GACnBizC,GAAKnkD,MAAME,KAAOsjD,GAAWzyC,GAAOkzC,CAAW,EAC/CE,GAAKnkD,MAAMvH,MAAQ+qD,GAAWtyC,GAAMH,GAAOkzC,CAAW,EACxD,CACA,QAASle,GAAMjN,EAAS1lC,OAAQ2yC,GAAM3G,EAAShsC,OAAQ2yC,KACrDzR,EAAOY,IAAI50B,YAAYw4B,EAASiN,GAAM,CAAC,CAAC,EAE1CjN,EAAS1lC,OAASgsC,EAAShsC,MAC7B,CAAC,CACH,EACOswD,CACT,EAAEhtB,EAAU,EACZA,GAAWsH,kBAAkB,kBAAmBylB,EAAe,EAC/D,IAAIY,GAA+B,SAASzjB,EAAY,CACtD7e,EAAwB,QAAWuiC,EAAc1jB,CAAU,EAC3D,SAAS0jB,EAAat3B,EAAQx5B,EAAS,CACrC,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAMqnB,OAASpoB,GAASvtB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAMqnB,MAAM,EAAGvoB,EAAuB,EAC/GkB,CACT,CACA,IAAIzE,EAASg2B,EAAahwD,UAC1Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,kBACb,EAAG,CACD,cAAe,MACjB,CAAC,CACH,EACAka,EAAO8rB,OAAS,SAAgBmK,EAAaC,EAAcl8B,EAAS,CAClE,IAAIm8B,EAAch6B,GAAa,KAAKyK,GAAG,EACnCwvB,EAAaltC,GAAsB,KAAKsf,QAAQj3B,GAAG,CAAC,EACpD8kD,EAAiBJ,EAAY9rD,MAAQ+rD,EACzC,GAAI,GAACE,GAAc,CAACD,GAGpB,KAAIG,EAAmBL,EAAYrkD,KAAOwkD,EAAWxkD,KAAOykD,EACxDE,EAAoBN,EAAY9rD,MAAQksD,GAAkBD,EAAWvzC,MAAQozC,EAAYpzC,OACzF2zC,EAAgBL,EAAYhsD,MAAQ,EACpCmsD,EAAmBE,EACrBA,GAAiBA,EAAgBF,EACxBC,EAAoBC,IAC7BA,EAAgBD,GAEdC,EAAgB,EAClBA,EAAgB,EACPA,EAAgBL,EAAYhsD,QACrCqsD,EAAgBL,EAAYhsD,OAE9BqsD,EAAgB3yD,KAAK+B,MAAM4wD,CAAa,EACxC,KAAK5vB,IAAIl1B,MAAMmR,MAAQ,IAAM2zC,EAAgB,KAC7C,KAAKC,MAAMz8B,CAAO,EACpB,EACAgG,EAAOy2B,MAAQ,SAAez8B,EAAS,CACrCtV,GAAY,KAAKkiB,IAAK5M,CAAO,CAC/B,EACAgG,EAAO02B,WAAa,SAAoBT,EAAaC,EAActyD,EAAM4/C,EAAI,CAC3E,IAAIxd,EAAS,KACb,KAAKkJ,2BAA2B,yBAA0B,UAAW,CACnE,IAAIlV,EACA+W,EAAW/K,EAAOwC,QAAQuI,SAAS,EACvC,GAAI/K,EAAOwC,QAAQ+qB,aAAevtB,EAAOwC,QAAQ+qB,YAAYkC,OAAO,EAAG,CACrE,IAAIkB,EAAa3wB,EAAOwC,QAAQ+qB,YAAYoD,WAAW,EACnDC,EAAgBD,EAAaT,EAAeS,EAChD38B,GAAW48B,EAAgB,EAAI,GAAK,KAAOlF,GAAWkF,EAAeD,CAAU,CACjF,MACE38B,EAAU03B,GAAW9tD,EAAMmtC,CAAQ,EAErC/K,EAAO8lB,OAAOmK,EAAaC,EAAcl8B,CAAO,EAC5CwpB,GACFA,EAAG,CAEP,CAAC,CACH,EACOwS,CACT,EAAE5tB,EAAU,EACZA,GAAWsH,kBAAkB,cAAeqmB,EAAY,EACxD,IAAIc,GAAmC,SAASvkB,EAAY,CAC1D7e,EAAwB,QAAWqjC,EAAkBxkB,CAAU,EAC/D,SAASwkB,EAAiBp4B,EAAQx5B,EAAS,CACzC,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAMqnB,OAASpoB,GAASvtB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAMqnB,MAAM,EAAGvoB,EAAuB,EAC/GkB,CACT,CACA,IAAIzE,EAAS82B,EAAiB9wD,UAC9Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,kCACb,EAAG,CACD,cAAe,MACjB,CAAC,CACH,EACAka,EAAO8rB,OAAS,SAAgBmK,EAAaC,EAAc,CACzD,IAAIa,EAAc,KAAKrsB,SAAS,aAAa,EAC7C,GAAKqsB,EAGL,KAAInzD,EAAO,KAAK4kC,QAAQyZ,UAAU,EAAI,KAAKzZ,QAAQ+pB,SAAS,EAAEnV,YAAc,KAAK5U,QAAQ4U,YAAY,EACrG2Z,EAAYL,WAAWT,EAAaC,EAActyD,CAAI,EACxD,EACOkzD,CACT,EAAE1uB,EAAU,EACZyuB,GAAiB7wD,UAAU2iC,SAAW,CACpC6B,SAAU,CAAA,CACZ,EACI,CAAC3R,GAAU,CAAClB,IACdk/B,GAAiB7wD,UAAU2iC,SAAS6B,SAASj8B,KAAK,aAAa,EAEjE65B,GAAWsH,kBAAkB,kBAAmBmnB,EAAgB,EAChE,IAAIG,GAAmC,SAAS1kB,EAAY,CAC1D7e,EAAwB,QAAWwjC,EAAmB3kB,CAAU,EAChE,SAAS2kB,EAAkBv4B,EAAQx5B,EAAS,CAC1C,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAMqnB,OAASpoB,GAASvtB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAMqnB,MAAM,EAAGvoB,EAAuB,EAC/GkB,CACT,CACA,IAAIzE,EAASi3B,EAAkBjxD,UAC/Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,mBACb,CAAC,CACH,EACAka,EAAO8rB,OAAS,SAAgBmK,EAAaC,EAAc,CACzD,IAAIlwB,EAAS,KACTpiC,EAAOsyD,EAAe,KAAK1tB,QAAQuI,SAAS,EAChD,KAAKrG,SAAS,aAAa,EAAEgsB,WAAWT,EAAaC,EAActyD,EAAM,UAAW,CAClFoiC,EAAOY,IAAIl1B,MAAME,KAAOqkD,EAAY9rD,MAAQ+rD,EAAe,IAC7D,CAAC,CACH,EACOe,CACT,EAAE7uB,EAAU,EACZ4uB,GAAiBhxD,UAAU2iC,SAAW,CACpC6B,SAAU,CAAC,aAAa,CAC1B,EACApC,GAAWsH,kBAAkB,mBAAoBsnB,EAAgB,EACjE,IAAIE,GAAe,EACfC,GAAsB,GACtBC,GAA0B,SAASC,EAAS,CAC9C5jC,EAAwB,QAAW6jC,EAAUD,CAAO,EACpD,SAASC,EAAS54B,EAAQx5B,EAAS,CACjC,IAAIu/B,EACJA,OAAAA,EAAQ4yB,EAAQnxD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cu/B,EAAM8yB,kBAAkB,EACjB9yB,CACT,CACA,IAAIzE,EAASs3B,EAAStxD,UACtBg6B,OAAAA,EAAOu3B,kBAAoB,UAA6B,CACtD,IAAIvxB,EAAS,KACb,KAAK+lB,QAAU51C,GAAK,KAAM,KAAK21C,MAAM,EACrC,KAAKA,OAASpoB,GAAS,KAAKqoB,QAASxoB,EAAuB,EAC5D,KAAKhB,GAAG,KAAKiG,QAAS,CAAC,QAAS,iBAAkB,YAAY,EAAG,KAAKsjB,MAAM,EACxE,KAAKtjB,QAAQ+qB,aACf,KAAKhxB,GAAG,KAAKiG,QAAQ+qB,YAAa,iBAAkB,KAAKzH,MAAM,EAEjE,KAAK0L,eAAiB,KACtB,KAAKC,uBAAyB,SAASrhD,EAAG,CACxC,OAAO4vB,EAAO0xB,gBAAgBthD,CAAC,CACjC,EACA,KAAKuhD,wBAA0B,SAASvhD,EAAG,CACzC,OAAO4vB,EAAO4xB,iBAAiBxhD,CAAC,CAClC,EACA,KAAKmsB,GAAG,KAAKiG,QAAS,CAAC,SAAS,EAAG,KAAKivB,sBAAsB,EAC9D,KAAKl1B,GAAG,KAAKiG,QAAS,CAAC,QAAS,QAAS,SAAS,EAAG,KAAKmvB,uBAAuB,EAC7E,WAAYtkC,EAAkB,SAAc,oBAAqBA,EAAkB,SACrF,KAAKkP,GAAGlP,EAAkB,QAAY,mBAAoB,KAAKwkC,iBAAiB,CAEpF,EACA73B,EAAO63B,kBAAoB,SAA2BzhD,EAAG,CACnDid,EAAkB,QAAWykC,kBAAoB,UACnD,KAAK1oB,0BAA0B,gBAAgB,EAC/C,KAAKA,0BAA0B,eAAe,EAC9C,KAAKwoB,iBAAiBxhD,CAAC,IAEnB,CAAC,KAAKoyB,QAAQye,MAAM,GAAK,CAAC,KAAKze,QAAQkL,OAAO,GAChD,KAAKgkB,gBAAgB,EAEvB,KAAK5L,OAAO,EAEhB,EACA9rB,EAAO03B,gBAAkB,UAA2B,CAC9C,KAAKF,iBAGT,KAAKA,eAAiB,KAAK/oB,YAAY,KAAKqd,OAAQvoB,EAAuB,EAC7E,EACAvD,EAAO43B,iBAAmB,SAA0BxhD,EAAG,CACjD,KAAKoyB,QAAQ+qB,aAAe,KAAK/qB,QAAQ+qB,YAAYkC,OAAO,GAAKr/C,GAAKA,EAAE+E,OAAS,SAGhF,KAAKq8C,iBAGV,KAAKhpB,cAAc,KAAKgpB,cAAc,EACtC,KAAKA,eAAiB,KACxB,EACAx3B,EAAOnG,SAAW,UAAqB,CACrC,OAAOw9B,EAAQrxD,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CAClD4f,UAAW,qBACb,EAAG,CACD,aAAc,KAAKgkB,SAAS,cAAc,CAC5C,CAAC,CACH,EACA9J,EAAO8rB,OAAS,SAAgBtvB,EAAQ,CACtC,IAAI2J,EAAS,KACb,GAAI9S,EAAkB,QAAWykC,kBAAoB,SAGrD,KAAI92C,EAAUq2C,EAAQrxD,UAAU8lD,OAAO5lD,KAAK,IAAI,EAChD,YAAKgpC,2BAA2B,iBAAkB,UAAW,CAC3D,IAAIkO,EAAcjX,EAAOqC,QAAQye,MAAM,EAAI9gB,EAAOqC,QAAQuI,SAAS,EAAI5K,EAAO4xB,gBAAgB,EAC1FxE,EAAcptB,EAAOqC,QAAQ+qB,YAC7BxiB,EAAW5K,EAAOqC,QAAQuI,SAAS,EACnCwiB,GAAeA,EAAYkC,OAAO,IACpC1kB,EAAW5K,EAAOqC,QAAQ+qB,YAAYyE,gBAAgB,GAEpD7xB,EAAOyvB,WAAa50C,IACtBmlB,EAAOS,IAAIn1B,aAAa,iBAAkBuP,EAAU,KAAK/N,QAAQ,CAAC,CAAC,EACnEkzB,EAAOyvB,SAAW50C,IAEhBmlB,EAAO8xB,eAAiB7a,GAAejX,EAAOib,YAAcrQ,KAC9D5K,EAAOS,IAAIn1B,aAAa,iBAAkB00B,EAAO2D,SAAS,oDAAqD,CAAC4nB,GAAWtU,EAAarM,CAAQ,EAAG2gB,GAAW3gB,EAAUA,CAAQ,CAAC,EAAG,YAAY,CAAC,EACjM5K,EAAO8xB,aAAe7a,EACtBjX,EAAOib,UAAYrQ,GAEjB5K,EAAOkuB,KACTluB,EAAOkuB,IAAIvI,OAAO5iC,GAAsBid,EAAO50B,GAAG,CAAC,EAAG40B,EAAOsuB,YAAY,CAAC,CAE9E,CAAC,EACMzzC,EACT,EACAgf,EAAOk4B,UAAY,SAAmB/a,EAAI,CACpC,KAAK3U,QAAQ+qB,aAAe,KAAK/qB,QAAQ+qB,YAAYkC,OAAO,GAC9D,KAAKjtB,QAAQ+qB,YAAY4E,mBAAmB,EAE9C,KAAK3vB,QAAQ4U,YAAYD,CAAE,CAC7B,EACAnd,EAAO+3B,gBAAkB,UAA2B,CAClD,OAAO,KAAKvvB,QAAQyZ,UAAU,EAAI,KAAKzZ,QAAQ+pB,SAAS,EAAEnV,YAAc,KAAK5U,QAAQ4U,YAAY,CACnG,EACApd,EAAO40B,WAAa,UAAsB,CACxC,IAAIxX,EAAc,KAAK2a,gBAAgB,EACnC/2C,EACAuyC,EAAc,KAAK/qB,QAAQ+qB,YAC/B,OAAIA,GAAeA,EAAYkC,OAAO,GACpCz0C,GAAWo8B,EAAcmW,EAAY6E,cAAc,GAAK7E,EAAYoD,WAAW,EAC3EpD,EAAYG,WAAW,IACzB1yC,EAAU,IAGZA,EAAUo8B,EAAc,KAAK5U,QAAQuI,SAAS,EAEzC/vB,CACT,EACAgf,EAAOowB,gBAAkB,SAAyB5zB,EAAQ,CACnDkB,GAAkBlB,CAAM,IAG7BA,EAAOiF,gBAAgB,EACvB,KAAK42B,gBAAkB,CAAC,KAAK7vB,QAAQkL,OAAO,EAC5C,KAAKlL,QAAQoL,MAAM,EACnByjB,EAAQrxD,UAAUoqD,gBAAgBlqD,KAAK,KAAMs2B,CAAM,EACrD,EACAwD,EAAOo0B,gBAAkB,SAAyB53B,EAAQ87B,EAAW,CAInE,GAHIA,IAAc,SAChBA,EAAY,IAEV,EAAC56B,GAAkBlB,CAAM,EAG7B,CAAI,CAAC87B,GAAa,CAAC,KAAK9vB,QAAQyZ,UAAU,GACxC,KAAKzZ,QAAQyZ,UAAU,EAAI,EAE7B,IAAIsW,EACAC,EAAW,KAAK3D,kBAAkBr4B,CAAM,EACxC+2B,EAAc,KAAK/qB,QAAQ+qB,YAC/B,GAAI,CAACA,GAAe,CAACA,EAAYkC,OAAO,EACtC8C,EAAUC,EAAW,KAAKhwB,QAAQuI,SAAS,EACvCwnB,IAAY,KAAK/vB,QAAQuI,SAAS,IACpCwnB,EAAUA,EAAU,QAEjB,CACL,GAAIC,GAAY,IAAM,CACpBjF,EAAYI,eAAe,EAC3B,MACF,CACA,IAAIyE,EAAgB7E,EAAY6E,cAAc,EAC1C1C,EAAcnC,EAAYyE,gBAAgB,EAQ9C,GAPAO,EAAUH,EAAgBI,EAAWjF,EAAYoD,WAAW,EACxD4B,GAAW7C,IACb6C,EAAU7C,GAER6C,GAAWH,IACbG,EAAUH,EAAgB,IAExBG,IAAYlH,IACd,MAEJ,CACA,KAAK6G,UAAUK,CAAO,EACxB,EACAv4B,EAAO9J,OAAS,UAAkB,CAChCmhC,EAAQrxD,UAAUkwB,OAAOhwB,KAAK,IAAI,EAClC,IAAIuyD,EAAmB,KAAK/tB,SAAS,kBAAkB,EAClD+tB,GAGLA,EAAiBpsB,KAAK,CACxB,EACArM,EAAO/J,QAAU,UAAmB,CAClCohC,EAAQrxD,UAAUiwB,QAAQ/vB,KAAK,IAAI,EACnC,IAAIuyD,EAAmB,KAAK/tB,SAAS,kBAAkB,EAClD+tB,GAGLA,EAAiBnsB,KAAK,CACxB,EACAtM,EAAOk0B,cAAgB,SAAuB13B,EAAQ,CACpD66B,EAAQrxD,UAAUkuD,cAAchuD,KAAK,KAAMs2B,CAAM,EAC7CA,GACFA,EAAOiF,gBAAgB,EAEzB,KAAK+G,QAAQyZ,UAAU,EAAK,EAC5B,KAAKzZ,QAAQ3F,QAAQ,CACnB1nB,KAAM,aACNjQ,OAAQ,KACRs2C,kBAAmB,EACrB,CAAC,EACG,KAAK6W,gBACP/mB,GAAe,KAAK9I,QAAQD,KAAK,CAAC,EAElC,KAAKwjB,QAAQ,CAEjB,EACA/rB,EAAO+0B,YAAc,UAAuB,CAC1C,KAAKmD,UAAU,KAAK1vB,QAAQ4U,YAAY,EAAI8Z,EAAY,CAC1D,EACAl3B,EAAO80B,SAAW,UAAoB,CACpC,KAAKoD,UAAU,KAAK1vB,QAAQ4U,YAAY,EAAI8Z,EAAY,CAC1D,EACAl3B,EAAO04B,aAAe,SAAsBl8B,EAAQ,CAC9C,KAAKgM,QAAQkL,OAAO,EACtB,KAAKlL,QAAQD,KAAK,EAElB,KAAKC,QAAQoL,MAAM,CAEvB,EACA5T,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CACpD,IAAI+2B,EAAc,KAAK/qB,QAAQ+qB,YAC/B,GAAIhgC,EAAiB,QAAWjc,WAAWklB,EAAQ,OAAO,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,OAAO,EACnHA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKi3B,aAAal8B,CAAM,UACfjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,MAAM,EAC9DA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKy2B,UAAU,CAAC,UACP3kC,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,EAC7DA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACnB8xB,GAAeA,EAAYkC,OAAO,EACpC,KAAKyC,UAAU3E,EAAYyE,gBAAgB,CAAC,EAE5C,KAAKE,UAAU,KAAK1vB,QAAQuI,SAAS,CAAC,UAE/B,UAAU19B,KAAKkgB,EAAiB,QAAWiJ,CAAM,CAAC,EAAG,CAC9DA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,IAAIk3B,GAAgBplC,EAAiB,QAAWrc,MAAMqc,EAAiB,QAAWiJ,CAAM,CAAC,EAAIjJ,EAAiB,QAAWrc,MAAM,CAAG,GAAK,GAAK,IACxIq8C,GAAeA,EAAYkC,OAAO,EACpC,KAAKyC,UAAU3E,EAAY6E,cAAc,EAAI7E,EAAYoD,WAAW,EAAIgC,CAAY,EAEpF,KAAKT,UAAU,KAAK1vB,QAAQuI,SAAS,EAAI4nB,CAAY,CAEzD,MAAWplC,EAAiB,QAAWjc,WAAWklB,EAAQ,MAAM,GAC9DA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKy2B,UAAU,KAAK1vB,QAAQ4U,YAAY,EAAI8Z,GAAeC,EAAmB,GACrE5jC,EAAiB,QAAWjc,WAAWklB,EAAQ,MAAM,GAC9DA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKy2B,UAAU,KAAK1vB,QAAQ4U,YAAY,EAAI8Z,GAAeC,EAAmB,GAE9EE,EAAQrxD,UAAUsnC,cAAcpnC,KAAK,KAAMs2B,CAAM,CAErD,EACAwD,EAAOyJ,QAAU,UAAmB,CAClC,KAAKmuB,iBAAiB,EACtB,KAAKjiC,IAAI,KAAK6S,QAAS,CAAC,QAAS,iBAAkB,YAAY,EAAG,KAAKsjB,MAAM,EACzE,KAAKtjB,QAAQ+qB,aACf,KAAK59B,IAAI,KAAK6S,QAAQ+qB,YAAa,iBAAkB,KAAKzH,MAAM,EAElE,KAAKn2B,IAAI,KAAK6S,QAAS,CAAC,SAAS,EAAG,KAAKivB,sBAAsB,EAC/D,KAAK9hC,IAAI,KAAK6S,QAAS,CAAC,QAAS,QAAS,SAAS,EAAG,KAAKmvB,uBAAuB,EAC9E,WAAYtkC,EAAkB,SAAc,oBAAqBA,EAAkB,SACrF,KAAKsC,IAAItC,EAAkB,QAAY,mBAAoB,KAAKwkC,iBAAiB,EAEnFR,EAAQrxD,UAAUyjC,QAAQvjC,KAAK,IAAI,CACrC,EACOoxD,CACT,EAAExD,EAAM,EACRsD,GAAQpxD,UAAU2iC,SAAW,CAC3B6B,SAAU,CAAC,kBAAmB,iBAAiB,EAC/C8pB,QAAS,iBACX,EACI,CAACz7B,GAAU,CAAClB,IACdy/B,GAAQpxD,UAAU2iC,SAAS6B,SAAStW,OAAO,EAAG,EAAG,kBAAkB,EAErEkU,GAAWsH,kBAAkB,UAAW0nB,EAAO,EAC/C,IAAIwB,GAAkC,SAAStmB,EAAY,CACzD7e,EAAwB,QAAWolC,EAAkBvmB,CAAU,EAC/D,SAASumB,EAAiBn6B,EAAQx5B,EAAS,CACzC,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAM2vB,gBAAkB1wB,GAASvtB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAM2vB,eAAe,EAAG7wB,EAAuB,EACxIkB,EAAMq0B,yBAA2Bp1B,GAASvtB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAMs0B,eAAe,EAAGx1B,EAAuB,EACjJkB,EAAMu0B,sBAAwB,SAAS5iD,EAAG,CACxC,OAAOquB,EAAMyvB,cAAc99C,CAAC,CAC9B,EACAquB,EAAMw0B,wBAA0B,SAAS7iD,EAAG,CAC1C,OAAOquB,EAAM2rB,gBAAgBh6C,CAAC,CAChC,EACAquB,EAAMvO,OAAO,EACNuO,CACT,CACA,IAAIzE,EAAS64B,EAAiB7yD,UAC9Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,kCACb,CAAC,CACH,EACAka,EAAOo0B,gBAAkB,SAAyB53B,EAAQ,CACxD,IAAI08B,EAAU,KAAKxuB,SAAS,SAAS,EACrC,GAAKwuB,EAGL,KAAIC,EAAkBD,EAAQxuB,SAAS,iBAAiB,EACpD+tB,EAAmBS,EAAQxuB,SAAS,kBAAkB,EAC1D,GAAI,GAACyuB,GAAmB,CAACV,GAGzB,KAAIW,EAAYF,EAAQ3nD,GAAG,EACvB0kD,EAAc95B,GAAai9B,CAAS,EACpClD,EAAe35B,GAAoB68B,EAAW58B,CAAM,EAAEzoB,EAC1DmiD,EAAetC,GAAMsC,EAAc,EAAG,CAAC,EACnCuC,GACFA,EAAiB3M,OAAOmK,EAAaC,CAAY,EAE/CiD,GACFA,EAAgBrN,OAAOmK,EAAaiD,EAAQzE,YAAY,CAAC,GAE7D,EACAz0B,EAAO+4B,gBAAkB,SAAyBv8B,EAAQ,CACxD,IAAI08B,EAAU,KAAKxuB,SAAS,SAAS,EACjCwuB,GACFA,EAAQ9E,gBAAgB53B,CAAM,CAElC,EACAwD,EAAO+W,QAAU,UAAmB,CAClC,OAAO,KAAK0U,QACd,EACAzrB,EAAO/J,QAAU,UAAmB,CAIlC,GAHA,KAAKuU,SAAS,EAAEvjC,QAAQ,SAASozB,EAAO,CACtC,OAAOA,EAAMpE,SAAWoE,EAAMpE,QAAQ,CACxC,CAAC,EACG,EAAC,KAAK8gB,QAAQ,IAGlB,KAAKphB,IAAI,CAAC,YAAa,YAAY,EAAG,KAAKsjC,uBAAuB,EAClE,KAAKtjC,IAAI,KAAKiR,IAAK,YAAa,KAAKwtB,eAAe,EACpD,KAAKiF,6CAA6C,EAClD,KAAK1+B,SAAS,UAAU,EACxB,KAAK8wB,SAAW,GACZ,KAAKjjB,QAAQyZ,UAAU,GAAG,CAC5B,IAAIiX,EAAU,KAAKxuB,SAAS,SAAS,EACrC,KAAKlC,QAAQyZ,UAAU,EAAK,EACxBiX,EAAQb,iBACV/mB,GAAe,KAAK9I,QAAQD,KAAK,CAAC,CAEtC,CACF,EACAvI,EAAO9J,OAAS,UAAkB,CAChC,KAAKsU,SAAS,EAAEvjC,QAAQ,SAASozB,EAAO,CACtC,OAAOA,EAAMnE,QAAUmE,EAAMnE,OAAO,CACtC,CAAC,EACG,MAAK6gB,QAAQ,IAGjB,KAAKxU,GAAG,CAAC,YAAa,YAAY,EAAG,KAAK02B,uBAAuB,EACjE,KAAK12B,GAAG,KAAKqE,IAAK,YAAa,KAAKwtB,eAAe,EACnD,KAAKv5B,YAAY,UAAU,EAC3B,KAAK4wB,SAAW,GAClB,EACAzrB,EAAOq5B,6CAA+C,UAAwD,CAC5G,IAAIx3B,EAAM,KAAK+E,IAAI7D,cACnB,KAAKpN,IAAIkM,EAAK,YAAa,KAAKi3B,wBAAwB,EACxD,KAAKnjC,IAAIkM,EAAK,YAAa,KAAKi3B,wBAAwB,EACxD,KAAKnjC,IAAIkM,EAAK,UAAW,KAAKm3B,qBAAqB,EACnD,KAAKrjC,IAAIkM,EAAK,WAAY,KAAKm3B,qBAAqB,CACtD,EACAh5B,EAAOowB,gBAAkB,SAAyB5zB,EAAQ,CACxD,IAAIqF,EAAM,KAAK+E,IAAI7D,cACfm2B,EAAU,KAAKxuB,SAAS,SAAS,EACjCwuB,GACFA,EAAQ9I,gBAAgB5zB,CAAM,EAEhC,KAAK+F,GAAGV,EAAK,YAAa,KAAKi3B,wBAAwB,EACvD,KAAKv2B,GAAGV,EAAK,YAAa,KAAKi3B,wBAAwB,EACvD,KAAKv2B,GAAGV,EAAK,UAAW,KAAKm3B,qBAAqB,EAClD,KAAKz2B,GAAGV,EAAK,WAAY,KAAKm3B,qBAAqB,CACrD,EACAh5B,EAAOk0B,cAAgB,SAAuB13B,EAAQ,CACpD,IAAI08B,EAAU,KAAKxuB,SAAS,SAAS,EACjCwuB,GACFA,EAAQhF,cAAc13B,CAAM,EAE9B,KAAK68B,6CAA6C,CACpD,EACOR,CACT,EAAEzwB,EAAU,EACZwwB,GAAgB5yD,UAAU2iC,SAAW,CACnC6B,SAAU,CAAC,SAAS,CACtB,EACApC,GAAWsH,kBAAkB,kBAAmBkpB,EAAe,EAC/D,IAAIU,GAAyC,SAASrJ,EAAS,CAC7Dx8B,EAAwB,QAAW8lC,EAAyBtJ,CAAO,EACnE,SAASsJ,EAAwB76B,EAAQx5B,EAAS,CAChD,IAAIu/B,EACJA,OAAAA,EAAQwrB,EAAQ/pD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cu/B,EAAMlC,GAAG7D,EAAQ,CAAC,wBAAyB,uBAAuB,EAAG,SAAStoB,EAAG,CAC/E,OAAOquB,EAAM+0B,6BAA6BpjD,CAAC,CAC7C,CAAC,EACDquB,EAAMlC,GAAG7D,EAAQ,CAAC,iCAAkC,gBAAgB,EAAG,SAAStoB,EAAG,CACjF,OAAOquB,EAAMg1B,oCAAoCrjD,CAAC,CACpD,CAAC,EACDquB,EAAMlC,GAAG7D,EAAQ,CAAC,iBAAkB,sBAAuB,uBAAuB,EAAG,UAAW,CAC9F,IAAIg7B,EAAgBh7B,EAAOi7B,YAAY,EAAEC,UAAU,EAAG,CAAC,IAAM,QACzDF,GAAiBh7B,EAAOm7B,gBAAgB,GAAKn7B,EAAOo7B,cAAc,GAChEp7B,EAAOq7B,qBAAqB,GAC9Br7B,EAAOs7B,qBAAqB,EAE9Bv1B,EAAM6H,KAAK,GAEX7H,EAAM4H,KAAK,CAEf,CAAC,EACD5H,EAAMxO,QAAQ,EACPwO,CACT,CACA,IAAIzE,EAASu5B,EAAwBvzD,UACrCg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,kCAAoCgkB,EAAQjqD,UAAUimC,cAAc/lC,KAAK,IAAI,CACtF,EACA85B,EAAOy5B,oCAAsC,UAA+C,CACtFpmC,EAAkB,QAAW4mC,yBAA2B,KAAKzxB,QAAQ8a,wBAAwB,IAAM,GACrG,KAAKptB,OAAO,EAEZ,KAAKD,QAAQ,CAEjB,EACA+J,EAAOw5B,6BAA+B,SAAsCh9B,EAAQ,CAC9E,KAAKgM,QAAQuxB,qBAAqB,EACpC,KAAK1lB,YAAY,yBAAyB,EAE1C,KAAKA,YAAY,oBAAoB,EAEvC,KAAKolB,oCAAoC,CAC3C,EACAz5B,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAC3C,KAAKgM,QAAQuxB,qBAAqB,EAGrC,KAAKvxB,QAAQwxB,qBAAqB,EAFlC,KAAKxxB,QAAQ2a,wBAAwB,CAIzC,EACOoW,CACT,EAAEzJ,EAAO,EACTwJ,GAAuBtzD,UAAUqlD,aAAe,qBAChDjjB,GAAWsH,kBAAkB,yBAA0B4pB,EAAsB,EAC7E,IAAIY,GAAmC,SAASjK,EAAS,CACvDx8B,EAAwB,QAAW0mC,EAAmBlK,CAAO,EAC7D,SAASkK,EAAkBz7B,EAAQx5B,EAAS,CAC1C,IAAIu/B,EACJA,OAAAA,EAAQwrB,EAAQ/pD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cu/B,EAAMlC,GAAG7D,EAAQ,mBAAoB,SAAStoB,EAAG,CAC/C,OAAOquB,EAAM21B,uBAAuBhkD,CAAC,CACvC,CAAC,EACGid,EAAkB,QAAWqL,EAAO27B,OAAOC,iBAAiB,IAAM,IACpE71B,EAAMxO,QAAQ,EAETwO,CACT,CACA,IAAIzE,EAASm6B,EAAkBn0D,UAC/Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,0BAA4BgkB,EAAQjqD,UAAUimC,cAAc/lC,KAAK,IAAI,CAC9E,EACA85B,EAAOo6B,uBAAyB,SAAgC59B,EAAQ,CAClE,KAAKgM,QAAQ+xB,aAAa,EAC5B,KAAKlmB,YAAY,gBAAgB,EAEjC,KAAKA,YAAY,YAAY,CAEjC,EACArU,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAC3C,KAAKgM,QAAQ+xB,aAAa,EAG7B,KAAK/xB,QAAQgyB,eAAe,EAF5B,KAAKhyB,QAAQiyB,kBAAkB,CAInC,EACON,CACT,EAAErK,EAAO,EACToK,GAAiBl0D,UAAUqlD,aAAe,aAC1CjjB,GAAWsH,kBAAkB,mBAAoBwqB,EAAgB,EACjE,IAAIQ,GAAqB,SAA6BxtC,EAAOwR,EAAQ,CAC/DA,EAAOsd,OAAS,CAACtd,EAAOsd,MAAMuI,uBAChCr3B,EAAMyN,SAAS,YAAY,EAE7BzN,EAAMqV,GAAG7D,EAAQ,YAAa,UAAW,CAClCA,EAAOsd,MAAMuI,sBAGhBr3B,EAAM2N,YAAY,YAAY,EAF9B3N,EAAMyN,SAAS,YAAY,CAI/B,CAAC,CACH,EACIggC,GAA8B,SAASroB,EAAY,CACrD7e,EAAwB,QAAWmnC,EAActoB,CAAU,EAC3D,SAASsoB,GAAe,CACtB,OAAOtoB,EAAW79B,MAAM,KAAM/I,SAAS,GAAK,IAC9C,CACA,IAAIs0B,EAAS46B,EAAa50D,UAC1Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,IAAItoB,EAAK+gC,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACvD4f,UAAW,kBACb,CAAC,EACDvU,OAAAA,EAAGM,YAAYygC,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,OAAQ,CAC9D4f,UAAW,kBACb,CAAC,CAAC,EACKvU,CACT,EACOqpD,CACT,EAAExyB,EAAU,EACZA,GAAWsH,kBAAkB,cAAeirB,EAAW,EACvD,IAAIE,GAAqC,SAASvoB,EAAY,CAC5D7e,EAAwB,QAAWqnC,EAAqBxoB,CAAU,EAClE,SAASwoB,EAAoBp8B,EAAQx5B,EAAS,CAC5C,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAMqnB,OAASpoB,GAASvtB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAMqnB,MAAM,EAAGvoB,EAAuB,EAC/GkB,CACT,CACA,IAAIzE,EAAS86B,EAAoB90D,UACjCg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,oBACb,EAAG,CACD,cAAe,MACjB,CAAC,CACH,EACAka,EAAO8rB,OAAS,SAAgBiP,EAAcC,EAAe54C,EAAU4X,EAAS,CAC9E,GAAI,CAAC5X,EAAU,CACb,IAAI+zC,EAAcjtC,GAAsB,KAAK0d,GAAG,EAC5CwvB,EAAaltC,GAAsB,KAAKsf,QAAQj3B,GAAG,CAAC,EACpD0pD,EAAmBF,EAAa5wD,MAAQ6wD,EAC5C,GAAI,CAAC5E,GAAc,CAACD,EAClB,OAEF,IAAIG,EAAmByE,EAAanpD,KAAOwkD,EAAWxkD,KAAOqpD,EACzD1E,EAAoBwE,EAAa5wD,MAAQ8wD,GAAoB7E,EAAWvzC,MAAQk4C,EAAal4C,OAC7F2zC,GAAgBL,EAAYhsD,MAAQ,EACpCmsD,EAAmBE,GACrBA,IAAiBA,GAAgBF,EACxBC,EAAoBC,KAC7BA,GAAgBD,GAEdC,GAAgB,EAClBA,GAAgB,EACPA,GAAgBL,EAAYhsD,QACrCqsD,GAAgBL,EAAYhsD,OAE9B,KAAKy8B,IAAIl1B,MAAMmR,MAAQ,IAAM2zC,GAAgB,IAC/C,CACA,KAAKC,MAAMz8B,EAAU,GAAG,CAC1B,EACAgG,EAAOy2B,MAAQ,SAAez8B,EAAS,CACrCtV,GAAY,KAAKkiB,IAAK5M,CAAO,CAC/B,EACAgG,EAAOk7B,aAAe,SAAsBH,EAAcC,EAAe54C,EAAU4kC,EAAQxD,EAAI,CAC7F,IAAIxd,EAAS,KACb,KAAKkJ,2BAA2B,kCAAmC,UAAW,CAC5ElJ,EAAO8lB,OAAOiP,EAAcC,EAAe54C,EAAU4kC,EAAO/zC,QAAQ,CAAC,CAAC,EAClEuwC,GACFA,EAAG,CAEP,CAAC,CACH,EACOsX,CACT,EAAE1yB,EAAU,EACZA,GAAWsH,kBAAkB,qBAAsBmrB,EAAkB,EACrE,IAAIM,GAA0C,SAAS7oB,EAAY,CACjE7e,EAAwB,QAAW2nC,EAA0B9oB,CAAU,EACvE,SAAS8oB,EAAyB18B,EAAQx5B,EAAS,CACjD,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAMqnB,OAASpoB,GAASvtB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAMqnB,MAAM,EAAGvoB,EAAuB,EAC/GkB,CACT,CACA,IAAIzE,EAASo7B,EAAyBp1D,UACtCg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,mBACb,CAAC,CACH,EACAka,EAAO8rB,OAAS,SAAgBiP,EAAcC,EAAe54C,EAAU,CACrE,IAAI4jB,EAAS,KACTghB,EAAS,IAAMgU,EACnB,KAAKtwB,SAAS,oBAAoB,EAAEwwB,aAAaH,EAAcC,EAAe54C,EAAU4kC,EAAQ,UAAW,CACrG5kC,EACF4jB,EAAOY,IAAIl1B,MAAMsW,OAAS+yC,EAAa7wD,OAAS8wD,EAAgB,KAEhEh1B,EAAOY,IAAIl1B,MAAME,KAAOmpD,EAAa5wD,MAAQ6wD,EAAgB,IAEjE,CAAC,CACH,EACOI,CACT,EAAEhzB,EAAU,EACZ+yB,GAAwBn1D,UAAU2iC,SAAW,CAC3C6B,SAAU,CAAC,oBAAoB,CACjC,EACApC,GAAWsH,kBAAkB,0BAA2ByrB,EAAuB,EAC/E,IAAIE,GAA4B,SAAShE,EAAS,CAChD5jC,EAAwB,QAAW6nC,EAAYjE,CAAO,EACtD,SAASiE,EAAW58B,EAAQx5B,EAAS,CACnC,IAAIu/B,EACJA,OAAAA,EAAQ4yB,EAAQnxD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cu/B,EAAMlC,GAAG,eAAgB,SAASnsB,EAAG,CACnC,OAAOquB,EAAM82B,kBAAkBnlD,CAAC,CAClC,CAAC,EACDquB,EAAMlC,GAAG7D,EAAQ,eAAgB,SAAStoB,EAAG,CAC3C,OAAOquB,EAAM+2B,qBAAqBplD,CAAC,CACrC,CAAC,EACDsoB,EAAO4J,MAAM,UAAW,CACtB,OAAO7D,EAAM+2B,qBAAqB,CACpC,CAAC,EACM/2B,CACT,CACA,IAAIzE,EAASs7B,EAAWt1D,UACxBg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOw9B,EAAQrxD,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CAClD4f,UAAW,+BACb,EAAG,CACD,aAAc,KAAKgkB,SAAS,cAAc,EAC1C,YAAa,QACf,CAAC,CACH,EACA9J,EAAOowB,gBAAkB,SAAyB5zB,EAAQ,CACnDkB,GAAkBlB,CAAM,GAG7B66B,EAAQrxD,UAAUoqD,gBAAgBlqD,KAAK,KAAMs2B,CAAM,CACrD,EACAwD,EAAOo0B,gBAAkB,SAAyB53B,EAAQ,CACxD,IAAIi/B,EAA0B,KAAK/wB,SAAS,yBAAyB,EACrE,GAAI+wB,EAAyB,CAC3B,IAAIC,EAAc,KAAKnqD,GAAG,EACtBoqD,EAAgBzyC,GAAsBwyC,CAAW,EACjDt5C,EAAW,KAAKA,SAAS,EACzBw5C,EAAiBr/B,GAAoBm/B,EAAal/B,CAAM,EAC5Do/B,EAAiBx5C,EAAWw5C,EAAe9xC,EAAI8xC,EAAe7nD,EAC9D6nD,EAAiBhI,GAAMgI,EAAgB,EAAG,CAAC,EAC3CH,EAAwB3P,OAAO6P,EAAeC,EAAgBx5C,CAAQ,CACxE,CACKsb,GAAkBlB,CAAM,IAG7B,KAAKq/B,WAAW,EAChB,KAAKrzB,QAAQwe,OAAO,KAAK6N,kBAAkBr4B,CAAM,CAAC,EACpD,EACAwD,EAAO67B,WAAa,UAAsB,CACpC,KAAKrzB,QAAQjgC,MAAM,GACrB,KAAKigC,QAAQjgC,MAAM,EAAK,CAE5B,EACAy3B,EAAO40B,WAAa,UAAsB,CACxC,OAAI,KAAKpsB,QAAQjgC,MAAM,EACd,EAEF,KAAKigC,QAAQwe,OAAO,CAC7B,EACAhnB,EAAO+0B,YAAc,UAAuB,CAC1C,KAAK8G,WAAW,EAChB,KAAKrzB,QAAQwe,OAAO,KAAKxe,QAAQwe,OAAO,EAAI,EAAG,CACjD,EACAhnB,EAAO80B,SAAW,UAAoB,CACpC,KAAK+G,WAAW,EAChB,KAAKrzB,QAAQwe,OAAO,KAAKxe,QAAQwe,OAAO,EAAI,EAAG,CACjD,EACAhnB,EAAOw7B,qBAAuB,SAA8Bh/B,EAAQ,CAClE,IAAIs/B,EAAY,KAAKtzB,QAAQjgC,MAAM,EAAI,EAAI,KAAKwzD,oBAAoB,EACpE,KAAKn1B,IAAIn1B,aAAa,gBAAiBqqD,CAAS,EAChD,KAAKl1B,IAAIn1B,aAAa,iBAAkBqqD,EAAY,GAAG,CACzD,EACA97B,EAAO+7B,oBAAsB,UAA+B,CAC1D,OAAOl4D,KAAK+B,MAAM,KAAK4iC,QAAQwe,OAAO,EAAI,GAAG,CAC/C,EACAhnB,EAAOu7B,kBAAoB,UAA6B,CACtD,IAAIv1B,EAAS,KACTg2B,EAAmB,KAAKxzB,QAAQwe,OAAO,EAC3C,KAAK9jB,IAAI,iBAAkB,UAAW,CAChC8C,EAAOwC,QAAQwe,OAAO,IAAM,GAC9BhhB,EAAOwC,QAAQyzB,YAAYD,CAAgB,CAE/C,CAAC,CACH,EACOV,CACT,EAAExH,EAAM,EACRuH,GAAUr1D,UAAU2iC,SAAW,CAC7B6B,SAAU,CAAC,aAAa,EACxB8pB,QAAS,aACX,EACI,CAACz7B,GAAU,CAAClB,IACd0jC,GAAUr1D,UAAU2iC,SAAS6B,SAAStW,OAAO,EAAG,EAAG,yBAAyB,EAE9EmnC,GAAUr1D,UAAUuuD,YAAc,eAClCnsB,GAAWsH,kBAAkB,YAAa2rB,EAAS,EACnD,IAAIa,GAAgC,SAAS5pB,EAAY,CACvD7e,EAAwB,QAAW0oC,EAAgB7pB,CAAU,EAC7D,SAAS6pB,EAAez9B,EAAQx5B,EAAS,CACvC,IAAIu/B,EACJ,OAAIv/B,IAAY,SACdA,EAAU,CAAC,GAEbA,EAAQkd,SAAWld,EAAQkd,UAAY,IACnC,OAAOld,EAAQk3D,UAAc,KAAeplC,GAAQ9xB,EAAQk3D,SAAS,KACvEl3D,EAAQk3D,UAAYl3D,EAAQk3D,WAAa,CAAC,EAC1Cl3D,EAAQk3D,UAAUh6C,SAAWld,EAAQkd,UAEvCqiB,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDw1D,GAAmBlnC,EAAgC,QAAWiR,CAAK,EAAG/F,CAAM,EAC5E+F,EAAM43B,yBAA2B34B,GAASvtB,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAM2vB,eAAe,EAAG7wB,EAAuB,EACjJkB,EAAMu0B,sBAAwB,SAAS5iD,EAAG,CACxC,OAAOquB,EAAMyvB,cAAc99C,CAAC,CAC9B,EACAquB,EAAMlC,GAAG,YAAa,SAASnsB,EAAG,CAChC,OAAOquB,EAAM2rB,gBAAgBh6C,CAAC,CAChC,CAAC,EACDquB,EAAMlC,GAAG,aAAc,SAASnsB,EAAG,CACjC,OAAOquB,EAAM2rB,gBAAgBh6C,CAAC,CAChC,CAAC,EACDquB,EAAMlC,GAAG,YAAa,SAASnsB,EAAG,CAChC,OAAOquB,EAAM2vB,gBAAgBh+C,CAAC,CAChC,CAAC,EACDquB,EAAMlC,GAAGkC,EAAM23B,UAAW,CAAC,QAAS,cAAc,EAAG,UAAW,CAC9D33B,EAAM23B,UAAUzhC,SAAS,mBAAmB,EAC5C8J,EAAM9J,SAAS,mBAAmB,EAClC8J,EAAM5B,QAAQ,cAAc,CAC9B,CAAC,EACD4B,EAAMlC,GAAGkC,EAAM23B,UAAW,CAAC,OAAQ,gBAAgB,EAAG,UAAW,CAC/D33B,EAAM23B,UAAUvhC,YAAY,mBAAmB,EAC/C4J,EAAM5J,YAAY,mBAAmB,EACrC4J,EAAM5B,QAAQ,gBAAgB,CAChC,CAAC,EACM4B,CACT,CACA,IAAIzE,EAASm8B,EAAen2D,UAC5Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,IAAIyiC,EAAmB,wBACvB,OAAI,KAAK3zB,SAASvmB,WAChBk6C,EAAmB,uBAEdhqB,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,kCAAoCw2C,CACjD,CAAC,CACH,EACAt8B,EAAOowB,gBAAkB,SAAyB5zB,EAAQ,CACxD,IAAIqF,EAAM,KAAK+E,IAAI7D,cACnB,KAAKR,GAAGV,EAAK,YAAa,KAAKw6B,wBAAwB,EACvD,KAAK95B,GAAGV,EAAK,YAAa,KAAKw6B,wBAAwB,EACvD,KAAK95B,GAAGV,EAAK,UAAW,KAAKm3B,qBAAqB,EAClD,KAAKz2B,GAAGV,EAAK,WAAY,KAAKm3B,qBAAqB,CACrD,EACAh5B,EAAOk0B,cAAgB,SAAuB13B,EAAQ,CACpD,IAAIqF,EAAM,KAAK+E,IAAI7D,cACnB,KAAKpN,IAAIkM,EAAK,YAAa,KAAKw6B,wBAAwB,EACxD,KAAK1mC,IAAIkM,EAAK,YAAa,KAAKw6B,wBAAwB,EACxD,KAAK1mC,IAAIkM,EAAK,UAAW,KAAKm3B,qBAAqB,EACnD,KAAKrjC,IAAIkM,EAAK,WAAY,KAAKm3B,qBAAqB,CACtD,EACAh5B,EAAOo0B,gBAAkB,SAAyB53B,EAAQ,CACxD,KAAK4/B,UAAUhI,gBAAgB53B,CAAM,CACvC,EACO2/B,CACT,EAAE/zB,EAAU,EACZ8zB,GAAcl2D,UAAU2iC,SAAW,CACjC6B,SAAU,CAAC,WAAW,CACxB,EACApC,GAAWsH,kBAAkB,gBAAiBwsB,EAAa,EAC3D,IAAIK,GAAmB,SAA2BrvC,EAAOwR,EAAQ,CAC3DA,EAAOsd,OAAS,CAACtd,EAAOsd,MAAMwI,qBAChCt3B,EAAMyN,SAAS,YAAY,EAE7BzN,EAAMqV,GAAG7D,EAAQ,YAAa,UAAW,CAClCA,EAAOsd,MAAMwI,oBAGhBt3B,EAAM2N,YAAY,YAAY,EAF9B3N,EAAMyN,SAAS,YAAY,CAI/B,CAAC,CACH,EACI6hC,GAA6B,SAASvM,EAAS,CACjDx8B,EAAwB,QAAWgpC,EAAaxM,CAAO,EACvD,SAASwM,EAAY/9B,EAAQx5B,EAAS,CACpC,IAAIu/B,EACJA,OAAAA,EAAQwrB,EAAQ/pD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cq3D,GAAiB/oC,EAAgC,QAAWiR,CAAK,EAAG/F,CAAM,EAC1E+F,EAAMlC,GAAG7D,EAAQ,CAAC,YAAa,cAAc,EAAG,SAAStoB,EAAG,CAC1D,OAAOquB,EAAMqnB,OAAO11C,CAAC,CACvB,CAAC,EACMquB,CACT,CACA,IAAIzE,EAASy8B,EAAYz2D,UACzBg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,oBAAsBgkB,EAAQjqD,UAAUimC,cAAc/lC,KAAK,IAAI,CACxE,EACA85B,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChD,IAAIkgC,EAAM,KAAKl0B,QAAQwe,OAAO,EAC1B2V,EAAa,KAAKn0B,QAAQyzB,YAAY,EAC1C,GAAIS,IAAQ,EAAG,CACb,IAAIE,EAAcD,EAAa,GAAM,GAAMA,EAC3C,KAAKn0B,QAAQwe,OAAO4V,CAAW,EAC/B,KAAKp0B,QAAQjgC,MAAM,EAAK,CAC1B,MACE,KAAKigC,QAAQjgC,MAAM,MAAKigC,QAAQjgC,MAAM,CAAgB,CAE1D,EACAy3B,EAAO8rB,OAAS,SAAgBtvB,EAAQ,CACtC,KAAKqgC,YAAY,EACjB,KAAKC,mBAAmB,CAC1B,EACA98B,EAAO68B,YAAc,UAAuB,CAC1C,IAAIH,EAAM,KAAKl0B,QAAQwe,OAAO,EAC1B54C,EAAQ,EACRyqB,GAAU,KAAK2P,QAAQwT,OAAS,KAAKxT,QAAQwT,MAAMpV,KACrD,KAAK4B,QAAQjgC,MAAM,KAAKigC,QAAQwT,MAAMpV,IAAIr+B,KAAK,EAE7Cm0D,IAAQ,GAAK,KAAKl0B,QAAQjgC,MAAM,EAClC6F,EAAQ,EACCsuD,EAAM,IACftuD,EAAQ,EACCsuD,EAAM,MACftuD,EAAQ,GAEV,QAASsY,EAAK,EAAGA,EAAK,EAAGA,IACvBmU,GAAY,KAAK+L,IAAK,WAAalgB,CAAE,EAEvCiU,GAAS,KAAKiM,IAAK,WAAax4B,CAAK,CACvC,EACA4xB,EAAO88B,mBAAqB,UAA8B,CACxD,IAAIC,EAAW,KAAKv0B,QAAQjgC,MAAM,GAAK,KAAKigC,QAAQwe,OAAO,IAAM,EAC7D51C,EAAO2rD,EAAW,SAAW,OAC7B,KAAK1oB,YAAY,IAAMjjC,GACzB,KAAKijC,YAAYjjC,CAAI,CAEzB,EACOqrD,CACT,EAAE3M,EAAO,EACT0M,GAAWx2D,UAAUqlD,aAAe,OACpCjjB,GAAWsH,kBAAkB,aAAc8sB,EAAU,EACrD,IAAIQ,GAA8B,SAAS1qB,EAAY,CACrD7e,EAAwB,QAAWwpC,EAAc3qB,CAAU,EAC3D,SAAS2qB,EAAav+B,EAAQx5B,EAAS,CACrC,IAAIu/B,EACJ,OAAIv/B,IAAY,SACdA,EAAU,CAAC,GAET,OAAOA,EAAQg4D,OAAW,IAC5Bh4D,EAAQg4D,OAASh4D,EAAQg4D,OAEzBh4D,EAAQg4D,OAAS,IAEf,OAAOh4D,EAAQi4D,cAAkB,KAAenmC,GAAQ9xB,EAAQi4D,aAAa,KAC/Ej4D,EAAQi4D,cAAgBj4D,EAAQi4D,eAAiB,CAAC,EAClDj4D,EAAQi4D,cAAc/6C,SAAW,CAACld,EAAQg4D,QAE5Cz4B,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAM24B,uBAAyB,SAAShnD,EAAG,CACzC,OAAOquB,EAAM8I,eAAen3B,CAAC,CAC/B,EACAquB,EAAMlC,GAAG7D,EAAQ,CAAC,WAAW,EAAG,SAAStoB,EAAG,CAC1C,OAAOquB,EAAM44B,kBAAkBjnD,CAAC,CAClC,CAAC,EACDquB,EAAMlC,GAAGkC,EAAM64B,WAAY,QAAS,SAASlnD,EAAG,CAC9C,OAAOquB,EAAM8I,eAAen3B,CAAC,CAC/B,CAAC,EACDquB,EAAMlC,GAAGkC,EAAM04B,cAAe,QAAS,SAAS/mD,EAAG,CACjD,OAAOquB,EAAM84B,yBAAyBnnD,CAAC,CACzC,CAAC,EACDquB,EAAMlC,GAAG,UAAW,SAASnsB,EAAG,CAC9B,OAAOquB,EAAM8I,eAAen3B,CAAC,CAC/B,CAAC,EACDquB,EAAMlC,GAAG,YAAa,SAASnsB,EAAG,CAChC,OAAOquB,EAAMomB,gBAAgBz0C,CAAC,CAChC,CAAC,EACDquB,EAAMlC,GAAG,WAAY,SAASnsB,EAAG,CAC/B,OAAOquB,EAAMsmB,eAAe30C,CAAC,CAC/B,CAAC,EACDquB,EAAMlC,GAAGkC,EAAM04B,cAAe,CAAC,cAAc,EAAG14B,EAAM+4B,aAAa,EACnE/4B,EAAMlC,GAAGkC,EAAM04B,cAAe,CAAC,gBAAgB,EAAG14B,EAAMg5B,eAAe,EAChEh5B,CACT,CACA,IAAIzE,EAASi9B,EAAaj3D,UAC1Bg6B,OAAAA,EAAOw9B,cAAgB,UAAyB,CAC9C,KAAK7iC,SAAS,mBAAmB,CACnC,EACAqF,EAAOy9B,gBAAkB,UAA2B,CAClD,KAAK5iC,YAAY,mBAAmB,CACtC,EACAmF,EAAOq9B,kBAAoB,UAA6B,CAClD,KAAKF,cAAc5iC,SAAS,YAAY,GAAK,KAAK+iC,WAAW/iC,SAAS,YAAY,GACpF,KAAKI,SAAS,YAAY,EAExB,KAAKwiC,cAAc5iC,SAAS,YAAY,GAAK,CAAC,KAAK+iC,WAAW/iC,SAAS,YAAY,GACrF,KAAKI,SAAS,sBAAsB,CAExC,EACAqF,EAAOnG,SAAW,UAAqB,CACrC,IAAIyiC,EAAmB,8BACvB,OAAK,KAAK3zB,SAASu0B,SACjBZ,EAAmB,6BAEdhqB,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,gCAAkCw2C,CAC/C,CAAC,CACH,EACAt8B,EAAOyJ,QAAU,UAAmB,CAClC,KAAKshB,eAAe,EACpBzY,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAOu9B,yBAA2B,SAAkC/gC,EAAQ,CACtEjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GACtD,KAAK8gC,WAAWvhC,MAAM,CAE1B,EACAiE,EAAO6qB,gBAAkB,SAAyBruB,EAAQ,CACxD,KAAK7B,SAAS,WAAW,EACzB4H,GAAGlP,EAAkB,QAAY,QAAS,KAAK+pC,sBAAsB,CACvE,EACAp9B,EAAO+qB,eAAiB,SAAwBvuB,EAAQ,CACtD,KAAK3B,YAAY,WAAW,EAC5BlF,GAAItC,EAAkB,QAAY,QAAS,KAAK+pC,sBAAsB,CACxE,EACAp9B,EAAOuN,eAAiB,SAAwB/Q,EAAQ,CAClDjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GACtD,KAAKuuB,eAAe,CAExB,EACOkS,CACT,EAAE70B,EAAU,EACZ40B,GAAYh3D,UAAU2iC,SAAW,CAC/B6B,SAAU,CAAC,aAAc,eAAe,CAC1C,EACApC,GAAWsH,kBAAkB,cAAestB,EAAW,EACvD,IAAIU,GAAwB,SAASprB,EAAY,CAC/C7e,EAAwB,QAAWkqC,EAAOrrB,CAAU,EACpD,SAASqrB,EAAMj/B,EAAQx5B,EAAS,CAC9B,IAAIu/B,EACJA,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC9CA,IACFu/B,EAAMm5B,YAAc14D,EAAQ24D,YAE9Bp5B,EAAMq5B,cAAgB,GACtBr5B,EAAMlC,GAAG,UAAW,SAASnsB,EAAG,CAC9B,OAAOquB,EAAM6I,cAAcl3B,CAAC,CAC9B,CAAC,EACDquB,EAAMs5B,iBAAmB,SAAS3nD,EAAG,CACnC,OAAOquB,EAAMu5B,WAAW5nD,CAAC,CAC3B,EACAquB,EAAMw5B,qBAAuB,SAAS7nD,EAAG,CACvC,OAAOquB,EAAMy5B,eAAe9nD,CAAC,CAC/B,EACOquB,CACT,CACA,IAAIzE,EAAS29B,EAAM33D,UACnBg6B,OAAAA,EAAOm+B,wBAA0B,SAAiCpzB,EAAW,CACrEA,aAAqB3C,KAG3B,KAAK7F,GAAGwI,EAAW,OAAQ,KAAKgzB,gBAAgB,EAChD,KAAKx7B,GAAGwI,EAAW,CAAC,MAAO,OAAO,EAAG,KAAKkzB,oBAAoB,EAChE,EACAj+B,EAAOo+B,2BAA6B,SAAoCrzB,EAAW,CAC3EA,aAAqB3C,KAG3B,KAAKzS,IAAIoV,EAAW,OAAQ,KAAKgzB,gBAAgB,EACjD,KAAKpoC,IAAIoV,EAAW,CAAC,MAAO,OAAO,EAAG,KAAKkzB,oBAAoB,EACjE,EACAj+B,EAAOhuB,YAAc,SAAqB+4B,EAAW,CAC/C,OAAOA,GAAc,WACvBA,EAAY,KAAKL,SAASK,CAAS,GAErC,KAAKqzB,2BAA2BrzB,CAAS,EACzCuH,EAAWtsC,UAAUgM,YAAY9L,KAAK,KAAM6kC,CAAS,CACvD,EACA/K,EAAOq+B,QAAU,SAAiBtzB,EAAW,CAC3C,IAAIuzB,EAAiB,KAAKxzB,SAASC,CAAS,EACxCuzB,GACF,KAAKH,wBAAwBG,CAAc,CAE/C,EACAt+B,EAAOnG,SAAW,UAAsB,CACtC,IAAI0kC,EAAgB,KAAK51B,SAAS41B,eAAiB,KACnD,KAAKh0B,WAAa1Q,GAAS0kC,EAAe,CACxCz4C,UAAW,kBACb,CAAC,EACD,KAAKykB,WAAW94B,aAAa,OAAQ,MAAM,EAC3C,IAAIF,EAAK+gC,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACvDY,OAAQ,KAAKyjC,WACbzkB,UAAW,UACb,CAAC,EACDvU,OAAAA,EAAGM,YAAY,KAAK04B,UAAU,EAC9BhI,GAAGhxB,EAAI,QAAS,SAASirB,EAAQ,CAC/BA,EAAO0E,eAAe,EACtB1E,EAAOmF,yBAAyB,CAClC,CAAC,EACMpwB,CACT,EACAyuB,EAAOyJ,QAAU,UAAmB,CAClC,KAAKc,WAAa,KAClB,KAAKwzB,iBAAmB,KACxB,KAAKE,qBAAuB,KAC5B3rB,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAOg+B,WAAa,SAAoBxhC,EAAQ,CAC9C,IAAI4E,EAAgB5E,EAAO4E,eAAiB/N,EAAkB,QAAWyhB,cACzE,GAAI,CAAC,KAAKtK,SAAS,EAAEsB,KAAK,SAASjnB,EAAS,CAC1C,OAAOA,EAAQtT,GAAG,IAAM6vB,CAC1B,CAAC,EAAG,CACF,IAAIo9B,EAAM,KAAKZ,YACXY,GAAOA,EAAIC,gBAAkBr9B,IAAkBo9B,EAAIjtD,GAAG,EAAE2a,YAC1DsyC,EAAIE,cAAc,CAEtB,CACF,EACA1+B,EAAOk+B,eAAiB,SAAwB1hC,EAAQ,CACtD,GAAI,KAAKohC,YAAa,CACpB,KAAKA,YAAYc,cAAc,EAC/B,IAAIC,EAAkB,KAAKn0B,SAAS,EACpC,GAAI,CAAC5+B,MAAMiQ,QAAQ8iD,CAAe,EAChC,OAEF,IAAIC,EAAiBD,EAAgB7oC,OAAO,SAASiV,EAAW,CAC9D,OAAOA,EAAUx5B,GAAG,IAAMirB,EAAOtxB,MACnC,CAAC,EAAE,CAAC,EACJ,GAAI,CAAC0zD,EACH,OAEEA,EAAezzD,KAAK,IAAM,2BAC5B,KAAKyyD,YAAY7hC,MAAM,CAE3B,CACF,EACAiE,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CAChDjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,MAAM,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,MAAM,GACjHA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKszB,YAAY,IACRxhC,EAAiB,QAAWjc,WAAWklB,EAAQ,OAAO,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,IAAI,KACvHA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,KAAKqzB,SAAS,EAElB,EACA90B,EAAO+0B,YAAc,UAAuB,CAC1C,IAAI8J,EAAY,EACZ,KAAKf,gBAAkB,SACzBe,EAAY,KAAKf,cAAgB,GAEnC,KAAK/hC,MAAM8iC,CAAS,CACtB,EACA7+B,EAAO80B,SAAW,UAAoB,CACpC,IAAI+J,EAAY,EACZ,KAAKf,gBAAkB,SACzBe,EAAY,KAAKf,cAAgB,GAEnC,KAAK/hC,MAAM8iC,CAAS,CACtB,EACA7+B,EAAOjE,MAAQ,SAAeW,EAAM,CAC9BA,IAAS,SACXA,EAAO,GAET,IAAI8N,EAAW,KAAKA,SAAS,EAAE5uB,MAAM,EACjCkjD,EAAYt0B,EAAS1lC,QAAU0lC,EAAS,CAAC,EAAEjQ,SAAS,gBAAgB,EACpEukC,GACFt0B,EAAS9E,MAAM,EAEb8E,EAAS1lC,OAAS,IAChB43B,EAAO,EACTA,EAAO,EACEA,GAAQ8N,EAAS1lC,SAC1B43B,EAAO8N,EAAS1lC,OAAS,GAE3B,KAAKg5D,cAAgBphC,EACrB8N,EAAS9N,CAAI,EAAEkK,IAAI7K,MAAM,EAE7B,EACO4hC,CACT,EAAEv1B,EAAU,EACZA,GAAWsH,kBAAkB,OAAQguB,EAAK,EAC1C,IAAIqB,GAA8B,SAASzsB,EAAY,CACrD7e,EAAwB,QAAWurC,EAAa1sB,CAAU,EAC1D,SAAS0sB,EAAYtgC,EAAQx5B,EAAS,CACpC,IAAIu/B,EACAv/B,IAAY,SACdA,EAAU,CAAC,GAEbu/B,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAClDu/B,EAAMm5B,YAAc,IAAI9N,GAAQpxB,EAAQx5B,CAAO,EAC/Cu/B,EAAMm5B,YAAYvpB,YAAY5P,EAAM4mB,YAAY,EAChD5mB,EAAMm5B,YAAYh3B,IAAIn1B,aAAa,gBAAiB,MAAM,EAC1D,IAAIwtD,EAAcnP,GAAQ9pD,UAAUimC,cAAc,EAClDxH,EAAMm5B,YAAYh3B,IAAI9gB,UAAY2e,EAAMwH,cAAc,EAAI,IAAMgzB,EAChEx6B,EAAMm5B,YAAY/iC,YAAY,aAAa,EAC3C4J,EAAMqG,SAASrG,EAAMm5B,WAAW,EAChCn5B,EAAMqnB,OAAO,EACbrnB,EAAMgnB,SAAW,GACjB,IAAIR,EAAc,SAAsB70C,EAAG,CACzC,OAAOquB,EAAMwmB,YAAY70C,CAAC,CAC5B,EACAquB,OAAAA,EAAMy6B,iBAAmB,SAAS9oD,EAAG,CACnC,OAAOquB,EAAM06B,gBAAgB/oD,CAAC,CAChC,EACAquB,EAAMlC,GAAGkC,EAAMm5B,YAAa,MAAO3S,CAAW,EAC9CxmB,EAAMlC,GAAGkC,EAAMm5B,YAAa,QAAS3S,CAAW,EAChDxmB,EAAMlC,GAAGkC,EAAMm5B,YAAa,UAAW,SAASxnD,EAAG,CACjD,OAAOquB,EAAM6I,cAAcl3B,CAAC,CAC9B,CAAC,EACDquB,EAAMlC,GAAGkC,EAAMm5B,YAAa,aAAc,UAAW,CACnDn5B,EAAM9J,SAAS,WAAW,EAC1B8J,EAAM26B,KAAK/yB,KAAK,EAChB9J,GAAGlP,EAAkB,QAAY,QAASoR,EAAMy6B,gBAAgB,CAClE,CAAC,EACDz6B,EAAMlC,GAAG,aAAc,SAASnsB,EAAG,CACjC,OAAOquB,EAAM46B,iBAAiBjpD,CAAC,CACjC,CAAC,EACDquB,EAAMlC,GAAG,UAAW,SAASnsB,EAAG,CAC9B,OAAOquB,EAAM66B,qBAAqBlpD,CAAC,CACrC,CAAC,EACMquB,CACT,CACA,IAAIzE,EAASg/B,EAAYh5D,UACzBg6B,OAAAA,EAAO8rB,OAAS,UAAkB,CAChC,IAAIsT,EAAO,KAAKG,WAAW,EACvB,KAAKH,OACP,KAAKA,KAAK31B,QAAQ,EAClB,KAAKz3B,YAAY,KAAKotD,IAAI,GAE5B,KAAKA,KAAOA,EACZ,KAAKt0B,SAASs0B,CAAI,EAClB,KAAKX,eAAiB,GACtB,KAAKb,YAAYh3B,IAAIn1B,aAAa,gBAAiB,OAAO,EACtD,KAAK+tD,OAAS,KAAKA,MAAM16D,QAAU,KAAK26D,gBAC1C,KAAKnzB,KAAK,EACV,KAAK8yB,KAAK70B,WAAWjP,gBAAgB,MAAM,IAE3C,KAAK+Q,KAAK,EACV,KAAK+yB,KAAK70B,WAAW94B,aAAa,OAAQ,MAAM,EAEpD,EACAuuB,EAAOu/B,WAAa,UAAsB,CACxC,IAAIH,EAAO,IAAI1B,GAAM,KAAKl1B,QAAS,CACjCq1B,WAAY,IACd,CAAC,EAED,GADA,KAAK4B,eAAiB,EAClB,KAAK92B,SAASngC,MAAO,CACvB,IAAIk3D,EAAU7lC,GAAS,KAAM,CAC3B/T,UAAW,iBACXpB,YAAa4iB,GAAa,KAAKqB,SAASngC,KAAK,EAC7C2qC,SAAU,EACZ,CAAC,EACGwsB,EAAiB,IAAIv3B,GAAW,KAAKI,QAAS,CAChDj3B,GAAImuD,CACN,CAAC,EACDN,EAAKf,QAAQsB,CAAc,CAC7B,CAEA,GADA,KAAKH,MAAQ,KAAKI,YAAY,EAC1B,KAAKJ,MACP,QAAS94C,EAAK,EAAGA,EAAK,KAAK84C,MAAM16D,OAAQ4hB,IACvC04C,EAAKf,QAAQ,KAAKmB,MAAM94C,CAAE,CAAC,EAG/B,OAAO04C,CACT,EACAp/B,EAAO4/B,YAAc,UAAuB,CAC5C,EACA5/B,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,KAAK+5C,qBAAqB,CACvC,EAAG,CAAC,CAAC,CACP,EACA7/B,EAAO6/B,qBAAuB,UAAgC,CAC5D,IAAIC,EAAkB,kBAClB,KAAKn3B,SAASu0B,SAAW,GAC3B4C,GAAmB,UAEnBA,GAAmB,SAErB,IAAIb,EAAcnP,GAAQ9pD,UAAUimC,cAAc,EAClD,MAAO,mBAAqB6zB,EAAkB,IAAMb,EAAc,IAAM3sB,EAAWtsC,UAAUimC,cAAc/lC,KAAK,IAAI,CACtH,EACA85B,EAAOiM,cAAgB,UAAyB,CAC9C,IAAI6zB,EAAkB,kBACtB,OAAI,KAAKn3B,SAASu0B,SAAW,GAC3B4C,GAAmB,UAEnBA,GAAmB,SAEd,mBAAqBA,EAAkB,IAAMxtB,EAAWtsC,UAAUimC,cAAc/lC,KAAK,IAAI,CAClG,EACA85B,EAAOqU,YAAc,SAAqBjjC,EAAMG,EAAI,CAClD,OAAIA,IAAO,SACTA,EAAK,KAAKqsD,YAAYrsD,GAAG,GAEpB,KAAKqsD,YAAYvpB,YAAYjjC,EAAMG,CAAE,CAC9C,EACAyuB,EAAOyJ,QAAU,UAAmB,CAClC,KAAK41B,iBAAiB,EACtB/sB,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACA85B,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAC5C,KAAKiiC,eACP,KAAKC,cAAc,EAEnB,KAAKqB,YAAY,CAErB,EACA//B,EAAOq/B,iBAAmB,SAA0B7iC,EAAQ,CAC1D,KAAK3B,YAAY,WAAW,EAC5BlF,GAAItC,EAAkB,QAAY,QAAS,KAAK6rC,gBAAgB,CAClE,EACAl/B,EAAOjE,MAAQ,UAAiB,CAC9B,KAAK6hC,YAAY7hC,MAAM,CACzB,EACAiE,EAAOqN,KAAO,UAAgB,CAC5B,KAAKuwB,YAAYvwB,KAAK,CACxB,EACArN,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CAChDjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GAC3G,KAAKiiC,gBACP,KAAKC,cAAc,EAEhBnrC,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,IACvDA,EAAO0E,eAAe,EACtB,KAAK08B,YAAY7hC,MAAM,KAEhBxI,EAAiB,QAAWjc,WAAWklB,EAAQ,IAAI,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,MAAM,KACjH,KAAKiiC,iBACRjiC,EAAO0E,eAAe,EACtB,KAAK6+B,YAAY,GAGvB,EACA//B,EAAOm/B,gBAAkB,SAAyB3iC,EAAQ,EACpDjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,IAC/G,KAAK3B,YAAY,WAAW,CAEhC,EACAmF,EAAOggC,sBAAwB,SAA+BxjC,EAAQ,CACpE,KAAK8iC,qBAAqB9iC,CAAM,CAClC,EACAwD,EAAOs/B,qBAAuB,SAA8B9iC,EAAQ,EAC9DjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GAAKjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,KAC3G,KAAKiiC,gBACP,KAAKC,cAAc,EAEhBnrC,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,IACvDA,EAAO0E,eAAe,EACtB,KAAK08B,YAAY7hC,MAAM,GAG7B,EACAiE,EAAO+/B,YAAc,UAAuB,CAC1C,GAAI,KAAKtU,SAAU,CAKjB,GAJA,KAAKgT,eAAiB,GACtB,KAAKW,KAAK/yB,KAAK,EACf,KAAK+yB,KAAK7yB,YAAY,EACtB,KAAKqxB,YAAYh3B,IAAIn1B,aAAa,gBAAiB,MAAM,EACrDonB,GAAUS,GAAU,EACtB,OAEF,KAAK8lC,KAAKrjC,MAAM,CAClB,CACF,EACAiE,EAAO0+B,cAAgB,UAAyB,CAC1C,KAAKjT,WACP,KAAKgT,eAAiB,GACtB,KAAKW,KAAK5yB,cAAc,EACxB,KAAK4yB,KAAK9yB,KAAK,EACf,KAAKsxB,YAAYh3B,IAAIn1B,aAAa,gBAAiB,OAAO,EAE9D,EACAuuB,EAAO/J,QAAU,UAAmB,CAClC,KAAKyoC,cAAc,EACnB,KAAKjT,SAAW,GAChB,KAAK9wB,SAAS,cAAc,EAC5B,KAAKijC,YAAY3nC,QAAQ,CAC3B,EACA+J,EAAO9J,OAAS,UAAkB,CAChC,KAAKu1B,SAAW,GAChB,KAAK5wB,YAAY,cAAc,EAC/B,KAAK+iC,YAAY1nC,OAAO,CAC1B,EACO8oC,CACT,EAAE52B,EAAU,EACZA,GAAWsH,kBAAkB,aAAcqvB,EAAW,EACtD,IAAIkB,GAA8B,SAASC,EAAa,CACtDzsC,EAAwB,QAAW0sC,EAAcD,CAAW,EAC5D,SAASC,EAAazhC,EAAQx5B,EAAS,CACrC,IAAIu/B,EACAmN,EAAS1sC,EAAQ0sC,OAKrB,GAJAnN,EAAQy7B,EAAYh6D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC/Cu/B,EAAM+6B,MAAM16D,QAAU,GACxB2/B,EAAM6H,KAAK,EAET,CAACsF,EACH,OAAOpe,EAAgC,QAAWiR,CAAK,EAEzD,IAAI27B,EAAgBjqD,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAMqnB,MAAM,EACxFla,OAAAA,EAAO5S,iBAAiB,cAAeohC,CAAa,EACpDxuB,EAAO5S,iBAAiB,WAAYohC,CAAa,EACjDxuB,EAAO5S,iBAAiB,cAAeohC,CAAa,EACpD37B,EAAM+D,QAAQjG,GAAG,QAAS69B,CAAa,EACvC37B,EAAM+D,QAAQjG,GAAG,UAAW,UAAW,CACrCqP,EAAO7S,oBAAoB,cAAeqhC,CAAa,EACvDxuB,EAAO7S,oBAAoB,WAAYqhC,CAAa,EACpDxuB,EAAO7S,oBAAoB,cAAeqhC,CAAa,CACzD,CAAC,EACM37B,CACT,CACA,OAAO07B,CACT,EAAEpB,EAAW,EACb32B,GAAWsH,kBAAkB,cAAeuwB,EAAW,EACvD,IAAII,GAAW,CAAC,MAAO,MAAO,KAAM,OAAQ,QAAS,MAAM,EACvDC,GAA4B,SAAS1U,EAAqB,CAC5Dn4B,EAAwB,QAAW8sC,EAAW3U,CAAmB,EACjE,SAAS2U,EAAU7hC,EAAQx5B,EAAS,CAClC,IAAIu/B,EACJA,OAAAA,EAAQmnB,EAAoB1lD,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC3Du/B,EAAM+7B,WAAat7D,EAAQs7D,WAC3B/7B,EAAMg8B,YAAcv7D,EAAQoyC,UAAY,GACxC7S,EAAMi8B,gBAAkBx7D,EAAQw7D,gBAChCj8B,EAAM6S,SAAS7S,EAAMg8B,WAAW,EAC5Bh8B,EAAM+7B,WACJ/7B,EAAMi8B,gBACRj8B,EAAMmC,IAAIn1B,aAAa,OAAQ,kBAAkB,EAEjDgzB,EAAMmC,IAAIn1B,aAAa,OAAQ,eAAe,EAGhDgzB,EAAMmC,IAAIn1B,aAAa,OAAQ,UAAU,EAEpCgzB,CACT,CACA,IAAIzE,EAASugC,EAAUv6D,UACvBg6B,OAAAA,EAAOnG,SAAW,SAAoB1e,EAAMu/B,EAAOhf,EAAO,CACxD,KAAK6vB,eAAiB,GACtB,IAAIh6C,EAAKq6C,EAAoB5lD,UAAU6zB,SAAS3zB,KAAK,KAAM,KAAM1D,GAAO,CACtEsjB,UAAW,gBACXqtB,SAAU,EACZ,EAAGuH,CAAK,EAAGhf,CAAK,EAChBnqB,OAAAA,EAAGq4B,aAAa/P,GAAS,OAAQ,CAC/B/T,UAAW,qBACXpB,YAAa,KAAKolB,SAAS,KAAKnB,SAASyK,KAAK,CAChD,CAAC,EAAG7hC,EAAGooB,cAAc,uBAAuB,CAAC,EACtCpoB,CACT,EACAyuB,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CAC/C6jC,GAASv0B,KAAK,SAAS9pC,EAAK,CAC/B,OAAOuxB,EAAiB,QAAWjc,WAAWklB,EAAQx6B,CAAG,CAC3D,CAAC,GACC4pD,EAAoB5lD,UAAUsnC,cAAcpnC,KAAK,KAAMs2B,CAAM,CAEjE,EACAwD,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChD,KAAK8a,SAAS,EAAI,CACpB,EACAtX,EAAOsX,SAAW,SAAkBqpB,EAAW,CACzC,KAAKH,aACHG,GACF,KAAKhmC,SAAS,cAAc,EAC5B,KAAKiM,IAAIn1B,aAAa,eAAgB,MAAM,EAC5C,KAAK4iC,YAAY,YAAY,EAC7B,KAAKosB,YAAc,KAEnB,KAAK5lC,YAAY,cAAc,EAC/B,KAAK+L,IAAIn1B,aAAa,eAAgB,OAAO,EAC7C,KAAK4iC,YAAY,EAAE,EACnB,KAAKosB,YAAc,IAGzB,EACOF,CACT,EAAE7V,EAAmB,EACrBtiB,GAAWsH,kBAAkB,WAAY4wB,EAAS,EAClD,IAAIM,GAAoC,SAASC,EAAW,CAC1DptC,EAAwB,QAAWqtC,EAAoBD,CAAS,EAChE,SAASC,EAAmBpiC,EAAQx5B,EAAS,CAC3C,IAAIu/B,EACA1d,EAAQ7hB,EAAQ6hB,MAChB6qB,EAASlT,EAAOoT,WAAW,EAC/B5sC,EAAQkuC,MAAQrsB,EAAMqsB,OAASrsB,EAAMkjB,UAAY,UACjD/kC,EAAQoyC,SAAWvwB,EAAMK,OAAS,UAClCqd,EAAQo8B,EAAU36D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACjDu/B,EAAM1d,MAAQA,EACd0d,EAAMs8B,OAAS77D,EAAQ67D,OAAS,CAAC77D,EAAQ+yC,MAAQxT,EAAM1d,MAAMkxB,IAAI,GAAGniB,OAAO5D,OAAO,EAClF,IAAI8uC,EAAgB,UAA0B,CAC5C,QAAS1rC,EAAO5pB,UAAU5G,OAAQiwB,GAAO,IAAInpB,MAAM0pB,CAAI,EAAGC,GAAO,EAAGA,GAAOD,EAAMC,KAC/ER,GAAKQ,EAAI,EAAI7pB,UAAU6pB,EAAI,EAE7BkP,EAAMw8B,mBAAmBxsD,MAAM+e,EAAgC,QAAWiR,CAAK,EAAG1P,EAAI,CACxF,EACImsC,EAAgC,UAA0C,CAC5E,QAAS/qC,EAAQzqB,UAAU5G,OAAQiwB,GAAO,IAAInpB,MAAMuqB,CAAK,EAAGC,GAAQ,EAAGA,GAAQD,EAAOC,KACpFrB,GAAKqB,EAAK,EAAI1qB,UAAU0qB,EAAK,EAE/BqO,EAAM08B,6BAA6B1sD,MAAM+e,EAAgC,QAAWiR,CAAK,EAAG1P,EAAI,CAClG,EASA,GARA2J,EAAO6D,GAAG,CAAC,YAAa,iBAAiB,EAAGy+B,CAAa,EACzDpvB,EAAO5S,iBAAiB,SAAUgiC,CAAa,EAC/CpvB,EAAO5S,iBAAiB,yBAA0BkiC,CAA6B,EAC/Ez8B,EAAMlC,GAAG,UAAW,UAAW,CAC7B7D,EAAO/I,IAAI,CAAC,YAAa,iBAAiB,EAAGqrC,CAAa,EAC1DpvB,EAAO7S,oBAAoB,SAAUiiC,CAAa,EAClDpvB,EAAO7S,oBAAoB,yBAA0BmiC,CAA6B,CACpF,CAAC,EACGtvB,EAAOwvB,WAAa,OAAQ,CAC9B,IAAI5kC,EACJiI,EAAMlC,GAAG,CAAC,MAAO,OAAO,EAAG,UAAW,CACpC,GAAI,OAAOnP,EAAgB,QAAWiuC,OAAU,SAC9C,GAAI,CACF7kC,EAAS,IAAIpJ,EAAgB,QAAWiuC,MAAM,QAAQ,CACxD,MAAc,CACd,CAEG7kC,IACHA,EAASnJ,EAAkB,QAAWiuC,YAAY,OAAO,EACzD9kC,EAAO+kC,UAAU,SAAU,GAAM,EAAI,GAEvC3vB,EAAOtN,cAAc9H,CAAM,CAC7B,CAAC,CACH,CACAiI,OAAAA,EAAMw8B,mBAAmB,EAClBx8B,CACT,CACA,IAAIzE,EAAS8gC,EAAmB96D,UAChCg6B,OAAAA,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChD,IAAIglC,EAAiB,KAAKz6C,MACtB6qB,EAAS,KAAKpJ,QAAQsJ,WAAW,EAErC,GADA+uB,EAAU76D,UAAUilD,YAAY/kD,KAAK,KAAMs2B,CAAM,EAC7C,EAACoV,EAGL,QAASlrB,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IAAM,CACzC,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACjB,KAAKq6C,MAAMplD,QAAQoL,EAAMkxB,IAAI,IAAM,KAGnClxB,IAAUy6C,EACRz6C,EAAMK,OAAS,YACjBL,EAAMK,KAAO,WAENL,EAAMK,OAAS,aACxBL,EAAMK,KAAO,YAEjB,CACF,EACA4Y,EAAOihC,mBAAqB,SAA4BzkC,EAAQ,CAC9D,IAAIilC,EAAmB,KAAK16C,MAAMK,OAAS,UACvCq6C,IAAqB,KAAKhB,aAC5B,KAAKnpB,SAASmqB,CAAgB,CAElC,EACAzhC,EAAOmhC,6BAA+B,SAAsC3kC,EAAQ,CAClF,GAAI,KAAKzV,MAAMK,OAAS,UAAW,CACjC,IAAI0mC,EAAmB,KAAKtlB,QAAQmhB,OAAOmE,iBAC3C,GAAIA,GAAoBA,EAAiB/W,SAAW+W,EAAiB7jB,WAAa,KAAKljB,MAAMkjB,UAAY6jB,EAAiB7V,OAAS,KAAKlxB,MAAMkxB,KAC5I,OAEF,KAAKzP,QAAQmhB,OAAOmE,iBAAmB,CACrC/W,QAAS,GACT9M,SAAU,KAAKljB,MAAMkjB,SACrBgO,KAAM,KAAKlxB,MAAMkxB,IACnB,CACF,CACF,EACAjY,EAAOyJ,QAAU,UAAmB,CAClC,KAAK1iB,MAAQ,KACb85C,EAAU76D,UAAUyjC,QAAQvjC,KAAK,IAAI,CACvC,EACO46D,CACT,EAAER,EAAS,EACXl4B,GAAWsH,kBAAkB,oBAAqBkxB,EAAiB,EACnE,IAAIc,GAAuC,SAASC,EAAoB,CACtEluC,EAAwB,QAAWmuC,EAAuBD,CAAkB,EAC5E,SAASC,EAAsBljC,EAAQx5B,EAAS,CAC9CA,OAAAA,EAAQ6hB,MAAQ,CACd2X,OAAAA,EAIAuZ,KAAM/yC,EAAQ+yC,KACd8oB,MAAO77D,EAAQ67D,MACf,QAAW,GACX35C,KAAM,UACR,EACKliB,EAAQ67D,QACX77D,EAAQ67D,MAAQ,CAAC77D,EAAQ+yC,IAAI,GAE3B/yC,EAAQkuC,MACVluC,EAAQ6hB,MAAMqsB,MAAQluC,EAAQkuC,MAE9BluC,EAAQ6hB,MAAMqsB,MAAQluC,EAAQ67D,MAAMh7C,KAAK,OAAO,EAAI,OAEtD7gB,EAAQs7D,WAAa,GACrBt7D,EAAQw7D,gBAAkB,GACnBiB,EAAmBz7D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,IAC3D,CACA,IAAI86B,EAAS4hC,EAAsB57D,UACnCg6B,OAAAA,EAAOihC,mBAAqB,SAA4BzkC,EAAQ,CAG9D,QAFIoV,EAAS,KAAKlT,OAAO,EAAEoT,WAAW,EAClC2vB,EAAmB,GACd/6C,EAAK,EAAG/c,EAAIioC,EAAO9sC,OAAQ4hB,EAAK/c,EAAG+c,IAAM,CAChD,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACrB,GAAI,KAAKiiB,SAASo4B,MAAMplD,QAAQoL,EAAMkxB,IAAI,EAAI,IAAMlxB,EAAMK,OAAS,UAAW,CAC5Eq6C,EAAmB,GACnB,KACF,CACF,CACIA,IAAqB,KAAKhB,aAC5B,KAAKnpB,SAASmqB,CAAgB,CAElC,EACAzhC,EAAOmhC,6BAA+B,SAAsC3kC,EAAQ,CAGlF,QAFIoV,EAAS,KAAKlT,OAAO,EAAEoT,WAAW,EAClC+vB,EAAY,GACPn7C,EAAK,EAAG/c,EAAIioC,EAAO9sC,OAAQ4hB,EAAK/c,EAAG+c,IAAM,CAChD,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACrB,GAAI,CAAC,WAAY,eAAgB,WAAW,EAAE/K,QAAQoL,EAAMkxB,IAAI,EAAI,IAAMlxB,EAAMK,OAAS,UAAW,CAClGy6C,EAAY,GACZ,KACF,CACF,CACIA,IACF,KAAKr5B,QAAQmhB,OAAOmE,iBAAmB,CACrC/W,QAAS,EACX,EAEJ,EACO6qB,CACT,EAAEhB,EAAiB,EACnBx4B,GAAWsH,kBAAkB,uBAAwBgyB,EAAoB,EACzE,IAAII,GAAkC,SAASC,EAAc,CAC3DtuC,EAAwB,QAAWuuC,EAAkBD,CAAY,EACjE,SAASC,EAAiBtjC,EAAQx5B,EAAS,CACzC,OAAIA,IAAY,SACdA,EAAU,CAAC,GAEbA,EAAQ0sC,OAASlT,EAAOoT,WAAW,EAC5BiwB,EAAa77D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,IACrD,CACA,IAAI86B,EAASgiC,EAAiBh8D,UAC9Bg6B,OAAAA,EAAO4/B,YAAc,SAAqBJ,EAAOyC,EAAe,CAC1DzC,IAAU,SACZA,EAAQ,CAAA,GAENyC,IAAkB,SACpBA,EAAgBrB,IAElB,IAAIxtB,EACA,KAAK8uB,SACP9uB,EAAQ,KAAK8uB,OAAS,QAExB1C,EAAMjxD,KAAK,IAAImzD,GAAqB,KAAKl5B,QAAS,CAChDu4B,MAAO,KAAKoB,OACZlqB,KAAM,KAAKmqB,MACXhvB,MAAAA,CACF,CAAC,CAAC,EACF,KAAKqsB,gBAAkB,EACvB,IAAI7tB,EAAS,KAAKpJ,QAAQsJ,WAAW,EAChClmC,MAAMiQ,QAAQ,KAAKsmD,MAAM,IAC5B,KAAKA,OAAS,CAAC,KAAKC,KAAK,GAE3B,QAAS17C,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IAAM,CACzC,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACrB,GAAI,KAAKy7C,OAAOxmD,QAAQoL,EAAMkxB,IAAI,EAAI,GAAI,CACxC,IAAIvb,EAAO,IAAIulC,EAAc,KAAKz5B,QAAS,CACzCzhB,MAAAA,EACAg6C,MAAO,KAAKoB,OACZlqB,KAAM,KAAKmqB,MAEX5B,WAAY,GAEZE,gBAAiB,EACnB,CAAC,EACDhkC,EAAK/B,SAAS,OAAS5T,EAAMkxB,KAAO,YAAY,EAChDunB,EAAMjxD,KAAKmuB,CAAI,CACjB,CACF,CACA,OAAO8iC,CACT,EACOwC,CACT,EAAE/B,EAAW,EACb73B,GAAWsH,kBAAkB,kBAAmBoyB,EAAe,EAC/D,IAAIO,GAAwC,SAASxB,EAAW,CAC9DptC,EAAwB,QAAW6uC,EAAwBzB,CAAS,EACpE,SAASyB,EAAuB5jC,EAAQx5B,EAAS,CAC/C,IAAIu/B,EACA1d,EAAQ7hB,EAAQ6hB,MAChBxF,EAAMrc,EAAQqc,IACd67B,EAAc1e,EAAO0e,YAAY,EACrCl4C,OAAAA,EAAQs7D,WAAa,GACrBt7D,EAAQw7D,gBAAkB,GAC1Bx7D,EAAQkuC,MAAQ7xB,EAAInQ,KACpBlM,EAAQoyC,SAAW/1B,EAAIxZ,WAAaq1C,GAAeA,EAAc77B,EAAI0B,QACrEwhB,EAAQo8B,EAAU36D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACjDu/B,EAAM1d,MAAQA,EACd0d,EAAMljB,IAAMA,EACLkjB,CACT,CACA,IAAIzE,EAASsiC,EAAuBt8D,UACpCg6B,OAAAA,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChDqkC,EAAU76D,UAAUilD,YAAY/kD,KAAK,IAAI,EACzC,KAAKsiC,QAAQ4U,YAAY,KAAK77B,IAAIxZ,SAAS,CAC7C,EACOu6D,CACT,EAAEhC,EAAS,EACXl4B,GAAWsH,kBAAkB,wBAAyB2yB,EAAqB,EAC3E,IAAIE,GAAiC,SAASC,EAAkB,CAC9D/uC,EAAwB,QAAWgvC,EAAiBD,CAAgB,EACpE,SAASC,EAAgB/jC,EAAQx5B,EAASojC,EAAO,CAC/C,IAAI7D,EACJA,OAAAA,EAAQ+9B,EAAiBt8D,KAAK,KAAMw4B,EAAQx5B,EAASojC,CAAK,GAAK,KAC/D7D,EAAMi+B,mBAAqB,UAAW,CACpCj+B,EAAM+6B,MAAMv4D,QAAQ,SAASy1B,EAAM,CACjCA,EAAK4a,SAAS7S,EAAMk+B,OAAOjmB,WAAW,CAAC,IAAMhgB,EAAKnb,GAAG,CACvD,CAAC,CACH,EACOkjB,CACT,CACA,IAAIzE,EAASyiC,EAAgBz8D,UAC7Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,uBAAyBu2B,EAAiBx8D,UAAUimC,cAAc/lC,KAAK,IAAI,CACpF,EACA85B,EAAO6/B,qBAAuB,UAAgC,CAC5D,MAAO,uBAAyB2C,EAAiBx8D,UAAU65D,qBAAqB35D,KAAK,IAAI,CAC3F,EACA85B,EAAO8rB,OAAS,SAAgBtvB,EAAQ,CACtC,GAAIA,EAAAA,GAAUA,EAAOzV,OAASyV,EAAOzV,MAAMkxB,OAAS,YAGpD,KAAIlxB,EAAQ,KAAK67C,kBAAkB,EAC/B77C,IAAU,KAAK47C,QACjB,KAAKE,SAAS97C,CAAK,EACnBy7C,EAAiBx8D,UAAU8lD,OAAO5lD,KAAK,IAAI,IAClC,CAAC,KAAKs5D,OAASz4C,GAASA,EAAMiF,MAAQjF,EAAMiF,KAAKlnB,SAAW,KAAK06D,MAAM16D,SAChF09D,EAAiBx8D,UAAU8lD,OAAO5lD,KAAK,IAAI,EAE/C,EACA85B,EAAO6iC,SAAW,SAAkB97C,EAAO,CACzC,GAAI,KAAK47C,SAAW57C,EAMpB,IAHK,KAAK+7C,iBACR,KAAKA,eAAiB,KAAKhX,OAAO31C,KAAK,IAAI,GAEzC,KAAKwsD,OAAQ,CACf,IAAII,EAAoB,KAAKv6B,QAAQya,mBAAmB,EAAExK,wBAAwB,KAAKkqB,MAAM,EACzFI,GACFA,EAAkBhkC,oBAAoB,OAAQ,KAAK+jC,cAAc,EAEnE,KAAKH,OAAO5jC,oBAAoB,YAAa,KAAK2jC,kBAAkB,EACpE,KAAKC,OAAS,IAChB,CAEA,GADA,KAAKA,OAAS57C,EACV,KAAK47C,OAAQ,CACf,KAAKA,OAAOv7C,KAAO,SACnB,IAAI47C,EAAqB,KAAKx6B,QAAQya,mBAAmB,EAAExK,wBAAwB,KAAKkqB,MAAM,EAC1FK,GACFA,EAAmBhkC,iBAAiB,OAAQ,KAAK8jC,cAAc,EAEjE,KAAKH,OAAO3jC,iBAAiB,YAAa,KAAK0jC,kBAAkB,CACnE,EACF,EACA1iC,EAAO4iC,kBAAoB,UAA6B,CAEtD,QADIhxB,EAAS,KAAKpJ,QAAQsJ,WAAW,GAAK,CAAA,EACjCprB,EAAKkrB,EAAO9sC,OAAS,EAAG4hB,GAAM,EAAGA,IAAM,CAC9C,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACrB,GAAIK,EAAMkxB,OAAS,KAAKmqB,MACtB,OAAOr7C,CAEX,CACF,EACAiZ,EAAOijC,eAAiB,UAA0B,CAChD,OAAI,KAAKN,QAAU,KAAKA,OAAOvvB,MACtB,KAAKuvB,OAAOvvB,MAEd,KAAKtJ,SAASxC,GAAa,KAAK86B,KAAK,CAAC,CAC/C,EACApiC,EAAOu/B,WAAa,UAAsB,CACxC,YAAK52B,SAASngC,MAAQ,KAAKy6D,eAAe,EACnCT,EAAiBx8D,UAAUu5D,WAAWr5D,KAAK,IAAI,CACxD,EACA85B,EAAO4/B,YAAc,UAAuB,CAC1C,IAAIJ,EAAQ,CAAA,EACZ,GAAI,CAAC,KAAKmD,OACR,OAAOnD,EAET,IAAIxzC,EAAO,KAAK22C,OAAO32C,KACvB,GAAI,CAACA,EACH,OAAOwzC,EAET,QAAS94C,EAAK,EAAG/c,EAAIqiB,EAAKlnB,OAAQ4hB,EAAK/c,EAAG+c,IAAM,CAC9C,IAAInF,EAAMyK,EAAKtF,CAAE,EACbw8C,EAAK,IAAIb,GAAsB,KAAK75B,QAAS,CAC/CzhB,MAAO,KAAK47C,OACZphD,IAAAA,CACF,CAAC,EACDi+C,EAAMjxD,KAAK20D,CAAE,CACf,CACA,OAAO1D,CACT,EACOiD,CACT,EAAEX,EAAe,EACjBS,GAAev8D,UAAUo8D,MAAQ,WACjCG,GAAev8D,UAAUqlD,aAAe,WACxCjjB,GAAWsH,kBAAkB,iBAAkB6yB,EAAc,EAC7D,IAAIY,GAAqC,SAASX,EAAkB,CAClE/uC,EAAwB,QAAW2vC,EAAqBZ,CAAgB,EACxE,SAASY,EAAoB1kC,EAAQx5B,EAASojC,EAAO,CACnD,IAAI7D,EACJA,EAAQ+9B,EAAiBt8D,KAAK,KAAMw4B,EAAQx5B,EAASojC,CAAK,GAAK,KAC/D,IAAIsJ,EAASlT,EAAOoT,WAAW,EAC3BkvB,EAAgB7qD,GAAKqd,EAAgC,QAAWiR,CAAK,EAAGA,EAAMw8B,kBAAkB,EACpGrvB,OAAAA,EAAO5S,iBAAiB,SAAUgiC,CAAa,EAC/Cv8B,EAAMlC,GAAG,UAAW,UAAW,CAC7BqP,EAAO7S,oBAAoB,SAAUiiC,CAAa,CACpD,CAAC,EACMv8B,CACT,CACA,IAAIzE,EAASojC,EAAoBp9D,UACjCg6B,OAAAA,EAAOihC,mBAAqB,SAA4BzkC,EAAQ,CAG9D,QAFIoV,EAAS,KAAKlT,OAAO,EAAEoT,WAAW,EAClCtR,EAAW,GACN9Z,EAAK,EAAG/c,EAAIioC,EAAO9sC,OAAQ4hB,EAAK/c,EAAG+c,IAAM,CAChD,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACrB,GAAIK,EAAMkxB,OAAS,KAAKmqB,OAASr7C,EAAMK,OAAS,UAAW,CACzDoZ,EAAW,GACX,KACF,CACF,CACIA,EACF,KAAKvK,QAAQ,EAEb,KAAKC,OAAO,CAEhB,EACA8J,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,2BAA6Bu2B,EAAiBx8D,UAAUimC,cAAc/lC,KAAK,IAAI,CACxF,EACA85B,EAAO6/B,qBAAuB,UAAgC,CAC5D,MAAO,2BAA6B2C,EAAiBx8D,UAAU65D,qBAAqB35D,KAAK,IAAI,CAC/F,EACOk9D,CACT,EAAEtB,EAAe,EACjBqB,GAAmBn9D,UAAUo8D,MAAQ,eACrCe,GAAmBn9D,UAAUqlD,aAAe,eAC5CjjB,GAAWsH,kBAAkB,qBAAsByzB,EAAkB,EACrE,IAAIE,GAAkC,SAASb,EAAkB,CAC/D/uC,EAAwB,QAAW6vC,EAAkBd,CAAgB,EACrE,SAASc,EAAiB5kC,EAAQx5B,EAASojC,EAAO,CAChD,OAAOk6B,EAAiBt8D,KAAK,KAAMw4B,EAAQx5B,EAASojC,CAAK,GAAK,IAChE,CACA,IAAItI,EAASsjC,EAAiBt9D,UAC9Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,wBAA0Bu2B,EAAiBx8D,UAAUimC,cAAc/lC,KAAK,IAAI,CACrF,EACA85B,EAAO6/B,qBAAuB,UAAgC,CAC5D,MAAO,wBAA0B2C,EAAiBx8D,UAAU65D,qBAAqB35D,KAAK,IAAI,CAC5F,EACOo9D,CACT,EAAExB,EAAe,EACjBuB,GAAgBr9D,UAAUo8D,MAAQ,YAClCiB,GAAgBr9D,UAAUqlD,aAAe,YACzCjjB,GAAWsH,kBAAkB,kBAAmB2zB,EAAe,EAC/D,IAAIE,GAA0C,SAAS5B,EAAoB,CACzEluC,EAAwB,QAAW+vC,EAA0B7B,CAAkB,EAC/E,SAAS6B,EAAyB9kC,EAAQx5B,EAAS,CACjD,IAAIu/B,EACJv/B,OAAAA,EAAQ6hB,MAAQ,CACd2X,OAAAA,EACAuZ,KAAM/yC,EAAQ+yC,KACd7E,MAAOluC,EAAQ+yC,KAAO,YACtBuoB,WAAY,GACZ,QAAW,GACXp5C,KAAM,UACR,EACAliB,EAAQs7D,WAAa,GACrBt7D,EAAQiG,KAAO,0BACfs5B,EAAQk9B,EAAmBz7D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KAC1Du/B,EAAM9J,SAAS,wBAAwB,EACvC8J,EAAM4P,YAAY,WAAanvC,EAAQ+yC,KAAO,kBAAkB,EACzDxT,CACT,CACA,IAAIzE,EAASwjC,EAAyBx9D,UACtCg6B,OAAAA,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChD,KAAKkC,OAAO,EAAEgM,SAAS,mBAAmB,EAAEnsB,KAAK,CACnD,EACOilD,CACT,EAAE5C,EAAiB,EACnBx4B,GAAWsH,kBAAkB,0BAA2B6zB,EAAuB,EAC/E,IAAIE,GAAkC,SAASjB,EAAkB,CAC/D/uC,EAAwB,QAAWiwC,EAAiBlB,CAAgB,EACpE,SAASkB,EAAgBhlC,EAAQx5B,EAASojC,EAAO,CAC/C,OAAOk6B,EAAiBt8D,KAAK,KAAMw4B,EAAQx5B,EAASojC,CAAK,GAAK,IAChE,CACA,IAAItI,EAAS0jC,EAAgB19D,UAC7Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,uBAAyBu2B,EAAiBx8D,UAAUimC,cAAc/lC,KAAK,IAAI,CACpF,EACA85B,EAAO6/B,qBAAuB,UAAgC,CAC5D,MAAO,uBAAyB2C,EAAiBx8D,UAAU65D,qBAAqB35D,KAAK,IAAI,CAC3F,EACA85B,EAAO4/B,YAAc,UAAuB,CAC1C,IAAIJ,EAAQ,CAAA,EACZ,MAAI,EAAE,KAAK9gC,OAAO,EAAEsd,OAAS,KAAKtd,OAAO,EAAEsd,MAAMwE,2BAA6B,KAAK9hB,OAAO,EAAEgM,SAAS,mBAAmB,IACtH80B,EAAMjxD,KAAK,IAAIg1D,GAAwB,KAAK/6B,QAAS,CACnDyP,KAAM,KAAKmqB,KACb,CAAC,CAAC,EACF,KAAK3C,gBAAkB,GAElB+C,EAAiBx8D,UAAU45D,YAAY15D,KAAK,KAAMs5D,CAAK,CAChE,EACOkE,CACT,EAAE5B,EAAe,EACjB2B,GAAgBz9D,UAAUo8D,MAAQ,WAClCqB,GAAgBz9D,UAAUqlD,aAAe,WACzCjjB,GAAWsH,kBAAkB,iBAAkB+zB,EAAe,EAC9D,IAAIE,GAAmC,SAAShC,EAAoB,CAClEluC,EAAwB,QAAWmwC,EAAmBjC,CAAkB,EACxE,SAASiC,GAAoB,CAC3B,OAAOjC,EAAmBltD,MAAM,KAAM/I,SAAS,GAAK,IACtD,CACA,IAAIs0B,EAAS4jC,EAAkB59D,UAC/Bg6B,OAAAA,EAAOnG,SAAW,SAAoB1e,EAAMu/B,EAAOhf,EAAO,CACxD,IAAInqB,EAAKowD,EAAmB37D,UAAU6zB,SAAS3zB,KAAK,KAAMiV,EAAMu/B,EAAOhf,CAAK,EACxEmoC,EAAatyD,EAAGooB,cAAc,qBAAqB,EACvD,OAAI,KAAKgP,SAAS5hB,MAAMkxB,OAAS,aAC/B4rB,EAAWhyD,YAAYgoB,GAAS,OAAQ,CACtC/T,UAAW,sBACb,EAAG,CACD,cAAe,EACjB,CAAC,CAAC,EACF+9C,EAAWhyD,YAAYgoB,GAAS,OAAQ,CACtC/T,UAAW,mBAGXpB,YAAa,IAAM,KAAKolB,SAAS,UAAU,CAC7C,CAAC,CAAC,GAEGv4B,CACT,EACOqyD,CACT,EAAEhD,EAAiB,EACnBx4B,GAAWsH,kBAAkB,mBAAoBi0B,EAAgB,EACjE,IAAIG,GAAiC,SAAStB,EAAkB,CAC9D/uC,EAAwB,QAAWswC,EAAiBvB,CAAgB,EACpE,SAASuB,EAAgBrlC,EAAQx5B,EAAS,CACxC,IAAIu/B,EACJ,OAAIv/B,IAAY,SACdA,EAAU,CAAC,GAEbu/B,EAAQ+9B,EAAiBt8D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACxDu/B,EAAMy9B,OAAS,YACX,CAAC,KAAM,QAAS,QAAS,OAAO,EAAEvmD,QAAQ8oB,EAAM+D,QAAQw7B,SAAS,EAAI,KACvEv/B,EAAMy9B,OAAS,YAEjBz9B,EAAMm5B,YAAYvpB,YAAY/M,GAAa7C,EAAMy9B,MAAM,CAAC,EACjDz9B,CACT,CACA,IAAIzE,EAAS+jC,EAAgB/9D,UAC7Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,wBAA0Bu2B,EAAiBx8D,UAAUimC,cAAc/lC,KAAK,IAAI,CACrF,EACA85B,EAAO6/B,qBAAuB,UAAgC,CAC5D,MAAO,wBAA0B2C,EAAiBx8D,UAAU65D,qBAAqB35D,KAAK,IAAI,CAC5F,EACA85B,EAAO4/B,YAAc,UAAuB,CAC1C,IAAIJ,EAAQ,CAAA,EACZ,MAAI,EAAE,KAAK9gC,OAAO,EAAEsd,OAAS,KAAKtd,OAAO,EAAEsd,MAAMwE,2BAA6B,KAAK9hB,OAAO,EAAEgM,SAAS,mBAAmB,IACtH80B,EAAMjxD,KAAK,IAAIg1D,GAAwB,KAAK/6B,QAAS,CACnDyP,KAAM,KAAKiqB,MACb,CAAC,CAAC,EACF,KAAKzC,gBAAkB,GAEzBD,EAAQgD,EAAiBx8D,UAAU45D,YAAY15D,KAAK,KAAMs5D,EAAOmE,EAAgB,EAC1EnE,CACT,EACOuE,CACT,EAAEjC,EAAe,EACjBgC,GAAe99D,UAAUm8D,OAAS,CAAC,WAAY,WAAW,EAC1D2B,GAAe99D,UAAUqlD,aAAe,YACxCjjB,GAAWsH,kBAAkB,iBAAkBo0B,EAAc,EAC7D,IAAIG,GAAqC,SAASpD,EAAW,CAC3DptC,EAAwB,QAAWywC,EAAqBrD,CAAS,EACjE,SAASqD,EAAoBxlC,EAAQx5B,EAAS,CAC5C,IAAIu/B,EACA1d,EAAQ7hB,EAAQ6hB,MAChB6qB,EAASlT,EAAOylC,YAAY,EAChCj/D,EAAQkuC,MAAQrsB,EAAMqsB,OAASrsB,EAAMkjB,UAAY,UACjD/kC,EAAQoyC,SAAWvwB,EAAMgwB,QACzBtS,EAAQo8B,EAAU36D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACjDu/B,EAAM1d,MAAQA,EACd0d,EAAM9J,SAAS,OAAS5T,EAAMkxB,KAAO,YAAY,EACjD,IAAI+oB,EAAgB,UAA0B,CAC5C,QAAS1rC,EAAO5pB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAM0pB,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ER,EAAKQ,CAAI,EAAI7pB,UAAU6pB,CAAI,EAE7BkP,EAAMw8B,mBAAmBxsD,MAAM+e,EAAgC,QAAWiR,CAAK,EAAG1P,CAAI,CACxF,EACA6c,OAAAA,EAAO5S,iBAAiB,SAAUgiC,CAAa,EAC/Cv8B,EAAMlC,GAAG,UAAW,UAAW,CAC7BqP,EAAO7S,oBAAoB,SAAUiiC,CAAa,CACpD,CAAC,EACMv8B,CACT,CACA,IAAIzE,EAASkkC,EAAoBl+D,UACjCg6B,OAAAA,EAAOnG,SAAW,SAAoB1e,EAAMu/B,EAAOhf,EAAO,CACxD,IAAInqB,EAAKsvD,EAAU76D,UAAU6zB,SAAS3zB,KAAK,KAAMiV,EAAMu/B,EAAOhf,CAAK,EAC/DmoC,EAAatyD,EAAGooB,cAAc,qBAAqB,EACvD,OAAI,KAAKgP,SAAS5hB,MAAMkxB,OAAS,cAC/B4rB,EAAWhyD,YAAYgoB,GAAS,OAAQ,CACtC/T,UAAW,sBACb,EAAG,CACD,cAAe,EACjB,CAAC,CAAC,EACF+9C,EAAWhyD,YAAYgoB,GAAS,OAAQ,CACtC/T,UAAW,mBACXpB,YAAa,IAAM,KAAKolB,SAAS,cAAc,CACjD,CAAC,CAAC,GAEGv4B,CACT,EACAyuB,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAGhD,GAFAqkC,EAAU76D,UAAUilD,YAAY/kD,KAAK,KAAMs2B,CAAM,EACjD,KAAKzV,MAAMgwB,QAAU,GACjB,KAAKvO,QAAQwT,MAAMooB,0BAErB,QADIxyB,EAAS,KAAKpJ,QAAQ27B,YAAY,EAC7Bz9C,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IAAM,CACzC,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACjBK,IAAU,KAAKA,QAGnBA,EAAMgwB,QAAUhwB,IAAU,KAAKA,MACjC,CAEJ,EACAiZ,EAAOihC,mBAAqB,SAA4BzkC,EAAQ,CAC9D,KAAK8a,SAAS,KAAKvwB,MAAMgwB,OAAO,CAClC,EACOmtB,CACT,EAAE5D,EAAS,EACXl4B,GAAWsH,kBAAkB,qBAAsBu0B,EAAkB,EACrE,IAAII,GAAmC,SAAStC,EAAc,CAC5DtuC,EAAwB,QAAW6wC,EAAmBvC,CAAY,EAClE,SAASuC,EAAkB5lC,EAAQx5B,EAAS,CAC1C,OAAIA,IAAY,SACdA,EAAU,CAAC,GAEbA,EAAQ0sC,OAASlT,EAAOylC,YAAY,EAC7BpC,EAAa77D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,IACrD,CACA,IAAI86B,EAASskC,EAAkBt+D,UAC/Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,oBAAsB81B,EAAa/7D,UAAUimC,cAAc/lC,KAAK,IAAI,CAC7E,EACA85B,EAAO6/B,qBAAuB,UAAgC,CAC5D,MAAO,oBAAsBkC,EAAa/7D,UAAU65D,qBAAqB35D,KAAK,IAAI,CACpF,EACA85B,EAAO4/B,YAAc,SAAqBJ,EAAO,CAC3CA,IAAU,SACZA,EAAQ,CAAA,GAEV,KAAKC,eAAiB,EAEtB,QADI7tB,EAAS,KAAKpJ,QAAQ27B,YAAY,EAC7Bz9C,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IAAM,CACzC,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACrB84C,EAAMjxD,KAAK,IAAI01D,GAAmB,KAAKz7B,QAAS,CAC9CzhB,MAAAA,EAEAy5C,WAAY,GAEZE,gBAAiB,EACnB,CAAC,CAAC,CACJ,CACA,OAAOlB,CACT,EACO8E,CACT,EAAErE,EAAW,EACboE,GAAiBr+D,UAAUqlD,aAAe,cAC1CjjB,GAAWsH,kBAAkB,mBAAoB20B,EAAgB,EACjE,IAAIE,GAAuC,SAAS1D,EAAW,CAC7DptC,EAAwB,QAAW+wC,EAAuB3D,CAAS,EACnE,SAAS2D,EAAsB9lC,EAAQx5B,EAAS,CAC9C,IAAIu/B,EACA2O,EAAQluC,EAAQu/D,KAChBA,EAAOxjD,WAAWmyB,EAAO,EAAE,EAC/BluC,OAAAA,EAAQkuC,MAAQA,EAChBluC,EAAQoyC,SAAWmtB,IAAS/lC,EAAOgmC,aAAa,EAChDx/D,EAAQs7D,WAAa,GACrBt7D,EAAQw7D,gBAAkB,GAC1Bj8B,EAAQo8B,EAAU36D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACjDu/B,EAAM2O,MAAQA,EACd3O,EAAMggC,KAAOA,EACbhgC,EAAMlC,GAAG7D,EAAQ,aAAc,SAAStoB,EAAG,CACzC,OAAOquB,EAAMqnB,OAAO11C,CAAC,CACvB,CAAC,EACMquB,CACT,CACA,IAAIzE,EAASwkC,EAAsBx+D,UACnCg6B,OAAAA,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChDqkC,EAAU76D,UAAUilD,YAAY/kD,KAAK,IAAI,EACzC,KAAKw4B,OAAO,EAAEgmC,aAAa,KAAKD,IAAI,CACtC,EACAzkC,EAAO8rB,OAAS,SAAgBtvB,EAAQ,CACtC,KAAK8a,SAAS,KAAK5Y,OAAO,EAAEgmC,aAAa,IAAM,KAAKD,IAAI,CAC1D,EACOD,CACT,EAAElE,EAAS,EACXiE,GAAqBv+D,UAAUu4D,cAAgB,SAC/Cn2B,GAAWsH,kBAAkB,uBAAwB60B,EAAoB,EACzE,IAAII,GAA0C,SAASzE,EAAa,CAClEzsC,EAAwB,QAAWmxC,EAAyB1E,CAAW,EACvE,SAAS0E,EAAwBlmC,EAAQx5B,EAAS,CAChD,IAAIu/B,EACJA,OAAAA,EAAQy7B,EAAYh6D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACnDu/B,EAAMm5B,YAAYh3B,IAAIn1B,aAAa,mBAAoBgzB,EAAMogC,UAAU,EACvEpgC,EAAMqgC,iBAAiB,EACvBrgC,EAAMsgC,YAAY,EAClBtgC,EAAMlC,GAAG7D,EAAQ,YAAa,SAAStoB,EAAG,CACxC,OAAOquB,EAAMqgC,iBAAiB1uD,CAAC,CACjC,CAAC,EACDquB,EAAMlC,GAAG7D,EAAQ,aAAc,SAAStoB,EAAG,CACzC,OAAOquB,EAAMsgC,YAAY3uD,CAAC,CAC5B,CAAC,EACDquB,EAAMlC,GAAG7D,EAAQ,sBAAuB,SAAStoB,EAAG,CAClD,OAAOquB,EAAMugC,0BAA0B5uD,CAAC,CAC1C,CAAC,EACMquB,CACT,CACA,IAAIzE,EAAS4kC,EAAwB5+D,UACrCg6B,OAAAA,EAAOnG,SAAW,UAAsB,CACtC,IAAItoB,EAAK2uD,EAAYl6D,UAAU6zB,SAAS3zB,KAAK,IAAI,EACjD,YAAK2+D,WAAa,iCAAmC,KAAKj8B,IAC1D,KAAKq8B,SAAWprC,GAAS,MAAO,CAC9B/T,UAAW,0BACX9D,GAAI,KAAK6iD,WACTngD,YAAa,IACf,CAAC,EACDnT,EAAGM,YAAY,KAAKozD,QAAQ,EACrB1zD,CACT,EACAyuB,EAAOyJ,QAAU,UAAmB,CAClC,KAAKw7B,SAAW,KAChB/E,EAAYl6D,UAAUyjC,QAAQvjC,KAAK,IAAI,CACzC,EACA85B,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,qBAAuBi0B,EAAYl6D,UAAUimC,cAAc/lC,KAAK,IAAI,CAC7E,EACA85B,EAAO6/B,qBAAuB,UAAgC,CAC5D,MAAO,qBAAuBK,EAAYl6D,UAAU65D,qBAAqB35D,KAAK,IAAI,CACpF,EACA85B,EAAO4/B,YAAc,UAAuB,CAG1C,QAFIsF,EAAQ,KAAKC,cAAc,EAC3B3F,EAAQ,CAAA,EACH94C,EAAKw+C,EAAMpgE,OAAS,EAAG4hB,GAAM,EAAGA,IACvC84C,EAAMjxD,KAAK,IAAIg2D,GAAqB,KAAK7lC,OAAO,EAAG,CACjD+lC,KAAMS,EAAMx+C,CAAE,EAAI,GACpB,CAAC,CAAC,EAEJ,OAAO84C,CACT,EACAx/B,EAAOw7B,qBAAuB,UAAgC,CAC5D,KAAKjqD,GAAG,EAAEE,aAAa,gBAAiB,KAAKitB,OAAO,EAAEgmC,aAAa,CAAC,CACtE,EACA1kC,EAAOirB,YAAc,SAAqBzuB,EAAQ,CAChD,IAAI4oC,EAAc,KAAK1mC,OAAO,EAAEgmC,aAAa,EACzCQ,EAAQ,KAAKC,cAAc,EAC3BE,EAAeH,EAAMvpD,QAAQypD,CAAW,EACxCE,GAAYD,EAAe,GAAKH,EAAMpgE,OAC1C,KAAK45B,OAAO,EAAEgmC,aAAaQ,EAAMI,CAAQ,CAAC,CAC5C,EACAtlC,EAAOglC,0BAA4B,SAAmCxoC,EAAQ,CAC5E,KAAKsvB,OAAO,CACd,EACA9rB,EAAOmlC,cAAgB,UAAyB,CAC9C,IAAIzmC,EAAS,KAAKA,OAAO,EACzB,OAAOA,EAAOymC,eAAiBzmC,EAAOymC,cAAc,GAAK,CAAA,CAC3D,EACAnlC,EAAOulC,sBAAwB,UAAiC,CAC9D,OAAO,KAAK7mC,OAAO,EAAEsd,OAAS,KAAKtd,OAAO,EAAEsd,MAAM0I,sBAAwB,KAAKygB,cAAc,GAAK,KAAKA,cAAc,EAAErgE,OAAS,CAClI,EACAk7B,EAAO8kC,iBAAmB,SAA0BtoC,EAAQ,CACtD,KAAK+oC,sBAAsB,EAC7B,KAAK1qC,YAAY,YAAY,EAE7B,KAAKF,SAAS,YAAY,CAE9B,EACAqF,EAAO+kC,YAAc,SAAqBvoC,EAAQ,CAC5C,KAAK+oC,sBAAsB,IAC7B,KAAKN,SAASvgD,YAAc,KAAKga,OAAO,EAAEgmC,aAAa,EAAI,IAE/D,EACOE,CACT,EAAE7F,EAAW,EACb4F,GAAwB3+D,UAAUqlD,aAAe,gBACjDjjB,GAAWsH,kBAAkB,yBAA0Bi1B,EAAuB,EAC9E,IAAIa,GAAyB,SAASlzB,EAAY,CAChD7e,EAAwB,QAAWgyC,EAASnzB,CAAU,EACtD,SAASmzB,GAAU,CACjB,OAAOnzB,EAAW79B,MAAM,KAAM/I,SAAS,GAAK,IAC9C,CACA,IAAIs0B,EAASylC,EAAQz/D,UACrBg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,cAAgBqG,EAAWtsC,UAAUimC,cAAc/lC,KAAK,IAAI,CACrE,EACA85B,EAAOnG,SAAW,SAAmB2B,EAAKkf,EAAO3gB,EAAY,CAC3D,OAAIyB,IAAQ,SACVA,EAAM,OAEJkf,IAAU,SACZA,EAAQ,CAAC,GAEP3gB,IAAe,SACjBA,EAAa,CAAC,GAEX2gB,EAAM50B,YACT40B,EAAM50B,UAAY,KAAKmmB,cAAc,GAEhCqG,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAMs1B,EAAKkf,EAAO3gB,CAAU,CACxE,EACO0rC,CACT,EAAEr9B,EAAU,EACZA,GAAWsH,kBAAkB,SAAU81B,EAAM,EAC7C,IAAIE,GAAsC,SAASC,EAAS,CAC1DlyC,EAAwB,QAAWmyC,EAAsBD,CAAO,EAChE,SAASC,GAAuB,CAC9B,OAAOD,EAAQlxD,MAAM,KAAM/I,SAAS,GAAK,IAC3C,CACA,IAAIs0B,EAAS4lC,EAAqB5/D,UAClCg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,6BAA+B05B,EAAQ3/D,UAAUimC,cAAc/lC,KAAK,IAAI,CACjF,EACA85B,EAAOnG,SAAW,UAAqB,CACrC,OAAO8rC,EAAQ3/D,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CAClD4f,UAAW,KAAKmmB,cAAc,EAG9BvnB,YAAa,MACf,CAAC,CACH,EACOkhD,CACT,EAAEJ,EAAM,EACRp9B,GAAWsH,kBAAkB,sBAAuBg2B,EAAmB,EACvE,IAAIG,GAA6B,SAASvzB,EAAY,CACpD7e,EAAwB,QAAWqyC,EAAaxzB,CAAU,EAC1D,SAASwzB,GAAc,CACrB,OAAOxzB,EAAW79B,MAAM,KAAM/I,SAAS,GAAK,IAC9C,CACA,IAAIs0B,EAAS8lC,EAAY9/D,UACzBg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,MAAO,CACrD4f,UAAW,kBACXqJ,IAAK,KACP,CAAC,CACH,EACO22C,CACT,EAAE19B,EAAU,EACZy9B,GAAW7/D,UAAU2iC,SAAW,CAC9B6B,SAAU,CAAC,aAAc,cAAe,qBAAsB,cAAe,kBAAmB,kBAAmB,cAAe,aAAc,uBAAwB,sBAAuB,yBAA0B,iBAAkB,qBAAsB,iBAAkB,mBAAoB,kBAAkB,CAC3T,EACI,yBAA0BnX,EAAkB,SAC9CwyC,GAAW7/D,UAAU2iC,SAAS6B,SAAStW,OAAO2xC,GAAW7/D,UAAU2iC,SAAS6B,SAAS1lC,OAAS,EAAG,EAAG,wBAAwB,EAE9HsjC,GAAWsH,kBAAkB,aAAcm2B,EAAU,EACrD,IAAIE,GAA+B,SAASC,EAAc,CACxDvyC,EAAwB,QAAWwyC,EAAeD,CAAY,EAC9D,SAASC,EAAcvnC,EAAQx5B,EAAS,CACtC,IAAIu/B,EACJA,OAAAA,EAAQuhC,EAAa9/D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACpDu/B,EAAMlC,GAAG7D,EAAQ,QAAS,SAAStoB,EAAG,CACpC,OAAOquB,EAAMlmB,KAAKnI,CAAC,CACrB,CAAC,EACMquB,CACT,CACA,IAAIzE,EAASimC,EAAcjgE,UAC3Bg6B,OAAAA,EAAOiM,cAAgB,UAAyB,CAC9C,MAAO,qBAAuB+5B,EAAahgE,UAAUimC,cAAc/lC,KAAK,IAAI,CAC9E,EACA85B,EAAOhG,QAAU,UAAmB,CAClC,IAAI/rB,EAAQ,KAAKywB,OAAO,EAAEzwB,MAAM,EAChC,OAAOA,EAAQ,KAAK67B,SAAS77B,EAAMP,OAAO,EAAI,EAChD,EACOu4D,CACT,EAAE5zB,EAAW,EACb0zB,GAAa//D,UAAU2iC,SAAWrV,EAAkB,QAAW,CAAC,EAAG+e,GAAYrsC,UAAU2iC,SAAU,CACjGgL,YAAa,GACbJ,WAAY,GACZU,UAAW,GACXlB,YAAa,EACf,CAAC,EACD3K,GAAWsH,kBAAkB,eAAgBq2B,EAAY,EACzD,IAAIG,GAAoB,0BACpBC,GAAc,CAAC,OAAQ,OAAO,EAC9BC,GAAa,CAAC,OAAQ,MAAM,EAC5BC,GAAa,CAAC,OAAQ,MAAM,EAC5BC,GAAc,CAAC,OAAQ,OAAO,EAC9BC,GAAgB,CAAC,OAAQ,SAAS,EAClCC,GAAY,CAAC,OAAQ,KAAK,EAC1BC,GAAc,CAAC,OAAQ,OAAO,EAC9BC,GAAe,CAAC,OAAQ,QAAQ,EAChCC,GAAiB,CAAC,IAAK,QAAQ,EAC/BC,GAAe,CAAC,MAAO,kBAAkB,EACzCC,GAAgB,CAAC,IAAK,aAAa,EACnCC,GAAgB,CAClBh/C,gBAAiB,CACf2R,SAAU,yBACVzX,GAAI,+BACJoxB,MAAO,QACPluC,QAAS,CAACihE,GAAaM,GAAaD,GAAWF,GAAaF,GAAYM,GAAcH,GAAeF,EAAU,CACjH,EACAvX,kBAAmB,CACjBr1B,SAAU,2BACVzX,GAAI,iCACJoxB,MAAO,eACPluC,QAAS,CAACyhE,GAAgBC,GAAcC,EAAa,CACvD,EACAh/C,MAAO,CACL4R,SAAU,yBACVzX,GAAI,+BACJoxB,MAAO,QACPluC,QAAS,CAACuhE,GAAaN,GAAaK,GAAWF,GAAaF,GAAYM,GAAcH,GAAeF,EAAU,CACjH,EACApX,UAAW,CACTx1B,SAAU,2BACVzX,GAAI,KACJoxB,MAAO,kBACPluC,QAAS,CAAC,CAAC,OAAQ,MAAM,EAAG,CAAC,SAAU,QAAQ,EAAG,CAAC,YAAa,WAAW,EAAG,CAAC,UAAW,SAAS,EAAG,CAAC,aAAc,YAAY,CAAC,CACpI,EACAkqD,WAAY,CACV31B,SAAU,4BACVzX,GAAI,0BACJoxB,MAAO,cACPluC,QAAS,CAAC,CAAC,wBAAyB,yBAAyB,EAAG,CAAC,qBAAsB,sBAAsB,EAAG,CAAC,oBAAqB,oBAAoB,EAAG,CAAC,iBAAkB,iBAAiB,EAAG,CAAC,SAAU,QAAQ,EAAG,CAAC,SAAU,QAAQ,EAAG,CAAC,aAAc,YAAY,CAAC,CAC9Q,EACAiqD,YAAa,CACX11B,SAAU,6BACVzX,GAAI,wBACJoxB,MAAO,YACPluC,QAAS,CAAC,CAAC,OAAQ,KAAK,EAAG,CAAC,OAAQ,KAAK,EAAG,CAAC,OAAQ,MAAM,EAAG,CAAC,OAAQ,MAAM,EAAG,CAAC,OAAQ,MAAM,EAAG,CAAC,OAAQ,MAAM,EAAG,CAAC,OAAQ,MAAM,EAAG,CAAC,OAAQ,MAAM,EAAG,CAAC,OAAQ,MAAM,CAAC,EACxK,QAAW,EACXy2C,OAAQ,SAAgBh7B,EAAG,CACzB,OAAOA,IAAM,OAAS,KAAOic,OAAOjc,CAAC,CACvC,CACF,EACAkuC,YAAa,CACXp1B,SAAU,6BACVzX,GAAI,iCACJoxB,MAAO,eACPluC,QAAS,CAACyhE,GAAgBC,EAAY,CACxC,EAEA7X,YAAa,CACXt1B,SAAU,6BACVzX,GAAI,2BACJoxB,MAAO,OACT,EAEA4b,cAAe,CACbv1B,SAAU,+BACVzX,GAAI,6BACJoxB,MAAO,eACPluC,QAAS,CAAC2hE,GAAeD,GAAcD,EAAc,CACvD,CACF,EACAG,GAAc/X,YAAY7pD,QAAU4hE,GAAch/C,gBAAgB5iB,QAClE,SAAS6hE,GAAiB9kE,EAAO05C,EAAQ,CAIvC,GAHIA,IACF15C,EAAQ05C,EAAO15C,CAAK,GAElBA,GAASA,IAAU,OACrB,OAAOA,CAEX,CACA,SAAS+kE,GAAuBz1D,EAAIoqC,EAAQ,CAC1C,IAAI15C,EAAQsP,EAAGrM,QAAQqM,EAAGrM,QAAQ+hE,aAAa,EAAEhlE,MACjD,OAAO8kE,GAAiB9kE,EAAO05C,CAAM,CACvC,CACA,SAASurB,GAAkB31D,EAAItP,EAAO05C,EAAQ,CAC5C,GAAK15C,GAGL,QAASykB,EAAK,EAAGA,EAAKnV,EAAGrM,QAAQJ,OAAQ4hB,IACvC,GAAIqgD,GAAiBx1D,EAAGrM,QAAQwhB,CAAE,EAAEzkB,MAAO05C,CAAM,IAAM15C,EAAO,CAC5DsP,EAAG01D,cAAgBvgD,EACnB,KACF,EAEJ,CACA,IAAIygD,GAAoC,SAASnB,EAAc,CAC7DvyC,EAAwB,QAAW2zC,EAAoBpB,CAAY,EACnE,SAASoB,EAAmB1oC,EAAQx5B,EAAS,CAC3C,IAAIu/B,EACJv/B,OAAAA,EAAQ+uC,UAAY,GACpBxP,EAAQuhC,EAAa9/D,KAAK,KAAMw4B,EAAQx5B,CAAO,GAAK,KACpDu/B,EAAMie,cAAgBje,EAAMie,cAAcvsC,KAAKqd,EAAgC,QAAWiR,CAAK,CAAC,EAChGA,EAAM+O,KAAK,EACX/O,EAAMmO,eAAiBnO,EAAMoO,eAAiB,GAC9CpO,EAAM4iC,UAAYxtC,GAAS,IAAK,CAC9B/T,UAAW,mBACXpB,YAAa+f,EAAMqF,SAAS,uBAAuB,CACrD,CAAC,EACDrF,EAAMlzB,GAAG,EAAEM,YAAY4yB,EAAM4iC,SAAS,EACtC5iC,EAAM6iC,YAAY,EACdpiE,EAAQqiE,2BAA6B,SACvC9iC,EAAMkE,SAAS4+B,yBAA2B9iC,EAAMkE,SAAS+C,cAAc67B,0BAEzE9iC,EAAMlC,GAAGkC,EAAM5G,EAAE,kBAAkB,EAAG,QAAS,UAAW,CACxD4G,EAAM+iC,aAAa,EACnB/iC,EAAMiO,MAAM,CACd,CAAC,EACDjO,EAAMlC,GAAGkC,EAAM5G,EAAE,qBAAqB,EAAG,QAAS,UAAW,CAC3D4G,EAAM6iC,YAAY,EAClB7iC,EAAMie,cAAc,CACtB,CAAC,EACD/rB,GAAKmwC,GAAe,SAASW,EAAQ,CACnChjC,EAAMlC,GAAGkC,EAAM5G,EAAE4pC,EAAOhuC,QAAQ,EAAG,SAAUgL,EAAMie,aAAa,CAClE,CAAC,EACGje,EAAMkE,SAAS4+B,0BACjB9iC,EAAMijC,gBAAgB,EAEjBjjC,CACT,CACA,IAAIzE,EAASonC,EAAmBphE,UAChCg6B,OAAAA,EAAOyJ,QAAU,UAAmB,CAClC,KAAK49B,UAAY,KACjBrB,EAAahgE,UAAUyjC,QAAQvjC,KAAK,IAAI,CAC1C,EACA85B,EAAO2nC,gBAAkB,SAAyB3lE,EAAK4lE,EAAUzsD,EAAM,CACrE,IAAI6qB,EAAS,KACT4hC,IAAa,SACfA,EAAW,IAETzsD,IAAS,SACXA,EAAO,SAET,IAAIssD,EAASX,GAAc9kE,CAAG,EAC1BggB,EAAKylD,EAAOzlD,GAAGxB,QAAQ,KAAM,KAAKooB,GAAG,EACrCi/B,EAAsB,CAACD,EAAU5lD,CAAE,EAAE+D,KAAK,GAAG,EAAE3K,KAAK,EACxD,MAAO,CAAC,IAAMD,EAAO,QAAU6G,EAAK,aAAe7G,IAAS,QAAU,YAAc,IAAM,KAAM,KAAK2uB,SAAS29B,EAAOr0B,KAAK,EAAG,KAAOj4B,EAAO,IAAK,4BAA8B0sD,EAAsB,IAAI,EAAEx+D,OAAOo+D,EAAOviE,QAAQwE,IAAI,SAASmP,EAAG,CAC9O,IAAIivD,EAAW9lD,EAAK,IAAMnJ,EAAE,CAAC,EAAE2H,QAAQ,OAAQ,EAAE,EACjD,MAAO,CAAC,eAAiBsnD,EAAW,YAAcjvD,EAAE,CAAC,EAAI,KAAM,oBAAsBgvD,EAAsB,IAAMC,EAAW,KAAM9hC,EAAO8D,SAASjxB,EAAE,CAAC,CAAC,EAAG,WAAW,EAAEkN,KAAK,EAAE,CAC/K,CAAC,CAAC,EAAE1c,OAAO,WAAW,EAAE0c,KAAK,EAAE,CACjC,EACAia,EAAO+nC,iBAAmB,UAA4B,CACpD,IAAIH,EAAW,wBAA0B,KAAKh/B,IAC9C,MAAO,CAAC,oDAAqD,eAAiBg/B,EAAW,KAAM,KAAK99B,SAAS,MAAM,EAAG,YAAa,KAAK69B,gBAAgB,QAASC,CAAQ,EAAG,8CAA+C,KAAKD,gBAAgB,cAAeC,CAAQ,EAAG,UAAW,aAAa,EAAE7hD,KAAK,EAAE,CAC7S,EACAia,EAAOgoC,iBAAmB,UAA4B,CACpD,IAAIJ,EAAW,uBAAyB,KAAKh/B,IAC7C,MAAO,CAAC,oDAAqD,eAAiBg/B,EAAW,KAAM,KAAK99B,SAAS,YAAY,EAAG,YAAa,KAAK69B,gBAAgB,kBAAmBC,CAAQ,EAAG,4CAA6C,KAAKD,gBAAgB,oBAAqBC,CAAQ,EAAG,UAAW,aAAa,EAAE7hD,KAAK,EAAE,CACjU,EACAia,EAAOioC,kBAAoB,UAA6B,CACtD,IAAIL,EAAW,mBAAqB,KAAKh/B,IACzC,MAAO,CAAC,wDAAyD,eAAiBg/B,EAAW,KAAM,KAAK99B,SAAS,QAAQ,EAAG,YAAa,KAAK69B,gBAAgB,cAAeC,CAAQ,EAAG,gDAAiD,KAAKD,gBAAgB,gBAAiBC,CAAQ,EAAG,UAAW,aAAa,EAAE7hD,KAAK,EAAE,CAC7T,EACAia,EAAOkoC,gBAAkB,UAA2B,CAClD,OAAOruC,GAAS,MAAO,CACrB/T,UAAW,4BACXrB,UAAW,CAAC,KAAKsjD,iBAAiB,EAAG,KAAKC,iBAAiB,EAAG,KAAKC,kBAAkB,CAAC,EAAEliD,KAAK,EAAE,CACjG,CAAC,CACH,EACAia,EAAOmoC,cAAgB,UAAyB,CAC9C,OAAOtuC,GAAS,MAAO,CACrB/T,UAAW,0BACXrB,UAAW,CAAC,wDAAyD,KAAKkjD,gBAAgB,cAAe,GAAI,QAAQ,EAAG,cAAe,sDAAuD,KAAKA,gBAAgB,YAAa,GAAI,QAAQ,EAAG,cAAe,uDAAwD,KAAKA,gBAAgB,aAAc,GAAI,QAAQ,EAAG,aAAa,EAAE5hD,KAAK,EAAE,CAChY,CAAC,CACH,EACAia,EAAOooC,kBAAoB,UAA6B,CACtD,IAAIC,EAAsB,KAAKv+B,SAAS,4CAA4C,EACpF,OAAOjQ,GAAS,MAAO,CACrB/T,UAAW,8BACXrB,UAAW,CAAC,2DAA6D4jD,EAAsB,KAAM,KAAKv+B,SAAS,OAAO,EAAG,mCAAqCu+B,EAAsB,UAAW,YAAa,iDAAmD,KAAKv+B,SAAS,MAAM,EAAI,WAAW,EAAE/jB,KAAK,EAAE,CACjT,CAAC,CACH,EACAia,EAAOhG,QAAU,UAAmB,CAClC,MAAO,CAAC,KAAKkuC,gBAAgB,EAAG,KAAKC,cAAc,EAAG,KAAKC,kBAAkB,CAAC,CAChF,EACApoC,EAAOoT,MAAQ,UAAiB,CAC9B,OAAO,KAAKtJ,SAAS,yBAAyB,CAChD,EACA9J,EAAOkT,YAAc,UAAuB,CAC1C,OAAO,KAAKpJ,SAAS,sEAAsE,CAC7F,EACA9J,EAAOiM,cAAgB,UAAyB,CAC9C,OAAO+5B,EAAahgE,UAAUimC,cAAc/lC,KAAK,IAAI,EAAI,0BAC3D,EACA85B,EAAO4uB,UAAY,UAAqB,CACtC,IAAIzoB,EAAS,KACb,OAAOnrB,GAAO8rD,GAAe,SAASjwC,EAAO4wC,EAAQzlE,EAAK,CACxD,IAAIC,EAAQ+kE,GAAuB7gC,EAAOtI,EAAE4pC,EAAOhuC,QAAQ,EAAGguC,EAAO9rB,MAAM,EAC3E,OAAI15C,IAAU,SACZ40B,EAAM70B,CAAG,EAAIC,GAER40B,CACT,EAAG,CAAC,CAAC,CACP,EACAmJ,EAAOsoC,UAAY,SAAmB5nD,EAAQ,CAC5C,IAAIsuB,EAAS,KACbrY,GAAKmwC,GAAe,SAASW,EAAQzlE,EAAK,CACxCklE,GAAkBl4B,EAAOnR,EAAE4pC,EAAOhuC,QAAQ,EAAG/Y,EAAO1e,CAAG,EAAGylE,EAAO9rB,MAAM,CACzE,CAAC,CACH,EACA3b,EAAOsnC,YAAc,UAAuB,CAC1C,IAAIn4B,EAAS,KACbxY,GAAKmwC,GAAe,SAASW,EAAQ,CACnC,IAAI/rD,EAAQ+rD,EAAOxhE,eAAe,SAAS,EAAIwhE,EAAO,QAAa,EACnEt4B,EAAOtR,EAAE4pC,EAAOhuC,QAAQ,EAAEwtC,cAAgBvrD,CAC5C,CAAC,CACH,EACAskB,EAAO0nC,gBAAkB,UAA2B,CAClD,IAAIhnD,EACJ,GAAI,CACFA,EAASvR,KAAKiK,MAAMga,EAAgB,QAAWhnB,aAAahB,QAAQ86D,EAAiB,CAAC,CACxF,OAASn3D,EAAK,CACZjB,EAAIC,KAAKgB,CAAG,CACd,CACI2R,GACF,KAAK4nD,UAAU5nD,CAAM,CAEzB,EACAsf,EAAOwnC,aAAe,UAAwB,CAC5C,GAAK,KAAK7+B,SAAS4+B,yBAGnB,KAAI7mD,EAAS,KAAKkuC,UAAU,EAC5B,GAAI,CACEhtD,OAAOmE,KAAK2a,CAAM,EAAE5b,OACtBsuB,EAAgB,QAAWhnB,aAAapB,QAAQk7D,GAAmB/2D,KAAKC,UAAUsR,CAAM,CAAC,EAEzF0S,EAAgB,QAAWhnB,aAAaZ,WAAW06D,EAAiB,CAExE,OAASn3D,EAAK,CACZjB,EAAIC,KAAKgB,CAAG,CACd,EACF,EACAixB,EAAO0iB,cAAgB,UAAyB,CAC9C,IAAI6lB,EAAY,KAAK//B,QAAQkC,SAAS,kBAAkB,EACpD69B,GACFA,EAAU7lB,cAAc,CAE5B,EACA1iB,EAAOgU,iBAAmB,UAA4B,CACpD,KAAKX,oBAAsB,KAC3B,IAAImQ,EAAK,KAAKhb,QAAQ7/B,WAClB6/D,EAAchlB,GAAMA,EAAGilB,eACvBC,EAAQllB,GAAMA,EAAGmlB,eACjBH,EACFA,EAAYzsC,MAAM,EACT2sC,GACTA,EAAM3sC,MAAM,CAEhB,EACOqrC,CACT,EAAE/0B,EAAW,EACbjK,GAAWsH,kBAAkB,oBAAqBy3B,EAAiB,EACnE,IAAIyB,GAAgC,SAASt2B,EAAY,CACvD7e,EAAwB,QAAWo1C,EAAgBv2B,CAAU,EAC7D,SAASu2B,EAAenqC,EAAQx5B,EAAS,CACvC,IAAIu/B,EACAqkC,EAA4B5jE,EAAQ6jE,gBAAkB31C,EAAgB,QAAW21C,eACjF7jE,EAAQ6jE,iBAAmB,OAC7BD,EAA4B,IAE9B,IAAIngC,EAAWjB,GAAa,CAC1B7N,SAAU,CAACivC,EACXv/B,oBAAqB,EACvB,EAAGrkC,CAAO,EACVu/B,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQiK,CAAQ,GAAK,KACnDlE,EAAMskC,eAAiB7jE,EAAQ6jE,gBAAkB31C,EAAgB,QAAW21C,eAC5EtkC,EAAMukC,cAAgB,KACtBvkC,EAAMwkC,gBAAkB,KACxBxkC,EAAMykC,kBAAoBplC,GAAS,UAAW,CAC5CW,EAAM0kC,cAAc,CACtB,EAAG,IAAK,GAAO31C,EAAgC,QAAWiR,CAAK,CAAC,EAC5DqkC,GACFrkC,EAAMwkC,gBAAkB,IAAIxkC,EAAMskC,eAAetkC,EAAMykC,iBAAiB,EACxEzkC,EAAMwkC,gBAAgBG,QAAQ1qC,EAAOntB,GAAG,CAAC,IAEzCkzB,EAAMukC,cAAgB,UAAW,CAC/B,GAAI,GAACvkC,EAAMmC,KAAO,CAACnC,EAAMmC,IAAIyiC,eAG7B,KAAIH,EAAoBzkC,EAAMykC,kBAC1BI,EAAkB7kC,EAAM6kC,gBAAkB,UAAW,CACvD3zC,GAAI,KAAM,SAAUuzC,CAAiB,EACrCvzC,GAAI,KAAM,SAAU2zC,CAAe,EACnCA,EAAkB,IACpB,EACA/mC,GAAGkC,EAAMmC,IAAIyiC,cAAe,SAAUC,CAAe,EACrD/mC,GAAGkC,EAAMmC,IAAIyiC,cAAe,SAAUH,CAAiB,EACzD,EACAzkC,EAAMvB,IAAI,OAAQuB,EAAMukC,aAAa,GAEhCvkC,CACT,CACA,IAAIzE,EAAS6oC,EAAe7iE,UAC5Bg6B,OAAAA,EAAOnG,SAAW,UAAqB,CACrC,OAAOyY,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,SAAU,CACxD4f,UAAW,qBACXqtB,SAAU,GACV3qC,MAAO,KAAKshC,SAAS,YAAY,CACnC,EAAG,CACD,cAAe,MACjB,CAAC,CACH,EACA9J,EAAOmpC,cAAgB,UAAyB,CAC1C,CAAC,KAAK3gC,SAAW,CAAC,KAAKA,QAAQ3F,SAGnC,KAAK2F,QAAQ3F,QAAQ,cAAc,CACrC,EACA7C,EAAOyJ,QAAU,UAAmB,CAC9B,KAAKy/B,mBACP,KAAKA,kBAAkBllC,OAAO,EAE5B,KAAKilC,kBACH,KAAKzgC,QAAQj3B,GAAG,GAClB,KAAK03D,gBAAgBM,UAAU,KAAK/gC,QAAQj3B,GAAG,CAAC,EAElD,KAAK03D,gBAAgBO,WAAW,GAE9B,KAAKR,eACP,KAAKrzC,IAAI,OAAQ,KAAKqzC,aAAa,EAEjC,KAAKpiC,KAAO,KAAKA,IAAIyiC,eAAiB,KAAKC,iBAC7C,KAAKA,gBAAgBpjE,KAAK,KAAK0gC,IAAIyiC,aAAa,EAElD,KAAKN,eAAiB,KACtB,KAAKU,eAAiB,KACtB,KAAKP,kBAAoB,KACzB,KAAKF,cAAgB,KACrB12B,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACO2iE,CACT,EAAEzgC,EAAU,EACZA,GAAWsH,kBAAkB,gBAAiBk5B,EAAa,EAC3D,IAAIc,GAAY,CACdC,kBAAmB,GACnBC,cAAe,EACjB,EACIC,GAA8B,SAASv3B,EAAY,CACrD7e,EAAwB,QAAWq2C,EAAcx3B,CAAU,EAC3D,SAASw3B,EAAaprC,EAAQx5B,EAAS,CACrC,IAAIu/B,EACAkE,EAAWjB,GAAagiC,GAAWxkE,EAAS,CAC9C20B,SAAU,EACZ,CAAC,EACD4K,OAAAA,EAAQ6N,EAAWpsC,KAAK,KAAMw4B,EAAQiK,CAAQ,GAAK,KACnDlE,EAAMslC,wBAA0B,SAAS3zD,EAAG,CAC1C,OAAOquB,EAAMulC,uBAAuB5zD,CAAC,CACvC,EACAquB,EAAMwlC,kBAAoB,UAAW,CACnC,OAAOxlC,EAAMylC,WAAW,CAC1B,EACAzlC,EAAM0lC,YAAc,SAAS/zD,EAAG,CAC9B,OAAOquB,EAAMosB,WAAWz6C,CAAC,CAC3B,EACAquB,EAAM2lC,uBAAyB,SAASh0D,EAAG,CACzC,OAAOquB,EAAM4lC,sBAAsBj0D,CAAC,CACtC,EACAquB,EAAM6lC,cAAgB,SAASl0D,EAAG,CAChC,OAAOquB,EAAMusB,aAAa56C,CAAC,CAC7B,EACAquB,EAAM8lC,gBAAkB,SAASn0D,EAAG,CAClC,OAAOquB,EAAMkvB,eAAev9C,CAAC,CAC/B,EACAquB,EAAM+lC,OAAO,EACb/lC,EAAMlC,GAAGkC,EAAM+D,QAAS,iBAAkB,SAASpyB,EAAG,CACpD,OAAOquB,EAAMgmC,qBAAqBr0D,CAAC,CACrC,CAAC,EACDquB,EAAMlC,GAAGkC,EAAM+D,QAAS,UAAW,UAAW,CAC5C,OAAO/D,EAAMimC,eAAe,CAC9B,CAAC,EACGtyC,IAAc,WAAY/E,EAAkB,SAAc,oBAAqBA,EAAkB,SACnGoR,EAAMlC,GAAGlP,EAAkB,QAAY,mBAAoBoR,EAAMslC,uBAAuB,EAEnFtlC,CACT,CACA,IAAIzE,EAAS8pC,EAAa9jE,UAC1Bg6B,OAAAA,EAAOgqC,uBAAyB,UAAkC,CAC5D,KAAKxhC,QAAQuI,SAAS,IAAMsgB,MAG5Bh+B,EAAkB,QAAW4mB,OAC/B,KAAK+C,aAAa,EAElB,KAAKC,cAAc,EAEvB,EACAjd,EAAOkqC,WAAa,UAAsB,CACxC,IAAInjB,EAAW,KAAKve,QAAQue,SAAS,EACrC,GAAI,GAACA,GAAY,CAACA,EAASjiD,QAG3B,KAAIyzD,EAAU37B,OAAOxJ,EAAgB,QAAWyM,YAAYC,IAAI,EAAE7sB,QAAQ,CAAC,CAAC,EACxE03D,EAAY,KAAKC,YAAc,GAAK,GAAKrS,EAAU,KAAKqS,WAAa,IACzE,KAAKA,UAAYrS,EACjB,KAAKsS,aAAe,KAAKC,YAAY,EAAIH,EACzC,IAAI3S,EAAkB,KAAKA,gBAAgB,EACvC5a,EAAc,KAAK5U,QAAQ4U,YAAY,EACvC2tB,EAAW,KAAKviC,QAAQkL,OAAO,GAAK,KAAKs3B,mBAAqBnnE,KAAKqnB,IAAI8sC,EAAkB5a,CAAW,EAAI,KAAKzU,SAASihC,eACtH,CAAC,KAAKqB,iBAAmBjT,IAAoB3G,OAC/C0Z,EAAW,IAETA,IAAa,KAAKG,kBACpB,KAAKA,gBAAkBH,EACvB,KAAKloC,QAAQ,gBAAgB,GAEjC,EACA7C,EAAOyqC,qBAAuB,UAAgC,CAC5D,KAAKC,eAAe,CACtB,EACA1qC,EAAO0qC,eAAiB,UAA0B,CAC5C,KAAKliC,QAAQuI,SAAS,IAAMsgB,KAAY,KAAKsF,WAAW,GAAK,KAAKhuB,SAASghC,mBACzE,KAAKnhC,QAAQG,SAASwiC,QACxB,KAAK3iC,QAAQ7N,SAAS,YAAY,EAEpC,KAAKsiB,cAAc,IAEnB,KAAKzU,QAAQ3N,YAAY,YAAY,EACrC,KAAKmiB,aAAa,EAEtB,EACAhd,EAAOid,cAAgB,UAAyB,CAC1C,KAAKmuB,WAAW,IAGf,KAAKH,kBACR,KAAKA,gBAAkB,KAAKziC,QAAQ6iC,WAAW,GAEjD,KAAKC,kBAAoB,KAAK78B,YAAY,KAAKw7B,kBAAmB1mC,EAAuB,EACzF,KAAK2mC,WAAW,EAChB,KAAK3nC,GAAG,KAAKiG,QAAS,CAAC,OAAQ,OAAO,EAAG,KAAKyhC,iBAAiB,EAC1D,KAAKgB,gBAIR,KAAK1oC,GAAG,KAAKiG,QAAS,SAAU,KAAK8hC,aAAa,GAHlD,KAAKpnC,IAAI,KAAKsF,QAAS,OAAQ,KAAK2hC,WAAW,EAC/C,KAAKjnC,IAAI,KAAKsF,QAAS,aAAc,KAAK4hC,sBAAsB,GAIpE,EACApqC,EAAOqqC,sBAAwB,UAAiC,CAC9D,KAAKY,gBAAkB,GACvB,KAAK1oC,GAAG,KAAKiG,QAAS,SAAU,KAAK8hC,aAAa,CACpD,EACAtqC,EAAOgxB,aAAe,UAAwB,CAC5C,IAAIua,EAAW1nE,KAAKqnB,IAAI,KAAK8sC,gBAAgB,EAAI,KAAKxvB,QAAQ4U,YAAY,CAAC,EAC3E,KAAK4tB,kBAAoB,KAAKQ,qBAAuBD,EAAW,EAChE,KAAKC,oBAAsB,GAC3B,KAAKtB,WAAW,CAClB,EACAlqC,EAAO6wB,WAAa,UAAsB,CACxC,KAAK3tB,IAAI,KAAKsF,QAAS,aAAc,KAAK+hC,eAAe,CAC3D,EACAvqC,EAAOwqC,OAAS,UAAkB,CAChC,KAAKI,UAAY,GACjB,KAAKC,aAAe,EACpB,KAAKY,aAAe,GACpB,KAAKP,gBAAkB,GACvB,KAAKD,gBAAkB,GACvB,KAAKD,kBAAoB,GACzB,KAAKQ,oBAAsB,GAC3B,KAAKh9B,cAAc,KAAK88B,iBAAiB,EACzC,KAAKA,kBAAoB,KACzB,KAAK31C,IAAI,KAAK6S,QAAS,CAAC,OAAQ,OAAO,EAAG,KAAKyhC,iBAAiB,EAChE,KAAKt0C,IAAI,KAAK6S,QAAS,SAAU,KAAK8hC,aAAa,EACnD,KAAK30C,IAAI,KAAK6S,QAAS,OAAQ,KAAK2hC,WAAW,EAC/C,KAAKx0C,IAAI,KAAK6S,QAAS,aAAc,KAAK4hC,sBAAsB,EAChE,KAAKz0C,IAAI,KAAK6S,QAAS,aAAc,KAAK+hC,eAAe,CAC3D,EACAvqC,EAAOm4B,mBAAqB,UAA8B,CACxD,KAAKqT,oBAAsB,EAC7B,EACAxrC,EAAOgd,aAAe,UAAwB,CACvC,KAAKouB,WAAW,IAGrB,KAAKZ,OAAO,EACZ,KAAK3nC,QAAQ,gBAAgB,EAC/B,EACA7C,EAAO01B,YAAc,UAAuB,CAI1C,QAHI3O,EAAW,KAAKve,QAAQue,SAAS,EACjC2kB,EAAe,CAAA,EACfhlD,EAAKqgC,EAAWA,EAASjiD,OAAS,EAC/B4hB,KACLglD,EAAan9D,KAAKw4C,EAASnkC,IAAI8D,CAAE,CAAC,EAEpC,OAAOglD,EAAa5mE,OAAS4mE,EAAaC,KAAK,EAAED,EAAa5mE,OAAS,CAAC,EAAIusD,GAC9E,EACArxB,EAAOo4B,cAAgB,UAAyB,CAI9C,QAHIrR,EAAW,KAAKve,QAAQue,SAAS,EACjC6kB,EAAiB,CAAA,EACjBllD,EAAKqgC,EAAWA,EAASjiD,OAAS,EAC/B4hB,KACLklD,EAAer9D,KAAKw4C,EAAStkC,MAAMiE,CAAE,CAAC,EAExC,OAAOklD,EAAe9mE,OAAS8mE,EAAeD,KAAK,EAAE,CAAC,EAAI,CAC5D,EACA3rC,EAAO22B,WAAa,UAAsB,CACxC,IAAIqB,EAAkB,KAAKA,gBAAgB,EAC3C,OAAIA,IAAoB3G,IACf,EAEF2G,EAAkB,KAAKI,cAAc,CAC9C,EACAp4B,EAAOy1B,OAAS,UAAkB,CAChC,OAAO,KAAK2V,WAAW,CACzB,EACAprC,EAAO0zB,WAAa,UAAsB,CACxC,MAAO,CAAC,KAAKmY,eAAe,CAC9B,EACA7rC,EAAOg4B,gBAAkB,UAA2B,CAClD,OAAO,KAAK8S,YAAY,EAAI,KAAKpV,YAAY,CAC/C,EACA11B,EAAO8qC,YAAc,UAAuB,CAC1C,IAAIpV,EAAc,KAAKA,YAAY,EACnC,OAAI,KAAK+V,eAAiB,IAAM/V,IAAgB,KAAK+V,eACnD,KAAKZ,aAAe,GAEtB,KAAKY,aAAe/V,EACb,KAAKmV,YACd,EACA7qC,EAAO6rC,eAAiB,UAA0B,CAChD,OAAO,KAAKX,eACd,EACAlrC,EAAOorC,WAAa,UAAsB,CACxC,OAAO,OAAO,KAAKE,mBAAsB,QAC3C,EACAtrC,EAAO2zB,eAAiB,UAA0B,CAChD,KAAKqX,kBAAoB,GACrB,MAAKtX,WAAW,IAGpB,KAAK8X,oBAAsB,GAC3B,KAAKhjC,QAAQ4U,YAAY,KAAK4a,gBAAgB,CAAC,EACjD,EACAh4B,EAAOyJ,QAAU,UAAmB,CAClC,KAAK9T,IAAItC,EAAkB,QAAY,mBAAoB,KAAK02C,uBAAuB,EACvF,KAAK/sB,aAAa,EAClB1K,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,IAAI,CACxC,EACO4jE,CACT,EAAE1hC,EAAU,EACZA,GAAWsH,kBAAkB,cAAem6B,EAAW,EACvD,IAAIiC,GAAgB,SAAwBr6B,EAAM,CAChD,IAAIlgC,EAAKkgC,EAAKlgC,GAAG,EACjB,GAAIA,EAAGikC,aAAa,KAAK,EACvB/D,OAAAA,EAAKoP,iBAAiBtvC,EAAGmB,GAAG,EACrB,GAET,IAAIokB,EAAU2a,EAAK3T,GAAG,QAAQ,EAC1BiuC,EAAU,CAAA,EACVr5D,EAAM,GACV,GAAI,CAACokB,EAAQhyB,OACX,MAAO,GAET,QAAS4hB,EAAK,EAAGA,EAAKoQ,EAAQhyB,OAAQ4hB,IAAM,CAC1C,IAAIjgB,EAAMqwB,EAAQpQ,CAAE,EAAEhU,IAClBjM,GAAOslE,EAAQpwD,QAAQlV,CAAG,IAAM,IAClCslE,EAAQx9D,KAAK9H,CAAG,CAEpB,CACA,OAAKslE,EAAQjnE,QAGTinE,EAAQjnE,SAAW,IACrB4N,EAAMq5D,EAAQ,CAAC,GAEjBt6B,EAAKoP,iBAAiBnuC,CAAG,EAClB,IANE,EAOX,EACIs5D,GAA8BpqE,OAAOC,eAAe,CAAC,EAAG,YAAa,CACvEoJ,IAAK,UAAgB,CACnB,OAAO,KAAKghE,UAAU,EAAI,EAAExnD,SAC9B,EACAxc,IAAK,SAAc0Y,EAAG,CACpB,IAAIurD,EAAQ74C,EAAkB,QAAW7hB,cAAc,KAAK4N,SAASjI,YAAY,CAAC,EAClF+0D,EAAMznD,UAAY9D,EAElB,QADIwrD,EAAU94C,EAAkB,QAAW+4C,uBAAuB,EAC3DF,EAAM3lD,WAAWzhB,QACtBqnE,EAAQt6D,YAAYq6D,EAAM3lD,WAAW,CAAC,CAAC,EAEzC,YAAKM,UAAY,GACjBuM,EAAgB,QAAWi5C,QAAQrmE,UAAU6L,YAAY3L,KAAK,KAAMimE,CAAO,EACpE,KAAK1nD,SACd,CACF,CAAC,EACG6nD,GAAgB,SAAwBC,EAAUzhE,EAAM,CAE1D,QADI0hE,EAAa,CAAC,EACT9lD,EAAK,EAAGA,EAAK6lD,EAASznE,SAC7B0nE,EAAa5qE,OAAO+S,yBAAyB43D,EAAS7lD,CAAE,EAAG5b,CAAI,EAC3D0hE,EAAAA,GAAcA,EAAWvkE,KAAOukE,EAAWvhE,MAFVyb,IAErC,CAIF8lD,OAAAA,EAAWtqE,WAAa,GACxBsqE,EAAWrqE,aAAe,GACnBqqE,CACT,EACIC,GAAyB,SAAiCh7B,EAAM,CAClE,OAAO66B,GAAc,CAAC76B,EAAKlgC,GAAG,EAAG6hB,EAAgB,QAAWs5C,iBAAiB1mE,UAAWotB,EAAgB,QAAWi5C,QAAQrmE,UAAWgmE,EAA2B,EAAG,WAAW,CACjL,EACIW,GAAmB,SAA2Bl7B,EAAM,CACtD,IAAIlgC,EAAKkgC,EAAKlgC,GAAG,EACjB,GAAIA,CAAAA,EAAGq7D,kBAGP,KAAI3rC,EAAM,CAAC,EACP4rC,EAAkBJ,GAAuBh7B,CAAI,EAC7Cq7B,EAAgB,SAAwBC,EAAU,CACpD,OAAO,UAAW,CAChB,QAASz3C,EAAO5pB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAM0pB,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ER,EAAKQ,CAAI,EAAI7pB,UAAU6pB,CAAI,EAE7B,IAAIy3C,EAASD,EAASt4D,MAAMlD,EAAIwjB,CAAI,EACpC+2C,OAAAA,GAAcr6B,CAAI,EACXu7B,CACT,CACF,EACA,CAAC,SAAU,cAAe,oBAAoB,EAAE/lE,QAAQ,SAASE,EAAG,CAC7DoK,EAAGpK,CAAC,IAGT85B,EAAI95B,CAAC,EAAIoK,EAAGpK,CAAC,EACboK,EAAGpK,CAAC,EAAI2lE,EAAc7rC,EAAI95B,CAAC,CAAC,EAC9B,CAAC,EACDvF,OAAOC,eAAe0P,EAAI,YAAam2B,GAAamlC,EAAiB,CACnE5kE,IAAK6kE,EAAcD,EAAgB5kE,GAAG,CACxC,CAAC,CAAC,EACFsJ,EAAGq7D,kBAAoB,UAAW,CAChCr7D,EAAGq7D,kBAAoB,KACvBhrE,OAAOmE,KAAKk7B,CAAG,EAAEh6B,QAAQ,SAASE,EAAG,CACnCoK,EAAGpK,CAAC,EAAI85B,EAAI95B,CAAC,CACf,CAAC,EACDvF,OAAOC,eAAe0P,EAAI,YAAas7D,CAAe,CACxD,EACAp7B,EAAKvO,IAAI,YAAa3xB,EAAGq7D,iBAAiB,EAC5C,EACIK,GAAwBrrE,OAAOC,eAAe,CAAC,EAAG,MAAO,CAC3DoJ,IAAK,UAAgB,CACnB,OAAI,KAAKuqC,aAAa,KAAK,EAClBsF,GAAe1nB,EAAgB,QAAWi5C,QAAQrmE,UAAU41B,aAAa11B,KAAK,KAAM,KAAK,CAAC,EAE5F,EACT,EACA+B,IAAK,SAAc0Y,EAAG,CACpByS,OAAAA,EAAgB,QAAWi5C,QAAQrmE,UAAUyL,aAAavL,KAAK,KAAM,MAAOya,CAAC,EACtEA,CACT,CACF,CAAC,EACGusD,GAAmB,SAA2Bz7B,EAAM,CACtD,OAAO66B,GAAc,CAAC76B,EAAKlgC,GAAG,EAAG6hB,EAAgB,QAAWs5C,iBAAiB1mE,UAAWinE,EAAqB,EAAG,KAAK,CACvH,EACIE,GAAiB,SAAyB17B,EAAM,CAClD,GAAKA,EAAKkT,kBAGV,KAAIpzC,EAAKkgC,EAAKlgC,GAAG,EACjB,GAAIA,CAAAA,EAAG67D,gBAGP,KAAIC,EAAgBH,GAAiBz7B,CAAI,EACrC67B,EAAkB/7D,EAAGE,aACrB87D,EAAUh8D,EAAGitC,KACjB58C,OAAOC,eAAe0P,EAAI,MAAOm2B,GAAa2lC,EAAe,CAC3DplE,IAAK,SAAc0Y,EAAG,CACpB,IAAIqsD,EAASK,EAAcplE,IAAI/B,KAAKqL,EAAIoP,CAAC,EACzC8wB,OAAAA,EAAKoP,iBAAiBtvC,EAAGmB,GAAG,EACrBs6D,CACT,CACF,CAAC,CAAC,EACFz7D,EAAGE,aAAe,SAASyC,EAAGyM,EAAG,CAC/B,IAAIqsD,EAASM,EAAgBpnE,KAAKqL,EAAI2C,EAAGyM,CAAC,EAC1C,MAAI,OAAOtN,KAAKa,CAAC,GACfu9B,EAAKoP,iBAAiBtvC,EAAGmB,GAAG,EAEvBs6D,CACT,EACAz7D,EAAGitC,KAAO,UAAW,CACnB,IAAIwuB,EAASO,EAAQrnE,KAAKqL,CAAE,EAC5B,OAAKu6D,GAAcr6B,CAAI,IACrBA,EAAKoP,iBAAiB,EAAE,EACxB8rB,GAAiBl7B,CAAI,GAEhBu7B,CACT,EACIz7D,EAAGi8D,WACL/7B,EAAKoP,iBAAiBtvC,EAAGi8D,UAAU,EACzB1B,GAAcr6B,CAAI,GAC5Bk7B,GAAiBl7B,CAAI,EAEvBlgC,EAAG67D,gBAAkB,UAAW,CAC9B77D,EAAG67D,gBAAkB,KACrB77D,EAAGitC,KAAO+uB,EACVh8D,EAAGE,aAAe67D,EAClB1rE,OAAOC,eAAe0P,EAAI,MAAO87D,CAAa,EAC1C97D,EAAGq7D,mBACLr7D,EAAGq7D,kBAAkB,CAEzB,GACF,EACIa,GAAqB,SAA6B1rE,EAAKC,EAAK0rE,EAAUC,EAAQ,CAC5EA,IAAW,SACbA,EAAS,IAEX,IAAIC,EAAO,SAAc3rE,EAAO,CAC9B,OAAOL,OAAOC,eAAeE,EAAKC,EAAK,CACrCC,MAAAA,EACAC,WAAY,GACZE,SAAU,EACZ,CAAC,CACH,EACI8C,EAAU,CACZ/C,aAAc,GACdD,WAAY,GACZ+I,IAAK,UAAgB,CACnB,IAAIhJ,EAAQyrE,EAAS,EACrBE,OAAAA,EAAK3rE,CAAK,EACHA,CACT,CACF,EACA,OAAI0rE,IACFzoE,EAAQ+C,IAAM2lE,GAEThsE,OAAOC,eAAeE,EAAKC,EAAKkD,CAAO,CAChD,EACI2oE,GAAwB,SAAS/oB,EAAO,CAC1CrxB,EAAwB,QAAWq6C,EAAQhpB,CAAK,EAChD,SAASgpB,EAAO5oE,EAASojC,EAAO,CAC9B,IAAI7D,EACJA,EAAQqgB,EAAM5+C,KAAK,KAAMhB,EAASojC,CAAK,GAAK,KAC5C,IAAIvR,EAAS7xB,EAAQ6xB,OACjBg3C,EAAoB,GAWxB,GAVAtpC,EAAMmgB,2BAA6BngB,EAAMmgB,4BAA8BngB,EAAMmC,IAAI5hB,UAAY,QACzF+R,IAAW0N,EAAMmC,IAAI4mC,aAAez2C,EAAOrkB,KAAOxN,EAAQs2B,KAAOt2B,EAAQs2B,IAAIwyC,oBAAsB,GACrGvpC,EAAMghB,UAAU1uB,CAAM,EAEtB0N,EAAMwpC,gBAAgBxpC,EAAMmC,GAAG,EAE7B1hC,EAAQgpE,iBACVzpC,EAAM0pC,wBAAwB,EAEhC1pC,EAAM2pC,aAAe,GACjB3pC,EAAMmC,IAAIynC,cAAc,EAAG,CAI7B,QAHIC,EAAQ7pC,EAAMmC,IAAIrgB,WAClBgoD,EAAcD,EAAMxpE,OACpB0pE,EAAc,CAAA,EACXD,KAAe,CACpB,IAAIjpD,EAAOgpD,EAAMC,CAAW,EACxBnvD,EAAWkG,EAAKlG,SAASjI,YAAY,EACrCiI,IAAa,UACVqlB,EAAM+b,0BAGT/b,EAAMwe,mBAAmB,EAAE1K,iBAAiBjzB,CAAI,EAChDmf,EAAM8d,iBAAiB,EAAEnM,SAAS9wB,EAAKyB,KAAK,EAC5C0d,EAAMqN,WAAW,EAAEsE,SAAS9wB,EAAKyB,KAAK,EAClC,CAACgnD,GAAqB,CAACtpC,EAAMmC,IAAI4O,aAAa,aAAa,GAAK0F,GAAc51B,EAAK5S,GAAG,IACxFq7D,EAAoB,KANtBS,EAAYjgE,KAAK+W,CAAI,EAU3B,CACA,QAASoB,GAAK,EAAGA,GAAK8nD,EAAY1pE,OAAQ4hB,KACxC+d,EAAMmC,IAAI50B,YAAYw8D,EAAY9nD,EAAE,CAAC,CAEzC,CACA+d,OAAAA,EAAMgqC,mBAAmB,EACrBhqC,EAAM+b,0BAA4ButB,GACpCjgE,EAAIC,KAAK;2CAAwI,EAEnJ02B,EAAMiqC,wCAAwC,GACzCl2C,IAAiBI,IAAab,KAAsB7yB,EAAQ07C,yBAA2B,IAC1Fnc,EAAMkqC,YAAY,EAAI,EAExBlqC,EAAMmqC,uBAAuB,EAC7BnqC,EAAM0H,aAAa,EACZ1H,CACT,CACA,IAAIzE,EAAS8tC,EAAO9nE,UACpBg6B,OAAAA,EAAOyJ,QAAU,UAAmB,CAC9B,KAAK7C,KAAO,KAAKA,IAAIwmC,iBACvB,KAAKxmC,IAAIwmC,gBAAgB,EAE3BU,EAAOe,oBAAoB,KAAKjoC,GAAG,EACnC,KAAK+B,SAAW,KAChBmc,EAAM9+C,UAAUyjC,QAAQvjC,KAAK,IAAI,CACnC,EACA85B,EAAOmuC,wBAA0B,UAAmC,CAClEhB,GAAe,IAAI,CACrB,EACAntC,EAAO0uC,wCAA0C,UAAmD,CAClG,IAAI58B,EAAa,KAAKA,WAAW,EAC7Bg9B,EACAC,EAA4B,UAAsC,CACpED,EAAmC,CAAA,EACnC,QAASpoD,EAAK,EAAGA,EAAKorB,EAAWhtC,OAAQ4hB,IAAM,CAC7C,IAAIK,EAAQ+qB,EAAWprB,CAAE,EACrBK,EAAMkxB,OAAS,YACjB62B,EAAiCvgE,KAAK,CACpCwY,MAAAA,EACAioD,WAAYjoD,EAAMK,IACpB,CAAC,CAEL,CACF,EACA2nD,EAA0B,EAC1Bj9B,EAAW9S,iBAAiB,SAAU+vC,CAAyB,EAC/D,KAAKxsC,GAAG,UAAW,UAAW,CAC5B,OAAOuP,EAAW/S,oBAAoB,SAAUgwC,CAAyB,CAC3E,CAAC,EACD,IAAIE,EAAmB,SAASC,GAAoB,CAClD,QAASxoD,EAAK,EAAGA,EAAKooD,EAAiChqE,OAAQ4hB,IAAM,CACnE,IAAIyoD,EAAcL,EAAiCpoD,CAAE,EACjDyoD,EAAYpoD,MAAMK,OAAS,YAAc+nD,EAAYpoD,MAAMK,OAAS+nD,EAAYH,aAClFG,EAAYpoD,MAAMK,KAAO+nD,EAAYH,WAEzC,CACAl9B,EAAW/S,oBAAoB,SAAUmwC,CAAiB,CAC5D,EACA,KAAK3sC,GAAG,wBAAyB,UAAW,CAC1CuP,EAAW/S,oBAAoB,SAAUgwC,CAAyB,EAClEj9B,EAAW/S,oBAAoB,SAAUkwC,CAAgB,EACzDn9B,EAAW9S,iBAAiB,SAAUiwC,CAAgB,CACxD,CAAC,EACD,KAAK1sC,GAAG,sBAAuB,UAAW,CACxCuP,EAAW/S,oBAAoB,SAAUgwC,CAAyB,EAClEj9B,EAAW9S,iBAAiB,SAAU+vC,CAAyB,EAC/Dj9B,EAAW/S,oBAAoB,SAAUkwC,CAAgB,CAC3D,CAAC,CACH,EACAjvC,EAAOovC,gBAAkB,SAAyBj0D,EAAMk0D,EAAU,CAChE,IAAIrpC,EAAS,KACb,GAAIqpC,IAAa,KAAK,iBAAmBl0D,EAAO,QAAQ,EAGxD,KAAIm0D,EAAgBn0D,EAAKhE,YAAY,EACjC,KAAKm4D,EAAgB,kBAAkB,GACzC1tE,OAAOmE,KAAK,KAAKupE,EAAgB,kBAAkB,CAAC,EAAEroE,QAAQ,SAASsoE,EAAW,CAChF,IAAIC,EAAWxpC,EAAOz0B,GAAG,EAAE+9D,EAAgB,QAAQ,EACnDE,EAASzwC,oBAAoBwwC,EAAWvpC,EAAOspC,EAAgB,kBAAkB,EAAEC,CAAS,CAAC,CAC/F,CAAC,EAEH,KAAK,iBAAmBp0D,EAAO,QAAQ,EAAI,CAACk0D,EAC5C,KAAKC,EAAgB,kBAAkB,EAAI,KAC3C,KAAKG,0BAA0BH,CAAa,EAC9C,EACAtvC,EAAO6jB,0BAA4B,SAAmCwrB,EAAU,CAC9E,KAAKD,gBAAgB,QAASC,CAAQ,CACxC,EACArvC,EAAO8jB,0BAA4B,SAAmCurB,EAAU,CAC9E,KAAKD,gBAAgB,QAASC,CAAQ,CACxC,EACArvC,EAAOyvC,0BAA4B,SAAmCtkE,EAAM,CAC1E,IAAIg7B,EAAS,KACTuU,EAAQ+D,GAAOtzC,CAAI,EACnBqkE,EAAW,KAAKj+D,GAAG,EAAEmpC,EAAMoE,UAAU,EACrC4wB,EAAa,KAAKh1B,EAAMoE,UAAU,EAAE,EACxC,GAAI,GAAC,KAAK,iBAAmBpE,EAAMmE,YAAc,QAAQ,GAAK,CAAC2wB,GAAY,CAACA,EAASxwC,kBAGrF,KAAI2wC,EAAY,CACdl5B,OAAQ,SAAgBrgC,EAAG,CACzB,IAAIomB,GAAS,CACXrhB,KAAM,SACNjQ,OAAQwkE,EACRE,cAAeF,EACfvuC,WAAYuuC,CACd,EACAA,EAAW7sC,QAAQrG,EAAM,EACrBrxB,IAAS,QACXg7B,EAAO6Y,GAAOC,WAAWH,UAAU,EAAE,EAAEjc,QAAQrG,EAAM,CAEzD,EACAka,SAAU,SAAkBtgC,EAAG,CAC7Bs5D,EAAWt5B,SAAShgC,EAAE2Q,KAAK,CAC7B,EACA4vB,YAAa,SAAqBvgC,EAAG,CACnCs5D,EAAWp5B,YAAYlgC,EAAE2Q,KAAK,CAChC,CACF,EACI8oD,EAAkB,UAA4B,CAEhD,QADIC,EAAe,CAAA,EACVppD,GAAK,EAAGA,GAAKgpD,EAAW5qE,OAAQ4hB,KAAM,CAE7C,QADIqpD,GAAQ,GACH1lB,GAAI,EAAGA,GAAImlB,EAAS1qE,OAAQulD,KACnC,GAAImlB,EAASnlB,EAAC,IAAMqlB,EAAWhpD,EAAE,EAAG,CAClCqpD,GAAQ,GACR,KACF,CAEGA,IACHD,EAAavhE,KAAKmhE,EAAWhpD,EAAE,CAAC,CAEpC,CACA,KAAOopD,EAAahrE,QAClB4qE,EAAWp5B,YAAYw5B,EAAapqC,MAAM,CAAC,CAE/C,EACA,KAAKgV,EAAMoE,WAAa,YAAY,EAAI6wB,EACxC/tE,OAAOmE,KAAK4pE,CAAS,EAAE1oE,QAAQ,SAASsoE,EAAW,CACjD,IAAIhqC,EAAWoqC,EAAUJ,CAAS,EAClCC,EAASxwC,iBAAiBuwC,EAAWhqC,CAAQ,EAC7CY,EAAO5D,GAAG,UAAW,SAASnsB,GAAG,CAC/B,OAAOo5D,EAASzwC,oBAAoBwwC,EAAWhqC,CAAQ,CACzD,CAAC,CACH,CAAC,EACD,KAAKhD,GAAG,YAAastC,CAAe,EACpC,KAAKttC,GAAG,UAAW,SAASnsB,EAAG,CAC7B,OAAO+vB,EAAOxQ,IAAI,YAAak6C,CAAe,CAChD,CAAC,EACH,EACA7vC,EAAOyuC,mBAAqB,UAA8B,CACxD,IAAIz/B,EAAS,KACbyP,GAAO1nC,MAAM9P,QAAQ,SAASkE,EAAM,CAClC6jC,EAAOygC,0BAA0BtkE,CAAI,CACvC,CAAC,CACH,EACA60B,EAAOnG,SAAW,UAAqB,CACrC,IAAItoB,EAAK,KAAKo3B,SAASnN,IACvB,GAAI,CAACjqB,GAAM,EAAE,KAAKo3B,SAASqnC,gBAAkB,KAAKC,yBAA0B,CAC1E,GAAI1+D,EAAI,CACN,IAAI2+D,EAAQ3+D,EAAG06D,UAAU,EAAI,EACzB16D,EAAG8T,YACL9T,EAAG8T,WAAWiV,aAAa41C,EAAO3+D,CAAE,EAEtCu8D,EAAOe,oBAAoBt9D,CAAE,EAC7BA,EAAK2+D,CACP,KAAO,CACL3+D,EAAK8hB,EAAkB,QAAW7hB,cAAc,OAAO,EACvD,IAAI2+D,EAAgB,KAAKxnC,SAASnN,KAAOD,GAAc,KAAKoN,SAASnN,GAAG,EACpEzB,EAAa2N,GAAa,CAAC,EAAGyoC,CAAa,GAC3C,CAAC33C,IAAiB,KAAKmQ,SAASiY,yBAA2B,KAC7D,OAAO7mB,EAAWrxB,SAEpB0yB,GAAc7pB,EAAI/O,GAAOu3B,EAAY,CACnC/X,GAAI,KAAK2mB,SAASynC,OAClB,MAAS,UACX,CAAC,CAAC,CACJ,CACA7+D,EAAG8+D,SAAW,KAAK1nC,SAAS0nC,QAC9B,CACI,OAAO,KAAK1nC,SAAS2nC,QAAY,KACnC7+D,GAAaF,EAAI,UAAW,KAAKo3B,SAAS2nC,OAAO,EAE/C,KAAK3nC,SAAS2a,0BAA4B,SAC5C/xC,EAAG+xC,wBAA0B,KAAK3a,SAAS2a,yBAG7C,QADIitB,EAAgB,CAAC,OAAQ,QAAS,cAAe,UAAU,EACtD7pD,EAAK,EAAGA,EAAK6pD,EAAczrE,OAAQ4hB,IAAM,CAChD,IAAI8pD,EAAOD,EAAc7pD,CAAE,EACvBzkB,EAAQ,KAAK0mC,SAAS6nC,CAAI,EAC1B,OAAOvuE,EAAU,MACfA,EACFwP,GAAaF,EAAIi/D,EAAMA,CAAI,EAE3Bl1C,GAAgB/pB,EAAIi/D,CAAI,EAE1Bj/D,EAAGi/D,CAAI,EAAIvuE,EAEf,CACA,OAAOsP,CACT,EACAyuB,EAAOiuC,gBAAkB,SAAyB18D,EAAI,CACpD,GAAIA,EAAAA,EAAGk/D,eAAiB,GAAKl/D,EAAGk/D,eAAiB,GAGjD,IAAIl/D,EAAGsL,aAAe,EAAG,CACvB,IAAI6zD,EAAiB,GACjBC,EAAoB,UAA8B,CACpDD,EAAiB,EACnB,EACA,KAAKnuC,GAAG,YAAaouC,CAAiB,EACtC,IAAIC,EAAmB,UAA6B,CAC7CF,GACH,KAAK7tC,QAAQ,WAAW,CAE5B,EACA,KAAKN,GAAG,iBAAkBquC,CAAgB,EAC1C,KAAKtoC,MAAM,UAAW,CACpB,KAAK3S,IAAI,YAAag7C,CAAiB,EACvC,KAAKh7C,IAAI,iBAAkBi7C,CAAgB,EACtCF,GACH,KAAK7tC,QAAQ,WAAW,CAE5B,CAAC,EACD,MACF,CACA,IAAIguC,EAAkB,CAAC,WAAW,EAClCA,EAAgBtiE,KAAK,gBAAgB,EACjCgD,EAAGsL,YAAc,GACnBg0D,EAAgBtiE,KAAK,YAAY,EAE/BgD,EAAGsL,YAAc,GACnBg0D,EAAgBtiE,KAAK,SAAS,EAE5BgD,EAAGsL,YAAc,GACnBg0D,EAAgBtiE,KAAK,gBAAgB,EAEvC,KAAK+5B,MAAM,UAAW,CACpBuoC,EAAgB5pE,QAAQ,SAASkU,EAAM,CACrC,KAAK0nB,QAAQ1nB,CAAI,CACnB,EAAG,IAAI,CACT,CAAC,EACH,EACA6kB,EAAOgiB,aAAe,SAAsB8uB,EAAa,CACvD,KAAK1C,aAAe0C,CACtB,EACA9wC,EAAOiiB,UAAY,UAAqB,CACtC,OAAO,KAAKmsB,YACd,EACApuC,EAAOkiB,eAAiB,SAAwB39C,EAAS,CACvD,GAAI,CACE,KAAK6pE,cAAgB,KAAKxnC,IAAImqC,UAAYj4C,EAC5C,KAAK8N,IAAImqC,SAASxsE,CAAO,EAEzB,KAAKqiC,IAAIwW,YAAc74C,CAE3B,OAAS6R,EAAG,CACVtI,EAAIsI,EAAG,gCAAgC,CACzC,CACF,EACA4pB,EAAO+Q,SAAW,UAAoB,CACpC,IAAI5B,EAAS,KACb,GAAI,KAAKvI,IAAImK,WAAasgB,KAAY15B,IAAcO,IAAa,KAAK0O,IAAIwW,cAAgB,EAAG,CAC3F,IAAI4zB,EAAgB,SAASC,GAAiB,CACxC9hC,EAAOvI,IAAIwW,YAAc,IACvBjO,EAAOvI,IAAImK,WAAasgB,KAC1BliB,EAAOtM,QAAQ,gBAAgB,EAEjCsM,EAAOxZ,IAAI,aAAcs7C,CAAc,EAE3C,EACA,YAAK1uC,GAAG,aAAcyuC,CAAa,EAC5BE,GACT,CACA,OAAO,KAAKtqC,IAAImK,UAAYmgC,GAC9B,EACAlxC,EAAO71B,MAAQ,UAAiB,CAC9B,OAAO,KAAKy8B,IAAI9d,WAClB,EACAkX,EAAO91B,OAAS,UAAkB,CAChC,OAAO,KAAK08B,IAAI/d,YAClB,EACAmX,EAAO4uC,uBAAyB,UAAkC,CAChE,IAAIt/B,EAAS,KACb,GAAM,+BAAgC,KAAK1I,IAG3C,KAAIuqC,EAAQ,UAAkB,CAC5B,KAAKtuC,QAAQ,mBAAoB,CAC/B03B,aAAc,EAChB,CAAC,EACG,KAAK3zB,IAAIl+B,UAAY,CAAC,KAAKigC,SAASiY,wBAA0B,KAAKl4C,SAAS,IAC9E,KAAKk+B,IAAIl+B,SAAW,GAExB,EACI0oE,EAAU,UAAoB,CAC5B,2BAA4B,KAAKxqC,KAAO,KAAKA,IAAIyqC,yBAA2B,uBAC9E,KAAKnuC,IAAI,sBAAuBiuC,CAAK,EACrC,KAAKtuC,QAAQ,mBAAoB,CAC/B03B,aAAc,GAEd+W,oBAAqB,EACvB,CAAC,EAEL,EACA,KAAK/uC,GAAG,wBAAyB6uC,CAAO,EACxC,KAAK7uC,GAAG,UAAW,UAAW,CAC5B+M,EAAO3Z,IAAI,wBAAyBy7C,CAAO,EAC3C9hC,EAAO3Z,IAAI,sBAAuBw7C,CAAK,CACzC,CAAC,EACH,EACAnxC,EAAOuxC,mBAAqB,UAA8B,CACxD,GAAI,OAAO,KAAK3qC,IAAI4qC,uBAA0B,WAAY,CACxD,IAAIjiE,EAAY6jB,EAAgB,QAAW5jB,WAAa4jB,EAAgB,QAAW5jB,UAAUD,WAAa,GAC1G,GAAI,UAAU8D,KAAK9D,CAAS,GAAK,CAAC,uBAAuB8D,KAAK9D,CAAS,EACrE,MAAO,EAEX,CACA,MAAO,EACT,EACAywB,EAAOyxC,gBAAkB,UAA2B,CAClD,IAAInqE,EAAQ,KAAKs/B,IACjB,GAAIt/B,EAAMosC,QAAUpsC,EAAMmpE,cAAgBnpE,EAAMoqE,cAC9CpgC,GAAe,KAAK1K,IAAI2B,KAAK,CAAC,EAC9B,KAAKp2B,WAAW,UAAW,CACzB7K,EAAMssC,MAAM,EACZ,GAAI,CACFtsC,EAAMkqE,sBAAsB,CAC9B,OAASp7D,EAAG,CACV,KAAKysB,QAAQ,kBAAmBzsB,CAAC,CACnC,CACF,EAAG,CAAC,MAEJ,IAAI,CACF9O,EAAMkqE,sBAAsB,CAC9B,OAASp7D,EAAG,CACV,KAAKysB,QAAQ,kBAAmBzsB,CAAC,CACnC,CAEJ,EACA4pB,EAAO2xC,eAAiB,UAA0B,CAChD,GAAI,CAAC,KAAK/qC,IAAIgrC,2BAA4B,CACxC,KAAK/uC,QAAQ,kBAAmB,IAAIhzB,MAAM,6BAA6B,CAAC,EACxE,MACF,CACA,KAAK+2B,IAAIirC,qBAAqB,CAChC,EACA7xC,EAAOmjB,wBAA0B,UAAmC,CAClE,OAAO,KAAKvc,IAAIuc,wBAAwB,CAC1C,EACAnjB,EAAO8c,0BAA4B,SAAmC0G,EAAI,CACxE,OAAI,KAAKoB,4BAA8B,CAAC,KAAKhe,IAAIkrC,WACxC,KAAKlrC,IAAIkW,0BAA0B0G,CAAE,EAEvCsB,EAAM9+C,UAAU82C,0BAA0B52C,KAAK,KAAMs9C,CAAE,CAChE,EACAxjB,EAAOsd,yBAA2B,SAAkCt7B,EAAI,CAClE,KAAK4iC,4BAA8B,CAAC,KAAKhe,IAAIkrC,WAC/C,KAAKlrC,IAAI0W,yBAAyBt7B,CAAE,EAEpC8iC,EAAM9+C,UAAUs3C,yBAAyBp3C,KAAK,KAAM8b,CAAE,CAE1D,EACAge,EAAOttB,IAAM,SAAas1C,EAAM,CAC9B,GAAIA,IAAS,OACX,OAAO,KAAKphB,IAAIl0B,IAElB,KAAKu5C,OAAOjE,CAAI,CAClB,EACAhoB,EAAO4hB,MAAQ,UAAiB,CAC9BksB,EAAOiE,kBAAkB,KAAKnrC,GAAG,CACnC,EACA5G,EAAOwtC,WAAa,UAAsB,CACxC,OAAI,KAAK7nB,eACA,KAAKA,eAAejzC,IAEtB,KAAKk0B,IAAI4mC,UAClB,EACAxtC,EAAO2uC,YAAc,SAAqBpjE,EAAK,CAC7C,KAAKq7B,IAAIl+B,SAAW,CAAC,CAAC6C,CACxB,EACAy0B,EAAO4iB,aAAe,SAAsB3K,EAAM7E,EAAOnJ,EAAU,CACjE,OAAK,KAAKuW,yBAGH,KAAK5Z,IAAIgc,aAAa3K,EAAM7E,EAAOnJ,CAAQ,EAFzC6a,EAAM9+C,UAAU48C,aAAa18C,KAAK,KAAM+xC,EAAM7E,EAAOnJ,CAAQ,CAGxE,EACAjK,EAAO6iB,sBAAwB,SAA+B39C,EAAS,CACrE,GAAI,CAAC,KAAKs7C,yBACR,OAAOsE,EAAM9+C,UAAU68C,sBAAsB38C,KAAK,KAAMhB,CAAO,EAEjE,IAAI89C,EAAmB3vB,EAAkB,QAAW7hB,cAAc,OAAO,EACzE,OAAItM,EAAQ+yC,OACV+K,EAAiB/K,KAAO/yC,EAAQ+yC,MAE9B/yC,EAAQkuC,QACV4P,EAAiB5P,MAAQluC,EAAQkuC,QAE/BluC,EAAQ+kC,UAAY/kC,EAAQm3C,WAC9B2G,EAAiB3G,QAAUn3C,EAAQ+kC,UAAY/kC,EAAQm3C,SAErDn3C,EAAQ,UACV89C,EAAiB,QAAa99C,EAAQ,SAEpCA,EAAQ8c,KACVghC,EAAiBhhC,GAAK9c,EAAQ8c,IAE5B9c,EAAQwN,MACVswC,EAAiBtwC,IAAMxN,EAAQwN,KAE1BswC,CACT,EACAhjB,EAAOiS,mBAAqB,SAA4B/sC,EAAS49C,EAAe,CAC9E,IAAIE,EAAmB8B,EAAM9+C,UAAUisC,mBAAmB/rC,KAAK,KAAMhB,EAAS49C,CAAa,EAC3F,OAAI,KAAKtC,0BACP,KAAKjvC,GAAG,EAAEM,YAAYmxC,CAAgB,EAEjCA,CACT,EACAhjB,EAAO0hB,sBAAwB,SAA+B36B,EAAO,CAEnE,GADA+9B,EAAM9+C,UAAU07C,sBAAsBx7C,KAAK,KAAM6gB,CAAK,EAClD,KAAKy5B,yBAGP,QAFI5O,EAAS,KAAK9T,GAAG,OAAO,EACxBpX,EAAKkrB,EAAO9sC,OACT4hB,MACDK,IAAU6qB,EAAOlrB,CAAE,GAAKK,IAAU6qB,EAAOlrB,CAAE,EAAEK,QAC/C,KAAKxV,GAAG,EAAES,YAAY4/B,EAAOlrB,CAAE,CAAC,CAIxC,EACAsZ,EAAOkjB,wBAA0B,UAAmC,CAClE,GAAI,OAAO,KAAK3xC,GAAG,EAAE2xC,yBAA4B,WAC/C,OAAO,KAAK3xC,GAAG,EAAE2xC,wBAAwB,EAE3C,IAAI8uB,EAAuB,CAAC,EAC5B,OAAI,OAAO,KAAKzgE,GAAG,EAAE0gE,wBAA4B,KAAe,OAAO,KAAK1gE,GAAG,EAAE2gE,wBAA4B,MAC3GF,EAAqBG,mBAAqB,KAAK5gE,GAAG,EAAE0gE,wBACpDD,EAAqBI,iBAAmB,KAAK7gE,GAAG,EAAE2gE,yBAEhD9+C,EAAgB,QAAWyM,aAAe,OAAOzM,EAAgB,QAAWyM,YAAYC,KAAQ,WAClGkyC,EAAqBK,aAAej/C,EAAgB,QAAWyM,YAAYC,IAAI,EACtE1M,EAAgB,QAAWyM,aAAezM,EAAgB,QAAWyM,YAAYyyC,QAAU,OAAOl/C,EAAgB,QAAWyM,YAAYyyC,OAAOC,iBAAoB,WAC7KP,EAAqBK,aAAej/C,EAAgB,QAAW2M,KAAKD,IAAI,EAAI1M,EAAgB,QAAWyM,YAAYyyC,OAAOC,iBAErHP,CACT,EACOlE,CACT,EAAEzuB,EAAI,EACNouB,GAAmBI,GAAO,WAAY,UAAW,CAC/C,GAAKp1C,GAAO,EAGZ,KAAInxB,EAAQ+rB,EAAkB,QAAW7hB,cAAc,OAAO,EAC1DuV,EAAQsM,EAAkB,QAAW7hB,cAAc,OAAO,EAC9DuV,OAAAA,EAAMkxB,KAAO,WACblxB,EAAMs1B,QAAU,KAChBt1B,EAAMqsB,MAAQ,UACd9rC,EAAMuK,YAAYkV,CAAK,EAChBzf,EACT,CAAC,EACDumE,GAAMrjB,YAAc,UAAW,CAC7B,GAAI,CACFqjB,GAAM2E,SAASxrB,OAAS,EAC1B,MAAY,CACV,MAAO,EACT,CACA,MAAO,CAAC,EAAE6mB,GAAM2E,UAAY3E,GAAM2E,SAASzuB,YAC7C,EACA8pB,GAAM9pB,YAAc,SAAS5oC,EAAM,CACjC,OAAO0yD,GAAM2E,SAASzuB,YAAY5oC,CAAI,CACxC,EACA0yD,GAAM7pB,cAAgB,SAASC,EAAQ/+C,EAAS,CAC9C,OAAO2oE,GAAM9pB,YAAYE,EAAO9oC,IAAI,CACtC,EACA0yD,GAAM4E,iBAAmB,UAAW,CAClC,GAAI,CACF,IAAIzrB,EAAS6mB,GAAM2E,SAASxrB,OAC5B6mB,GAAM2E,SAASxrB,OAASA,EAAS,EAAI,GACrC,IAAI0rB,EAAa1rB,IAAW6mB,GAAM2E,SAASxrB,OAC3C,OAAI0rB,GAAc75C,GAChBzF,EAAgB,QAAWjhB,WAAW,UAAW,CAC3C07D,IAASA,GAAM7nE,YACjB6nE,GAAM7nE,UAAUu+C,sBAAwByC,IAAW6mB,GAAM2E,SAASxrB,OAEtE,CAAC,EACM,IAEF0rB,CACT,MAAY,CACV,MAAO,EACT,CACF,EACA7E,GAAM8E,cAAgB,UAAW,CAC/B,GAAI,CACF,IAAIpqE,EAAQslE,GAAM2E,SAASjqE,MAC3BslE,OAAAA,GAAM2E,SAASjqE,MAAQ,CAACA,EACpBslE,GAAM2E,SAASjqE,MACjBkJ,GAAao8D,GAAM2E,SAAU,QAAS,OAAO,EAE7Cl3C,GAAgBuyC,GAAM2E,SAAU,QAAS,OAAO,EAE3CjqE,IAAUslE,GAAM2E,SAASjqE,KAClC,MAAY,CACV,MAAO,EACT,CACF,EACAslE,GAAM+E,uBAAyB,UAAW,CACxC,GAAIj7C,IAAcO,IAAaC,GAAiB,GAC9C,MAAO,GAET,GAAI,CACF,IAAIusC,EAAemJ,GAAM2E,SAAS9N,aAClCmJ,OAAAA,GAAM2E,SAAS9N,aAAeA,EAAe,EAAI,GAC1CA,IAAiBmJ,GAAM2E,SAAS9N,YACzC,MAAY,CACV,MAAO,EACT,CACF,EACAmJ,GAAMgF,sBAAwB,UAAW,CACvC,GAAI,CACF,IAAI92D,EAAQ,UAAiB,CAC7B,EACAna,OAAOC,eAAewxB,EAAkB,QAAW7hB,cAAc,OAAO,EAAG,MAAO,CAChFvG,IAAK8Q,EACL9T,IAAK8T,CACP,CAAC,EACDna,OAAOC,eAAewxB,EAAkB,QAAW7hB,cAAc,OAAO,EAAG,MAAO,CAChFvG,IAAK8Q,EACL9T,IAAK8T,CACP,CAAC,EACDna,OAAOC,eAAewxB,EAAkB,QAAW7hB,cAAc,OAAO,EAAG,YAAa,CACtFvG,IAAK8Q,EACL9T,IAAK8T,CACP,CAAC,EACDna,OAAOC,eAAewxB,EAAkB,QAAW7hB,cAAc,OAAO,EAAG,YAAa,CACtFvG,IAAK8Q,EACL9T,IAAK8T,CACP,CAAC,CACH,MAAY,CACV,MAAO,EACT,CACA,MAAO,EACT,EACA8xD,GAAMiF,yBAA2B,UAAW,CAC1C,OAAOh6C,GAAiBD,GAAUX,EACpC,EACA21C,GAAMkF,0BAA4B,UAAW,CAC3C,MAAO,CAAC,EAAElF,GAAM2E,UAAY3E,GAAM2E,SAASQ,YAC7C,EACAnF,GAAMoF,0BAA4B,UAAW,CAC3C,MAAO,CAAC,EAAEpF,GAAM2E,UAAY3E,GAAM2E,SAASrO,YAC7C,EACA0J,GAAMqF,OAAS,CAAC,YAAa,UAAW,QAAS,QAAS,UAAW,UAAW,iBAAkB,aAAc,UAAW,iBAAkB,UAAW,UAAW,UAAW,SAAU,QAAS,iBAAkB,aAAc,WAAY,OAAQ,QAAS,aAAc,SAAU,cAAc,EACpS,CAAC,CAAC,sBAAuB,eAAe,EAAG,CAAC,uBAAwB,wBAAwB,EAAG,CAAC,oBAAqB,uBAAuB,EAAG,CAAC,2BAA4B,0BAA0B,EAAG,CAAC,4BAA6B,2BAA2B,EAAG,CAAC,4BAA6B,2BAA2B,CAAC,EAAEjsE,QAAQ,SAASsoC,EAAM,CACtV,IAAIvtC,EAAMutC,EAAK,CAAC,EAAG71B,EAAK61B,EAAK,CAAC,EAC9Bk+B,GAAmBI,GAAM7nE,UAAWhE,EAAK,UAAW,CAClD,OAAO6rE,GAAMn0D,CAAE,EAAE,CACnB,EAAG,EAAI,CACT,CAAC,EACDm0D,GAAM7nE,UAAUu+C,sBAAwBspB,GAAM4E,iBAAiB,EAC/D5E,GAAM7nE,UAAUiqE,wBAA0B,CAACp3C,EAC3Cg1C,GAAM7nE,UAAUy+C,yBAA2B,GAC3CopB,GAAM7nE,UAAUk6C,uBAAyB,GACzC2tB,GAAM7nE,UAAUo6C,yBAA2B,GAC3CytB,GAAM7nE,UAAU4+C,2BAA6B,CAAC,EAAEipB,GAAM2E,UAAY3E,GAAM2E,SAAS11B,2BACjF,IAAIiH,GACJ8pB,GAAMsF,iBAAmB,UAAW,CAC9Bv7C,IAAmB,GAAK,CAACI,IAAc,CAACE,KAC1C6rB,GAAc8pB,GAAM2E,UAAY3E,GAAM2E,SAAS7lE,YAAY3G,UAAU+9C,YACrE8pB,GAAM2E,SAAS7lE,YAAY3G,UAAU+9C,YAAc,SAAS5oC,EAAM,CAChE,IAAIi4D,EAAY,4CAChB,OAAIj4D,GAAQi4D,EAAU//D,KAAK8H,CAAI,EACtB,QAEF4oC,GAAY79C,KAAK,KAAMiV,CAAI,CACpC,EAEJ,EACA0yD,GAAMwF,mBAAqB,UAAW,CACpC,IAAI/8D,EAAIu3D,GAAM2E,SAAS7lE,YAAY3G,UAAU+9C,YAC7C,OAAIA,KACF8pB,GAAM2E,SAAS7lE,YAAY3G,UAAU+9C,YAAcA,IAE9CztC,CACT,EACAu3D,GAAMsF,iBAAiB,EACvBtF,GAAMgB,oBAAsB,SAASt9D,EAAI,CACvC,GAAKA,EAML,KAHIA,EAAG8T,YACL9T,EAAG8T,WAAWrT,YAAYT,CAAE,EAEvBA,EAAG88D,cAAc,GACtB98D,EAAGS,YAAYT,EAAG2a,UAAU,EAE9B3a,EAAG+pB,gBAAgB,KAAK,EACpB,OAAO/pB,EAAGitC,MAAS,YACpB,UAAW,CACV,GAAI,CACFjtC,EAAGitC,KAAK,CACV,MAAY,CACZ,CACF,EAAG,EAEP,EACAqvB,GAAMkE,kBAAoB,SAASxgE,EAAI,CACrC,GAAKA,EAKL,SAFIulB,EAAUvlB,EAAG8jC,iBAAiB,QAAQ,EACtC3uB,EAAKoQ,EAAQhyB,OACV4hB,KACLnV,EAAGS,YAAY8kB,EAAQpQ,CAAE,CAAC,EAE5BnV,EAAG+pB,gBAAgB,KAAK,EACpB,OAAO/pB,EAAGitC,MAAS,YACpB,UAAW,CACV,GAAI,CACFjtC,EAAGitC,KAAK,CACV,MAAY,CACZ,CACF,EAAG,EAEP,EACA,CAaE,QAeA,eAaA,WAaA,WAgBA,OAcA,aAAa,EACbv3C,QAAQ,SAAS6D,EAAM,CACvB+iE,GAAM7nE,UAAU8E,CAAI,EAAI,UAAW,CACjC,OAAO,KAAK87B,IAAI97B,CAAI,GAAK,KAAK87B,IAAI4O,aAAa1qC,CAAI,CACrD,CACF,CAAC,EACD,CAYE,QAYA,eAYA,WAeA,OAaA,aAAa,EACb7D,QAAQ,SAAS6D,EAAM,CACvB+iE,GAAM7nE,UAAU,MAAQshC,GAAax8B,CAAI,CAAC,EAAI,SAAS6V,EAAG,CACxD,KAAKimB,IAAI97B,CAAI,EAAI6V,EACbA,EACF,KAAKimB,IAAIn1B,aAAa3G,EAAMA,CAAI,EAEhC,KAAK87B,IAAItL,gBAAgBxwB,CAAI,CAEjC,CACF,CAAC,EACD,CAWE,SAWA,cAYA,WAYA,SAYA,SAkBA,UAaA,QAaA,UAYA,WAaA,QAcA,eAiBA,sBAYA,0BAYA,SAgBA,eAkBA,aAYA,aAYA,cAaA,aAAa,EACb7D,QAAQ,SAAS6D,EAAM,CACvB+iE,GAAM7nE,UAAU8E,CAAI,EAAI,UAAW,CACjC,OAAO,KAAK87B,IAAI97B,CAAI,CACtB,CACF,CAAC,EACD,CAYE,SAWA,MAYA,SAkBA,UAcA,eAiBA,sBAWA,0BAaA,aAAa,EACb7D,QAAQ,SAAS6D,EAAM,CACvB+iE,GAAM7nE,UAAU,MAAQshC,GAAax8B,CAAI,CAAC,EAAI,SAAS6V,EAAG,CACxD,KAAKimB,IAAI97B,CAAI,EAAI6V,CACnB,CACF,CAAC,EACD,CAQE,QAQA,OAQA,MAAM,EACN1Z,QAAQ,SAAS6D,EAAM,CACvB+iE,GAAM7nE,UAAU8E,CAAI,EAAI,UAAW,CACjC,OAAO,KAAK87B,IAAI97B,CAAI,EAAE,CACxB,CACF,CAAC,EACDu0C,GAAKwF,mBAAmBgpB,EAAK,EAC7BA,GAAMnoB,oBAAsB,CAAC,EAC7BmoB,GAAMnoB,oBAAoB3B,YAAc,SAAS5oC,EAAM,CACrD,GAAI,CACF,OAAO0yD,GAAM2E,SAASzuB,YAAY5oC,CAAI,CACxC,MAAY,CACV,MAAO,EACT,CACF,EACA0yD,GAAMnoB,oBAAoBN,gBAAkB,SAASruB,EAAQ7xB,EAAS,CACpE,GAAI6xB,EAAO5b,KACT,OAAO0yD,GAAMnoB,oBAAoB3B,YAAYhtB,EAAO5b,IAAI,EACnD,GAAI4b,EAAOrkB,IAAK,CACrB,IAAI82C,EAAMzO,GAAiBhkB,EAAOrkB,GAAG,EACrC,OAAOm7D,GAAMnoB,oBAAoB3B,YAAY,SAAWyF,CAAG,CAC7D,CACA,MAAO,EACT,EACAqkB,GAAMnoB,oBAAoBE,aAAe,SAAS7uB,EAAQ0a,EAAMvsC,EAAS,CACvEusC,EAAKwa,OAAOl1B,EAAOrkB,GAAG,CACxB,EACAm7D,GAAMnoB,oBAAoBjc,QAAU,UAAW,CAC/C,EACAokC,GAAM9oB,sBAAsB8oB,GAAMnoB,mBAAmB,EACrDrG,GAAK6E,aAAa,QAAS2pB,EAAK,EAChC,IAAIyF,GAAwB,CAe1B,WAeA,QAeA,UAeA,UAeA,UAeA,iBAeA,aAeA,aAeA,SAeA,eAeA,iBAAiB,EAEfC,GAAoB,CACtBC,QAAS,UACTC,eAAgB,iBAChBC,QAAS,UACTC,OAAQ,QACV,EACIC,GAAmB,CAAC,OAAQ,SAAU,QAAS,SAAU,QAAS,SAAU,MAAM,EAClFC,GAAqB,CAAC,EAC1BD,GAAiB3sE,QAAQ,SAASE,EAAG,CACnC,IAAIwZ,EAAIxZ,EAAE2sE,OAAO,CAAC,IAAM,IAAM,KAAO3sE,EAAEyyD,UAAU,CAAC,EAAIzyD,EACtD0sE,GAAmB1sE,CAAC,EAAI,cAAgBwZ,CAC1C,CAAC,EACD,IAAIozD,GAAsB,CACxBC,KAAM,IACNC,OAAQ,IACRC,MAAO,IACPC,OAAQ,IACRC,MAAO,KACPC,OAAQ,KACRC,KAAMjjB,GACR,EACIkjB,GAAyB,SAASjiC,EAAY,CAChD7e,EAAwB,QAAWuc,EAASsC,CAAU,EACtD,SAAStC,EAAQxU,EAAKt2B,EAASojC,EAAO,CACpC,IAAI7D,EAOJ,GANAjJ,EAAIxZ,GAAKwZ,EAAIxZ,IAAM9c,EAAQ8c,IAAM,aAAewd,GAAQ,EACxDt6B,EAAU1C,GAAOwtC,EAAQwkC,eAAeh5C,CAAG,EAAGt2B,CAAO,EACrDA,EAAQokC,aAAe,GACvBpkC,EAAQ20B,SAAW,GACnB30B,EAAQuhC,QAAU,GAClBvhC,EAAQqkC,oBAAsB,GAC1B,CAACrkC,EAAQ+kC,SACX,GAAI,OAAOzO,EAAIi5C,SAAY,WAAY,CACrC,IAAIA,EAAUj5C,EAAIi5C,QAAQ,QAAQ,EAC9BA,GAAWA,EAAQ74C,eACrB12B,EAAQ+kC,SAAWwqC,EAAQ74C,aAAa,MAAM,EAElD,KAEE,SADI/W,EAAU2W,EACP3W,GAAWA,EAAQwU,WAAa,GAAG,CACxC,GAAIkC,GAAc1W,CAAO,EAAE5e,eAAe,MAAM,EAAG,CACjDf,EAAQ+kC,SAAWplB,EAAQ+W,aAAa,MAAM,EAC9C,KACF,CACA/W,EAAUA,EAAQQ,UACpB,CAoDJ,GAjDAof,EAAQ6N,EAAWpsC,KAAK,KAAM,KAAMhB,EAASojC,CAAK,GAAK,KACvD7D,EAAMiwC,+BAAiC,SAASt+D,EAAG,CACjD,OAAOquB,EAAMkwC,0BAA0Bv+D,CAAC,CAC1C,EACAquB,EAAMmwC,yBAA2B,SAASx+D,EAAG,CAC3C,OAAOquB,EAAMowC,mBAAmBz+D,CAAC,CACnC,EACAquB,EAAMqwC,oBAAsB,SAAS1+D,EAAG,CACtC,OAAOquB,EAAMswC,eAAe3+D,CAAC,CAC/B,EACAquB,EAAMuwC,oBAAsB,SAAS5+D,EAAG,CACtC,OAAOquB,EAAMwwC,eAAe7+D,CAAC,CAC/B,EACAquB,EAAMywC,8BAAgC,SAAS9+D,EAAG,CAChD,OAAOquB,EAAM0wC,yBAAyB/+D,CAAC,CACzC,EACAquB,EAAM2wC,sBAAwB,SAASh/D,EAAG,CACxC,OAAOquB,EAAM4wC,iBAAiBj/D,CAAC,CACjC,EACAquB,EAAM6wC,4BAA8B,SAASl/D,EAAG,CAC9C,OAAOquB,EAAM8wC,uBAAuBn/D,CAAC,CACvC,EACAquB,EAAM+wC,2BAA6B,SAASp/D,EAAG,CAC7C,OAAOquB,EAAMgxC,sBAAsBr/D,CAAC,CACtC,EACAquB,EAAMixC,0BAA4B,SAASt/D,EAAG,CAC5C,OAAOquB,EAAMkxC,qBAAqBv/D,CAAC,CACrC,EACAquB,EAAMmxC,yBAA2B,SAASx/D,EAAG,CAC3C,OAAOquB,EAAMoxC,oBAAoBz/D,CAAC,CACpC,EACAquB,EAAMqxC,oBAAsB,SAAS1/D,EAAG,CACtC,OAAOquB,EAAMsxC,eAAe3/D,CAAC,CAC/B,EACAquB,EAAMuxC,cAAgB,GACtBvxC,EAAM32B,IAAM2oB,GAAcgO,EAAMmE,GAAG,EACnCnE,EAAM41B,OAAS/lC,GACfmQ,EAAMwxC,kBAAoB,GAC1BxxC,EAAMyxC,iBAAmB,CAAA,EACzBzxC,EAAMyH,SAAW,GACjBzH,EAAMwb,YAAc,GACpBxb,EAAM0xC,YAAc,GACpB1xC,EAAM2xC,cAAgB,GACtB3xC,EAAM4xC,eAAiB,GACvB5xC,EAAM6xC,iBAAmB,GACzB7xC,EAAM8xC,gBAAkB,CACtBC,aAAc,KACdC,eAAgB,CAAA,CAClB,EACI,CAAChyC,EAAMkE,UAAY,CAAClE,EAAMkE,SAAS2hB,WAAa,CAAC7lB,EAAMkE,SAAS2hB,UAAUxlD,OAC5E,MAAM,IAAI+K,MAAM,yHAAyH,EAK3I,GAHA40B,EAAMjJ,IAAMA,EACZiJ,EAAM0rC,cAAgB30C,GAAOD,GAAcC,CAAG,EAC9CiJ,EAAMwF,SAASxF,EAAMkE,SAASsB,QAAQ,EAClC/kC,EAAQglC,UAAW,CACrB,IAAIwsC,EAAmB,CAAC,EACxB90E,OAAOq4B,oBAAoB/0B,EAAQglC,SAAS,EAAEjjC,QAAQ,SAASkE,EAAM,CACnEurE,EAAiBvrE,EAAKgM,YAAY,CAAC,EAAIjS,EAAQglC,UAAU/+B,CAAI,CAC/D,CAAC,EACDs5B,EAAMkyC,WAAaD,CACrB,MACEjyC,EAAMkyC,WAAa3mC,EAAQhqC,UAAU2iC,SAASuB,UAEhDzF,EAAMmyC,YAAY,EAClBnyC,EAAMoyC,QAAU3xE,EAAQ8mD,QAAU,GAClCvnB,EAAMqyC,UAAY,CAAC,CAAC5xE,EAAQwD,SAC5B8yB,EAAI9yB,SAAW,GACf8yB,EAAIF,gBAAgB,UAAU,EAC9BmJ,EAAMsyC,aAAe,GACrBtyC,EAAMuyC,eAAiB,CAAA,EACvBvyC,EAAMwyC,qBAAuB,CAAA,EACzBz7C,EAAIga,aAAa,UAAU,EAC7B/Q,EAAMn8B,SAAS,EAAI,EAEnBm8B,EAAMn8B,SAASm8B,EAAMkE,SAASrgC,QAAQ,EAEpCpD,EAAQgyE,SACVt1E,OAAOmE,KAAKb,EAAQgyE,OAAO,EAAEjwE,QAAQ,SAASkE,EAAM,CAClD,GAAI,OAAOs5B,EAAMt5B,CAAI,GAAM,WACzB,MAAM,IAAI0E,MAAM,WAAa1E,EAAO,kBAAkB,CAE1D,CAAC,EAEHs5B,EAAM0yC,WAAa,GACnB1yC,EAAMmC,IAAMnC,EAAM5K,SAAS,EAC3B4M,GAAQjT,EAAgC,QAAWiR,CAAK,EAAG,CACzDkC,YAAa,KACf,CAAC,EACGlC,EAAM41B,OAAOI,oBACfl4B,GAAGlP,EAAkB,QAAYoR,EAAM41B,OAAO+c,iBAAkB3yC,EAAMiwC,8BAA8B,EACpGjwC,EAAMlC,GAAGkC,EAAM41B,OAAO+c,iBAAkB3yC,EAAMiwC,8BAA8B,GAE1EjwC,EAAM4yC,QACR5yC,EAAMlC,GAAG,CAAC,cAAe,QAAQ,EAAGkC,EAAMqwC,mBAAmB,EAE/D,IAAIwC,EAAoB5vC,GAAajD,EAAMkE,QAAQ,EAC/CzjC,EAAQgyE,SACVt1E,OAAOmE,KAAKb,EAAQgyE,OAAO,EAAEjwE,QAAQ,SAASkE,EAAM,CAClDs5B,EAAMt5B,CAAI,EAAEjG,EAAQgyE,QAAQ/rE,CAAI,CAAC,CACnC,CAAC,EAECjG,EAAQ0wB,OACV6O,EAAM7O,MAAM,EAAI,EAElB6O,EAAMkE,SAAS+C,cAAgB4rC,EAC/B7yC,EAAM8yC,YAAc,CAAA,EACpB9yC,EAAM0gC,cAAcjgE,EAAQigE,aAAa,EACzC1gC,EAAM6E,aAAa,EACnB7E,EAAMmrB,QAAQp0B,EAAIpc,SAASjI,YAAY,IAAM,OAAO,EAChDstB,EAAM/7B,SAAS,EACjB+7B,EAAM9J,SAAS,sBAAsB,EAErC8J,EAAM9J,SAAS,uBAAuB,EAExC8J,EAAMmC,IAAIn1B,aAAa,OAAQ,QAAQ,EACnCgzB,EAAMmrB,QAAQ,EAChBnrB,EAAMmC,IAAIn1B,aAAa,aAAcgzB,EAAMqF,SAAS,cAAc,CAAC,EAEnErF,EAAMmC,IAAIn1B,aAAa,aAAcgzB,EAAMqF,SAAS,cAAc,CAAC,EAEjErF,EAAMmrB,QAAQ,GAChBnrB,EAAM9J,SAAS,WAAW,EAExB8J,EAAM+yC,kBAAkB,GAC1B/yC,EAAM9J,SAAS,aAAa,EAE1BnC,IACFiM,EAAM9J,SAAS,mBAAmB,EAE/B9B,GACH4L,EAAM9J,SAAS,kBAAkB,EAEnCqV,EAAQC,QAAQxL,EAAMmE,GAAG,EAAIpV,EAAgC,QAAWiR,CAAK,EAC7E,IAAIgzC,EAAe1jD,EAAStvB,MAAM,GAAG,EAAE,CAAC,EACxCggC,OAAAA,EAAM9J,SAAS,QAAU88C,CAAY,EACrChzC,EAAMizC,WAAW,EAAI,EACrBjzC,EAAM4J,mBAAmB,EACzB5J,EAAMvB,IAAI,OAAQ,SAAS9sB,EAAG,CAC5B,OAAOquB,EAAMkzC,uBAAuBvhE,CAAC,CACvC,CAAC,EACDquB,EAAMlC,GAAG,aAAc,SAASnsB,EAAG,CACjC,OAAOquB,EAAMmzC,kBAAkBxhE,CAAC,CAClC,CAAC,EACDquB,EAAMlC,GAAG,UAAW,SAASnsB,EAAG,CAC9B,OAAOquB,EAAM6I,cAAcl3B,CAAC,CAC9B,CAAC,EACDquB,EAAMlC,GAAG,iBAAkB,SAASnsB,EAAG,CACrC,OAAOquB,EAAMoE,qBAAqBzyB,CAAC,CACrC,CAAC,EACDquB,EAAMozC,YAAYpzC,EAAMkE,SAASkvC,WAAW,EAC5CpzC,EAAMjyB,WAAWiyB,EAAMkE,SAASn2B,UAAU,EAC1CiyB,EAAMlC,GAAG,QAAS,UAAW,CAC3BkC,EAAMo1B,gBAAgBp1B,EAAMkE,SAASkxB,eAAe,EACpDp1B,EAAMq1B,cAAcr1B,EAAMkE,SAASmxB,aAAa,CAClD,CAAC,EACMr1B,CACT,CACA,IAAIzE,EAASgQ,EAAQhqC,UACrBg6B,OAAAA,EAAOyJ,QAAU,UAAmB,CAClC,IAAIzD,EAAS,KACb,KAAKnD,QAAQ,SAAS,EACtB,KAAKlN,IAAI,SAAS,EAClBA,GAAItC,EAAkB,QAAY,KAAKgnC,OAAO+c,iBAAkB,KAAK1C,8BAA8B,EACnG/+C,GAAItC,EAAkB,QAAY,UAAW,KAAKuhD,wBAAwB,EACtE,KAAKkD,UAAY,KAAKA,SAASzyD,aACjC,KAAKyyD,SAASzyD,WAAWrT,YAAY,KAAK8lE,QAAQ,EAClD,KAAKA,SAAW,MAElB9nC,EAAQC,QAAQ,KAAKrH,GAAG,EAAI,KACxB,KAAKpN,KAAO,KAAKA,IAAIkD,SACvB,KAAKlD,IAAIkD,OAAS,MAEhB,KAAKkI,KAAO,KAAKA,IAAIlI,SACvB,KAAKkI,IAAIlI,OAAS,MAEhB,KAAKsd,QACP,KAAKA,MAAMvS,QAAQ,EACnB,KAAKwsC,kBAAoB,GACzB,KAAKY,QAAU,IAEb,KAAKkB,kBACP,KAAKA,gBAAkB,MAErB,KAAKv8C,MACP,KAAKA,IAAM,MAEb+rB,GAAoB,IAAI,EACxBpI,GAAIpoC,MAAM9P,QAAQ,SAASkE,EAAM,CAC/B,IAAIuvC,EAAQyE,GAAIh0C,CAAI,EAChB2rC,EAAO9Q,EAAO0U,EAAMoE,UAAU,EAAE,EAChChI,GAAQA,EAAKnhB,KACfmhB,EAAKnhB,IAAI,CAEb,CAAC,EACD2c,EAAWtsC,UAAUyjC,QAAQvjC,KAAK,KAAM,CACtCyjC,UAAW,KAAKhB,SAASgB,SAC3B,CAAC,CACH,EACA3J,EAAOnG,SAAW,UAAqB,CACrC,IAAI2B,EAAM,KAAKA,IACXjqB,EACAy+D,EAAiB,KAAK+H,gBAAkBv8C,EAAInW,YAAcmW,EAAInW,WAAWmwB,cAAgBha,EAAInW,WAAWmwB,aAAa,iBAAiB,EACtIwiC,EAAW,KAAKx8C,IAAIxW,QAAQ7N,YAAY,IAAM,WAC9C64D,EACFz+D,EAAK,KAAKq1B,IAAMpL,EAAInW,WACV2yD,IACVzmE,EAAK,KAAKq1B,IAAM0L,EAAWtsC,UAAU6zB,SAAS3zB,KAAK,KAAM,KAAK,GAEhE,IAAIw1B,EAAQH,GAAcC,CAAG,EAC7B,GAAIw8C,EAAU,CAGZ,IAFAzmE,EAAK,KAAKq1B,IAAMpL,EAChBA,EAAM,KAAKA,IAAMnI,EAAkB,QAAW7hB,cAAc,OAAO,EAC5DD,EAAGi5B,SAAS1lC,QACjB02B,EAAI3pB,YAAYN,EAAG2a,UAAU,EAE1BqO,GAAShpB,EAAI,UAAU,GAC1BopB,GAASppB,EAAI,UAAU,EAEzBA,EAAGM,YAAY2pB,CAAG,EAClBw0C,EAAiB,KAAK+H,gBAAkBxmE,EACxC3P,OAAOmE,KAAKwL,CAAE,EAAEtK,QAAQ,SAASE,GAAG,CAClC,GAAI,CACFq0B,EAAIr0B,EAAC,EAAIoK,EAAGpK,EAAC,CACf,MAAY,CACZ,CACF,CAAC,CACH,CA4BA,GA3BAq0B,EAAI/pB,aAAa,WAAY,IAAI,EACjCiqB,EAAMu8C,SAAW,MACb7/C,IAAcF,IAAaK,MAC7BiD,EAAI/pB,aAAa,OAAQ,aAAa,EACtCiqB,EAAMsX,KAAO,eAEfxX,EAAIF,gBAAgB,OAAO,EAC3BE,EAAIF,gBAAgB,QAAQ,EACxB,UAAWI,GACb,OAAOA,EAAMvxB,MAEX,WAAYuxB,GACd,OAAOA,EAAMxxB,OAEftI,OAAOq4B,oBAAoByB,CAAK,EAAEz0B,QAAQ,SAASupE,GAAM,CACjDwH,GAAYxH,KAAS,SACzBj/D,EAAGE,aAAa++D,GAAM90C,EAAM80C,EAAI,CAAC,EAE/BwH,GACFx8C,EAAI/pB,aAAa++D,GAAM90C,EAAM80C,EAAI,CAAC,CAEtC,CAAC,EACDh1C,EAAI60C,SAAW70C,EAAIxZ,GACnBwZ,EAAIxZ,IAAM,aACVwZ,EAAI1V,UAAY,WAChB0V,EAAIkD,OAASntB,EAAGmtB,OAAS,KACzB,KAAK/D,SAAS,YAAY,EACtBvH,EAAgB,QAAW8kD,2BAA6B,GAAM,CAChE,KAAKJ,SAAW74C,GAAmB,uBAAuB,EAC1D,IAAIk5C,EAAkBt6C,GAAE,sBAAsB,EAC1Cu6C,EAAQv6C,GAAE,MAAM,EACpBu6C,EAAM99C,aAAa,KAAKw9C,SAAUK,EAAkBA,EAAgB1jC,YAAc2jC,EAAMlsD,UAAU,CACpG,CACA,KAAKmsD,MAAQ,GACb,KAAKhB,OAAS,GACd,KAAKltE,MAAM,KAAKw+B,SAASx+B,KAAK,EAC9B,KAAKD,OAAO,KAAKy+B,SAASz+B,MAAM,EAChC,KAAKspC,KAAK,KAAK7K,SAAS6K,IAAI,EAC5B,KAAK8kC,MAAM,KAAK3vC,SAAS2vC,KAAK,EAC9B,KAAK/lE,YAAY,KAAKo2B,SAASp2B,WAAW,EAC1C,KAAK+oC,YAAY,KAAK3S,SAAS2S,aAAe,KAAK3S,SAAS4vC,WAAW,EAEvE,QADIC,EAAQh9C,EAAI6C,qBAAqB,GAAG,EAC/B3X,EAAK,EAAGA,EAAK8xD,EAAM1zE,OAAQ4hB,IAAM,CACxC,IAAI+xD,GAASD,EAAM97C,KAAKhW,CAAE,EAC1BiU,GAAS89C,GAAQ,YAAY,EAC7BA,GAAOhnE,aAAa,SAAU,QAAQ,CACxC,CACA+pB,OAAAA,EAAIwyC,kBAAoBxyC,EAAIi1C,aACxBj1C,EAAInW,YAAc,CAAC2qD,GACrBx0C,EAAInW,WAAWiV,aAAa/oB,EAAIiqB,CAAG,EAErCpB,GAAUoB,EAAKjqB,CAAE,EACjB,KAAKu3B,UAAU3T,QAAQqG,CAAG,EAC1B,KAAKoL,IAAIn1B,aAAa,OAAQ,KAAKuyD,SAAS,EAC5C,KAAKp9B,IAAIn1B,aAAa,YAAa,IAAI,EACvC,KAAKm1B,IAAMr1B,EACJA,CACT,EACAyuB,EAAOsb,YAAc,SAAqBr5C,EAAO,CAC/C,GAAI,CAACA,EACH,OAAO,KAAKy2E,SAAS,aAAa,EAEpC,GAAIz2E,IAAU,aAAeA,IAAU,kBAAmB,CACxD6L,EAAIC,KAAK,gEAAkE9L,EAAQ,GAAG,EACtF,MACF,CACA,KAAK02E,UAAU,iBAAkB12E,CAAK,CAExC,EACA+9B,EAAO71B,MAAQ,SAAelI,EAAO,CACnC,OAAO,KAAK0qC,UAAU,QAAS1qC,CAAK,CACtC,EACA+9B,EAAO91B,OAAS,SAAgBjI,EAAO,CACrC,OAAO,KAAK0qC,UAAU,SAAU1qC,CAAK,CACvC,EACA+9B,EAAO2M,UAAY,SAAmBisC,EAAY32E,EAAO,CACvD,IAAI42E,EAAgBD,EAAa,IACjC,GAAI32E,IAAU,OACZ,OAAO,KAAK42E,CAAa,GAAK,EAEhC,GAAI52E,IAAU,IAAMA,IAAU,OAAQ,CACpC,KAAK42E,CAAa,EAAI,OACtB,KAAK9D,eAAe,EACpB,MACF,CACA,IAAI+D,EAAY73D,WAAWhf,CAAK,EAChC,GAAI+C,MAAM8zE,CAAS,EAAG,CACpBhrE,EAAIG,MAAM,mBAAqBhM,EAAQ,sBAAwB22E,CAAU,EACzE,MACF,CACA,KAAKC,CAAa,EAAIC,EACtB,KAAK/D,eAAe,CACtB,EACA/0C,EAAOs4C,MAAQ,SAAetjB,EAAM,CAClC,IAAI7uB,EAAS,KACb,GAAI6uB,IAAS,OACX,MAAO,CAAC,CAAC,KAAKqiB,OAEhB,KAAKA,OAAS,CAAC,CAACriB,EACZnwB,GAAU,IAAI,GAChB,KAAKlP,IAAI,CAAC,cAAe,QAAQ,EAAG,KAAKm/C,mBAAmB,EAE1D9f,GACF,KAAKr6B,SAAS,WAAW,EACzB,KAAK6Y,KAAK,EAAK,EACfxO,GAAmB,KAAM,UAAW,CAClCmB,EAAO5D,GAAG,CAAC,cAAe,QAAQ,EAAG4D,EAAO2uC,mBAAmB,CACjE,CAAC,GAED,KAAKj6C,YAAY,WAAW,EAE9B,KAAKk6C,eAAe,CACtB,EACA/0C,EAAOwT,KAAO,SAAcwhB,EAAM,CAChC,GAAIA,IAAS,OACX,MAAO,CAAC,CAAC,KAAKqjB,MAEhB,KAAKA,MAAQ,CAAC,CAACrjB,EACXA,GACF,KAAKr6B,SAAS,UAAU,EACxB,KAAK29C,MAAM,EAAK,GAEhB,KAAKz9C,YAAY,UAAU,CAE/B,EACAmF,EAAOztB,YAAc,SAAqBwmE,EAAO,CAC/C,GAAIA,IAAU,OACZ,OAAO,KAAKC,aAEd,GAAI,CAAC,aAAa3lE,KAAK0lE,CAAK,EAC1B,MAAM,IAAIlpE,MAAM,gGAAgG,EAElH,KAAKmpE,aAAeD,EACpB,KAAKT,MAAM,EAAI,EACf,KAAKvD,eAAe,CACtB,EACA/0C,EAAO+0C,eAAiB,UAA0B,CAChD,GAAI3hD,EAAgB,QAAW8kD,2BAA6B,GAAM,CAChE,IAAInnD,EAAS,OAAO,KAAKkoD,QAAW,SAAW,KAAKA,OAAS,KAAKtwC,SAASx+B,MACvE+uE,EAAU,OAAO,KAAKC,SAAY,SAAW,KAAKA,QAAU,KAAKxwC,SAASz+B,OAC1EkvE,EAAS,KAAKp9B,OAAS,KAAKA,MAAMzqC,GAAG,EACrC6nE,IACEroD,GAAU,IACZqoD,EAAOjvE,MAAQ4mB,GAEbmoD,GAAW,IACbE,EAAOlvE,OAASgvE,IAGpB,MACF,CACA,IAAI/uE,EACAD,EACAqI,EACA8mE,EACA,KAAKL,eAAiB,QAAU,KAAKA,eAAiB,OACxDzmE,EAAc,KAAKymE,aACV,KAAKM,WAAW,EAAI,EAC7B/mE,EAAc,KAAK+mE,WAAW,EAAI,IAAM,KAAKC,YAAY,EAEzDhnE,EAAc,OAEhB,IAAIinE,EAAajnE,EAAY9N,MAAM,GAAG,EAClCg1E,EAAkBD,EAAW,CAAC,EAAIA,EAAW,CAAC,EAC9C,KAAKP,SAAW,OAClB9uE,EAAQ,KAAK8uE,OACJ,KAAKE,UAAY,OAC1BhvE,EAAQ,KAAKgvE,QAAUM,EAEvBtvE,EAAQ,KAAKmvE,WAAW,GAAK,IAE3B,KAAKH,UAAY,OACnBjvE,EAAS,KAAKivE,QAEdjvE,EAASC,EAAQsvE,EAEf,aAAapmE,KAAK,KAAK2O,GAAG,CAAC,EAC7Bq3D,EAAU,cAAgB,KAAKr3D,GAAG,EAElCq3D,EAAU,KAAKr3D,GAAG,EAAI,cAExB,KAAK2Y,SAAS0+C,CAAO,EACrBl6C,GAAe,KAAK24C,SAAU;SAAcuB,EAAU;iBAAwBlvE,EAAQ;kBAA0BD,EAAS;;;SAA4BmvE,EAAU;uBAAkEI,EAAkB,IAAM;;KAAmB,CAC9Q,EACAz5C,EAAOyqB,UAAY,SAAmBF,EAAUxzB,EAAQ,CACtD,IAAIiY,EAAS,KACT,KAAKgN,OACP,KAAK09B,YAAY,EAEnB,IAAIC,EAAgBryC,GAAaijB,CAAQ,EACrCqvB,EAAgBrvB,EAASupB,OAAO,CAAC,EAAE38D,YAAY,EAAIozC,EAAS3uC,MAAM,CAAC,EACnE+9D,IAAkB,SAAW,KAAKn+C,MACpC6jB,GAAKgF,QAAQ,OAAO,EAAEwqB,oBAAoB,KAAKrzC,GAAG,EAClD,KAAKA,IAAIkD,OAAS,KAClB,KAAKlD,IAAM,MAEb,KAAKq+C,UAAYF,EACjB,KAAKztC,SAAW,GAChB,IAAI5jC,EAAW,KAAKA,SAAS,GACzB,OAAO,KAAKA,SAAS,GAAM,UAAY,KAAKA,SAAS,IAAM,IAAQ,KAAKqgC,SAASmxC,qBACnFxxE,EAAW,IAEb,IAAIyxE,EAAc,CAChBhjD,OAAAA,EACAzuB,SAAAA,EACA,uBAA0B,KAAKqgC,SAASiY,uBACxC,SAAY,KAAK5+B,GAAG,EACpB,OAAU,KAAKA,GAAG,EAAI,IAAM43D,EAAgB,OAC5C,YAAe,KAAKjxC,SAASgb,YAC7B,QAAW,KAAKhb,SAAS2nC,QACzB,KAAQ,KAAK3nC,SAAStgC,KACtB,wBAA2B,KAAKsgC,SAAS2a,wBACzC,MAAS,KAAK3a,SAASpgC,MACvB,OAAU,KAAKyjD,OAAO,EACtB,SAAY,KAAK/hB,SAAS,EAC1B,eAAkB,KAAK8tC,iBAAmB,GAC1C,SAAU,KAAKpvC,SAAS,QAAQ,EAChC,kBAAqB,CAAC,CAAC,KAAKA,SAASqxC,sBACrC,gBAAmB,KAAKrxC,SAASulC,gBACjC,QAAW,KAAKvlC,SAASj4B,OAC3B,EACAyuC,GAAIpoC,MAAM9P,QAAQ,SAASkE,EAAM,CAC/B,IAAIuvC,GAAQyE,GAAIh0C,CAAI,EACpB4uE,EAAYr/B,GAAMoE,UAAU,EAAI9P,EAAO0L,GAAMqE,WAAW,CAC1D,CAAC,EACDv8C,GAAOu3E,EAAa,KAAKpxC,SAASgxC,CAAa,CAAC,EAChDn3E,GAAOu3E,EAAa,KAAKpxC,SAASixC,CAAa,CAAC,EAChDp3E,GAAOu3E,EAAa,KAAKpxC,SAAS4hB,EAASpzC,YAAY,CAAC,CAAC,EACrD,KAAKqkB,MACPu+C,EAAYv+C,IAAM,KAAKA,KAErBzE,GAAUA,EAAOrkB,MAAQ,KAAKi3C,OAAOj3C,KAAO,KAAKi3C,OAAOvM,YAAc,IACxE28B,EAAYhyE,UAAY,KAAK4hD,OAAOvM,aAEtC,IAAI68B,EAAY56B,GAAKgF,QAAQkG,CAAQ,EACrC,GAAI,CAAC0vB,EACH,MAAM,IAAIpqE,MAAM,kBAAoB8pE,EAAgB,cAAgBA,EAAgB,sDAAsD,EAE5I,KAAK39B,MAAQ,IAAIi+B,EAAUF,CAAW,EACtC,KAAK/9B,MAAM1T,MAAMnyB,GAAK,KAAM,KAAK+jE,gBAAgB,EAAG,EAAI,EACxD/nC,GAAmBJ,iBAAiB,KAAKooC,iBAAmB,CAAA,EAAI,KAAKn+B,KAAK,EAC1Es3B,GAAsBrsE,QAAQ,SAASu1B,EAAQ,CAC7CwS,EAAOzM,GAAGyM,EAAOgN,MAAOxf,EAAQ,SAASpmB,GAAG,CAC1C,OAAO44B,EAAO,aAAe1H,GAAa9K,CAAM,EAAI,GAAG,EAAEpmB,EAAC,CAC5D,CAAC,CACH,CAAC,EACDxU,OAAOmE,KAAKwtE,EAAiB,EAAEtsE,QAAQ,SAASu1B,EAAQ,CACtDwS,EAAOzM,GAAGyM,EAAOgN,MAAOxf,EAAQ,SAAS49C,GAAU,CACjD,GAAIprC,EAAOgN,MAAM0oB,aAAa,IAAM,GAAK11B,EAAOgN,MAAMq+B,QAAQ,EAAG,CAC/DrrC,EAAOknC,iBAAiB3nE,KAAK,CAC3B6L,SAAU40B,EAAO,aAAeukC,GAAkB/2C,CAAM,EAAI,GAAG,EAAErmB,KAAK64B,CAAM,EAC5Ez3B,MAAO6iE,EACT,CAAC,EACD,MACF,CACAprC,EAAO,aAAeukC,GAAkB/2C,CAAM,EAAI,GAAG,EAAE49C,EAAQ,CACjE,CAAC,CACH,CAAC,EACD,KAAK73C,GAAG,KAAKyZ,MAAO,YAAa,SAAS5lC,EAAG,CAC3C,OAAO44B,EAAOsrC,qBAAqBlkE,CAAC,CACtC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,YAAa,SAAS5lC,EAAG,CAC3C,OAAO44B,EAAOurC,qBAAqBnkE,CAAC,CACtC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,UAAW,SAAS5lC,EAAG,CACzC,OAAO44B,EAAOwrC,mBAAmBpkE,CAAC,CACpC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,QAAS,SAAS5lC,EAAG,CACvC,OAAO44B,EAAOyrC,iBAAiBrkE,CAAC,CAClC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,UAAW,SAAS5lC,EAAG,CACzC,OAAO44B,EAAO0rC,mBAAmBtkE,CAAC,CACpC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,OAAQ,SAAS5lC,EAAG,CACtC,OAAO44B,EAAO2rC,gBAAgBvkE,CAAC,CACjC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,YAAa,SAAS5lC,EAAG,CAC3C,OAAO44B,EAAO4rC,qBAAqBxkE,CAAC,CACtC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,QAAS,SAAS5lC,EAAG,CACvC,OAAO44B,EAAO6rC,iBAAiBzkE,CAAC,CAClC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,iBAAkB,SAAS5lC,EAAG,CAChD,OAAO44B,EAAO8rC,0BAA0B1kE,CAAC,CAC3C,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,mBAAoB,SAAS5lC,EAAG2H,GAAM,CACxD,OAAOixB,EAAO+rC,4BAA4B3kE,EAAG2H,EAAI,CACnD,CAAC,EACD,KAAKwkB,GAAG,KAAKyZ,MAAO,kBAAmB,SAAS5lC,EAAGrH,GAAK,CACtD,OAAOigC,EAAOgsC,2BAA2B5kE,EAAGrH,EAAG,CACjD,CAAC,EACD,KAAKwzB,GAAG,KAAKyZ,MAAO,wBAAyB,SAAS5lC,EAAG,CACvD,OAAO44B,EAAOisC,iCAAiC7kE,CAAC,CAClD,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,wBAAyB,SAAS5lC,EAAG,CACvD,OAAO44B,EAAOksC,iCAAiC9kE,CAAC,CAClD,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,QAAS,SAAS5lC,EAAG,CACvC,OAAO44B,EAAOmsC,iBAAiB/kE,CAAC,CAClC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,eAAgB,SAAS5lC,EAAG,CAC9C,OAAO44B,EAAOosC,wBAAwBhlE,CAAC,CACzC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,WAAY,SAAS5lC,EAAG,CAC1C,OAAO44B,EAAOqsC,oBAAoBjlE,CAAC,CACrC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,aAAc,SAAS5lC,EAAG,CAC5C,OAAO44B,EAAOssC,sBAAsBllE,CAAC,CACvC,CAAC,EACD,KAAKmsB,GAAG,KAAKyZ,MAAO,iBAAkB,KAAK84B,mBAAmB,EAC9D,KAAKyG,oBAAoB,KAAK7C,SAAS,UAAU,CAAC,EAC9C,KAAKhwE,SAAS,GAAK,CAAC,KAAK6yE,oBAAoB,GAC/C,KAAKC,0BAA0B,EAE7B,KAAKx/B,MAAMzqC,GAAG,EAAE8T,aAAe,KAAK9T,GAAG,IAAMooE,IAAkB,SAAW,CAAC,KAAKn+C,MAClFpB,GAAU,KAAK4hB,MAAMzqC,GAAG,EAAG,KAAKA,GAAG,CAAC,EAElC,KAAKiqB,MACP,KAAKA,IAAIkD,OAAS,KAClB,KAAKlD,IAAM,KAEf,EACAwE,EAAO05C,YAAc,UAAuB,CAC1C,IAAIvqC,EAAS,KACbgQ,GAAIpoC,MAAM9P,QAAQ,SAASkE,EAAM,CAC/B,IAAIuvC,EAAQyE,GAAIh0C,CAAI,EACpBgkC,EAAOuL,EAAMqE,WAAW,EAAI5P,EAAOuL,EAAMoE,UAAU,EAAE,CACvD,CAAC,EACD,KAAKq7B,gBAAkBhoC,GAAmBX,iBAAiB,KAAKwK,KAAK,EACrE,KAAK9P,SAAW,GAChB,KAAK8P,MAAMvS,QAAQ,EACnB,KAAKuS,MAAQ,GACT,KAAKi6B,oBACP,KAAKY,QAAU,GACf,KAAKh0C,QAAQ,cAAc,GAE7B,KAAKozC,kBAAoB,EAC3B,EACAj2C,EAAOyR,KAAO,SAAcgqC,EAAQ,CAClC,OAAIA,IAAW,QACb3tE,EAAIC,KAAK;;CAAoJ,EAExJ,KAAKiuC,KACd,EACAhc,EAAOw7C,0BAA4B,UAAqC,CACtE,KAAKE,6BAA6B,EAClC,KAAKn5C,GAAG,KAAKyZ,MAAO,QAAS,KAAKo5B,qBAAqB,EACvD,KAAK7yC,GAAG,KAAKyZ,MAAO,WAAY,KAAKs5B,2BAA2B,EAChE,KAAK/yC,GAAG,KAAKyZ,MAAO,aAAc,KAAKw5B,0BAA0B,EACjE,KAAKjzC,GAAG,KAAKyZ,MAAO,YAAa,KAAK05B,yBAAyB,EAC/D,KAAKnzC,GAAG,KAAKyZ,MAAO,WAAY,KAAK45B,wBAAwB,EAC7D,KAAKrzC,GAAG,KAAKyZ,MAAO,MAAO,KAAK85B,mBAAmB,CACrD,EACA91C,EAAO07C,6BAA+B,UAAwC,CAC5E,KAAK/lD,IAAI,KAAKqmB,MAAO,MAAO,KAAK85B,mBAAmB,EACpD,KAAKngD,IAAI,KAAKqmB,MAAO,aAAc,KAAKw5B,0BAA0B,EAClE,KAAK7/C,IAAI,KAAKqmB,MAAO,YAAa,KAAK05B,yBAAyB,EAChE,KAAK//C,IAAI,KAAKqmB,MAAO,WAAY,KAAK45B,wBAAwB,EAC9D,KAAKjgD,IAAI,KAAKqmB,MAAO,QAAS,KAAKo5B,qBAAqB,EACxD,KAAKz/C,IAAI,KAAKqmB,MAAO,WAAY,KAAKs5B,2BAA2B,CACnE,EACAt1C,EAAOk6C,iBAAmB,UAA4B,CACpD,KAAK/tC,aAAa,EACd,KAAKwd,OAAO3C,QACd,KAAK2xB,UAAU,YAAa,KAAKhvB,OAAO3C,MAAM,EAEhD,KAAKo0B,wBAAwB,EAC7B,KAAKN,0BAA0B,CACjC,EACA96C,EAAOs6C,qBAAuB,UAAgC,CAC5D,KAAKz/C,YAAY,WAAW,EAC5B,KAAKA,YAAY,aAAa,EAC9B,KAAK5sB,MAAM,IAAI,EACf,KAAK6sE,0BAA0B,EAC1B,KAAKpnC,OAAO,GAIf,KAAK23B,WAAW,EAAK,EACrB,KAAKxoC,QAAQ,WAAW,IAJxB,KAAKA,QAAQ,WAAW,EACxB,KAAKA,QAAQ,WAAW,GAK1B,KAAK84C,gBAAgB,KAAKrzE,SAAS,IAAM,IAAQ,KAAKqgC,SAASmxC,kBAAoB,OAAS,KAAKxxE,SAAS,CAAC,CAC7G,EACA03B,EAAO27C,gBAAkB,SAAyBxgE,EAAM,CACtD,IAAIm0B,EAAS,KACb,GAAI,GAAC,KAAK0M,OAAS,OAAO7gC,GAAS,UAGnC,KAAIygE,EAAe,UAAyB,CAC1C,IAAIC,EAAkBvsC,EAAO/mC,MAAM,EACnC+mC,EAAO/mC,MAAM,EAAI,EACjB,IAAIuzE,EAAe,UAAyB,CAC1CxsC,EAAO/mC,MAAMszE,CAAe,CAC9B,EACAvsC,EAAO2nC,qBAAqB1oE,KAAKutE,CAAY,EAC7C,IAAIC,EAAezsC,EAAO/G,KAAK,EAC/B,GAAK8I,GAAW0qC,CAAY,EAG5B,OAAOA,EAAa,MAAS,SAAShtE,EAAK,CACzC+sE,MAAAA,EAAa,EACP,IAAIjsE,MAAM,wDAA0Dd,GAAY,GAAG,CAC3F,CAAC,CACH,EACIitE,EAWJ,GAVI7gE,IAAS,OAAS,CAAC,KAAK5S,MAAM,GAChCyzE,EAAU,KAAKzzC,KAAK,EAChB8I,GAAW2qC,CAAO,IACpBA,EAAUA,EAAQ,MAASJ,CAAY,IAEhCzgE,IAAS,SAAW,CAAC,KAAK5S,MAAM,EACzCyzE,EAAUJ,EAAa,EAEvBI,EAAU,KAAKzzC,KAAK,EAElB,EAAC8I,GAAW2qC,CAAO,EAGvB,OAAOA,EAAQzrE,KAAK,UAAW,CAC7B++B,EAAOzM,QAAQ,CACb1nB,KAAM,mBACN7S,SAAU6S,CACZ,CAAC,CACH,CAAC,EAAE,MAAS,UAAW,CACrBm0B,EAAOzM,QAAQ,CACb1nB,KAAM,mBACN7S,SAAU6S,CACZ,CAAC,CACH,CAAC,EACH,EACA6kB,EAAOi8C,oBAAsB,SAA6Bh4B,EAAQ,CAC5DA,IAAW,SACbA,EAAS,IAEX,IAAIvxC,EAAMuxC,EACN9oC,EAAO,GACP,OAAOzI,GAAQ,WACjBA,EAAMuxC,EAAOvxC,IACbyI,EAAO8oC,EAAO9oC,MAEhB,KAAKwuC,OAAO5yB,OAAS,KAAK4yB,OAAO5yB,QAAU,CAAC,EAC5C,KAAK4yB,OAAO7yB,QAAU,KAAK6yB,OAAO7yB,SAAW,CAAA,EACzCpkB,GAAO,CAACyI,IACVA,EAAOuuC,GAAa,KAAMh3C,CAAG,GAE/B,KAAKi3C,OAAO5yB,OAAS2Q,GAAa,CAAC,EAAGuc,EAAQ,CAC5CvxC,IAAAA,EACAyI,KAAAA,CACF,CAAC,EAOD,QANIyuC,EAAkB,KAAKD,OAAO7yB,QAAQhB,OAAO,SAASxV,GAAG,CAC3D,OAAOA,GAAE5N,KAAO4N,GAAE5N,MAAQA,CAC5B,CAAC,EACGwpE,EAAkB,CAAA,EAClBC,EAAY,KAAKr+C,GAAG,QAAQ,EAC5Bs+C,EAAoB,CAAA,EACf11D,EAAK,EAAGA,EAAKy1D,EAAUr3E,OAAQ4hB,IAAM,CAC5C,IAAI21D,EAAY9gD,GAAc4gD,EAAUz1D,CAAE,CAAC,EAC3Cw1D,EAAgB3tE,KAAK8tE,CAAS,EAC1BA,EAAU3pE,KAAO2pE,EAAU3pE,MAAQA,GACrC0pE,EAAkB7tE,KAAK8tE,EAAU3pE,GAAG,CAExC,CACI0pE,EAAkBt3E,QAAU,CAAC8kD,EAAgB9kD,OAC/C,KAAK6kD,OAAO7yB,QAAUolD,EACZtyB,EAAgB9kD,SAC1B,KAAK6kD,OAAO7yB,QAAU,CAAC,KAAK6yB,OAAO5yB,MAAM,GAE3C,KAAK4yB,OAAOj3C,IAAMA,CACpB,EACAstB,EAAOu6C,qBAAuB,SAA8B/9C,EAAQ,CAClE,IAAIumB,EAAS,KACb,GAAI,CAAC,KAAKg0B,aAAc,CACtB,IAAIuF,EAAqB,SAA6B5pE,EAAK,CACzD,OAAOqwC,EAAOk5B,oBAAoBvpE,CAAG,CACvC,EACI6pE,EAAY,KAAKC,cAAc,EAAE9pE,IACjC+pE,EAAWjgD,EAAO9pB,IAClB6pE,GAAa,CAAC,SAASlpE,KAAKkpE,CAAS,GAAK,SAASlpE,KAAKopE,CAAQ,IAC9D,CAAC,KAAKC,aAAe,KAAKA,YAAYjrC,OAASgrC,GAAY,KAAKC,YAAYh+C,SAAW69C,KACzFD,EAAqB,UAA+B,CACpD,GAGJA,EAAmBG,CAAQ,EACtBjgD,EAAO9pB,KACV,KAAKspC,MAAM3Y,IAAI,CAAC,YAAa,WAAW,EAAG,SAASjtB,EAAG,CACrD,GAAIA,EAAE+E,OAAS,YAGf,KAAIwhE,EAAU55B,EAAO65B,QAAQ,YAAY,EACzC75B,EAAO25B,YAAYjrC,KAAOkrC,EAC1B55B,EAAOk5B,oBAAoBU,CAAO,EACpC,CAAC,CAEL,CACA,KAAKD,YAAc,CACjBh+C,OAAQ,KAAK89C,cAAc,EAAE9pE,IAC7B++B,KAAMjV,EAAO9pB,GACf,EACA,KAAKmwB,QAAQ,CACXnwB,IAAK8pB,EAAO9pB,IACZyI,KAAM,WACR,CAAC,CACH,EACA6kB,EAAOqrC,WAAa,SAAoBwR,EAAS,CAC/C,GAAIA,IAAY,OACd,OAAO,KAAK58B,YAEV48B,IAAY,KAAK58B,cAGrB,KAAKA,YAAc48B,EACf,KAAK58B,aACP,KAAKtlB,SAAS,iBAAiB,EAC/B,KAAKkI,QAAQ,WAAW,GAExB,KAAKhI,YAAY,iBAAiB,EAEtC,EACAmF,EAAO26C,gBAAkB,UAA2B,CAClD,KAAK9/C,YAAY,WAAW,EAC5B,KAAKA,YAAY,YAAY,EAC7B,KAAKF,SAAS,aAAa,EAC3B,KAAK0wC,WAAW,EAAI,EACpB,KAAKxoC,QAAQ,MAAM,CACrB,EACA7C,EAAOs7C,sBAAwB,UAAiC,CAC1D,KAAKt/B,MAAM0oB,aAAa,EAAI,GAAK,KAAK/a,OAAOmzB,mBAAqB,IACpE,KAAK5G,iBAAiBjvE,QAAQ,SAAS81E,EAAQ,CAC7C,OAAOA,EAAO3iE,SAAS2iE,EAAOxlE,KAAK,CACrC,CAAC,EACD,KAAK2+D,iBAAmB,CAAA,GAE1B,KAAKvsB,OAAOmzB,iBAAmB,KAAK9gC,MAAM0oB,aAAa,EACvD,KAAK7hC,QAAQ,YAAY,CAC3B,EACA7C,EAAOw6C,mBAAqB,UAA8B,CACxD,IAAI/2B,EAAS,KACb,KAAK9oB,SAAS,aAAa,EAC3B,KAAKkI,QAAQ,SAAS,EACtB,IAAIm6C,EAAkB,KAAK5/B,YAAY,EACnC6/B,EAAqB,SAASC,GAAsB,CAClDF,IAAoBv5B,EAAOrG,YAAY,IACzCqG,EAAO5oB,YAAY,aAAa,EAChC4oB,EAAO9tB,IAAI,aAAcunD,CAAmB,EAEhD,EACA,KAAK36C,GAAG,aAAc06C,CAAkB,CAC1C,EACAj9C,EAAOm9C,mBAAqB,UAA8B,CACxD,KAAKtiD,YAAY,aAAa,EAC9B,KAAKgI,QAAQ,SAAS,CACxB,EACA7C,EAAOo9C,0BAA4B,UAAqC,CACtE,KAAKviD,YAAY,aAAa,EAC9B,KAAKgI,QAAQ,gBAAgB,CAC/B,EACA7C,EAAOq9C,mBAAqB,UAA8B,CACxD,KAAKxiD,YAAY,aAAa,EAC9B,KAAKgI,QAAQ,SAAS,CACxB,EACA7C,EAAO06C,mBAAqB,UAA8B,CACxD,KAAK//C,SAAS,aAAa,EAC3B,KAAKkI,QAAQ,SAAS,CACxB,EACA7C,EAAOs9C,kBAAoB,UAA6B,CACtD,KAAKziD,YAAY,aAAa,EAC9B,KAAKA,YAAY,WAAW,EAC5B,KAAKgI,QAAQ,QAAQ,CACvB,EACA7C,EAAO46C,qBAAuB,UAAgC,CACxD,KAAKjyC,SAAS40C,YAChBzvE,EAAIC,KAAK,wEAAwE,EACjF,KAAKqvC,YAAY,KAAKzU,SAAS40C,SAAS,GAE1C,KAAK5iD,SAAS,iBAAiB,EAC/B,KAAKkI,QAAQ,WAAW,CAC1B,EACA7C,EAAO66C,iBAAmB,UAA4B,CACpD,KAAKhgD,YAAY,aAAa,EAC9B,KAAKF,SAAS,YAAY,EAC1B,KAAKkI,QAAQ,OAAO,CACtB,EACA7C,EAAOy6C,iBAAmB,UAA4B,CACpD,KAAK9/C,SAAS,WAAW,EACzB,KAAKE,YAAY,aAAa,EAC1B,KAAK8N,SAAStgC,MAChB,KAAK+0C,YAAY,CAAC,EAClB,KAAK7U,KAAK,GACA,KAAKmL,OAAO,GACtB,KAAKE,MAAM,EAEb,KAAK/Q,QAAQ,OAAO,CACtB,EACA7C,EAAO86C,0BAA4B,UAAqC,CACtE,KAAK/pC,SAAS,KAAK2nC,SAAS,UAAU,CAAC,CACzC,EACA14C,EAAOq1C,iBAAmB,SAA0B74C,EAAQ,CACrD,KAAKs6C,YAGN,KAAKnuC,WAAa,QAAU,KAAKA,SAAS60C,cAAgB,QAAU,KAAK70C,SAAS60C,YAAYC,QAAU,QAAU,KAAK90C,SAAS60C,YAAYC,QAAU,MACpJ,KAAK90C,WAAa,QAAU,KAAKA,SAAS60C,cAAgB,QAAU,OAAO,KAAK70C,SAAS60C,YAAYC,OAAU,WACjH,KAAK90C,SAAS60C,YAAYC,MAAMv3E,KAAK,KAAMs2B,CAAM,EACxC,KAAKkX,OAAO,EACrBpC,GAAe,KAAK/I,KAAK,CAAC,EAE1B,KAAKqL,MAAM,EAGjB,EACA5T,EAAOu1C,uBAAyB,SAAgC/4C,EAAQ,CACtE,GAAK,KAAKs6C,UAGV,KAAI4G,EAAe9xE,MAAM5F,UAAU8lC,KAAK5lC,KAAK,KAAK43B,GAAG,qCAAqC,EAAG,SAASvsB,EAAI,CACxG,OAAOA,EAAGmpB,SAAS8B,EAAOtxB,MAAM,CAClC,CAAC,EACIwyE,IACC,KAAK/0C,WAAa,QAAU,KAAKA,SAAS60C,cAAgB,QAAU,KAAK70C,SAAS60C,YAAYG,cAAgB,QAAU,KAAKh1C,SAAS60C,YAAYG,cAAgB,MAChK,KAAKh1C,WAAa,QAAU,KAAKA,SAAS60C,cAAgB,QAAU,OAAO,KAAK70C,SAAS60C,YAAYG,aAAgB,WACvH,KAAKh1C,SAAS60C,YAAYG,YAAYz3E,KAAK,KAAMs2B,CAAM,EAC9C,KAAK+9B,aAAa,EAC3B,KAAKC,eAAe,EAEpB,KAAKC,kBAAkB,GAI/B,EACAz6B,EAAO+1C,eAAiB,UAA0B,CAChD,KAAK2B,WAAW,CAAC,KAAKA,WAAW,CAAC,CACpC,EACA13C,EAAOy1C,sBAAwB,UAAiC,CAC9D,KAAKmI,cAAgB,KAAKlG,WAAW,CACvC,EACA13C,EAAO21C,qBAAuB,UAAgC,CACxD,KAAKiI,eACP,KAAKvvC,mBAAmB,CAE5B,EACArO,EAAO61C,oBAAsB,SAA6Br5C,EAAQ,CAC5DA,EAAOqhD,YACTrhD,EAAO0E,eAAe,CAE1B,EACAlB,EAAO43C,kBAAoB,UAA6B,CACtD,KAAKvpC,mBAAmB,CAC1B,EACArO,EAAO89C,uBAAyB,UAAkC,CAC5D,KAAKvjB,aAAa,EACpB,KAAK5/B,SAAS,gBAAgB,EAE9B,KAAKE,YAAY,gBAAgB,CAErC,EACAmF,EAAO20C,0BAA4B,SAAmCv+D,EAAG,CACvE,IAAI2nE,EAAe3nE,EAAElL,OAAOwzB,OAC5B,GAAIq/C,EAAAA,GAAgBA,IAAiB,MAGrC,KAAIxsE,EAAK,KAAKA,GAAG,EACbysE,EAAO3qD,EAAkB,QAAW,KAAKgnC,OAAOh+B,iBAAiB,IAAM9qB,EACvE,CAACysE,GAAQzsE,EAAGtN,QACd+5E,EAAOzsE,EAAGtN,QAAQ,IAAM,KAAKo2D,OAAO4jB,UAAU,EACrC,CAACD,GAAQzsE,EAAG2sE,oBACrBF,EAAOzsE,EAAG2sE,kBAAkB,IAAM,KAAK7jB,OAAO4jB,UAAU,GAE1D,KAAK1jB,aAAayjB,CAAI,EACxB,EACAh+C,EAAO+6C,4BAA8B,SAAqCv+C,EAAQze,EAAM,CACtF,IAAIogE,EAAS,KACTpgE,IACEA,EAAKuzD,sBACP,KAAK32C,SAAS,mBAAmB,EACjC,KAAKqhB,MAAM9Y,IAAI,sBAAuB,UAAW,CAC/Ci7C,EAAOtjD,YAAY,mBAAmB,CACxC,CAAC,GAEH,KAAK0/B,aAAax8C,EAAKw8C,YAAY,EAEvC,EACAv6B,EAAOg7C,2BAA6B,SAAoCx+C,EAAQztB,EAAK,CACnF,KAAK8zB,QAAQ,kBAAmB9zB,CAAG,CACrC,EACAixB,EAAOo+C,6BAA+B,UAAwC,CACxE,KAAKrkB,qBAAqB,EAC5B,KAAKp/B,SAAS,wBAAwB,EAEtC,KAAKE,YAAY,wBAAwB,CAE7C,EACAmF,EAAOi7C,iCAAmC,SAA0Cz+C,EAAQ,CAC1F,KAAKu9B,qBAAqB,EAAI,CAChC,EACA/5B,EAAOk7C,iCAAmC,SAA0C1+C,EAAQ,CAC1F,KAAKu9B,qBAAqB,EAAK,CACjC,EACA/5B,EAAOm7C,iBAAmB,UAA4B,CACpD,IAAIltE,EAAQ,KAAK+tC,MAAM/tC,MAAM,EAC7B,KAAKA,MAAMA,CAAK,CAClB,EACA+xB,EAAOq7C,oBAAsB,UAA+B,CAC1D,IAAIt9D,EAAO,KACPrS,UAAU5G,OAAS,IACrBiZ,EAAOrS,UAAU,CAAC,GAEpB,KAAKm3B,QAAQ,WAAY9kB,CAAI,CAC/B,EACAiiB,EAAOuyB,SAAW,UAAoB,CACpC,OAAO,KAAK5I,MACd,EACA3pB,EAAO42C,YAAc,UAAuB,CAC1C,KAAKjtB,OAAS,CAKZvM,YAAa,EACbihC,SAAU,EACVC,kBAAmB,KAAK31C,SAAS21C,kBACjCvtC,SAAUmgC,IACVvU,WAAY,EACZmgB,iBAAkB,KAAKyB,oBAAoB,EAC3CC,MAAO,KACP9rE,IAAK,GACLqkB,OAAQ,CAAC,EACTD,QAAS,CAAA,EACTquC,cAAe,CAAA,EACfne,OAAQ,CACV,CACF,EACAhnB,EAAO24C,UAAY,SAAmB1pE,EAAQu3C,EAAK,CACjD,KAAKle,MAAM,UAAW,CACpB,GAAIr5B,KAAUi4C,GACZ,OAAOj/C,GAAI,KAAKsvE,YAAa,KAAKv7B,MAAO/sC,EAAQu3C,CAAG,EAC/C,GAAIv3C,KAAUo4C,GACnB,OAAOZ,GAAQ,KAAK8wB,YAAa,KAAKv7B,MAAO/sC,EAAQu3C,CAAG,EAE1D,GAAI,CACE,KAAKxK,OACP,KAAKA,MAAM/sC,CAAM,EAAEu3C,CAAG,CAE1B,OAASpwC,EAAG,CACVtI,MAAAA,EAAIsI,CAAC,EACCA,CACR,CACF,EAAG,EAAI,CACT,EACA4pB,EAAO04C,SAAW,SAAkBzpE,EAAQ,CAC1C,GAAI,GAAC,KAAK+sC,OAAS,CAAC,KAAKA,MAAM9P,UAG/B,IAAIj9B,KAAU63C,GACZ,OAAO77C,GAAI,KAAKssE,YAAa,KAAKv7B,MAAO/sC,CAAM,EAC1C,GAAIA,KAAUo4C,GACnB,OAAOZ,GAAQ,KAAK8wB,YAAa,KAAKv7B,MAAO/sC,CAAM,EAErD,GAAI,CACF,OAAO,KAAK+sC,MAAM/sC,CAAM,EAAE,CAC5B,OAASmH,EAAG,CACV,MAAI,KAAK4lC,MAAM/sC,CAAM,IAAM,QACzBnB,EAAI,aAAemB,EAAS,2BAA6B,KAAK4qE,UAAY,wBAAyBzjE,CAAC,EAC9FA,GAEJA,EAAEjL,OAAS,aACb2C,EAAI,aAAemB,EAAS,mBAAqB,KAAK4qE,UAAY,gCAAiCzjE,CAAC,EACpG,KAAK4lC,MAAM9P,SAAW,GAChB91B,IAERtI,EAAIsI,CAAC,EACCA,EACR,EACF,EACA4pB,EAAOuI,KAAO,UAAgB,CAC5B,IAAIk2C,EAAU,KACVr7B,EAAe,KAAKza,SAASj4B,SAAW0iB,EAAgB,QAAW1iB,QACvE,OAAI0yC,EACK,IAAIA,EAAa,SAASzyC,EAAS,CACxC8tE,EAAQC,MAAM/tE,CAAO,CACvB,CAAC,EAEI,KAAK+tE,MAAM,CACpB,EACA1+C,EAAO0+C,MAAQ,SAAetkE,EAAU,CACtC,IAAIukE,EAAU,KACVvkE,IAAa,SACfA,EAAWk3B,IAEb,KAAK0lC,eAAezoE,KAAK6L,CAAQ,EACjC,IAAIwkE,EAAa1sD,GAAQ,CAAC,KAAK6kD,eAAiB,KAAKrkE,IAAI,GAAK,KAAK86D,WAAW,IAC1EqR,EAAgB3sD,GAAQ4G,GAAiBD,GAK7C,GAJI,KAAKimD,cACP,KAAKnpD,IAAI,CAAC,QAAS,WAAW,EAAG,KAAKmpD,WAAW,EACjD,KAAKA,YAAc,MAEjB,CAAC,KAAK5yC,UAAY,CAAC0yC,EAAY,CACjC,KAAKE,YAAc,SAAS1oE,EAAG,CAC7BuoE,EAAQD,MAAM,CAChB,EACA,KAAKx7C,IAAI,CAAC,QAAS,WAAW,EAAG,KAAK47C,WAAW,EAC7C,CAACF,GAAcC,GACjB,KAAKrgC,KAAK,EAEZ,MACF,CACA,IAAIjzC,EAAM,KAAKmtE,SAAS,MAAM,EAC1BqG,EAAiBF,GAAiB,KAAKtkD,SAAS,WAAW,EAC3DwkD,GACF,KAAKC,kBAAkB,EAErBzzE,IAAQ,KACV,KAAK0zE,wBAAwB,EAE7B,KAAKC,kBAAkB3zE,CAAG,CAE9B,EACAy0B,EAAOi/C,wBAA0B,UAAmC,CAClE,IAAIE,EAAS,KAAKlI,qBAAqBr7D,MAAM,CAAC,EAC9C,KAAKq7D,qBAAuB,CAAA,EAC5BkI,EAAOl4E,QAAQ,SAASm4E,EAAG,CACzBA,EAAE,CACJ,CAAC,CACH,EACAp/C,EAAOk/C,kBAAoB,SAA2B3zE,EAAK,CACzD,IAAI8zE,EAAY,KAAKrI,eAAep7D,MAAM,CAAC,EAC3C,KAAKo7D,eAAiB,CAAA,EACtB,KAAKC,qBAAuB,CAAA,EAC5BoI,EAAUp4E,QAAQ,SAASu8C,EAAI,CAC7BA,EAAGj4C,CAAG,CACR,CAAC,CACH,EACAy0B,EAAO4T,MAAQ,UAAiB,CAC9B,KAAK+kC,UAAU,OAAO,CACxB,EACA34C,EAAO0T,OAAS,UAAkB,CAChC,OAAO,KAAKglC,SAAS,QAAQ,IAAM,EACrC,EACA14C,EAAO+hB,OAAS,UAAkB,CAChC,OAAO,KAAK22B,SAAS,QAAQ,GAAK9nC,GAAiB,EAAG,CAAC,CACzD,EACA5Q,EAAOiiB,UAAY,SAAmB6uB,EAAa,CACjD,GAAI,OAAOA,EAAgB,IACzB,OAAO,KAAKqG,WAEd,KAAKA,WAAa,CAAC,CAACrG,EACpB,KAAK6H,UAAU,eAAgB,KAAKxB,UAAU,EAC1CrG,EACF,KAAKn2C,SAAS,eAAe,EAE7B,KAAKE,YAAY,eAAe,CAEpC,EACAmF,EAAOod,YAAc,SAAqB74C,EAAS,CACjD,GAAI,OAAOA,EAAY,IAAa,CAIlC,GAHIA,EAAU,IACZA,EAAU,GAER,CAAC,KAAK2nC,UAAY,KAAK6qC,cAAgB,CAAC,KAAK/6B,OAAS,CAAC,KAAKA,MAAM9P,SAAU,CAC9E,KAAKyd,OAAO00B,SAAW95E,EACvB,KAAKoxB,IAAI,UAAW,KAAKq/C,mBAAmB,EAC5C,KAAK9xC,IAAI,UAAW,KAAK8xC,mBAAmB,EAC5C,MACF,CACA,KAAK2D,UAAU,iBAAkBp0E,CAAO,EACxC,KAAKolD,OAAO00B,SAAW,EACvB,MACF,CACA,YAAK10B,OAAOvM,YAAc,KAAKs7B,SAAS,aAAa,GAAK,EACnD,KAAK/uB,OAAOvM,WACrB,EACApd,EAAOi1C,eAAiB,UAA0B,CAChD,KAAK73B,YAAY,KAAKuM,OAAO00B,QAAQ,CACvC,EACAr+C,EAAO+Q,SAAW,SAAkBxsC,EAAS,CAC3C,GAAIA,IAAY,OACd,OAAO,KAAKolD,OAAO5Y,WAAa,OAAS,KAAK4Y,OAAO5Y,SAAWmgC,IAElE3sE,EAAU0c,WAAW1c,CAAO,EACxBA,EAAU,IACZA,EAAU8sD,KAER9sD,IAAY,KAAKolD,OAAO5Y,WAC1B,KAAK4Y,OAAO5Y,SAAWxsC,EACnBA,IAAY8sD,IACd,KAAK12B,SAAS,UAAU,EAExB,KAAKE,YAAY,UAAU,EAExB71B,MAAMT,CAAO,GAChB,KAAKs+B,QAAQ,gBAAgB,EAGnC,EACA7C,EAAOgzB,cAAgB,UAAyB,CAC9C,OAAO,KAAKjiB,SAAS,EAAI,KAAKqM,YAAY,CAC5C,EACApd,EAAO+yB,qBAAuB,UAAgC,CAC5D,OAAOlvD,KAAKC,MAAM,KAAKitC,SAAS,CAAC,EAAIltC,KAAKC,MAAM,KAAKs5C,YAAY,CAAC,CACpE,EACApd,EAAO8Q,SAAW,UAAoB,CACpC,IAAIwuC,EAAY,KAAK5G,SAAS,UAAU,EACxC,OAAI,CAAC4G,GAAa,CAACA,EAAUx6E,UAC3Bw6E,EAAY1uC,GAAiB,EAAG,CAAC,GAE5B0uC,CACT,EACAt/C,EAAO6Q,gBAAkB,UAA6B,CACpD,OAAOA,GAAgB,KAAKC,SAAS,EAAG,KAAKC,SAAS,CAAC,CACzD,EACA/Q,EAAO21B,YAAc,UAAuB,CAC1C,IAAI7kB,EAAW,KAAKA,SAAS,EACzBC,EAAW,KAAKA,SAAS,EACzBnuB,EAAMkuB,EAASluB,IAAIkuB,EAAShsC,OAAS,CAAC,EAC1C,OAAI8d,EAAMmuB,IACRnuB,EAAMmuB,GAEDnuB,CACT,EACAod,EAAOgnB,OAAS,SAAgBu4B,EAAkB,CAChD,IAAI7iB,EACJ,GAAI6iB,IAAqB,OAAQ,CAC/B7iB,EAAM74D,KAAKwG,IAAI,EAAGxG,KAAKgmB,IAAI,EAAG5I,WAAWs+D,CAAgB,CAAC,CAAC,EAC3D,KAAK51B,OAAO3C,OAAS0V,EACrB,KAAKic,UAAU,YAAajc,CAAG,EAC3BA,EAAM,GACR,KAAKT,YAAYS,CAAG,EAEtB,MACF,CACAA,OAAAA,EAAMz7C,WAAW,KAAKy3D,SAAS,QAAQ,CAAC,EACjC1zE,MAAM03D,CAAG,EAAI,EAAIA,CAC1B,EACA18B,EAAOz3B,MAAQ,SAAei3E,EAAQ,CACpC,GAAIA,IAAW,OAAQ,CACrB,KAAK7G,UAAU,WAAY6G,CAAM,EACjC,MACF,CACA,OAAO,KAAK9G,SAAS,OAAO,GAAK,EACnC,EACA14C,EAAOy/C,aAAe,SAAsBC,EAAe,CACzD,OAAIA,IAAkB,OACb,KAAK/G,UAAU,kBAAmB+G,CAAa,EAEjD,KAAKhH,SAAS,cAAc,GAAK,EAC1C,EACA14C,EAAOi8B,YAAc,SAAqBsjB,EAAkB,CAC1D,GAAIA,IAAqB,QAAUA,IAAqB,EAAG,CACzD,KAAK51B,OAAOgT,WAAa4iB,EACzB,MACF,CACA,OAAO,KAAK51B,OAAOgT,UACrB,EACA38B,EAAOuxC,mBAAqB,UAA8B,CACxD,OAAO,KAAKmH,SAAS,oBAAoB,GAAK,EAChD,EACA14C,EAAOu6B,aAAe,SAAsBolB,EAAM,CAChD,GAAIA,IAAS,OAAQ,CACnB,IAAIC,EAAW,KAAK5J,cACpB,KAAKA,cAAgB9jD,EAAQytD,EACzB,KAAK3J,gBAAkB4J,GAAY,KAAKvlB,OAAO9lC,UACjD,KAAKsO,QAAQ,kBAAkB,EAEjC,KAAKi7C,uBAAuB,EAC5B,MACF,CACA,OAAO,KAAK9H,aACd,EACAh2C,EAAOy6B,kBAAoB,SAA2BolB,EAAmB,CACvE,IAAIz8B,EAAe,KAAKza,SAASj4B,SAAW0iB,EAAgB,QAAW1iB,QACvE,GAAI0yC,EAAc,CAChB,IAAIl2B,EAAQ,KACZ,OAAO,IAAIk2B,EAAa,SAASzyC,EAAS0yC,EAAQ,CAChD,SAASy8B,GAAa,CACpB5yD,EAAMyI,IAAI,kBAAmBoqD,CAAY,EACzC7yD,EAAMyI,IAAI,mBAAoBqrC,CAAa,CAC7C,CACA,SAASA,GAAgB,CACvB8e,EAAW,EACXnvE,EAAQ,CACV,CACA,SAASovE,EAAa3pE,GAAGrH,GAAK,CAC5B+wE,EAAW,EACXz8B,EAAOt0C,EAAG,CACZ,CACAme,EAAMgW,IAAI,mBAAoB89B,CAAa,EAC3C9zC,EAAMgW,IAAI,kBAAmB68C,CAAY,EACzC,IAAI/D,EAAU9uD,EAAM8yD,yBAAyBH,CAAiB,EAC1D7D,IACFA,EAAQzrE,KAAKuvE,EAAYA,CAAU,EACnC9D,EAAQzrE,KAAKI,EAAS0yC,CAAM,EAEhC,CAAC,CACH,CACA,OAAO,KAAK28B,yBAAyB,CACvC,EACAhgD,EAAOggD,yBAA2B,SAAkCH,EAAmB,CACrF,IAAII,EAAU,KACVC,EAOJ,GANK,KAAK7lB,OAAO9lC,WACf2rD,EAAY,KAAKv3C,SAASs1C,YAAc,KAAKt1C,SAASs1C,WAAW/4E,SAAW,CAAC,EACzE26E,IAAsB,SACxBK,EAAYL,IAGZ,KAAKxlB,OAAOI,kBAAmB,CACjC,IAAIuhB,EAAU,KAAKp1C,IAAI,KAAKyzB,OAAOI,iBAAiB,EAAEylB,CAAS,EAC/D,OAAIlE,GACFA,EAAQzrE,KAAK,UAAW,CACtB,OAAO0vE,EAAQ1lB,aAAa,EAAI,CAClC,EAAG,UAAW,CACZ,OAAO0lB,EAAQ1lB,aAAa,EAAK,CACnC,CAAC,EAEIyhB,CACT,MAAW,KAAKhgC,MAAMu1B,mBAAmB,GAAK,CAAC,KAAK5oC,SAASw3C,iBAC3D,KAAKxH,UAAU,iBAAiB,EAEhC,KAAKyH,gBAAgB,CAEzB,EACApgD,EAAOw6B,eAAiB,UAA0B,CAChD,IAAIpX,EAAe,KAAKza,SAASj4B,SAAW0iB,EAAgB,QAAW1iB,QACvE,GAAI0yC,EAAc,CAChB,IAAIl2B,EAAQ,KACZ,OAAO,IAAIk2B,EAAa,SAASzyC,EAAS0yC,EAAQ,CAChD,SAASy8B,GAAa,CACpB5yD,EAAMyI,IAAI,kBAAmBoqD,CAAY,EACzC7yD,EAAMyI,IAAI,mBAAoBqrC,CAAa,CAC7C,CACA,SAASA,GAAgB,CACvB8e,EAAW,EACXnvE,EAAQ,CACV,CACA,SAASovE,EAAa3pE,EAAGrH,GAAK,CAC5B+wE,EAAW,EACXz8B,EAAOt0C,EAAG,CACZ,CACAme,EAAMgW,IAAI,mBAAoB89B,CAAa,EAC3C9zC,EAAMgW,IAAI,kBAAmB68C,CAAY,EACzC,IAAI/D,EAAU9uD,EAAMmzD,sBAAsB,EACtCrE,IACFA,EAAQzrE,KAAKuvE,EAAYA,CAAU,EACnC9D,EAAQzrE,KAAKI,EAAS0yC,CAAM,EAEhC,CAAC,CACH,CACA,OAAO,KAAKg9B,sBAAsB,CACpC,EACArgD,EAAOqgD,sBAAwB,UAAiC,CAC9D,IAAIC,EAAU,KACd,GAAI,KAAKjmB,OAAOI,kBAAmB,CACjC,IAAIuhB,EAAU3oD,EAAkB,QAAW,KAAKgnC,OAAOG,cAAc,EAAE,EACvE,OAAIwhB,GACF1qC,GAAe0qC,EAAQzrE,KAAK,UAAW,CACrC,OAAO+vE,EAAQ/lB,aAAa,EAAK,CACnC,CAAC,CAAC,EAEGyhB,CACT,MAAW,KAAKhgC,MAAMu1B,mBAAmB,GAAK,CAAC,KAAK5oC,SAASw3C,iBAC3D,KAAKxH,UAAU,gBAAgB,EAE/B,KAAK4H,eAAe,CAExB,EACAvgD,EAAOogD,gBAAkB,UAA2B,CAClD,KAAK7lB,aAAa,EAAI,EACtB,KAAKimB,aAAe,GACpB,KAAKC,gBAAkBptD,EAAkB,QAAWlU,gBAAgBzN,MAAMgvE,SAC1En+C,GAAGlP,EAAkB,QAAY,UAAW,KAAKuhD,wBAAwB,EACzEvhD,EAAkB,QAAWlU,gBAAgBzN,MAAMgvE,SAAW,SAC9D/lD,GAAStH,EAAkB,QAAWnkB,KAAM,iBAAiB,EAC7D,KAAK2zB,QAAQ,iBAAiB,CAChC,EACA7C,EAAO60C,mBAAqB,SAA4Br4C,EAAQ,CAC1DjJ,EAAiB,QAAWjc,WAAWklB,EAAQ,KAAK,GAClD,KAAK+9B,aAAa,IAAM,KACrB,KAAKimB,aAGR,KAAKD,eAAe,EAFpB,KAAK/lB,eAAe,EAM5B,EACAx6B,EAAOugD,eAAiB,UAA0B,CAChD,KAAKhmB,aAAa,EAAK,EACvB,KAAKimB,aAAe,GACpB7qD,GAAItC,EAAkB,QAAY,UAAW,KAAKuhD,wBAAwB,EAC1EvhD,EAAkB,QAAWlU,gBAAgBzN,MAAMgvE,SAAW,KAAKD,gBACnE5lD,GAAYxH,EAAkB,QAAWnkB,KAAM,iBAAiB,EAChE,KAAK2zB,QAAQ,gBAAgB,CAC/B,EACA7C,EAAOsjB,wBAA0B,SAAiCrhD,EAAO,CACvE,GAAIA,IAAU,OACZ,OAAO,KAAKy2E,SAAS,yBAAyB,EAEhD,KAAKC,UAAU,6BAA8B12E,CAAK,EAClD,KAAK0mC,SAAS2a,wBAA0BrhD,EACxC,KAAK4gC,QAAQ,gCAAgC,CAC/C,EACA7C,EAAO+5B,qBAAuB,SAA8B4mB,EAAO,CACjE,GAAIA,IAAU,OAAQ,CACpB,KAAKC,sBAAwB,CAAC,CAACD,EAC/B,KAAKvC,6BAA6B,EAClC,MACF,CACA,MAAO,CAAC,CAAC,KAAKwC,qBAChB,EACA5gD,EAAOmjB,wBAA0B,UAAmC,CAClE,GAAI,4BAA6B9vB,EAAkB,SAAc,KAAKiwB,wBAAwB,IAAM,GAClG,OAAO,KAAKo1B,SAAS,yBAAyB,CAElD,EACA14C,EAAOg6B,qBAAuB,UAAgC,CAC5D,GAAI,4BAA6B3mC,EAAkB,QACjD,OAAOA,EAAkB,QAAW2mC,qBAAqB,CAE7D,EACAh6B,EAAOsN,cAAgB,SAAuB9Q,EAAQ,CACpD,IAAIghD,EAAc,KAAK70C,SAAS60C,YAChC,GAAI,GAACA,GAAe,CAACA,EAAYqD,SAGjC,KAAIC,EAAiB,SAAyBvvE,EAAI,CAChD,IAAIyT,EAAUzT,EAAGyT,QAAQ7N,YAAY,EACrC,GAAI5F,EAAGwvE,kBACL,MAAO,GAET,IAAIC,EAAoB,CAAC,SAAU,WAAY,SAAU,QAAS,QAAS,QAAQ,EACnF,GAAIh8D,IAAY,QACd,OAAOg8D,EAAkBrlE,QAAQpK,EAAG4J,IAAI,IAAM,GAEhD,IAAI8lE,EAAe,CAAC,UAAU,EAC9B,OAAOA,EAAatlE,QAAQqJ,CAAO,IAAM,EAC3C,EACI87D,EAAe,KAAKl6C,IAAI7D,cAAc+R,aAAa,IAGnD,OAAO0oC,EAAYqD,SAAY,WACjCrD,EAAYqD,QAAQ36E,KAAK,KAAMs2B,CAAM,EAErC,KAAK0kD,cAAc1kD,CAAM,GAE7B,EACAwD,EAAOkhD,cAAgB,SAAuB1kD,EAAQ,CACpD,IAAIqkD,EAAU,KAAKl4C,SAAS60C,YAAc,KAAK70C,SAAS60C,YAAYqD,QAAU,CAAC,EAC3EM,EAAwBN,EAAQO,cAAeA,EAAgBD,IAA0B,OAAS,SAASE,GAAc,CAC3H,OAAO9tD,EAAiB,QAAWjc,WAAW+pE,GAAc,GAAG,CACjE,EAAIF,EAAuBG,EAAmBT,EAAQU,QAASA,EAAUD,IAAqB,OAAS,SAASD,GAAc,CAC5H,OAAO9tD,EAAiB,QAAWjc,WAAW+pE,GAAc,GAAG,CACjE,EAAIC,EAAkBE,EAAwBX,EAAQY,aAAcA,EAAeD,IAA0B,OAAS,SAASH,GAAc,CAC3I,OAAO9tD,EAAiB,QAAWjc,WAAW+pE,GAAc,GAAG,GAAK9tD,EAAiB,QAAWjc,WAAW+pE,GAAc,OAAO,CAClI,EAAIG,EACJ,GAAIJ,EAAcl7E,KAAK,KAAMs2B,CAAM,EAAG,CACpCA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,IAAIigD,EAAWt5C,GAAWgD,aAAa,kBAAkB,EACrD/X,EAAkB,QAAW,KAAKgnC,OAAOC,iBAAiB,IAAM,IAClEonB,EAAS17E,UAAUilD,YAAY/kD,KAAK,KAAMs2B,CAAM,CAEpD,SAAW+kD,EAAQr7E,KAAK,KAAMs2B,CAAM,EAAG,CACrCA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,IAAIg7B,GAAcr0B,GAAWgD,aAAa,YAAY,EACtDqxB,GAAYz2D,UAAUilD,YAAY/kD,KAAK,KAAMs2B,CAAM,CACrD,SAAWilD,EAAav7E,KAAK,KAAMs2B,CAAM,EAAG,CAC1CA,EAAO0E,eAAe,EACtB1E,EAAOiF,gBAAgB,EACvB,IAAIkvB,GAAcvoB,GAAWgD,aAAa,YAAY,EACtDulB,GAAY3qD,UAAUilD,YAAY/kD,KAAK,KAAMs2B,CAAM,CACrD,CACF,EACAwD,EAAO+jB,YAAc,SAAsB5oC,EAAM,CAE/C,QADI+pC,EACKx+B,EAAK,EAAG2jC,EAAI,KAAK1hB,SAAS2hB,UAAW5jC,EAAK2jC,EAAEvlD,OAAQ4hB,IAAM,CACjE,IAAI6jC,EAAWF,EAAE3jC,CAAE,EACf+qB,EAAO4N,GAAKgF,QAAQkG,CAAQ,EAIhC,GAHK9Y,IACHA,EAAOrJ,GAAWgD,aAAamf,CAAQ,GAErC,CAAC9Y,EAAM,CACT3jC,EAAIG,MAAM,QAAUs8C,EAAW,mEAAmE,EAClG,QACF,CACA,GAAI9Y,EAAK+Y,YAAY,IACnBtF,EAAMzT,EAAKsS,YAAY5oC,CAAI,EACvB+pC,GACF,OAAOA,CAGb,CACA,MAAO,EACT,EACAllB,EAAO2hD,aAAe,SAAsB7qD,EAAS,CACnD,IAAI8qD,EAAU,KACVC,EAAQ,KAAKl5C,SAAS2hB,UAAU5gD,IAAI,SAAS6gD,EAAU,CACzD,MAAO,CAACA,EAAUlL,GAAKgF,QAAQkG,CAAQ,CAAC,CAC1C,CAAC,EAAEz0B,OAAO,SAASyZ,EAAM,CACvB,IAAIgb,EAAWhb,EAAK,CAAC,EAAGkC,GAAOlC,EAAK,CAAC,EACrC,OAAIkC,GACKA,GAAK+Y,YAAY,GAE1B18C,EAAIG,MAAM,QAAUs8C,EAAW,mEAAmE,EAC3F,GACT,CAAC,EACGu3B,EAAiC,SAAyCC,EAAYC,GAAYC,GAAQ,CAC5G,IAAIlS,GACJgS,OAAAA,EAAWj2C,KAAK,SAASo2C,GAAa,CACpC,OAAOF,GAAWl2C,KAAK,SAASq2C,GAAa,CAE3C,GADApS,GAAQkS,GAAOC,GAAaC,EAAW,EACnCpS,GACF,MAAO,EAEX,CAAC,CACH,CAAC,EACMA,EACT,EACIqS,EACAC,EAAO,SAAe3oE,EAAI,CAC5B,OAAO,SAASrF,GAAGgP,GAAG,CACpB,OAAO3J,EAAG2J,GAAGhP,EAAC,CAChB,CACF,EACIiuE,EAAS,SAAiBC,EAAOxrD,GAAQ,CAC3C,IAAIwzB,GAAWg4B,EAAM,CAAC,EAAG9wC,GAAO8wC,EAAM,CAAC,EACvC,GAAI9wC,GAAKuS,cAAcjtB,GAAQ6qD,EAAQj5C,SAAS4hB,GAASpzC,YAAY,CAAC,CAAC,EACrE,MAAO,CACL4f,OAAAA,GACA0a,KAAM8Y,EACR,CAEJ,EACA,OAAI,KAAK5hB,SAAS65C,YAChBJ,EAAqBN,EAA+BhrD,EAAS+qD,EAAOQ,EAAKC,CAAM,CAAC,EAEhFF,EAAqBN,EAA+BD,EAAO/qD,EAASwrD,CAAM,EAErEF,GAAsB,EAC/B,EACApiD,EAAOyiD,WAAa,SAAoB1rD,EAAQ2rD,EAAS,CACvD,IAAIC,EAAU,KACd,GAAI,OAAO5rD,EAAW,IACpB,OAAO,KAAK4yB,OAAOj3C,KAAO,GAExB,KAAKkwE,oBACP,KAAKA,mBAAmB,EAE1B,IAAI9rD,EAAUgzB,GAAa/yB,CAAM,EACjC,GAAI,CAACD,EAAQhyB,OAAQ,CACnB,KAAKqN,WAAW,UAAW,CACzB,KAAKlE,MAAM,CACTyJ,KAAM,EACNhK,QAAS,KAAKi7B,SAASk6C,mBACzB,CAAC,CACH,EAAG,CAAC,EACJ,MACF,CA6BA,GA5BA,KAAK9L,aAAe,GACf2L,IACH,KAAK/4B,OAAO7yB,QAAUA,GAExB,KAAKmlD,oBAAoBnlD,EAAQ,CAAC,CAAC,EACnC2uB,GAAU,KAAM3uB,EAAQ,CAAC,EAAG,SAASgsD,EAAkBx7B,EAAK,CAC1Dq7B,EAAQpL,YAAcjwB,EACjBo7B,IACHC,EAAQh5B,OAAO7yB,QAAUA,GAE3B6rD,EAAQ1G,oBAAoB6G,CAAgB,EAC5C,IAAI/zE,EAAM4zE,EAAQI,KAAKD,CAAgB,EACvC,GAAI/zE,EAAK,CACP,GAAI+nB,EAAQhyB,OAAS,EACnB,OAAO69E,EAAQF,WAAW3rD,EAAQlb,MAAM,CAAC,CAAC,EAE5C+mE,EAAQ5L,aAAe,GACvB4L,EAAQxwE,WAAW,UAAW,CAC5B,KAAKlE,MAAM,CACTyJ,KAAM,EACNhK,QAAS,KAAKi7B,SAASk6C,mBACzB,CAAC,CACH,EAAG,CAAC,EACJF,EAAQx2C,aAAa,EACrB,MACF,CACAia,GAAQkB,EAAKq7B,EAAQ3mC,KAAK,CAC5B,CAAC,EACG,KAAKrT,SAASq6C,cAAgBlsD,EAAQhyB,OAAS,EAAG,CACpD,IAAIm+E,EAAQ,UAAkB,CAC5BN,EAAQ10E,MAAM,IAAI,EAClB00E,EAAQF,WAAW3rD,EAAQlb,MAAM,CAAC,EAAG,EAAI,CAC3C,EACIsnE,EAAyB,UAAmC,CAC9DP,EAAQhtD,IAAI,QAASstD,CAAK,CAC5B,EACA,KAAK//C,IAAI,QAAS+/C,CAAK,EACvB,KAAK//C,IAAI,UAAWggD,CAAsB,EAC1C,KAAKN,mBAAqB,UAAW,CACnCD,EAAQhtD,IAAI,QAASstD,CAAK,EAC1BN,EAAQhtD,IAAI,UAAWutD,CAAsB,CAC/C,CACF,CACF,EACAljD,EAAOttB,IAAM,SAAaqkB,EAAQ,CAChC,OAAO,KAAK0rD,WAAW1rD,EAAQ,EAAK,CACtC,EACAiJ,EAAO+iD,KAAO,SAAchsD,EAAQ,CAClC,IAAIosD,EAAU,KACVC,EAAa,KAAKzB,aAAa,CAAC5qD,CAAM,CAAC,EAC3C,OAAKqsD,EAGA77C,GAAgB67C,EAAW3xC,KAAM,KAAKooC,SAAS,GAQpD,KAAKvxC,MAAM,UAAW,CAChB,KAAK0T,MAAMrvC,YAAY3G,UAAUC,eAAe,WAAW,EAC7D,KAAK0yE,UAAU,YAAa5hD,CAAM,EAElC,KAAK4hD,UAAU,MAAO5hD,EAAOrkB,GAAG,EAElC,KAAKqkE,aAAe,EACtB,EAAG,EAAI,EACA,KAfL,KAAKA,aAAe,GACpB,KAAKtsB,UAAU24B,EAAW3xC,KAAM2xC,EAAWrsD,MAAM,EACjD,KAAKilB,MAAM1T,MAAM,UAAW,CAC1B66C,EAAQpM,aAAe,EACzB,CAAC,EACM,IARA,EAmBX,EACA/2C,EAAOwe,KAAO,UAAgB,CAC5B,KAAKm6B,UAAU,MAAM,CACvB,EACA34C,EAAO4hB,MAAQ,UAAiB,CAC9B,IAAIyhC,EAAU,KACVjgC,EAAe,KAAKza,SAASj4B,SAAW0iB,EAAgB,QAAW1iB,QACvE,GAAI,KAAKgjC,OAAO,GAAK,CAAC0P,EACpB,KAAKkgC,SAAS,MACT,CACL,IAAIjzB,EAAc,KAAK9nB,KAAK,EAC5B+I,GAAe+e,EAAY9/C,KAAK,UAAW,CACzC,OAAO8yE,EAAQC,SAAS,CAC1B,CAAC,CAAC,CACJ,CACF,EACAtjD,EAAOsjD,SAAW,UAAoB,CAChC,KAAKtnC,OACP,KAAKA,MAAMyF,YAAY,MAAM,EAE/B,KAAKm1B,YAAY,EACjB,KAAK5qB,OAAO,EAAE,EACd,KAAKvB,UAAU,KAAK9hB,SAAS2hB,UAAU,CAAC,EAAG,IAAI,EAC/C,KAAKquB,UAAU,OAAO,EACtB,KAAK4K,mBAAmB,EACpB1+C,GAAU,IAAI,GAChB,KAAKhC,QAAQ,aAAa,CAE9B,EACA7C,EAAOujD,mBAAqB,UAA8B,CACxD,KAAKvE,kBAAkB,EACvB,KAAKwE,mBAAmB,EACxB,KAAKC,gBAAgB,CACvB,EACAzjD,EAAOg/C,kBAAoB,UAA6B,CACtD,KAAK5hC,YAAY,CAAC,EAClB,IAAIsmC,EAAQ,KAAK/6E,YAAc,CAAC,EAAGg7E,EAAkBD,EAAMC,gBAAiB5wB,EAAuB2wB,EAAM3wB,qBACrG4wB,GACFA,EAAgB9xB,cAAc,EAE5BkB,GACFA,EAAqBlB,cAAc,CAEvC,EACA7xB,EAAOwjD,mBAAqB,UAA8B,CACxD,KAAK9e,aAAa,KAAK6Z,oBAAoB,CAAC,EAC5C,KAAKjD,sBAAsB,CAC7B,EACAt7C,EAAOyjD,gBAAkB,UAA2B,CAClD,KAAKz8B,OAAO,CAAC,EACb,KAAKnkB,QAAQ,cAAc,CAC7B,EACA7C,EAAO4jD,eAAiB,UAA0B,CAChD,IAAI7sD,EAAS,KAAKylD,cAAc,EAC5B1lD,EAAU,CAAA,EACd,OAAIl1B,OAAOmE,KAAKgxB,CAAM,EAAEjyB,SAAW,GACjCgyB,EAAQvoB,KAAKwoB,CAAM,EAEd,KAAK4yB,OAAO7yB,SAAWA,CAChC,EACAkJ,EAAOw8C,cAAgB,UAAyB,CAC9C,OAAO,KAAK7yB,OAAO5yB,QAAU,CAAC,CAChC,EACAiJ,EAAOwtC,WAAa,UAAsB,CACxC,OAAO,KAAKgP,cAAc,GAAK,KAAKA,cAAc,EAAE9pE,KAAO,EAC7D,EACAstB,EAAO25B,YAAc,UAAuB,CAC1C,OAAO,KAAK6iB,cAAc,GAAK,KAAKA,cAAc,EAAErhE,MAAQ,EAC9D,EACA6kB,EAAOswC,QAAU,SAAiBruE,EAAO,CACvC,GAAIA,IAAU,OAAQ,CACpB,KAAK02E,UAAU,aAAc12E,CAAK,EAClC,KAAK0mC,SAAS2nC,QAAUruE,EACxB,MACF,CACA,OAAO,KAAKy2E,SAAS,SAAS,CAChC,EACA14C,EAAO13B,SAAW,SAAkBrG,EAAO,CACzC,GAAIA,IAAU,OACZ,OAAO,KAAK0mC,SAASrgC,UAAY,GAEnC,IAAIu7E,EACA,OAAO5hF,GAAU,UAAY,mBAAmBoR,KAAKpR,CAAK,GAAKA,IAAU,IAAQ,KAAK0mC,SAASmxC,mBACjG,KAAKnxC,SAASrgC,SAAWrG,EACzB,KAAK05E,gBAAgB,OAAO15E,GAAU,SAAWA,EAAQ,MAAM,EAC/D4hF,EAAe,IACL5hF,EAGV,KAAK0mC,SAASrgC,SAAW,GAFzB,KAAKqgC,SAASrgC,SAAW,GAI3Bu7E,EAAe,OAAOA,EAAiB,IAAc,KAAKl7C,SAASrgC,SAAWu7E,EAC1E,KAAK7nC,OACP,KAAK28B,UAAU,cAAekL,CAAY,CAE9C,EACA7jD,EAAO2jB,YAAc,SAAqB1hD,EAAO,CAC/C,OAAIA,IAAU,QACZ,KAAK02E,UAAU,iBAAkB12E,CAAK,EACtC,KAAK0mC,SAASgb,YAAc1hD,EACrB,MAEF,KAAKy2E,SAAS,aAAa,CACpC,EACA14C,EAAO33B,KAAO,SAAcpG,EAAO,CACjC,GAAIA,IAAU,OAAQ,CACpB,KAAK02E,UAAU,UAAW12E,CAAK,EAC/B,KAAK0mC,SAAStgC,KAAOpG,EACrB,MACF,CACA,OAAO,KAAKy2E,SAAS,MAAM,CAC7B,EACA14C,EAAOgsB,OAAS,SAAgBt5C,EAAK,CACnC,GAAIA,IAAQ,OACV,OAAO,KAAKmkE,QAETnkE,IACHA,EAAM,IAEJA,IAAQ,KAAKmkE,UAGjB,KAAKA,QAAUnkE,EACf,KAAKimE,UAAU,YAAajmE,CAAG,EAC/B,KAAKujE,kBAAoB,GACzB,KAAKpzC,QAAQ,cAAc,EAC7B,EACA7C,EAAOo7C,wBAA0B,UAAmC,CAClE,IAAK,CAAC,KAAKvE,SAAW,KAAKluC,SAASqxC,wBAA0B,KAAKh+B,OAAS,KAAKA,MAAMgQ,OAAQ,CAC7F,IAAI83B,EAAY,KAAK9nC,MAAMgQ,OAAO,GAAK,GACnC83B,IAAc,KAAKjN,UACrB,KAAKA,QAAUiN,EACf,KAAK7N,kBAAoB,GACzB,KAAKpzC,QAAQ,cAAc,EAE/B,CACF,EACA7C,EAAOt3B,SAAW,SAAkBssD,EAAM,CACxC,GAAIA,IAAS,OACX,MAAO,CAAC,CAAC,KAAK8hB,UAEhB9hB,EAAO,CAAC,CAACA,EACL,KAAK8hB,YAAc9hB,IAGvB,KAAK8hB,UAAY9hB,EACb,KAAKumB,oBAAoB,GAC3B,KAAK5C,UAAU,cAAe3jB,CAAI,EAEhC,KAAK8hB,WACP,KAAKj8C,YAAY,uBAAuB,EACxC,KAAKF,SAAS,sBAAsB,EACpC,KAAKkI,QAAQ,iBAAiB,EACzB,KAAK04C,oBAAoB,GAC5B,KAAKC,0BAA0B,IAGjC,KAAK3gD,YAAY,sBAAsB,EACvC,KAAKF,SAAS,uBAAuB,EACrC,KAAKkI,QAAQ,kBAAkB,EAC1B,KAAK04C,oBAAoB,GAC5B,KAAKG,6BAA6B,GAGxC,EACA17C,EAAOu7C,oBAAsB,SAA6BvmB,EAAM,CAC9D,GAAIA,IAAS,OACX,MAAO,CAAC,CAAC,KAAK+uB,qBAEhB/uB,EAAO,CAAC,CAACA,EACL,KAAK+uB,uBAAyB/uB,IAGlC,KAAK+uB,qBAAuB/uB,EACxB,KAAK+uB,sBACP,KAAKppD,SAAS,2BAA2B,EACzC,KAAKkI,QAAQ,qBAAqB,IAElC,KAAKhI,YAAY,2BAA2B,EAC5C,KAAKgI,QAAQ,qBAAqB,GAEtC,EACA7C,EAAO/xB,MAAQ,SAAec,EAAK,CACjC,IAAIi1E,EAAU,KACd,GAAIj1E,IAAQ,OACV,OAAO,KAAK+yC,QAAU,KAUxB,GARAxzC,EAAM,aAAa,EAAErH,QAAQ,SAASg9E,EAAc,CAClD,IAAIC,EAASD,EAAaD,EAASj1E,CAAG,EACtC,GAAI,EAAE2nB,GAAUwtD,CAAM,GAAK,CAACt4E,MAAMiQ,QAAQqoE,CAAM,GAAK,OAAOA,GAAW,UAAY,OAAOA,GAAW,UAAYA,IAAW,MAAO,CACjIF,EAAQl2E,IAAIG,MAAM,oEAAoE,EACtF,MACF,CACAc,EAAMm1E,CACR,CAAC,EACG,KAAKv7C,SAASw7C,2BAA6Bp1E,GAAOA,EAAI2I,OAAS,EAAG,CACpE,IAAI0sE,EAAyB,UAAmC,CAC9D,KAAKn2E,MAAMc,CAAG,CAChB,EACA,KAAK45B,SAASw7C,0BAA4B,GAC1C,KAAK9gD,IAAI,CAAC,QAAS,YAAY,EAAG+gD,CAAsB,EACxD,KAAKlhD,IAAI,YAAa,UAAW,CAC/B,KAAKvN,IAAI,CAAC,QAAS,YAAY,EAAGyuD,CAAsB,CAC1D,CAAC,EACD,MACF,CACA,GAAIr1E,IAAQ,KAAM,CAChB,KAAK+yC,OAAS/yC,EACd,KAAK8rB,YAAY,WAAW,EACxB,KAAKwpD,cACP,KAAKA,aAAa3xC,MAAM,EAE1B,MACF,CACA,KAAKoP,OAAS,IAAI7Q,GAAYliC,CAAG,EACjC,KAAK4rB,SAAS,WAAW,EACzB7sB,EAAIG,MAAM,SAAW,KAAK6zC,OAAOpqC,KAAO,IAAMu5B,GAAYE,WAAW,KAAK2Q,OAAOpqC,IAAI,EAAI,IAAK,KAAKoqC,OAAOp0C,QAAS,KAAKo0C,MAAM,EAC9H,KAAKjf,QAAQ,OAAO,EACpBv0B,EAAM,OAAO,EAAErH,QAAQ,SAASg9E,EAAc,CAC5C,OAAOA,EAAaD,EAASA,EAAQliC,MAAM,CAC7C,CAAC,CAEH,EACA9hB,EAAOqO,mBAAqB,SAA4B7R,EAAQ,CAC9D,KAAK8nD,cAAgB,EACvB,EACAtkD,EAAO03C,WAAa,SAAoB1iB,EAAM,CAC5C,GAAIA,IAAS,OACX,OAAO,KAAKmhB,YAGd,GADAnhB,EAAO,CAAC,CAACA,EACLA,IAAS,KAAKmhB,YAIlB,IADA,KAAKA,YAAcnhB,EACf,KAAKmhB,YAAa,CACpB,KAAKmO,cAAgB,GACrB,KAAKzpD,YAAY,mBAAmB,EACpC,KAAKF,SAAS,iBAAiB,EAC/B,KAAKkI,QAAQ,YAAY,EACzB,MACF,CACI,KAAKmZ,OACP,KAAKA,MAAM9Y,IAAI,YAAa,SAAS9sB,EAAG,CACtCA,EAAEqrB,gBAAgB,EAClBrrB,EAAE8qB,eAAe,CACnB,CAAC,EAEH,KAAKojD,cAAgB,GACrB,KAAKzpD,YAAY,iBAAiB,EAClC,KAAKF,SAAS,mBAAmB,EACjC,KAAKkI,QAAQ,cAAc,EAC7B,EACA7C,EAAO23C,uBAAyB,UAAkC,CAChE,IAAI4M,EACAC,EACAC,EACAC,EAAiBvuE,GAAK,KAAM,KAAKk4B,kBAAkB,EACnD+lB,EAAkB,SAA0Bh+C,GAAG,EAC7CA,GAAEuuE,UAAYH,GAAapuE,GAAEwuE,UAAYH,KAC3CD,EAAYpuE,GAAEuuE,QACdF,EAAYruE,GAAEwuE,QACdF,EAAe,EAEnB,EACIt0B,EAAkB,UAA4B,CAChDs0B,EAAe,EACf,KAAKl2C,cAAc+1C,CAAe,EAClCA,EAAkB,KAAK91C,YAAYi2C,EAAgB,GAAG,CACxD,EACIG,EAA6B,SAAqCroD,GAAQ,CAC5EkoD,EAAe,EACf,KAAKl2C,cAAc+1C,CAAe,CACpC,EACA,KAAKhiD,GAAG,YAAa6tB,CAAe,EACpC,KAAK7tB,GAAG,YAAa6xB,CAAe,EACpC,KAAK7xB,GAAG,UAAWsiD,CAA0B,EAC7C,KAAKtiD,GAAG,aAAcsiD,CAA0B,EAChD,IAAIl8E,EAAa,KAAK+hC,SAAS,YAAY,EACvC/hC,GAAc,CAACkwB,GAAU,CAAClB,KAC5BhvB,EAAW45B,GAAG,aAAc,SAAS/F,GAAQ,CACvC,KAAKkC,OAAO,EAAEiK,SAAS21C,oBAAsB,IAC/C,KAAK5/C,OAAO,EAAEirB,OAAO20B,kBAAoB,KAAK5/C,OAAO,EAAEiK,SAAS21C,mBAElE,KAAK5/C,OAAO,EAAEiK,SAAS21C,kBAAoB,CAC7C,CAAC,EACD31E,EAAW45B,GAAG,aAAc,SAAS/F,GAAQ,CAC3C,KAAKkC,OAAO,EAAEiK,SAAS21C,kBAAoB,KAAK5/C,OAAO,EAAEirB,OAAO20B,iBAClE,CAAC,GAEH,KAAK/7C,GAAG,UAAWmiD,CAAc,EACjC,KAAKniD,GAAG,QAASmiD,CAAc,EAC/B,IAAIpG,EACJ,KAAK7vC,YAAY,UAAW,CAC1B,GAAK,KAAK61C,cAGV,MAAKA,cAAgB,GACrB,KAAK5M,WAAW,EAAI,EACpB,KAAKr6D,aAAaihE,CAAiB,EACnC,IAAI3/D,GAAU,KAAKgqB,SAAS21C,kBACxB3/D,IAAW,IAGf2/D,EAAoB,KAAKnsE,WAAW,UAAW,CACxC,KAAKmyE,eACR,KAAK5M,WAAW,EAAK,CAEzB,EAAG/4D,EAAO,GACZ,EAAG,GAAG,CACR,EACAqhB,EAAO0kC,aAAe,SAAsBD,EAAM,CAChD,GAAIA,IAAS,OAAQ,CACnB,KAAKkU,UAAU,kBAAmBlU,CAAI,EACtC,MACF,CACA,OAAI,KAAKzoB,OAAS,KAAKA,MAAM0I,qBACpB,KAAKiF,OAAOmzB,kBAAoB,KAAKpE,SAAS,cAAc,EAE9D,CACT,EACA14C,EAAOu+C,oBAAsB,SAA6B9Z,EAAM,CAC9D,OAAIA,IAAS,OACJ,KAAKkU,UAAU,yBAA0BlU,CAAI,EAElD,KAAKzoB,OAAS,KAAKA,MAAM0I,qBACpB,KAAKg0B,SAAS,qBAAqB,EAErC,CACT,EACA14C,EAAO4vB,QAAU,SAAiBoF,EAAM,CACtC,GAAIA,IAAS,OAAQ,CACnB,KAAK8vB,SAAW,CAAC,CAAC9vB,EAClB,MACF,CACA,MAAO,CAAC,CAAC,KAAK8vB,QAChB,EACA9kD,EAAO+kD,mBAAqB,UAA8B,CACxD,IAAIC,EAAU,KACd,KAAKrqD,SAAS,qBAAqB,EACnC,IAAIsqD,EAAiB,KAAKz6C,SAAS,EAC/B7hC,EAAa,KAAK+hC,SAAS,YAAY,EACvCw6C,EAAmBv8E,GAAcA,EAAWykC,cAAc,EAC9D63C,EAAeh+E,QAAQ,SAASozB,EAAO,CACjCA,IAAU1xB,GAGV0xB,EAAMuM,KAAO,CAACvM,EAAME,SAAS,YAAY,IAC3CF,EAAMiS,KAAK,EACX04C,EAAQzO,gBAAgBE,eAAeloE,KAAK8rB,CAAK,EAErD,CAAC,EACD,KAAKk8C,gBAAgBC,aAAe,KAAKppC,cAAc,EACvD,KAAKljC,OAAOg7E,CAAgB,EAC5B,KAAKriD,QAAQ,qBAAqB,CACpC,EACA7C,EAAOmlD,oBAAsB,UAA+B,CAC1D,KAAKtqD,YAAY,qBAAqB,EACtC,KAAK07C,gBAAgBE,eAAexvE,QAAQ,SAASozB,EAAO,CAC1D,OAAOA,EAAMgS,KAAK,CACpB,CAAC,EACD,KAAKniC,OAAO,KAAKqsE,gBAAgBC,YAAY,EAC7C,KAAK3zC,QAAQ,qBAAqB,CACpC,EACA7C,EAAO85B,cAAgB,SAAuB73D,EAAO,CACnD,IAAImjF,EAAU,KACd,GAAI,OAAOnjF,GAAU,WAAaA,IAAU,KAAKo0E,eAC/C,OAAO,KAAKA,eAEd,KAAKA,eAAiBp0E,EACtB,IAAImhD,EAAe,KAAKza,SAASj4B,SAAW0iB,EAAgB,QAAW1iB,QACvE,GAAI0yC,EAAc,CAChB,GAAInhD,EAAO,CACT,IAAIojF,EAAe,CAAA,EACnB,OAAI,KAAKtrB,qBAAqB,GAC5BsrB,EAAa92E,KAAK,KAAKyrD,qBAAqB,CAAC,EAE3C,KAAKO,aAAa,GACpB8qB,EAAa92E,KAAK,KAAKisD,eAAe,CAAC,EAErC,KAAKX,gBAAgB,GACvBwrB,EAAa92E,KAAK,KAAKsrD,gBAAgB,EAAK,CAAC,EAExCzW,EAAa1tB,IAAI2vD,CAAY,EAAE90E,KAAK,UAAW,CACpD,OAAO60E,EAAQL,mBAAmB,CACpC,CAAC,CACH,CACA,OAAO3hC,EAAazyC,QAAQ,EAAEJ,KAAK,UAAW,CAC5C,OAAO60E,EAAQD,oBAAoB,CACrC,CAAC,CACH,CACIljF,GACE,KAAK83D,qBAAqB,GAC5B,KAAKC,qBAAqB,EAExB,KAAKO,aAAa,GACpB,KAAKC,eAAe,EAEtB,KAAKuqB,mBAAmB,GAExB,KAAKI,oBAAoB,CAE7B,EACAnlD,EAAOslD,oBAAsB,UAA+B,CAC1D,IAAI7zC,EAAO,KAAKuK,OAAS,KAAKA,MAC9BvK,EAAKnF,KAAK,EACV,KAAK3R,SAAS,uBAAuB,EACrC,KAAKkI,QAAQ,uBAAuB,CACtC,EACA7C,EAAOulD,qBAAuB,UAAgC,CAC5D,IAAI9zC,EAAO,KAAKuK,OAAS,KAAKA,MAC9BvK,EAAKpF,KAAK,EACV,KAAKxR,YAAY,uBAAuB,EACxC,KAAKgI,QAAQ,uBAAuB,CACtC,EACA7C,EAAO65B,gBAAkB,SAAyB53D,EAAO,CACvD,IAAIujF,EAAU,KACd,GAAI,OAAOvjF,GAAU,WAAaA,IAAU,KAAKq0E,iBAC/C,OAAO,KAAKA,iBAEd,KAAKA,iBAAmBr0E,EACxB,IAAImhD,EAAe,KAAKza,SAASj4B,SAAW0iB,EAAgB,QAAW1iB,QACvE,GAAI0yC,EAAc,CAChB,GAAInhD,EAAO,CACT,GAAI,KAAK63D,cAAc,EAAG,CACxB,IAAI2rB,EAAuB,KAAK3rB,cAAc,EAAK,EACnD,OAAO2rB,EAAqBl1E,KAAK,UAAW,CAC1Ci1E,EAAQF,oBAAoB,CAC9B,CAAC,CACH,CACA,OAAOliC,EAAazyC,QAAQ,EAAEJ,KAAK,UAAW,CAC5Ci1E,EAAQF,oBAAoB,CAC9B,CAAC,CACH,CACA,OAAOliC,EAAazyC,QAAQ,EAAEJ,KAAK,UAAW,CAC5Ci1E,EAAQD,qBAAqB,CAC/B,CAAC,CACH,CACA,GAAItjF,EAAO,CACL,KAAK63D,cAAc,GACrB,KAAKA,cAAc,EAAK,EAE1B,KAAKwrB,oBAAoB,EACzB,MACF,CACA,KAAKC,qBAAqB,CAC5B,EACAvlD,EAAO4iB,aAAe,SAAsB3K,EAAM7E,EAAOnJ,EAAU,CACjE,GAAI,KAAK+R,MACP,OAAO,KAAKA,MAAM4G,aAAa3K,EAAM7E,EAAOnJ,CAAQ,CAExD,EACAjK,EAAOiS,mBAAqB,SAA4B/sC,EAAS49C,EAAe,CAC9E,GAAI,KAAK9G,MACP,OAAO,KAAKA,MAAM/J,mBAAmB/sC,EAAS49C,CAAa,CAE/D,EACA9iB,EAAO0hB,sBAAwB,SAA+B3/C,EAAK,CAC7DA,IAAQ,SACVA,EAAM,CAAC,GAET,IAAI2jF,EAAO3jF,EAAKglB,EAAQ2+D,EAAK3+D,MAI7B,GAHKA,IACHA,EAAQhlB,GAEN,KAAKi6C,MACP,OAAO,KAAKA,MAAM0F,sBAAsB36B,CAAK,CAEjD,EACAiZ,EAAOkjB,wBAA0B,UAAmC,CAClE,OAAO,KAAKw1B,SAAS,yBAAyB,CAChD,EACA14C,EAAOs5C,WAAa,UAAsB,CACxC,OAAO,KAAKt9B,OAAS,KAAKA,MAAMs9B,YAAc,KAAKt9B,MAAMs9B,WAAW,GAAK,CAC3E,EACAt5C,EAAOu5C,YAAc,UAAuB,CAC1C,OAAO,KAAKv9B,OAAS,KAAKA,MAAMu9B,aAAe,KAAKv9B,MAAMu9B,YAAY,GAAK,CAC7E,EACAv5C,EAAOiK,SAAW,SAAkBD,EAAO,CACzC,GAAIA,IAAU,OACZ,OAAO,KAAKg6B,UAEV,KAAKA,YAAc14D,OAAO0+B,CAAK,EAAE7yB,YAAY,IAC/C,KAAK6sD,UAAY14D,OAAO0+B,CAAK,EAAE7yB,YAAY,EACvC0tB,GAAU,IAAI,GAChB,KAAKhC,QAAQ,gBAAgB,EAGnC,EACA7C,EAAOkK,UAAY,UAAqB,CACtC,OAAOxC,GAAasI,EAAQhqC,UAAU2iC,SAASuB,UAAW,KAAKysC,UAAU,CAC3E,EACA32C,EAAO2lD,OAAS,UAAkB,CAChC,IAAIzgF,EAAUwiC,GAAa,KAAKiB,QAAQ,EACpCiJ,EAAS1sC,EAAQ0sC,OACrB1sC,EAAQ0sC,OAAS,CAAA,EACjB,QAASlrB,EAAK,EAAGA,EAAKkrB,EAAO9sC,OAAQ4hB,IAAM,CACzC,IAAIK,EAAQ6qB,EAAOlrB,CAAE,EACrBK,EAAQ2gB,GAAa3gB,CAAK,EAC1BA,EAAM2X,OAAS,OACfx5B,EAAQ0sC,OAAOlrB,CAAE,EAAIK,CACvB,CACA,OAAO7hB,CACT,EACA86B,EAAO4lD,YAAc,SAAqB5rD,EAAS90B,EAAS,CAC1D,IAAI2gF,EAAU,KACd3gF,EAAUA,GAAW,CAAC,EACtBA,EAAQ80B,QAAUA,GAAW,GAC7B,IAAI8rD,EAAQ,IAAIzzC,GAAY,KAAMntC,CAAO,EACzC,YAAK4lC,SAASg7C,CAAK,EACnBA,EAAMvjD,GAAG,UAAW,UAAW,CAC7BsjD,EAAQ7zE,YAAY8zE,CAAK,CAC3B,CAAC,EACDA,EAAMvnE,KAAK,EACJunE,CACT,EACA9lD,EAAOm1C,yBAA2B,UAAoC,CACpE,GAAK,KAAK3iE,WAAW,EAKrB,QAFIuzE,EAAoB,KAAKA,kBAAkB,EAC3C54C,EAAe,KAAKA,aAAa,EAC5BzmB,EAAK,EAAGA,EAAKktD,GAAiB9uE,OAAQ4hB,IAAM,CACnD,IAAIs/D,EAAsBpS,GAAiBltD,CAAE,EACzCu/D,EAAW,KAAKC,aAAaF,CAAmB,EACpD,GAAI74C,GAAgB84C,EAAU,CAC5B,GAAIF,IAAsBC,EACxB,OAEED,GACF,KAAKlrD,YAAYg5C,GAAmBkS,CAAiB,CAAC,EAExD,KAAKprD,SAASk5C,GAAmBmS,CAAmB,CAAC,EACrD,KAAKG,YAAcH,EACnB,KACF,CACF,CACF,EACAhmD,EAAOomD,yBAA2B,UAAoC,CACpE,IAAItgE,EAAY,KAAKugE,uBAAuB,EAC5C,KAAKF,YAAc,GACfrgE,GACF,KAAK+U,YAAY/U,CAAS,CAE9B,EACAka,EAAO63C,YAAc,SAAqByO,EAAc,CACtD,OAAIA,IAAiB,OACZ9jF,GAAO,KAAK0jF,YAAY,GAEjC,KAAKC,YAAc,GACnB,KAAKD,aAAe1jF,GAAO,CAAC,EAAGuxE,GAAqBuS,CAAY,EAChE,KAAKnR,yBAAyB,EACvB3yE,GAAO,KAAK0jF,YAAY,EACjC,EACAlmD,EAAOxtB,WAAa,SAAoBvQ,EAAO,CAC7C,GAAIA,IAAU,OACZ,OAAO,KAAKskF,YAEdtkF,EAAQiwB,EAAQjwB,EAChB,IAAIijB,EAAU,KAAKqhE,YACnB,GAAItkF,IAAUijB,EAGd,YAAKqhE,YAActkF,EACfA,GACF,KAAKsgC,GAAG,eAAgB,KAAK2yC,6BAA6B,EAC1D,KAAKC,yBAAyB,IAE9B,KAAKx/C,IAAI,eAAgB,KAAKu/C,6BAA6B,EAC3D,KAAKkR,yBAAyB,GAEzBnkF,CACT,EACA+9B,EAAO+lD,kBAAoB,UAA6B,CACtD,OAAO,KAAKI,WACd,EACAnmD,EAAOqmD,uBAAyB,UAAkC,CAChE,OAAOxS,GAAmB,KAAKsS,WAAW,GAAK,EACjD,EACAnmD,EAAOwmD,UAAY,SAAmBhI,EAAOl2C,EAAO,CAClD,IAAIm+C,EAAU,KACd,GAAI,GAACjI,GAAS,OAAOA,GAAU,UAG/B,MAAK58B,MAAM,EACX,KAAK+H,OAAO60B,MAAQ92C,GAAa82C,CAAK,EACtC,IAAIkI,EAAqB,KAAK/8B,OAAO60B,MAAOmI,EAAUD,EAAmBC,QAAS36B,EAAS06B,EAAmB16B,OAAQt5C,EAAMg0E,EAAmBh0E,IAAKo/B,EAAa40C,EAAmB50C,WAChL,CAAC60C,GAAW36B,IACd,KAAKrC,OAAO60B,MAAMmI,QAAU,CAAC,CAC3Bj0E,IAAKs5C,EACL7wC,KAAMouC,GAAYyC,CAAM,CAC1B,CAAC,GAECt5C,GACF,KAAKA,IAAIA,CAAG,EAEVs5C,GACF,KAAKA,OAAOA,CAAM,EAEhBpgD,MAAMiQ,QAAQi2B,CAAU,GAC1BA,EAAW7qC,QAAQ,SAAS2/E,EAAI,CAC9B,OAAOH,EAAQx0C,mBAAmB20C,EAAI,EAAK,CAC7C,CAAC,EAEH,KAAKt+C,MAAMA,CAAK,EAClB,EACAtI,EAAO6mD,SAAW,UAAoB,CACpC,GAAI,CAAC,KAAKl9B,OAAO60B,MAAO,CACtB,IAAIxyB,EAAS,KAAKA,OAAO,EACrBt5C,EAAM,KAAKkxE,eAAe,EAC1B9xC,EAAalmC,MAAM5F,UAAU0D,IAAIxD,KAAK,KAAKq8C,iBAAiB,EAAG,SAASqkC,EAAI,CAC9E,MAAO,CACL3uC,KAAM2uC,EAAG3uC,KACT7E,MAAOwzC,EAAGxzC,MACVnJ,SAAU28C,EAAG38C,SACbv3B,IAAKk0E,EAAGl0E,GACV,CACF,CAAC,EACG8rE,EAAQ,CACV9rE,IAAAA,EACAo/B,WAAAA,CACF,EACA,OAAIka,IACFwyB,EAAMxyB,OAASA,EACfwyB,EAAMmI,QAAU,CAAC,CACfj0E,IAAK8rE,EAAMxyB,OACX7wC,KAAMouC,GAAYi1B,EAAMxyB,MAAM,CAChC,CAAC,GAEIwyB,CACT,CACA,OAAO92C,GAAa,KAAKiiB,OAAO60B,KAAK,CACvC,EACAxuC,EAAQwkC,eAAiB,SAAwBh5C,EAAK,CACpD,IAAIsrD,EAAc,CAChBhwD,QAAS,CAAA,EACT8a,OAAQ,CAAA,CACV,EACIm1C,EAAaxrD,GAAcC,CAAG,EAC9BwrD,EAAYD,EAAW,YAAY,EAOvC,GANIxsD,GAASiB,EAAK,UAAU,IAC1BurD,EAAWvzC,KAAO,IAEhBjZ,GAASiB,EAAK,WAAW,IAC3BurD,EAAWzO,MAAQ,IAEjB0O,IAAc,KAAM,CACtB,IAAIC,EAAkBvzD,EAAwB,QAAWszD,GAAa,IAAI,EAAGj4E,EAAMk4E,EAAgB,CAAC,EAAGlpE,EAAOkpE,EAAgB,CAAC,EAC3Hl4E,GACFjB,EAAIG,MAAMc,CAAG,EAEfvM,GAAOukF,EAAYhpE,CAAI,CACzB,CAEA,GADAvb,GAAOskF,EAAaC,CAAU,EAC1BvrD,EAAI6yC,cAAc,EAEpB,QADI7jC,EAAWhP,EAAIjV,WACVG,EAAK,EAAG2jC,GAAI7f,EAAS1lC,OAAQ4hB,EAAK2jC,GAAG3jC,IAAM,CAClD,IAAI2T,GAAQmQ,EAAS9jB,CAAE,EACnBwgE,GAAY7sD,GAAMjb,SAASjI,YAAY,EACvC+vE,KAAc,SAChBJ,EAAYhwD,QAAQvoB,KAAKgtB,GAAclB,EAAK,CAAC,EACpC6sD,KAAc,SACvBJ,EAAYl1C,OAAOrjC,KAAKgtB,GAAclB,EAAK,CAAC,CAEhD,CAEF,OAAOysD,CACT,EACA9mD,EAAOw3C,kBAAoB,UAA6B,CACtD,IAAIp3C,EAAO/M,EAAkB,QAAW7hB,cAAc,GAAG,EACzD,MAAO,EAAE,cAAe4uB,EAAK1uB,OAAS,oBAAqB0uB,EAAK1uB,OAAS,iBAAkB0uB,EAAK1uB,OAAS,gBAAiB0uB,EAAK1uB,OAC/H,gBAAiB0uB,EAAK1uB,MACxB,EACAsuB,EAAOpK,MAAQ,SAAgBmhB,EAAS,CACtC,GAAIA,IAAY,OACd,OAAO,KAAKq/B,cAEVr/B,GACF,KAAKlU,QAAQ,SAAS,EACtB,KAAKskD,kBAAoB,KAAKr5E,IAAIM,MAClC,KAAKN,IAAIM,MAAM,OAAO,EACtB,KAAKgoE,cAAgB,KAErB,KAAKvzC,QAAQ,UAAU,EACvB,KAAK/0B,IAAIM,MAAM,KAAK+4E,iBAAiB,EACrC,KAAKA,kBAAoB,OACzB,KAAK/Q,cAAgB,GAEzB,EACAp2C,EAAOmlC,cAAgB,SAAuBiiB,EAAU,CACtD,GAAIA,IAAa,OACf,OAAO,KAAKz9B,OAAOwb,cAEhBv5D,MAAMiQ,QAAQurE,CAAQ,GAGtBA,EAASriD,MAAM,SAAS0/B,EAAM,CACjC,OAAO,OAAOA,GAAS,QACzB,CAAC,IAGD,KAAK9a,OAAOwb,cAAgBiiB,EAC5B,KAAKvkD,QAAQ,qBAAqB,EACpC,EACOmN,CACT,EAAE5H,EAAU,EACZ+W,GAAIpoC,MAAM9P,QAAQ,SAASkE,EAAM,CAC/B,IAAIuvC,EAAQyE,GAAIh0C,CAAI,EACpBopE,GAAOvuE,UAAU00C,EAAMoE,UAAU,EAAI,UAAW,CAC9C,OAAI,KAAK9C,MACA,KAAKA,MAAMtB,EAAMoE,UAAU,EAAE,GAEtC,KAAKpE,EAAMqE,WAAW,EAAI,KAAKrE,EAAMqE,WAAW,GAAK,IAAIrE,EAAMiE,UACxD,KAAKjE,EAAMqE,WAAW,EAC/B,CACF,CAAC,EACDw1B,GAAOvuE,UAAUuyE,YAAchE,GAAOvuE,UAAUs1C,YAChDi5B,GAAOtkC,QAAU,CAAC,EAClB,IAAIo3C,GAAaj0D,EAAgB,QAAW5jB,UAC5C+kE,GAAOvuE,UAAU2iC,SAAW,CAE1B2hB,UAAWjL,GAAK+E,kBAChBkjC,MAAO,CAAC,EAERhJ,kBAAmB,IAEnBnZ,cAAe,CAAA,EAGfgG,OAAQ,GAER3gC,SAAU,CAAC,cAAe,cAAe,mBAAoB,iBAAkB,gBAAiB,cAAe,aAAc,eAAgB,oBAAqB,eAAe,EACjLP,SAAUo9C,KAAeA,GAAWn9C,WAAam9C,GAAWn9C,UAAU,CAAC,GAAKm9C,GAAWE,cAAgBF,GAAWp9C,WAAa,KAE/HC,UAAW,CAAC,EAEZ24C,oBAAqB,iDACrB/I,kBAAmB,GACnBmE,WAAY,CACV/4E,QAAS,CACPsiF,aAAc,MAChB,CACF,EACA3P,YAAa,CAAC,EACdrlE,WAAY,GACZsnD,cAAe,GACfD,gBAAiB,EACnB,EACA,CAOE,QAOA,UAQA,WAqBA,eAwBA,YAAY,EACZ5yD,QAAQ,SAASyS,EAAI,CACrB66D,GAAOvuE,UAAU0T,CAAE,EAAI,UAAW,CAChC,OAAO,KAAKg/D,SAASh/D,CAAE,CACzB,CACF,CAAC,EACD45D,GAAsBrsE,QAAQ,SAASu1B,EAAQ,CAC7C+3C,GAAOvuE,UAAU,aAAeshC,GAAa9K,CAAM,EAAI,GAAG,EAAI,UAAW,CACvE,OAAO,KAAKqG,QAAQrG,CAAM,CAC5B,CACF,CAAC,EACD4L,GAAWsH,kBAAkB,SAAU6kC,EAAM,EAC7C,IAAIkT,GAAmB,SACnBC,GAAmB,iBACnBC,GAAgB,CAAC,EACjBC,GAAe,SAAuBz8E,EAAM,CAC9C,OAAOw8E,GAAc1hF,eAAekF,CAAI,CAC1C,EACI08E,GAAY,SAAoB18E,EAAM,CACxC,OAAOy8E,GAAaz8E,CAAI,EAAIw8E,GAAcx8E,CAAI,EAAI,MACpD,EACI28E,GAAqB,SAA6BppD,EAAQvzB,EAAM,CAClEuzB,EAAOgpD,EAAgB,EAAIhpD,EAAOgpD,EAAgB,GAAK,CAAC,EACxDhpD,EAAOgpD,EAAgB,EAAEv8E,CAAI,EAAI,EACnC,EACI48E,GAAoB,SAA4BrpD,EAAQ9xB,EAAOo7E,EAAQ,CACzE,IAAIzY,GAAayY,EAAS,SAAW,IAAM,cAC3CtpD,EAAOmE,QAAQ0sC,EAAW3iE,CAAK,EAC/B8xB,EAAOmE,QAAQ0sC,EAAY,IAAM3iE,EAAMzB,KAAMyB,CAAK,CACpD,EACIq7E,GAAoB,SAA4B98E,EAAM+8E,EAAQ,CAChE,IAAIC,EAAqB,UAA+B,CACtDJ,GAAkB,KAAM,CACtB58E,KAAAA,EACA+8E,OAAAA,EACAt9E,SAAU,IACZ,EAAG,EAAI,EACP,IAAIA,EAAWs9E,EAAOzzE,MAAM,KAAM/I,SAAS,EAC3Co8E,OAAAA,GAAmB,KAAM38E,CAAI,EAC7B48E,GAAkB,KAAM,CACtB58E,KAAAA,EACA+8E,OAAAA,EACAt9E,SAAAA,CACF,CAAC,EACMA,CACT,EACAhJ,cAAOmE,KAAKmiF,CAAM,EAAEjhF,QAAQ,SAAS6D,EAAM,CACzCq9E,EAAmBr9E,CAAI,EAAIo9E,EAAOp9E,CAAI,CACxC,CAAC,EACMq9E,CACT,EACIC,GAAsB,SAA8Bj9E,EAAMk9E,EAAgB,CAC5EA,OAAAA,EAAeriF,UAAUmF,KAAOA,EACzB,UAAW,CAChB48E,GAAkB,KAAM,CACtB58E,KAAAA,EACA+8E,OAAQG,EACRz9E,SAAU,IACZ,EAAG,EAAI,EACP,QAAS0qB,EAAO5pB,UAAU5G,OAAQiwB,EAAO,IAAInpB,MAAM0pB,CAAI,EAAGC,EAAO,EAAGA,EAAOD,EAAMC,IAC/ER,EAAKQ,CAAI,EAAI7pB,UAAU6pB,CAAI,EAE7B,IAAI3qB,EAAWipB,EAAoB,QAAWw0D,EAAgB,CAAC,IAAI,EAAEh/E,OAAO0rB,CAAI,CAAC,EACjF,YAAK5pB,CAAI,EAAI,UAAW,CACtB,OAAOP,CACT,EACAm9E,GAAkB,KAAMn9E,EAAS09E,aAAa,CAAC,EACxC19E,CACT,CACF,EACI29E,GAA0B,UAAW,CACvC,SAASC,EAAQ9pD,EAAQ,CACvB,GAAI,KAAK/xB,cAAgB67E,EACvB,MAAM,IAAI34E,MAAM,wDAAwD,EAE1E,KAAK6uB,OAASA,EACT,KAAK5wB,MACR,KAAKA,IAAM,KAAK4wB,OAAO5wB,IAAI0nB,aAAa,KAAKrqB,IAAI,GAEnDs7B,GAAQ,IAAI,EACZ,OAAO,KAAK5D,QACZqE,GAAS,KAAM,KAAKv6B,YAAYw6B,YAAY,EAC5C2gD,GAAmBppD,EAAQ,KAAKvzB,IAAI,EACpC,KAAKs+B,QAAU,KAAKA,QAAQtzB,KAAK,IAAI,EACrCuoB,EAAO6D,GAAG,UAAW,KAAKkH,OAAO,CACnC,CACA,IAAIzJ,EAASwoD,EAAQxiF,UACrBg6B,OAAAA,EAAOj3B,QAAU,UAAoB,CACnC,OAAO,KAAK4D,YAAY87E,OAC1B,EACAzoD,EAAOsoD,aAAe,SAAsB17E,EAAO,CACjD,OAAIA,IAAU,SACZA,EAAQ,CAAC,GAEXA,EAAMzB,KAAO,KAAKA,KAClByB,EAAMs7E,OAAS,KAAKv7E,YACpBC,EAAMhC,SAAW,KACVgC,CACT,EACAozB,EAAO6C,QAAU,SAAmBrG,EAAQ5vB,EAAO,CACjD,OAAIA,IAAU,SACZA,EAAQ,CAAC,GAEJi2B,GAAQ,KAAKiC,YAAatI,EAAQ,KAAK8rD,aAAa17E,CAAK,CAAC,CACnE,EACAozB,EAAOoH,mBAAqB,SAA4BhxB,EAAG,CAC3D,EACA4pB,EAAOyJ,QAAU,UAAmB,CAClC,IAAIt+B,EAAO,KAAKA,KAAMuzB,EAAS,KAAKA,OACpC,KAAKmE,QAAQ,SAAS,EACtB,KAAKlN,IAAI,EACT+I,EAAO/I,IAAI,UAAW,KAAK8T,OAAO,EAClC/K,EAAOgpD,EAAgB,EAAEv8E,CAAI,EAAI,GACjC,KAAKuzB,OAAS,KAAK7R,MAAQ,KAC3B6R,EAAOvzB,CAAI,EAAIi9E,GAAoBj9E,EAAMw8E,GAAcx8E,CAAI,CAAC,CAC9D,EACAq9E,EAAQE,QAAU,SAAiBR,EAAQ,CACzC,IAAIp3E,EAAI,OAAOo3E,GAAW,SAAWL,GAAUK,CAAM,EAAIA,EACzD,OAAO,OAAOp3E,GAAM,YAAc,CAAC03E,EAAQxiF,UAAU6pC,cAAc/+B,EAAE9K,SAAS,CAChF,EACAwiF,EAAQG,eAAiB,SAAwBx9E,EAAM+8E,EAAQ,CAC7D,GAAI,OAAO/8E,GAAS,SAClB,MAAM,IAAI0E,MAAM,yBAA2B1E,EAAO,4BAA8B,OAAOA,EAAO,GAAG,EAEnG,GAAIy8E,GAAaz8E,CAAI,EACnB2C,EAAIC,KAAK,mBAAqB5C,EAAO,iEAAiE,UAC7FopE,GAAOvuE,UAAUC,eAAekF,CAAI,EAC7C,MAAM,IAAI0E,MAAM,yBAA2B1E,EAAO,wDAAwD,EAE5G,GAAI,OAAO+8E,GAAW,WACpB,MAAM,IAAIr4E,MAAM,uBAAyB1E,EAAO,8BAAgC,OAAO+8E,EAAS,GAAG,EAErGP,OAAAA,GAAcx8E,CAAI,EAAI+8E,EAClB/8E,IAASs8E,KACPe,EAAQE,QAAQR,CAAM,EACxB3T,GAAOvuE,UAAUmF,CAAI,EAAI88E,GAAkB98E,EAAM+8E,CAAM,EAEvD3T,GAAOvuE,UAAUmF,CAAI,EAAIi9E,GAAoBj9E,EAAM+8E,CAAM,GAGtDA,CACT,EACAM,EAAQI,iBAAmB,SAA0Bz9E,EAAM,CACzD,GAAIA,IAASs8E,GACX,MAAM,IAAI53E,MAAM,iCAAiC,EAE/C+3E,GAAaz8E,CAAI,IACnB,OAAOw8E,GAAcx8E,CAAI,EACzB,OAAOopE,GAAOvuE,UAAUmF,CAAI,EAEhC,EACAq9E,EAAQK,WAAa,SAAoB9xE,EAAO,CAC1CA,IAAU,SACZA,EAAQnV,OAAOmE,KAAK4hF,EAAa,GAEnC,IAAI/iF,EACJmS,OAAAA,EAAM9P,QAAQ,SAASkE,EAAM,CAC3B,IAAI+8E,EAASL,GAAU18E,CAAI,EACvB+8E,IACFtjF,EAASA,GAAU,CAAC,EACpBA,EAAOuG,CAAI,EAAI+8E,EAEnB,CAAC,EACMtjF,CACT,EACA4jF,EAAQM,iBAAmB,SAA0B39E,EAAM,CACzD,IAAI+8E,EAASL,GAAU18E,CAAI,EAC3B,OAAO+8E,GAAUA,EAAOO,SAAW,EACrC,EACOD,CACT,EAAE,EACFD,GAAQV,UAAYA,GACpBU,GAAQd,iBAAmBA,GAC3Bc,GAAQI,eAAelB,GAAkBc,EAAO,EAChDhU,GAAOvuE,UAAUomD,YAAc,SAASjhD,EAAM,CAC5C,MAAO,CAAC,CAAC,KAAKu8E,EAAgB,GAAK,KAAKA,EAAgB,EAAEv8E,CAAI,IAAM,EACtE,EACAopE,GAAOvuE,UAAU+iF,UAAY,SAAS59E,EAAM,CAC1C,MAAO,CAAC,CAACy8E,GAAaz8E,CAAI,CAC5B,EACA,IAAI69E,GAAY,GACZC,GAAU,SAAiBC,EAAYC,EAAiB,CACtDA,IAAoB,SACtBA,EAAkB,CAAC,GAEhBH,KACHl7E,EAAIC,KAAK,0FAA0F,EACnGi7E,GAAY,IAEd,IAAII,EAAW,UAAqB,CAClCF,EAAWz0E,MAAM,KAAM/I,SAAS,CAClC,EACI29E,EAAU,CAAC,EACX,OAAOF,GAAoB,UACzBA,EAAgBx8E,cAAgB/K,OAAOoE,UAAU2G,cACnDy8E,EAAWD,EAAgBx8E,aAE7B08E,EAAUF,GACD,OAAOA,GAAoB,aACpCC,EAAWD,GAEbr1D,EAAmB,QAAWs1D,EAAUF,CAAU,EAC9CA,IACFE,EAASE,OAASJ,GAEpB,QAAS/9E,KAAQk+E,EACXA,EAAQpjF,eAAekF,CAAI,IAC7Bi+E,EAASpjF,UAAUmF,CAAI,EAAIk+E,EAAQl+E,CAAI,GAG3C,OAAOi+E,CACT,EACIG,GAAc,SAAsBvnE,EAAI,CAC1C,OAAOA,EAAGrG,QAAQ,GAAG,IAAM,EAAIqG,EAAGpG,MAAM,CAAC,EAAIoG,CAC/C,EACA,SAASnR,GAASmR,EAAI9c,EAASojC,EAAO,CACpC,IAAI5J,EAAS7tB,GAAS24E,UAAUxnE,CAAE,EAClC,GAAI0c,EACF,OAAIx5B,GACF4I,EAAIC,KAAK,WAAaiU,EAAK,wDAAwD,EAEjFsmB,GACF5J,EAAO4J,MAAMA,CAAK,EAEb5J,EAET,IAAIntB,EAAK,OAAOyQ,GAAO,SAAW6b,GAAE,IAAM0rD,GAAYvnE,CAAE,CAAC,EAAIA,EAC7D,GAAI,CAACoX,GAAK7nB,CAAE,EACV,MAAM,IAAI5F,UAAU,oDAAoD,GAEtE,CAAC4F,EAAGwxB,cAAc0mD,aAAe,CAACl4E,EAAGwxB,cAAc7zB,KAAKwrB,SAASnpB,CAAE,IACrEzD,EAAIC,KAAK,iDAAiD,EAE5D7I,EAAUA,GAAW,CAAC,EAClBA,EAAQykC,YAAc,KACxBzkC,EAAQykC,WAAap4B,EAAG8T,YAAc9T,EAAG8T,WAAWmwB,aAAa,iBAAiB,EAAIjkC,EAAG8T,WAAa9T,GAAI06D,UAAU,EAAI,GAE1H39D,EAAM,aAAa,EAAErH,QAAQ,SAASg9E,EAAc,CAClD,IAAI5hD,EAAO4hD,EAAa1yE,EAAIm2B,GAAaxiC,CAAO,CAAC,EACjD,GAAI,CAACwxB,GAAU2L,CAAI,GAAKz2B,MAAMiQ,QAAQwmB,CAAI,EAAG,CAC3Cv0B,EAAIG,MAAM,8CAA8C,EACxD,MACF,CACA/I,EAAUwiC,GAAaxiC,EAASm9B,CAAI,CACtC,CAAC,EACD,IAAIqnD,EAAkBthD,GAAWgD,aAAa,QAAQ,EACtD1M,OAAAA,EAAS,IAAIgrD,EAAgBn4E,EAAIrM,EAASojC,CAAK,EAC/Ch6B,EAAM,OAAO,EAAErH,QAAQ,SAASg9E,EAAc,CAC5C,OAAOA,EAAavlD,CAAM,CAC5B,CAAC,EACMA,CACT,CAMA,GALA7tB,GAASmjB,OAASA,EAClBnjB,GAASvC,MAAQA,EACjBuC,GAASxC,KAAOA,EAChBwC,GAASsjB,SAAWA,EACpBtjB,GAASojB,WAAaA,EAClBb,EAAgB,QAAW8kD,2BAA6B,IAAQz/C,GAAO,EAAG,CAC5E,IAAI/mB,GAAQmsB,GAAE,sBAAsB,EACpC,GAAI,CAACnsB,GAAO,CACVA,GAAQutB,GAAmB,qBAAqB,EAChD,IAAI0qD,GAAO9rD,GAAE,MAAM,EACf8rD,IACFA,GAAKrvD,aAAa5oB,GAAOi4E,GAAKz9D,UAAU,EAE1CiT,GAAeztB,GAAO;;;;;;;;;KAAyK,CACjM,CACF,CACAitB,OAAAA,GAAiB,EAAG9tB,EAAQ,EAC5BA,GAAS43E,QAAU10D,EACnBljB,GAAS3L,QAAUqvE,GAAOvuE,UAAU2iC,SACpC93B,GAAS+4E,WAAa,UAAW,CAC/B,OAAOrV,GAAOtkC,OAChB,EACAp/B,GAAS24E,UAAY,SAASxnE,EAAI,CAChC,IAAIiuB,EAAUskC,GAAOtkC,QACjBzU,EACJ,GAAI,OAAOxZ,GAAO,SAAU,CAC1B,IAAI6nE,EAAMN,GAAYvnE,CAAE,EACpB0c,EAASuR,EAAQ45C,CAAG,EACxB,GAAInrD,EACF,OAAOA,EAETlD,EAAMqC,GAAE,IAAMgsD,CAAG,CACnB,MACEruD,EAAMxZ,EAER,GAAIoX,GAAKoC,CAAG,EAAG,CACb,IAAIsuD,EAAOtuD,EAAKuuD,EAAUD,EAAKprD,OAAQ2xC,EAAWyZ,EAAKzZ,SACvD,GAAI0Z,GAAW95C,EAAQogC,CAAQ,EAC7B,OAAO0Z,GAAW95C,EAAQogC,CAAQ,CAEtC,CACF,EACAx/D,GAASm5E,cAAgB,UAAW,CAClC,OAGEpoF,OAAOmE,KAAKwuE,GAAOtkC,OAAO,EAAEvmC,IAAI,SAASvC,EAAG,CAC1C,OAAOotE,GAAOtkC,QAAQ9oC,CAAC,CACzB,CAAC,EAAE2uB,OAAO5D,OAAO,CAErB,EACArhB,GAASo/B,QAAUskC,GAAOtkC,QAC1Bp/B,GAASu6B,aAAehD,GAAWgD,aACnCv6B,GAAS6+B,kBAAoB,SAASvkC,EAAM8+E,EAAM,CAC5C5qC,GAAKrT,OAAOi+C,CAAI,GAClBn8E,EAAIC,KAAK,OAAS5C,EAAO,6GAA6G,EAExIi9B,GAAWsH,kBAAkBxpC,KAAKkiC,GAAYj9B,EAAM8+E,CAAI,CAC1D,EACAp5E,GAASwzC,QAAUhF,GAAKgF,QACxBxzC,GAASqzC,aAAe7E,GAAK6E,aAC7BrzC,GAASm1C,IAAMA,GACfpkD,OAAOC,eAAegP,GAAU,aAAc,CAC5C5O,MAAO,CAAC,EACRioF,UAAW,GACXhoF,WAAY,EACd,CAAC,EACDN,OAAOC,eAAegP,GAASo1C,WAAY,aAAc,CACvDhkD,MAAO8jD,GACPmkC,UAAW,GACXhoF,WAAY,EACd,CAAC,EACD2O,GAASs5E,QAAUpxD,EACnBloB,GAAS2nB,cAAgBA,GACzB3nB,GAASu5E,OAASnB,GAClBp4E,GAAS62B,aAAeA,GACxB72B,GAASsF,KAAOA,GAChBtF,GAAS83E,eAAiBJ,GAAQI,eAClC93E,GAAS+3E,iBAAmBL,GAAQK,iBACpC/3E,GAASq3E,OAAS,SAAS/8E,EAAM+8E,EAAQ,CACvCp6E,OAAAA,EAAIC,KAAK,sEAAsE,EACxEw6E,GAAQI,eAAex9E,EAAM+8E,CAAM,CAC5C,EACAr3E,GAASg4E,WAAaN,GAAQM,WAC9Bh4E,GAASg3E,UAAYU,GAAQV,UAC7Bh3E,GAASi4E,iBAAmBP,GAAQO,iBACpCj4E,GAASI,YAAc,SAAS+4B,EAAOjsB,EAAM,CAC3C,IAAIssE,EACJrgD,OAAAA,GAAS,GAAKA,GAAO7yB,YAAY,EACjCtG,GAAS3L,QAAQglC,UAAYxC,GAAa72B,GAAS3L,QAAQglC,WAAYmgD,EAAgB,CAAC,EAAGA,EAAcrgD,CAAK,EAAIjsB,EAAMssE,EAAc,EAC/Hx5E,GAAS3L,QAAQglC,UAAUF,CAAK,CACzC,EACAn5B,GAAS/C,IAAMA,EACf+C,GAAS2kB,aAAeiB,GACxB5lB,GAASy5E,gBAAkBz5E,GAAS+/B,iBAAmBA,GACvD//B,GAAS6gD,WAAaA,GACtB7gD,GAAS0gD,cAAgBA,GACzB1gD,GAAS4gD,gBAAkBA,GAC3B5gD,GAAS2qC,SAAWf,GACpB5pC,GAASqqC,cAAgBA,GACzBrqC,GAAS05E,YAAcpmD,EACvBtzB,GAAS0xB,GAAKA,GACd1xB,GAASqyB,IAAMA,GACfryB,GAAS8kB,IAAMA,GACf9kB,GAASgyB,QAAUA,GACnBhyB,GAAS+L,IAAM+W,EAAa,QAC5B9iB,GAASqrC,UAAYA,GACrBrrC,GAAS+sC,WAAaA,GACtB/sC,GAASktC,WAAaA,GACtB,CAAC,OAAQ,aAAc,WAAY,WAAY,WAAY,cAAe,cAAe,gBAAiB,gBAAiB,UAAW,gBAAiB,eAAe,EAAE92C,QAAQ,SAASE,EAAG,CAC1L0J,GAAS1J,CAAC,EAAI,UAAW,CACvB2G,OAAAA,EAAIC,KAAK,WAAa5G,EAAI,qCAAuCA,EAAI,YAAY,EAC1E42B,GAAI52B,CAAC,EAAEsN,MAAM,KAAM/I,SAAS,CACrC,CACF,CAAC,EACDmF,GAASomB,cAAgBA,GACzBpmB,GAAS25E,IAAMzsD,GACfltB,GAASpK,IAAM80C,GACf1qC,GAAS48D,mBAAqBA,GAC9B58D,GAASI,YAAY,KAAM,CACzB,iBAAkB,iBACpB,CAAC,EACD2hB,GAAO/hB,GACA+hB,EACT,CACA,IAAI63D,GAAc33D,GAAY,EACxBwxB,EAA0BxwC,GAA0B22E,EAAW,EACrE,SAASC,GAAa5lF,EAAQ,CAC5B,IAAM6lF,EAAS,iEACTC,EAAcD,EAAO7lF,OACrB+lF,EAAc,IAAI/vE,WAAWhW,CAAM,EACrCF,EAAS,GACb,QAAW+b,KAAKmqE,OAAOC,gBAAgBF,CAAW,EAChDjmF,GAAU+lF,EAAOhqE,EAAIiqE,CAAW,EAElC,OAAOhmF,CACT,CACA,SAASomF,IAAkB,CACzB,IAAM/oF,EAAQgpF,GAAgB,QAAQ,EACtC,GAAIhpF,GAAU,KAA0B,CACtC,IAAMipF,EAAcjqE,WAAWhf,CAAK,EACpC,OAAI+C,MAAMkmF,CAAW,EAAG,OACjBA,CACT,CAEF,CACA,SAASC,IAAgB,CACvB,IAAMlpF,EAAQgpF,GAAgB,MAAM,EACpC,GAAIhpF,GAAU,KAA0B,OAAOA,IAAU,MAE3D,CACA,SAASmpF,IAAmB,CAC1B,IAAMnpF,EAAQgpF,GAAgB,iBAAiB,EAC/C,OAAIhpF,GAAU,KAAiCA,IAAU,OAClD,EACT,CACA,SAASopF,GAAkBppF,EAAO,CAChC,OAAOqpF,GAAgB,SAAUrpF,EAAM8E,SAAS,CAAC,CACnD,CACA,SAASwkF,GAAgBtpF,EAAO,CAC9B,OAAOqpF,GAAgB,OAAQrpF,EAAM8E,SAAS,CAAC,CACjD,CACA,SAASykF,GAAmBz0C,EAAS,CACnC,OAAOu0C,GAAgB,kBAAmBv0C,EAAQhwC,SAAS,CAAC,CAC9D,CACA,SAAS0kF,GAAqBxpF,EAAO,CACnC,OAAOqpF,GAAgB,oBAAqBrpF,EAAM8E,SAAS,CAAC,CAC9D,CACA,SAAS2kF,IAA6B,CACpC,IAAMzpF,EAAQgpF,GAAgB,mBAAmB,EACjD,GAAIhpF,GAAU,KAA0B,CACtC,IAAMipF,EAAc9mF,SAASnC,EAAO,EAAE,EACtC,OAAI+C,MAAMkmF,CAAW,EAAG,OACjBA,CACT,CAEF,CACA,SAASS,GAAiB1hD,EAAU,CAClC,OAAOqhD,GAAgB,gBAAiBrhD,CAAQ,CAClD,CACA,SAAS2hD,IAAwB,CAC/B,OAAOX,GAAgB,eAAe,CACxC,CACA,SAASY,GAAsB5hD,EAAU,CACvC,OAAOqhD,GAAgB,qBAAsBrhD,CAAQ,CACvD,CACA,SAAS6hD,IAA6B,CACpC,OAAOb,GAAgB,oBAAoB,CAC7C,CACA,SAASc,GAAsBC,EAAWj7C,EAAU,CAClD,OAAOu6C,GAAgB,sBAAuBn8E,KAAKC,UAAU68E,GAAAC,GAAA,GACxDC,GAA2B,GAD6B,CAE3D,CAACH,CAAS,EAAG,CACXj7C,SAAAA,EACAq7C,KAAM,GAAoB,IAAIrsD,KAAK,EAAGssD,YAAY,CAAC,EACrD,CACF,EAAC,CAAC,CACJ,CACA,SAASF,GAA2BH,EAAW,CAC7C,IAAIjuE,EACJ,GAAI,CACF,IAAM9b,EAAQgpF,GAAgB,qBAAqB,EACnD,GAAI,CAAChpF,EAAO,MAAO,CAAC,EACpB8b,EAAO5O,KAAKiK,MAAMnX,CAAK,CACzB,OAASgM,EAAO,CACdgC,GAAShC,MAAM,uDAAwDA,CAAK,CAC9E,CAEA,OADA8P,EAAOA,GAAQ,CAAC,EACZiuE,EAAkBjuE,EAAKiuE,CAAS,EAC7BjuE,CACT,CACA,SAASuuE,IAAoB,CAC3B,IAAMvuE,EAAOouE,GAA2B,EACxC,GAAI,CAACpuE,EAAM,OACX,IAAMwuE,EAAU3qF,OAAOmE,KAAKgY,CAAI,EAAE/C,OAAO,CAAC4vB,EAAKohD,IAAc,CAC3D,IAAMI,EAAOrsD,KAAK3mB,MAAM2E,EAAKiuE,CAAS,EAAEI,IAAI,EAE5C,OADavoF,KAAKsnB,MAAuB,IAAI4U,KAAK,EAAGysD,QAAQ,EAAIJ,IAAS,IAAM,KAAO,GAAG,EAC/E,GAAWxhD,EACfqhD,GAAAC,GAAA,GACFthD,GADE,CAEL,CAACohD,CAAS,EAAGjuE,EAAKiuE,CAAS,CAC7B,EACF,EAAG,CAAC,CAAC,EACLV,GAAgB,sBAAuBn8E,KAAKC,UAAUm9E,CAAO,CAAC,CAChE,CACA,SAASE,IAAqB,CAC5B,IAAMzqF,EAAM,aACR0qF,EAAYC,GAAkB3qF,CAAG,EACrC,OAAI0qF,IACJA,EAAYhC,GAAa,EAAE,EAC3BkC,GAAkB5qF,EAAK0qF,CAAS,EACzBA,EACT,CACA,IAAMG,GAAa,oBACnB,SAAS5B,GAAgBjpF,EAAK,CAC5B,OAAO+J,GAAqBX,QAAQyhF,GAAa7qF,CAAG,CACtD,CACA,SAASspF,GAAgBtpF,EAAKC,EAAO,CACnC8J,GAAqBf,QAAQ6hF,GAAa7qF,EAAKC,CAAK,CACtD,CACA,SAAS0qF,GAAkB3qF,EAAK,CAC9B,OAAOgK,GAAuBZ,QAAQyhF,GAAa7qF,CAAG,CACxD,CACA,SAAS4qF,GAAkB5qF,EAAKC,EAAO,CACrC+J,GAAuBhB,QAAQ6hF,GAAa7qF,EAAKC,CAAK,CACxD,CACA,SAAS6qF,IAAgB,CACvB,MAAO;;;;;;;;;;;GAYT,CACA,SAASC,IAAe,CACtB,MAAO;;;;;;;;;;;GAYT,CACA,IAAMC,GAAc1oC,EAAQlZ,aAAa,WAAW,EAC9C6hD,GAAN,cAAyBD,EAAY,CACnCrgF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACjBuO,CAAAA,GAAS,IACb,KAAKy5E,cAAgB,GACrB,KAAKx5C,OAAS,GACd,KAAKy5C,mBAAqB,IAAM,CAC1BzuD,EAAO27C,QAAQ,IACnB,KAAK3mC,OAAS,GACVhV,CAAAA,EAAOuoB,MAAM,IACjB,KAAK51C,UAAUoT,UAAYqoE,GAAc,EACzC,KAAKM,UAAU,GACjB,EACA,KAAKC,kBAAoB,IAAM,CAC7B,GAAI3uD,EAAO27C,QAAQ,GAAK,CAAC,KAAK6S,eAAiB,CAAC,KAAKx5C,OAAQ,CAC3D,KAAKw5C,cAAgB,GACrB,MACF,CACA,KAAKx5C,OAAS,GACd,KAAKw5C,cAAgB,GACrB,KAAK77E,UAAUoT,UAAYsoE,GAAa,EACxC,KAAKK,UAAU,CACjB,EACA,KAAKE,mBAAqB,IAAM,CAC9B,KAAKJ,cAAgB,EACvB,EACAxuD,EAAO6D,GAAG,eAAgB,IAAM,KAAK+qD,kBAAkB,EACvD5uD,EAAO6D,GAAG,QAAS,KAAK4qD,kBAAkB,EAC1CzuD,EAAO6D,GAAG,OAAQ,KAAK8qD,iBAAiB,EAC1C,CACA5jD,SAAU,CACJ,KAAK0jD,oBAAoB,KAAKzuD,OAAO,EAAE/I,IAAI,QAAS,KAAKw3D,kBAAkB,EAC3E,KAAKE,mBAAmB,KAAK3uD,OAAO,EAAE/I,IAAI,OAAQ,KAAK03D,iBAAiB,EACxE,KAAKC,oBAAoB,KAAK5uD,OAAO,EAAE/I,IAAI,eAAgB,KAAK23D,kBAAkB,EACtF,MAAM7jD,QAAQ,CAChB,CACA5P,UAAW,CACT,YAAKxoB,UAAY,MAAMwoB,SAAS,MAAO,CACrC/T,UAAW,oBACb,CAAC,EACD,KAAKzU,UAAUK,MAAMuW,QAAU,OACxB,KAAK5W,SACd,CACA+7E,WAAY,CACV,KAAK/7E,UAAUK,MAAMuW,QAAU,UAC/B9V,WAAW,IAAM,CACf,KAAKd,UAAUK,MAAMuW,QAAU,MACjC,EAAG,GAAG,CACR,CACF,EACAq8B,EAAQ5U,kBAAkB,aAAcu9C,EAAU,EAClD,IAAMM,GAAWjpC,EAAQujC,UAAU,QAAQ,EACrC2F,GAAN,cAA2BD,EAAS,CAClC5gF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,CAAM,EACZ,KAAKA,OAAO4J,MAAM,IAAM,CACtB5J,EAAO/D,SAAS,YAAY,CAC9B,CAAC,EACD,IAAMoQ,EAAY,IAAIkiD,GAAWvuD,EAAQx5B,CAAO,EAChDw5B,EAAOoM,SAASC,CAAS,EACzB,KAAKxI,GAAG,UAAW,IAAM7D,EAAO1sB,YAAY+4B,CAAS,CAAC,CACxD,CACF,EACAuZ,EAAQqkC,eAAe,SAAU6E,EAAY,EAC7C,IAAMC,GAAanpC,EAAQlZ,aAAa,UAAU,EAC5CsiD,GAAN,cAA8BD,EAAW,CAEvC9gF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,CACvB,CACA+lD,YAAY70C,EAAG,CACb,MAAM60C,YAAY70C,CAAC,EACnB,KAAKuyB,SAASpD,SAASnvB,CAAC,EACxBjE,WAAW,IAAM,CACf,KAAKusB,OAAO,EAAEivD,YAAY,EAAEvuB,KAAK31B,QAAQ,CAC3C,EAAG,CAAC,CACN,CACA5P,SAAS1e,EAAMu/B,EAAOhf,EAAO,CAC3B,IAAMnqB,EAAK,MAAMsoB,SAAS1e,EAAMu/B,EAAOhf,CAAK,EACtCkyD,EAAQtpC,EAAQkmC,IAAI3wD,SAAS,MAAM,EACzC+zD,OAAAA,EAAMnpE,UAAY,oCAAoC,KAAKqlB,SAAS,KAAKnB,SAASyK,KAAK,CAAC,UACxF7hC,EAAGq4B,aAAagkD,EAAOr8E,EAAGooB,cAAc,qBAAqB,CAAC,EACvDpoB,CACT,CACF,EACMs8E,GAASvpC,EAAQlZ,aAAa,MAAM,EACpC0iD,GAAN,cAA0BD,EAAO,CAC/BlhF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQutD,GAAAC,GAAA,GAAKhnF,GAAL,CAAc24D,WAAY,MAAO,EAAC,EAChD,KAAKp0B,QAAU6a,EAAQnuC,KAAK,KAAM,KAAKszB,OAAO,EAC9C,QAAWrmB,KAAKle,EAAQ80B,QAAQ,EAC9B,KAAKqkC,QACH,IAAIqvB,GAAgBhvD,EAAQ,CAC1B0U,MAAOhwB,EAAEgwB,MACT7N,SAAU+e,EAAQnuC,KAAKuoB,EAAQtb,EAAEmiB,QAAQ,CAC3C,CAAC,CACH,CAEJ,CACA1L,UAAW,CACT,IAAMtoB,EAAK,MAAMsoB,SAAS,EAC1ByqB,OAAAA,EAAQkmC,IAAI7vD,SAASppB,EAAI,yBAAyB,EAClDA,EAAGG,MAAME,KAAO,KAAK+2B,SAASh3B,SAASC,KAAO,KAC9CL,EAAGG,MAAMqW,IAAM,KAAK4gB,SAASh3B,SAASoW,IAAM,KACrCxW,CACT,CACF,EACA,SAASw8E,GAAex8E,EAAI,CAC1B,IAAImX,EAIJ,GAHInX,EAAG2X,uBAAyB3X,EAAG8T,aACjCqD,EAAMnX,EAAG2X,sBAAsB,GAE7B,CAACR,EAAK,MAAO,CAAE9W,KAAM,EAAGmW,IAAK,CAAE,EACnC,IAAMimE,EAAQ18E,SAAS6N,gBACjBjQ,EAAOoC,SAASpC,KAChB6yB,EAAaisD,EAAMjsD,YAAc7yB,EAAK6yB,YAAc,EACpDD,EAAap6B,OAAOumF,aAAe/+E,EAAK4yB,WACxClwB,EAAO8W,EAAI9W,KAAOkwB,EAAaC,EAC/BG,EAAY8rD,EAAM9rD,WAAahzB,EAAKgzB,WAAa,EACjDD,EAAYv6B,OAAOwmF,aAAeh/E,EAAK+yB,UACvCla,EAAMW,EAAIX,IAAMka,EAAYC,EAClC,MAAO,CACLtwB,KAAM/N,KAAK+B,MAAMgM,CAAI,EACrBmW,IAAKlkB,KAAK+B,MAAMmiB,CAAG,CACrB,CACF,CACA,SAASiW,GAAmBzsB,EAAIgG,EAAO,CACrC,IAAM5F,EAAW,CAAC,EACZ+W,EAAMqlE,GAAex8E,CAAE,EACvBwrB,EAAOxrB,EAAGuX,YACVkU,EAAOzrB,EAAGsX,aACVslE,EAAOzlE,EAAIX,IACXqmE,EAAO1lE,EAAI9W,KACbyrB,EAAQ9lB,EAAM8lB,MACdD,EAAQ7lB,EAAM6lB,MAClB,OAAI7lB,EAAM4lB,iBACRC,EAAQ7lB,EAAM4lB,eAAe,CAAC,EAAEC,MAChCC,EAAQ9lB,EAAM4lB,eAAe,CAAC,EAAEE,OAElC1rB,EAASmY,EAAIjmB,KAAKwG,IAAI,EAAGxG,KAAKgmB,IAAI,GAAIskE,EAAO9wD,EAAQL,GAAQA,CAAI,CAAC,EAClErrB,EAASoC,EAAIlQ,KAAKwG,IAAI,EAAGxG,KAAKgmB,IAAI,GAAIuT,EAAQgxD,GAAQrxD,CAAI,CAAC,EACpDprB,CACT,CACA,IAAM08E,GAAW/pC,EAAQujC,UAAU,QAAQ,EACrCyG,GAAN,cAAgCD,EAAS,CACvC1hF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,KAAKyjC,SAAWzjC,EACZ,KAAKk6D,OACP,KAAKA,KAAK31B,QAAQ,EAClB,KAAK/K,OAAO/I,IAAI,cAAe,KAAK44D,iBAAiB,GAEvD,KAAKA,kBAAoB,KAAKC,cAAcr4E,KAAK,IAAI,EACrD,KAAKuoB,OAAO6D,GAAG,cAAe,KAAKgsD,iBAAiB,EACpD,KAAK7vD,OAAO4J,MAAM,IAAM,KAAK5J,OAAO/D,SAAS,oBAAoB,CAAC,CACpE,CACA6zD,cAAcp4E,EAAG,CACf,GAAIq4E,GAAQ,KAAK/vD,MAAM,EAAG,CACxB,KAAK0gC,KAAK31B,QAAQ,EAClB,MACF,CACA,GAAIilD,GAAgBt4E,EAAElL,MAAM,EAAG,OAC/B,IAAMyjF,EAAkB3wD,GAAmB,KAAKU,OAAOntB,GAAG,EAAG6E,CAAC,EACxDw4E,EAAa,KAAKlwD,OAAOntB,GAAG,EAAE2X,sBAAsB,EACpD2lE,EAAeC,GAAiBH,EAAiBC,CAAU,EAC3DG,EAAazqC,EAAQ6lC,QAAQnyD,WAAa1mB,SAAS6N,gBAAkB7N,SAC3E8E,EAAE8qB,eAAe,EACjB,IAAMk+B,EAAO,KAAKA,KAAO,IAAI0uB,GAAY,KAAKpvD,OAAQ,CACpD1E,QAAS,KAAK2O,SAAS3O,QACvBroB,SAAUk9E,CACZ,CAAC,EACDzvB,EAAK78B,GAAG,UAAW,IAAM,CACvB,QAAWhrB,IAAS,CAAC,QAAS,KAAK,EACjC+sC,EAAQ3uB,IAAIo5D,EAAYx3E,EAAO6nD,EAAK31B,OAAO,EAE7C,KAAK/K,OAAO1sB,YAAYotD,CAAI,EAC5B,KAAKA,KAAO,MACd,CAAC,EACD,KAAK1gC,OAAOoM,SAASs0B,CAAI,EACzB,IAAM4vB,EAAS5vB,EAAK7tD,GAAG,EACjB09E,EAAWD,EAAO9lE,sBAAsB,EACxCgmE,EAAW59E,SAASpC,KAAKga,sBAAsB,GACjD+lE,EAASpsE,MAAQqsE,EAAS/kF,OAAS8kF,EAASjnE,OAASknE,EAAShlF,UAChE8kF,EAAOt9E,MAAME,KAAO/N,KAAKC,MAAMD,KAAKgmB,IAClCglE,EAAaj9E,KACb,KAAK8sB,OAAOyO,aAAa,EAAIiyB,EAAKjyB,aAAa,CACjD,CAAC,EAAI,KACL6hD,EAAOt9E,MAAMqW,IAAMlkB,KAAKC,MAAMD,KAAKgmB,IACjCglE,EAAa9mE,IACb,KAAK2W,OAAO0O,cAAc,EAAIgyB,EAAKhyB,cAAc,CACnD,CAAC,EAAI,MAEP,QAAW71B,IAAS,CAAC,QAAS,KAAK,EACjC+sC,EAAQ/hB,GAAGwsD,EAAYx3E,EAAO6nD,EAAK31B,OAAO,CAE9C,CACF,EACA6a,EAAQqkC,eAAe,cAAe2F,EAAiB,EACvD,SAASG,GAAQ/vD,EAAQ,CACvB,IAAIv5B,EACJ,OAAKu5B,EAAO0tB,YAAY,aAAa,EAC9B,CAAC,GAAGjnD,EAAKu5B,EAAOivD,YAAY,EAAEvuB,OAAS,MAAgBj6D,EAAGoM,GAAG,GADrB,EAEjD,CACA,SAASm9E,GAAgBS,EAAU,CACjC,IAAMnqE,EAAUmqE,EAASnqE,QAAQ7N,YAAY,EAC7C,OAAO6N,IAAY,SAAWA,IAAY,UAC5C,CACA,SAAS8pE,GAAiBH,EAAiBC,EAAY,CACrD,MAAO,CACLh9E,KAAM/N,KAAK+B,MAAMgpF,EAAWzkF,MAAQwkF,EAAgB56E,CAAC,EACrDgU,IAAKlkB,KAAK+B,MAAMgpF,EAAW1kF,OAAS0kF,EAAW1kF,OAASykF,EAAgB7kE,CAAC,CAC3E,CACF,CACA,IAAMslE,GAAW9qC,EAAQlZ,aAAa,QAAQ,EACxCikD,GAAN,cAAkCD,EAAS,CACzCziF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrBw5B,EAAO6D,GAAG,kBAAmB,IAAM,KAAKupB,OAAO,CAAC,CAClD,CACA7f,eAAgB,CACd,MAAO,kDAAkD,MAAMA,cAAc,CAAC,EAChF,CACAgf,YAAY1zC,EAAO,CACjB,IAAIpS,EACJ,MAAM8lD,YAAY1zC,CAAK,EACvB,IAAM+3E,EAAW,KAAKC,WAAW,IAAcpqF,EAAK,KAAKqqF,mBAAmB,IAAM,KAA7C,OAA6DrqF,EAAG6c,GACrG,QAAW+E,KAAS,KAAKyhB,QAAQsJ,WAAW,EAAEqE,QACxCm5C,GAAYvoE,EAAM/E,KAAOstE,EAAUvoE,EAAMK,KAAO,UAC/CL,EAAMK,KAAO,UAEtB,CACA0kC,QAAS,CACP,IAAI3mD,EACJ,GAAI,KAAKoqF,WAAW,EAAG,CACrB,KAAKl7C,YAAY,mBAAmB,EACpC,KAAK1Z,SAAS,SAAS,EACvB,MACF,CACA,KAAK0Z,YAAY,KAAK7L,QAAQsB,SAAS,sBAAuB,EAAE3kC,EAAK,KAAKqqF,mBAAmB,IAAM,KAAO,OAASrqF,EAAGiuC,KAAK,CAAC,CAAC,EAC7H,KAAKvY,YAAY,SAAS,CAC5B,CACA00D,YAAa,CACX,OAAO,KAAKE,aAAa,EAAEC,KAAMr5E,GAAMA,EAAE+Q,OAAS,SAAS,CAC7D,CACAooE,oBAAqB,CACnB,IAAIrqF,EACJ,IAAMwqF,EAAkB7D,GAA2B,KAAO3mF,EAAK,KAAKsqF,aAAa,EAAE,CAAC,IAAM,KAAO,OAAStqF,EAAG6c,IACvGs3B,EAAW,KAAKm2C,aAAa,EACnC,OAAOn2C,EAASo2C,KAAMr5E,GAAMA,EAAE2L,KAAO2tE,CAAe,GAAKr2C,EAAS,CAAC,CACrE,CACAm2C,cAAe,CACb,OAAO,KAAKjnD,QAAQsJ,WAAW,EAAEqE,QAAQrgB,OAAQzf,GAAMA,EAAE4hC,OAAS,UAAU,CAC9E,CACF,EACAqM,EAAQ5U,kBAAkB,sBAAuB2/C,EAAmB,EACpE,IAAMO,GAAuBtrC,EAAQlZ,aAAa,oBAAoB,EAChEykD,GAAN,cAAyCD,EAAqB,CAC5DjjF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,IAAM4qF,EAAeA,IAAM,CACzB,GAAI,CAAC,KAAKC,iBAAiB,EAAG,OAC9B,IAAMx+E,EAAK,KAAKA,GAAG,EACnBA,EAAGG,MAAMs+E,YAAY,OAAQ,KAAKC,eAAe,CAAC,EAClD1+E,EAAGG,MAAMs+E,YAAY,UAAW,QAAQ,CAC1C,EACA,KAAKtxD,OAAO,EAAE6D,GAAG,iBAAkButD,CAAY,EAC/C,IAAMruD,EAAmBlqB,GAAUA,EAAMkqB,gBAAgB,EACzD,KAAKc,GAAG,CAAC,YAAa,YAAY,EAAGd,CAAe,EACpD,KAAKyB,IAAI,UAAW,IAAM,CACpB,KAAKxE,OAAO,GAAG,KAAKA,OAAO,EAAE/I,IAAI,iBAAkBm6D,CAAY,EAC/D,KAAKv+E,GAAG,GACV,KAAKokB,IAAI,CAAC,YAAa,YAAY,EAAG8L,CAAe,CAEzD,CAAC,CACH,CACA5H,UAAW,CACT,OAAOyqB,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAClC/T,UAAW,qBACXpU,MAAO,KAAKq+E,iBAAiB,EAAI,SAAS,KAAKE,eAAe,CAAC,GAAK,gBACtE,CAAC,CACH,CACAhlC,YAAY1zC,EAAO,CACjBA,EAAMkqB,gBAAgB,EAClB,KAAK/C,OAAO,GAAG,KAAKA,OAAO,EAAE0e,YAAY,KAAKzU,SAASunD,QAAQ,CACrE,CACAD,gBAAiB,CACf,MAAO,GAAG,KAAKtnD,SAASunD,SAAW,KAAKxxD,OAAO,EAAEqS,SAAS,EAAI,GAAG,GACnE,CACAg/C,kBAAmB,CACjB,IAAMh/C,EAAW,KAAKrS,OAAO,EAAEqS,SAAS,EACxC,MAAI/rC,QAAM+rC,CAAQ,GAAK,CAACA,EAE1B,CACF,EACAuT,EAAQ5U,kBAAkB,6BAA8BmgD,EAA0B,EAClF,IAAMM,GAAW7rC,EAAQujC,UAAU,QAAQ,EACrCuI,GAAN,cAA6BD,EAAS,CACpCxjF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB7C,GAAc,KAAM,eAAe,EACnC,KAAKguF,QAAU,CAAA,EACf,KAAKv2C,SAAW50C,EAAQ40C,SACxB,KAAKpb,OAAO4J,MAAM,IAAM,CACtB5J,EAAO/D,SAAS,cAAc,EAC9B,QAAW21D,KAAW,KAAKx2C,SAAU,CACnC,GAAIw2C,EAAQJ,WAAa,EAAG,SAC5B,IAAMK,EAAS,IAAIV,GAA2BnxD,EAAQ,CAAEwxD,SAAUI,EAAQJ,QAAS,CAAC,EACpFK,EAAOhuD,GAAG,aAAc,IAAM,KAAKiuD,cAAgBF,CAAO,EAC1DC,EAAOhuD,GAAG,aAAc,IAAM,KAAKiuD,cAAgB,MAAM,EACzD,KAAKH,QAAQ9hF,KAAKgiF,CAAM,EACxB,KAAKE,WAAW,EAAE3lD,SAASylD,CAAM,CACnC,CACF,CAAC,CACH,CACA9mD,SAAU,CACR,QAAW8mD,KAAU,KAAKF,QACxB,KAAKI,WAAW,EAAEz+E,YAAYu+E,CAAM,EAEtC,MAAM9mD,QAAQ,CAChB,CACAinD,WAAWR,EAAU,CACnB,GAAI,KAAKM,cACP,YAAK9xD,OAAO/D,SAAS,aAAa,EAC3B,CAAEnyB,MAAO,KAAKgoF,cAAchoF,MAAOmoF,cAAe,KAAKH,cAAcN,QAAS,EAEvF,GAAI,KAAKp2C,SAASh1C,SAAW,EAC3B,QAASD,EAAI,KAAKi1C,SAASh1C,OAAS,EAAGD,GAAK,EAAGA,IAAK,CAClD,IAAMyrF,EAAU,KAAKx2C,SAASj1C,CAAC,EAC/B,GAAIyrF,EAAQJ,UAAYA,EACtB,YAAKxxD,OAAO/D,SAAS,aAAa,EAC3B,CAAEnyB,MAAO8nF,EAAQ9nF,KAAM,CAElC,CAEF,YAAKk2B,OAAO7D,YAAY,aAAa,EAC9B,CAAEryB,MAAO,EAAG,CACrB,CACAioF,YAAa,CACX,OAAO,KAAK/xD,OAAOiM,cAAc,aAAc,kBAAmB,SAAS,CAC7E,CACF,EACA2Z,EAAQqkC,eAAe,WAAYyH,EAAc,EACjD,IAAMQ,GAAWtsC,EAAQlZ,aAAa,QAAQ,EACxCylD,GAAN,cAAsCD,EAAS,CAC7CjkF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,KAAKw5B,OAAO,EAAE6D,GAAG,eAAgB,IAAM,CACrC,KAAKuuD,eAAe,EACpB,KAAK39B,cAAc,CACrB,CAAC,EACD,KAAK29B,eAAe,EACpB,KAAK39B,cAAc,CACrB,CACAt5B,UAAW,CACT,IAAM1e,EAAO,KAAKwtB,SAASxtB,KACrBwiB,EAAS2mB,EAAQkmC,IAAI3wD,SAAS,SAAU,CAC5C/T,UAAW,OAAS3K,EAAO,QAC7B,CAAC,EACK41E,EAAWzsC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAC5C/T,UAAW,aAAe3K,CAC5B,CAAC,EACDwiB,OAAAA,EAAO9rB,YAAYk/E,CAAQ,EACvB51E,IAAS,OACXwiB,EAAOn1B,MAAQ,KAAKggC,QAAQsB,SAAS,YAAY,EAEjDnM,EAAOn1B,MAAQ,KAAKggC,QAAQsB,SAAS,gBAAgB,EAEhDnM,CACT,CACAstB,aAAc,CACZ,KAAKtiB,SAASqc,QAAQ,CACxB,CACA8rC,gBAAiB,CACE,KAAKnoD,SAASqoD,WAAW,EAC5B,KAAKr2D,SAAS,cAAc,EACrC,KAAKE,YAAY,cAAc,CACtC,CACAs4B,eAAgB,CACV,KAAKxqB,SAASsoD,YAAY,EAAG,KAAK5kD,KAAK,EACtC,KAAKC,KAAK,CACjB,CACF,EACAgY,EAAQ5U,kBAAkB,kBAAmBmhD,EAAuB,EACpEvsC,EAAQ5U,kBAAkB,sBAAuBmhD,EAAuB,EACxE,SAASK,GAAYj4D,EAAK,CACxB,OAAOA,EAAI66C,OAAO,CAAC,EAAE13D,YAAY,EAAI6c,EAAIrd,MAAM,CAAC,CAClD,CACA,IAAMu1E,GAAkB,CACtB,CAAE9mF,IAAK,KAAM8Q,KAAM,IAAKi2E,SAAU,CAAE,EACpC,CAAE/mF,IAAK,QAAS8Q,KAAM,KAAMi2E,SAAU,CAAE,EACxC,CAAE/mF,IAAK,WAAY8Q,KAAM,KAAMi2E,SAAU,CAAE,EAC3C,CAAE/mF,IAAK,WAAY8Q,KAAM,KAAMi2E,SAAU,CAAE,CAAC,EAE9C,SAASC,GAAMpvF,EAAO,CACpB,IAAMmD,EAAU+rF,GAAgBzB,KAAMh7E,GAAMzS,EAAQyS,EAAErK,GAAG,GAAK8mF,GAAgBA,GAAgBrsF,OAAS,CAAC,EAExG,MAAO,EADO7C,GAASmD,EAAQiF,IAAM,OAAO4I,QAAQ7N,EAAQgsF,QAAQ,EACtDhsF,EAAQ+V,IAAI,CAC5B,CACA,SAASm2E,GAAaC,EAAa,CACjC,MAAO,CACLC,WAAYD,EAAY7nF,IAAK4W,IAAO,CAAEmxE,KAAMnxE,CAAE,EAAE,CAClD,CACF,CACA,IAAMoxE,GAAWptC,EAAQlZ,aAAa,QAAQ,EACxCumD,GAAN,cAA4BD,EAAS,CACnC73D,UAAW,CACT,IAAMrS,EAAM88B,EAAQkmC,IAAI3wD,SAAS,MAAO,CAAE/T,UAAW,cAAe,CAAC,EAC/D8rE,EAAYttC,EAAQkmC,IAAI3wD,SAAS,MAAO,CAC5C/T,UAAW,qBAEb,CAAC,EACD0B,EAAI3V,YAAY+/E,CAAS,EACzB,IAAMC,EAAevtC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,oBAAqB,EAAG,CACrFktB,KAAM,MACN8+C,UAAW,KAAKpzD,OAAO,EAAEoL,SAAS,iBAAiB,CACrD,CAAC,EACD8nD,EAAU//E,YAAYggF,CAAY,EAClC,IAAME,EAAoBztC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,qBAAsB,CAAC,EACrFksE,EAAsB1tC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,uBAAwB,CAAC,EACzFmsE,EAAoB3tC,EAAQkmC,IAAI3wD,SAAS,MAAM,EACrDk4D,EAAkBlgF,YAAYmgF,CAAmB,EACjDD,EAAkBlgF,YAAYogF,CAAiB,EAC/CL,EAAU//E,YAAYkgF,CAAiB,EACvC,IAAMG,EAAa5tC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,kBAAmB,EAAG,CACjFktB,KAAM,MACN8+C,UAAW,KAAKpzD,OAAO,EAAEoL,SAAS,eAAe,CACnD,CAAC,EACD8nD,EAAU//E,YAAYqgF,CAAU,EAChC,IAAMC,EAAkB7tC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,mBAAoB,CAAC,EACjFssE,EAAoB9tC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,qBAAsB,CAAC,EACrFusE,EAAkB/tC,EAAQkmC,IAAI3wD,SAAS,MAAM,EACnDs4D,EAAgBtgF,YAAYugF,CAAiB,EAC7CD,EAAgBtgF,YAAYwgF,CAAe,EAC3CT,EAAU//E,YAAYsgF,CAAe,EACrC,IAAMG,EAAYhuC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,YAAa,CAAC,EACpEysE,EAAcjuC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,cAAe,CAAC,EAC9E8rE,EAAU//E,YAAY0gF,CAAW,EACjCX,EAAU//E,YAAYygF,CAAS,EAC/B,IAAME,EAAaluC,EAAQkmC,IAAI3wD,SAAS,MAAO,CAAE/T,UAAW,qBAAsB,CAAC,EAC7E2sE,EAAiBnuC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CAAE/T,UAAW,eAAgB,CAAC,EAClF0sE,OAAAA,EAAW3gF,YAAY4gF,CAAc,EACrCjrE,EAAI3V,YAAY2gF,CAAU,EAC1B,KAAKhqD,QAAQjG,GAAG,eAAgB,CAACmwD,EAAQ30E,IAAS,CAChD,GAAI,CAACA,EAAKlV,IAAK,OACf+oF,EAAU9rE,UAAY,yBACtB0sE,EAAW1sE,UAAY,sBACvB,IAAM6sE,EAAW50E,EAAKlV,IAChB+pF,EAAY70E,EAAK80E,KACjBC,EAAgBzB,GAAMsB,EAASG,cAAgBF,EAAUE,aAAa,EACtEC,EAAc1B,GAAMsB,EAASI,WAAW,EACxCC,EAAkB3B,GAAMsB,EAASM,WAAaL,EAAUK,UAAU,EAClEC,EAAgB7B,GAAMsB,EAASQ,QAAQ,EACvCC,EAAWT,EAASU,iBAE1B,GADAzB,EAAUppF,MAAQ,KAAKk2B,OAAO,EAAEoL,SAAS,oBAAoB,EAAIkpD,EAAgBjtE,KAAK,GAAG,EAAI;EACzFhI,EAAKgZ,SAAW,mBAAoB,CACtC,IAAMu8D,EAAuBjC,GAAMuB,EAAUK,UAAU,EAAEltE,KAAK,GAAG,EAC3DwtE,EAAsBlC,GAAMsB,EAASM,UAAU,EAAEltE,KAAK,GAAG,EAC/D6rE,EAAUppF,OAAS,MAAQ,KAAKk2B,OAAO,EAAEoL,SAAS,gBAAgB,EAAIwpD,EAAuB;KAAU,KAAK50D,OAAO,EAAEoL,SAAS,cAAc,EAAIypD,EAAsB;CACxK,CACA3B,EAAUppF,OAAS,KAAKk2B,OAAO,EAAEoL,SAAS,kBAAkB,EAAIopD,EAAcntE,KAAK,GAAG,EACtFisE,EAAoBttE,YAAcouE,EAAc,CAAC,EACjDb,EAAkBvtE,YAAc,IAAMouE,EAAc,CAAC,EACrDV,EAAkB1tE,YAAcquE,EAAY,CAAC,EAC7CV,EAAgB3tE,YAAc,IAAMquE,EAAY,CAAC,EACjDR,EAAY7tE,YAAc0uE,EAASrsF,SAAS,EAC5CurF,EAAU5tE,YAAc,KAAO0uE,EAAW,EAAI,KAAK10D,OAAO,EAAEoL,SAAS,OAAO,EAAI,KAAKtB,QAAQsB,SAAS,MAAM,GAC5G0oD,EAAW1sE,UAAY,sBACvB8rE,EAAU9rE,UAAY,wBACxB,CAAC,EACD,KAAK0iB,QAAQjG,GAAG,eAAgB,CAACmwD,EAAQ30E,IAAS,CAC5CA,EAAKlV,MACLkV,EAAKgZ,SAAW,YAAa07D,EAAe/tE,YAAc,OACrD3G,EAAKgZ,SAAW,qBAAoB07D,EAAe/tE,YAAc,OAC1E8tE,EAAW1sE,UAAY,yBACvB8rE,EAAU9rE,UAAY,sBACtB0sE,EAAWhqF,MAAQ,KAAKk2B,OAAO,EAAEoL,SAAS,oBAAoB,EAAIunD,GAAMtzE,EAAK80E,KAAKI,UAAU,EAAEltE,KAAK,GAAG,EACxG,CAAC,EACD,KAAKyiB,QAAQjG,GAAG,eAAgB,IAAM,CACpCqvD,EAAU9rE,UAAY,sBACtB0sE,EAAW1sE,UAAY,qBACzB,CAAC,EACM0B,CACT,CACF,EACA88B,EAAQ5U,kBAAkB,gBAAiBiiD,EAAa,EACxD,IAAM6B,GAAclvC,EAAQlZ,aAAa,WAAW,EAC9CqoD,GAAN,cAAiCD,EAAY,CAC3C7mF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,KAAKiuD,cAAc,EACnB,KAAKz0B,OAAO,EAAE6D,GAAG,eAAgB,IAAM,KAAK4wB,cAAc,CAAC,CAC7D,CACA1pB,SAAU,CACJ,KAAKl4B,GAAG,IACZ,KAAKA,GAAG,EAAEwtB,oBAAoB,aAAc,KAAK20D,iBAAiB,EAClE,KAAKniF,GAAG,EAAEwtB,oBAAoB,QAAS,KAAK2sB,YAAY,EACxD,MAAMjiB,QAAQ,EAChB,CACA5P,UAAW,CACT,IAAMtoB,EAAK+yC,EAAQkmC,IAAI3wD,SAAS,IAAK,CACnCpqB,KAAM,KAAKkkF,UAAU,EACrB9sE,UAAW,KAAK8hB,SAASirD,aACzBprF,MAAO,KAAKk2B,OAAO,EAAEoL,SAAS,yBAAyB,EACvDhkB,UAAW,oBACX5a,OAAQ,QACV,CAAC,EACD,YAAKwoF,kBAAoB,IAAM,KAAKG,WAAW,EAC/C,KAAKnoC,aAAe,IAAM,KAAKhtB,OAAO,EAAEkV,MAAM,EAC9CriC,EAAGytB,iBAAiB,aAAc,KAAK00D,iBAAiB,EACxDniF,EAAGytB,iBAAiB,QAAS,KAAK0sB,YAAY,EACvCn6C,CACT,CACA4hD,eAAgB,CACV,KAAKxqB,SAASsoD,YAAY,EAAG,KAAK5kD,KAAK,EACtC,KAAKC,KAAK,CACjB,CACAunD,YAAa,CACX,KAAKtiF,GAAG,EAAEE,aAAa,OAAQ,KAAKkiF,UAAU,CAAC,CACjD,CACAA,WAAY,CACV,IAAMltF,EAAMe,GAAe,CAAED,UAAW,KAAKohC,SAASphC,UAAU,CAAE,CAAC,EACnE,OAAOM,GAAkB,CAAEpB,IAAAA,EAAKsB,UAAW,KAAK22B,OAAO,EAAE0e,YAAY,CAAE,CAAC,CAC1E,CACF,EACAkH,EAAQ5U,kBAAkB,qBAAsB+jD,EAAkB,EAClE,IAAMK,GAAuBxvC,EAAQlZ,aAAa,oBAAoB,EAChE2oD,GAAN,cAAkCD,EAAqB,CACrDnnF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,KAAK2pC,SAAW,KAAKJ,YAAY,IAAM,KAAKulD,YAAY,EAAG,GAAG,EAC9D,KAAKC,WAAW,EAAI,CACtB,CACAxqD,SAAU,CACJ,KAAKoF,WACP,KAAKL,cAAc,KAAKK,QAAQ,EAChC,KAAKA,SAAW,QAElB,KAAKtE,WAAa,KAClB,MAAMd,QAAQ,CAChB,CACA5P,UAAW,CACT,IAAMtoB,EAAK,MAAMsoB,SAAS,MAAO,CAC/B/T,UAAW,iCACb,CAAC,EACD,YAAKykB,WAAa+Z,EAAQkmC,IAAI3wD,SAAS,MAAO,CAC5C/T,UAAW,kBACb,EAAG,CACD,YAAa,KACf,CAAC,EACD,KAAKykB,WAAW14B,YAAYyyC,EAAQkmC,IAAI3wD,SAAS,OAAQ,CACvD/T,UAAW,mBACXpB,YAAa,GAAG,KAAKolB,SAAS,aAAa,CAAC,MAC9C,CAAC,CAAC,EACF,KAAKS,WAAW14B,YAAYP,SAAS0U,eAAe,KAAK8jB,SAAS,MAAM,CAAC,CAAC,EAC1Ev4B,EAAGM,YAAY,KAAK04B,UAAU,EACvBh5B,CACT,CACA05C,aAAc,CACZ,IAAMipC,EAAQ,KAAKC,SAAS,EACvBD,IACL,KAAKx1D,OAAO,EAAE0e,YAAY82C,EAAME,gBAAgB,EAChD,KAAK11D,OAAO,EAAE6J,KAAK,EACnB,KAAK0rD,WAAW,EAAI,EACtB,CACAD,aAAc,CACZ,IAAME,EAAQ,KAAKC,SAAS,EAE5B,GADI,CAACD,GACD,KAAKx1D,OAAO,EAAE0e,YAAY,IAAM,EAAG,OACvC,IAAMi3C,EAASxwF,KAAKqnB,IAAI,KAAKwT,OAAO,EAAE0e,YAAY,EAAI82C,EAAME,gBAAgB,EAAI,GAChF,KAAKH,WAAWI,CAAM,CACxB,CACAJ,WAAWI,EAAQ,CACbA,GACF,KAAK15D,SAAS,uBAAuB,EACrC,KAAKW,gBAAgB,OAAO,EAC5B,KAAKrF,QAAQ,IAEb,KAAK4E,YAAY,uBAAuB,EACxC,KAAKppB,aAAa,QAAS,KAAKq4B,SAAS,qBAAqB,CAAC,EAC/D,KAAK5T,OAAO,EAEhB,CACAi+D,UAAW,CACT,IAAIhvF,EACJ,IAAOA,EAAK,KAAKu5B,OAAO,IAAM,MAAgBv5B,EAAGinD,YAAY,gBAAgB,EAC7E,OAAO,KAAK1tB,OAAO,EAAE41D,eAAe,EAAEH,SAAS,CACjD,CACF,EACA7vC,EAAQ5U,kBAAkB,sBAAuBqkD,EAAmB,EACpE,IAAMQ,GAAWjwC,EAAQujC,UAAU,QAAQ,EACrC2M,GAAN,cAA+BD,EAAS,CACtC5nF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,KAAKuB,IAAMvB,EAAQuB,IACnB,KAAKyD,OAAShF,EAAQgF,OACtB,KAAKC,MAAQjF,EAAQiF,MACrB,KAAK0kC,SAAW3pC,EAAQ2pC,SACxB,KAAK4lD,QAAU,CAAC,EAChB,KAAKC,0BAA4B,KAAKC,mBAAmBx+E,KAAK,IAAI,EAClE,KAAKy+E,KAAK,EACV,KAAKl2D,OAAO4J,MAAM,IAAM,CACtB5J,EAAO/D,SAAS,gBAAgB,CAClC,CAAC,CACH,CACAi6D,MAAO,CACL,IAAIzvF,EAAI0vF,EAAIC,EAAIC,EAAIC,EACpB,IAAMtsF,EAAW,KAAKg2B,OAAO/1B,WAC7B,KAAK6rD,SAAuC9rD,GAASusF,gBACrD,KAAK/7B,SAAW/zD,EAAK,KAAKqvD,WAAa,KAAO,OAASrvD,EAAG+zD,QAC1D,KAAKg8B,kBAAoBJ,GAAMD,EAAK,KAAK37B,UAAY,KAAO,OAAS27B,EAAGp8B,mBAAqB,KAAO,OAASq8B,EAAG/9B,YAChH,KAAKo+B,kBAAoB7wC,EAAQkmC,IAAI3wD,SAAS,MAAO,CAAE/T,UAAW,mCAAoC,CAAC,GACtGkvE,GAAMD,EAAK,KAAK77B,UAAY,KAAO,OAAS67B,EAAGxjF,GAAG,IAAM,MAAgByjF,EAAGnjF,YAAY,KAAKsjF,iBAAiB,EAC9G,KAAKC,0BAA6B79E,GAAU,CAC1C,GAAIA,EAAM4D,OAAS,QAAS,CAC1B,IAAMk6E,EAAe,KAAK32D,OAAOklD,eAAe,EAAE8L,KAAM34D,GAC/Cn1B,OAAOoE,UAAUC,eAAeC,KAAK6wB,EAAQ,YAAY,CACjE,EACKu+D,EAA6CD,GAAa,WAC5DC,IACF,KAAK7uF,IAAM6uF,EAAW7uF,IACtB,KAAKyD,OAASorF,EAAWprF,OACzB,KAAKC,MAAQmrF,EAAWnrF,MACxB,KAAK0kC,SAAWymD,EAAWzmD,SAE/B,CACA,KAAK0mD,OAAS,CAAC,CAAC,KAAKd,QAAQ,KAAKhuF,GAAG,EACrC,KAAK+3C,KAAK,CACZ,EACA,KAAK9f,OAAO6D,GAAG,CAAC,QAAS,WAAW,EAAG,KAAK6yD,yBAAyB,CACvE,CACA3rD,SAAU,CACR,IAAItkC,EAAI0vF,EACJ,KAAKO,2BAA2B,KAAK12D,OAAO/I,IAAI,CAAC,QAAS,WAAW,EAAG,KAAKy/D,yBAAyB,EACtG,KAAK5gC,UAAU,KAAKA,SAAS7+B,IAAI,CAAC,YAAa,WAAW,EAAG,KAAK++D,yBAAyB,GAC9FG,GAAM1vF,EAAK,KAAK+zD,UAAY,KAAO,OAAS/zD,EAAGoM,GAAG,IAAM,MAAgBsjF,EAAG7iF,YAAY,KAAKmjF,iBAAiB,EAC9G,MAAM1rD,QAAQ,CAChB,CACA+U,MAAO,CACL,IAAMg3C,EAAe,CAAC,YAAa,WAAW,EAC1C,KAAKC,QAAQ,GACV,KAAKF,SACR,KAAKd,QAAQ,KAAKhuF,GAAG,EAAI69C,EAAQkmC,IAAI3wD,SAAS,MAAO,CACnDnnB,IAAK,KAAKjM,GACZ,CAAC,GAEH,KAAK+tD,SAASjyB,GAAGizD,EAAc,KAAKd,yBAAyB,IAE7D,KAAKlgC,SAAS7+B,IAAI6/D,EAAc,KAAKd,yBAAyB,EAC9D,KAAKgB,kBAAkB,EAE3B,CACAf,mBAAmBv3E,EAAK,CACtB,IAAMu4E,EAAS,KAAKlB,QAAQ,KAAKhuF,GAAG,EAC9BmvF,EAAWD,EAAOE,aAClBC,EAAYH,EAAOI,cACnB38B,EAAY,KAAKF,QAAQ3nD,GAAG,EAClC,GAAI,CAACokF,EAAOK,UAAY,CAACJ,GAAY,CAACE,EAAW,CAC/C,KAAKJ,kBAAkB,EACvB,MACF,CACA,KAAKh3D,OAAOwQ,2BAA2B,sCAAuC,IAAM,CAClF,IAAM+mB,EAAc3R,EAAQkmC,IAAIthE,sBAAsBkwC,CAAS,EACzDhD,EAAa9R,EAAQkmC,IAAIthE,sBAAsB,KAAKwV,OAAOntB,GAAG,CAAC,EACrE,GAAI,CAAC0kD,GAAe,CAACG,EAAY,OACjC,IAAM6/B,EAAW3xC,EAAQkmC,IAAIxsD,mBAAmBo7B,EAAWh8C,CAAG,EAAErJ,EAC5DpC,EAAWskF,EAAW,KAAKv3D,OAAOqS,SAAS,EACzC/lB,EAAcnnB,KAAK+B,MAAMkwF,EAAY,KAAK5rF,QAAU0rF,EAAW,KAAKzrF,MAAM,EAAI,EACpFwH,EAAW9N,KAAKgmB,IAAIlY,EAAW,KAAKk9B,SAAU7jB,CAAW,EACzD,IAAMxY,EAAa,IACb0jF,EAAc,KAAKx3D,OAAOyO,aAAa,EACvCgpD,EAAcD,EAAc1jF,EAAa0jF,EAAc1jF,EAAa,EACpE4jF,EAAUR,EAAW,KAAKzrF,MAC1BksF,EAAc,KAAKlsF,MAAQgsF,EAC3BG,EAAe,KAAKpsF,OAASisF,EAC7BI,EAAQ1yF,KAAKC,MAAM6N,EAAWykF,CAAO,EAAI,CAACC,EAC1CG,EAAO3yF,KAAKC,MAAM6N,EAAWykF,CAAO,EAAI,CAACE,EACzCG,EAAS,GAAGb,EAAWO,CAAW,MAAML,EAAYK,CAAW,KAC/Dp/B,EAAc,KAAKr4B,OAAOntB,GAAG,EAAEooB,cAAc,mBAAmB,EAChE+8D,EAAY,CAACJ,EAAelyF,SAAS8yB,iBAAiB6/B,CAAW,EAAEhvC,IAAIvH,QAAQ,KAAM,EAAE,CAAC,EAAI,GAC5Fm2E,EAAkB9yF,KAAK+B,MAAMywF,EAAc,CAAC,EAC9CzkF,EAAOqkD,EAAY9rD,MAAQ8rF,EAAWU,EACpCC,EAAUxgC,EAAWxkD,KAAOqkD,EAAYrkD,KACxCilF,EAAU5gC,EAAY9rD,MAAQksF,GAAejgC,EAAWvzC,MAAQozC,EAAYpzC,OAC9EjR,EAAOglF,IAAShlF,EAAOglF,GACvBhlF,EAAOilF,IAASjlF,EAAOilF,GAC3B,IAAMC,EAAe,CACnB,mBAAoB,QAAQ,KAAKrwF,GAAG,KACpC,oBAAqB,YACrB,sBAAuB,GAAG8vF,CAAK,MAAMC,CAAI,KACzC,kBAAmBC,EACnB,MAAS,OACT,cAAe,eACf,SAAY,WACZ,IAAO,GAAGC,CAAS,KACnB,OAAU,iBAEV,MAAS,GAAGL,EAAc,CAAC,KAC3B,OAAU,GAAGC,EAAe,CAAC,IAC/B,EACAQ,EAAallF,KAAO,GAAGA,CAAI,KAC3B,OAAW,CAAC5P,EAAKC,CAAK,IAAKL,OAAO0E,QAAQwwF,CAAY,EACpD,KAAK3B,kBAAkBzjF,MAAMs+E,YAAYhuF,EAAKC,CAAK,CAEvD,CAAC,CACH,CACAyzF,mBAAoB,CACd,KAAKP,oBACP,KAAKA,kBAAkBzjF,MAAM2tB,QAAU,GAE3C,CACAo2D,SAAU,CACR,OAAO,KAAKP,kBAAoB,KAAK/qF,OAAS,KAAKD,QAAU,KAAKzD,GACpE,CACF,EACA69C,EAAQqkC,eAAe,aAAc6L,EAAgB,EACrD,IAAMuC,GAAWzyC,EAAQlZ,aAAa,QAAQ,EACxC4rD,GAAiB,MAAMA,WAAuBD,EAAS,CAC3DpqF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,KAAK+xF,qBAAuB/xF,EAC5B,IAAM6xC,EAAUq0C,GAAiB,EAC7Br0C,IAAY,KACd,KAAKrY,OAAO,EAAE/D,SAASq8D,GAAeE,kBAAkB,EACxD,KAAKC,oBAAoB,GAE3B,KAAK9iD,YAAY,cAAc,EAC/B,KAAK3V,OAAO,EAAE04D,eAAiBrgD,EAC/B,KAAKoc,cAAc,EACnB,KAAKz0B,OAAO,EAAE6D,GAAG,eAAgB,IAAM,KAAK4wB,cAAc,CAAC,CAC7D,CACAlnB,eAAgB,CACd,MAAO,uBAAuB,MAAMA,cAAc,CAAC,EACrD,CACAkrD,qBAAsB,CACpB,IAAMC,EAAiB,KAAKC,iBAAiB,EACzCD,EACF,KAAK/iD,YAAY,aAAa,EAE9B,KAAKA,YAAY,cAAc,EAEjCm3C,GAAmB4L,CAAc,EACjC,KAAK5uD,QAAQ3F,QAAQ,iBAAkBu0D,CAAc,CACvD,CACAnsC,aAAc,CACZ,KAAKziB,QAAQxN,YAAYg8D,GAAeE,kBAAkB,EAC1D,KAAKC,oBAAoB,CAC3B,CACAE,kBAAmB,CACjB,OAAO,KAAK7uD,QAAQjO,SAASy8D,GAAeE,kBAAkB,CAChE,CACA/jC,eAAgB,CACV,KAAK8jC,qBAAqBhG,YAAY,EAAG,KAAK5kD,KAAK,EAClD,KAAKC,KAAK,CACjB,CACF,EACAjqC,GAAc20F,GAAgB,qBAAsB,qBAAqB,EACzE,IAAIM,GAAgBN,GACpB1yC,EAAQ5U,kBAAkB,gBAAiB4nD,EAAa,EACxD,IAAMC,GAAcjzC,EAAQlZ,aAAa,aAAa,EAChDosD,GAAN,cAA0BD,EAAY,CACpC9gC,MAAMy5B,EAAU,CACd,IAAI/qF,EACJ,IAAMu5B,EAAS,KAAKA,OAAO,EAC3B,GAAIA,EAAO0tB,YAAY,UAAU,EAAG,CAClC,GAAI8jC,IAAa,KAAKuH,gBAAiB,OACvC,KAAKA,gBAAkBvH,EACvB,GAAM,CAAE1nF,MAAAA,EAAOmoF,cAAAA,CAAc,EAAIjyD,EAAOob,SAAS,EAAE42C,WAAW/sF,GAAU,KAAK8zF,eAAe,CAAC,EAC7F,GAAIjvF,EAAO,CACT,IAAMkvF,EAAc/G,EAAgBrsC,EAAQoN,WAAWi/B,GAAgBxrF,EAAK,KAAKu5B,OAAO,IAAM,KAAO,OAASv5B,EAAG4rC,SAAS,CAAC,EAAI,KAAK0mD,gBACpI,OAAO,MAAMhhC,MAAMjuD,EAAQ;EAASkvF,CAAW,CACjD,CACF,CACA,OAAO,MAAMjhC,MAAMy5B,CAAQ,CAC7B,CACF,EACA5rC,EAAQ5U,kBAAkB,cAAe8nD,EAAW,EACpD,IAAMG,GAAcrzC,EAAQlZ,aAAa,WAAW,EAC9CwsD,GAAN,cAAoCD,EAAY,CAE9ChrF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,CACvB,CACA20B,UAAW,CACT,IAAMtoB,EAAK,MAAMsoB,SAAS,MAAO,CAAE/T,UAAW,eAAgB,CAAC,EAC/D,GAAI,KAAK6iB,SAASkvD,UAAW,CAC3B,IAAMC,EAASxzC,EAAQkmC,IAAI3wD,SAAS,MAAO,CACzC/T,UAAW,uBACXpT,IAAK,KAAKi2B,SAASkvD,SACrB,EAAG,CAAE/2E,IAAK,EAAG,CAAC,EACdvP,EAAGM,YAAYimF,CAAM,CACvB,CACA,IAAMC,EAA4B,MAAMl+D,SAAS,MAAO,CACtD/T,UAAW,iCACb,CAAC,EACD,GAAI,KAAK6iB,SAASngC,MAAO,CACvB,IAAMA,EAAQ87C,EAAQkmC,IAAI3wD,SAAS,KAAM,CACvC/T,UAAW,sBACXtd,MAAO,KAAKmgC,SAASngC,MACrBqe,UAAW,KAAK8hB,SAASngC,KAC3B,CAAC,EACDuvF,EAA0BlmF,YAAYrJ,CAAK,CAC7C,CACA,GAAI,KAAKmgC,SAASuK,YAAa,CAC7B,IAAMA,EAAcoR,EAAQkmC,IAAI3wD,SAAS,MAAO,CAC9C/T,UAAW,4BACXtd,MAAO,KAAKmgC,SAASuK,YACrBrsB,UAAW,KAAK8hB,SAASuK,WAC3B,CAAC,EACD6kD,EAA0BlmF,YAAYqhC,CAAW,CACnD,CACA,OAAI,KAAKvK,SAASngC,OAAS,KAAKmgC,SAASuK,cACvC3hC,EAAGM,YAAYkmF,CAAyB,EAEnCxmF,CACT,CACF,EACA+yC,EAAQ5U,kBAAkB,wBAAyBkoD,EAAqB,EACxE,IAAMI,GAAW1zC,EAAQujC,UAAU,QAAQ,EACrCoQ,GAAN,cAAiCD,EAAS,CACxCrrF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrBw5B,EAAO4J,MAAM,IAAM,CACjB5J,EAAO/D,SAAS,eAAe,CACjC,CAAC,EACD,KAAKu9D,cAAgB,IAAIN,GAAsBl5D,EAAQx5B,CAAO,EAC9Dw5B,EAAOoM,SAAS,KAAKotD,aAAa,CACpC,CACAzuD,SAAU,CACR,IAAItkC,GACHA,EAAK,KAAK+yF,gBAAkB,MAAgB/yF,EAAGskC,QAAQ,EACxD,KAAK/K,OAAO1sB,YAAY,KAAKkmF,aAAa,EAC1C,KAAKx5D,OAAO7D,YAAY,eAAe,EACvC,MAAM4O,QAAQ,CAChB,CACF,EACA6a,EAAQqkC,eAAe,eAAgBsP,EAAkB,EACzD,IAAME,GAAc7zC,EAAQlZ,aAAa,WAAW,EAC9CgtD,GAAN,cAAoCD,EAAY,CAE9CxrF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,CACvB,CACA20B,UAAW,CACT,IAAMtoB,EAAK,MAAMsoB,SAAS,MAAO,CAAE/T,UAAW,gBAAiB,CAAC,EAC1Dtd,EAAQ,MAAMqxB,SAAS,MAAO,CAAE/T,UAAW,YAAa,CAAC,EAC/Dtd,EAAMkc,YAAc,KAAKga,OAAO,EAAEoL,SAAS,mBAAmB,EAC9D,IAAM9P,EAAU,MAAMH,SAAS,MAAO,CAAE/T,UAAW,cAAe,CAAC,EAInE,GAHAkU,EAAQtV,YAAc,KAAKga,OAAO,EAAEoL,SAAS,wCAAwC,EACrFv4B,EAAGM,YAAYrJ,CAAK,EACpB+I,EAAGM,YAAYmoB,CAAO,EAClB,KAAK2O,SAAS0vD,OAAS,KAAK1vD,SAAS2vD,QAAS,CAChD,IAAMC,EAAa,MAAM1+D,SACvB,SACA,CAAEnV,YAAa,KAAKga,OAAO,EAAEoL,SAAS,YAAY,CAAE,EACpD,CAAE3uB,KAAM,QAAS,CACnB,EACA5J,EAAGM,YAAY0mF,CAAU,EACzBA,EAAWv5D,iBAAiB,QAAS,IAAM,CACzC,KAAKw5D,kBAAkB,EACvBD,EAAW7mF,MAAMuW,QAAU,MAC7B,CAAC,CACH,CACA,OAAO1W,CACT,CACAinF,mBAAoB,CAClB,IAAMC,EAAgB,MAAM5+D,SAAS,MAAO,CAAE/T,UAAW,mBAAoB,CAAC,EAC9E,GAAI,KAAK6iB,SAAS0vD,MAAO,CACvB,IAAMK,EAAmB,MAAM7+D,SAAS,MAAO,CAAE/T,UAAW,iBAAkB,CAAC,EAC/E4yE,EAAiB7mF,YAAY,MAAMgoB,SAAS,SAAU,CAAEnV,YAAa,KAAKga,OAAO,EAAEoL,SAAS,iBAAiB,CAAE,CAAC,CAAC,EACjH4uD,EAAiB7mF,YAAY,MAAMgoB,SAAS,MAAO,CAAEnV,YAAa,KAAKi0E,iBAAiB,EAAE5yE,KAAK,KAAK,CAAE,CAAC,CAAC,EACxG0yE,EAAc5mF,YAAY6mF,CAAgB,CAC5C,CACA,GAAI,KAAK/vD,SAAS2vD,QAAS,CACzB,IAAMM,EAAqB,MAAM/+D,SAAS,MAAO,CAAE/T,UAAW,mBAAoB,CAAC,EACnF8yE,EAAmB/mF,YAAY,MAAMgoB,SAAS,SAAU,CAAEnV,YAAa,aAAc,CAAC,CAAC,EACvFk0E,EAAmB/mF,YAAY,MAAMgoB,SAAS,MAAO,CAAEnV,YAAa,KAAKikB,SAAS2vD,OAAQ,CAAC,CAAC,EAC5FG,EAAc5mF,YAAY+mF,CAAkB,CAC9C,CACA,KAAKrnF,GAAG,EAAEM,YAAY4mF,CAAa,CACrC,CACAE,kBAAmB,CACjB,IAAMN,EAAQ,KAAK1vD,SAAS0vD,MACtBQ,EAAc,CAAA,EACpB,OAAKR,EAAQ70F,GAASC,WAAaD,GAASC,SAC1Co1F,EAAYtqF,KAAK,KAAKmwB,OAAO,EAAEoL,SAAS,UAAU,CAAC,GAEhDuuD,EAAQ70F,GAASE,gBAAkBF,GAASE,cAC/Cm1F,EAAYtqF,KAAK,KAAKmwB,OAAO,EAAEoL,SAAS,cAAc,CAAC,EAElD+uD,CACT,CACF,EACAv0C,EAAQ5U,kBAAkB,wBAAyB0oD,EAAqB,EACxE,IAAMU,GAAWx0C,EAAQujC,UAAU,QAAQ,EACrCkR,GAAN,cAAiCD,EAAS,CACxCnsF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrBw5B,EAAO4J,MAAM,IAAM,CACjB5J,EAAO/D,SAAS,eAAe,EAC/B,KAAKq+D,cAAgB,IAAIZ,GAAsB15D,EAAQx5B,CAAO,EAC9Dw5B,EAAOoM,SAAS,KAAKkuD,aAAa,CACpC,CAAC,EACDt6D,EAAOwE,IAAI,OAAQ,IAAM,CACvB,KAAK81D,cAAc1sD,KAAK,CAC1B,CAAC,CACH,CACA7C,SAAU,CACR,IAAItkC,GACHA,EAAK,KAAK6zF,gBAAkB,MAAgB7zF,EAAGskC,QAAQ,EACxD,KAAK/K,OAAO1sB,YAAY,KAAKgnF,aAAa,EAC1C,KAAKt6D,OAAO7D,YAAY,eAAe,EACvC,MAAM4O,QAAQ,CAChB,CACF,EACA6a,EAAQqkC,eAAe,eAAgBoQ,EAAkB,EACzD,IAAME,GAAW30C,EAAQujC,UAAU,QAAQ,EACrCqR,GAAyB,MAAMA,WAA+BD,EAAS,CAC3EtsF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,KAAKuwD,OAASvwD,EAAQuwD,OACtB,KAAKp1B,SAAW,KAAK84D,cAAc,EACnC,KAAKC,kBAAqB7hF,GAAU,KAAK8hF,UAAU9hF,CAAK,EACxDjG,SAAS0tB,iBAAiB,UAAW,KAAKo6D,iBAAiB,CAC7D,CACA3vD,SAAU,CACRn4B,SAASytB,oBAAoB,UAAW,KAAKq6D,iBAAiB,EAC9D,MAAM3vD,QAAQ,CAChB,CACA4vD,UAAU9hF,EAAO,CACf,GAAK,KAAK+hF,iBAAiB/hF,EAAMrM,MAAM,GACvC,QAAW85C,KAAW,KAAK3kB,SACzB,GAAI2kB,EAAQu0C,OAAOhiF,CAAK,EAAG,CACzBytC,EAAQxB,GAAGjsC,CAAK,EAChB,MACF,EAEJ,CACA4hF,eAAgB,CACd,IAAM94D,EAAW,CAEf,CACEk5D,OAASnjF,GAAMA,EAAEpU,MAAQ,KAAOoU,EAAEpU,MAAQ,iBAC1CwhD,GAAKptC,GAAM,CACTA,EAAE8qB,eAAe,EACjB9qB,EAAEqrB,gBAAgB,EACd,KAAK/C,OAAOgV,OAAO,EAAG,KAAKhV,OAAO6J,KAAK,EACtC,KAAK7J,OAAOkV,MAAM,CACzB,CACF,EAEA,CACE2lD,OAASnjF,GAAM,KAAKojF,QAAQpjF,EAAG,SAAS,EACxCotC,GAAKptC,GAAM,CACTA,EAAE8qB,eAAe,EACjB,KAAKxC,OAAOsoB,OAAO,KAAKtoB,OAAOsoB,OAAO,EAAIkyC,GAAuBO,WAAW,CAC9E,CACF,EAEA,CACEF,OAASnjF,GAAM,KAAKojF,QAAQpjF,EAAG,WAAW,EAC1CotC,GAAKptC,GAAM,CACTA,EAAE8qB,eAAe,EACjB,KAAKxC,OAAOsoB,OAAO,KAAKtoB,OAAOsoB,OAAO,EAAIkyC,GAAuBO,WAAW,CAC9E,CACF,EAEA,CAEEF,OAASnjF,GAAM,KAAKojF,QAAQpjF,EAAG,GAAG,GAAK,CAACA,EAAEsjF,QAAUtjF,EAAEujF,SAAWvjF,EAAEpU,MAAQ,QAC3EwhD,GAAKptC,GAAM,CACTA,EAAE8qB,eAAe,EACb,KAAKxC,OAAO67B,aAAa,EAAG,KAAK77B,OAAO87B,eAAe,EACtD,KAAK97B,OAAO+7B,kBAAkB,CACrC,CACF,EAEA,CACE8+B,OAASnjF,GAAM,KAAKojF,QAAQpjF,EAAG,GAAG,EAClCotC,GAAKptC,GAAM,CACTA,EAAE8qB,eAAe,EACjB,KAAKxC,OAAOn2B,MAAM,CAAC,KAAKm2B,OAAOn2B,MAAM,CAAC,CACxC,CACF,EAEA,CACEgxF,OAASnjF,GAAMA,EAAEpU,MAAQ,IACzBwhD,GAAIA,IAAM,CACR,GAAI,KAAKiS,OAAQ,OACjB,IAAMvqD,EAASrH,KAAKgmB,IAAI,KAAK6U,OAAOgmC,aAAa,EAAI,GAAK,CAAC,EAC3D,KAAKhmC,OAAOgmC,aAAazjD,WAAW/V,EAAO+H,QAAQ,CAAC,CAAC,CAAC,CACxD,CACF,EAEA,CACEsmF,OAASnjF,GAAMA,EAAEpU,MAAQ,IACzBwhD,GAAIA,IAAM,CACR,GAAI,KAAKiS,OAAQ,OACjB,IAAMvqD,EAASrH,KAAKwG,IAAI,KAAKq0B,OAAOgmC,aAAa,EAAI,GAAK,EAAG,EAC7D,KAAKhmC,OAAOgmC,aAAazjD,WAAW/V,EAAO+H,QAAQ,CAAC,CAAC,CAAC,CACxD,CACF,EAEA,CACEsmF,OAASnjF,GAAMA,EAAEpU,MAAQ,IACzBwhD,GAAIA,IAAM,CACR,GAAI,KAAKiS,OAAQ,OACjB,KAAK/2B,OAAOkV,MAAM,EAClB,IAAMgmD,EAAO,EAAI,GACjB,KAAKl7D,OAAO0e,YAAY,KAAK1e,OAAO0e,YAAY,EAAIw8C,CAAI,CAC1D,CACF,EAEA,CACEL,OAASnjF,GAAMA,EAAEpU,MAAQ,IACzBwhD,GAAIA,IAAM,CACR,GAAI,KAAKiS,OAAQ,OACjB,KAAK/2B,OAAOkV,MAAM,EAClB,IAAMgmD,EAAO,EAAI,GACjB,KAAKl7D,OAAO0e,YAAY,KAAK1e,OAAO0e,YAAY,EAAIw8C,CAAI,CAC1D,CACF,CAAC,EAEH,OAAI,KAAKnkC,OAAep1B,EACjBA,EAASh3B,OAAO,KAAKwwF,iBAAiB,CAAC,CAChD,CACAA,kBAAmB,CACjB,IAAMx5D,EAAW,CAEf,CACEk5D,OAASnjF,GAAM,KAAKojF,QAAQpjF,EAAG,WAAW,GAAK,KAAKojF,QAAQpjF,EAAG,aAAa,EAC5EotC,GAAKptC,GAAM,CACT,GAAI,KAAKq/C,OAAQ,OACjBr/C,EAAE8qB,eAAe,EACjB,IAAMh2B,EAASrH,KAAKwG,IAAI,EAAG,KAAKq0B,OAAO0e,YAAY,EAAI87C,GAAuBY,SAAS,EACvF,KAAKp7D,OAAO0e,YAAYlyC,CAAM,CAChC,CACF,EAEA,CACEquF,OAASnjF,GAAM,KAAKojF,QAAQpjF,EAAG,YAAY,GAAK,KAAKojF,QAAQpjF,EAAG,cAAc,EAC9EotC,GAAKptC,GAAM,CACT,GAAI,KAAKq/C,OAAQ,OACjBr/C,EAAE8qB,eAAe,EACjB,IAAMh2B,EAASrH,KAAKgmB,IAAI,KAAK6U,OAAOqS,SAAS,EAAG,KAAKrS,OAAO0e,YAAY,EAAI87C,GAAuBY,SAAS,EAC5G,KAAKp7D,OAAO0e,YAAYlyC,CAAM,CAChC,CACF,CAAC,EAEH,QAASrG,EAAI,EAAGA,EAAI,GAAIA,IACtBw7B,EAAS9xB,KAAK,CACZgrF,OAASnjF,GAAM,KAAK2jF,eAAe3jF,EAAGvR,EAAI,EAAE,EAC5C2+C,GAAKptC,GAAM,CACL,KAAKq/C,SACTr/C,EAAE8qB,eAAe,EACjB,KAAKxC,OAAO0e,YAAY,KAAK1e,OAAOqS,SAAS,EAAIlsC,EAAI,EAAG,EAC1D,CACF,CAAC,EAEH,OAAOw7B,CACT,CACAi5D,iBAAiBU,EAAS,CACxB,IAAMjlD,EAAW,KAAKrW,OAAOntB,GAAG,EAC1BsjC,EAAWvjC,SAASwjC,cACpBmlD,EAAmBD,EAAQh1E,QAAQ7N,YAAY,EACrD,OAAO09B,IAAaE,GAAYF,IAAaE,EAASpb,cAAc,WAAW,GAAKkb,IAAaE,EAASpb,cAAc,kBAAkB,GAAKqgE,EAAQh4E,KAAO,WAAai4E,IAAqB,QAAUA,IAAqB,OACjO,CACAT,QAAQjiF,EAAOvV,EAAK,CAClB,OAAIA,EAAI8C,SAAW,IAAG9C,EAAMA,EAAIoa,YAAY,GACrC,CAAC7E,EAAMoiF,SAAW,CAACpiF,EAAMmiF,QAAU,CAACniF,EAAM2iF,SAAW,CAAC3iF,EAAM49B,UAAY,KAAKglD,YAAY5iF,EAAMvV,IAAKuV,EAAMG,IAAI,IAAM1V,CAC7H,CACA+3F,eAAexiF,EAAOvV,EAAK,CACzB,MAAO,CAACuV,EAAMoiF,SAAW,CAACpiF,EAAMmiF,QAAU,CAACniF,EAAM2iF,SAAW3iF,EAAMvV,MAAQA,CAC5E,CAGAm4F,YAAYn4F,EAAKgoC,EAAO,CACtB,GAAIhoC,EAAI8C,SAAW,EACjB,OAAO9C,EAIT,GADmBA,EAAIqV,WAAW,CAAC,GADX,IAER,CACd,GAAI2yB,EAAMowD,WAAW,KAAK,GAAKpwD,EAAMllC,SAAW,EAC9C,OAAOklC,EAAM8pC,OAAO,CAAC,EAEvB,GAAI9pC,EAAMowD,WAAW,OAAO,GAAKpwD,EAAMllC,SAAW,EAChD,OAAOklC,EAAM8pC,OAAO,CAAC,CAEzB,CACA,OAAO9xE,EAAIoa,YAAY,CACzB,CACF,EACA/Z,GAAc62F,GAAwB,cAAe,EAAG,EACxD72F,GAAc62F,GAAwB,YAAa,CAAC,EACpD,IAAImB,GAAwBnB,GAC5B50C,EAAQqkC,eAAe,wBAAyB0R,EAAqB,EACrE,SAASC,GAA0BvmF,EAAG,CACpC,OAAOA,GAAKA,EAAEC,YAAcpS,OAAOoE,UAAUC,eAAeC,KAAK6N,EAAG,SAAS,EAAIA,EAAE,QAAaA,CAClG,CACA,IAAIwmF,GAAY,CAAEzkF,QAAS,CAAC,CAAE,EAC1B0kF,GAAYD,GAAUzkF,QAAU,CAAC,EACjC2kF,GACAC,GACJ,SAASC,IAAqB,CAC5B,MAAM,IAAI9qF,MAAM,iCAAiC,CACnD,CACA,SAAS+qF,IAAwB,CAC/B,MAAM,IAAI/qF,MAAM,mCAAmC,CACrD,EACC,UAAW,CACV,GAAI,CACE,OAAOsC,YAAe,WACxBsoF,GAAqBtoF,WAErBsoF,GAAqBE,EAEzB,MAAY,CACVF,GAAqBE,EACvB,CACA,GAAI,CACE,OAAOt9E,cAAiB,WAC1Bq9E,GAAuBr9E,aAEvBq9E,GAAuBE,EAE3B,MAAY,CACVF,GAAuBE,EACzB,CACF,GAAG,EACH,SAASC,GAAaC,EAAK,CACzB,GAAIL,KAAuBtoF,WACzB,OAAOA,WAAW2oF,EAAK,CAAC,EAE1B,IAAKL,KAAuBE,IAAsB,CAACF,KAAuBtoF,WACxEsoF,OAAAA,GAAqBtoF,WACdA,WAAW2oF,EAAK,CAAC,EAE1B,GAAI,CACF,OAAOL,GAAmBK,EAAK,CAAC,CAClC,MAAY,CACV,GAAI,CACF,OAAOL,GAAmBv0F,KAAK,KAAM40F,EAAK,CAAC,CAC7C,MAAa,CACX,OAAOL,GAAmBv0F,KAAK,KAAM40F,EAAK,CAAC,CAC7C,CACF,CACF,CACA,SAASC,GAAkBxK,EAAQ,CACjC,GAAImK,KAAyBr9E,aAC3B,OAAOA,aAAakzE,CAAM,EAE5B,IAAKmK,KAAyBE,IAAyB,CAACF,KAAyBr9E,aAC/Eq9E,OAAAA,GAAuBr9E,aAChBA,aAAakzE,CAAM,EAE5B,GAAI,CACF,OAAOmK,GAAqBnK,CAAM,CACpC,MAAY,CACV,GAAI,CACF,OAAOmK,GAAqBx0F,KAAK,KAAMqqF,CAAM,CAC/C,MAAa,CACX,OAAOmK,GAAqBx0F,KAAK,KAAMqqF,CAAM,CAC/C,CACF,CACF,CACA,IAAIyK,GAAU,CAAA,EACVC,GAAa,GACbC,GACAC,GAAe,GACnB,SAASC,IAAoB,CACvB,CAACH,IAAc,CAACC,KAGpBD,GAAa,GACTC,GAAep2F,OACjBk2F,GAAUE,GAAe7xF,OAAO2xF,EAAO,EAEvCG,GAAe,GAEbH,GAAQl2F,QACVu2F,GAAa,EAEjB,CACA,SAASA,IAAe,CACtB,GAAIJ,CAAAA,GAGJ,KAAIt8E,EAAUk8E,GAAaO,EAAiB,EAC5CH,GAAa,GAEb,QADIK,EAAMN,GAAQl2F,OACXw2F,GAAK,CAGV,IAFAJ,GAAiBF,GACjBA,GAAU,CAAA,EACH,EAAEG,GAAeG,GAClBJ,IACFA,GAAeC,EAAY,EAAEI,IAAI,EAGrCJ,GAAe,GACfG,EAAMN,GAAQl2F,MAChB,CACAo2F,GAAiB,KACjBD,GAAa,GACbF,GAAkBp8E,CAAO,EAC3B,CACA67E,GAAUgB,SAAW,SAASV,EAAK,CACjC,IAAI/lE,EAAO,IAAInpB,MAAMF,UAAU5G,OAAS,CAAC,EACzC,GAAI4G,UAAU5G,OAAS,EACrB,QAASD,EAAI,EAAGA,EAAI6G,UAAU5G,OAAQD,IACpCkwB,EAAKlwB,EAAI,CAAC,EAAI6G,UAAU7G,CAAC,EAG7Bm2F,GAAQzsF,KAAK,IAAIktF,GAAOX,EAAK/lE,CAAI,CAAC,EAC9BimE,GAAQl2F,SAAW,GAAK,CAACm2F,IAC3BJ,GAAaQ,EAAY,CAE7B,EACA,SAASI,GAAOX,EAAKx+E,EAAO,CAC1B,KAAKw+E,IAAMA,EACX,KAAKx+E,MAAQA,CACf,CACAm/E,GAAOz1F,UAAUu1F,IAAM,UAAW,CAChC,KAAKT,IAAIrmF,MAAM,KAAM,KAAK6H,KAAK,CACjC,EACAk+E,GAAUhyF,MAAQ,UAClBgyF,GAAUrQ,QAAU,GACpBqQ,GAAUkB,IAAM,CAAC,EACjBlB,GAAUmB,KAAO,CAAA,EACjBnB,GAAUzxF,QAAU,GACpByxF,GAAUoB,SAAW,CAAC,EACtB,SAASC,IAAS,CAClB,CACArB,GAAUj4D,GAAKs5D,GACfrB,GAAUsB,YAAcD,GACxBrB,GAAUuB,KAAOF,GACjBrB,GAAU7kE,IAAMkmE,GAChBrB,GAAUwB,eAAiBH,GAC3BrB,GAAUyB,mBAAqBJ,GAC/BrB,GAAU0B,KAAOL,GACjBrB,GAAU2B,gBAAkBN,GAC5BrB,GAAU4B,oBAAsBP,GAChCrB,GAAU7qB,UAAY,SAASxkE,EAAM,CACnC,MAAO,CAAA,CACT,EACAqvF,GAAU6B,QAAU,SAASlxF,EAAM,CACjC,MAAM,IAAI0E,MAAM,kCAAkC,CACpD,EACA2qF,GAAU8B,IAAM,UAAW,CACzB,MAAO,GACT,EACA9B,GAAU+B,MAAQ,SAASptE,EAAK,CAC9B,MAAM,IAAItf,MAAM,gCAAgC,CAClD,EACA2qF,GAAUgC,MAAQ,UAAW,CAC3B,MAAO,EACT,EACA,IAAIC,GAAmBlC,GAAUzkF,QAC3B4mF,GAA8BpC,GAA0BmC,EAAgB,EAC1EE,GAAY,CAAE7mF,QAAS,CAAC,CAAE,EAC1B8mF,GACAC,GACJ,SAASC,IAAc,CACrB,GAAID,GAAiB,OAAOD,GAC5BC,GAAkB,EAClB,IAAIv8E,EAAI,IACJC,EAAID,EAAI,GACRF,EAAIG,EAAI,GACR7L,EAAI0L,EAAI,GACRinB,EAAI3yB,EAAI,EACRoV,EAAIpV,EAAI,OACZkoF,GAAO,SAASrxF,EAAKrG,EAAS,CAC5BA,EAAUA,GAAW,CAAC,EACtB,IAAIiW,EAAO,OAAO5P,EAClB,GAAI4P,IAAS,UAAY5P,EAAIzG,OAAS,EACpC,OAAOsU,EAAM7N,CAAG,EACX,GAAI4P,IAAS,UAAY4hF,SAASxxF,CAAG,EAC1C,OAAOrG,EAAQ83F,KAAOC,EAAQ1xF,CAAG,EAAI2xF,EAAS3xF,CAAG,EAEnD,MAAM,IAAIsE,MACR,wDAA0DV,KAAKC,UAAU7D,CAAG,CAC9E,CACF,EACA,SAAS6N,EAAM6f,EAAK,CAElB,GADAA,EAAM3tB,OAAO2tB,CAAG,EACZA,EAAAA,EAAIn0B,OAAS,KAGjB,KAAIZ,EAAQ,mIAAmIqzB,KAC7I0B,CACF,EACA,GAAK/0B,EAGL,KAAIgQ,EAAI+M,WAAW/c,EAAM,CAAC,CAAC,EACvBiX,GAAQjX,EAAM,CAAC,GAAK,MAAMiT,YAAY,EAC1C,OAAQgE,EAAI,CACV,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAOjH,EAAI4V,EACb,IAAK,QACL,IAAK,OACL,IAAK,IACH,OAAO5V,EAAImzB,EACb,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOnzB,EAAIQ,EACb,IAAK,QACL,IAAK,OACL,IAAK,MACL,IAAK,KACL,IAAK,IACH,OAAOR,EAAIkM,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOlM,EAAIqM,EACb,IAAK,UACL,IAAK,SACL,IAAK,OACL,IAAK,MACL,IAAK,IACH,OAAOrM,EAAIoM,EACb,IAAK,eACL,IAAK,cACL,IAAK,QACL,IAAK,OACL,IAAK,KACH,OAAOpM,EACT,QACE,MACJ,GACF,CACA,SAASgpF,EAAShrF,EAAK,CACrB,IAAIirF,EAAQt5F,KAAKqnB,IAAIhZ,CAAG,EACxB,OAAIirF,GAASzoF,EACJ7Q,KAAK+B,MAAMsM,EAAMwC,CAAC,EAAI,IAE3ByoF,GAAS/8E,EACJvc,KAAK+B,MAAMsM,EAAMkO,CAAC,EAAI,IAE3B+8E,GAAS58E,EACJ1c,KAAK+B,MAAMsM,EAAMqO,CAAC,EAAI,IAE3B48E,GAAS78E,EACJzc,KAAK+B,MAAMsM,EAAMoO,CAAC,EAAI,IAExBpO,EAAM,IACf,CACA,SAAS+qF,EAAQ/qF,EAAK,CACpB,IAAIirF,EAAQt5F,KAAKqnB,IAAIhZ,CAAG,EACxB,OAAIirF,GAASzoF,EACJ0oF,EAAOlrF,EAAKirF,EAAOzoF,EAAG,KAAK,EAEhCyoF,GAAS/8E,EACJg9E,EAAOlrF,EAAKirF,EAAO/8E,EAAG,MAAM,EAEjC+8E,GAAS58E,EACJ68E,EAAOlrF,EAAKirF,EAAO58E,EAAG,QAAQ,EAEnC48E,GAAS78E,EACJ88E,EAAOlrF,EAAKirF,EAAO78E,EAAG,QAAQ,EAEhCpO,EAAM,KACf,CACA,SAASkrF,EAAOlrF,EAAKirF,EAAOjpF,EAAG/I,EAAM,CACnC,IAAIkyF,EAAWF,GAASjpF,EAAI,IAC5B,OAAOrQ,KAAK+B,MAAMsM,EAAMgC,CAAC,EAAI,IAAM/I,GAAQkyF,EAAW,IAAM,GAC9D,CACA,OAAOT,EACT,CACA,IAAIU,GACAC,GACJ,SAASC,IAAkB,CACzB,GAAID,GAAqB,OAAOD,GAChCC,GAAsB,EACtB,SAASE,EAAM/B,EAAK,CAClBgC,EAAY9nE,MAAQ8nE,EACpBA,EAAYtpF,QAAUspF,EACtBA,EAAYC,OAASA,EACrBD,EAAYznE,QAAUA,EACtBynE,EAAYxnE,OAASA,EACrBwnE,EAAY3mD,QAAUA,EACtB2mD,EAAYE,SAAWd,GAAY,EACnCY,EAAYG,QAAUA,EACtBj8F,OAAOmE,KAAK21F,CAAG,EAAEz0F,QAASjF,GAAQ,CAChC07F,EAAY17F,CAAG,EAAI05F,EAAI15F,CAAG,CAC5B,CAAC,EACD07F,EAAY3mF,MAAQ,CAAA,EACpB2mF,EAAYI,MAAQ,CAAA,EACpBJ,EAAYK,WAAa,CAAC,EAC1B,SAASC,EAAYC,EAAW,CAC9B,IAAIrxF,EAAQ,EACZ,QAAS/H,EAAI,EAAGA,EAAIo5F,EAAUn5F,OAAQD,IACpC+H,GAASA,GAAS,GAAKA,EAAQqxF,EAAU5mF,WAAWxS,CAAC,EACrD+H,GAAS,EAEX,OAAO8wF,EAAYQ,OAAOr6F,KAAKqnB,IAAIte,CAAK,EAAI8wF,EAAYQ,OAAOp5F,MAAM,CACvE,CACA44F,EAAYM,YAAcA,EAC1B,SAASN,EAAYO,EAAW,CAC9B,IAAIE,EACAC,EAAiB,KACjBC,EACAC,EACJ,SAASC,KAAUxpE,EAAM,CACvB,GAAI,CAACwpE,EAAOxnD,QACV,OAEF,IAAM7pB,EAAQqxE,EACRC,EAAO5hE,OAAuB,IAAImD,IAAM,EACxC7tB,EAAMssF,GAAQL,GAAYK,GAChCtxE,EAAMuxE,KAAOvsF,EACbgb,EAAMwxE,KAAOP,EACbjxE,EAAMsxE,KAAOA,EACbL,EAAWK,EACXzpE,EAAK,CAAC,EAAI2oE,EAAYC,OAAO5oE,EAAK,CAAC,CAAC,EAChC,OAAOA,EAAK,CAAC,GAAM,UACrBA,EAAKI,QAAQ,IAAI,EAEnB,IAAIzZ,EAAQ,EACZqZ,EAAK,CAAC,EAAIA,EAAK,CAAC,EAAEvU,QAAQ,gBAAiB,CAACtc,EAAOkB,IAAY,CAC7D,GAAIlB,IAAU,KACZ,MAAO,IAETwX,IACA,IAAMijF,EAAYjB,EAAYK,WAAW34F,CAAO,EAChD,GAAI,OAAOu5F,GAAc,WAAY,CACnC,IAAMpzF,EAAMwpB,EAAKrZ,CAAK,EACtBxX,EAAQy6F,EAAUz4F,KAAKgnB,EAAO3hB,CAAG,EACjCwpB,EAAKb,OAAOxY,EAAO,CAAC,EACpBA,GACF,CACA,OAAOxX,CACT,CAAC,EACDw5F,EAAYkB,WAAW14F,KAAKgnB,EAAO6H,CAAI,GACzB7H,EAAMpf,KAAO4vF,EAAY5vF,KACjC2G,MAAMyY,EAAO6H,CAAI,CACzB,CACAwpE,OAAAA,EAAON,UAAYA,EACnBM,EAAOM,UAAYnB,EAAYmB,UAAU,EACzCN,EAAO12E,MAAQ61E,EAAYM,YAAYC,CAAS,EAChDM,EAAOnU,OAASnB,EAChBsV,EAAOV,QAAUH,EAAYG,QAC7Bj8F,OAAOC,eAAe08F,EAAQ,UAAW,CACvCr8F,WAAY,GACZC,aAAc,GACd8I,IAAKA,IACCmzF,IAAmB,KACdA,GAELC,IAAoBX,EAAYoB,aAClCT,EAAkBX,EAAYoB,WAC9BR,EAAeZ,EAAY3mD,QAAQknD,CAAS,GAEvCK,GAETr2F,IAAM0Y,GAAM,CACVy9E,EAAiBz9E,CACnB,CACF,CAAC,EACG,OAAO+8E,EAAY9I,MAAS,YAC9B8I,EAAY9I,KAAK2J,CAAM,EAElBA,CACT,CACA,SAAStV,EAAQgV,EAAWc,EAAW,CACrC,IAAMC,EAAWtB,EAAY,KAAKO,WAAa,OAAOc,EAAc,IAAc,IAAMA,GAAad,CAAS,EAC9Ge,OAAAA,EAASlxF,IAAM,KAAKA,IACbkxF,CACT,CACA,SAAS9oE,EAAO4oE,EAAY,CAC1BpB,EAAYuB,KAAKH,CAAU,EAC3BpB,EAAYoB,WAAaA,EACzBpB,EAAY3mF,MAAQ,CAAA,EACpB2mF,EAAYI,MAAQ,CAAA,EACpB,IAAMr5F,GAAS,OAAOq6F,GAAe,SAAWA,EAAa,IAAI1jF,KAAK,EAAEoF,QAAQ,IAAK,GAAG,EAAE/b,MAAM,GAAG,EAAEqxB,OAAO5D,OAAO,EACnH,QAAWgtE,KAAMz6F,EACXy6F,EAAG,CAAC,IAAM,IACZxB,EAAYI,MAAMvvF,KAAK2wF,EAAGtjF,MAAM,CAAC,CAAC,EAElC8hF,EAAY3mF,MAAMxI,KAAK2wF,CAAE,CAG/B,CACA,SAASC,EAAgBnoF,EAAQooF,EAAU,CACzC,IAAIC,EAAc,EACdC,EAAgB,EAChBC,EAAY,GACZC,EAAa,EACjB,KAAOH,EAAcroF,EAAOlS,QAC1B,GAAIw6F,EAAgBF,EAASt6F,SAAWs6F,EAASE,CAAa,IAAMtoF,EAAOqoF,CAAW,GAAKD,EAASE,CAAa,IAAM,KACjHF,EAASE,CAAa,IAAM,KAC9BC,EAAYD,EACZE,EAAaH,EACbC,MAEAD,IACAC,aAEOC,IAAc,GACvBD,EAAgBC,EAAY,EAC5BC,IACAH,EAAcG,MAEd,OAAO,GAGX,KAAOF,EAAgBF,EAASt6F,QAAUs6F,EAASE,CAAa,IAAM,KACpEA,IAEF,OAAOA,IAAkBF,EAASt6F,MACpC,CACA,SAASmxB,GAAU,CACjB,IAAM6oE,EAAa,CACjB,GAAGpB,EAAY3mF,MACf,GAAG2mF,EAAYI,MAAMp0F,IAAKu0F,GAAc,IAAMA,CAAS,CAAC,EACxDl4E,KAAK,GAAG,EACV23E,OAAAA,EAAYxnE,OAAO,EAAE,EACd4oE,CACT,CACA,SAAS/nD,EAAQ5rC,EAAM,CACrB,QAAWs0F,KAAQ/B,EAAYI,MAC7B,GAAIqB,EAAgBh0F,EAAMs0F,CAAI,EAC5B,MAAO,GAGX,QAAWP,KAAMxB,EAAY3mF,MAC3B,GAAIooF,EAAgBh0F,EAAM+zF,CAAE,EAC1B,MAAO,GAGX,MAAO,EACT,CACA,SAASvB,EAAOpyF,EAAK,CACnB,OAAIA,aAAesE,MACVtE,EAAIyE,OAASzE,EAAImC,QAEnBnC,CACT,CACA,SAASsyF,GAAU,CACjBhwF,QAAQE,KAAK,uIAAuI,CACtJ,CACA2vF,OAAAA,EAAYxnE,OAAOwnE,EAAYl/C,KAAK,CAAC,EAC9Bk/C,CACT,CACAJ,OAAAA,GAAWG,EACJH,EACT,CACA,IAAIoC,GACJ,SAASC,IAAmB,CAC1B,OAAID,KACJA,GAAuB,EACtB,SAASzpF,EAAQH,EAAS,CACzBA,EAAQ8oF,WAAaA,EACrB9oF,EAAQmpF,KAAOA,EACfnpF,EAAQ0oC,KAAOA,EACf1oC,EAAQ+oF,UAAYA,EACpB/oF,EAAQ8pF,QAAUC,EAAa,EAC/B/pF,EAAQ+nF,SAA2B,IAAM,CACvC,IAAIiC,EAAS,GACb,MAAO,IAAM,CACNA,IACHA,EAAS,GACTjyF,QAAQE,KAAK,uIAAuI,EAExJ,CACF,GAAG,EACH+H,EAAQooF,OAAS,CACf,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,UACA,SAAS,EAEX,SAASW,GAAY,CACnB,GAAI,OAAOn3F,OAAW,KAAeA,OAAOq4F,UAAYr4F,OAAOq4F,QAAQ5kF,OAAS,YAAczT,OAAOq4F,QAAQC,QAC3G,MAAO,GAET,GAAI,OAAOxwF,UAAc,KAAeA,UAAUD,WAAaC,UAAUD,UAAU4H,YAAY,EAAEjT,MAAM,uBAAuB,EAC5H,MAAO,GAET,IAAIqc,EACJ,OAAO,OAAOjP,SAAa,KAAeA,SAAS6N,iBAAmB7N,SAAS6N,gBAAgBzN,OAASJ,SAAS6N,gBAAgBzN,MAAMuuF,kBACvI,OAAOv4F,OAAW,KAAeA,OAAOmG,UAAYnG,OAAOmG,QAAQqyF,SAAWx4F,OAAOmG,QAAQsyF,WAAaz4F,OAAOmG,QAAQuyF,QAEzH,OAAO5wF,UAAc,KAAeA,UAAUD,YAAcgR,EAAI/Q,UAAUD,UAAU4H,YAAY,EAAEjT,MAAM,gBAAgB,IAAME,SAASmc,EAAE,CAAC,EAAG,EAAE,GAAK,IACpJ,OAAO/Q,UAAc,KAAeA,UAAUD,WAAaC,UAAUD,UAAU4H,YAAY,EAAEjT,MAAM,oBAAoB,CACzH,CACA,SAAS06F,EAAW7pE,EAAM,CAExB,GADAA,EAAK,CAAC,GAAK,KAAK8pE,UAAY,KAAO,IAAM,KAAKZ,WAAa,KAAKY,UAAY,MAAQ,KAAO9pE,EAAK,CAAC,GAAK,KAAK8pE,UAAY,MAAQ,KAAO,IAAM5oF,EAAOH,QAAQ8nF,SAAS,KAAKa,IAAI,EACzK,CAAC,KAAKI,UACR,OAEF,IAAMz7E,EAAI,UAAY,KAAKyE,MAC3BkN,EAAKb,OAAO,EAAG,EAAG9Q,EAAG,gBAAgB,EACrC,IAAI1H,EAAQ,EACR2kF,EAAQ,EACZtrE,EAAK,CAAC,EAAEvU,QAAQ,cAAgBtc,GAAU,CACpCA,IAAU,OAGdwX,IACIxX,IAAU,OACZm8F,EAAQ3kF,GAEZ,CAAC,EACDqZ,EAAKb,OAAOmsE,EAAO,EAAGj9E,CAAC,CACzB,CACAtN,EAAQhI,IAAMD,QAAQ+nB,OAAS/nB,QAAQC,MAAQ,IAAM,CACrD,GACA,SAASmxF,EAAKH,EAAY,CACxB,GAAI,CACEA,EACFhpF,EAAQ8pF,QAAQ50F,QAAQ,QAAS8zF,CAAU,EAE3ChpF,EAAQ8pF,QAAQp0F,WAAW,OAAO,CAEtC,MAAgB,CAChB,CACF,CACA,SAASgzC,GAAO,CACd,IAAIloC,EACJ,GAAI,CACFA,EAAIR,EAAQ8pF,QAAQx0F,QAAQ,OAAO,CACrC,MAAgB,CAChB,CACA,MAAI,CAACkL,GAAK,OAAOomF,GAAgB,KAAe,QAASA,KACvDpmF,EAAIomF,GAAYhB,IAAI4E,OAEfhqF,CACT,CACA,SAASupF,GAAe,CACtB,GAAI,CACF,OAAOzzF,YACT,MAAgB,CAChB,CACF,CACA6J,EAAOH,QAAU0nF,GAAgB,EAAE1nF,CAAO,EAC1C,GAAM,CAAEioF,WAAAA,CAAW,EAAI9nF,EAAOH,QAC9BioF,EAAW1zC,EAAI,SAAS1pC,EAAG,CACzB,GAAI,CACF,OAAOxR,KAAKC,UAAUuR,CAAC,CACzB,OAAS1S,EAAO,CACd,MAAO,+BAAiCA,EAAMP,OAChD,CACF,CACF,EAAGivF,GAAWA,GAAU7mF,OAAO,GACxB6mF,GAAU7mF,OACnB,CACA,IAAIyqF,GAAmBZ,GAAiB,EAClCa,GAA0B1sF,GAA0BysF,EAAgB,EACpEE,GAAgBD,GAAQ,yBAAyB,EACjDE,GAAWp8C,EAAQujC,UAAU,QAAQ,EACrC8Y,GAAN,cAA4BD,EAAS,CACnC/zF,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,CAAM,EACZ,KAAKiK,SAAWzjC,EAChB,KAAK07F,mBAAqB,EAC1B,KAAKC,oBAAsB,EAC3B,KAAKC,iBAAmB,EACxB,KAAKC,kBAAoB,EACzB,KAAKnlD,OAAS,EACd,KAAKolD,cAAgB,EACrB,KAAKC,SAAW,EAChB,KAAKC,WAAW,EAChB,KAAKC,sBAAsB,EAC3B,KAAKC,YAAY,EACjB,KAAKC,mBAAmB,EACxB,KAAKn+D,IAAI,OAAQ,IAAM,CACrB,KAAKxE,OAAO6D,GAAG,eAAgB,IAAM,CACnC,KAAK++D,yBAAyB,CAChC,CAAC,CACH,CAAC,EACD,KAAKA,yBAAyB,CAChC,CACA73D,SAAU,CACJ,KAAK83D,iBAAiB/yD,cAAc,KAAK+yD,eAAe,EAC5D,MAAM93D,QAAQ,CAChB,CACA63D,0BAA2B,CACzB,KAAKV,mBAAqB,EAC1B,KAAKC,oBAAsB,EAC3B,KAAKC,iBAAmB,EACxB,KAAKC,kBAAoB,EACzB,KAAKnlD,OAAS,EACd,KAAKolD,cAAgB,EACrB,KAAKQ,sBAAwB,OAC7Bf,GAAc,iCAAiC,EAC/C,KAAK/hE,OAAOwE,IAAI,OAAQ,IAAM,CAC5Bu9D,GAAc,kBAAkB,EAChC,KAAKgB,mBAAmB,CAC1B,CAAC,CACH,CACAA,oBAAqB,CACf,KAAKF,iBAAiB/yD,cAAc,KAAK+yD,eAAe,EACvD,KAAK54D,SAAS+4D,WAAW,IAC9B,KAAKH,gBAAkB9yD,YAAY,IAAM,CACvC,IAAIrkC,EACAI,EACJ,GAAI,KAAKk0B,OAAO0tB,YAAY,gBAAgB,EAAG,CAC7C,IAAMh+C,EAAQ,KAAKswB,OAAO41D,eAAe,EAAEqN,gBAAgB,EAC3D,GAAI,CAACvzF,EAAO,OACZhE,EAAavG,KAAKgmB,IAAIzb,EAAMlE,QAAU,EAAGkE,EAAMjE,OAAS,CAAC,EACzD,IAAMy3F,EAAqCxzF,GAAMstB,MAAM,YAAY,EACnElxB,EAAMo3F,EAAYx9F,SAASw9F,EAAW,EAAE,EAAI,MAC9C,SAAW,KAAKljE,OAAO0tB,YAAY,UAAU,EAAG,CAC9C,IAAMy1C,EAAY,KAAKnjE,OAAOojE,SAAS,EAAEC,oBAAoB,EAC7D,GAAI,CAACF,EAAW,OAChBz3F,EAAay3F,EAAUz3F,WAAW4X,GAClCxX,EAAMq3F,EAAUr3F,KAAOq3F,EAAUr3F,MAAQ,GAAKq3F,EAAUr3F,IAAM,MAChE,KACE,QAEF,IAAM0E,EAAO,CACX9E,WAAAA,EACAI,IAAAA,EACAw3F,WAAY,KAAKr5D,SAASvhB,KAAK,EAC/B25E,kBAAmB,KAAKA,kBACxBnlD,OAAQ,KAAKA,OACbolD,cAAe,KAAKA,cACpBH,oBAAqB,KAAKA,oBAC1BD,mBAAoB,KAAKA,mBACzBE,iBAAkB,KAAKA,iBACvBG,SAAU,KAAKA,SACfgB,WAAY,KAAKA,WACjBC,QAAS,KAAKv5D,SAASqjD,UAAU,CACnC,EACA,KAAK+U,kBAAoB,EACzB,KAAKH,mBAAqB,EAC1B,KAAKC,oBAAsB,EAC3B,KAAKC,iBAAmB,EACxB,KAAKllD,OAAS,EACd,KAAKolD,cAAgB,EACrB,IAAMnyF,EAAU,IAAIC,QAAQ,CAAE,eAAgB,iCAAkC,CAAC,EACjF,OAAOE,MAAM,KAAK25B,SAAS+4D,WAAW,EAAG,CAAEzyF,OAAQ,OAAQC,KAAMC,KAAKC,UAAUF,CAAI,EAAGL,QAAAA,CAAQ,CAAC,EAAEQ,MAAON,GAAQkB,GAASjC,WAAW,qCAAsCe,CAAG,CAAC,CACjL,EAAG,KAAK45B,SAAS44D,gBAAgB,CAAC,EACpC,CACAL,YAAa,CACX,KAAKxiE,OAAO6D,GAAG,eAAgB,CAACmwD,EAAQ30E,IAAS,CAC/C,IAAI5Y,EAAI0vF,EAAIC,EAAIC,EAAIC,EAAImN,EAAIC,EAAIC,EAChC,KAAKxB,qBAAuBh9F,KAAKwG,IAAIxG,KAAK+B,MAAMmY,EAAK80E,KAAKI,cAAgB9tF,EAAK,KAAKq8F,wBAA0B,KAAO,OAASr8F,EAAG0tF,KAAKI,aAAe,EAAE,EAAG,CAAC,EAC3J,KAAK2N,oBAAsB/8F,KAAKwG,IAAIxG,KAAK+B,SAASivF,EAAK92E,EAAKlV,MAAQ,KAAO,OAASgsF,EAAG5B,aAAe,MAAQ8B,GAAMD,EAAK,KAAK0M,wBAA0B,KAAO,OAAS1M,EAAGjsF,MAAQ,KAAO,OAASksF,EAAG9B,aAAe,EAAE,EAAG,CAAC,EAC3N,KAAK6N,kBAAoBj9F,KAAKwG,IAAIxG,KAAK+B,SAASovF,EAAKj3E,EAAKlV,MAAQ,KAAO,OAASmsF,EAAG7B,WAAa,MAAQiP,GAAMD,EAAK,KAAKX,wBAA0B,KAAO,OAASW,EAAGt5F,MAAQ,KAAO,OAASu5F,EAAGjP,WAAa,EAAE,EAAG,CAAC,EACrN,KAAK8N,UAAYoB,EAAKtkF,EAAKlV,MAAQ,KAAO,OAASw5F,EAAGC,aACtD,KAAKL,WAAa,CAAC,CAAClkF,EAAKlV,IACzB,KAAK24F,sBAAwBzjF,CAC/B,CAAC,CACH,CACAojF,uBAAwB,CACtB,KAAKziE,OAAO6D,GAAG,oBAAqB,CAACggE,EAAG,CAAEC,qBAAAA,CAAqB,IAAM,CAC/DA,IAAyB,KAC7B/B,GAAc,0BAA0B,EACxC,KAAKM,oBACP,CAAC,CACH,CACAK,aAAc,CACZ,KAAK1iE,OAAO6D,GAAG,QAAS,IAAM,CAC5Bk+D,GAAc,qBAAqB,EACnC,KAAK7kD,QACP,CAAC,CACH,CACAylD,oBAAqB,CACnB,KAAK3iE,OAAO6D,GAAG,iBAAkB,IAAM,CACrCk+D,GAAc,uBAAuB,EACrC,KAAKO,eACP,CAAC,CACH,CACF,EACA18C,EAAQqkC,eAAe,UAAWgY,EAAa,EAC/C,IAAM8B,GAAcn+C,EAAQlZ,aAAa,WAAW,EAC9Cs3D,GAAN,cAAoCD,EAAY,CAC9C5oE,UAAW,CACT,IAAMxoB,EAAY,MAAMwoB,SAAS,MAAO,CAAE/T,UAAW,4BAA6B,CAAC,EACnF,KAAK68E,WAAa,MAAM9oE,SAAS,MAAO,CAAE/T,UAAW,aAAc,CAAC,EACpE,KAAK88E,kBAAqBxsF,GAAM,CAE9B,GADAA,EAAEqrB,gBAAgB,EACd,KAAK+G,QAAQkL,OAAO,GAAK,KAAKlL,QAAQye,MAAM,EAAG,CACjD,KAAKze,QAAQD,KAAK,EAClB,MACF,CACA,KAAKC,QAAQoL,MAAM,CACrB,EACA,KAAK+uD,WAAW3jE,iBAAiB,aAAc,KAAK4jE,kBAAmB,CAAElgE,QAAS,EAAK,CAAC,EACxF,KAAKmgE,OAAS,MAAMhpE,SAAS,MAAO,CAAE/T,UAAW,0BAA2B,CAAC,EAC7E,KAAKg9E,QAAU,MAAMjpE,SAAS,MAAO,CAAE/T,UAAW,2BAA4B,CAAC,EAC/E,QAASjhB,EAAI,EAAGA,EAAI,EAAGA,IACrB,KAAKg+F,OAAOhxF,YAAY,MAAMgoB,SAAS,OAAQ,CAAE/T,UAAW,MAAO,CAAC,CAAC,EACrE,KAAKg9E,QAAQjxF,YAAY,MAAMgoB,SAAS,OAAQ,CAAE/T,UAAW,MAAO,CAAC,CAAC,EAExE,YAAKi9E,WAAa,KAAKF,OAAOhxF,YAAY,MAAMgoB,SAAS,MAAO,CAAE/T,UAAW,MAAO,CAAC,CAAC,EACtF,KAAKk9E,YAAc,KAAKF,QAAQjxF,YAAY,MAAMgoB,SAAS,MAAO,CAAE/T,UAAW,MAAO,CAAC,CAAC,EACxFzU,EAAUQ,YAAY,KAAKgxF,MAAM,EACjCxxF,EAAUQ,YAAY,KAAK8wF,UAAU,EACrCtxF,EAAUQ,YAAY,KAAKixF,OAAO,EAC3BzxF,CACT,CACAo4B,SAAU,CACJ,KAAKm5D,mBAAmB,KAAKD,WAAW5jE,oBAAoB,aAAc,KAAK6jE,iBAAiB,EACpG,MAAMn5D,QAAQ,CAChB,CACAw5D,gBAAgBC,EAAQ,CACtB,GAAIA,IAAW,EAAG,CAChB,KAAKC,WAAW,EAChB,KAAKC,YAAY,EACjB,MACF,CACA,GAAIF,EAAS,EAAG,CACd,KAAKC,WAAW,EAChB,KAAKE,eAAeH,CAAM,EAC1B,MACF,CACA,GAAIA,EAAS,EAAG,CACd,KAAKE,YAAY,EACjB,KAAKE,cAAcJ,CAAM,EACzB,MACF,CACF,CACAC,YAAa,CACX,KAAKN,OAAOpoE,UAAU3nB,IAAI,YAAY,EACtC,KAAKiwF,WAAWr+E,YAAc,EAChC,CACA4+E,cAAcJ,EAAQ,CACpB,KAAKL,OAAOpoE,UAAUM,OAAO,YAAY,EACzC,KAAKgoE,WAAWr+E,YAAc,KAAKga,OAAO,EAAEoL,SAAS,cAAe,CAACo5D,EAAS,EAAE,CAAC,CACnF,CACAE,aAAc,CACZ,KAAKN,QAAQroE,UAAU3nB,IAAI,YAAY,EACvC,KAAKkwF,YAAYt+E,YAAc,EACjC,CACA2+E,eAAeH,EAAQ,CACrB,KAAKJ,QAAQroE,UAAUM,OAAO,YAAY,EAC1C,KAAKioE,YAAYt+E,YAAc,KAAKga,OAAO,EAAEoL,SAAS,cAAe,CAACo5D,EAAS,EAAE,CAAC,CACpF,CACF,EACA5+C,EAAQ5U,kBAAkB,wBAAyBgzD,EAAqB,EACxE,IAAMa,GAAgB/C,GAAQ,wBAAwB,EAChDgD,GAAWl/C,EAAQujC,UAAU,QAAQ,EACrC4b,GAAwB,MAAMA,WAA8BD,EAAS,CACzE72F,YAAY+xB,EAAQx5B,EAAS,CAC3B,MAAMw5B,EAAQx5B,CAAO,EACrB,KAAKw+F,WAAa,EACdp/C,EAAQ6lC,QAAQxyD,YAAcgsE,OAAOC,aACvC,KAAKC,yBAAyB,EAE3BnlE,EAAOh2B,SAAS,IACrB,KAAKo7F,sBAAwBplE,EAAOoM,SAAS,wBAAyB,CAAEvB,oBAAqB,EAAM,CAAC,EAC/F,KAAK7K,OAAOiK,SAAS60C,cAAa,KAAK9+C,OAAOiK,SAAS60C,YAAc,CAAC,GAC3E,KAAK9+C,OAAOiK,SAAS60C,YAAYC,MAAQ,GACzC,KAAK/+C,OAAOiK,SAAS60C,YAAYG,YAAc,GAC/C,KAAKomB,cAAgB,IAAM,KAAKC,qBAAqB,EACrD,KAAKtlE,OAAOwE,IAAI,OAAQ,KAAK6gE,aAAa,EAC1C,KAAK7qC,QAAU,KAAKx6B,OAAOiM,cAAc,CAAC,aAAc,kBAAmB,SAAS,CAAC,EACrF,KAAKs5D,oBAAsB,IAAM,KAAKvlE,OAAO/D,SAAS,oBAAoB,EAC1E,KAAKupE,sBAAwB,IAAM,KAAKxlE,OAAO7D,YAAY,oBAAoB,EAC/E,KAAKq+B,QAAQ32B,GAAG,eAAgB,KAAK0hE,mBAAmB,EACxD,KAAK/qC,QAAQ32B,GAAG,iBAAkB,KAAK2hE,qBAAqB,EAC9D,CACAz6D,SAAU,CACR,IAAItkC,EACA,KAAK4+F,eAAe,KAAKrlE,OAAO/I,IAAI,OAAQ,KAAKouE,aAAa,EAC9D,KAAKI,2BAA2B,KAAKzlE,OAAO/I,IAAI,mBAAoB,KAAKwuE,yBAAyB,EAClG,KAAKC,qBAAqB,KAAK1lE,OAAO/I,IAAI,aAAc,KAAKwuE,yBAAyB,EACtF,KAAKE,mCACNl/F,EAAK,KAAK2+F,wBAA0B,MAAgB3+F,EAAGoM,GAAG,EAAEwtB,oBAAoB,aAAc,KAAKslE,+BAA+B,GAErI,MAAM56D,QAAQ,CAChB,CACAo6D,0BAA2B,CACzB,KAAKM,0BAA4B,IAAM,CACjC,CAAC,KAAKzlE,OAAO67B,aAAa,GAAK,KAAK+pC,gBAAgB,GACxDX,OAAOC,YAAYW,KAAK,WAAW,EAAEl1F,MAAON,GAAQkB,GAAShC,MAAM,mCAAoCc,CAAG,CAAC,CAC7G,EACA,KAAK2vB,OAAO6D,GAAG,mBAAoB,KAAK4hE,yBAAyB,CACnE,CACAG,iBAAkB,CAChB,OAAO,KAAK5lE,OAAO46C,WAAW,EAAI,KAAK56C,OAAO66C,YAAY,CAC5D,CACAyqB,sBAAuB,CACrB,IAAMQ,EAAmBA,CAACjtF,EAAOktF,EAAsB,KAAU,CAM/D,GALAlB,GAAc,oBAAoB,EAC9B,KAAKmB,aACPrnF,aAAa,KAAKqnF,UAAU,EAC5B,KAAKA,WAAa,QAEhB,KAAKC,eAAiB,KAAKC,cAAgBrtF,EAAMstF,UAAY,KAAKD,aAAaC,UAAYpB,GAAsBqB,oBAAqB,CACxIvB,GAAc,qBAAqB,EACnC,KAAKqB,aAAertF,EACpB,KAAKwtF,YAAYxtF,CAAK,EACtB,MACF,CACIktF,IACJ,KAAKO,eAAiB,CAAC,KAAKtmE,OAAOg5C,WAAW,EAC1C,CAAC,KAAKh5C,OAAOgV,OAAO,GAAK,KAAKsxD,iBAAmB,IACnD,KAAKtmE,OAAO/D,SAAS,oBAAoB,EAE3C,KAAK+pE,WAAavyF,WAAW,IAAM,CACjCoxF,GAAc,oDAAsD,KAAKyB,cAAc,EACvF,KAAKtmE,OAAO7D,YAAY,oBAAoB,EAC5C,KAAK6D,OAAOg5C,WAAW,KAAKstB,cAAc,CAC5C,EAAGvB,GAAsBqB,mBAAmB,EAC5C,KAAKF,aAAertF,EACtB,EACA,KAAK6sF,oBAAuB7sF,GAAU,CACpC,IAAMktF,EAAsB,KAAK/lE,OAAOg5C,WAAW,EACnD8sB,EAAiBjtF,EAAOktF,CAAmB,CAC7C,EACA,KAAK/lE,OAAO6D,GAAG,aAAc,KAAK6hE,mBAAmB,EACrD,KAAKC,gCAAmC9sF,GAAU,CAChDA,EAAM2pB,eAAe,EACrB3pB,EAAMkqB,gBAAgB,EACtB+iE,EAAiBjtF,CAAK,CACxB,EACA,KAAKusF,sBAAsBvyF,GAAG,EAAEytB,iBAAiB,aAAc,KAAKqlE,gCAAiC,CAAE3hE,QAAS,EAAM,CAAC,CACzH,CACAqiE,YAAYxtF,EAAO,CACjB,IAAM2+E,EAAc,KAAKx3D,OAAOyO,aAAa,EACvCjR,EAAO,KAAK+oE,iBAAiB1tF,EAAMrM,MAAM,EAAEge,sBAAsB,EACjEgU,EAAU3lB,EAAM2tF,cAAc,CAAC,EAAE9nE,MAAQlB,EAAKtqB,KACpD2xF,GAAc,+DAAgErN,EAAah5D,CAAO,EAC9FA,EAAU,IAAOg5D,GACf,KAAKwN,WAAa,IAAG,KAAKA,WAAa,GAC3C,KAAKA,YAAc,GACnBH,GAAc,0BAA2B,KAAKG,UAAU,GAC/CxmE,EAAU,IAAOg5D,IACtB,KAAKwN,WAAa,IAAG,KAAKA,WAAa,GAC3C,KAAKA,YAAc,GACnBH,GAAc,yBAA0B,KAAKG,UAAU,GAEzD,KAAKI,sBAAsBb,gBAAgB,KAAKS,UAAU,EAC1D,KAAKyB,uBAAuB,CAC9B,CACAF,iBAAiB/5F,EAAQ,CACvB,OAAIA,EAAOuvB,UAAUC,SAAS,UAAU,EAAUxvB,EAC3C,KAAK+5F,iBAAiB/5F,EAAOk6F,aAAa,CACnD,CACAD,wBAAyB,CACvB,KAAKzmE,OAAOkV,MAAM,EAClB,KAAKlV,OAAO/D,SAAS,kBAAkB,EACvC,KAAKgqE,cAAgB,GACjB,KAAKU,uBAAuBhoF,aAAa,KAAKgoF,qBAAqB,EACvE,KAAKA,sBAAwBlzF,WAAW,IAAM,CAC5C,IAAIomD,EAAU,KAAK75B,OAAO0e,YAAY,EAAI,KAAKsmD,WAC/C,KAAKA,WAAa,EAClBnrC,EAAU10D,KAAKwG,IAAI,EAAGkuD,CAAO,EAC7BA,EAAU10D,KAAKgmB,IAAI,KAAK6U,OAAOqS,SAAS,EAAGwnB,CAAO,EAClD,KAAK75B,OAAO0e,YAAYmb,CAAO,EAC/B,KAAKmrC,WAAa,EAClB,KAAKI,sBAAsBb,gBAAgB,CAAC,EAC5C,KAAKvkE,OAAOg5C,WAAW,EAAK,EAC5B,KAAKitB,cAAgB,GACrB,KAAKjmE,OAAO6J,KAAK,EACjBp2B,WAAW,IAAM,CACf,KAAKusB,OAAO7D,YAAY,kBAAkB,EAC1C,KAAK6D,OAAO7D,YAAY,oBAAoB,CAC9C,EAAG,GAAG,CACR,EAAG4oE,GAAsB6B,sBAAsB,CACjD,CACF,EACAjjG,GAAcohG,GAAuB,sBAAuB,GAAG,EAC/DphG,GAAcohG,GAAuB,yBAA0B,GAAG,EAClE,IAAI8B,GAAuB9B,GAC3Bn/C,EAAQqkC,eAAe,iBAAkB4c,EAAoB,EAC7D,IAAMC,GAAiB5oE,OAAOmgE,UAAY,SAAS96F,EAAO,CACxD,OAAO,OAAOA,GAAU,UAAY86F,SAAS96F,CAAK,CACpD,EACMwjG,GAAgB7oE,OAAO6oE,eAAiB,SAASxjG,EAAO,CAC5D,OAAO,OAAOA,GAAU,UAAY4B,KAAKqnB,IAAIjpB,CAAK,GAAKyjG,EACzD,EACMA,GAAmB9oE,OAAO8oE,kBAAoB,iBAChDC,GAA6B,SAASC,EAAa,CACrDA,OAAAA,EAAY,cAAmB,eAC/BA,EAAY,YAAiB,aAC7BA,EAAY,iBAAsB,iBAClCA,EAAY,UAAe,WAC3BA,EAAY,YAAiB,aACtBA,CACT,EAAE,CAAC,CAAC,EACAC,EAA+B,SAASC,EAAe,CACzDA,OAAAA,EAAc,mBAAwB,kBACtCA,EAAc,qBAA0B,oBACxCA,EAAc,sBAA2B,qBACzCA,EAAc,iCAAsC,+BACpDA,EAAc,kCAAuC,gCACrDA,EAAc,6CAAkD,0CAChEA,EAAc,4CAAiD,yCAC/DA,EAAc,iCAAsC,+BACpDA,EAAc,oCAAyC,kCACvDA,EAAc,iCAAsC,+BACpDA,EAAc,oCAAyC,iCACvDA,EAAc,uCAA4C,oCAC1DA,EAAc,wCAA6C,qCAC3DA,EAAc,oBAAyB,oBACvCA,EAAc,sBAA2B,sBACzCA,EAAc,uBAA4B,uBAC1CA,EAAc,mCAAwC,kCACtDA,EAAc,kBAAuB,kBACrCA,EAAc,iBAAsB,iBACpCA,EAAc,mBAAwB,mBACtCA,EAAc,oBAAyB,oBACvCA,EAAc,mBAAwB,mBACtCA,EAAc,uBAA4B,sBAC1CA,EAAc,yBAA8B,wBAC5CA,EAAc,oBAAyB,yBACvCA,EAAc,4BAAiC,2BAC/CA,EAAc,gBAAqB,gBACnCA,EAAc,kBAAuB,kBACrCA,EAAc,mBAAwB,mBACtCA,EAAc,mBAAwB,mBACtCA,EAAc,SAAc,UAC5BA,EAAc,kBAAuB,kBACrCA,EAAc,eAAoB,eAClCA,EAAc,iBAAsB,iBACpCA,EAAc,uBAA4B,sBAC1CA,EAAc,iCAAsC,gCACpDA,EAAc,oBAAyB,oBACvCA,EAAc,uBAA4B,uBAC1CA,EAAc,qBAA0B,qBACxCA,EAAc,kBAAuB,kBACrCA,EAAc,sBAA2B,qBACzCA,EAAc,sBAA2B,qBACzCA,EAAc,sBAA2B,qBACzCA,EAAc,wBAA6B,uBAC3CA,EAAc,yBAA8B,wBAC5CA,EAAc,8BAAmC,6BACjDA,EAAc,mBAAwB,oBACtCA,EAAc,iBAAsB,UACpCA,EAAc,mBAAwB,mBACtCA,EAAc,QAAa,UACpBA,CACT,EAAE,CAAC,CAAC,EACA5yB,EAAyB,SAAS5vC,EAAS,CAC7CA,OAAAA,EAAQ,gBAAqB,oBAC7BA,EAAQ,eAAoB,mBAC5BA,EAAQ,gBAAqB,oBAC7BA,EAAQ,eAAoB,mBAC5BA,EAAQ,YAAiB,gBACzBA,EAAQ,eAAoB,mBAC5BA,EAAQ,aAAkB,iBAC1BA,EAAQ,cAAmB,kBAC3BA,EAAQ,eAAoB,mBAC5BA,EAAQ,iBAAsB,qBAC9BA,EAAQ,gBAAqB,oBAC7BA,EAAQ,WAAgB,eACxBA,EAAQ,gBAAqB,mBAC7BA,EAAQ,gBAAqB,oBAC7BA,EAAQ,eAAoB,mBAC5BA,EAAQ,iBAAsB,qBAC9BA,EAAQ,gBAAqB,oBAC7BA,EAAQ,gBAAqB,oBAC7BA,EAAQ,gBAAqB,oBAC7BA,EAAQ,eAAoB,mBAC5BA,EAAQ,cAAmB,kBAC3BA,EAAQ,aAAkB,iBAC1BA,EAAQ,cAAmB,kBAC3BA,EAAQ,kBAAuB,qBAC/BA,EAAQ,eAAoB,mBAC5BA,EAAQ,qBAA0B,wBAClCA,EAAQ,sBAA2B,yBACnCA,EAAQ,qBAA0B,wBAClCA,EAAQ,oBAAyB,uBACjCA,EAAQ,mBAAwB,sBAChCA,EAAQ,oBAAyB,uBACjCA,EAAQ,wBAA6B,2BACrCA,EAAQ,wBAA6B,2BACrCA,EAAQ,sBAA2B,yBACnCA,EAAQ,uBAA4B,0BACpCA,EAAQ,sBAA2B,yBACnCA,EAAQ,uBAA4B,0BACpCA,EAAQ,wBAA6B,2BACrCA,EAAQ,YAAiB,gBACzBA,EAAQ,6BAAkC,8BAC1CA,EAAQ,eAAoB,kBAC5BA,EAAQ,aAAkB,iBAC1BA,EAAQ,4BAAiC,8BACzCA,EAAQ,YAAiB,gBACzBA,EAAQ,eAAoB,mBAC5BA,EAAQ,0BAA+B,4BACvCA,EAAQ,sBAA2B,yBACnCA,EAAQ,sBAA2B,yBACnCA,EAAQ,YAAiB,gBACzBA,EAAQ,cAAmB,kBAC3BA,EAAQ,aAAkB,iBAC1BA,EAAQ,SAAc,aACtBA,EAAQ,uBAA4B,yBACpCA,EAAQ,uBAA4B,yBACpCA,EAAQ,MAAW,WACnBA,EAAQ,WAAgB,gBACxBA,EAAQ,YAAiB,gBACzBA,EAAQ,WAAgB,eACxBA,EAAQ,yBAA8B,2BACtCA,EAAQ,oBAAyB,uBACjCA,EAAQ,yBAA8B,4BACtCA,EAAQ,mBAAwB,sBAChCA,EAAQ,kBAAuB,qBAC/BA,EAAQ,sBAA2B,0BACnCA,EAAQ,mCAAwC,qCAChDA,EAAQ,kCAAuC,oCAC/CA,EAAQ,qBAA0B,yBAClCA,EAAQ,2BAAgC,8BACxCA,EAAQ,yBAA8B,4BACtCA,EAAQ,yBAA8B,4BACtCA,EAAQ,mBAAwB,uBAChCA,EAAQ,8BAAmC,iCAC3CA,EAAQ,sBAA2B,yBACnCA,EAAQ,gBAAqB,mBACtBA,CACT,EAAE,CAAC,CAAC,EACAyiE,GAAsB,CACxBC,SAAU,WACVC,MAAO,QACPC,YAAa,aACbC,eAAgB,eAClB,EACIC,GAAoB,CACtBC,KAAM,OACNC,MAAO,QACPC,SAAU,UACZ,EACMC,GAAN,KAAW,CAET75F,YAAY85F,EAAUC,EAAW,EAAGC,EAAS,EAAG,CAC9C,KAAKF,SAAW,OAChB,KAAKG,OAAS,OACd,KAAKC,UAAY,OACjB,KAAKC,aAAe,OACpB,KAAKL,SAAWA,EAChB,KAAKG,OAASH,EAAW5iG,KAAKkjG,IAAIljG,KAAKiK,IAAI,EAAG,EAAI24F,CAAQ,EAAI,EAC9D,KAAKI,UAAYH,EACjB,KAAKI,aAAeH,CACtB,CACAK,OAAOL,EAAQ1kG,EAAO,CACpB,IAAMglG,EAAWpjG,KAAKqjG,IAAI,KAAKN,OAAQD,CAAM,EAC7C,KAAKE,UAAY5kG,GAAS,EAAIglG,GAAYA,EAAW,KAAKJ,UAC1D,KAAKC,cAAgBH,CACvB,CACAQ,gBAAiB,CACf,OAAO,KAAKL,YACd,CACAM,aAAc,CACZ,GAAI,KAAKR,OAAQ,CACf,IAAMS,EAAa,EAAIxjG,KAAKqjG,IAAI,KAAKN,OAAQ,KAAKE,YAAY,EAC9D,GAAIO,EACF,OAAO,KAAKR,UAAYQ,CAE5B,CACA,OAAO,KAAKR,SACd,CACF,EACMS,GAAN,KAA6B,CAC3B36F,YAAY46F,EAAMC,EAAMC,EAAiBC,EAAc,IAAK,CAC1D,KAAKC,iBAAmB,OACxB,KAAKC,WAAa,OAClB,KAAKC,YAAc,OACnB,KAAKC,MAAQ,OACb,KAAKC,MAAQ,OACb,KAAKC,aAAe,OACpB,KAAKC,MAAQ,OACb,KAAKN,iBAAmBF,EACxB,KAAKG,WAAa,KAClB,KAAKC,YAAc,GACnB,KAAKC,MAAQ,IAAItB,GAAKe,CAAI,EAC1B,KAAKQ,MAAQ,IAAIvB,GAAKgB,CAAI,EAC1B,KAAKQ,aAAeN,EACpB,KAAKO,MAAQ,IAAIzB,GAAKe,CAAI,CAC5B,CACAz7C,OAAOy7C,EAAMC,EAAM,CACjB,GAAM,CACJM,MAAAA,EACAC,MAAAA,EACAE,MAAAA,CACF,EAAI,KACAH,EAAMrB,WAAac,IACrB,KAAKO,MAAQ,IAAItB,GAAKe,EAAMO,EAAMV,YAAY,EAAGU,EAAMX,eAAe,CAAC,GAErEY,EAAMtB,WAAae,IACrB,KAAKO,MAAQ,IAAIvB,GAAKgB,EAAMO,EAAMX,YAAY,EAAGW,EAAMZ,eAAe,CAAC,GAErEc,EAAMxB,WAAac,IACrB,KAAKU,MAAQ,IAAIzB,GAAKe,EAAMU,EAAMb,YAAY,EAAGa,EAAMd,eAAe,CAAC,EAE3E,CACAH,OAAOkB,EAAYC,EAAU,CAC3BD,EAAarkG,KAAKwG,IAAI69F,EAAY,KAAKL,WAAW,EAClD,IAAMO,EAAU,EAAID,EACdE,EAAYH,EAAa,IACzBI,EAAiBF,EAAUC,EACjC,KAAKN,MAAMf,OAAOqB,EAAWC,CAAc,EAC3C,KAAKR,MAAMd,OAAOqB,EAAWC,CAAc,CAC7C,CACAC,WAAWC,EAAM,CACf,IAAMjkG,EAAUikG,EAAO,IACjB7B,EAAS9iG,KAAKqqC,KAAK,CAAC,EAAIrqC,KAAKkjG,IAAI,CAACljG,KAAKqjG,IAAI3iG,EAAS,CAAC,EAAI,CAAC,EAChE,KAAK0jG,MAAMjB,OAAOL,EAAQ9iG,KAAKwG,IAAIm+F,EAAM,CAAC,CAAC,CAC7C,CACAC,aAAc,CACZ,OAAO,KAAKV,MAAMZ,eAAe,GAAK,KAAKS,UAC7C,CACAR,aAAc,CACZ,OAAI,KAAKqB,YAAY,EACZ5kG,KAAKgmB,IAAI,KAAKk+E,MAAMX,YAAY,EAAG,KAAKU,MAAMV,YAAY,CAAC,EAE3D,KAAKO,gBAEhB,CACAe,iBAAkB,CAChB,OAAI,KAAKT,MAAMd,eAAe,GAAK,KAAKS,WAC/B,KAAKK,MAAMb,YAAY,EAEvB,KAAKY,YAEhB,CACA,IAAIP,iBAAkB,CACpB,OAAO,KAAKE,gBACd,CACA9J,SAAU,CACV,CACF,EACA,SAAS8K,GAAgBvyF,EAAGE,EAAGD,EAAG,CAChC,OAAQC,EAAIsyF,GAAetyF,CAAC,KAAMF,EAAIxU,OAAOC,eAAeuU,EAAGE,EAAG,CAChErU,MAAOoU,EACPnU,WAAY,GACZC,aAAc,GACdC,SAAU,EACZ,CAAC,EAAIgU,EAAEE,CAAC,EAAID,EAAGD,CACjB,CACA,SAASyyF,IAAW,CAClB,OAAOA,GAAWjnG,OAAOY,OAASZ,OAAOY,OAAO2T,KAAK,EAAI,SAASjC,EAAG,CACnE,QAASkC,EAAI,EAAGA,EAAI1K,UAAU5G,OAAQsR,IAAK,CACzC,IAAIC,EAAI3K,UAAU0K,CAAC,EACnB,QAASE,KAAKD,GAAI,CAAC,GAAGpQ,eAAeC,KAAKmQ,EAAGC,CAAC,IAAMpC,EAAEoC,CAAC,EAAID,EAAEC,CAAC,EAChE,CACA,OAAOpC,CACT,EAAG20F,GAASp0F,MAAM,KAAM/I,SAAS,CACnC,CACA,SAASo9F,GAAQ1yF,EAAGE,EAAG,CACrB,IAAID,EAAIzU,OAAOmE,KAAKqQ,CAAC,EACrB,GAAIxU,OAAOmnG,sBAAuB,CAChC,IAAIlwF,EAAIjX,OAAOmnG,sBAAsB3yF,CAAC,EACtCE,IAAMuC,EAAIA,EAAEid,OAAO,SAASkzE,EAAI,CAC9B,OAAOpnG,OAAO+S,yBAAyByB,EAAG4yF,CAAE,EAAE9mG,UAChD,CAAC,GAAImU,EAAE9H,KAAKkG,MAAM4B,EAAGwC,CAAC,CACxB,CACA,OAAOxC,CACT,CACA,SAAS4yF,GAAe7yF,EAAG,CACzB,QAASE,EAAI,EAAGA,EAAI5K,UAAU5G,OAAQwR,IAAK,CACzC,IAAID,EAAY3K,UAAU4K,CAAC,GAAnB,KAAuB5K,UAAU4K,CAAC,EAAI,CAAC,EAC/CA,EAAI,EAAIwyF,GAAQlnG,OAAOyU,CAAC,EAAG,EAAI,EAAEpP,QAAQ,SAAS+hG,EAAI,CACpDL,GAAgBvyF,EAAG4yF,EAAI3yF,EAAE2yF,CAAE,CAAC,CAC9B,CAAC,EAAIpnG,OAAOsnG,0BAA4BtnG,OAAOwuB,iBAAiBha,EAAGxU,OAAOsnG,0BAA0B7yF,CAAC,CAAC,EAAIyyF,GAAQlnG,OAAOyU,CAAC,CAAC,EAAEpP,QAAQ,SAAS+hG,EAAI,CAChJpnG,OAAOC,eAAeuU,EAAG4yF,EAAIpnG,OAAO+S,yBAAyB0B,EAAG2yF,CAAE,CAAC,CACrE,CAAC,CACH,CACA,OAAO5yF,CACT,CACA,SAAS+yF,GAAa9yF,EAAGC,EAAG,CAC1B,GAAgB,OAAOD,GAAnB,UAAwB,CAACA,EAAG,OAAOA,EACvC,IAAID,EAAIC,EAAEjB,OAAOg0F,WAAW,EAC5B,GAAehzF,IAAX,OAAc,CAChB,IAAIvR,EAAIuR,EAAElQ,KAAKmQ,EAAGC,CAAC,EACnB,GAAgB,OAAOzR,GAAnB,SAAsB,OAAOA,EACjC,MAAM,IAAI8G,UAAU,8CAA8C,CACpE,CACA,OAAqB2K,IAAb,SAAiBhL,OAASsxB,QAAQvmB,CAAC,CAC7C,CACA,SAASuyF,GAAevyF,EAAG,CACzB,IAAIxR,EAAIskG,GAAa9yF,EAAG,QAAQ,EAChC,OAAmB,OAAOxR,GAAnB,SAAuBA,EAAIA,EAAI,EACxC,CACA,IAAMwkG,GAAN,KAAc,CACZ18F,YAAYymC,EAAOk2D,EAAS,CAC1B,KAAKC,MAAQ,OACb,KAAK3zE,MAAQ,OACb,KAAK9nB,IAAM,OACX,KAAKC,KAAO,OACZ,KAAKN,KAAO,OACZ,KAAKQ,MAAQ,OACb,IAAMu7F,EAAK,IAAIp2D,CAAK,KACpB,KAAKm2D,MAAQE,GACb,KAAK7zE,MAAQ0zE,EAAQ1zE,MAAMzf,KAAK,KAAMqzF,CAAE,EACxC,KAAK17F,IAAMw7F,EAAQx7F,IAAIqI,KAAK,KAAMqzF,CAAE,EACpC,KAAKz7F,KAAOu7F,EAAQv7F,KAAKoI,KAAK,KAAMqzF,CAAE,EACtC,KAAK/7F,KAAO67F,EAAQ77F,KAAK0I,KAAK,KAAMqzF,CAAE,EACtC,KAAKv7F,MAAQq7F,EAAQr7F,MAAMkI,KAAK,KAAMqzF,CAAE,CAC1C,CACF,EACMC,GAAS,UAAgB,CAC/B,EACMC,GAAa,CACjBH,MAAOE,GACP7zE,MAAO6zE,GACP37F,IAAK27F,GACL17F,KAAM07F,GACNh8F,KAAMg8F,GACNx7F,MAAOw7F,EACT,EACA,SAASj0E,IAAe,CACtB,OAAOqzE,GAAS,CAAC,EAAGa,EAAU,CAChC,CACA,SAASC,GAAexuF,EAAM6G,EAAI,CAChC,IAAMmhB,EAAOtvB,KAAKhG,QAAQsN,CAAI,EAC9B,OAAOgoB,EAAOA,EAAKhtB,KAAKtC,KAAKhG,QAAS,GAAGmU,EAAK,IAAMA,EAAK,KAAO,EAAE,IAAI7G,CAAI,KAAK,EAAIsuF,EACrF,CACA,SAASG,GAAY5nG,EAAK6nG,EAAa7nF,EAAI,CACzC,OAAO6nF,EAAY7nG,CAAG,EAAI6nG,EAAY7nG,CAAG,EAAEmU,KAAK0zF,CAAW,EAAIF,GAAe3nG,EAAKggB,CAAE,CACvF,CACA,IAAM8nF,GAAiBt0E,GAAa,EACpC,SAASu0E,GAAWF,EAAanwE,EAAS1X,EAAI,CAC5C,IAAMgoF,EAAYx0E,GAAa,EAC/B,GAAI,OAAO3nB,SAAY,UAAYg8F,IAAgB,IAAQ,OAAOA,GAAgB,SAAU,CAC1F,IAAM9jG,EAAO,CAGX,QACA,MACA,OACA,OACA,OAAO,EAETA,EAAKkB,QAASjF,GAAQ,CACpBgoG,EAAUhoG,CAAG,EAAI4nG,GAAY5nG,EAAK6nG,EAAa7nF,CAAE,CACnD,CAAC,EACD,GAAI,CACFgoF,EAAUl8F,IAAI,2BAA2B4rB,CAAO,2BAAgC,CAClF,MAAY,CACV,OAAOlE,GAAa,CACtB,CACAzvB,EAAKkB,QAASjF,GAAQ,CACpB8nG,GAAe9nG,CAAG,EAAI4nG,GAAY5nG,EAAK6nG,CAAW,CACpD,CAAC,CACH,MACEhB,GAASiB,GAAgBE,CAAS,EAEpC,OAAOA,CACT,CACA,IAAM95F,GAAS45F,GACf,SAASG,GAAeC,EAA2B,GAAM,CACvD,OAAI,OAAOr2F,KAAS,IAAa,QACpBq2F,GAA4B,CAACr2F,KAAKs2F,cAAgBt2F,KAAKu2F,oBACtDv2F,KAAKs2F,aAAet2F,KAAKw2F,iBACzC,CACA,SAASC,GAAqBvzE,EAAQ,CACpC,OAAO,OAAOljB,KAAS,KAAekjB,IAAWljB,KAAKu2F,kBACxD,CACA,SAASG,GAAwBC,EAAeC,EAAgB,CAC9D,IAAMC,EAAa9oG,OAAOmE,KAAKykG,CAAa,EACtCG,EAAqB/oG,OAAOmE,KAAK0kG,CAAc,EAC/CG,EAAaF,EAAW5lG,OACxB+lG,EAAqBF,EAAmB7lG,OAC9C,MAAO,CAAC8lG,GAAc,CAACC,GAAsBD,IAAeC,GAAsB,CAACH,EAAW5+D,KAAM3gC,GAASw/F,EAAmBhvF,QAAQxQ,CAAI,IAAM,EAAE,CACtJ,CACA,SAAS2/F,GAAexuF,EAAOyuF,EAAa,GAAO,CACjD,GAAI,OAAOrwF,YAAgB,IAAa,CAEtC,IAAMswF,EADW,IAAItwF,YAAY,OAAO,EACfG,OAAOyB,CAAK,EACrC,GAAIyuF,EAAY,CACd,IAAME,EAAMD,EAAQrvF,QAAQ,IAAI,EAChC,OAAOsvF,IAAQ,GAAKD,EAAQpxC,UAAU,EAAGqxC,CAAG,EAAID,CAClD,CACA,OAAOA,EAAQxqF,QAAQ,MAAO,EAAE,CAClC,CACA,IAAM86E,EAAMh/E,EAAMxX,OACdse,EACA8nF,EACAC,EACAC,EAAM,GACNvmG,EAAI,EACR,KAAOA,EAAIy2F,GAAK,CAEd,GADAl4E,EAAI9G,EAAMzX,GAAG,EACTue,IAAM,GAAK2nF,EACb,OAAOK,EACF,GAAIhoF,IAAM,GAAKA,IAAM,EAC1B,SAEF,OAAQA,GAAK,EAAC,CACZ,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACHgoF,GAAO9/F,OAAOqM,aAAayL,CAAC,EAC5B,MACF,IAAK,IACL,IAAK,IACH8nF,EAAQ5uF,EAAMzX,GAAG,EACjBumG,GAAO9/F,OAAOqM,cAAcyL,EAAI,KAAO,EAAI8nF,EAAQ,EAAE,EACrD,MACF,IAAK,IACHA,EAAQ5uF,EAAMzX,GAAG,EACjBsmG,EAAQ7uF,EAAMzX,GAAG,EACjBumG,GAAO9/F,OAAOqM,cAAcyL,EAAI,KAAO,IAAM8nF,EAAQ,KAAO,GAAKC,EAAQ,KAAO,CAAC,EACjF,KACJ,CACF,CACA,OAAOC,CACT,CACA,IAAMC,GAAM,CACVC,QAAS,SAAShvF,EAAO,CACvB,IAAI2c,EAAM,GACV,QAASp0B,EAAI,EAAGA,EAAIyX,EAAMxX,OAAQD,IAAK,CACrC,IAAIub,EAAI9D,EAAMzX,CAAC,EAAEkC,SAAS,EAAE,EACxBqZ,EAAEtb,OAAS,IACbsb,EAAI,IAAMA,GAEZ6Y,GAAO7Y,CACT,CACA,OAAO6Y,CACT,CACF,EACA,SAASsyE,GAAiBtyE,EAAK,CAC7B,OAAOne,WAAWjP,KAAKotB,EAAIzY,QAAQ,MAAO,EAAE,EAAEA,QAAQ,qBAAsB,OAAO,EAAEA,QAAQ,MAAO,EAAE,EAAE/b,MAAM,GAAG,CAAC,EAAEqoB,MACtH,CACA,SAAS0+E,GAA0Bz3F,EAAG,CACpC,OAAOA,GAAKA,EAAEC,YAAcpS,OAAOoE,UAAUC,eAAeC,KAAK6N,EAAG,SAAS,EAAIA,EAAE,QAAaA,CAClG,CACA,IAAI03F,GAAa,CAAE31F,QAAS,CAAC,CAAE,EAC3B41F,GACJ,SAASC,IAAoB,CAC3B,OAAID,KACJA,GAAwB,EACvB,SAASz1F,EAAQH,EAAS,EACxB,SAAS81F,EAAM,CACd,IAAIC,EAAY,iIACZC,EAAsB,2BACtBC,EAAkB,oBAClBC,EAAsB,wCACtBC,EAAa,CAOfC,iBAAkB,SAASC,EAASC,EAAa/pE,EAAM,CAIrD,GAHAA,EAAOA,GAAQ,CAAC,EAChB8pE,EAAUA,EAAQ/wF,KAAK,EACvBgxF,EAAcA,EAAYhxF,KAAK,EAC3B,CAACgxF,EAAa,CAChB,GAAI,CAAC/pE,EAAKgqE,gBACR,OAAOF,EAET,IAAIG,EAAwBL,EAAWM,SAASJ,CAAO,EACvD,GAAI,CAACG,EACH,MAAM,IAAIz8F,MAAM,iCAAiC,EAEnDy8F,OAAAA,EAAsBj8F,KAAO47F,EAAWO,cACtCF,EAAsBj8F,IACxB,EACO47F,EAAWQ,kBAAkBH,CAAqB,CAC3D,CACA,IAAII,EAAgBT,EAAWM,SAASH,CAAW,EACnD,GAAI,CAACM,EACH,MAAM,IAAI78F,MAAM,qCAAqC,EAEvD,GAAI68F,EAAcC,OAChB,OAAKtqE,EAAKgqE,iBAGVK,EAAcr8F,KAAO47F,EAAWO,cAAcE,EAAcr8F,IAAI,EACzD47F,EAAWQ,kBAAkBC,CAAa,GAHxCN,EAKX,IAAIQ,EAAYX,EAAWM,SAASJ,CAAO,EAC3C,GAAI,CAACS,EACH,MAAM,IAAI/8F,MAAM,iCAAiC,EAEnD,GAAI,CAAC+8F,EAAUC,QAAUD,EAAUv8F,MAAQu8F,EAAUv8F,KAAK,CAAC,IAAM,IAAK,CACpE,IAAI4qC,EAAY6wD,EAAoBv0E,KAAKq1E,EAAUv8F,IAAI,EACvDu8F,EAAUC,OAAS5xD,EAAU,CAAC,EAC9B2xD,EAAUv8F,KAAO4qC,EAAU,CAAC,CAC9B,CACI2xD,EAAUC,QAAU,CAACD,EAAUv8F,OACjCu8F,EAAUv8F,KAAO,KAEnB,IAAIy8F,EAAa,CAGfH,OAAQC,EAAUD,OAClBE,OAAQH,EAAcG,OACtBx8F,KAAM,KACN3J,OAAQgmG,EAAchmG,OACtBqmG,MAAOL,EAAcK,MACrBC,SAAUN,EAAcM,QAC1B,EACA,GAAI,CAACN,EAAcG,SACjBC,EAAWD,OAASD,EAAUC,OAC1BH,EAAcr8F,KAAK,CAAC,IAAM,KAC5B,GAAI,CAACq8F,EAAcr8F,KACjBy8F,EAAWz8F,KAAOu8F,EAAUv8F,KACvBq8F,EAAchmG,SACjBomG,EAAWpmG,OAASkmG,EAAUlmG,OACzBgmG,EAAcK,QACjBD,EAAWC,MAAQH,EAAUG,YAG5B,CACL,IAAIE,EAAcL,EAAUv8F,KACxB68F,EAAUD,EAAYrzC,UAAU,EAAGqzC,EAAYE,YAAY,GAAG,EAAI,CAAC,EAAIT,EAAcr8F,KACzFy8F,EAAWz8F,KAAO47F,EAAWO,cAAcU,CAAO,CACpD,CAGJ,OAAIJ,EAAWz8F,OAAS,OACtBy8F,EAAWz8F,KAAOgyB,EAAKgqE,gBAAkBJ,EAAWO,cAAcE,EAAcr8F,IAAI,EAAIq8F,EAAcr8F,MAEjG47F,EAAWQ,kBAAkBK,CAAU,CAChD,EACAP,SAAU,SAAS9lG,EAAK,CACtB,IAAIjC,EAAQqnG,EAAUt0E,KAAK9wB,CAAG,EAC9B,OAAKjC,EAGE,CACLmoG,OAAQnoG,EAAM,CAAC,GAAK,GACpBqoG,OAAQroG,EAAM,CAAC,GAAK,GACpB6L,KAAM7L,EAAM,CAAC,GAAK,GAClBkC,OAAQlC,EAAM,CAAC,GAAK,GACpBuoG,MAAOvoG,EAAM,CAAC,GAAK,GACnBwoG,SAAUxoG,EAAM,CAAC,GAAK,EACxB,EATS,IAUX,EACAgoG,cAAe,SAASn8F,EAAM,CAE5B,IADAA,EAAOA,EAAK5L,MAAM,EAAE,EAAEC,QAAQ,EAAEqhB,KAAK,EAAE,EAAEvF,QAAQurF,EAAiB,EAAE,EAC7D17F,EAAKvL,UAAYuL,EAAOA,EAAKmQ,QAAQwrF,EAAqB,EAAE,GAAGlnG,QAAQ,CAE9E,OAAOuL,EAAK5L,MAAM,EAAE,EAAEC,QAAQ,EAAEqhB,KAAK,EAAE,CACzC,EACA0mF,kBAAmB,SAASjoG,EAAO,CACjC,OAAOA,EAAMmoG,OAASnoG,EAAMqoG,OAASroG,EAAM6L,KAAO7L,EAAMkC,OAASlC,EAAMuoG,MAAQvoG,EAAMwoG,QACvF,CACF,EACA/2F,EAAOH,QAAUm2F,CACnB,GAAG,CACL,EAAGR,EAAU,GACNA,GAAW31F,OACpB,CACA,IAAIs3F,GAAoBzB,GAAkB,EACpC0B,GAAN,KAAgB,CACd1gG,aAAc,CACZ,KAAK6Q,QAAU,GACf,KAAK8vF,OAAS,EACd,KAAKrqB,MAAQ,EACb,KAAKsqB,MAAQ,EACb,KAAKC,WAAa,EAClB,KAAKC,WAAa,EAClB,KAAKC,QAAU,CACbjrF,MAAO,EACPkrF,MAAO,EACP/qF,IAAK,CACP,EACA,KAAKgrF,QAAU,CACbnrF,MAAO,EACPG,IAAK,CACP,EACA,KAAKirF,UAAY,CACfprF,MAAO,EACPkrF,MAAO,EACP/qF,IAAK,CACP,CACF,CACF,EACIkrF,GAAwB,CAC1BxH,MAAO,QACPyH,MAAO,QACPC,WAAY,YACd,EACMC,GAAN,KAAkB,CAChBthG,YAAYlF,EAAM,CAChB,KAAKymG,WAAa,KAClB,KAAKC,KAAO,KACZ,KAAKC,OAAS,KACd,KAAKC,SAAW,KAChB,KAAK5mG,KAAO,OACZ,KAAK6mG,OAAS,OACV,OAAO7mG,GAAS,WAClBA,EAAO,CACLhB,IAAKgB,CACP,GAEF,KAAKA,KAAOA,EACZ8mG,GAAe,KAAM,OAAO,CAC9B,CAEAC,aAAavsG,EAAOwsG,EAAU,CAC5B,IAAM/nG,EAASzE,EAAMwC,MAAM,IAAK,CAAC,EAC7Bge,EACA/b,EAAO5B,SAAW,EACpB2d,EAAqCgsF,GAASC,oBAAuB,EAErEjsF,EAAQre,SAASsC,EAAO,CAAC,CAAC,EAE5B,KAAKwnG,WAAa,CAACzrF,EAAOre,SAASsC,EAAO,CAAC,CAAC,EAAI+b,CAAK,CACvD,CACA,IAAIksF,SAAU,CACZ,OAAO,KAAKlnG,KAAKhB,GACnB,CACA,IAAImoG,WAAY,CACd,OAAI,KAAKV,aAAe,KACf,CAAA,EAEF,KAAKA,UACd,CACA,IAAIW,sBAAuB,CACzB,OAAO,KAAKD,UAAU,CAAC,CACzB,CACA,IAAIF,oBAAqB,CACvB,OAAO,KAAKE,UAAU,CAAC,CACzB,CACA,IAAIE,mBAAoB,CACtB,OAAI,KAAKT,WAAa,OACpB,KAAKA,SAAW,CACd,CAACP,GAAsBxH,KAAK,EAAG,KAC/B,CAACwH,GAAsBC,KAAK,EAAG,KAC/B,CAACD,GAAsBE,UAAU,EAAG,IACtC,GAEK,KAAKK,QACd,CACA,IAAIS,kBAAkB7sG,EAAO,CAC3B,KAAKosG,SAAWpsG,CAClB,CACA,IAAI8sG,UAAW,CACb,OAAO,KAAKX,SAAW,IACzB,CACA,IAAIY,YAAa,CACf,OAAO,KAAKX,WAAa,IAC3B,CACA,IAAIY,OAAQ,CACV,OAAI,KAAKb,SAAW,OAClB,KAAKA,OAAS,IAAIf,IAEb,KAAKe,MACd,CACA,IAAIa,MAAMhtG,EAAO,CACf,KAAKmsG,OAASnsG,CAChB,CACA,IAAIwE,KAAM,CACR,MAAI,CAAC,KAAK0nG,MAAQ,KAAKQ,SAAW,KAAKL,SACrC,KAAKH,KAAOf,GAAkBlB,iBAAiB,KAAKyC,QAAS,KAAKL,OAAQ,CACxEjC,gBAAiB,EACnB,CAAC,GAEI,KAAK8B,MAAQ,EACtB,CACA,IAAI1nG,IAAIxE,EAAO,CACb,KAAKksG,KAAOlsG,CACd,CACAitG,2BAA4B,CAC1B,GAAM,CACJJ,kBAAAA,CACF,EAAI,KACJA,EAAkBhB,GAAsBxH,KAAK,EAAI,KACjDwI,EAAkBhB,GAAsBC,KAAK,EAAI,KACjDe,EAAkBhB,GAAsBE,UAAU,EAAI,IACxD,CACF,EACA,SAASmB,GAAgBC,EAAM,CAC7B,OAAOA,EAAKC,KAAO,aACrB,CACA,IAAMC,GAAN,cAAuBrB,EAAY,CACjCthG,YAAYwO,EAAM1T,EAAM,CACtB,MAAMA,CAAI,EACV,KAAK8nG,aAAe,KACpB,KAAKC,iBAAmB,KACxB,KAAKjgE,KAAO,KACZ,KAAKkgE,SAAW,OAChB,KAAKC,mBAAqB,KAC1B,KAAKC,QAAU,CAAA,EACf,KAAK5+D,SAAW,EAChB,KAAKs+D,GAAK,EACV,KAAKO,UAAY,OACjB,KAAKz0F,KAAO,OACZ,KAAK00F,OAAS,KACd,KAAKC,UAAY,KACjB,KAAK1hG,MAAQ,GACb,KAAK2hG,GAAK,EACV,KAAKC,SAAW,OAChB,KAAKC,OAAS,OACd,KAAKC,SAAW,OAChB,KAAKC,OAAS,OACd,KAAK1tF,MAAQ,EACb,KAAK2tF,eAAiB,EACtB,KAAKC,SAAW,OAChB,KAAKC,YAAc,OACnB,KAAKC,UAAY,OACjB,KAAKxyF,KAAO,OACZ,KAAKyyF,YAAc,GACnB,KAAKhoG,MAAQ,KACb,KAAKioG,YAAc,KACnB,KAAKC,QAAU,OACf,KAAKC,IAAM,OACX,KAAKC,MAAQ,EACb,KAAKz1F,KAAOA,CACd,CACA,IAAI01F,YAAa,CACf,GAAI,KAAK9B,SAAU,CACjB,IAAMxB,EAAQ,KAAK0B,MAAM1B,MACzB,GAAIA,EACF,OAAOA,CAEX,CACA,GAAI,KAAKqB,UAAW,CAClB,IAAMnsF,EAAQ,KAAKmsF,UAAU,CAAC,EACxBhsF,EAAM,KAAKgsF,UAAU,CAAC,EAC5B,GAAIpJ,GAAe/iF,CAAK,GAAK+iF,GAAe5iF,CAAG,EAC7C,OAAOA,EAAMH,CAEjB,CACA,OAAO,IACT,CACA,IAAIquF,SAAU,CACZ,OAAI,KAAKD,WACA,KAAKA,WAAa,EAAI,KAAK9/D,SAEhC,KAAK0+D,SACA,KAAKA,SAEP,IACT,CACA,IAAIqB,QAAQ7uG,EAAO,CACjB,KAAKwtG,SAAWxtG,CAClB,CACA,IAAI8uG,aAAc,CAChB,GAAM,CACJnB,UAAAA,CACF,EAAI,KACJ,GAAI,CAACA,GAAa,CAAC,KAAKL,aACtB,OAAO,KAET,GAAI,CAAC,KAAKA,cAAgB,KAAKK,WAAa,CAAC,KAAKA,UAAU1xD,KAAM,CAChE,IAAMl8C,EAAM,KAAK4tG,UAAUoB,SAC3B,GAAIhvG,EACF,KAAKutG,aAAevtG,EAAIivG,eAAe,KAAK5B,EAAE,MACzC,CACL,IAAM6B,EAAatvG,OAAOmE,KAAK,KAAK6pG,SAAS,EAC7C,GAAIsB,EAAWpsG,SAAW,EACxB,OAAO,KAAKyqG,aAAe,KAAKK,UAAUsB,EAAW,CAAC,CAAC,EAAED,eAAe,KAAK5B,EAAE,CAEnF,CACF,CACA,OAAO,KAAKE,YACd,CACA,IAAI3sF,KAAM,CACR,OAAO,KAAKH,MAAQ,KAAKsuB,QAC3B,CACA,IAAIogE,oBAAqB,CACvB,GAAI,KAAKC,kBAAoB,KAC3B,OAAO,KAET,IAAMrgE,EAAYy0D,GAAe,KAAKz0D,QAAQ,EAAQ,KAAKA,SAAT,EAClD,OAAO,KAAKqgE,gBAAkBrgE,EAAW,GAC3C,CACA,IAAIsgE,WAAY,CACd,IAAIC,EACJ,IAAKA,EAAqB,KAAK/B,eAAiB,MAAQ+B,EAAmBD,UACzE,MAAO,GACF,GAAI,KAAKzB,UAAW,CACzB,IAAMsB,EAAatvG,OAAOmE,KAAK,KAAK6pG,SAAS,EACvCtU,EAAM4V,EAAWpsG,OACvB,GAAIw2F,EAAM,GAAKA,IAAQ,GAAK,KAAKsU,UAAUsB,EAAW,CAAC,CAAC,EAAEG,UACxD,MAAO,EAEX,CACA,MAAO,EACT,CACA,IAAID,iBAAkB,CACpB,OAAI,KAAK5B,mBAAqB,MAAQ,KAAKE,qBACzC,KAAK0B,gBAAkBrxE,KAAK3mB,MAAM,KAAKs2F,kBAAkB,GAEpD,KAAKF,gBACd,CACA,IAAI4B,gBAAgBnvG,EAAO,CACzB,GAAI,CAACujG,GAAevjG,CAAK,EAAG,CAC1B,KAAKutG,iBAAmB,KAAKE,mBAAqB,KAClD,MACF,CACA,KAAKF,iBAAmBvtG,CAC1B,CACA,IAAIsvG,KAAM,CACR,OAAKpC,GAAgB,IAAI,GAGpB,KAAK5/D,OACR,KAAKA,KAAO,CACV9nC,KAAM,KAAKA,KACXgb,MAAO,KAAKA,MACZsuB,SAAU,KAAKA,SACfs+D,GAAI,KAAKA,GACT+B,gBAAiB,KAAKA,eACxB,GAEK,KAAK7hE,MAXH,IAYX,CACAiiE,SAASvvG,EAAO,CACd,KAAKwvG,SAAS,KAAKhvF,MAAQxgB,CAAK,CAClC,CACAwvG,SAASxvG,EAAO,CACd,KAAKwgB,MAAQxgB,EACT,KAAKstC,OACP,KAAKA,KAAK9sB,MAAQxgB,EAEtB,CACAyvG,YAAYzvG,EAAO,CACjB,KAAK8uC,SAAW9uC,EACZ,KAAKstC,OACP,KAAKA,KAAKwB,SAAW9uC,EAEzB,CACA0vG,aAAaC,EAAW,CACtB,GAAI,KAAKhC,UAAW,CAClB,IAAM5tG,EAAM,KAAK4tG,UAAUgC,CAAS,EAChC5vG,GAAO,CAAC,KAAKutG,eACf,KAAKA,aAAevtG,EAAIivG,eAAe,KAAK5B,EAAE,EAElD,CACF,CACAwC,eAAgB,CACd,IAAIC,EAAcC,GACjBD,EAAe,KAAKjC,SAAW,MAAgBiC,EAAalzF,MAAM,GAClEmzF,EAAkB,KAAKjC,YAAc,MAAgBiC,EAAgBnzF,MAAM,CAC9E,CACAozF,wBAAwB72F,EAAM60F,EAAUC,EAAQC,EAAUC,EAAQ8B,EAAU,GAAO,CACjF,GAAM,CACJnD,kBAAAA,CACF,EAAI,KACErhG,EAAOqhG,EAAkB3zF,CAAI,EACnC,GAAI,CAAC1N,EAAM,CACTqhG,EAAkB3zF,CAAI,EAAI,CACxB60F,SAAAA,EACAC,OAAAA,EACAC,SAAAA,EACAC,OAAAA,EACA8B,QAAAA,CACF,EACA,MACF,CACAxkG,EAAKuiG,SAAWnsG,KAAKgmB,IAAIpc,EAAKuiG,SAAUA,CAAQ,EAChDviG,EAAKwiG,OAASpsG,KAAKwG,IAAIoD,EAAKwiG,OAAQA,CAAM,EAC1CxiG,EAAKyiG,SAAWrsG,KAAKgmB,IAAIpc,EAAKyiG,SAAUA,CAAQ,EAChDziG,EAAK0iG,OAAStsG,KAAKwG,IAAIoD,EAAK0iG,OAAQA,CAAM,CAC5C,CACF,EACM+B,GAAN,cAAmBjE,EAAY,CAC7BthG,YAAYwlG,EAAW/C,EAAM3nG,EAAMiU,EAAO+yF,EAAU,CAClD,MAAMhnG,CAAI,EACV,KAAK2qG,WAAa,EAClB,KAAKrhE,SAAW,EAChB,KAAK4/D,IAAM,GACX,KAAK0B,YAAc,GACnB,KAAK/D,OAAS,OACd,KAAKtB,SAAW,OAChB,KAAKtxF,MAAQ,OACb,KAAKq1B,SAAWohE,EAAUG,qBAAqB,UAAU,EACzD,KAAK3B,IAAMwB,EAAUn9C,KAAK,KAAK,EAC/B,KAAKq9C,YAAcF,EAAUn9C,KAAK,aAAa,EAC/C,KAAKs5C,OAAS6D,EAAUI,iBAAiB,KAAK,EAC9C,KAAKvF,SAAWoC,EAChB,KAAK1zF,MAAQA,EACb,IAAMkzF,EAAYuD,EAAUI,iBAAiB,WAAW,EACpD3D,GACF,KAAKJ,aAAaI,EAAWH,CAAQ,EAEnCA,IACF,KAAK2D,WAAa3D,EAAS2D,WAAa3D,EAAS19D,SAErD,CACA,IAAItuB,OAAQ,CACV,OAAO,KAAKuqF,SAASvqF,MAAQ,KAAK2vF,UACpC,CACA,IAAIxvF,KAAM,CACR,OAAO,KAAKH,MAAQ,KAAKsuB,QAC3B,CACA,IAAIu8D,QAAS,CACX,GAAM,CACJwB,kBAAAA,CACF,EAAI,KACJ,MAAO,CAAC,EAAEA,EAAkBpwD,OAASowD,EAAkBxnG,OAASwnG,EAAkB0D,WACpF,CACF,EACA,SAASC,GAA2C3sG,EAAQ4sG,EAAU,CACpE,IAAM1sG,EAAYpE,OAAO+wG,eAAe7sG,CAAM,EAC9C,GAAIE,EAAW,CACb,IAAM4sG,EAAqBhxG,OAAO+S,yBAAyB3O,EAAW0sG,CAAQ,EAC9E,OAAIE,GAGGH,GAA2CzsG,EAAW0sG,CAAQ,CACvE,CACF,CACA,SAASnE,GAAezoG,EAAQ4sG,EAAU,CACxC,IAAMh+F,EAAI+9F,GAA2C3sG,EAAQ4sG,CAAQ,EACjEh+F,IACFA,EAAExS,WAAa,GACfN,OAAOC,eAAeiE,EAAQ4sG,EAAUh+F,CAAC,EAE7C,CACA,IAAMm+F,GAAehvG,KAAKqjG,IAAI,EAAG,EAAE,EAAI,EACjC34F,GAAO,CAAA,EAAGA,KACVukG,GAAuB,CAC3BxrG,MAAO,EACPo3C,MAAO,EACPq0D,IAAK,EACL3hG,KAAM,CACR,EACA,SAAS4hG,GAAQj1F,EAAM,CACrB,OAAOzS,OAAOqM,aAAalD,MAAM,KAAMsJ,CAAI,CAC7C,CACA,SAASk1F,GAAW5lF,EAAS6lF,EAAQ,CACnC,IAAM3nG,EAAM8hB,EAAQ6lF,CAAM,GAAK,EAAI7lF,EAAQ6lF,EAAS,CAAC,EACrD,OAAO3nG,EAAM,EAAI,MAAQA,EAAMA,CACjC,CACA,SAAS4nG,GAAW9lF,EAAS6lF,EAAQ,CACnC,IAAM3nG,EAAM6nG,GAAW/lF,EAAS6lF,CAAM,EACtC,OAAO3nG,EAAM,EAAI,WAAaA,EAAMA,CACtC,CACA,SAAS8nG,GAAWhmF,EAAS6lF,EAAQ,CACnC,IAAItuG,EAASuuG,GAAW9lF,EAAS6lF,CAAM,EACvCtuG,OAAAA,GAAUf,KAAKqjG,IAAI,EAAG,EAAE,EACxBtiG,GAAUuuG,GAAW9lF,EAAS6lF,EAAS,CAAC,EACjCtuG,CACT,CACA,SAASwuG,GAAW/lF,EAAS6lF,EAAQ,CACnC,OAAO7lF,EAAQ6lF,CAAM,GAAK,GAAK7lF,EAAQ6lF,EAAS,CAAC,GAAK,GAAK7lF,EAAQ6lF,EAAS,CAAC,GAAK,EAAI7lF,EAAQ6lF,EAAS,CAAC,CAC1G,CACA,SAASI,GAAYv1F,EAAM,CACzB,IAAM6E,EAAM7E,EAAK8yF,WACjB,QAAShsG,EAAI,EAAGA,EAAI+d,GAAO,CACzB,IAAM9W,EAAOqnG,GAAWp1F,EAAMlZ,CAAC,EAC/B,GAAIiH,EAAO,GAAKiS,EAAKlZ,EAAI,CAAC,IAAM,KAAOkZ,EAAKlZ,EAAI,CAAC,IAAM,KAAOkZ,EAAKlZ,EAAI,CAAC,IAAM,KAAOkZ,EAAKlZ,EAAI,CAAC,IAAM,IACnG,MAAO,GAETA,EAAIiH,EAAO,EAAIjH,EAAIiH,EAAO8W,CAC5B,CACA,MAAO,EACT,CACA,SAAS2wF,GAAQx1F,EAAM1N,EAAM,CAC3B,IAAMmjG,EAAU,CAAA,EAChB,GAAI,CAACnjG,EAAKvL,OACR,OAAO0uG,EAET,IAAM5wF,EAAM7E,EAAK8yF,WACjB,QAAShsG,EAAI,EAAGA,EAAI+d,GAAO,CACzB,IAAM9W,EAAOqnG,GAAWp1F,EAAMlZ,CAAC,EACzBsW,EAAO63F,GAAQj1F,EAAK01F,SAAS5uG,EAAI,EAAGA,EAAI,CAAC,CAAC,EAC1C6uG,EAAS5nG,EAAO,EAAIjH,EAAIiH,EAAO8W,EACrC,GAAIzH,IAAS9K,EAAK,CAAC,EACjB,GAAIA,EAAKvL,SAAW,EAClB0uG,EAAQjlG,KAAKwP,EAAK01F,SAAS5uG,EAAI,EAAG6uG,CAAM,CAAC,MACpC,CACL,IAAMC,EAAaJ,GAAQx1F,EAAK01F,SAAS5uG,EAAI,EAAG6uG,CAAM,EAAGrjG,EAAKuL,MAAM,CAAC,CAAC,EAClE+3F,EAAW7uG,QACbyJ,GAAKkG,MAAM++F,EAASG,CAAU,CAElC,CAEF9uG,EAAI6uG,CACN,CACA,OAAOF,CACT,CACA,SAASI,GAAkBC,EAAM,CAC/B,IAAMC,EAAa,CAAA,EACb//E,EAAW8/E,EAAK,CAAC,EACnBn4F,EAAQ,EACNq4F,EAAYZ,GAAWU,EAAMn4F,CAAK,EACxCA,GAAS,EACT,IAAIs4F,EAA2B,EAC3BC,EAAc,EACdlgF,IAAa,GACfigF,EAA2Bb,GAAWU,EAAMn4F,CAAK,EACjDu4F,EAAcd,GAAWU,EAAMn4F,EAAQ,CAAC,EACxCA,GAAS,IAETs4F,EAA2BX,GAAWQ,EAAMn4F,CAAK,EACjDu4F,EAAcZ,GAAWQ,EAAMn4F,EAAQ,CAAC,EACxCA,GAAS,IAEXA,GAAS,EACT,IAAIw4F,EAAYL,EAAK/uG,OAASmvG,EACxBE,EAAkBlB,GAAWY,EAAMn4F,CAAK,EAC9CA,GAAS,EACT,QAAS7W,EAAI,EAAGA,EAAIsvG,EAAiBtvG,IAAK,CACxC,IAAIuvG,EAAiB14F,EACf24F,EAAgBlB,GAAWU,EAAMO,CAAc,EACrDA,GAAkB,EAClB,IAAME,EAAgBD,EAAgB,WAEtC,IADuBA,EAAgB,cAAgB,KACjC,EACpBnkG,OAAAA,GAAOnC,KAAK,kDAAkD,EACvD,KAET,IAAMwmG,EAAqBpB,GAAWU,EAAMO,CAAc,EAC1DA,GAAkB,EAClBN,EAAWvlG,KAAK,CACd+lG,cAAAA,EACAC,mBAAAA,EAEA9mG,KAAM,CACJsjC,SAAUwjE,EAAqBR,EAC/BtxF,MAAOyxF,EACPtxF,IAAKsxF,EAAYI,EAAgB,CACnC,CACF,CAAC,EACDJ,GAAaI,EACbF,GAAkB,EAClB14F,EAAQ04F,CACV,CACA,MAAO,CACLJ,yBAAAA,EACAD,UAAAA,EACAhrG,QAASgrB,EACTogF,gBAAAA,EACAL,WAAAA,CACF,CACF,CACA,SAASU,GAAiB/D,EAAa,CACrC,IAAM7rG,EAAS,CAAA,EACT6vG,EAAQlB,GAAQ9C,EAAa,CAAC,OAAQ,MAAM,CAAC,EACnD,QAAS5rG,EAAI,EAAGA,EAAI4vG,EAAM3vG,OAAQD,IAAK,CACrC,IAAM6vG,EAAOD,EAAM5vG,CAAC,EACd8vG,EAAOpB,GAAQmB,EAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EACtC,GAAIC,EAAM,CACR,IAAI5gF,EAAW4gF,EAAK,CAAC,EACfC,EAAUzB,GAAWwB,EAAM5gF,IAAa,EAAI,GAAK,EAAE,EACnD8gF,EAAOtB,GAAQmB,EAAM,CAAC,OAAQ,MAAM,CAAC,EAAE,CAAC,EAC9C,GAAIG,EAAM,CACR9gF,EAAW8gF,EAAK,CAAC,EACjB,IAAMd,EAAYZ,GAAW0B,EAAM9gF,IAAa,EAAI,GAAK,EAAE,EACrD+gF,EAAOvB,GAAQmB,EAAM,CAAC,OAAQ,MAAM,CAAC,EAAE,CAAC,EAC9C,GAAII,EAAM,CACR,IAAMC,EAAW/B,GAAQ8B,EAAKrB,SAAS,EAAG,EAAE,CAAC,EACvCt4F,EAAO,CACX65F,KAAMlH,GAAsBxH,MAC5B2O,KAAMnH,GAAsBC,KAC9B,EAAEgH,CAAQ,EACJG,EAAU3B,GAAQmB,EAAM,CAAC,OAAQ,OAAQ,OAAQ,MAAM,CAAC,EAAE,CAAC,EAC3DS,EAAOC,GAAUF,CAAO,EAC1B/5F,GACFvW,EAAOgwG,CAAO,EAAI,CAChBb,UAAAA,EACA54F,KAAAA,EACAg6F,KAAAA,CACF,EACAvwG,EAAOuW,CAAI,EAAI8tF,GAAe,CAC5B8K,UAAAA,EACA/xF,GAAI4yF,CACN,EAAGO,CAAI,GAEPvwG,EAAOgwG,CAAO,EAAI,CAChBb,UAAAA,EACA54F,KAAM45F,EACNI,KAAAA,CACF,CAEJ,CACF,CACF,CACF,CAEAE,OADa9B,GAAQ9C,EAAa,CAAC,OAAQ,OAAQ,MAAM,CAAC,EACrDxpG,QAASquG,GAAU,CACtB,IAAMV,EAAUzB,GAAWmC,EAAO,CAAC,EAC7BvuF,EAAQniB,EAAOgwG,CAAO,EACxB7tF,IACFA,EAAM3S,QAAU,CACd28B,SAAUoiE,GAAWmC,EAAO,EAAE,EAC9Bjd,MAAO8a,GAAWmC,EAAO,EAAE,CAC7B,EAEJ,CAAC,EACM1wG,CACT,CACA,SAASwwG,GAAUD,EAAM,CACvB,IAAMI,EAAgBJ,EAAK1B,SAAS,CAAC,EAC/B+B,EAAmBD,EAAc9B,SAAS,EAAM,EAChDgC,EAASzC,GAAQuC,EAAc9B,SAAS,EAAG,CAAC,CAAC,EAC/CiC,EAAQD,EACRE,EACEtE,EAAYoE,IAAW,QAAUA,IAAW,OAClD,GAAIpE,EAAW,CAEb,IAAMuE,EADSrC,GAAQgC,EAAe,CAACE,CAAM,CAAC,EAAE,CAAC,EACnBhC,SAASgC,IAAW,OAAS,GAAK,EAAE,EACpDlC,GAAQqC,EAAgB,CAAC,MAAM,CAAC,EACxC3uG,QAAS4uG,GAAS,CACtB,IAAMC,EAAOvC,GAAQsC,EAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EACtC,GAAIC,EAAM,CACR,IAAMnJ,EAASqG,GAAQ8C,EAAKrC,SAAS,EAAG,CAAC,CAAC,EAC1C,GAAI9G,IAAW,QAAUA,IAAW,OAAQ,CAC1C,IAAMoJ,EAAOxC,GAAQsC,EAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAClCE,IACFL,EAAQ1C,GAAQ+C,CAAI,EAExB,CACF,CACF,CAAC,CACH,CACA,IAAMC,EAAcN,EACpB,OAAQA,EAAK,CACX,IAAK,OACL,IAAK,OACL,IAAK,OACL,IAAK,OAAQ,CACX,IAAMO,EAAU1C,GAAQiC,EAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,EACjDS,GAAWA,EAAQnxG,OAAS,IAC9B4wG,GAAS,IAAMQ,GAAMD,EAAQ,CAAC,CAAC,EAAIC,GAAMD,EAAQ,CAAC,CAAC,EAAIC,GAAMD,EAAQ,CAAC,CAAC,EACvEN,EAAeQ,GAA2BH,IAAgB,OAAS,OAAS,OAAQR,CAAgB,GAEtG,KACF,CACA,IAAK,OAAQ,CACX,IAAMY,EAAW7C,GAAQgC,EAAe,CAACE,CAAM,CAAC,EAAE,CAAC,EAC7CY,EAAU9C,GAAQ6C,EAAS3C,SAAS,EAAE,EAAG,CAAC,MAAM,CAAC,EAAE,CAAC,EAC1D,GAAI4C,GAAWA,EAAQvxG,OAAS,EAAG,CACjC,IAAID,EAAI,EACR,GAAIwxG,EAAQxxG,GAAG,IAAM,EACnB,MAEFA,EAAIyxG,GAAeD,EAASxxG,CAAC,EAC7BA,GAAK,EACL,IAAMwzF,EAAQge,EAAQxxG,GAAG,EAOzB,GANIwzF,EAAQ,MACVxzF,GAAK,GAEHwzF,EAAQ,KACVxzF,GAAKwxG,EAAQxxG,GAAG,GAEdwxG,EAAQxxG,GAAG,IAAM,EACnB,MAEFA,EAAIyxG,GAAeD,EAASxxG,CAAC,EAC7B,IAAM0xG,EAAaF,EAAQxxG,GAAG,EAC9B,GAAI0xG,IAAe,GACjBb,GAAS,IAAMQ,GAAMK,CAAU,MAE/B,OAGF,GADA1xG,GAAK,GACDwxG,EAAQxxG,GAAG,IAAM,EACnB,MAEFA,EAAIyxG,GAAeD,EAASxxG,CAAC,EAC7B,IAAM2xG,EAAYH,EAAQxxG,GAAG,EACzB4xG,GAAmBD,EAAY,MAAQ,EACvCC,IAAoB,KACtBA,GAAmB,IAAMD,EAAY,IAAM,KAAOH,EAAQxxG,CAAC,EAAI,MAAQ,IAEzE6wG,GAAS,IAAMe,CACjB,CACA,KACF,CACA,IAAK,OACL,IAAK,OAAQ,CACX,IAAMC,EAAUnD,GAAQiC,EAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,EACrD,GAAIkB,GAAWA,EAAQ5xG,OAAS,GAAI,CAClC,IAAM6xG,EAAcD,EAAQ,CAAC,EACvBE,EAAe,CAAC,GAAI,IAAK,IAAK,GAAG,EAAED,GAAe,CAAC,EACnDE,EAAoBF,EAAc,GAClCG,EAAgB3D,GAAWuD,EAAS,CAAC,EACrCK,GAAYJ,EAAc,KAAO,EAAI,IAAM,IAC3CK,EAAWN,EAAQ,EAAE,EACrBO,EAAsBP,EAAQjD,SAAS,EAAG,EAAE,EAClDiC,GAAS,IAAMkB,EAAeC,EAC9BnB,GAAS,IAAMwB,GAAgBJ,CAAa,EAAE/vG,SAAS,EAAE,EAAEqV,YAAY,EACvEs5F,GAAS,IAAMqB,EAAWC,EAC1B,IAAIG,EAAmB,GACvB,QAAStyG,EAAIoyG,EAAoBnyG,OAAQD,KAAO,CAC9C,IAAMuyG,EAAOH,EAAoBpyG,CAAC,GAC9BuyG,GAAQD,KAEVA,EAAmB,IADCC,EAAKrwG,SAAS,EAAE,EAAEqV,YAAY,EACX+6F,EAE3C,CACAzB,GAASyB,CACX,CACAxB,EAAeQ,GAA2BH,GAAe,OAAS,OAAS,OAAQR,CAAgB,EACnG,KACF,CACA,IAAK,OACL,IAAK,OACL,IAAK,OACL,IAAK,OACL,IAAK,OAAQ,CACXE,EAAQS,GAA2BT,EAAOF,CAAgB,GAAKE,EAC/D,KACF,CACA,IAAK,OAAQ,CACX,IAAM2B,EAAU9D,GAAQiC,EAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,EACrD,GAAI6B,GAAWA,EAAQvyG,OAAS,EAAG,CACjC,IAAMwyG,EAAUD,EAAQ,CAAC,EACnBjpG,EAAQipG,EAAQ,CAAC,EACjBE,EAAWF,EAAQ,CAAC,GAAK,EAAI,GACnC3B,GAAS,IAAM8B,GAAeF,CAAO,EAAI,IAAME,GAAeppG,CAAK,EAAI,IAAMopG,GAAeD,CAAQ,CACtG,CACA,KACF,CACA,IAAK,OAAQ,CACX,IAAME,EAAUlE,GAAQiC,EAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,EACrD,GAAIiC,GAAWA,EAAQ3yG,OAAS,EAAG,CACjC,IAAMwyG,EAAUG,EAAQ,CAAC,IAAM,EACzBrpG,EAAQqpG,EAAQ,CAAC,EAAI,GACrBV,EAAWU,EAAQ,CAAC,IAAM,EAAI,IAAM,IACpCC,GAAgBD,EAAQ,CAAC,EAAI,KAAO,EACpCE,GAAaF,EAAQ,CAAC,EAAI,KAAO,EACjCF,EAAWD,IAAY,GAAKI,EAAeC,EAAY,GAAK,GAAKD,EAAe,GAAK,EACrFE,GAAcH,EAAQ,CAAC,EAAI,KAAO,EAClCI,GAAsBJ,EAAQ,CAAC,EAAI,IAAM,EACzCK,GAAsBL,EAAQ,CAAC,EAAI,IAAM,EACzCM,EAAuBN,EAAQ,CAAC,EAAI,EAK1C/B,GAAS,IAAM4B,EAAU,IAAME,GAAeppG,CAAK,EAAI2oG,EAAW,IAAMS,GAAeD,CAAQ,EAAI,IAAMK,EAAa,IAAMC,EAAqBC,EAAqBC,EAAuB,IAAMP,GAJ5K,CAIyM,EAAI,IAAMA,GAH1M,CAGgP,EAAI,IAAMA,GAF/P,CAEgS,EAAI,IADpS,EAE3B7B,EAAeQ,GAA2B,OAAQX,CAAgB,CACpE,CACA,KACF,CACF,CACA,MAAO,CACLE,MAAAA,EACArE,UAAAA,EACAsE,aAAAA,CACF,CACF,CACA,SAASQ,GAA2BV,EAAQD,EAAkB,CAC5D,IAAMwC,EAAazE,GAAQiC,EAAkB,CAAC,MAAM,CAAC,EAC/CyC,EAAUD,EAAWlzG,OAASkzG,EAAW,CAAC,EAAIzE,GAAQiC,EAAkB,CAAC,MAAM,CAAC,EAAE,CAAC,EACzF,GAAIyC,EAAS,CACX,IAAMC,EAAcD,EAAQ,CAAC,GAAK,EAAI,IAChCE,EAAYF,EAAQ,CAAC,GAAK,EAAI,GAAKA,EAAQ,CAAC,GAAK,EAAI,GAC3D,OAAOxC,EAAS,IAAM+B,GAAeU,CAAW,EAAI,IAAMV,GAAeW,CAAS,CACpF,CACF,CACA,SAASjB,GAAgB3rG,EAAK,CAC5B,IAAI3G,EAAS,EACb,QAASC,EAAI,EAAGA,EAAI,GAAIA,IACtBD,IAAW2G,GAAO1G,EAAI,IAAM,GAASA,EAEvC,OAAOD,IAAW,CACpB,CACA,SAAS0xG,GAAe8B,EAAQvzG,EAAG,CACjC,IAAMwzG,EAAQxzG,EAAI,EAClB,KAAOuzG,EAAOvzG,GAAG,EAAI,KAAOA,EAAIwzG,GAAO,CAEvC,OAAOxzG,CACT,CACA,SAASqxG,GAAMniG,EAAG,CAChB,OAAQ,IAAMA,EAAEhN,SAAS,EAAE,EAAEqV,YAAY,GAAGR,MAAM,EAAE,CACtD,CACA,SAAS47F,GAAe/qE,EAAK,CAC3B,OAAQA,EAAM,GAAK,IAAM,IAAMA,CACjC,CACA,SAAS6rE,GAAmB7H,EAAaM,EAAa,CACpD,GAAI,CAACN,GAAe,CAACM,EACnB,OAAON,EAET,IAAM8H,EAAQxH,EAAYwH,MAC1B,OAAIA,GAASxH,EAAYyH,oBACTjF,GAAQ9C,EAAa,CAAC,OAAQ,MAAM,CAAC,EAC7CxpG,QAASytG,GAAS,CAEtB,IAAMa,EADOhC,GAAQmB,EAAM,CAAC,OAAQ,OAAQ,OAAQ,MAAM,CAAC,EAAE,CAAC,EACnCjB,SAAS,CAAC,EACjCgF,EAAWlF,GAAQgC,EAAe,CAAC,MAAM,CAAC,EACxC3lD,EAAU6oD,EAAS3zG,OAAS,EAC7B8qD,IACH6oD,EAAWlF,GAAQgC,EAAe,CAAC,MAAM,CAAC,GAE5CkD,EAASxxG,QAASyxG,GAAQ,CACxB,IAAM9C,EAAiBhmD,EAAU8oD,EAAIjF,SAAS,EAAE,EAAIiF,EAAIjF,SAAS,EAAE,EACjDF,GAAQqC,EAAgB,CAAC,MAAM,CAAC,EACxC3uG,QAAS4uG,GAAS,CAC1B,IAAM8C,EAAOC,GAAU/C,CAAI,EAC3B,GAAI8C,EAAM,CACR,IAAME,EAAYF,EAAKlF,SAAS,EAAG,EAAE,EAChCoF,EAAU/sE,KAAMzoB,GAAMA,IAAM,CAAC,IAChCnT,GAAOpC,IAAI,+BAA+B8hD,EAAU,IAAM,GAAG,qBAAqBy7C,GAAIC,QAAQuN,CAAS,CAAC,OAAOxN,GAAIC,QAAQiN,CAAK,CAAC,EAAE,EACnII,EAAK1wG,IAAIswG,EAAO,CAAC,EAErB,CACF,CAAC,CACH,CAAC,CACH,CAAC,EAEI9H,CACT,CACA,SAASmI,GAAU/C,EAAM,CACvB,IAAMC,EAAOvC,GAAQsC,EAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EACtC,GAAIC,EAAM,CACR,IAAMnJ,EAASqG,GAAQ8C,EAAKrC,SAAS,EAAG,CAAC,CAAC,EAC1C,GAAI9G,IAAW,QAAUA,IAAW,OAClC,OAAO4G,GAAQsC,EAAM,CAAC,OAAQ,MAAM,CAAC,EAAE,CAAC,CAE5C,CACA,OAAO,IACT,CACA,SAASiD,GAAc/6F,EAAMg7F,EAAUzP,EAAS,CAC9C,IAAM13D,EAAS,CAAC,EACVonE,EAAQzF,GAAQx1F,EAAM,CAAC,OAAQ,MAAM,CAAC,EAC5C,QAASlZ,EAAI,EAAGA,EAAIm0G,EAAMl0G,OAAQD,IAAK,CACrC,IAAMo0G,EAAOD,EAAMn0G,CAAC,EACdq0G,EAAO3F,GAAQ0F,EAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EAChCj3F,EAAKmxF,GAAW+F,EAAM,CAAC,EACvBnyF,EAAQgyF,EAAS/2F,CAAE,EACzB,GAAI,CAAC+E,EACH,SAEF,IAAMoyF,EAAavnE,EAAO5vB,CAAE,IAAM4vB,EAAO5vB,CAAE,EAAI,CAC7CS,MAAOyuD,IACPngC,SAAU,EACVqoE,YAAa,EACbrF,UAAWhtF,EAAMgtF,UACjB54F,KAAM4L,EAAM5L,IACd,GACMk+F,EAAO9F,GAAQ0F,EAAM,CAAC,MAAM,CAAC,EAAE,CAAC,EACtC,GAAII,EAAM,CACR,IAAMtlF,EAAWslF,EAAK,CAAC,EACnBC,EAAWnG,GAAWkG,EAAM,CAAC,EAC7BtlF,IAAa,IACXulF,IAAazG,GACfvJ,EAAQv7F,KAAK,kFAAkF,GAE/FurG,GAAYzG,GAAe,EAC3ByG,GAAYnG,GAAWkG,EAAM,CAAC,IAG9B7T,GAAe8T,CAAQ,IAAM,CAAC9T,GAAe2T,EAAW12F,KAAK,GAAK62F,EAAWH,EAAW12F,SAC1F02F,EAAW12F,MAAQ62F,EAEvB,CACA,IAAMC,EAAexyF,EAAM3S,QACrBolG,EAAYrG,GAAW+F,EAAM,CAAC,EAAqCK,GAAalhB,MAClFohB,EAAyDF,GAAaxoE,UAAa,EACnFyoE,EAAY,IACVA,EAAY,EACdC,EAAwBtG,GAAW+F,EAAM,EAAE,EAE3CO,EAAwBtG,GAAW+F,EAAM,CAAC,GAG9C,IAAMQ,EAAQnG,GAAQ0F,EAAM,CAAC,MAAM,CAAC,EAChCU,EAAYR,EAAW12F,OAAS,EAChCm3F,EAAc,EACdC,EAAiBJ,EACrB,QAASpvD,EAAI,EAAGA,EAAIqvD,EAAM50G,OAAQulD,IAAK,CACrC,IAAMyvD,EAAOJ,EAAMrvD,CAAC,EACd+uD,EAAcjG,GAAW2G,EAAM,CAAC,EAChCC,EAAcZ,EAAWC,YAC/BD,EAAWC,aAAeA,EAC1B,IAAMY,EAAoBF,EAAK,CAAC,EAAI,EAC9BG,EAA0BH,EAAK,CAAC,EAAI,EACpCI,EAAwBJ,EAAK,CAAC,EAAI,EAClCK,EAAoBL,EAAK,CAAC,EAAI,EAC9BM,EAAqBN,EAAK,CAAC,EAAI,EAC/BO,EAAqCP,EAAK,CAAC,EAAI,EACjD5G,GAAS,EACToH,GAAYlB,EA0BhB,IAzBIY,IACF9G,IAAU,GAER+G,GAA2Bb,IAEzB,EADoBU,EAAK5G,GAAS,CAAC,EAAI,IACnBiG,EAAWoB,gBAAkB,SACnDpB,EAAWoB,cAAgBR,GAE7B7G,IAAU,EACNgH,GACFL,EAAiB1G,GAAW2G,EAAM5G,EAAM,EACxCA,IAAU,GAEV2G,EAAiBJ,EAEfU,IACFjH,IAAU,GAERmH,IACFnH,IAAU,GAEZyG,GAAaE,EACbD,GAAeC,EACfS,MAEKA,MACDJ,GACFL,EAAiB1G,GAAW2G,EAAM5G,EAAM,EACxCA,IAAU,GAEV2G,EAAiBJ,EAEfU,IACFjH,IAAU,GAERkH,IACsBN,EAAK5G,GAAS,CAAC,EAAI,GAErCiG,EAAWoB,gBAAkB,SAC/BpB,EAAWoB,cAAgBpB,EAAWC,aAAekB,GAAY,GACjEnB,EAAWqB,cAAgBb,GAG/BzG,IAAU,GAERmH,IACFnH,IAAU,GAEZyG,GAAaE,EACbD,GAAeC,EAEb,CAACD,GAAeH,IAClBG,GAAeH,EAAwBL,EAE3C,CACAD,EAAWpoE,UAAY6oE,CACzB,CACA,GAAI,CAACh4G,OAAOmE,KAAK6rC,CAAM,EAAE9F,KAAM8oE,GAAYhjE,EAAOgjE,CAAO,EAAE7jE,QAAQ,EAAG,CACpE,IAAI0pE,EAAeppD,IACfqpD,EAAa,EACXC,EAAQpH,GAAQx1F,EAAM,CAAC,MAAM,CAAC,EACpC,QAASlZ,EAAI,EAAGA,EAAI81G,EAAM71G,OAAQD,IAAK,CACrC,IAAMgvG,EAAOD,GAAkB+G,EAAM91G,CAAC,CAAC,EACvC,GAAIgvG,GAAQ,MAAQA,EAAKC,WAAY,CACnC2G,EAAe52G,KAAKgmB,IAAI4wF,EAAc5G,EAAKG,yBAA2BH,EAAKE,SAAS,EACpF,IAAM6G,EAAqB/G,EAAKC,WAAW94F,OAAO,CAAC6/F,EAAKtJ,IAAQsJ,EAAMtJ,EAAI9jG,KAAKsjC,UAAY,EAAG,CAAC,EAC/F2pE,EAAa72G,KAAKwG,IAAIqwG,EAAYE,EAAqB/G,EAAKG,yBAA2BH,EAAKE,SAAS,CACvG,CACF,CACI2G,GAAclV,GAAekV,CAAU,GACzC94G,OAAOmE,KAAK6rC,CAAM,EAAE3qC,QAAS2tG,GAAY,CAClChjE,EAAOgjE,CAAO,EAAE7jE,WACnBa,EAAOgjE,CAAO,EAAE7jE,SAAW2pE,EAAa9oE,EAAOgjE,CAAO,EAAEb,UAAYniE,EAAOgjE,CAAO,EAAEnyF,MAExF,CAAC,CAEL,CACA,OAAOmvB,CACT,CACA,SAASkpE,GAAkB/8F,EAAM,CAC/B,IAAMg9F,EAAiB,CACrBC,MAAO,KACPC,UAAW,IACb,EACMC,EAAQ3H,GAAQx1F,EAAM,CAAC,MAAM,CAAC,EACpC,GAAIm9F,EAAMp2G,OAAS,EACjBi2G,OAAAA,EAAeE,UAAYl9F,EACpBg9F,EAET,IAAMp3E,EAAOu3E,EAAMA,EAAMp2G,OAAS,CAAC,EACnCi2G,OAAAA,EAAeC,MAAQj9F,EAAKnC,MAAM,EAAG+nB,EAAKw3E,WAAa,CAAC,EACxDJ,EAAeE,UAAYl9F,EAAKnC,MAAM+nB,EAAKw3E,WAAa,CAAC,EAClDJ,CACT,CACA,SAASK,GAAiBC,EAAOC,EAAO,CACtC,IAAMlnE,EAAO,IAAIt5B,WAAWugG,EAAMv2G,OAASw2G,EAAMx2G,MAAM,EACvDsvC,OAAAA,EAAKnsC,IAAIozG,CAAK,EACdjnE,EAAKnsC,IAAIqzG,EAAOD,EAAMv2G,MAAM,EACrBsvC,CACT,CACA,SAASmnE,GAAaC,EAAYz0F,EAAO,CACvC,IAAM00F,EAAa,CAAA,EACbC,EAAY30F,EAAM40F,QAClB5H,EAAYhtF,EAAMgtF,UAClBa,EAAU7tF,EAAM/E,GAClB45F,EAAe,GAEnBV,OADc3H,GAAQmI,EAAW,CAAC,MAAM,CAAC,EACnChyG,IAAKmyG,GAAS,CAClB,IAAMC,EAAaD,EAAKV,WAAa,EACvB5H,GAAQsI,EAAM,CAAC,MAAM,CAAC,EAC9BnyG,IAAKuvG,GAAS,CAClB,IAAMK,EAAW/F,GAAQ0F,EAAM,CAAC,MAAM,CAAC,EAAEvvG,IAAK2vG,GAAS,CACrD,IAAMtlF,EAAWslF,EAAK,CAAC,EACnBz0G,EAASuuG,GAAWkG,EAAM,CAAC,EAC/B,OAAItlF,IAAa,IACfnvB,GAAUf,KAAKqjG,IAAI,EAAG,EAAE,EACxBtiG,GAAUuuG,GAAWkG,EAAM,CAAC,GAEvBz0G,EAASmvG,CAClB,CAAC,EAAE,CAAC,EACJ,OAAIuF,IAAa,SACfkC,EAAalC,GAER/F,GAAQ0F,EAAM,CAAC,MAAM,CAAC,EAAEvvG,IAAKwvG,GAAS,CAC3C,IAAMl3F,EAAKmxF,GAAW+F,EAAM,CAAC,EACvBM,EAAYrG,GAAW+F,EAAM,CAAC,EAAI,SAClC6C,GAAyBvC,EAAY,KAAO,EAC5CwC,GAAiCxC,EAAY,KAAO,EACpDyC,GAAgCzC,EAAY,KAAO,EACrDC,EAAwB,EACtByC,GAA4B1C,EAAY,MAAQ,EAClD2C,EAAoB,EAClBC,GAA6B5C,EAAY,MAAQ,EACnD6C,EAAa,EACbr6F,IAAO4yF,IACLmH,IACFM,GAAc,GAEZL,IACFK,GAAc,GAEZJ,IACFxC,EAAwBtG,GAAW+F,EAAMmD,CAAU,EACnDA,GAAc,GAEZH,IACFC,EAAoBhJ,GAAW+F,EAAMmD,CAAU,EAC/CA,GAAc,GAEZD,IACFC,GAAc,GAEZt1F,EAAM5L,OAAS,UACjBygG,EAAeU,GAAOv1F,EAAM2uF,KAAK,GAEnCnC,GAAQ0F,EAAM,CAAC,MAAM,CAAC,EAAEvvG,IAAKowG,GAAS,CACpC,IAAM/lF,EAAW+lF,EAAK,CAAC,EACjBzhB,EAAQ8a,GAAW2G,EAAM,CAAC,EAAI,SAC9BE,GAAqB3hB,EAAQ,KAAO,EACtCkkB,EAAa,EACXtC,IAA2B5hB,EAAQ,KAAO,EAC1C6hB,IAAyB7hB,EAAQ,OAAS,EAC5CwhB,GAAiB,EACfM,IAAqB9hB,EAAQ,OAAS,EACxCmkB,GAAa,EACXpC,GAAsB/hB,EAAQ,QAAU,EACxCokB,IAAmCpkB,EAAQ,QAAU,EACvDqkB,GAAoB,EAClBtD,GAAcjG,GAAW2G,EAAM,CAAC,EAClC6C,EAAa,EACb3C,IACFuC,EAAapJ,GAAW2G,EAAM6C,CAAU,EACxCA,GAAc,GAEZ1C,KACF0C,GAAc,GAEhB,IAAIC,GAAeL,EAAaT,EAChC,QAASe,GAAK,EAAGA,GAAKzD,GAAayD,KAAM,CAwBvC,GAvBI3C,IACFL,GAAiB1G,GAAW2G,EAAM6C,CAAU,EAC5CA,GAAc,GAEd9C,GAAiBJ,EAEfU,IACFqC,GAAarJ,GAAW2G,EAAM6C,CAAU,EACxCA,GAAc,GAEdH,GAAaL,EAEX/B,IACFuC,GAAc,GAEZF,KACE1oF,IAAa,EACf2oF,GAAoBvJ,GAAW2G,EAAM6C,CAAU,EAE/CD,GAAoBtJ,GAAW0G,EAAM6C,CAAU,EAEjDA,GAAc,GAEZ51F,EAAM5L,OAAS2yF,GAAsBC,MAAO,CAC9C,IAAI+O,GAAgB,EACpB,KAAOA,GAAgBN,IAAY,CACjC,IAAMO,GAAW5J,GAAWuI,EAAWkB,EAAY,EAEnD,GADAA,IAAgB,EACZI,GAAapB,EAAcF,EAAUkB,EAAY,CAAC,EAAG,CACvD,IAAM7+F,GAAO29F,EAAUjI,SAASmJ,GAAcA,GAAeG,EAAQ,EACrEE,GAAwBl/F,GAAM69F,EAAe,EAAI,EAAGJ,EAAakB,GAAoB3I,EAAW0H,CAAU,CAC5G,CACAmB,IAAgBG,GAChBD,IAAiBC,GAAW,CAC9B,CACF,CACAvB,GAAc3B,GAAiB9F,CACjC,CACF,CAAC,EAEL,CAAC,CACH,CAAC,CACH,CAAC,EACM0H,CACT,CACA,SAASa,GAAO5G,EAAO,CACrB,GAAI,CAACA,EACH,MAAO,GAET,IAAMwH,EAAYxH,EAAM97C,UAAU,EAAG,CAAC,EACtC,OAAOsjD,IAAc,QAAUA,IAAc,QAC7CA,IAAc,QAAUA,IAAc,MACxC,CACA,SAASF,GAAapB,EAAcuB,EAAY,CAC9C,GAAIvB,EAAc,CAChB,IAAMwB,EAAWD,GAAc,EAAI,GACnC,OAAOC,IAAa,IAAMA,IAAa,EACzC,KAEE,QADiBD,EAAa,MACV,CAExB,CACA,SAASF,GAAwBI,EAAeC,EAAYC,EAAK5B,EAAS,CACxE,IAAM59F,EAAOy/F,GAAWH,CAAa,EACjCI,EAAS,EACbA,GAAUH,EACV,IAAII,EAAc,EACdC,EAAc,EACdt6F,EAAI,EACR,KAAOo6F,EAAS1/F,EAAKjZ,QAAQ,CAC3B44G,EAAc,EACd,EAAG,CACD,GAAID,GAAU1/F,EAAKjZ,OACjB,MAEFue,EAAItF,EAAK0/F,GAAQ,EACjBC,GAAer6F,CACjB,OAASA,IAAM,KACfs6F,EAAc,EACd,EAAG,CACD,GAAIF,GAAU1/F,EAAKjZ,OACjB,MAEFue,EAAItF,EAAK0/F,GAAQ,EACjBE,GAAet6F,CACjB,OAASA,IAAM,KACf,IAAMu6F,EAAW7/F,EAAKjZ,OAAS24G,EAC3BI,EAASJ,EACb,GAAIE,EAAcC,EAChBH,GAAUE,UACDA,EAAcC,EAAU,CACjC1tG,GAAOjC,MAAM,0BAA0B0vG,CAAW,uBAAuBC,CAAQ,uBAAuB,EACxG,KACF,CACA,GAAIF,IAAgB,GAElB,GADoB3/F,EAAK8/F,GAAQ,IACb,IAAK,CACvB,IAAMC,EAAe7K,GAAWl1F,EAAM8/F,CAAM,EAE5C,GADAA,GAAU,EACNC,IAAiB,GAAI,CACvB,IAAMC,EAAgB5K,GAAWp1F,EAAM8/F,CAAM,EAE7C,GADAA,GAAU,EACNE,IAAkB,WAAY,CAChC,IAAMC,EAAejgG,EAAK8/F,GAAQ,EAClC,GAAIG,IAAiB,EAAG,CACtB,IAAMxH,EAAYz4F,EAAK8/F,GAAQ,EACzBI,EAAW,GAAKzH,EAChBz/D,EAAU,GAAKy/D,EACf0H,EAAannE,EAAU,EAAIknE,EAAW,EAAI,EAC1CE,EAAY,IAAIrjG,WAAWojG,CAAU,EAC3C,GAAInnE,EAAS,CACXonE,EAAU,CAAC,EAAI3H,EACf,QAAS3xG,EAAI,EAAGA,EAAIq5G,EAAYr5G,IAC9Bs5G,EAAUt5G,CAAC,EAAIkZ,EAAK8/F,GAAQ,CAEhC,CACAlC,EAAQptG,KAAK,CACX4M,KAAM6iG,EACNN,YAAAA,EACAH,IAAAA,EACAlsB,MAAO8sB,CACT,CAAC,CACH,CACF,CACF,CACF,UACST,IAAgB,GACrBC,EAAc,GAAI,CACpB,IAAMS,EAAe,CAAA,EACrB,QAASv5G,EAAI,EAAGA,EAAI,GAAIA,IAAK,CAC3B,IAAMgwF,EAAK92E,EAAK8/F,GAAQ,EAAE92G,SAAS,EAAE,EACrCq3G,EAAa7vG,KAAKsmF,EAAG/vF,QAAU,EAAI,IAAM+vF,EAAKA,CAAE,GAC5ChwF,IAAM,GAAKA,IAAM,GAAKA,IAAM,GAAKA,IAAM,IACzCu5G,EAAa7vG,KAAK,GAAG,CAEzB,CACA,IAAMzJ,EAAS64G,EAAc,GACvBU,EAAgB,IAAIvjG,WAAWhW,CAAM,EAC3C,QAASD,EAAI,EAAGA,EAAIC,EAAQD,IAC1Bw5G,EAAcx5G,CAAC,EAAIkZ,EAAK8/F,GAAQ,EAElClC,EAAQptG,KAAK,CACXmvG,YAAAA,EACAH,IAAAA,EACAe,KAAMF,EAAar4F,KAAK,EAAE,EAC1Bw4F,SAAUzT,GAAeuT,CAAa,EACtCA,cAAAA,CACF,CAAC,CACH,CAEJ,CACF,CACA,SAASb,GAAWz/F,EAAM,CACxB,IAAMjZ,EAASiZ,EAAK8yF,WACd2N,EAAe,CAAA,EACjB35G,EAAI,EACR,KAAOA,EAAIC,EAAS,GACdiZ,EAAKlZ,CAAC,IAAM,GAAKkZ,EAAKlZ,EAAI,CAAC,IAAM,GAAKkZ,EAAKlZ,EAAI,CAAC,IAAM,GACxD25G,EAAajwG,KAAK1J,EAAI,CAAC,EACvBA,GAAK,GAELA,IAGJ,GAAI25G,EAAa15G,SAAW,EAC1B,OAAOiZ,EAET,IAAM0gG,EAAY35G,EAAS05G,EAAa15G,OAClCynF,EAAU,IAAIzxE,WAAW2jG,CAAS,EACpCC,EAAc,EAClB,IAAK75G,EAAI,EAAGA,EAAI45G,EAAWC,IAAe75G,IACpC65G,IAAgBF,EAAa,CAAC,IAChCE,IACAF,EAAa94E,MAAM,GAErB6mD,EAAQ1nF,CAAC,EAAIkZ,EAAK2gG,CAAW,EAE/B,OAAOnyB,CACT,CACA,SAASoyB,GAAU5gG,EAAM,CACvB,IAAMgW,EAAWhW,EAAK,CAAC,EACnB6gG,EAAc,GACd38G,EAAQ,GACR48G,EAAY,EACZC,EAAwB,EACxBC,EAAmB,EACnBC,EAAgB,EAChBh9F,EAAK,EACLkxF,EAAS,EACb,GAAIn/E,IAAa,EAAG,CAClB,KAAOi/E,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,IAAM,MACpD0L,GAAe5L,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,EACxDA,GAAU,EAIZ,IAFA0L,GAAe5L,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,EACxDA,GAAU,EACHF,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,IAAM,MACpDjxG,GAAS+wG,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,EAClDA,GAAU,EAEZjxG,GAAS+wG,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,EAClDA,GAAU,EACV2L,EAAY1L,GAAWp1F,EAAM,EAAE,EAC/B+gG,EAAwB3L,GAAWp1F,EAAM,EAAE,EAC3CihG,EAAgB7L,GAAWp1F,EAAM,EAAE,EACnCiE,EAAKmxF,GAAWp1F,EAAM,EAAE,EACxBm1F,EAAS,EACX,SAAWn/E,IAAa,EAAG,CACzBm/E,GAAU,EACV2L,EAAY1L,GAAWp1F,EAAMm1F,CAAM,EACnCA,GAAU,EACV,IAAM+L,EAAuB9L,GAAWp1F,EAAMm1F,CAAM,EACpDA,GAAU,EACV,IAAMgM,EAAwB/L,GAAWp1F,EAAMm1F,CAAM,EAWrD,IAVAA,GAAU,EACV6L,EAAmB,GAAK,GAAKE,EAAuBC,EAC/CzZ,GAAcsZ,CAAgB,IACjCA,EAAmBniF,OAAO8oE,iBAC1Bx1F,GAAOnC,KAAK,kGAAkG,GAEhHixG,EAAgB7L,GAAWp1F,EAAMm1F,CAAM,EACvCA,GAAU,EACVlxF,EAAKmxF,GAAWp1F,EAAMm1F,CAAM,EAC5BA,GAAU,EACHF,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,IAAM,MACpD0L,GAAe5L,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,EACxDA,GAAU,EAIZ,IAFA0L,GAAe5L,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,EACxDA,GAAU,EACHF,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,IAAM,MACpDjxG,GAAS+wG,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,EAClDA,GAAU,EAEZjxG,GAAS+wG,GAAQj1F,EAAK01F,SAASP,EAAQA,EAAS,CAAC,CAAC,EAClDA,GAAU,CACZ,CACA,IAAMtkG,EAAUmP,EAAK01F,SAASP,EAAQn1F,EAAK8yF,UAAU,EACrD,MAAO,CACL+N,YAAAA,EACA38G,MAAAA,EACA48G,UAAAA,EACAE,iBAAAA,EACAD,sBAAAA,EACAE,cAAAA,EACAh9F,GAAAA,EACApT,QAAAA,CACF,CACF,CACA,SAASuwG,GAAOhkG,KAASvM,EAAS,CAChC,IAAM0sF,EAAM1sF,EAAQ9J,OAChBgH,EAAO,EACPjH,EAAIy2F,EACR,KAAOz2F,KACLiH,GAAQ8C,EAAQ/J,CAAC,EAAEgsG,WAErB,IAAMjsG,EAAS,IAAIkW,WAAWhP,CAAI,EAMlC,IALAlH,EAAO,CAAC,EAAIkH,GAAQ,GAAK,IACzBlH,EAAO,CAAC,EAAIkH,GAAQ,GAAK,IACzBlH,EAAO,CAAC,EAAIkH,GAAQ,EAAI,IACxBlH,EAAO,CAAC,EAAIkH,EAAO,IACnBlH,EAAOqD,IAAIkT,EAAM,CAAC,EACbtW,EAAI,EAAGiH,EAAO,EAAGjH,EAAIy2F,EAAKz2F,IAC7BD,EAAOqD,IAAI2G,EAAQ/J,CAAC,EAAGiH,CAAI,EAC3BA,GAAQ8C,EAAQ/J,CAAC,EAAEgsG,WAErB,OAAOjsG,CACT,CACA,SAASw6G,GAAQC,EAAUC,EAAQvhG,EAAM,CACvC,GAAIshG,EAASxO,aAAe,GAC1B,MAAM,IAAI0O,WAAW,mBAAmB,EAE1C,IAAIxrF,EACAyrF,EAEFzrF,EAAW,EACXyrF,EAAO,IAAI1kG,WAEb,IAAI2kG,EACA1rF,EAAW,GACb0rF,EAAW,IAAI3kG,WAAW,CAAC,EACvBwkG,EAAOx6G,OAAS,GAClB,IAAI46G,SAASD,EAAS3yF,MAAM,EAAE6yF,UAAU,EAAGL,EAAOx6G,OAAQ,EAAK,GAGjE26G,EAAW,IAAI3kG,WAEjB,IAAM8kG,EAAW,IAAI9kG,WAAW,CAAC,EACjC,OAAIiD,GAAQA,EAAK8yF,WAAa,GAC5B,IAAI6O,SAASE,EAAS9yF,MAAM,EAAE6yF,UAAU,EAAG5hG,EAAK8yF,WAAY,EAAK,EAE5DsO,GACL,CAAC,IAAK,IAAK,IAAK,GAAG,EACnB,IAAIrkG,WAAW,CACbiZ,EACA,EACA,EACA,CACA,CACD,EACDsrF,EAEAI,EACAD,EACAI,EACA7hG,GAAQ,IAAIjD,UACd,CACF,CACA,IAAM+kG,GAAmCA,IAChC,wBAAwBxsG,KAAK7D,UAAUD,SAAS,EAEnDuwG,GAAsB,CAC1BphE,MAAO,CACLqhE,KAAM,EACN,OAAQ,IACR,OAAQ,EACRC,KAAM,GACNC,KAAM,EACNC,KAAM,EACN,OAAQ,EACR,OAAQ,EACRC,KAAM,EACNC,KAAM,EACNC,KAAM,EACN,OAAQ,GACRC,KAAM,EACNC,KAAM,GAEN33D,KAAM,GAEN43D,KAAM,GAENC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACN,OAAQ,EACRC,KAAM,EACNh5D,KAAM,EAENi5D,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,CACR,EACAp6G,MAAO,CACLq6G,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,GACNC,KAAM,GACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,GACNC,KAAM,GACNC,KAAM,EACNC,KAAM,IACNC,KAAM,IACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACNC,KAAM,EACN,OAAQ,EACRC,KAAM,EACNC,KAAM,EACR,EACAlyG,KAAM,CACJmyG,KAAM,EACNC,KAAM,CACR,CACF,EACA,SAASC,GAAY/N,EAAOv6F,EAAM,CAChC,IAAMuoG,EAAY5D,GAAoB3kG,CAAI,EAC1C,MAAO,CAAC,CAACuoG,GAAa,CAAC,CAACA,EAAUhO,EAAM95F,MAAM,EAAG,CAAC,CAAC,CACrD,CACA,SAAS+nG,GAA8BC,EAAQzoG,EAAM+uF,EAA2B,GAAM,CACpF,MAAO,CAAC0Z,EAAOn/G,MAAM,GAAG,EAAEqnC,KAAM4pE,GAAU,CAACmO,GAA4BnO,EAAOv6F,EAAM+uF,CAAwB,CAAC,CAC/G,CACA,SAAS2Z,GAA4BnO,EAAOv6F,EAAM+uF,EAA2B,GAAM,CACjF,IAAI4Z,EACJ,IAAM3Z,EAAcF,GAAeC,CAAwB,EAC3D,OAAQ4Z,EAAuD3Z,GAAY4Z,gBAAgBC,GAAiBtO,EAAOv6F,CAAI,CAAC,IAAM,KAAO2oG,EAAwB,EAC/J,CACA,SAASE,GAAiBtO,EAAOv6F,EAAM,CACrC,MAAO,GAAGA,CAAI,eAAeu6F,CAAK,EACpC,CACA,SAASuO,GAA0BC,EAAY,CAC7C,GAAIA,EAAY,CACd,IAAMzO,EAASyO,EAAWtqD,UAAU,EAAG,CAAC,EACxC,OAAOkmD,GAAoBx4G,MAAMmuG,CAAM,CACzC,CACA,MAAO,EACT,CACA,SAAS0O,GAAkCC,EAAU,CACnD,IAAMC,EAAqBxE,GAAiC,EAC5D,OAAOuE,EAAS3/G,MAAM,GAAG,EAAEuW,OAAO,CAACyxB,EAAKgpE,IAAW,CAEjD,IAAM6O,EADgBD,GAAsB/H,GAAO7G,CAAM,EACjB,EAAIqK,GAAoBx4G,MAAMmuG,CAAM,EAC5E,OAAI6O,GACMA,EAAkB,EAAI73E,IAAQA,EAAM,EAAI,IAE1CqzE,GAAoBphE,MAAM+2D,CAAM,EAAIhpE,IAAQA,EAAM,EAAI,EAChE,EAAG,CAAC,CACN,CACA,IAAM83E,GAAyB,CAAC,EAChC,SAASC,GAA4BC,EAAgBva,EAA2B,GAAM,CACpF,GAAIqa,GAAuBE,CAAc,EACvC,OAAOF,GAAuBE,CAAc,EAE9C,IAAMC,EAAgB,CAIpB97D,KAAM,CAAC,OAAQ,OAAQ,MAAM,EAC7BV,KAAM,CAAC,OAAQ,MAAM,EAGrB,aAAc,CAAC,KAAK,CACtB,EAAEu8D,CAAc,EAChB,QAAS5/G,EAAI,EAAGA,EAAI6/G,EAAc5/G,OAAQD,IAAK,CAC7C,IAAI8/G,EACJ,GAAId,GAA4Ba,EAAc7/G,CAAC,EAAG,QAASqlG,CAAwB,EACjFqa,OAAAA,GAAuBE,CAAc,EAAIC,EAAc7/G,CAAC,EACjD6/G,EAAc7/G,CAAC,EACjB,GAAI6/G,EAAc7/G,CAAC,IAAM,QAAU8/G,EAAkB1a,GAAeC,CAAwB,IAAM,MAAQya,EAAgBZ,gBAAgB,YAAY,EAC3J,MAAO,EAEX,CACA,OAAOU,CACT,CACA,IAAMG,GAAqB,0BAC3B,SAASC,GAAuBnP,EAAOxL,EAA2B,GAAM,CACtE,OAAOwL,EAAMl1F,QAAQokG,GAAqBrkG,GAAMikG,GAA4BjkG,EAAEpJ,YAAY,EAAG+yF,CAAwB,CAAC,CACxH,CACA,SAAS4a,GAAkBC,EAAgBC,EAAe,CACxD,IAAMpB,EAAS,CAAA,EACf,GAAImB,EAAgB,CAClB,IAAME,EAAYF,EAAetgH,MAAM,GAAG,EAC1C,QAASI,EAAI,EAAGA,EAAIogH,EAAUngH,OAAQD,IAC/B4+G,GAAYwB,EAAUpgH,CAAC,EAAG,OAAO,GACpC++G,EAAOr1G,KAAK02G,EAAUpgH,CAAC,CAAC,CAG9B,CACA,OAAImgH,GACFpB,EAAOr1G,KAAKy2G,CAAa,EAEpBpB,EAAO79F,KAAK,GAAG,CACxB,CACA,SAASm/F,GAA0BC,EAAaC,EAAY,CAC1D,GAAID,IAAgBA,EAAYrgH,OAAS,GAAK,CAAC,OAAQ,OAAQ,OAAQ,OAAQ,MAAM,EAAE6W,QAAQwpG,CAAW,IAAM,MAC1GE,GAAuBF,EAAa,OAAO,GAAKE,GAAuBF,EAAa,OAAO,GAC7F,OAAOA,EAGX,GAAIC,EAAY,CACd,IAAME,EAAcF,EAAW3gH,MAAM,GAAG,EACxC,GAAI6gH,EAAYxgH,OAAS,EAAG,CAC1B,GAAIqgH,GACF,QAAStgH,EAAIygH,EAAYxgH,OAAQD,KAC/B,GAAIygH,EAAYzgH,CAAC,EAAE+0D,UAAU,EAAG,CAAC,IAAMurD,EAAYvrD,UAAU,EAAG,CAAC,EAC/D,OAAO0rD,EAAYzgH,CAAC,EAI1B,OAAOygH,EAAY,CAAC,CACtB,CACF,CACA,OAAOF,GAAcD,CACvB,CACA,SAASE,GAAuB3P,EAAOv6F,EAAM,CAC3C,OAAOsoG,GAAY/N,EAAOv6F,CAAI,GAAK0oG,GAA4BnO,EAAOv6F,CAAI,CAC5E,CACA,SAASoqG,GAAoBC,EAAa,CACxC,IAAM5B,EAAS4B,EAAY/gH,MAAM,GAAG,EACpC,QAASI,EAAI,EAAGA,EAAI++G,EAAO9+G,OAAQD,IAAK,CACtC,IAAM4gH,EAAU7B,EAAO/+G,CAAC,EAAEJ,MAAM,GAAG,EAC/BghH,EAAQ3gH,OAAS,GAAK2gH,EAAQ,CAAC,IAAM,SACvC7B,EAAO/+G,CAAC,EAAI,QAAQT,SAASqhH,EAAQ,CAAC,CAAC,EAAE1+G,SAAS,EAAE,CAAC,IAAI,MAAQ3C,SAASqhH,EAAQ,CAAC,CAAC,EAAE1+G,SAAS,EAAE,GAAG6U,MAAM,EAAE,CAAC,GAEjH,CACA,OAAOgoG,EAAO79F,KAAK,GAAG,CACxB,CACA,SAAS2/F,GAAwBxB,EAAY,CAC3C,GAAIA,EAAW9pB,WAAW,OAAO,EAAG,CAClC,IAAMurB,EAAYzB,EAAWz/G,MAAM,GAAG,EAChCmhH,EAAe,CAAC,IAAK,MAAO,KAAM,KAAM,KAAM,GAAG,EACvD,QAAS/gH,EAAI8gH,EAAU7gH,OAAQD,EAAI,GAAKA,EAAI,GAAIA,IAC9C8gH,EAAU9gH,CAAC,EAAI+gH,EAAa/gH,EAAI,CAAC,EAEnC,OAAO8gH,EAAU5/F,KAAK,GAAG,CAC3B,CACA,OAAOm+F,CACT,CACA,SAAS2B,GAA2B3b,EAA0B,CAC5D,IAAMC,EAAcF,GAAeC,CAAwB,GAAK,CAC9D6Z,gBAAiBA,IAAM,EACzB,EACA,MAAO,CACL+B,KAAM3b,EAAY4Z,gBAAgB,YAAY,EAC9Ct7D,IAAK0hD,EAAY4Z,gBAAgB,yBAAyB,EAC1DgC,IAAK5b,EAAY4Z,gBAAgB,0BAA0B,CAC7D,CACF,CACA,SAASiC,GAAqBC,EAAU,CACtC,OAAOA,EAASzlG,QAAQ,6BAA8B,IAAI,CAC5D,CACA,IAAM0lG,GAAyB,CAC7BC,UAAW,GACXC,eAAgB,CAAA,EAChBC,oBAAqB,CAAC,CACpBF,UAAW,GACXG,eAAgB,GAChBC,OAAQ,EACV,CAAC,CACH,EACA,SAASC,GAAqBv4G,EAAOm4G,EAAgB,CACnD,MAAO,CACLD,UAAW,GACXC,eAAAA,EACAC,oBAAqB,CAAC,CACpBF,UAAW,GACXI,OAAQ,GACRD,eAAgB,EAClB,CAAC,EACDr4G,MAAAA,CACF,CACF,CACA,SAASw4G,GAAsCr4G,EAAOs4G,EAAoBC,EAAmBC,EAAkBC,EAAWC,EAAiB,CACzI,IAAMtB,EAAcp3G,EAAM81G,WACpB6C,EAAc34G,EAAM44G,WAAa54G,EAAM24G,YAAc,KACrDE,EAA0DH,GAAgBE,WAC1EE,EAAwDJ,GAAgBK,SACxEC,EAAcF,EAAqB9iH,SAAS8iH,CAAkB,EAAID,EAAuB51D,IAAW,EACtGg2D,EAAgB,KACpB,GAAIN,GAAe,MAAQA,EAAYjiH,OACrC,GAAI,CACEiiH,EAAYjiH,SAAW,GAAKiiH,EAAY,CAAC,EAC3CM,EAAgBX,EAAmBriH,OAAO0iH,EAAY,CAAC,CAAC,EAAEI,SAE1DE,EAAgBN,EAAY/rG,OAAO,CAAC4vB,EAAK08E,IAAY,CACnD,GAAIA,EAAS,CACX,IAAMC,EAAkBb,EAAmBriH,OAAOijH,CAAO,EACzD,GAAI,CAACC,EACH,MAAM,IAAI13G,MAAM,qBAAqBy3G,CAAO,YAAY,EAE1D1lH,OAAOmE,KAAKwhH,EAAgBJ,QAAQ,EAAElgH,QAASjF,GAAQ,CACrD4oC,EAAI5oC,CAAG,GAAK4oC,EAAI5oC,CAAG,GAAK,GAAKulH,EAAgBJ,SAASnlH,CAAG,CAC3D,CAAC,CACH,CACA,OAAO4oC,CACT,EAAG,CACD,EAAG,CACL,CAAC,CAEL,MAAgB,CACd,MAAO,EACT,CAEF,OAAO46E,IAAgB,SACtBA,EAAY/gH,MAAM,GAAG,EAAEqnC,KAAMo4E,GAAe5H,GAAO4H,CAAU,CAAC,GAAK91G,EAAMjE,MAAQ,MAAQiE,EAAMlE,OAAS,MAAQkE,EAAMlE,OAAS,MAAQkE,EAAMjE,MAAQ,MAAQiE,EAAMo5G,UAAY3jH,KAAKwG,IAAIu8G,EAAkB,EAAE,GAAKx4G,EAAMq5G,aAAe,OAASr5G,EAAMq5G,aAAed,GAAqBv4G,EAAM0iG,QAAUjtG,KAAKwG,IAAIw8G,EAAW,GAAG,IAAM,CAAC,CAACQ,GAAiB7hB,GAAe4hB,CAAW,GAAKxlH,OAAOmE,KAAKshH,CAAa,EAAEv7E,KAAMq7E,GAAa/iH,SAAS+iH,CAAQ,EAAIC,CAAW,CACzc,CACA,SAASM,GAA4Bt5G,EAAOs4G,EAAoBiB,EAAmBC,EAAQ,CAAC,EAAG,CAC7F,IAAMpC,EAAcp3G,EAAM81G,WAC1B,GAAI,CAACsB,GAAe,CAACp3G,EAAM44G,YAAc,CAACW,EACxC,OAAOj3G,QAAQC,QAAQu1G,EAAsB,EAE/C,IAAME,EAAiB,CAAA,EACjByB,EAAkBC,GAAwB15G,CAAK,EAC/C25G,EAAaF,EAAgB/iH,OAC7BkjH,EAAkBC,GAAwB75G,EAAOs4G,EAAoBqB,EAAa,CAAC,EACnFG,EAAaF,EAAgBljH,OACnC,QAASD,EAAIkjH,GAAc,EAAIG,GAAc,EAAGrjH,KAAO,CACrD,IAAMsjH,EAAgB,CACpBhtG,KAAM,cACR,EAIA,GAHI4sG,IACFI,EAAc7gH,MAAQugH,EAAgBhjH,EAAIkjH,CAAU,GAElDG,EAAY,CACdC,EAAczpE,MAAQspE,EAAgBnjH,EAAIqjH,CAAU,EACpD,IAAME,EAAeD,EAAczpE,MAAMoyD,QACrCqX,EAAc7gH,OAAS8gH,IACzBD,EAAc7gH,MAAMwpG,SAAWsX,EAEnC,CACAhC,EAAe73G,KAAK45G,CAAa,CACnC,CACA,GAAI3C,EAAa,CACf,IAAM6C,EAAK74G,UAAUD,UACrB,GAAIi2G,EAAY/gH,MAAM,GAAG,EAAEqnC,KAAMo4E,GAAe5H,GAAO4H,CAAU,CAAC,GAAKrE,GAAiC,EACtG,OAAOnvG,QAAQC,QAAQ61G,GAAqB,IAAI32G,MAAM,yFAAyFw4G,CAAE,GAAG,EAAGjC,CAAc,CAAC,CAE1K,CACA,OAAO11G,QAAQglB,IAAI0wF,EAAe18G,IAAKy+G,GAAkB,CACvD,IAAMG,EAAkBC,GAAwBJ,CAAa,EAC7D,OAAOP,EAAMU,CAAe,IAAMV,EAAMU,CAAe,EAAIX,EAAkBa,aAAaL,CAAa,EACzG,CAAC,CAAC,EAAE53G,KAAM81G,IAAyB,CACjCF,UAAW,CAACE,EAAoBv6E,KAAMr+B,GAAS,CAACA,EAAK04G,SAAS,EAC9DC,eAAAA,EACAC,oBAAAA,CACF,EAAE,EAAEh3G,MAAOpB,IAAW,CACpBk4G,UAAW,GACXC,eAAAA,EACAC,oBAAqB,CAAA,EACrBp4G,MAAAA,CACF,EAAE,CACJ,CACA,SAAS65G,GAAwB15G,EAAO,CACtC,IAAIq6G,EACJ,IAAMjD,GAAeiD,EAAoBr6G,EAAM81G,aAAe,KAAO,OAASuE,EAAkBhkH,MAAM,GAAG,EACnGqsG,EAAU4X,GAA0Bt6G,CAAK,EACzCjE,EAAQiE,EAAMjE,OAAS,IACvBD,EAASkE,EAAMlE,QAAU,IACzB03F,EAAYxzF,EAAMo5G,WAAa,GAC/BC,EAAar5G,EAAMq5G,WAAWtwG,YAAY,EAChD,OAAOquG,EAAcA,EAAY97G,IAAKw6G,GAAe,CACnD,IAAMyE,EAAqB,CACzB1tG,YAAa+oG,GAAiB0B,GAAwBxB,CAAU,EAAG,OAAO,EAC1E/5G,MAAAA,EACAD,OAAAA,EACA4mG,QAAAA,EACAlP,UAAAA,CACF,EACA,OAAI6lB,IAAe,QACjBkB,EAAmBC,iBAAmBnB,GAEjCkB,CACT,CAAC,EAAI,CAAA,CACP,CACA,SAASV,GAAwB75G,EAAOs4G,EAAoBmC,EAAU,CACpE,IAAIC,EACJ,IAAMC,GAAeD,EAAoB16G,EAAM44G,aAAe,KAAO,OAAS8B,EAAkBrkH,MAAM,GAAG,EACnGukH,EAAkBN,GAA0Bt6G,CAAK,EACvD,OAAI26G,GAAe36G,EAAM24G,YAChB34G,EAAM24G,YAAY/rG,OAAO,CAACorG,EAAgB6C,IAAiB,CAChE,IAAIC,EACJ,IAAMt3E,EAASq3E,GAAgBC,EAAwBxC,EAAmBriH,OAAO4kH,CAAY,IAAM,KAAO,OAASC,EAAsBt3E,OAAS,KAClJ,OAAIA,EACKA,EAAO52B,OAAO,CAACmuG,EAASC,IAAe,CAC5C,GAAIA,EAAW9B,UAAY2B,EAAc,CACvC,IAAMI,EAAiBpoG,WAAWmoG,EAAWjC,UAAY,EAAE,EAC3D4B,EAAY9hH,QAAS+/G,GAAe,CAClC,IAAMsC,EAAqB,CACzBruG,YAAa+oG,GAAiBgD,EAAY,OAAO,EACjDlW,QAAS+X,EAAWU,GAAsBvC,EAAYgC,CAAe,EAAIA,CAC3E,EACIK,IACFC,EAAmBnC,SAAW,GAAKkC,GAErCF,EAAQ56G,KAAK+6G,CAAkB,CACjC,CAAC,CACH,CACA,OAAOH,CACT,EAAG/C,CAAc,EAEZA,CACT,EAAG,CAAA,CAAE,EAEA,CAAA,CACT,CACA,SAASmD,GAAsBvC,EAAYwC,EAAc,CACvD,GAAIA,GAAgB,EAClB,MAAO,GAET,IAAIpB,EAAe,MACnB,OAAIpB,IAAe,OACjBoB,EAAe,MACNpB,IAAe,SACxBoB,EAAe,MAEVvkH,KAAKgmB,IAAI2/F,EAAe,EAAGpB,CAAY,CAChD,CACA,SAASM,GAA0Bt6G,EAAO,CACxC,OAAOvK,KAAKsnB,KAAKtnB,KAAKwG,IAAI+D,EAAM0iG,QAAU,GAAK1iG,EAAMq7G,cAAc,EAAI,GAAG,EAAI,KAAO,CACvF,CACA,SAASlB,GAAwB9gD,EAAQ,CACvC,IAAIzlE,EAAM,GACJ,CACJ08C,MAAAA,EACAp3C,MAAAA,CACF,EAAImgE,EACJ,GAAIngE,EAAO,CACT,IAAMouG,EAAQsQ,GAAqB1+G,EAAM2T,WAAW,EACpDjZ,GAAO,GAAG0zG,CAAK,KAAKpuG,EAAM4C,MAAM,IAAI5C,EAAM6C,KAAK,IAAItG,KAAKsnB,KAAK7jB,EAAMs6F,SAAS,CAAC,GAAGt6F,EAAMshH,kBAAoB,IAAI,IAAI/kH,KAAKsnB,KAAK7jB,EAAMwpG,QAAU,GAAG,CAAC,EAClJ,CACA,GAAIpyD,EAAO,CACT,IAAMg3D,EAAQsQ,GAAqBtnE,EAAMzjC,WAAW,EACpDjZ,GAAO,GAAGsF,EAAQ,IAAM,EAAE,GAAGouG,CAAK,KAAKh3D,EAAMyoE,QAAQ,EACvD,CACA,OAAOnlH,CACT,CACA,IAAM0nH,GAAa,CAAC,OAAQ,SAAU,SAAU,IAAI,EACpD,SAASC,GAAY1nH,EAAO,CAC1B,OAAOynH,GAAW/tG,QAAQ1Z,CAAK,EAAI,EACrC,CACA,IAAM2nH,GAAmB,CAAC,MAAO,KAAM,KAAK,EAC5C,SAASC,GAAa5nH,EAAO,CAC3B,MAAO,CAAC,CAACA,GAAS2nH,GAAiBjuG,QAAQ1Z,CAAK,EAAI,EACtD,CACA,IAAI6nH,GAAU,CACZC,GAAI,GACJC,IAAK,MACLC,GAAI,IACN,EACA,SAASC,GAAavvE,EAAS,CAC7B,GAAM,CACJwvE,aAAAA,EACAC,kBAAAA,EACAC,IAAAA,CACF,EAAI1vE,EACE2vE,EAAuBD,EAAMF,EAAe,EAClD,OAAIA,GAAgBG,EACdF,EACKN,GAAQG,GAEVH,GAAQE,IAEVF,GAAQC,EACjB,CACA,IAAMQ,GAAN,KAAuB,CACrB59G,YAAY69G,EAAK30D,EAAM4pC,EAAM,CAC3B,KAAK+qB,IAAM,OACX,KAAK30D,KAAO,OACZ,KAAK4pC,KAAO,OACZ,KAAK+qB,IAAMA,EACX,KAAK30D,KAAOA,EACZ,KAAK4pC,KAAOA,CACd,CACAgrB,cAAcvuG,EAAK,CACjB,IAAMzV,EAAM,IAAIoN,KAAKjN,IAAIsV,CAAG,EAC5B,OAAI,KAAKsuG,MAAQ,QACf/jH,EAAII,aAAaoB,IAAI,WAAY,KAAKuiH,IAAIzjH,SAAS,CAAC,EAElD,KAAK8uD,OAAS,QAChBpvD,EAAII,aAAaoB,IAAI,YAAa,KAAK4tD,KAAK9uD,SAAS,CAAC,EAEpD,KAAK04F,MACPh5F,EAAII,aAAaoB,IAAI,YAAa,KAAKw3F,IAAI,EAEtCh5F,EAAIgJ,IACb,CACF,EACMi7G,GAAN,KAAY,CACV/9G,YAAYoR,EAAM,CAuChB,GAtCA,KAAK4sG,OAAS,OACd,KAAK3D,WAAa,OAClB,KAAKlW,QAAU,OACf,KAAKsT,SAAW,OAChB,KAAK39G,IAAM,OACX,KAAK+gH,UAAY,OACjB,KAAKt9G,OAAS,OACd,KAAK8X,GAAK,OACV,KAAK7W,KAAO,OACZ,KAAKwqG,aAAe,OACpB,KAAKuO,WAAa,OAClB,KAAK/5G,MAAQ,OACb,KAAKwwC,QAAU,OACf,KAAKiwE,cAAgB,EACrB,KAAKC,UAAY,EACjB,KAAKvd,OAAS,OACd,KAAKwd,YAAc,EACnB,KAAKC,iBAAmB,OACxB,KAAKC,gBAAkB,OACvB,KAAKC,YAAc,EACnB,KAAKC,aAAe,OACpB,KAAKC,gBAAkB,OACvB,KAAKC,OAAS,EACd,KAAK3kH,IAAM,CAACsX,EAAKtX,GAAG,EACpB,KAAKkkH,OAAS,CAAC5sG,EAAK2d,KAAK,EACzB,KAAKo1E,QAAU/yF,EAAK+yF,QAChB/yF,EAAK48B,UACP,KAAKA,QAAU58B,EAAK48B,SAEtB,KAAK34B,GAAKjE,EAAKiE,IAAM,EACrB,KAAK7W,KAAO4S,EAAK5S,KACjB,KAAKhB,MAAQ4T,EAAK5T,OAAS,EAC3B,KAAKD,OAAS6T,EAAK7T,QAAU,EAC7B,KAAKs9G,UAAYzpG,EAAK2d,MAAM2vF,cAAc,aAAc,CAAC,EACzD,KAAKJ,YAAcltG,EAAK2d,MAAM4vF,eAAe,mBAAmB,EAChE,KAAKtE,WAAajpG,EAAKipG,WACvB,KAAK9C,WAAanmG,EAAKmmG,WACvB,KAAKE,SAAW,CAACrmG,EAAKmmG,WAAYnmG,EAAKipG,UAAU,EAAElxF,OAAQ1S,GAAM,CAAC,CAACA,CAAC,EAAE1Z,IAAK4W,GAAMA,EAAEs5C,UAAU,EAAG,CAAC,CAAC,EAAE7zC,KAAK,GAAG,EACxG,iBAAkBhI,EAAM,CAC1B,IAAIwtG,EACJ,KAAK5V,aAAe53F,EAAK43F,aACzB,IAAM6V,GAAqBD,EAAqBxtG,EAAK43F,eAAiB,KAAO,OAAS4V,EAAmBrH,WACrGsH,GAAqBA,IAAsBztG,EAAKmmG,aAClD,KAAKE,UAAY,IAAIoH,EAAkB5xD,UAAU,EAAG,CAAC,CAAC,GAE1D,CACA,KAAK6xD,WAAW,QAAS1tG,EAAK2d,MAAM4qE,KAAK,EACzC,KAAKmlB,WAAW,OAAQ1tG,EAAK2d,MAAMgwF,SAAS,CAC9C,CACA,IAAIC,YAAa,CACf,OAAO9nH,KAAKwG,IAAI,KAAKygH,YAAa,KAAKha,OAAO,CAChD,CACA,IAAI2Y,gBAAiB,CACnB,OAAO,KAAKwB,aAAe,KAAKH,aAAe,KAAKha,OACtD,CACA,IAAIp1E,OAAQ,CACV,OAAO,KAAKivF,OAAO,CAAC,CACtB,CACA,IAAI/G,QAAS,CACX,OAAO,KAAKloF,MAAMkwF,QAAU,EAC9B,CACA,IAAIC,WAAY,CACd,OAAO,KAAKnwF,MAAM,YAAY,GAAK,GACrC,CACA,IAAI+rF,YAAa,CACf,OAAO,KAAK/rF,MAAM,aAAa,GAAK,KACtC,CACA,IAAIowF,OAAQ,CACV,OAAO,KAAKpwF,MAAM2vF,cAAc,QAAS,CAAC,CAC5C,CACA,IAAInvG,KAAM,CACR,OAAO,KAAKzV,IAAI,CAAC,GAAK,EACxB,CACAslH,cAAczE,EAAS,CACrB,OAAO0E,GAAS,KAAKd,aAAc5D,CAAO,CAC5C,CACA2E,iBAAiB3E,EAAS,CACxB,OAAO0E,GAAS,KAAKb,gBAAiB7D,CAAO,CAC/C,CACA,IAAIP,aAAc,CAChB,OAAO,KAAKmE,YACd,CACA,IAAIgB,gBAAiB,CACnB,OAAO,KAAKf,eACd,CACAM,WAAWtwG,EAAMmsG,EAAS,CACxB,GAAKA,GAGL,GAAInsG,IAAS,QAAS,CACpB,IAAI4rG,EAAc,KAAKmE,aAClBnE,IACHA,EAAc,KAAKmE,aAAe,CAAA,GAEhCnE,EAAYprG,QAAQ2rG,CAAO,IAAM,IACnCP,EAAYx4G,KAAK+4G,CAAO,CAE5B,SAAWnsG,IAAS,OAAQ,CAC1B,IAAI+wG,EAAiB,KAAKf,gBACrBe,IACHA,EAAiB,KAAKf,gBAAkB,CAAA,GAEtCe,EAAevwG,QAAQ2rG,CAAO,IAAM,IACtC4E,EAAe39G,KAAK+4G,CAAO,CAE/B,EACF,CAEA,IAAI1W,OAAQ,CACV,MAAO,EACT,CACA,IAAIA,MAAM3uG,EAAO,CACjB,CACA,IAAIkqH,eAAgB,CAClB,OAAO,KAAKpF,YAAc,CAAC,KAAKkC,YAAY,EAAI,MAClD,CACA,IAAImD,cAAe,CACjB,OAAO,KAAKF,eAAiB,CAAC,KAAKG,WAAW,EAAI,MACpD,CACA,IAAIpD,cAAe,CACjB,IAAIqD,EACJ,OAAQA,EAAoB,KAAKvF,cAAgB,KAAO,OAASuF,EAAkB,CAAC,CACtF,CACA,IAAID,aAAc,CAChB,IAAIE,EACJ,OAAQA,EAAuB,KAAKL,iBAAmB,KAAO,OAASK,EAAqB,CAAC,CAC/F,CACAC,aAAc,CACd,CACF,EACA,SAASR,GAAS3nH,EAAQijH,EAAS,CACjC,MAAI,CAACA,GAAW,CAACjjH,EACR,GAEFA,EAAOsX,QAAQ2rG,CAAO,IAAM,EACrC,CACA,SAASmF,IAAiB,CACxB,GAAI,OAAOC,YAAe,WAAY,CACpC,IAAMC,EAAiBD,WAAW,uBAAuB,EACnDE,EAAWF,WAAW,WAAW,EACvC,GAAIC,EAAenuC,QAAUouC,EAASpuC,MACpC,OAAOmuC,EAAe1oH,UAAY,EAEtC,CACA,MAAO,EACT,CACA,SAAS4oH,GAAyBlG,EAAmBmG,EAAiB,CACpE,IAAIC,EAAY,GACZC,EAAqB,CAAA,EAKzB,GAJIrG,IACFoG,EAAYpG,IAAsB,MAClCqG,EAAqB,CAACrG,CAAiB,GAErCmG,EAAiB,CACnBE,EAAqBF,EAAgBE,oBAAsBpD,GAAiBhuG,MAAM,CAAC,EACnF,IAAMqxG,EAAqBD,EAAmBjnG,KAAK,EAAE,IAAM,OAAS,CAAC+mG,EAAgB5I,WACrF6I,EAAYD,EAAgBC,YAAc,OAASD,EAAgBC,UAAYE,GAAsBR,GAAe,EAC/GM,IACHC,EAAqB,CAAC,KAAK,EAE/B,CACA,MAAO,CACLD,UAAAA,EACAC,mBAAAA,CACF,CACF,CACA,IAAME,GAA4BC,GAAa,CAC7C,IAAMC,EAAwB,IAAIC,QAClC,MAAO,CAAC9qB,EAAGtgG,IAAU,CAInB,GAHIkrH,IACFlrH,EAAQkrH,EAAS5qB,EAAGtgG,CAAK,GAEvB,OAAOA,GAAU,UAAYA,IAAU,KAAM,CAC/C,GAAImrH,EAAM7mH,IAAItE,CAAK,EACjB,OAEFmrH,EAAMt6G,IAAI7Q,CAAK,CACjB,CACA,OAAOA,CACT,CACF,EACMmN,GAAYA,CAACtJ,EAAQqnH,IAAah+G,KAAKC,UAAUtJ,EAAQonH,GAAyBC,CAAQ,CAAC,EACjG,SAASG,GAAkBC,EAAY5G,EAAmBE,EAAWC,EAAiBgG,EAAiB,CACrG,IAAMU,EAAY5rH,OAAOmE,KAAKwnH,CAAU,EAClCrG,EAAwDJ,GAAgBK,SACxEF,EAA0DH,GAAgBE,WAC1EyG,EAA0DX,GAAgB5I,WAC1EwJ,EAAexG,GAAsB9iH,SAAS8iH,CAAkB,IAAM,EACxEyG,EAAY,GACZC,EAAuB,GACvBC,EAAYx8D,IACZy8D,EAAez8D,IACf08D,EAAa18D,IACb28D,EAAW38D,IACX48D,EAAgB,EAChBC,EAAc,CAAA,EACZ,CACJnB,UAAAA,EACAC,mBAAAA,CACF,EAAIH,GAAyBlG,EAAmBmG,CAAe,EAC/D,QAASjoH,EAAI2oH,EAAU1oH,OAAQD,KAAO,CACpC,IAAMspH,EAAOZ,EAAWC,EAAU3oH,CAAC,CAAC,EACpC8oH,IAAcA,EAAYQ,EAAKhH,SAAS,CAAC,EAAI,GAC7C0G,EAAYhqH,KAAKgmB,IAAIgkG,EAAWM,EAAKN,SAAS,EAC9CC,EAAejqH,KAAKgmB,IAAIikG,EAAcK,EAAKL,YAAY,EACvDC,EAAalqH,KAAKgmB,IAAIkkG,EAAYI,EAAKJ,UAAU,EACrBf,EAAmBl3F,OAAQs4F,GAAUD,EAAKD,YAAYE,CAAK,EAAI,CAAC,EACpEtpH,OAAS,IAC/B8oH,EAAuB,GAE3B,CACAC,EAAYroB,GAAeqoB,CAAS,EAAIA,EAAY,EACpDC,EAAetoB,GAAesoB,CAAY,EAAIA,EAAe,EAC7D,IAAMO,EAAYxqH,KAAKwG,IAAI,KAAMwjH,CAAS,EACpCS,EAAezqH,KAAKwG,IAAI,GAAIyjH,CAAY,EAC9CC,EAAavoB,GAAeuoB,CAAU,EAAIA,EAAalH,EACvDA,EAAYhjH,KAAKwG,IAAI0jH,EAAYlH,CAAS,EACrC+G,IACHjH,EAAoB,QAEtB,IAAM4H,EAAkBf,EAAU1oH,OAAS,EAyD3C,MAAO,CACLs/G,SAzDeoJ,EAAUxyG,OAAO,CAACs8B,EAAUk3E,IAAc,CACzD,IAAMC,EAAgBlB,EAAWiB,CAAS,EAC1C,GAAIA,IAAcl3E,EAChB,OAAOA,EAGT,GADA42E,EAAcN,EAAuBZ,EAAmBl3F,OAAQs4F,GAAUK,EAAcP,YAAYE,CAAK,EAAI,CAAC,EAAI,CAAA,EAC9GG,EAAiB,CACnB,GAAIE,EAAcV,WAAalH,EAC7B6H,OAAAA,GAA8BF,EAAW,kBAAkBC,EAAcV,UAAU,0BAA0BlH,CAAS,EAAE,EACjHvvE,EAET,GAAI,CAACm3E,EAAcE,gBACjBD,OAAAA,GAA8BF,EAAW,uDAAuD,EACzFl3E,EAET,GAAI2vE,GAAwBuH,EAAU7yG,QAAQsrG,EAAqBrtD,UAAU,EAAG,CAAC,CAAC,EAAI,IAAM,EAC1F80D,OAAAA,GAA8BF,EAAW,2BAA2BvH,CAAoB,aAAa,EAC9F3vE,EAET,GAAI4vE,GAAsB,CAACwG,GACzB,GAAI,CAACe,EAActH,SAASD,CAAkB,EAC5CwH,OAAAA,GAA8BF,EAAW,sBAAsBtH,CAAkB,2CAA2CtlH,OAAOmE,KAAK0oH,EAActH,QAAQ,CAAC,GAAG,EAC3J7vE,WAEC,CAAC2vE,GAAwByG,IAAiBC,GAAac,EAActH,SAAS,CAAG,IAAM,EACjGuH,OAAAA,GAA8BF,EAAW,uCAAuC,EACzEl3E,EAET,GAAIm3E,EAAcZ,UAAYQ,EAC5BK,OAAAA,GAA8BF,EAAW,qBAAqBC,EAAcZ,SAAS,iBAAiBQ,CAAS,EAAE,EAC1G/2E,EAET,GAAIm3E,EAAcX,aAAeQ,EAC/BI,OAAAA,GAA8BF,EAAW,oBAAoBC,EAAcX,YAAY,iBAAiBQ,CAAY,EAAE,EAC/Gh3E,EAET,GAAI,CAAC42E,EAAYpiF,KAAMsiF,GAAUK,EAAcP,YAAYE,CAAK,EAAI,CAAC,EACnEM,OAAAA,GAA8BF,EAAW,mCAAmCp/G,GAAU8+G,CAAW,CAAC,QAAQ,EACnG52E,EAET,GAAIm2E,GAAwBe,EAAU7yG,QAAQ8xG,EAAqB7zD,UAAU,EAAG,CAAC,CAAC,EAAI,IAAM,EAC1F80D,OAAAA,GAA8BF,EAAW,2BAA2Bf,CAAoB,aAAa,EAC9Fn2E,EAET,GAAIm3E,EAAcG,SAAWX,EAC3BS,OAAAA,GAA8BF,EAAW,gBAAgBC,EAAcG,QAAQ,sBAAsBX,CAAa,EAAE,EAC7G32E,CAEX,CACA,OAAIA,IAAa6sE,GAAkCqK,CAAS,GAAKrK,GAAkC7sE,CAAQ,GAAKm3E,EAAc7D,cAAgB2C,EAAWj2E,CAAQ,EAAEszE,eAC1JtzE,GAET02E,EAAWS,EAAcT,SACzBC,EAAgBQ,EAAcG,SACvBJ,EACT,EAAG,MAAM,EAGPN,YAAAA,EACAnB,UAAAA,EACAe,aAAAA,EACAC,WAAAA,EACAC,SAAAA,CACF,CACF,CACA,SAASU,GAA8BG,EAAS/+E,EAAQ,CACtD5/B,GAAOpC,IAAI,gCAAgC+gH,CAAO,qBAAqB/+E,CAAM,EAAE,CACjF,CACA,SAASg/E,GAAsBC,EAAgB,CAC7C,OAAOA,EAAe/zG,OAAO,CAAC0rG,EAAoB3/F,IAAU,CAC1D,IAAIioG,EAAatI,EAAmBriH,OAAO0iB,EAAMugG,OAAO,EACnD0H,IACHA,EAAatI,EAAmBriH,OAAO0iB,EAAMugG,OAAO,EAAI,CACtD11E,OAAQ,CAAA,EACRu1E,SAAU,CACR,EAAG,CACL,EACA8H,WAAY,GACZC,cAAe,EACjB,GAEFF,EAAWp9E,OAAOrjC,KAAKwY,CAAK,EAC5B,IAAMooG,EAAcpoG,EAAMogG,UAAY,IACtC6H,OAAAA,EAAW7H,SAASgI,CAAW,GAAKH,EAAW7H,SAASgI,CAAW,GAAK,GAAK,EAC7EH,EAAWC,WAAaD,EAAWC,YAAcloG,EAAM3S,QACvD46G,EAAWE,cAAgBF,EAAWE,eAAiBnoG,EAAMqoG,WACzDJ,EAAWC,aACbvI,EAAmBiI,gBAAkB,IAEnCK,EAAWE,gBACbxI,EAAmB2I,mBAAqB,IAEnC3I,CACT,EAAG,CACDiI,gBAAiB,GACjBU,mBAAoB,GACpBhrH,OAAQ,CAAC,CACX,CAAC,CACH,CACA,SAASirH,GAAcr6F,EAAQyxF,EAAoB6I,EAAcC,EAAc,CAC7E,OAAOv6F,EAAOrZ,MAAM2zG,EAAcC,EAAe,CAAC,EAAEx0G,OAAO,CAACy0G,EAAOrhH,EAAOsN,IAAU,CAClF,GAAI,CAACtN,EAAMg2G,SACT,OAAOqL,EAET,IAAM1I,EAAc34G,EAAM24G,YACtBoH,EAAOsB,EAAMrhH,EAAMg2G,QAAQ,EAC1B+J,IACHsB,EAAMrhH,EAAMg2G,QAAQ,EAAI+J,EAAO,CAC7BJ,WAAY18D,IACZw8D,UAAWx8D,IACXy8D,aAAcz8D,IACd28D,SAAUtyG,EACVkzG,SAAU,EACVV,YAAa,CACXwB,IAAK,CACP,EACAvI,SAAU,CACR,EAAK,CACP,EACAwH,gBAAiB,CAAC5H,EAClB6D,cAAe,CACjB,GAEFuD,EAAKJ,WAAalqH,KAAKgmB,IAAIskG,EAAKJ,WAAY3/G,EAAM0iG,OAAO,EACzD,IAAM6e,EAAsB9rH,KAAKgmB,IAAIzb,EAAMlE,OAAQkE,EAAMjE,KAAK,EAC9DgkH,OAAAA,EAAKN,UAAYhqH,KAAKgmB,IAAIskG,EAAKN,UAAW8B,CAAmB,EAC7DxB,EAAKL,aAAejqH,KAAKgmB,IAAIskG,EAAKL,aAAc1/G,EAAMo5G,SAAS,EAC/D2G,EAAKH,SAAWnqH,KAAKgmB,IAAIskG,EAAKH,SAAUtyG,CAAK,EAC7CyyG,EAAKS,SAAW/qH,KAAKwG,IAAI8jH,EAAKS,SAAUxgH,EAAM09G,KAAK,EACnDqC,EAAKvD,eAAiBx8G,EAAMw8G,cAC5BuD,EAAKD,YAAY9/G,EAAMq5G,UAAU,GAAK0G,EAAKD,YAAY9/G,EAAMq5G,UAAU,GAAK,GAAK,EAC7EV,GACFA,EAAY9/G,QAASgiH,GAAiB,CACpC,GAAI,CAACA,EACH,OAEF,IAAM2G,EAAalJ,EAAmBriH,OAAO4kH,CAAY,EACpD2G,IAGLzB,EAAKQ,gBAAkBR,EAAKQ,iBAAmBjI,EAAmBiI,gBAAkBiB,EAAWX,WAAaW,EAAWV,eAAiB,CAACxI,EAAmBiI,iBAAmB,CAACjI,EAAmB2I,mBACnMztH,OAAOmE,KAAK6pH,EAAWzI,QAAQ,EAAElgH,QAASkgH,GAAa,CACrDgH,EAAKhH,SAASA,CAAQ,GAAKgH,EAAKhH,SAASA,CAAQ,GAAK,GAAKyI,EAAWzI,SAASA,CAAQ,CACzF,CAAC,EACH,CAAC,EAEIsI,CACT,EAAG,CAAC,CAAC,CACP,CACA,SAASI,GAAwBC,EAAQ,CACvC,GAAI,CAACA,EACH,OAAOA,EAET,GAAM,CACJrsG,KAAAA,EACAssG,UAAAA,EACAC,gBAAAA,EACA7I,SAAAA,EACAH,WAAAA,CACF,EAAI8I,EACJ,MAAO,CACLrsG,KAAAA,EACAssG,UAAAA,EACAC,gBAAAA,EACA7I,SAAAA,EACAH,WAAAA,CACF,CACF,CACA,SAASiJ,GAAmBH,EAAQl+E,EAAQs+E,EAAgB,CAC1D,GAAI,UAAWJ,EAAQ,CACrB,IAAMp0G,EAAQk2B,EAAOj2B,QAAQm0G,CAAM,EACnC,GAAIp0G,IAAU,GACZ,OAAOA,CAEX,CACA,QAAS7W,EAAI,EAAGA,EAAI+sC,EAAO9sC,OAAQD,IAAK,CACtC,IAAMkiB,EAAQ6qB,EAAO/sC,CAAC,EACtB,GAAIsrH,GAAcL,EAAQ/oG,EAAOmpG,CAAc,EAC7C,OAAOrrH,CAEX,CACA,MAAO,EACT,CACA,SAASsrH,GAAcL,EAAQ/oG,EAAOmpG,EAAgB,CACpD,GAAM,CACJ5I,QAAAA,EACAn8G,KAAAA,EACAsY,KAAAA,EACAssG,UAAAA,EACA37G,QAASg8G,CACX,EAAIN,EACEO,EAASP,EAAOO,OACtB,OAAQ/I,IAAY,QAAUvgG,EAAMugG,UAAYA,KAAan8G,IAAS,QAAU4b,EAAM5b,OAASA,KAAUsY,IAAS,QAAU6sG,GAAe7sG,EAAMsD,EAAMtD,IAAI,KAAOA,IAAS,QAAUsD,EAAMgpG,YAAcA,KAAeK,IAAc,QAAUrpG,EAAM3S,UAAYg8G,KAAeC,IAAW,QAAUtpG,EAAMspG,SAAWA,KAAY,EAAE,oBAAqBP,IAAWS,GAAqBT,EAAOE,iBAAmB,GAAIjpG,EAAMipG,eAAe,KAAOE,IAAmB,QAAUA,EAAeJ,EAAQ/oG,CAAK,EAC/e,CACA,SAASupG,GAAeE,EAAWC,EAAY,KAAM,CACnD,OAAID,EAAU1rH,SAAW2rH,EAAU3rH,OAC1B0rH,IAAcC,EAEhBD,EAAUp2B,WAAWq2B,CAAS,GAAKA,EAAUr2B,WAAWo2B,CAAS,CAC1E,CACA,SAASD,GAAqBG,EAAkBC,EAAmB,GAAI,CACrE,IAAMC,EAAOF,EAAiBjsH,MAAM,GAAG,EACjCosH,EAAOF,EAAiBlsH,MAAM,GAAG,EACvC,OAAOmsH,EAAK9rH,SAAW+rH,EAAK/rH,QAAU,CAAC8rH,EAAK9kF,KAAMv6B,GAAOs/G,EAAKl1G,QAAQpK,CAAE,IAAM,EAAE,CAClF,CACA,SAASu/G,GAAoBhB,EAAQ/oG,EAAO,CAC1C,GAAM,CACJigG,WAAAA,EACAG,SAAAA,CACF,EAAI2I,EACJ,OAAQ9I,IAAe,SAAWjgG,EAAMigG,YAAc,IAAIptD,UAAU,EAAG,CAAC,IAAMotD,EAAWptD,UAAU,EAAG,CAAC,KAAOutD,IAAa,QAAUA,KAAcpgG,EAAMogG,UAAY,KACvK,CACA,SAAS4J,GAA+BjB,EAAQ76F,EAAQ85F,EAAgB1vB,EAAa6wB,EAAgB,CACnG,IAAMc,EAAe/7F,EAAOoqE,CAAW,EAOjC4xB,EANWh8F,EAAOja,OAAO,CAACk2G,EAAY9iH,EAAOsN,IAAU,CAC3D,IAAMQ,EAAM9N,EAAM8N,IAElBi1G,OADoBD,EAAWh1G,CAAG,IAAMg1G,EAAWh1G,CAAG,EAAI,CAAA,IAC9C3N,KAAKmN,CAAK,EACfw1G,CACT,EAAG,CAAC,CAAC,EACuBF,EAAa90G,GAAG,EACxC+0G,EAAWnsH,OAAS,IACtBu6F,EAAcx7F,KAAKwG,IAAIoK,MAAM5Q,KAAMotH,CAAU,GAE/C,IAAMtK,EAAoBqK,EAAavJ,WACjCb,EAAmBoK,EAAaxJ,UAChC4J,EAAoBJ,EAAa5M,SAASxqD,UAAU,EAAG,CAAC,EACxDy3D,EAAgBC,GAAoBr8F,EAAQoqE,EAAcjxF,GAAU,CACxE,GAAIA,EAAMq5G,aAAed,GAAqBv4G,EAAMo5G,YAAcZ,GAAoBx4G,EAAMg2G,SAASxqD,UAAU,EAAG,CAAC,IAAMw3D,EACvH,MAAO,GAET,IAAMrK,EAAc34G,EAAM24G,YACpBn1E,EAASm9E,EAAej5F,OAAQ/O,GAAU,CAACggG,GAAeA,EAAYprG,QAAQoL,EAAMugG,OAAO,IAAM,EAAE,EACzG,OAAO2I,GAAmBH,EAAQl+E,EAAQs+E,CAAc,EAAI,EAC9D,CAAC,EACD,OAAImB,EAAgB,GACXA,EAEFC,GAAoBr8F,EAAQoqE,EAAcjxF,GAAU,CACzD,IAAM24G,EAAc34G,EAAM24G,YACpBn1E,EAASm9E,EAAej5F,OAAQ/O,GAAU,CAACggG,GAAeA,EAAYprG,QAAQoL,EAAMugG,OAAO,IAAM,EAAE,EACzG,OAAO2I,GAAmBH,EAAQl+E,EAAQs+E,CAAc,EAAI,EAC9D,CAAC,CACH,CACA,SAASoB,GAAoBC,EAAKlyB,EAAankE,EAAW,CACxD,QAASr2B,EAAIw6F,EAAax6F,EAAI,GAAIA,IAChC,GAAIq2B,EAAUq2F,EAAI1sH,CAAC,CAAC,EAClB,OAAOA,EAGX,QAASA,EAAIw6F,EAAc,EAAGx6F,EAAI0sH,EAAIzsH,OAAQD,IAC5C,GAAIq2B,EAAUq2F,EAAI1sH,CAAC,CAAC,EAClB,OAAOA,EAGX,MAAO,EACT,CACA,SAAS2sH,GAAkBC,EAAeC,EAAK,CAC7C,IAAIC,EACJ,MAAO,CAAC,CAACF,GAAiBA,MAAoBE,EAAoBD,EAAIE,eAAiB,KAAO,OAASD,EAAkBz1G,IAC3H,CACA,IAAM21G,GAAN,cAA4BxoB,EAAQ,CAClC18F,YAAYmlH,EAAM,CAChB,MAAM,MAAOA,EAAK5hH,MAAM,EACxB,KAAKwhH,IAAM,OACX,KAAKK,iBAAmB,EACxB,KAAKC,oBAAsB,GAC3B,KAAKC,eAAiB,GACtB,KAAKC,eAAiB,GACtB,KAAKC,iBAAmB,GACxB,KAAKzL,mBAAqB,KAC1B,KAAK6G,WAAa,KAClB,KAAK6E,MAAQ,GACb,KAAKC,YAAc,KACnB,KAAKC,YAAc,KACnB,KAAKC,iBAAmB,EACxB,KAAKC,eAAiB,GACtB,KAAKC,eAAiB,CAAC,EACvB,KAAKC,YAAc,OACnB,KAAKC,mBAAsBC,GAAgB,CACzC,IAAIrjF,EACJ,GAAM,CACJ8iF,YAAajjB,EACbkjB,YAAaz8D,EACb67D,IAAAA,CACF,EAAI,KACE,CACJmB,iBAAAA,EACAr0C,MAAAA,CACF,EAAIkzC,EACJ,GAAI,CAACtiB,GAAQ,CAAC5wB,EACZ,OAEF,IAAM36C,EAAOhE,YAAYC,IAAI,EACvBmvE,EAAQp5C,EAAOA,EAAKo5C,MAAQG,EAAKH,MACjCl+D,EAAW8kB,EAAOA,EAAK9kB,SAAWq+D,EAAKr+D,SACvC+hF,EAAcjvF,EAAOorE,EAAMvB,QAAQjrF,MACnC8sG,EAAemC,EAAInC,aACnBwD,EAAsB3jB,EAAKhhG,MAC3B4kH,EAAmB,KAAKd,eAC9B,GAAIjjB,EAAMzxF,SAAWyxF,EAAM3B,QAAU2B,EAAM3B,SAAW2B,EAAM1B,OAASwlB,GAAuBxD,EAAc,CACxG,KAAK0D,WAAW,EAChB,KAAKf,eAAiB,GACtB,MACF,CACA,GAAI,CAACW,EACH,OAEF,IAAMK,EAAqBF,EAAmB,IAAMA,IAAqBD,EACnEI,EAAc,CAAC,CAACP,GAAeM,EACrC,GAAI,CAACC,IAAgB30C,EAAM9qC,QAAU,CAAC8qC,EAAM9Z,cAAgB,CAAC8Z,EAAM3hE,YACjE,OAEF,IAAMu2G,EAAa1B,EAAI2B,sBACvB,GAAI,CAACF,GAAeC,IAAe,KACjC,OAEF,IAAME,EAAe,KAAKZ,YAAYhqB,gBAAgB,EAChDhkC,EAAe7gE,KAAKqnB,IAAIszD,EAAM9Z,YAAY,EAChD,GAAIouD,GAAejvH,KAAKwG,IAAIipH,EAAc,KAAOviF,GAAY2zB,EAAe,GAAG,EAC7E,OAEF,IAAM6uD,EAAwBH,EAAaA,EAAW93B,IAAM52B,EAAe,EACrE8jC,EAAOyG,EAAMvB,QAAQC,MAAQsB,EAAMvB,QAAQC,MAAQsB,EAAMvB,QAAQjrF,MAAQ,GACzE+wG,EAAkBvkB,EAAM3B,QAAU9E,EAAO,GACzCiF,EAAa,KAAKgmB,cAAc,EAChCx+F,EAASy8F,EAAIz8F,OACb7mB,EAAQ6mB,EAAO89F,CAAmB,EAClCW,EAAc7vH,KAAKwG,IAAI4kG,EAAM3B,OAAQzpG,KAAK+B,MAAMmrC,GAAYq+D,EAAK0B,SAAW1iG,EAAMq7G,gBAAkB,CAAC,CAAC,EACxGkK,EAAgBH,EAAkBV,EAActqB,EAAOsqB,EACvDa,EAAgB,GAAKH,IACvBG,EAAgB9vH,KAAKgmB,IAAIipG,EAAa7jB,EAAM3B,OAAS,EAAIG,CAAU,GAErE,IAAMmmB,GAAWJ,EAAkBvkB,EAAM3B,OAAS,IAAMqmB,EAAgB,EAClEE,GAAcP,EAAe,IAC7BQ,GAAkBF,IAAYF,EAAczkB,EAAM3B,QAAUsmB,GAAWF,EAAc,EAAIjmB,EAAaomB,GAC5G,GAAIC,IAAmBP,EACrB,OAEF,IAAMQ,GAAMH,GAAWA,GAAW,EAAInmB,EAChCumB,KAASzkF,EAAuCqjF,GAAYj4E,SAAY,KAAK+2E,IAAIuC,qBAAuB,KAAO,OAAS1kF,EAAKykF,QAAU,GACvIE,EAAuB,KAAKxC,IAAIjqD,OAAOysD,qBACzCC,GAA2Bv3F,OAAOw3F,kBAClCC,GACJ,IAAKA,GAAgBtB,EAAsB,EAAGsB,GAAgB9E,EAAc8E,KAAiB,CAC3F,IAAMC,GAAmBr/F,EAAOo/F,EAAa,EAAE1I,WACzC4I,GAAoB,CAACt/F,EAAOo/F,EAAa,EAAE15E,SAAWq5E,GAE5D,GADAG,GAA2B,KAAKK,kBAAkBX,GAAaE,GAAKhjF,EAAWujF,GAAkBC,EAAiB,EAC9GJ,GAA2BtwH,KAAKgmB,IAAI0pG,EAAuBxiF,EAAW8iF,EAAW,EACnF,KAEJ,CAIA,GAHIM,IAA4BL,IAG5BK,GAA2BpjF,EAAW,GACxC,OAEEyiF,EACF,KAAKd,YAAY1rB,OAAO8rB,EAAcjvH,KAAKgmB,IAAIypG,EAAc9qB,CAAI,EAAGyG,EAAM3B,MAAM,EAEhF,KAAKolB,YAAYnqB,WAAWuqB,CAAW,EAEzC,IAAM2B,GAAuBx/F,EAAOo/F,EAAa,EAAE1I,WAC/C,KAAK8H,cAAc,EAAIS,EAAuBO,IAChD,KAAKC,eAAeD,EAAoB,EAE1C,IAAME,EAAkB,KAAKC,cAAcH,GAAsBlF,EAAc8E,GAAe,EAAGd,EAAuB,EAAG,CAAC,EACxHoB,EAAkB,KACpBN,GAAgBM,GAElB,KAAK5mH,KAAK,YAAYqhG,EAAKC,EAAE,GAAGx5C,EAAO,SAAWA,EAAKn6C,MAAQ,EAAE,aAAaq3G,CAAmB;2BAC5E3jB,EAAKr+D,SAAS99B,QAAQ,CAAC,CAAC;6BACtBsgH,EAAsBtgH,QAAQ,CAAC,CAAC;kDACX6gH,GAAgB7gH,QAAQ,CAAC,CAAC;sDACtBkhH,GAAyBlhH,QAAQ,CAAC,CAAC;uBAClEu1F,EAAO,CAAC;6BACFhD,GAAeiI,CAAU,EAAIA,EAAa,EAAI,SAAS;yBAC3D,KAAKgmB,cAAc,EAAI,CAAC;2BACtBY,EAAa,MAAMI,GAAuB,CAAC,MAAM,EACtE/C,EAAI2C,cAAgB3C,EAAImD,cAAgBR,GACxC,KAAKpB,WAAW,EAChB,IAAM6B,GAAiBA,IAAM,CAE3B,GADA,KAAK7B,WAAW,EACZ,KAAKZ,cAAgBjjB,GAAQ,KAAKsiB,IAAIqD,YAAcV,IAAiBA,GAAgB,EAAG,CAC1F,IAAMW,GAAyB,KAAKC,mBAAmB,EAMvD,GALA,KAAKlnH,KAAK,6BAA6BsmH,GAAgB,EAAI,qBAAuB,EAAE;2BACnEjlB,EAAKr+D,SAAS99B,QAAQ,CAAC,CAAC;6BACtB+hH,GAAuB/hH,QAAQ,CAAC,CAAC,IAAI,EACxDm8F,EAAKyC,cAAc,EACnB,KAAKwgB,YAAc,KAAKC,YAAc,KAClC+B,GAAgB9E,EAAc,CAChC,IAAI2F,GAAoB,KAAKN,cAAc,KAAKlD,IAAIz8F,OAAOs6F,CAAY,EAAEze,QAASye,EAAc8E,GAAe,EAAGW,GAAwB,EAAG,CAAC,EAC1IE,KAAsB,KACxBA,GAAoB3F,GAEtB,KAAKmC,IAAI2C,cAAgB,KAAK3C,IAAImD,cAAgBK,GAClD,KAAKR,eAAe,KAAKhD,IAAIz8F,OAAOigG,EAAiB,EAAEpkB,OAAO,CAChE,CACF,CACF,EACIoiB,GAAsBY,GAAkBK,GAA2B,EACrEW,GAAe,EAEf,KAAK1C,MAAQv+G,KAAK46B,YAAYqmF,GAAgBX,GAA2B,GAAG,EAE9EzC,EAAI7uF,QAAQqwC,EAAOiiD,4BAA6B,CAC9C/lB,KAAAA,EACAv5C,KAAAA,EACAo5C,MAAAA,CACF,CAAC,CACH,EACA,KAAKyiB,IAAMI,EACX,KAAKY,YAAc,KAAK0C,cAAc,EACtC,KAAKC,kBAAkB,CACzB,CACAX,eAAeY,EAAwB,CACjCA,IACF,KAAKxnH,IAAI,0BAA0BwnH,CAAsB,EAAE,EAC3D,KAAK5D,IAAIjqD,OAAO6tD,uBAAyBA,GAE3C,KAAKrD,eAAiB,GACtB,KAAKS,YAAc,KAAK0C,cAAc,CACxC,CACAA,eAAgB,CACd,IAAM3tD,EAAS,KAAKiqD,IAAIjqD,OACxB,OAAO,IAAI6/B,GAAuB7/B,EAAO8tD,eAAgB9tD,EAAO+tD,eAAgB/tD,EAAO6tD,sBAAsB,CAC/G,CACAD,mBAAoB,CAClB,GAAM,CACJ3D,IAAAA,CACF,EAAI,KACJA,EAAInvF,GAAG2wC,EAAOuiD,iBAAkB,KAAKC,kBAAmB,IAAI,EAC5DhE,EAAInvF,GAAG2wC,EAAOyiD,aAAc,KAAKC,cAAe,IAAI,EACpDlE,EAAInvF,GAAG2wC,EAAO2iD,YAAa,KAAKC,aAAc,IAAI,EAClDpE,EAAInvF,GAAG2wC,EAAO6iD,cAAe,KAAKC,eAAgB,IAAI,EACtDtE,EAAInvF,GAAG2wC,EAAO+iD,gBAAiB,KAAKC,iBAAkB,IAAI,EAC1DxE,EAAInvF,GAAG2wC,EAAOijD,aAAc,KAAKC,cAAe,IAAI,EACpD1E,EAAInvF,GAAG2wC,EAAOmjD,eAAgB,KAAKC,gBAAiB,IAAI,EACxD5E,EAAInvF,GAAG2wC,EAAOqjD,uBAAwB,KAAKC,sBAAuB,IAAI,EACtE9E,EAAInvF,GAAG2wC,EAAO70B,MAAO,KAAKo4E,QAAS,IAAI,CACzC,CACAC,qBAAsB,CACpB,GAAM,CACJhF,IAAAA,CACF,EAAI,KACCA,IAGLA,EAAI/7F,IAAIu9C,EAAOuiD,iBAAkB,KAAKC,kBAAmB,IAAI,EAC7DhE,EAAI/7F,IAAIu9C,EAAOyiD,aAAc,KAAKC,cAAe,IAAI,EACrDlE,EAAI/7F,IAAIu9C,EAAO2iD,YAAa,KAAKC,aAAc,IAAI,EACnDpE,EAAI/7F,IAAIu9C,EAAO6iD,cAAe,KAAKC,eAAgB,IAAI,EACvDtE,EAAI/7F,IAAIu9C,EAAO+iD,gBAAiB,KAAKC,iBAAkB,IAAI,EAC3DxE,EAAI/7F,IAAIu9C,EAAOijD,aAAc,KAAKC,cAAe,IAAI,EACrD1E,EAAI/7F,IAAIu9C,EAAOmjD,eAAgB,KAAKC,gBAAiB,IAAI,EACzD5E,EAAI/7F,IAAIu9C,EAAOqjD,uBAAwB,KAAKC,sBAAuB,IAAI,EACvE9E,EAAI/7F,IAAIu9C,EAAO70B,MAAO,KAAKo4E,QAAS,IAAI,EAC1C,CACA54B,SAAU,CACR,KAAK64B,oBAAoB,EACzB,KAAKzD,WAAW,EAChB,KAAKvB,IAAM,KAAKiB,mBAAqB,KAAKF,eAAiB,KAC3D,KAAKJ,YAAc,KAAKC,YAAc,IACxC,CACAoD,kBAAkBn+G,EAAOwG,EAAM,CAC7B,KAAKi0G,oBAAsB,GAC3B,KAAKC,eAAiB,GACtB,KAAKF,iBAAmB,EACxB,KAAKU,eAAiB,CAAC,EACvB,KAAKJ,YAAc,KAAKC,YAAc,KACtC,KAAKgE,gBAAgB,EACrB,KAAKrD,WAAW,CAClB,CACAqD,iBAAkB,CACZ,KAAKtE,oBAAsB,IAAM,KAAKK,cACxC,KAAKL,oBAAsB,KAAKK,YAAYjkH,OAE9C,KAAK8jH,eAAiB,GACtB,KAAKsE,sBAAsB,EAC3B,KAAKjJ,WAAa,KAClB,KAAK7G,mBAAqB,IAC5B,CACA8P,uBAAwB,CACtB,KAAKvE,eAAiB,GACtB,KAAKE,iBAAmB,EAC1B,CACAyD,cAAcr+G,EAAOwG,EAAM,CACzB,IAAMqxF,EAAOrxF,EAAKqxF,KAClB,GAAI,MAAKunB,eAAevnB,CAAI,EAG5B,IAAI,CAACA,EAAKoB,YAAa,CACrB,IAAIomB,EACJ,KAAKvE,YAAcjjB,EACnB,KAAKkjB,aAAesE,EAAa74G,EAAK83C,OAAS,KAAO+gE,EAAa,IACrE,CACA,KAAK3D,WAAW,EAChB,KAAKb,MAAQv+G,KAAK46B,YAAY,KAAKkkF,mBAAoB,GAAG,EAC5D,CACAuD,iBAAiB3+G,EAAOwG,EAAM,CAC5B,KAAKk1G,WAAW,CAClB,CACAwD,QAAQl/G,EAAOwG,EAAM,CACnB,GAAIA,CAAAA,EAAK84G,MAGT,OAAQ94G,EAAK48B,QAAO,CAClB,KAAKkrD,EAAaixB,uBAClB,KAAKjxB,EAAakxB,oBAChB,KAAK/E,oBAAsB,GAC3B,KAAKC,eAAiB,GACtB,MACF,KAAKpsB,EAAamxB,kBAAmB,CACnC,IAAM5nB,EAAOrxF,EAAKqxF,KACZ,CACJijB,YAAAA,EACAC,YAAaz8D,CACf,EAAI,KACJ,GAAIu5C,GAAQijB,GAAejjB,EAAKC,KAAOgjB,EAAYhjB,IAAMD,EAAKhhG,QAAUikH,EAAYjkH,MAAO,CACzF,IAAMy1B,EAAOhE,YAAYC,IAAI,EACvBmvE,EAAQp5C,EAAOA,EAAKo5C,MAAQG,EAAKH,MACjC6jB,EAAcjvF,EAAOorE,EAAMvB,QAAQjrF,MACnC+lF,EAAOyG,EAAMvB,QAAQC,MAAQsB,EAAMvB,QAAQC,MAAQsB,EAAMvB,QAAQjrF,MAAQ,GAE/E,GADwBwsF,EAAM3B,QAAU9E,EAAO,GAC1B,CACnB,IAAM8qB,EAAe,KAAKZ,YAAYhqB,gBAAgB,EACtD,KAAKgqB,YAAY1rB,OAAO8rB,EAAcjvH,KAAKgmB,IAAIypG,EAAc9qB,CAAI,EAAGyG,EAAM3B,MAAM,CAClF,MACE,KAAKolB,YAAYnqB,WAAWuqB,CAAW,CAE3C,CACA,KACF,CACF,CACF,CACA0B,kBAAkByC,EAAoBC,EAAWC,EAAcC,EAAU,CACvE,IAAMC,EAAcJ,EAAqBE,EAAeD,EAClDI,EAAkBF,EAAWH,EAAqB,KAAKlF,iBAAmB,EAChF,OAAOsF,EAAcC,CACvB,CACAlB,cAAc7+G,EAAOwG,EAAM,CACzB,IAAM0pD,EAAS,KAAKiqD,IAAIjqD,OAClB,CACJimC,QAAAA,CACF,EAAI3vF,EAAKkxF,MACHsoB,EAAgB7pB,EAAQ9qF,IAAM8qF,EAAQC,MACxCnI,GAAe+xB,CAAa,IAC9B,KAAKxF,iBAAmBwF,EAAgB,KAEtCx5G,EAAK48B,QAAQq5E,KACf,KAAKtB,YAAY5mE,OAAO2b,EAAO+vD,gBAAiB/vD,EAAOgwD,eAAe,EAEtE,KAAK/E,YAAY5mE,OAAO2b,EAAO8tD,eAAgB9tD,EAAO+tD,cAAc,EAElE,KAAKpD,MAAQ,IACf,KAAKO,mBAAmB50G,EAAK25G,SAAS,CAE1C,CACA5B,aAAav+G,EAAO,CAClB63F,KAAAA,EACAv5C,KAAAA,CACF,EAAG,CACD,IAAMo5C,EAAQp5C,EAAOA,EAAKo5C,MAAQG,EAAKH,MAIvC,GAHIG,EAAKj0F,OAASirF,GAAkBC,MAClC,KAAKqsB,YAAYnqB,WAAW0G,EAAMvB,QAAQC,MAAQsB,EAAMvB,QAAQjrF,KAAK,EAEnE,MAAKk0G,eAAevnB,CAAI,EAQ5B,IALA,KAAK6jB,WAAW,EACZ7jB,EAAKhhG,QAAU,KAAK8jH,iBACtB,KAAKA,eAAiB,IAExB,KAAKD,eAAiB,GAClB,KAAKP,IAAIjqD,OAAOkwD,sBAAuB,CACzC,IAAM5mF,EAAW8kB,EAAOA,EAAK9kB,SAAWq+D,EAAKr+D,SACvC3iC,EAAQ,KAAKsjH,IAAIz8F,OAAOm6E,EAAKhhG,KAAK,EAClCwpH,GAAexpH,EAAMk/F,OAASl/F,EAAMk/F,OAAOjc,MAAQ,GAAK4d,EAAM3B,OAC9DuqB,GAAkBzpH,EAAMk/F,OAASl/F,EAAMk/F,OAAOv8D,SAAW,GAAKA,EACpE3iC,EAAMk/F,OAAS,CACbjc,MAAOumC,EACP7mF,SAAU8mF,CACZ,EACAzpH,EAAM08G,YAAcjnH,KAAK+B,MAAM,EAAIgyH,EAAcC,CAAc,CACjE,CACA,GAAIzoB,EAAKoB,YAAa,CACpB,IAAMsnB,EAAmB,CACvB7oB,MAAAA,EACAG,KAAAA,EACAv5C,KAAAA,EACA7zC,GAAIotF,EAAKj0F,IACX,EACA,KAAK66G,eAAe9iD,EAAO6iD,cAAe+B,CAAgB,EAC1D1oB,EAAKoB,YAAc,EACrB,MACE,KAAKwhB,oBAAsB5iB,EAAKhhG,MAEpC,CACA4nH,eAAez+G,EAAOwG,EAAM,CAC1B,GAAM,CACJqxF,KAAAA,EACAv5C,KAAAA,CACF,EAAI93C,EACEkxF,EAAQp5C,GAAQ,MAAQA,EAAKo5C,MAAM3B,OAASz3C,EAAKo5C,MAAQG,EAAKH,MAIpE,GAHIA,EAAMzxF,SAGN,KAAKm5G,eAAevnB,CAAI,EAC1B,OAEF,IAAM2oB,EAAe9oB,EAAMrB,QAAQhrF,IAAMqsF,EAAMvB,QAAQjrF,MAAQ5e,KAAKgmB,IAAIolF,EAAMvB,QAAQC,MAAQsB,EAAMvB,QAAQjrF,MAAO,KAAKiwG,YAAYhqB,gBAAgB,CAAC,EACrJ,KAAKgqB,YAAY1rB,OAAO+wB,EAAc9oB,EAAM3B,MAAM,EAClD2B,EAAMxB,WAAa,KAAKgmB,cAAc,EAClCrkB,EAAKoB,YACP,KAAK+hB,iBAAmBwF,EAAe,IAEvC,KAAKxF,iBAAmB,CAE5B,CACAoE,eAAevnB,EAAM,CACnB,OAAOA,EAAKj0F,OAASirF,GAAkBC,MAAQ+I,EAAKC,KAAO,aAC7D,CACA4jB,YAAa,CACP,KAAKb,MAAQ,KACfv+G,KAAK26B,cAAc,KAAK4jF,KAAK,EAC7B,KAAKA,MAAQ,GAEjB,CACA,IAAI4F,gBAAiB,CACnB,GAAM,CACJxI,aAAAA,EACAD,aAAAA,CACF,EAAI,KAAKmC,IACHjkB,EAAa,KAAKgmB,cAAc,EAChCwE,EAAgB,KAAKvG,IAAIjqD,OAAOywD,mBAChCC,EAAe,KAAKvD,cAAcnnB,EAAY8hB,EAAcC,EAAc,EAAGyI,EAAe,EAAG,CAAC,EACtG,GAAIE,EAAe,GACjB,OAAOA,EAET,IAAMC,EAAa,KAAK1G,IAAI0G,WACtBC,EAAUx0H,KAAKgmB,IAAIhmB,KAAKwG,IAAI+tH,EAAY7I,CAAY,EAAGC,CAAY,EACzE,YAAKzhH,KAAK,4EAA4EqqH,CAAU,eAAeC,CAAO,EAAE,EACjHA,CACT,CACA,IAAIC,iBAAkB,CACpB,OAAI,KAAKnG,iBACA,GAEF,KAAKD,cACd,CAEA,IAAI2C,eAAgB,CAClB,IAAMyD,EAAkB,KAAKA,gBAEvBC,EADc,KAAK7F,YACOjqB,YAAY,EACtC+vB,EAAkB,KAAKxG,oBAAsB,GACnD,GAAIsG,IAAoB,KAAO,CAACC,GAAe,CAACC,GAAmB,KAAKrG,mBAAqB,KAAKsG,gBAAgB,GAChH,OAAOH,EAET,IAAMI,EAAmBH,GAAeC,EAAkB,KAAKG,oBAAoB,EAAI,KAAKX,eAC5F,GAAIM,IAAoB,GAAI,CAC1B,IAAMrjG,EAAS,KAAKy8F,IAAIz8F,OACxB,GAAIA,EAAOnwB,OAASjB,KAAKwG,IAAIiuH,EAAiBI,CAAgB,GAAKzjG,EAAOqjG,CAAe,EAAEzN,WAAa51F,EAAOyjG,CAAgB,EAAE7N,UAC/H,OAAOyN,CAEX,CACA,YAAKpG,eAAiBwG,EACtB,KAAKvG,iBAAmB,KAAKsG,gBAAgB,EACtCC,CACT,CACAD,iBAAkB,CAChB,MAAO,GAAG,KAAKhF,cAAc,CAAC,IAAI,KAAKwB,mBAAmB,EAAEhiH,QAAQ,CAAC,CAAC,EACxE,CACA0lH,qBAAsB,CACpB,GAAM,CACJtG,YAAAA,EACAC,YAAAA,EACAZ,IAAAA,CACF,EAAI,KACJ,GAAIA,EAAIz8F,OAAOnwB,QAAU,EACvB,OAAO4sH,EAAIqD,UAEb,GAAM,CACJvF,aAAAA,EACA/nD,OAAAA,EACA8nD,aAAAA,CACF,EAAImC,EACEkH,EAAsBtG,EAAcA,EAAYvhF,SAAWshF,EAAcA,EAAYthF,SAAW,EAChG8nF,EAAQ,KAAKpF,cAAc,EAC3BF,EAAwB,KAAK0B,mBAAmB,EAClD6D,EAAWrxD,EAAOsxD,mBAClBC,EAAavxD,EAAOysD,qBACxB,GAAIX,EAAuB,CACzB,IAAM0F,EAAa,KAAKrE,cAAciE,EAAOtJ,EAAcC,EAAc+D,EAAuB,EAAGuF,EAAUE,CAAU,EACvH,GAAIC,GAAc,EAChB,YAAKzG,eAAiB,GACfyG,CAEX,CACA,IAAIf,EAAqBU,EAAsB/0H,KAAKgmB,IAAI+uG,EAAqBnxD,EAAOywD,kBAAkB,EAAIzwD,EAAOywD,mBACjH,GAAI,CAAC3E,EAAuB,CAC1B,IAAMhB,EAAmB,KAAKA,iBAC1BA,IAEF2F,GADwBU,EAAsB/0H,KAAKgmB,IAAI+uG,EAAqBnxD,EAAOyxD,eAAe,EAAIzxD,EAAOyxD,iBACtE3G,EACvC,KAAK9kH,KAAK,qBAAqB5J,KAAK+B,MAAM,IAAM2sH,CAAgB,CAAC,+CAA+C1uH,KAAK+B,MAAM,IAAMsyH,CAAkB,CAAC,KAAK,EACzJY,EAAWE,EAAa,EAE5B,CACA,IAAMG,EAAY,KAAKvE,cAAciE,EAAOtJ,EAAcC,EAAc+D,EAAuB2E,EAAoBY,EAAUE,CAAU,EAKvI,GAJI,KAAKxG,iBAAmB2G,IAC1B,KAAK3G,eAAiB2G,EACtB,KAAK1rH,KAAK,GAAG8lH,EAAwB,uBAAyB,iBAAiB,2BAA2B4F,CAAS,EAAE,GAEnHA,EAAY,GACd,OAAOA,EAET,IAAMC,EAAW1H,EAAIz8F,OAAOs6F,CAAY,EAClC8J,EAAY3H,EAAIE,aACtB,OAAIyH,GAA0CD,GAAStoB,QAAWuoB,EAAUvoB,QACnEye,EAEFmC,EAAIqD,SACb,CACAE,oBAAqB,CACnB,IAAMvD,EAAM,KAAKA,IACXlzC,EAAQkzC,EAAIlzC,MAClB,GAAI,CAACA,EACH,MAAOntB,KAET,IAAMqT,EAAe8Z,GAASA,EAAM9Z,eAAiB,EAAI7gE,KAAKqnB,IAAIszD,EAAM9Z,YAAY,EAAI,EAClF0uD,EAAa1B,EAAI2B,sBACvB,OAAQD,EAAaA,EAAW93B,IAAM,GAAK52B,CAC7C,CACA+uD,eAAgB,CACd,OAAO,KAAKf,YAAYjqB,YAAY,EAAI,KAAKiqB,YAAYtrB,YAAY,EAAI,KAAKsqB,IAAIjqD,OAAO6tD,sBAC3F,CACAV,cAAc/N,EAAW0I,EAAcC,EAAc+D,EAAuB2E,EAAoBY,EAAUE,EAAY,CACpH,IAAIM,EACJ,IAAMC,EAAmBhG,EAAwB2E,EAC3ClG,EAAsB,KAAKA,oBAC3BwH,EAAqBxH,IAAwB,GAAK,KAAKN,IAAI0G,WAAapG,EACxE,CACJK,YAAAA,EACAC,YAAAA,CACF,EAAI,KACE,CACJr9F,OAAAA,EACA85F,eAAAA,EACAgG,UAAAA,EACAttD,OAAAA,CACF,EAAI,KAAKiqD,IACT,GAAIz8F,EAAOnwB,SAAW,EACpB,MAAO,GAET,IAAMsJ,EAAQ6mB,EAAOukG,CAAkB,EACjCxF,EAAO,CAAC,GAAGsF,EAAwB,KAAK5H,IAAIuC,qBAAuB,MAAQqF,EAAsBtF,MACjG/B,EAAiB8C,IAAc,IAAM/C,IAAwB,GAC/DyH,EACA9S,EAAoB,MACpBC,EAA6Cx4G,GAAMo5G,WAAc,EAC/D,CACJV,gBAAAA,EACAgG,gBAAAA,CACF,EAAIrlD,EACEi/C,EAAqB,KAAKA,qBAAuB,KAAKA,mBAAqBoI,GAAsBC,CAAc,GACjH2K,EAAgB,GACpB,GAAIzH,EAAgB,CAClB,GAAI,KAAKA,iBAAmB,GAC1B,OAAO,KAAKA,eAEd,IAAM1E,GAAa,KAAKA,aAAe,KAAKA,WAAa+B,GAAcr6F,EAAQyxF,EAAoB6I,EAAcC,CAAY,GACvHmK,EAAYrM,GAAkBC,GAAY5G,EAAmBE,EAAWC,EAAiBgG,CAAe,EACxG,CACJ1I,SAAAA,GACA8J,YAAAA,GACAJ,aAAAA,GACAC,WAAAA,EACAC,SAAAA,GACAjB,UAAAA,EACF,EAAI4M,EACJD,EAAgB1L,GAChByL,EAAkBrV,GAClBuC,EAAoBoG,GAAYmB,GAAYA,GAAYppH,OAAS,CAAC,EAAIopH,GAAY,CAAC,EACnFtH,EAAmBkH,GACnBjH,EAAYhjH,KAAKwG,IAAIw8G,EAAWkH,CAAU,EAC1C,KAAKjgH,IAAI,qBAAqBsB,GAAUuqH,CAAS,CAAC,EAAE,CACtD,MACEF,EAA2CrrH,GAAMg2G,SACjDuC,EAA6Cv4G,GAAMq5G,WAErD,IAAMmR,EAAsBtG,EAAcA,EAAYvhF,SAAWshF,EAAcA,EAAYthF,SAAW,EAChG6oF,GAAkB,KAAKlH,YAAYhqB,gBAAgB,EAAI,IACvDmxB,GAAgB,CAAA,EACtB,QAASh1H,GAAI2qH,EAAc3qH,IAAK0qH,EAAc1qH,KAAK,CACjD,IAAIi1H,GAAuBC,GAC3B,IAAMrC,EAAYziG,EAAOpwB,EAAC,EACpBm1H,GAAWn1H,GAAI20H,EACrB,GAAI,CAAC9B,EACH,SAEF,GAAIjwD,EAAOwyD,sBAAwB,CAACvC,EAAU1M,iBAAmB,CAAC0M,EAAU3M,iBAAkB,CAC5F,IAAMpD,GAAoBn4G,UAAUm4G,kBAChC,OAA6CA,IAAkBa,cAAkB,YAAc/B,GAAsCiR,EAAWhR,EAAoBC,EAAmBC,EAAkBC,EAAWC,CAAe,GACrO4Q,EAAU3M,iBAAmBrD,GAA4BgQ,EAAWhR,EAAoBiB,GAAmB,KAAK8K,cAAc,EAC9HiF,EAAU3M,iBAAiBx6G,KAAMi4G,IAAiB,CAChD,GAAI,CAAC,KAAKkJ,IACR,OAEFgG,EAAU1M,gBAAkBxC,GAC5B,IAAM0R,GAAU,KAAKxI,IAAIz8F,OACnBvZ,GAAQw+G,GAAQv+G,QAAQ+7G,CAAS,EACnClP,GAAav6G,MACf,KAAKF,KAAK,0CAA0Cy6G,GAAav6G,KAAK,eAAeyN,EAAK,IAAItM,GAAUo5G,EAAY,CAAC,EAAE,EAC7GA,GAAarC,UASdqC,GAAanC,oBAAoBv6E,KAAMr+B,IAASA,GAAK84G,SAAW,IAAS94G,GAAK64G,iBAAmB,EAAK,GAC/G,KAAKx4G,IAAI,4CAA4C4N,EAAK,kCAAkCtM,GAAUo5G,EAAY,CAAC,EAAE,GATrH,KAAKz6G,KAAK,+DAA+D2N,EAAK,IAAItM,GAAUo5G,EAAY,CAAC,EAAE,EACvG9sG,GAAQ,IAAMw+G,GAAQp1H,OAAS,IACjC,KAAKgJ,IAAI,8BAA8B4N,EAAK,EAAE,EAC9C,KAAKg2G,IAAIyI,YAAYz+G,EAAK,EACtB,KAAKg2G,IAAIqD,YAAc,KACzB,KAAKrD,IAAI2C,cAAgB,IAMjC,CAAC,GAEDqD,EAAU1M,gBAAkB9E,EAEhC,CACA,IAAIuT,GAAmB/B,EAAUtT,WAAaqV,GAAmB9S,GAAqB+Q,EAAUjQ,aAAed,GAAqBqT,IAAYpT,EAAmB8Q,EAAUlQ,WAAa,CAACwS,IAAYpT,EAAmB,GAAKA,EAAmB8Q,EAAUlQ,YAAcsS,GAAwBpC,EAAU1M,kBAAoB,OAAS+O,GAAyBD,GAAsBzT,sBAAwB,MAAQ0T,GAAuBjuF,KAAMr+B,IAASA,GAAK84G,SAAW,EAAK,KAC7c,CAAC0L,GAAkBptH,KAAM60H,GAAe,CAC1CG,GAActrH,KAAK1J,EAAC,EACpB,QACF,CAEF,IAAMu1H,GAAe1C,EAAU/8E,QACzB0/E,IAAe/H,EAA8C8H,IAAaE,WAA6CF,IAAaG,wBAA0B3B,EAChK4B,EACCR,GAGHQ,EAAaxB,EAAanS,EAF1B2T,EAAa1B,EAAWjS,EAI1B,IAAM/V,GAAU8nB,GAAuBrF,GAAyBqF,EAAsB,GAAKV,IAAuB,EAAIR,EAAUjO,eAAiBiO,EAAU/L,WACrJ8O,GAAgB,KAAKjG,kBAAkBoF,GAAiBY,EAAY1pB,GAAUupB,GAAaD,KAAiB,MAAM,EASxH,GANEI,GAAc1pB,KACbjsG,KAAMmtH,GAAuB0F,EAAU7M,YAAc,GAAK6M,EAAU9M,gBAAkB,KAGtF6P,IAAiBb,IAAmB,CAACp0B,GAAei1B,EAAa,GAAKzG,GAAQ,CAAC,KAAKzB,kBAAoBkI,GAAgBlB,GAE7F,CAC5B,IAAMjB,GAAkB,KAAKA,gBAC7B,OAAIzzH,KAAMkwH,IAAcuD,KAAoB,IAAMA,KAAoBvD,KAChE8E,GAAc/0H,QAChB,KAAKykG,MAAM,oBAAoBswB,GAAc9zG,KAAK,GAAG,CAAC,OAAOypG,CAAY,qCAAqCv6F,EAAO4kG,GAAc,CAAC,CAAC,EAAEjW,MAAM,KAAK3uF,EAAO4kG,GAAc,CAAC,CAAC,EAAEpS,UAAU,0BAA0BgS,CAAe,KAAK9S,CAAiB,EAAE,EAExP,KAAKl5G,KAAK,oBAAoB+rH,CAAkB,KAAK30H,EAAC,eAAehB,KAAK+B,MAAM40H,CAAU,CAAC,aAAa32H,KAAK+B,MAAM40H,EAAa1pB,EAAO,CAAC,SAAS8oB,GAAgB3mH,QAAQ,CAAC,CAAC,gBAAgBonH,GAAYpnH,QAAQ,CAAC,CAAC,qBAAqBsmH,EAAiBtmH,QAAQ,CAAC,CAAC,kBAAkBwnH,GAAcxnH,QAAQ,CAAC,CAAC,mBAAmBg/G,CAAc,aAAayF,EAAUtT,QAAQ,eAAesT,EAAUjQ,UAAU,kBAAkBsN,CAAS,EAAE,GAEza9C,IACF,KAAKA,eAAiBptH,IAEjBA,EACT,CACF,CACA,MAAO,EACT,CACA,IAAIgwH,cAAc6F,EAAW,CAC3B,IAAMz4H,EAAQ,KAAK04H,oBAAoBD,CAAS,EAC5C,KAAKxI,iBAAmBjwH,IAC1B,KAAKkwH,iBAAmB,GACxB,KAAKD,eAAiBjwH,EAE1B,CACA04H,oBAAoBD,EAAW,CAC7B,GAAM,CACJlL,aAAAA,EACAD,aAAAA,CACF,EAAI,KAAKmC,IACT,OAAO7tH,KAAKgmB,IAAIhmB,KAAKwG,IAAIqwH,EAAWnL,CAAY,EAAGC,CAAY,CACjE,CACF,EACMoL,GAAe,CAgBnB5jH,OAAQ,SAAS8/B,EAAM+jF,EAAc,CACnC,IAAI7M,EAAW,EACX39E,EAAWyG,EAAKhyC,OAAS,EACzBugE,EAAe,KACfy1D,EAAiB,KACrB,KAAO9M,GAAY39E,GAAU,CAC3Bg1B,GAAgB2oD,EAAW39E,GAAY,EAAI,EAC3CyqF,EAAiBhkF,EAAKuuB,CAAY,EAClC,IAAM01D,EAAmBF,EAAaC,CAAc,EACpD,GAAIC,EAAmB,EACrB/M,EAAW3oD,EAAe,UACjB01D,EAAmB,EAC5B1qF,EAAWg1B,EAAe,MAE1B,QAAOy1D,CAEX,CACA,OAAO,IACT,CACF,EACA,SAASE,GAAkBC,EAAWC,EAAUC,EAAwB,CACtE,GAAID,IAAa,MAAQ,CAACtvH,MAAMiQ,QAAQo/G,CAAS,GAAK,CAACA,EAAUn2H,QAAU,CAAC0gG,GAAe01B,CAAQ,EACjG,OAAO,KAET,IAAME,EAAWH,EAAU,CAAC,EAAE7pB,gBAC9B,GAAI8pB,GAAYE,GAAY,GAC1B,OAAO,KAET,IAAMC,EAASJ,EAAUA,EAAUn2H,OAAS,CAAC,EAAEqsG,mBAC/C,GAAI+pB,IAAaG,GAAU,GACzB,OAAO,KAET,QAASC,EAAM,EAAGA,EAAML,EAAUn2H,OAAQ,EAAEw2H,EAAK,CAC/C,IAAMlsB,EAAO6rB,EAAUK,CAAG,EAC1B,GAAIC,GAAuBL,EAAUC,EAAwB/rB,CAAI,EAC/D,OAAOA,CAEX,CACA,OAAO,IACT,CACA,SAASosB,GAAkBC,EAAcR,EAAWS,EAAY,EAAGP,EAAyB,EAAGQ,EAA0B,KAAM,CAC7H,IAAIC,EAAW,KACf,GAAIH,EAAc,CAChBG,EAAWX,EAAU,EAAIQ,EAAapsB,GAAK4rB,EAAU,CAAC,EAAE5rB,EAAE,GAAK,KAC/D,IAAMwsB,EAAkBJ,EAAatrB,OAASurB,EAC1CG,EAAkB,GAAKA,EAAkB,QAC3CH,GAAa,OAEXE,GAAYH,EAAartH,QAAUwtH,EAASxtH,OAASwtH,EAASh5G,KAAO64G,EAAa74G,MACpFg5G,EAAWX,EAAU,EAAIQ,EAAapsB,GAAK4rB,EAAU,CAAC,EAAE5rB,EAAE,GAAK,KAEnE,MAAWqsB,IAAc,GAAKT,EAAU,CAAC,EAAEx4G,QAAU,IACnDm5G,EAAWX,EAAU,CAAC,GAExB,GAAIW,KAAc,CAACH,GAAgBA,EAAartH,QAAUwtH,EAASxtH,QAAU0tH,GAA4BJ,EAAWP,EAAwBS,CAAQ,IAAM,GAAKG,GAA8BH,EAAUH,EAAc53H,KAAKgmB,IAAI8xG,EAAyBR,CAAsB,CAAC,GAC5Q,OAAOS,EAET,IAAMI,EAAgBpB,GAAa5jH,OAAOikH,EAAWa,GAA4B3lH,KAAK,KAAMulH,EAAWP,CAAsB,CAAC,EAC9H,OAAIa,IAAkBA,IAAkBP,GAAgB,CAACG,GAChDI,EAEFJ,CACT,CACA,SAASG,GAA8BH,EAAUH,EAAcE,EAAyB,CACtF,GAAIF,GAAgBA,EAAah5G,QAAU,GAAKg5G,EAAartH,MAAQwtH,EAASxtH,QAAUqtH,EAAaxrB,QAAU,GAAK,EAAG,CACrH,IAAMgsB,EAAgBR,EAAa9rB,QAAQ30F,OAAO,CAAC+1B,EAAUvV,KACvDA,EAAI,CAAC,IAAM,QACbuV,GAAY9vB,WAAWua,EAAI,CAAC,CAAC,GAExBuV,GACN4qF,CAAuB,EAC1B,OAAOC,EAASn5G,OAASw5G,CAC3B,CACA,MAAO,EACT,CACA,SAASH,GAA4BJ,EAAY,EAAGP,EAAyB,EAAG3M,EAAW,CACzF,GAAIA,EAAU/rG,OAASi5G,GAAalN,EAAU/rG,MAAQ+rG,EAAUz9E,SAAW2qF,EACzE,MAAO,GAET,IAAMQ,EAA2Br4H,KAAKgmB,IAAIsxG,EAAwB3M,EAAUz9E,UAAYy9E,EAAUne,SAAWme,EAAUne,SAAW,EAAE,EACpI,OAAIme,EAAU/rG,MAAQ+rG,EAAUz9E,SAAWmrF,GAA4BR,EAC9D,EACElN,EAAU/rG,MAAQy5G,EAA2BR,GAAalN,EAAU/rG,MACtE,GAEF,CACT,CACA,SAAS84G,GAAuBY,EAAchB,EAAwB3M,EAAW,CAC/E,IAAM0N,EAA2Br4H,KAAKgmB,IAAIsxG,EAAwB3M,EAAUz9E,UAAYy9E,EAAUne,SAAWme,EAAUne,SAAW,EAAE,EAAI,IAExI,OAD2Bme,EAAUrd,oBAAsB,GAC/B+qB,EAA2BC,CACzD,CACA,SAASC,GAAkBzhF,EAASo1D,EAAIziF,EAAK,CAC3C,GAAIqtB,GACEA,EAAQ0hF,SAAWtsB,GAAMp1D,EAAQ2hF,OAASvsB,EAAI,CAChD,IAAIkrB,EAAYtgF,EAAQsgF,UAClB,CACJsB,aAAAA,CACF,EAAI5hF,EACA4hF,IACFtB,EAAYA,EAAU5xH,OAAOkzH,CAAY,GAE3C,IAAI9nD,EACJmmD,OAAAA,GAAa5jH,OAAOikH,EAAYzM,GAC1BA,EAAUze,GAAKA,EACV,EAELye,EAAUze,GAAKA,EACV,IAETt7B,EAAU+5C,EACNA,EAAU5rG,KAAO0K,EACZ,EAELkhG,EAAU/rG,MAAQ6K,EACb,GAEF,EACR,EACMmnD,GAAW,IACpB,CAEF,OAAO,IACT,CACA,SAAS+nD,GAAevuH,EAAO,CAC7B,OAAQA,EAAM0sC,QAAO,CACnB,KAAKkrD,EAAamxB,kBAClB,KAAKnxB,EAAa42B,iBAClB,KAAK52B,EAAa62B,mBAClB,KAAK72B,EAAa82B,sBAChB,MAAO,EACX,CACA,MAAO,EACT,CACA,SAASC,GAAeC,EAAY5uH,EAAO,CACzC,IAAM6uH,EAAYN,GAAevuH,CAAK,EACtC,OAAO4uH,EAAWzoH,QAAQ,GAAG0oH,EAAY,UAAY,OAAO,OAAO,CACrE,CACA,SAASC,GAAcC,EAAaC,EAAY,CAC9C,IAAMC,EAAgBF,EAAYG,UAAY,SAAW,EAAIt5H,KAAKqjG,IAAI,EAAG+1B,CAAU,EACnF,OAAOp5H,KAAKgmB,IAAIqzG,EAAgBF,EAAYI,aAAcJ,EAAYK,eAAe,CACvF,CACA,SAASC,GAA6BC,EAAa,CACjD,OAAOt0B,GAAeA,GAAe,CAAC,EAAGs0B,CAAW,EAAG,CACrDC,WAAY,KACZC,aAAc,IAChB,CAAC,CACH,CACA,SAASC,GAAYV,EAAaC,EAAYH,EAAWa,EAAgB,CACvE,GAAI,CAACX,EACH,MAAO,GAET,IAAMY,EAA+CD,GAAejmH,KAC9DurE,EAAQg6C,EAAaD,EAAYa,cAAgBC,GAAmBF,CAAU,GAAK,CAAC,CAACd,GAC3F,OAAOE,EAAYU,YAAcV,EAAYU,YAAYV,EAAaC,EAAYH,EAAWa,EAAgB16C,CAAK,EAAIA,CACxH,CACA,SAAS66C,GAAmBF,EAAY,CACtC,OAAOA,IAAe,GAAKpuH,UAAUuuH,SAAW,IAAS,CAAC,CAACH,IAAeA,EAAa,KAAOA,EAAa,IAC7G,CACA,IAAII,GAAqB,CACvBC,UAAW,EACXC,0BAA2B,EAC3BC,2BAA4B,EAC5BC,aAAc,CAChB,EACIC,GAAmB,CACrBC,KAAM,EACNC,8BAA+B,EAC/BC,8BAA+B,CACjC,EACMC,GAAN,cAA8Bp1B,EAAQ,CACpC18F,YAAY+kH,EAAK,CACf,MAAM,mBAAoBA,EAAIxhH,MAAM,EACpC,KAAKwhH,IAAM,OACX,KAAKgN,cAAgB,EACrB,KAAKC,oBAAsB,CAAC,EAC5B,KAAKjN,IAAMA,EACX,KAAK2D,kBAAkB,CACzB,CACAA,mBAAoB,CAClB,IAAM3D,EAAM,KAAKA,IACjBA,EAAInvF,GAAG2wC,EAAO70B,MAAO,KAAKo4E,QAAS,IAAI,EACvC/E,EAAInvF,GAAG2wC,EAAOuiD,iBAAkB,KAAKC,kBAAmB,IAAI,EAC5DhE,EAAInvF,GAAG2wC,EAAO0rD,cAAe,KAAKC,eAAgB,IAAI,CACxD,CACAnI,qBAAsB,CACpB,IAAMhF,EAAM,KAAKA,IACZA,IAGLA,EAAI/7F,IAAIu9C,EAAO70B,MAAO,KAAKo4E,QAAS,IAAI,EACxC/E,EAAI/7F,IAAIu9C,EAAO70B,MAAO,KAAKygF,WAAY,IAAI,EAC3CpN,EAAI/7F,IAAIu9C,EAAOuiD,iBAAkB,KAAKC,kBAAmB,IAAI,EAC7DhE,EAAI/7F,IAAIu9C,EAAO0rD,cAAe,KAAKC,eAAgB,IAAI,EACzD,CACAhhC,SAAU,CACR,KAAK64B,oBAAoB,EACzB,KAAKhF,IAAM,KACX,KAAKiN,oBAAsB,CAAC,CAC9B,CACAI,UAAUC,EAAe,CACzB,CACAC,UAAW,CACT,KAAKP,cAAgB,CACvB,CACAQ,qBAAqB9vB,EAAM,CACzB,OAAgCA,GAAKj0F,OAAUirF,GAAkBC,KAAO+I,EAAKhhG,MAAQ,KAAKsjH,IAAIqD,SAChG,CACAW,mBAAoB,CAClB,KAAKgJ,cAAgB,EACrB,KAAKC,oBAAsB,CAAC,CAC9B,CACAE,gBAAiB,CACf,KAAKH,cAAgB,CACvB,CACAjI,QAAQl/G,EAAOwG,EAAM,CACnB,IAAIohH,EACJ,GAAIphH,EAAK84G,MACP,OAEF,IAAMnF,EAAM,KAAKA,IACXh4F,EAAU3b,EAAK2b,QACrB,OAAQ3b,EAAK48B,QAAO,CAClB,KAAKkrD,EAAau5B,gBAClB,KAAKv5B,EAAamxB,kBAClB,KAAKnxB,EAAaw5B,eAClB,KAAKx5B,EAAa42B,iBAChB1+G,EAAKuhH,YAAc,KAAKC,2BAA2BxhH,CAAI,EACvD,OACF,KAAK8nF,EAAa25B,mBAChB,IAAKL,EAAaphH,EAAKqxF,OAAS,MAAQ+vB,EAAWxuB,IAAK,CACtD5yF,EAAKuhH,YAAcG,GAA2B,EAC9C,MACF,CAEF,KAAK55B,EAAa65B,SAClB,KAAK75B,EAAa85B,mBAAoB,CACpC5hH,EAAKuhH,YAAc,KAAKC,2BAA2BxhH,CAAI,EACvDA,EAAKuhH,YAAYM,OAAS5B,GAAmBE,0BAC7C,MACF,CACA,KAAKr4B,EAAag6B,kBAClB,KAAKh6B,EAAai6B,oBAChB,CACE,IAAIC,EAAeC,EACnB,IAAMC,EAAaliH,EAAKwb,SAAW6sE,GAAkBC,KAAOtoF,EAAK3P,MAAQsjH,EAAIqD,UACzEh3G,EAAK48B,UAAYkrD,EAAag6B,qBAAyBE,EAAgBhiH,EAAK2b,UAAY,OAASsmG,EAAwBD,EAAc3F,eAAiB,MAAQ4F,EAAsBhM,MACxLj2G,EAAKuhH,YAAc,KAAKY,+BAA+BniH,EAAMkiH,CAAU,GAEvEliH,EAAKoiH,WAAa,GAClBpiH,EAAKuhH,YAAc,KAAKc,qBAAqBriH,EAAMkiH,CAAU,EAEjE,CACA,OACF,KAAKp6B,EAAaw6B,iBAClB,KAAKx6B,EAAa62B,mBACZ,OAAmChjG,GAAQtrB,OAAW,WACxD2P,EAAKuhH,YAAc,KAAKY,+BAA+BniH,EAAM2b,EAAQtrB,KAAK,GAE5E,OACF,KAAKy3F,EAAay6B,uBAClB,KAAKz6B,EAAa06B,yBAClB,KAAK16B,EAAa26B,oBAClB,KAAK36B,EAAa46B,4BAChB,GAAI/mG,EAAS,CACX,IAAMtrB,EAAQsjH,EAAIE,aAClB,GAAIxjH,IAAUsrB,EAAQve,OAAS4qF,GAAoBG,aAAe93F,EAAM29G,cAAcryF,EAAQ4tF,OAAO,GAAK5tF,EAAQve,OAAS4qF,GAAoBI,gBAAkB/3F,EAAM69G,iBAAiBvyF,EAAQ4tF,OAAO,GAAI,CACzMvpG,EAAKuhH,YAAc,KAAKY,+BAA+BniH,EAAM2zG,EAAIqD,SAAS,EAC1Eh3G,EAAKuhH,YAAYM,OAAS5B,GAAmBE,0BAC7CngH,EAAKuhH,YAAYjnC,MAAQgmC,GAAiBE,8BAC1C,MACF,CACF,CACA,OACF,KAAK14B,EAAa66B,oCAChB,CACE,IAAMtyH,EAAQsjH,EAAIE,aACZ+O,EAA+CvyH,GAAMstB,MAAM,YAAY,EACzEilG,EACF5iH,EAAKuhH,YAAc,CACjBM,OAAQ5B,GAAmBE,0BAC3B7lC,MAAOgmC,GAAiBG,8BACxBoC,UAAWD,CACb,EAEA,KAAKE,eAAe9iH,CAAI,CAE5B,CACA,OACF,KAAK8nF,EAAaixB,uBAClB,KAAKjxB,EAAai7B,kBAClB,KAAKj7B,EAAakxB,oBAChB,GAAI,CAACh5G,EAAKuhH,YAAa,CACrB,IAAIyB,EACJhjH,EAAKuhH,YAAc,KAAKc,qBAAqBriH,GAAOgjH,EAAchjH,EAAK3P,QAAU,KAAO2yH,EAAcrP,EAAIqD,SAAS,CACrH,CACA,OACF,KAAKlvB,EAAam7B,mBAClB,KAAKn7B,EAAao7B,uBAClB,KAAKp7B,EAAaq7B,kBAClB,KAAKr7B,EAAas7B,mBAClB,KAAKt7B,EAAau7B,qBAClB,KAAKv7B,EAAaw7B,sBAClB,KAAKx7B,EAAay7B,sBAChBvjH,EAAKuhH,YAAcG,GAA2B,EAC9C,MACJ,CACI1hH,EAAK5C,OAASwqF,GAAW47B,kBAC3B,KAAKV,eAAe9iH,CAAI,CAE5B,CACA8iH,eAAe9iH,EAAM,CACnB,IAAMkiH,EAAa,KAAKf,qBAAqBnhH,EAAKqxF,IAAI,EACtDrxF,EAAKoiH,WAAa,GAClBpiH,EAAKuhH,YAAc,KAAKc,qBAAqBriH,EAAMkiH,CAAU,CAC/D,CACAC,+BAA+BniH,EAAMkiH,EAAY,CAC/C,IAAMvO,EAAM,KAAKA,IACXsL,EAAcJ,GAAelL,EAAIjqD,OAAO+5D,mBAAoBzjH,CAAI,EAChEk/G,EAAa,KAAKyB,gBAExB,GADchB,GAAYV,EAAaC,EAAYT,GAAez+G,CAAI,EAAGA,EAAKzD,QAAQ,EAEpF,MAAO,CACLslH,OAAQ5B,GAAmBI,aAC3B/lC,MAAOgmC,GAAiBC,KACxBtB,YAAAA,EACAC,WAAAA,CACF,EAEF,IAAMqC,EAAc,KAAKc,qBAAqBriH,EAAMkiH,CAAU,EAC9D,OAAIjD,IACFsC,EAAYtC,YAAcA,EAC1BsC,EAAYrC,WAAaA,GAEpBqC,CACT,CACAC,2BAA2BxhH,EAAM,CAC/B,IAAM2zG,EAAM,KAAKA,IACX+P,EAAoB,KAAKvC,qBAAqBnhH,EAAKqxF,IAAI,EACvDhhG,EAAQsjH,EAAIz8F,OAAOwsG,CAAiB,EACpC,CACJC,eAAAA,EACAC,cAAAA,CACF,EAAIjQ,EAAIjqD,OACFu1D,EAAcJ,GAAe7+G,EAAK48B,QAAQy/C,WAAW,KAAK,EAAIunC,EAAgBD,EAAgB3jH,CAAI,EAClG6jH,EAAiBlQ,EAAIz8F,OAAOja,OAAO,CAAC4vB,EAAKi3F,IAAWj3F,EAAMi3F,EAAOjX,cAAe,CAAC,EACvF,GAAIx8G,IACE2P,EAAK48B,UAAYkrD,EAAa65B,UAChCtxH,EAAMw8G,gBAEM8S,GAAYV,EAAa4E,EAAgBpF,GAAez+G,CAAI,EAAGA,EAAKzD,QAAQ,GAExF,MAAO,CACLslH,OAAQ5B,GAAmBI,aAC3B/lC,MAAOgmC,GAAiBC,KACxBtB,YAAAA,EACAC,WAAY2E,CACd,EAGJ,IAAMtC,EAAc,KAAKc,qBAAqBriH,EAAM0jH,CAAiB,EACrE,OAAIzE,IACFsC,EAAYtC,YAAcA,EAC1BsC,EAAYrC,WAAa2E,GAEpBtC,CACT,CACAc,qBAAqBriH,EAAMkiH,EAAY,CACrC,IAAMvO,EAAM,KAAKA,IACbuO,GAAe,OACjBA,EAAavO,EAAIqD,WAEnB,IAAM3mH,EAAQ,KAAKsjH,IAAIz8F,OAAOgrG,CAAU,EACxC,GAAI7xH,EAAO,CACT,IAAI0zH,EAAaC,EACjB,IAAMC,EAAejkH,EAAK48B,QAC1BvsC,EAAMy8G,YACFmX,IAAiBn8B,EAAakxB,qBAChC3oH,EAAMw8G,gBAER,IAAI8P,EAAY,GACV,CACJzlG,OAAAA,EACA8/F,UAAAA,EACAxF,aAAAA,EACAC,aAAAA,CACF,EAAIkC,EACA,CAACA,EAAImB,kBAAoB,CAACnB,EAAIjqD,OAAOw6D,6BACvCvQ,EAAIqD,UAAY,IAElB,IAAMmN,GAAiBJ,EAAc/jH,EAAKqxF,OAAS,KAAO,OAAS0yB,EAAY3mH,KAEzEgnH,GADoBD,IAAkB97B,GAAkBE,OAAS07B,IAAiBn8B,EAAa25B,oBAAsBzhH,EAAKqkH,mBAAqB,UAAYJ,IAAiBn8B,EAAaixB,wBAA0BkL,IAAiBn8B,EAAakxB,uBAClM9hG,EAAO6W,KAAK,CAAC,CAChEk7E,WAAAA,CACF,IAAM54G,EAAM44G,aAAeA,CAAU,EAE/Bqb,EADoBtkH,EAAKqkH,mBAAqB,UAAYJ,IAAiBn8B,EAAaixB,wBAA0BkL,IAAiBn8B,EAAakxB,sBACjG9hG,EAAO6W,KAAK,CAAC,CAChEs4E,SAAAA,EACA4C,WAAAA,CACF,IAAM54G,EAAMg2G,WAAaA,GAAYh2G,EAAM44G,aAAeA,CAAU,EAC9D,CACJ7rG,KAAMmnH,EACNhb,QAASib,CACX,GAAKR,EAAiBhkH,EAAK2b,UAAY,KAAOqoG,EAAiB,CAAC,EAChE,QAASl9H,EAAIowB,EAAOnwB,OAAQD,KAAO,CACjC,IAAM2pH,GAAa3pH,EAAIkwH,GAAa9/F,EAAOnwB,OAC3C,GAAI0pH,IAAcuG,GAAavG,GAAae,GAAgBf,GAAagB,GAAgBv6F,EAAOu5F,CAAS,EAAE3D,YAAc,EAAG,CAC1H,IAAI2X,EAAoBC,EACxB,IAAMC,EAAiBztG,EAAOu5F,CAAS,EACvC,GAAIwT,IAAiBn8B,EAAa65B,UAAYwC,IAAkB97B,GAAkBC,MAAQtoF,EAAKqxF,KAAM,CACnG,IAAMgrB,EAAenlG,EAAOu5F,CAAS,EAAE7zE,QACvC,GAAIy/E,EAAc,CAChB,IAAMuI,EAAgBnH,GAAkBz9G,EAAKqxF,KAAMgrB,EAAaa,UAAWl9G,EAAKqxF,KAAK3sF,KAAK,EAC1F,GAAIkgH,GAAiB,MAAQA,EAAchyB,IACzC,QAEJ,CACF,KAAO,IAAI2xB,IAAsBv8B,GAAoBG,aAAew8B,EAAe3W,cAAcwW,CAAoB,GAAKD,IAAsBv8B,GAAoBI,gBAAkBu8B,EAAezW,iBAAiBsW,CAAoB,EACxO,SACK,GAAIL,IAAkB97B,GAAkBE,QAAUk8B,EAAqBp0H,EAAM24G,cAAgB,MAAQyb,EAAmB12F,KAAMw7E,GAAYob,EAAe3W,cAAczE,CAAO,CAAC,GAAK4a,IAAkB97B,GAAkBG,WAAak8B,EAAwBr0H,EAAM89G,iBAAmB,MAAQuW,EAAsB32F,KAAMw7E,GAAYob,EAAezW,iBAAiB3E,CAAO,CAAC,GAAK6a,GAA2B/zH,EAAM44G,aAAe0b,EAAe1b,YAAc,CAACmb,GAA2B/zH,EAAM44G,aAAe0b,EAAe1b,YAAcqb,GAA2Bj0H,EAAMg2G,WAAase,EAAete,SAChlB,SAEFsW,EAAYlM,EACZ,KACF,CACF,CACA,GAAIkM,EAAY,IAAMhJ,EAAIqD,YAAc2F,EACtC38G,OAAAA,EAAKoiH,WAAa,GAClB,KAAKzB,cAAgB,EACd,CACLkB,OAAQ5B,GAAmBE,0BAC3B7lC,MAAOgmC,GAAiBC,KACxBzJ,cAAe6F,CACjB,CAEJ,CACA,MAAO,CACLkF,OAAQ5B,GAAmBE,0BAC3B7lC,MAAOgmC,GAAiBE,6BAC1B,CACF,CACAO,WAAWvnH,EAAOwG,EAAM,CACtB,IAAI6kH,EACJ,QAASA,EAAoB7kH,EAAKuhH,cAAgB,KAAO,OAASsD,EAAkBhD,OAAM,CACxF,KAAK5B,GAAmBC,UACtB,MACF,KAAKD,GAAmBE,0BACtB,KAAK2E,0BAA0B9kH,CAAI,EAC/B,CAACA,EAAKuhH,YAAYwD,UAAY/kH,EAAK48B,UAAYkrD,EAAa65B,SAC9D3hH,EAAK84G,MAAQ,GACJ,gCAAgCxjH,KAAK0K,EAAK9P,MAAMP,OAAO,IAChE,KAAKK,KAAK,4BAA4BgQ,EAAKqkH,gBAAgB,sEAAsE,EACjI,KAAK1Q,IAAIqR,kBAAkB,GAE7B,KACJ,CACA,GAAIhlH,EAAK84G,MAAO,CACd,KAAKnF,IAAIuN,SAAS,EAClB,MACF,CACF,CACA4D,0BAA0B9kH,EAAM,CAC9B,IAAM2zG,EAAM,KAAKA,IACX4N,EAAcvhH,EAAKuhH,YACzB,GAAI,CAACA,EACH,OAEF,GAAM,CACJjnC,MAAAA,EACAuoC,UAAAA,EACA/L,cAAAA,CACF,EAAIyK,EACJ,OAAQjnC,EAAK,CACX,KAAKgmC,GAAiBC,KACpB,KAAK0E,YAAYjlH,EAAM82G,CAAa,EACpC,MACF,KAAKwJ,GAAiBG,8BAChBoC,IACFlP,EAAIuR,aAAevZ,GAAWA,GAAW/tG,QAAQilH,CAAS,EAAI,CAAC,EAC/DtB,EAAYwD,SAAW,IAEzB,KAAK/0H,KAAK,0CAA0C2jH,EAAIuR,YAAY,YAAY,EAChF,KACJ,CACK3D,EAAYwD,UACf,KAAKE,YAAYjlH,EAAM82G,CAAa,CAExC,CACAmO,YAAYjlH,EAAMkiH,EAAY,CAC5B,GAAIA,IAAe,QAAUliH,EAAKuhH,cAChC,KAAKvxH,KAAK,sBAAsBkyH,CAAU,UAAUliH,EAAK48B,OAAO,EAAE,EAClE,KAAK+2E,IAAImD,cAAgBoL,EACzBliH,EAAKuhH,YAAYwD,SAAW,GAC5B,KAAKpR,IAAI2C,cAAgB,KAAK3C,IAAImD,cAC9B92G,EAAK48B,UAAYkrD,EAAaixB,wBAA0B/4G,EAAKkoG,UAAYloG,EAAKqkH,mBAAqB,cAAc,CACnH,IAAM1sB,EAAQsQ,GAAqBjoG,EAAKkoG,QAAQ,EAC1ChxF,EAAS,KAAKy8F,IAAIz8F,OACxB,QAASpwB,EAAIowB,EAAOnwB,OAAQD,KACtBowB,EAAOpwB,CAAC,EAAE,GAAGkZ,EAAKqkH,gBAAgB,OAAO,IAAM1sB,GACjD,KAAKgc,IAAIyI,YAAYt1H,CAAC,CAG5B,CAEJ,CACF,EACA,SAAS46H,GAA2BqD,EAAU,CAC5C,IAAMxD,EAAc,CAClBM,OAAQ5B,GAAmBC,UAC3B5lC,MAAOgmC,GAAiBC,IAC1B,EACA,OAAIwE,IACFxD,EAAYwD,SAAW,IAElBxD,CACT,CACA,IAAI4D,GAAgB,CAClBC,WAAY,aACZC,UAAW,YACXC,QAAS,UACTC,GAAI,IACN,EACMC,GAAN,KAAsB,CACpB52H,YAAY+kH,EAAK,CACf,KAAK8R,gBAAkC5hI,OAAOkX,OAAO,IAAI,EACzD,KAAK2qH,iBAAmC7hI,OAAOkX,OAAO,IAAI,EAC1D,KAAKmiH,UAA4Br5H,OAAOkX,OAAO,IAAI,EACnD,KAAK4qH,WAA6B9hI,OAAOkX,OAAO,IAAI,EACpD,KAAK6qH,cAAgB,GACrB,KAAKjS,IAAM,OACX,KAAKkS,QAAU,GACf,KAAKlS,IAAMA,EACX,KAAKmS,mBAAmB,CAC1B,CACAA,oBAAqB,CACnB,GAAM,CACJnS,IAAAA,CACF,EAAI,KACJA,EAAInvF,GAAG2wC,EAAOuiD,iBAAkB,KAAKC,kBAAmB,IAAI,EAC5DhE,EAAInvF,GAAG2wC,EAAO4wD,gBAAiB,KAAKC,iBAAkB,IAAI,EAC1DrS,EAAInvF,GAAG2wC,EAAO6iD,cAAe,KAAKC,eAAgB,IAAI,EACtDtE,EAAInvF,GAAG2wC,EAAO2iD,YAAa,KAAKC,aAAc,IAAI,CACpD,CACAkO,sBAAuB,CACrB,GAAM,CACJtS,IAAAA,CACF,EAAI,KACJA,EAAI/7F,IAAIu9C,EAAOuiD,iBAAkB,KAAKC,kBAAmB,IAAI,EAC7DhE,EAAI/7F,IAAIu9C,EAAO4wD,gBAAiB,KAAKC,iBAAkB,IAAI,EAC3DrS,EAAI/7F,IAAIu9C,EAAO6iD,cAAe,KAAKC,eAAgB,IAAI,EACvDtE,EAAI/7F,IAAIu9C,EAAO2iD,YAAa,KAAKC,aAAc,IAAI,CACrD,CACAj4B,SAAU,CACR,KAAKmmC,qBAAqB,EAC1B,KAAK/I,UACL,KAAKuI,gBACL,KAAKC,iBAAmB,KAAKC,WAAa,IAC5C,CAKAO,gBAAgBtyH,EAAUuyH,EAAW,CACnC,IAAMC,EAAc,KAAKX,gBAAgBU,CAAS,EAClD,GAAIC,EACF,QAASt/H,EAAIs/H,EAAYr/H,OAAQD,KAAO,CACtC,IAAMu/H,EAAaD,EAAYt/H,CAAC,EAChC,GAAI,CAACu/H,EACH,MAEF,IAAMC,EAAcD,EAAWxhH,IAC/B,GAAIwhH,EAAW3hH,OAAS9Q,GAAY0yH,IAAgB,MAAQ1yH,GAAY0yH,EACtE,OAAOD,CAEX,CAEF,OAAO,KAAKE,gBAAgB3yH,EAAUuyH,CAAS,CACjD,CAMAI,gBAAgB3yH,EAAUuyH,EAAW,CACnC,OAAO,KAAKK,aAAa5yH,EAAUuyH,EAAW,EAAI,CACpD,CACAK,aAAa5yH,EAAUuyH,EAAWpzF,EAAU,CAC1C,GAAM,CACJmqF,UAAAA,CACF,EAAI,KACEl1H,EAAOnE,OAAOmE,KAAKk1H,CAAS,EAClC,QAASp2H,EAAIkB,EAAKjB,OAAQD,KAAO,CAC/B,IAAM2/H,EAAiBvJ,EAAUl1H,EAAKlB,CAAC,CAAC,EACxC,GAAuC2/H,GAAet1H,KAAKiM,OAAU+oH,IAAc,CAACpzF,GAAY0zF,EAAe1zF,UAAW,CACxH,IAAMs+D,EAAOo1B,EAAet1H,KAC5B,GAAIkgG,EAAK3sF,OAAS9Q,GAAYA,GAAYy9F,EAAKxsF,IAC7C,OAAOwsF,CAEX,CACF,CACA,OAAO,IACT,CAMAq1B,uBAAuBC,EAAkBC,EAAWC,EAAcC,EAAcC,EAAiB,CAC3F,KAAKpB,aACP,KAAKA,WAAWgB,CAAgB,EAAIC,GAEtC,IAAMI,EAAkDF,GAAa73B,SAASqC,IAAO,GACrFztG,OAAOmE,KAAK,KAAKk1H,SAAS,EAAEh0H,QAASjF,GAAQ,CAC3C,IAAMwiI,EAAiB,KAAKvJ,UAAUj5H,CAAG,EAIzC,GAHI,CAACwiI,GAGDO,GAAkBP,EAAet1H,KAAKmgG,GACxC,OAEF,GAAI,CAACm1B,EAAe1zF,WAAa,CAAC0zF,EAAel3B,QAAUw3B,GAAkB,CACvEN,EAAet1H,KAAKiM,OAASypH,GAC/B,KAAKI,eAAeR,EAAet1H,IAAI,EAEzC,MACF,CACA,IAAM+1H,EAAST,EAAepW,MAAMsW,CAAgB,EACpD,GAAKO,EAGL,IAAIA,EAAOrhI,KAAKkB,SAAW,EAAG,CAC5B,KAAKkgI,eAAeR,EAAet1H,IAAI,EACvC,MACF,CACA+1H,EAAOrhI,KAAKkoC,KAAMloC,GAAS,CACzB,IAAMshI,EAAgB,CAAC,KAAKC,eAAevhI,EAAKosG,SAAUpsG,EAAKqsG,OAAQ00B,CAAS,EAChF,OAAIO,GACF,KAAKF,eAAeR,EAAet1H,IAAI,EAElCg2H,CACT,CAAC,EACH,CAAC,CACH,CAKAE,uBAAuBrnH,EAAM,CAC3B,IAAM2lH,EAAa,KAAKA,WACxB,GAAI,CAACA,GAAc3lH,EAAKqxF,KAAKC,KAAO,cAClC,OAEF,IAAMD,EAAOrxF,EAAKqxF,KACZi2B,EAAUC,GAAel2B,CAAI,EAC7Bo1B,EAAiB,KAAKvJ,UAAUoK,CAAO,EAC7C,GAAI,CAACb,GAAkBA,EAAe1zF,UAAYs+D,EAAKuB,IACrD,OAEF,IAAM40B,EAAa,CAACn2B,EAAKd,OACzB1sG,OAAOmE,KAAK29H,CAAU,EAAEz8H,QAASy9H,GAAqB,CACpD,IAAMc,EAAap2B,EAAKN,kBAAkB41B,CAAgB,EAC1D,GAAI,CAACc,EACH,OAEF,IAAMb,EAAYjB,EAAWgB,CAAgB,EACvCzyB,EAAUszB,GAAcC,EAAWvzB,UAAY,GACrDuyB,EAAepW,MAAMsW,CAAgB,EAAI,KAAKe,iBAAiBr2B,EAAMrxF,EAAK83C,KAAMo8C,EAAS0yB,CAAS,CACpG,CAAC,EACDH,EAAel3B,OAAS,KACpB1rG,OAAOmE,KAAKy+H,EAAepW,KAAK,EAAEtpH,QACpC0/H,EAAe1zF,SAAW,IACV0zF,EAAet1H,KAAKwhG,QAAUtB,EAAKsB,SAAW8zB,EAAet1H,KAAKwhG,WAEhF,KAAK+yB,iBAAiBe,EAAet1H,KAAKiM,IAAI,EAAIqpH,GAE/CkB,GAAUlB,CAAc,GAC3B,KAAKmB,YAAYv2B,EAAKC,GAAK,EAAGD,EAAKj0F,IAAI,GAGzC,KAAK6pH,eAAeR,EAAet1H,IAAI,CAE3C,CACAy2H,YAAYC,EAAU1B,EAAW,CAC/B,IAAMC,EAAc,KAAKX,gBAAgBU,CAAS,EAC7CC,IAGL,KAAKX,gBAAgBU,CAAS,EAAI2B,GAAY1B,EAActuE,GAASA,EAAKm3C,SAASqC,IAAMu2B,CAAQ,EACnG,CACAE,aAAa12B,EAAM22B,EAAO,CACxB,IAAMV,EAAUC,GAAel2B,CAAI,EAC/Bo1B,EAAiB,KAAKvJ,UAAUoK,CAAO,EACvC,CAACb,GAAkBuB,IACrBvB,EAAiB,KAAKvJ,UAAUoK,CAAO,EAAI,CACzCn2H,KAAMkgG,EACNi1B,YAAa,KACb/2B,OAAQ,KACRx8D,SAAU,GACVs9E,MAAuBxsH,OAAOkX,OAAO,IAAI,CAC3C,EACIs2F,EAAKuB,MACP,KAAKizB,QAAU,KAGfY,IACFA,EAAel3B,OAAS,KACxBk3B,EAAe1zF,SAAW,GAE9B,CACA20F,iBAAiBz4B,EAAUn3C,EAAMo8C,EAAS0yB,EAAW,CACnD,IAAM7zF,EAAW,CACfltC,KAAM,CAAA,EACNquG,QAAAA,CACF,EACMjC,EAAWhD,EAASvqF,MACpBwtF,EAASjD,EAASpqF,IAClB2tF,EAAYvD,EAASuD,WAAaN,EAClCK,EAActD,EAASsD,aAAeN,EAC5C,QAASnrG,EAAI,EAAGA,EAAI8/H,EAAU7/H,OAAQD,IAAK,CACzC,IAAMkD,EAAY48H,EAAUliH,MAAM5d,CAAC,EAAI,KAAK8+H,cACtC1gH,EAAU0hH,EAAU/hH,IAAI/d,CAAC,EAAI,KAAK8+H,cACxC,GAAIrzB,GAAevoG,GAAawoG,GAAattF,EAAS,CACpD6tB,EAASltC,KAAK2K,KAAK,CACjByhG,SAAUnsG,KAAKwG,IAAI2lG,EAAU20B,EAAUliH,MAAM5d,CAAC,CAAC,EAC/CorG,OAAQpsG,KAAKgmB,IAAIomF,EAAQ00B,EAAU/hH,IAAI/d,CAAC,CAAC,CAC3C,CAAC,EACD,KACF,SAAWmrG,EAAW/sF,GAAWgtF,EAASloG,EAAW,CACnD,IAAM0a,EAAQ5e,KAAKwG,IAAI2lG,EAAU20B,EAAUliH,MAAM5d,CAAC,CAAC,EAC7C+d,EAAM/e,KAAKgmB,IAAIomF,EAAQ00B,EAAU/hH,IAAI/d,CAAC,CAAC,EACzC+d,EAAMH,IACRquB,EAASmhE,QAAU,GACnBnhE,EAASltC,KAAK2K,KAAK,CACjByhG,SAAUvtF,EACVwtF,OAAQrtF,CACV,CAAC,EAEL,SAAWqtF,GAAUloG,EACnB,KAEJ,CACA,OAAO+oC,CACT,CAIAk1F,mBAAmBpiI,EAAM,CACvB,IAAIqiI,EAAe,KACfC,EACAn+H,EACAkb,EACAkjH,EAAc,EACZ,CACJxC,cAAAA,EACA1I,UAAAA,CACF,EAAI,KACJr5H,cAAOmE,KAAKk1H,CAAS,EAAEh0H,QAASjF,GAAQ,CACtC,IAAMwiI,EAAiBvJ,EAAUj5H,CAAG,EAC/BwiI,GAGDkB,GAAUlB,CAAc,IAC1Bz8H,EAAYy8H,EAAet1H,KAAKuT,MAAQkhH,EACxC1gH,EAAUuhH,EAAet1H,KAAK0T,IAAM+gH,EAChC//H,GAAQmE,GAAanE,GAAQqf,IAC/BijH,EAAcriI,KAAKgmB,IAAIjmB,EAAOmE,EAAWkb,EAAUrf,CAAI,EACnDuiI,GAAeD,IACjBD,EAAezB,EAAet1H,KAC9Bi3H,EAAcD,IAItB,CAAC,EACMD,CACT,CACAG,kBAAkBjrH,EAAM,CACtB,IAAMkrH,EAAqB,KAAK5C,iBAAiBtoH,CAAI,EACrD,OAAOkrH,IAAuB,SAAWA,EAAmBv1F,UAAY40F,GAAUW,CAAkB,EACtG,CACAC,SAASt5B,EAAU,CACjB,IAAMq4B,EAAUC,GAAet4B,CAAQ,EACjCw3B,EAAiB,KAAKvJ,UAAUoK,CAAO,EAC7C,OAAIb,EACGA,EAAe1zF,SAET40F,GAAUlB,CAAc,EAC1BtB,GAAcG,QAEdH,GAAcI,GAJdJ,GAAcE,UAOlBF,GAAcC,UACvB,CACAgC,eAAen1B,EAAUC,EAAQ00B,EAAW,CAC1C,IAAI58H,EACAkb,EACJ,QAASpe,EAAI,EAAGA,EAAI8/H,EAAU7/H,OAAQD,IAAK,CAGzC,GAFAkD,EAAY48H,EAAUliH,MAAM5d,CAAC,EAAI,KAAK8+H,cACtC1gH,EAAU0hH,EAAU/hH,IAAI/d,CAAC,EAAI,KAAK8+H,cAC9B3zB,GAAYjoG,GAAakoG,GAAUhtF,EACrC,MAAO,GAET,GAAIgtF,GAAUloG,EACZ,MAAO,EAEX,CACA,MAAO,EACT,CACA2tH,mBAAoB,CAClB,KAAK6Q,mBAAmB,CAC1B,CACAzQ,aAAav+G,EAAOwG,EAAM,CACxB,GAAIA,EAAKqxF,KAAKC,KAAO,eAAiBtxF,EAAKqxF,KAAKoB,YAC9C,OAEF,IAAMpB,EAAOrxF,EAAKqxF,KACZ9B,EAASvvF,EAAK83C,KAAO,KAAO93C,EAC5BsnH,EAAUC,GAAel2B,CAAI,EACnC,KAAK6rB,UAAUoK,CAAO,EAAI,CACxBn2H,KAAMkgG,EACNi1B,YAAa,KACb/2B,OAAAA,EACAx8D,SAAU,GACVs9E,MAAuBxsH,OAAOkX,OAAO,IAAI,CAC3C,CACF,CACAirH,iBAAiBxsH,EAAOwG,EAAM,CAC5B,GAAM,CACJqxF,KAAAA,EACAv5C,KAAAA,EACA6tE,WAAAA,EACAvoH,KAAAA,CACF,EAAI4C,EACJ,GAAIqxF,EAAKC,KAAO,cACd,OAEF,IAAMu1B,EAAex1B,EAAKj0F,KAC1B,GAAI06C,EAAM,CACR,IAAIsuE,EAAc,KAAKX,gBAAgBoB,CAAY,EAC9CT,IACH,KAAKX,gBAAgBoB,CAAY,EAAIT,EAAc,CAAA,GAErDA,EAAY51H,KAAKsnD,CAAI,CACvB,CACA,KAAK6tE,WAAaA,EAClB,IAAMiB,EAAYjB,EAAWvoH,CAAI,EACjC,KAAKspH,uBAAuBtpH,EAAMwpH,EAAWC,EAAc/uE,CAAI,CACjE,CACAmgE,eAAez+G,EAAOwG,EAAM,CAC1B,KAAKqnH,uBAAuBrnH,CAAI,CAClC,CACAyoH,YAAYx5B,EAAU,CACpB,IAAMq4B,EAAUC,GAAet4B,CAAQ,EACvC,MAAO,CAAC,CAAC,KAAKiuB,UAAUoK,CAAO,CACjC,CACAoB,aAAatrH,EAAM,CACjB,GAAM,CACJ8/G,UAAAA,CACF,EAAI,KACEl1H,EAAOnE,OAAOmE,KAAKk1H,CAAS,EAClC,GAAI,CAAC9/G,EACH,OAAOpV,EAAKjB,OAAS,EAEvB,QAASD,EAAIkB,EAAKjB,OAAQD,KAAO,CAC/B,IAAM2/H,EAAiBvJ,EAAUl1H,EAAKlB,CAAC,CAAC,EACxC,GAAuC2/H,GAAet1H,KAAKiM,OAAUA,EACnE,MAAO,EAEX,CACA,MAAO,EACT,CACAurH,SAASvrH,EAAM,CACb,IAAIwrH,EACJ,MAAO,CAAC,GAAGA,EAAwB,KAAKnD,gBAAgBroH,CAAI,IAAM,MAAQwrH,EAAsB7hI,OAClG,CACA8hI,uBAAuBnkH,EAAOG,EAAKgiH,EAAciC,EAAaC,EAAgB,CACxED,GAAe,CAAC,KAAKjD,SAGzBhiI,OAAOmE,KAAK,KAAKk1H,SAAS,EAAEh0H,QAASjF,GAAQ,CAC3C,IAAMwiI,EAAiB,KAAKvJ,UAAUj5H,CAAG,EACzC,GAAI,CAACwiI,EACH,OAEF,IAAMp1B,EAAOo1B,EAAet1H,KACxBkgG,EAAKj0F,OAASypH,GAAgBiC,GAAe,CAACz3B,EAAKuB,KAGnDvB,EAAK3sF,MAAQG,GAAOwsF,EAAKxsF,IAAMH,IAAU+hH,EAAe1zF,UAAYg2F,IACtE,KAAK9B,eAAe51B,CAAI,CAE5B,CAAC,CACH,CACA41B,eAAeh4B,EAAU,CACvB,IAAMq4B,EAAUC,GAAet4B,CAAQ,EACvCA,EAASkC,0BAA0B,EACnC,IAAMi1B,EAAc,KAAKX,gBAAgBx2B,EAAS7xF,IAAI,EACtD,GAAIgpH,EAAa,CACf,IAAM4C,EAAa/5B,EAASqC,GAC5B,KAAKm0B,gBAAgBx2B,EAAS7xF,IAAI,EAAI0qH,GAAY1B,EAActuE,GAASA,EAAKm3C,SAASqC,KAAO03B,CAAU,CAC1G,CACA,OAAO,KAAK9L,UAAUoK,CAAO,EACzBr4B,EAAS0D,SACX,OAAO,KAAK+yB,iBAAiBz2B,EAAS7xF,IAAI,CAE9C,CACAorH,oBAAqB,CACnB,IAAIS,EAAW1N,EACf,KAAK2B,UAA4Br5H,OAAOkX,OAAO,IAAI,EACnD,KAAK2qH,iBAAmC7hI,OAAOkX,OAAO,IAAI,EAC1D,KAAK0qH,gBAAkC5hI,OAAOkX,OAAO,IAAI,EACzD,KAAK8qH,QAAU,GACf,IAAMqD,GAAYD,EAAY,KAAKtV,MAAQ,OAAiB4H,EAAwB0N,EAAU/S,qBAAuB,KAAnE,OAAmFqF,EAAsB4N,SACvJD,GACFA,EAAShgI,QAAS4uD,GAASA,EAAKq5C,0BAA0B,CAAC,CAE/D,CACF,EACA,SAASw2B,GAAUlB,EAAgB,CACjC,IAAI2C,EAAuBC,EAAwBC,EACnD,OAAO7C,EAAe1zF,WAAa0zF,EAAet1H,KAAKyhG,OAASw2B,EAAwB3C,EAAepW,MAAM9mH,QAAU,KAAO,OAAS6/H,EAAsBl1B,YAAcm1B,EAAyB5C,EAAepW,MAAM1vE,QAAU,KAAO,OAAS0oF,EAAuBn1B,YAAco1B,EAAyB7C,EAAepW,MAAM5b,aAAe,KAAO,OAAS60B,EAAuBp1B,SAC9X,CACA,SAASqzB,GAAet4B,EAAU,CAChC,MAAO,GAAGA,EAAS7xF,IAAI,IAAI6xF,EAAS5+F,KAAK,IAAI4+F,EAASqC,EAAE,EAC1D,CACA,SAASw2B,GAAYqB,EAAUhsG,EAAW,CACxC,OAAOgsG,EAASpxG,OAAQ+/B,GAAS,CAC/B,IAAMyxE,EAAOpsG,EAAU26B,CAAI,EAC3B,OAAKyxE,GACHzxE,EAAKq5C,0BAA0B,EAE1Bo4B,CACT,CAAC,CACH,CACA,IAAIC,GAAmB,CACrBC,IAAK,EACLC,IAAK,CACP,EACMC,GAAN,KAAgB,CACd/6H,YAAYg7H,EAAQC,EAAIC,EAAS,CAC/B,KAAKF,OAAS,OACd,KAAKG,MAAQ,OACb,KAAKD,QAAU,OACf,KAAKF,OAASA,EACd,KAAKG,MAAQF,EACb,KAAKC,QAAUA,CACjB,CACAE,QAAQhqH,EAAM/b,EAAK,CACjB,OAAQ,KAAK6lI,QAAO,CAClB,KAAKN,GAAiBC,IACpB,OAAO,KAAKG,OAAOI,QAAQ,CACzB58H,KAAM,UACNy8H,GAAI,KAAKE,KACX,EAAG9lI,EAAK+b,CAAI,EACd,KAAKwpH,GAAiBE,IACpB,OAAO,KAAKE,OAAOI,QACjB,CACE58H,KAAM,UACN68H,QAAS,KAAKF,MACdhjI,OAAQ,EACV,EAEA9C,EACA+b,CACF,EACF,QACE,MAAM,IAAIlO,MAAM,gCAAgC,KAAKg4H,OAAO,EAAE,CAClE,CACF,CACF,EACA,SAASI,GAAc3rH,EAAO,CAC5B,IAAM4rH,EAAc5rH,EAAMu0F,WACpBs3B,EAAeD,GAAe,IAAIxoB,SAASpjG,EAAMwQ,MAAM,EAAEs7G,SAASF,EAAc,CAAC,EACvF,OAAIC,EACK7rH,EAAMV,MAAM,EAAGssH,EAAcC,CAAY,EAE3C7rH,CACT,CACA,IAAM+rH,GAAN,KAAmB,CACjB17H,aAAc,CACZ,KAAK27H,KAAO,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,GAAI,GAAI,GAAI,IAAK,GAAI,EAAE,EACnD,KAAKC,OAAS,CAAC,IAAIC,YAAY,GAAG,EAAG,IAAIA,YAAY,GAAG,EAAG,IAAIA,YAAY,GAAG,EAAG,IAAIA,YAAY,GAAG,CAAC,EACrG,KAAKC,UAAY,CAAC,IAAID,YAAY,GAAG,EAAG,IAAIA,YAAY,GAAG,EAAG,IAAIA,YAAY,GAAG,EAAG,IAAIA,YAAY,GAAG,CAAC,EACxG,KAAKE,KAAO,IAAIF,YAAY,GAAG,EAC/B,KAAKG,QAAU,IAAIH,YAAY,GAAG,EAClC,KAAKxmI,IAAM,IAAIwmI,YAAY,CAAC,EAC5B,KAAKI,OAAS,EACd,KAAKC,QAAU,EACf,KAAKC,YAAc,OACnB,KAAKC,eAAiB,OACtB,KAAKC,UAAU,CACjB,CAEAC,yBAAyBC,EAAa,CACpC,IAAMC,EAAQ,IAAIzpB,SAASwpB,CAAW,EAChCE,EAAW,IAAIZ,YAAY,CAAC,EAClC,QAAS3jI,EAAI,EAAGA,EAAI,EAAGA,IACrBukI,EAASvkI,CAAC,EAAIskI,EAAME,UAAUxkI,EAAI,CAAC,EAErC,OAAOukI,CACT,CACAJ,WAAY,CACV,IAAMN,EAAO,KAAKA,KACZC,EAAU,KAAKA,QACfJ,EAAS,KAAKA,OACde,EAAUf,EAAO,CAAC,EAClBgB,EAAUhB,EAAO,CAAC,EAClBiB,EAAUjB,EAAO,CAAC,EAClBkB,EAAUlB,EAAO,CAAC,EAClBE,EAAY,KAAKA,UACjBiB,EAAajB,EAAU,CAAC,EACxBkB,EAAalB,EAAU,CAAC,EACxBmB,EAAanB,EAAU,CAAC,EACxBoB,EAAapB,EAAU,CAAC,EACxB/zH,EAAI,IAAI8zH,YAAY,GAAG,EACzBz0H,EAAI,EACJ+1H,EAAK,EACLjlI,EAAI,EACR,IAAKA,EAAI,EAAGA,EAAI,IAAKA,IACfA,EAAI,IACN6P,EAAE7P,CAAC,EAAIA,GAAK,EAEZ6P,EAAE7P,CAAC,EAAIA,GAAK,EAAI,IAGpB,IAAKA,EAAI,EAAGA,EAAI,IAAKA,IAAK,CACxB,IAAIklI,EAAKD,EAAKA,GAAM,EAAIA,GAAM,EAAIA,GAAM,EAAIA,GAAM,EAClDC,EAAKA,IAAO,EAAIA,EAAK,IAAM,GAC3BrB,EAAK30H,CAAC,EAAIg2H,EACVpB,EAAQoB,CAAE,EAAIh2H,EACd,IAAMi2H,EAAKt1H,EAAEX,CAAC,EACRk2H,EAAKv1H,EAAEs1H,CAAE,EACTE,EAAKx1H,EAAEu1H,CAAE,EACX5zH,EAAI3B,EAAEq1H,CAAE,EAAI,IAAMA,EAAK,SAC3BT,EAAQv1H,CAAC,EAAIsC,GAAK,GAAKA,IAAM,EAC7BkzH,EAAQx1H,CAAC,EAAIsC,GAAK,GAAKA,IAAM,GAC7BmzH,EAAQz1H,CAAC,EAAIsC,GAAK,EAAIA,IAAM,GAC5BozH,EAAQ11H,CAAC,EAAIsC,EACbA,EAAI6zH,EAAK,SAAWD,EAAK,MAAQD,EAAK,IAAMj2H,EAAI,SAChD21H,EAAWK,CAAE,EAAI1zH,GAAK,GAAKA,IAAM,EACjCszH,EAAWI,CAAE,EAAI1zH,GAAK,GAAKA,IAAM,GACjCuzH,EAAWG,CAAE,EAAI1zH,GAAK,EAAIA,IAAM,GAChCwzH,EAAWE,CAAE,EAAI1zH,EACZtC,GAGHA,EAAIi2H,EAAKt1H,EAAEA,EAAEA,EAAEw1H,EAAKF,CAAE,CAAC,CAAC,EACxBF,GAAMp1H,EAAEA,EAAEo1H,CAAE,CAAC,GAHb/1H,EAAI+1H,EAAK,CAKb,CACF,CACAK,UAAUC,EAAW,CACnB,IAAMpoI,EAAM,KAAKinI,yBAAyBmB,CAAS,EAC/CC,EAAU,GACVn3B,EAAS,EACb,KAAOA,EAASlxG,EAAI8C,QAAUulI,GAC5BA,EAAUroI,EAAIkxG,CAAM,IAAM,KAAKlxG,IAAIkxG,CAAM,EACzCA,IAEF,GAAIm3B,EACF,OAEF,KAAKroI,IAAMA,EACX,IAAM6mI,EAAU,KAAKA,QAAU7mI,EAAI8C,OACnC,GAAI+jI,IAAY,GAAKA,IAAY,GAAKA,IAAY,EAChD,MAAM,IAAIh5H,MAAM,wBAA0Bg5H,CAAO,EAEnD,IAAMD,EAAS,KAAKA,QAAUC,EAAU,EAAI,GAAK,EAC7CyB,EACAC,EACEzB,EAAc,KAAKA,YAAc,IAAIN,YAAYI,CAAM,EACvDG,EAAiB,KAAKA,eAAiB,IAAIP,YAAYI,CAAM,EAC7D4B,EAAO,KAAK9B,KACZJ,EAAO,KAAKA,KACZG,EAAY,KAAKA,UACjBiB,EAAajB,EAAU,CAAC,EACxBkB,EAAalB,EAAU,CAAC,EACxBmB,EAAanB,EAAU,CAAC,EACxBoB,EAAapB,EAAU,CAAC,EAC1B/pC,EACAroF,EACJ,IAAKi0H,EAAQ,EAAGA,EAAQ1B,EAAQ0B,IAAS,CACvC,GAAIA,EAAQzB,EAAS,CACnBnqC,EAAOoqC,EAAYwB,CAAK,EAAItoI,EAAIsoI,CAAK,EACrC,QACF,CACAj0H,EAAIqoF,EACA4rC,EAAQzB,IAAY,GACtBxyH,EAAIA,GAAK,EAAIA,IAAM,GACnBA,EAAIm0H,EAAKn0H,IAAM,EAAE,GAAK,GAAKm0H,EAAKn0H,IAAM,GAAK,GAAG,GAAK,GAAKm0H,EAAKn0H,IAAM,EAAI,GAAG,GAAK,EAAIm0H,EAAKn0H,EAAI,GAAG,EAC/FA,GAAKiyH,EAAKgC,EAAQzB,EAAU,CAAC,GAAK,IACzBA,EAAU,GAAKyB,EAAQzB,IAAY,IAC5CxyH,EAAIm0H,EAAKn0H,IAAM,EAAE,GAAK,GAAKm0H,EAAKn0H,IAAM,GAAK,GAAG,GAAK,GAAKm0H,EAAKn0H,IAAM,EAAI,GAAG,GAAK,EAAIm0H,EAAKn0H,EAAI,GAAG,GAEjGyyH,EAAYwB,CAAK,EAAI5rC,GAAQoqC,EAAYwB,EAAQzB,CAAO,EAAIxyH,KAAO,CACrE,CACA,IAAKk0H,EAAW,EAAGA,EAAW3B,EAAQ2B,IACpCD,EAAQ1B,EAAS2B,EACbA,EAAW,EACbl0H,EAAIyyH,EAAYwB,CAAK,EAErBj0H,EAAIyyH,EAAYwB,EAAQ,CAAC,EAEvBC,EAAW,GAAKD,GAAS,EAC3BvB,EAAewB,CAAQ,EAAIl0H,EAE3B0yH,EAAewB,CAAQ,EAAIb,EAAWc,EAAKn0H,IAAM,EAAE,CAAC,EAAIszH,EAAWa,EAAKn0H,IAAM,GAAK,GAAG,CAAC,EAAIuzH,EAAWY,EAAKn0H,IAAM,EAAI,GAAG,CAAC,EAAIwzH,EAAWW,EAAKn0H,EAAI,GAAG,CAAC,EAEvJ0yH,EAAewB,CAAQ,EAAIxB,EAAewB,CAAQ,IAAM,CAE5D,CAEAE,uBAAuBC,EAAM,CAC3B,OAAOA,GAAQ,IAAMA,EAAO,QAAU,GAAKA,EAAO,WAAa,EAAIA,IAAS,EAC9E,CACA3C,QAAQ4C,EAAkBz3B,EAAQ40B,EAAO,CACvC,IAAM8C,EAAU,KAAK/B,QAAU,EACzBE,EAAiB,KAAKA,eACtB8B,EAAU,KAAKlC,QACfF,EAAY,KAAKA,UACjBiB,EAAajB,EAAU,CAAC,EACxBkB,EAAalB,EAAU,CAAC,EACxBmB,EAAanB,EAAU,CAAC,EACxBoB,EAAapB,EAAU,CAAC,EACxBqC,EAAa,KAAK7B,yBAAyBnB,CAAK,EAClDiD,EAAcD,EAAW,CAAC,EAC1BE,EAAcF,EAAW,CAAC,EAC1BG,EAAcH,EAAW,CAAC,EAC1BI,EAAcJ,EAAW,CAAC,EACxBK,EAAa,IAAIC,WAAWT,CAAgB,EAC5CU,EAAc,IAAID,WAAWD,EAAWrmI,MAAM,EAChDwmI,EAAIC,EAAIhzH,EAAIizH,EACZC,EAAIC,EAAI7hF,EAAI8hF,EACZC,EAAaC,EAAaC,GAAaC,GACvCzB,GAAOzlI,GACLmnI,GAAW,KAAKvB,uBACtB,KAAOv3B,EAASi4B,EAAWrmI,QAAQ,CAUjC,IATA8mI,EAAcI,GAASb,EAAWj4B,CAAM,CAAC,EACzC24B,EAAcG,GAASb,EAAWj4B,EAAS,CAAC,CAAC,EAC7C44B,GAAcE,GAASb,EAAWj4B,EAAS,CAAC,CAAC,EAC7C64B,GAAcC,GAASb,EAAWj4B,EAAS,CAAC,CAAC,EAC7Cu4B,EAAKG,EAAc7C,EAAe,CAAC,EACnC2C,EAAKK,GAAchD,EAAe,CAAC,EACnCl/E,EAAKiiF,GAAc/C,EAAe,CAAC,EACnC4C,EAAKE,EAAc9C,EAAe,CAAC,EACnCuB,GAAQ,EACHzlI,GAAI,EAAGA,GAAI+lI,EAAS/lI,KACvBymI,EAAK5B,EAAW+B,IAAO,EAAE,EAAI9B,EAAW+B,GAAM,GAAK,GAAG,EAAI9B,EAAW//E,GAAM,EAAI,GAAG,EAAIggF,EAAW8B,EAAK,GAAG,EAAI5C,EAAeuB,EAAK,EACjIiB,EAAK7B,EAAWgC,IAAO,EAAE,EAAI/B,EAAW9/E,GAAM,GAAK,GAAG,EAAI+/E,EAAW+B,GAAM,EAAI,GAAG,EAAI9B,EAAW4B,EAAK,GAAG,EAAI1C,EAAeuB,GAAQ,CAAC,EACrI/xH,EAAKmxH,EAAW7/E,IAAO,EAAE,EAAI8/E,EAAWgC,GAAM,GAAK,GAAG,EAAI/B,EAAW6B,GAAM,EAAI,GAAG,EAAI5B,EAAW6B,EAAK,GAAG,EAAI3C,EAAeuB,GAAQ,CAAC,EACrIkB,EAAK9B,EAAWiC,IAAO,EAAE,EAAIhC,EAAW8B,GAAM,GAAK,GAAG,EAAI7B,EAAW8B,GAAM,EAAI,GAAG,EAAI7B,EAAWhgF,EAAK,GAAG,EAAIk/E,EAAeuB,GAAQ,CAAC,EACrImB,EAAKH,EACLI,EAAKH,EACL1hF,EAAKtxC,EACLozH,EAAKH,EACLlB,GAAQA,GAAQ,EAElBgB,EAAKT,EAAQY,IAAO,EAAE,GAAK,GAAKZ,EAAQa,GAAM,GAAK,GAAG,GAAK,GAAKb,EAAQhhF,GAAM,EAAI,GAAG,GAAK,EAAIghF,EAAQc,EAAK,GAAG,EAAI5C,EAAeuB,EAAK,EACtIiB,EAAKV,EAAQa,IAAO,EAAE,GAAK,GAAKb,EAAQhhF,GAAM,GAAK,GAAG,GAAK,GAAKghF,EAAQc,GAAM,EAAI,GAAG,GAAK,EAAId,EAAQY,EAAK,GAAG,EAAI1C,EAAeuB,GAAQ,CAAC,EAC1I/xH,EAAKsyH,EAAQhhF,IAAO,EAAE,GAAK,GAAKghF,EAAQc,GAAM,GAAK,GAAG,GAAK,GAAKd,EAAQY,GAAM,EAAI,GAAG,GAAK,EAAIZ,EAAQa,EAAK,GAAG,EAAI3C,EAAeuB,GAAQ,CAAC,EAC1IkB,EAAKX,EAAQc,IAAO,EAAE,GAAK,GAAKd,EAAQY,GAAM,GAAK,GAAG,GAAK,GAAKZ,EAAQa,GAAM,EAAI,GAAG,GAAK,EAAIb,EAAQhhF,EAAK,GAAG,EAAIk/E,EAAeuB,GAAQ,CAAC,EAC1Ie,EAAYn4B,CAAM,EAAI84B,GAASV,EAAKP,CAAW,EAC/CM,EAAYn4B,EAAS,CAAC,EAAI84B,GAASR,EAAKR,CAAW,EACnDK,EAAYn4B,EAAS,CAAC,EAAI84B,GAASzzH,EAAK0yH,CAAW,EACnDI,EAAYn4B,EAAS,CAAC,EAAI84B,GAAST,EAAKL,CAAW,EACnDH,EAAca,EACdZ,EAAca,EACdZ,EAAca,GACdZ,EAAca,GACd74B,EAASA,EAAS,CACpB,CACA,OAAOm4B,EAAYv+G,MACrB,CACF,EACMm/G,GAAN,KAAiB,CACft/H,YAAYg7H,EAAQ3lI,EAAK6lI,EAAS,CAChC,KAAKF,OAAS,OACd,KAAK3lI,IAAM,OACX,KAAK6lI,QAAU,OACf,KAAKF,OAASA,EACd,KAAK3lI,IAAMA,EACX,KAAK6lI,QAAUA,CACjB,CACAsC,WAAY,CACV,IAAM+B,EAAiBC,GAAkB,KAAKtE,OAAO,EACrD,OAAO,KAAKF,OAAOyE,UAAU,MAAO,KAAKpqI,IAAK,CAC5CmJ,KAAM+gI,CACR,EAAG,GAAO,CAAC,UAAW,SAAS,CAAC,CAClC,CACF,EACA,SAASC,GAAkBtE,EAAS,CAClC,OAAQA,EAAO,CACb,KAAKN,GAAiBC,IACpB,MAAO,UACT,KAAKD,GAAiBE,IACpB,MAAO,UACT,QACE,MAAM,IAAI53H,MAAM,iCAAiCg4H,CAAO,EAAE,CAC9D,CACF,CACA,IAAMwE,GAAa,GACbC,GAAN,KAAgB,CACd3/H,YAAY86D,EAAQ,CAClB8kE,mBAAAA,EAAqB,EACvB,EAAI,CAAC,EAAG,CAcN,GAbA,KAAKC,WAAa,GAClB,KAAKD,mBAAqB,OAC1B,KAAK5E,OAAS,KACd,KAAK8E,kBAAoB,KACzB,KAAKzqI,IAAM,KACX,KAAK0qI,WAAa,KAClB,KAAKC,cAAgB,KACrB,KAAKC,UAAY,KACjB,KAAKC,cAAgB,KACrB,KAAKC,YAAc,OACnB,KAAKC,kBAAoB,OACzB,KAAKA,kBAAoBtlE,EAAOslE,kBAChC,KAAKR,mBAAqBA,EACtBA,EACF,GAAI,CACF,IAAMS,EAAgBn5H,KAAKi3E,OACvBkiD,IACF,KAAKrF,OAASqF,EAAcrF,QAAUqF,EAAcC,aAExD,MAAY,CACZ,CAEF,KAAKH,YAAc,CAAC,KAAKnF,MAC3B,CACA9pC,SAAU,CACR,KAAK8pC,OAAS,KACd,KAAK8E,kBAAoB,KACzB,KAAKzqI,IAAM,KACX,KAAK0qI,WAAa,KAClB,KAAKC,cAAgB,KACrB,KAAKC,UAAY,KACjB,KAAKC,cAAgB,IACvB,CACAx4C,QAAS,CACP,OAAO,KAAKy4C,WACd,CACAp+G,OAAQ,CACN,GAAM,CACJm+G,cAAAA,EACAF,cAAAA,CACF,EAAI,KACJ,GAAI,CAACE,GAAiBF,EACpB,YAAK/qF,MAAM,EACJ,KAET,IAAM7jC,EAAO,IAAIjD,WAAW+xH,CAAa,EAEzC,OADA,KAAKjrF,MAAM,EACP,KAAK2qF,mBACAtE,GAAclqH,CAAI,EAEpBA,CACT,CACA6jC,OAAQ,CACN,KAAKirF,cAAgB,KACrB,KAAKD,UAAY,KACjB,KAAKD,cAAgB,KACjB,KAAKF,oBACP,KAAKA,kBAAoB,KAE7B,CACA1E,QAAQhqH,EAAM/b,EAAK4lI,EAAIC,EAAS,CAC9B,OAAI,KAAKiF,YACA,IAAIp8H,QAAQ,CAACC,EAAS0yC,IAAW,CACtC,IAAM6pF,EAAWC,YAAYC,OAAOrvH,CAAI,EAAIA,EAAO,IAAIjD,WAAWiD,CAAI,EACtE,KAAKsvH,gBAAgBH,EAAUlrI,EAAK4lI,EAAIC,CAAO,EAC/C,IAAMyF,EAAgB,KAAK5+G,MAAM,EAC7B4+G,EACF38H,EAAQ28H,EAAcxgH,MAAM,EAE5Bu2B,EAAO,IAAIxzC,MAAM,0CAA0C,CAAC,CAEhE,CAAC,EAEI,KAAK09H,iBAAiB,IAAIzyH,WAAWiD,CAAI,EAAG/b,EAAK4lI,EAAIC,CAAO,CACrE,CAGAwF,gBAAgBtvH,EAAM/b,EAAK4lI,EAAIC,EAAS,CACtC,GAAM,CACJ+E,UAAAA,EACAC,cAAAA,EACAF,cAAAA,CACF,EAAI,KACJ,GAAI9E,IAAYN,GAAiBC,KAAOxlI,EAAI6uG,aAAe,GACzD3gG,OAAAA,GAAOnC,KAAK,8CAA8C,EACnD,KAET,KAAKy/H,QAAQ,gBAAgB,EACzBb,IACF5uH,EAAOq9F,GAAiBuxB,EAAe5uH,CAAI,EAC3C,KAAK4uH,cAAgB,MAEvB,IAAMc,EAAe,KAAKC,cAAc3vH,CAAI,EAC5C,GAAI,CAAC0vH,EAAa3oI,OAChB,OAAO,KAEL8nI,IACFhF,EAAKgF,GAEP,IAAIH,EAAoB,KAAKA,kBACxBA,IACHA,EAAoB,KAAKA,kBAAoB,IAAIpE,IAEnDoE,EAAkBtC,UAAUnoI,CAAG,EAC/B,IAAM4C,EAASioI,EAGf,OAFA,KAAKA,cAAgBJ,EAAkB1E,QAAQ0F,EAAa3gH,OAAQ,EAAG86G,CAAE,EACzE,KAAKgF,UAAYa,EAAa7xH,MAAM,GAAG,EAAEkR,OACpCloB,GACI,IAGX,CACA2oI,iBAAiBxvH,EAAM/b,EAAK4lI,EAAIC,EAAS,CACvC,GAAI,KAAK7lI,MAAQA,GAAO,CAAC,KAAK0qI,WAAY,CACxC,GAAI,CAAC,KAAK/E,OACR,OAAOj3H,QAAQC,QAAQ,KAAKg9H,iBAAiB5vH,EAAM/b,EAAK4lI,EAAIC,CAAO,CAAC,EAEtE,KAAK7lI,IAAMA,EACX,KAAK0qI,WAAa,IAAIT,GAAW,KAAKtE,OAAQ3lI,EAAK6lI,CAAO,CAC5D,CACA,OAAO,KAAK6E,WAAWvC,UAAU,EAAE55H,KAAMq9H,GAClC,KAAKjG,QAGV,KAAK6F,QAAQ,uBAAuB,EACpB,IAAI9F,GAAU,KAAKC,OAAQ,IAAI7sH,WAAW8sH,CAAE,EAAGC,CAAO,EACvDE,QAAQhqH,EAAK+O,OAAQ8gH,CAAM,GAJjCl9H,QAAQ2yC,OAAO,IAAIxzC,MAAM,4BAA4B,CAAC,CAKhE,EAAER,MAAON,IACRmB,GAAOnC,KAAK,wDAAwDgB,EAAI5D,IAAI,KAAK4D,EAAIrB,OAAO,EAAE,EACvF,KAAKigI,iBAAiB5vH,EAAM/b,EAAK4lI,EAAIC,CAAO,EACpD,CACH,CACA8F,iBAAiB5vH,EAAM/b,EAAK4lI,EAAIC,EAAS,CACvC,IAAMkF,EAAoB,KAAKA,kBAC/B,GAAIA,EAAmB,CACrB,KAAKD,YAAc,GACnB,KAAKN,WAAa,GAClB,KAAKa,gBAAgBtvH,EAAM/b,EAAK4lI,EAAIC,CAAO,EAC3C,IAAMyF,EAAgB,KAAK5+G,MAAM,EACjC,GAAI4+G,EACF,OAAOA,EAAcxgH,MAEzB,CACA,MAAM,IAAIjd,MAAM,aAAek9H,EAAoB,uBAAyB,IAAM,0BAA0B,CAC9G,CACAW,cAAc3vH,EAAM,CAClB,IAAI0vH,EAAe1vH,EACb8vH,EAAa9vH,EAAKjZ,OAASiZ,EAAKjZ,OAASunI,GAC/C,OAAIwB,IAAe9vH,EAAKjZ,SACtB2oI,EAAe1vH,EAAKnC,MAAM,EAAGiyH,CAAU,EACvC,KAAKlB,cAAgB5uH,EAAKnC,MAAMiyH,CAAU,GAErCJ,CACT,CACAD,QAAQM,EAAK,CACN,KAAKtB,aAGVt8H,GAAOpC,IAAI,gBAAgBggI,CAAG,EAAE,EAChC,KAAKtB,WAAa,GACpB,CACF,EACMuB,GAAiBlqI,KAAKqjG,IAAI,EAAG,EAAE,EAC/B8mC,GAAN,KAAqB,CACnBrhI,YAAY86D,EAAQ,CAClB,KAAKA,OAAS,OACd,KAAKooC,OAAS,KACd,KAAKo+B,gBAAkB,GACvB,KAAKxmE,OAASA,CAChB,CACAo2B,SAAU,CACJ,KAAKgS,SACP,KAAKA,OAAOhS,QAAQ,EACpB,KAAKgS,OAAS,KAElB,CACAjxF,OAAQ,CACF,KAAKixF,QACP,KAAKA,OAAOjxF,MAAM,CAEtB,CACA4/B,KAAK4wD,EAAM8+B,EAAY,CACrB,IAAMznI,EAAM2oG,EAAK3oG,IACjB,GAAI,CAACA,EACH,OAAOiK,QAAQ2yC,OAAO,IAAI8qF,GAAU,CAClChzH,KAAMwqF,GAAWyoC,cACjBzzF,QAASkrD,EAAau5B,gBACtBvI,MAAO,GACPznB,KAAAA,EACAnhG,MAAO,IAAI4B,MAAM,4BAA4BpJ,EAAM,YAAc,KAAK,EAAE,EACxE4nI,eAAgB,IAClB,CAAC,CAAC,EAEJ,KAAKzvH,MAAM,EACX,IAAM6oD,EAAS,KAAKA,OACd6mE,EAAkB7mE,EAAO8mE,QACzBC,EAAiB/mE,EAAOooC,OAC9B,OAAO,IAAIn/F,QAAQ,CAACC,EAAS0yC,IAAW,CAItC,GAHI,KAAKwsD,QACP,KAAKA,OAAOhS,QAAQ,EAElBuR,EAAKuB,IACP,GAAIvB,EAAKO,QAAQ7jE,KAAM2iG,GAASA,EAAK,CAAC,IAAM,KAAK,EAAG,CAClDprF,EAAOqrF,GAAmBt/B,CAAI,CAAC,EAC/B,MACF,MACEA,EAAKuB,IAAM,GAGf,IAAMd,EAAS,KAAKA,OAASy+B,EAAkB,IAAIA,EAAgB7mE,CAAM,EAAI,IAAI+mE,EAAe/mE,CAAM,EAChGknE,EAAgBC,GAAoBx/B,CAAI,EAC9CA,EAAKS,OAASA,EACd,IAAMgtB,EAAaS,GAA6B71D,EAAOi6D,eAAettH,OAAO,EACvEy6H,EAAe,CACnBhS,WAAAA,EACAl+G,QAASk+G,EAAWiS,cACpBC,SAAU,EACVC,WAAY,EACZC,cAAe,EACfC,cAAe9/B,EAAKC,KAAO,cAAgBh+C,IAAW08E,EACxD,EACA3+B,EAAKH,MAAQY,EAAOZ,MACpB,IAAM5vB,EAAY,CAChB8vD,UAAWA,CAAC70H,EAAU20F,EAAOv1E,EAAS20G,IAAmB,CACvD,KAAKe,YAAYhgC,EAAMS,CAAM,EAC7B,IAAIjhG,EAAU0L,EAASyD,KACnB2b,EAAQ21G,SAAWjgC,EAAK2B,cAC1B3B,EAAK2B,YAAY62B,GAAK,IAAI9sH,WAAWlM,EAAQgN,MAAM,EAAG,EAAE,CAAC,EACzDhN,EAAUA,EAAQgN,MAAM,EAAE,GAE5BjL,EAAQ,CACNy+F,KAAAA,EACAv5C,KAAM,KACNjnD,QAAAA,EACAy/H,eAAAA,CACF,CAAC,CACH,EACA5X,QAASA,CAACn8G,EAAUof,EAAS20G,EAAgBp/B,IAAU,CACrD,KAAKmgC,YAAYhgC,EAAMS,CAAM,EAC7BxsD,EAAO,IAAI8qF,GAAU,CACnBhzH,KAAMwqF,GAAWyoC,cACjBzzF,QAASkrD,EAAau5B,gBACtBvI,MAAO,GACPznB,KAAAA,EACA90F,SAAU2uF,GAAe,CACvBxiG,IAAAA,EACAsX,KAAM,MACR,EAAGzD,CAAQ,EACXrM,MAAO,IAAI4B,MAAM,cAAcyK,EAAS5C,IAAI,IAAI4C,EAASlJ,IAAI,EAAE,EAC/Di9H,eAAAA,EACAp/B,MAAAA,CACF,CAAC,CAAC,CACJ,EACAqgC,QAASA,CAACrgC,EAAOv1E,EAAS20G,IAAmB,CAC3C,KAAKe,YAAYhgC,EAAMS,CAAM,EAC7BxsD,EAAO,IAAI8qF,GAAU,CACnBhzH,KAAMwqF,GAAWyoC,cACjBzzF,QAASkrD,EAAa0pC,iBACtB1Y,MAAO,GACPznB,KAAAA,EACAnhG,MAAO,IAAI4B,MAAM,SAAS,EAC1Bw+H,eAAAA,EACAp/B,MAAAA,CACF,CAAC,CAAC,CACJ,EACAugC,UAAWA,CAACvgC,EAAOv1E,EAAS20G,IAAmB,CAC7C,KAAKe,YAAYhgC,EAAMS,CAAM,EAC7BxsD,EAAO,IAAI8qF,GAAU,CACnBhzH,KAAMwqF,GAAWyoC,cACjBzzF,QAASkrD,EAAamxB,kBACtBH,MAAO,GACPznB,KAAAA,EACAnhG,MAAO,IAAI4B,MAAM,iBAAiBg/H,EAAalwH,OAAO,IAAI,EAC1D0vH,eAAAA,EACAp/B,MAAAA,CACF,CAAC,CAAC,CACJ,CACF,EACIi/B,IACF7uD,EAAU6uD,WAAa,CAACj/B,EAAOv1E,EAAS3b,EAAMswH,IAAmBH,EAAW,CAC1E9+B,KAAAA,EACAv5C,KAAM,KACNjnD,QAASmP,EACTswH,eAAAA,CACF,CAAC,GAEHx+B,EAAOrxD,KAAKmwF,EAAeE,EAAcxvD,CAAS,CACpD,CAAC,CACH,CACAowD,SAASrgC,EAAMv5C,EAAMq4E,EAAY,CAC/B,KAAKtvH,MAAM,EACX,IAAM6oD,EAAS,KAAKA,OACd6mE,EAAkB7mE,EAAO8mE,QACzBC,EAAiB/mE,EAAOooC,OAC9B,OAAO,IAAIn/F,QAAQ,CAACC,EAAS0yC,IAAW,CAItC,GAHI,KAAKwsD,QACP,KAAKA,OAAOhS,QAAQ,EAElBuR,EAAKuB,KAAO96C,EAAK86C,IAAK,CACxBttD,EAAOqrF,GAAmBt/B,EAAMv5C,CAAI,CAAC,EACrC,MACF,CACA,IAAMg6C,EAAS,KAAKA,OAASy+B,EAAkB,IAAIA,EAAgB7mE,CAAM,EAAI,IAAI+mE,EAAe/mE,CAAM,EAChGknE,EAAgBC,GAAoBx/B,EAAMv5C,CAAI,EACpDu5C,EAAKS,OAASA,EACd,IAAMgtB,EAAaS,GAA6B71D,EAAOi6D,eAAettH,OAAO,EACvEy6H,EAAe,CACnBhS,WAAAA,EACAl+G,QAASk+G,EAAWiS,cACpBC,SAAU,EACVC,WAAY,EACZC,cAAe,EACfC,cAAenB,EACjB,EACAl4E,EAAKo5C,MAAQY,EAAOZ,MACpBY,EAAOrxD,KAAKmwF,EAAeE,EAAc,CACvCM,UAAWA,CAAC70H,EAAU20F,EAAOv1E,EAAS20G,IAAmB,CACvD,KAAKe,YAAYhgC,EAAMS,CAAM,EAC7B,KAAK6/B,oBAAoBtgC,EAAMv5C,CAAI,EACnC,IAAM85E,EAAiB,CACrBvgC,KAAAA,EACAv5C,KAAAA,EACAjnD,QAAS0L,EAASyD,KAClBswH,eAAAA,CACF,EACAH,EAAWyB,CAAc,EACzBh/H,EAAQg/H,CAAc,CACxB,EACAlZ,QAASA,CAACn8G,EAAUof,EAAS20G,EAAgBp/B,IAAU,CACrD,KAAKmgC,YAAYhgC,EAAMS,CAAM,EAC7BxsD,EAAO,IAAI8qF,GAAU,CACnBhzH,KAAMwqF,GAAWyoC,cACjBzzF,QAASkrD,EAAau5B,gBACtBvI,MAAO,GACPznB,KAAAA,EACAv5C,KAAAA,EACAv7C,SAAU2uF,GAAe,CACvBxiG,IAAKkoI,EAAcloI,IACnBsX,KAAM,MACR,EAAGzD,CAAQ,EACXrM,MAAO,IAAI4B,MAAM,cAAcyK,EAAS5C,IAAI,IAAI4C,EAASlJ,IAAI,EAAE,EAC/Di9H,eAAAA,EACAp/B,MAAAA,CACF,CAAC,CAAC,CACJ,EACAqgC,QAASA,CAACrgC,EAAOv1E,EAAS20G,IAAmB,CAC3Cj/B,EAAKH,MAAMzxF,QAAUq4C,EAAKo5C,MAAMzxF,QAChC,KAAK4xH,YAAYhgC,EAAMS,CAAM,EAC7BxsD,EAAO,IAAI8qF,GAAU,CACnBhzH,KAAMwqF,GAAWyoC,cACjBzzF,QAASkrD,EAAa0pC,iBACtB1Y,MAAO,GACPznB,KAAAA,EACAv5C,KAAAA,EACA5nD,MAAO,IAAI4B,MAAM,SAAS,EAC1Bw+H,eAAAA,EACAp/B,MAAAA,CACF,CAAC,CAAC,CACJ,EACAugC,UAAWA,CAACvgC,EAAOv1E,EAAS20G,IAAmB,CAC7C,KAAKe,YAAYhgC,EAAMS,CAAM,EAC7BxsD,EAAO,IAAI8qF,GAAU,CACnBhzH,KAAMwqF,GAAWyoC,cACjBzzF,QAASkrD,EAAamxB,kBACtBH,MAAO,GACPznB,KAAAA,EACAv5C,KAAAA,EACA5nD,MAAO,IAAI4B,MAAM,iBAAiBg/H,EAAalwH,OAAO,IAAI,EAC1D0vH,eAAAA,EACAp/B,MAAAA,CACF,CAAC,CAAC,CACJ,CACF,CAAC,CACH,CAAC,CACH,CACAygC,oBAAoBtgC,EAAMv5C,EAAM,CAC9B,IAAM+5E,EAAYxgC,EAAKH,MACjB4gC,EAAYh6E,EAAKo5C,MACjB6gC,EAAYD,EAAUtiC,MAE5B,GADAqiC,EAAUtiC,QAAUuiC,EAAUviC,OAC1BwiC,EAAW,CACb,IAAMC,EAAgBlsI,KAAK+B,MAAMwpG,EAAKr+D,SAAW8kB,EAAK9kB,QAAQ,EACxDi/F,EAAiBnsI,KAAKgmB,IAAIhmB,KAAK+B,MAAMgqI,EAAUtiC,OAASwiC,CAAS,EAAGC,CAAa,EAEjFE,GADoBF,EAAgBC,GACInsI,KAAK+B,MAAMgqI,EAAUtiC,OAAS0iC,CAAc,EAC1FJ,EAAUriC,MAAQqiC,EAAUtiC,OAAS2iC,CACvC,MACEL,EAAUriC,MAAQ1pG,KAAKwG,IAAIulI,EAAUtiC,OAAQsiC,EAAUriC,KAAK,EAE9D,IAAM2iC,EAAcN,EAAUliC,QACxByiC,EAAcN,EAAUniC,QAC1BwiC,EAAYztH,MACdytH,EAAYviC,OAASwiC,EAAYxiC,MAAQwiC,EAAY1tH,OAErDytH,EAAYztH,MAAQ0tH,EAAY1tH,MAChCytH,EAAYviC,MAAQwiC,EAAYxiC,OAElCuiC,EAAYttH,IAAMutH,EAAYvtH,GAChC,CACAwsH,YAAYhgC,EAAMS,EAAQ,CACxBT,EAAKS,OAAS,KACV,KAAKA,SAAWA,IAClBh8F,KAAKwJ,aAAa,KAAK4wH,eAAe,EACtC,KAAKp+B,OAAS,MAEhBA,EAAOhS,QAAQ,CACjB,CACF,EACA,SAAS+wC,GAAoBx/B,EAAMv5C,EAAO,KAAM,CAC9C,IAAMu6E,EAAUv6E,GAAQu5C,EAClBu/B,EAAgB,CACpBv/B,KAAAA,EACAv5C,KAAAA,EACA/2C,aAAc,cACdrY,IAAK2pI,EAAQ3pI,IACboI,QAAS,CAAC,EACVwhI,WAAY,EACZC,SAAU,CACZ,EACM7tH,EAAQ2tH,EAAQvhC,qBAChBjsF,EAAMwtH,EAAQ1hC,mBACpB,GAAIlJ,GAAe/iF,CAAK,GAAK+iF,GAAe5iF,CAAG,EAAG,CAChD,IAAI2tH,EACJ,IAAIC,EAAiB/tH,EACjBguH,EAAe7tH,EACnB,GAAIwsF,EAAKC,KAAO,eAAiBqhC,IAA2BH,EAAoBnhC,EAAK2B,cAAgB,KAAO,OAASw/B,EAAkBthI,MAAM,EAAG,CAC9I,IAAM0hI,EAAc/tH,EAAMH,EACtBkuH,EAAc,KAChBF,EAAe7tH,GAAO,GAAK+tH,EAAc,KAEvCluH,IAAU,IACZksH,EAAcU,QAAU,GACxBmB,EAAiB/tH,EAAQ,GAE7B,CACAksH,EAAc0B,WAAaG,EAC3B7B,EAAc2B,SAAWG,CAC3B,CACA,OAAO9B,CACT,CACA,SAASD,GAAmBt/B,EAAMv5C,EAAM,CACtC,IAAM5nD,EAAQ,IAAI4B,MAAM,OAAOu/F,EAAKuB,IAAM,MAAQ,WAAW,QAAQ,EAC/D9wF,EAAY,CAChB1E,KAAMwqF,GAAWirC,YACjBj2F,QAASkrD,EAAa65B,SACtB7I,MAAO,GACPznB,KAAAA,EACAnhG,MAAAA,EACAogI,eAAgB,IAClB,EACA,OAAIx4E,IACFh2C,EAAUg2C,KAAOA,IAElBA,GAAcu5C,GAAMH,MAAMzxF,QAAU,GAC9B,IAAI2wH,GAAUtuH,CAAS,CAChC,CACA,SAAS6wH,GAA0BzhI,EAAQ,CACzC,OAAOA,IAAW,WAAaA,IAAW,SAC5C,CACA,IAAMk/H,GAAN,cAAwBt+H,KAAM,CAC5BlD,YAAYoR,EAAM,CAChB,MAAMA,EAAK9P,MAAMP,OAAO,EACxB,KAAKqQ,KAAO,OACZ,KAAKA,KAAOA,CACd,CACF,EACM8yH,GAAN,cAAuBxnC,EAAQ,CAC7B18F,YAAYymC,EAAOk2D,EAAS,CAC1B,MAAMl2D,EAAOk2D,CAAO,EACpB,KAAKwnC,WAAa,OAClB,KAAKC,WAAa,KAClB,KAAKC,cAAgB,KACrB,KAAKC,eAAiB,EACtB,KAAKH,WAAa,KAAKI,KAAK/6H,KAAK,IAAI,CACvC,CACA0nF,SAAU,CACR,KAAKszC,oBAAoB,EACzB,KAAKC,mBAAmB,CAC1B,CACAD,qBAAsB,CACpB,KAAKE,cAAc,EACnB,KAAK7iG,cAAc,CACrB,CACA4iG,oBAAqB,CACrB,CACAE,aAAc,CACZ,MAAO,CAAC,CAAC,KAAKN,aAChB,CACAO,aAAc,CACZ,MAAO,CAAC,CAAC,KAAKR,UAChB,CAKAtiG,YAAY+iG,EAAQ,CAClB,OAAK,KAAKR,cAKH,IAJL,KAAKC,eAAiB,EACtB,KAAKD,cAAgBn9H,KAAK46B,YAAY,KAAKqiG,WAAYU,CAAM,EACtD,GAGX,CAIAhjG,eAAgB,CACd,OAAI,KAAKwiG,eACPn9H,KAAK26B,cAAc,KAAKwiG,aAAa,EACrC,KAAKA,cAAgB,KACd,IAEF,EACT,CAIAK,eAAgB,CACd,OAAI,KAAKN,YACPl9H,KAAKwJ,aAAa,KAAK0zH,UAAU,EACjC,KAAKA,WAAa,KACX,IAEF,EACT,CAMAG,MAAO,CACL,KAAKD,iBACD,KAAKA,iBAAmB,IAC1B,KAAKQ,OAAO,EACR,KAAKR,eAAiB,GACxB,KAAKS,cAAc,EAErB,KAAKT,eAAiB,EAE1B,CACAS,eAAgB,CACd,KAAKL,cAAc,EACnB,KAAKN,WAAal9H,KAAK1B,WAAW,KAAK2+H,WAAY,CAAC,CACtD,CAKAW,QAAS,CACT,CACF,EACME,GAAN,KAAoB,CAClBhlI,YAAYyB,EAAOihG,EAAIrtF,EAAIlW,EAAO,EAAG+pD,EAAO,GAAIo8C,EAAU,GAAO,CAC/D,KAAK7jG,MAAQ,OACb,KAAKihG,GAAK,OACV,KAAKx5C,KAAO,OACZ,KAAK7zC,GAAK,OACV,KAAKlW,KAAO,OACZ,KAAKmmG,QAAU,OACf,KAAK2/B,YAAcC,GAAwB,EAC3C,KAAKhkC,UAAY,CACfnvD,MAAOmzF,GAAwB,EAC/BvqI,MAAOuqI,GAAwB,EAC/Br/B,WAAYq/B,GAAwB,CACtC,EACA,KAAKzjI,MAAQA,EACb,KAAKihG,GAAKA,EACV,KAAKrtF,GAAKA,EACV,KAAKlW,KAAOA,EACZ,KAAK+pD,KAAOA,EACZ,KAAKo8C,QAAUA,CACjB,CACF,EACA,SAAS4/B,IAA0B,CACjC,MAAO,CACLpvH,MAAO,EACPqvH,aAAc,EACdC,WAAY,EACZnvH,IAAK,CACP,CACF,CACA,IAAMovH,GAAe,CACnBltI,OAAQ,EACR2d,MAAOA,IAAM,EACbG,IAAKA,IAAM,CACb,EACMqvH,GAAN,MAAMA,CAAa,CAIjB,OAAOC,WAAW1zD,EAAO7sE,EAAU,CACjC,GAAI6sE,EAAO,CACT,IAAM1tC,EAAWmhG,EAAaE,YAAY3zD,CAAK,EAC/C,QAAS35E,EAAIisC,EAAShsC,OAAQD,KAC5B,GAAI8M,GAAYm/B,EAASruB,MAAM5d,CAAC,GAAK8M,GAAYm/B,EAASluB,IAAI/d,CAAC,EAC7D,MAAO,EAGb,CACA,MAAO,EACT,CACA,OAAOutI,eAAe5zD,EAAO,CAC3B,GAAIA,EAAO,CACT,IAAMklD,EAAauO,EAAaE,YAAY3zD,CAAK,EACjD,OAAOyzD,EAAaI,kBAAkB3O,CAAU,CAClD,CACA,MAAO,CAAA,CACT,CACA,OAAO2O,kBAAkB3O,EAAY,CACnC,IAAM5yF,EAAW,CAAA,EACjB,QAASjsC,EAAI,EAAGA,EAAI6+H,EAAW5+H,OAAQD,IACrCisC,EAASviC,KAAK,CACZkU,MAAOihH,EAAWjhH,MAAM5d,CAAC,EACzB+d,IAAK8gH,EAAW9gH,IAAI/d,CAAC,CACvB,CAAC,EAEH,OAAOisC,CACT,CACA,OAAOsiF,WAAW50C,EAAOlxD,EAAKglH,EAAiB,CAC7C,GAAI9zD,EAAO,CACT,IAAM1tC,EAAWmhG,EAAaG,eAAe5zD,CAAK,EAClD,GAAI1tC,EAAShsC,OACX,OAAOmtI,EAAaM,aAAazhG,EAAUxjB,EAAKglH,CAAe,CAEnE,CACA,MAAO,CACLh3C,IAAK,EACL74E,MAAO6K,EACP1K,IAAK0K,EACLklH,cAAe,EACjB,CACF,CACA,OAAOD,aAAazhG,EAAUxjB,EAAKglH,EAAiB,CAClDhlH,EAAMzpB,KAAKwG,IAAI,EAAGijB,CAAG,EACjBwjB,EAAShsC,OAAS,GACpBgsC,EAAS66B,KAAK,CAACt3D,EAAGgP,IAAMhP,EAAEoO,MAAQY,EAAEZ,OAASY,EAAET,IAAMvO,EAAEuO,GAAG,EAE5D,IAAI4vH,EAAgB,GAChBlzD,EAAY,CAAA,EAChB,GAAIgzD,EACF,QAASztI,EAAI,EAAGA,EAAIisC,EAAShsC,OAAQD,IAAK,CACpCyoB,GAAOwjB,EAASjsC,CAAC,EAAE4d,OAAS6K,GAAOwjB,EAASjsC,CAAC,EAAE+d,MACjD4vH,EAAgB3tI,GAElB,IAAM4tI,EAAUnzD,EAAUx6E,OAC1B,GAAI2tI,EAAS,CACX,IAAMC,EAAUpzD,EAAUmzD,EAAU,CAAC,EAAE7vH,IACnCkuB,EAASjsC,CAAC,EAAE4d,MAAQiwH,EAAUJ,EAC5BxhG,EAASjsC,CAAC,EAAE+d,IAAM8vH,IACpBpzD,EAAUmzD,EAAU,CAAC,EAAE7vH,IAAMkuB,EAASjsC,CAAC,EAAE+d,KAG3C08D,EAAU/wE,KAAKuiC,EAASjsC,CAAC,CAAC,CAE9B,MACEy6E,EAAU/wE,KAAKuiC,EAASjsC,CAAC,CAAC,CAE9B,MAEAy6E,EAAYxuC,EAEd,IAAI6hG,EAAY,EACZC,EACAC,EAAcvlH,EACdouG,EAAYpuG,EAChB,QAASzoB,EAAI,EAAGA,EAAIy6E,EAAUx6E,OAAQD,IAAK,CACzC,IAAM4d,EAAQ68D,EAAUz6E,CAAC,EAAE4d,MACrBG,EAAM08D,EAAUz6E,CAAC,EAAE+d,IAIzB,GAHI4vH,IAAkB,IAAMllH,GAAO7K,GAAS6K,GAAO1K,IACjD4vH,EAAgB3tI,GAEdyoB,EAAMglH,GAAmB7vH,GAAS6K,EAAM1K,EAC1CiwH,EAAcpwH,EACdi5G,EAAY94G,EACZ+vH,EAAYjX,EAAYpuG,UACfA,EAAMglH,EAAkB7vH,EAAO,CACxCmwH,EAAYnwH,EACZ,KACF,CACF,CACA,MAAO,CACL64E,IAAKq3C,EACLlwH,MAAOowH,GAAe,EACtBjwH,IAAK84G,GAAa,EAClBkX,UAAAA,EACA9hG,SAAAA,EACA0hG,cAAAA,CACF,CACF,CAKA,OAAOL,YAAY3zD,EAAO,CACxB,GAAI,CACF,OAAOA,EAAM1tC,UAAYkhG,EAC3B,OAAS57H,EAAG,CACVlG,OAAAA,GAAOpC,IAAI,+BAAgCsI,CAAC,EACrC47H,EACT,CACF,CACF,EACMc,GAA6B,0BACnC,SAASC,GAAsB95G,EAAK,CAClC,OAAO65G,GAA2Bz/H,KAAK4lB,CAAG,CAC5C,CACA,SAAS+5G,GAAoBC,EAAQhxI,EAAO,CAC1C,GAAIgxI,EAAOC,eAAiB,MAAQD,EAAOE,gBAAiB,CAC1D,IAAMD,EAAeD,EAAOC,aAC5B,OAAOjxI,EAAMue,QAAQsyH,GAA6BM,GAAsB,CACtE,IAAMC,EAAeD,EAAkBx5E,UAAU,EAAGw5E,EAAkBtuI,OAAS,CAAC,EAC1EwuI,EAAgDJ,IAAaG,CAAY,EAC/E,OAAIC,IAAkB,QACpBL,EAAOM,uBAAyBN,EAAOM,qBAAuB,IAAI1jI,MAAM,+DAA+DwjI,CAAY,GAAG,GAC/ID,GAEFE,CACT,CAAC,CACH,CACA,OAAOrxI,CACT,CACA,SAASuxI,GAAsBP,EAAQziE,EAAMijE,EAAW,CACtD,IAAIP,EAAeD,EAAOC,aACrBA,IACHD,EAAOC,aAAeA,EAAe,CAAC,GAExC,IAAIQ,EACAC,EACJ,GAAI,eAAgBnjE,EAAM,CACxBkjE,EAAQljE,EAAKojE,WACb,GAAI,CACF,IAAM/sI,EAAe,IAAIgN,KAAKjN,IAAI6sI,CAAS,EAAE5sI,aAC7C,GAAIA,EAAaN,IAAImtI,CAAK,EACxBC,EAAQ9sI,EAAaoE,IAAIyoI,CAAK,MAE9B,OAAM,IAAI7jI,MAAM,IAAI6jI,CAAK,iDAAiDD,CAAS,GAAG,CAE1F,OAASxlI,EAAO,CACdglI,EAAOM,uBAAyBN,EAAOM,qBAAuB,IAAI1jI,MAAM,4BAA4B5B,EAAMP,OAAO,EAAE,EACrH,CACF,MACEgmI,EAAQljE,EAAKqjE,KACbF,EAAQnjE,EAAKmjE,MAEXD,KAASR,EACXD,EAAOM,uBAAyBN,EAAOM,qBAAuB,IAAI1jI,MAAM,uDAAuD6jI,CAAK,GAAG,GAEvIR,EAAaQ,CAAK,EAAIC,GAAS,EAEnC,CACA,SAASG,GAAyBb,EAAQziE,EAAMujE,EAAoB,CAClE,IAAMC,EAASxjE,EAAKwjE,OACpB,GAAID,GAAsBC,KAAUD,EAAoB,CACtD,IAAIb,EAAeD,EAAOC,aACrBA,IACHD,EAAOC,aAAeA,EAAe,CAAC,GAExCA,EAAac,CAAM,EAAID,EAAmBC,CAAM,CAClD,MACEf,EAAOM,uBAAyBN,EAAOM,qBAAuB,IAAI1jI,MAAM,sEAAsEmkI,CAAM,GAAG,EAE3J,CACA,IAAMC,GAA2B,gBAC3BC,GAAkB,4BAClBC,GAAN,MAAMA,CAAS,CACbxnI,YAAY+uB,EAAOu3G,EAAQ,CACrB,OAAOv3G,GAAU,WACnBA,EAAQy4G,EAASC,cAAc14G,EAAOu3G,CAAM,GAE9CpqC,GAAS,KAAMntE,CAAK,CACtB,CACA,IAAI24G,aAAc,CAChB,OAAOzyI,OAAOmE,KAAK,IAAI,EAAE+vB,OAAQ06C,GAASA,EAAK5W,UAAU,EAAG,CAAC,IAAM,IAAI,CACzE,CACA0xD,eAAepxF,EAAU,CACvB,IAAMo6G,EAAWlwI,SAAS,KAAK81B,CAAQ,EAAG,EAAE,EAC5C,OAAIo6G,EAAW13G,OAAO8oE,iBACbr0C,IAEFijF,CACT,CACAC,mBAAmBr6G,EAAU,CAC3B,GAAI,KAAKA,CAAQ,EAAG,CAClB,IAAIs6G,GAAe,KAAKt6G,CAAQ,GAAK,MAAMte,MAAM,CAAC,EAClD44H,GAAeA,EAAY1vI,OAAS,EAAI,IAAM,IAAM0vI,EACpD,IAAMvyI,EAAQ,IAAI6Y,WAAW05H,EAAY1vI,OAAS,CAAC,EACnD,QAASD,EAAI,EAAGA,EAAI2vI,EAAY1vI,OAAS,EAAGD,IAC1C5C,EAAM4C,CAAC,EAAIT,SAASowI,EAAY54H,MAAM/W,EAAI,EAAGA,EAAI,EAAI,CAAC,EAAG,EAAE,EAE7D,OAAO5C,CACT,CACA,OAAO,IACT,CACAwyI,2BAA2Bv6G,EAAU,CACnC,IAAMo6G,EAAWlwI,SAAS,KAAK81B,CAAQ,EAAG,EAAE,EAC5C,OAAIo6G,EAAW13G,OAAO8oE,iBACbr0C,IAEFijF,CACT,CACAhiC,qBAAqBp4E,EAAU,CAC7B,OAAOjZ,WAAW,KAAKiZ,CAAQ,CAAC,CAClC,CACAmxF,cAAcnxF,EAAU6P,EAAc,CACpC,IAAM9nC,EAAQ,KAAKi4B,CAAQ,EAC3B,OAAOj4B,EAAQgf,WAAWhf,CAAK,EAAI8nC,CACrC,CACAwoE,iBAAiBr4E,EAAU,CACzB,OAAO,KAAKA,CAAQ,CACtB,CACAw6G,qBAAqBx6G,EAAUy6G,EAAM,CACnC,IAAMt5G,EAAY,KAAKnB,CAAQ,EAC/B,OAAQmB,EAAYA,EAAU52B,MAAM,OAAO,EAAI,CAAA,GAAIuW,OAAO,CAACpW,EAAQgwI,KACjEhwI,EAAOgwI,EAAWz9H,YAAY,CAAC,EAAI,GAC5BvS,GACN+vI,CAAI,CACT,CACA3/E,KAAK96B,EAAU,CACb,OAAO,KAAKA,CAAQ,IAAM,KAC5B,CACA26G,kBAAkB36G,EAAU,CAC1B,IAAM1pB,EAAMyjI,GAAyB18G,KAAK,KAAK2C,CAAQ,CAAC,EACxD,GAAI1pB,IAAQ,KAGZ,MAAO,CACLrG,MAAO/F,SAASoM,EAAI,CAAC,EAAG,EAAE,EAC1BtG,OAAQ9F,SAASoM,EAAI,CAAC,EAAG,EAAE,CAC7B,CACF,CACA,OAAO4jI,cAAcl0H,EAAO+yH,EAAQ,CAClC,IAAI/uI,EACEw3B,EAAQ,CAAC,EACTo5G,EAAQ,IAEd,IADAZ,GAAgBa,UAAY,GACpB7wI,EAAQgwI,GAAgB38G,KAAKrX,CAAK,KAAO,MAAM,CACrD,IAAM/U,EAAOjH,EAAM,CAAC,EAAEkX,KAAK,EACvBnZ,EAAQiC,EAAM,CAAC,EACb8wI,EAAe/yI,EAAM0Z,QAAQm5H,CAAK,IAAM,GAAK7yI,EAAMkrG,YAAY2nC,CAAK,IAAM7yI,EAAM6C,OAAS,EAC3FmwI,EAAsB,GAC1B,GAAID,EACF/yI,EAAQA,EAAM2Z,MAAM,EAAG,EAAE,MAEzB,QAAQzQ,EAAI,CACV,IAAK,KACL,IAAK,aACL,IAAK,YACL,IAAK,aACH8pI,EAAsB,EAC1B,CAEF,GAAIhC,IAAW+B,GAAgBC,GAE3BhzI,EAAQ+wI,GAAoBC,EAAQhxI,CAAK,UAElC,CAACgzI,GAAuB,CAACD,EAClC,OAAQ7pI,EAAI,CACV,IAAK,kBACH,GAAIlJ,IAAU,OACZ,MAGJ,IAAK,cACL,IAAK,QACL,IAAK,iBACL,IAAK,QACL,IAAK,YACL,IAAK,WACL,IAAK,kBACL,IAAK,SACL,IAAK,UACL,IAAK,WACL,IAAK,WACL,IAAK,KACL,IAAK,SACL,IAAK,cACL,IAAK,YACL,IAAK,oBACL,IAAK,WACL,IAAK,OACL,IAAK,aACL,IAAK,aACL,IAAK,8BACL,IAAK,aACL,IAAK,sBACL,IAAK,oBACL,IAAK,aACL,IAAK,YACL,IAAK,sBACL,IAAK,MACL,IAAK,QACL,IAAK,QACL,IAAK,eACL,IAAK,cACHiO,GAAOnC,KAAK,GAAGmS,CAAK,eAAe/U,CAAI,oBAAoB,CAC/D,CAEFuwB,EAAMvwB,CAAI,EAAIlJ,CAChB,CACA,OAAOy5B,CACT,CACF,EACMw5G,GAAqB,6BAC3B,SAASC,GAAwBj7G,EAAU,CACzC,OAAOA,IAAa,MAAQA,IAAa,SAAWA,IAAa,OAASA,IAAa,cAAgBA,IAAa,YAAcA,IAAa,YAAcA,IAAa,aAC5K,CACA,SAASk7G,GAAkBl7G,EAAU,CACnC,OAAOA,IAAa,cAAgBA,IAAa,aAAeA,IAAa,YAC/E,CACA,IAAMm7G,GAAN,KAAgB,CACd1oI,YAAY2oI,EAAeC,EAAqBC,EAAW,EAAG,CAC5D,IAAIC,EAWJ,GAVA,KAAKjlE,KAAO,OACZ,KAAKklE,UAAY,OACjB,KAAKC,SAAW,OAChB,KAAKC,WAAa,OAClB,KAAKC,SAAW,OAChB,KAAKC,WAAa,OAClB,KAAKC,KAAO,OACZ,KAAKC,mBAAqB,OAC1B,KAAKN,UAAoDH,GAAoBG,WAAc,KAC3F,KAAKC,UAAYF,EAA+DF,GAAoBI,WAAa,KAAOF,EAAwBD,EAC5ID,EAAqB,CACvB,IAAMU,EAAeV,EAAoB/kE,KACzC,QAAWxuE,KAAOi0I,EAChB,GAAIr0I,OAAOoE,UAAUC,eAAeC,KAAKovI,EAAetzI,CAAG,GAAKszI,EAActzI,CAAG,IAAMi0I,EAAaj0I,CAAG,EAAG,CACxGkO,GAAOnC,KAAK,6BAA6B/L,CAAG,uCAAuCszI,EAAcY,EAAE,GAAG,EACtG,KAAKF,mBAAqBh0I,EAC1B,KACF,CAEFszI,EAAgBzsC,GAAS,IAAIsrC,GAAS,CAAC,CAAC,EAAG8B,EAAcX,CAAa,CACxE,CAUA,GATA,KAAK9kE,KAAO8kE,EACRC,GACF,KAAKK,WAAaL,EAAoBK,WACtC,KAAKG,KAAOR,EAAoBQ,KAChC,KAAKF,SAAWN,EAAoBM,SACpC,KAAKC,WAAaP,EAAoBO,YAEtC,KAAKF,WAAa,IAAI71G,KAAKu1G,EAAc,YAAY,CAAC,EAEpD,aAAc,KAAK9kE,KAAM,CAC3B,IAAM2lE,EAAkDZ,GAAoBY,SAAY,IAAIp2G,KAAK,KAAKywC,KAAK,UAAU,CAAC,EAClHg1B,GAAe2wC,EAAQ3pD,QAAQ,CAAC,IAClC,KAAKqpD,SAAWM,EAEpB,CACF,CACA,IAAIn0H,IAAK,CACP,OAAO,KAAKwuD,KAAK0lE,EACnB,CACA,IAAIE,OAAQ,CACV,OAAO,KAAK5lE,KAAK6lE,KACnB,CACA,IAAI90H,KAAM,CACR,IAAMw0H,EAAO,KAAKA,KAClB,OAAIA,IAAS,OACJ,KAAKA,KAAO,KAAKvlE,KAAKkkE,qBAAqB,KAAKlkE,KAAK8lE,IAAM,MAAQ,QAAS,CACjFC,IAAK,GACLC,KAAM,GACNz6C,KAAM,EACR,CAAC,EAEIg6C,CACT,CACA,IAAIhuI,WAAY,CACd,GAAM,CACJ2tI,UAAAA,CACF,EAAI,KACJ,OAAIA,IAAc,MAAQA,EAAUtkC,kBAAoB,MACtDlhG,GAAOnC,KAAK,2DAA2D,KAAKiU,EAAE,MAAM0zH,CAAS,EAAE,EACxFxkE,KAEFwkE,EAAUjzH,OAAS,KAAKg0H,UAAUjqD,QAAQ,EAAIkpD,EAAUtkC,iBAAmB,GACpF,CACA,IAAIqlC,WAAY,CACd,OAAO,KAAKb,UACd,CACA,IAAIO,SAAU,CACZ,IAAMO,EAAY,KAAKb,UAAY,KAAKC,WACxC,GAAIY,EACF,OAAOA,EAET,IAAM3lG,EAAW,KAAKA,SACtB,OAAIA,IAAa,KACR,KAAK+kG,WAAa,IAAI/1G,KAAK,KAAK61G,WAAWppD,QAAQ,EAAIz7C,EAAW,GAAG,EAEvE,IACT,CACA,IAAIA,UAAW,CACb,GAAI,aAAc,KAAKy/B,KAAM,CAC3B,IAAMz/B,EAAW,KAAKy/B,KAAK8hC,qBAAqB,UAAU,EAC1D,GAAI9M,GAAez0D,CAAQ,EACzB,OAAOA,CAEX,SAAW,KAAK8kG,SACd,OAAQ,KAAKA,SAASrpD,QAAQ,EAAI,KAAKopD,WAAWppD,QAAQ,GAAK,IAEjE,OAAO,IACT,CACA,IAAImqD,iBAAkB,CACpB,MAAI,qBAAsB,KAAKnmE,KACtB,KAAKA,KAAK8hC,qBAAqB,kBAAkB,EAEnD,IACT,CACA,IAAIskC,WAAY,CACd,OAAO,KAAKpmE,KAAKxb,KAAK,aAAa,CACrC,CACA,IAAI6hF,gBAAiB,CACnB,OAAO,KAAKT,QAAUlB,EACxB,CACA,IAAI4B,SAAU,CACZ,MAAO,CAAC,CAAC,KAAK90H,IAAM,CAAC,KAAKg0H,oBAAsBxwC,GAAe,KAAKixC,UAAUjqD,QAAQ,CAAC,IAAM,KAAKz7C,WAAa,MAAQ,KAAKA,UAAY,KAAO,CAAC,KAAK6lG,WAAa,CAAC,CAAC,KAAKR,SAAW,CAAC,KAAK5lE,KAAK8lE,KAAO,CAAC,KAAK/0H,IAAIg1H,KAAO,CAAC,KAAKh1H,IAAIi1H,MAAQ,KAAKj1H,IAAIg1H,MAAQ,KAAKh1H,IAAIi1H,QAAU,CAAC,KAAKK,gBAAkB,gBAAiB,KAAKrmE,MAAQ,iBAAkB,KAAKA,KAC5V,CACF,EACMumE,GAA0B,GAC1BC,GAAN,KAAmB,CACjBrqI,YAAYsqI,EAAS,CACnB,KAAKC,SAAW,GAChB,KAAKC,eAAiB,GACtB,KAAK5c,sBAAwB,OAC7B,KAAK+B,MAAQ,EACb,KAAK8a,MAAQ,EACb,KAAKnc,UAAY,OACjB,KAAKsB,aAAe,OACpB,KAAK2K,SAAW,KAChB,KAAKmQ,WAAa,OAClB,KAAKC,kBAAoB,EACzB,KAAKtjB,KAAO,GACZ,KAAKujB,iBAAmB,GACxB,KAAKC,UAAY,EACjB,KAAKC,iBAAmB,OACxB,KAAKC,QAAU,GACf,KAAKC,SAAW,GAChB,KAAKC,OAAS,EACd,KAAKvb,QAAU,EACf,KAAKwb,QAAU,EACf,KAAKC,gBAAkB,KACvB,KAAKC,eAAiB,EACtB,KAAKC,cAAgB,EACrB,KAAK78H,KAAO,KACZ,KAAK1U,IAAM,OACX,KAAKsiD,KAAO,GACZ,KAAKhgD,QAAU,KACf,KAAKkvI,eAAiB,GACtB,KAAK9tB,aAAe,EACpB,KAAKC,kBAAoB,GACzB,KAAK8tB,gBAAkB,EACvB,KAAKC,0BAA4B,OACjC,KAAKC,aAAe,EACpB,KAAKC,SAAW,EAChB,KAAK/d,WAAa,EAClB,KAAKge,YAAc,OACnB,KAAKC,iBAAmB,OACxB,KAAKC,WAAa,EAClB,KAAKC,kBAAoB,OACzB,KAAKC,eAAiB,EACtB,KAAKC,aAAe,EACpB,KAAKC,WAAa,EAClB,KAAKC,SAAW,EAChB,KAAKC,mBAAqB,OAC1B,KAAKvF,qBAAuB,KAC5B,KAAKL,aAAe,KACpB,KAAKC,gBAAkB,GACvB,KAAK4F,sBAAwB,OAC7B,KAAK9d,UAAY,CAAA,EACjB,KAAK6d,mBAAqB,CAAA,EAC1B,KAAKzB,WAAa,CAAC,EACnB,KAAK5wI,IAAMwwI,CACb,CACA+B,SAASvqC,EAAU,CACjB,GAAI,CAACA,EAAU,CACb,KAAKkpC,SAAW,GAChB,KAAKD,QAAU,GACf,MACF,CACA,IAAMuB,EAAa,KAAKC,WAAazqC,EAASyqC,WACxCC,EAAgB,KAAKC,cAAgB3qC,EAAS2qC,cACpD,KAAK1B,QAAU,KAAKN,QAAU3oC,EAAS2oC,OAAS,CAAC,CAAC+B,GAAiB,CAAC,CAACF,GAAc,CAAC,KAAKjlB,KACzF,KAAK2jB,SAAW,KAAKP,MAAQ3oC,EAAS2oC,OAAS6B,EAAa,GAAKA,IAAe,GAAKE,EAAgB,EACjG,KAAKzB,SAAW,KAAKC,SACvB,KAAKC,OAAS/zI,KAAKC,MAAM2qG,EAASmpC,OAAS,EAAG,EAE9C,KAAKA,OAASnpC,EAASmpC,OAAS,CAEpC,CACA,IAAIyB,oBAAqB,CACvB,OAAI,KAAKpe,UAAUn2H,OACV0gG,GAAe,KAAKy1B,UAAU,KAAKA,UAAUn2H,OAAS,CAAC,EAAEssG,eAAe,EAE1E,EACT,CACA,IAAIkoC,qBAAsB,CACxB,OAAO,KAAK/e,uBAAyB,KAAKwd,gBAAkBhB,EAC9D,CACA,IAAIwC,OAAQ,CACV,IAAMC,EAAU,KAAKb,aAAe,KAAKD,eACzC,OAAIc,EAAU,GACQ,KAAKX,SAAW,KAAKD,YACpB,IAAMY,EAEtB,CACT,CACA,IAAIC,MAAO,CACT,OAAO,KAAKC,SAAW,KAAKC,WAC9B,CACA,IAAID,SAAU,CACZ,IAAIE,EACJ,OAAKA,EAAiB,KAAK1S,WAAa,MAAQ0S,EAAe90I,OACtD,KAAKoiI,SAAS,KAAKA,SAASpiI,OAAS,CAAC,EAAE8d,IAE1C,KAAK+2H,WACd,CACA,IAAIA,aAAc,CAChB,IAAIE,EACJ,OAAKA,EAAkB,KAAK5e,YAAc,MAAQ4e,EAAgB/0I,OACzD,KAAKm2H,UAAU,KAAKA,UAAUn2H,OAAS,CAAC,EAAE8d,IAE5C,CACT,CACA,IAAIk3H,eAAgB,CAClB,IAAIC,EACJ,OAAKA,EAAmB,KAAK9e,YAAc,MAAQ8e,EAAiBj1I,OAC3D,KAAKm2H,UAAU,CAAC,EAAEx4G,MAEpB,CACT,CACA,IAAI4nG,KAAM,CACR,OAAI,KAAKotB,iBACA5zI,KAAKwG,IAAI01B,KAAKD,IAAI,EAAI,KAAK23G,iBAAkB,CAAC,EAAI,IAEpD,CACT,CACA,IAAI2B,eAAgB,CAClB,IAAIY,EACJ,OAAKA,EAAkB,KAAK9S,WAAa,MAAQ8S,EAAgBl1I,OACxD,KAAKoiI,SAAS,KAAKA,SAASpiI,OAAS,CAAC,EAAE4W,MAE1C,EACT,CACA,IAAIu+H,cAAe,CACjB,IAAM/S,EAAW,KAAKA,SACtB,GAAIA,EAAU,CACZ,IAAM6N,EAAY,KAAKqE,cACvB,GAAIrE,IAAc,GAAI,CACpB,QAASlwI,EAAIqiI,EAASpiI,OAAQD,KAC5B,GAAIqiI,EAASriI,CAAC,EAAE6W,MAAQq5H,EACtB,OAAO7N,EAASriI,CAAC,EAAE6W,MAGvB,OAAOq5H,CACT,CACF,CACA,MAAO,EACT,CACA,IAAImE,YAAa,CACf,IAAIgB,EACJ,OAAKA,EAAkB,KAAKhT,WAAa,MAAQgT,EAAgBp1I,OACxD,KAAKoiI,SAAS,KAAKA,SAASpiI,OAAS,CAAC,EAAEkoG,SAASqC,GAEnD,KAAK+nC,KACd,CACA,IAAI+C,SAAU,CACZ,GAAI,KAAKnmB,MAAQ,KAAK3J,KAAO,KAAKutB,OAAS,EAAG,CAC5C,IAAMwC,EAAyB,KAAKV,QAAU,KAAKI,cACnD,OAAO,KAAKzvB,IAAMxmH,KAAKwG,IAAI+vI,EAAwB,KAAKpC,aAAa,EAAI,KAAKsB,mBAChF,CACA,MAAO,EACT,CACF,EACA,SAASe,GAAwBprI,EAAQ,CACvC,OAAOA,IAAW,WAAaA,IAAW,WAAaA,IAAW,aACpE,CACA,SAASqrI,GAAgCrrI,EAAQ,CAC/C,OAAQA,EAAM,CACZ,IAAK,UACL,IAAK,UACH,OAAOs4H,GAAiBC,IAC1B,IAAK,cACH,OAAOD,GAAiBE,IAC1B,QACE,MAAM,IAAI53H,MAAM,+BAA+BZ,CAAM,EAAE,CAC3D,CACF,CACA,SAASsrI,GAAaC,EAAkB,CACtC,OAAO1/H,WAAWjP,KAAK4uI,KAAKD,CAAgB,EAAIp3H,GAAMA,EAAE/L,WAAW,CAAC,CAAC,CACvE,CACA,SAASqjI,GAAezhH,EAAK,CAC3B,OAAOne,WAAWjP,KAAK8uI,SAASlvH,mBAAmBwN,CAAG,CAAC,EAAI7V,GAAMA,EAAE/L,WAAW,CAAC,CAAC,CAClF,CACA,SAASujI,GAAc3hH,EAAK,CAC1B,IAAM4hH,EAAaH,GAAezhH,CAAG,EAAEw6E,SAAS,EAAG,EAAE,EAC/CqnC,EAAmB,IAAIhgI,WAAW,EAAE,EAC1CggI,OAAAA,EAAiB7yI,IAAI4yI,EAAY,GAAKA,EAAW/1I,MAAM,EAChDg2I,CACT,CACA,SAASC,GAAiBxiC,EAAO,CAC/B,IAAMyiC,EAAO,SAAe1+H,EAAOzQ,EAAMo7B,EAAI,CAC3C,IAAMg0G,EAAM3+H,EAAMzQ,CAAI,EACtByQ,EAAMzQ,CAAI,EAAIyQ,EAAM2qB,CAAE,EACtB3qB,EAAM2qB,CAAE,EAAIg0G,CACd,EACAD,EAAKziC,EAAO,EAAG,CAAC,EAChByiC,EAAKziC,EAAO,EAAG,CAAC,EAChByiC,EAAKziC,EAAO,EAAG,CAAC,EAChByiC,EAAKziC,EAAO,EAAG,CAAC,CAClB,CACA,SAAS2iC,GAA2Bh/H,EAAK,CACvC,IAAMi/H,EAAaj/H,EAAIzX,MAAM,GAAG,EAC5B22I,EAAU,KACd,GAAID,EAAW,CAAC,IAAM,QAAUA,EAAWr2I,SAAW,EAAG,CACvD,IAAMu2I,EAAiBF,EAAW,CAAC,EAAE12I,MAAM,GAAG,EACxC62I,EAAaD,EAAeA,EAAev2I,OAAS,CAAC,EAAEL,MAAM,GAAG,EACtE,GAAI62I,EAAWx2I,SAAW,EAAG,CAC3B,IAAMy2I,EAAWD,EAAW,CAAC,IAAM,SAC7Bv9H,EAAOu9H,EAAW,CAAC,EACrBC,GACFF,EAAennH,OAAO,GAAI,CAAC,EAC3BknH,EAAUb,GAAax8H,CAAI,GAE3Bq9H,EAAUR,GAAc78H,CAAI,CAEhC,CACF,CACA,OAAOq9H,CACT,CACA,IAAMI,GAAe,OAAO3nI,KAAS,IAAcA,KAAO,OACtD4nI,GAAa,CACfC,SAAU,kBACVC,SAAU,gBACVC,UAAW,0BACXC,SAAU,oBACZ,EACIC,GAAmB,CACrBJ,SAAU,kBACVC,SAAU,iCACVC,UAAW,0BACXC,SAAU,+CACZ,EACA,SAASE,GAAiC32I,EAAS,CACjD,OAAQA,EAAO,CACb,KAAK02I,GAAiBH,SACpB,OAAOF,GAAWE,SACpB,KAAKG,GAAiBF,UACpB,OAAOH,GAAWG,UACpB,KAAKE,GAAiBD,SACpB,OAAOJ,GAAWI,SACpB,KAAKC,GAAiBJ,SACpB,OAAOD,GAAWC,QACtB,CACF,CACA,SAASM,GAAiCC,EAAW,CACnD,OAAQA,EAAS,CACf,KAAKR,GAAWE,SACd,OAAOG,GAAiBH,SAC1B,KAAKF,GAAWG,UACd,OAAOE,GAAiBF,UAC1B,KAAKH,GAAWI,SACd,OAAOC,GAAiBD,SAC1B,KAAKJ,GAAWC,SACd,OAAOI,GAAiBJ,QAC5B,CACF,CACA,SAASQ,GAAuBz0E,EAAQ,CACtC,GAAM,CACJ00E,WAAAA,EACAC,mBAAAA,CACF,EAAI30E,EACE40E,EAAsBF,EAAa,CAACV,GAAWE,SAAUF,GAAWI,SAAUJ,GAAWG,UAAWH,GAAWC,QAAQ,EAAE5lH,OAAQmmH,GAAc,CAAC,CAACE,EAAWF,CAAS,CAAC,EAAI,CAAA,EAChL,MAAI,CAACI,EAAoBZ,GAAWI,QAAQ,GAAKO,GAC/CC,EAAoB9tI,KAAKktI,GAAWI,QAAQ,EAEvCQ,CACT,CACA,IAAMC,GAA8B,SAASC,EAAuB,CAClE,OAAIf,IAAgB,OAASe,EAAwBf,GAAahsI,YAAc,MAAQ+sI,EAAsBD,4BACrGzoI,KAAKrE,UAAU8sI,4BAA4BnmI,KAAKtC,KAAKrE,SAAS,EAE9D,IAEX,EAAE,EACF,SAASgtI,GAAyCP,EAAWlzB,EAAavD,EAAai3B,EAAkB,CACvG,IAAIC,EACJ,OAAQT,EAAS,CACf,KAAKR,GAAWE,SACde,EAAgB,CAAC,OAAQ,MAAM,EAC/B,MACF,KAAKjB,GAAWI,SAChB,KAAKJ,GAAWG,UACdc,EAAgB,CAAC,MAAM,EACvB,MACF,KAAKjB,GAAWC,SACdgB,EAAgB,CAAC,OAAQ,QAAQ,EACjC,MACF,QACE,MAAM,IAAI7sI,MAAM,uBAAuBosI,CAAS,EAAE,CACtD,CACA,OAAOU,GAAmCD,EAAe3zB,EAAavD,EAAai3B,CAAgB,CACrG,CACA,SAASE,GAAmCD,EAAe3zB,EAAavD,EAAai3B,EAAkB,CAiBrG,MAAO,CAhBY,CACjBC,cAAAA,EACAE,gBAAiBH,EAAiBG,iBAAmB,WACrDC,sBAAuBJ,EAAiBI,uBAAyB,WACjEC,aAAcL,EAAiBK,cAAgB,CAACL,EAAiBM,aAAe,WAAW,EAC3FC,kBAAmBj0B,EAAYr/G,IAAKgsG,IAAW,CAC7Cz6F,YAAa,qBAAqBy6F,CAAK,GACvCunC,WAAYR,EAAiBS,iBAAmB,GAChDC,iBAAkBV,EAAiBW,uBAAyB,IAC9D,EAAE,EACFC,kBAAmB73B,EAAY97G,IAAKgsG,IAAW,CAC7Cz6F,YAAa,qBAAqBy6F,CAAK,GACvCunC,WAAYR,EAAiBa,iBAAmB,GAChDH,iBAAkBV,EAAiBc,uBAAyB,IAC9D,EAAE,CACJ,CACkB,CACpB,CACA,SAASC,GAAwBf,EAAkB,CACjD,IAAIgB,EACJ,OAAOhB,EAAiBM,cAAgB,sBAAwB,CAAC,GAAGU,EAAwBhB,EAAiBK,eAAiB,MAAQW,EAAsB3xG,KAAM3wB,GAASA,IAAS,oBAAoB,EAC1M,CACA,SAASuiI,GAAkBC,EAAU,CACnC,IAAMC,EAAgB,IAAIC,YAAYF,EAAS7wH,OAAQ6wH,EAASxiC,WAAYwiC,EAAS9sC,WAAa,CAAC,EAC7FitC,EAAaxyI,OAAOqM,aAAalD,MAAM,KAAM7I,MAAMC,KAAK+xI,CAAa,CAAC,EACtEG,EAAcD,EAAWlkF,UAAUkkF,EAAWniI,QAAQ,GAAG,EAAGmiI,EAAWh5I,MAAM,EAG7Ek5I,EAFS,IAAIC,UAAU,EACPC,gBAAgBH,EAAa,UAAU,EACtC1/G,qBAAqB,KAAK,EAAE,CAAC,EACpD,GAAI2/G,EAAS,CACX,IAAMzlC,EAAQylC,EAAQz3H,WAAW,CAAC,EAAIy3H,EAAQz3H,WAAW,CAAC,EAAE43H,UAAYH,EAAQpiH,aAAa,OAAO,EACpG,GAAI28E,EAAO,CACT,IAAM6lC,EAAa7D,GAAahiC,CAAK,EAAE9E,SAAS,EAAG,EAAE,EACrDsnC,OAAAA,GAAiBqD,CAAU,EACpBA,CACT,CACF,CACA,OAAO,IACT,CACA,IAAIC,GAAmB,CAAC,EAClBC,GAAN,MAAMA,CAAS,CACb,OAAOC,uBAAwB,CAC7BF,GAAmB,CAAC,CACtB,CACA1xI,YAAYsC,EAAQiN,EAAK9W,EAASo5I,EAAiB,CAAC,CAAC,EAAG5W,EAAK,KAAMrvB,EAAO,CACxE,KAAKr8F,IAAM,OACX,KAAKjN,OAAS,OACd,KAAK2iG,UAAY,OACjB,KAAK6sC,kBAAoB,OACzB,KAAKptC,UAAY,OACjB,KAAKmH,mBAAqB,OAC1B,KAAKovB,GAAK,KACV,KAAK5lI,IAAM,KACX,KAAKu2G,MAAQ,KACb,KAAKmmC,KAAO,KACZ,KAAKzvI,OAASA,EACd,KAAKiN,IAAMA,EACX,KAAK01F,UAAYxsG,EACjB,KAAKq5I,kBAAoBD,EACzB,KAAK5W,GAAKA,EACV,KAAKv2B,UAAYpiG,EAASA,IAAW,OAAS,GAC9C,KAAKupG,mBAAqB,KAAKnH,WAAa,CAACgpC,GAAwBprI,CAAM,EACvEspG,GAAS,MAAQA,EAAMne,WAAW,IAAI,IACxC,KAAKme,MAAQ,IAAIz9F,WAAWywF,GAAiBgN,CAAK,CAAC,EAEvD,CACAt0G,QAAQjC,EAAK,CACX,IAAI28I,EAASC,EACb,OAAO58I,EAAIka,MAAQ,KAAKA,KAAOla,EAAIiN,SAAW,KAAKA,QAAUjN,EAAIqvG,YAAc,KAAKA,WAAarvG,EAAI4vG,YAAc,KAAKA,WAAa5vG,EAAIy8I,kBAAkB14H,KAAK,GAAG,IAAM,KAAK04H,kBAAkB14H,KAAK,GAAG,KAAO44H,EAAU38I,EAAI4lI,KAAO,KAAO,OAAS+W,EAAQ54H,KAAK,GAAG,OAAS64H,EAAW,KAAKhX,KAAO,KAAO,OAASgX,EAAS74H,KAAK,GAAG,EACvU,CACAykC,aAAc,CACZ,GAAI,KAAKv7C,OAAQ,CACf,GAAIorI,GAAwB,KAAKprI,MAAM,GAAK,KAAKA,SAAW,OAC1D,MAAO,GAET,GAAI,KAAK2iG,YAAc,WACrB,OAAO,KAAK3iG,SAAW,aAEvB,OAAQ,KAAK2iG,UAAS,CACpB,KAAKkqC,GAAiBH,SACtB,KAAKG,GAAiBD,SACtB,KAAKC,GAAiBF,UACtB,KAAKE,GAAiBJ,SACpB,MAAO,CAAC,cAAe,aAAc,kBAAmB,gBAAgB,EAAE//H,QAAQ,KAAK1M,MAAM,IAAM,EACvG,CAEJ,CACA,MAAO,EACT,CACAgiG,eAAe5B,EAAI,CACjB,GAAI,CAAC,KAAKgC,WAAa,CAAC,KAAKn1F,IAC3B,OAAO,KAET,GAAIm+H,GAAwB,KAAKprI,MAAM,GAAK,KAAKiN,KAAO,CAAC,KAAK0rH,GAAI,CAC5D,OAAOv4B,GAAO,WAChBn/F,GAAOnC,KAAK,sDAAsD,KAAKkB,MAAM,sBAAsB,EACnGogG,EAAK,GAEP,IAAMu4B,EAAKiX,GAA2BxvC,CAAE,EAExC,OADoB,IAAIivC,EAAS,KAAKrvI,OAAQ,KAAKiN,IAAK,WAAY,KAAKuiI,kBAAmB7W,CAAE,CAEhG,CACA,GAAI,KAAK8W,MAAQ,KAAKnmC,MACpB,OAAO,KAET,IAAMolC,EAAWzC,GAA2B,KAAKh/H,GAAG,EACpD,GAAIyhI,EACF,OAAQ,KAAK/rC,UAAS,CACpB,KAAKkqC,GAAiBD,SAEpB,GADA,KAAK6C,KAAOf,EACR,CAAC,KAAKplC,OAASolC,EAAS74I,QAAU,GAAI,CACxC,IAAMouG,EAASyqC,EAAS74I,OAAS,GACjC,KAAKyzG,MAAQolC,EAASlqC,SAASP,EAAQA,EAAS,EAAE,CACpD,CACA,MACF,KAAK4oC,GAAiBF,UAAW,CAC/B,IAAMkD,EAAyB,IAAIhkI,WAAW,CAAC,IAAK,EAAG,IAAK,IAAK,IAAK,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,GAAI,IAAK,IAAK,GAAI,GAAG,CAAC,EACxH,KAAK4jI,KAAOt/B,GAAQ0/B,EAAwB,KAAMnB,CAAQ,EAC1D,KAAKplC,MAAQmlC,GAAkBC,CAAQ,EACvC,KACF,CACA,QAAS,CACP,IAAIvC,EAAUuC,EAASlqC,SAAS,EAAG,EAAE,EACrC,GAAI2nC,EAAQt2I,SAAW,GAAI,CACzB,IAAMi6I,EAAS,IAAIjkI,WAAW,EAAE,EAChCikI,EAAO92I,IAAImzI,EAAS,GAAKA,EAAQt2I,MAAM,EACvCs2I,EAAU2D,CACZ,CACA,KAAKxmC,MAAQ6iC,EACb,KACF,CACF,CAEF,GAAI,CAAC,KAAK7iC,OAAS,KAAKA,MAAM1H,aAAe,GAAI,CAC/C,IAAI0H,EAAQ8lC,GAAiB,KAAKniI,GAAG,EACrC,GAAI,CAACq8F,EAAO,CACV,IAAMhtG,EAAM3J,OAAOmE,KAAKs4I,EAAgB,EAAEv5I,OAAS83B,OAAO8oE,iBAC1D6S,EAAQ,IAAIz9F,WAAW,EAAE,EACd,IAAI4kG,SAASnH,EAAMzrF,OAAQ,GAAI,CAAC,EACxC6yF,UAAU,EAAGp0G,CAAG,EACnB8yI,GAAiB,KAAKniI,GAAG,EAAIq8F,CAC/B,CACA,KAAKA,MAAQA,CACf,CACA,OAAO,IACT,CACF,EACA,SAASsmC,GAA2BG,EAAe,CACjD,IAAMC,EAAY,IAAInkI,WAAW,EAAE,EACnC,QAASjW,EAAI,GAAIA,EAAI,GAAIA,IACvBo6I,EAAUp6I,CAAC,EAAIm6I,GAAiB,GAAK,GAAKn6I,GAAK,IAEjD,OAAOo6I,CACT,CACA,IAAMC,GAAwB,qJACxBC,GAA8B,qBAC9BC,GAAoB,mCACpBC,GAA4B,IAAIr7I,OAAO,CAC3C,0CAA0C+yB,OAE1C,sBAAsBA,OAEtB,MAAMA,MACN,EACAhR,KAAK,GAAG,EAAG,GAAG,EACVu5H,GAA4B,IAAIt7I,OAAO,CAAC,yJAAyJ+yB,OAAQ,wFAAwFA,OAAQ,0DAA0DA,OAAQ,kBAAkBA,OAAQ,sBAAsBA,MAAM,EAAEhR,KAAK,GAAG,CAAC,EAC5aw5H,GAAN,MAAMA,CAAW,CACf,OAAOC,UAAUn7I,EAAQo7I,EAAc,CACrC,QAAS56I,EAAI,EAAGA,EAAIR,EAAOS,OAAQD,IAAK,CACtC,IAAM66I,EAAQr7I,EAAOQ,CAAC,EACtB,GAAI66I,EAAM19H,KAAOy9H,EACf,OAAOC,CAEX,CACF,CACA,OAAO/uI,QAAQlK,EAAKwwI,EAAS,CAC3B,OAAO7pC,GAAkBlB,iBAAiB+qC,EAASxwI,EAAK,CACtD4lG,gBAAiB,EACnB,CAAC,CACH,CACA,OAAOszC,gBAAgB1mH,EAAK,CAC1B,OAAOmmH,GAAkB/rI,KAAK4lB,CAAG,CACnC,CACA,OAAO2mH,oBAAoBjmI,EAAQg1F,EAAS,CAC1C,IAAMwkC,EAAkBJ,GAAsBp5H,CAAM,EAC9Cs5H,EAAS,CACb4M,gBAAiB,KACjB5qH,OAAQ,CAAA,EACRs+G,qBAAsB,KACtBuM,YAAa,KACbC,YAAa,KACbjI,gBAAiB,KACjB5E,aAAc,KACdC,gBAAAA,CACF,EACM6M,EAAwB,CAAA,EAC9Bd,GAAsBnK,UAAY,EAClC,IAAInwI,EACJ,MAAQA,EAASs6I,GAAsB3nH,KAAK5d,CAAM,IAAM,MACtD,GAAI/U,EAAO,CAAC,EAAG,CACb,IAAIq7I,EACJ,IAAMvkH,EAAQ,IAAIy4G,GAASvvI,EAAO,CAAC,EAAGquI,CAAM,EACtC/2H,EAAM82H,GAAoBC,EAAQruI,EAAO,CAAC,CAAC,EAC3CwJ,EAAQ,CACZstB,MAAAA,EACAo1E,QAASp1E,EAAM4vF,eAAe,WAAW,GAAK5vF,EAAM4vF,eAAe,mBAAmB,EACtFngH,KAAMuwB,EAAMm4G,KACZptI,IAAK84I,EAAW5uI,QAAQuL,EAAKyyF,CAAO,CACtC,EACMvkG,EAAasxB,EAAMm5G,kBAAkB,YAAY,EACnDzqI,IACFgE,EAAMjE,MAAQC,EAAWD,MACzBiE,EAAMlE,OAASE,EAAWF,QAE5Bg2I,GAAUxkH,EAAMkwF,OAAQx9G,CAAK,EAC7B,IAAM+xI,EAAqBzkH,EAAM,qBAAqB,EAClDykH,IACF/xI,EAAMunG,aAAe,CAAC,EACtBuqC,GAAUC,EAAoB/xI,EAAMunG,YAAY,IAE3CsqC,EAAuB7xI,EAAMgyI,gBAAkB,MAAQH,EAAqBn7I,QACjFk7I,EAAsBzxI,KAAKH,CAAK,EAElC6kI,EAAOh+G,OAAO1mB,KAAKH,CAAK,CAC1B,SAAWxJ,EAAO,CAAC,EAAG,CACpB,IAAM42B,EAAM52B,EAAO,CAAC,EACdm1B,EAAan1B,EAAO,CAAC,EAC3B,OAAQ42B,EAAG,CACT,IAAK,eAAgB,CACnB,IAAM6kH,EAAe,IAAIlM,GAASp6G,EAAYk5G,CAAM,EAC9CqN,EAASD,EAAa,SAAS,EACjCC,IACErN,EAAO6M,cAAgB,OACzB7M,EAAO6M,YAAc,CAAC,GAExB7M,EAAO6M,YAAYQ,CAAM,EAAID,GAE/B,KACF,CACA,IAAK,cAAe,CAClB,IAAME,EAAaC,GAASzmH,EAAY40E,EAASskC,CAAM,EACnDsN,EAAWlvC,WAAakvC,EAAW/1F,YAAY,GAC7CyoF,EAAO8M,cAAgB,OACzB9M,EAAO8M,YAAc,CAAA,GAEvB9M,EAAO8M,YAAYxxI,KAAKgyI,CAAU,GAElCrwI,GAAOnC,KAAK,mDAAmDgsB,CAAU,GAAG,EAE9E,KACF,CACA,IAAK,SAAU,CACb,CACE,IAAM0mH,EAAqB,IAAItM,GAASp6G,EAAYk5G,CAAM,EAC1DO,GAAsBP,EAAQwN,EAAoB9xC,CAAO,CAC3D,CACA,KACF,CACA,IAAK,mBAAoB,CACvB,IAAM+xC,EAA4B,IAAIvM,GAASp6G,EAAYk5G,CAAM,EACjEA,EAAO4M,gBAAkB,CACvB3jI,IAAKqjI,EAAW5uI,QAAQ+vI,EAA0B,YAAY,EAAG/xC,CAAO,EACxEkd,UAAW60B,EAA0B,YAAY,GAAK,GACxD,EACA,KACF,CACA,IAAK,QAAS,CACZzN,EAAO6E,gBAAkB6I,GAAqB5mH,CAAU,EACxD,KACF,CACF,CACF,CAEF,IAAM6mH,EAA0BZ,EAAsBl7I,OAAS,GAAKk7I,EAAsBl7I,OAASmuI,EAAOh+G,OAAOnwB,OACjHmuI,OAAAA,EAAOh+G,OAAS2rH,EAA0BZ,EAAwB/M,EAAOh+G,OACrEg+G,EAAOh+G,OAAOnwB,SAAW,IAC3BmuI,EAAOM,qBAAuB,IAAI1jI,MAAM,6BAA6B,GAEhEojI,CACT,CACA,OAAO4N,yBAAyBlnI,EAAQg1F,EAASskC,EAAQ,CACvD,IAAIruI,EACE4uG,EAAU,CAAC,EACXv+E,EAASg+G,EAAOh+G,OAChB6rH,EAAe,CACnBx6C,MAAOrxE,EAAOvrB,IAAK0E,IAAW,CAC5B4T,GAAI5T,EAAMstB,MAAM4qE,MAChB0gB,WAAY54G,EAAM44G,UACpB,EAAE,EACF0E,UAAWz2F,EAAOvrB,IAAK0E,IAAW,CAChC4T,GAAI5T,EAAMstB,MAAMgwF,UAChBq1B,UAAW3yI,EAAM2yI,SACnB,EAAE,EACF,kBAAmB,CAAA,CACrB,EACI/+H,EAAK,EAET,IADAm9H,GAA4BpK,UAAY,GAChCnwI,EAASu6I,GAA4B5nH,KAAK5d,CAAM,KAAO,MAAM,CACnE,IAAM+hB,EAAQ,IAAIy4G,GAASvvI,EAAO,CAAC,EAAGquI,CAAM,EACtC93H,EAAOugB,EAAMslH,KACnB,GAAI7lI,EAAM,CACR,IAAM9W,EAASy8I,EAAa3lI,CAAI,EAC1B8lI,EAASztC,EAAQr4F,CAAI,GAAK,CAAA,EAChCq4F,EAAQr4F,CAAI,EAAI8lI,EAChB,IAAMx9H,EAAOiY,EAAMwlH,SACbnxB,EAAYr0F,EAAM,gBAAgB,EAClCyrF,EAAWzrF,EAAMylH,SACjBnxB,EAAkBt0F,EAAM0lH,gBACxBC,EAAa3lH,EAAM,aAAa,EAChC8iD,EAAQ,CACZ9iD,MAAAA,EACAo1E,QAAS,EACT9uF,GAAIA,IACJslG,QAAS5rF,EAAM,UAAU,GAAK,GAC9BvwB,KAAMuwB,EAAMm4G,MAAQpwH,GAAQ,GAC5BtI,KAAAA,EACA/G,QAASsnB,EAAMs5B,KAAK,SAAS,EAC7Bo6D,WAAY1zF,EAAMs5B,KAAK,YAAY,EACnCq7D,OAAQ30F,EAAMs5B,KAAK,QAAQ,EAC3BvxC,KAAAA,EACAhd,IAAKi1B,EAAM4lH,IAAM/B,EAAW5uI,QAAQ+qB,EAAM4lH,IAAK3yC,CAAO,EAAI,EAC5D,EAaA,GAZIohB,IACFvxC,EAAMuxC,UAAYA,GAEhB5I,IACF3oC,EAAM2oC,SAAWA,GAEf6I,IACFxxC,EAAMwxC,gBAAkBA,GAEtBqxB,IACF7iE,EAAM6iE,WAAaA,GAEjBh9I,GAAU,MAAQA,EAAOS,OAAQ,CACnC,IAAMy8I,EAAahC,EAAWC,UAAUn7I,EAAQm6E,EAAM8oC,OAAO,GAAKjjH,EAAO,CAAC,EAC1Em9I,GAAYhjE,EAAO+iE,EAAY,YAAY,EAC3CC,GAAYhjE,EAAO+iE,EAAY,WAAW,CAC5C,CACAN,EAAO1yI,KAAKiwE,CAAK,CACnB,CACF,CACA,OAAOg1B,CACT,CACA,OAAOiuC,mBAAmB9nI,EAAQg1F,EAAS3sF,EAAI7G,EAAMumI,EAAYC,EAA0B,CACzF,IAAIC,EACJ,IAAMn6I,EAAO,CACXhB,IAAKkoG,CACP,EACMvgG,EAAQ,IAAI4oI,GAAaroC,CAAO,EAChCssB,EAAY7sH,EAAM6sH,UAClB4mB,EAAmB,CAAA,EACrBC,EAAqB,KACrBC,EAAY,EACZC,EAAc,EACdhK,EAAgB,EAChBiK,EAAuB,EACvBC,EAAiB,EACjBC,EAAW,KACX/yC,EAAO,IAAIE,GAASn0F,EAAM1T,CAAI,EAC9B7C,EACAC,EACA+qG,EACAwyC,EAAgB,GAChBC,EAAiB,GACjBC,EAAgB,KAChBC,EAIJ,GAHAlD,GAA0BtK,UAAY,EACtC3mI,EAAM26C,KAAOpvC,EACbvL,EAAM+kI,gBAAkBJ,GAAsBp5H,CAAM,IAC9CioI,EAAwBvC,GAA0B9nH,KAAK5d,CAAM,IAAM,KAAO,OAASioI,EAAsB,CAAC,KAAO,UACrHxzI,OAAAA,EAAMmlI,qBAAuB,IAAI1jI,MAAM,mCAAmC,EACnEzB,EAET,MAAQxJ,EAASy6I,GAA0B9nH,KAAK5d,CAAM,KAAO,MAAM,CAC7D0oI,IACFA,EAAiB,GACjBjzC,EAAO,IAAIE,GAASn0F,EAAM1T,CAAI,EAC9B2nG,EAAKgB,eAAiB4nC,EACtB5oC,EAAK3sF,MAAQu1H,EACb5oC,EAAKC,GAAK0yC,EACV3yC,EAAKW,GAAKkyC,EACNC,IACF9yC,EAAK0B,QAAUoxC,GAEjB9yC,EAAKhhG,MAAQ4T,EACT8/H,IACF1yC,EAAKqB,YAAcqxC,EACfA,EAAmBpyC,qBACrBN,EAAKM,mBAAqBoyC,EAAmBpyC,mBAC7CoyC,EAAmBpyC,mBAAqB,MAEtC4yC,IACFlzC,EAAKZ,aAAa8zC,CAAa,EAC/BA,EAAgB,QAItB,IAAMvxG,GAAWnsC,EAAO,CAAC,EACzB,GAAImsC,GAAU,CACZq+D,EAAKr+D,SAAW9vB,WAAW8vB,EAAQ,EACnC,IAAMvoC,IAAS,IAAM5D,EAAO,CAAC,GAAGgX,MAAM,CAAC,EACvCwzF,EAAK5mG,MAAQA,IAAS,KACtB4mG,EAAKO,QAAQphG,KAAK/F,GAAQ,CAAC,MAAOuoC,GAAUvoC,EAAK,EAAI,CAAC,MAAOuoC,EAAQ,CAAC,CACxE,SAAWnsC,EAAO,CAAC,GACjB,GAAI4gG,GAAe4J,EAAKr+D,QAAQ,EAAG,CACjCq+D,EAAKgB,eAAiB4nC,EACtB5oC,EAAK3sF,MAAQu1H,EACTpoC,GACF4yC,GAAiBpzC,EAAMQ,EAAWxhG,CAAK,EAEzCghG,EAAKC,GAAK0yC,EACV3yC,EAAKhhG,MAAQ4T,EACbotF,EAAKW,GAAKkyC,EACVhnB,EAAU1sH,KAAK6gG,CAAI,EACnB,IAAMlzF,IAAO,IAAMtX,EAAO,CAAC,GAAGgX,MAAM,CAAC,EACrCwzF,EAAKd,OAAS0kC,GAAoB5kI,EAAO8N,EAAG,EAC5CumI,GAAsBrzC,EAAM+yC,EAAUN,CAAgB,EACtDM,EAAW/yC,EACX4oC,GAAiB5oC,EAAKr+D,SACtBgxG,IACAC,EAAc,EACdK,EAAiB,EACnB,MACK,CAEL,GADAz9I,EAASA,EAAO,CAAC,EAAEV,MAAMo7I,EAAyB,EAC9C,CAAC16I,EAAQ,CACXsL,GAAOnC,KAAK,oDAAoD,EAChE,QACF,CACA,IAAKlJ,EAAI,EAAGA,EAAID,EAAOE,QACjBF,EAAOC,CAAC,IAAM,OADWA,IAC7B,CAIF,IAAM22B,IAAO,IAAM52B,EAAOC,CAAC,GAAG+W,MAAM,CAAC,EAC/B8mI,IAAU,IAAM99I,EAAOC,EAAI,CAAC,GAAG+W,MAAM,CAAC,EACtC+mI,GAAS/9I,EAAOC,EAAI,CAAC,GAAK,IAAMD,EAAOC,EAAI,CAAC,GAAG+W,MAAM,CAAC,EAAI,KAChE,OAAQ4f,GAAG,CACT,IAAK,YACC2mH,EACF/yC,EAAKZ,aAAak0C,GAAQP,CAAQ,EAElC/yC,EAAKZ,aAAak0C,EAAM,EAE1B,MACF,IAAK,oBACHtzC,EAAKM,mBAAqBgzC,GAC1BtzC,EAAKO,QAAQphG,KAAK,CAAC,oBAAqBm0I,EAAM,CAAC,EAC3CN,IAAkB,KACpBA,EAAgBnnB,EAAUn2H,QAE5B,MACF,IAAK,gBACCsJ,EAAM+M,MACRynI,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EAEjEwJ,EAAM+M,KAAOunI,GAAOtmI,YAAY,EAChC,MACF,IAAK,iBACChO,EAAMypI,UAAY,EACpB+K,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EACtDq2H,EAAUn2H,OAAS,GAC5B+9I,GAAoCz0I,EAAOotB,GAAK52B,CAAM,EAExDm9I,EAAY3zI,EAAMypI,QAAUzzI,SAASs+I,EAAM,EAC3C,MACF,IAAK,OAAQ,CACPt0I,EAAM8pI,iBACR0K,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EAEjE,IAAMk+I,EAAY,IAAI3O,GAASuO,GAAQt0I,CAAK,EACtC8pI,GAAkB4K,EAAUx3B,eAAe,kBAAkB,EACnE,GAAI9lB,GAAe0yC,EAAe,EAAG,CACnC9pI,EAAM8pI,iBAAmBA,GACzB,QAASvjH,GAAKujH,GAAiBvjH,MAC7BsmG,EAAU1sH,KAAK,IAAI,EAErBwzI,GAAa7J,EACf,CACA,IAAMC,GAA4B2K,EAAUvwC,iBAAiB,6BAA6B,EACtF4lC,KACF/pI,EAAM+pI,2BAA6B/pI,EAAM+pI,2BAA6B,CAAA,GAAI9uI,OAAO8uI,GAA0B1zI,MAAM,GAAG,CAAC,GAEvH,KACF,CACA,IAAK,iBACC2J,EAAM2pI,iBAAmB,GAC3B6K,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EAEjEwJ,EAAM2pI,eAAiBl0I,KAAKwG,IAAIjG,SAASs+I,EAAM,EAAG,CAAC,EACnD,MACF,IAAK,UACCt0I,EAAMrF,UAAY,MACpB65I,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EAEjEwJ,EAAMrF,QAAU3E,SAASs+I,EAAM,EAC/B,MACF,IAAK,uBACH,MACF,IAAK,UACEt0I,EAAM4lH,MACT4uB,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EAEjEwJ,EAAM4lH,KAAO,GACb,MACF,IAAK,KACC0uB,IAAUC,KACZvzC,EAAKO,QAAQphG,KAAKo0I,GAAS,CAACD,GAAQC,EAAM,EAAI,CAACD,EAAM,CAAC,EAExD,MACF,IAAK,gBACHT,IACA7yC,EAAKO,QAAQphG,KAAK,CAAC,KAAK,CAAC,EACzB,MACF,IAAK,MACH6gG,EAAKuB,IAAM,GACXvB,EAAKO,QAAQphG,KAAK,CAACitB,EAAG,CAAC,EACvB,MACF,IAAK,UACH4zE,EAAKO,QAAQphG,KAAK,CAACitB,GAAKknH,EAAM,CAAC,EAC/BR,EAAiB99I,SAASs+I,EAAM,EAAI,IAChCl9C,GAAe08C,CAAc,EAC/B9yC,EAAK0B,QAAUoxC,EAEfA,EAAiB,EAEnB,MACF,IAAK,YAAa,CAChB,IAAM5M,EAAgB,IAAInB,GAASuO,GAAQt0I,CAAK,EAC1C20I,GAAY,IAAI1N,GAAUC,EAAelnI,EAAMipI,WAAW/B,EAAcY,EAAE,EAAG9nI,EAAMkpI,iBAAiB,EAC1GlpI,EAAMkpI,oBACFyL,GAAUjM,SAAW1oI,EAAM8pI,gBAC7B9pI,EAAMipI,WAAW0L,GAAU/gI,EAAE,EAAI+gI,GAEjC7yI,GAAOnC,KAAK,oCAAoC20I,EAAM,GAAG,EAE3DtzC,EAAKO,QAAQphG,KAAK,CAAC,kBAAmBm0I,EAAM,CAAC,EAC7C,KACF,CACA,IAAK,SAAU,CACb,CACE,IAAMjC,EAAqB,IAAItM,GAASuO,GAAQt0I,CAAK,EACjD,WAAYqyI,EACd3M,GAAyB1lI,EAAOqyI,EAAoBkB,CAAwB,EAE5EnO,GAAsBplI,EAAOqyI,EAAoB9xC,CAAO,CAE5D,CACA,KACF,CACA,IAAK,yBACCvgG,EAAMiuH,UAAY,EACpBumB,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EACtDq2H,EAAUn2H,OAAS,GAC5B+9I,GAAoCz0I,EAAOotB,GAAK52B,CAAM,EAExDwJ,EAAMiuH,QAAU4lB,EAAuB79I,SAASs+I,EAAM,EACtD,MACF,IAAK,MAAO,CACV,IAAMM,EAAWxC,GAASkC,GAAQ/zC,EAASvgG,CAAK,EAChD,GAAI40I,EAASx4F,YAAY,EAAG,CAC1B,GAAIw4F,EAAS/zI,SAAW,OAAQ,CAC9B2gG,EAAY,OACZ,KACF,CACKA,IACHA,EAAY,CAAC,GAEf,IAAMqzC,GAAarzC,EAAUozC,EAASpxC,SAAS,EACzCqxC,IAAc,MAAQA,GAAWh/I,QAAQ++I,CAAQ,IACjDC,KACFrzC,EAAY/G,GAAS,CAAC,EAAG+G,CAAS,GAEpCA,EAAUozC,EAASpxC,SAAS,EAAIoxC,EAEpC,MACE9yI,GAAOnC,KAAK,2CAA2C20I,EAAM,GAAG,EAElE,KACF,CACA,IAAK,QACHt0I,EAAM0pI,gBAAkB6I,GAAqB+B,EAAM,EACnD,MACF,IAAK,MAAO,CACV,IAAMQ,EAAW,IAAI/O,GAASuO,GAAQt0I,CAAK,EAC3C,GAAIghG,EAAKr+D,SAAU,CACjB,IAAM6jD,GAAO,IAAI0a,GAASn0F,EAAM1T,CAAI,EACpC07I,GAAevuD,GAAMsuD,EAAUlhI,EAAI4tF,CAAS,EAC5CkyC,EAAqBltD,GACrBwa,EAAKqB,YAAcqxC,EACfA,EAAmBpyC,oBAAsB,CAACN,EAAKM,qBACjDN,EAAKM,mBAAqBoyC,EAAmBpyC,mBAEjD,KAAO,CACL,IAAM9sF,GAAMwsF,EAAKV,mBACjB,GAAI9rF,GAAK,CACP,IAAMH,GAAQ2sF,EAAKP,qBACnByzC,EAAgB,GAAG1/H,GAAMH,EAAK,IAAIA,EAAK,EACzC,MACE6/H,EAAgB,KAElBa,GAAe/zC,EAAM8zC,EAAUlhI,EAAI4tF,CAAS,EAC5CkyC,EAAqB1yC,EACrBizC,EAAiB,EACnB,CACAP,EAAmB/xC,GAAKkyC,EACxB,KACF,CACA,IAAK,iBAAkB,CACjBM,GACFK,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EAEjE29I,EAAqB,IAAIpO,GAASuO,EAAM,EACxCt0I,EAAM6pI,eAAiBsK,EAAmBvtF,KAAK,kBAAkB,EACjE5mD,EAAM+7G,aAAeo4B,EAAmBl3B,cAAc,iBAAkB,CAAC,EACzEj9G,EAAMg8G,kBAAoBh8G,EAAM+7G,aAAe,GAAKo4B,EAAmBvtF,KAAK,qBAAqB,EACjG5mD,EAAMgqI,aAAemK,EAAmBl3B,cAAc,iBAAkB,CAAC,EACzEj9G,EAAMiqI,SAAWkK,EAAmBl3B,cAAc,YAAa,CAAC,EAChE,KACF,CACA,IAAK,WAAY,CACXj9G,EAAMksH,YACRsoB,GAA6Cx0I,EAAOotB,GAAK52B,CAAM,EAEjE,IAAMw+I,EAAe,IAAIjP,GAASuO,EAAM,EACxCt0I,EAAMksH,WAAa8oB,EAAa9wC,qBAAqB,aAAa,EAClE,KACF,CACA,IAAK,OAAQ,CACX,IAAI40B,EAAW94H,EAAM84H,SAChBA,IACHA,EAAW94H,EAAM84H,SAAW,CAAA,GAE9B,IAAMmc,GAAuBrB,EAAc,EAAI9a,EAASA,EAASpiI,OAAS,CAAC,EAAI,OACzE4W,GAAQsmI,IACR7vC,GAAY,IAAIgiC,GAASuO,GAAQt0I,CAAK,EACtCynD,EAAO,IAAIq8C,GAAKC,GAAW/C,EAAM3nG,EAAMiU,GAAO2nI,EAAoB,EACxEnc,EAAS34H,KAAKsnD,CAAI,EAClBu5C,EAAKr+D,UAAY8kB,EAAK9kB,SACtB,KACF,CACA,IAAK,eAAgB,CACnB,IAAMuyG,EAAmB,IAAInP,GAASuO,GAAQt0I,CAAK,EACnDA,EAAMkqI,YAAcgL,EACpB,KACF,CACA,IAAK,mBAAoB,CACvB,IAAMC,EAAuB,IAAIpP,GAASuO,GAAQt0I,CAAK,EACvDA,EAAMmqI,iBAAmBnqI,EAAMmqI,kBAAoB,CAAA,EACnDnqI,EAAMmqI,iBAAiBhqI,KAAKg1I,CAAoB,EAChD,KACF,CACA,QACErzI,GAAOnC,KAAK,gCAAgCnJ,CAAM,EAAE,EACpD,KACJ,CACF,CACF,CACIu9I,GAAY,CAACA,EAAS7zC,QACxB2sB,EAAU71G,IAAI,EACd4yH,GAAiBmK,EAASpxG,SACtB3iC,EAAM84H,WACR94H,EAAMmuH,aAAe4lB,IAEd/zI,EAAM84H,WACfub,GAAsBrzC,EAAM+yC,EAAUN,CAAgB,EACtDzyC,EAAKW,GAAKkyC,EACV7zI,EAAMmuH,aAAentB,EACjBQ,GACF4yC,GAAiBpzC,EAAMQ,EAAWxhG,CAAK,GAGtCA,EAAM2pI,iBACT3pI,EAAMmlI,qBAAuB,IAAI1jI,MAAM,mCAAmC,GAE5E,IAAM2zI,EAAiBvoB,EAAUn2H,OAC3B2+I,EAAgBxoB,EAAU,CAAC,EAC3ByoB,GAAezoB,EAAUuoB,EAAiB,CAAC,EAEjD,GADAxL,GAAiB5pI,EAAM8pI,gBAAkB9pI,EAAM2pI,eAC3CC,EAAgB,GAAKwL,GAAkBE,GAAc,CACvDt1I,EAAMmsH,sBAAwByd,EAAgBwL,EAC9C,IAAMG,GAASD,GAAar0C,GAC5BjhG,EAAMgpI,MAAQuM,KAAW,cAAgBA,GAAS,EAC7Cv1I,EAAM4lH,OACT0vB,GAAahzC,QAAU,IAErB+yC,GAAiBr1I,EAAMiuH,UAAY,SACrCjuH,EAAMiuH,QAAUonB,EAAc1zC,IAE5BqyC,EAAgB,IAClBwB,GAAyB3oB,EAAWmnB,CAAa,EAC7CqB,GACF5B,EAAiB1sH,QAAQsuH,CAAa,EAG5C,MACEr1I,EAAMgpI,MAAQ,EACdhpI,EAAMiuH,QAAU,EAElB,OAAIjuH,EAAMmuH,eACRyb,GAAiB5pI,EAAMmuH,aAAaxrF,UAEtC3iC,EAAM4pI,cAAgBA,EAClB6J,EAAiB/8I,QAAUsJ,EAAMkpI,mBAAqBmM,GACxDI,GAAchC,EAAkBzzI,CAAK,EAEvCA,EAAMkuH,MAAQ2lB,EACP7zI,CACT,CACF,EACA,SAASy1I,GAAchC,EAAkBlnG,EAAS,CAChD,IAAMmpG,EAAuBjC,EAAiB/8I,OAC9C,GAAI,CAACg/I,EACH,OAEF,IAAMC,EAAsBlC,EAAiBiC,EAAuB,CAAC,EAC/DE,EAAcrpG,EAAQq5E,KAAO3iE,IAAW1W,EAAQq9F,cAChDiM,EAAeriJ,OAAOmE,KAAK40C,EAAQ08F,UAAU,EACnD,QAASxyI,EAAIo/I,EAAan/I,OAAQD,KAAO,CACvC,IAAMk+I,EAAYpoG,EAAQ08F,WAAW4M,EAAap/I,CAAC,CAAC,EAC9Cq/I,EAAgBnB,EAAUtM,UAAUjqD,QAAQ,EAClDu2D,EAAUrN,UAAYqO,EAAoBxyC,IAC1C,QAASlnD,EAAIy5F,EAAsBz5F,KAAO,CACxC,IAAM85F,EAAYC,GAA0BzpG,EAASupG,EAAerC,EAAkBx3F,EAAG25F,CAAW,EACpG,GAAIG,IAAc,GAAI,CACpBpB,EAAUrN,UAAY/6F,EAAQsgF,UAAUkpB,CAAS,EAAE5yC,IACnD,KACF,CACF,CACF,CACF,CACA,SAAS6yC,GAA0BzpG,EAASupG,EAAerC,EAAkBnmI,EAAOuH,EAAS,CAC3F,IAAMohI,EAAcxC,EAAiBnmI,CAAK,EAC1C,GAAI2oI,EAAa,CACf,IAAMC,EAAWD,EAAYjzC,gBAC7B,GAAI8yC,GAAiBI,GAAY5oI,IAAU,EAAG,CAC5C,IAAI6oI,EACJ,IAAMC,KAAwBD,EAAoB1C,EAAiBnmI,EAAQ,CAAC,IAAM,KAAO,OAAS6oI,EAAkB9hI,QAAUQ,GAAWohI,EAAY5hI,MACrJ,GAAIyhI,GAAiBI,EAAWE,EAAqB,IAAK,CACxD,IAAMC,EAAa5C,EAAiBnmI,CAAK,EAAE2zF,GAAK10D,EAAQk9F,QAClD5c,EAAYtgF,EAAQsgF,UAC1B,GAAIA,EAAUn2H,OAAS+8I,EAAiB/8I,OAAQ,CAE9C,IAAM4/I,GADa7C,EAAiBnmI,EAAQ,CAAC,GAAKu/G,EAAUA,EAAUn2H,OAAS,CAAC,GACpDuqG,GAAK10D,EAAQk9F,QACzC,QAAShzI,EAAI6/I,EAAU7/I,EAAI4/I,EAAY5/I,IAAK,CAC1C,IAAM8/I,EAAoB1pB,EAAUp2H,CAAC,EAAEusG,gBACvC,GAAI8yC,GAAiBS,GAAqBT,EAAgBS,EAAoB1pB,EAAUp2H,CAAC,EAAEksC,SAAW,IACpG,OAAOlsC,CAEX,CACF,CACA,OAAO4/I,CACT,CACF,CACF,CACA,MAAO,EACT,CACA,SAASjE,GAASoE,EAAkBj2C,EAASskC,EAAQ,CACnD,IAAI4R,EAAkBC,EACtB,IAAMC,EAAW,IAAI5Q,GAASyQ,EAAkB3R,CAAM,EAChD+R,GAAiBH,EAAmBE,EAASE,SAAW,KAAOJ,EAAmB,GAClFK,EAAaH,EAASzD,IACtB6D,EAAYJ,EAASxQ,mBAAmB,IAAI,EAC5C6Q,EAA2BL,EAASM,kBACpCC,GAAoBR,EAAsBC,EAASQ,YAAc,KAAOT,EAAsB,WAChGI,GAAcH,EAASS,IAAM,CAACL,GAChCj1I,GAAOjC,MAAM,eAAe82I,EAASS,EAAE,EAAE,EAE3C,IAAMC,EAAcP,EAAa3F,GAAW5uI,QAAQu0I,EAAYv2C,CAAO,EAAI,GACrE8vC,GAAqB2G,GAAsD,KAAK3gJ,MAAM,GAAG,EAAEiF,IAAIkzB,MAAM,EAAE9G,OAAO8G,OAAOmgE,QAAQ,EACnI,OAAO,IAAIuhD,GAAS0G,EAAeS,EAAaH,EAAkB7G,EAAmB0G,EAAWJ,EAASW,KAAK,CAChH,CACA,SAAS/E,GAAqBgF,EAAiB,CAE7C,IAAM7N,EADa,IAAI3D,GAASwR,CAAe,EACZrzC,qBAAqB,aAAa,EACrE,OAAI9M,GAAesyC,CAAe,EACzBA,EAEF,IACT,CACA,SAASoI,GAAU0F,EAAsBx3I,EAAO,CAC9C,IAAIw1G,GAAUgiC,GAAwB,IAAInhJ,MAAM,OAAO,EAAEqxB,OAAQ1S,GAAMA,CAAC,EACxE,CAAC,QAAS,QAAS,MAAM,EAAEnc,QAASkU,GAAS,CAC3C,IAAM0qI,EAAWjiC,EAAO9tF,OAAQ4/E,GAAU+N,GAAY/N,EAAOv6F,CAAI,CAAC,EAC9D0qI,EAAS/gJ,SACXsJ,EAAM,GAAG+M,CAAI,OAAO,EAAI0qI,EAASn8I,IAAK0Z,GAAMA,EAAE3e,MAAM,GAAG,EAAE,CAAC,CAAC,EAAEshB,KAAK,GAAG,EACrE69F,EAASA,EAAO9tF,OAAQ4/E,GAAUmwC,EAASlqI,QAAQ+5F,CAAK,IAAM,EAAE,EAEpE,CAAC,EACDtnG,EAAMgyI,cAAgBx8B,CACxB,CACA,SAAS49B,GAAYhjE,EAAOsnE,EAAWC,EAAe,CACpD,IAAMC,EAAaF,EAAUC,CAAa,EACtCC,IACFxnE,EAAMunE,CAAa,EAAIC,EAE3B,CACA,SAASpC,GAAyB3oB,EAAWmnB,EAAe,CAC1D,IAAI6D,EAAWhrB,EAAUmnB,CAAa,EACtC,QAASv9I,EAAIu9I,EAAev9I,KAAO,CACjC,IAAMuqG,EAAO6rB,EAAUp2H,CAAC,EACxB,GAAI,CAACuqG,EACH,OAEFA,EAAKgC,gBAAkB60C,EAAS70C,gBAAkBhC,EAAKr+D,SAAW,IAClEk1G,EAAW72C,CACb,CACF,CACA,SAASqzC,GAAsBrzC,EAAM+yC,EAAUN,EAAkB,CAC3DzyC,EAAKM,mBACPmyC,EAAiBtzI,KAAK6gG,CAAI,EACjB+yC,GAAY,MAAQA,EAAS/wC,kBACtChC,EAAKgC,gBAAkB+wC,EAAShxC,mBAEpC,CACA,SAASgyC,GAAe/zC,EAAM8zC,EAAUlhI,EAAI4tF,EAAW,CACrDR,EAAKd,OAAS40C,EAAS5B,IACnB4B,EAASgD,WACX92C,EAAKZ,aAAa00C,EAASgD,SAAS,EAEtC92C,EAAKhhG,MAAQ4T,EACbotF,EAAKC,GAAK,cACNO,IACFR,EAAKQ,UAAYA,GAEnBR,EAAKqB,YAAc,IACrB,CACA,SAAS+xC,GAAiBpzC,EAAMQ,EAAWxhG,EAAO,CAChDghG,EAAKQ,UAAYA,EACjB,GAAM,CACJkpC,mBAAAA,CACF,EAAI1qI,GACC,CAAC0qI,EAAmBh0I,QAAUg0I,EAAmBA,EAAmBh0I,OAAS,CAAC,EAAE8qG,YAAcA,IAAchuG,OAAOmE,KAAK6pG,CAAS,EAAE9jE,KAAM1mC,GAAYwqG,EAAUxqG,CAAO,EAAEozG,kBAAkB,GAC7LsgC,EAAmBvqI,KAAK6gG,CAAI,CAEhC,CACA,SAASwzC,GAA6Cx0I,EAAOotB,EAAK52B,EAAQ,CACxEwJ,EAAMmlI,qBAAuB,IAAI1jI,MAAM,UAAU2rB,CAAG,oCAAoC52B,EAAO,CAAC,CAAC,GAAG,CACtG,CACA,SAASi+I,GAAoCz0I,EAAOotB,EAAK52B,EAAQ,CAC/DwJ,EAAMmlI,qBAAuB,IAAI1jI,MAAM,UAAU2rB,CAAG,gDAAgD52B,EAAO,CAAC,CAAC,GAAG,CAClH,CACA,SAASuhJ,GAAgBC,EAAUC,EAAQ,CACzC,IAAMC,EAAYD,EAAOr2C,SACzB,GAAIxK,GAAe8gD,CAAS,EAAG,CAC7B,IAAIv1G,EAAW,EACXq+D,EACAi3C,EAAOh3C,GAAK+2C,EAAS/2C,IACvBt+D,EAAWu1G,EAAYF,EAAS3jI,MAChC2sF,EAAOg3C,IAEPr1G,EAAWq1G,EAAS3jI,MAAQ6jI,EAC5Bl3C,EAAOi3C,GAELj3C,EAAKr+D,WAAaA,GACpBq+D,EAAKsC,YAAY3gE,CAAQ,CAE7B,MAAWs1G,EAAOh3C,GAAK+2C,EAAS/2C,GACX+2C,EAASr2C,KAAOs2C,EAAOt2C,IACxBq2C,EAAS71C,UACzB81C,EAAO50C,SAAS20C,EAAS3jI,OAAS2jI,EAAS71C,UAAY61C,EAAS3jI,MAAM,EAEtE4jI,EAAO50C,SAAS20C,EAAS3jI,MAAQ2jI,EAASr1G,QAAQ,EAGpDs1G,EAAO50C,SAAS5tG,KAAKwG,IAAI+7I,EAAS3jI,MAAQ4jI,EAAOt1G,SAAU,CAAC,CAAC,CAEjE,CACA,SAASw1G,GAAiB5rG,EAASy0D,EAAMY,EAAUC,EAAQC,EAAUC,EAAQ,CAC/CF,EAASD,GACV,IACzB9/F,GAAOnC,KAAK,2CAA4CqhG,CAAI,EAC5Da,EAASD,EAAWZ,EAAKr+D,SACzBo/D,EAASD,EAAWd,EAAKr+D,UAE3B,IAAIu/D,EAAcN,EACdO,EAAYN,EACVu2C,EAAep3C,EAAKY,SACpBy2C,EAAar3C,EAAKa,OACxB,GAAIzK,GAAeghD,CAAY,EAAG,CAChC,IAAMn2C,EAAWxsG,KAAKqnB,IAAIs7H,EAAex2C,CAAQ,EAC5CxK,GAAe4J,EAAKiB,QAAQ,EAG/BjB,EAAKiB,SAAWxsG,KAAKwG,IAAIgmG,EAAUjB,EAAKiB,QAAQ,EAFhDjB,EAAKiB,SAAWA,EAIlBC,EAAczsG,KAAKwG,IAAI2lG,EAAUw2C,CAAY,EAC7Cx2C,EAAWnsG,KAAKgmB,IAAImmF,EAAUw2C,CAAY,EAC1Ct2C,EAAWrsG,KAAKgmB,IAAIqmF,EAAUd,EAAKc,QAAQ,EAC3CK,EAAY1sG,KAAKgmB,IAAIomF,EAAQw2C,CAAU,EACvCx2C,EAASpsG,KAAKwG,IAAI4lG,EAAQw2C,CAAU,EACpCt2C,EAAStsG,KAAKwG,IAAI8lG,EAAQf,EAAKe,MAAM,CACvC,CACA,IAAMopC,EAAQvpC,EAAWZ,EAAK3sF,MAC1B2sF,EAAK3sF,QAAU,GACjB2sF,EAAKqC,SAASzB,CAAQ,EAExBZ,EAAKsC,YAAYzB,EAASb,EAAK3sF,KAAK,EACpC2sF,EAAKY,SAAWA,EAChBZ,EAAKkB,YAAcA,EACnBlB,EAAKc,SAAWA,EAChBd,EAAKa,OAASA,EACdb,EAAKmB,UAAYA,EACjBnB,EAAKe,OAASA,EACd,IAAMd,EAAKD,EAAKC,GAChB,GAAI,CAAC10D,GAAW00D,EAAK10D,EAAQk9F,SAAWxoC,EAAK10D,EAAQy8F,MACnD,MAAO,GAET,IAAIvyI,EACE6hJ,EAAUr3C,EAAK10D,EAAQk9F,QACvB5c,EAAYtgF,EAAQsgF,UAE1B,IADAA,EAAUyrB,CAAO,EAAIt3C,EAChBvqG,EAAI6hJ,EAAS7hJ,EAAI,EAAGA,IACvBshJ,GAAgBlrB,EAAUp2H,CAAC,EAAGo2H,EAAUp2H,EAAI,CAAC,CAAC,EAEhD,IAAKA,EAAI6hJ,EAAS7hJ,EAAIo2H,EAAUn2H,OAAS,EAAGD,IAC1CshJ,GAAgBlrB,EAAUp2H,CAAC,EAAGo2H,EAAUp2H,EAAI,CAAC,CAAC,EAEhD,OAAI81C,EAAQ4hF,cACV4pB,GAAgBlrB,EAAUA,EAAUn2H,OAAS,CAAC,EAAG61C,EAAQ4hF,YAAY,EAEvE5hF,EAAQu8F,SAAWv8F,EAAQw8F,eAAiB,GACrCoC,CACT,CACA,SAASoN,GAAaC,EAAYC,EAAY,CAC5C,GAAID,IAAeC,EACjB,OAEF,IAAI/E,EAAqB,KACnBgF,EAAeF,EAAW3rB,UAChC,QAASp2H,EAAIiiJ,EAAahiJ,OAAS,EAAGD,GAAK,EAAGA,IAAK,CACjD,IAAMkiJ,EAAUD,EAAajiJ,CAAC,EAAE4rG,YAChC,GAAIs2C,EAAS,CACXjF,EAAqBiF,EACrB,KACF,CACF,CACIH,EAAWrqB,cACb,OAAOqqB,EAAWrqB,aAAatsB,OAEjC,IAAI+2C,EACJC,GAAwBL,EAAYC,EAAY,CAACK,EAASC,EAASC,EAAcC,IAAkB,CACjG,IAAK,CAACR,EAAWxqB,SAAWwqB,EAAW3O,kBAAoBiP,EAAQp3C,KAAOm3C,EAAQn3C,GAAI,CACpF,IAAMu3C,EAAWJ,EAAQn3C,GAAKo3C,EAAQp3C,GACtC,QAASlrG,EAAIuiJ,EAAcviJ,EAAIwiJ,EAAcviJ,OAAQD,IACnDwiJ,EAAcxiJ,CAAC,EAAEkrG,IAAMu3C,EAEzBT,EAAWvqB,MAAQ+qB,EAAcA,EAAcviJ,OAAS,CAAC,EAAEirG,EAC7D,CACIvK,GAAe0hD,EAAQl3C,QAAQ,GAAKxK,GAAe0hD,EAAQj3C,MAAM,IACnEk3C,EAAQ11C,SAAS01C,EAAQn3C,SAAWk3C,EAAQl3C,QAAQ,EACpDm3C,EAAQj3C,SAAWg3C,EAAQh3C,SAC3Bi3C,EAAQ72C,YAAc42C,EAAQ52C,YAC9B62C,EAAQl3C,OAASi3C,EAAQj3C,OACzBk3C,EAAQh3C,OAAS+2C,EAAQ/2C,OACzBg3C,EAAQ52C,UAAY22C,EAAQ32C,UAC5B42C,EAAQz1C,YAAYw1C,EAAQj3C,OAASi3C,EAAQl3C,QAAQ,EACjDm3C,EAAQp2G,WACVi2G,EAAUG,GAEZN,EAAW3P,SAAW2P,EAAW1P,eAAiB,IAEhD+P,EAAQl4C,aACVm4C,EAAQr4C,kBAAoBo4C,EAAQp4C,mBAEtCq4C,EAAQt3C,OAASq3C,EAAQr3C,OACrBq3C,EAAQn4C,WACVo4C,EAAQl4C,MAAQi4C,EAAQj4C,OAEtBi4C,EAAQz2C,cACV02C,EAAQ12C,YAAcy2C,EAAQz2C,YAC9BqxC,EAAqBoF,EAAQz2C,YAEjC,CAAC,EACD,IAAM82C,EAAeV,EAAW5rB,UAC1BusB,EAAmBX,EAAWtqB,aAAegrB,EAAal+I,OAAOw9I,EAAWtqB,YAAY,EAAIgrB,EASlG,GARIzF,GACF0F,EAAiBvgJ,QAASmoG,GAAS,CACjC,IAAIq4C,EACAr4C,IAAS,CAACA,EAAKqB,aAAerB,EAAKqB,YAAYnC,WAAam5C,EAAsB3F,IAAuB,KAAO,OAAS2F,EAAoBn5C,WAC/Ic,EAAKqB,YAAcqxC,EAEvB,CAAC,EAEC+E,EAAW3O,gBAAiB,CAE9B,GADA2O,EAAWpO,kBAAoB8O,EAAaz7G,KAAMsjE,GAAS,CAACA,CAAI,EAC5Dy3C,EAAWpO,kBAAmB,CAChCvoI,GAAOnC,KAAK,6EAA6E,EACzF,QAASlJ,EAAIgiJ,EAAW3O,gBAAiBrzI,KACvC0iJ,EAAa7hH,MAAM,EAErBmhH,EAAWhP,QAAU0P,EAAa,CAAC,EAAEl4C,EACvC,KAAO,CACDw3C,EAAWz8B,oBACby8B,EAAWxP,WAAaqQ,GAAgBd,EAAWvP,WAAYwP,CAAU,GAE3E,IAAMhF,EAAmB+E,EAAW3rB,UAAUnlG,OAAQs5E,GAASA,EAAKM,kBAAkB,EACtF,GAAIk3C,EAAWvN,oBAAsB,CAACwN,EAAWxN,mBAC/C,QAASx0I,EAAI,EAAGA,EAAI2iJ,EAAiB1iJ,OAAQD,IACvC2iJ,EAAiB3iJ,CAAC,EAAEusG,kBAAoB,MAC1CqxC,GAAsB+E,EAAiB3iJ,CAAC,EAAG2iJ,EAAiB3iJ,EAAI,CAAC,EAAGg9I,CAAgB,EAI1FgC,GAAchC,EAAkBgF,CAAU,CAC5C,CACAA,EAAWvqB,MAAQirB,EAAaA,EAAaziJ,OAAS,CAAC,EAAEirG,EAC3D,CACA,GAAI,CAAC82C,EAAWxqB,QAAS,CACvB,IAAIsrB,EACJ,IAAMC,EAAsBC,GAAkBjB,EAAYC,EAAWhP,QAAU,CAAC,EAChFgP,EAAWxqB,SAAWsrB,EAA+DC,GAAoB73C,KAAO,KAAO43C,EAAwBJ,EAAa,CAAC,EAAEx3C,EACjK,CACA+3C,GAAoBlB,EAAW1f,SAAU2f,EAAW3f,SAAU,CAAC6gB,EAASC,IAAY,CAClFA,EAAQl5C,kBAAoBi5C,EAAQj5C,kBACpCk5C,EAAQ/4C,MAAQ84C,EAAQ94C,KAC1B,CAAC,EACG+3C,EACFT,GAAiBM,EAAYG,EAASA,EAAQh3C,SAAUg3C,EAAQ/2C,OAAQ+2C,EAAQ92C,SAAU82C,EAAQ72C,MAAM,EAExG83C,GAAcrB,EAAYC,CAAU,EAElCU,EAAaziJ,SACf+hJ,EAAW7O,cAAgB6O,EAAWpN,KAAO8N,EAAa,CAAC,EAAE9kI,OAE/DokI,EAAWnO,eAAiBkO,EAAWlO,eACvCmO,EAAWjO,WAAagO,EAAWhO,WACnC,IAAMnB,EAAmBoP,EAAWpP,iBACpC,GAAIoP,EAAWlP,UAAYF,EAAkB,CAC3C,IAAMgC,EAAOoN,EAAWpN,KACnBoN,EAAWjO,aACdiO,EAAWnO,eAAiBjB,EAC5BoP,EAAWjO,WAAaa,GAE1BoN,EAAWlO,aAAelB,EAC1BoP,EAAWhO,SAAWY,CACxB,MACEoN,EAAWlO,aAAeiO,EAAWjO,aACrCkO,EAAWhO,SAAW+N,EAAW/N,SACjCgO,EAAWpP,iBAAmBmP,EAAWnP,iBAEvCoP,EAAWtP,mBAAqB,KAClCsP,EAAWtP,iBAAmBqP,EAAWrP,iBAE7C,CACA,SAASmQ,GAAgBQ,EAAerB,EAAY,CAClD,GAAM,CACJxP,WAAY8Q,EACZhQ,0BAAAA,CACF,EAAI0O,EACExP,EAAaxuC,GAAS,CAAC,EAAGq/C,CAAa,EACzC/P,GACFA,EAA0BlxI,QAAS+a,GAAO,CACxC,OAAOq1H,EAAWr1H,CAAE,CACtB,CAAC,EAGH,IAAMomI,EADWxmJ,OAAOmE,KAAKsxI,CAAU,EACXvyI,OAC5B,OAAIsjJ,GACFxmJ,OAAOmE,KAAKoiJ,CAAe,EAAElhJ,QAAS+a,GAAO,CAC3C,IAAMqmI,EAAkBhR,EAAWr1H,CAAE,EAC/B+gI,EAAY,IAAI1N,GAAU8S,EAAgBnmI,CAAE,EAAEwuD,KAAM63E,CAAe,EACrEtF,EAAUjM,SACZO,EAAWr1H,CAAE,EAAI+gI,EACZsF,IACHtF,EAAUpN,UAAYyS,IAGxBl4I,GAAOnC,KAAK,0DAA0DqB,GAAU+4I,EAAgBnmI,CAAE,EAAEwuD,IAAI,CAAC,GAAG,CAEhH,CAAC,EAEI6mE,CACT,CACA,SAASyQ,GAAoBQ,EAAUC,EAAUC,EAAgB,CAC/D,GAAIF,GAAYC,EAAU,CACxB,IAAIE,EAAQ,EACZ,QAAS5jJ,EAAI,EAAGy2F,EAAMgtD,EAASxjJ,OAAQD,GAAKy2F,EAAKz2F,IAAK,CACpD,IAAMkjJ,EAAUO,EAASzjJ,CAAC,EACpBmjJ,EAAUO,EAAS1jJ,EAAI4jJ,CAAK,EAC9BV,GAAWC,GAAWD,EAAQrsI,QAAUssI,EAAQtsI,OAASqsI,EAAQ/6C,SAASqC,KAAO24C,EAAQh7C,SAASqC,GACpGm5C,EAAeT,EAASC,CAAO,EAE/BS,GAEJ,CACF,CACF,CACA,SAASxB,GAAwBL,EAAYC,EAAY2B,EAAgB,CACvE,IAAMtQ,EAAkB2O,EAAW3O,gBAC7Bz1H,EAAQ5e,KAAKwG,IAAIu8I,EAAW/O,QAASgP,EAAWhP,OAAO,EAAIgP,EAAWhP,QACtEj1H,GAAOgkI,EAAWrqB,aAAe,EAAI,IAAM2b,EAAkB2O,EAAWzP,MAAQvzI,KAAKgmB,IAAI+8H,EAAWxP,MAAOyP,EAAWzP,KAAK,GAAKyP,EAAWhP,QAC3I4Q,EAAQ5B,EAAWhP,QAAU+O,EAAW/O,QACxC6Q,EAAW7B,EAAWtqB,aAAesqB,EAAW5rB,UAAU5xH,OAAOw9I,EAAWtqB,YAAY,EAAIsqB,EAAW5rB,UACvG0tB,EAAW/B,EAAWrqB,aAAeqqB,EAAW3rB,UAAU5xH,OAAOu9I,EAAWrqB,YAAY,EAAIqqB,EAAW3rB,UAC7G,QAASp2H,EAAI4d,EAAO5d,GAAK+d,EAAK/d,IAAK,CACjC,IAAMqiJ,EAAUyB,EAASF,EAAQ5jJ,CAAC,EAC9BsiJ,EAAUuB,EAAS7jJ,CAAC,EAIxB,GAHIqzI,GAAmB,CAACiP,GAAWD,IACjCC,EAAUN,EAAW5rB,UAAUp2H,CAAC,EAAIqiJ,GAElCA,GAAWC,GAEb,GADAqB,EAAetB,EAASC,EAAStiJ,EAAG6jJ,CAAQ,EACxCxB,EAAQzgJ,KAAOygJ,EAAQzgJ,MAAQ0gJ,EAAQ1gJ,IAAK,CAC9CogJ,EAAWtT,qBAAuBqV,GAAiB,2BAA2BzB,EAAQ93C,EAAE,IAAKu3C,EAAYC,EAAYK,EAASC,CAAO,EACrI,MACF,SAAWD,EAAQn3C,KAAOo3C,EAAQp3C,GAAI,CACpC82C,EAAWtT,qBAAuBqV,GAAiB,oCAAoC1B,EAAQn3C,EAAE,KAAKo3C,EAAQp3C,EAAE,IAAK62C,EAAYC,EAAYK,EAASC,CAAO,EAC7J,MACF,EAEJ,CACF,CACA,SAASyB,GAAiBl7I,EAASk5I,EAAYC,EAAYK,EAASC,EAAS,CAC3E,OAAO,IAAIt3I,MAAM,GAAGnC,CAAO,IAAIy5I,EAAQ1gJ,GAAG;qBACvBmgJ,EAAW/O,OAAO;EACrC+O,EAAW79F,IAAI;;qBAEI89F,EAAWhP,OAAO;EACrCgP,EAAW99F,IAAI,EAAE,CACnB,CACA,SAASk/F,GAAcrB,EAAYC,EAAYgC,EAAmC,GAAM,CACtF,IAAMJ,EAAQ5B,EAAWhP,QAAUgP,EAAW3O,gBAAkB0O,EAAW/O,QACrEiP,EAAeF,EAAW3rB,UAC1B6tB,EAAmBL,GAAS,EAC9BM,EAAU,EACd,GAAID,GAAoBL,EAAQ3B,EAAahiJ,OAC3CikJ,EAAUjC,EAAa2B,CAAK,EAAEhmI,cACrBqmI,GAAoBjC,EAAWhP,UAAY+O,EAAWxP,MAAQ,EACvE2R,EAAUnC,EAAWjN,oBACZmP,GAAoBD,EAC7BE,EAAUnC,EAAW9M,cAAgB2O,EAAQ5B,EAAWvN,4BAC/C,CAACuN,EAAW3O,iBAAmB2O,EAAW/M,gBAAkB,EACrEiP,EAAUnC,EAAW9M,kBAErB,QAEFkP,GAAWnC,EAAYkC,CAAO,CAChC,CACA,SAASC,GAAWruG,EAASouG,EAAS,CACpC,GAAIA,EAAS,CACX,IAAM9tB,EAAYtgF,EAAQsgF,UAC1B,QAASp2H,EAAI81C,EAAQu9F,gBAAiBrzI,EAAIo2H,EAAUn2H,OAAQD,IAC1Do2H,EAAUp2H,CAAC,EAAE2sG,SAASu3C,CAAO,EAE3BpuG,EAAQ4hF,cACV5hF,EAAQ4hF,aAAa/qB,SAASu3C,CAAO,CAEzC,CACF,CACA,SAASE,GAAsBpC,EAAYqC,EAAuB73F,IAAU,CAC1E,IAAI83F,EAAiB,IAAMtC,EAAW9O,eACtC,GAAI8O,EAAWnP,QAAS,CACtB,IAAMzc,EAAY4rB,EAAW5rB,UAE7B,GAAIA,EAAUn2H,QAAUqkJ,EADW,EACmCD,EAAsB,CAC1F,IAAME,EAAsBnuB,EAAUA,EAAUn2H,OAAS,CAAC,EAAEisC,SAAW,IACnEq4G,EAAsBD,IACxBA,EAAiBC,EAErB,CACF,MACED,GAAkB,EAEpB,OAAOtlJ,KAAK+B,MAAMujJ,CAAc,CAClC,CACA,SAAStB,GAAkBltG,EAAS00D,EAAIgjB,EAAa,CACnD,GAAI,CAAC13E,EACH,OAAO,KAET,IAAIqyD,EAAWryD,EAAQsgF,UAAU5rB,EAAK10D,EAAQk9F,OAAO,EAKrD,OAJI7qC,IAGJA,EAAWryD,EAAQ4hF,aACfvvB,GAAYA,EAASqC,KAAOA,GACvBrC,EAELqC,EAAK10D,EAAQk9F,SAAWxlB,GAAeA,EAAYhjB,KAAOA,EACrDgjB,EAEF,IACT,CACA,SAASg3B,GAAY1uG,EAAS00D,EAAIi6C,EAAW,CAC3C,OAAK3uG,EAGE4uG,GAAS5uG,EAAQusF,SAAU73B,EAAIi6C,CAAS,EAFtC,IAGX,CACA,SAASC,GAASriB,EAAU73B,EAAIi6C,EAAW,CACzC,GAAIpiB,EACF,QAASriI,EAAIqiI,EAASpiI,OAAQD,KAAO,CACnC,IAAMgxD,EAAOqxE,EAASriI,CAAC,EACvB,GAAIgxD,EAAKn6C,QAAU4tI,GAAazzF,EAAKm3C,SAASqC,KAAOA,EACnD,OAAOx5C,CAEX,CAEF,OAAO,IACT,CACA,SAAS2zF,GAA6Bv0H,EAAQ,CAC5CA,EAAOhuB,QAAQ,CAACmH,EAAOsN,IAAU,CAC/B,IAAI+tI,GACHA,EAAiBr7I,EAAMusC,UAAY,MAAgB8uG,EAAexuB,UAAUh0H,QAAS+lG,GAAa,CACjGA,EAAS5+F,MAAQsN,EACbsxF,EAASyD,cACXzD,EAASyD,YAAYriG,MAAQsN,EAEjC,CAAC,CACH,CAAC,CACH,CACA,SAASguI,GAAoBzuB,EAAWlrB,EAAI,CAC1C,QAASlrG,EAAI,EAAGy2F,EAAM2/B,EAAUn2H,OAAQD,EAAIy2F,EAAKz2F,IAAK,CACpD,IAAI8kJ,EACJ,KAAMA,EAAe1uB,EAAUp2H,CAAC,IAAM,KAAO,OAAS8kJ,EAAa55C,MAAQA,EACzE,OAAOkrB,EAAUp2H,CAAC,CAEtB,CACA,OAAO,IACT,CACA,SAAS+kJ,GAA6BC,EAAYlvG,EAAS,CACzD,MAAIkvG,GAAAA,GACElvG,EAAQ0hF,QAAUwtB,EAAWvtB,OAAS3hF,EAAQ2hF,MAAQutB,EAAWxtB,QAKzE,CACA,SAASytB,GAAoB16C,EAAM25C,EAAS,CAC1C,GAAI35C,EAAM,CACR,IAAM3sF,EAAQ2sF,EAAK3sF,MAAQsmI,EAC3B35C,EAAK3sF,MAAQ2sF,EAAKY,SAAWvtF,EAC7B2sF,EAAKa,OAASxtF,EAAQ2sF,EAAKr+D,QAC7B,CACF,CACA,SAASg5G,GAAmBhB,EAASpuG,EAAS,CAC5C,IAAMsgF,EAAYtgF,EAAQsgF,UAC1B,QAASp2H,EAAI,EAAGy2F,EAAM2/B,EAAUn2H,OAAQD,EAAIy2F,EAAKz2F,IAC/CilJ,GAAoB7uB,EAAUp2H,CAAC,EAAGkkJ,CAAO,EAEvCpuG,EAAQ4hF,cACVutB,GAAoBnvG,EAAQ4hF,aAAcwsB,CAAO,EAEnDpuG,EAAQw8F,eAAiB,EAC3B,CACA,SAAS6S,GAAYC,EAAetvG,EAAS,CACtCsvG,IAGLC,GAAqBvvG,EAASsvG,CAAa,EACvC,CAACtvG,EAAQw8F,gBAAkB8S,GAC7BE,GAAwBxvG,EAASsvG,CAAa,EAE5C,CAACtvG,EAAQw8F,gBAAkB8S,GAAiB,CAACtvG,EAAQu9F,iBACvD+P,GAAcgC,EAAetvG,EAAS,EAAK,EAE/C,CACA,SAASuvG,GAAqBvvG,EAASkvG,EAAY,CACjD,GAAI,CAACD,GAA6BC,EAAYlvG,CAAO,EACnD,OAEF,IAAMyvG,EAAWvmJ,KAAKgmB,IAAIggI,EAAWvtB,MAAO3hF,EAAQ2hF,KAAK,EACnD+tB,EAAUX,GAAoBG,EAAW5uB,UAAWmvB,CAAQ,EAC5Dh7C,EAAOs6C,GAAoB/uG,EAAQsgF,UAAWmvB,CAAQ,EAC5D,GAAI,CAACC,GAAW,CAACj7C,EACf,OAEFl/F,GAAOpC,IAAI,uDAAuDs8I,CAAQ,EAAE,EAC5E,IAAM3B,EAAQ4B,EAAQ5nI,MAAQ2sF,EAAK3sF,MACnCsnI,GAAmBtB,EAAO9tG,CAAO,CACnC,CACA,SAASwvG,GAAwBxvG,EAASkvG,EAAY,CACpD,GAAI,CAAClvG,EAAQ0+F,oBAAsB,CAACwQ,EAAWxQ,mBAC7C,OAEF,IAAMpe,EAAYtgF,EAAQsgF,UACpBqvB,EAAeT,EAAW5uB,UAChC,GAAI,CAACA,EAAUn2H,QAAU,CAACwlJ,EAAaxlJ,OACrC,OAEF,IAAIulJ,EACAj7C,EACEg7C,EAAWvmJ,KAAKgmB,IAAIggI,EAAWvtB,MAAO3hF,EAAQ2hF,KAAK,EACrDutB,EAAWxtB,QAAU+tB,GAAYzvG,EAAQ0hF,QAAU+tB,IACrDC,EAAUX,GAAoBY,EAAcF,CAAQ,EACpDh7C,EAAOs6C,GAAoBzuB,EAAWmvB,CAAQ,IAE5C,CAACC,GAAW,CAACj7C,KACfi7C,EAAUC,EAAazmJ,KAAKC,MAAMwmJ,EAAaxlJ,OAAS,CAAC,CAAC,EAC1DsqG,EAAOs6C,GAAoBzuB,EAAWovB,EAAQt6C,EAAE,GAAKkrB,EAAUp3H,KAAKC,MAAMm3H,EAAUn2H,OAAS,CAAC,CAAC,GAEjG,IAAMylJ,EAASF,EAAQj5C,gBACjBo5C,EAAYp7C,EAAKgC,gBACvB,GAAI,CAACm5C,GAAU,CAACC,EACd,OAEF,IAAM/B,GAAS+B,EAAYD,GAAU,KAAOn7C,EAAK3sF,MAAQ4nI,EAAQ5nI,OACjEsnI,GAAmBtB,EAAO9tG,CAAO,CACnC,CACA,IAAM8vG,GAAa,CACjB1jJ,SAAU,SAASuP,EAAG,CACpB,IAAIxI,EAAM,GACJwtF,EAAMhlF,EAAExR,OACd,QAASD,EAAI,EAAGA,EAAIy2F,EAAKz2F,IACvBiJ,GAAO,IAAIwI,EAAEmM,MAAM5d,CAAC,EAAEoO,QAAQ,CAAC,CAAC,IAAIqD,EAAEsM,IAAI/d,CAAC,EAAEoO,QAAQ,CAAC,CAAC,IAEzD,OAAOnF,CACT,CACF,EACM48I,GAAQ,CACZC,QAAS,UACTC,KAAM,OACNC,YAAa,cACbl1B,aAAc,eACdm1B,2BAA4B,6BAC5BC,cAAe,gBACfC,QAAS,UACTC,OAAQ,SACRC,MAAO,QACP7sG,MAAO,QACP8sG,iBAAkB,mBAClBC,cAAe,eACjB,EACMC,GAAN,cAAmCxa,EAAS,CAC1ClkI,YAAY+kH,EAAK45B,EAAiBx7C,EAAWy7C,EAAW3mB,EAAc,CACpE,MAAM2mB,EAAW75B,EAAIxhH,MAAM,EAC3B,KAAKwhH,IAAM,OACX,KAAK+J,aAAe,KACpB,KAAKpJ,YAAc,KACnB,KAAKi5B,gBAAkB,OACvB,KAAKE,WAAa,KAClB,KAAKC,OAASf,GAAMC,QACpB,KAAK/lB,aAAe,OACpB,KAAKpmD,MAAQ,KACb,KAAKktE,YAAc,KACnB,KAAKjkF,OAAS,OACd,KAAK+oC,YAAc,GACnB,KAAKm7C,gBAAkB,EACvB,KAAKC,iBAAmB,EACxB,KAAK5sB,cAAgB,EACrB,KAAK8Y,gBAAkB,KACvB,KAAK+T,UAAY,EACjB,KAAK52H,OAAS,KACd,KAAK62H,eAAiB,OACtB,KAAKh8C,UAAY,OACjB,KAAKi8C,gBAAkB,KACvB,KAAKC,mBAAqB,GAC1B,KAAKC,UAAY,OACjB,KAAKC,QAAU,CAAA,EACf,KAAKr+C,UAAY,GACjB,KAAKs+C,aAAe,GACpB,KAAKC,OAAS,OACd,KAAKC,eAAiB,IAAM,CAC1B,GAAM,CACJ5kF,OAAAA,EACA4qD,YAAAA,EACA7zC,MAAAA,EACAktE,YAAAA,EACA7+H,MAAAA,CACF,EAAI,KACEuwB,EAAcohC,EAAQA,EAAMphC,YAAc,EAC1Cg2E,EAAa6e,GAAa7e,WAAWs4B,GAA4BltE,EAAOphC,EAAaqqB,EAAO6kF,aAAa,EACzGC,EAAiB,CAACn5B,EAAW93B,IAEnC,GADA,KAAKxtF,IAAI,oBAAoB03F,GAAepoD,CAAW,EAAIA,EAAYnqC,QAAQ,CAAC,EAAImqC,CAAW,YAAYvwB,CAAK,KAAK0/H,EAAiB,SAAW,IAAI,SAAS,EAC1J,KAAK1/H,QAAU69H,GAAMQ,MACvB,KAAKsB,kBAAkB,UACdn6B,EAAa,CACtB,IAAMo6B,EAAYhlF,EAAO0zD,uBACnBuxB,EAAkBr6B,EAAY5vG,MAAQgqI,EACtCE,EAAgBt6B,EAAY5vG,MAAQ4vG,EAAYthF,SAAW07G,EACjE,GAAIF,GAAkBI,EAAgBv5B,EAAW3wG,OAASiqI,EAAkBt5B,EAAWxwG,IAAK,CAC1F,IAAMgqI,EAAexvG,EAAcuvG,GAC/BvvG,EAAcsvG,GAAmBE,KAC/BA,GAAgBv6B,EAAYxiB,SAC9B,KAAK/hG,IAAI,0CAA0CukH,EAAYhjB,EAAE,GAAG,EACpEgjB,EAAYxgB,cAAc,EAC1B,KAAK26C,kBAAkB,GAEzB,KAAK/wB,aAAe,KAExB,CACF,CACA,GAAIj9C,EAAO,CACT,KAAK8sE,gBAAgB1kB,uBAAuBxpF,EAAaiU,IAAU,KAAKuzE,aAAc,EAAI,EAC1F,IAAM+mB,EAAkB,KAAKA,gBAI7B,GAHIvuG,EAAcuuG,IAChB,KAAKA,gBAAkBvuG,GAErB,CAAC,KAAK+uG,aAAc,CACtB,IAAMzwB,EAAY73H,KAAKwG,IAAI+oH,EAAWxwG,IAAKw6B,CAAW,EAChDyvG,EAAkB,KAAKA,gBAAgB,KAAKC,gBAAgB,EAAGpxB,CAAS,EAC1EmxB,IACF,KAAK/+I,IAAI,uCAAuCsvC,EAAYnqC,QAAQ,CAAC,CAAC,iBAAiByoH,EAAUzoH,QAAQ,CAAC,CAAC,EAAE,EAC7G,KAAKk5I,aAAeU,EAExB,CACF,CACK,KAAKn7B,IAAIq7B,mBACZ,KAAKj/I,IAAI,WAAWy+I,EAAiB,gBAAkB,kBAAkB,OAAOnvG,CAAW,mCAAmC,EAC9H,KAAKwuG,iBAAmBxuG,EACpBmvG,IACF,KAAKvtB,cAAgB5hF,IAGzB,KAAKs0F,cAAc,CACrB,EACA,KAAKsb,aAAe,IAAM,CACxB,KAAKl/I,IAAI,gDAAgD,EACzD,KAAKkxH,cAAgB,KAAK2sB,gBAAkB,CAC9C,EACA,KAAK/mB,aAAeA,EACpB,KAAKlT,IAAMA,EACX,KAAKo6B,eAAiB,IAAI9d,GAAetc,EAAIjqD,MAAM,EACnD,KAAKqoC,UAAYA,EACjB,KAAKw7C,gBAAkBA,EACvB,KAAK7jF,OAASiqD,EAAIjqD,OAClB,KAAKwkF,UAAY,IAAI3f,GAAU5a,EAAIjqD,MAAM,CAC3C,CACA4tD,mBAAoB,CAClB,GAAM,CACJ3D,IAAAA,CACF,EAAI,KACJA,EAAInvF,GAAG2wC,EAAO+5E,eAAgB,KAAKC,gBAAiB,IAAI,EACxDx7B,EAAInvF,GAAG2wC,EAAOi6E,gBAAiB,KAAKC,iBAAkB,IAAI,EAC1D17B,EAAInvF,GAAG2wC,EAAOuiD,iBAAkB,KAAKC,kBAAmB,IAAI,EAC5DhE,EAAInvF,GAAG2wC,EAAOm6E,gBAAiB,KAAKC,iBAAkB,IAAI,EAC1D57B,EAAInvF,GAAG2wC,EAAO70B,MAAO,KAAKo4E,QAAS,IAAI,CACzC,CACAC,qBAAsB,CACpB,GAAM,CACJhF,IAAAA,CACF,EAAI,KACJA,EAAI/7F,IAAIu9C,EAAO+5E,eAAgB,KAAKC,gBAAiB,IAAI,EACzDx7B,EAAI/7F,IAAIu9C,EAAOi6E,gBAAiB,KAAKC,iBAAkB,IAAI,EAC3D17B,EAAI/7F,IAAIu9C,EAAOuiD,iBAAkB,KAAKC,kBAAmB,IAAI,EAC7DhE,EAAI/7F,IAAIu9C,EAAOm6E,gBAAiB,KAAKC,iBAAkB,IAAI,EAC3D57B,EAAI/7F,IAAIu9C,EAAO70B,MAAO,KAAKo4E,QAAS,IAAI,CAC1C,CACAgb,QAAS,CACP,KAAK8b,UAAU,CACjB,CACAA,WAAY,CACZ,CACAxuB,UAAUC,EAAe,CACzB,CACAC,UAAW,CACT,GAAI,KAAKpyG,QAAU69H,GAAMC,QACvB,OAEF,KAAKmB,eAAeltI,MAAM,EAC1B,KAAKkxF,UAAUlxF,MAAM,KAAKgmH,YAAY,EACtC,IAAMx1B,EAAO,KAAKijB,YACdjjB,GAAQ,MAAQA,EAAKS,SACvBT,EAAKyC,cAAc,EACnB,KAAKy5C,gBAAgBtmB,eAAe51B,CAAI,GAE1C,KAAKo+C,gBAAgB,EACrB,KAAKn7B,YAAc,KACnB,KAAKoJ,aAAe,KACpB,KAAKjtF,cAAc,EACnB,KAAK6iG,cAAc,EACnB,KAAKxkH,MAAQ69H,GAAMC,OACrB,CACA,IAAI8C,oBAAqB,CACvB,GAAM,CACJ7B,iBAAAA,EACA5sB,cAAAA,CACF,EAAI,KACJ,OAAIA,IAAkB,IAAM4sB,EACnBA,EAEF5sB,CACT,CACA,IAAI0uB,kBAAmB,CACrB,OAAO,KAAK7/C,SACd,CACA8/C,gBAAiB,CACf,KAAK9/C,UAAY,EACnB,CACA+/C,iBAAkB,CAChB,KAAK//C,UAAY,EACnB,CACA,IAAIggD,cAAe,CACjB,MAAO,CACLz+C,KAAM,KAAKijB,YACXxlG,MAAO,KAAKA,KACd,CACF,CACAihI,aAAa16B,EAAYgH,EAAc,CACrC,GAAIA,EAAapG,MAAQ,CAAC,KAAKx1C,MAC7B,MAAO,GAET,IAAMk9C,EAAYtI,EAAWxwG,KAAO,EAC9BmrI,EAAgB,KAAKtmF,OAAOumF,gBAAkB,EACpD,GAAItyB,GAAaqyB,EACf,MAAO,GAET,IAAM3b,EAAiBhf,EAAWtiF,SAC9B,KAAK22B,OAAO6kF,eAAiBla,GAAkBA,EAAettI,OAAS,IACzEsuH,EAAa6e,GAAaM,aAAaH,EAAgBhf,EAAW3wG,MAAO,CAAC,GAE5E,IAAMmwH,EAAYxf,EAAWwf,UAK7B,GAJ+BA,GAAaA,EAAYmb,GAAiBnb,EAAYxY,EAAaqf,MAI9F,KAAKj7D,MAAMphC,YAAcg2E,EAAW3wG,MACtC,MAAO,GAET,IAAMykH,EAAW9M,EAAa8M,SAC9B,GAAIA,GAAY,MAAQA,EAASpiI,OAAQ,CACvC,IAAMmpJ,EAAW/mB,EAASA,EAASpiI,OAAS,CAAC,EAE7C,OADyBmtI,GAAaC,WAAW,KAAK1zD,MAAOyvE,EAASxrI,MAAQwrI,EAASl9G,SAAW,CAAC,CAErG,CACA,IAAM6zF,EAAexK,EAAaa,UAAUb,EAAaa,UAAUn2H,OAAS,CAAC,EAAEqW,KAC/E,OAAO,KAAKmwI,gBAAgBllB,kBAAkBxB,CAAY,CAC5D,CACAkoB,iBAAkB,CAChB,GAAI,KAAK73H,QAAU,KAAK82H,kBAAoB,KAAM,CAChD,IAAImC,EACJ,OAAQA,EAAwB,KAAKnC,kBAAoB,KAAO,OAASmC,EAAsBvzG,OACjG,CACF,CACA,IAAIqzG,gBAAiB,CACnB,IAAMG,EAA2B,KAAK1mF,OAAOumF,eAC7C,GAAIG,EAA0B,CAC5B,IAAIC,EACJ,QAASA,EAAwB,KAAKtB,gBAAgB,IAAM,KAAO,OAASsB,EAAsBrV,wBAA0BoV,CAC9H,CACA,MAAO,EACT,CACAjB,gBAAgB31I,EAAOwG,EAAM,CAC3B,IAAMygE,EAAQ,KAAKA,MAAQ,KAAKktE,YAAc3tI,EAAKygE,MACnDA,EAAMz/C,oBAAoB,UAAW,KAAKstH,cAAc,EACxD7tE,EAAMz/C,oBAAoB,QAAS,KAAKiuH,YAAY,EACpDxuE,EAAMx/C,iBAAiB,UAAW,KAAKqtH,cAAc,EACrD7tE,EAAMx/C,iBAAiB,QAAS,KAAKguH,YAAY,EACjD,IAAMvlF,EAAS,KAAKA,OAChB,KAAKxyC,QAAUwyC,EAAO4mF,eAAiB,KAAKxhI,QAAU69H,GAAMC,SAC9D,KAAK5rB,UAAUt3D,EAAOu3D,aAAa,CAEvC,CACAouB,iBAAiB71I,EAAOwG,EAAM,CAC5B,IAAMuwI,EAAoB,CAAC,CAACvwI,EAAKwwI,cAC3B/vE,EAAQ,KAAKA,MACnB,GAAIA,IAAU,KAcd,IAXIA,EAAMv3B,QACR,KAAKn5C,IAAI,oDAAoD,EAC7D,KAAKkxH,cAAgB,KAAK2sB,gBAAkB,GAE9CntE,EAAMz/C,oBAAoB,UAAW,KAAKstH,cAAc,EACxD7tE,EAAMz/C,oBAAoB,QAAS,KAAKiuH,YAAY,EAChD,KAAKl9C,WAAa,CAACw+C,GACrB,KAAKx+C,UAAU0+C,OAAO,EAExB,KAAKhwE,MAAQ,KAAKktE,YAAc,KAChC,KAAKU,OAAS,OACVkC,EAAmB,CACrB,KAAK9B,kBAAkB,EACvB,KAAKgB,gBAAgB,EACrB,MACF,CACA,KAAKrB,aAAe,GACpB,KAAKb,gBAAgB/kB,mBAAmB,EACxC,KAAKtH,SAAS,EAChB,CACAvJ,mBAAoB,CAClB,KAAKw2B,QAAU,CAAA,EACf,KAAKj3H,OAAS,KAAK82H,gBAAkB,KAAK15B,YAAc,KACxD,KAAKs5B,gBAAkB,KAAK3sB,cAAgB,EAC5C,KAAKgtB,mBAAqB,EAC5B,CACAv1B,QAAQl/G,EAAOwG,EAAM,CACrB,CACAuvI,iBAAiB/1I,EAAOwG,EAAM,CAC5B,KAAK+5H,gBAAkB/5H,EAAK+5H,eAC9B,CACA3G,qBAAsB,CACpB,KAAKlS,SAAS,EACV,KAAKusB,aACP,KAAKA,WAAW3tD,QAAQ,EACxB,KAAK2tD,WAAa,MAEpB,MAAMra,oBAAoB,EAC1B,KAAKzf,IAAM,KAAK26B,eAAiB,KAAKW,aAAe,IACvD,CACA5b,oBAAqB,CACnB,KAAKvkH,MAAQ69H,GAAMC,QACf,KAAKmB,gBACP,KAAKA,eAAejuD,QAAQ,EAE1B,KAAKiS,WACP,KAAKA,UAAUjS,QAAQ,EAErB,KAAKouD,WACP,KAAKA,UAAUpuD,QAAQ,EAEzB,KAAK6zB,IAAM,KAAK5jH,IAAM,KAAKC,KAAO,KAAKk+I,UAAY,KAAKn8C,UAAY,KAAKg8C,eAAiB,KAAKR,gBAAkB,KACjH,MAAMla,mBAAmB,CAC3B,CACAqd,aAAar/C,EAAMhhG,EAAOsgJ,EAAkB,CAC1C,KAAK1C,mBAAqB,GAC1B,KAAK2C,qBAAqBv/C,EAAMhhG,EAAOsgJ,CAAgB,CACzD,CACAC,qBAAqB3hD,EAAU5+F,EAAOsgJ,EAAkB,CACtD,IAAME,EAAoB7wI,GAAS,CACjC,IAAMqxF,EAAOrxF,EAAKqxF,KAClB,GAAI,KAAKy/C,mBAAmBz/C,CAAI,EAAG,CACjC,KAAKrhG,KAAK,GAAGqhG,EAAKj0F,IAAI,QAAQi0F,EAAKC,EAAE,GAAGtxF,EAAK83C,KAAO,UAAY93C,EAAK83C,KAAKn6C,MAAQ,EAAE,OAAO,KAAKozI,SAAS1/C,EAAM,GAAOrxF,EAAK83C,IAAI,CAAC,gCAAgC,EAChK,KAAKy1F,gBAAgBtmB,eAAe51B,CAAI,EACxC,MACF,CACAA,EAAKH,MAAMzB,aACX,KAAKuhD,4BAA4BhxI,CAAI,CACvC,EACA,KAAKixI,YAAYhiD,EAAU5+F,EAAOsgJ,EAAkBE,CAAgB,EAAEr+I,KAAMwN,GAAS,CACnF,GAAI,CAACA,EACH,OAEF,IAAM8O,EAAQ,KAAKA,MACbuiF,EAAOrxF,EAAKqxF,KAClB,GAAI,KAAKy/C,mBAAmBz/C,CAAI,EAAG,EAC7BviF,IAAU69H,GAAM/0B,cAAgB,CAAC,KAAKtD,aAAexlG,IAAU69H,GAAMM,WACvE,KAAKM,gBAAgBtmB,eAAe51B,CAAI,EACxC,KAAKviF,MAAQ69H,GAAME,MAErB,MACF,CACI,YAAa7sI,IACf,KAAKjQ,IAAI,UAAUshG,EAAKj0F,IAAI,QAAQi0F,EAAKC,EAAE,OAAO,KAAK4/C,cAAc,CAAC,IAAI7/C,EAAKhhG,KAAK,EAAE,EACtF,KAAKsjH,IAAI7uF,QAAQqwC,EAAO2iD,YAAa93G,CAAI,GAE3C,KAAKmxI,4BAA4BnxI,CAAI,CACvC,CAAC,EAAE1O,MAAOygC,GAAW,CACf,KAAKjjB,QAAU69H,GAAMC,SAAW,KAAK99H,QAAU69H,GAAMrsG,QAGzD,KAAKtwC,KAAK,eAA0C+hC,GAAOpiC,SAAYoiC,CAAM,EAAE,EAC/E,KAAKq/G,qBAAqBniD,CAAQ,EACpC,CAAC,CACH,CACAoiD,qBAAqBhgD,EAAM,CACzB,IAAIigD,EACJ,GAAM,CACJ/D,gBAAAA,CACF,EAAI,KAEJ,GADkBA,EAAgBhlB,SAASl3B,CAAI,IAC7B8zB,GAAcE,UAAW,CACzC,IAAMwB,EAAex1B,EAAKj0F,KACpBo3H,EAAe,KAAK+c,iBAAiB,KAAK5D,YAAa9mB,CAAY,EACnE2qB,EAAyB1rJ,KAAKwG,IAAI+kG,EAAKr+D,SAAUwhG,EAAeA,EAAaj3C,IAAM,KAAK7zB,OAAO+nF,eAAe,EAC9GC,EAAoB,KAAKA,oBACXA,EAAoBrgD,EAAKC,GAAKogD,EAAkBpgD,GAAK,KACrD,GAAK,KAAKqgD,sBAAsBH,EAAwBngD,EAAKr+D,QAAQ,IACvFu6G,EAAgBtmB,eAAe51B,CAAI,CAEvC,OAAaigD,EAAoB,KAAK3D,cAAgB,KAAO,OAAS2D,EAAkBv+G,SAAShsC,UAAY,EAC3GwmJ,EAAgB/kB,mBAAmB,EAC1B+kB,EAAgB5kB,SAASt3B,EAAKj0F,IAAI,IAC3CmwI,EAAgBlmB,uBAAuB,CACrCh2B,KAAAA,EACAv5C,KAAM,KACNo5C,MAAOG,EAAKH,MACZjtF,GAAIotF,EAAKj0F,IACX,CAAC,EACGmwI,EAAgBhlB,SAASl3B,CAAI,IAAM8zB,GAAcG,SACnDioB,EAAgBtmB,eAAe51B,CAAI,EAGzC,CACAugD,gBAAgBh1G,EAAS,CACvB,GAAIA,EAAQ+8F,SAAW,CAAC/8F,EAAQq5E,KAAM,CACpC,IAAM0vB,EAAe/oG,EAAQsgF,UAAUtgF,EAAQsgF,UAAUn2H,OAAS,CAAC,EACnE,KAAKwmJ,gBAAgBlmB,uBAAuB,CAC1Ch2B,KAAMs0C,EACN7tF,KAAM,KACNo5C,MAAOy0C,EAAaz0C,MACpBjtF,GAAI0hI,EAAavoI,IACnB,CAAC,CACH,CACKw/B,EAAQsgF,UAAU,CAAC,IACtBtgF,EAAQ89F,kBAAoB,GAEhC,CACAmX,YAAYl4B,EAAW,CACrB,IAAM/8E,EAAU+8E,EAAU/8E,QAC1B,OAAmCA,GAAQq5E,MAASr5E,EAAQx/B,OAAS,UAAY,KAAK4wI,kBAAoBr0B,GAAa/8E,EAAQw/F,QACjI,CACA0V,gBAAgBC,EAAaC,EAAW50I,EAAO,KAAM,CACnD,GAAI,EAAE20I,EAAcC,GAClB,OAEF,IAAMC,EAAa,CACjBF,YAAAA,EACAC,UAAAA,EACA50I,KAAAA,CACF,EACA,KAAKu2G,IAAI7uF,QAAQqwC,EAAO+8E,gBAAiBD,CAAU,CACrD,CACAE,iBAAiBljD,EAAU5+F,EAAO,CAChC,KAAK4gJ,YAAYhiD,EAAU5+F,CAAK,EAAEmC,KAAMwN,GAAS,CAC/C,IAAMqxF,EAA+BrxF,GAAKqxF,KAC1C,GAAI,CAACA,GAAQ,KAAKy/C,mBAAmBz/C,CAAI,GAAK,CAAC,KAAKn6E,OAClD,MAAM,IAAIplB,MAAM,mBAAmB,EAErC,OAAOkO,CACT,CAAC,EAAExN,KAAMwN,GAAS,CAChB,GAAM,CACJ2zG,IAAAA,CACF,EAAI,KACE,CACJtiB,KAAAA,EACAxgG,QAAAA,CACF,EAAImP,EACEoyI,EAAc/gD,EAAK2B,YACzB,GAAIniG,GAAWA,EAAQiiG,WAAa,GAAKs/C,GAAe,MAAQA,EAAYnuJ,KAAOmuJ,EAAYvoB,IAAMyS,GAAwB8V,EAAYlhJ,MAAM,EAAG,CAChJ,IAAMlH,EAAY8L,KAAKgsB,YAAYC,IAAI,EACvC,OAAO,KAAKmsH,UAAUlkB,QAAQ,IAAIjtH,WAAWlM,CAAO,EAAGuhJ,EAAYnuJ,IAAI8qB,OAAQqjI,EAAYvoB,GAAG96G,OAAQwtH,GAAgC6V,EAAYlhJ,MAAM,CAAC,EAAEI,MAAON,GAAQ,CACxK2iH,MAAAA,EAAI7uF,QAAQqwC,EAAO70B,MAAO,CACxBljC,KAAMwqF,GAAWirC,YACjBj2F,QAASkrD,EAAa85B,mBACtB9I,MAAO,GACP5oH,MAAOc,EACP+gC,OAAQ/gC,EAAIrB,QACZ0hG,KAAAA,CACF,CAAC,EACKrgG,CACR,CAAC,EAAEwB,KAAM6/I,GAAkB,CACzB,IAAMntI,EAAUpP,KAAKgsB,YAAYC,IAAI,EACrC4xF,OAAAA,EAAI7uF,QAAQqwC,EAAOm9E,eAAgB,CACjCjhD,KAAAA,EACAxgG,QAASwhJ,EACTnhD,MAAO,CACLqhD,OAAQvoJ,EACRwoJ,SAAUttI,CACZ,CACF,CAAC,EACDlF,EAAKnP,QAAUwhJ,EACR,KAAKI,wBAAwBzyI,CAAI,CAC1C,CAAC,CACH,CACA,OAAO,KAAKyyI,wBAAwBzyI,CAAI,CAC1C,CAAC,EAAE1O,MAAOygC,GAAW,CACf,KAAKjjB,QAAU69H,GAAMC,SAAW,KAAK99H,QAAU69H,GAAMrsG,QAGzD,KAAKtwC,KAAK+hC,CAAM,EAChB,KAAKq/G,qBAAqBniD,CAAQ,EACpC,CAAC,CACH,CACAwjD,wBAAwBzyI,EAAM,CAC5B,GAAM,CACJkX,OAAAA,CACF,EAAI,KACJ,GAAI,CAACA,EACH,MAAM,IAAIplB,MAAM,mCAAmC,EAErD,IAAMo/F,EAAQlxF,EAAKqxF,KAAKH,MACpB,KAAKpiF,QAAU69H,GAAMC,UACvB,KAAK99H,MAAQ69H,GAAME,MAErB7sI,EAAKqxF,KAAKrxF,KAAO,IAAIjD,WAAWiD,EAAKnP,OAAO,EAC5CqgG,EAAMrB,QAAQnrF,MAAQwsF,EAAMpB,UAAUprF,MAAQ5O,KAAKgsB,YAAYC,IAAI,EACnEmvE,EAAMrB,QAAQhrF,IAAMqsF,EAAMpB,UAAUjrF,IAAM/O,KAAKgsB,YAAYC,IAAI,EAC/D,KAAKoxG,KAAK,CACZ,CACA2d,mBAAmBz/C,EAAM,CACvB,GAAM,CACJijB,YAAAA,CACF,EAAI,KACJ,MAAO,CAACjjB,GAAQ,CAACijB,GAAejjB,EAAKC,KAAOgjB,EAAYhjB,IAAMD,EAAKhhG,QAAUikH,EAAYjkH,KAC3F,CACAqiJ,qBAAqBrhD,EAAMv5C,EAAM,CAC/B,IAAM2oB,EAAQ,KAAKktE,YAAc,KAAKA,YAAc,KAAKltE,MAEzD,GADA,KAAK1wE,IAAI,YAAYshG,EAAKj0F,IAAI,QAAQi0F,EAAKC,EAAE,GAAGx5C,EAAO,UAAYA,EAAKn6C,MAAQ,EAAE,OAAO,KAAKozI,SAAS1/C,EAAM,GAAOv5C,CAAI,CAAC,aAAa2oB,EAAQisE,GAAW1jJ,SAASkrI,GAAaE,YAAY3zD,CAAK,CAAC,EAAI,YAAY,GAAG,EAChN2wB,GAAgBC,CAAI,EAAG,CACzB,IAAIshD,EACJ,GAAIthD,EAAKj0F,OAASirF,GAAkBG,SAAU,CAC5C,IAAMh1F,EAAK69F,EAAKN,kBAChB,GAAI,CAACltG,OAAOmE,KAAKwL,CAAE,EAAEu6B,KAAM3wB,GAAS,CAAC,CAAC5J,EAAG4J,CAAI,CAAC,EAAG,CAC/C,KAAK0R,MAAQ69H,GAAME,KACnB,MACF,CACF,CACA,IAAMx8I,GAASsiJ,EAAe,KAAKz7H,SAAW,KAAO,OAASy7H,EAAathD,EAAKhhG,KAAK,EACjFA,GAAS,MAAQA,EAAMw8G,gBACzB,KAAK98G,IAAI,2CAA2CM,EAAMw8G,aAAa,mBAAmB,EAC1Fx8G,EAAMw8G,cAAgB,EAE1B,CACA,KAAK/9F,MAAQ69H,GAAME,IACrB,CACAsE,4BAA4ByB,EAAmB,CAC7C,GAAM,CACJnF,WAAAA,CACF,EAAI,KACJ,GAAI,CAACA,EACH,OAEF,GAAM,CACJp8C,KAAAA,EACAv5C,KAAAA,EACA+6F,YAAAA,CACF,EAAID,EACE36D,EAAW,CAAC46D,GAAeA,EAAY9rJ,SAAW,GAAK8rJ,EAAY9kH,KAAM+kH,GAAe,CAACA,CAAU,EACnGC,EAAY,IAAInf,GAAcviC,EAAKhhG,MAAOghG,EAAKC,GAAID,EAAKH,MAAMzB,WAAa,EAAG,EAAG33C,EAAOA,EAAKn6C,MAAQ,GAAI,CAACs6E,CAAQ,EACxHw1D,EAAW98H,MAAMoiI,CAAS,CAC5B,CACA/B,4BAA4B3/C,EAAM,CAClC,CACA4/C,YAAY5/C,EAAMhhG,EAAOsgJ,EAAmB,KAAME,EAAkB,CAClE,IAAIre,EACJ,KAAKle,YAAcjjB,EACnB,IAAMz0D,EAAmCvsC,GAAMusC,QAC/C,GAAI,CAAC,KAAK1lB,QAAU,CAAC0lB,EACnB,MAAM,IAAI9qC,MAAM,mCAAmC8qC,EAAU,GAAK,SAAS,GAAG,EAEhF,IAAIo2G,EAAoB,KACpB3hD,EAAKiC,WAAa,GAAGk/B,EAAoBnhC,EAAK2B,cAAgB,MAAQw/B,EAAkBvuI,MAC1F,KAAK8L,IAAI,mBAAmBshG,EAAKC,EAAE,QAAQ10D,EAAQk9F,OAAO,IAAIl9F,EAAQy8F,KAAK,MAAM,KAAK6X,cAAc,CAAC,IAAI7/C,EAAKhhG,KAAK,EAAE,EACrH,KAAKye,MAAQ69H,GAAMG,YACnB,KAAKx4B,YAAcjjB,EACnB2hD,EAAoB,KAAKjhD,UAAUtxD,KAAK4wD,CAAI,EAAE7+F,KAAMygJ,GAAkB,CACpE,GAAI,CAAC,KAAKnC,mBAAmBmC,EAAc5hD,IAAI,EAC7C,YAAKsiB,IAAI7uF,QAAQqwC,EAAO+9E,WAAYD,CAAa,EAC7C,KAAKnkI,QAAU69H,GAAMG,cACvB,KAAKh+H,MAAQ69H,GAAME,MAEdoG,CAEX,CAAC,EACD,KAAKt/B,IAAI7uF,QAAQqwC,EAAO23E,YAAa,CACnCz7C,KAAAA,CACF,CAAC,EACG,KAAKijB,cAAgB,OACvB0+B,EAAoBrgJ,QAAQ2yC,OAAO,IAAIxzC,MAAM,mDAAmD,CAAC,IAEzFu/F,EAAKiC,YACf0/C,EAAoB,KAAKjhD,UAAUohD,UAAU9hD,EAAMz0D,EAAQm+F,mBAAoB,KAAKkT,kBAAkB,EAClG+E,GACF,KAAKjjJ,IAAI,oDAAoD,GAGjE,IAAM2tH,EAAe,KAAKA,aAC1B,GAAItsB,GAAgBC,CAAI,IAAM,CAACqsB,GAAgBrsB,EAAKC,KAAOosB,EAAapsB,IAAK,CAC3E,IAAMw9C,EAAkB,KAAKA,gBAAgBz+I,EAAMusC,QAASy0D,EAAKxsF,GAAG,EAChEiqI,IAAoB,KAAKV,eAC3B,KAAKr+I,IAAI,mBAAmB++I,EAAkB,KAAO,KAAK,eAA+CpxB,GAAapsB,EAAE,KAAKD,EAAKC,EAAE,EAAE,EACtI,KAAK88C,aAAeU,EAExB,CAEA,GADA6B,EAAmB7qJ,KAAKwG,IAAI+kG,EAAK3sF,MAAOisI,GAAoB,CAAC,EACzD,KAAKvC,cAAgBh9C,GAAgBC,CAAI,EAAG,CAC9C,IAAM83B,EAAWvsF,EAAQusF,SACzB,GAAIA,GAAY0nB,EAAkB,CAC5BF,EAAmBt/C,EAAKxsF,KAAO+3B,EAAQ4hF,eACzCntB,EAAOz0D,EAAQ4hF,cAEjB,IAAM+sB,EAAY,KAAK6H,YAAYjqB,EAAU93B,EAAMs/C,CAAgB,EACnE,GAAIpF,EAAY,GAAI,CAClB,IAAMzzF,EAAOqxE,EAASoiB,CAAS,EAC/Bl6C,EAAO,KAAKijB,YAAcx8D,EAAKm3C,SAC/B,KAAKl/F,IAAI,WAAWshG,EAAKj0F,IAAI,QAAQi0F,EAAKC,EAAE,UAAUx5C,EAAKn6C,KAAK,KAAK4tI,CAAS,IAAIpiB,EAASpiI,OAAS,CAAC,QAAQ,KAAKgqJ,SAAS1/C,EAAM,GAAOv5C,CAAI,CAAC,SAASu5C,EAAKW,EAAE,KAAKp1D,EAAQk9F,OAAO,IAAIl9F,EAAQy8F,KAAK,cAAcn2H,WAAWytI,EAAiBz7I,QAAQ,CAAC,CAAC,CAAC,EAAE,EACzP,KAAK24I,iBAAmB/1F,EAAKpzC,MAAQozC,EAAK9kB,SAC1C,KAAKlkB,MAAQ69H,GAAM/0B,aACnB,IAAIy7B,EAgBJ,OAfIL,EACFK,EAAUL,EAAkBxgJ,KAAMygJ,GAC5B,CAACA,GAAiB,KAAKnC,mBAAmBmC,EAAc5hD,IAAI,EACvD,KAEF,KAAKiiD,gBAAgBjiD,EAAMv5C,EAAMznD,EAAOwgJ,CAAgB,CAChE,EAAEv/I,MAAOpB,GAAU,KAAKqjJ,oBAAoBrjJ,CAAK,CAAC,EAEnDmjJ,EAAU,KAAKC,gBAAgBjiD,EAAMv5C,EAAMznD,EAAOwgJ,CAAgB,EAAEv/I,MAAOpB,GAAU,KAAKqjJ,oBAAoBrjJ,CAAK,CAAC,EAEtH,KAAKyjH,IAAI7uF,QAAQqwC,EAAOyiD,aAAc,CACpCvmB,KAAAA,EACAv5C,KAAAA,EACA64F,iBAAAA,CACF,CAAC,EACG,KAAKr8B,cAAgB,KAChB3hH,QAAQ2yC,OAAO,IAAIxzC,MAAM,0DAA0D,CAAC,EAEtFuhJ,CACT,SAAW,CAAChiD,EAAK3oG,KAAO,KAAK8qJ,iBAAiBrqB,EAAUwnB,CAAgB,EACtE,OAAOh+I,QAAQC,QAAQ,IAAI,CAE/B,CACF,CACA,GAAIw+F,GAAgBC,CAAI,GAAK,KAAK+8C,aAChC,KAAKr+I,IAAI,6CAA6C4gJ,EAAiBz7I,QAAQ,CAAC,CAAC,EAAE,EACnF,KAAKk5I,aAAe,WACX,CAAC/8C,EAAK3oG,IACf,OAAOiK,QAAQC,QAAQ,IAAI,EAE7B,KAAK7C,IAAI,WAAWshG,EAAKj0F,IAAI,QAAQi0F,EAAKC,EAAE,OAAO,KAAKy/C,SAAS1/C,EAAM,EAAK,CAAC,SAASA,EAAKW,EAAE,IAAIp1D,EAAU,IAAMA,EAAQk9F,QAAU,IAAMl9F,EAAQy8F,MAAQ,IAAM,EAAE,aAAan2H,WAAWytI,EAAiBz7I,QAAQ,CAAC,CAAC,CAAC,EAAE,EACnNuyF,GAAe4J,EAAKC,EAAE,GAAK,CAAC,KAAKmB,cACnC,KAAKo7C,iBAAmBx8C,EAAK3sF,MAAQ2sF,EAAKr+D,UAE5C,KAAKlkB,MAAQ69H,GAAM/0B,aACnB,IAAM67B,EAAiB,KAAK/pF,OAAOgqF,YAC/B7sJ,EAoBJ,OAnBI4sJ,GAAkBT,EACpBnsJ,EAASmsJ,EAAkBxgJ,KAAMygJ,GAC3B,CAACA,GAAiB,KAAKnC,mBAAoDmC,GAAc5hD,IAAI,EACxF,KAEF,KAAK08C,eAAettG,KAAK4wD,EAAMw/C,CAAgB,CACvD,EAAEv/I,MAAOpB,GAAU,KAAKqjJ,oBAAoBrjJ,CAAK,CAAC,EAEnDrJ,EAAS8L,QAAQglB,IAAI,CAAC,KAAKo2H,eAAettG,KAAK4wD,EAAMoiD,EAAiB5C,EAAmB,MAAM,EAAGmC,CAAiB,CAAC,EAAExgJ,KAAK,CAAC,CAACmhJ,CAAc,KACrI,CAACF,GAAkBE,GAAkB9C,GACvCA,EAAiB8C,CAAc,EAE1BA,EACR,EAAEriJ,MAAOpB,GAAU,KAAKqjJ,oBAAoBrjJ,CAAK,CAAC,EAErD,KAAKyjH,IAAI7uF,QAAQqwC,EAAOyiD,aAAc,CACpCvmB,KAAAA,EACAs/C,iBAAAA,CACF,CAAC,EACG,KAAKr8B,cAAgB,KAChB3hH,QAAQ2yC,OAAO,IAAIxzC,MAAM,oDAAoD,CAAC,EAEhFjL,CACT,CACAysJ,gBAAgBjiD,EAAMuiD,EAAUvjJ,EAAOwgJ,EAAkB,CACvD,OAAO,IAAIl+I,QAAQ,CAACC,EAAS0yC,IAAW,CACtC,IAAIomG,EACJ,IAAMmH,EAAc,CAAA,EACdgB,GAAmBnI,EAAiBr7I,EAAMusC,UAAY,KAAO,OAAS8uG,EAAeviB,SACrFuI,EAAY55E,GAAS,CACzB,KAAKi2F,eAAerc,SAASrgC,EAAMv5C,EAAM+4F,CAAgB,EAAEr+I,KAAMo/H,GAAmB,CAClFihB,EAAY/6F,EAAKn6C,KAAK,EAAIi0H,EAC1B,IAAMkiB,EAAaliB,EAAe95E,KAClC,KAAK67D,IAAI7uF,QAAQqwC,EAAO2iD,YAAa8Z,CAAc,EACnD,IAAMmiB,EAAWzI,GAAYj7I,EAAMusC,QAASy0D,EAAKC,GAAIx5C,EAAKn6C,MAAQ,CAAC,GAAK6tI,GAASqI,EAAiBxiD,EAAKC,GAAIx5C,EAAKn6C,MAAQ,CAAC,EACzH,GAAIo2I,EACFriB,EAASqiB,CAAQ,MAEjB,QAAOnhJ,EAAQ,CACby+F,KAAAA,EACAv5C,KAAMg8F,EACNjB,YAAAA,CACF,CAAC,CAEL,CAAC,EAAEvhJ,MAAMg0C,CAAM,CACjB,EACAosF,EAASkiB,CAAQ,CACnB,CAAC,CACH,CACAL,oBAAoBrjJ,EAAO,CACzB,GAAI,SAAUA,EAAO,CACnB,IAAM8P,EAAO9P,EAAM8P,KACf9P,EAAM8P,MAAQA,EAAK48B,UAAYkrD,EAAa0pC,iBAC9C,KAAKwiB,sBAAsBh0I,EAAKqxF,KAAMrxF,EAAK83C,IAAI,EAE/C,KAAK67D,IAAI7uF,QAAQqwC,EAAO70B,MAAOtgC,CAAI,CAEvC,MACE,KAAK2zG,IAAI7uF,QAAQqwC,EAAO70B,MAAO,CAC7BljC,KAAMwqF,GAAWqsD,YACjBr3G,QAASkrD,EAAam7B,mBACtBjyH,IAAKd,EACLA,MAAAA,EACA4oH,MAAO,EACT,CAAC,EAEH,OAAO,IACT,CACAo7B,uBAAuBnB,EAAW,CAChC,IAAMp3H,EAAU,KAAKw4H,kBAAkBpB,CAAS,EAChD,GAAI,CAACp3H,GAAW,KAAK7M,QAAU69H,GAAMM,QAAS,CACxC,CAAC,KAAK34B,aAAe,KAAKxlG,QAAU69H,GAAMC,SAAW,KAAK99H,QAAU69H,GAAMrsG,QAC5E,KAAKxxB,MAAQ69H,GAAME,MAErB,MACF,CACA,GAAM,CACJx7C,KAAAA,EACAv5C,KAAAA,EACAznD,MAAAA,CACF,EAAIsrB,EACEmK,EAAOhwB,KAAKgsB,YAAYC,IAAI,EAClCsvE,EAAKH,MAAMrB,QAAQhrF,IAAMihB,EACrBgyB,IACFA,EAAKo5C,MAAMrB,QAAQhrF,IAAMihB,GAE3B,IAAMu2F,EAAe,KAAK0yB,gBAAgB,EAEpCD,EADqBzyB,GAAgBhrB,EAAKC,GAAK+qB,EAAagd,OACpB,KAAKyV,gBAAgBzyB,EAAchrB,EAAKxsF,GAAG,EACrFiqI,IAAoB,KAAKV,eAC3B,KAAKr+I,IAAI,mBAAmB++I,EAAkB,KAAO,KAAK,kCAAkCz9C,EAAKxsF,IAAI3P,QAAQ,CAAC,CAAC,EAAE,EACjH,KAAKk5I,aAAeU,GAEtB,KAAKsF,kBAAkB/iD,EAAMv5C,EAAMznD,EAAO0iJ,EAAU7+C,OAAO,CAC7D,CACA46C,gBAAgBlyG,EAAS+gF,EAAW,CAClC,GAAI,KAAKj0D,OAAO2qF,eAAgB,CAC9B,GAAI,CAACz3G,EACH,OAAO,KAAKwxG,aAEd,GAAIxxG,GAAW,MAAQA,EAAQusF,SAAU,CACvC,IAAImrB,EACJ,IAAMC,EAAY33G,EAAQusF,SAAS,CAAC,EAC9BqrB,EAAgBD,EAAU1vI,OAASyvI,EAAwB13G,EAAQ4hF,eAAiB,KAAO,OAAS81B,EAAsBthH,WAAa,GAC7I,GAAI2qF,GAAa62B,EAAe,CAC9B,IAAIC,EAEJ,IADiB,KAAK9gC,IAAIq7B,mBAAqByF,EAAc,KAAKh0E,QAAU,KAAO,OAASg0E,EAAYp1G,cAAgB,KAAKuuG,gBAAkB,KAAK8G,gBAAgB,GACrJH,EAAU7vI,MAAQ6vI,EAAUtlD,SAASj8D,SAClD,MAAO,EAEX,CACF,CACF,CACA,MAAO,EACT,CACAmhH,kBAAkBpB,EAAW,CAC3B,GAAM,CACJ77H,OAAAA,EACAo9F,YAAAA,CACF,EAAI,KACE,CACJjkH,MAAO6xH,EACP5wB,GAAAA,EACAx5C,KAAMyzF,CACR,EAAIwH,EACJ,GAAI,EAAE77H,GAAU,MAAQA,EAAOgrG,CAAU,GACvC,YAAKlyH,KAAK,oDAAoDshG,CAAE,OAAO,KAAK4/C,cAAc,CAAC,IAAIhvB,CAAU,2CAA2C,EAC7I,KAET,IAAM7xH,EAAQ6mB,EAAOgrG,CAAU,EACzB7F,EAAehsH,EAAMusC,QACrBkb,EAAOyzF,EAAY,GAAKD,GAAYjvB,EAAc/qB,EAAIi6C,CAAS,EAAI,KACnEl6C,EAAOv5C,EAAOA,EAAKm3C,SAAW66C,GAAkBztB,EAAc/qB,EAAIgjB,CAAW,EACnF,OAAKjjB,GAGDijB,GAAeA,IAAgBjjB,IACjCA,EAAKH,MAAQojB,EAAYpjB,OAEpB,CACLG,KAAAA,EACAv5C,KAAAA,EACAznD,MAAAA,CACF,GATS,IAUX,CACAskJ,mBAAmB30I,EAAMqxF,EAAMv5C,EAAMi7F,EAAW6B,EAAgB,CAC9D,IAAIC,EACJ,GAAI,CAAC70I,GAAQ,KAAK8O,QAAU69H,GAAMM,QAChC,OAEF,GAAM,CACJ3vC,MAAAA,EACAC,MAAAA,CACF,EAAIv9F,EACAsP,EAAUguF,EAId,GAHIA,GAASC,IACXjuF,EAAU+tF,GAAiBC,EAAOC,CAAK,GAErC,GAAGs3C,EAAUvlI,IAAY,MAAQulI,EAAQ9tJ,QAC3C,OAEF,IAAM+tJ,EAAkB,KAAK3G,QAAQ98C,EAAKW,EAAE,EACtCmD,EAAS2/C,EAAkB,CAACA,EAAgBv5C,SAAWu5C,EAAgB9+C,UAAY,OACnFq8B,EAAU,CACdj1H,KAAM4C,EAAK5C,KACXi0F,KAAAA,EACAv5C,KAAAA,EACAi7F,UAAAA,EACA59C,OAAAA,EACA35E,OAAQ61E,EAAKj0F,KACb4C,KAAMsP,CACR,EAEA,GADA,KAAKqkG,IAAI7uF,QAAQqwC,EAAO4/E,iBAAkB1iB,CAAO,EAC7CryH,EAAKg1I,SAAWh1I,EAAKs0F,aAAe,CAACx8C,EAAM,CAC7C,GAAI88F,EACF,OAEF,KAAKK,eAAe5jD,CAAI,CAC1B,CACF,CACA4jD,eAAe5jD,EAAM,CACnB,IAAM5wB,EAAQ,KAAKA,MACnB,GAAI,CAACA,EACH,OAEF,GAAI,CAACyzD,GAAaC,WAAW1zD,EAAOA,EAAMphC,WAAW,EAAG,CACtD,KAAKyyG,gBAAgB,EAAGzgD,EAAK3sF,KAAK,EAClC,MACF,CACA,IAAM26B,EAAcohC,EAAMphC,YACpBg2E,EAAa6e,GAAa7e,WAAW50C,EAAOphC,EAAa,CAAC,EAC1D61G,EAAe7jD,EAAKr+D,SACpBmiH,EAAkBrvJ,KAAKgmB,IAAI,KAAK49C,OAAO0zD,uBAAyB,EAAG83B,EAAe,GAAI,EACtFxwI,EAAQ5e,KAAKwG,IAAIxG,KAAKgmB,IAAIulF,EAAK3sF,MAAQywI,EAAiB9/B,EAAWxwG,IAAMswI,CAAe,EAAG91G,EAAc81G,CAAe,EAC1H9jD,EAAK3sF,MAAQA,EAAQywI,GACvB,KAAKrD,gBAAgBptI,EAAO2sF,EAAK3sF,KAAK,CAE1C,CACA6sI,iBAAiB6D,EAAYh4I,EAAM,CACjC,IAAIi4I,EACJ,IAAM9lI,EAAM,KAAKmlI,gBAAgB,EACjC,GAAI,CAACjtD,GAAel4E,CAAG,EACrB,OAAO,KAGT,IAAMg/H,EADe,KAAKX,gBAAkBr+H,IACL8lI,EAAe,KAAK50E,QAAU,MAAQ40E,EAAa1/G,OAAS,EAAI,KAAK+zB,OAAO6kF,cACnH,OAAO,KAAK+G,sBAAsBF,EAAY7lI,EAAKnS,EAAMmxI,CAAa,CACxE,CACA+G,sBAAsBF,EAAY7lI,EAAKnS,EAAMmxI,EAAe,CAC1D,IAAMl5B,EAAa6e,GAAa7e,WAAW+/B,EAAY7lI,EAAKg/H,CAAa,EACzE,GAAIl5B,EAAW93B,MAAQ,GAAK83B,EAAWwf,YAAc,OAAQ,CAC3D,IAAM0gB,EAAoB,KAAKhI,gBAAgBhnB,gBAAgBh3G,EAAKnS,CAAI,EACxE,GAAIm4I,IAAsBlgC,EAAWwf,WAAa0gB,EAAkB1wI,KAAO0wI,EAAkB3iD,KAAM,CACjG,IAAM4iD,EAAc1vJ,KAAKwG,IAAIxG,KAAKgmB,IAAIupG,EAAWwf,UAAW0gB,EAAkB1wI,GAAG,EAAI0K,EAAKg/H,CAAa,EACvG,OAAOra,GAAa7e,WAAW+/B,EAAY7lI,EAAKimI,CAAW,CAC7D,CACF,CACA,OAAOngC,CACT,CACAogC,mBAAmBhqC,EAAc,CAC/B,GAAM,CACJ/hD,OAAAA,CACF,EAAI,KACAgsF,EACJ,OAAIjqC,EACFiqC,EAAY5vJ,KAAKwG,IAAI,EAAIo9D,EAAOisF,cAAgBlqC,EAAc/hD,EAAO+nF,eAAe,EAEpFiE,EAAYhsF,EAAO+nF,gBAEd3rJ,KAAKgmB,IAAI4pI,EAAWhsF,EAAOksF,kBAAkB,CACtD,CACAjE,sBAAsBkE,EAAWX,EAAc,CAC7C,IAAMxrF,EAAS,KAAKA,OACdosF,EAAYhwJ,KAAKwG,IAAIxG,KAAKgmB,IAAI+pI,EAAYX,EAAcxrF,EAAO+nF,eAAe,EAAGyD,CAAY,EAC7Fa,EAAgBjwJ,KAAKwG,IAAIupJ,EAAYX,EAAe,EAAGxrF,EAAOksF,mBAAqB,EAAGE,CAAS,EACrG,OAAIC,GAAiBD,GACnBpsF,EAAOksF,mBAAqBG,EAC5B,KAAK/lJ,KAAK,+BAA+B+lJ,CAAa,GAAG,EAClD,IAEF,EACT,CACA7vB,gBAAgBtyH,EAAUizH,EAAex+B,GAAkBC,KAAM,CAC/D,IAAI0tD,EACJ,IAAMC,GAAcD,EAAwB,KAAKzI,kBAAoB,KAAO,OAASyI,EAAsB9vB,gBAAgBtyH,EAAUizH,CAAY,EACjJ,OAAIovB,GAAc,aAAcA,EACvBA,EAAWhnD,SAEbgnD,CACT,CACAC,gBAAgB3mI,EAAK8sG,EAAc,CACjC,IAAMa,EAAYb,EAAaa,UACzBi5B,EAAUj5B,EAAUn2H,OAC1B,GAAI,CAACovJ,EACH,OAAO,KAET,GAAM,CACJzsF,OAAAA,CACF,EAAI,KACEhlD,EAAQw4G,EAAU,CAAC,EAAEx4G,MACrB0xI,EAAe1sF,EAAO2qF,gBAAkB,CAAC,CAACh4B,EAAa8M,SACzD93B,EAAO,KACX,GAAIgrB,EAAapG,KAAM,CACrB,IAAMogC,EAA0B3sF,EAAO2sF,wBACvC,GAAIF,EAAUE,EACZ,YAAKrmJ,KAAK,iDAAiDmmJ,CAAO,WAAWE,CAAuB,GAAG,EAChG,KAET,GAAI,CAACh6B,EAAa8c,UAAY,CAAC,KAAK8U,oBAAsB,KAAKhtB,gBAAkB,IAAM1xG,EAAM7K,EAAO,CAClG,IAAI4xI,EACAF,GAAgB,CAAC,KAAKhI,eACxB,KAAKr+I,IAAI,8CAA8C,EACvD,KAAKq+I,aAAe,IAEtB/8C,EAAO,KAAKklD,uBAAuBl6B,CAAY,EAC/C,IAAMm6B,EAAY,KAAK7iC,IAAIsN,cACrB5qC,EAAmB,KAAKs9B,IAAIt9B,iBAC5B4qC,EAAgB5vB,GAAQmlD,IAAc,IAAMA,GAAa9xI,EAAQ8xI,EAAYngE,IAAqBgb,EAAK3sF,MAAQ6K,EACrH,KAAKxf,IAAI,4BAA4BkxH,CAAa,iDAAiDu1B,CAAS,sBAAsBngE,CAAgB,iBAAiBigE,EAAQjlD,IAAS,KAAO,OAASilD,EAAM5xI,KAAK,EAAE,EACjN,KAAKu8G,cAAgB,KAAK4sB,iBAAmB5sB,CAC/C,CACF,MAAW1xG,GAAO7K,IAChB2sF,EAAO6rB,EAAU,CAAC,GAEpB,GAAI,CAAC7rB,EAAM,CACT,IAAMxsF,EAAM,KAAKupI,aAAe/xB,EAAasf,QAAUtf,EAAauf,YACpEvqC,EAAO,KAAKolD,sBAAsBlnI,EAAK1K,EAAKw3G,CAAY,CAC1D,CACA,IAAIq6B,EAAc,KAAKC,sBAAsBtlD,EAAMgrB,CAAY,EAC/D,GAAI,CAACq6B,GAAerlD,EAAM,CACxB,IAAMulD,EAAWvlD,EAAKC,GAAK+qB,EAAayd,QACxC4c,EAAc,KAAKC,sBAAsBz5B,EAAU05B,EAAW,CAAC,GAAK,KAAMv6B,CAAY,CACxF,CACA,OAAO,KAAKw6B,0BAA0BH,CAAW,CACnD,CACAI,cAAczlD,EAAMs/C,EAAkB,CACpC,IAAMoG,EAAe,KAAKxJ,gBAAgBhlB,SAASl3B,CAAI,EACvD,OAAQ0lD,IAAiB5xB,GAAcI,IAAMwxB,IAAiB5xB,GAAcG,SAAW,CAAC,CAACj0B,EAAKuB,MAAQ,KAAKi7C,iBAAmB8C,CAChI,CACAqG,2BAA2B3lD,EAAMgrB,EAAchH,EAAYwR,EAAc6uB,EAAW,CAClF,IAAIuB,EAAe,KACnB,GAAI5lD,EAAKuB,MACPqkD,EAAe,KAAKf,gBAAgB,KAAKrI,iBAAkBxxB,CAAY,EACnE46B,GAAgB,CAACA,EAAarkD,KAAOyiB,EAAWwf,WAAW,CAC7D,IAAMqiB,EAAiB,KAAK5B,sBAAsB,KAAK3H,YAAc,KAAKA,YAAc,KAAKltE,MAAO40C,EAAWwf,UAAWhO,EAAc,CAAC,EACzI,GAAIqwB,IAAmB,MAAQ7hC,EAAW93B,IAAM25D,EAAe35D,KAAOm4D,EAAW,CAC/E,IAAMpkD,EAAK2lD,EAAa3lD,GACxB,OAAI,KAAK+8C,SAAW/8C,IAClB,KAAKvhG,IAAI,8BAA8B82H,CAAY,8BAA8Bv1B,CAAE,EAAE,EACrF,KAAK+8C,OAAS/8C,GAET,IACT,CACF,CAEF,YAAK+8C,OAAS,OACP4I,CACT,CACA,IAAIE,iBAAkB,CACpB,GAAIC,GAAqB,KAAKzjC,IAAIjqD,MAAM,EAAG,CACzC,IAAI2tF,EAAuBC,EAE3B,IAD6BD,EAAwB,KAAK1jC,IAAI4jC,uBAAyB,OAAiBD,EAAyBD,EAAsBG,cAAgB,KAAzE,OAAyFF,EAAuB99I,MAE5M,MAAO,EAEX,CACA,MAAO,EACT,CACAm9I,sBAAsBtlD,EAAMz0D,EAAS,CACnC,GAAI,CAACy0D,EACH,OAAOA,EAET,GAAI+lD,GAAqB,KAAKzjC,IAAIjqD,MAAM,GAAK2nC,EAAKj0F,OAASirF,GAAkBG,SAAU,CACrF,IAAMivD,EAAgB,KAAK9jC,IAAI4jC,qBACzBG,EAAiDD,GAAcC,cACrE,GAAIA,EAAe,CACjB,IAAMC,EAAwBD,EAAcl+I,MAC5C,GAAIm+I,GACF,GAAIA,EAAsBC,eAAiB9xJ,KAAKqnB,IAAIkkF,EAAK3sF,MAAQgzI,EAAchzI,KAAK,EAAI,GAAKgzI,EAAchzI,QAAU,EACnH,OAAO,aAGL2sF,EAAKxsF,KAAO6yI,EAAchzI,OAAqCk4B,GAAQq5E,OAAU,IAGjF5kB,EAAK3sF,MAAQgzI,EAAc7yI,KAAO6yI,EAAcG,YAC9CH,EAAcG,UAAUD,eAAiBvmD,EAAK3sF,MAAQgzI,EAAc7yI,IAAM,GAC5E,OAAO,IAIf,CACA,IAAMizI,EAA+CL,GAAcK,YACnE,GAAIA,EACF,QAAShxJ,EAAIgxJ,EAAY/wJ,OAAQD,KAAO,CACtC,IAAMixJ,EAAeD,EAAYhxJ,CAAC,EAAEixJ,aACpC,GAAIA,EAAaH,eAAiBvmD,EAAK3sF,OAASqzI,EAAa/tJ,WAAaqnG,EAAKxsF,KAAOkzI,EAAaC,WACjG,OAAO,IAEX,CAEJ,CACA,OAAO3mD,CACT,CACAwlD,0BAA0BxlD,EAAM,CAC9B,OAAIA,GAAQ,MAAQA,EAAKqB,aAAe,EAAErB,GAAQ,MAAQA,EAAKqB,YAAY1yF,OAAS,CAAC,KAAKyyF,YACjFpB,EAAKqB,YAEPrB,CACT,CACA+hD,YAAYjqB,EAAU93B,EAAMs/C,EAAkB,CAC5C,IAAIoD,EAAW,GACXkE,EAAa,GACbC,EAAyB,GAC7B,QAASpxJ,EAAI,EAAGy2F,EAAM4rC,EAASpiI,OAAQD,EAAIy2F,EAAKz2F,IAAK,CACnD,IAAMgxD,EAAOqxE,EAASriI,CAAC,EAEvB,GADAoxJ,EAAyBA,GAA0B,CAACpgG,EAAKw8C,YACrDy/C,EAAW,IAAMpD,EAAmB74F,EAAKpzC,MAC3C,MAEF,IAAM6qF,EAASz3C,EAAKy3C,OAChBA,EACFwkD,EAAW,IACDkE,GAAcngG,EAAKw8C,aAAe4jD,IAA2BpgG,EAAKm3C,WAAaoC,IACzF0iD,EAAWjtJ,GAEbmxJ,EAAa1oD,CACf,CACA,OAAOwkD,CACT,CACAP,iBAAiBrqB,EAAUwnB,EAAkB,CAC3C,IAAMT,EAAW/mB,EAASA,EAASpiI,OAAS,CAAC,EAC7C,OAAOmpJ,GAAYS,EAAmBT,EAASxrI,OAASwrI,EAAS3gD,MACnE,CAMAgnD,uBAAuBl6B,EAAc,CACnC,IAAMa,EAAYb,EAAaa,UACzBQ,EAAe,KAAKA,aACtBrsB,EAAO,KACX,GAAIqsB,GAKF,GAJIrB,EAAaif,qBACf,KAAKvrI,IAAI,+DAA+D2tH,EAAarqB,eAAe,EAAE,EACtGhC,EAAO4rB,GAAkBC,EAAWQ,EAAatqB,mBAAoB,KAAK1pC,OAAO0zD,sBAAsB,GAErG,CAAC/rB,EAAM,CACT,IAAM8mD,EAAWz6B,EAAapsB,GAAK,EACnC,GAAI6mD,GAAY97B,EAAayd,SAAWqe,GAAY97B,EAAagd,MAAO,CACtE,IAAMxb,EAAWX,EAAUi7B,EAAW97B,EAAayd,OAAO,EACtDpc,EAAa1rB,KAAO6rB,EAAS7rB,KAC/BX,EAAOwsB,EACP,KAAK9tH,IAAI,8DAA8DshG,EAAKC,EAAE,EAAE,EAEpF,CACKD,IACHA,EAAOgtB,GAAkBhC,EAAcqB,EAAa1rB,GAAI0rB,EAAa74G,GAAG,EACpEwsF,GACF,KAAKthG,IAAI,8DAA8DshG,EAAKC,EAAE,EAAE,EAGtF,MACK,CACL,IAAM8mD,EAAY,KAAKzkC,IAAIt9B,iBACvB+hE,IAAc,OAChB/mD,EAAO,KAAKolD,sBAAsB2B,EAAW,KAAK3lD,YAAc4pB,EAAauf,YAAcvf,EAAaqf,KAAMrf,CAAY,EAE9H,CACA,OAAOhrB,CACT,CAIAolD,sBAAsB94B,EAAW94G,EAAKw3G,EAAc,CAClD,GAAM,CACJ3yD,OAAAA,CACF,EAAI,KACA,CACFg0D,aAAAA,CACF,EAAI,KACA,CACFR,UAAAA,EACAmc,MAAAA,CACF,EAAIhd,EACE,CACJmC,aAAAA,CACF,EAAInC,EACE,CACJe,uBAAAA,CACF,EAAI1zD,EACEy/D,EAAW9M,EAAa8M,SACxBilB,EAAe,CAAC,EAAE,KAAKA,cAAgBjlB,GAAY,MAAQA,EAASpiI,QAAUy3H,GAChF4vB,GAAgB5vB,GAAgB,CAAC,KAAK/rB,aAAe02B,EAASA,EAASpiI,OAAS,CAAC,EAAEkoG,SAASqC,KAAOktB,EAAaltB,KAClH4rB,EAAYA,EAAU5xH,OAAOkzH,CAAY,EACzC6a,EAAQ7a,EAAaltB,IAEvB,IAAID,EACJ,GAAIssB,EAAY94G,EAAK,CACnB,IAAIwzI,EAEJ,IAAMC,EADe36B,EAAY,KAAKiwB,iBACEjwB,EAAY94G,EAAMu4G,IAA2Bi7B,EAAe,KAAK53E,QAAU,MAAQ43E,EAAa1iH,QAAU,CAAC,KAAKs4G,mBAAqB,EAAI7wB,EACjL/rB,EAAOosB,GAAkBC,EAAcR,EAAWS,EAAW26B,CAAe,CAC9E,MACEjnD,EAAO6rB,EAAUA,EAAUn2H,OAAS,CAAC,EAEvC,GAAIsqG,EAAM,CACR,IAAMulD,EAAWvlD,EAAKC,GAAK+qB,EAAayd,QAClCye,EAAY,KAAKhL,gBAAgBhlB,SAASl3B,CAAI,EAIpD,IAHIknD,IAAcpzB,GAAcI,IAAMgzB,IAAcpzB,GAAcG,SAAWj0B,EAAKuB,OAChF8qB,EAAersB,GAEbqsB,GAAgBrsB,EAAKC,KAAOosB,EAAapsB,KAAO,CAAC88C,GAAgBjlB,EAAS,CAAC,EAAEl6B,SAASqC,GAAKD,EAAKC,IAAM,CAAC+qB,EAAapG,MAAQ,CAACm4B,IAC7G1wB,GAAgBrsB,EAAKhhG,QAAUqtH,EAAartH,MAC/C,CACb,IAAMmoJ,EAAWt7B,EAAU05B,EAAW,CAAC,EACnCvlD,EAAKC,GAAK+nC,GAAS,KAAKkU,gBAAgBhlB,SAASiwB,CAAQ,IAAMrzB,GAAcI,GAC/El0B,EAAOmnD,EAEPnnD,EAAO,IAEX,CAEJ,CACA,OAAOA,CACT,CACAonD,eAAe77G,EAAS87G,EAAiBxM,EAAe,CACtD,IAAMnlJ,EAAS61C,EAAQsgF,UAAUn2H,OACjC,GAAI,CAACA,EACH,YAAKiJ,KAAK,+BAA+B,EAClC,EAET,IAAM2oJ,EAAe/7G,EAAQm/F,cACvB6c,EAAiB,CAACF,EAClBG,EAAUj8G,EAAQw8F,gBAAkB3xC,GAAekxD,CAAY,EACrE,GAAIC,GAAkB,CAACC,GAAW,CAACF,EAAc,CAC/C1M,GAAYC,EAAetvG,CAAO,EAClC,IAAMk8G,EAAsBl8G,EAAQm/F,cACpC,YAAKhsI,IAAI,0BAA0B+oJ,EAAoB5jJ,QAAQ,CAAC,CAAC,cAAcwjJ,EAAkBA,EAAgB5e,QAAU,IAAI,KAAKl9F,EAAQk9F,OAAO,eAAe/yI,CAAM,EAAE,EACnK+xJ,CACT,CACA,OAAOH,CACT,CACAI,iBAAiBn8G,EAAS,CAExB,OAAOA,EAAQq5E,MAAQr5E,EAAQs9F,gBAAkBt9F,EAAQ2/E,YAAc3/E,EAAQ69F,WAAa30I,KAAKwG,IAAIswC,EAAQy9F,aAAcz9F,EAAQ2/E,WAAay8B,CAAgB,CAClK,CACAC,iBAAiBr8G,EAASouG,EAAS,CACjC,IAAI/pB,EAAgB,KAAKA,cACrBA,EAAgB+pB,IAClB/pB,EAAgB,IAElB,IAAMgvB,EAAiB,KAAKA,eAC5B,GAAIhvB,IAAkB,GAAI,CACxB,IAAMi4B,EAA+B,KAAKnf,kBAAoB,KACxDA,EAAkBmf,EAA+B,KAAKnf,gBAAkBn9F,EAAQm9F,gBAClFA,IAAoB,MAAQtyC,GAAesyC,CAAe,GAC5D9Y,EAAgB+pB,EAAUjR,EACtBA,EAAkB,IACpB9Y,GAAiBrkF,EAAQ8+F,MAE3Bza,EAAgBn7H,KAAKgmB,IAAIhmB,KAAKwG,IAAI0+I,EAAS/pB,CAAa,EAAG+pB,EAAUpuG,EAAQq9F,aAAa,EAC1F,KAAKlqI,IAAI,4BAA4BkxH,CAAa,0BAA0B8Y,CAAe,aAAamf,EAA+B,eAAiB,OAAO,WAAW,EAC1K,KAAKj4B,cAAgBA,GACZrkF,EAAQq5E,MACjBgL,EAAgB,KAAKtN,IAAIt9B,kBAAoB20D,EAC7C,KAAKj7I,IAAI,qDAAqDkxH,CAAa,EAAE,EAC7E,KAAKA,cAAgB,KAErB,KAAKlxH,IAAI,uCAAuC,EAChD,KAAKkxH,cAAgBA,EAAgB,GAEvC,KAAK2sB,gBAAkB3sB,EAAgBgvB,CACzC,CACA,KAAKpC,iBAAmB5sB,EAAgBgvB,CAC1C,CACAyE,iBAAkB,CAChB,IAAIzrB,EACJ,GAAM,CACJxoD,MAAAA,CACF,EAAI,KACAlxD,EAAM,EACV,OAAK05G,EAAY,KAAKtV,MAAQ,MAAQsV,EAAU+lB,kBAAoBvuE,EAClElxD,EAAMkxD,EAAMphC,YACH,KAAKwuG,kBAAoB,IAClCt+H,EAAM,KAAKs+H,kBAENt+H,CACT,CACAykI,sBAAsB3iD,EAAMv5C,EAAM,CAC5B,KAAK21F,YAAcp8C,EAAKj0F,OAAS,KAAKypH,cAAgBz1B,GAAgBC,CAAI,GAAKA,EAAKH,MAAMzxF,UAC5F,KAAK1P,IAAI,YAAYshG,EAAKC,EAAE,GAAGx5C,EAAO,SAAWA,EAAKn6C,MAAQ,EAAE,OAAO,KAAKuzI,cAAc,CAAC,IAAI7/C,EAAKhhG,KAAK,cAAc,EACvH,KAAK+gJ,qBAAqB//C,CAAI,EAElC,CACA+/C,qBAAqB//C,EAAM,EACrB,CAAC,KAAKijB,aAAe,CAAC,KAAKw8B,mBAAmBz/C,CAAI,GAAK,KAAKviF,QAAU69H,GAAMI,8BAC9E,KAAKj+H,MAAQ69H,GAAME,KAEvB,CACAsM,yBAAyBC,EAAYp5I,EAAM,CACzC,GAAIA,EAAK+yI,WAAa,CAAC/yI,EAAKqxF,KAAM,CAChC,IAAM11E,EAAU,KAAKw4H,kBAAkBn0I,EAAK+yI,SAAS,EACjDp3H,IACF3b,EAAKqxF,KAAO11E,EAAQ01E,KAExB,CACA,IAAMA,EAAOrxF,EAAKqxF,KAClB,GAAI,CAACA,GAAQA,EAAKj0F,OAASg8I,GAAc,CAAC,KAAKliI,OAC7C,OAEF,GAAI,KAAK45H,mBAAmBz/C,CAAI,EAAG,CACjC,IAAIgoD,EACJ,KAAKrpJ,KAAK,oDAAoDqhG,EAAK3oG,GAAG,OAAO2wJ,EAAoB,KAAK/kC,cAAgB,KAAO,OAAS+kC,EAAkB3wJ,GAAG,EAAE,EAC7J,MACF,CACA,IAAM4wJ,EAAoBt5I,EAAK48B,UAAYkrD,EAAa65B,SACpD23B,GACF,KAAK/L,gBAAgBxlB,aAAa12B,EAAM,EAAI,EAE9C,IAAMkwB,EAAcvhH,EAAKuhH,YACnB,CACJM,OAAAA,EACAvnC,MAAAA,EACA4kC,WAAAA,EAAa,EACbD,YAAAA,CACF,EAAIsC,GAAe,CAAC,EACdg4B,EAAa,CAAC,CAACh4B,GAAe,CAAC,CAACtC,EAChC/5C,EAAQq0E,GAAc13B,IAAW5B,GAAmBI,aACpDm5B,EAAcD,GAAc,CAACh4B,EAAYwD,UAAYzqC,IAAUgmC,GAAiBE,8BACtF,GAAI,CAACt7C,GAASs0E,GAAepoD,GAAgBC,CAAI,GAAK,CAACA,EAAKsB,QAC1D,KAAK8mD,oBAAoBL,CAAU,EACnC,KAAKM,WAAWroD,CAAI,EACpBkwB,EAAYwD,SAAW,YACb7/C,GAASs0E,IAAgBt6B,EAAaD,EAAYa,YAAa,CACzE,KAAK65B,wBAAwB,KAAK3L,eAAe,EACjD,IAAM4L,EAAQ56B,GAAcC,EAAaC,CAAU,EACnD,KAAKlvH,KAAK,YAAYqhG,EAAKC,EAAE,OAAO8nD,CAAU,IAAI/nD,EAAKhhG,KAAK,iBAAiB2P,EAAK48B,OAAO,sBAAsBsiF,EAAa,CAAC,IAAID,EAAYa,WAAW,OAAO85B,CAAK,IAAI,EACxKr4B,EAAYwD,SAAW,GACvB,KAAK+oB,UAAYh4I,KAAKgsB,YAAYC,IAAI,EAAI63H,EAC1C,KAAK9qI,MAAQ69H,GAAMI,0BACrB,SAAW9tB,GAAesC,EAExB,GADA,KAAKk4B,oBAAoBL,CAAU,EAC/Bl6B,EAAaD,EAAYa,YACvB,CAACw5B,GAAqBz3B,IAAW5B,GAAmBG,6BACtDmB,EAAYwD,SAAW,QAEpB,CACL,KAAK/0H,KAAK,GAAGgQ,EAAK48B,OAAO,mCAAmCsiF,CAAU,GAAG,EACzE,MACF,MACS2C,IAAW5B,GAAmBE,0BACvC,KAAKrxG,MAAQ69H,GAAMU,cAEnB,KAAKv+H,MAAQ69H,GAAMrsG,MAErB,KAAKqzF,cAAc,CACrB,CACAkmB,2BAA2B75I,EAAM,CAC/B,GAAI,KAAK8O,QAAU69H,GAAMM,SAAW,KAAKn+H,QAAU69H,GAAMO,OAAQ,CAC/D,IAAM77C,EAAOrxF,EAAKqxF,KACZw1B,EAAe7mH,EAAKwb,OACpBg5G,EAAe,KAAK+c,iBAAiB,KAAK5D,YAAa9mB,CAAY,EACnE9zF,EAAWyhG,GAAgBA,EAAaj3C,IAAM,GAChDxqD,GACF,KAAK4+G,sBAAsBnd,EAAaj3C,IAA8B8T,GAAKr+D,UAAa,EAAE,EAE5F,IAAM8mH,EAAc,CAAC/mH,EACrB,OAAI+mH,GACF,KAAK9pJ,KAAK,oEAAoE62H,CAAY,SAAS,EAEjGx1B,IACF,KAAKk8C,gBAAgBtmB,eAAe51B,CAAI,EACxC,KAAKw8C,iBAAmBx8C,EAAK3sF,OAE/B,KAAK+pI,kBAAkB,EAChBqL,CACT,CACA,MAAO,EACT,CACAL,oBAAoBL,EAAY,CAC1BA,IAAe/wD,GAAkBE,QACnC,KAAK+rB,YAAc,MAEhB,KAAKX,IAAIq7B,mBACZ,KAAKf,mBAAqB,IAExB,KAAKn/H,QAAU69H,GAAMC,UACvB,KAAK99H,MAAQ69H,GAAME,KAEvB,CACAkN,mBAAmBt5E,EAAOu5E,EAAYnzB,EAAc,CAClD,GAAI,CAACpmD,EACH,OAEF,IAAMw5E,EAAqB/lB,GAAaE,YAAY3zD,CAAK,EACzD,KAAK8sE,gBAAgB7mB,uBAAuBszB,EAAYC,EAAoBpzB,CAAY,EACpF,KAAK/3G,QAAU69H,GAAMQ,OACvB,KAAKsB,kBAAkB,CAE3B,CACAA,mBAAoB,CAClB,KAAK1+I,IAAI,qBAAqB,EAC9B,KAAKukH,YAAc,KACnB,KAAKoJ,aAAe,KAChB,KAAK5uG,QAAU69H,GAAMC,UACvB,KAAK99H,MAAQ69H,GAAME,KAEvB,CACA8M,wBAAwBtpJ,EAAO,CAC7B,GAAI,CAAC,KAAKsjH,IAAIq7B,iBAAkB,CAC9B,KAAKf,mBAAqB,GAC1B,IAAMrxG,EAAUvsC,EAAQA,EAAMusC,QAAU,KACpCA,GAAW,MAAQA,EAAQq5E,MAC7B,KAAKlmH,IAAI,wCAAwC,EACjD,KAAKkxH,cAAgB,GACrB,KAAKg4B,iBAAiBr8G,EAASA,EAAQm/F,aAAa,EACpD,KAAK0S,kBAAkB,GAEvB,KAAKZ,iBAAmB,KAAK5sB,aAEjC,CACF,CACAi5B,wBAAwBnH,EAAW,CACjC,KAAK/iJ,KAAK,wDAAwD+iJ,EAAUzhD,EAAE,OAAO,KAAK4/C,cAAc,CAAC,IAAI6B,EAAU1iJ,KAAK,oCAAoC,EAChK,KAAK8pJ,sBAAsB,EAC3B,KAAKR,wBAAwB,KAAK3L,eAAe,EACjD,KAAKS,kBAAkB,CACzB,CACA0L,sBAAsBz1I,EAAQ,EAAG,CAC/B,KAAK6oI,gBAAgB1kB,uBAAuBnkH,EAAO4uC,IAAU,KAAKuzE,aAAc,GAAO,EAAI,CAC7F,CACAutB,kBAAkB/iD,EAAMv5C,EAAMznD,EAAO6jG,EAAS,CAC5C,IAAMt3D,EAAUvsC,EAAMusC,QACtB,GAAI,CAACA,EAAS,CACZ,KAAK5sC,KAAK,yBAAyB,EACnC,MACF,CAuBA,GAAI,CAtBWnM,OAAOmE,KAAKqpG,EAAKN,iBAAiB,EAAE9zF,OAAO,CAACpW,EAAQuW,IAAS,CAC1E,IAAM1N,EAAO2hG,EAAKN,kBAAkB3zF,CAAI,EACxC,GAAI1N,EAAM,CACR,IAAM0qJ,EAAiB1qJ,EAAKwiG,OAASxiG,EAAKuiG,SAC1C,GAAImoD,GAAkB,EACpB,YAAKpqJ,KAAK,4BAA4BqhG,EAAKC,EAAE,IAAIl0F,CAAI,uBAAuBg9I,CAAc,GAAG,EACtFvzJ,GAAU,GAEnB,IAAM20I,EAAQtnC,EAAU,EAAIs0C,GAAiB5rG,EAASy0D,EAAM3hG,EAAKuiG,SAAUviG,EAAKwiG,OAAQxiG,EAAKyiG,SAAUziG,EAAK0iG,MAAM,EAClH,YAAKuhB,IAAI7uF,QAAQqwC,EAAOklF,kBAAmB,CACzCz9G,QAAAA,EACAvsC,MAAAA,EACAmrI,MAAAA,EACAp+H,KAAAA,EACAi0F,KAAAA,EACA3sF,MAAOhV,EAAKuiG,SACZptF,IAAKnV,EAAKwiG,MACZ,CAAC,EACM,EACT,CACA,OAAOrrG,CACT,EAAG,EAAK,EACK,CACX,IAAIyzJ,EAIJ,GAHIjqJ,EAAMw8G,gBAAkB,GAC1B,KAAK6sC,WAAWroD,EAAMhhG,CAAK,IAEvBiqJ,EAAmB,KAAK7M,aAAe,KAAO,OAAS6M,EAAiBpqJ,SAAW,KAAM,CAC7F,IAAMA,EAAQ,IAAI4B,MAAM,8BAA8Bu/F,EAAKC,EAAE,OAAO,KAAK4/C,cAAc,CAAC,IAAI7/C,EAAKhhG,KAAK,sDAAsD,EAU5J,GATA,KAAKL,KAAKE,EAAMP,OAAO,EACvB,KAAKgkH,IAAI7uF,QAAQqwC,EAAO70B,MAAO,CAC7BljC,KAAMwqF,GAAWirC,YACjBj2F,QAASkrD,EAAa25B,mBACtB3I,MAAO,GACP5oH,MAAAA,EACAmhG,KAAAA,EACAt/D,OAAQ,yBAAyBs/D,EAAKC,EAAE,OAAO,KAAK4/C,cAAc,CAAC,KAAK7gJ,EAAM3H,GAAG,GACnF,CAAC,EACG,CAAC,KAAKirH,IACR,OAEF,KAAK87B,gBAAgB,CACvB,CACF,CACA,KAAK3gI,MAAQ69H,GAAMO,OACnB,KAAKn9I,IAAI,UAAUshG,EAAKj0F,IAAI,QAAQi0F,EAAKC,EAAE,GAAGx5C,EAAO,UAAYA,EAAKn6C,MAAQ,EAAE,OAAO,KAAKozI,SAAS1/C,EAAM,GAAOv5C,CAAI,CAAC,GAAG,EAC1H,KAAK67D,IAAI7uF,QAAQqwC,EAAOolF,YAAa,CACnClpD,KAAAA,EACAv5C,KAAAA,CACF,CAAC,CACH,CACAo5F,eAAgB,CACd,OAAO,KAAKrqB,eAAiBx+B,GAAkBC,KAAO,QAAU,OAClE,CACAyoD,SAAS1/C,EAAMmO,EAAM,GAAM1nD,EAAM,CAC/B,IAAItmB,EAAMgzC,EACV,MAAO,GAAG,KAAK0sE,cAAc,CAAC,IAAI7/C,EAAKhhG,KAAK,KAAKynD,EAAO,OAAS,MAAM,OAAOtmB,EAAOguE,GAAO,CAAC1nD,EAAOu5C,EAAKY,UAAYn6C,GAAQu5C,GAAM3sF,QAAU,KAAO8sB,EAAO2hC,KAAKj+D,QAAQ,CAAC,CAAC,MAAMsvE,EAAQg7B,GAAO,CAAC1nD,EAAOu5C,EAAKa,QAAUp6C,GAAQu5C,GAAMxsF,MAAQ,KAAO2/D,EAAQrR,KAAKj+D,QAAQ,CAAC,CAAC,IAAI4iD,GAAQu5C,EAAKj0F,OAAS,OAAS,gBAAkB06C,EAAKw8C,YAAc,MAAQ,MAAQ,EAAE,EACtW,CACAolD,WAAWroD,EAAMhhG,EAAO,CAClBA,GACFA,EAAMw8G,gBAERxb,EAAKuB,IAAM,GACX,KAAK26C,gBAAgBtmB,eAAe51B,CAAI,EACxC,KAAKk8C,gBAAgBxlB,aAAa12B,EAAM,EAAI,CAC9C,CACAo+C,iBAAkB,CAChB,IAAI+K,GACHA,EAAoB,KAAK/M,aAAe,MAAgB+M,EAAkB32G,MAAM,CACnF,CACA42G,mBAAmBz6I,EAAM,CACnBA,EAAKxG,QAAU,kBACjB,KAAK+zI,gBAAgB/kB,mBAAmB,EACpC,KAAKilB,aACP,KAAKA,WAAW3tD,QAAQ,EACxB,KAAK2tD,WAAa,MAEpB,KAAKkM,wBAAwB,KAAK3L,eAAe,EACjD,KAAKS,kBAAkB,EAE3B,CACA,IAAI3/H,MAAM4rI,EAAW,CACnB,IAAMC,EAAgB,KAAKjN,OACvBiN,IAAkBD,IACpB,KAAKhN,OAASgN,EACd,KAAK3qJ,IAAI,GAAG4qJ,CAAa,KAAKD,CAAS,EAAE,EAE7C,CACA,IAAI5rI,OAAQ,CACV,OAAO,KAAK4+H,MACd,CACF,EACA,SAAS0J,GAAqB1tF,EAAQ,CACpC,MAAO,CAAC,CAACA,EAAOkxF,yBAA2BlxF,EAAOmxF,6BAA+B,EACnF,CACA,IAAMC,GAAN,KAAiB,CACflsJ,aAAc,CACZ,KAAKmsJ,OAAS,CAAA,EACd,KAAKC,WAAa,CACpB,CACAxqJ,KAAKyqJ,EAAO,CACV,KAAKF,OAAOvqJ,KAAKyqJ,CAAK,EACtB,KAAKD,YAAcC,EAAMl0J,MAC3B,CACA4pB,OAAQ,CACN,GAAM,CACJoqI,OAAAA,EACAC,WAAAA,CACF,EAAI,KACAn0J,EACJ,GAAKk0J,EAAOh0J,OAEDg0J,EAAOh0J,SAAW,EAC3BF,EAASk0J,EAAO,CAAC,EAEjBl0J,EAASq0J,GAAkBH,EAAQC,CAAU,MAJ7C,QAAO,IAAIj+I,WAAW,CAAC,EAMzB,YAAK8mC,MAAM,EACJh9C,CACT,CACAg9C,OAAQ,CACN,KAAKk3G,OAAOh0J,OAAS,EACrB,KAAKi0J,WAAa,CACpB,CACF,EACA,SAASE,GAAkBH,EAAQC,EAAY,CAC7C,IAAMn0J,EAAS,IAAIkW,WAAWi+I,CAAU,EACpC7lD,EAAS,EACb,QAASruG,EAAI,EAAGA,EAAIi0J,EAAOh0J,OAAQD,IAAK,CACtC,IAAMm0J,EAAQF,EAAOj0J,CAAC,EACtBD,EAAOqD,IAAI+wJ,EAAO9lD,CAAM,EACxBA,GAAU8lD,EAAMl0J,MAClB,CACA,OAAOF,CACT,CACA,IAAIs0J,GAAgB,CAAEpjJ,QAAS,CAAC,CAAE,EAC9BqjJ,GACJ,SAASC,IAAuB,CAC9B,OAAID,KACJA,GAA2B,EAC1B,SAASljJ,EAAQ,CAChB,IAAIklB,EAAOv5B,OAAOoE,UAAUC,eAAgBozJ,EAAS,IACrD,SAAS/1H,GAAU,CACnB,CACI1hC,OAAOkX,SACTwqB,EAAQt9B,UAA4BpE,OAAOkX,OAAO,IAAI,EACjD,IAAIwqB,EAAQ,EAAEnuB,YAAWkkJ,EAAS,KAEzC,SAASC,EAAG5/I,EAAIggB,EAAS6/H,EAAO,CAC9B,KAAK7/I,GAAKA,EACV,KAAKggB,QAAUA,EACf,KAAKqiE,KAAOw9D,GAAS,EACvB,CACA,SAASz9D,EAAY09D,EAASjiJ,EAAOmC,EAAIggB,EAAS6/H,EAAO,CACvD,GAAI,OAAO7/I,GAAO,WAChB,MAAM,IAAI/N,UAAU,iCAAiC,EAEvD,IAAI45B,EAAW,IAAI+zH,EAAG5/I,EAAIggB,GAAW8/H,EAASD,CAAK,EAAGn8I,EAAMi8I,EAASA,EAAS9hJ,EAAQA,EACtF,OAAKiiJ,EAAQC,QAAQr8I,CAAG,EACdo8I,EAAQC,QAAQr8I,CAAG,EAAE1D,GAC1B8/I,EAAQC,QAAQr8I,CAAG,EAAI,CAACo8I,EAAQC,QAAQr8I,CAAG,EAAGmoB,CAAQ,EADxBi0H,EAAQC,QAAQr8I,CAAG,EAAE7O,KAAKg3B,CAAQ,GAD1Ci0H,EAAQC,QAAQr8I,CAAG,EAAImoB,EAAUi0H,EAAQE,gBAG7DF,CACT,CACA,SAASG,EAAWH,EAASp8I,EAAK,CAC5B,EAAEo8I,EAAQE,eAAiB,EAAGF,EAAQC,QAAU,IAAIn2H,EACnD,OAAOk2H,EAAQC,QAAQr8I,CAAG,CACjC,CACA,SAASw8I,GAAgB,CACvB,KAAKH,QAAU,IAAIn2H,EACnB,KAAKo2H,aAAe,CACtB,CACAE,EAAc5zJ,UAAU6zJ,WAAa,UAAsB,CACzD,IAAI9iJ,EAAQ,CAAA,EAAI+iJ,EAAS3uJ,EACzB,GAAI,KAAKuuJ,eAAiB,EAAG,OAAO3iJ,EACpC,IAAK5L,KAAQ2uJ,EAAU,KAAKL,QACtBt+H,EAAKj1B,KAAK4zJ,EAAS3uJ,CAAI,GAAG4L,EAAMxI,KAAK8qJ,EAASluJ,EAAKyQ,MAAM,CAAC,EAAIzQ,CAAI,EAExE,OAAIvJ,OAAOmnG,sBACFhyF,EAAM1N,OAAOzH,OAAOmnG,sBAAsB+wD,CAAO,CAAC,EAEpD/iJ,CACT,EACA6iJ,EAAc5zJ,UAAU2pE,UAAY,SAAmBp4D,EAAO,CAC5D,IAAI6F,EAAMi8I,EAASA,EAAS9hJ,EAAQA,EAAO8oB,EAAW,KAAKo5H,QAAQr8I,CAAG,EACtE,GAAI,CAACijB,EAAU,MAAO,CAAA,EACtB,GAAIA,EAAS3mB,GAAI,MAAO,CAAC2mB,EAAS3mB,EAAE,EACpC,QAAS7U,EAAI,EAAG8E,EAAI02B,EAASv7B,OAAQi1J,EAAK,IAAInuJ,MAAMjC,CAAC,EAAG9E,EAAI8E,EAAG9E,IAC7Dk1J,EAAGl1J,CAAC,EAAIw7B,EAASx7B,CAAC,EAAE6U,GAEtB,OAAOqgJ,CACT,EACAH,EAAc5zJ,UAAUg0J,cAAgB,SAAuBziJ,EAAO,CACpE,IAAI6F,EAAMi8I,EAASA,EAAS9hJ,EAAQA,EAAOo4D,EAAY,KAAK8pF,QAAQr8I,CAAG,EACvE,OAAKuyD,EACDA,EAAUj2D,GAAW,EAClBi2D,EAAU7qE,OAFM,CAGzB,EACA80J,EAAc5zJ,UAAUk2F,KAAO,SAAc3kF,EAAO0iJ,EAAI3lJ,EAAI4lJ,EAAIC,EAAIC,EAAI,CACtE,IAAIh9I,EAAMi8I,EAASA,EAAS9hJ,EAAQA,EACpC,GAAI,CAAC,KAAKkiJ,QAAQr8I,CAAG,EAAG,MAAO,GAC/B,IAAIuyD,EAAY,KAAK8pF,QAAQr8I,CAAG,EAAGk+E,EAAM5vF,UAAU5G,OAAQiwB,EAAMlwB,EACjE,GAAI8qE,EAAUj2D,GAAI,CAEhB,OADIi2D,EAAUosB,MAAM,KAAKC,eAAezkF,EAAOo4D,EAAUj2D,GAAI,OAAQ,EAAI,EACjE4hF,EAAG,CACT,IAAK,GACH,OAAO3rB,EAAUj2D,GAAGxT,KAAKypE,EAAUj2C,OAAO,EAAG,GAC/C,IAAK,GACH,OAAOi2C,EAAUj2D,GAAGxT,KAAKypE,EAAUj2C,QAASugI,CAAE,EAAG,GACnD,IAAK,GACH,OAAOtqF,EAAUj2D,GAAGxT,KAAKypE,EAAUj2C,QAASugI,EAAI3lJ,CAAE,EAAG,GACvD,IAAK,GACH,OAAOq7D,EAAUj2D,GAAGxT,KAAKypE,EAAUj2C,QAASugI,EAAI3lJ,EAAI4lJ,CAAE,EAAG,GAC3D,IAAK,GACH,OAAOvqF,EAAUj2D,GAAGxT,KAAKypE,EAAUj2C,QAASugI,EAAI3lJ,EAAI4lJ,EAAIC,CAAE,EAAG,GAC/D,IAAK,GACH,OAAOxqF,EAAUj2D,GAAGxT,KAAKypE,EAAUj2C,QAASugI,EAAI3lJ,EAAI4lJ,EAAIC,EAAIC,CAAE,EAAG,EACrE,CACA,IAAKv1J,EAAI,EAAGkwB,EAAO,IAAInpB,MAAM0vF,EAAM,CAAC,EAAGz2F,EAAIy2F,EAAKz2F,IAC9CkwB,EAAKlwB,EAAI,CAAC,EAAI6G,UAAU7G,CAAC,EAE3B8qE,EAAUj2D,GAAGjF,MAAMk7D,EAAUj2C,QAAS3E,CAAI,CAC5C,KAAO,CACL,IAAIjwB,EAAS6qE,EAAU7qE,OAAQulD,EAC/B,IAAKxlD,EAAI,EAAGA,EAAIC,EAAQD,IAEtB,OADI8qE,EAAU9qE,CAAC,EAAEk3F,MAAM,KAAKC,eAAezkF,EAAOo4D,EAAU9qE,CAAC,EAAE6U,GAAI,OAAQ,EAAI,EACvE4hF,EAAG,CACT,IAAK,GACH3rB,EAAU9qE,CAAC,EAAE6U,GAAGxT,KAAKypE,EAAU9qE,CAAC,EAAE60B,OAAO,EACzC,MACF,IAAK,GACHi2C,EAAU9qE,CAAC,EAAE6U,GAAGxT,KAAKypE,EAAU9qE,CAAC,EAAE60B,QAASugI,CAAE,EAC7C,MACF,IAAK,GACHtqF,EAAU9qE,CAAC,EAAE6U,GAAGxT,KAAKypE,EAAU9qE,CAAC,EAAE60B,QAASugI,EAAI3lJ,CAAE,EACjD,MACF,IAAK,GACHq7D,EAAU9qE,CAAC,EAAE6U,GAAGxT,KAAKypE,EAAU9qE,CAAC,EAAE60B,QAASugI,EAAI3lJ,EAAI4lJ,CAAE,EACrD,MACF,QACE,GAAI,CAACnlI,EAAM,IAAKs1B,EAAI,EAAGt1B,EAAO,IAAInpB,MAAM0vF,EAAM,CAAC,EAAGjxC,EAAIixC,EAAKjxC,IACzDt1B,EAAKs1B,EAAI,CAAC,EAAI3+C,UAAU2+C,CAAC,EAE3BslB,EAAU9qE,CAAC,EAAE6U,GAAGjF,MAAMk7D,EAAU9qE,CAAC,EAAE60B,QAAS3E,CAAI,CACpD,CAEJ,CACA,MAAO,EACT,EACA6kI,EAAc5zJ,UAAUu8B,GAAK,SAAYhrB,EAAOmC,EAAIggB,EAAS,CAC3D,OAAOoiE,EAAY,KAAMvkF,EAAOmC,EAAIggB,EAAS,EAAK,CACpD,EACAkgI,EAAc5zJ,UAAU+1F,KAAO,SAAexkF,EAAOmC,EAAIggB,EAAS,CAChE,OAAOoiE,EAAY,KAAMvkF,EAAOmC,EAAIggB,EAAS,EAAI,CACnD,EACAkgI,EAAc5zJ,UAAUg2F,eAAiB,SAAwBzkF,EAAOmC,EAAIggB,EAAS6/H,EAAO,CAC1F,IAAIn8I,EAAMi8I,EAASA,EAAS9hJ,EAAQA,EACpC,GAAI,CAAC,KAAKkiJ,QAAQr8I,CAAG,EAAG,OAAO,KAC/B,GAAI,CAAC1D,EACHigJ,OAAAA,EAAW,KAAMv8I,CAAG,EACb,KAET,IAAIuyD,EAAY,KAAK8pF,QAAQr8I,CAAG,EAChC,GAAIuyD,EAAUj2D,GACRi2D,EAAUj2D,KAAOA,IAAO,CAAC6/I,GAAS5pF,EAAUosB,QAAU,CAACriE,GAAWi2C,EAAUj2C,UAAYA,IAC1FigI,EAAW,KAAMv8I,CAAG,MAEjB,CACL,QAASvY,EAAI,EAAGi1J,EAAU,CAAA,EAAIh1J,EAAS6qE,EAAU7qE,OAAQD,EAAIC,EAAQD,KAC/D8qE,EAAU9qE,CAAC,EAAE6U,KAAOA,GAAM6/I,GAAS,CAAC5pF,EAAU9qE,CAAC,EAAEk3F,MAAQriE,GAAWi2C,EAAU9qE,CAAC,EAAE60B,UAAYA,IAC/FogI,EAAQvrJ,KAAKohE,EAAU9qE,CAAC,CAAC,EAGzBi1J,EAAQh1J,OAAQ,KAAK20J,QAAQr8I,CAAG,EAAI08I,EAAQh1J,SAAW,EAAIg1J,EAAQ,CAAC,EAAIA,EACvEH,EAAW,KAAMv8I,CAAG,CAC3B,CACA,OAAO,IACT,EACAw8I,EAAc5zJ,UAAUi2F,mBAAqB,SAA4B1kF,EAAO,CAC9E,IAAI6F,EACJ,OAAI7F,GACF6F,EAAMi8I,EAASA,EAAS9hJ,EAAQA,EAC5B,KAAKkiJ,QAAQr8I,CAAG,GAAGu8I,EAAW,KAAMv8I,CAAG,IAE3C,KAAKq8I,QAAU,IAAIn2H,EACnB,KAAKo2H,aAAe,GAEf,IACT,EACAE,EAAc5zJ,UAAU2vB,IAAMikI,EAAc5zJ,UAAUg2F,eACtD49D,EAAc5zJ,UAAU81F,YAAc89D,EAAc5zJ,UAAUu8B,GAC9Dq3H,EAAcrlI,SAAW8kI,EACzBO,EAAcS,aAAeT,EAE3B3jJ,EAAOH,QAAU8jJ,CAErB,EAAGV,EAAa,GACTA,GAAcpjJ,OACvB,CACA,IAAIwkJ,GAAuBlB,GAAqB,EAC5CmB,GAAiC/uD,GAA0B8uD,EAAoB,EAC7EvxJ,GAAU,QACVyxJ,GAAc,CAAC,EACrB,SAASC,IAAe,CACtB,OAAO,OAAOC,uBAA0B,UAC1C,CACA,SAASC,IAAe,CACtB,IAAMC,EAAgBJ,GAAYzxJ,EAAO,EACzC,GAAI6xJ,EACFA,OAAAA,EAAcC,cACPD,EAET,IAAME,EAAO,IAAIjnJ,KAAKknJ,KAAK,CAAC,wFAAwFL,sBAAsB3zJ,SAAS,CAAC,UAAU,EAAG,CAC/JoU,KAAM,iBACR,CAAC,EACK6/I,EAAYnnJ,KAAKjN,IAAIq0J,gBAAgBH,CAAI,EAEzCl2J,EAAS,CACbs2J,OAFa,IAAIrnJ,KAAKsnJ,OAAOH,CAAS,EAGtCA,UAAAA,EACAH,YAAa,CACf,EACAL,OAAAA,GAAYzxJ,EAAO,EAAInE,EAChBA,CACT,CACA,SAASw2J,GAAW/qJ,EAAM,CACxB,IAAMuqJ,EAAgBJ,GAAYnqJ,CAAI,EACtC,GAAIuqJ,EACFA,OAAAA,EAAcC,cACPD,EAET,IAAMS,EAAY,IAAIxnJ,KAAKjN,IAAIyJ,EAAMwD,KAAKlM,SAAS8H,IAAI,EAAEA,KAEnD7K,EAAS,CACbs2J,OAFa,IAAIrnJ,KAAKsnJ,OAAOE,CAAS,EAGtCA,UAAAA,EACAR,YAAa,CACf,EACAL,OAAAA,GAAYnqJ,CAAI,EAAIzL,EACbA,CACT,CACA,SAAS02J,GAAsBjrJ,EAAM,CACnC,IAAMuqJ,EAAgBJ,GAAYnqJ,GAAQtH,EAAO,EACjD,GAAI6xJ,GACkBA,EAAcC,gBACd,EAAG,CACrB,GAAM,CACJK,OAAAA,EACAF,UAAAA,CACF,EAAIJ,EACJ,OAAOJ,GAAYnqJ,GAAQtH,EAAO,EAC9BiyJ,GACFnnJ,KAAKjN,IAAI20J,gBAAgBP,CAAS,EAEpCE,EAAOM,UAAU,CACnB,CAEJ,CACA,SAASC,GAAY19I,EAAMm1F,EAAQ,CACjC,OAAIA,EAAS,IAAMn1F,EAAKjZ,QAClBiZ,EAAKm1F,CAAM,IAAM,IAAMn1F,EAAKm1F,EAAS,CAAC,IAAM,IAAMn1F,EAAKm1F,EAAS,CAAC,IAAM,IACrEn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,KAC3Cn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,GAO7G,CACA,SAASwoD,GAAY39I,EAAMm1F,EAAQ,CACjC,OAAIA,EAAS,IAAMn1F,EAAKjZ,QAClBiZ,EAAKm1F,CAAM,IAAM,IAAMn1F,EAAKm1F,EAAS,CAAC,IAAM,IAAMn1F,EAAKm1F,EAAS,CAAC,IAAM,IACrEn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,KAC3Cn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,GAO7G,CACA,SAASyoD,GAAY59I,EAAMm1F,EAAQ,CACjC,IAAIpnG,EAAO,EACXA,OAAAA,GAAQiS,EAAKm1F,CAAM,EAAI,MAAQ,GAC/BpnG,IAASiS,EAAKm1F,EAAS,CAAC,EAAI,MAAQ,GACpCpnG,IAASiS,EAAKm1F,EAAS,CAAC,EAAI,MAAQ,EACpCpnG,GAAQiS,EAAKm1F,EAAS,CAAC,EAAI,IACpBpnG,CACT,CACA,SAAS8vJ,GAAW79I,EAAMm1F,EAAQ,CAChC,IAAM2oD,EAAQ3oD,EACVpuG,EAAS,EACb,KAAO42J,GAAY39I,EAAMm1F,CAAM,GAAG,CAChCpuG,GAAU,GACV,IAAMgH,EAAO6vJ,GAAY59I,EAAMm1F,EAAS,CAAC,EACzCpuG,GAAUgH,EACN2vJ,GAAY19I,EAAMm1F,EAAS,EAAE,IAC/BpuG,GAAU,IAEZouG,GAAUpuG,CACZ,CACA,GAAIA,EAAS,EACX,OAAOiZ,EAAK01F,SAASooD,EAAOA,EAAQ/2J,CAAM,CAG9C,CACA,SAASg3J,GAAeC,EAAUh+I,EAAMm1F,EAAQ8oD,EAAe,CAC7D,IAAMC,EAAoB,CAAC,KAAM,MAAO,KAAM,KAAM,MAAO,KAAM,KAAM,MAAO,KAAM,KAAM,MAAO,IAAK,IAAI,EACpGC,EAAQn+I,EAAKm1F,EAAS,CAAC,EACvBipD,EAAoBD,GAAS,EAAI,GACvC,GAAIC,EAAoB,GAAI,CAC1B,IAAMluJ,EAAQ,IAAI4B,MAAM,+BAA+BssJ,CAAiB,EAAE,EAC1EJ,EAAS7/D,KAAKhpB,EAAO70B,MAAO60B,EAAO70B,MAAO,CACxCljC,KAAMwqF,GAAWirC,YACjBj2F,QAASkrD,EAAa25B,mBACtB3I,MAAO,GACP5oH,MAAAA,EACA6hC,OAAQ7hC,EAAMP,OAChB,CAAC,EACD,MACF,CACA,IAAM0uJ,GAAkBF,GAAS,EAAI,GAAK,EACpCG,EAAet+I,EAAKm1F,EAAS,CAAC,GAAK,EAAI,GAAKgpD,EAAQ,IAAM,EAC1DxmD,EAAQ,WAAa0mD,EACrBE,EAAaL,EAAkBE,CAAiB,EAClDI,EAAiBJ,GACjBC,IAAmB,GAAKA,IAAmB,MAC7CG,GAAkB,GAEpB,IAAM90F,EAAS,CAAC20F,GAAkB,GAAKG,EAAiB,KAAO,GAAIA,EAAiB,IAAM,EAAIF,GAAgB,CAAC,EAC/GnsJ,OAAAA,GAAOpC,IAAI,kBAAkBkuJ,CAAa,kBAAkBtmD,CAAK,cAAc2mD,CAAY,UAAUC,CAAU,sBAAsBF,CAAc,mBAAmBD,CAAiB,GAAG,EACnL,CACL10F,OAAAA,EACA60F,WAAAA,EACAD,aAAAA,EACA3mD,MAAAA,EACAyP,YAAazP,EACbsmD,cAAAA,CACF,CACF,CACA,SAASQ,GAAkBz+I,EAAMm1F,EAAQ,CACvC,OAAOn1F,EAAKm1F,CAAM,IAAM,MAAQn1F,EAAKm1F,EAAS,CAAC,EAAI,OAAS,GAC9D,CACA,SAASupD,GAAgB1+I,EAAMm1F,EAAQ,CACrC,OAAOn1F,EAAKm1F,EAAS,CAAC,EAAI,EAAI,EAAI,CACpC,CACA,SAASwpD,GAAmB3+I,EAAMm1F,EAAQ,CACxC,OAAQn1F,EAAKm1F,EAAS,CAAC,EAAI,IAAM,GAAKn1F,EAAKm1F,EAAS,CAAC,GAAK,GAAKn1F,EAAKm1F,EAAS,CAAC,EAAI,OAAS,CAC7F,CACA,SAASypD,GAAkB5+I,EAAMm1F,EAAQ,CACvC,OAAOA,EAAS,EAAIn1F,EAAKjZ,MAC3B,CACA,SAAS83J,GAAW7+I,EAAMm1F,EAAQ,CAChC,OAAOA,EAAS,EAAIn1F,EAAKjZ,QAAU03J,GAAkBz+I,EAAMm1F,CAAM,CACnE,CACA,SAAS2pD,GAAW9+I,EAAMm1F,EAAQ,CAChC,OAAOypD,GAAkB5+I,EAAMm1F,CAAM,GAAKspD,GAAkBz+I,EAAMm1F,CAAM,GAAKwpD,GAAmB3+I,EAAMm1F,CAAM,GAAKn1F,EAAKjZ,OAASouG,CACjI,CACA,SAAS4pD,GAAQ/+I,EAAMm1F,EAAQ,CAC7B,GAAI0pD,GAAW7+I,EAAMm1F,CAAM,EAAG,CAC5B,IAAM6pD,EAAeN,GAAgB1+I,EAAMm1F,CAAM,EACjD,GAAIA,EAAS6pD,GAAgBh/I,EAAKjZ,OAChC,MAAO,GAET,IAAMk4J,EAAcN,GAAmB3+I,EAAMm1F,CAAM,EACnD,GAAI8pD,GAAeD,EACjB,MAAO,GAET,IAAME,EAAY/pD,EAAS8pD,EAC3B,OAAOC,IAAcl/I,EAAKjZ,QAAU83J,GAAW7+I,EAAMk/I,CAAS,CAChE,CACA,MAAO,EACT,CACA,SAASC,GAAgBn2I,EAAOg1I,EAAUh+I,EAAMm1F,EAAQ8T,EAAY,CAClE,GAAI,CAACjgG,EAAMu1I,WAAY,CACrB,IAAM70F,EAASq0F,GAAeC,EAAUh+I,EAAMm1F,EAAQ8T,CAAU,EAChE,GAAI,CAACv/C,EACH,OAEFohC,GAAS9hF,EAAO0gD,CAAM,CACxB,CACF,CACA,SAAS01F,GAAiBb,EAAY,CACpC,MAAO,MAAO,IAAMA,CACtB,CACA,SAASc,GAAiBr/I,EAAMm1F,EAAQ,CACtC,IAAM6pD,EAAeN,GAAgB1+I,EAAMm1F,CAAM,EACjD,GAAIA,EAAS6pD,GAAgBh/I,EAAKjZ,OAAQ,CACxC,IAAMk4J,EAAcN,GAAmB3+I,EAAMm1F,CAAM,EAAI6pD,EACvD,GAAIC,EAAc,EAChB,MAAO,CACLD,aAAAA,EACAC,YAAAA,CACF,CAEJ,CACF,CACA,SAASK,GAAct2I,EAAOhJ,EAAMm1F,EAAQqK,EAAK+/C,EAAY,CAC3D,IAAMC,EAAgBJ,GAAiBp2I,EAAMu1I,UAAU,EACjDkB,EAAQjgD,EAAM+/C,EAAaC,EAC3BE,EAASL,GAAiBr/I,EAAMm1F,CAAM,EACxCxrF,EACJ,GAAI+1I,EAAQ,CACV,GAAM,CACJT,YAAAA,EACAD,aAAAA,CACF,EAAIU,EACEC,EAAUX,EAAeC,EACzBW,EAAU95J,KAAKwG,IAAI,EAAG6oG,EAASwqD,EAAU3/I,EAAKjZ,MAAM,EACtD64J,GACFj2I,EAAO,IAAI5M,WAAW4iJ,EAAUX,CAAY,EAC5Cr1I,EAAKzf,IAAI8V,EAAK01F,SAASP,EAAS6pD,EAAch/I,EAAKjZ,MAAM,EAAG,CAAC,GAE7D4iB,EAAO3J,EAAK01F,SAASP,EAAS6pD,EAAc7pD,EAASwqD,CAAO,EAE9D,IAAME,EAAU,CACdl2I,KAAAA,EACA61F,IAAKigD,CACP,EACA,OAAKG,GACH52I,EAAM40F,QAAQptG,KAAKqvJ,CAAO,EAErB,CACL52D,OAAQ42D,EACR94J,OAAQ44J,EACRC,QAAAA,CACF,CACF,CACA,IAAM74J,EAASiZ,EAAKjZ,OAASouG,EAC7BxrF,OAAAA,EAAO,IAAI5M,WAAWhW,CAAM,EAC5B4iB,EAAKzf,IAAI8V,EAAK01F,SAASP,EAAQn1F,EAAKjZ,MAAM,EAAG,CAAC,EAKvC,CACLkiG,OALa,CACbt/E,KAAAA,EACA61F,IAAKigD,CACP,EAGE14J,OAAAA,EACA64J,QAAS,EACX,CACF,CACA,SAASE,GAAY9/I,EAAMm1F,EAAQ,CACjC,OAAOwoD,GAAY39I,EAAMm1F,CAAM,GAAKyoD,GAAY59I,EAAMm1F,EAAS,CAAC,EAAI,IAAMn1F,EAAKjZ,OAASouG,CAC1F,CACA,SAAS4qD,GAAc30B,EAAO,CAC5B,OAAIA,aAAiBgE,YACZhE,EAEHA,EAAMhuB,YAAc,GAAKguB,EAAMt4B,YAAcs4B,EAAMr8G,OAAO+jF,WACrDs4B,EAAMr8G,OAER,IAAIhS,WAAWquH,CAAK,EAAEr8G,MAEjC,CACA,SAASixI,GAAQhgJ,EAAMm1F,EAAS,EAAGpuG,EAASusD,IAAU,CACpD,OAAO2sG,GAAKjgJ,EAAMm1F,EAAQpuG,EAAQgW,UAAU,CAC9C,CACA,SAASkjJ,GAAKjgJ,EAAMm1F,EAAQpuG,EAAQm5J,EAAM,CACxC,IAAM5wI,EAAU6wI,GAAqBngJ,CAAI,EACrCogJ,EAAkB,EAClB,sBAAuBF,IACzBE,EAAkBF,EAAKG,mBAEzB,IAAM7hD,EAAa8hD,GAAkBtgJ,CAAI,EAAIA,EAAKo9F,WAAa,EACzDmjD,GAAW/hD,EAAax+F,EAAK8yF,YAAcstD,EAC3CI,GAAYhiD,EAAarJ,GAAUirD,EACnC17I,EAAQ5e,KAAKC,MAAMD,KAAKwG,IAAI,EAAGxG,KAAKgmB,IAAI00I,EAAUD,CAAO,CAAC,CAAC,EAC3D17I,EAAM/e,KAAKC,MAAMD,KAAKgmB,IAAIpH,EAAQ5e,KAAKwG,IAAIvF,EAAQ,CAAC,EAAGw5J,CAAO,CAAC,EACrE,OAAO,IAAIL,EAAK5wI,EAAS5K,EAAOG,EAAMH,CAAK,CAC7C,CACA,SAASy7I,GAAqB/0B,EAAO,CACnC,OAAIA,aAAiBgE,YACZhE,EAEAA,EAAMr8G,MAEjB,CACA,SAASuxI,GAAkBt8J,EAAK,CAC9B,OAAOA,GAAOA,EAAI+qB,kBAAkBqgH,aAAeprI,EAAI8uG,aAAe,QAAU9uG,EAAIo5G,aAAe,MACrG,CACA,SAASqjD,GAAoBC,EAAO,CAClC,IAAMC,EAAgB,CACpB18J,IAAKy8J,EAAMtjJ,KACX+3B,YAAa,GACbn1B,KAAM,GACNkoG,SAAU,KACV04C,YAAa,IACf,EACMC,EAAe,EACrB,GAAIH,EAAM3yJ,KAAO,EACf,OAEF,GAAI2yJ,EAAM1gJ,KAAK,CAAC,IAAM6gJ,EAAc,CAClC/wJ,QAAQC,IAAI,mDAAmD,EAC/D,MACF,CACA,IAAM+wJ,EAAmBJ,EAAM1gJ,KAAK01F,SAAS,CAAC,EAAE93F,QAAQ,CAAC,EACzD,GAAIkjJ,IAAqB,GACvB,OAEF,IAAM54C,EAAWnb,GAAeizD,GAAQU,EAAM1gJ,KAAM,EAAG8gJ,CAAgB,CAAC,EAClEF,EAAcF,EAAM1gJ,KAAK,EAAI8gJ,CAAgB,EAC7CC,EAAsBL,EAAM1gJ,KAAK01F,SAAS,EAAIorD,CAAgB,EAAEljJ,QAAQ,CAAC,EAC/E,GAAImjJ,IAAwB,GAC1B,OAEF,IAAM5rH,EAAc43D,GAAeizD,GAAQU,EAAM1gJ,KAAM,EAAI8gJ,EAAkBC,CAAmB,CAAC,EAC7F/gJ,EACJ,OAAIkoG,IAAa,MACfloG,EAAO+sF,GAAeizD,GAAQU,EAAM1gJ,KAAM,EAAI8gJ,EAAmBC,CAAmB,CAAC,EAErF/gJ,EAAO+/I,GAAcW,EAAM1gJ,KAAK01F,SAAS,EAAIorD,EAAmBC,CAAmB,CAAC,EAEtFJ,EAAcz4C,SAAWA,EACzBy4C,EAAcC,YAAcA,EAC5BD,EAAcxrH,YAAcA,EAC5BwrH,EAAc3gJ,KAAOA,EACd2gJ,CACT,CACA,SAASK,GAAmBN,EAAO,CACjC,GAAIA,EAAM3yJ,KAAO,EACf,OAEF,IAAMkzJ,EAAQl0D,GAAe2zD,EAAM1gJ,KAAM,EAAI,EACvCkhJ,EAAc,IAAInkJ,WAAW2jJ,EAAM1gJ,KAAK01F,SAASurD,EAAMl6J,OAAS,CAAC,CAAC,EACxE,MAAO,CACL9C,IAAKy8J,EAAMtjJ,KACX1N,KAAMuxJ,EACNjhJ,KAAMkhJ,EAAYnyI,MACpB,CACF,CACA,SAASoyI,GAAmBT,EAAO,CACjC,GAAIA,EAAM3yJ,KAAO,EACf,OAEF,GAAI2yJ,EAAMtjJ,OAAS,OAAQ,CACzB,IAAIO,EAAQ,EACNw3B,EAAc43D,GAAe2zD,EAAM1gJ,KAAK01F,SAAS/3F,CAAK,EAAG,EAAI,EACnEA,GAASw3B,EAAYpuC,OAAS,EAC9B,IAAM7C,EAAQ6oG,GAAe2zD,EAAM1gJ,KAAK01F,SAAS/3F,CAAK,CAAC,EACvD,MAAO,CACL1Z,IAAKy8J,EAAMtjJ,KACX1N,KAAMylC,EACNn1B,KAAM9b,CACR,CACF,CACA,IAAMmP,EAAO05F,GAAe2zD,EAAM1gJ,KAAK01F,SAAS,CAAC,CAAC,EAClD,MAAO,CACLzxG,IAAKy8J,EAAMtjJ,KACX1N,KAAM,GACNsQ,KAAM3M,CACR,CACF,CACA,SAAS+tJ,GAAkBV,EAAO,CAChC,GAAIA,EAAMtjJ,OAAS,OAAQ,CACzB,GAAIsjJ,EAAM3yJ,KAAO,EACf,OAEF,IAAI4P,EAAQ,EACNw3B,EAAc43D,GAAe2zD,EAAM1gJ,KAAK01F,SAAS/3F,CAAK,EAAG,EAAI,EACnEA,GAASw3B,EAAYpuC,OAAS,EAC9B,IAAM7C,EAAQ6oG,GAAe2zD,EAAM1gJ,KAAK01F,SAAS/3F,CAAK,CAAC,EACvD,MAAO,CACL1Z,IAAKy8J,EAAMtjJ,KACX1N,KAAMylC,EACNn1B,KAAM9b,CACR,CACF,CACA,IAAMwE,EAAMqkG,GAAe2zD,EAAM1gJ,IAAI,EACrC,MAAO,CACL/b,IAAKy8J,EAAMtjJ,KACX1N,KAAM,GACNsQ,KAAMtX,CACR,CACF,CACA,SAAS24J,GAAeX,EAAO,CAC7B,OAAIA,EAAMtjJ,OAAS,OACV4jJ,GAAmBN,CAAK,EACtBA,EAAMtjJ,KAAK,CAAC,IAAM,IACpBgkJ,GAAkBV,CAAK,EACrBA,EAAMtjJ,OAAS,OACjBqjJ,GAAoBC,CAAK,EAE3BS,GAAmBT,CAAK,CACjC,CACA,SAASY,GAAgBthJ,EAAM,CAC7B,IAAM5C,EAAO7P,OAAOqM,aAAaoG,EAAK,CAAC,EAAGA,EAAK,CAAC,EAAGA,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,EAC7DjS,EAAO6vJ,GAAY59I,EAAM,CAAC,EAC1Bm1F,EAAS,GACf,MAAO,CACL/3F,KAAAA,EACArP,KAAAA,EACAiS,KAAMA,EAAK01F,SAASP,EAAQA,EAASpnG,CAAI,CAC3C,CACF,CACA,IAAMwzJ,GAAqB,GACrBC,GAAa,GACnB,SAASC,GAAaC,EAAS,CAC7B,IAAIvsD,EAAS,EACPwsD,EAAS,CAAA,EACf,KAAOhE,GAAY+D,EAASvsD,CAAM,GAAG,CACnC,IAAMpnG,EAAO6vJ,GAAY8D,EAASvsD,EAAS,CAAC,EACxCusD,EAAQvsD,EAAS,CAAC,GAAK,EAAI,IAC7BA,GAAUosD,IAEZpsD,GAAUosD,GACV,IAAM18I,EAAMswF,EAASpnG,EACrB,KAAOonG,EAASqsD,GAAa38I,GAAK,CAChC,IAAM+8I,EAAYN,GAAgBI,EAAQhsD,SAASP,CAAM,CAAC,EACpDurD,EAAQW,GAAeO,CAAS,EAClClB,GACFiB,EAAOnxJ,KAAKkwJ,CAAK,EAEnBvrD,GAAUysD,EAAU7zJ,KAAOwzJ,EAC7B,CACI7D,GAAYgE,EAASvsD,CAAM,IAC7BA,GAAUosD,GAEd,CACA,OAAOI,CACT,CACA,SAASE,GAAoBnB,EAAO,CAClC,OAAOA,GAASA,EAAMz8J,MAAQ,QAAUy8J,EAAMhxJ,OAAS,8CACzD,CACA,SAASoyJ,GAAiBC,EAAgB,CACxC,GAAIA,EAAe/hJ,KAAK8yF,aAAe,EAAG,CACxC,IAAM9yF,EAAO,IAAIjD,WAAWglJ,EAAe/hJ,IAAI,EACzCgiJ,EAAWhiJ,EAAK,CAAC,EAAI,EACvBiiJ,GAAajiJ,EAAK,CAAC,GAAK,KAAOA,EAAK,CAAC,GAAK,KAAOA,EAAK,CAAC,GAAK,GAAKA,EAAK,CAAC,EAC3EiiJ,OAAAA,GAAa,GACTD,IACFC,GAAa,eAERn8J,KAAK+B,MAAMo6J,CAAS,CAC7B,CAEF,CACA,SAASC,GAAgBliJ,EAAM,CAC7B,IAAM2hJ,EAASF,GAAazhJ,CAAI,EAChC,QAASlZ,EAAI,EAAGA,EAAI66J,EAAO56J,OAAQD,IAAK,CACtC,IAAM45J,EAAQiB,EAAO76J,CAAC,EACtB,GAAI+6J,GAAoBnB,CAAK,EAC3B,OAAOoB,GAAiBpB,CAAK,CAEjC,CAEF,CACA,IAAIyB,GAAiC,SAASC,EAAiB,CAC7DA,OAAAA,EAAgB,SAAc,UAC9BA,EAAgB,UAAe,0BAC/BA,EAAgB,KAAU,+BAC1BA,EAAgB,QAAa,0BACtBA,CACT,EAAE,CAAC,CAAC,EACJ,SAASC,GAAWjlJ,EAAO,GAAIklJ,EAAiB,IAAK,CACnD,MAAO,CACLllJ,KAAAA,EACA6G,GAAI,GACJs+I,IAAK,GACLD,eAAAA,EACAE,eAAgB,GAChB5kD,QAAS,CAAA,EACTo3C,QAAS,CACX,CACF,CACA,IAAMyN,GAAN,KAAuB,CACrB7zJ,aAAc,CACZ,KAAK8zJ,YAAc,OACnB,KAAKC,UAAY,OACjB,KAAKpD,WAAa,EAClB,KAAKqD,WAAa,KAClB,KAAKC,QAAU,KACf,KAAK1U,QAAU,KACf,KAAK2U,QAAU,IACjB,CACAC,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,EAAe,CACnE,KAAKL,UAAY,CACfvlJ,KAAM,MACN6G,GAAI,EACJs+I,IAAK,GACLD,eAAgB,IAChBE,eAAgB,EAChB5kD,QAAS,CAAA,EACTo3C,QAAS,CACX,CACF,CACAiO,eAAeC,EAAiB,CAC9B,KAAK/U,QAAU+U,EACf,KAAKC,gBAAgB,CACvB,CACAA,iBAAkB,CAChB,KAAKN,QAAU,KACf,KAAKC,QAAU,KACf,KAAKvD,WAAa,CACpB,CACA6D,SAASpjJ,EAAMm1F,EAAQ,CACrB,MAAO,EACT,CACAkuD,YAAYr6I,EAAOhJ,EAAMm1F,EAAQ,CACjC,CAEAmuD,MAAMtjJ,EAAMy9F,EAAY,CAClB,KAAKmlD,aACP5iJ,EAAOq9F,GAAiB,KAAKulD,WAAY5iJ,CAAI,EAC7C,KAAK4iJ,WAAa,MAEpB,IAAIlB,EAAU7D,GAAW79I,EAAM,CAAC,EAC5Bm1F,EAASusD,EAAUA,EAAQ36J,OAAS,EACpCw8J,EACEv6I,EAAQ,KAAK05I,YACbc,EAAW,KAAKb,UAChBV,EAAYP,EAAUQ,GAAgBR,CAAO,EAAI,OACjD36J,EAASiZ,EAAKjZ,OAiBpB,KAhBI,KAAK87J,UAAY,MAAQ,KAAKtD,aAAe,GAAK93D,GAAew6D,CAAS,KAC5E,KAAKY,QAAUY,GAAUxB,EAAWxkD,EAAY,KAAK0wC,OAAO,EAC5D,KAAK2U,QAAU,KAAKD,SAElB,KAAKC,UAAY,OACnB,KAAKA,QAAU,KAAKD,SAElBnB,GAAWA,EAAQ36J,OAAS,GAC9By8J,EAAS5lD,QAAQptG,KAAK,CACpBgvG,IAAK,KAAKsjD,QACVY,IAAK,KAAKZ,QACV9iJ,KAAM0hJ,EACNtkJ,KAAM+kJ,GAAewB,SACrB3wH,SAAUnU,OAAOw3F,iBACnB,CAAC,EAEIlhB,EAASpuG,GAAQ,CACtB,GAAI,KAAKq8J,SAASpjJ,EAAMm1F,CAAM,EAAG,CAC/B,IAAMurD,EAAQ,KAAK2C,YAAYr6I,EAAOhJ,EAAMm1F,CAAM,EAC9CurD,GACF,KAAKnB,aACL,KAAKuD,QAAUpC,EAAMz3D,OAAOuW,IAC5BrK,GAAUurD,EAAM35J,OAChBw8J,EAAgBpuD,GAEhBA,EAASpuG,CAEb,MAAW+4J,GAAY9/I,EAAMm1F,CAAM,GACjCusD,EAAU7D,GAAW79I,EAAMm1F,CAAM,EACjCquD,EAAS5lD,QAAQptG,KAAK,CACpBgvG,IAAK,KAAKsjD,QACVY,IAAK,KAAKZ,QACV9iJ,KAAM0hJ,EACNtkJ,KAAM+kJ,GAAewB,SACrB3wH,SAAUnU,OAAOw3F,iBACnB,CAAC,EACDlhB,GAAUusD,EAAQ36J,OAClBw8J,EAAgBpuD,GAEhBA,IAEF,GAAIA,IAAWpuG,GAAUw8J,IAAkBx8J,EAAQ,CACjD,IAAM68J,EAAc5jJ,EAAKnC,MAAM0lJ,CAAa,EACxC,KAAKX,WACP,KAAKA,WAAavlD,GAAiB,KAAKulD,WAAYgB,CAAW,EAE/D,KAAKhB,WAAagB,CAEtB,CACF,CACA,MAAO,CACLv4C,WAAYriG,EACZ66I,WAAYxB,GAAW,EACvBmB,SAAAA,EACAM,UAAWzB,GAAW,CACxB,CACF,CACA0B,eAAe/jJ,EAAMigI,EAASxiC,EAAY,CACxC,OAAO9qG,QAAQ2yC,OAAO,IAAIxzC,MAAM,IAAI,IAAI,uDAAuD,CAAC,CAClG,CACA6e,MAAM8sF,EAAY,CAChB,IAAMmlD,EAAa,KAAKA,WACxB,OAAIA,IACF,KAAKA,WAAa,KAClB,KAAKU,MAAMV,EAAY,CAAC,GAEnB,CACLv3C,WAAY,KAAKq3C,YACjBmB,WAAYxB,GAAW,EACvBmB,SAAU,KAAKb,UACfmB,UAAWzB,GAAW,CACxB,CACF,CACAviE,SAAU,CACR,KAAK8iE,WAAa,KAClB,KAAKF,YAAc,KAAKC,UAAY,MACtC,CACF,EACMc,GAAYA,CAACxB,EAAWxkD,EAAY0wC,IAAY,CACpD,GAAI1mD,GAAew6D,CAAS,EAC1B,OAAOA,EAAY,GAErB,IAAM+B,EAAY7V,EAAUA,EAAQ5yC,SAAW,IAAM4yC,EAAQn4C,UAAY,EACzE,OAAOyH,EAAa,IAAMumD,CAC5B,EACIC,GAAkB,KAChBC,GAAc,CAAC,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,IAAK,IAAK,GAAG,EAC1UC,GAAkB,CAAC,MAAO,KAAM,KAAM,MAAO,KAAM,KAAM,MAAO,KAAM,GAAG,EACzEC,GAAsB,CAE1B,CACE,EAEA,GAEA,IAEA,EACA,EAGF,CACE,EAEA,EAEA,EAEA,CACA,EAGF,CACE,EAEA,GAEA,IAEA,EACA,EAGF,CACE,EAEA,IAEA,IAEA,EACA,CACD,EAEGC,GAAc,CAClB,EAEA,EAEA,EAEA,CACA,EAEF,SAASC,GAAct7I,EAAOhJ,EAAMm1F,EAAQqK,EAAK+/C,EAAY,CAC3D,GAAIpqD,EAAS,GAAKn1F,EAAKjZ,OACrB,OAEF,IAAM24J,EAAS6E,GAAYvkJ,EAAMm1F,CAAM,EACvC,GAAIuqD,GAAUvqD,EAASuqD,EAAOT,aAAej/I,EAAKjZ,OAAQ,CACxD,IAAMy4J,EAAgBE,EAAO8E,gBAAkB,IAAM9E,EAAO+E,WACtDhF,EAAQjgD,EAAM+/C,EAAaC,EAC3Bv2D,EAAS,CACbt/E,KAAM3J,EAAK01F,SAASP,EAAQA,EAASuqD,EAAOT,WAAW,EACvDz/C,IAAKigD,EACLiE,IAAKjE,CACP,EACAz2I,OAAAA,EAAM0gD,OAAS,CAAA,EACf1gD,EAAMs1I,aAAeoB,EAAOpB,aAC5Bt1I,EAAMu1I,WAAamB,EAAO+E,WAC1Bz7I,EAAM40F,QAAQptG,KAAKy4F,CAAM,EAClB,CACLA,OAAAA,EACAliG,OAAQ24J,EAAOT,YACfW,QAAS,CACX,CACF,CACF,CACA,SAAS2E,GAAYvkJ,EAAMm1F,EAAQ,CACjC,IAAMuvD,EAAc1kJ,EAAKm1F,EAAS,CAAC,GAAK,EAAI,EACtCwvD,EAAY3kJ,EAAKm1F,EAAS,CAAC,GAAK,EAAI,EACpCyvD,EAAe5kJ,EAAKm1F,EAAS,CAAC,GAAK,EAAI,GACvC0vD,EAAkB7kJ,EAAKm1F,EAAS,CAAC,GAAK,EAAI,EAChD,GAAIuvD,IAAgB,GAAKE,IAAiB,GAAKA,IAAiB,IAAMC,IAAoB,EAAG,CAC3F,IAAMC,EAAa9kJ,EAAKm1F,EAAS,CAAC,GAAK,EAAI,EACrC4vD,EAAc/kJ,EAAKm1F,EAAS,CAAC,GAAK,EAClC6vD,EAAmBN,IAAgB,EAAI,EAAIC,EAAYA,IAAc,EAAI,EAAI,EAC7EM,EAAUf,GAAYc,EAAmB,GAAKJ,EAAe,CAAC,EAAI,IAElEH,EAAaN,IADSO,IAAgB,EAAI,EAAIA,IAAgB,EAAI,EAAI,GACnB,EAAIG,CAAe,EACtEvG,EAAeyG,IAAgB,EAAI,EAAI,EACvCG,EAAoBd,GAAoBM,CAAW,EAAEC,CAAS,EAC9DQ,EAAcd,GAAYM,CAAS,EACnCH,EAAkBU,EAAoB,EAAIC,EAC1ClG,EAAcn5J,KAAKC,MAAMm/J,EAAoBD,EAAUR,EAAaK,CAAU,EAAIK,EACxF,GAAIlB,KAAoB,KAAM,CAE5B,IAAMp9J,GADY4K,UAAUD,WAAa,IAChBrL,MAAM,gBAAgB,EAC/C89J,GAAkBp9J,EAASR,SAASQ,EAAO,CAAC,CAAC,EAAI,CACnD,CAEA,MADsB,CAAC,CAACo9J,IAAmBA,IAAmB,IACzCU,IAAc,GAAKM,GAAW,OAASF,IAAgB,IAC1E/kJ,EAAKm1F,EAAS,CAAC,EAAIn1F,EAAKm1F,EAAS,CAAC,EAAI,KAEjC,CACLsvD,WAAAA,EACAnG,aAAAA,EACAW,YAAAA,EACAuF,gBAAAA,CACF,CACF,CACF,CACA,SAASY,GAAgBplJ,EAAMm1F,EAAQ,CACrC,OAAOn1F,EAAKm1F,CAAM,IAAM,MAAQn1F,EAAKm1F,EAAS,CAAC,EAAI,OAAS,MAAQn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAO,CAChG,CACA,SAASkwD,GAASrlJ,EAAMm1F,EAAQ,CAC9B,OAAOA,EAAS,EAAIn1F,EAAKjZ,QAAUq+J,GAAgBplJ,EAAMm1F,CAAM,CACjE,CACA,SAASiuD,GAASpjJ,EAAMm1F,EAAQ,CAE9B,OAAOiwD,GAAgBplJ,EAAMm1F,CAAM,GAAKoK,GAAcv/F,EAAKjZ,OAASouG,CACtE,CACA,SAASmwD,GAAMtlJ,EAAMm1F,EAAQ,CAC3B,GAAIA,EAAS,EAAIn1F,EAAKjZ,QAAUq+J,GAAgBplJ,EAAMm1F,CAAM,EAAG,CAE7D,IAAMuqD,EAAS6E,GAAYvkJ,EAAMm1F,CAAM,EACnC8pD,EAAcD,EACdU,GAAU,MAAQA,EAAOT,cAC3BA,EAAcS,EAAOT,aAEvB,IAAMC,EAAY/pD,EAAS8pD,EAC3B,OAAOC,IAAcl/I,EAAKjZ,QAAUs+J,GAASrlJ,EAAMk/I,CAAS,CAC9D,CACA,MAAO,EACT,CACA,IAAMqG,GAAN,cAAyB9C,EAAiB,CACxC7zJ,YAAYovJ,EAAUt0F,EAAQ,CAC5B,MAAM,EACN,KAAKs0F,SAAW,OAChB,KAAKt0F,OAAS,OACd,KAAKs0F,SAAWA,EAChB,KAAKt0F,OAASA,CAChB,CACAq5F,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,EAAe,CACnE,MAAMD,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,CAAa,EACzE,KAAKN,YAAc,CACjBpvJ,UAAW,aACX8J,KAAM,QACN6G,GAAI,EACJs+I,IAAK,GACLC,eAAgB,EAChBgD,aAAc,MACd5nD,QAAS,CAAA,EACTqgD,cAAeh1C,EACfj2E,SAAUgwH,EACVV,eAAgB,IAChBtN,QAAS,CACX,CACF,CAEA,OAAOsQ,MAAMtlJ,EAAMurF,EAAS,CAC1B,GAAI,CAACvrF,EACH,MAAO,GAET,IAAM0hJ,EAAU7D,GAAW79I,EAAM,CAAC,EAC9Bm1F,EAAqCusD,GAAQ36J,QAAW,EAC5D,GAAIu+J,GAAMtlJ,EAAMm1F,CAAM,EACpB,MAAO,GAET,QAASpuG,EAASiZ,EAAKjZ,OAAQouG,EAASpuG,EAAQouG,IAC9C,GAAI4pD,GAAQ/+I,EAAMm1F,CAAM,EACtB5J,OAAAA,EAAQx7F,IAAI,wBAAwB,EAC7B,GAGX,MAAO,EACT,CACAqzJ,SAASpjJ,EAAMm1F,EAAQ,CACrB,OAAO2pD,GAAW9+I,EAAMm1F,CAAM,CAChC,CACAkuD,YAAYr6I,EAAOhJ,EAAMm1F,EAAQ,CAC/BgqD,GAAgBn2I,EAAO,KAAKg1I,SAAUh+I,EAAMm1F,EAAQnsF,EAAMi1I,aAAa,EACvE,IAAMyC,EAAQpB,GAAct2I,EAAOhJ,EAAMm1F,EAAQ,KAAK0tD,QAAS,KAAKtD,UAAU,EAC9E,GAAImB,GAASA,EAAMd,UAAY,EAC7B,OAAOc,CAEX,CACF,EACM+E,GAAeA,CAACzlJ,EAAMm1F,IAAW,CACrC,IAAIuwD,EAAO,EACPr7D,EAAU,EACd8K,GAAU9K,EACV,IAAMh0D,EAAO,IAAIo0F,YAAY,CAAC,EACxBk7B,EAAO,IAAIl7B,YAAY,CAAC,EACxBpxB,EAAO,IAAIt8F,WAAW,CAAC,EAC7B,KAAOstF,EAAU,GAAG,CAClBgP,EAAK,CAAC,EAAIr5F,EAAKm1F,CAAM,EACrB,IAAMywD,EAAO9/J,KAAKgmB,IAAIu+E,EAAS,CAAC,EAC1B1iE,EAAQ,EAAIi+H,EAClBD,EAAK,CAAC,EAAI,aAAe,GAAKh+H,GAASA,EACvC0O,EAAK,CAAC,GAAKgjE,EAAK,CAAC,EAAIssD,EAAK,CAAC,IAAMh+H,EACjC+9H,EAAQA,EAAiBA,GAAQE,EAAOvvH,EAAK,CAAC,EAA/BA,EAAK,CAAC,EACrB8+D,GAAU,EACV9K,GAAWu7D,CACb,CACA,OAAOF,CACT,EACMG,GAAN,cAAyBpD,EAAiB,CACxC7zJ,YAAYovJ,EAAU,CACpB,MAAM,EACN,KAAKA,SAAW,OAChB,KAAKA,SAAWA,CAClB,CACA+E,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,EAAe,CACnE,MAAMD,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,CAAa,EACzE,KAAKN,YAAc,CACjBpvJ,UAAW,aACX8J,KAAM,QACN6G,GAAI,EACJs+I,IAAK,GACLC,eAAgB,EAChBgD,aAAc,MACd5nD,QAAS,CAAA,EACTqgD,cAAeh1C,EACfj2E,SAAUgwH,EACVV,eAAgB,IAChBtN,QAAS,CACX,CACF,CACAoO,SAASpjJ,EAAMm1F,EAAQ,CACrB,OAAOA,EAAS,GAAKn1F,EAAKjZ,MAC5B,CACAs8J,YAAYr6I,EAAOhJ,EAAMm1F,EAAQ,CAC/B,IAAM8pD,EAAcoE,GAAYr6I,EAAOhJ,EAAMm1F,EAAQ,KAAK0tD,QAAS,KAAKtD,UAAU,EAClF,GAAIN,IAAgB,GAElB,MAAO,CACLh2D,OAFajgF,EAAM40F,QAAQ50F,EAAM40F,QAAQ72G,OAAS,CAAC,EAGnDA,OAAQk4J,EACRW,QAAS,CACX,CAEJ,CACA,OAAO0F,MAAMtlJ,EAAM,CACjB,GAAI,CAACA,EACH,MAAO,GAET,IAAM0hJ,EAAU7D,GAAW79I,EAAM,CAAC,EAClC,GAAI,CAAC0hJ,EACH,MAAO,GAET,IAAMvsD,EAASusD,EAAQ36J,OACvB,OAAIiZ,EAAKm1F,CAAM,IAAM,IAAMn1F,EAAKm1F,EAAS,CAAC,IAAM,KAAO+sD,GAAgBR,CAAO,IAAM,QACpF+D,GAAazlJ,EAAMm1F,CAAM,EAAI,EAI/B,CACF,EACA,SAASkuD,GAAYr6I,EAAOhJ,EAAM0E,EAAO86F,EAAK+/C,EAAY,CAIxD,GAHI76I,EAAQ,EAAI1E,EAAKjZ,QAGjBiZ,EAAK0E,CAAK,IAAM,IAAM1E,EAAK0E,EAAQ,CAAC,IAAM,IAC5C,MAAO,GAET,IAAMohJ,EAAmB9lJ,EAAK0E,EAAQ,CAAC,GAAK,EAC5C,GAAIohJ,GAAoB,EACtB,MAAO,GAGT,IAAMrB,EADkB,CAAC,KAAM,MAAO,IAAI,EACPqB,CAAgB,EAC7CC,EAAgB/lJ,EAAK0E,EAAQ,CAAC,EAAI,GAElCu6I,EADe,CAAC,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,GAAI,GAAI,IAAK,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,IAAK,KAAM,IAAK,IAAK,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,KAAM,IAAI,EACvjB8G,EAAgB,EAAID,CAAgB,EAAI,EACzE,GAAIphJ,EAAQu6I,EAAcj/I,EAAKjZ,OAC7B,MAAO,GAET,IAAMg+J,EAAc/kJ,EAAK0E,EAAQ,CAAC,GAAK,EACnCshJ,EAAY,EACZjB,IAAgB,EAClBiB,GAAa,GAETjB,EAAc,GAAKA,IAAgB,IACrCiB,GAAa,GAEXjB,EAAc,IAChBiB,GAAa,IAGjB,IAAMC,GAASjmJ,EAAK0E,EAAQ,CAAC,GAAK,EAAI1E,EAAK0E,EAAQ,CAAC,IAAM,GAAKshJ,EAAY,EAErE1H,EADc,CAAC,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,EAAG,CAAC,EACVyG,CAAW,EAAIkB,EAC1CP,EAAO1lJ,EAAK0E,EAAQ,CAAC,GAAK,EAC1BwhJ,EAAQlmJ,EAAK0E,EAAQ,CAAC,EAAI,EAC1BglD,EAAS,IAAI3sD,WAAW,CAAC+oJ,GAAoB,EAAIJ,GAAQ,EAAIQ,GAAS,GAAIA,EAAQ,IAAM,EAAInB,GAAe,EAAIkB,GAAS,EAAIF,GAAiB,EAAGA,GAAiB,EAAI,GAAG,CAAC,EACzKvG,EAAgB,KAAOiF,EAAa,IACpChF,EAAQjgD,EAAM+/C,EAAaC,EAC3B71I,EAAO3J,EAAK01F,SAAShxF,EAAOA,EAAQu6I,CAAW,EACrDj2I,OAAAA,EAAM0gD,OAASA,EACf1gD,EAAMs1I,aAAeA,EACrBt1I,EAAMu1I,WAAakG,EACnBz7I,EAAM40F,QAAQptG,KAAK,CACjBmZ,KAAAA,EACA61F,IAAKigD,CACP,CAAC,EACMR,CACT,CACA,IAAMkH,GAAN,cAAyB1D,EAAiB,CACxCM,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,EAAe,CACnE,MAAMD,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,CAAa,EACzE,KAAKN,YAAc,CACjBpvJ,UAAW,aACX8J,KAAM,QACN6G,GAAI,EACJs+I,IAAK,GACLC,eAAgB,EAChBgD,aAAc,MACd5nD,QAAS,CAAA,EACTqgD,cAAeh1C,EACfj2E,SAAUgwH,EACVV,eAAgB,IAChBtN,QAAS,CACX,CACF,CACA,OAAOsQ,MAAMtlJ,EAAM,CACjB,GAAI,CAACA,EACH,MAAO,GAET,IAAM0hJ,EAAU7D,GAAW79I,EAAM,CAAC,EAC9Bm1F,EAAqCusD,GAAQ36J,QAAW,EAC5D,GAAI26J,GAAW1hJ,EAAKm1F,CAAM,IAAM,IAAMn1F,EAAKm1F,EAAS,CAAC,IAAM,KAAO+sD,GAAgBR,CAAO,IAAM,QAC/F+D,GAAazlJ,EAAMm1F,CAAM,GAAK,GAC5B,MAAO,GAET,QAASpuG,EAASiZ,EAAKjZ,OAAQouG,EAASpuG,EAAQouG,IAC9C,GAAImwD,GAAMtlJ,EAAMm1F,CAAM,EACpBhjG,OAAAA,GAAOpC,IAAI,8BAA8B,EAClC,GAGX,MAAO,EACT,CACAqzJ,SAASpjJ,EAAMm1F,EAAQ,CACrB,OAAOiuD,GAASpjJ,EAAMm1F,CAAM,CAC9B,CACAkuD,YAAYr6I,EAAOhJ,EAAMm1F,EAAQ,CAC/B,GAAI,KAAK0tD,UAAY,KAGrB,OAAOyB,GAAct7I,EAAOhJ,EAAMm1F,EAAQ,KAAK0tD,QAAS,KAAKtD,UAAU,CACzE,CACF,EACM6G,GAAoB,iBACpBC,GAAN,KAAiB,CACfz3J,YAAYovJ,EAAUt0F,EAAQ,CAC5B,KAAKklE,cAAgB,KACrB,KAAKnxB,WAAa,EAClB,KAAK/zC,OAAS,OACd,KAAKm6F,WAAa,OAClB,KAAKx4C,WAAa,OAClB,KAAKm4C,SAAW,OAChB,KAAK8C,SAAW,OAChB,KAAK58F,OAASA,CAChB,CACAu5F,gBAAiB,CACjB,CACAF,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,EAAe,CACnE,IAAMa,EAAa,KAAKA,WAAaxB,GAAW,QAAS,CAAC,EACpDh3C,EAAa,KAAKA,WAAag3C,GAAW,QAAS,CAAC,EACpDkE,EAAe,KAAKD,SAAWjE,GAAW,OAAQ,CAAC,EAGzD,GAFA,KAAKmB,SAAWnB,GAAW,MAAO,CAAC,EACnC,KAAK5kD,WAAa,EACd,EAAE/K,GAAe,MAAQA,EAAYI,YACvC,OAEF,IAAMkI,EAAWvE,GAAiB/D,CAAW,EAC7C,GAAIsI,EAASzxG,MAAO,CAClB,GAAM,CACJ0a,GAAAA,EACA+xF,UAAAA,EACA2B,MAAAA,EACAC,aAAAA,CACF,EAAIoD,EAASzxG,MACbs6J,EAAW5/I,GAAKA,EAChB4/I,EAAW7tD,UAAYuwD,EAAavwD,UAAYA,EAChD6tD,EAAWlsD,MAAQA,EACnBksD,EAAWjsD,aAAeA,CAC5B,CACA,GAAIoD,EAASr6D,MAAO,CAClB,GAAM,CACJ18B,GAAAA,EACA+xF,UAAAA,EACA2B,MAAAA,CACF,EAAIqD,EAASr6D,MACb0qE,EAAWpnG,GAAKA,EAChBonG,EAAWrV,UAAYA,EACvBqV,EAAW1T,MAAQA,CACrB,CACA4uD,EAAatiJ,GAAK8wF,GAAqB1hG,KACvCwwJ,EAAW/nD,eAAiB,EAC5B+nD,EAAW7wH,SAAWq4E,EAAWr4E,SAAWgwH,CAC9C,CACAG,iBAAkB,CAChB,KAAKv0B,cAAgB,IACvB,CACA,OAAO02B,MAAMtlJ,EAAM,CACjB,OAAOu1F,GAAYv1F,CAAI,CACzB,CACAsjJ,MAAMtjJ,EAAMy9F,EAAY,CACtB,KAAKA,WAAaA,EAClB,IAAI+oD,EAAexmJ,EACb6jJ,EAAa,KAAKA,WAClBC,EAAY,KAAKwC,SACvB,GAAI,KAAK58F,OAAOgqF,YAAa,CACvB,KAAK9kB,gBACP43B,EAAenpD,GAAiB,KAAKuxB,cAAe5uH,CAAI,GAE1D,IAAMymJ,EAAgB1pD,GAAkBypD,CAAY,EACpD,KAAK53B,cAAgB63B,EAAcvpD,UACnC2mD,EAAWjmD,QAAU6oD,EAAcxpD,OAAS,IAAIlgG,UAClD,MACE8mJ,EAAWjmD,QAAU4oD,EAEvB,IAAMhD,EAAW,KAAKkD,gBAAgB7C,EAAYpmD,CAAU,EAC5DqmD,OAAAA,EAAUlmD,QAAUJ,GAAaC,EAAYomD,CAAU,EAChD,CACLA,WAAAA,EACAx4C,WAAY,KAAKA,WACjBm4C,SAAAA,EACAM,UAAW,KAAKwC,QAClB,CACF,CACA31I,OAAQ,CACN,IAAM8sF,EAAa,KAAKA,WAClBomD,EAAa,KAAKA,WAClBC,EAAY,KAAKwC,SACvBzC,EAAWjmD,QAAU,KAAKgxB,eAAiB,IAAI7xH,WAC/C,KAAK6xH,cAAgB,KACrB,IAAM40B,EAAW,KAAKkD,gBAAgB7C,EAAY,KAAKpmD,UAAU,EACjEqmD,OAAAA,EAAUlmD,QAAUJ,GAAaC,EAAYomD,CAAU,EAChD,CACLA,WAAAA,EACAx4C,WAAYg3C,GAAW,EACvBmB,SAAAA,EACAM,UAAWzB,GAAW,CACxB,CACF,CACAqE,gBAAgB7C,EAAYpmD,EAAY,CACtC,IAAM+lD,EAAW,KAAKA,SACtB,GAAIK,EAAWjmD,QAAQ72G,OAAQ,CAC7B,IAAM4/J,EAAQnxD,GAAQquD,EAAWjmD,QAAS,CAAC,MAAM,CAAC,EAC9C+oD,GACFA,EAAMz9J,QAAS8W,GAAS,CACtB,IAAM4mJ,EAAWhmD,GAAU5gG,CAAI,EAC/B,GAAIomJ,GAAkB9wJ,KAAKsxJ,EAAS/lD,WAAW,EAAG,CAChD,IAAMrB,EAAMqnD,GAAiBD,EAAUnpD,CAAU,EAC7CzqE,EAAW4zH,EAAS3lD,gBAAkB,WAAapiF,OAAOw3F,kBAAoBuwC,EAAS3lD,cAAgB2lD,EAAS9lD,UAChH9tE,GAAY,OACdA,EAAWnU,OAAOw3F,mBAEpB,IAAMxlH,EAAU+1J,EAAS/1J,QACzB2yJ,EAAS5lD,QAAQptG,KAAK,CACpBwP,KAAMnP,EACN0sF,IAAK1sF,EAAQiiG,WACb4wD,IAAKlkD,EACLA,IAAAA,EACApiG,KAAM+kJ,GAAe2E,KACrB9zH,SAAAA,CACF,CAAC,CACH,SAAW,KAAK02B,OAAOq9F,uBAAyBH,EAAS/lD,YAAYxkB,WAAW,yBAAyB,EAAG,CAC1G,IAAMmjB,EAAMqnD,GAAiBD,EAAUnpD,CAAU,EACjD+lD,EAAS5lD,QAAQptG,KAAK,CACpBwP,KAAM4mJ,EAAS/1J,QACf0sF,IAAKqpE,EAAS/1J,QAAQiiG,WACtB4wD,IAAKlkD,EACLA,IAAAA,EACApiG,KAAM+kJ,GAAe6E,QACrBh0H,SAAUnU,OAAOw3F,iBACnB,CAAC,CACH,CACF,CAAC,CAEL,CACA,OAAOmtC,CACT,CACAO,eAAe/jJ,EAAMigI,EAASxiC,EAAY,CACxC,OAAO9qG,QAAQ2yC,OAAO,IAAIxzC,MAAM,wDAAwD,CAAC,CAC3F,CACAguF,SAAU,CACR,KAAKp2B,OAAS,KACd,KAAKklE,cAAgB,KACrB,KAAKi1B,WAAa,KAAKx4C,WAAa,KAAKm4C,SAAW,KAAK8C,SAAW,MACtE,CACF,EACA,SAASO,GAAiBD,EAAUnpD,EAAY,CAC9C,OAAOhW,GAAem/D,EAAS5lD,gBAAgB,EAAI4lD,EAAS5lD,iBAAmB4lD,EAAS9lD,UAAYrD,EAAampD,EAAS7lD,sBAAwB6lD,EAAS9lD,SAC7J,CACA,IAAMmmD,GAAN,KAAyB,CACvBr4J,YAAYovJ,EAAUt0F,EAAQu2E,EAAS,CACrC,KAAKA,QAAU,OACf,KAAKiO,UAAY,OACjB,KAAKjO,QAAUA,EACf,KAAKiO,UAAY,IAAI3f,GAAU7kE,EAAQ,CACrC8kE,mBAAoB,EACtB,CAAC,CACH,CACA04B,cAAcC,EAAe,CAC3B,OAAO,KAAKjZ,UAAUlkB,QAAQm9B,EAAe,KAAKlnB,QAAQh8I,IAAI8qB,OAAQ,KAAKkxH,QAAQpW,GAAG96G,OAAQy6G,GAAiBC,GAAG,CACpH,CAEA29B,iBAAiBxpD,EAAS5B,EAAa3/F,EAAU,CAC/C,IAAMgrJ,EAAUzpD,EAAQ5B,CAAW,EAAEryF,KACrC,GAAI09I,EAAQtgK,QAAU,GACpB,OAEF,IAAMogK,EAAgBE,EAAQ3xD,SAAS,GAAI2xD,EAAQtgK,OAASsgK,EAAQtgK,OAAS,EAAE,EACzEugK,EAAkBH,EAAcp4I,OAAOlR,MAAMspJ,EAAc/pD,WAAY+pD,EAAc/pD,WAAa+pD,EAAcpgK,MAAM,EAC5H,KAAKmgK,cAAcI,CAAe,EAAE90J,KAAM+0J,GAAoB,CAC5D,IAAMlV,EAAgB,IAAIt1I,WAAWwqJ,CAAe,EACpDF,EAAQn9J,IAAImoJ,EAAe,EAAE,EACxB,KAAKnE,UAAU53D,OAAO,GACzB,KAAKkxE,kBAAkB5pD,EAAS5B,EAAc,EAAG3/F,CAAQ,CAE7D,CAAC,CACH,CACAmrJ,kBAAkB5pD,EAAS5B,EAAa3/F,EAAU,CAChD,MAAS2/F,IAAe,CACtB,GAAIA,GAAe4B,EAAQ72G,OAAQ,CACjCsV,EAAS,EACT,MACF,CACA,GAAIuhG,EAAAA,EAAQ5B,CAAW,EAAEryF,KAAK5iB,OAAS,MAGvC,KAAKqgK,iBAAiBxpD,EAAS5B,EAAa3/F,CAAQ,EAChD,CAAC,KAAK6xI,UAAU53D,OAAO,GACzB,MAEJ,CACF,CAEAmxE,oBAAoBC,EAAa,CAC/B,IAAMC,EAAmB7hK,KAAKC,OAAO2hK,EAAY3gK,OAAS,IAAM,GAAG,EAAI,GAAK,GACtEogK,EAAgB,IAAIS,UAAUD,CAAgB,EAChDE,EAAY,EAChB,QAASC,EAAW,GAAIA,EAAWJ,EAAY3gK,OAAS,GAAI+gK,GAAY,IAAKD,GAAa,GACxFV,EAAcj9J,IAAIw9J,EAAYhyD,SAASoyD,EAAUA,EAAW,EAAE,EAAGD,CAAS,EAE5E,OAAOV,CACT,CACAY,oBAAoBL,EAAarV,EAAe,CAC9C,IAAM2V,EAAqB,IAAIjrJ,WAAWs1I,CAAa,EACnDyV,EAAW,EACf,QAASD,EAAY,GAAIA,EAAYH,EAAY3gK,OAAS,GAAI8gK,GAAa,IAAKC,GAAY,GAC1FJ,EAAYx9J,IAAI89J,EAAmBtyD,SAASoyD,EAAUA,EAAW,EAAE,EAAGD,CAAS,EAEjF,OAAOH,CACT,CACAO,iBAAiBrqD,EAAS5B,EAAaksD,EAAW7rJ,EAAUgrJ,EAAS,CACnE,IAAMK,EAAcjoD,GAAW4nD,EAAQrnJ,IAAI,EACrCmnJ,EAAgB,KAAKM,oBAAoBC,CAAW,EAC1D,KAAKR,cAAcC,EAAcp4I,MAAM,EAAEvc,KAAM+0J,GAAoB,CACjEF,EAAQrnJ,KAAO,KAAK+nJ,oBAAoBL,EAAaH,CAAe,EAC/D,KAAKrZ,UAAU53D,OAAO,GACzB,KAAK6xE,kBAAkBvqD,EAAS5B,EAAaksD,EAAY,EAAG7rJ,CAAQ,CAExE,CAAC,CACH,CACA8rJ,kBAAkBvqD,EAAS5B,EAAaksD,EAAW7rJ,EAAU,CAC3D,GAAIuhG,aAAmB7gG,WACrB,MAAM,IAAIjL,MAAM,2CAA2C,EAE7D,MAASkqG,IAAeksD,EAAY,EAAG,CACrC,GAAIlsD,GAAe4B,EAAQ72G,OAAQ,CACjCsV,EAAS,EACT,MACF,CACA,IAAM+rJ,EAAWxqD,EAAQ5B,CAAW,EAAEqsD,MACtC,KACMH,EAAAA,GAAaE,EAASrhK,QADnBmhK,IAAa,CAIpB,IAAMb,EAAUe,EAASF,CAAS,EAClC,GAAIb,EAAAA,EAAQrnJ,KAAKjZ,QAAU,IAAMsgK,EAAQjqJ,OAAS,GAAKiqJ,EAAQjqJ,OAAS,KAGxE,KAAK6qJ,iBAAiBrqD,EAAS5B,EAAaksD,EAAW7rJ,EAAUgrJ,CAAO,EACpE,CAAC,KAAKnZ,UAAU53D,OAAO,GACzB,MAEJ,CACF,CACF,CACF,EACMgyE,GAAN,KAAsB,CACpB15J,aAAc,CACZ,KAAK25J,YAAc,IACrB,CACAC,kBAAkBvkK,EAAKu7G,EAAKkkD,EAAK,CAC/B,MAAO,CACLz/J,IAAAA,EACAy8J,MAAO,GACPlhD,IAAAA,EACAkkD,IAAAA,EACA2E,MAAO,CAAA,EACPthK,OAAQ,CACV,CACF,CACA0hK,eAAe7qD,EAAS,CACtB,IAAI8qD,EACJ,IAAIH,EAAc,KAAKA,YACnBI,EAIJ,IAHI,CAACJ,GAAeA,EAAYF,MAAMthK,SAAW,KAC/CwhK,EAAc3qD,EAAQA,EAAQ72G,OAAS,CAAC,IAErC2hK,EAAeH,IAAgB,MAAQG,EAAaL,MAAO,CAC9D,IAAMA,EAAQE,EAAYF,MAC1BM,EAAWN,EAAMA,EAAMthK,OAAS,CAAC,CACnC,CACA,OAAO4hK,CACT,CACAC,eAAeL,EAAa1E,EAAY,CACtC,GAAI0E,EAAYF,MAAMthK,QAAUwhK,EAAY7H,MAAO,CACjD,GAAI6H,EAAY/oD,MAAQ,OAAQ,CAC9B,IAAM5B,EAAUimD,EAAWjmD,QACrBirD,EAAYjrD,EAAQ72G,OAC1B,GAAI8hK,EAAW,CACb,IAAMC,EAAalrD,EAAQirD,EAAY,CAAC,EACxCN,EAAY/oD,IAAMspD,EAAWtpD,IAC7B+oD,EAAY7E,IAAMoF,EAAWpF,GAC/B,KAAO,CACLG,EAAW7O,UACX,MACF,CACF,CACA6O,EAAWjmD,QAAQptG,KAAK+3J,CAAW,CACrC,CACF,CACAQ,UAAU//I,EAAOzK,EAAOyqJ,EAAc,CACpC,IAAMzrE,EAAMh/E,EAAMu0F,WACdhkF,EAAQ9F,EAAMigJ,WAAa,EACzBC,EAAYp6I,EACZu5I,EAAQ,CAAA,EACVvhK,EAAI,EACJ5C,EACAy+E,EACAwmF,EACAC,EAAgB,GAChBC,EAAe,EAOnB,IANIv6I,IAAU,KACZs6I,EAAgB,EAChBC,EAAe,KAAKC,YAAY/qJ,EAAO,CAAC,EACxCuQ,EAAQ,EACRhoB,EAAI,GAECA,EAAIy2F,GAAK,CAEd,GADAr5F,EAAQqa,EAAMzX,GAAG,EACb,CAACgoB,EAAO,CACVA,EAAQ5qB,EAAQ,EAAI,EACpB,QACF,CACA,GAAI4qB,IAAU,EAAG,CACfA,EAAQ5qB,EAAQ,EAAI,EACpB,QACF,CACA,GAAI,CAACA,EACH4qB,EAAQ,UACC5qB,IAAU,EAAG,CAEtB,GADAy+E,EAAW77E,EAAIgoB,EAAQ,EACnBs6I,GAAiB,EAAG,CACtB,IAAMz/I,EAAO,CACX3J,KAAMzB,EAAMm3F,SAAS0zD,EAAezmF,CAAQ,EAC5CvlE,KAAMisJ,CACR,EACAhB,EAAM73J,KAAKmZ,CAAI,CACjB,KAAO,CACL,IAAMg/I,EAAW,KAAKF,eAAez/I,EAAM40F,OAAO,EAC9C+qD,IACEO,GAAapiK,GAAK,EAAIoiK,GACpBP,EAAS75I,QACX65I,EAAS3oJ,KAAO2oJ,EAAS3oJ,KAAK01F,SAAS,EAAGizD,EAAS3oJ,KAAK8yF,WAAao2D,CAAS,GAG9EvmF,EAAW,IACbgmF,EAAS3oJ,KAAOq9F,GAAiBsrD,EAAS3oJ,KAAMzB,EAAMm3F,SAAS,EAAG/yB,CAAQ,CAAC,EAC3EgmF,EAAS75I,MAAQ,GAGvB,CACIhoB,EAAIy2F,GACN4rE,EAAW,KAAKG,YAAY/qJ,EAAOzX,CAAC,EACpCsiK,EAAgBtiK,EAChBuiK,EAAeF,EACfr6I,EAAQ,GAERA,EAAQ,EAEZ,MACEA,EAAQ,CAEZ,CACA,GAAIs6I,GAAiB,GAAKt6I,GAAS,EAAG,CACpC,IAAMnF,EAAO,CACX3J,KAAMzB,EAAMm3F,SAAS0zD,EAAe7rE,CAAG,EACvCngF,KAAMisJ,EACNv6I,MAAAA,CACF,EACAu5I,EAAM73J,KAAKmZ,CAAI,CACjB,CACA,GAAI0+I,EAAMthK,SAAW,EAAG,CACtB,IAAM4hK,EAAW,KAAKF,eAAez/I,EAAM40F,OAAO,EAC9C+qD,IACFA,EAAS3oJ,KAAOq9F,GAAiBsrD,EAAS3oJ,KAAMzB,CAAK,EAEzD,CACAyK,OAAAA,EAAMigJ,UAAYn6I,EACXu5I,CACT,CACF,EACMkB,GAAN,KAAgB,CACd36J,YAAYoR,EAAM,CAChB,KAAKA,KAAO,OACZ,KAAKwpJ,eAAiB,OACtB,KAAK78B,KAAO,OACZ,KAAK88B,cAAgB,OACrB,KAAKzpJ,KAAOA,EACZ,KAAKwpJ,eAAiBxpJ,EAAK8yF,WAC3B,KAAK65B,KAAO,EACZ,KAAK88B,cAAgB,CACvB,CAEAC,UAAW,CACT,IAAM1pJ,EAAO,KAAKA,KACZwpJ,EAAiB,KAAKA,eACtB51J,EAAWoM,EAAK8yF,WAAa02D,EAC7BG,EAAe,IAAI5sJ,WAAW,CAAC,EAC/B6sJ,EAAiB9jK,KAAKgmB,IAAI,EAAG09I,CAAc,EACjD,GAAII,IAAmB,EACrB,MAAM,IAAI93J,MAAM,oBAAoB,EAEtC63J,EAAaz/J,IAAI8V,EAAK01F,SAAS9hG,EAAUA,EAAWg2J,CAAc,CAAC,EACnE,KAAKj9B,KAAO,IAAIhrB,SAASgoD,EAAa56I,MAAM,EAAEu8G,UAAU,CAAC,EACzD,KAAKm+B,cAAgBG,EAAiB,EACtC,KAAKJ,gBAAkBI,CACzB,CAEAC,SAASzgJ,EAAO,CACd,IAAI0gJ,EACJ1gJ,EAAQtjB,KAAKgmB,IAAI1C,EAAO,KAAKogJ,eAAiB,EAAI,KAAKC,aAAa,EAChE,KAAKA,cAAgBrgJ,GACvB,KAAKujH,OAASvjH,EACd,KAAKqgJ,eAAiBrgJ,IAEtBA,GAAS,KAAKqgJ,cACdK,EAAY1gJ,GAAS,EACrBA,GAAS0gJ,GAAa,EACtB,KAAKN,gBAAkBM,EACvB,KAAKJ,SAAS,EACd,KAAK/8B,OAASvjH,EACd,KAAKqgJ,eAAiBrgJ,EAE1B,CAEA2gJ,SAASh8J,EAAM,CACb,IAAI63J,EAAO9/J,KAAKgmB,IAAI,KAAK29I,cAAe17J,CAAI,EACtCi8J,EAAO,KAAKr9B,OAAS,GAAKi5B,EAKhC,GAJI73J,EAAO,IACToE,GAAOjC,MAAM,yCAAyC,EAExD,KAAKu5J,eAAiB7D,EAClB,KAAK6D,cAAgB,EACvB,KAAK98B,OAASi5B,UACL,KAAK4D,eAAiB,EAC/B,KAAKE,SAAS,MAEd,OAAM,IAAI53J,MAAM,mBAAmB,EAGrC,OADA8zJ,EAAO73J,EAAO63J,EACVA,EAAO,GAAK,KAAK6D,cACZO,GAAQpE,EAAO,KAAKmE,SAASnE,CAAI,EAEjCoE,CAEX,CAEAC,QAAS,CACP,IAAIC,EACJ,IAAKA,EAAmB,EAAGA,EAAmB,KAAKT,cAAe,EAAES,EAClE,IAAK,KAAKv9B,KAAO,aAAeu9B,KAAsB,EACpD,YAAKv9B,OAASu9B,EACd,KAAKT,eAAiBS,EACfA,EAGX,YAAKR,SAAS,EACPQ,EAAmB,KAAKD,OAAO,CACxC,CAEAE,SAAU,CACR,KAAKN,SAAS,EAAI,KAAKI,OAAO,CAAC,CACjC,CAEAG,QAAS,CACP,KAAKP,SAAS,EAAI,KAAKI,OAAO,CAAC,CACjC,CAEAI,SAAU,CACR,IAAMC,EAAM,KAAKL,OAAO,EACxB,OAAO,KAAKF,SAASO,EAAM,CAAC,EAAI,CAClC,CAEAC,QAAS,CACP,IAAMP,EAAO,KAAKK,QAAQ,EAC1B,MAAI,GAAIL,EACC,EAAIA,IAAS,EAEb,IAAMA,IAAS,EAE1B,CAGAQ,aAAc,CACZ,OAAO,KAAKT,SAAS,CAAC,IAAM,CAC9B,CAEAU,WAAY,CACV,OAAO,KAAKV,SAAS,CAAC,CACxB,CAEAW,YAAa,CACX,OAAO,KAAKX,SAAS,EAAE,CACzB,CAEAY,UAAW,CACT,OAAO,KAAKZ,SAAS,EAAE,CACzB,CACF,EACMa,GAAN,cAA6BtC,EAAgB,CAC3CuC,SAAS7hJ,EAAO86I,EAAWgH,EAAK9B,EAAc,CAC5C,IAAMX,EAAQ,KAAKU,UAAU//I,EAAO8hJ,EAAI9qJ,KAAMgpJ,CAAY,EACtDT,EAAc,KAAKA,YACnBwC,EACAC,EAAW,GACfF,EAAI9qJ,KAAO,KACPuoJ,GAAeF,EAAMthK,QAAU,CAACiiB,EAAMiiJ,WACxC,KAAKrC,eAAeL,EAAav/I,CAAK,EACtCu/I,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAOsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEjF2E,EAAMn/J,QAASygB,GAAS,CACtB,IAAIuhJ,EAAeC,EACnB,OAAQxhJ,EAAKvM,KAAI,CAEf,IAAK,GAAG,CACN,IAAIguJ,EAAQ,GACZL,EAAQ,GACR,IAAM/qJ,EAAO2J,EAAK3J,KAClB,GAAIgrJ,GAAYhrJ,EAAKjZ,OAAS,EAAG,CAC/B,IAAMskK,EAAY,KAAKC,cAActrJ,CAAI,GACrCqrJ,IAAc,GAAKA,IAAc,GAAKA,IAAc,GAAKA,IAAc,KACzED,EAAQ,GAEZ,CACA,GAAIA,EAAO,CACT,IAAI1C,GACCA,EAAeH,IAAgB,MAAQG,EAAahI,OAAS,CAAC6H,EAAYtkK,MAC7E,KAAK2kK,eAAeL,EAAav/I,CAAK,EACtCu/I,EAAc,KAAKA,YAAc,KAErC,CACKA,IACHA,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAMsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEhF6E,EAAY7H,MAAQ,GACpB6H,EAAYtkK,IAAMmnK,EAClB,KACF,CACA,IAAK,GACHL,EAAQ,IACHG,EAAgB3C,IAAgB,MAAQ2C,EAAcxK,OAAS,CAAC6H,EAAYtkK,MAC/E,KAAK2kK,eAAeL,EAAav/I,CAAK,EACtCu/I,EAAc,KAAKA,YAAc,MAE9BA,IACHA,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAMsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEhF6E,EAAYtkK,IAAM,GAClBskK,EAAY7H,MAAQ,GACpB,MAEF,IAAK,GAAG,CACNqK,EAAQ,GACR7rD,GAAwBv1F,EAAK3J,KAAM,EAAG8qJ,EAAItrD,IAAKskD,EAAUlmD,OAAO,EAChE,KACF,CACA,IAAK,GAAG,CACN,IAAI2tD,EAAmBC,EACvBT,EAAQ,GACRC,EAAW,GACX,IAAMS,EAAM9hJ,EAAK3J,KACX0pD,EAAS,KAAKgiG,QAAQD,CAAG,EAC/B,GAAI,CAACziJ,EAAMyiJ,KAAOziJ,EAAM5c,QAAUs9D,EAAOt9D,OAAS4c,EAAM7c,SAAWu9D,EAAOv9D,UAAYo/J,EAAoBviJ,EAAM2iJ,aAAe,KAAO,OAASJ,EAAkB,CAAC,KAAO7hG,EAAOiiG,WAAW,CAAC,KAAOH,EAAqBxiJ,EAAM2iJ,aAAe,KAAO,OAASH,EAAmB,CAAC,KAAO9hG,EAAOiiG,WAAW,CAAC,EAAG,CAC5S3iJ,EAAM5c,MAAQs9D,EAAOt9D,MACrB4c,EAAM7c,OAASu9D,EAAOv9D,OACtB6c,EAAM2iJ,WAAajiG,EAAOiiG,WAC1B3iJ,EAAMyiJ,IAAM,CAACA,CAAG,EAChB,IAAMG,EAAaH,EAAI/1D,SAAS,EAAG,CAAC,EAChCm2D,EAAc,QAClB,QAAS/kK,EAAI,EAAGA,EAAI,EAAGA,IAAK,CAC1B,IAAIub,EAAIupJ,EAAW9kK,CAAC,EAAEkC,SAAS,EAAE,EAC7BqZ,EAAEtb,OAAS,IACbsb,EAAI,IAAMA,GAEZwpJ,GAAexpJ,CACjB,CACA2G,EAAM2uF,MAAQk0D,CAChB,CACA,KACF,CAEA,IAAK,GACHd,EAAQ,GACR/hJ,EAAM8iJ,IAAM,CAACniJ,EAAK3J,IAAI,EACtB,MAEF,IAAK,GACH+qJ,EAAQ,GACR/hJ,EAAMiiJ,SAAW,IACZE,EAAgB5C,IAAgB,MAAQ4C,EAAczK,QACzD,KAAKkI,eAAeL,EAAav/I,CAAK,EACtCu/I,EAAc,MAEXA,IACHA,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAOsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEjF,MAEF,IAAK,IACHqH,EAAQ,GACR,MACF,QACEA,EAAQ,GACR,KACJ,CACIxC,GAAewC,GACFxC,EAAYF,MACpB73J,KAAKmZ,CAAI,CAEpB,CAAC,EACGq/I,GAAgBT,IAClB,KAAKK,eAAeL,EAAav/I,CAAK,EACtC,KAAKu/I,YAAc,KAEvB,CACAe,YAAYtpJ,EAAMm1F,EAAQ,CACxB,OAAOn1F,EAAKm1F,CAAM,EAAI,EACxB,CACAm2D,cAActrJ,EAAM,CAClB,IAAM+rJ,EAAK,IAAIxC,GAAUvpJ,CAAI,EAC7B+rJ,OAAAA,EAAGtB,UAAU,EACbsB,EAAG1B,QAAQ,EACJ0B,EAAG1B,QAAQ,CACpB,CAOA2B,gBAAgB5iJ,EAAO6iJ,EAAQ,CAC7B,IAAIC,EAAY,EACZC,EAAY,EACZC,EACJ,QAAS9/G,EAAI,EAAGA,EAAIljC,EAAOkjC,IACrB6/G,IAAc,IAChBC,EAAaH,EAAO1B,OAAO,EAC3B4B,GAAaD,EAAYE,EAAa,KAAO,KAE/CF,EAAYC,IAAc,EAAID,EAAYC,CAE9C,CASAT,QAAQD,EAAK,CACX,IAAMM,EAAK,IAAIxC,GAAUkC,CAAG,EACxBY,EAAsB,EACtBC,EAAuB,EACvBC,EAAqB,EACrBC,EAAwB,EACxBC,EACAC,EACA5lK,EACE2jK,EAAYsB,EAAGtB,UAAUryJ,KAAK2zJ,CAAE,EAChChC,EAAWgC,EAAGhC,SAAS3xJ,KAAK2zJ,CAAE,EAC9B1B,EAAU0B,EAAG1B,QAAQjyJ,KAAK2zJ,CAAE,EAC5BvB,EAAcuB,EAAGvB,YAAYpyJ,KAAK2zJ,CAAE,EACpClC,EAAWkC,EAAGlC,SAASzxJ,KAAK2zJ,CAAE,EAC9B3B,EAAS2B,EAAG3B,OAAOhyJ,KAAK2zJ,CAAE,EAC1B5B,EAAU4B,EAAG5B,QAAQ/xJ,KAAK2zJ,CAAE,EAC5BC,EAAkB,KAAKA,gBAAgB5zJ,KAAK,IAAI,EACtDqyJ,EAAU,EACV,IAAMkC,EAAalC,EAAU,EAK7B,GAJAV,EAAS,CAAC,EACVF,EAAS,CAAC,EACVY,EAAU,EACVN,EAAQ,EACJwC,IAAe,KAAOA,IAAe,KAAOA,IAAe,KAAOA,IAAe,KAAOA,IAAe,IAAMA,IAAe,IAAMA,IAAe,IAAMA,IAAe,KAAOA,IAAe,IAAK,CACnM,IAAMC,EAAkBvC,EAAQ,EAOhC,GANIuC,IAAoB,GACtB/C,EAAS,CAAC,EAEZM,EAAQ,EACRA,EAAQ,EACRN,EAAS,CAAC,EACNW,EAAY,EAEd,IADAkC,EAAmBE,IAAoB,EAAI,EAAI,GAC1C9lK,EAAI,EAAGA,EAAI4lK,EAAkB5lK,IAC5B0jK,EAAY,IACV1jK,EAAI,EACNklK,EAAgB,GAAID,CAAE,EAEtBC,EAAgB,GAAID,CAAE,EAKhC,CACA5B,EAAQ,EACR,IAAM0C,EAAkBxC,EAAQ,EAChC,GAAIwC,IAAoB,EACtBxC,EAAQ,UACCwC,IAAoB,EAK7B,IAJAhD,EAAS,CAAC,EACVO,EAAO,EACPA,EAAO,EACPqC,EAAiCpC,EAAQ,EACpCvjK,EAAI,EAAGA,EAAI2lK,EAAgC3lK,IAC9CsjK,EAAO,EAGXD,EAAQ,EACRN,EAAS,CAAC,EACV,IAAMiD,EAAsBzC,EAAQ,EAC9B0C,EAA4B1C,EAAQ,EACpC2C,EAAmBjD,EAAS,CAAC,EAC/BiD,IAAqB,GACvBnD,EAAS,CAAC,EAEZA,EAAS,CAAC,EACNW,EAAY,IACd6B,EAAsBhC,EAAQ,EAC9BiC,EAAuBjC,EAAQ,EAC/BkC,EAAqBlC,EAAQ,EAC7BmC,EAAwBnC,EAAQ,GAElC,IAAIsB,EAAa,CAAC,EAAG,CAAC,EACtB,GAAInB,EAAY,GACVA,EAAY,EAEd,OADuBC,EAAU,EACX,CACpB,IAAK,GACHkB,EAAa,CAAC,EAAG,CAAC,EAClB,MACF,IAAK,GACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,GACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,GACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,GACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,GACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,GACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,GACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,GACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,IACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,IACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,IACHA,EAAa,CAAC,GAAI,EAAE,EACpB,MACF,IAAK,IACHA,EAAa,CAAC,IAAK,EAAE,EACrB,MACF,IAAK,IACHA,EAAa,CAAC,EAAG,CAAC,EAClB,MACF,IAAK,IACHA,EAAa,CAAC,EAAG,CAAC,EAClB,MACF,IAAK,IACHA,EAAa,CAAC,EAAG,CAAC,EAClB,MACF,IAAK,KAAK,CACRA,EAAa,CAAClB,EAAU,GAAK,EAAIA,EAAU,EAAGA,EAAU,GAAK,EAAIA,EAAU,CAAC,EAC5E,KACF,CACF,CAGJ,MAAO,CACLr+J,MAAOtG,KAAKsnB,MAAM0/I,EAAsB,GAAK,GAAKT,EAAsB,EAAIC,EAAuB,CAAC,EACpGngK,QAAS,EAAI6gK,IAAqBD,EAA4B,GAAK,IAAMC,EAAmB,EAAI,IAAMT,EAAqBC,GAC3Hb,WAAAA,CACF,CACF,CACF,EACMsB,GAAN,cAA8B3E,EAAgB,CAC5C15J,eAAeooB,EAAM,CACnB,MAAM,GAAGA,CAAI,EACb,KAAKk2I,QAAU,IACjB,CACArC,SAAS7hJ,EAAO86I,EAAWgH,EAAK9B,EAAc,CAC5C,IAAMX,EAAQ,KAAKU,UAAU//I,EAAO8hJ,EAAI9qJ,KAAMgpJ,CAAY,EACtDT,EAAc,KAAKA,YACnBwC,EACAC,EAAW,GACfF,EAAI9qJ,KAAO,KACPuoJ,GAAeF,EAAMthK,QAAU,CAACiiB,EAAMiiJ,WACxC,KAAKrC,eAAeL,EAAav/I,CAAK,EACtCu/I,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAOsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEjF2E,EAAMn/J,QAASygB,GAAS,CACtB,IAAIuhJ,EAAeC,EACnB,OAAQxhJ,EAAKvM,KAAI,CAEf,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACL,IAAK,GACEmrJ,IACHA,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAOsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEjF6E,EAAY7H,MAAQ,GACpBqK,EAAQ,GACR,MAEF,IAAK,IACL,IAAK,IACL,IAAK,IACL,IAAK,IAEH,GADAA,EAAQ,GACJC,EAAU,CACZ,IAAItC,GACCA,EAAeH,IAAgB,MAAQG,EAAahI,OAAS,CAAC6H,EAAYtkK,MAC7E,KAAK2kK,eAAeL,EAAav/I,CAAK,EACtCu/I,EAAc,KAAKA,YAAc,KAErC,CACKA,IACHA,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAMsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEhF6E,EAAYtkK,IAAM,GAClBskK,EAAY7H,MAAQ,GACpB,MAEF,IAAK,IACL,IAAK,IACHqK,EAAQ,IACHG,EAAgB3C,IAAgB,MAAQ2C,EAAcxK,OAAS,CAAC6H,EAAYtkK,MAC/E,KAAK2kK,eAAeL,EAAav/I,CAAK,EACtCu/I,EAAc,KAAKA,YAAc,MAE9BA,IACHA,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAMsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEhF6E,EAAYtkK,IAAM,GAClBskK,EAAY7H,MAAQ,GACpB,MAEF,IAAK,IACHqK,EAAQ,GACR7rD,GACEv1F,EAAK3J,KACL,EAEA8qJ,EAAItrD,IACJskD,EAAUlmD,OACZ,EACA,MAEF,IAAK,IACHmtD,EAAQ,GACH/hJ,EAAMmkJ,MACL,OAAOnkJ,EAAMrgB,QAAW,WAC1BqgB,EAAMrgB,OAAS,CAAC,GAElBqgB,EAAMrgB,OAASmiG,GAAS9hF,EAAMrgB,OAAQ,KAAKykK,QAAQzjJ,EAAK3J,IAAI,CAAC,EAC7D,KAAKktJ,QAAUvjJ,EAAK3J,MAEtBgJ,EAAMmkJ,IAAM,CAACxjJ,EAAK3J,IAAI,EACtB,MAEF,IAAK,IAOH,GANA+qJ,EAAQ,GACRC,EAAW,GACPhiJ,EAAMmkJ,MAAQ,QAAUnkJ,EAAMmkJ,IAAI,CAAC,IAAM,KAAKD,SAAWlkJ,EAAMyiJ,MAAQ,QAAU,CAAC,KAAK4B,SAASrkJ,EAAMyiJ,IAAI,CAAC,EAAG9hJ,EAAK3J,IAAI,IACzH,KAAKktJ,QAAUlkJ,EAAMmkJ,IAAI,CAAC,EAC1BnkJ,EAAMyiJ,IAAMziJ,EAAM8iJ,IAAM,QAEtB,CAAC9iJ,EAAMyiJ,IAAK,CACd,IAAM/hG,EAAS,KAAKgiG,QAAQ/hJ,EAAK3J,IAAI,EACrCgJ,EAAM5c,MAAQs9D,EAAOt9D,MACrB4c,EAAM7c,OAASu9D,EAAOv9D,OACtB6c,EAAM2iJ,WAAajiG,EAAOiiG,WAC1B3iJ,EAAM2uF,MAAQjuC,EAAO4jG,YACrBtkJ,EAAMyiJ,IAAM,CAAA,EACR,OAAOziJ,EAAMrgB,QAAW,WAC1BqgB,EAAMrgB,OAAS,CAAC,GAElB,QAAWoE,KAAQ28D,EAAO/gE,OACxBqgB,EAAMrgB,OAAOoE,CAAI,EAAI28D,EAAO/gE,OAAOoE,CAAI,CAE3C,CACA,KAAKwgK,iBAAiBvkJ,EAAMyiJ,IAAK9hJ,EAAK3J,KAAMgJ,EAAMmkJ,GAAG,EAChD5E,IACHA,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAMsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEhF6E,EAAYtkK,IAAM,GAClB,MAEF,IAAK,IAEH,GADA8mK,EAAQ,GACJ,OAAO/hJ,EAAMrgB,QAAW,SAAU,CACpC,GAAI,CAACqgB,EAAM8iJ,IAAK,CACd9iJ,EAAM8iJ,IAAM,CAAA,EACZ,IAAMpiG,EAAS,KAAK8jG,QAAQ7jJ,EAAK3J,IAAI,EACrC,QAAWjT,KAAQ28D,EACjB1gD,EAAMrgB,OAAOoE,CAAI,EAAI28D,EAAO38D,CAAI,CAEpC,CACA,KAAKwgK,iBAAiBvkJ,EAAM8iJ,IAAKniJ,EAAK3J,KAAMgJ,EAAMmkJ,GAAG,CACvD,CACA,MAEF,IAAK,IACHpC,EAAQ,GACR/hJ,EAAMiiJ,SAAW,IACZE,EAAgB5C,IAAgB,MAAQ4C,EAAczK,QACzD,KAAKkI,eAAeL,EAAav/I,CAAK,EACtCu/I,EAAc,MAEXA,IACHA,EAAc,KAAKA,YAAc,KAAKC,kBAAkB,GAAOsC,EAAItrD,IAAKsrD,EAAIpH,GAAG,GAEjF,MACF,QACEqH,EAAQ,GACR,KACJ,CACIxC,GAAewC,GACFxC,EAAYF,MACpB73J,KAAKmZ,CAAI,CAEpB,CAAC,EACGq/I,GAAgBT,IAClB,KAAKK,eAAeL,EAAav/I,CAAK,EACtC,KAAKu/I,YAAc,KAEvB,CACAgF,iBAAiBE,EAAeztJ,EAAMmtJ,EAAK,EACrCA,GAAOA,EAAI,CAAC,IAAM,KAAKD,SAAW,CAACC,GAAO,CAACM,EAAc1mK,SAC3D0mK,EAAcj9J,KAAKwP,CAAI,CAE3B,CACAspJ,YAAYtpJ,EAAMm1F,EAAQ,CACxB,OAAQn1F,EAAKm1F,CAAM,EAAI,OAAS,CAClC,CACAu4D,UAAUl6C,EAAK,CACb,IAAMm6C,EAAM,IAAI5wJ,WAAWy2G,EAAI1gB,UAAU,EACrC86D,EAAS,EACb,QAAS9mK,EAAI,EAAGA,EAAI0sH,EAAI1gB,WAAYhsG,IAC9BA,GAAK,GACH0sH,EAAI1sH,CAAC,IAAM,GAAK0sH,EAAI1sH,EAAI,CAAC,IAAM,GAAK0sH,EAAI1sH,EAAI,CAAC,IAAM,IAIzD6mK,EAAIC,CAAM,EAAIp6C,EAAI1sH,CAAC,EACnB8mK,KAEF,OAAO,IAAI7wJ,WAAW4wJ,EAAI5+I,OAAQ,EAAG6+I,CAAM,CAC7C,CACAhF,eAAeL,EAAa1E,EAAY,CACtC,MAAM+E,eAAeL,EAAa1E,CAAU,EACxC,KAAKqJ,UACP,KAAKA,QAAU,KAEnB,CACAE,QAAQD,EAAK,CACX,IAAMpB,EAAK,IAAIxC,GAAU4D,CAAG,EAC5BpB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGhC,SAAS,CAAC,EACbgC,EAAGlC,SAAS,CAAC,EACbkC,EAAGhC,SAAS,CAAC,EACb,IAAM8D,EAAwB9B,EAAGhC,SAAS,CAAC,EACrC+D,EAA2B/B,EAAGvB,YAAY,EAChD,MAAO,CACLuD,kBAAmBF,EAAwB,EAC3CG,iBAAkBF,CACpB,CACF,CACApC,QAAQD,EAAK,CACX,IAAMM,EAAK,IAAIxC,GAAU,KAAKmE,UAAUjC,CAAG,CAAC,EAC5CM,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGhC,SAAS,CAAC,EACb,IAAM8D,EAAwB9B,EAAGhC,SAAS,CAAC,EAC3CgC,EAAGvB,YAAY,EACf,IAAMyD,EAAwBlC,EAAGhC,SAAS,CAAC,EACrCmE,EAAoBnC,EAAGvB,YAAY,EACnC2D,EAAsBpC,EAAGhC,SAAS,CAAC,EACnCqE,EAAwCrC,EAAGtB,UAAU,EACrD4D,EAAwCtC,EAAGtB,UAAU,EACrD6D,EAAwCvC,EAAGtB,UAAU,EACrD8D,EAAwCxC,EAAGtB,UAAU,EACrD+D,EAAuCzC,EAAGtB,UAAU,EACpDgE,EAAuC1C,EAAGtB,UAAU,EACpDiE,EAAuC3C,EAAGtB,UAAU,EACpDkE,EAAuC5C,EAAGtB,UAAU,EACpDmE,EAAuC7C,EAAGtB,UAAU,EACpDoE,EAAuC9C,EAAGtB,UAAU,EACpDqE,EAAoB/C,EAAGtB,UAAU,EACjCsE,EAAkC,CAAA,EAClCC,EAAgC,CAAA,EACtC,QAASloK,GAAI,EAAGA,GAAI+mK,EAAuB/mK,KACzCioK,EAAgCv+J,KAAKu7J,EAAGvB,YAAY,CAAC,EACrDwE,EAA8Bx+J,KAAKu7J,EAAGvB,YAAY,CAAC,EAErD,GAAIqD,EAAwB,EAC1B,QAAS/mK,GAAI+mK,EAAuB/mK,GAAI,EAAGA,KACzCilK,EAAGhC,SAAS,CAAC,EAGjB,QAASjjK,GAAI,EAAGA,GAAI+mK,EAAuB/mK,KACrCioK,EAAgCjoK,EAAC,IACnCilK,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,GAEXuE,EAA8BloK,EAAC,GACjCilK,EAAGtB,UAAU,EAGjBsB,EAAG1B,QAAQ,EACX,IAAM4E,EAAoBlD,EAAG1B,QAAQ,EACjC4E,GAAqB,GACvBlD,EAAGlC,SAAS,CAAC,EAEf,IAAMqF,EAA4BnD,EAAG1B,QAAQ,EACvC8E,EAA6BpD,EAAG1B,QAAQ,EACxC+E,EAA0BrD,EAAGvB,YAAY,EAC3C6E,EAAkB,EAAGC,EAAmB,EAAGC,EAAiB,EAAGC,EAAoB,EACnFJ,IACFC,GAAmBtD,EAAG1B,QAAQ,EAC9BiF,GAAoBvD,EAAG1B,QAAQ,EAC/BkF,GAAkBxD,EAAG1B,QAAQ,EAC7BmF,GAAqBzD,EAAG1B,QAAQ,GAElC,IAAMoF,EAAwB1D,EAAG1B,QAAQ,EACnCqF,GAA0B3D,EAAG1B,QAAQ,EACrCsF,GAAoC5D,EAAG1B,QAAQ,EAC/CuF,GAAuC7D,EAAGvB,YAAY,EAC5D,QAAS1jK,GAAI8oK,GAAuC,EAAI/B,EAAuB/mK,IAAK+mK,EAAuB/mK,KACzGilK,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EASb,GAPA4B,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACuB4B,EAAGvB,YAAY,GAEJuB,EAAGvB,YAAY,EAExD,QAASqF,GAAS,EAAGA,GAAS,EAAGA,KAC/B,QAASC,GAAW,EAAGA,IAAYD,KAAW,EAAI,EAAI,GAAIC,KAExD,GAAI,CADgC/D,EAAGvB,YAAY,EAEjDuB,EAAG1B,QAAQ,MACN,CACL,IAAM0F,GAAUjqK,KAAKgmB,IAAI,GAAI,GAAK,GAAK+jJ,IAAU,EAAE,EAC/CA,GAAS,GACX9D,EAAGxB,OAAO,EAEZ,QAASzjK,GAAI,EAAGA,GAAIipK,GAASjpK,KAC3BilK,EAAGxB,OAAO,CAEd,CAKRwB,EAAGvB,YAAY,EACfuB,EAAGvB,YAAY,EACUuB,EAAGvB,YAAY,IAEtCuB,EAAGtB,UAAU,EACbsB,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACX4B,EAAGvB,YAAY,GAEjB,IAAMwF,EAA8BjE,EAAG1B,QAAQ,EAC3C4F,GAAiB,EACrB,QAASnpK,GAAI,EAAGA,GAAIkpK,EAA6BlpK,KAAK,CACpD,IAAIopK,GAAoC,GAIxC,GAHIppK,KAAM,IACRopK,GAAoCnE,EAAGvB,YAAY,GAEjD0F,GAAmC,CACjCppK,KAAMkpK,GACRjE,EAAG1B,QAAQ,EAEb0B,EAAGvB,YAAY,EACfuB,EAAG1B,QAAQ,EACX,IAAI8F,GAAsB,EAC1B,QAAS7jH,GAAI,EAAGA,IAAK2jH,GAAgB3jH,KAAK,CACxC,IAAM8jH,GAAwBrE,EAAGvB,YAAY,EACzC6F,GAAiB,GAChBD,KACHC,GAAiBtE,EAAGvB,YAAY,IAE9B4F,IAAyBC,KAC3BF,IAEJ,CACAF,GAAiBE,EACnB,KAAO,CACL,IAAMG,GAAoBvE,EAAG1B,QAAQ,EAC/BkG,GAAoBxE,EAAG1B,QAAQ,EACrC4F,GAAiBK,GAAoBC,GACrC,QAASjkH,GAAI,EAAGA,GAAIgkH,GAAmBhkH,KACrCy/G,EAAG1B,QAAQ,EACX0B,EAAGvB,YAAY,EAEjB,QAASl+G,GAAI,EAAGA,GAAIikH,GAAmBjkH,KACrCy/G,EAAG1B,QAAQ,EACX0B,EAAGvB,YAAY,CAEnB,CACF,CAEA,GADwCuB,EAAGvB,YAAY,EAClB,CACnC,IAAMgG,GAA6BzE,EAAG1B,QAAQ,EAC9C,QAASvjK,GAAI,EAAGA,GAAI0pK,GAA4B1pK,KAAK,CACnD,QAASwlD,GAAI,EAAGA,GAAIqjH,GAAoC,EAAGrjH,KACzDy/G,EAAGhC,SAAS,CAAC,EAEfgC,EAAGhC,SAAS,CAAC,CACf,CACF,CACA,IAAI0G,GAA+B,EAC/BC,EAAY,EAAGC,GAAa,EAC5BC,GAAY,GAAMC,GAAU,EAAGC,GAAU,EAC7C/E,EAAGvB,YAAY,EACfuB,EAAGvB,YAAY,EACf,IAAIuG,GAA8B,GAElC,GADoChF,EAAGvB,YAAY,EAClB,CAE/B,GADuCuB,EAAGvB,YAAY,EAClB,CAClC,IAAMwG,GAAmBjF,EAAGtB,UAAU,EAChCwG,GAAkB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,IAAK,EAAG,EAAG,CAAC,EAC9EC,GAAmB,CAAC,EAAG,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAG,EAAG,CAAC,EAChFF,GAAmB,GAAKA,GAAmB,IAC7CN,EAAYO,GAAgBD,GAAmB,CAAC,EAChDL,GAAaO,GAAiBF,GAAmB,CAAC,GACzCA,KAAqB,MAC9BN,EAAY3E,EAAGhC,SAAS,EAAE,EAC1B4G,GAAa5E,EAAGhC,SAAS,EAAE,EAE/B,CAgCA,GA/BmCgC,EAAGvB,YAAY,GAEhDuB,EAAGvB,YAAY,EAEsBuB,EAAGvB,YAAY,IAEpDuB,EAAGhC,SAAS,CAAC,EACbgC,EAAGvB,YAAY,EACyBuB,EAAGvB,YAAY,IAErDuB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,IAGoBsB,EAAGvB,YAAY,IAElDuB,EAAG1B,QAAQ,EACX0B,EAAG1B,QAAQ,GAEb0B,EAAGvB,YAAY,EACfuB,EAAGvB,YAAY,EACfuB,EAAGvB,YAAY,EACfuG,GAA8BhF,EAAGvB,YAAY,EACzCuG,KACF1B,GAAmBtD,EAAG1B,QAAQ,EAC9BiF,GAAoBvD,EAAG1B,QAAQ,EAC/BkF,GAAkBxD,EAAG1B,QAAQ,EAC7BmF,GAAqBzD,EAAG1B,QAAQ,GAEG0B,EAAGvB,YAAY,IAElDqG,GAAU9E,EAAGhC,SAAS,EAAE,EACxB+G,GAAU/E,EAAGhC,SAAS,EAAE,EACoBgC,EAAGvB,YAAY,GAEzDuB,EAAG1B,QAAQ,EAE2B0B,EAAGvB,YAAY,GAClB,CACnC,IAAM2G,GAAkCpF,EAAGvB,YAAY,EACjD4G,GAAkCrF,EAAGvB,YAAY,EACnD6G,GAAkC,IAClCF,IAAmCC,MACrCC,GAAkCtF,EAAGvB,YAAY,EAC7C6G,KACFtF,EAAGtB,UAAU,EACbsB,EAAGhC,SAAS,CAAC,EACbgC,EAAGvB,YAAY,EACfuB,EAAGhC,SAAS,CAAC,GAEfgC,EAAGhC,SAAS,CAAC,EACbgC,EAAGhC,SAAS,CAAC,EACTsH,IACFtF,EAAGhC,SAAS,CAAC,EAEfgC,EAAGhC,SAAS,CAAC,EACbgC,EAAGhC,SAAS,CAAC,EACbgC,EAAGhC,SAAS,CAAC,GAEf,QAASjjK,GAAI,EAAGA,IAAK+mK,EAAuB/mK,KAAK,CAC/C8pK,GAAY7E,EAAGvB,YAAY,EAC3B,IAAM8G,GAAiCV,IAAa7E,EAAGvB,YAAY,EAC/D+G,GAAqB,GACrBD,GACFvF,EAAGxB,OAAO,EAEVgH,GAAqBxF,EAAGvB,YAAY,EAEtC,IAAMgH,EAAUD,GAAqB,EAAIxF,EAAG1B,QAAQ,EAAI,EACxD,GAAI8G,GACF,QAAS7kH,EAAI,EAAGA,EAAIklH,EAASllH,IAC3By/G,EAAG1B,QAAQ,EACX0B,EAAG1B,QAAQ,EACPgH,KACFtF,EAAG1B,QAAQ,EACX0B,EAAG1B,QAAQ,GAEb0B,EAAGlC,SAAS,CAAC,EAGjB,GAAIuH,GACF,QAAS9kH,EAAI,EAAGA,EAAIklH,EAASllH,IAC3By/G,EAAG1B,QAAQ,EACX0B,EAAG1B,QAAQ,EACPgH,KACFtF,EAAG1B,QAAQ,EACX0B,EAAG1B,QAAQ,GAEb0B,EAAGlC,SAAS,CAAC,CAGnB,CACF,CAEiCkC,EAAGvB,YAAY,IAEhDuB,EAAGvB,YAAY,EACfuB,EAAGvB,YAAY,EACfuB,EAAGvB,YAAY,EACfiG,GAA+B1E,EAAG1B,QAAQ,EAE9C,CACA,IAAIj+J,GAAQ8iK,EAA2B/iK,GAASgjK,EAChD,GAAIC,GAA2B2B,GAA6B,CAC1D,IAAIU,GAAiB,EAAGC,GAAiB,EACrCzC,IAAsB,EACxBwC,GAAiBC,GAAiB,EACzBzC,GAAqB,IAC9BwC,GAAiB,GAEnBrlK,GAAQ8iK,EAA4BuC,GAAiBnC,EAAmBmC,GAAiBpC,EACzFljK,GAASgjK,EAA6BuC,GAAiBlC,EAAoBkC,GAAiBnC,CAC9F,CACA,IAAMoC,GAAuB1D,EAAwB,CAAC,IAAK,IAAK,GAAG,EAAEA,CAAqB,EAAI,GACxF2D,GAA4BxD,GAAyC,GAAKC,GAAyC,GAAKC,GAAyC,EAAIC,EACvKsD,GAA4B,EAChC,QAAS/qK,GAAI,EAAGA,GAAI,GAAIA,KACtB+qK,IAA6BA,IAA6BD,IAA6B9qK,GAAI,IAAM,GAAKA,MAAO,EAE/G,IAAIgrK,GAAqCD,GAA0B7oK,SAAS,EAAE,EAC9E,OAAImlK,IAAwB,GAAK2D,KAAuC,MACtEA,GAAqC,KAGhC,CACLxE,YAAa,QAAQqE,EAAoB,GAAGxD,CAAmB,IAAI2D,EAAkC,IAF9E5D,EAAoB,IAAM,GAEwE,GAAGY,CAAiB,MAC7InmK,OAAQ,CACNulK,kBAAAA,EACAC,oBAAAA,EACAF,sBAAAA,EACA8D,oCAAqC,CAAC3D,EAAuCC,EAAuCC,EAAuCC,CAAqC,EAChMyD,mCAAoC,CAACxD,EAAsCC,EAAsCC,EAAsCC,EAAsCC,EAAsCC,CAAoC,EACvQC,kBAAAA,EACAmD,UAAWxC,EAAwB,EACnCA,sBAAAA,EACAC,wBAAAA,GACAe,6BAAAA,GACAxB,kBAAAA,EACAiD,WAAY,CACVC,MAAOvB,GACPnkK,IAAKqkK,GAAUD,EACjB,CACF,EACAzkK,MAAAA,GACAD,OAAAA,GACAw/J,WAAY,CAAC+E,EAAWC,EAAU,CACpC,CACF,CACAnD,QAAQ1B,EAAK,CACX,IAAMC,EAAK,IAAIxC,GAAU,KAAKmE,UAAU5B,CAAG,CAAC,EAC5CC,EAAGtB,UAAU,EACbsB,EAAGtB,UAAU,EACbsB,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACX4B,EAAGlC,SAAS,CAAC,EACbkC,EAAGlC,SAAS,CAAC,EACbkC,EAAGlC,SAAS,CAAC,EACbkC,EAAG5B,QAAQ,EACX4B,EAAG5B,QAAQ,EACX4B,EAAG3B,OAAO,EACV2B,EAAGlC,SAAS,CAAC,EACoBkC,EAAGvB,YAAY,GAE9CuB,EAAG5B,QAAQ,EAEb4B,EAAG3B,OAAO,EACV2B,EAAG3B,OAAO,EACV2B,EAAGlC,SAAS,CAAC,EACb,IAAMuI,EAAqBrG,EAAGvB,YAAY,EACpC6H,EAAmCtG,EAAGvB,YAAY,EACpD8H,EAAkB,EACtB,OAAID,GAAoCD,EACtCE,EAAkB,EACTD,EACTC,EAAkB,EACTF,IACTE,EAAkB,GAEb,CACLA,gBAAAA,CACF,CACF,CACAjF,SAASkF,EAAMC,EAAM,CACnB,OAAOjlK,OAAOqM,aAAalD,MAAM,KAAM67J,CAAI,EAAEttJ,OAAO,CAAC,IAAM1X,OAAOqM,aAAalD,MAAM,KAAM87J,CAAI,EAAEvtJ,OAAO,CAAC,CAC3G,CACF,EACMwtJ,GAAgB,IAChBC,GAAN,MAAMA,CAAU,CACd9jK,YAAYovJ,EAAUt0F,EAAQipG,EAAepnE,EAAS,CACpD,KAAKp5F,OAAS,OACd,KAAK6rJ,SAAW,OAChB,KAAKt0F,OAAS,OACd,KAAKipG,cAAgB,OACrB,KAAKC,UAAY,KACjB,KAAKC,UAAY,GACjB,KAAK5pD,WAAa,OAClB,KAAK9C,WAAa,OAClB,KAAK2sD,OAAS,GACd,KAAKC,YAAc,OACnB,KAAKrQ,YAAc,OACnB,KAAKC,UAAY,OACjB,KAAKqQ,UAAY,OACjB,KAAKC,YAAc,KACnB,KAAKrkC,cAAgB,KACrB,KAAKskC,YAAc,OACnB,KAAKlV,SAAWA,EAChB,KAAKt0F,OAASA,EACd,KAAKipG,cAAgBA,EACrB,KAAKxgK,OAASo5F,EACd,KAAK2nE,YAAc,IACrB,CACA,OAAO5N,MAAMtlJ,EAAMurF,EAAS,CAC1B,IAAM4nE,EAAaT,EAAUS,WAAWnzJ,CAAI,EAC5C,OAAImzJ,EAAa,GACf5nE,EAAQv7F,KAAK,wDAAwDmjK,CAAU,EAAE,EAE5EA,IAAe,EACxB,CACA,OAAOA,WAAWnzJ,EAAM,CACtB,IAAMjZ,EAASiZ,EAAKjZ,OAChBqsK,EAAattK,KAAKgmB,IAAI2mJ,GAAgB,EAAG1rK,EAAS0rK,EAAa,EAAI,EACnE3rK,EAAI,EACR,KAAOA,EAAIssK,GAAY,CACrB,IAAIC,EAAW,GACXC,EAAc,GACdC,EAAY,EAChB,QAASjnH,EAAIxlD,EAAGwlD,EAAIvlD,EAAQulD,GAAKmmH,GAC/B,GAAIzyJ,EAAKssC,CAAC,IAAM,KAAOvlD,EAASulD,IAAMmmH,IAAiBzyJ,EAAKssC,EAAImmH,EAAa,IAAM,KAWjF,GAVAc,IACID,IAAgB,KAClBA,EAAchnH,EACVgnH,IAAgB,IAClBF,EAAattK,KAAKgmB,IAAIwnJ,EAAcb,GAAgB,GAAIzyJ,EAAKjZ,OAAS0rK,EAAa,EAAI,IAGtFY,IACHA,EAAWG,GAASxzJ,EAAMssC,CAAC,IAAM,GAE/B+mH,GAAYE,EAAY,IAAMD,IAAgB,GAAKC,EAAY,GAAKjnH,EAAImmH,GAAgBW,GAC1F,OAAOE,MAEJ,IAAIC,EACT,MAAO,GAEP,MAGJzsK,GACF,CACA,MAAO,EACT,CAIA,OAAO2sK,YAAYr2J,EAAM41B,EAAU,CACjC,MAAO,CACL1/B,UAAW8J,IAAS,SAAWA,IAAS,QAAU,aAAe,OACjEA,KAAAA,EACA6G,GAAI8wF,GAAqB33F,CAAI,EAC7BmlJ,IAAK,GACLD,eAAgB,IAChBE,eAAgB,EAChB5kD,QAAS,CAAA,EACTo3C,QAAS,EACThiH,SAAU51B,IAAS,QAAU41B,EAAW,MAC1C,CACF,CAKA+vH,iBAAiBrwD,EAAauW,EAAY9C,EAAY68C,EAAe,CACnE,KAAK6P,UAAY,GACjB,KAAKC,OAAS,GACd,KAAKC,YAAcL,EAAUe,YAAY,OAAO,EAChD,KAAKV,YAAY//H,SAAWgwH,EAC5B,KAAKN,YAAcgQ,EAAUe,YAAY,QAASzQ,CAAa,EAC/D,KAAKL,UAAY+P,EAAUe,YAAY,KAAK,EAC5C,KAAKT,UAAYN,EAAUe,YAAY,MAAM,EAC7C,KAAK/Q,YAAY8C,aAAe,MAChC,KAAKyN,YAAc,KACnB,KAAKrkC,cAAgB,KACrB,KAAK3lB,WAAaA,EAClB,KAAK9C,WAAaA,CACpB,CACA88C,gBAAiB,CACjB,CACAE,iBAAkB,CAChB,GAAM,CACJT,YAAAA,EACAqQ,YAAAA,EACApQ,UAAAA,CACF,EAAI,KACAD,IACFA,EAAYgR,QAAU,MAEpBX,IACFA,EAAYW,QAAU,MAEpB/Q,IACFA,EAAU+Q,QAAU,MAEtB,KAAKT,YAAc,KACnB,KAAKrkC,cAAgB,IACvB,CACA00B,MAAMtjJ,EAAMy9F,EAAYk2D,EAAc,GAAOhjJ,EAAQ,GAAO,CACrDgjJ,IACH,KAAKf,UAAY,MAEnB,IAAI9H,EACEjH,EAAa,KAAKkP,YAClB1nD,EAAa,KAAKq3C,YAClBc,EAAW,KAAKb,UAChBmB,EAAY,KAAKkP,UACnBY,EAAW/P,EAAWtB,IACtB5kD,EAAYkmD,EAAW6P,QACvBG,EAAWxoD,EAAWk3C,IACtBuR,EAAStQ,EAASjB,IAClBwR,EAAY1oD,EAAWqoD,QACvBhS,EAAU8B,EAASkQ,QACnBM,EAAa,KACbnB,EAAY,KAAKA,UACjBoB,EAAQ,KAAKnB,OACbv1E,EAAMv9E,EAAKjZ,OAMf,GALI,KAAK6nI,gBACP5uH,EAAOq9F,GAAiB,KAAKuxB,cAAe5uH,CAAI,EAChDu9E,EAAMv9E,EAAKjZ,OACX,KAAK6nI,cAAgB,MAEnBrxC,EAAMk1E,IAAiB,CAAC9hJ,EAC1B,YAAKi+G,cAAgB5uH,EACd,CACLqrG,WAAAA,EACAw4C,WAAAA,EACAL,SAAAA,EACAM,UAAAA,CACF,EAEF,IAAMqP,EAAartK,KAAKwG,IAAI,EAAGomK,EAAUS,WAAWnzJ,CAAI,CAAC,EACzDu9E,IAAQA,EAAM41E,GAAcV,GACxBl1E,EAAMv9E,EAAK8yF,YAAc,CAACniF,IAC5B,KAAKi+G,cAAgB,IAAI7xH,WAAWiD,EAAK+O,OAAQwuE,EAAKv9E,EAAK+O,OAAO+jF,WAAavV,CAAG,GAEpF,IAAI22E,EAAiB,EACrB,QAASxvJ,EAAQyuJ,EAAYzuJ,EAAQ64E,EAAK74E,GAAS+tJ,GACjD,GAAIzyJ,EAAK0E,CAAK,IAAM,GAAI,CACtB,IAAMyvJ,EAAM,CAAC,EAAEn0J,EAAK0E,EAAQ,CAAC,EAAI,IAC3B69I,EAAMiR,GAASxzJ,EAAM0E,CAAK,EAC1B0vJ,GAAOp0J,EAAK0E,EAAQ,CAAC,EAAI,KAAO,EAClCywF,EACJ,GAAIi/D,EAAM,GAER,GADAj/D,EAASzwF,EAAQ,EAAI1E,EAAK0E,EAAQ,CAAC,EAC/BywF,IAAWzwF,EAAQ+tJ,GACrB,cAGFt9D,EAASzwF,EAAQ,EAEnB,OAAQ69I,EAAG,CACT,KAAKqR,EACH,GAAIO,EAAK,CACP,GAAIx2D,IAAcmtD,EAAMD,GAASltD,EAAW,KAAKxrG,MAAM,GAAI,CACzD,GAAI,KAAK+gK,cAAgB,KACvB,OAAQrP,EAAW2B,aAAY,CAC7B,IAAK,MACH,KAAK0N,YAAc,IAAItI,GACvB,MACF,IAAK,OAED,KAAKsI,YAAc,IAAIjG,GAEzB,KACJ,CAEE,KAAKiG,cAAgB,MACvB,KAAKA,YAAYrI,SAAShH,EAAYC,EAAWgH,EAAK,EAAK,CAE/D,CACAntD,EAAY,CACV39F,KAAM,CAAA,EACNjS,KAAM,CACR,CACF,CACI4vG,IACFA,EAAU39F,KAAKxP,KAAKwP,EAAK01F,SAASP,EAAQzwF,EAAQ+tJ,EAAa,CAAC,EAChE90D,EAAU5vG,MAAQ2W,EAAQ+tJ,GAAgBt9D,GAE5C,MACF,KAAK0+D,EACH,GAAIM,EAAK,CACP,GAAIJ,IAAcjJ,EAAMD,GAASkJ,EAAW,KAAK5hK,MAAM,GACrD,OAAQk5G,EAAWm6C,aAAY,CAC7B,IAAK,MACH,KAAK6O,YAAYhpD,EAAYy/C,CAAG,EAChC,MACF,IAAK,MACH,KAAKwJ,aAAajpD,EAAYy/C,CAAG,EACjC,MACF,IAAK,MAED,KAAKyJ,YAAYlpD,EAAYy/C,CAAG,EAElC,KACJ,CAEFiJ,EAAY,CACV/zJ,KAAM,CAAA,EACNjS,KAAM,CACR,CACF,CACIgmK,IACFA,EAAU/zJ,KAAKxP,KAAKwP,EAAK01F,SAASP,EAAQzwF,EAAQ+tJ,EAAa,CAAC,EAChEsB,EAAUhmK,MAAQ2W,EAAQ+tJ,GAAgBt9D,GAE5C,MACF,KAAK2+D,EACCK,IACEzS,IAAYoJ,EAAMD,GAASnJ,EAAS,KAAKvvJ,MAAM,IACjD,KAAKqiK,YAAYhR,EAAUsH,CAAG,EAEhCpJ,EAAU,CACR1hJ,KAAM,CAAA,EACNjS,KAAM,CACR,GAEE2zJ,IACFA,EAAQ1hJ,KAAKxP,KAAKwP,EAAK01F,SAASP,EAAQzwF,EAAQ+tJ,EAAa,CAAC,EAC9D/Q,EAAQ3zJ,MAAQ2W,EAAQ+tJ,GAAgBt9D,GAE1C,MACF,IAAK,GACCg/D,IACFh/D,GAAUn1F,EAAKm1F,CAAM,EAAI,GAE3B8+D,EAAQ,KAAKnB,OAAS2B,GAASz0J,EAAMm1F,CAAM,EAC3C,MACF,KAAK8+D,EAAO,CACNE,IACFh/D,GAAUn1F,EAAKm1F,CAAM,EAAI,GAE3B,IAAMu/D,EAAaC,GAAS30J,EAAMm1F,EAAQ,KAAKw9D,cAAegB,EAAa,KAAK3V,SAAU,KAAK7rJ,MAAM,EACrGyhK,EAAWc,EAAWd,SAClBA,EAAW,IACb/P,EAAWtB,IAAMqR,EACjB/P,EAAW2B,aAAekP,EAAWE,mBAEvCf,EAAWa,EAAWb,SAClBA,EAAW,IACbxoD,EAAWk3C,IAAMsR,EACjBxoD,EAAWm6C,aAAekP,EAAWG,mBAEvCf,EAASY,EAAWZ,OAChBA,EAAS,IACXtQ,EAASjB,IAAMuR,GAEbE,IAAe,MAAQ,CAACnB,IAC1B,KAAK1gK,OAAOnC,KAAK,wBAAwB0U,CAAK,uBAAuBsvJ,CAAU,iCAAiCb,CAAU,2BAA2B,EACrJa,EAAa,KACbtvJ,EAAQyuJ,EAAa,KAEvBN,EAAY,KAAKA,UAAY,GAC7B,KACF,CACA,IAAK,IACL,IAAK,MACH,MACF,QACEmB,EAAazR,EACb,KACJ,CACF,MACE2R,IAGAA,EAAiB,GACnBY,GAAiB,KAAK9W,SAAU,IAAIlsJ,MAAM,SAASoiK,CAAc,0CAA0C,EAAG,OAAQ,KAAK/hK,MAAM,EAEnI0xJ,EAAW6P,QAAU/1D,EACrB0N,EAAWqoD,QAAUK,EACrBvQ,EAASkQ,QAAUhS,EACnB,IAAMqT,EAAc,CAClB1pD,WAAAA,EACAw4C,WAAAA,EACAL,SAAAA,EACAM,UAAAA,CACF,EACA,OAAInzI,GACF,KAAKqkJ,wBAAwBD,CAAW,EAEnCA,CACT,CACApkJ,OAAQ,CACN,GAAM,CACJi+G,cAAAA,CACF,EAAI,KACJ,KAAKA,cAAgB,KACrB,IAAI/nI,EAYJ,OAXI+nI,EACF/nI,EAAS,KAAKy8J,MAAM10B,EAAe,GAAI,GAAO,EAAI,EAElD/nI,EAAS,CACPg9J,WAAY,KAAKkP,YACjB1nD,WAAY,KAAKq3C,YACjBc,SAAU,KAAKb,UACfmB,UAAW,KAAKkP,SAClB,EAEF,KAAKgC,wBAAwBnuK,CAAM,EAC/B,KAAK+rK,UACA,KAAK5oC,QAAQnjI,EAAQ,KAAK+rK,SAAS,EAErC/rK,CACT,CACAmuK,wBAAwBD,EAAa,CACnC,GAAM,CACJ1pD,WAAAA,EACAw4C,WAAAA,EACAL,SAAAA,EACAM,UAAAA,CACF,EAAIiR,EACEp3D,EAAYkmD,EAAW6P,QACvBK,EAAY1oD,EAAWqoD,QACvBhS,EAAU8B,EAASkQ,QACrB5I,EACJ,GAAIntD,IAAcmtD,EAAMD,GAASltD,EAAW,KAAKxrG,MAAM,GAAI,CACzD,GAAI,KAAK+gK,cAAgB,KACvB,OAAQrP,EAAW2B,aAAY,CAC7B,IAAK,MACH,KAAK0N,YAAc,IAAItI,GACvB,MACF,IAAK,OAED,KAAKsI,YAAc,IAAIjG,GAEzB,KACJ,CAEE,KAAKiG,cAAgB,OACvB,KAAKA,YAAYrI,SAAShH,EAAYC,EAAWgH,EAAK,EAAI,EAC1DjH,EAAW6P,QAAU,KAEzB,MACE7P,EAAW6P,QAAU/1D,EAEvB,GAAIo2D,IAAcjJ,EAAMD,GAASkJ,EAAW,KAAK5hK,MAAM,GAAI,CACzD,OAAQk5G,EAAWm6C,aAAY,CAC7B,IAAK,MACH,KAAK6O,YAAYhpD,EAAYy/C,CAAG,EAChC,MACF,IAAK,MACH,KAAKwJ,aAAajpD,EAAYy/C,CAAG,EACjC,MACF,IAAK,MAED,KAAKyJ,YAAYlpD,EAAYy/C,CAAG,EAElC,KACJ,CACAz/C,EAAWqoD,QAAU,IACvB,MACMK,GAAa,MAAQA,EAAUhmK,MACjC,KAAKoE,OAAOpC,IAAI,+DAA+D,EAEjFs7G,EAAWqoD,QAAUK,EAEnBrS,IAAYoJ,EAAMD,GAASnJ,EAAS,KAAKvvJ,MAAM,IACjD,KAAKqiK,YAAYhR,EAAUsH,CAAG,EAC9BtH,EAASkQ,QAAU,MAEnBlQ,EAASkQ,QAAUhS,CAEvB,CACAqC,eAAe/jJ,EAAMigI,EAASxiC,EAAY,CACxC,IAAMs3D,EAAc,KAAKzR,MAAMtjJ,EAAMy9F,EAAY,GAAM,CAAC,KAAK/zC,OAAOgqF,WAAW,EACzEkf,EAAY,KAAKA,UAAY,IAAI3L,GAAmB,KAAKjJ,SAAU,KAAKt0F,OAAQu2E,CAAO,EAC7F,OAAO,KAAKjW,QAAQ+qC,EAAanC,CAAS,CAC5C,CACA5oC,QAAQ+qC,EAAanC,EAAW,CAC9B,OAAO,IAAIjgK,QAASC,GAAY,CAC9B,GAAM,CACJy4G,WAAAA,EACAw4C,WAAAA,CACF,EAAIkR,EACA1pD,EAAWzN,SAAWyN,EAAWm6C,eAAiB,MACpDoN,EAAUpL,kBAAkBn8C,EAAWzN,QAAS,EAAG,IAAM,CACnDimD,EAAWjmD,QACbg1D,EAAUzK,kBAAkBtE,EAAWjmD,QAAS,EAAG,EAAG,IAAM,CAC1DhrG,EAAQmiK,CAAW,CACrB,CAAC,EAEDniK,EAAQmiK,CAAW,CAEvB,CAAC,EACQlR,EAAWjmD,SACpBg1D,EAAUzK,kBAAkBtE,EAAWjmD,QAAS,EAAG,EAAG,IAAM,CAC1DhrG,EAAQmiK,CAAW,CACrB,CAAC,CAEL,CAAC,CACH,CACAj1E,SAAU,CACJ,KAAKk+D,UACP,KAAKA,SAAS9/D,mBAAmB,EAEnC,KAAKx0B,OAAS,KAAKv3D,OAAS,KAAK6rJ,SAAW,KAC5C,KAAKiV,YAAc,KAAKC,YAAc,KAAKtkC,cAAgB,KAAKgkC,UAAY,KAC5E,KAAKG,YAAc,KAAKrQ,YAAc,KAAKC,UAAY,KAAKqQ,UAAY,MAC1E,CACAqB,YAAYrrJ,EAAO8hJ,EAAK,CACtB,IAAI/Y,EAAc,EACZkhB,EAAc,KAAKA,YACrBjzJ,EAAO8qJ,EAAI9qJ,KACf,GAAIizJ,EAAa,CACf,KAAKA,YAAc,KACnB,IAAMgC,EAAoBhC,EAAYrT,QAChCsV,EAAejC,EAAYhqE,OAAOt/E,KAAKmpF,WAC7C,GAAImiE,IAAsB,GACxBj1J,EAAOq9F,GAAiB41D,EAAYhqE,OAAOt/E,KAAM3J,CAAI,MAChD,CACL,IAAMm1J,EAAqBD,EAAeD,EAC1ChC,EAAYhqE,OAAOt/E,KAAKzf,IAAI8V,EAAK01F,SAAS,EAAGu/D,CAAiB,EAAGE,CAAkB,EACnFnsJ,EAAM40F,QAAQptG,KAAKyiK,EAAYhqE,MAAM,EACrC8oD,EAAckhB,EAAYrT,OAC5B,CACF,CACA,IAAIzqD,EACA5X,EACJ,IAAK4X,EAAS48C,EAAax0D,EAAMv9E,EAAKjZ,OAAQouG,EAAS5X,EAAM,GACvDshE,CAAAA,GAAW7+I,EAAMm1F,CAAM,EADmCA,IAC9D,CAIF,GAAIA,IAAW48C,EAAa,CAC1B,IAAIhgH,EACEqjI,EAAcjgE,EAAS5X,EAAM,EAOnC,GANI63E,EACFrjI,EAAS,iDAAiDojE,CAAM,GAEhEpjE,EAAS,kCAEX+iI,GAAiB,KAAK9W,SAAU,IAAIlsJ,MAAMigC,CAAM,EAAGqjI,EAAa,KAAKjjK,MAAM,EACvE,CAACijK,EACH,MAEJ,CACAjW,GAAgBn2I,EAAO,KAAKg1I,SAAUh+I,EAAMm1F,EAAQ,KAAK8T,UAAU,EACnE,IAAIzJ,EACJ,GAAIsrD,EAAItrD,MAAQ,OACdA,EAAMsrD,EAAItrD,YACDyzD,EAAa,CACtB,IAAMzT,EAAgBJ,GAAiBp2I,EAAMu1I,UAAU,EACvD/+C,EAAMyzD,EAAYhqE,OAAOuW,IAAMggD,CACjC,KAAO,CACL,KAAKrtJ,OAAOnC,KAAK,kCAAkC,EACnD,MACF,CACA,IAAIuvJ,EAAa,EACbmB,EACJ,KAAOvrD,EAAS5X,GAGd,GAFAmjE,EAAQpB,GAAct2I,EAAOhJ,EAAMm1F,EAAQqK,EAAK+/C,CAAU,EAC1DpqD,GAAUurD,EAAM35J,OACX25J,EAAMd,QAOJ,CACL,KAAKqT,YAAcvS,EACnB,KACF,KARE,KADAnB,IACOpqD,EAAS5X,EAAM,GAChBshE,CAAAA,GAAW7+I,EAAMm1F,CAAM,EADJA,IACvB,CASR,CACAm/D,aAAatrJ,EAAO8hJ,EAAK,CACvB,IAAM9qJ,EAAO8qJ,EAAI9qJ,KACXjZ,EAASiZ,EAAKjZ,OAChBw4J,EAAa,EACbpqD,EAAS,EACPqK,EAAMsrD,EAAItrD,IAChB,GAAIA,IAAQ,OAAQ,CAClB,KAAKrtG,OAAOnC,KAAK,mCAAmC,EACpD,MACF,CACA,KAAOmlG,EAASpuG,GACd,GAAIs+J,GAASrlJ,EAAMm1F,CAAM,EAAG,CAC1B,IAAMurD,EAAQ4D,GAAct7I,EAAOhJ,EAAMm1F,EAAQqK,EAAK+/C,CAAU,EAChE,GAAImB,EACFvrD,GAAUurD,EAAM35J,OAChBw4J,QAEA,MAEJ,MACEpqD,GAGN,CACAo/D,YAAYvrJ,EAAO8hJ,EAAK,CACtB,CACE,IAAM9qJ,EAAO8qJ,EAAI9qJ,KACXw/F,EAAMsrD,EAAItrD,IAChB,GAAIA,IAAQ,OAAQ,CAClB,KAAKrtG,OAAOnC,KAAK,kCAAkC,EACnD,MACF,CACA,IAAMjJ,EAASiZ,EAAKjZ,OAChBw4J,EAAa,EACbpqD,EAAS,EACT+/B,EACJ,KAAO//B,EAASpuG,IAAWmuI,EAASmuB,GAAYr6I,EAAOhJ,EAAMm1F,EAAQqK,EAAK+/C,GAAY,GAAK,GACzFpqD,GAAU+/B,CAEd,CACF,CACAs/B,YAAYhR,EAAUsH,EAAK,CACzB,GAAIA,EAAItrD,MAAQ,OAAQ,CACtB,KAAKrtG,OAAOnC,KAAK,kCAAkC,EACnD,MACF,CACA,IAAMqlK,EAAYvqE,GAAS,CAAC,EAAGggE,EAAK,CAClC1tJ,KAAM,KAAK21J,YAAc5Q,GAAe2E,KAAO3E,GAAewB,SAC9D3wH,SAAUnU,OAAOw3F,iBACnB,CAAC,EACDmtC,EAAS5lD,QAAQptG,KAAK6kK,CAAS,CACjC,CACF,EACA,SAAS7B,GAASxzJ,EAAMm1F,EAAQ,CAC9B,QAASn1F,EAAKm1F,EAAS,CAAC,EAAI,KAAO,GAAKn1F,EAAKm1F,EAAS,CAAC,CACzD,CACA,SAASs/D,GAASz0J,EAAMm1F,EAAQ,CAC9B,OAAQn1F,EAAKm1F,EAAS,EAAE,EAAI,KAAO,EAAIn1F,EAAKm1F,EAAS,EAAE,CACzD,CACA,SAASw/D,GAAS30J,EAAMm1F,EAAQw9D,EAAegB,EAAa3V,EAAUzyD,EAAS,CAC7E,IAAM1kG,EAAS,CACbgtK,SAAU,GACVD,SAAU,GACVE,OAAQ,GACRc,kBAAmB,MACnBC,kBAAmB,KACrB,EACMS,GAAiBt1J,EAAKm1F,EAAS,CAAC,EAAI,KAAO,EAAIn1F,EAAKm1F,EAAS,CAAC,EAC9DogE,EAAWpgE,EAAS,EAAImgE,EAAgB,EACxCE,GAAqBx1J,EAAKm1F,EAAS,EAAE,EAAI,KAAO,EAAIn1F,EAAKm1F,EAAS,EAAE,EAE1E,IADAA,GAAU,GAAKqgE,EACRrgE,EAASogE,GAAU,CACxB,IAAMhT,EAAMiR,GAASxzJ,EAAMm1F,CAAM,EAC3BsgE,GAAgBz1J,EAAKm1F,EAAS,CAAC,EAAI,KAAO,EAAIn1F,EAAKm1F,EAAS,CAAC,EACnE,OAAQn1F,EAAKm1F,CAAM,EAAC,CAClB,IAAK,KACH,GAAI,CAACw+D,EAAa,CAChB+B,GAA4C,WAAYnqE,CAAO,EAC/D,KACF,CAEF,IAAK,IACC1kG,EAAOgtK,WAAa,KACtBhtK,EAAOgtK,SAAWtR,GAEpB,MAEF,IAAK,IACC17J,EAAOitK,SAAW,KACpBjtK,EAAOitK,OAASvR,GAElB,MACF,IAAK,KACH,GAAI,CAACoR,EAAa,CAChB+B,GAA4C,QAASnqE,CAAO,EAC5D,KACF,CAEF,IAAK,IACC1kG,EAAO+sK,WAAa,KACtB/sK,EAAO+sK,SAAWrR,GAEpB,MAGF,IAAK,GACL,IAAK,GACC,CAACoQ,EAAc5qD,MAAQ,CAAC4qD,EAAcjoH,IACxC6gD,EAAQx7F,IAAI,iDAAiD,EACpDlJ,EAAOgtK,WAAa,KAC7BhtK,EAAOgtK,SAAWtR,EAClB17J,EAAOguK,kBAAoB,OAE7B,MACF,IAAK,KACH,GAAI,CAAClB,EAAa,CAChB+B,GAA4C,OAAQnqE,CAAO,EAC3D,KACF,CAEF,IAAK,KAEIonE,EAAc3qD,IAERnhH,EAAOgtK,WAAa,KAC7BhtK,EAAOgtK,SAAWtR,EAClB17J,EAAOguK,kBAAoB,OAH3BtpE,EAAQx7F,IAAI,iDAAiD,EAMjE,MACF,IAAK,GACH,GAAIlJ,EAAOgtK,WAAa,IAAM4B,EAAe,EAAG,CAC9C,IAAIE,EAAWxgE,EAAS,EACpBoH,EAAYk5D,EAChB,KAAOl5D,EAAY,GAAG,CAEpB,OADqBv8F,EAAK21J,CAAQ,EACd,CAClB,IAAK,KAEGhD,EAAc3qD,MAAQ,GACxBzc,EAAQx7F,IAAI,yDAAyD,GAErElJ,EAAOgtK,SAAWtR,EAClB17J,EAAOguK,kBAAoB,OAG/B,KACJ,CACA,IAAMe,EAAgB51J,EAAK21J,EAAW,CAAC,EAAI,EAC3CA,GAAYC,EACZr5D,GAAaq5D,CACf,CACF,CACA,MACF,IAAK,KAGL,IAAK,KACHd,OAAAA,GAAiB9W,EAAU,IAAIlsJ,MAAM,gCAAgC,EAAG,OAAQy5F,CAAO,EAChF1kG,EACT,IAAK,IAEGA,EAAO+sK,WAAa,KACtB/sK,EAAO+sK,SAAWrR,EAClB17J,EAAO+tK,kBAAoB,OAC3BrpE,EAAQx7F,IAAI,oBAAoB,GAGpC,KACJ,CACAolG,GAAUsgE,EAAe,CAC3B,CACA,OAAO5uK,CACT,CACA,SAASiuK,GAAiB9W,EAAU9tJ,EAAOkyH,EAAY72B,EAAS,CAC9DA,EAAQv7F,KAAK,kBAAkBE,EAAMP,OAAO,EAAE,EAC9CquJ,EAAS7/D,KAAKhpB,EAAO70B,MAAO60B,EAAO70B,MAAO,CACxCljC,KAAMwqF,GAAWirC,YACjBj2F,QAASkrD,EAAa25B,mBACtB3I,MAAO,GACPsJ,WAAAA,EACAlyH,MAAAA,EACA6hC,OAAQ7hC,EAAMP,OAChB,CAAC,CACH,CACA,SAAS+lK,GAA4Ct4J,EAAMmuF,EAAS,CAClEA,EAAQx7F,IAAI,GAAGqN,CAAI,0DAA0D,CAC/E,CACA,SAASytJ,GAASz7I,EAAQm8E,EAAS,CACjC,IAAIzkG,EAAI,EACJuqG,EACAwkE,EACAC,EACAC,EACAC,EACEh2J,EAAOoP,EAAOpP,KACpB,GAAI,CAACoP,GAAUA,EAAOrhB,OAAS,EAC7B,OAAO,KAET,KAAOiS,EAAK,CAAC,EAAEjZ,OAAS,IAAMiZ,EAAKjZ,OAAS,GAC1CiZ,EAAK,CAAC,EAAIq9F,GAAiBr9F,EAAK,CAAC,EAAGA,EAAK,CAAC,CAAC,EAC3CA,EAAKmW,OAAO,EAAG,CAAC,EAIlB,GAFAk7E,EAAOrxF,EAAK,CAAC,GACMqxF,EAAK,CAAC,GAAK,KAAOA,EAAK,CAAC,GAAK,GAAKA,EAAK,CAAC,IACzC,EAAG,CAEnB,GADAwkE,GAAUxkE,EAAK,CAAC,GAAK,GAAKA,EAAK,CAAC,EAC5BwkE,GAAUA,EAASzmJ,EAAOrhB,KAAO,EACnC,OAAO,KAET,IAAMkoK,EAAW5kE,EAAK,CAAC,EACnB4kE,EAAW,MACbF,GAAU1kE,EAAK,CAAC,EAAI,IAAM,WACzBA,EAAK,EAAE,EAAI,KAAO,SAClBA,EAAK,EAAE,EAAI,KAAO,OAClBA,EAAK,EAAE,EAAI,KAAO,KAClBA,EAAK,EAAE,EAAI,KAAO,EACf4kE,EAAW,IACbD,GAAU3kE,EAAK,EAAE,EAAI,IAAM,WAC1BA,EAAK,EAAE,EAAI,KAAO,SAClBA,EAAK,EAAE,EAAI,KAAO,OAClBA,EAAK,EAAE,EAAI,KAAO,KAClBA,EAAK,EAAE,EAAI,KAAO,EACf0kE,EAASC,EAAS,GAAK,MACzBzqE,EAAQv7F,KAAK,GAAGlK,KAAK+B,OAAOkuK,EAASC,GAAU,GAAG,CAAC,yCAAyC,EAC5FD,EAASC,IAGXA,EAASD,GAGbD,EAAYzkE,EAAK,CAAC,EAClB,IAAI6kE,EAAqBJ,EAAY,EACrC,GAAI1mJ,EAAOrhB,MAAQmoK,EACjB,OAAO,KAET9mJ,EAAOrhB,MAAQmoK,EACf,IAAMxC,EAAU,IAAI32J,WAAWqS,EAAOrhB,IAAI,EAC1C,QAASu+C,EAAI,EAAG6pH,EAAUn2J,EAAKjZ,OAAQulD,EAAI6pH,EAAS7pH,IAAK,CACvD+kD,EAAOrxF,EAAKssC,CAAC,EACb,IAAIixC,EAAM8T,EAAKyB,WACf,GAAIojE,EACF,GAAIA,EAAqB34E,EAAK,CAC5B24E,GAAsB34E,EACtB,QACF,MACE8T,EAAOA,EAAKqE,SAASwgE,CAAkB,EACvC34E,GAAO24E,EACPA,EAAqB,EAGzBxC,EAAQxpK,IAAImnG,EAAMvqG,CAAC,EACnBA,GAAKy2F,CACP,CACA,OAAIs4E,IACFA,GAAUC,EAAY,GAEjB,CACL91J,KAAM0zJ,EACNl0D,IAAKu2D,EACLrS,IAAKsS,EACLz4E,IAAKs4E,CACP,CACF,CACA,OAAO,IACT,CACA,IAAMO,GAAN,KAAU,CACR,OAAOC,eAAe1+D,EAAO2mD,EAAc,CACzC,OAAQ3mD,EAAK,CACX,IAAK,YACH,GAAI2mD,IAAiB,EACnB,OAAO,IAAIvhJ,WAAW,CAAC,EAAG,IAAK,EAAG,IAAK,GAAI,GAAG,CAAC,EAC1C,GAAIuhJ,IAAiB,EAC1B,OAAO,IAAIvhJ,WAAW,CAAC,GAAI,EAAG,GAAI,IAAK,EAAG,GAAI,EAAG,GAAI,GAAG,CAAC,EACpD,GAAIuhJ,IAAiB,EAC1B,OAAO,IAAIvhJ,WAAW,CAAC,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,EAAG,GAAI,GAAI,EAAG,IAAK,EAAG,GAAG,CAAC,EACrE,GAAIuhJ,IAAiB,EAC1B,OAAO,IAAIvhJ,WAAW,CAAC,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,EAAG,GAAI,GAAI,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,EAAG,EAAG,EAAE,CAAC,EACxF,GAAIuhJ,IAAiB,EAC1B,OAAO,IAAIvhJ,WAAW,CAAC,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,EAAG,GAAI,GAAI,EAAG,IAAK,EAAG,IAAK,GAAI,EAAG,IAAK,EAAG,GAAI,IAAK,EAAG,EAAE,CAAC,EACpG,GAAIuhJ,IAAiB,EAC1B,OAAO,IAAIvhJ,WAAW,CAAC,EAAG,IAAK,EAAG,IAAK,GAAI,IAAK,EAAG,GAAI,GAAI,EAAG,IAAK,EAAG,IAAK,GAAI,EAAG,IAAK,EAAG,GAAI,IAAK,EAAG,EAAG,IAAK,EAAG,GAAI,EAAG,GAAG,CAAC,EAE9H,MAEF,QACE,GAAIuhJ,IAAiB,EACnB,OAAO,IAAIvhJ,WAAW,CAAC,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,EAAG,EAAG,EAAG,EAAG,GAAI,EAAG,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,CAAC,EAC9P,GAAIuhJ,IAAiB,EAC1B,OAAO,IAAIvhJ,WAAW,CAAC,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,CAAC,EAC7P,GAAIuhJ,IAAiB,EAC1B,OAAO,IAAIvhJ,WAAW,CAAC,EAAG,GAAI,GAAI,IAAK,IAAK,GAAI,IAAK,IAAK,IAAK,EAAG,EAAG,EAAG,EAAG,EAAG,IAAK,EAAG,EAAG,IAAK,IAAK,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,GAAI,EAAE,CAAC,EAEpQ,KACJ,CAEF,CACF,EACMu5J,GAAaxwK,KAAKqjG,IAAI,EAAG,EAAE,EAAI,EAC/BotE,IAAG,IAAA,CAAT,MAAMA,CAAI,CACR,OAAO1/E,MAAO,CACZ0/E,EAAI5zI,MAAQ,CACVihF,KAAM,CAAA,EAEN4yD,KAAM,CAAA,EACN9xD,KAAM,CAAA,EACN+xD,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACN//D,KAAM,CAAA,EACNggE,KAAM,CAAA,EACNjgE,KAAM,CAAA,EACNkgE,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNp5D,KAAM,CAAA,EACNq5D,KAAM,CAAA,EACNj0D,KAAM,CAAA,EACN,OAAQ,CAAA,EACRk0D,KAAM,CAAA,EACN,OAAQ,CAAA,EACRC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNC,KAAM,CAAA,EACNvgE,KAAM,CAAA,EACNwgE,KAAM,CAAA,EACNC,KAAM,CAAA,EACNv8D,KAAM,CAAA,EACNH,KAAM,CAAA,EACND,KAAM,CAAA,EACNvE,KAAM,CAAA,EACNoF,KAAM,CAAA,EACNzE,KAAM,CAAA,EACNV,KAAM,CAAA,EACNkhE,KAAM,CAAA,EACNC,KAAM,CAAA,CACR,EACA,IAAIjxK,EACJ,IAAKA,KAAKyvK,EAAI5zI,MACR4zI,EAAI5zI,MAAMz6B,eAAepB,CAAC,IAC5ByvK,EAAI5zI,MAAM77B,CAAC,EAAI,CAACA,EAAEwS,WAAW,CAAC,EAAGxS,EAAEwS,WAAW,CAAC,EAAGxS,EAAEwS,WAAW,CAAC,EAAGxS,EAAEwS,WAAW,CAAC,CAAC,GAGtF,IAAM0+J,EAAY,IAAIj7J,WAAW,CAC/B,EAEA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,IACA,IACA,IACA,IAEA,EACA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,CACA,CACD,EACKk7J,EAAY,IAAIl7J,WAAW,CAC/B,EAEA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,IACA,IACA,IACA,IAEA,EACA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,GACA,IACA,IACA,IACA,IACA,GACA,GACA,IACA,IACA,IACA,IACA,IACA,CACA,CACD,EACDw5J,EAAI2B,WAAa,CACf3uK,MAAOyuK,EACPr3H,MAAOs3H,CACT,EACA,IAAMrB,EAAO,IAAI75J,WAAW,CAC1B,EAEA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,EACA,EACA,EACA,GAEA,IACA,IACA,IACA,GAEA,EAEA,EACA,EACA,CACA,CACD,EACK26J,EAAO,IAAI36J,WAAW,CAC1B,EAEA,EACA,EACA,EAEA,EACA,EACA,EACA,CACA,CACD,EACDw5J,EAAI4B,KAAO5B,EAAI6B,KAAO7B,EAAI8B,KAAOX,EACjCnB,EAAI+B,KAAO,IAAIv7J,WAAW,CACxB,EAEA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,EACA,EACA,EACA,CACA,CACD,EACDw5J,EAAIgC,KAAO,IAAIx7J,WAAW,CACxB,EAEA,EACA,EA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zI,MAAMihF,KACV,IAAI7mG,WAAW,CACb,EACA,EACA,EAEA,EACA,EACA,EAEA,EACA,EAEA,EACA,EAEA,EACA,EAEA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EAEA3Q,GAAS,EAAI,IACbA,EAAQ,IAERD,GAAU,EAAI,IACdA,EAAS,IAET,EACA,GACA,EACA,EAEA,EACA,GACA,EACA,EAEA,EACA,EACA,EACA,EAEA,EACA,EAEA,GACA,IACA,GACA,IACA,IAEA,IACA,IACA,IACA,IACA,IACA,IACA,IACA,GACA,IACA,IACA,IACA,GACA,IACA,IACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EACA,EAEA,EACA,GAEA,GACA,EAAE,CACH,EAEDktK,EACA9C,EAAI5rJ,IAAI4rJ,EAAI5zI,MAAM+zI,KAAM,IAAI35J,WAAW,CACrC,EACA,GACA,IACA,IAEA,EACA,GACA,IACA,IAEA,EACA,GACA,IACA,GAAG,CACJ,CAAC,EAEFw5J,EAAI5rJ,IAAI4rJ,EAAI5zI,MAAM40I,KAAM,IAAIx6J,WAAW,CACrCu8J,GAAY,GAEZA,GAAY,GAAK,IACjBA,GAAY,EAAI,IAChBA,EAAW,IACXC,GAAY,GAEZA,GAAY,GAAK,IACjBA,GAAY,EAAI,IAChBA,EAAW,GAAG,CACf,CAAC,CACJ,CACF,CACA,OAAO1C,KAAK7tJ,EAAO,CACjB,IAAM0gD,EAAS1gD,EAAM0gD,OACrB,OAAO,IAAI3sD,WAAW,CACpB,EAEA,EACA,EACA,EAEA,EAEA,GAEA,EACA,EAEA,EAEA,EAEA,GAEA,GAEA,GAEA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,EACA,EACA,EACA,EAEA,EAEA,EAEA,GAAG2sD,EACH,EACA,EACA,CACA,CACD,CACH,CACA,OAAO8vG,UAAUxwJ,EAAO,CACtB,IAAMu1I,EAAav1I,EAAMu1I,YAAc,EACvC,OAAO,IAAIxhJ,WAAW,CACpB,EACA,EACA,EAEA,EACA,EACA,EAEA,EACA,EAEA,EACA,EACA,EAC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",
  "names": ["__defProp", "Object", "defineProperty", "__defNormalProp", "obj", "key", "value", "enumerable", "configurable", "writable", "__publicField", "clientFilterHookObject", "clientActionHookObject", "assign", "serverFilterHookObject", "serverActionHookObject", "LiveVideoLatencyMode", "HIGH_LATENCY", "SMALL_LATENCY", "VideoResolution", "H_NOVIDEO", "H_144P", "H_240P", "H_360P", "H_480P", "H_720P", "H_1080P", "H_1440P", "H_4K", "NSFWFlag", "VIOLENT", "EXPLICIT_SEX", "timeToInt", "time", "Math", "floor", "reg", "RegExp", "matches", "match", "hours", "parseInt", "groups", "minutes", "seconds", "parts", "split", "reverse", "iMultiplier", "result", "i", "length", "partInt", "isNaN", "secondsToTime", "options", "_a", "format2", "symbol", "format", "formatNumber", "toLocaleString", "hourSymbol", "minuteSymbol", "secondsSymbol", "round", "pick", "object", "keys", "prototype", "hasOwnProperty", "call", "omit", "keysSet", "Set", "entries", "has", "addQueryParams", "url", "params", "objUrl", "URL", "searchParams", "append", "toString", "removeQueryParams", "forEach", "_v", "k", "delete", "buildVideoWatchPath", "video", "shortUUID", "buildVideoLink", "base", "window", "location", "origin", "decorateVideoLink", "URLSearchParams", "startTime", "startTimeInt", "set", "stopTime", "stopTimeInt", "subtitle", "loop", "autoplay", "muted", "title", "warningTitle", "controls", "controlBar", "peertubeLink", "p2p", "api", "version", "buildUrl", "hasParams", "I18N_LOCALES", "I18N_LOCALE_ALIAS", "POSSIBLE_LOCALES", "concat", "getDefaultLocale", "isDefaultLocale", "locale", "getCompleteLocale", "map", "l", "is18nLocale", "includes", "getShortLocale", "classicResolutions", "resolutionConverter", "getResolutionLabel", "height", "width", "resolution", "max", "getResolutionAndFPSLabel", "resolutionLabel", "fps", "valuesMap", "Map", "proxify", "instance", "Proxy", "prop", "MemoryStorage", "setItem", "get", "target", "name", "getItem", "stringKey", "String", "val", "removeItem", "clear", "arguments", "TypeError", "Array", "from", "size", "peertubeLocalStorage", "peertubeSessionStorage", "reinitStorage", "instanceLocalStorage", "instanceSessionStorage", "localStorage", "sessionStorage", "UserTokenLocalStorageKeys", "ACCESS_TOKEN", "REFRESH_TOKEN", "TOKEN_TYPE", "OAuthUserTokens", "constructor", "hash2", "accessToken", "refreshToken", "tokenType", "getUserTokens", "localStorage2", "accessTokenLocalStorage", "refreshTokenLocalStorage", "tokenTypeLocalStorage", "saveToLocalStorage", "tokens", "flushLocalStorage", "Logger$1", "info", "message", "meta", "runHooks", "console", "log", "warn", "clientWarn", "error", "clientError", "addHook", "level", "hook", "hooks", "push", "registerServerSending", "serverUrl", "sendClientLog", "buildServerLogPayload", "payload", "headers", "Headers", "err", "fetch", "method", "body", "JSON", "stringify", "catch", "buildMessageServerLogPayload", "userAgent", "navigator", "href", "stackTrace", "buildStackServerLogPayload", "buildMetaServerLogPayload", "Error", "buildStack", "hookObj", "stack", "logger$1", "logger", "_TranslationsManager", "getServerTranslations", "path", "getLocalePath", "then", "res", "json", "Promise", "resolve", "loadLocaleInVideoJS", "videojs2", "p", "videojsLocaleCache", "completeLocale", "addLanguage", "TranslationsManager", "copyToClipboard", "text", "container", "document", "el", "createElement", "setAttribute", "style", "position", "left", "appendChild", "select", "execCommand", "removeChild", "wait", "ms2", "setTimeout", "buildVideoOrPlaylistEmbed", "embedUrl", "embedTitle", "aspectRatio", "responsive", "iframe", "src", "frameBorder", "allowFullscreen", "sandbox", "add", "wrapper", "paddingTop", "toFixed", "inset", "outerHTML", "isIOS", "test", "platform", "maxTouchPoints", "isSafari", "isMobile", "commonjsGlobal$1", "globalThis", "global", "self", "getDefaultExportFromCjs$4", "x", "__esModule", "getAugmentedNamespace", "n", "f", "default", "a", "a2", "Reflect", "construct", "apply", "d", "getOwnPropertyDescriptor", "window_1", "hasRequiredWindow", "requireWindow", "win", "__viteBrowserExternal", "__viteBrowserExternal$1", "freeze", "__proto__", "Symbol", "toStringTag", "require$$0", "document_1", "hasRequiredDocument", "requireDocument", "topLevel", "minDoc", "doccy", "_extends$1", "exports", "hasRequired_extends", "require_extends", "module", "_extends2", "bind", "e", "t", "r", "keycode", "hasRequiredKeycode", "requireKeycode", "keyCode", "searchInput", "hasKeyCode", "which", "charCode", "names", "search", "foundNamedKey", "codes", "toLowerCase", "aliases", "charCodeAt", "isEventKey", "event", "nameOrCode", "keyCode2", "code", "fromCharCode", "alias", "assertThisInitialized", "hasRequiredAssertThisInitialized", "requireAssertThisInitialized", "_assertThisInitialized", "ReferenceError", "inheritsLoose", "setPrototypeOf", "hasRequiredSetPrototypeOf", "requireSetPrototypeOf", "_setPrototypeOf", "t2", "e2", "hasRequiredInheritsLoose", "requireInheritsLoose", "setPrototypeOf2", "_inheritsLoose", "o", "create", "tuple", "hasRequiredTuple", "requireTuple", "SafeParseTuple", "reviver", "parse", "lib", "isFunction_1", "hasRequiredIsFunction", "requireIsFunction", "isFunction", "fn", "string", "alert", "confirm", "prompt", "httpHandler", "hasRequiredHttpHandler", "requireHttpHandler", "window2", "httpResponseHandler", "callback", "decodeResponseBody", "response", "responseBody", "statusCode", "cause", "TextDecoder", "charset", "getCharset", "decode", "Uint8Array", "contentTypeHeader", "reduce", "contentType", "_contentType$split", "type", "trim", "hasRequiredLib", "requireLib", "createXHR", "parseHeaders", "row", "index", "indexOf", "slice", "isArray", "XMLHttpRequest", "noop3", "XDomainRequest", "forEachArray", "uri", "initParams", "toUpperCase", "_createXHR", "array", "iterator", "isEmpty", "called", "body2", "readystatechange", "xhr", "readyState", "loadFunc", "getBody", "responseText", "getXml", "isJson", "errorFunc", "evt", "clearTimeout", "timeoutTimer", "failureResponse", "aborted", "status2", "useXDR", "status", "rawRequest", "getAllResponseHeaders", "cors", "data", "sync", "onreadystatechange", "onload", "onerror", "onprogress", "onabort", "ontimeout", "open", "username", "password", "withCredentials", "timeout", "abort", "setRequestHeader", "responseType", "beforeSend", "send", "responseXML", "firefoxBugTakenEffect", "documentElement", "nodeName", "browserIndex", "vtt", "hasRequiredVtt", "requireVtt", "document2", "_objCreate", "F", "ParsingError", "errorData", "Errors", "BadSignature", "BadTimeStamp", "parseTimeStamp2", "input", "computeSeconds", "h", "m2", "s", "m", "replace", "Settings2", "values", "v", "dflt", "defaultKey", "alt", "integer", "percent", "parseFloat", "parseOptions2", "keyValueDelim", "groupDelim", "kv", "parseCue2", "cue", "regionList", "oInput", "consumeTimeStamp", "ts", "consumeCueSettings", "input2", "cue2", "settings", "id", "region", "vals", "vals0", "vertical", "line", "lineAlign", "snapToLines", "align", "start", "center", "middle", "end", "right", "positionAlign", "skipWhitespace", "substr", "endTime", "TEXTAREA_ELEMENT", "TAG_NAME", "c", "b", "u", "ruby", "rt", "lang", "DEFAULT_COLOR_CLASS", "white", "lime", "cyan", "red", "yellow", "magenta", "blue", "black", "TAG_ANNOTATION", "NEEDS_PARENT", "parseContent", "nextToken", "consume", "unescape2", "innerHTML", "textContent", "shouldAdd", "current2", "element", "localName", "annotation", "tagName", "rootDiv", "current", "tagStack", "pop", "parentNode", "node", "createProcessingInstruction", "classes", "cl", "bgColor", "colorName", "propName", "propValue", "className", "join", "createTextNode", "strongRTLRanges", "isStrongRTLChar", "currentRange", "determineBidi", "cueDiv", "nodeStack", "childNodes", "pushNodes", "nodeStack2", "i2", "nextTextNode", "text2", "innerText", "computeLinePos", "track", "textTrackList", "mediaElement", "trackList", "count", "mode", "StyleBox", "applyStyles", "styles", "div", "formatStyle", "unit", "CueStyleBox", "styleOptions", "color", "backgroundColor", "top", "bottom", "display", "writingMode", "unicodeBidi", "direction", "textAlign", "font", "whiteSpace", "textPos", "move", "box", "BoxPosition", "lh", "offsetHeight", "offsetWidth", "offsetTop", "rects", "getClientRects", "getBoundingClientRect", "lineHeight", "axis", "toMove", "overlaps", "b2", "overlapsAny", "boxes", "within", "overlapsOppositeAxis", "intersectPercentage", "min", "y", "intersectArea", "toCSSCompatValues", "reference", "getSimpleBoxPosition", "ret", "moveBoxToLinePosition", "styleBox", "containerBox", "boxPositions", "findBestPosition", "axis2", "bestPosition2", "specifiedPosition", "percentage", "boxPosition", "linePos", "step", "maxPosition", "initialAxis", "abs", "ceil", "calculatedPercentage", "bestPosition", "WebVTT2", "StringDecoder", "decodeURIComponent", "encodeURIComponent", "convertCueToDOMTree", "cuetext", "FONT_SIZE_PERCENT", "FONT_STYLE", "CUE_BACKGROUND_PADDING", "processCues", "cues", "overlay", "firstChild", "paddedOverlay", "margin", "shouldCompute", "cues2", "hasBeenReset", "displayState", "fontSize", "Parser", "vttjs", "decoder2", "state", "buffer", "decoder", "reportOrThrowError", "onparsingerror", "self2", "stream", "collectNextLine", "buffer2", "pos", "line2", "parseRegion", "xy", "anchor", "VTTRegion", "lines", "regionAnchorX", "regionAnchorY", "viewportAnchorX", "viewportAnchorY", "scroll", "onregion", "parseTimestampMap", "ontimestampmap", "parseHeader2", "alreadyCollectedLine", "VTTCue", "hasSubstring", "oncue", "flush", "onflush", "vttcue", "hasRequiredVttcue", "requireVttcue", "autoKeyword", "directionSetting", "alignSetting", "findDirectionSetting", "dir", "findAlignSetting", "VTTCue2", "_id", "_pauseOnExit", "_startTime", "_endTime", "_text", "_region", "_vertical", "_snapToLines", "_line", "_lineAlign", "_position", "_positionAlign", "_size", "_align", "defineProperties", "setting", "SyntaxError", "getCueAsHTML", "WebVTT", "vttregion", "hasRequiredVttregion", "requireVttregion", "scrollSetting", "findScrollSetting", "isValidPercentValue", "_width", "_lines", "_regionAnchorX", "_regionAnchorY", "_viewportAnchorX", "_viewportAnchorY", "_scroll", "hasRequiredBrowserIndex", "requireBrowserIndex", "cueShim", "regionShim", "nativeVTTCue", "nativeVTTRegion", "shim", "restore", "isNativeReflectConstruct", "hasRequiredIsNativeReflectConstruct", "requireIsNativeReflectConstruct", "_isNativeReflectConstruct", "Boolean", "valueOf", "hasRequiredConstruct", "requireConstruct", "isNativeReflectConstruct2", "_construct", "inherits", "hasRequiredInherits", "requireInherits", "_inherits", "core", "hasRequiredCore", "requireCore", "keycode2", "safeParseTuple", "XHR", "vtt2", "_interopDefaultLegacy", "window__default", "document__default", "_extends__default", "keycode__default", "_assertThisInitialized__default", "_inheritsLoose__default", "safeParseTuple__default", "XHR__default", "vtt__default", "_construct__default", "_inherits__default", "version2", "hooks_", "removeHook", "splice", "hookOnce", "original", "wrapper2", "FullscreenApi", "prefixed", "apiMap", "specApi", "browserApi", "_i", "history", "LogByTypeFactory", "log2", "args", "lvl", "levels", "lvlRegExp", "unshift", "createLogger$1", "logByType", "_len", "_key", "createLogger", "subname", "all", "off", "debug", "DEFAULT", "filter", "fname", "historyItem", "disable", "enable", "_len2", "_key2", "_len3", "_key3", "_len4", "_key4", "createLogger2", "isObject2", "each", "initial", "accum", "sources", "source", "isPlain", "computedStyle", "getComputedStyle", "computedStyleValue", "getPropertyValue", "USER_AGENT2", "webkitVersionMap", "exec", "appleWebkitVersion", "IS_IPOD", "IOS_VERSION", "IS_ANDROID", "ANDROID_VERSION", "major", "minor", "IS_NATIVE_ANDROID", "IS_FIREFOX", "IS_EDGE", "IS_CHROME", "CHROME_VERSION", "IE_VERSION", "version3", "IS_SAFARI", "IS_WINDOWS", "TOUCH_ENABLED", "isReal", "DocumentTouch", "IS_IPAD", "IS_IPHONE", "IS_IOS", "IS_ANY_SAFARI", "browser2", "isNonBlankString", "str", "throwIfWhitespace", "classRegExp", "isEl", "nodeType", "isInFrame", "parent", "createQuerier", "selector", "context", "querySelector", "ctx", "createEl", "properties", "attributes", "content", "getOwnPropertyNames", "attrName", "appendContent", "prependTo", "child", "insertBefore", "hasClass", "classToCheck", "classList", "contains", "addClass", "classToAdd", "removeClass", "classToRemove", "remove", "toggleClass", "classToToggle", "predicate", "has2", "setAttributes", "attrValue", "removeAttribute", "getAttributes", "tag", "knownBooleans", "attrs", "attrVal", "getAttribute", "attribute", "blockTextSelection", "focus", "onselectstart", "unblockTextSelection", "rect", "findPosition", "offsetParent", "fullscreenElement", "offsetLeft", "getPointerPosition2", "event2", "translated", "item", "transform", "Number", "_values", "boxTarget", "boxW", "boxH", "offsetY", "offsetX", "changedTouches", "pageX", "pageY", "isTextNode", "emptyEl", "normalizeContent", "insertContent", "isSingleLeftClick", "button", "buttons", "$", "$$", "Dom", "getPointerPosition", "_windowLoaded", "videojs$1", "autoSetup", "vids", "getElementsByTagName", "audios", "divs", "mediaEls", "mediaEl", "player", "autoSetupTimeout", "wait2", "vjs", "setWindowLoaded", "removeEventListener", "addEventListener", "createStyleElement", "style2", "setTextContent", "styleSheet", "cssText", "_initialGuid", "_guid", "newGUID", "FakeWeakMap", "WeakMap", "FakeWeakMap2", "vdata", "performance", "now", "Date", "_proto", "access", "DomData", "_cleanUpEvents", "elem", "handlers", "dispatcher", "detachEvent", "disabled", "_handleMultipleEvents", "types", "fixEvent", "fixed_", "returnTrue", "returnFalse", "isPropagationStopped", "isImmediatePropagationStopped", "old", "preventDefault", "srcElement", "relatedTarget", "fromElement", "toElement", "returnValue", "defaultPrevented", "stopPropagation", "cancelBubble", "stopImmediatePropagation", "clientX", "doc", "scrollLeft", "clientLeft", "clientY", "scrollTop", "clientTop", "_supportsPassive", "supportsPassive", "opts", "passiveEvents", "on", "guid", "handlersCopy", "passive", "attachEvent", "removeType", "trigger", "elemData", "ownerDocument", "bubbles", "targetData", "one", "func", "func2", "any", "Events2", "UPDATE_REFRESH_INTERVAL", "uid", "bound", "throttle", "last", "throttled", "now2", "debounce", "immediate", "cancel", "debounced", "_later", "EventTarget2", "allowedEvents_", "ael", "dispatchEvent", "EVENT_MAP", "queueTrigger", "_this", "oldTimeout", "objName", "name_", "isEvented", "eventBusEl_", "every", "addEventedCallback", "eventedCallbacks", "isValidEventType", "validateTarget", "fnName", "validateEventType", "validateListener", "listener", "normalizeListenArgs", "isTargetingSelf", "shift", "listen", "EventedMixin", "_normalizeListenArgs", "removeListenerOnDispose", "removeRemoverOnTargetDispose", "_this2", "_normalizeListenArgs2", "largs", "_this3", "_normalizeListenArgs3", "_len5", "_key5", "targetOrType", "typeOrListener", "evented", "_options", "eventBusKey", "el_", "StatefulMixin", "setState", "stateUpdates", "changes", "to", "stateful", "defaultState", "handleStateChanged", "w", "toTitleCase2", "titleCaseEquals", "str1", "str2", "mergeOptions", "MapSham", "MapSham2", "map_", "thisArg", "Map$1", "SetSham", "SetSham2", "set_", "Set$1", "Component2", "Component3", "ready", "play", "player_", "isDisposed_", "parentComponent_", "options_", "id_", "handleLanguagechange", "children_", "childIndex_", "childNameIndex_", "setTimeoutIds_", "setIntervalIds_", "rafIds_", "namedRafs_", "clearingTimersOnDispose_", "initChildren", "reportTouchActivity", "enableTouchActivity", "dispose", "readyQueue_", "restoreEl", "replaceChild", "isDisposed", "localize", "defaultValue", "code2", "language", "languages", "primaryCode", "primaryLang", "localizedString", "contentEl", "contentEl_", "children", "getChildById", "getChild", "getDescendant", "acc", "currentChild", "addChild", "component", "componentName", "componentClassName", "componentClass", "ComponentClass", "getComponent", "refNode", "childFound", "compEl", "parentOptions", "handleAdd", "playerOptions", "newChild", "workingChildren", "Tech2", "some", "wchild", "isTech", "buildCSSClass", "isReady_", "triggerReady", "readyQueue", "show", "hide", "lockShowing", "unlockShowing", "num", "skipListeners", "dimension", "dimensions", "widthOrHeight", "pxIndex", "currentDimension", "computedWidthOrHeight", "rule", "currentDimensions", "currentWidth", "currentHeight", "blur", "handleKeyDown", "handleKeyPress", "emitTapEvents", "touchStart", "firstTouch", "tapMovementThreshold", "touchTimeThreshold", "couldBeTap", "touches", "xdiff", "ydiff", "touchDistance", "sqrt", "noTap", "touchTime", "reportUserActivity", "report", "touchHolding", "clearInterval", "setInterval", "touchEnd", "timeoutId", "clearTimersOnDispose_", "interval", "intervalId", "requestAnimationFrame", "_this4", "supportsRaf_", "requestNamedAnimationFrame", "_this5", "cancelNamedAnimationFrame", "cancelAnimationFrame", "_this6", "_ref", "idName", "cancelName", "registerComponent", "ComponentToRegister", "isComp", "isPrototypeOf", "reason", "components_", "Player2", "players", "playerNames", "pname", "rangeCheck", "maxIndex", "getRange", "valueIndex", "ranges", "rangeIndex", "createTimeRangesObj", "timeRangesObj", "createTimeRanges", "bufferedPercent", "buffered", "duration", "bufferedDuration", "MediaError2", "defaultMessages", "errorTypes", "errNum", "isPromise2", "silencePromise", "trackToJson_", "textTracksToJson", "tech", "trackEls", "trackObjs", "tracks", "trackEl", "textTracks", "jsonToTextTracks", "addedTrack", "addRemoteTextTrack", "addCue", "textTrackConverter", "MODAL_CLASS_NAME", "ModalDialog", "_Component", "ModalDialog2", "handleKeyDown_", "close_", "close", "opened_", "hasBeenOpened_", "hasBeenFilled_", "closeable", "uncloseable", "role", "descEl_", "description", "tabIndex", "label", "previouslyActiveEl_", "desc", "fillAlways", "fill", "wasPlaying_", "paused", "pauseOnOpen", "pause", "hadControls_", "conditionalFocus_", "opened", "conditionalBlur_", "temporary", "closeable2", "closeable_", "temp", "controlText", "fillWith", "parentEl", "nextSiblingEl", "nextSibling", "empty", "closeButton", "content_", "activeEl", "activeElement", "playerEl", "focusableEls", "focusableEls_", "focusIndex", "shiftKey", "allChildren", "querySelectorAll", "HTMLAnchorElement", "HTMLAreaElement", "hasAttribute", "HTMLInputElement", "HTMLSelectElement", "HTMLTextAreaElement", "HTMLButtonElement", "HTMLIFrameElement", "HTMLObjectElement", "HTMLEmbedElement", "TrackList", "_EventTarget", "TrackList2", "tracks_", "addTrack", "labelchange_", "removeTrack", "rtrack", "getTrackById", "change", "addtrack", "removetrack", "labelchange", "disableOthers$1", "list", "enabled", "AudioTrackList", "_TrackList", "AudioTrackList2", "changing_", "enabledChange_", "disableOthers", "selected", "VideoTrackList", "VideoTrackList2", "_i2", "selectedChange_", "TextTrackList", "TextTrackList2", "queueChange_", "triggerSelectedlanguagechange", "triggerSelectedlanguagechange_", "nonLanguageTextTrackKind", "kind", "selectedlanguagechange_", "HtmlTrackElementList", "HtmlTrackElementList2", "trackElements", "trackElements_", "addTrackElement_", "trackElement", "getTrackElementByTrack_", "trackElement_", "removeTrackElement_", "TextTrackCueList", "TextTrackCueList2", "setCues_", "length_", "oldLength", "cues_", "defineProp", "getCueById", "VideoTrackKind", "alternative", "captions", "main", "sign", "subtitles", "commentary", "AudioTrackKind", "TextTrackKind", "descriptions", "chapters", "metadata", "TextTrackMode", "hidden", "showing", "Track", "Track2", "trackProps", "_loop", "key2", "newLabel", "parseUrl2", "props", "details", "protocol", "host", "getAbsoluteURL", "getFileExtension", "splitPathRe", "pathParts", "isCrossOrigin", "winLoc", "urlInfo", "srcProtocol", "crossOrigin", "Url", "parseUrl", "parseCues", "srcContent", "parser", "errors", "groupCollapsed", "groupEnd", "loadTrack", "tech_", "loaded_", "TextTrack", "_Track", "TextTrack2", "srclang", "default_", "activeCues_", "preload_", "preloadTextTracks", "activeCues", "changed", "timeupdateHandler", "rvf_", "requestVideoFrameCallback", "disposeHandler", "stopTracking", "startTracking", "newMode", "ct", "currentTime", "active", "cancelVideoFrameCallback", "originalCue", "originalCue_", "removeCue", "_removeCue", "cuechange", "AudioTrack", "AudioTrack2", "newEnabled", "VideoTrack", "VideoTrack2", "newSelected", "NONE", "LOADING", "LOADED", "ERROR", "HTMLTrackElement", "HTMLTrackElement2", "load", "NORMAL", "audio", "ListClass", "TrackClass", "capitalName", "getterName", "privateName", "REMOTE", "remoteText", "remoteTextEl", "ALL", "createTrackHelper", "Tech", "onDurationChange_", "onDurationChange", "trackProgress_", "trackProgress", "trackCurrentTime_", "trackCurrentTime", "stopTrackingCurrentTime_", "stopTrackingCurrentTime", "disposeSourceHandler_", "disposeSourceHandler", "queuedHanders_", "hasStarted_", "featuresProgressEvents", "manualProgressOn", "featuresTimeupdateEvents", "manualTimeUpdatesOn", "nativeCaptions", "nativeTextTracks", "featuresNativeTextTracks", "emulateTextTracks", "autoRemoteTextTracks_", "initTrackListeners", "nativeControlsForTouch", "triggerSourceset", "manualProgress", "manualProgressOff", "stopTrackingProgress", "progressInterval", "numBufferedPercent", "bufferedPercent_", "duration_", "manualTimeUpdates", "manualTimeUpdatesOff", "currentTimeInterval", "manuallyTriggered", "clearTracks", "removeRemoteTextTrack", "cleanupAutoTextTracks", "reset", "setCrossOrigin", "error_", "played", "setScrubbing", "scrubbing", "setCurrentTime", "trackListChanges", "addWebVttScript_", "script", "remoteTracks", "remoteTextTracks", "handleAddTrack", "handleRemoveTrack", "updateDisplay", "textTracksChanges", "addTextTrack", "createRemoteTextTrack", "manualCleanup", "_this7", "htmlTrackElement", "remoteTextTrackEls", "getVideoPlaybackQuality", "requestPictureInPicture", "PromiseClass", "reject", "disablePictureInPicture", "setDisablePictureInPicture", "cb", "_this8", "setPoster", "playsinline", "setPlaysinline", "overrideNativeAudioTracks", "overrideNativeVideoTracks", "canPlayType", "canPlaySource", "srcObj", "registerTech", "techs_", "defaultTechOrder_", "getTech", "videojs", "featuresVolumeControl", "featuresMuteControl", "featuresFullscreenResize", "featuresPlaybackRate", "featuresSourceset", "featuresVideoFrameCallback", "withSourceHandlers", "_Tech", "registerSourceHandler", "handler", "sourceHandlers", "can", "selectSourceHandler", "canHandleSource", "sh", "deferrable", "originalFn", "sourceHandler_", "setSource", "nativeSourceHandler", "currentSource_", "handleSource", "middlewares", "middlewareInstances", "TERMINATOR", "use", "middleware", "next", "setSourceHelper", "setTech", "mw", "reduceRight", "middlewareIterator", "arg", "mediate", "callMethod", "middlewareValue", "terminated", "executeRight", "allowedGetters", "seekable", "volume", "ended", "allowedSetters", "setMuted", "setVolume", "allowedMediators", "mws", "clearCacheForPlayer", "getOrCreateFactory", "mwFactory", "_mws$i", "mwf", "mwi", "lastRun", "_middleware", "mwrest", "_src", "MimetypesKind", "opus", "ogv", "mp4", "mov", "m4v", "mkv", "m4a", "mp3", "aac", "caf", "flac", "oga", "wav", "m3u8", "mpd", "jpg", "jpeg", "gif", "png", "svg", "webp", "getMimetype", "ext", "mimetype", "findMimetype", "cache_", "matchingSources", "s2", "filterSource", "filterSource2", "newsrc", "srcobj", "fixSource", "MediaLoader", "MediaLoader2", "j", "techOrder", "techName", "isSupported", "loadTech_", "ClickableComponent2", "ClickableComponent3", "handleMouseOver_", "handleMouseOver", "handleMouseOut_", "handleMouseOut", "handleClick_", "handleClick", "tabIndex_", "createControlTextEl", "controlTextEl_", "controlText_", "localizedText", "nonIconControl", "noUITitleAttributes", "enabled_", "clickHandler", "PosterImage", "_ClickableComponent", "PosterImage2", "update", "update_", "poster", "setSrc", "backgroundImage", "sourceIsEncrypted", "usingPlugin", "eme", "sessions", "darkGray", "lightGray", "fontMap", "monospace", "sansSerif", "serif", "monospaceSansSerif", "monospaceSerif", "proportionalSansSerif", "proportionalSerif", "casual", "smallcaps", "constructColor", "opacity", "hex", "tryUpdateStyle", "TextTrackDisplay", "TextTrackDisplay2", "updateDisplayHandler", "toggleDisplay", "preselectTrack", "modes", "userPref", "selectedLanguage", "firstDesc", "firstCaptions", "preferredTrack", "clearDisplay", "allowMultipleShowingTracks", "showingTracks", "updateForTrack", "descriptionsTrack", "captionsSubtitlesTrack", "_track", "updateDisplayState", "overrides", "textTrackSettings", "getValues", "textOpacity", "backgroundOpacity", "windowColor", "windowOpacity", "edgeStyle", "textShadow", "fontPercent", "fontFamily", "fontVariant", "track2", "_track2", "_j", "cueEl", "LoadingSpinner", "LoadingSpinner2", "isAudio", "playerType", "Button2", "Button3", "BigPlayButton", "_Button", "BigPlayButton2", "mouseused_", "handleMouseDown", "playPromise", "playToggle", "playFocus", "CloseButton", "CloseButton2", "PlayToggle", "PlayToggle2", "replay", "handlePlay", "handlePause", "handleEnded", "handleSeeked", "defaultImplementation", "guide", "gm", "gh", "Infinity", "implementation", "setFormatTime", "customImplementation", "resetFormatTime", "formatTime", "TimeDisplay", "TimeDisplay2", "updateContent", "updateTextNode_", "span", "labelText_", "textNode_", "formattedTime_", "oldNode", "CurrentTimeDisplay", "_TimeDisplay", "CurrentTimeDisplay2", "getCache", "DurationDisplay", "DurationDisplay2", "TimeDivider", "TimeDivider2", "RemainingTimeDisplay", "RemainingTimeDisplay2", "displayNegative", "remainingTimeDisplay", "remainingTime", "LiveDisplay", "LiveDisplay2", "updateShowing", "SeekToLive", "SeekToLive2", "updateLiveEdgeStatus", "liveTracker", "updateLiveEdgeStatusHandler_", "textEl_", "atLiveEdge", "seekToLiveEdge", "clamp", "number", "Slider", "Slider2", "handleMouseDown_", "handleMouseUp_", "handleMouseUp", "handleMouseMove_", "handleMouseMove", "bar", "barName", "playerEvent", "progress", "getProgress", "progress_", "sizeKey", "getPercent", "calculateDistance", "stepBack", "stepForward", "bool", "vertical_", "percentify", "LoadProgressBar", "LoadProgressBar2", "partEls_", "loadedText", "separator", "percentageEl_", "isLive", "seekableEnd", "bufferedEnd", "percent_", "part", "dataset", "TimeTooltip2", "TimeTooltip3", "seekBarRect", "seekBarPoint", "tooltipRect", "playerRect", "seekBarPointPx", "spaceLeftOfPoint", "spaceRightOfPoint", "pullTooltipBy", "write", "updateTime", "liveWindow", "secondsBehind", "PlayProgressBar2", "PlayProgressBar3", "timeTooltip", "MouseTimeDisplay", "MouseTimeDisplay2", "STEP_SECONDS", "PAGE_KEY_MULTIPLIER", "SeekBar", "_Slider", "SeekBar2", "setEventHandlers_", "updateInterval", "enableIntervalHandler_", "enableInterval_", "disableIntervalHandler_", "disableInterval_", "toggleVisibility_", "visibilityState", "getCurrentTime_", "liveCurrentTime", "currentTime_", "userSeek_", "nextSeekedFromUser", "seekableStart", "videoWasPlaying", "mouseDown", "newTime", "distance", "mouseTimeDisplay", "handleAction", "gotoFraction", "ProgressControl", "ProgressControl2", "throttledHandleMouseSeek", "handleMouseSeek", "handleMouseUpHandler_", "handleMouseDownHandler_", "seekBar", "playProgressBar", "seekBarEl", "removeListenersAddedOnMousedownAndTouchstart", "PictureInPictureToggle", "PictureInPictureToggle2", "handlePictureInPictureChange", "handlePictureInPictureEnabledChange", "isSourceAudio", "currentType", "substring", "audioPosterMode", "audioOnlyMode", "isInPictureInPicture", "exitPictureInPicture", "pictureInPictureEnabled", "FullscreenToggle", "FullscreenToggle2", "handleFullscreenChange", "fsApi_", "fullscreenEnabled", "isFullscreen", "exitFullscreen", "requestFullscreen", "checkVolumeSupport", "VolumeLevel", "VolumeLevel2", "VolumeLevelTooltip", "VolumeLevelTooltip2", "rangeBarRect", "rangeBarPoint", "volumeBarPointPx", "updateVolume", "MouseVolumeLevelDisplay", "MouseVolumeLevelDisplay2", "VolumeBar", "VolumeBar2", "updateLastVolume_", "updateARIAAttributes", "mouseVolumeLevelDisplay", "volumeBarEl", "volumeBarRect", "volumeBarPoint", "checkMuted", "ariaValue", "volumeAsPercentage_", "volumeBeforeDrag", "lastVolume_", "VolumeControl", "VolumeControl2", "volumeBar", "throttledHandleMouseMove", "orientationClass", "checkMuteSupport", "MuteToggle", "MuteToggle2", "vol", "lastVolume", "volumeToSet", "updateIcon_", "updateControlText_", "soundOff", "VolumePanel", "VolumePanel2", "inline", "volumeControl", "handleKeyPressHandler_", "volumePanelState_", "muteToggle", "handleVolumeControlKeyUp", "sliderActive_", "sliderInactive_", "Menu2", "Menu3", "menuButton_", "menuButton", "focusedChild_", "boundHandleBlur_", "handleBlur", "boundHandleTapClick_", "handleTapClick", "addEventListenerForItem", "removeEventListenerForItem", "addItem", "childComponent", "contentElType", "btn", "buttonPressed_", "unpressButton", "childComponents", "foundComponent", "stepChild", "haveTitle", "MenuButton2", "MenuButton3", "buttonClass", "handleMenuKeyUp_", "handleMenuKeyUp", "menu", "handleMouseLeave", "handleSubmenuKeyDown", "createMenu", "items", "hideThreshold_", "titleEl", "titleComponent", "createItems", "buildWrapperCSSClass", "menuButtonClass", "pressButton", "handleSubmenuKeyPress", "TrackButton", "_MenuButton", "TrackButton2", "updateHandler", "MenuKeys", "MenuItem2", "MenuItem3", "selectable", "isSelected_", "multiSelectable", "_selected", "TextTrackMenuItem", "_MenuItem", "TextTrackMenuItem2", "kinds", "changeHandler", "handleTracksChange", "selectedLanguageChangeHandler", "handleSelectedLanguageChange", "onchange", "Event", "createEvent", "initEvent", "referenceTrack", "shouldBeSelected", "OffTextTrackMenuItem", "_TextTrackMenuItem", "OffTextTrackMenuItem2", "allHidden", "TextTrackButton", "_TrackButton", "TextTrackButton2", "TrackMenuItem", "label_", "kinds_", "kind_", "ChaptersTrackMenuItem", "ChaptersTrackMenuItem2", "ChaptersButton", "_TextTrackButton", "ChaptersButton2", "selectCurrentItem_", "track_", "findChaptersTrack", "setTrack", "updateHandler_", "remoteTextTrackEl", "_remoteTextTrackEl", "getMenuCaption", "mi", "DescriptionsButton", "DescriptionsButton2", "SubtitlesButton", "SubtitlesButton2", "CaptionSettingsMenuItem", "CaptionSettingsMenuItem2", "CaptionsButton2", "CaptionsButton3", "SubsCapsMenuItem", "SubsCapsMenuItem2", "parentSpan", "SubsCapsButton", "SubsCapsButton2", "language_", "AudioTrackMenuItem", "AudioTrackMenuItem2", "audioTracks", "featuresNativeAudioTracks", "AudioTrackButton", "AudioTrackButton2", "PlaybackRateMenuItem", "PlaybackRateMenuItem2", "rate", "playbackRate", "PlaybackRateMenuButton2", "PlaybackRateMenuButton3", "labelElId_", "updateVisibility", "updateLabel", "handlePlaybackRateschange", "labelEl_", "rates", "playbackRates", "currentRate", "currentIndex", "newIndex", "playbackRateSupported", "Spacer", "Spacer2", "CustomControlSpacer", "_Spacer", "CustomControlSpacer2", "ControlBar", "ControlBar2", "ErrorDisplay", "_ModalDialog", "ErrorDisplay2", "LOCAL_STORAGE_KEY", "COLOR_BLACK", "COLOR_BLUE", "COLOR_CYAN", "COLOR_GREEN", "COLOR_MAGENTA", "COLOR_RED", "COLOR_WHITE", "COLOR_YELLOW", "OPACITY_OPAQUE", "OPACITY_SEMI", "OPACITY_TRANS", "selectConfigs", "parseOptionValue", "getSelectedOptionValue", "selectedIndex", "setSelectedOption", "TextTrackSettings", "TextTrackSettings2", "endDialog", "setDefaults", "persistTextTrackSettings", "saveSettings", "config", "restoreSettings", "createElSelect_", "legendId", "selectLabelledbyIds", "optionId", "createElFgColor_", "createElBgColor_", "createElWinColor_", "createElColors_", "createElFont_", "createElControls_", "defaultsDescription", "setValues", "ttDisplay", "subsCapsBtn", "subsCapsButton", "ccBtn", "captionsButton", "ResizeManager", "ResizeManager2", "RESIZE_OBSERVER_AVAILABLE", "ResizeObserver", "loadListener_", "resizeObserver_", "debouncedHandler_", "resizeHandler", "observe", "contentWindow", "unloadListener_", "unobserve", "disconnect", "resizeObserver", "defaults2", "trackingThreshold", "liveTolerance", "LiveTracker", "LiveTracker2", "handleVisibilityChange_", "handleVisibilityChange", "trackLiveHandler_", "trackLive_", "handlePlay_", "handleFirstTimeupdate_", "handleFirstTimeupdate", "handleSeeked_", "seekToLiveEdge_", "reset_", "handleDurationchange", "toggleTracking", "deltaTime", "lastTime_", "pastSeekEnd_", "pastSeekEnd", "isBehind", "seekedBehindLive_", "timeupdateSeen_", "behindLiveEdge_", "liveui", "isTracking", "hasStarted", "trackingInterval_", "timeDiff", "nextSeekedFromUser_", "lastSeekEnd_", "seekableEnds", "sort", "seekableStarts", "behindLiveEdge", "sourcesetLoad", "srcUrls", "innerHTMLDescriptorPolyfill", "cloneNode", "dummy", "docFrag", "createDocumentFragment", "Element", "getDescriptor", "priority", "descriptor", "getInnerHTMLDescriptor", "HTMLMediaElement", "firstSourceWatch", "resetSourceWatch_", "innerDescriptor", "appendWrapper", "appendFn", "retval", "srcDescriptorPolyfill", "getSrcDescriptor", "setupSourceset", "resetSourceset_", "srcDescriptor", "oldSetAttribute", "oldLoad", "currentSrc", "defineLazyProperty", "getValue", "setter", "set2", "Html5", "Html52", "crossoriginTracks", "initNetworkState_", "handleLateInit_", "enableSourceset", "setupSourcesetHandling_", "isScrubbing_", "hasChildNodes", "nodes", "nodesLength", "removeNodes", "proxyNativeTracks_", "restoreMetadataTracksInIOSNativePlayer_", "setControls", "proxyWebkitFullscreen_", "disposeMediaElement", "metadataTracksPreFullscreenState", "takeMetadataTrackSnapshot", "storedMode", "restoreTrackMode", "restoreTrackMode2", "storedTrack", "overrideNative_", "override", "lowerCaseType", "eventName", "elTracks", "proxyNativeTracksForType_", "techTracks", "listeners", "currentTarget", "removeOldTracks", "removeTracks", "found", "playerElIngest", "movingMediaElementInDOM", "clone", "tagAttributes", "techId", "playerId", "preload", "settingsAttrs", "attr", "networkState", "loadstartFired", "setLoadstartFired", "triggerLoadstart", "eventsToTrigger", "isScrubbing", "fastSeek", "checkProgress", "checkProgress2", "NaN", "endFn", "beginFn", "webkitPresentationMode", "nativeIOSFullscreen", "supportsFullScreen", "webkitEnterFullScreen", "enterFullScreen", "HAVE_METADATA", "exitFullScreen", "webkitDisplayingFullscreen", "webkitExitFullScreen", "webkitKeys", "resetMediaElement", "videoPlaybackQuality", "webkitDroppedFrameCount", "webkitDecodedFrameCount", "droppedVideoFrames", "totalVideoFrames", "creationTime", "timing", "navigationStart", "TEST_VID", "canControlVolume", "canControl", "canMuteVolume", "canControlPlaybackRate", "canOverrideAttributes", "supportsNativeTextTracks", "supportsNativeVideoTracks", "videoTracks", "supportsNativeAudioTracks", "Events", "patchCanPlayType", "mpegurlRE", "unpatchCanPlayType", "TECH_EVENTS_RETRIGGER", "TECH_EVENTS_QUEUE", "canplay", "canplaythrough", "playing", "seeked", "BREAKPOINT_ORDER", "BREAKPOINT_CLASSES", "charAt", "DEFAULT_BREAKPOINTS", "tiny", "xsmall", "small", "medium", "large", "xlarge", "huge", "Player", "getTagSettings", "closest", "boundDocumentFullscreenChange_", "documentFullscreenChange_", "boundFullWindowOnEscKey_", "fullWindowOnEscKey", "boundUpdateStyleEl_", "updateStyleEl_", "boundApplyInitTime_", "applyInitTime_", "boundUpdateCurrentBreakpoint_", "updateCurrentBreakpoint_", "boundHandleTechClick_", "handleTechClick_", "boundHandleTechDoubleClick_", "handleTechDoubleClick_", "boundHandleTechTouchStart_", "handleTechTouchStart_", "boundHandleTechTouchMove_", "handleTechTouchMove_", "boundHandleTechTouchEnd_", "handleTechTouchEnd_", "boundHandleTechTap_", "handleTechTap_", "isFullscreen_", "isPosterFromTech_", "queuedCallbacks_", "userActive_", "debugEnabled_", "audioOnlyMode_", "audioPosterMode_", "audioOnlyCache_", "playerHeight", "hiddenChildren", "languagesToLower", "languages_", "resetCache_", "poster_", "controls_", "changingSrc_", "playCallbacks_", "playTerminatedQueue_", "plugins", "scrubbing_", "fullscreenchange", "fluid_", "playerOptionsCopy", "middleware_", "flexNotSupported_", "majorVersion", "userActive", "listenForUserActivity_", "handleStageClick_", "breakpoints", "styleEl_", "playerElIngest_", "divEmbed", "tabindex", "VIDEOJS_NO_DYNAMIC_STYLE", "defaultsStyleEl", "head2", "fill_", "fluid", "crossorigin", "links", "linkEl", "techGet_", "techCall_", "_dimension", "privDimension", "parsedVal", "ratio", "aspectRatio_", "width_", "_height", "height_", "techEl", "idClass", "videoWidth", "videoHeight", "ratioParts", "ratioMultiplier", "unloadTech_", "titleTechName", "camelTechName", "techName_", "normalizeAutoplay", "techOptions", "techCanOverridePoster", "TechClass", "handleTechReady_", "textTracksJson_", "eventObj", "seeking", "handleTechLoadStart_", "handleTechSourceset_", "handleTechWaiting_", "handleTechEnded_", "handleTechSeeking_", "handleTechPlay_", "handleTechFirstPlay_", "handleTechPause_", "handleTechDurationChange_", "handleTechFullscreenChange_", "handleTechFullscreenError_", "handleTechEnterPictureInPicture_", "handleTechLeavePictureInPicture_", "handleTechError_", "handleTechPosterChange_", "handleTechTextData_", "handleTechRateChange_", "usingNativeControls", "addTechControlsListeners_", "safety", "removeTechControlsListeners_", "manualAutoplay_", "resolveMuted", "previouslyMuted", "restoreMuted", "mutedPromise", "promise", "updateSourceCaches_", "sourceElSources", "sourceEls", "matchingSourceEls", "sourceObj", "updateSourceCaches", "playerSrc", "currentSource", "eventSrc", "lastSource_", "techSrc", "techGet", "request", "lastPlaybackRate", "queued", "timeWhenWaiting", "timeUpdateListener", "timeUpdateListener2", "handleTechCanPlay_", "handleTechCanPlayThrough_", "handleTechPlaying_", "handleTechSeeked_", "starttime", "userActions", "click", "inAllowedEls", "doubleClick", "userWasActive", "cancelable", "toggleFullscreenClass_", "targetPlayer", "isFs", "fullscreen", "msMatchesSelector", "_this9", "togglePictureInPictureClass_", "initTime", "inactivityTimeout", "defaultPlaybackRate", "media", "_this10", "play_", "_this11", "isSrcReady", "isSafariOrIOS", "waitToPlay_", "isNativeReplay", "resetProgressBar_", "runPlayTerminatedQueue_", "runPlayCallbacks_", "queue2", "q", "callbacks", "buffered2", "percentAsDecimal", "_muted", "defaultMuted", "_defaultMuted", "isFS", "oldValue", "fullscreenOptions", "offHandler", "errorHandler", "requestFullscreenHelper_", "_this12", "fsOptions", "preferFullWindow", "enterFullWindow", "exitFullscreenHelper_", "_this13", "exitFullWindow", "isFullWindow", "docOrigOverflow", "overflow", "isPiP", "isInPictureInPicture_", "hotkeys", "excludeElement", "isContentEditable", "allowedInputTypes", "excludedTags", "handleHotkeys", "_hotkeys$fullscreenKe", "fullscreenKey", "keydownEvent", "_hotkeys$muteKey", "muteKey", "_hotkeys$playPauseKey", "playPauseKey", "FSToggle", "selectSource", "_this14", "techs", "findFirstPassingTechSourcePair", "outerArray", "innerArray", "tester", "outerChoice", "innerChoice", "foundSourceAndTech", "flip", "finder", "_ref2", "sourceOrder", "handleSrc_", "isRetry", "_this15", "resetRetryOnError_", "notSupportedMessage", "middlewareSource", "src_", "retryOnError", "retry", "stopListeningForErrors", "_this16", "sourceTech", "_this17", "doReset_", "resetControlBarUI_", "resetPlaybackRate_", "resetVolumeBar_", "_ref3", "durationDisplay", "currentSources", "techAutoplay", "newPoster", "usingNativeControls_", "_this18", "hookFunction", "newErr", "suppressNotSupportedError", "triggerSuppressedError", "errorDisplay", "userActivity_", "mouseInProgress", "lastMoveX", "lastMoveY", "handleActivity", "screenX", "screenY", "handleMouseUpAndMouseLeave", "isAudio_", "enableAudioOnlyUI_", "_this19", "playerChildren", "controlBarHeight", "disableAudioOnlyUI_", "_this20", "exitPromises", "enablePosterModeUI_", "disablePosterModeUI_", "_this21", "audioOnlyModePromise", "_obj", "toJSON", "createModal", "_this22", "modal", "currentBreakpoint", "candidateBreakpoint", "maxWidth", "breakpoints_", "breakpoint_", "removeCurrentBreakpoint_", "currentBreakpointClass", "_breakpoints", "responsive_", "loadMedia", "_this23", "_this$cache_$media", "artwork", "tt", "getMedia", "baseOptions", "tagOptions", "dataSetup", "_safeParseTuple", "childName", "previousLogLevel_", "newRates", "navigator2", "html5", "userLanguage", "navigationUI", "BASE_PLUGIN_NAME", "PLUGIN_CACHE_KEY", "pluginStorage", "pluginExists", "getPlugin", "markPluginAsActive", "triggerSetupEvent", "before", "createBasicPlugin", "plugin", "basicPluginWrapper", "createPluginFactory", "PluginSubClass", "getEventHash", "Plugin2", "Plugin3", "VERSION", "isBasic", "registerPlugin", "deregisterPlugin", "getPlugins", "getPluginVersion", "hasPlugin", "hasLogged", "extend2", "superClass", "subClassMethods", "subClass", "methods", "super_", "normalizeId", "getPlayer", "defaultView", "PlayerComponent", "head", "getPlayers", "nId", "_tag", "_player", "getAllPlayers", "comp", "writeable", "browser", "extend", "_mergeOptions", "createTimeRange", "EventTarget", "dom", "coreExports", "randomString", "chars2", "charsLength", "randomArray", "crypto", "getRandomValues", "getStoredVolume", "getLocalStorage", "valueNumber", "getStoredMute", "getStoredTheater", "saveVolumeInStore", "setLocalStorage", "saveMuteInStore", "saveTheaterInStore", "saveAverageBandwidth", "getAverageBandwidthInStore", "saveLastSubtitle", "getStoredLastSubtitle", "savePreferredSubtitle", "getStoredPreferredSubtitle", "saveVideoWatchHistory", "videoUUID", "__spreadProps", "__spreadValues", "getStoredVideoWatchHistory", "date", "toISOString", "cleanupVideoWatch", "newData", "getTime", "getPlayerSessionId", "sessionId", "getSessionStorage", "setSessionStorage", "KEY_PREFIX", "getPauseBezel", "getPlayBezel", "Component$e", "PauseBezel", "firstPlayDone", "playerPauseHandler", "showBezel", "playerPlayHandler", "videoChangeHandler", "Plugin$g", "BezelsPlugin", "MenuItem$2", "ContextMenuItem", "contextMenu", "newEl", "Menu$2", "ContextMenu", "findElPosition", "docEl", "pageXOffset", "pageYOffset", "boxY", "boxX", "Plugin$f", "ContextMenuPlugin", "onContextMenuBind", "onContextMenu", "hasMenu", "excludeElements", "pointerPosition", "playerSize", "menuPosition", "findMenuPosition", "documentEl", "menuEl", "menuSize", "bodySize", "targetEl", "Button$4", "CaptionToggleButton", "toEnable", "getShowing", "getCaptionToEnable", "listCaptions", "find", "captionToEnable", "ClickableComponent$2", "ProgressBarMarkerComponent", "updateMarker", "hasValidDuration", "setProperty", "buildLeftStyle", "timecode", "Plugin$e", "ChaptersPlugin", "markers", "chapter", "marker", "activeChapter", "getSeekBar", "getChapter", "fixedTimecode", "Button$3", "NextPreviousVideoButton", "updateDisabled", "nextIcon", "isDisabled", "isDisplayed", "toTitleCase", "dictionaryBytes", "decimals", "bytes", "getRtcConfig", "stunServers", "iceServers", "urls", "Button$2", "P2PInfoButton", "subDivP2P", "downloadIcon", "ariaLabel", "downloadSpeedText", "downloadSpeedNumber", "downloadSpeedUnit", "uploadIcon", "uploadSpeedText", "uploadSpeedNumber", "uploadSpeedUnit", "peersText", "peersNumber", "subDivHttp", "subDivHttpText", "_event", "p2pStats", "httpStats", "http", "downloadSpeed", "uploadSpeed", "totalDownloaded", "downloaded", "totalUploaded", "uploaded", "numPeers", "peersWithWebSeed", "downloadedFromServer", "downloadedFromPeers", "Component$d", "PeerTubeLinkButton", "mouseEnterHandler", "buildLink", "instanceName", "updateHref", "ClickableComponent$1", "PeerTubeLiveDisplay", "updateClass", "updateSync", "hlsjs", "getHLSJS", "liveSyncPosition", "isSync", "p2pMediaLoader", "Plugin$d", "StoryboardPlugin", "sprites", "boundedHijackMouseTooltip", "hijackMouseTooltip", "init", "_b", "_c", "_d", "_e", "progressControl", "mouseTimeTooltip", "spritePlaceholder", "onReadyOrLoadstartHandler", "spriteSource", "spriteOpts", "cached", "spriteEvents", "isReady", "resetMouseTooltip", "sprite", "imgWidth", "naturalWidth", "imgHeight", "naturalHeight", "complete", "seekBarX", "playerWidth", "scaleFactor", "columns", "scaledWidth", "scaledHeight", "cleft", "ctop", "bgSize", "topOffset", "previewHalfSize", "minLeft", "maxLeft", "tooltipStyle", "Button$1", "_TheaterButton", "theaterButtonOptions", "THEATER_MODE_CLASS", "handleTheaterChange", "theaterEnabled", "isTheaterEnabled", "TheaterButton", "TimeToolTip", "TimeTooltip", "currentTimecode", "timecodeStr", "Component$c", "PeerTubeDockComponent", "avatarUrl", "avatar", "elWrapperTitleDescription", "Plugin$c", "PeerTubeDockPlugin", "dockComponent", "Component$b", "PeerTubeNSFWComponent", "flags", "summary", "moreButton", "appendMoreContent", "moreContentEl", "moreContentFlags", "buildFlagStrings", "moreContentSummary", "flagStrings", "Plugin$b", "PeerTubeNSFWPlugin", "nsfwComponent", "Plugin$a", "_PeerTubeHotkeysPlugin", "buildHandlers", "handleKeyFunction", "onKeyDown", "isValidKeyTarget", "accept", "isNaked", "VOLUME_STEP", "altKey", "ctrlKey", "dist", "buildVODHandlers", "SEEK_STEP", "isNakedOrShift", "eventEl", "currentElTagName", "metaKey", "getLatinKey", "startsWith", "PeerTubeHotkeysPlugin", "getDefaultExportFromCjs$3", "browser$3", "process$2", "cachedSetTimeout$1", "cachedClearTimeout$1", "defaultSetTimout$1", "defaultClearTimeout$1", "runTimeout$1", "fun", "runClearTimeout$1", "queue$1", "draining$1", "currentQueue$1", "queueIndex$1", "cleanUpNextTick$1", "drainQueue$1", "len", "run", "nextTick", "Item$1", "env", "argv", "versions", "noop$3", "addListener", "once", "removeListener", "removeAllListeners", "emit", "prependListener", "prependOnceListener", "binding", "cwd", "chdir", "umask", "browserExports$3", "process$1$1", "browser$2", "ms$1", "hasRequiredMs$1", "requireMs$1", "isFinite", "long", "fmtLong", "fmtShort", "msAbs", "plural", "isPlural", "common$3", "hasRequiredCommon$1", "requireCommon$1", "setup", "createDebug", "coerce", "humanize", "destroy", "skips", "formatters", "selectColor", "namespace", "colors", "prevTime", "enableOverride", "namespacesCache", "enabledCache", "debug2", "curr", "diff", "prev", "formatter", "formatArgs", "useColors", "namespaces", "delimiter", "newDebug", "save", "ns", "matchesTemplate", "template", "searchIndex", "templateIndex", "starIndex", "matchIndex", "skip", "hasRequiredBrowser$1", "requireBrowser$1", "storage", "localstorage", "warned", "process", "__nwjs", "WebkitAppearance", "firebug", "exception", "table", "lastC", "DEBUG", "browserExports$2", "debug$5", "debugLogger$8", "Plugin$9", "MetricsPlugin", "downloadedBytesP2P", "downloadedBytesHTTP", "uploadedBytesP2P", "resolutionChanges", "bufferStalled", "p2pPeers", "trackBytes", "trackResolutionChange", "trackErrors", "trackBufferStalled", "runMetricsIntervalOnPlay", "metricsInterval", "lastPlayerNetworkInfo", "runMetricsInterval", "metricsUrl", "getCurrentLevel", "framerate", "videoFile", "webVideo", "getCurrentVideoFile", "playerMode", "p2pEnabled", "videoId", "_f", "_g", "_h", "peersP2POnly", "_", "initResolutionChange", "Component$a", "PeerTubeMobileButtons", "mainButton", "touchStartHandler", "rewind", "forward", "rewindText", "forwardText", "displayFastSeek", "amount", "hideRewind", "hideForward", "displayForward", "displayRewind", "debugLogger$7", "Plugin$8", "_PeerTubeMobilePlugin", "seekAmount", "screen", "orientation", "handleFullscreenRotation", "peerTubeMobileButtons", "onPlayHandler", "initTouchStartEvents", "sliderActiveHandler", "sliderInactiveHandler", "onFullScreenChangeHandler", "onTouchStartHandler", "onMobileButtonTouchStartHandler", "isPortraitVideo", "lock", "handleTouchStart", "onlyDetectDoubleTap", "tapTimeout", "doubleTapping", "lastTapEvent", "timeStamp", "DOUBLE_TAP_DELAY_MS", "onDoubleTap", "newActiveState", "findPlayerTarget", "targetTouches", "scheduleSetCurrentTime", "parentElement", "setCurrentTimeTimeout", "SET_CURRENT_TIME_DELAY", "PeerTubeMobilePlugin", "isFiniteNumber", "isSafeInteger", "MAX_SAFE_INTEGER", "ErrorTypes", "ErrorTypes2", "ErrorDetails", "ErrorDetails2", "PlaylistContextType", "MANIFEST", "LEVEL", "AUDIO_TRACK", "SUBTITLE_TRACK", "PlaylistLevelType", "MAIN", "AUDIO", "SUBTITLE", "EWMA", "halfLife", "estimate", "weight", "alpha_", "estimate_", "totalWeight_", "exp", "sample", "adjAlpha", "pow", "getTotalWeight", "getEstimate", "zeroFactor", "EwmaBandWidthEstimator", "slow", "fast", "defaultEstimate", "defaultTTFB", "defaultEstimate_", "minWeight_", "minDelayMs_", "slow_", "fast_", "defaultTTFB_", "ttfb_", "durationMs", "numBytes", "numBits", "durationS", "bandwidthInBps", "sampleTTFB", "ttfb", "canEstimate", "getEstimateTTFB", "_defineProperty", "_toPropertyKey", "_extends", "ownKeys", "getOwnPropertySymbols", "r2", "_objectSpread2", "getOwnPropertyDescriptors", "_toPrimitive", "toPrimitive", "Logger2", "logger2", "trace", "lb", "noop$2", "fakeLogger", "consolePrintFn", "getLoggerFn", "debugConfig", "exportedLogger", "enableLogs", "newLogger", "getMediaSource", "preferManagedMediaSource", "MediaSource", "ManagedMediaSource", "WebKitMediaSource", "isManagedMediaSource", "isCompatibleTrackChange", "currentTracks", "requiredTracks", "trackNames", "requiredTrackNames", "trackCount", "requiredTrackCount", "utf8ArrayToStr", "exitOnNull", "decoded", "idx", "char2", "char3", "out", "Hex", "hexDump", "hexToArrayBuffer", "getDefaultExportFromCjs$2", "urlToolkit", "hasRequiredUrlToolkit", "requireUrlToolkit", "root", "URL_REGEX", "FIRST_SEGMENT_REGEX", "SLASH_DOT_REGEX", "SLASH_DOT_DOT_REGEX", "URLToolkit", "buildAbsoluteURL", "baseURL", "relativeURL", "alwaysNormalize", "basePartsForNormalise", "parseURL", "normalizePath", "buildURLFromParts", "relativeParts", "scheme", "baseParts", "netLoc", "builtParts", "query", "fragment", "baseURLPath", "newPath", "lastIndexOf", "urlToolkitExports", "LoadStats", "loaded", "total", "chunkCount", "bwEstimate", "loading", "first", "parsing", "buffering", "ElementaryStreamTypes", "VIDEO", "AUDIOVIDEO", "BaseSegment", "_byteRange", "_url", "_stats", "_streams", "relurl", "makeEnumerable", "setByteRange", "previous", "byteRangeEndOffset", "baseurl", "byteRange", "byteRangeStartOffset", "elementaryStreams", "hasStats", "hasStreams", "stats", "clearElementaryStreamInfo", "isMediaFragment", "frag", "sn", "Fragment", "_decryptdata", "_programDateTime", "_bitrate", "rawProgramDateTime", "tagList", "levelkeys", "loader", "keyLoader", "cc", "startPTS", "endPTS", "startDTS", "endDTS", "playlistOffset", "deltaPTS", "maxStartPTS", "minEndPTS", "bitrateTest", "initSegment", "endList", "gap", "urlId", "byteLength", "bitrate", "decryptdata", "identity", "getDecryptData", "keyFormats", "endProgramDateTime", "programDateTime", "encrypted", "_this$_decryptdata", "ref", "addStart", "setStart", "setDuration", "setKeyFormat", "keyFormat", "abortRequests", "_this$loader", "_this$keyLoader", "setElementaryStreamInfo", "partial", "Part", "partAttrs", "fragOffset", "independent", "decimalFloatingPoint", "enumeratedString", "audiovideo", "getOwnPropertyDescriptorFromPrototypeChain", "property", "getPrototypeOf", "propertyDescriptor", "UINT32_MAX$1", "RemuxerTrackIdConfig", "id3", "bin2str", "readUint16", "offset", "readUint32", "readSint32", "readUint64", "hasMoofData", "findBox", "results", "subarray", "endbox", "subresults", "parseSegmentIndex", "sidx", "references", "timescale", "earliestPresentationTime", "firstOffset", "startByte", "referencesCount", "referenceIndex", "referenceInfo", "referenceSize", "subsegmentDuration", "parseInitSegment", "traks", "trak", "tkhd", "trackId", "mdhd", "hdlr", "hdlrType", "soun", "vide", "stsdBox", "stsd", "parseStsd", "trex", "trex2", "sampleEntries", "sampleEntriesEnd", "fourCC", "codec", "supplemental", "encBoxChildren", "sinf", "schm", "frma", "codecFourCC", "avcCBox", "toHex", "parseSupplementalDoViCodec", "codecBox", "esdsBox", "skipBERInteger", "objectType", "firstByte", "audioObjectType", "hvcCBox", "profileByte", "profileSpace", "generalProfileIdc", "profileCompat", "tierFlag", "levelIDC", "constraintIndicator", "reverse32BitInt", "constraintString", "byte", "vpcCBox", "profile", "bitDepth", "addLeadingZero", "av1CBox", "highBitDepth", "twelveBit", "monochrome", "chromaSubsamplingX", "chromaSubsamplingY", "chromaSamplePosition", "dvvCResult", "dvXCBox", "doViProfile", "doViLevel", "bytes2", "limit", "patchEncyptionData", "keyId", "isCommonEncryption", "encBoxes", "enc", "tenc", "parseSinf", "tencKeyId", "getSampleData", "initData", "trafs", "traf", "tfhd", "trackTimes", "sampleCount", "tfdt", "baseTime", "trackDefault", "tfhdFlags", "defaultSampleDuration", "truns", "sampleDTS", "rawDuration", "sampleDuration", "trun", "sampleIndex", "dataOffsetPresent", "firstSampleFlagsPresent", "sampleDurationPresent", "sampleSizePresent", "sampleFlagsPresent", "sampleCompositionTimeOffsetPresent", "remaining", "keyFrameIndex", "keyFrameStart", "sidxMinStart", "sidxMaxEnd", "sidxs", "subSegmentDuration", "dur", "segmentValidRange", "segmentedRange", "valid", "remainder", "moofs", "byteOffset", "appendUint8Array", "data1", "data2", "parseSamples", "timeOffset", "seiSamples", "videoData", "samples", "isHEVCFlavor", "moof", "moofOffset", "baseDataOffsetPresent", "sampleDescriptionIndexPresent", "defaultSampleDurationPresent", "defaultSampleSizePresent", "defaultSampleSize", "defaultSampleFlagsPresent", "tfhdOffset", "isHEVC", "dataOffset", "sampleSize", "sampleCompositionOffsetsPresent", "compositionOffset", "trunOffset", "sampleOffset", "ix", "naluTotalSize", "naluSize", "isSEIMessage", "parseSEIMessageFromNALu", "baseCodec", "naluHeader", "naluType", "unescapedData", "headerSize", "pts", "discardEPB", "seiPtr", "payloadType", "payloadSize", "leftOver", "payPtr", "providerCode", "userStructure", "userDataType", "totalCCs", "totalBytes", "byteArray", "uuidStrArray", "userDataBytes", "uuid", "userData", "EPBPositions", "newLength", "sourceIndex", "parseEmsg", "schemeIdUri", "timeScale", "presentationTimeDelta", "presentationTime", "eventDuration", "leftPresentationTime", "rightPresentationTime", "mp4Box", "mp4pssh", "systemId", "keyids", "RangeError", "kids", "kidCount", "DataView", "setUint32", "dataSize", "userAgentHevcSupportIsInaccurate", "sampleEntryCodesISO", "a3ds", "alac", "alaw", "dra1", "dtsc", "dtse", "dtsh", "enca", "fLaC", "FLAC", "g719", "g726", "m4ae", "mha1", "mha2", "mhm1", "mhm2", "mlpa", "mp4a", "Opus", "samr", "sawb", "sawp", "sevc", "sqcp", "ssmv", "twos", "ulaw", "avc1", "avc2", "avc3", "avc4", "avcp", "av01", "dav1", "drac", "dva1", "dvav", "dvh1", "dvhe", "encv", "hev1", "hvc1", "mjp2", "mp4v", "mvc1", "mvc2", "mvc3", "mvc4", "resv", "rv60", "s263", "svc1", "svc2", "vp08", "vp09", "stpp", "wvtt", "isCodecType", "typeCodes", "areCodecsMediaSourceSupported", "codecs", "isCodecMediaSourceSupported", "_MediaSource$isTypeSu", "isTypeSupported", "mimeTypeForCodec", "videoCodecPreferenceValue", "videoCodec", "codecsSetSelectionPreferenceValue", "codecSet", "limitedHevcSupport", "preferenceValue", "CODEC_COMPATIBLE_NAMES", "getCodecCompatibleNameLower", "lowerCaseCodec", "codecsToCheck", "_getMediaSource", "AUDIO_CODEC_REGEXP", "getCodecCompatibleName", "replaceVideoCodec", "originalCodecs", "newVideoCodec", "allCodecs", "pickMostCompleteCodecName", "parsedCodec", "levelCodec", "isCodecSupportedAsType", "levelCodecs", "convertAVC1ToAVCOTI", "videoCodecs", "avcdata", "fillInMissingAV01Params", "av1params", "placeholders", "getM2TSSupportedAudioTypes", "mpeg", "ac3", "getCodecsForMimeType", "mimeType", "SUPPORTED_INFO_DEFAULT", "supported", "configurations", "decodingInfoResults", "powerEfficient", "smooth", "getUnsupportedResult", "requiresMediaCapabilitiesDecodingInfo", "audioTracksByGroup", "currentVideoRange", "currentFrameRate", "currentBw", "audioPreference", "audioGroups", "audioCodec", "audioCodecPreference", "channelsPreference", "channels", "maxChannels", "audioChannels", "groupId", "audioTrackGroup", "frameRate", "videoRange", "getMediaDecodingInfoPromise", "mediaCapabilities", "cache", "videoDecodeList", "makeVideoConfigurations", "videoCount", "audioDecodeList", "makeAudioConfigurations", "audioCount", "configuration", "audioBitrate", "ua", "decodingInfoKey", "getMediaDecodingInfoKey", "decodingInfo", "_level$videoCodec", "getVariantDecodingBitrate", "videoConfiguration", "transferFunction", "hasVideo", "_level$audioCodec", "audioCodecs", "combinedBitrate", "audioGroupId", "_audioTracksByGroup$g", "configs", "audioTrack", "channelsNumber", "audioConfiguration", "estimatedAudioBitrate", "levelBitrate", "averageBitrate", "HdcpLevels", "isHdcpLevel", "VideoRangeValues", "isVideoRange", "HlsSkip", "No", "Yes", "v2", "getSkipValue", "canSkipUntil", "canSkipDateRanges", "age", "playlistRecentEnough", "HlsUrlParameters", "msn", "addDirectives", "Level", "_attrs", "fragmentError", "loadError", "realBitrate", "supportedPromise", "supportedResult", "_avgBitrate", "_audioGroups", "_subtitleGroups", "_urlId", "optionalFloat", "decimalInteger", "_data$supplemental", "supplementalVideo", "addGroupId", "SUBTITLES", "maxBitrate", "CODECS", "pathwayId", "score", "hasAudioGroup", "hasGroup", "hasSubtitleGroup", "subtitleGroups", "audioGroupIds", "textGroupIds", "textGroupId", "_this$audioGroups", "_this$subtitleGroups", "addFallback", "isHdrSupported", "matchMedia", "mediaQueryList", "badQuery", "getVideoSelectionOptions", "videoPreference", "preferHDR", "allowedVideoRanges", "allowAutoPreferHDR", "omitCircularRefsReplacer", "replacer", "known", "WeakSet", "getStartCodecTier", "codecTiers", "codecSets", "videoCodecPreference", "preferStereo", "hasStereo", "hasCurrentVideoRange", "minHeight", "minFramerate", "minBitrate", "minIndex", "selectedScore", "videoRanges", "tier", "range", "maxHeight", "maxFramerate", "hasMultipleSets", "candidate", "candidateTier", "logStartCodecCandidateIgnored", "hasDefaultAudio", "maxScore", "codeSet", "getAudioTracksByGroup", "allAudioTracks", "trackGroup", "hasDefault", "hasAutoSelect", "channelsKey", "autoselect", "hasAutoSelectAudio", "getCodecTiers", "minAutoLevel", "maxAutoLevel", "tiers", "SDR", "lesserWidthOrHeight", "audioGroup", "getBasicSelectionOption", "option", "assocLang", "characteristics", "findMatchingOption", "matchPredicate", "matchesOption", "isDefault", "forced", "languagesMatch", "characteristicsMatch", "languageA", "languageB", "characteristicsA", "characteristicsB", "arrA", "arrB", "audioMatchPredicate", "findClosestLevelWithAudioGroup", "currentLevel", "renditions", "variantMap", "renditions2", "currentVideoCodec", "matchingVideo", "searchDownAndUpList", "arr", "useAlternateAudio", "audioTrackUrl", "hls", "_hls$loadLevelObj", "loadLevelObj", "AbrController", "_hls", "lastLevelLoadSec", "lastLoadedFragLevel", "firstSelection", "_nextAutoLevel", "nextAutoLevelKey", "timer", "fragCurrent", "partCurrent", "bitrateTestDelay", "rebufferNotice", "supportedCache", "bwEstimator", "_abandonRulesCheck", "levelLoaded", "autoLevelEnabled", "timeLoading", "loadingFragForLevel", "currentAutoLevel", "clearTimer", "fragBlockingSwitch", "levelChange", "bufferInfo", "mainForwardBufferInfo", "ttfbEstimate", "bufferStarvationDelay", "loadedFirstByte", "getBwEstimate", "expectedLen", "timeStreaming", "loadRate", "ttfbSeconds", "fragLoadedDelay", "bwe", "live", "latestLevelDetails", "abrBandWidthUpFactor", "fragLevelNextLoadedDelay", "POSITIVE_INFINITY", "nextLoadLevel", "levelNextBitrate", "requiresLevelLoad", "getTimeToLoadFrag", "nextLoadLevelBitrate", "resetEstimator", "bestSwitchLevel", "findBestLevel", "nextAutoLevel", "abortAndSwitch", "loadLevel", "bufferStarvationDelay2", "getStarvationDelay", "lowestSwitchLevel", "FRAG_LOAD_EMERGENCY_ABORTED", "initEstimator", "registerListeners", "abrEwmaDefaultEstimate", "abrEwmaSlowVoD", "abrEwmaFastVoD", "MANIFEST_LOADING", "onManifestLoading", "FRAG_LOADING", "onFragLoading", "FRAG_LOADED", "onFragLoaded", "FRAG_BUFFERED", "onFragBuffered", "LEVEL_SWITCHING", "onLevelSwitching", "LEVEL_LOADED", "onLevelLoaded", "LEVELS_UPDATED", "onLevelsUpdated", "MAX_AUTO_LEVEL_UPDATED", "onMaxAutoLevelUpdated", "onError", "unregisterListeners", "ignoreFragment", "_data$part", "fatal", "BUFFER_ADD_CODEC_ERROR", "BUFFER_APPEND_ERROR", "FRAG_LOAD_TIMEOUT", "timeToFirstByteSec", "bandwidth", "fragSizeBits", "isSwitch", "fragLoadSec", "playlistLoadSec", "timeLoadingMs", "abrEwmaSlowLive", "abrEwmaFastLive", "levelInfo", "abrMaxWithRealBitrate", "loadedBytes", "loadedDuration", "fragBufferedData", "processingMs", "firstAutoLevel", "maxStartDelay", "maxStarvationDelay", "abrAutoLevel", "firstLevel", "clamped", "forcedAutoLevel", "useEstimate", "loadedFirstFrag", "getAutoLevelKey", "nextABRAutoLevel", "getNextABRAutoLevel", "currentFragDuration", "avgbw", "bwFactor", "abrBandWidthFactor", "bwUpFactor", "_bestLevel", "maxLoadingDelay", "bestLevel", "minLevel", "autoLevel", "_this$hls$latestLevel", "maxFetchDuration", "selectionBaseLevel", "currentCodecSet", "minStartIndex", "startTier", "ttfbEstimateSec", "levelsSkipped", "_levelInfo$supportedR", "_levelInfo$supportedR2", "upSwitch", "useMediaCapabilities", "levels2", "removeLevel", "levelDetails", "avgDuration", "partTarget", "averagetargetduration", "adjustedbw", "fetchDuration", "nextLevel", "deriveNextAutoLevel", "BinarySearch", "comparisonFn", "currentElement", "comparisonResult", "findFragmentByPDT", "fragments", "PDTValue", "maxFragLookUpTolerance", "startPDT", "endPDT", "seg", "pdtWithinToleranceTest", "findFragmentByPTS", "fragPrevious", "bufferEnd", "nextFragLookupTolerance", "fragNext", "bufferEdgeError", "fragmentWithinToleranceTest", "fragmentWithinFastStartSwitch", "foundFragment", "firstDuration", "candidateLookupTolerance", "pdtBufferEnd", "findNearestWithCC", "startCC", "endCC", "fragmentHint", "isTimeoutError", "KEY_LOAD_TIMEOUT", "LEVEL_LOAD_TIMEOUT", "MANIFEST_LOAD_TIMEOUT", "getRetryConfig", "loadPolicy", "isTimeout", "getRetryDelay", "retryConfig", "retryCount", "backoffFactor", "backoff", "retryDelayMs", "maxRetryDelayMs", "getLoaderConfigWithoutReties", "loderConfig", "errorRetry", "timeoutRetry", "shouldRetry", "loaderResponse", "httpStatus", "maxNumRetry", "retryForHttpStatus", "onLine", "NetworkErrorAction", "DoNothing", "SendAlternateToPenaltyBox", "RemoveAlternatePermanently", "RetryRequest", "ErrorActionFlags", "None", "MoveAllAlternatesMatchingHost", "MoveAllAlternatesMatchingHDCP", "ErrorController", "playlistError", "penalizedRenditions", "LEVEL_UPDATED", "onLevelUpdated", "onErrorOut", "startLoad", "startPosition", "stopLoad", "getVariantLevelIndex", "_data$frag", "FRAG_LOAD_ERROR", "KEY_LOAD_ERROR", "errorAction", "getFragRetryOrSwitchAction", "FRAG_PARSING_ERROR", "createDoNothingErrorAction", "FRAG_GAP", "FRAG_DECRYPT_ERROR", "action", "LEVEL_EMPTY_ERROR", "LEVEL_PARSING_ERROR", "_data$context", "_data$context$levelDe", "levelIndex", "getPlaylistRetryOrSwitchAction", "levelRetry", "getLevelSwitchAction", "LEVEL_LOAD_ERROR", "AUDIO_TRACK_LOAD_ERROR", "AUDIO_TRACK_LOAD_TIMEOUT", "SUBTITLE_LOAD_ERROR", "SUBTITLE_TRACK_LOAD_TIMEOUT", "KEY_SYSTEM_STATUS_OUTPUT_RESTRICTED", "restrictedHdcpLevel", "hdcpLevel", "keySystemError", "REMUX_ALLOC_ERROR", "_data$level", "INTERNAL_EXCEPTION", "BUFFER_APPENDING_ERROR", "BUFFER_FULL_ERROR", "LEVEL_SWITCH_ERROR", "BUFFER_STALLED_ERROR", "BUFFER_SEEK_OVER_HOLE", "BUFFER_NUDGE_ON_STALL", "KEY_SYSTEM_ERROR", "playlistLoadPolicy", "variantLevelIndex", "fragLoadPolicy", "keyLoadPolicy", "fragmentErrors", "level2", "_data$frag2", "_data$context2", "errorDetails", "preserveManualLevelOnError", "fragErrorType", "findAudioCodecAlternate", "sourceBufferName", "findVideoCodecAlternate", "playlistErrorType", "playlistErrorGroupId", "_level$audioGroups", "_level$subtitleGroups", "levelCandidate", "fragCandidate", "_data$errorAction", "sendAlternateToPenaltyBox", "resolved", "recoverMediaError", "switchLevel", "maxHdcpLevel", "FragmentState", "NOT_LOADED", "APPENDING", "PARTIAL", "OK", "FragmentTracker", "activePartLists", "endListFragments", "timeRanges", "bufferPadding", "hasGaps", "_registerListeners", "BUFFER_APPENDED", "onBufferAppended", "_unregisterListeners", "getAppendedFrag", "levelType", "activeParts", "activePart", "appendedPTS", "getBufferedFrag", "getFragAtPos", "fragmentEntity", "detectEvictedFragments", "elementaryStream", "timeRange", "playlistType", "appendedPart", "removeAppending", "appendedPartSn", "removeFragment", "esData", "isNotBuffered", "isTimeBuffered", "detectPartialFragments", "fragKey", "getFragmentKey", "isFragHint", "streamInfo", "getBufferedTimes", "isPartial", "removeParts", "snToKeep", "filterParts", "fragBuffered", "force", "getPartialFragment", "bestFragment", "timePadding", "bestOverlap", "isEndListAppended", "lastFragmentEntity", "getState", "removeAllFragments", "hasFragment", "hasFragments", "hasParts", "_this$activePartLists", "removeFragmentsInRange", "withGapOnly", "unbufferedOnly", "snToRemove", "_this$hls", "partlist", "partList", "_fragmentEntity$range", "_fragmentEntity$range2", "_fragmentEntity$range3", "keep", "DecrypterAesMode", "cbc", "ctr", "AESCrypto", "subtle", "iv", "aesMode", "aesIV", "decrypt", "counter", "removePadding", "outputBytes", "paddingBytes", "getUint8", "AESDecryptor", "rcon", "subMix", "Uint32Array", "invSubMix", "sBox", "invSBox", "ksRows", "keySize", "keySchedule", "invKeySchedule", "initTable", "uint8ArrayToUint32Array_", "arrayBuffer", "view2", "newArray", "getUint32", "subMix0", "subMix1", "subMix2", "subMix3", "invSubMix0", "invSubMix1", "invSubMix2", "invSubMix3", "xi", "sx", "x2", "x4", "x8", "expandKey", "keyBuffer", "sameKey", "ksRow", "invKsRow", "sbox", "networkToHostOrderSwap", "word", "inputArrayBuffer", "nRounds", "invSBOX", "initVector", "initVector0", "initVector1", "initVector2", "initVector3", "inputInt32", "Int32Array", "outputInt32", "t0", "t1", "t3", "s0", "s1", "s3", "inputWords0", "inputWords1", "inputWords2", "inputWords3", "swapWord", "FastAESKey", "subtleAlgoName", "getSubtleAlgoName", "importKey", "CHUNK_SIZE", "Decrypter", "removePKCS7Padding", "logEnabled", "softwareDecrypter", "fastAesKey", "remainderData", "currentIV", "currentResult", "useSoftware", "enableSoftwareAES", "browserCrypto", "webkitSubtle", "dataView", "ArrayBuffer", "isView", "softwareDecrypt", "decryptResult", "webCryptoDecrypt", "logOnce", "currentChunk", "getValidChunk", "onWebCryptoError", "aesKey", "splitPoint", "msg", "MIN_CHUNK_SIZE", "FragmentLoader", "partLoadTimeout", "onProgress", "LoadError", "NETWORK_ERROR", "networkDetails", "FragmentILoader", "fLoader", "DefaultILoader", "tags", "createGapLoadError", "loaderContext", "createLoaderContext", "loaderConfig", "maxLoadTimeMs", "maxRetry", "retryDelay", "maxRetryDelay", "highWaterMark", "onSuccess", "resetLoader", "resetIV", "onAbort", "INTERNAL_ABORTED", "onTimeout", "loadPart", "updateStatsFromPart", "partLoadedData", "fragStats", "partStats", "partTotal", "estTotalParts", "estLoadedParts", "estRemainingBytes", "fragLoading", "partLoading", "segment", "rangeStart", "rangeEnd", "_frag$decryptdata", "byteRangeStart", "byteRangeEnd", "isMethodFullSegmentAesCbc", "fragmentLen", "MEDIA_ERROR", "TaskLoop", "_boundTick", "_tickTimer", "_tickInterval", "_tickCallCount", "tick", "onHandlerDestroying", "onHandlerDestroyed", "clearNextTick", "hasInterval", "hasNextTick", "millis", "doTick", "tickImmediate", "ChunkMetadata", "transmuxing", "getNewPerformanceTiming", "executeStart", "executeEnd", "noopBuffered", "BufferHelper", "isBuffered", "getBuffered", "bufferedRanges", "timeRangesToArray", "maxHoleDuration", "bufferedInfo", "bufferedIndex", "buf2len", "buf2end", "bufferLen", "nextStart", "bufferStart", "VARIABLE_REPLACEMENT_REGEX", "hasVariableReferences", "substituteVariables", "parsed", "variableList", "hasVariableRefs", "variableReference", "variableName", "variableValue", "playlistParsingError", "addVariableDefinition", "parentUrl", "NAME2", "VALUE", "QUERYPARAM", "NAME", "importVariableDefinition", "sourceVariableList", "IMPORT", "DECIMAL_RESOLUTION_REGEX", "ATTR_LIST_REGEX", "AttrList", "parseAttrList", "clientAttrs", "intValue", "hexadecimalInteger", "stringValue", "hexadecimalIntegerAsNumber", "enumeratedStringList", "dict", "identifier", "decimalResolution", "quote", "lastIndex", "quotedString", "hexadecimalSequence", "CLASS_INTERSTITIAL", "isDateRangeCueAttribute", "isSCTE35Attribute", "DateRange", "dateRangeAttr", "dateRangeWithSameId", "tagCount", "_dateRangeWithSameId$", "tagAnchor", "tagOrder", "_startDate", "_endDate", "_dateAtEnd", "_cue", "_badValueForSameId", "previousAttr", "ID", "endDate", "class", "CLASS", "CUE", "pre", "post", "startDate", "dateAtEnd", "plannedDuration", "endOnNext", "isInterstitial", "isValid", "DEFAULT_TARGET_DURATION", "LevelDetails", "baseUrl", "PTSKnown", "alignedSliding", "endSN", "dateRanges", "dateRangeTagCount", "requestScheduled", "ageHeader", "advancedDateTime", "updated", "advanced", "misses", "startSN", "startTimeOffset", "targetduration", "totalduration", "canBlockReload", "skippedSegments", "recentlyRemovedDateranges", "partHoldBack", "holdBack", "preloadHint", "renditionReports", "tuneInGoal", "deltaUpdateFailed", "driftStartTime", "driftEndTime", "driftStart", "driftEnd", "encryptedFragments", "appliedTimelineOffset", "reloaded", "partSnDiff", "lastPartSn", "partIndexDiff", "lastPartIndex", "hasProgramDateTime", "levelTargetDuration", "drift", "runTime", "edge", "partEnd", "fragmentEnd", "_this$partList", "_this$fragments", "fragmentStart", "_this$fragments2", "_this$partList2", "maxPartIndex", "_this$partList3", "expired", "playlistWindowDuration", "isFullSegmentEncryption", "getAesModeFromFullSegmentMethod", "base64Decode", "base64encodedStr", "atob", "strToUtf8array", "unescape", "getKeyIdBytes", "keyIdbytes", "paddedkeyIdbytes", "changeEndianness", "swap", "cur", "convertDataUriToArrayBytes", "colonsplit", "keydata", "semicolonsplit", "commasplit", "isbase64", "optionalSelf", "KeySystems", "CLEARKEY", "FAIRPLAY", "PLAYREADY", "WIDEVINE", "KeySystemFormats", "keySystemFormatToKeySystemDomain", "keySystemDomainToKeySystemFormat", "keySystem", "getKeySystemsForConfig", "drmSystems", "widevineLicenseUrl", "keySystemsToAttempt", "requestMediaKeySystemAccess", "_optionalSelf$navigat", "getSupportedMediaKeySystemConfigurations", "drmSystemOptions", "initDataTypes", "createMediaKeySystemConfigurations", "persistentState", "distinctiveIdentifier", "sessionTypes", "sessionType", "audioCapabilities", "robustness", "audioRobustness", "encryptionScheme", "audioEncryptionScheme", "videoCapabilities", "videoRobustness", "videoEncryptionScheme", "isPersistentSessionType", "_drmSystemOptions$ses", "parsePlayReadyWRM", "keyBytes", "keyBytesUtf16", "Uint16Array", "keyByteStr", "xmlKeyBytes", "keyData", "DOMParser", "parseFromString", "nodeValue", "keyIdArray", "keyUriToKeyIdMap", "LevelKey", "clearKeyUriToKeyIdMap", "formatversions", "keyFormatVersions", "pssh", "_key$iv", "_this$iv", "createInitializationVector", "PlayReadyKeySystemUUID", "padded", "segmentNumber", "uint8View", "MASTER_PLAYLIST_REGEX", "MASTER_PLAYLIST_MEDIA_REGEX", "IS_MEDIA_PLAYLIST", "LEVEL_PLAYLIST_REGEX_FAST", "LEVEL_PLAYLIST_REGEX_SLOW", "M3U8Parser", "findGroup", "mediaGroupId", "group", "isMediaPlaylist", "parseMasterPlaylist", "contentSteering", "sessionData", "sessionKeys", "levelsWithKnownCodecs", "_level$unknownCodecs", "setCodecs", "supplementalCodecs", "unknownCodecs", "sessionAttrs", "dataId", "sessionKey", "parseKey", "variableAttributes", "contentSteeringAttributes", "parseStartTimeOffset", "stripUnknownCodecLevels", "parseMasterPlaylistMedia", "groupsByType", "textCodec", "TYPE", "medias", "LANGUAGE", "CHANNELS", "CHARACTERISTICS", "instreamId", "URI", "groupCodec", "assignCodec", "parseLevelPlaylist", "levelUrlId", "multivariantVariableList", "_LEVEL_PLAYLIST_REGEX", "programDateTimes", "currentInitSegment", "currentSN", "currentPart", "discontinuityCounter", "currentBitrate", "prevFrag", "firstPdtIndex", "createNextFrag", "nextByteRange", "serverControlAttrs", "setFragLevelKeys", "assignProgramDateTime", "value1", "value2", "assignMultipleMediaPlaylistTagOccuranceError", "assignMustAppearBeforeSegmentsError", "skipAttrs", "dateRange", "levelKey", "currentKey", "mapAttrs", "setInitSegment", "partInfAttrs", "previousFragmentPart", "preloadHintAttrs", "renditionReportAttrs", "fragmentLength", "firstFragment", "lastFragment", "lastSn", "backfillProgramDateTimes", "mapDateRanges", "programDateTimeCount", "lastProgramDateTime", "playlistEnd", "dateRangeIds", "startDateTime", "fragIndex", "findFragmentWithStartDate", "pdtFragment", "pdtStart", "_programDateTimes", "durationBetweenPdt", "startIndex", "endIndex", "fragStartDateTime", "keyTagAttributes", "_keyAttrs$METHOD", "_keyAttrs$KEYFORMAT", "keyAttrs", "decryptmethod", "METHOD", "decrypturi", "decryptiv", "decryptkeyformatversions", "KEYFORMATVERSIONS", "decryptkeyformat", "KEYFORMAT", "IV", "resolvedUri", "KEYID", "startAttributes", "codecsAttributeValue", "filtered", "groupItem", "codecProperty", "codecValue", "fragPrev", "BYTERANGE", "updateFromToPTS", "fragFrom", "fragTo", "fragToPTS", "updateFragPTSDTS", "fragStartPts", "fragEndPts", "fragIdx", "mergeDetails", "oldDetails", "newDetails", "oldFragments", "oldInit", "PTSFrag", "mapFragmentIntersection", "oldFrag", "newFrag", "newFragIndex", "newFragments2", "ccOffset", "newFragments", "fragmentsToCheck", "_currentInitSegment", "mergeDateRanges", "_fragPriorToNewStart$", "fragPriorToNewStart", "getFragmentWithSN", "mapPartIntersection", "oldPart", "newPart", "adjustSliding", "oldDateRanges", "deltaDateRanges", "mergeCount", "mergedDateRange", "oldParts", "newParts", "intersectionFn", "delta", "newFrags", "oldFrags", "getSequenceError", "matchingStableVariantOrRendition", "advancedOrStable", "sliding", "addSliding", "computeReloadInterval", "distanceToLiveEdgeMs", "reloadInterval", "lastSegmentDuration", "getPartWith", "partIndex", "findPart", "reassignFragmentLevelIndexes", "_level$details", "findFirstFragWithCC", "_fragments$i", "shouldAlignOnDiscontinuities", "refDetails", "adjustFragmentStart", "adjustSlidingStart", "alignStream", "switchDetails", "alignDiscontinuities", "alignMediaPlaylistByPDT", "targetCC", "refFrag", "refFragments", "refPDT", "targetPDT", "TimeRanges", "State", "STOPPED", "IDLE", "KEY_LOADING", "FRAG_LOADING_WAITING_RETRY", "WAITING_TRACK", "PARSING", "PARSED", "ENDED", "WAITING_INIT_PTS", "WAITING_LEVEL", "BaseStreamController", "fragmentTracker", "logPrefix", "transmuxer", "_state", "mediaBuffer", "lastCurrentTime", "nextLoadPosition", "retryDate", "fragmentLoader", "levelLastLoaded", "startFragRequested", "decrypter", "initPTS", "loadingParts", "loopSn", "onMediaSeeking", "maxBufferHole", "noFowardBuffer", "resetLoadingState", "tolerance", "fragStartOffset", "fragEndOffset", "pastFragment", "shouldLoadParts", "getLevelDetails", "hasEnoughToStart", "onMediaEnded", "MEDIA_ATTACHED", "onMediaAttached", "MEDIA_DETACHING", "onMediaDetaching", "MANIFEST_LOADED", "onManifestLoaded", "onTickEnd", "resetTransmuxer", "startPositionValue", "bufferingEnabled", "pauseBuffering", "resumeBuffering", "inFlightFrag", "_streamEnded", "timelineStart", "timelineOffset", "lastPart", "_this$levelLastLoaded", "configuredTimelineOffset", "_this$getLevelDetails", "autoStartLoad", "transferringMedia", "transferMedia", "detach", "loadFragment", "targetBufferTime", "_loadFragForPlayback", "progressCallback", "fragContextChanged", "fragInfo", "_handleFragmentLoadProgress", "_doFragLoad", "playlistLabel", "_handleFragmentLoadComplete", "resetFragmentLoading", "clearTrackerIfNeeded", "_this$mediaBuffer", "getFwdBufferInfo", "minForwardBufferLength", "maxBufferLength", "backtrackFragment", "reduceMaxBufferLength", "checkLiveUpdate", "waitForLive", "flushMainBuffer", "startOffset", "endOffset", "flushScope", "BUFFER_FLUSHING", "_loadInitSegment", "decryptData", "decryptedData", "FRAG_DECRYPTED", "tstart", "tdecrypt", "completeInitSegmentLoad", "fragBufferedComplete", "_this$levels", "fragLoadedEndData", "partsLoaded", "fragLoaded", "chunkMeta", "keyLoadingPromise", "keyLoadedData", "KEY_LOADED", "loadClear", "getNextPart", "_result", "doFragPartsLoad", "handleFragLoadError", "loadedEndOfParts", "dataOnProgress", "progressive", "fragLoadedData", "fromPart", "initialPartList", "loadedPart", "nextPart", "handleFragLoadAborted", "OTHER_ERROR", "_handleTransmuxerFlush", "getCurrentContext", "updateLevelTiming", "lowLatencyMode", "_details$fragmentHint", "firstPart", "safePartStart", "_this$media", "getLoadPosition", "bufferFragmentData", "noBacktracking", "_buffer", "offsetTimestamp", "BUFFER_APPENDING", "dropped", "flushBufferGap", "fragDuration", "segmentFraction", "bufferable", "_this$media2", "getFwdBufferInfoAtPos", "bufferedFragAtPos", "gapDuration", "getMaxBufferLength", "maxBufLen", "maxBufferSize", "maxMaxBufferLength", "threshold", "minLength", "reducedLength", "_this$fragmentTracker", "fragOrPart", "getNextFragment", "fragLen", "canLoadParts", "initialLiveManifestSize", "_frag", "getInitialLiveFragment", "mainStart", "getFragmentAtPosition", "programFrag", "filterReplacedPrimary", "curSNIdx", "mapToInitFragWhenRequired", "isLoopLoading", "trackerState", "getNextFragmentLoopLoading", "nextFragment", "nextbufferInfo", "primaryPrefetch", "interstitialsEnabled", "_this$hls$interstitia", "_this$hls$interstitia2", "interstitialsManager", "playingItem", "interstitials", "bufferingItem", "bufferingInterstitial", "appendInPlace", "nextEvent", "playerQueue", "interstitial", "resumeTime", "contiguous", "independentAttrOmitted", "targetSN", "liveStart", "_this$media3", "lookupTolerance", "fragState", "nextFrag", "alignPlaylists", "previousDetails", "slidingStart", "firstLevelLoad", "aligned", "alignedSlidingStart", "waitForCdnTuneIn", "advancePartLimit", "setStartPosition", "offsetInMultivariantPlaylist", "onFragmentOrKeyLoadError", "filterType", "_this$fragCurrent", "gapTagEncountered", "couldRetry", "noAlternate", "resetFragmentErrors", "treatAsGap", "resetStartWhenNotLoaded", "delay", "reduceLengthAndFlushBuffer", "flushBuffer", "afterBufferFlushed", "bufferType", "bufferedTimeRanges", "resetWhenMissingContext", "removeUnbufferedFrags", "parsedDuration", "LEVEL_PTS_UPDATED", "_this$transmuxer", "FRAG_PARSED", "_this$transmuxer2", "recoverWorkerError", "nextState", "previousState", "interstitialsController", "enableInterstitialPlayback", "ChunkCache", "chunks", "dataLength", "chunk", "concatUint8Arrays", "eventemitter3", "hasRequiredEventemitter3", "requireEventemitter3", "prefix", "EE", "once2", "emitter", "_events", "_eventsCount", "clearEvent", "EventEmitter2", "eventNames", "events2", "ee", "listenerCount", "a1", "a3", "a4", "a5", "EventEmitter", "eventemitter3Exports", "EventEmitter$1", "workerStore", "hasUMDWorker", "__HLS_WORKER_BUNDLE__", "injectWorker", "workerContext", "clientCount", "blob", "Blob", "objectURL", "createObjectURL", "worker", "Worker", "loadWorker", "scriptURL", "removeWorkerFromStore", "revokeObjectURL", "terminate", "isId3Footer", "isId3Header", "readId3Size", "getId3Data", "front", "getAudioConfig", "observer", "manifestCodec", "adtsSamplingRates", "byte2", "adtsSamplingIndex", "adtsObjectType", "channelCount", "samplerate", "aacSampleIndex", "isHeaderPattern$1", "getHeaderLength", "getFullFrameLength", "canGetFrameLength", "isHeader$1", "canParse$1", "probe$1", "headerLength", "frameLength", "newOffset", "initTrackConfig", "getFrameDuration", "parseFrameHeader", "appendFrame$2", "frameIndex", "frameDuration", "stamp", "header", "_length", "missing", "_sample", "canParseId3", "toArrayBuffer", "toUint8", "view", "Type", "unsafeGetArrayBuffer", "bytesPerElement", "BYTES_PER_ELEMENT", "isArrayBufferView", "dataEnd", "rawStart", "decodeId3ImageFrame", "frame", "metadataFrame", "pictureType", "utf8Encoding", "mimeTypeEndIndex", "descriptionEndIndex", "decodeId3PrivFrame", "owner", "privateData", "decodeId3TextFrame", "decodeId3UrlFrame", "decodeId3Frame", "getId3FrameData", "HEADER_FOOTER_SIZE", "FRAME_SIZE", "getId3Frames", "id3Data", "frames", "frameData", "isId3TimestampFrame", "readId3Timestamp", "timeStampFrame", "pts33Bit", "timestamp", "getId3Timestamp", "MetadataSchema", "MetadataSchema2", "dummyTrack", "inputTimeScale", "pid", "sequenceNumber", "BaseAudioDemuxer", "_audioTrack", "_id3Track", "cachedData", "basePTS", "lastPTS", "resetInitSegment", "trackDuration", "resetTimeStamp", "deaultTimestamp", "resetContiguity", "canParse", "appendFrame", "demux", "lastDataIndex", "id3Track", "initPTSFn", "dts", "audioId3", "partialData", "videoTrack", "textTrack", "demuxSampleAes", "init90kHz", "chromeVersion$1", "BitratesMap", "SamplingRateMap", "SamplesCoefficients", "BytesInSlot", "appendFrame$1", "parseHeader", "samplesPerFrame", "sampleRate", "mpegVersion", "mpegLayer", "bitRateIndex", "sampleRateIndex", "paddingBit", "channelMode", "columnInBitrates", "bitRate", "sampleCoefficient", "bytesInSlot", "isHeaderPattern", "isHeader", "probe", "AACDemuxer", "segmentCodec", "getAudioBSID", "bsid", "mask", "bits", "AC3Demuxer", "samplingRateCode", "frameSizeCode", "skipCount", "lfeon", "bsmod", "MP3Demuxer", "emsgSchemePattern", "MP4Demuxer", "txtTrack", "captionTrack", "videoSamples", "segmentedData", "extractID3Track", "emsgs", "emsgInfo", "getEmsgStartTime", "emsg", "enableEmsgKLVMetadata", "misbklv", "SampleAesDecrypter", "decryptBuffer", "encryptedData", "decryptAacSample", "curUnit", "encryptedBuffer", "decryptedBuffer", "decryptAacSamples", "getAvcEncryptedData", "decodedData", "encryptedDataLen", "Int8Array", "outputPos", "inputPos", "getAvcDecryptedUnit", "uint8DecryptedData", "decryptAvcSample", "unitIndex", "decryptAvcSamples", "curUnits", "units", "BaseVideoParser", "VideoSample", "createVideoSample", "getLastNalUnit", "_VideoSample", "lastUnit", "pushAccessUnit", "nbSamples", "lastSample", "parseNALu", "endOfSegment", "naluState", "lastState", "unitType", "lastUnitStart", "lastUnitType", "getNALuType", "ExpGolomb", "bytesAvailable", "bitsAvailable", "loadWord", "workingBytes", "availableBytes", "skipBits", "skipBytes", "readBits", "valu", "skipLZ", "leadingZeroCount", "skipUEG", "skipEG", "readUEG", "clz", "readEG", "readBoolean", "readUByte", "readUShort", "readUInt", "AvcVideoParser", "parsePES", "pes", "push2", "spsfound", "audFound", "_VideoSample2", "_VideoSample3", "iskey", "sliceType", "readSliceType", "_track$pixelRatio", "_track$pixelRatio2", "sps", "readSPS", "pixelRatio", "codecarray", "codecstring", "pps", "eg", "skipScalingList", "reader", "lastScale", "nextScale", "deltaScale", "frameCropLeftOffset", "frameCropRightOffset", "frameCropTopOffset", "frameCropBottomOffset", "numRefFramesInPicOrderCntCycle", "scalingListCount", "profileIdc", "chromaFormatIdc", "picOrderCntType", "picWidthInMbsMinus1", "picHeightInMapUnitsMinus1", "frameMbsOnlyFlag", "HevcVideoParser", "initVPS", "vps", "readVPS", "matchSPS", "codecString", "pushParameterSet", "readPPS", "parameterSets", "ebsp2rbsp", "dst", "dstIdx", "max_sub_layers_minus1", "temporal_id_nesting_flag", "numTemporalLayers", "temporalIdNested", "general_profile_space", "general_tier_flag", "general_profile_idc", "general_profile_compatibility_flags_1", "general_profile_compatibility_flags_2", "general_profile_compatibility_flags_3", "general_profile_compatibility_flags_4", "general_constraint_indicator_flags_1", "general_constraint_indicator_flags_2", "general_constraint_indicator_flags_3", "general_constraint_indicator_flags_4", "general_constraint_indicator_flags_5", "general_constraint_indicator_flags_6", "general_level_idc", "sub_layer_profile_present_flags", "sub_layer_level_present_flags", "chroma_format_idc", "pic_width_in_luma_samples", "pic_height_in_luma_samples", "conformance_window_flag", "pic_left_offset", "pic_right_offset", "pic_top_offset", "pic_bottom_offset", "bit_depth_luma_minus8", "bit_depth_chroma_minus8", "log2_max_pic_order_cnt_lsb_minus4", "sub_layer_ordering_info_present_flag", "sizeId", "matrixId", "coefNum", "num_short_term_ref_pic_sets", "num_delta_pocs", "inter_ref_pic_set_prediction_flag", "next_num_delta_pocs", "used_by_curr_pic_flag", "use_delta_flag", "num_negative_pics", "num_positive_pics", "num_long_term_ref_pics_sps", "min_spatial_segmentation_idc", "sar_width", "sar_height", "fps_fixed", "fps_den", "fps_num", "default_display_window_flag", "aspect_ratio_idc", "sar_width_table", "sar_height_table", "nal_hrd_parameters_present_flag", "vcl_hrd_parameters_present_flag", "sub_pic_hrd_params_present_flag", "fixed_pic_rate_within_cvs_flag", "low_delay_hrd_flag", "cpb_cnt", "chroma_scale_w", "chroma_scale_h", "profile_space_string", "profile_compatibility_buf", "profile_compatibility_rev", "profile_compatibility_flags_string", "general_profile_compatibility_flags", "general_constraint_indicator_flags", "bit_depth", "frame_rate", "fixed", "tiles_enabled_flag", "entropy_coding_sync_enabled_flag", "parallelismType", "sps1", "sps2", "PACKET_LENGTH", "TSDemuxer", "typeSupported", "sampleAes", "pmtParsed", "_pmtId", "_videoTrack", "_txtTrack", "aacOverFlow", "videoParser", "syncOffset", "scanwindow", "foundPat", "packetStart", "tsPackets", "parsePID", "createTrack", "pesData", "isSampleAes", "videoPid", "audioPid", "id3Pid", "audioData", "unknownPID", "pmtId", "tsPacketErrors", "stt", "atf", "parseAACPES", "parseMPEGPES", "parseAC3PES", "parseID3PES", "parsePAT", "parsedPIDs", "parsePMT", "segmentVideoCodec", "segmentAudioCodec", "emitParsingError", "demuxResult", "extractRemainingSamples", "frameMissingBytes", "sampleLength", "frameOverflowBytes", "recoverable", "id3Sample", "sectionLength", "tableEnd", "programInfoLength", "esInfoLength", "logEncryptedSamplesFoundInUnencryptedStream", "parsePos", "descriptorLen", "pesLen", "pesHdrLen", "pesPts", "pesDts", "pesFlags", "payloadStartOffset", "dataLen", "AAC", "getSilentFrame", "UINT32_MAX", "MP4", "avcC", "hvcC", "btrt", "dinf", "dref", "esds", "ftyp", "mdat", "mdia", "mfhd", "minf", "moov", "dac3", "mvex", "mvhd", "pasp", "sdtp", "stbl", "stco", "stsc", "stsz", "stts", "vmhd", "smhd", "videoHdlr", "audioHdlr", "HDLR_TYPES", "STTS", "STSC", "STCO", "STSZ", "VMHD", "SMHD", "STSD", "majorBrand", "avc1Brand", "minorVersion", "FTYP", "DINF", "upperWordDuration", "lowerWordDuration", "baseMediaDecodeTime", "dependsOn", "isDependedOn", "hasRedundancy", "avcc", "hSpacing", "vSpacing", "audioStsd", "sampleDependencyTable", "upperWordBaseMediaDecodeTime", "lowerWordBaseMediaDecodeTime", "arraylen", "cts", "isLeading", "paddingValue", "isNonSync", "degradPrio", "movie", "ps", "NALuLengthSize", "temporal_id_nested", "num_temporal_layers", "iMax", "hvcc", "MPEG_TS_CLOCK_FREQ_HZ", "toTimescaleFromBase", "destScale", "srcBase", "toTimescaleFromScale", "srcScale", "toMsFromMpegTsClock", "toMpegTsClockFromTimescale", "MAX_SILENT_FRAME_DURATION", "AAC_SAMPLES_PER_FRAME", "MPEG_AUDIO_SAMPLE_PER_FRAME", "AC3_SAMPLES_PER_FRAME", "chromeVersion", "safariWebkitVersion", "createMp4Sample", "isKeyframe", "MP4Remuxer", "ISGenerated", "_initPTS", "_initDTS", "nextVideoTs", "nextAudioTs", "videoSampleDuration", "isAudioContiguous", "isVideoContiguous", "videoTrackConfig", "defaultTimeStamp", "resetNextTimestamp", "getVideoStartPts", "rolloverDetected", "firstPts", "minPTS", "normalizePts", "remux", "accurateTimeOffset", "audioTimeOffset", "videoTimeOffset", "hasAudio", "enoughAudioSamples", "enoughVideoSamples", "_videoTrack$pixelRati", "_config$pixelRatio", "_videoTrack$pixelRati2", "_config$pixelRatio2", "generateIS", "firstKeyFrameIndex", "firstKeyFramePTS", "findKeyframeIndex", "forceKeyFrameOnDiscontinuity", "audiovideoTimestampDelta", "remuxAudio", "audioTrackLength", "remuxVideo", "firstKeyFrame", "flushTextTrackMetadataCueSamples", "flushTextTrackUserdataCueSamples", "audioSamples", "computePTSDTS", "initDTS", "inputSamples", "outputSamples", "mp4SampleDuration", "firstDTS", "lastDTS", "maxPTS", "NEGATIVE_INFINITY", "sortSamples", "nextVideoPts", "deltadts", "deltapts", "inputDuration", "averageSampleDuration", "foundHole", "foundOverlap", "firstPTS", "isPTSOrderRetained", "prevPTS", "nextSamplePTS", "currentSamplePTS", "currentOrder", "prevOrder", "nbNalu", "naluLen", "dtsStep", "nbUnits", "sampleLen", "mdatSize", "MUX_ERROR", "stretchedLastFrame", "minDtsDelta", "minPtsDelta", "maxDtsDelta", "maxPtsDelta", "VideoSampleUnits", "mp4SampleLength", "unitData", "unitDataLen", "ptsDelta", "lastFrameDuration", "stretchShortVideoTrack", "gapTolerance", "deltaToFrameEnd", "compositionTimeOffset", "nextDts", "nextPts", "nb", "getSamplesPerFrame", "mp4timeScale", "inputSampleDuration", "rawMPEG", "alignedWithVideo", "timeOffsetMpegTS", "maxAudioFramesDrift", "fillFrame", "_nbSamples", "audioSample", "prevSample", "unitLen", "PassThroughRemuxer", "emitInitSegment", "initTracks", "lastEndTime", "defaultInitPTS", "generateInitSegment", "getParsedTrackCodec", "_initData", "_initData2", "trackSampleData", "audioSampleTimestamps", "videoSampleTimestamps", "videoStartTime", "toStartEndOrDefault", "audioStartTime", "videoEndTime", "audioEndTime", "baseOffsetSamples", "decodeTime", "isInvalidInitPts", "videoSampleCount", "minDuration", "muxConfig", "Transmuxer", "vendor", "asyncResult", "demuxer", "remuxer", "decryptionPromise", "transmuxConfig", "currentTransmuxState", "configure", "uintData", "discontinuity", "trackSwitch", "initSegmentChange", "defaultInitPts", "initSegmentData", "getEncryptionType", "getDecrypter", "_data", "emptyResult", "result2", "resetMuxers", "needsProbing", "configureTransmuxer", "resetInitialTimestamp", "transmux", "isPromise", "currentState", "transmuxResults", "emptyResults", "demuxResultOrPromise", "flushRemux", "remuxResult", "transmuxSampleAes", "transmuxUnencrypted", "mux", "_muxConfig$i$demux", "Remuxer", "Demuxer", "encryptionType", "Function", "TransmuxConfig", "TransmuxState", "transmuxerInstanceCount", "TransmuxerInterface", "onTransmuxComplete", "onFlush", "instanceNo", "useWorker", "onWorkerMessage", "_this$workerContext", "handleTransmuxComplete", "logType", "onWorkerError", "filename", "lineno", "enableWorker", "forwardMessage", "ev", "m2tsTypeSupported", "workerPath", "postMessage", "cmd", "terminateWorker", "resetNo", "_frag$initSegment", "_lastFrag$initSegment", "lastFrag", "snDiff", "partDiff", "transmuxResult", "transmuxerError", "handleFlushResult", "TICK_INTERVAL$3", "AudioStreamController", "mainAnchor", "mainFragLoading", "audioOnly", "bufferedTrack", "switchingTrack", "waitingData", "mainDetails", "flushing", "bufferFlushed", "cachedTrackLoadedData", "resetItem", "AUDIO_TRACKS_UPDATED", "onAudioTracksUpdated", "AUDIO_TRACK_SWITCHING", "onAudioTrackSwitching", "AUDIO_TRACK_LOADED", "onAudioTrackLoaded", "BUFFER_RESET", "onBufferReset", "BUFFER_CREATED", "onBufferCreated", "onBufferFlushing", "BUFFER_FLUSHED", "onBufferFlushed", "INIT_PTS_FOUND", "onInitPtsFound", "syncWithAnchor", "waitingToAppend", "_this$mainFragLoading", "targetDiscontinuity", "trackDetails", "syncFrag", "doTickIdle", "skipSeekToStartPosition", "currenTrack", "_this$mainFragLoading2", "startFragPrefetch", "BUFFER_EOS", "loadPosition", "mainFragAtPos", "mediaPlaylist", "altAudio", "flushAudioIfNeeded", "_trackLevel$details", "trackLevel", "AUDIO_TRACK_UPDATED", "defaultAudioCodec", "_handleTransmuxComplete", "AUDIO_TRACK_SWITCHED", "_id3$samples", "completeAudioSwitch", "mapFragment", "_bufferInitSegment", "FRAG_PARSING_INIT_SEGMENT", "emittedID3", "FRAG_PARSING_METADATA", "emittedText", "FRAG_PARSING_USERDATA", "variantAudioCodecs", "BUFFER_CODECS", "_track$details", "BasePlaylistController", "canLoad", "loadPlaylist", "switchParams", "playlistUri", "foundIndex", "currentGoal", "hlsUrlParameters", "loadingPlaylist", "playlist", "shouldLoadPlaylist", "getUrlWithDirectives", "playlistLoaded", "elapsed", "levelOrTrack", "ignorePlaylistParsingErrors", "_details$fragments$", "deliveryDirectives", "endSn", "atLastPartOfSegment", "lastAdvanced", "cdnAge", "segments", "getDeliveryDirectives", "scheduleLoading", "updatedDetails", "estimatedTimeUntilUpdate", "previousDeliveryDirectives", "checkRetry", "errorEvent", "_errorEvent$context", "subtitleOptionsIdentical", "trackList1", "trackList2", "mediaAttributesIdentical", "attrs1", "attrs2", "customAttributes", "stableRenditionId", "subtitleAttribute", "subtitleTrackMatchesTextTrack", "subtitleTrack", "AudioTrackController", "groupIds", "tracksInGroup", "currentTrack", "selectDefaultTrack", "MANIFEST_PARSED", "onManifestParsed", "LEVEL_LOADING", "onLevelLoading", "trackInActiveGroup", "curDetails", "currentGroups", "groupIndex", "allIndex", "findTrackId", "audioTracksUpdated", "selectedTrackId", "setAudioTrack", "_this$groupIds", "newId", "setAudioOption", "audioOption", "switchIndex", "withoutCodecAndChannelsMatch", "lastTrack", "trackLoaded", "AUDIO_TRACK_LOADING", "BufferOperationQueue", "sourceBufferReference", "queues", "operation", "pending", "executeNext", "appendBlocker", "execute", "onStart", "onComplete", "prependBlocker", "removeBlockers", "_queue$", "unblockAudio", "op", "shiftAndExecuteNext", "_this$tracks$type", "sb", "updating", "_this$queues", "_this$queues2", "_this$tracks", "listSbInfo", "listOps", "_this$tracks2", "ending", "_this$queues3", "VIDEO_CODEC_PROFILE_REPLACE", "TRACK_REMOVED_ERROR_NAME", "HlsJsTrackRemovedError", "BufferController", "_objectUrl", "operationQueue", "bufferCodecEventsTotal", "mediaSource", "lastMpegAudioChunk", "blockedAudioAppend", "lastVideoAppendEnd", "appendSource", "transferData", "appendErrors", "sourceBuffers", "_onEndStreaming", "_this$mediaSource", "_onStartStreaming", "_onMediaSourceOpen", "_onMediaEmptied", "updateDuration", "checkPendingTracks", "_onMediaSourceClose", "_onMediaSourceEnded", "mediaSrc", "hasSourceTypes", "MEDIA_ATTACHING", "onMediaAttaching", "onBufferAppending", "onBufferCodecs", "onBufferEos", "onFragParsed", "FRAG_CHANGED", "onFragChanged", "isUpdating", "isQueued", "sourceBufferCount", "tuple2", "removeBuffer", "resetQueue", "resetAppendErrors", "_this$transferData", "codecEvents", "bufferCreated", "assignMediaSource", "attachTransferred", "objectUrl", "MMS", "disableRemotePlayback", "removeSourceChildren", "addSource", "_this$transferData2", "_ms$constructor", "transferredTracks", "mediaSourceOpenCallback", "mediaSourceOpenOrEnded", "tracksReady", "trackName", "sbIndex", "sourceBufferNameToIndex", "sbTuple", "trackSourceBuffer", "_this$mediaSource2", "removeSourceBuffer", "endOfStream", "MEDIA_DETACHED", "resetBuffer", "_this$mediaSource3", "removeBufferListeners", "unmuxedToMuxed", "muxedToUnmuxed", "sbName", "_this$transferData3", "_this$transferData3$t", "_trackCodec", "parsedTrack", "transferredTrack", "sbTrack", "sbCodec", "pendingCodec", "trackLevelCodec", "currentCodecFull", "currentCodec", "trackCodec", "nextCodec", "appendChangeType", "sourceBufferTracks", "baseTracks", "changeType", "isPending", "blockAudio", "partOrFrag", "pStart", "pTime", "_this$fragmentTracker2", "eventData", "chunkStats", "bufferAppendingStart", "fragBuffering", "partBuffering", "checkTimestampOffset", "videoSb", "vbuffered", "vappending", "currentOp", "videoAppendEnd", "audioStart", "fragStart", "_this$tracks$type2", "updateTimestampOffset", "appendExecutor", "type2", "mediaError", "DOMException", "QUOTA_EXCEEDED_ERR", "INVALID_STATE_ERR", "appendErrorCount", "appendErrorMaxRetry", "getFlushOp", "removeExecutor", "buffersAppendedTo", "onUnblocked", "blockBuffers", "stepOperationQueue", "sourceBufferTypes", "trimBuffers", "bufferedToEnd", "_this$tracks$type3", "_this$tracks$type4", "_this$overrides", "allowEndOfStream", "_this$tracks$type5", "blockUntilOpen", "tracksEnded", "BUFFERED_TO_END", "durationAndRange", "getDurationAndRange", "updateMediaSource", "targetDuration", "backBufferLength", "liveBackBufferLength", "maxBackBufferLength", "targetBackBufferPosition", "flushBackBuffer", "frontBufferFlushThreshold", "frontBufferLength", "maxFrontBufferLength", "targetFrontBufferPosition", "flushFrontBuffer", "_this$details", "BACK_BUFFER_REACHED", "LIVE_BACK_BUFFER_REACHED", "numBufferedRanges", "_this$overrides2", "liveDurationInfinity", "setLiveSeekableRange", "overrideDuration", "mediaDuration", "msDuration", "pendingTrackCount", "_this$transferData4", "createSourceBuffers", "BUFFER_INCOMPATIBLE_CODECS_ERROR", "getTrackCodec", "addSourceBuffer", "_this$operationQueue", "supplementalCodec", "addBufferListener", "onSBUpdateStart", "onSBUpdateEnd", "onSBUpdateError", "removedRanges", "_this$media2$querySel", "_this$mediaSource4", "_this$mediaSource5", "timestampOffset", "removeStart", "removeEnd", "appendBuffer", "bufferNames", "blockingOperations", "_this$tracks$type6", "sourceChildren", "CapLevelController", "autoLevelCapping", "restrictedLevels", "clientRect", "streamController", "setStreamController", "unregisterListener", "stopCapping", "FPS_DROP_LEVEL_CAPPING", "onFpsDropLevelCapping", "droppedLevel", "isLevelAllowed", "HTMLVideoElement", "detectPlayerSize", "capLevelToPlayerSize", "startCapping", "mediaHeight", "mediaWidth", "maxLevel", "getMaxLevel", "nextLevelSwitch", "capLevelIndex", "validLevels", "getMaxLevelByMediaSize", "getDimensions", "boundsRect", "contentScaleFactor", "ignoreDevicePixelRatio", "devicePixelRatio", "maxDevicePixelRatio", "restrictedLevel", "atGreatestBandwidth", "curLevel", "maxLevelIndex", "squareSize", "CmObjectType", "MUXED", "INIT", "CAPTION", "TIMED_TEXT", "KEY", "OTHER", "CmcdObjectType", "CmStreamingFormat", "HLS", "CmcdStreamingFormat", "CMCD_OBJECT", "CMCD_REQUEST", "CMCD_SESSION", "CMCD_STATUS", "CmcdHeaderField", "OBJECT", "REQUEST", "SESSION", "STATUS", "CmcdHeaderMap", "SfItem", "DICT", "throwError", "serializeError", "SfToken", "BARE_ITEM", "BOOLEAN", "serializeBoolean", "encodeBase64", "binary", "btoa", "BYTES", "serializeByteSequence", "INTEGER", "isInvalidInt", "serializeInteger", "serializeDate", "roundToEven", "precision", "decimalShift", "EPSILON", "flooredValue", "DECIMAL", "serializeDecimal", "roundedValue", "STRING", "STRING_REGEX", "serializeString$1", "symbolToStr", "TOKEN", "serializeToken", "token", "serializeBareItem", "isInteger", "serializeKey", "serializeParams", "serializeItem", "serializeInnerList", "serializeDict", "whitespace", "optionalWhiteSpace", "output", "encodeSfDict", "isTokenField", "urlToRelativePath", "toPath", "pathname", "fromPath", "toRounded", "toUrlSafe", "toHundred", "CmcdFormatters", "br", "bl", "dl", "mtp", "nor", "rtp", "tb", "processCmcd", "encodeCmcd", "cmcd", "toCmcdHeaders", "headerMap", "customHeaderMap", "shards", "entry", "field", "entry2", "appendCmcdHeaders", "CMCD_PARAM", "toCmcdQuery", "REGEX", "appendCmcdQuery", "CMCDController", "sid", "cid", "useHeaders", "includeKeys", "initialized", "starved", "audioBuffer", "videoBuffer", "onWaiting", "onPlaying", "applyPlaylistData", "ot", "su", "applyFragmentData", "getObjectType", "getTopBandwidth", "getBufferLength", "getNextFrag", "pLoader", "createPlaylistLoader", "createFragmentLoader", "contentId", "onMediaDetached", "_data$tracks$audio", "_data$tracks$video", "createData", "sf", "pr", "bandwidthEstimate", "isVideo", "bs", "_this$hls$levels$frag", "_this$hls$levels$frag2", "_this$hls$levels$frag3", "Ctor", "PATHWAY_PENALTY_DURATION_MS", "ContentSteeringController", "_pathwayPriority", "timeToLoad", "reloadTimer", "started", "subtitleTracks", "penalizedPathways", "pathways", "pathwayPriority", "updatePathwayPriority", "ttl", "scheduleRefresh", "loadSteeringManifest", "levelToRemove", "errorPathway", "getPathwayForGroupId", "filterParsedLevels", "pathwayLevels", "getLevelsForPathway", "selectedLevel", "levelAfterChange", "defaultPathway", "clonePathways", "pathwayClones", "audioGroupCloneMap", "subtitleGroupCloneMap", "pathwayClone", "cloneId", "baseId", "uriReplacement", "clonedVariants", "baseLevel", "clonedAudioGroupId", "clonedSubtitleGroupId", "performUriReplacement", "clonedLevel", "cloneRenditionGroups", "Loader", "throughput", "steeringManifestLoadPolicy", "legacyRetryCompatibility", "context2", "steeringData", "TTL", "reloadUri", "loadedSteeringData", "steeringManifest", "STEERING_MANIFEST_LOADED", "getResponseHeader", "retryAfter", "ttlMs", "groupCloneMap", "clonedTracks", "clonedTrack", "stableId", "perOptionKey", "HOST", "PARAMS", "perOptionUris", "perVariantUri", "EMEController", "keyFormatPromise", "keySystemAccessPromises", "_requestLicenseFailureCount", "mediaKeySessions", "keyIdToKeySessionPromise", "mediaKeys", "setMediaKeysQueue", "CDMCleanupPromise", "onWaitingForKey", "onDestroying", "requestMediaKeySystemAccessFunc", "licenseXhrSetup", "licenseResponseCallback", "DESTROYING", "getLicenseServerUrl", "keySystemConfiguration", "licenseUrl", "getLicenseServerUrlOrThrow", "getServerCertificateUrl", "serverCertificateUrl", "attemptKeySystemAccess", "uniqueCodec", "attempt", "keySystems", "getMediaKeysPromise", "EMEKeyError", "KEY_SYSTEM_NO_ACCESS", "supportedConfigurations", "errMessage", "mediaKeySystemConfigs", "keySystemAccess", "_keySystemAccessPromises", "mediaKeySystemAccess", "certificateRequest", "fetchServerCertificate", "createMediaKeys", "hasMediaKeys", "certificate", "setMediaKeysServerCertificate", "createMediaKeySessionContext", "mediaKeysSession", "createSession", "mediaKeySessionContext", "keyStatus", "renewKeySession", "keySessionContext", "getKeyIdString", "generateRequestWithPreferredKeySession", "removeSession", "updateKeySession", "_mediaKeySessionConte", "keySession", "getSelectedKeySystemFormats", "getKeySystemAccess", "getKeySystemSelectionPromise", "attemptSetMediaKeys", "selectKeySystem", "keySystemFormat", "selectKeySystemFormat", "getKeyFormatPromise", "keySystemsInConfig", "loadKey", "keyInfo", "keyDetails", "keyContextPromise", "getKeySystemForKeyPromise", "throwIfDestroyed", "handleError", "KEY_SYSTEM_NO_KEYS", "KEY_SYSTEM_NO_CONFIGURED_LICENSE", "setMediaKeysPromise", "setMediaKeys", "initDataType", "_this$config$drmSyste", "_this$config$drmSyste2", "generateRequestFilter", "generateRequest", "mappedInitData", "licenseStatus", "onmessage", "_onmessage", "messageType", "renewLicense", "onkeystatuseschange", "_onkeystatuseschange", "onKeyStatusChange", "keyUsablePromise", "KEY_SYSTEM_STATUS_INTERNAL_ERROR", "_context$mediaKeysSes", "KEY_SYSTEM_NO_SESSION", "keyStatuses", "certLoader", "certLoadPolicy", "loaderCallbacks", "contex", "KEY_SYSTEM_SERVER_CERTIFICATE_REQUEST_FAILED", "cert", "setServerCertificate", "success", "KEY_SYSTEM_SERVER_CERTIFICATE_UPDATE_FAILED", "keyMessage", "requestLicense", "KEY_SYSTEM_SESSION_UPDATE_FAILED", "unpackPlayReadyKeyMessage", "licenseChallenge", "xmlString", "keyMessageXml", "_header$querySelector", "_header$querySelector2", "challengeElement", "challengeText", "setupLicenseXHR", "keysListItem", "licenseXhrSetupResult", "KEY_SYSTEM_LICENSE_REQUEST_FAILED", "statusText", "attemptsLeft", "licenseXhr", "DONE", "xhr2", "licenseChallenge2", "_clear", "emeEnabled", "_media$setMediaKeys", "mediaKeysList", "keySessionCount", "_this$hls2", "KEY_SYSTEM_DESTROY_MEDIA_KEYS_ERROR", "_this$hls3", "KEY_SYSTEM_DESTROY_CLOSE_SESSION_ERROR", "formats", "_this$hls4", "KEY_SYSTEM_DESTROY_REMOVE_SESSION_ERROR", "_this$hls5", "FPSController", "isVideoPlaybackQualityAvailable", "lastTime", "lastDroppedFrames", "lastDecodedFrames", "capLevelOnFPSDrop", "checkFPSInterval", "fpsDroppedMonitoringPeriod", "checkFPS", "decodedFrames", "droppedFrames", "currentPeriod", "currentDropped", "currentDecoded", "droppedFPS", "FPS_DROP", "totalDroppedFrames", "fpsDroppedMonitoringThreshold", "sendAddTrackEvent", "videoEl", "addCueToTrack", "textTrackCue", "TextTrackCue", "err2", "clearCurrentCues", "enterHandler", "removeCuesInRange", "getCuesInRange", "getFirstCueIndexFromTime", "mid", "cuesFound", "firstCueInRange", "filterSubtitleTracks", "SubtitleTrackController", "queuedDefaultTrack", "useTextTrackPolling", "subtitlePollingInterval", "_subtitleDisplay", "asyncPollTrackChange", "pollTrackChange", "onTextTracksChanged", "renderTextTracksNatively", "findTrackForTextTrack", "setSubtitleTrack", "subtitleDisplay", "toggleTrackModes", "SUBTITLE_TRACK_LOADED", "onSubtitleTrackLoaded", "subtitlePreference", "subtitleTracksUpdated", "SUBTITLE_TRACKS_UPDATED", "selectDefault", "allSubtitleTracks", "setSubtitleOption", "subtitleOption", "SUBTITLE_TRACK_LOADING", "nextTrack", "SUBTITLE_TRACK_SWITCH", "randomUUID", "uuid2", "dt", "random", "hash", "ALIGNED_END_THRESHOLD_SECONDS", "TimelineOccupancy", "TimelineOccupancy2", "generateAssetIdentifier", "assetListIndex", "InterstitialEvent", "_duration", "_timelineStart", "appendInPlaceDisabled", "appendInPlaceStarted", "hasPlayed", "cumulativeDuration", "resumeOffset", "playoutLimit", "restrictions", "jump", "snapOptions", "in", "assetList", "assetListLoader", "assetListResponse", "resumeAnchor", "resetOnResume", "setDateRange", "_this$assetListLoader", "supplementsPrimary", "isAssetPastPlayoutLimit", "assetIndex", "_this$assetList$asset", "findAssetIndex", "asset", "getSnapToFragmentTime", "startIsAligned", "snappedStart", "resumptionOffset", "timelineOccupancy", "Range", "Point", "contentMayVary", "assetUrl", "assetListUrl", "assetListLoaded", "eventToString", "getInterstitialUrl", "getNextAssetIndex", "_interstitial$assetLi", "eventAssetToString", "HlsAssetPlayer", "HlsPlayerClass", "userConfig", "assetItem", "hasDetails", "mediaAttached", "_currentTime", "_bufferedEosTime", "checkPlayout", "reachedPlayout", "PLAYOUT_LIMIT_REACHED", "primarySessionId", "loadSource", "detailsLoaded", "removeMediaListeners", "_this$interstitial", "bufferedInPlaceToEnd", "getAssetTime", "destroyed", "assetId", "interstitialId", "parentIdentifier", "bufferSnapShot", "attachMedia", "detachMedia", "resetDetails", "deleteDetails", "_this$hls6", "ABUTTING_THRESHOLD_SECONDS", "InterstitialsSchedule", "onScheduleUpdate", "eventMap", "events", "durations", "primary", "playout", "integrated", "setDurations", "resetErrorsInRange", "getEvent", "hasEvent", "findItemIndex", "findEventIndex", "previousEvent", "findItemIndexAtTime", "_items$index", "timelinePos", "timelineType", "findJumpRestrictedIndex", "_items$i$event", "assetIdAtEnd", "_this$items", "_this$items2", "interstitialAtEnd", "assetAtEnd", "parseInterstitialDateRanges", "mediaSelection", "enableAppendInPlace", "previousInterstitialEvents", "interstitialEvents", "parseDateRanges", "ids", "removedInterstitials", "aPre", "aPost", "bPre", "bPost", "startA", "startB", "removeEvent", "updateSchedule", "currentItems", "updatedItems", "parseSchedule", "baseData", "schedule", "primaryDuration", "playoutDuration", "resolveOffsets", "primaryPosition", "integratedTime", "preroll", "postroll", "eventStart", "interstitialDuration", "timelineDuration", "inSameStartTimeSequence", "integratedStart", "playoutStart", "segmentDuration", "_integratedStart", "_playoutStart", "primarySegment", "_schedule", "lastScheduledStart", "updateAssetDurations", "primaryCanResumeInPlaceAt", "resumesInPlaceAt", "startFragment", "allowance", "sumDuration", "hasUnknownDuration", "hasErrors", "segmentToString", "AssetListLoader", "loadAssetList", "hlsStartOffset", "assignAssetListError", "ASSET_LIST_LOAD_ERROR", "interstitialAssetListLoadPolicy", "assets", "ASSETS", "ASSET_LIST_PARSING_ERROR", "ASSET_LIST_LOADED", "ASSET_LIST_LOAD_TIMEOUT", "ASSET_LIST_LOADING", "playWithCatch", "InterstitialsController", "altSelection", "detachedData", "manager", "bufferedPos", "waitingItem", "endedItem", "playingAsset", "endedAsset", "bufferingAsset", "shouldPlay", "onPlay", "onPause", "onSeeking", "playbackDisabled", "backwardSeek", "checkBuffer", "scheduleIndex", "playingIndex", "jumpIndex", "setSchedulePosition", "playingLastItem", "restartAsset", "setScheduleToAssetAtTime", "onTimeupdate", "previousItems", "scheduleItems", "removedIds", "interstitialsUpdated", "trimInPlaceForPlayout", "updatedPlayingItem", "updateItem", "itemsMatch", "trimInPlace", "updatedBufferingItem", "clearInterstitial", "clearAssetPlayer", "INTERSTITIALS_UPDATED", "primaryFallback", "onAudioTrackUpdated", "onSubtitleTrackSwitch", "SUBTITLE_TRACK_UPDATED", "onSubtitleTrackUpdated", "EVENT_CUE_ENTER", "onInterstitialCueEnter", "onAssetListLoaded", "onBufferedToEnd", "MEDIA_ENDED", "_this$getBufferingPla", "getBufferingPlayer", "_this$getBufferingPla2", "emptyPlayerQueue", "clearScheduleState", "primaryMedia", "effectivePlayingItem", "detachedMedia", "checkStart", "effectiveBufferingItem", "getAssetPlayer", "getMappedTime", "controllerField", "assetPlayerField", "assetPlayer", "getBufferedEnd", "findMappedTime", "primaryTime", "_c$schedule$items", "MAX_VALUE", "getMappedDuration", "_c$primaryDetails", "primaryDetails", "seekTo", "_item$event", "_c$schedule$items2", "targetIndex", "targetItem", "bufferingPlayer", "seekInItem", "seekToTime", "primarySegmentStart", "targetIsPrimary", "_targetItem$event", "eventTime", "getActiveInterstitial", "interstitialPlayer", "interstitialItem", "effectivePlayingAsset", "assetPlayers", "_getActiveInterstitia", "_getActiveInterstitia2", "scheduleItem", "_c$schedule", "_c$schedule$events", "_c$schedule2", "_c$schedule2$items", "bufferingIndex", "_c$primaryDetails2", "_c$primaryDetails3", "advanceAfterAssetEnded", "_this$schedule", "playbackStarted", "_this$bufferingItem", "_this$bufferingItem$e", "_media", "queuedForPlayback", "_this$detachedData", "retreiveMediaSource", "toSegment", "transferMediaFromPlayer", "playerMedia", "attachMediaSourceData", "transferMediaTo", "_this$detachedData2", "_attachMediaSourceDat", "primaryPlayer", "isAssetPlayer", "detachedMediaSource", "logFromSource", "queuedPlayer", "transferring", "dataToAttach", "isAssetAtEndOfSchedule", "cueRemoval", "primaryLive", "nextAssetIndex", "nextIndex", "scheduleLength", "resumptionTime", "itemIndex", "scheduledItem", "currentItem", "eventItemsMatch", "_this$detachedData3", "playingAssetListIndex", "INTERSTITIAL_ASSET_ENDED", "INTERSTITIAL_ENDED", "updatedIndex", "advanceSchedule", "playedLastItem", "queuedIndex", "assetIndexCandidate", "assetsBuffered", "setBufferingItem", "preloadAssets", "INTERSTITIAL_STARTED", "nextItem", "_media2", "assetListLength", "createAssetPlayer", "isAssetBuffered", "startAssetPlayer", "resumePrimary", "attachPrimary", "_this$mediaSelection", "_this$mediaSelection$", "_this$primaryDetails", "fromItem", "_this$detachedData4", "bufferedToItem", "getPrimaryResumption", "INTERSTITIALS_PRIMARY_RESUMED", "itemStart", "startLoadingPrimaryAt", "_hls$mainForwardBuffe", "loadingEnabled", "currentSelection", "interstitialAppendInPlace", "previousSelection", "_this$schedule$items", "previousItem", "updatedItem", "itemBeforeUpdate", "flushStart", "_b$event", "updateBufferedPos", "bufferIsEmpty", "bufferEndIndex", "_nextItemToBuffer$eve", "_bufferingItem$event", "nextToBufferIndex", "nextItemToBuffer", "interstitialLiveLookAhead", "bufferingLast", "timeRemaining", "INTERSTITIALS_BUFFERED_TO_BOUNDARY", "bufferedToEvent", "preloadPrimary", "neverLoaded", "playOnce", "bufferAssetPlayer", "_playingItem$nextEven", "liveStartPosition", "createAsset", "playerIndex", "getAssetPlayerQueueIndex", "selectedAudio", "selectedSubtitle", "timePastStart", "playerConfig", "assetPlayerId", "testBandwidth", "updateAssetPlayerDetails", "INTERSTITIAL_ASSET_ITEM_ERROR", "handleAssetItemError", "currentAssetDuration", "inQueuPlayer", "_this$schedule$items2", "assetListIndex2", "_this$schedule$items3", "endedWithAssetIndex", "assetCurrentTime", "distanceFromEnd", "INTERSTITIAL_ASSET_PLAYER_CREATED", "resetAssetPlayer", "INTERSTITIAL_ASSET_STARTED", "_this$schedule$items4", "_this$detachedData5", "appendInPlaceNext", "activeTracks", "errorMessage", "interstitialAssetError", "INTERSTITIAL_ASSET_ERROR", "newPlayingItem", "_this$bufferingItem2", "previousDuration", "DURATION", "waitingForItem", "bufferingEvent", "_this$schedule$items5", "TICK_INTERVAL$2", "SubtitleStreamController", "currentTrackId", "tracksBuffered", "onSubtitleTracksUpdated", "SUBTITLE_FRAG_PROCESSED", "onSubtitleFragProcessed", "fragEnd", "endOffsetSubtitles", "mediaBufferTimeRanges", "mainSlidingStartFragment", "foundFrag", "fragToLoad", "BufferableInstance", "timeranges", "specialCea608CharsCodes", "getCharForByte", "NR_ROWS", "NR_COLS", "rowsLowCh1", "rowsHighCh1", "rowsLowCh2", "rowsHighCh2", "backgroundColors", "CaptionsLogger", "verboseLevel", "severity", "numArrayToHexArray", "numArray", "hexArray", "PenState", "foreground", "underline", "italics", "background", "flash", "setStyles", "attribs", "equals", "other", "copy", "newPenState", "StyledUnicodeChar", "uchar", "penState", "setChar", "setPenState", "newChar", "Row", "chars", "currPenState", "cueStartTime", "setCursor", "absPos", "moveCursor", "relPos", "newPos", "backSpace", "insertChar", "char", "clearFromPos", "startPos", "clearToEndOfRow", "getTextString", "setPenStyles", "CaptionScreen", "rows", "currRow", "nrRollUpRows", "lastOutputScreen", "equal", "setPen", "setPAC", "pacData", "newRow", "topRowIndex", "prevLineTime", "indent", "prevPos", "setBkgData", "bkgData", "setRollUpRows", "nrRows", "rollUp", "getDisplayText", "topRow", "asOneRow", "displayText", "rowNr", "rowText", "getTextAndFormat", "Cea608Channel", "channelNumber", "outputFilter", "chNr", "verbose", "displayedMemory", "nonDisplayedMemory", "currRollUpRow", "writeScreen", "getHandler", "setHandler", "newHandler", "setMode", "insertChars", "screen2", "outputDataUpdate", "ccRCL", "ccBS", "ccAOF", "ccAON", "ccDER", "ccRU", "ccFON", "ccRDC", "ccTR", "ccRTD", "ccEDM", "ccCR", "ccENM", "ccEOC", "tmp", "ccTO", "nrCols", "ccMIDROW", "secondByte", "colorIndex", "dispatch", "newCue", "dispatchCue", "cueSplitAtTime", "Cea608Parser", "out1", "out2", "currentChannel", "cmdHistory", "createCmdHistory", "channel", "addData", "byteList", "cmdFound", "charsFound", "hasCmdRepeated", "setLastCmd", "parseCmd", "parseMidrow", "parsePAC", "parseBackgroundAttributes", "parseChars", "currChNr", "cond1", "cond2", "case1", "case2", "interpretPAC", "pacIndex", "channelNr", "charCodes", "charCode1", "oneCode", "AllowedDirections", "AllowedAlignments", "isAllowedValue", "allowed", "lcValue", "rest", "cobj", "baseObj", "parseTimeStamp", "Settings", "parseOptions", "defaults", "parseCue", "fixLineBreaks", "VTTParser", "LINEBREAKS", "inputString", "searchString", "cueString2millis", "timeString", "secs", "mins", "generateCueId", "calculateOffset", "vttCCs", "currCC", "prevCC", "new", "presentationOffset", "_prevCC", "parseWebVTT", "vttByteArray", "callBack", "errorCallBack", "vttLines", "cueTime", "timestampMapMPEGTS", "timestampMapLOCAL", "parsingError", "inHeader", "cueOffset", "webVttMpegTsMapOffset", "IMSC1_CODEC", "HMSF_REGEX", "TIME_UNIT_REGEX", "textAlignToLineAlign", "parseIMSC1", "ttmlList", "syncTime", "ttml", "parseTTML", "defaultRateInfo", "subFrameRate", "frameRateMultiplier", "tickRate", "rateInfo", "trim2", "styleElements", "collectionToDictionary", "getElementCollection", "regionElements", "cueElements", "cueElement", "cueText", "getTextContent", "parseTtmlTime", "timestampParsingError", "getTtmlStyles", "parentName", "elementsWithId", "_node$childNodes", "ttsNs", "regionStyle", "styleAttributes", "regionStyleName", "getAttributeNS", "hasAttributeNS", "timeAttributeValue", "parseHoursMinutesSecondsFrames", "parseTimeUnits", "OutputFilter", "timelineController", "cueRanges", "addCues", "createCaptionsTrack", "TimelineController", "Cues", "unparsedVttFrags", "captionsTracks", "nonNativeCaptionsTracks", "cea608Parser1", "cea608Parser2", "lastCc", "newVTTCCs", "captionsProperties", "cueHandler", "textTrack1", "captionsTextTrack1Label", "languageCode", "captionsTextTrack1LanguageCode", "textTrack2", "captionsTextTrack2Label", "captionsTextTrack2LanguageCode", "textTrack3", "captionsTextTrack3Label", "captionsTextTrack3LanguageCode", "textTrack4", "captionsTextTrack4Label", "captionsTextTrack4LanguageCode", "onFragParsingUserdata", "onFragDecrypted", "SUBTITLE_TRACKS_CLEARED", "onSubtitleTracksCleared", "initCea608Parsers", "channel1", "channel2", "channel3", "channel4", "merged", "cueRange", "overlap", "intersection", "CUES_PARSED", "getExistingTrack", "canReuseVttTextTrack", "createNativeTrack", "createNonNativeTrack", "existingTrack", "createTextTrack", "trackProperties", "closedCaptions", "NON_NATIVE_TEXT_TRACKS_FOUND", "_cleanTracks", "hasIMSC1", "enableWebVTT", "enableIMSC1", "inUseTracks", "inUseTrack", "textTrackKind", "captionsOrSubtitlesFromCharacteristics", "unusedTextTracks", "tracksList", "enableCEA708Captions", "captionsTrack", "instreamIdMatch", "closedCaptionsForLevel", "_data$part$index", "decrypted", "trackPlaylistMedia", "_parseIMSC1", "_parseVTTs", "_appendCues", "maxAvCC", "payloadWebVTT", "missingInitPTS", "_fallbackToIMSC1", "fragLevel", "ccBytes", "ccdatas", "extractCea608Data", "actualCCBytes", "tmpByte", "ccbyte1", "ccbyte2", "ccType", "manifestTrack", "x1", "y1", "y2", "WHITESPACE_CHAR", "captionScreen", "indenting", "Cue", "_track$cues", "cueA", "cueB", "fetchSupported", "AbortController", "ReadableStream", "Request", "FetchLoader", "fetchSetup", "requestTimeout", "controller", "getRequest", "abortInternal", "_this$callbacks", "getRequestParameters", "signal", "isArrayBuffer", "LENGTH", "maxTimeToFirstByteMs", "_this$callbacks2", "ok", "FetchError", "getContentLength", "loadProgressively", "responseData", "_this$callbacks3", "_this$callbacks4", "_this$callbacks5", "getCacheAge", "chunkCache", "getReader", "pump", "read", "done", "credentials", "getByteRangeLength", "byteRangeHeader", "contentRange", "byteRangeLength", "contentLength", "AGE_HEADER_LINE_REGEX", "XhrLoader", "xhrSetup", "retryTimeout", "loadInternal", "openAndSendXhr", "loadprogress", "loadtimeout", "useResponseText", "_response", "responseURL", "_this$context", "lengthComputable", "defaultLoadPolicy", "hlsDefaultConfig", "startOnSegmentBoundary", "detectStallWithCurrentTimeMs", "highBufferWatchdogPeriod", "nudgeOffset", "nudgeMaxRetry", "nudgeOnVideoHole", "liveSyncMode", "liveSyncDurationCount", "liveSyncOnStallIncrease", "liveMaxLatencyDurationCount", "liveSyncDuration", "liveMaxLatencyDuration", "maxLiveSyncPlaybackRate", "startLevel", "abrController", "bufferController", "capLevelController", "errorController", "fpsController", "abrEwmaDefaultEstimateMax", "minAutoBitrate", "requireKeySystemAccessOnStart", "enableDateRangeMetadataCues", "enableEmsgMetadataCues", "enableID3MetadataCues", "manifestLoadPolicy", "manifestLoadingTimeOut", "manifestLoadingMaxRetry", "manifestLoadingRetryDelay", "manifestLoadingMaxRetryTimeout", "levelLoadingTimeOut", "levelLoadingMaxRetry", "levelLoadingRetryDelay", "levelLoadingMaxRetryTimeout", "fragLoadingTimeOut", "fragLoadingMaxRetry", "fragLoadingRetryDelay", "fragLoadingMaxRetryTimeout", "timelineConfig", "subtitleStreamController", "subtitleTrackController", "audioStreamController", "audioTrackController", "emeController", "cmcdController", "contentSteeringController", "mergeConfig", "defaultConfig", "defaultsCopy", "deepCpy", "deprecatedSettingTypes", "deprecatedSettings", "policyName", "policyNotSet", "deprecatedSetting", "enableStreamingMode", "currentLoader", "MAX_START_GAP_JUMP", "SKIP_BUFFER_HOLE_STEP_SECONDS", "SKIP_BUFFER_RANGE_START", "TICK_INTERVAL$1", "GapController", "nudgeRetry", "stallReported", "stalled", "moved", "waiting", "onMediaPlaying", "onMediaWaiting", "hasBuffered", "poll", "beginSeek", "pausedEndedOrHalted", "stallResolved", "inFlightDependency", "getInFlightDependency", "inFlightFragments", "hasEnoughBuffer", "noBufferHole", "startJump", "maxStartGapJump", "partialOrGap", "_trySkipBufferHole", "tnow", "tWaiting", "stalledDuration", "_reportStall", "bufferedWithHoles", "_tryFixBufferStall", "STALL_RESOLVED", "_this$buffered$audio", "videoSourceBuffered", "audioBufferInfo", "videoTimes", "lastBufferedIndex", "holeStart", "holeEnd", "stalledDurationMs", "adjacentTraversal", "_tryNudgeBuffer", "bufferStarved", "gapLength", "startGap", "startFrag", "startProvisioned", "_this$hls$loadLevelOb", "moreToLoad", "provisioned", "targetTime", "inFlight", "inFlightData", "MIN_CUE_DURATION", "getCueClass", "createCueWithDataFields", "MAX_CUE_ENDTIME", "ID3TrackController", "dateRangeCuesAppended", "removeCues", "onEventCueEnter", "onFragParsingMetadata", "onLevelPtsUpdated", "_data$overrides", "updateDateRangeCues", "getID3Track", "updateId3CueEnds", "_this$id3Track", "removeOldCues", "_id3Track$cues", "idsToRemove", "appendedDateRangeCues", "durationKnown", "nextDateRangeWithSameClass", "candidateDateRange", "id2", "otherDateRange", "LatencyController", "stallCount", "_latency", "_targetLatencyUpdated", "latency", "computeLatency", "targetLatency", "distanceFromTarget", "liveMinLatencyDuration", "maxLatency", "forwardBufferLength", "edgeStalled", "changeMediaPlaybackRate", "maxLiveSyncOnStallIncrease", "liveEdge", "estimateLiveEdge", "syncPosition", "maxLevelUpdateAge", "_this$levelDetails", "_this$targetLatency", "LevelController", "_levels", "_firstLevel", "_maxAutoLevel", "_startLevel", "currentLevelIndex", "manualLevelIndex", "steering", "onParsedComplete", "resetLevels", "redundantSet", "generatePathwaySet", "resolutionFound", "videoCodecFound", "audioCodecFound", "levelParsed", "unknownUnsupportedCodecCount", "unknownCodec", "isAudioSupported", "isVideoSupported", "FRAMERATE", "HDCP", "PATHWAY", "RESOLUTION", "VIDEO_RANGE", "pathwayCount", "createLevel", "filterAndSortMediaOptions", "filteredLevels", "MANIFEST_INCOMPATIBLE_CODECS_ERROR", "assignTrackIdsByGroup", "unsortedLevels", "valueA", "valueB", "firstLevelInPlaylist", "_this$hls$userConfig", "firstLevelBitrate", "startingBwEstimate", "altAudioEnabled", "edata", "newLevel", "lastLevelIndex", "lastLevel", "lastPathwayId", "levelSwitchingData", "manualLevel", "configStartLevel", "pathwaysList", "filteredPathwayPriority", "_data$deliveryDirecti2", "_data$deliveryDirecti", "withoutMultiVariant", "_this$currentLevel", "checkMaxAutoUpdated", "getSourceBuffer", "SourceBuffer", "WebKitSourceBuffer", "isMSESupported", "sourceBuffer", "codecsForVideoContainer", "codecForAudioContainer", "changeTypeSupported", "_sourceBuffer$prototy", "TICK_INTERVAL", "StreamController", "audioCodecSwap", "_forceStartLoad", "_hasEnoughToStart", "fragPlaying", "fragLastKbps", "couldBacktrack", "audioCodecSwitch", "onMediaSeeked", "onFragLoadEmergencyAborted", "onAudioTrackSwitched", "checkFragmentChanged", "getMainFwdBufferInfo", "lastDetails", "_this$backtrackFragme", "backtrackFrag", "_loadBitrateTestFrag", "followingBufferedFrag", "immediateLevelSwitch", "abortCurrentFrag", "fetchdelay", "fragPlayingCurrent", "nextLevelId", "bufferedFrag", "nextBufferedFrag", "maxStart", "startPts", "heaac", "_curLevel$details", "newLevelId", "synchronizeToLiveEdge", "withinSlidingWindow", "_bufferInfo$buffered", "_getAudioCodec", "fromAltAudio", "mediaTrack", "alternate", "bufferedMainFragment", "seekToStartPos", "swapAudioCodec", "skipTolerance", "logMuxedErr", "isFirstFragment", "isFirstInDiscontinuity", "backtrack", "audioMetadata", "parsedVideoCodec", "trackTypes", "bufferOutput", "fragCurrentLevel", "LEVEL_SWITCHED", "currentFrag", "currentProgramDateTime", "_this$media4", "epocMs", "forceStartLoad", "KeyLoader", "keyUriToKeyInfo", "_loader$context", "createKeyLoadError", "loadingFrag", "_keyInfo", "_keyInfo2", "keyLoadPromise", "_keyInfo$mediaKeySess", "loadKeyHTTP", "loadKeyEME", "keySessionContextPromise", "frag2", "keyInfo2", "mapContextToLevelType", "getResponseUrl", "PlaylistLoader", "loaders", "checkAutostartLoad", "destroyInternalLoaders", "onAudioTrackLoading", "onSubtitleTrackLoading", "createInternalLoader", "PLoader", "InternalLoader", "getInternalLoader", "resetInternalLoader", "contextType", "_context$deliveryDire", "maxLowLatencyPlaylistRefresh", "loader2", "handleManifestParsingError", "handleTrackOrLevelPlaylist", "handleMasterPlaylist", "handleNetworkError", "parsedResult", "levelId", "singleLevel", "handlePlaylistLoaded", "MANIFEST_PARSING_ERROR", "UNKNOWN", "MANIFEST_LOAD_ERROR", "_error", "Hls", "DefaultConfig", "coreComponents", "networkControllers", "_emitter", "_autoLevelCapping", "_maxHdcpLevel", "latencyController", "levelController", "subtititleStreamController", "gapController", "_sessionId", "triggeringException", "_AbrController", "_BufferController", "_CapLevelController", "_ErrorController", "_FpsController", "_InterstitialsController", "playListLoader", "_ContentSteeringController", "id3TrackController", "createController", "AudioStreamControllerClass", "SubtitleStreamControllerClass", "ControllerClass", "components", "controllerInstance", "eventObject", "ATTACH_MEDIA_ERROR", "attachMediaSource", "attachingData", "loadedSource", "loadingSource", "shouldStartCapping", "newCapLevelToPlayerSize", "playingDate", "_this$audioTrackContr", "_this$subtitleTrackCo", "audioTrackId", "subtitleTrackId", "_this$bufferControlle", "_this$interstitialsCo", "getMediaDecodingInfo", "getSegmentRuntimeId", "segmentRequestUrl", "getByteRange", "global$1", "__defProp2", "__defNormalProp2", "__publicField2", "RequestError", "CoreRequestError", "HttpRequestExecutor", "httpConfig", "eventTarget", "onChunkDownloaded", "getEventDispatcher", "requestByteRange", "expectedBytesLength", "requestControls", "downloadSource", "abortController", "notReceivingBytesTimeoutMs", "httpNotReceivingBytesTimeoutMs", "__async", "httpRequestSetup", "handleResponseHeaders", "firstBytesReceived", "iter", "__forAwait", "readStream", "more", "addLoadedChunk", "validateHTTPSegment", "clearLoadedBytes", "completeOnSuccess", "contentLengthHeader", "contentRangeHeader", "parseContentRangeHeader", "responseExpectedBytesLength", "setTotalBytes", "httpLoaderError", "abortOnError", "__asyncGenerator", "__await", "rangeHeaderRegex", "headerValue", "getDefaultExportFromCjs$1", "browser$1", "cachedSetTimeout", "cachedClearTimeout", "defaultSetTimout", "defaultClearTimeout", "runTimeout", "runClearTimeout", "queue", "draining", "currentQueue", "queueIndex", "cleanUpNextTick", "drainQueue", "Item", "noop$1", "browserExports$1", "process$1", "commonjsGlobal", "getDefaultExportFromCjs", "ms", "hasRequiredMs", "requireMs", "common$2", "hasRequiredCommon", "requireCommon", "hasRequiredBrowser", "requireBrowser", "browserExports", "debug$3", "hasRequiredEvents", "requireEvents", "R", "ReflectApply", "receiver", "ReflectOwnKeys", "ProcessEmitWarning", "warning", "NumberIsNaN", "_maxListeners", "defaultMaxListeners", "checkListener", "setMaxListeners", "_getMaxListeners", "that", "getMaxListeners", "doError", "er", "arrayClone", "_addListener", "prepend", "existing", "newListener", "onceWrapper", "fired", "wrapFn", "_onceWrap", "wrapped", "originalListener", "spliceOne", "_listeners", "unwrap", "evlistener", "unwrapListeners", "rawListeners", "errorListener", "resolver", "eventTargetAgnosticAddListener", "addErrorHandlerIfEventEmitter", "wrapListener", "eventsExports", "once$1", "wrappy_1", "hasRequiredWrappy", "requireWrappy", "wrappy", "cb2", "hasRequiredOnce", "requireOnce", "strict", "onceStrict", "proto", "onceError", "onceExports", "queueMicrotask_1", "hasRequiredQueueMicrotask", "requireQueueMicrotask", "queueMicrotask", "runParallel_1", "hasRequiredRunParallel", "requireRunParallel", "runParallel", "queueMicrotask2", "tasks", "task", "runParallelExports", "parallel", "scope$1", "RTCPeerConnection", "mozRTCPeerConnection", "webkitRTCPeerConnection", "RTCSessionDescription", "mozRTCSessionDescription", "webkitRTCSessionDescription", "RTCIceCandidate", "mozRTCIceCandidate", "webkitRTCIceCandidate", "fixedSize", "hasRequiredFixedSize", "requireFixedSize", "hwm", "btm", "peek", "fastFifo", "hasRequiredFastFifo", "requireFastFifo", "FixedFIFO", "tail", "browserDecoder", "hasRequiredBrowserDecoder", "requireBrowserDecoder", "encoding", "textDecoder", "hasRequiredTextDecoder", "requireTextDecoder", "PassThroughDecoder", "UTF8Decoder", "normalizeEncoding", "streamx", "hasRequiredStreamx", "requireStreamx", "STREAM_DESTROYED", "PREMATURE_CLOSE", "FIFO", "TextDecoder2", "MAX", "OPENING", "PREDESTROYING", "DESTROYED", "NOT_OPENING", "NOT_PREDESTROYING", "READ_ACTIVE", "READ_UPDATING", "READ_PRIMARY", "READ_QUEUED", "READ_RESUMED", "READ_PIPE_DRAINED", "READ_ENDING", "READ_EMIT_DATA", "READ_EMIT_READABLE", "READ_EMITTED_READABLE", "READ_DONE", "READ_NEXT_TICK", "READ_NEEDS_PUSH", "READ_READ_AHEAD", "READ_FLOWING", "READ_ACTIVE_AND_NEEDS_PUSH", "READ_PRIMARY_AND_ACTIVE", "READ_EMIT_READABLE_AND_QUEUED", "READ_RESUMED_READ_AHEAD", "READ_NOT_ACTIVE", "READ_NON_PRIMARY", "READ_NON_PRIMARY_AND_PUSHED", "READ_PUSHED", "READ_PAUSED", "READ_NOT_QUEUED", "READ_NOT_ENDING", "READ_PIPE_NOT_DRAINED", "READ_NOT_NEXT_TICK", "READ_NOT_UPDATING", "READ_NO_READ_AHEAD", "READ_PAUSED_NO_READ_AHEAD", "WRITE_ACTIVE", "WRITE_UPDATING", "WRITE_PRIMARY", "WRITE_QUEUED", "WRITE_UNDRAINED", "WRITE_DONE", "WRITE_EMIT_DRAIN", "WRITE_NEXT_TICK", "WRITE_WRITING", "WRITE_FINISHING", "WRITE_CORKED", "WRITE_NOT_ACTIVE", "WRITE_NON_PRIMARY", "WRITE_NOT_FINISHING", "WRITE_DRAINED", "WRITE_NOT_QUEUED", "WRITE_NOT_NEXT_TICK", "WRITE_NOT_UPDATING", "WRITE_NOT_CORKED", "ACTIVE", "NOT_ACTIVE", "DESTROY_STATUS", "OPEN_STATUS", "AUTO_DESTROY", "NON_PRIMARY", "ACTIVE_OR_TICKING", "TICKING", "IS_OPENING", "READ_PRIMARY_STATUS", "READ_STATUS", "READ_ENDING_STATUS", "READ_READABLE_STATUS", "SHOULD_NOT_READ", "READ_BACKPRESSURE_STATUS", "READ_UPDATE_SYNC_STATUS", "READ_NEXT_TICK_OR_OPENING", "WRITE_PRIMARY_STATUS", "WRITE_QUEUED_AND_UNDRAINED", "WRITE_QUEUED_AND_ACTIVE", "WRITE_DRAIN_STATUS", "WRITE_STATUS", "WRITE_PRIMARY_AND_ACTIVE", "WRITE_ACTIVE_AND_WRITING", "WRITE_FINISHING_STATUS", "WRITE_BACKPRESSURE_STATUS", "WRITE_UPDATE_SYNC_STATUS", "WRITE_DROP_DATA", "asyncIterator", "WritableState", "mapWritable", "byteLength2", "byteLengthWritable", "pipeline", "drains", "defaultByteLength", "afterWrite", "afterUpdateNextTick", "updateWriteNT", "_duplexState", "autoBatch", "_writableState", "_writev", "_write", "updateNonPrimary", "continueUpdate", "_final", "afterFinal", "_destroy", "afterDestroy", "_open", "afterOpen", "updateCallback", "updateNextTick", "ReadableState", "mapReadable", "byteLengthReadable", "readAhead", "pipeTo", "afterRead", "updateReadNT", "pipe", "Pipeline", "noop22", "isStreamx", "finished", "onclose", "afterDrain", "drain", "_read", "updateNextTickIfOpen", "TransformState", "afterTransform", "afterPipe", "pipeToFinished", "rs", "_readableState", "ws", "tickDrains", "writes", "Stream", "predestroy", "_predestroy", "readable", "destroying", "Readable", "eagerOpen", "setEncoding", "dec", "echo", "mapOrSkip", "dest", "resume", "_fromAsyncIterator", "ite", "return", "isReadStreamx", "isBackpressured", "isPaused", "promiseResolve", "promiseReject", "onreadable", "ondata", "throw", "Writable", "writev", "final", "cork", "uncork", "batch", "drained", "isWritev", "Duplex", "Transform", "_transformState", "_transform", "_flush", "transformAfterFlush", "PassThrough", "pipelinePromise", "streams", "errorHandle", "fin", "autoDestroy", "rd", "wr", "onerror2", "isStream", "isEnded", "isFinished", "getStreamError", "isDisturbed", "isTypedArray", "streamxExports", "errCode$1", "hasRequiredErrCode", "requireErrCode", "createError", "ErrClass", "errCodeExports", "errCode", "alphabet", "encodeLookup", "decodeLookup", "arr2hex", "hex2arr", "sizeof", "lookup$1", "i$1", "arr2text", "encoder", "TextEncoder", "text2arr", "encode", "bin2hex", "MAX_ARGUMENTS_LENGTH", "hex2bin", "points", "scope", "crypto$1", "msCrypto", "randomBytes", "Debug", "MAX_BUFFERED_AMOUNT$1", "ICECOMPLETE_TIMEOUT", "CHANNEL_CLOSING_TIMEOUT", "filterTrickle", "sdp", "Peer$1", "Peer", "allowHalfOpen", "__objectMode", "objectMode", "_debug", "channelName", "initiator", "channelConfig", "channelNegotiated", "negotiated", "offerOptions", "answerOptions", "sdpTransform", "trickle", "allowHalfTrickle", "iceCompleteTimeout", "_destroying", "_connected", "remoteAddress", "remoteFamily", "remotePort", "localAddress", "localFamily", "localPort", "_pcReady", "_channelReady", "_iceComplete", "_iceCompleteTimer", "_channel", "_pendingCandidates", "_isNegotiating", "_firstNegotiation", "_batchedNegotiation", "_queuedNegotiation", "_sendersAwaitingStable", "_closingInterval", "_remoteTracks", "_remoteStreams", "_chunk", "_cb", "_interval", "_pc", "__destroy", "_isReactNativeWebrtc", "_peerConnectionId", "oniceconnectionstatechange", "_onIceStateChange", "onicegatheringstatechange", "onconnectionstatechange", "_onConnectionStateChange", "onsignalingstatechange", "_onSignalingStateChange", "onicecandidate", "_onIceCandidate", "peerIdentity", "_setupData", "createDataChannel", "ondatachannel", "_needsNegotiation", "_onFinishBound", "_onFinish", "bufferSize", "bufferedAmount", "connected", "address", "port", "family", "renegotiate", "transceiverRequest", "addTransceiver", "remoteDescription", "_addIceCandidate", "setRemoteDescription", "_createAnswer", "iceCandidateObj", "addIceCandidate", "endsWith", "negotiate", "_createOffer", "_senderMap", "onopen", "ontrack", "binaryType", "bufferedAmountLowThreshold", "_onChannelMessage", "onbufferedamountlow", "_onChannelBufferedAmountLow", "_onChannelOpen", "_onChannelClose", "colno", "isClosing", "destroySoon", "_startIceCompleteTimeout", "createOffer", "offer", "sendOffer", "localDescription", "setLocalDescription", "createAnswer", "answer", "sendAnswer", "_requestMissingTransceivers", "connectionState", "iceConnectionState", "iceGatheringState", "_maybeReady", "getStats", "flattenValues", "reports", "stat", "_connecting", "findCandidatePair", "remoteCandidates", "localCandidates", "candidatePairs", "foundSelectedCandidatePair", "setSelectedCandidatePair", "selectedCandidatePair", "local", "localCandidateId", "ip", "ipAddress", "portNumber", "googLocalAddress", "remote", "remoteCandidateId", "googRemoteAddress", "selectedCandidatePairId", "googActiveConnection", "_onInterval", "unref", "signalingState", "sender", "sdpMLineIndex", "sdpMid", "WEBRTC_SUPPORT", "sdpSemantics", "queueMicrotaskExports", "queueMicrotask$1", "UDPTracker", "common$1", "DEFAULT_ANNOUNCE_PEERS", "MAX_ANNOUNCE_PEERS", "common", "debug$2", "_WebSocket", "WebSocket", "MAX_BUFFERED_AMOUNT", "Socket", "socket", "_ws", "OPEN", "_handleOpen", "_handleMessage", "_handleClose", "_handleError", "_handleFinishBound", "_handleFinish", "onClose", "CLOSED", "WEBSOCKET_SUPPORT", "Tracker", "client", "announceUrl", "intervalMs", "DEFAULT_ANNOUNCE_INTERVAL", "announce", "_defaultAnnounceOpts", "debug$1", "socketPool", "RECONNECT_MINIMUM", "RECONNECT_MAXIMUM", "RECONNECT_VARIANCE", "OFFER_TIMEOUT", "WebSocketTracker", "peers", "reconnecting", "retries", "reconnectTimer", "expectingResponse", "_openSocket", "info_hash", "_infoHashBinary", "peer_id", "_peerIdBinary", "_trackerId", "trackerid", "_send", "numwant", "_generateOffers", "offers", "scrape", "infoHash", "noop2", "peerId", "peer", "trackerTimeout", "_onSocketConnectBound", "_onSocketDataBound", "_onSocketCloseBound", "_onSocketErrorBound", "consumers", "destroyCleanup", "DESTROY_TIMEOUT", "_onSocketConnect", "_onSocketError", "_onSocketData", "_onSocketClose", "parsedUrl", "agent", "_proxyOpts", "httpsAgent", "httpAgent", "socksProxy", "_onAnnounceResponse", "_onScrapeResponse", "failure", "trackerId", "_createPeer", "to_peer_id", "offer_id", "offerId", "files", "_startReconnectTimer", "generateOffer", "checkDone", "_rtcConfig", "wrtc", "_wrtc", "onConnect", "_socketPool", "Client", "_peerIdBuffer", "_infoHashBuffer", "_port", "_getAnnounceOpts", "getAnnounceOpts", "rtcConfig", "_userAgent", "proxyOpts", "webrtcSupport", "nextTickWarn", "_trackers", "_announce", "tracker", "stop", "clientOpts", "md5$1", "hasRequiredMd5", "requireMd5", "FF", "GG", "HH", "II", "byteToHex", "wordToBytes", "utf8toBytes", "utf8", "bytesToWords", "bytes_count", "bits_count", "words", "utf8toMD5", "bytesToMD5", "fromBytes", "S11", "S12", "S13", "S14", "S21", "S22", "S23", "S24", "S31", "S32", "S33", "S34", "S41", "S42", "S43", "S44", "AA", "BB", "CC", "DD", "hash_bytes", "fromUtf8", "b64", "to64", "MAX_KEY_LENGTH", "b64_map", "gen_salt", "salt", "crypt", "md", "kl", "md5Exports", "md5", "PACKAGE_VERSION", "TRACKER_CLIENT_VERSION_PREFIX", "formatVersion", "HASH_SYMBOLS", "PEER_ID_LENGTH", "getStreamHash", "streamId", "binary15BytesHashString", "generatePeerId", "trackerClientVersionPrefix", "trackerClientId", "randomCharsCount", "versionString", "splittedVersion", "padStart", "getStreamString", "getSegmentString", "externalId", "getControlledPromise", "rej", "joinChunks", "sum", "getRandomItem", "utf8ToUintArray", "utf8String", "encoder2", "encodeInto", "hexToUtf8", "hexString", "arrayBackwards", "isObject", "filterUndefinedProps", "obj2", "deepCopy", "shuffleArray", "overrideConfig", "updates", "updateValue", "mergeAndFilterConfig", "baseConfig", "specificStreamConfig", "mergedConfig", "keysOfT", "filteredConfig", "PeerCommandType$1", "PeerCommandType2", "SerializedItem", "SerializedItem2", "getRequiredBytesForInt", "binaryString", "necessaryBits", "intToBytes", "isNegative", "bytesAmountNumber", "bytesAmount", "BigInt", "bytesToInt", "getNumberPart", "serializeInt", "numberMetadata", "deserializeInt", "numberBytesLength", "serializeSimilarIntArray", "numbers", "commonPartNumbersMap", "common2", "diffByte", "ResizableUint8Array", "commonPart", "binaryArray", "getBytesChunks", "commonPartWithLength", "getBuffer", "deserializeSimilarIntArray", "codeByte", "commonPartArraysAmount", "originalIntArr", "arrayLength", "diffPart", "serializeString", "deserializeString", "lengthByte", "stringBytes", "addBytes", "bytesToAdd", "FRAME_PART_LENGTH", "commandFrameStart", "stringToUtf8CodesBuffer", "commandFrameEnd", "commandDivFrameStart", "commandDivFrameEnd", "startFrames", "endFrames", "commandFramesLength", "isCommandChunk", "bufferEndingToCompare", "areBuffersEqual", "isFirstCommandChunk", "isLastCommandChunk", "BinaryCommandJoiningError", "BinaryCommandChunksJoiner", "addCommandChunk", "isFirstChunk", "unframeCommandChunk", "BinaryCommandCreator", "commandType", "maxChunkLength", "addInteger", "addSimilarIntArr", "addString", "unframedBuffer", "resultBuffers", "frameBuffer", "chunksCount", "splitBufferToEqualChunks", "getResultBuffers", "deserializeCommand", "commandCode", "deserializedCommand", "getDataTypeFromByte", "Int", "SimilarIntArray", "typeCode", "Min", "Max", "chunkLength", "frameStart", "frameEnd", "buffer1", "serializeSegmentAnnouncementCommand", "command", "maxChunkSize", "loadingByHttp", "creator", "serializePeerSegmentCommand", "serializePeerSendSegmentCommand", "serializePeerSegmentRequestCommand", "serializePeerCommand", "CancelSegmentRequest", "SegmentAbsent", "SegmentDataSendingCompleted", "SegmentRequest", "SegmentsAnnouncement", "SegmentData", "Command", "PeerCommandType", "PeerProtocol", "connection", "peerConfig", "eventHandlers", "receivingCommandBytes", "onSegmentChunkReceived", "idUtf8", "onChunkUploaded", "onDataReceived", "sendCommand", "binaryCommandBuffers", "webRtcMaxMessageSize", "stopUploadingSegmentData", "uploadingContext", "stopUploading", "getUploadingRequestId", "requestId", "splitSegmentDataToChunksAndUploadAsync", "getBufferChunks", "isUploadingSegmentData", "sendChunk", "commandChunks", "commandBuffer", "onCommandReceived", "bytesLeft", "bytesToSend", "Peer2", "streamType", "loadedSegments", "httpLoadingSegments", "onSegmentsAnnouncement", "peerProtocol", "onSegmentRequested", "downloadingContext", "isSegmentDataCommandReceived", "sendCancelSegmentRequestCommand", "cancelSegmentDownloading", "isValid2", "validateP2PSegment", "downloadingErrors", "onPeerClosed", "getPeerIdFromConnection", "onConnectionError", "onPeerConnectionClosed", "downloadingSegment", "getSegmentStatus", "downloadSegment", "segmentRequest", "p2pNotReceivingBytesTimeoutMs", "error2", "p2pErrorRetries", "uploadSegmentData", "sendSegmentDataSendingCompletedCommand", "sendSegmentsAnnouncementCommand", "loadedSegmentsIds", "httpLoadingSegmentsIds", "sendSegmentAbsentCommand", "segmentExternalId", "isSafariOrWkWebview", "isSafari2", "isWkWebview", "_P2PTrackerClient", "_P2PTrackerClient2", "streamSwarmId", "peerConnection", "itemId", "peerItem", "_peers", "potentialConnections", "streamShortId", "onPeerConnected", "streamHash", "PEER_ID_BY_INFO_HASH", "announceTrackers", "onReceivePeerConnection", "onTrackerClientWarning", "onTrackerClientError", "clearPeerIdCache", "P2PTrackerClient", "PEER_PROTOCOL_VERSION", "getStreamSwarmId", "swarmId", "getStreamId", "getSegmentFromStreamsMap", "segmentRuntimeId", "getSegmentFromStreamByExternalId", "getSegmentAvgDuration", "calculateTimeWindows", "timeWindowsConfig", "availableMemoryInPercent", "highDemandTimeWindow", "httpDownloadTimeWindow", "p2pDownloadTimeWindow", "getSegmentPlaybackStatuses", "playback", "currentP2PLoader", "availableMemoryPercent", "isHighDemand", "isSegmentInTimeWindow", "isHttpDownloadable", "isP2PDownloadable", "isSegmentLoadingOrLoadedBySomeone", "timeWindowLength", "P2PLoader", "streamManifestUrl", "requests", "segmentStorage", "onSegmentAnnouncement", "isP2PUploadDisabled", "httpLoading", "getSegmentsAnnouncement", "sendEmptyAnnouncement", "sendSegmentsAnnouncement", "isAnnounceMicrotaskCreated", "trackerClient", "byteFrom", "swarmId2", "streamSwarmId2", "segmentData", "getSegmentData", "broadcastAnnouncement", "setSegmentChangeCallback", "peersWithSegment", "peer2", "getOrCreateRequest", "isSegmentLoadedBySomeone", "connectedPeerCount", "getStoredSegmentIds", "httpRequests", "runtimeId", "P2PLoadersContainer", "_currentLoaderItem", "findOrCreateLoaderForStream", "createLoader", "loggerInfo", "loaderItem", "destroyTimeoutId", "changeCurrentLoader", "setLoaderDestroyTimeout", "destroyAndRemoveLoader", "p2pInactiveLoaderDestroyTimeoutMs", "mapSegmentWithStreamToSegment", "Request$1", "requestProcessQueueCallback", "bandwidthCalculators", "playbackConfig", "FailedRequestAttempts", "throwErrorIfNotLoadingStatus", "currentAttempt", "setStatus", "_abortRequestCallback", "_failedAttempts", "onSegmentError", "notReceivingBytesTimeout", "manageBandwidthCalculatorsState", "_totalBytes", "_loadedBytes", "onSegmentLoaded", "segmentUrl", "bytesLength", "restart", "allBC", "httpBC", "lastLoadedChunkTimestamp", "onSegmentAbort", "onSegmentStart", "Timeout", "abortOnTimeout", "_logger", "finalData", "_status", "_isHandledByProcessQueue", "failedAttempts", "isHandledByProcessQueue", "markHandledByProcessQueue", "requestData", "startFromByte", "startTimestamp", "abortFromProcessQueue", "attempts", "httpAttemptsCount", "lastAttempt", "RequestsContainer", "executingHttpCount", "executingP2PCount", "p2pRequests", "EngineRequest", "engineCallbacks", "shouldBeStartedImmediately", "_shouldBeStartedImmediately", "markAsShouldBeStartedImmediately", "generateQueue", "lastRequestedSegment", "availablePercentMemory", "requestedSegment", "queueSegments", "firstStatuses", "isNotActualStatuses", "second", "secondStatuses", "statuses", "FAILED_ATTEMPTS_CLEAR_INTERVAL", "PEER_UPDATE_LATENCY", "HybridLoader", "streamDetails", "lastQueueProcessingTimeStamp", "isProcessQueueMicrotaskCreated", "processQueue", "activeStream", "segmentAvgDuration", "requestProcessQueueMicrotask", "p2pLoaders", "setIntervalLoading", "peersCount", "randomTimeout", "randomHttpDownloadInterval", "loadRandomThroughHttp", "loadSegment", "engineRequest", "hasSegment", "queueDownloadRatio", "getBandwidth", "processRequests", "queueSegmentIds", "httpErrorRetries", "storeSegment", "simultaneousHttpDownloads", "simultaneousP2PDownloads", "loadThroughHttp", "isP2PLoadingRequest", "abortLastHttpLoadingInQueueAfterItem", "loadThroughP2P", "abortLastP2PLoadingInQueueAfterItem", "abortSegmentRequest", "availableStorageCapacityPercent", "getAvailableStorageCapacityPercent", "p2pLoader", "segmentsToLoad", "safeRandomSegmentsCount", "randomIndices", "probability", "randomIndex", "itemSegment", "totalCapacity", "usedCapacity", "getUsage", "maxPossibleLength", "alreadyLoadedCount", "activeLevelBitrate", "getBandwidthLoadingOnly", "levelChangedTimestamp", "httpRealBandwidth", "notifyLevelChanged", "sendBroadcastAnnouncement", "sendEmptySegmentsAnnouncement", "updatePlayback", "isRateChanged", "isPositionChanged", "isPositionSignificantlyChanged", "onPlaybackUpdated", "updateStream", "storageCleanUpIntervalId", "BandwidthCalculator", "clearThresholdMs", "loadingOnlyTimestamps", "noLoadingsTime", "timestamps", "startLoading", "clearStale", "loadingsCount", "loadingsStoppedAt", "stopLoading", "ignoreThresholdTimestamp", "milliseconds", "lastItemTimestamp", "lastCountedTimestamp", "samplesToRemove", "getStorageItemId", "segmentId", "isAndroid", "isIPadOrIPhone", "isAndroidWebview", "BYTES_PER_MiB", "SegmentMemoryStorage", "initialize", "coreConfig", "mainStreamConfig", "secondaryStreamConfig", "setMemoryStorageLimit", "currentPlayback", "isLiveStream", "_swarmId", "storageId", "increaseStorageUsage", "segmentChangeCallback", "segmentStorageId", "dataItem", "segmentMemoryStorageLimit", "currentStorageUsage", "playbackPosition", "calculatedUsedCapacity", "externalIds", "streamCacheId", "newSegmentSize", "isMemoryLimitReached", "affectedStreams", "sortedCache", "shouldRemoveSegment", "decreaseStorageUsage", "sendUpdatesToAffectedStreams", "segmentByteLength", "currentPlaybackPosition", "getStreamTimeWindow", "configKey", "definedListeners", "_Core", "_Core2", "commonCoreConfig", "DEFAULT_COMMON_CORE_CONFIG", "DEFAULT_STREAM_CONFIG", "mainStream", "secondaryStream", "getConfig", "applyDynamicConfig", "dynamicConfig", "mainStreamConfigCopy", "secondaryStreamConfigCopy", "overrideAllConfigs", "processSpecificDynamicConfigParams", "prevConfig", "updatedConfig", "isP2PDisabled", "getUpdatedStreamProperty", "destroyStreamLoader", "streamLoader", "mainStreamLoader", "secondaryStreamLoader", "propertyName", "updatedStreamConfig", "setManifestResponseUrl", "manifestResponseUrl", "getStream", "streamRuntimeId", "addStreamIfNoneExists", "addSegments", "removeSegmentIds", "initializeSegmentStorage", "identifySegment", "getStreamHybridLoader", "abortSegmentLoading", "setActiveLevelBitrate", "setIsLive", "isSegmentLoadable", "createCustomStorage", "customSegmentStorageFactory", "createNewHybridLoader", "streamConfig", "Core", "debug$4", "__classPrivateFieldSet$2", "__classPrivateFieldGet$2", "_FragmentLoaderBase_instances", "_FragmentLoaderBase_callbacks", "_FragmentLoaderBase_createDefaultLoader", "_FragmentLoaderBase_defaultLoader", "_FragmentLoaderBase_core", "_FragmentLoaderBase_response", "_FragmentLoaderBase_segmentId", "_FragmentLoaderBase_handleError", "_FragmentLoaderBase_abortInternal", "DEFAULT_DOWNLOAD_LATENCY", "FragmentLoaderBase", "core2", "isSegmentDownloadableByP2PCore", "getLoadingStat", "thrownError", "targetBitrate", "loadingEndTime", "timeForLoading", "__classPrivateFieldSet$1", "__classPrivateFieldGet$1", "_PlaylistLoaderBase_defaultLoader", "PlaylistLoaderBase", "SegmentManager", "processMainManifest", "updatePlaylist", "segmentToRemoveIds", "newSegments", "responseUrl", "fragByteRange", "__classPrivateFieldGet", "__classPrivateFieldSet", "injectMixin", "HlsJsClass", "_HlsJsWithP2PClass_p2pEngine", "p2pEngine", "_a2", "hlsJsConfig", "HlsJsP2PEngine", "getConfigForHlsJs", "bindHls", "onHlsJsCreated", "MAX_LIVE_SYNC_DURATION", "currentHlsInstance", "handlePlaybackUpdate", "Response", "segmentManager", "updateLiveSyncDurationCount", "updateMediaElementEventHandlers", "destroyCore", "updateHlsEventsHandlers", "createFragmentLoaderClass", "createPlaylistLoaderClass", "hlsInstanceGetter", "initHlsEvents", "hlsInstance", "handleManifestLoaded", "handleLevelSwitching", "handleLevelUpdated", "handleMediaDetached", "handleMediaAttached", "fragmentDuration", "maxLiveSyncCount", "newLiveSyncDurationCount", "engine", "getEngine", "HlsWithP2P", "alreadyRegistered", "hlsTypeRE", "hlsExtRE", "hlsProvider", "Html5Hlsjs", "Plugin$7", "HLSJSConfigHandler", "srOptions_", "hlsjsConfig", "levelLabelHandler", "videoElement", "errorTxt", "MEDIA_ERR_ABORTED", "MEDIA_ERR_DECODE", "_handleMediaError", "MEDIA_ERR_NETWORK", "MEDIA_ERR_SRC_NOT_SUPPORTED", "dvrDuration", "edgeMargin", "_getHumanErrorMsg", "_handleUnrecoverableError", "_removeQuality", "errorCounts", "_handleNetworkError", "liveEnded", "maxNetworkErrorRecovery", "_onError", "buildLevelLabel", "peertubeResolutions", "_notifyVideoQualities", "resolutions", "selectCallback", "manuallySelectVideoLevel", "getSeparateAudioTrack", "audioMode", "updateToAudioOrVideo", "_startLoad", "_onMetaData", "buildBaseConfig", "p2pMediaLoaderOptions", "registerLevelEventSwitch", "newSource", "resolutionId", "autoResolutionChosenId", "fireCallback", "hlsjsConfigRef", "debugLogger$6", "Plugin$6", "P2pMediaLoaderPlugin", "statsP2PBytes", "pendingDownload", "pendingUpload", "totalDownload", "totalUpload", "statsHTTPBytes", "fallbackToBuiltInIOS", "MediaError", "onHLSJSInitialized", "networkInfoInterval", "initializePlugin", "onHLSJSLiveEnded", "segmentValidator", "getLiveLatency", "getLiveLatencyFromEdge", "redundancyUrlManager", "onSegmentSuccess", "redundancyUrlsCount", "countBaseUrls", "totalHTTPPeers", "runStats", "connectedPeers", "p2pDownloadSpeed", "arraySum", "p2pUploadSpeed", "httpDownloadSpeed", "videoFileToken", "reinjectVideoFileToken", "getResolutionButton", "LIBVERSION", "UA_MAX_LENGTH", "USER_AGENT", "EMPTY", "FUNC_TYPE", "UNDEF_TYPE", "OBJ_TYPE", "STR_TYPE", "UA_BROWSER", "UA_CPU", "UA_DEVICE", "UA_ENGINE", "UA_OS", "UA_RESULT", "VENDOR", "ARCHITECTURE", "MAJOR", "MODEL", "CONSOLE", "MOBILE", "TABLET", "SMARTTV", "WEARABLE", "XR", "EMBEDDED", "INAPP", "BRANDS", "FORMFACTORS", "FULLVERLIST", "PLATFORM", "PLATFORMVER", "BITNESS", "CH_HEADER", "CH_HEADER_FULL_VER_LIST", "CH_HEADER_ARCH", "CH_HEADER_BITNESS", "CH_HEADER_FORM_FACTORS", "CH_HEADER_MOBILE", "CH_HEADER_MODEL", "CH_HEADER_PLATFORM", "CH_HEADER_PLATFORM_VER", "CH_ALL_VALUES", "AMAZON", "APPLE", "ASUS", "BLACKBERRY", "GOOGLE", "HUAWEI", "LENOVO", "HONOR", "LG", "MICROSOFT", "MOTOROLA", "NVIDIA", "ONEPLUS", "OPPO", "SAMSUNG", "SHARP", "SONY", "XIAOMI", "ZEBRA", "CHROME", "CHROMIUM", "CHROMECAST", "EDGE", "FIREFOX", "OPERA", "FACEBOOK", "SOGOU", "PREFIX_MOBILE", "SUFFIX_BROWSER", "WINDOWS", "isWindow", "NAVIGATOR", "NAVIGATOR_UADATA", "userAgentData", "defaultRgx", "extensions", "mergedRgx", "extraRgx", "isExtensions", "enumerize", "enums", "lowerize", "isString", "deep", "itemListToArray", "strip", "brand", "majorize", "setProps", "pattern", "stripQuotes", "rgxMapper", "arrays", "regex", "strMapper", "windowsVersionMap", "formFactorsMap", "defaultRegexes", "cpu", "device", "os", "defaultProps", "isIgnore", "isIgnoreRgx", "createIData", "itemType", "init_props", "is_ignoreProps", "is_ignoreRgx", "toString_props", "IData", "withClientHints", "getHighEntropyValues", "setCH", "UACHData", "parseCH", "withFeatureCheck", "detectFeature", "is", "strToCheck", "IDataResolve", "resolveData", "uach", "isHttpUACH", "UAItem", "rgxMap", "uaCH", "ch", "brave", "isBrave", "standalone", "detect", "itemType2", "parseUA", "uaCH2", "rgxMap2", "brands", "prevName", "brandName", "brandVersion", "archName", "reParse", "ff", "osName", "osVersion", "UAParser", "getResult", "httpUACH", "regexMap", "createItemFunc", "getBrowser", "getCPU", "getDevice", "getOS", "ua2", "setUA", "BROWSER", "CPU", "DEVICE", "ENGINE", "OS", "debugLogger$5", "Plugin$5", "PeerTubePlugin", "setUserAgentInfo", "menuOpened", "mouseInControlBar", "mouseInSettings", "hasInitialSeek", "videoViewUrl", "authorizationHeader", "hasAutoplay", "initialInactivityTimeout", "currentSubtitle", "initializePlayer", "initOnVideoChange", "deleteLegacyIndexedDB", "currentPlaybackRate", "hideFatalError", "updatePlayerSizeClasses", "adaptPosterForAudioOnly", "initOnRatioChange", "videoViewInterval", "onMenuOpened", "alterInactivity", "onMenuClosed", "displayFatalError", "errorModal", "loadingSpinner", "buildModal", "defaultDevice", "userAgentInfo", "initSmoothProgressBar", "patchMenuEscapeKey", "listenControlBarMouse", "listenFullScreenChange", "initCaptions", "updateControlBar", "handleStartStopTime", "runUserViewing", "autoPlayerRatio", "defaultRatio", "cssRatioVariable", "tryToUpdateRatioFromOptions", "videoRatio", "adaptPlayerFromRatio", "portraitMode", "cssPlayerPortraitModeVariable", "currentRatio", "lastViewEvent", "disableUserViewing", "videoViewOnPlayHandler", "notifyUserIsWatching", "videoViewOnSeekedHandler", "videoViewOnEndedHandler", "videoViewIntervalMs", "viewEvent", "operatingSystem", "breakpoint", "settingsButton", "dialog", "setInactivityTimeout", "caption", "videoCaptions", "automaticallyGenerated", "getPlaybackRateButton", "getCaptionsButton", "videoDuration", "stopTimeHandler", "indexedDB", "databases", "db", "deleteDatabase", "ControlBarOptionsBuilder", "getChildrenOptions", "getPreviousVideo", "getNextVideo", "getTimeControls", "getProgressControl", "p2PInfoButton", "captionToggleButton", "getSettingsButton", "getPeerTubeLinkButton", "getTheaterButton", "fullscreenToggle", "settingEntries", "maxHeightOffset", "peerTubeLiveDisplay", "currentTimeDisplay", "timeDivider", "loadProgressBar", "previousVideoButton", "previousVideo", "displayControlBarButton", "nextVideoButton", "nextVideo", "peerTubeLinkButton", "videoShortUUID", "theaterButton", "isSameOrigin", "currentUrl", "targetUrl", "hostname", "RedundancyUrlManager", "baseUrls", "customSegmentUrl", "getBaseUrl", "getRandomInt", "newBaseUrl", "slashPart", "newUrl", "getFilename", "base64Js", "toByteArray", "fromByteArray", "lookup", "revLookup", "Arr", "getLens", "validLen", "placeHoldersLen", "lens", "_byteLength", "curByte", "tripletToBase64", "encodeChunk", "uint8", "extraBytes", "len2", "ieee754", "isLE", "mLen", "nBytes", "eLen", "eMax", "eBias", "nBits", "LN2", "base64", "ieee754$1", "customInspectSymbol", "Buffer", "Buffer3", "SlowBuffer", "INSPECT_MAX_BYTES", "K_MAX_LENGTH", "kMaxLength", "GlobalUint8Array", "GlobalArrayBuffer", "SharedArrayBuffer", "GlobalSharedArrayBuffer", "TYPED_ARRAY_SUPPORT", "typedArraySupport", "foo", "isBuffer", "createBuffer", "buf", "encodingOrOffset", "allocUnsafe", "poolSize", "fromString", "fromArrayView", "isInstance", "fromArrayBuffer", "fromObject", "assertSize", "alloc", "checked", "allocUnsafeSlow", "isEncoding", "actual", "fromArrayLike", "arrayView", "numberIsNaN", "_isBuffer", "compare", "mustMatch", "loweredCase", "utf8ToBytes", "base64ToBytes", "slowToString", "hexSlice", "utf8Slice", "asciiSlice", "latin1Slice", "base64Slice", "utf16leSlice", "swap16", "swap32", "swap64", "inspect", "thisStart", "thisEnd", "thisCopy", "targetCopy", "bidirectionalIndexOf", "arrayIndexOf", "indexSize", "arrLength", "valLength", "readUInt16BE", "hexWrite", "strLen", "utf8Write", "blitBuffer", "asciiWrite", "asciiToBytes", "base64Write", "ucs2Write", "utf16leToBytes", "_arr", "codePoint", "bytesPerSequence", "thirdByte", "fourthByte", "tempCodePoint", "decodeCodePointsArray", "MAX_ARGUMENTS_LENGTH2", "codePoints", "hexSliceLookupTable", "newBuf", "checkOffset", "readUintLE", "readUIntLE", "byteLength3", "noAssert", "mul", "readUintBE", "readUIntBE", "readUint8", "readUInt8", "readUint16LE", "readUInt16LE", "readUint16BE", "readUint32LE", "readUInt32LE", "readUint32BE", "readUInt32BE", "readBigUInt64LE", "defineBigIntMethod", "validateNumber", "boundsError", "lo", "hi", "readBigUInt64BE", "readIntLE", "readIntBE", "readInt8", "readInt16LE", "readInt16BE", "readInt32LE", "readInt32BE", "readBigInt64LE", "readBigInt64BE", "readFloatLE", "readFloatBE", "readDoubleLE", "readDoubleBE", "checkInt", "writeUintLE", "writeUIntLE", "maxBytes", "writeUintBE", "writeUIntBE", "writeUint8", "writeUInt8", "writeUint16LE", "writeUInt16LE", "writeUint16BE", "writeUInt16BE", "writeUint32LE", "writeUInt32LE", "writeUint32BE", "writeUInt32BE", "wrtBigUInt64LE", "checkIntBI", "wrtBigUInt64BE", "writeBigUInt64LE", "writeBigUInt64BE", "writeIntLE", "sub", "writeIntBE", "writeInt8", "writeInt16LE", "writeInt16BE", "writeInt32LE", "writeInt32BE", "writeBigInt64LE", "writeBigInt64BE", "checkIEEE754", "writeFloat", "littleEndian", "writeFloatLE", "writeFloatBE", "writeDouble", "writeDoubleLE", "writeDoubleBE", "targetStart", "copyWithin", "E", "sym", "getMessage", "Base", "received", "addNumericalSeparator", "checkBounds", "ERR_OUT_OF_RANGE", "ERR_INVALID_ARG_TYPE", "ERR_BUFFER_OUT_OF_BOUNDS", "INVALID_BASE64_RE", "base64clean", "leadSurrogate", "alphabet2", "i16", "BufferBigIntNotDefined", "Buffer2", "debugLogger$4", "maxRetries", "SegmentValidator", "validate", "loadSha256SegmentsPromiseIfNeeded", "segmentValue", "segmentJSONPromise", "loadSha256SegmentsPromise", "hashShouldBe", "calculatedSha", "sha256Hex", "fetchSha256Segments", "segmentsSha256Url", "requiresPassword", "videoPassword", "requiresUserAuth", "Authorization", "digest", "bufferToHex", "shaModule", "sha256", "debugLogger$3", "HLSOptionsBuilder", "getPluginOptions", "redundancyBaseUrls", "p2pMediaLoaderConfig", "pluginsManager", "runHook", "getP2PMediaLoaderOptions", "playlistUrl", "getHLSJSOptions", "file", "videoFiles", "loaderOptions", "trackerAnnounce", "specificLiveOrVODOptions", "getP2PMediaLoaderLiveOptions", "getP2PMediaLoaderVODOptions", "segmentUrlArg", "segmentByteRange", "requestAbortSignal", "liveOptions", "latencyMode", "getHLSLiveOptions", "getHLSVODOptions", "averageBandwidth", "WebVideoOptionsBuilder", "ClickableComponent", "PlaylistButton", "icon", "playlistInfoElement", "getCurrentPosition", "videosLength", "displayName", "playlistMenu", "Component$9", "PlaylistMenuItem", "switchPlaylistItem", "keyDownHandler", "li", "positionBlock", "buildAvailableVideo", "buildUnavailableVideo", "setSelected", "getElement", "thumbnail", "thumbnailPath", "infoBlock", "stopTimestamp", "html", "block", "onClicked", "Component$8", "PlaylistMenu", "menuItems", "userInactiveHandler", "onMouseEnter", "onMouseLeave", "onPlayerCick", "headerLeft", "leftTitle", "playlistChannel", "videoChannel", "leftSubtitle", "playlistElement", "elements", "onItemClicked", "updateSelected", "newPosition", "Plugin$4", "PlaylistPlugin", "playlistButton", "Plugin$3", "PeerTubeResolutionsPlugin", "getSelected", "resolutionIndex", "getResolutions", "getAutoResolutionChosen", "Menu$1", "Component$7", "MenuFocusFixed", "_focus", "MenuItem$1", "ResolutionMenuItem", "autoResolutionChosen", "updateSelectionHandler", "updateSelection", "selectedResolution", "getLabel", "Menu", "MenuButton", "ResolutionMenuButton", "Component$6", "SettingsDialog", "uniqueId", "dialogLabelId", "dialogDescriptionId", "debugLogger$2", "MenuItem", "Component$5", "SettingsMenuItem", "mainMenu", "panel", "panelChild", "panelChildEl", "menuToLoad", "subMenuName", "SubMenuComponent", "newOptions", "subMenu", "subMenuClass", "settingsSubMenuEl_", "build", "submenuClickHandler", "rebuildAfterMenuChange", "transitionEndHandler", "onSubmenuClick", "onTransitionEnd", "loadMainMenu", "settingsSubMenuTitleEl_", "settingsSubMenuValueEl_", "marginRight", "setDialogSize", "createBackButton", "setMargin", "mainMenuEl", "mainMenuAny", "setSize", "bindClickEvents", "bindKeyEvents", "subMenuItem", "subMenuItemExtended", "hideDialog", "getComponentSize", "hideSubMenu", "debugLogger$1", "Button", "Component$4", "SettingsButton", "settingsButtonOptions", "dialogEl", "addSettingsItemHandler", "onAddSettingsItem", "disposeSettingsItemHandler", "onDisposeSettingsItem", "documentClickHandler", "onDocumentClick", "onUserInactive", "buildMenu", "bindEvents", "isInIframe", "addMenuItem", "showDialog", "peertube", "resetChildren", "panelEl", "openSubMenu", "settingsMenuItem", "hideChildren", "menuChild", "Component$3", "SettingsPanel", "Component$2", "SettingsPanelChild", "Component$1", "StatsCard", "metadataStore", "playerNetworkInfo", "containerEl", "infoListEl", "onclick", "populateInfoBlocks", "onNetworkInfoHandler", "toggle", "buildHLSOptions", "buildWebVideoOptions", "populateInfoValues", "timeRangesToString", "latencyFromEdge", "videoIsLive", "fileUrl", "metadataUrl", "colorSpace", "buildInfoRow", "viewport", "network", "transferred", "download", "bufferProgress", "bufferState", "liveLatency", "videoQuality", "vw", "clientWidth", "innerWidth", "vh", "clientHeight", "innerHeight", "vp", "networkActivity", "totalTransferred", "downloadBreakdown", "setInfoValue", "labelText", "Plugin$2", "StatsForNerdsPlugin", "statsCard", "getMainTemplate", "headText", "cancelText", "suspendedText", "Component", "EndCard", "dashOffsetTotal", "dashOffsetStart", "upNextEvents", "ticks", "totalTicks", "onEndedHandler", "showCard", "canceled", "onPlayingHandler", "autoplayRing", "getElementsByClassName", "cancelButton", "suspendedMessage", "nextButton", "getTitle", "goToPercent", "isSuspended", "Plugin$1", "UpNextPlugin", "debugLogger", "Plugin", "WebVideoPlugin", "pickAverageVideoFile", "updateVideoFile", "isUserResolutionChange", "onLoadedMetadata", "buildQualities", "setupNetworkInfoInterval", "onErrorHandler", "getCurrentResolutionId", "currentVideoFile", "httpUrl", "oldAutoplayValue", "tryToPlay", "posterImage", "finally", "CaptionsButton", "PlaybackRateMenuButton", "PlayProgressBar", "PeerTubePlayer", "unload", "disposeDynamicPluginsIfNeeded", "loadOptions", "currentLoadOptions", "buildPlayerIfNeeded", "loadP2PMediaLoader", "loadWebVideo", "loadDynamicPlugins", "getAutoPlayValue", "playerElement", "pointerEvents", "bigPlayButton", "hlsOptionsBuilder", "webVideoOptionsBuilder", "videojsOptions", "getVideojsOptions", "alreadyFallback", "tryToRecoverHLSError", "maybeFallbackToWebVideo", "getContextMenuOptions", "displayNotificationWhenOffline", "peertubeMobile", "peerTubeHotkeysPlugin", "bezels", "upnext", "storyboard", "peertubeNSFW", "peertubeDock", "enableHotkeys", "getVideoTitle", "isEnabled", "videoChapters", "dock", "nsfwWarning", "videojsDecodeErrors", "errorNotifier", "metrics", "controlBarOptionsBuilder", "forceAutoplay", "offlineNotificationElem", "offlineNotificationElemAdded", "handleOnline", "handleOffline", "isLoopEnabled"]
}
