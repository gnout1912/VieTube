import{a as R_}from"./chunk-CPDI5TQZ.js";import{a as P_}from"./chunk-54JNDI5J.js";import{a as F_}from"./chunk-AYTBY3KG.js";import{b as Un,c as wo,d as M_,e as f_,f as v_,g as x_}from"./chunk-QKZVJSPP.js";import{a as zt,b as L_,c as $_}from"./chunk-AA4WICK4.js";import{a as a_,b as Vn}from"./chunk-V4LNYNZJ.js";import{a as c_}from"./chunk-IJBBWTML.js";import{b as s_}from"./chunk-VJNMN7TS.js";import"./chunk-YJYUDEMC.js";import{a as fn}from"./chunk-RJFLITAD.js";import{e as m_,g as g_}from"./chunk-DJO6R22E.js";import{b as l_}from"./chunk-5PLTSPIA.js";import"./chunk-MLUQ7CKS.js";import{a as E_,b as T_,c as I_,d as O_,e as Vo}from"./chunk-I24ROVDK.js";import{c as N_}from"./chunk-FWCJKVBG.js";import{a as y_}from"./chunk-ZO2H6O7A.js";import{a as Ae,b as Re,c as Pe,d as Qt,e as Pt,f as S_,g as Lt,h as $t,i as Fe,j as he,k as Ft,l as Uo}from"./chunk-5BBSIJ6K.js";import"./chunk-X5AICG5H.js";import"./chunk-4MNDFPOM.js";import{c as zn}from"./chunk-SS3SQE34.js";import{a as ve}from"./chunk-GUE2RQOD.js";import{a as h_}from"./chunk-GLDJGDCD.js";import{b as nt,c as $o,d as xo,h as p_,i as wn}from"./chunk-DUA2DJQ3.js";import{a as Go}from"./chunk-FJ2ZROHN.js";import{a as Tt}from"./chunk-EBEN7JLX.js";import"./chunk-HRQFMPLQ.js";import{a as C_}from"./chunk-KCGVGMQ4.js";import{i as D_,j as b_}from"./chunk-7EJTRMSK.js";import"./chunk-VM462Q6H.js";import{a as Mn}from"./chunk-75CL7ZAD.js";import{a as A_}from"./chunk-TOPWIQ4B.js";import{a as kn}from"./chunk-E3CSCYZJ.js";import{a as ot}from"./chunk-APIXYPUO.js";import{a as Gn}from"./chunk-5GTHDKWY.js";import{a as yo}from"./chunk-2M6JBXI4.js";import"./chunk-DEVNJA25.js";import{a as Lo,b as u_}from"./chunk-4XG2BQGM.js";import"./chunk-4INQOBVN.js";import{a as d_}from"./chunk-SDLUASD2.js";import{a as o_}from"./chunk-IESFBSCZ.js";import{a as n_}from"./chunk-ID3GIFOG.js";import{a as Ro}from"./chunk-576ZABFD.js";import{B as yt}from"./chunk-UFXFCZP3.js";import"./chunk-V73D6FBB.js";import{a as xn}from"./chunk-A2KNDDCC.js";import"./chunk-HH4YHD3C.js";import{c as hn}from"./chunk-BFVCLNOF.js";import{a as Fo,b as ho}from"./chunk-3PB3Q4OH.js";import"./chunk-24ZAFI2J.js";import{a as Po}from"./chunk-6TRYPH2T.js";import{a as Rt}from"./chunk-JVRBW57G.js";import{b as i_,c as r_,d as Do,h as bo,i as __,k as Ln,l as $n,m as vo}from"./chunk-BOZAQTZE.js";import"./chunk-ANGOORPW.js";import{b as ft,c as vt}from"./chunk-25AA3I7H.js";import{c as et}from"./chunk-2O3IZ566.js";import"./chunk-YDZGE3V5.js";import{a as Ao}from"./chunk-S5ARXDTR.js";import"./chunk-EECS7F3M.js";import"./chunk-OPOGZMDG.js";import"./chunk-UI5MIAKJ.js";import"./chunk-C5UL7A6S.js";import{a as On,b as tt}from"./chunk-WZVFW7AN.js";import{a as qt}from"./chunk-6JJL547V.js";import{A as Wr,B as Hr,E as De,m as Ur,o as wr,p as Vr,s as So,u as kr,w as zr,x as Xr,y as Br}from"./chunk-RT7DTAS6.js";import{B as le,C as Ne,a as Pr,c as $e,d as ie,g as me,h as Te,m as ht,n as Mt,o as Tn,q as Ie,r as Dt,t as xe,u as jt,v as Kt,w as Jt,x as uo}from"./chunk-WO4VNXA3.js";import{a as Ue}from"./chunk-PE7TFI7A.js";import{$d as Co,Ab as de,B as ce,Bb as M,Bc as pe,Be as Lr,C as qn,Cb as d,Cc as Le,Ce as $r,D as Qn,Da as nn,Db as Nr,Dc as B,Dd as st,E as dr,Ea as ke,Eb as Yo,Ed as ct,Ee as xr,Fb as Wt,H as pr,Ha as l,Hd as Zn,He as oo,Ic as mo,Id as eo,J as mr,Jg as ye,Kg as Oo,L as ur,Ld as Q,Mb as St,Md as kt,Mf as Zo,Na as Ct,Nb as Nt,Nd as go,Ob as Ot,Oc as Rr,Og as Mo,Pb as g,Pg as Yt,Q as bn,Qb as N,Qe as qo,Qg as fo,Ra as Cr,Rb as V,Re as Gr,Sa as h,Sb as on,Sd as hr,Se as Qo,Sf as ei,Sg as e_,Tc as Et,Tg as t_,Ua as Sr,Ub as Ce,Uf as Kr,Vb as Se,Wa as ne,Wb as Ee,Wf as Jr,X as gr,Xb as Or,Xc as at,Xf as Y,Y as qe,Ya as u,Yb as Ht,Yd as Dr,Zb as H,Zd as to,_b as Mr,_d as In,aa as S,ac as fr,ae as br,bg as Yr,c as Jn,ce as no,db as Sn,dg as qr,eb as s,ee as vr,ef as Oe,fc as oe,ff as Me,ga as Cn,gc as Ar,gg as Qr,ha as f,hc as re,i as Yn,ia as A,jb as ge,jc as En,jf as Nn,kb as Er,kd as Qe,kg as dt,l as cr,la as ue,lb as Tr,ld as vn,lf as yn,lg as At,mb as Ir,mf as rt,mg as To,n as Vt,nb as i,ng as Zr,ob as o,oc as po,od as Ze,og as Io,pb as p,pd as lt,pf as se,pg as Ge,qb as E,qe as yr,qg as bt,r as Dn,rb as T,sa as co,sb as Jo,sg as be,ta as q,tb as w,tf as jr,uf as Eo,vb as D,wb as b,wd as Fr,xb as c,xg as fe,yb as j,yg as No,zb as K,zd as Fn}from"./chunk-F7FAPFPY.js";import{a as gt,b as It,i as I,j as _e}from"./chunk-AI7IVZV2.js";var Xn=e=>({"input-error":e});function Ha(e,_){if(e&1&&(i(0,"div",43),g(1),o()),e&2){let n=d();l(),N(n.formErrors().cache.previews.size);}}function ja(e,_){if(e&1&&(i(0,"div",43),g(1),o()),e&2){let n=d();l(),N(n.formErrors().cache.captions.size);}}function Ka(e,_){if(e&1&&(i(0,"div",43),g(1),o()),e&2){let n=d();l(),N(n.formErrors().cache.torrents.size);}}function Ja(e,_){if(e&1&&(i(0,"div",43),g(1),o()),e&2){let n=d();l(),N(n.formErrors().cache.storyboards.size);}}function Ya(e,_){if(e&1&&(i(0,"div",43),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.customizations.javascript);}}function qa(e,_){if(e&1&&(i(0,"div",43),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.customizations.css);}}var G_=(()=>{let _=class _{form=q(void 0);formErrors=q(void 0);getCacheSize(t){return this.form().value.cache[t].size;}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-edit-advanced-configuration"]],inputs:{form:[1,"form"],formErrors:[1,"formErrors"]},decls:74,vars:33,consts:()=>{let t;t="CACHE";let a;a=" Some files are not federated, and fetched when necessary. Define their caching policies. ";let r;r="Number of previews to keep in cache";let m;m="{VAR_PLURAL, plural, =1 {cached image} other {cached images}}",m=de(m,{VAR_PLURAL:"\uFFFD0\uFFFD"});let C;C="Number of video captions to keep in cache";let O;O="{VAR_PLURAL, plural, =1 {cached caption} other {cached captions}}",O=de(O,{VAR_PLURAL:"\uFFFD0\uFFFD"});let P;P="Number of video torrents to keep in cache";let y;y="{VAR_PLURAL, plural, =1 {cached torrent} other {cached torrents}}",y=de(y,{VAR_PLURAL:"\uFFFD0\uFFFD"});let v;v="Number of video storyboard images to keep in cache";let L;L="{VAR_PLURAL, plural, =1 {cached storyboard} other {cached storyboards}}",L=de(L,{VAR_PLURAL:"\uFFFD0\uFFFD"});let W;W="PERSONALIZACIONS";let k;k=" Slight modifications to your PeerTube instance for when creating a plugin or theme is overkill. ";let $;$="JavaScript";let X;X=""+"\uFFFD#57\uFFFD"+"Write JavaScript code directly. Example:"+"\uFFFD/#57\uFFFD"+""+"\uFFFD#58\uFFFD"+"console.log('my instance is amazing');"+"\uFFFD/#58\uFFFD"+"";let x;return x=""+"[\uFFFD#67\uFFFD|\uFFFD#69\uFFFD]"+"Write CSS code directly. Example:"+"[\uFFFD/#67\uFFFD|\uFFFD/#69\uFFFD]"+""+"[\uFFFD#68\uFFFD|\uFFFD#71\uFFFD]"+"#custom-css "+"[\uFFFD0\uFFFD|\uFFFD2\uFFFD]"+"\n  color: red;\n"+"[\uFFFD1\uFFFD|\uFFFD3\uFFFD]"+"\n"+"[\uFFFD/#68\uFFFD|\uFFFD/#71\uFFFD]"+""+"[\uFFFD#67\uFFFD|\uFFFD#69\uFFFD]"+"Prepend with "+"\uFFFD#70\uFFFD"+"#custom-css"+"\uFFFD/#70\uFFFD"+" to override styles. Example:"+"[\uFFFD/#67\uFFFD|\uFFFD/#69\uFFFD]"+""+"[\uFFFD#68\uFFFD|\uFFFD#71\uFFFD]"+"#custom-css .logged-in-email "+"[\uFFFD0\uFFFD|\uFFFD2\uFFFD]"+"\n  color: red;\n"+"[\uFFFD1\uFFFD|\uFFFD3\uFFFD]"+"\n"+"[\uFFFD/#68\uFFFD|\uFFFD/#71\uFFFD]"+"",x=de(x),[t,a,r,m,C,O,P,y,v,L,W,k,$,X,x,[3,"formGroup"],[1,"pt-two-cols","mt-5"],[1,"title-col"],[1,"inner-form-description"],[1,"content-col"],["formGroupName","cache"],["formGroupName","previews",1,"form-group"],["for","cachePreviewsSize"],[1,"number-with-unit"],["type","number","min","0","id","cachePreviewsSize","formControlName","size",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["formGroupName","captions",1,"form-group"],["for","cacheCaptionsSize"],["type","number","min","0","id","cacheCaptionsSize","formControlName","size",1,"form-control",3,"ngClass"],["formGroupName","torrents",1,"form-group"],["for","cacheTorrentsSize"],["type","number","min","0","id","cacheTorrentsSize","formControlName","size",1,"form-control",3,"ngClass"],["type","number","min","0","id","cacheStoryboardsSize","formControlName","size",1,"form-control",3,"ngClass"],[1,"pt-two-cols","mt-4"],["id","customizations",1,"anchor"],["formGroupName","instance"],["formGroupName","customizations"],[1,"form-group"],["for","customizationJavascript"],[1,"mb-2"],["id","customizationJavascript","formControlName","javascript","dir","ltr",1,"form-control",3,"ngClass"],["for","customizationCSS"],["id","customizationCSS","formControlName","css","dir","ltr",1,"form-control",3,"ngClass"],["role","alert",1,"form-error"]];},template:function(a,r){a&1&&(E(0,15),i(1,"div",16)(2,"div",17)(3,"h2"),c(4,0),o(),i(5,"div",18),c(6,1),o()(),i(7,"div",19),E(8,20),i(9,"div",21)(10,"label",22),c(11,2),o(),i(12,"div",23),p(13,"input",24),i(14,"span"),c(15,3),o()(),u(16,Ha,2,1,"div",25),o(),i(17,"div",26)(18,"label",27),c(19,4),o(),i(20,"div",23),p(21,"input",28),i(22,"span"),c(23,5),o()(),u(24,ja,2,1,"div",25),o(),i(25,"div",29)(26,"label",30),c(27,6),o(),i(28,"div",23),p(29,"input",31),i(30,"span"),c(31,7),o()(),u(32,Ka,2,1,"div",25),o(),i(33,"div",29)(34,"label",30),c(35,8),o(),i(36,"div",23),p(37,"input",32),i(38,"span"),c(39,9),o()(),u(40,Ja,2,1,"div",25),o(),T(),o()(),i(41,"div",33)(42,"div",17),p(43,"div",34),i(44,"h2"),c(45,10),o(),i(46,"div",18),c(47,11),o()(),i(48,"div",19),E(49,35)(50,36),i(51,"div",37)(52,"label",38),c(53,12),o(),i(54,"my-help"),E(55),D(56,13),p(57,"p",39)(58,"pre"),b(),T(),o(),p(59,"textarea",40),u(60,Ya,2,1,"div",25),o(),i(61,"div",37)(62,"label",41),g(63,"CSS"),o(),i(64,"my-help"),E(65),D(66,14),p(67,"p",39)(68,"pre"),i(69,"p",39),p(70,"em"),o(),p(71,"pre"),b(),T(),o(),p(72,"textarea",42),u(73,qa,2,1,"div",25),o(),T()(),o()(),T()),a&2&&(s("formGroup",r.form()),l(13),s("ngClass",H(21,Xn,r.formErrors()["cache.previews.size"])),l(2),j(r.getCacheSize("previews")),K(15),l(),s("ngIf",r.formErrors().cache.previews.size),l(5),s("ngClass",H(23,Xn,r.formErrors()["cache.captions.size"])),l(2),j(r.getCacheSize("captions")),K(23),l(),s("ngIf",r.formErrors().cache.captions.size),l(5),s("ngClass",H(25,Xn,r.formErrors()["cache.torrents.size"])),l(2),j(r.getCacheSize("torrents")),K(31),l(),s("ngIf",r.formErrors().cache.torrents.size),l(5),s("ngClass",H(27,Xn,r.formErrors()["cache.storyboards.size"])),l(2),j(r.getCacheSize("storyboards")),K(39),l(),s("ngIf",r.formErrors().cache.storyboards.size),l(19),s("ngClass",H(29,Xn,r.formErrors()["instance.customizations.javascript"])),l(),s("ngIf",r.formErrors().instance.customizations.javascript),l(11),j("{")("}")("{")("}"),K(66),l(),s("ngClass",H(31,Xn,r.formErrors()["instance.customizations.css"])),l(),s("ngIf",r.formErrors().instance.customizations.css));},dependencies:[le,$e,Tn,me,Te,uo,Ne,Ie,xe,Dt,pe,B,qt],styles:[`form[_ngcontent-%COMP%]{padding-bottom:1.5rem}my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:500px}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:90%}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]     textarea{height:300px!important}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[type=text][readonly][_ngcontent-%COMP%], input[type=number][readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[type=text][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus-visible, input[type=number][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[type=text][disabled][_ngcontent-%COMP%], input[type=number][disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%}}.number-with-unit[_ngcontent-%COMP%]{position:relative;width:fit-content}.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;top:.4em;right:3em}@media screen and (max-width: 500px){.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{display:none}}.number-with-unit[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{opacity:.8;pointer-events:none}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--fg-100)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:20px;min-width:20px;height:20px;border:2px solid var(--fg-400);border-radius:2px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:4px;left:6px;width:5px;height:7px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid var(--input-check-active-fg);border-bottom:2px solid var(--input-check-active-fg)}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:var(--input-check-active-bg);animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;background:var(--input-check-active-bg);position:absolute;left:0;transition:all .2s ease;border:2px solid var(--input-check-active-fg);border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-weight:400;cursor:pointer;display:inline;color:var(--fg-350);margin-inline-start:.5rem}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{display:flex;margin-inline-start:auto}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-inline-start:.3125rem}.inner-form-description[_ngcontent-%COMP%]{font-size:15px;margin-bottom:15px}textarea[_ngcontent-%COMP%]{max-width:100%;display:block;font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:500px;max-width:500px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}textarea[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}textarea[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}textarea[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 540px){textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{color:var(--textarea-fg)!important;background-color:var(--textarea-bg)!important;height:150px;padding:var(--textarea-y-padding) var(--textarea-x-padding)}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px;font-size:14px}.disabled-checkbox-extra[_ngcontent-%COMP%], .disabled-checkbox-extra[_ngcontent-%COMP%]     label{opacity:.5;pointer-events:none}input[disabled][_ngcontent-%COMP%]{opacity:.5}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}.submit-error[_ngcontent-%COMP%]{margin-bottom:20px}.alert-signup[_ngcontent-%COMP%]{width:fit-content;margin-top:10px}.callout-container[_ngcontent-%COMP%]{position:absolute;display:flex;height:0;width:100%;justify-content:right}my-actor-banner-edit[_ngcontent-%COMP%]{max-width:500px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem;font-size:1rem}
/*# sourceMappingURL=edit-custom-config.component-DKRYSZQC.css.map */`]}));let e=_;return e;})();function Qa(e,_){if(e&1&&(i(0,"span",4),g(1),o()),e&2){let n=d(2);l(),N(n.inputSuffix());}}function Za(e,_){if(e&1){let n=w();i(0,"input",2),Ee("ngModelChange",function(a){f(n);let r=d();return Se(r.customValue,a)||(r.customValue=a),A(a);}),M("ngModelChange",function(){f(n);let a=d();return A(a.onModelChange());}),o(),u(1,Qa,2,1,"span",3);}if(e&2){let n=d();Ce("ngModel",n.customValue),s("type",n.inputType()),Sn("aria-labelledby",n.labelId()),l(),s("ngIf",n.inputSuffix());}}var Zt=(()=>{let _=class _{inputId=q.required();labelId=q.required();items=q([]);clearable=q(!1);searchable=q(!1);inputSuffix=q(void 0);inputType=q("text");customValue="";selectedId;disabled=!1;itemsWithCustom=[];ngOnChanges(){this.itemsWithCustom=this.getItems();}propagateChange=t=>{};writeValue(t){this.selectedId=t,this.isSelectedIdInItems()!==!0&&(this.selectedId="other",this.customValue=t);}registerOnChange(t){this.propagateChange=t;}registerOnTouched(){}onModelChange(){return this.selectedId==="other"?this.propagateChange(this.customValue):this.propagateChange(this.selectedId);}isSelectedIdInItems(){return!!this.items().find(t=>t.id===this.selectedId);}getItems(){let t={id:"other",label:"Custom value..."};return this.items().concat([t]);}isCustomValue(){return this.selectedId==="other";}setDisabledState(t){this.disabled=t;}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-select-custom-value"]],inputs:{inputId:[1,"inputId"],labelId:[1,"labelId"],items:[1,"items"],clearable:[1,"clearable"],searchable:[1,"searchable"],inputSuffix:[1,"inputSuffix"],inputType:[1,"inputType"]},features:[Or([{provide:Pr,useExisting:gr(()=>_),multi:!0}]),Cn],decls:3,vars:5,consts:[[1,"d-flex","align-items-center"],[1,"flex-grow-1",3,"ngModelChange","inputId","disabled","items","ngModel"],[1,"ms-2","form-control","pt-input-text",3,"ngModelChange","ngModel","type"],["class","ms-1",4,"ngIf"],[1,"ms-1"]],template:function(a,r){a&1&&(i(0,"div",0)(1,"my-select-options",1),Ee("ngModelChange",function(C){return Se(r.selectedId,C)||(r.selectedId=C),C;}),M("ngModelChange",function(){return r.onModelChange();}),o(),u(2,Za,2,4),o()),a&2&&(l(),s("inputId",r.inputId())("disabled",r.disabled)("items",r.itemsWithCustom),Ce("ngModel",r.selectedId),l(),ge(r.isCustomValue()?2:-1));},dependencies:[yt,le,$e,me,ht,B],encapsulation:2}));let e=_;return e;})();function el(e,_){if(e&1&&(E(0),c(1,1),oe(2,"bytes"),T()),e&2){let n=d(2);l(2),j(re(2,1,n.computeQuotaWithTranscoding(),0)),K(1);}}function tl(e,_){if(e&1&&(i(0,"div"),E(1),D(2,0),p(3,"strong"),b(),T(),p(4,"br"),u(5,el,3,4,"ng-container",2),o()),e&2){let n=d();l(5),s("ngIf",n.isTranscodingInformationDisplayed());}}var Bn=(()=>{let _=class _{server=S(fe);videoQuota=q(void 0);serverConfig;ngOnInit(){this.serverConfig=this.server.getHTMLConfig();}isTranscodingInformationDisplayed(){return this.serverConfig.transcoding.enabledResolutions.length!==0;}computeQuotaWithTranscoding(){let t=this.serverConfig.transcoding,a=t.enabledResolutions,r=hr.H_4K,m=0;for(let C of a)m+=C/r;return t.hls.enabled&&(m*=2),m*this.getQuotaAsNumber();}getQuotaAsNumber(){return parseInt(this.videoQuota()+"",10);}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-user-real-quota-info"]],inputs:{videoQuota:[1,"videoQuota"]},decls:1,vars:1,consts:()=>{let t;t=" The video quota only takes into account the size of "+"\uFFFD#3\uFFFD"+"uploaded"+"\uFFFD/#3\uFFFD"+" videos, not transcoded files or user export archives (which may contain video files). ";let a;return a=" Transcoding is enabled so videos size can be at most ~ "+"\uFFFD0\uFFFD"+". ",[t,a,[4,"ngIf"]];},template:function(a,r){a&1&&u(0,tl,6,1,"div",2),a&2&&s("ngIf",r.getQuotaAsNumber()>0);},dependencies:[B,Tt],encapsulation:2}));let e=_;return e;})();var en=class en{authHttp=S(at);restExtractor=S(dt);videoQuotaOptions=[];videoQuotaDailyOptions=[];transcodingThreadOptions=[];constructor(){this.videoQuotaOptions=[{id:-1,label:"Cap de limit"},{id:0,label:"None - no upload possible"},{id:100*1024*1024,label:"100 Mo"},{id:500*1024*1024,label:"500 Mo"},{id:1024*1024*1024,label:"1 Go"},{id:5*1024*1024*1024,label:"5 Go"},{id:20*1024*1024*1024,label:"20 Go"},{id:50*1024*1024*1024,label:"50 Go"},{id:100*1024*1024*1024,label:"100GB"},{id:200*1024*1024*1024,label:"200GB"},{id:500*1024*1024*1024,label:"500GB"}],this.videoQuotaDailyOptions=[{id:-1,label:"Cap de limit"},{id:0,label:"None - no upload possible"},{id:10*1024*1024,label:"10 Mo"},{id:50*1024*1024,label:"50 Mo"},{id:100*1024*1024,label:"100 Mo"},{id:500*1024*1024,label:"500 Mo"},{id:2*1024*1024*1024,label:"2 Go"},{id:5*1024*1024*1024,label:"5 Go"},{id:10*1024*1024*1024,label:"10GB"},{id:20*1024*1024*1024,label:"20 Go"},{id:50*1024*1024*1024,label:"50 Go"}],this.transcodingThreadOptions=[{id:0,label:"Auto (via ffmpeg)"},{id:1,label:"1"},{id:2,label:"2"},{id:4,label:"4"},{id:8,label:"8"},{id:12,label:"12"},{id:16,label:"16"},{id:32,label:"32"}];}getCustomConfig(){return this.authHttp.get(en.BASE_APPLICATION_URL+"/custom").pipe(ce(_=>this.restExtractor.handleError(_)));}updateCustomConfig(_){return this.authHttp.put(en.BASE_APPLICATION_URL+"/custom",_).pipe(ce(n=>this.restExtractor.handleError(n)));}};I(en,"BASE_APPLICATION_URL",rt.apiUrl+"/api/v1/config"),I(en,"\u0275fac",function(n){return new(n||en)();}),I(en,"\u0275prov",qe({token:en,factory:en.ɵfac}));var pt=en;var An=e=>({"input-error":e}),nl=e=>({"disabled-checkbox-extra":e});function ol(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.defaultClientRoute);}}function il(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().trending.videos.algorithms.default);}}function rl(e,_){e&1&&(i(0,"span"),c(1,70),o());}function _l(e,_){e&1&&(i(0,"span"),c(1,71),o());}function al(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().broadcastMessage.level);}}function ll(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().broadcastMessage.message);}}function sl(e,_){if(e&1&&(i(0,"my-alert",221),g(1),o()),e&2){let n=d();l(),N(n.signupAlertMessage);}}function cl(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().signup.limit);}}function dl(e,_){e&1&&(i(0,"small",222),c(1,72),o());}function pl(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().signup.minimumAge);}}function ml(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().user.videoQuota);}}function ul(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().user.videoQuotaDaily);}}function gl(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().import.concurrency);}}function Cl(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().import.videoChannelSynchronization.maxPerUser);}}function Sl(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().videoChannels.maxPerUser);}}function El(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().search.searchIndex.url);}}function Tl(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().export.users.maxUserVideoQuota);}}function Il(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().export.users.exportExpiration);}}function Nl(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().followings.instance.autoFollowIndex.indexUrl);}}function Ol(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().admin.email);}}function Ml(e,_){if(e&1&&(i(0,"div",220),g(1),o()),e&2){let n=d();l(),N(n.formErrors().services.twitter.username);}}var U_=(()=>{let _=class _{configService=S(pt);themeService=S(t_);form=q(void 0);formErrors=q(void 0);serverConfig=q(void 0);signupAlertMessage;defaultLandingPageOptions=[];availableThemes;exportExpirationOptions=[];exportMaxUserVideoQuotaOptions=[];ngOnInit(){this.buildLandingPageOptions(),this.checkSignupField(),this.checkImportSyncField(),this.availableThemes=[this.themeService.getDefaultThemeItem(),...this.themeService.buildAvailableThemes()],this.exportExpirationOptions=[{id:1e3*3600*24,label:"1 day"},{id:1e3*3600*24*2,label:"2 days"},{id:1e3*3600*24*7,label:"7 days"},{id:1e3*3600*24*30,label:"30 days"}],this.exportMaxUserVideoQuotaOptions=this.configService.videoQuotaOptions.filter(t=>t.id>=1);}ngOnChanges(t){t.serverConfig&&this.buildLandingPageOptions();}countExternalAuth(){return this.serverConfig().plugin.registeredExternalAuths.length;}getVideoQuotaOptions(){return this.configService.videoQuotaOptions;}getVideoQuotaDailyOptions(){return this.configService.videoQuotaDailyOptions;}doesTrendingVideosAlgorithmsEnabledInclude(t){let a=this.form().value.trending.videos.algorithms.enabled;return Array.isArray(a)?!!a.find(r=>r===t):!1;}getUserVideoQuota(){return this.form().value.user.videoQuota;}isExportUsersEnabled(){return this.form().value.export.users.enabled===!0;}getDisabledExportUsersClass(){return{"disabled-checkbox-extra":!this.isExportUsersEnabled()};}isSignupEnabled(){return this.form().value.signup.enabled===!0;}getDisabledSignupClass(){return{"disabled-checkbox-extra":!this.isSignupEnabled()};}isImportVideosHttpEnabled(){return this.form().value.import.videos.http.enabled===!0;}importSynchronizationChecked(){return this.isImportVideosHttpEnabled()&&this.form().value.import.videoChannelSynchronization.enabled;}hasUnlimitedSignup(){return this.form().value.signup.limit===-1;}isSearchIndexEnabled(){return this.form().value.search.searchIndex.enabled===!0;}getDisabledSearchIndexClass(){return{"disabled-checkbox-extra":!this.isSearchIndexEnabled()};}isTranscriptionEnabled(){return this.form().value.videoTranscription.enabled===!0;}getTranscriptionRunnerDisabledClass(){return{"disabled-checkbox-extra":!this.isTranscriptionEnabled()};}isAutoFollowIndexEnabled(){return this.form().value.followings.instance.autoFollowIndex.enabled===!0;}buildLandingPageOptions(){let t=[];this.serverConfig().homepage.enabled&&t.push({label:"Acu\xE8lh",path:"/home"}),t=t.concat([{label:"Descobrir",path:"/videos/overview"},{label:"Browse all videos",path:"/videos/browse"},{label:"Browse local videos",path:"/videos/browse?scope=local"}]),this.defaultLandingPageOptions=t.map(a=>({id:a.path,label:a.label,description:a.path}));}checkImportSyncField(){let t=this.form().get("import.videoChannelSynchronization.enabled");this.form().get("import.videos.http.enabled").valueChanges.subscribe(r=>{t.setValue(r&&t.value),r?t.enable():t.disable();});}checkSignupField(){let t=this.form().get("signup.enabled");t.valueChanges.pipe(ur()).subscribe(([a,r])=>{a===!1&&r===!0&&(this.signupAlertMessage="You enabled signup: we automatically enabled the \"Block new videos automatically\" checkbox of the \"Videos\" section just below.",this.form().patchValue({autoBlacklist:{videos:{ofUsers:{enabled:!0}}}}));}),t.updateValueAndValidity();}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-edit-basic-configuration"]],inputs:{form:[1,"form"],formErrors:[1,"formErrors"],serverConfig:[1,"serverConfig"]},features:[Cn],decls:366,vars:76,consts:()=>{let t;t="Prefer author display name in video miniature";let a;a="Redirect users on single external auth when users click on the login button in menu";let r;r="Enable broadcast message";let m;m="Allow users to dismiss the broadcast message ";let C;C="Enable Signup";let O;O="Signup requires approval by moderators";let P;P="L\u2019inscripcion demanda una verificacion d\u2019adre\xE7a electronica";let y;y="bytes";let v;v="bytes";let L;L="Automatically enable video history for new users";let W;W="Allow import with HTTP URL (e.g. YouTube)";let k;k="Allow import with a torrent file or a magnet URI";let $;$="Allow channel synchronization with channel of other platforms like YouTube";let X;X="Block new videos automatically";let x;x="Allow users to upload a new version of their video";let z;z="Enable video storyboards";let G;G="Enable video transcription";let te;te="Enable remote runners for transcription";let ae;ae="Allow users to do remote URI/handle search";let ze;ze="Allow anonymous to do remote URI/handle search";let Xe;Xe="Enable global search";let Be;Be="Disable local search in search bar";let We;We="Search bar uses the global search index by default";let He;He="Allow your users to import a data archive";let je;je="Allow your users to export their data";let Ke;Ke="bytes";let we;we="Other instances can follow yours";let Je;Je="Manually approve new instance followers";let Ye;Ye="Automatically follow back instances";let Ve;Ve="Automatically follow instances of a public index";let Z;Z="Activar lo formulari de contacte";let ee;ee="APAR\xC9NCIA";let _t;_t=" Use "+"\uFFFD#7\uFFFD"+"plugins & themes"+"[\uFFFD/#7\uFFFD|\uFFFD/#8\uFFFD]"+" for more involved changes, or add slight "+"\uFFFD#8\uFFFD"+"customizations"+"[\uFFFD/#7\uFFFD|\uFFFD/#8\uFFFD]"+". ",_t=de(_t);let U;U="T\xE8ma";let an;an="Pagina d\u2019arribada";let ln;ln="Default trending algorithm";let sn;sn="Hot videos";let Bt;Bt="Recent views";let cn;cn="Vid\xE8os mai aimadas";let dn;dn="Global views";let pn;pn="BROADCAST MESSAGE";let mn;mn=" Display a message on your instance ";let un;un="Broadcast message level";let gn;gn="info";let F;F="warning";let ci;ci="error";let di;di="Message";let pi;pi="N\xD2U UTILIZAIRES";let mi;mi=" Manage "+"\uFFFD#84\uFFFD"+"users"+"\uFFFD/#84\uFFFD"+" to set their quota individually. ";let ui;ui="\u26A0\uFE0F This functionality requires a lot of attention and extra moderation.";let gi;gi="Limit d\u2019inscripcions";let Ci;Ci="When the total number of users in your instance reaches this limit, registrations are disabled. -1 == unlimited";let ro;ro="{VAR_PLURAL, plural, =1 {user} other {users}}",ro=de(ro,{VAR_PLURAL:"\uFFFD0\uFFFD"});let Si;Si="Minimum required age to create an account";let _o;_o="{VAR_PLURAL, plural, =1 {year old} other {years old}}",_o=de(_o,{VAR_PLURAL:"\uFFFD0\uFFFD"});let Ei;Ei="Qu\xF2ta vid\xE8o per defaut per utilizaire";let Ti;Ti="Default daily upload limit per user";let Ii;Ii="VIDEOS";let Ni;Ni="Import jobs concurrency";let Oi;Oi="allows to import multiple videos in parallel. \u26A0\uFE0F Requires a PeerTube restart.";let Mi;Mi="jobs in parallel";let fi;fi="\u26A0\uFE0F If enabled, we recommend to use "+"\uFFFD#155\uFFFD"+"a HTTP proxy"+"\uFFFD/#155\uFFFD"+" to prevent private URL access from your PeerTube server";let Ai;Ai="\u26A0\uFE0F We don't recommend to enable this feature if you don't trust your users";let Ri;Ri=" \u26D4 You need to allow import with HTTP URL to be able to activate this feature. ";let Pi;Pi="Max channel synchronization per user";let ao;ao="{VAR_PLURAL, plural, =1 {sync} other {syncs}}",ao=de(ao,{VAR_PLURAL:"\uFFFD0\uFFFD"});let Fi;Fi="Unless a user is marked as trusted, their videos will stay private until a moderator reviews them.";let hi;hi="Generate storyboards of local videos using ffmpeg so users can see the video preview in the player while scrubbing the video";let Di;Di=""+"\uFFFD#199\uFFFD"+"Automatically create subtitles"+"\uFFFD/#199\uFFFD"+" for uploaded/imported VOD videos";let bi;bi=" Use "+"\uFFFD#206\uFFFD"+"remote runners"+"\uFFFD/#206\uFFFD"+" to process transcription tasks. Remote runners has to register on your instance first. ";let vi;vi="VIDEO CHANNELS";let yi;yi="Max video channels per user";let lo;lo="{VAR_PLURAL, plural, =1 {channel} other {channels}}",lo=de(lo,{VAR_PLURAL:"\uFFFD0\uFFFD"});let Li;Li="CERCAR";let $i;$i="Allow "+"\uFFFD#232\uFFFD"+"your users"+"\uFFFD/#232\uFFFD"+" to look up remote videos/actors that may not be federated with your instance";let xi;xi="Allow "+"\uFFFD#238\uFFFD"+"anonymous users"+"\uFFFD/#238\uFFFD"+" to look up remote videos/actors that may not be federated with your instance";let Gi;Gi="\u26A0\uFE0F This functionality depends heavily on the moderation of instances followed by the search index you select.";let Ui;Ui="Search index URL";let so;so=" Use your "+"\uFFFD#251\uFFFD"+"your own search index"+"[\uFFFD/#251\uFFFD|\uFFFD/#252\uFFFD]"+" or choose the official one, "+"\uFFFD#252\uFFFD"+"https://sepiasearch.org"+"[\uFFFD/#251\uFFFD|\uFFFD/#252\uFFFD]"+", that is not moderated. ",so=de(so);let wi;wi="Otherwise the local search stays used by default";let Vi;Vi="USER IMPORT/EXPORT";let ki;ki="Video quota is checked on import so the user doesn't upload a too big archive file";let zi;zi="Video quota (daily quota is not taken into account) is also checked for each video when PeerTube is processing the import";let Xi;Xi="Users can export their PeerTube data in a .zip for backup or re-import. Only one export at a time is allowed per user";let Bi;Bi="Max user video quota allowed to generate the export";let Wi;Wi="If the user decides to include the video files in the archive";let Hi;Hi="User export expiration";let ji;ji="The archive file is deleted after this period.";let Ki;Ki="FEDERACION";let Ji;Ji=" Manage "+"\uFFFD#304\uFFFD"+"relations"+"\uFFFD/#304\uFFFD"+" with other instances. ";let Yi;Yi="\u26A0\uFE0F This functionality requires a lot of attention and extra moderation.";let qi;qi="\u26A0\uFE0F This functionality requires a lot of attention and extra moderation.";let Qi;Qi=" See "+"\uFFFD#328\uFFFD"+"the documentation"+"\uFFFD/#328\uFFFD"+" for more information about the expected URL ";let Zi;Zi="URL de l\u2019ind\xE8x ";let er;er="ADMINISTRATORS";let tr;tr="Adre\xE7a de l\u2019admin";let nr;nr="TWITTER/X";let or;or=" Extra configuration required by Twitter/X. All other social media (Facebook, Mastodon, etc.) are supported out of the box. ";let ir;ir="Your Twitter/X username";let rr;rr="Indicates the Twitter/X account for the website or platform where the content was published.";let _r;_r="This is just an extra information injected in PeerTube HTML that is required by Twitter/X. If you don't have a Twitter/X account, just leave the default value.";let ar;ar="\u26A0\uFE0F You don't have any external auth plugin enabled.";let lr;lr="\u26A0\uFE0F You have multiple external auth plugins enabled.";let sr;return sr="Signup won't be limited to a fixed number of users.",[ee,_t,U,an,ln,sn,Bt,cn,dn,pn,mn,un,gn,F,ci,di,pi,mi,ui,gi,Ci,ro,Si,_o,Ei,Ti,Ii,Ni,Oi,Mi,fi,Ai,Ri,Pi,ao,Fi,hi,Di,bi,vi,yi,lo,Li,$i,xi,Gi,Ui,so,wi,Vi,ki,zi,Xi,Bi,Wi,Hi,ji,Ki,Ji,Yi,qi,Qi,Zi,er,tr,nr,or,ir,rr,_r,ar,lr,sr,[3,"formGroup"],[1,"pt-two-cols","mt-5"],[1,"title-col"],[1,"inner-form-description"],["routerLink","/admin/settings/plugins",1,"link-primary"],["routerLink","/admin/settings/config/edit-custom","fragment","advanced-configuration",1,"link-primary"],[1,"content-col"],["formGroupName","theme"],[1,"form-group"],["for","themeDefault"],["formControlName","default","inputId","themeDefault",3,"items"],["formGroupName","instance",1,"form-group"],["id","instanceDefaultClientRouteLabel","for","instanceDefaultClientRoute"],["labelId","instanceDefaultClientRouteLabel","inputId","instanceDefaultClientRoute","formControlName","defaultClientRoute","inputType","text",3,"items","clearable"],["class","form-error","role","alert",4,"ngIf"],["formGroupName","trending",1,"form-group"],["formGroupName","videos"],["formGroupName","algorithms"],["for","trendingVideosAlgorithmsDefault"],[1,"peertube-select-container"],["id","trendingVideosAlgorithmsDefault","formControlName","default",1,"form-control"],["value","hot"],["value","most-viewed"],["value","most-liked"],["value","views"],["formGroupName","client"],["formGroupName","miniature"],["inputName","clientVideosMiniaturePreferAuthorDisplayName","formControlName","preferAuthorDisplayName","labelText",t],["formGroupName","menu"],["formGroupName","login"],["inputName","clientMenuLoginRedirectOnSingleExternalAuth","formControlName","redirectOnSingleExternalAuth","labelText",a],["ngProjectAs","description",5,["description"]],[4,"ngIf"],[1,"pt-two-cols","mt-4"],["formGroupName","broadcastMessage"],["inputName","broadcastMessageEnabled","formControlName","enabled","labelText",r],["inputName","broadcastMessageDismissable","formControlName","dismissable","labelText",m],["for","broadcastMessageLevel"],["id","broadcastMessageLevel","formControlName","level",1,"form-control"],["value","info"],["value","warning"],["value","error"],["for","broadcastMessageMessage"],["helpType","markdownText"],["inputId","broadcastMessageMessage","formControlName","message","markdownType","to-unsafe-html",3,"formError"],["routerLink","/admin/overview/users",1,"link-primary"],["formGroupName","signup"],["inputName","signupEnabled","formControlName","enabled","labelText",C],["type","primary","class","alert-signup",4,"ngIf"],["ngProjectAs","extra",5,["extra"]],["inputName","signupRequiresApproval","formControlName","requiresApproval","labelText",O,3,"ngClass"],["inputName","signupRequiresEmailVerification","formControlName","requiresEmailVerification","labelText",P,3,"ngClass"],[3,"ngClass"],["for","signupLimit"],[1,"small","muted","ms-1"],[1,"number-with-unit"],["type","number","min","-1","id","signupLimit","formControlName","limit",1,"form-control",3,"ngClass"],["class","muted small",4,"ngIf"],[1,"mt-3",3,"ngClass"],["for","signupMinimumAge"],["type","number","min","1","id","signupMinimumAge","formControlName","minimumAge",1,"form-control",3,"ngClass"],["formGroupName","user"],["id","userVideoQuotaLabel","for","userVideoQuota"],["labelId","userVideoQuotaLabel","inputId","userVideoQuota","formControlName","videoQuota","inputSuffix",y,"inputType","number",3,"items","clearable"],[1,"mt-2","d-block","small","muted",3,"videoQuota"],["id","userVideoQuotaDaily","for","userVideoQuotaDaily"],["labelId","userVideoQuotaDailyLabel","inputId","userVideoQuotaDaily","formControlName","videoQuotaDaily","inputSuffix",v,"inputType","number",3,"items","clearable"],["formGroupName","history"],["inputName","videosHistoryEnabled","formControlName","enabled","labelText",L],["formGroupName","import"],["for","importConcurrency"],["type","number","id","importConcurrency","formControlName","concurrency"],["formGroupName","http",1,"form-group"],["inputName","importVideosHttpEnabled","formControlName","enabled","labelText",W],["href","https://docs.joinpeertube.org/maintain/configuration#security",1,"link-primary"],["formGroupName","torrent",1,"form-group"],["inputName","importVideosTorrentEnabled","formControlName","enabled","labelText",k],["formGroupName","videoChannelSynchronization"],["inputName","importSynchronizationEnabled","formControlName","enabled","labelText",$],[3,"hidden"],["for","videoChannelSynchronizationMaxPerUser"],["type","number","min","1","id","videoChannelSynchronizationMaxPerUser","formControlName","maxPerUser",1,"form-control",3,"ngClass"],["formGroupName","autoBlacklist"],["formGroupName","ofUsers"],["inputName","autoBlacklistVideosOfUsersEnabled","formControlName","enabled","labelText",X],["formGroupName","videoFile"],["formGroupName","update"],["inputName","videoFileUpdateEnabled","formControlName","enabled","labelText",x],["formGroupName","storyboards"],["inputName","storyboardsEnabled","formControlName","enabled","labelText",z],["formGroupName","videoTranscription"],["inputName","videoTranscriptionEnabled","formControlName","enabled","labelText",G],["href","https://docs.joinpeertube.org/admin/configuration#automatic-transcription","target","_blank"],["formGroupName","remoteRunners",1,"form-group",3,"ngClass"],["inputName","videoTranscriptionRemoteRunnersEnabled","formControlName","enabled","labelText",te],["routerLink","/admin/settings/system/runners/runners-list"],["formGroupName","videoChannels",1,"form-group"],["for","videoChannelsMaxPerUser"],["type","number","min","1","id","videoChannelsMaxPerUser","formControlName","maxPerUser",1,"form-control",3,"ngClass"],["formGroupName","search"],["formGroupName","remoteUri"],["inputName","searchRemoteUriUsers","formControlName","users","labelText",ae],["inputName","searchRemoteUriAnonymous","formControlName","anonymous","labelText",ze],["formGroupName","searchIndex"],["inputName","searchIndexEnabled","formControlName","enabled","labelText",Xe],["for","searchIndexUrl"],[1,"label-small-info"],["target","_blank","href","https://framagit.org/framasoft/peertube/search-index",1,"link-primary"],["target","_blank","href","https://sepiasearch.org",1,"link-primary"],["type","text","id","searchIndexUrl","formControlName","url",1,"form-control",3,"ngClass"],[1,"mt-3"],["inputName","searchIndexDisableLocalSearch","formControlName","disableLocalSearch","labelText",Be,3,"ngClass"],["inputName","searchIndexIsDefaultSearch","formControlName","isDefaultSearch","labelText",We,3,"ngClass"],["formGroupName","users"],["inputName","importUsersEnabled","formControlName","enabled","labelText",He],["formGroupName","export"],["inputName","exportUsersEnabled","formControlName","enabled","labelText",je],[1,"form-group",3,"ngClass"],["id","exportUsersMaxUserVideoQuota","for","exportUsersMaxUserVideoQuota"],[1,"ms-2","small","muted"],["labelId","exportUsersMaxUserVideoQuota","inputId","exportUsersMaxUserVideoQuota","formControlName","maxUserVideoQuota","inputSuffix",Ke,"inputType","number",3,"items","clearable"],["for","exportUsersExportExpiration"],["inputId","exportUsersExportExpiration","formControlName","exportExpiration",3,"items"],[1,"mt-1","small","muted"],["routerLink","/admin/settings/follows",1,"link-primary"],["formGroupName","followers"],["formGroupName","instance"],["inputName","followersInstanceEnabled","formControlName","enabled","labelText",we],["inputName","followersInstanceManualApproval","formControlName","manualApproval","labelText",Je],["formGroupName","followings"],["formGroupName","autoFollowBack"],["inputName","followingsInstanceAutoFollowBackEnabled","formControlName","enabled","labelText",Ye],["formGroupName","autoFollowIndex"],["inputName","followingsInstanceAutoFollowIndexEnabled","formControlName","enabled","labelText",Ve],["href","https://docs.joinpeertube.org/admin/following-instances#automatically-follow-other-instances","rel","noopener noreferrer","target","_blank",1,"link-primary"],["for","followingsInstanceAutoFollowIndexUrl"],["type","text","id","followingsInstanceAutoFollowIndexUrl","formControlName","indexUrl",1,"form-control",3,"ngClass"],["formGroupName","admin",1,"form-group"],["for","adminEmail"],["type","text","id","adminEmail","formControlName","email",1,"form-control",3,"ngClass"],["formGroupName","contactForm",1,"form-group"],["inputName","enableContactForm","formControlName","enabled","labelText",Z],["formGroupName","services"],["formGroupName","twitter"],["for","servicesTwitterUsername"],[1,"mb-0"],["type","text","id","servicesTwitterUsername","formControlName","username",1,"form-control",3,"ngClass"],["role","alert",1,"form-error"],["type","primary",1,"alert-signup"],[1,"muted","small"]];},template:function(a,r){a&1&&(E(0,73),i(1,"div",74)(2,"div",75)(3,"h2"),c(4,0),o(),i(5,"div",76),D(6,1),p(7,"a",77)(8,"a",78),b(),o()(),i(9,"div",79),E(10,80),i(11,"div",81)(12,"label",82),c(13,2),o(),p(14,"my-select-options",83),o(),T(),i(15,"div",84)(16,"label",85),c(17,3),o(),p(18,"my-select-custom-value",86),u(19,ol,2,1,"div",87),o(),i(20,"div",88),E(21,89)(22,90),i(23,"label",91),c(24,4),o(),i(25,"div",92)(26,"select",93)(27,"option",94),c(28,5),o(),i(29,"option",95),c(30,6),o(),i(31,"option",96),c(32,7),o(),i(33,"option",97),c(34,8),o()()(),u(35,il,2,1,"div",87),T()(),o(),E(36,98)(37,89)(38,99),i(39,"div",81),p(40,"my-peertube-checkbox",100),o(),T()(),E(41,101)(42,102),i(43,"div",81)(44,"my-peertube-checkbox",103),E(45,104),u(46,rl,2,0,"span",105)(47,_l,2,0,"span",105),T(),o()(),T()()(),o()(),i(48,"div",106)(49,"div",75)(50,"h2"),c(51,9),o(),i(52,"div",76),c(53,10),o()(),i(54,"div",79),E(55,107),i(56,"div",81),p(57,"my-peertube-checkbox",108),o(),i(58,"div",81),p(59,"my-peertube-checkbox",109),o(),i(60,"div",81)(61,"label",110),c(62,11),o(),i(63,"div",92)(64,"select",111)(65,"option",112),c(66,12),o(),i(67,"option",113),c(68,13),o(),i(69,"option",114),c(70,14),o()()(),u(71,al,2,1,"div",87),o(),i(72,"div",81)(73,"label",115),c(74,15),o(),p(75,"my-help",116)(76,"my-markdown-textarea",117),u(77,ll,2,1,"div",87),o(),T(),o()(),i(78,"div",106)(79,"div",75)(80,"h2"),c(81,16),o(),i(82,"div",76),D(83,17),p(84,"a",118),b(),o()(),i(85,"div",79),E(86,119),i(87,"div",81)(88,"my-peertube-checkbox",120),E(89,104),i(90,"span"),c(91,18),o(),u(92,sl,2,1,"my-alert",121),T(),E(93,122),i(94,"div",81),p(95,"my-peertube-checkbox",123),o(),i(96,"div",81),p(97,"my-peertube-checkbox",124),o(),i(98,"div",125)(99,"label",126),c(100,19),o(),i(101,"span",127),c(102,20),o(),i(103,"div",128),p(104,"input",129),i(105,"span"),c(106,21),o()(),u(107,cl,2,1,"div",87)(108,dl,2,0,"small",130),o(),i(109,"div",131)(110,"label",132),c(111,22),o(),i(112,"div",128),p(113,"input",133),i(114,"span"),c(115,23),o()(),u(116,pl,2,1,"div",87),o(),T(),o()(),T(),E(117,134),i(118,"div",81)(119,"label",135),c(120,24),o(),p(121,"my-select-custom-value",136)(122,"my-user-real-quota-info",137),u(123,ml,2,1,"div",87),o(),i(124,"div",81)(125,"label",138),c(126,25),o(),p(127,"my-select-custom-value",139),u(128,ul,2,1,"div",87),o(),i(129,"div",81),E(130,140)(131,89),p(132,"my-peertube-checkbox",141),T()(),o(),T(),o()(),i(133,"div",106)(134,"div",75)(135,"h2"),c(136,26),o()(),i(137,"div",79),E(138,142)(139,89),i(140,"div",81)(141,"label",143),c(142,27),o(),i(143,"span",127),c(144,28),o(),i(145,"div",128),p(146,"input",144),i(147,"span"),c(148,29),o()(),u(149,gl,2,1,"div",87),o(),i(150,"div",145)(151,"my-peertube-checkbox",146),E(152,104),i(153,"span"),D(154,30),p(155,"a",147),b(),o(),T(),o()(),i(156,"div",148)(157,"my-peertube-checkbox",149),E(158,104),i(159,"span"),c(160,31),o(),T(),o()(),T(),E(161,150),i(162,"div",81)(163,"my-peertube-checkbox",151),E(164,104),i(165,"span",152),c(166,32),o(),T(),o()(),i(167,"div",81)(168,"label",153),c(169,33),o(),i(170,"div",128),p(171,"input",154),i(172,"span"),c(173,34),o()(),u(174,Cl,2,1,"div",87),o(),T()(),E(175,155)(176,89)(177,156),i(178,"div",81)(179,"my-peertube-checkbox",157),E(180,104),i(181,"span"),c(182,35),o(),T(),o()(),T()()(),E(183,158)(184,159),i(185,"div",81),p(186,"my-peertube-checkbox",160),o(),T()(),E(187,161),i(188,"div",81)(189,"my-peertube-checkbox",162),E(190,104),i(191,"span"),c(192,36),o(),T(),o()(),T(),E(193,163),i(194,"div",81)(195,"my-peertube-checkbox",164),E(196,104),i(197,"span"),D(198,37),p(199,"a",165),b(),o(),T(),E(200,122),i(201,"div",166)(202,"my-peertube-checkbox",167),E(203,104),i(204,"span"),D(205,38),p(206,"a",168),b(),o(),T(),o()(),T(),o()(),T(),o()(),i(207,"div",106)(208,"div",75)(209,"h2"),c(210,39),o()(),i(211,"div",79)(212,"div",169)(213,"label",170),c(214,40),o(),i(215,"div",128),p(216,"input",171),i(217,"span"),c(218,41),o()(),u(219,Sl,2,1,"div",87),o()()(),i(220,"div",106)(221,"div",75)(222,"h2"),c(223,42),o()(),i(224,"div",79),E(225,172)(226,173),i(227,"div",81)(228,"my-peertube-checkbox",174),E(229,104),i(230,"span"),D(231,43),p(232,"strong"),b(),o(),T(),o()(),i(233,"div",81)(234,"my-peertube-checkbox",175),E(235,104),i(236,"span"),D(237,44),p(238,"strong"),b(),o(),T(),o()(),T(),E(239,176),i(240,"div",81)(241,"my-peertube-checkbox",177),E(242,104),i(243,"div"),c(244,45),o(),T(),E(245,122),i(246,"div",125)(247,"label",178),c(248,46),o(),i(249,"div",179),D(250,47),p(251,"a",180)(252,"a",181),b(),o(),p(253,"input",182),u(254,El,2,1,"div",87),o(),i(255,"div",183),p(256,"my-peertube-checkbox",184),o(),i(257,"div",183)(258,"my-peertube-checkbox",185),E(259,104),i(260,"span"),c(261,48),o(),T(),o()(),T(),o()(),T()(),o()(),i(262,"div",106)(263,"div",75)(264,"h2"),c(265,49),o()(),i(266,"div",79),E(267,142)(268,186),i(269,"div",81)(270,"my-peertube-checkbox",187),E(271,104),i(272,"div"),c(273,50),o(),i(274,"div"),c(275,51),o(),T(),o()(),T()(),E(276,188)(277,186),i(278,"div",81)(279,"my-peertube-checkbox",189),E(280,104),i(281,"span"),c(282,52),o(),T(),E(283,122),i(284,"div",190)(285,"label",191),c(286,53),o(),i(287,"span",192),c(288,54),o(),p(289,"my-select-custom-value",193),u(290,Tl,2,1,"div",87),o(),i(291,"div",190)(292,"label",194),c(293,55),o(),p(294,"my-select-options",195),i(295,"div",196),c(296,56),o(),u(297,Il,2,1,"div",87),o(),T(),o()(),T()(),o()(),i(298,"div",106)(299,"div",75)(300,"h2"),c(301,57),o(),i(302,"div",76),D(303,58),p(304,"a",197),b(),o()(),i(305,"div",79),E(306,198)(307,199),i(308,"div",81),p(309,"my-peertube-checkbox",200),o(),i(310,"div",81),p(311,"my-peertube-checkbox",201),o(),T()(),E(312,202)(313,199)(314,203),i(315,"div",81)(316,"my-peertube-checkbox",204),E(317,104),i(318,"span"),c(319,59),o(),T(),o()(),T(),E(320,205),i(321,"div",81)(322,"my-peertube-checkbox",206),E(323,104),i(324,"div"),c(325,60),o(),i(326,"span"),D(327,61),p(328,"a",207),b(),o(),T(),E(329,122),i(330,"div",125)(331,"label",208),c(332,62),o(),p(333,"input",209),u(334,Nl,2,1,"div",87),o(),T(),o()(),T()()(),o()(),i(335,"div",106)(336,"div",75)(337,"h2"),c(338,63),o()(),i(339,"div",79)(340,"div",210)(341,"label",211),c(342,64),o(),p(343,"input",212),u(344,Ol,2,1,"div",87),o(),i(345,"div",213),p(346,"my-peertube-checkbox",214),o()()(),i(347,"div",106)(348,"div",75)(349,"h2"),c(350,65),o(),i(351,"div",76),c(352,66),o()(),i(353,"div",79),E(354,215)(355,216),i(356,"div",81)(357,"label",217),c(358,67),o(),i(359,"div",179)(360,"p",218),c(361,68),o(),i(362,"p"),c(363,69),o()(),p(364,"input",219),u(365,Ml,2,1,"div",87),o(),T()(),o()(),T()),a&2&&(s("formGroup",r.form()),l(14),s("items",r.availableThemes),l(4),s("items",r.defaultLandingPageOptions)("clearable",!1),l(),s("ngIf",r.formErrors().instance.defaultClientRoute),l(16),s("ngIf",r.formErrors().trending.videos.algorithms.default),l(11),s("ngIf",r.countExternalAuth()===0),l(),s("ngIf",r.countExternalAuth()>1),l(24),s("ngIf",r.formErrors().broadcastMessage.level),l(5),s("formError",r.formErrors()["broadcastMessage.message"]),l(),s("ngIf",r.formErrors().broadcastMessage.message),l(15),s("ngIf",r.signupAlertMessage),l(3),s("ngClass",r.getDisabledSignupClass()),l(2),s("ngClass",r.getDisabledSignupClass()),l(),s("ngClass",r.getDisabledSignupClass()),l(6),s("ngClass",H(58,An,r.formErrors()["signup.limit"])),l(2),j(r.form().value.signup.limit),K(106),l(),s("ngIf",r.formErrors().signup.limit),l(),s("ngIf",r.hasUnlimitedSignup()),l(),s("ngClass",r.getDisabledSignupClass()),l(4),s("ngClass",H(60,An,r.formErrors()["signup.minimumAge"])),l(2),j(r.form().value.signup.minimumAge),K(115),l(),s("ngIf",r.formErrors().signup.minimumAge),l(5),s("items",r.getVideoQuotaOptions())("clearable",!1),l(),s("videoQuota",r.getUserVideoQuota()),l(),s("ngIf",r.formErrors().user.videoQuota),l(4),s("items",r.getVideoQuotaDailyOptions())("clearable",!1),l(),s("ngIf",r.formErrors().user.videoQuotaDaily),l(21),s("ngIf",r.formErrors().import.concurrency),l(16),s("hidden",r.isImportVideosHttpEnabled()),l(6),s("ngClass",H(62,An,r.formErrors().import.videoChannelSynchronization.maxPerUser)),l(2),j(r.form().value.import.videoChannelSynchronization.maxPerUser),K(173),l(),s("ngIf",r.formErrors().import.videoChannelSynchronization.maxPerUser),l(27),s("ngClass",r.getTranscriptionRunnerDisabledClass()),l(15),s("ngClass",H(64,An,r.formErrors()["videoChannels.maxPerUser"])),l(2),j(r.form().value.videoChannels.maxPerUser),K(218),l(),s("ngIf",r.formErrors().videoChannels.maxPerUser),l(27),s("ngClass",r.getDisabledSearchIndexClass()),l(7),s("ngClass",H(66,An,r.formErrors()["search.searchIndex.url"])),l(),s("ngIf",r.formErrors().search.searchIndex.url),l(2),s("ngClass",r.getDisabledSearchIndexClass()),l(2),s("ngClass",r.getDisabledSearchIndexClass()),l(26),s("ngClass",r.getDisabledExportUsersClass()),l(5),s("items",r.exportMaxUserVideoQuotaOptions)("clearable",!1),l(),s("ngIf",r.formErrors().export.users.maxUserVideoQuota),l(),s("ngClass",r.getDisabledExportUsersClass()),l(3),s("items",r.exportExpirationOptions),l(3),s("ngIf",r.formErrors().export.users.exportExpiration),l(33),s("ngClass",H(68,nl,!r.isAutoFollowIndexEnabled())),l(3),s("ngClass",H(70,An,r.formErrors()["followings.instance.autoFollowIndex.indexUrl"])),l(),s("ngIf",r.formErrors().followings.instance.autoFollowIndex.indexUrl),l(9),s("ngClass",H(72,An,r.formErrors()["admin.email"])),l(),s("ngIf",r.formErrors().admin.email),l(20),s("ngClass",H(74,An,r.formErrors()["services.twitter.username"])),l(),s("ngIf",r.formErrors().services.twitter.username));},dependencies:[le,Kt,Jt,$e,Tn,jt,me,Te,uo,Ne,Ie,xe,Dt,lt,Zt,B,tt,qt,Gn,pe,Bn,yt,Rt],styles:[`form[_ngcontent-%COMP%]{padding-bottom:1.5rem}my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:500px}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:90%}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]     textarea{height:300px!important}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[type=text][readonly][_ngcontent-%COMP%], input[type=number][readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[type=text][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus-visible, input[type=number][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[type=text][disabled][_ngcontent-%COMP%], input[type=number][disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%}}.number-with-unit[_ngcontent-%COMP%]{position:relative;width:fit-content}.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;top:.4em;right:3em}@media screen and (max-width: 500px){.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{display:none}}.number-with-unit[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{opacity:.8;pointer-events:none}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--fg-100)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:20px;min-width:20px;height:20px;border:2px solid var(--fg-400);border-radius:2px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:4px;left:6px;width:5px;height:7px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid var(--input-check-active-fg);border-bottom:2px solid var(--input-check-active-fg)}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:var(--input-check-active-bg);animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;background:var(--input-check-active-bg);position:absolute;left:0;transition:all .2s ease;border:2px solid var(--input-check-active-fg);border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-weight:400;cursor:pointer;display:inline;color:var(--fg-350);margin-inline-start:.5rem}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{display:flex;margin-inline-start:auto}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-inline-start:.3125rem}.inner-form-description[_ngcontent-%COMP%]{font-size:15px;margin-bottom:15px}textarea[_ngcontent-%COMP%]{max-width:100%;display:block;font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:500px;max-width:500px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}textarea[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}textarea[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}textarea[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 540px){textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{color:var(--textarea-fg)!important;background-color:var(--textarea-bg)!important;height:150px;padding:var(--textarea-y-padding) var(--textarea-x-padding)}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px;font-size:14px}.disabled-checkbox-extra[_ngcontent-%COMP%], .disabled-checkbox-extra[_ngcontent-%COMP%]     label{opacity:.5;pointer-events:none}input[disabled][_ngcontent-%COMP%]{opacity:.5}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}.submit-error[_ngcontent-%COMP%]{margin-bottom:20px}.alert-signup[_ngcontent-%COMP%]{width:fit-content;margin-top:10px}.callout-container[_ngcontent-%COMP%]{position:absolute;display:flex;height:0;width:100%;justify-content:right}my-actor-banner-edit[_ngcontent-%COMP%]{max-width:500px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem;font-size:1rem}
/*# sourceMappingURL=edit-custom-config.component-DKRYSZQC.css.map */`]}));let e=_;return e;})();var Rn=(()=>{let _=class _{getTranscodingResolutions(){return[{id:"0p",label:"\xC0udio solament",description:"\"Split audio and video\" must be enabled for the PeerTube player to propose an \"Audio only\" resolution to users"},{id:"144p",label:"144p"},{id:"240p",label:"240p"},{id:"360p",label:"360p"},{id:"480p",label:"480p"},{id:"720p",label:"720p"},{id:"1080p",label:"1080p"},{id:"1440p",label:"1440p"},{id:"2160p",label:"2160p"}];}isTranscodingEnabled(t){return t.value.transcoding.enabled===!0;}isHLSEnabled(t){return t.value.transcoding.hls.enabled===!0;}isRemoteRunnerVODEnabled(t){return t.value.transcoding.remoteRunners.enabled===!0;}isRemoteRunnerLiveEnabled(t){return t.value.live.transcoding.remoteRunners.enabled===!0;}isStudioEnabled(t){return t.value.videoStudio.enabled===!0;}isLiveEnabled(t){return t.value.live.enabled===!0;}isLiveTranscodingEnabled(t){return t.value.live.transcoding.enabled===!0;}getTotalTranscodingThreads(t){let a=t.value.transcoding.enabled,r=t.value.transcoding.threads,m=t.value.live.transcoding.enabled,C=t.value.live.transcoding.threads,O=!a||+r>0;O&&=!m||+C>0;let P=0;return a&&(P+=+r||1),m&&(P+=+C||1),{value:P,atMost:O,unit:se("{value, plural, =1 {thread} other {threads}}",{value:P})};}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275prov",qe({token:_,factory:_.ɵfac}));let e=_;return e;})();var w_={VALIDATORS:[ie.required],MESSAGES:{required:"Platform name is required."}},V_={VALIDATORS:[ie.maxLength(250)],MESSAGES:{maxlength:"Short description must not be longer than 250 characters."}},k_={VALIDATORS:[ie.required],MESSAGES:{required:"Lo nom d\u2019utilizaire Twitter es requesit."}},io={VALIDATORS:[ie.required,ie.min(1),ie.pattern("[0-9]+")],MESSAGES:{required:"Cache size is required.",min:"Cache size must be greater than 1.",pattern:"Cache size must be a number."}},z_={VALIDATORS:[ie.required,ie.min(-1),ie.pattern("-?[0-9]+")],MESSAGES:{required:"La limita d\u2019inscripcion es requesida.",min:"Signup limit must be greater than 1. Use -1 to disable it.",pattern:"La limita de las inscripcions deu \xE8sser un nombre."}},X_={VALIDATORS:[ie.required,ie.min(1),ie.pattern("[0-9]+")],MESSAGES:{required:"Signup minimum age is required.",min:"Signup minimum age must be greater than 1.",pattern:"Signup minimum age must be a number."}},B_={VALIDATORS:[ie.required,ie.email],MESSAGES:{required:"Lo corri\xE8l de l\u2019admin es requesit.",email:"Lo corri\xE8l de l\u2019admin deu \xE8sser valid."}},ti={VALIDATORS:[ie.required,ie.min(0)],MESSAGES:{required:"Lo fil de transcodatge es requesit.",min:"Los fils de transcodatge devon \xE8sser superiors o egals a 1."}},ni={VALIDATORS:[ie.required,ie.min(1)],MESSAGES:{required:"Transcoding max FPS is required.",min:"Transcoding max FPS must be greater or equal to 1."}},W_={VALIDATORS:[ie.required,ie.min(-1)],MESSAGES:{required:"Max live duration is required.",min:"Max live duration must be greater or equal to -1."}},H_={VALIDATORS:[ie.required,ie.min(-1)],MESSAGES:{required:"Max lives is required.",min:"Max lives must be greater or equal to -1."}},j_={VALIDATORS:[ie.required,ie.min(-1)],MESSAGES:{required:"Max user lives is required.",min:"Max user lives must be greater or equal to -1."}},K_={VALIDATORS:[ie.required,ie.min(1),ie.pattern("[0-9]+")],MESSAGES:{required:"Max video channels per user is required.",min:"Max video channels per user must be greater or equal to 1.",pattern:"Max video channels per user must be a number."}},J_={VALIDATORS:[ie.required,ie.min(1),ie.pattern("[0-9]+")],MESSAGES:{required:"Max synchronizations per user is required.",min:"Max synchronizations per user must be greater or equal to 1.",pattern:"Max synchronizations per user must be a number."}},oi={VALIDATORS:[ie.required,ie.min(1)],MESSAGES:{required:"Concurrency is required.",min:"Concurrency must be greater or equal to 1."}},Y_={VALIDATORS:[ie.required,ie.min(1)],MESSAGES:{required:"Export expiration is required.",min:"Export expiration must be greater or equal to 1."}},q_={VALIDATORS:[ie.required,ie.min(1)],MESSAGES:{required:"Max user video quota is required.",min:"Max user video video quota must be greater or equal to 1."}};function fl(e,_){e&1&&(p(0,"br"),E(1),D(2,1),p(3,"a",4),b(),T());}var ko=(()=>{let _=class _{supportRelMe=q(!1,{transform:po});};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-custom-markup-help"]],inputs:{supportRelMe:[1,"supportRelMe"]},decls:5,vars:1,consts:()=>{let t;t=""+"\uFFFD#2\uFFFD"+"Markdown compatible"+"[\uFFFD/#2\uFFFD|\uFFFD/#3\uFFFD]"+" that also supports "+"\uFFFD#3\uFFFD"+"custom PeerTube HTML tags"+"[\uFFFD/#2\uFFFD|\uFFFD/#3\uFFFD]"+".\n",t=de(t);let a;return a=""+"\uFFFD#3\uFFFD"+"Mastodon verification link"+"\uFFFD/#3\uFFFD"+" is also supported. ",[t,a,["href","https://en.wikipedia.org/wiki/Markdown#Example","target","_blank","rel","noreferrer noopener",1,"text-decoration-underline"],["href","https://docs.joinpeertube.org/api/custom-client-markup","target","_blank","rel","noreferrer noopener",1,"text-decoration-underline"],["href","https://docs.joinmastodon.org/user/profile/#verification","target","_blank","rel","noopener noreferrer"]];},template:function(a,r){a&1&&(E(0),D(1,0),p(2,"a",2)(3,"a",3),b(),T(),u(4,fl,4,0)),a&2&&(l(4),ge(r.supportRelMe()?4:-1));},encapsulation:2}));let e=_;return e;})();function Al(e,_){if(e&1&&(i(0,"div",12),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instanceCustomHomepage.content);}}var Q_=(()=>{let _=class _{customMarkup=S(Vn);form=q(void 0);formErrors=q(void 0);customMarkdownRenderer;getCustomMarkdownRenderer(){return this.customMarkup.getCustomMarkdownRenderer();}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-edit-homepage"]],inputs:{form:[1,"form"],formErrors:[1,"formErrors"]},decls:14,vars:5,consts:()=>{let t;t="PAGES D\u2019ACU\xC8LH DE L\u2019INST\xC0NCIA";let a;return a="Pagina d\u2019acu\xE8lh",[t,a,[3,"formGroup"],["formGroupName","instanceCustomHomepage"],[1,"homepage","pt-two-cols","mt-5"],[1,"title-col"],[1,"content-col"],[1,"form-group"],["for","instanceCustomHomepageContent"],[1,"label-small-info"],["inputId","instanceCustomHomepageContent","formControlName","content","dir","ltr","monospace","true",3,"customMarkdownRenderer","debounceTime","formError"],["class","form-error","role","alert",4,"ngIf"],["role","alert",1,"form-error"]];},template:function(a,r){a&1&&(E(0,2)(1,3),i(2,"div",4)(3,"div",5)(4,"h2"),c(5,0),o()(),i(6,"div",6)(7,"div",7)(8,"label",8),c(9,1),o(),i(10,"div",9),p(11,"my-custom-markup-help"),o(),p(12,"my-markdown-textarea",10),u(13,Al,2,1,"div",11),o()()(),T()()),a&2&&(s("formGroup",r.form()),l(12),s("customMarkdownRenderer",r.getCustomMarkdownRenderer())("debounceTime",500)("formError",r.formErrors()["instanceCustomHomepage.content"]),l(),s("ngIf",r.formErrors().instanceCustomHomepage.content));},dependencies:[le,me,Te,Ne,Ie,xe,Dt,ko,Gn,B],styles:[`form[_ngcontent-%COMP%]{padding-bottom:1.5rem}my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:500px}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:90%}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]     textarea{height:300px!important}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[type=text][readonly][_ngcontent-%COMP%], input[type=number][readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[type=text][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus-visible, input[type=number][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[type=text][disabled][_ngcontent-%COMP%], input[type=number][disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%}}.number-with-unit[_ngcontent-%COMP%]{position:relative;width:fit-content}.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;top:.4em;right:3em}@media screen and (max-width: 500px){.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{display:none}}.number-with-unit[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{opacity:.8;pointer-events:none}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--fg-100)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:20px;min-width:20px;height:20px;border:2px solid var(--fg-400);border-radius:2px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:4px;left:6px;width:5px;height:7px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid var(--input-check-active-fg);border-bottom:2px solid var(--input-check-active-fg)}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:var(--input-check-active-bg);animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;background:var(--input-check-active-bg);position:absolute;left:0;transition:all .2s ease;border:2px solid var(--input-check-active-fg);border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-weight:400;cursor:pointer;display:inline;color:var(--fg-350);margin-inline-start:.5rem}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{display:flex;margin-inline-start:auto}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-inline-start:.3125rem}.inner-form-description[_ngcontent-%COMP%]{font-size:15px;margin-bottom:15px}textarea[_ngcontent-%COMP%]{max-width:100%;display:block;font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:500px;max-width:500px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}textarea[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}textarea[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}textarea[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 540px){textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{color:var(--textarea-fg)!important;background-color:var(--textarea-bg)!important;height:150px;padding:var(--textarea-y-padding) var(--textarea-x-padding)}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px;font-size:14px}.disabled-checkbox-extra[_ngcontent-%COMP%], .disabled-checkbox-extra[_ngcontent-%COMP%]     label{opacity:.5;pointer-events:none}input[disabled][_ngcontent-%COMP%]{opacity:.5}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}.submit-error[_ngcontent-%COMP%]{margin-bottom:20px}.alert-signup[_ngcontent-%COMP%]{width:fit-content;margin-top:10px}.callout-container[_ngcontent-%COMP%]{position:absolute;display:flex;height:0;width:100%;justify-content:right}my-actor-banner-edit[_ngcontent-%COMP%]{max-width:500px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem;font-size:1rem}
/*# sourceMappingURL=edit-custom-config.component-DKRYSZQC.css.map */`]}));let e=_;return e;})();var Wn=e=>({"input-error":e});function Rl(e,_){if(e&1&&(i(0,"div",102),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.name);}}function Pl(e,_){if(e&1&&(i(0,"div",102),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.shortDescription);}}function Fl(e,_){if(e&1&&(i(0,"div",102),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.serverCountry);}}function hl(e,_){if(e&1&&(i(0,"div",102),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.social.externalLink);}}function Dl(e,_){if(e&1&&(i(0,"div",102),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.social.mastodonLink);}}function bl(e,_){if(e&1&&(i(0,"div",102),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.social.blueskyLink);}}function vl(e,_){e&1&&(E(0),c(1,39),T());}function yl(e,_){e&1&&(E(0),D(1,40),p(2,"br"),b(),T());}function Ll(e,_){if(e&1&&(i(0,"div",102),g(1),o()),e&2){let n=d();l(),N(n.formErrors().instance.defaultNSFWPolicy);}}var Z_=(()=>{let _=class _{customMarkup=S(Vn);notifier=S(Y);instanceService=S(o_);server=S(fe);form=q(void 0);formErrors=q(void 0);languageItems=q([]);categoryItems=q([]);instanceBannerUrl;instanceAvatars=[];nsfwItems=[{id:"do_not_list",label:"Amagar"},{id:"warn",label:"Warn"},{id:"blur",label:"Blur"},{id:"display",label:"Mostrar"}];serverConfig;get instanceName(){return this.server.getHTMLConfig().instance.name;}ngOnInit(){this.serverConfig=this.server.getHTMLConfig(),this.updateActorImages();}getCustomMarkdownRenderer(){return this.customMarkup.getCustomMarkdownRenderer();}onBannerChange(t){this.instanceService.updateInstanceBanner(t).subscribe({next:()=>{this.notifier.success("Banner changed."),this.resetActorImages();},error:a=>Zo({err:a,name:"banner",notifier:this.notifier})});}onBannerDelete(){this.instanceService.deleteInstanceBanner().subscribe({next:()=>{this.notifier.success("Banner deleted."),this.resetActorImages();},error:t=>this.notifier.error(t.message)});}onAvatarChange(t){this.instanceService.updateInstanceAvatar(t).subscribe({next:()=>{this.notifier.success("Avatar cambiat."),this.resetActorImages();},error:a=>Zo({err:a,name:"avatar",notifier:this.notifier})});}onAvatarDelete(){this.instanceService.deleteInstanceAvatar().subscribe({next:()=>{this.notifier.success("Avatar deleted."),this.resetActorImages();},error:t=>this.notifier.error(t.message)});}updateActorImages(){this.instanceBannerUrl=vr(this.serverConfig.instance.banners,"width")?.path,this.instanceAvatars=this.serverConfig.instance.avatars;}resetActorImages(){this.server.resetConfig().subscribe(t=>{this.serverConfig=t,this.updateActorImages();});}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-edit-instance-information"]],inputs:{form:[1,"form"],formErrors:[1,"formErrors"],languageItems:[1,"languageItems"],categoryItems:[1,"categoryItems"]},decls:166,vars:47,consts:()=>{let t;t="Add a new category";let a;a="Add a new language";let r;r="Politica tocant las vid\xE8os amb de contengut sensible";let m;m="INST\xC0NCIA";let C;C="Square icon";let O;O="Square icon can be used on your custom homepage.";let P;P="Banner";let y;y="Banner is displayed in the about, login and registration pages and be used on your custom homepage.";let v;v="It can also be displayed on external websites to promote your instance, such as "+"\uFFFD#22\uFFFD"+"JoinPeerTube.org"+"\uFFFD/#22\uFFFD"+".";let L;L="Nom";let W;W="Descripcion corta";let k;k="Descripcion";let $;$="Categoria m\xE0ger de l\u2019inst\xE0ncia";let X;X="La lenga m\xE0ger que v\xF2stre(s) moderator(s) parla(n)";let x;x="Server country";let z;z="PeerTube uses this setting to explain to your users which law they must follow in the \"About\" pages";let G;G="SOCIAL";let te;te=" Social links and support information displayed in the "+"\uFFFD#63\uFFFD"+"About"+"\uFFFD/#63\uFFFD"+" pages ";let ae;ae="Support text";let ze;ze="Explain to your users how to support your platform. If set, PeerTube will display a \"Support\" button in \"About\" instance pages";let Xe;Xe="External link";let Be;Be="Link to your main website";let We;We="Mastodon link";let He;He="Bluesky link";let je;je="MODERATION & SENSITIVE CONTENT";let Ke;Ke=" Manage "+"\uFFFD#96\uFFFD"+"users"+"\uFFFD/#96\uFFFD"+" to build a moderation team. ";let we;we="T\xE8rmes";let Je;Je="C\xF2di de conducha";let Ye;Ye="Informacions de moderacion";let Ve;Ve="Who moderates the instance? What is the policy regarding sensitive content? Political videos? etc";let Z;Z="YOU AND YOUR INSTANCE";let ee;ee="Who is behind the instance?";let _t;_t="A single person? A non-profit? A company?";let U;U="Perqu\xE9 cre\xE8retz v\xF2stra inst\xE0ncia ?";let an;an="To share your personal videos? To open registrations and allow people to upload what they want?";let ln;ln="Quant de temps preves\xE8tz de mant\xE9ner aquesta inst\xE0ncia ?";let sn;sn="It's important to know for users who want to register on your instance";let Bt;Bt="Coss\xED finan\xE7aretz lo servidor PeerTube ?";let cn;cn="With your own funds? With user donations? Advertising?";let dn;dn="AUTRAS INFORMACIONS";let pn;pn="What server/hardware does the instance run on?";let mn;mn="i.e. 2vCore 2GB RAM, a direct the link to the server you rent, etc.";let un;un="This instance is dedicated to sensitive content";let gn;return gn=" Enabling it will allow other administrators to know that you are mainly federating sensitive content."+"\uFFFD#2\uFFFD\uFFFD/#2\uFFFD"+" Moreover, the \"sensitive content\" checkbox on video upload will be automatically checked by default. ",[m,C,O,P,y,v,L,W,k,$,X,x,z,G,te,ae,ze,Xe,Be,We,He,je,Ke,we,Je,Ye,Ve,Z,ee,_t,U,an,ln,sn,Bt,cn,dn,pn,mn,un,gn,[3,"formGroup"],["formGroupName","instance"],[1,"pt-two-cols","mt-5"],[1,"title-col"],[1,"content-col"],[1,"form-group"],["for","avatarfile"],[1,"label-small-info"],[1,"mb-0"],["actorType","account","previewImage","false","displayUsername","false",1,"d-block","mb-4",3,"avatarChange","avatarDelete","username","avatars"],["for","bannerfile"],["target","_blank","href","https://joinpeertube.org/instances"],[1,"d-block","mb-4",3,"bannerChange","bannerDelete","previewImage","bannerUrl"],["for","instanceName"],["type","text","id","instanceName","formControlName","name",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["for","instanceShortDescription"],["id","instanceShortDescription","formControlName","shortDescription",1,"form-control","small",3,"ngClass"],["for","instanceDescription"],["supportRelMe","true"],["inputId","instanceDescription","formControlName","description",3,"customMarkdownRenderer","debounceTime","formError"],["for","instanceCategories"],["inputId","instanceCategories","formControlName","categories","placeholder",t,3,"availableItems","selectableGroup"],["for","instanceLanguages"],["inputId","instanceLanguages","formControlName","languages","placeholder",a,3,"availableItems","selectableGroup"],["for","instanceServerCountry"],["type","text","id","instanceServerCountry","formControlName","serverCountry",1,"form-control",3,"ngClass"],[1,"pt-two-cols","mt-4"],[1,"inner-form-description"],["formGroupName","support",1,"form-group"],["for","instanceSupportText"],["helpType","markdownText"],["inputId","instanceSupportText","formControlName","text","markdownType","enhanced",3,"formError"],["formGroupName","social"],["for","instanceSocialExternalLink"],["type","text","id","instanceSocialExternalLink","formControlName","externalLink",1,"form-control",3,"ngClass"],["for","instanceSocialMastodonLink"],["type","text","id","instanceSocialMastodonLink","formControlName","mastodonLink",1,"form-control",3,"ngClass"],["for","instanceSocialBlueskyLink"],["type","text","id","instanceSocialBlueskyLink","formControlName","blueskyLink",1,"form-control",3,"ngClass"],["routerLink","/admin/overview/users",1,"link-primary"],["inputName","instanceIsNSFW","formControlName","isNSFW"],["ptTemplate","label"],["ptTemplate","help"],["inputId","instanceDefaultNSFWPolicy","isGroup","true","label",r,"formControlName","defaultNSFWPolicy",3,"items"],["for","instanceTerms"],["inputId","instanceTerms","formControlName","terms","markdownType","enhanced",3,"formError"],["for","instanceCodeOfConduct"],["inputId","instanceCodeOfConduct","formControlName","codeOfConduct","markdownType","enhanced",3,"formError"],["for","instanceModerationInformation"],["inputId","instanceModerationInformation","formControlName","moderationInformation","markdownType","enhanced",3,"formError"],["for","instanceAdministrator"],["inputId","instanceAdministrator","formControlName","administrator","markdownType","enhanced",3,"formError"],["for","instanceCreationReason"],["inputId","instanceCreationReason","formControlName","creationReason","markdownType","enhanced",3,"formError"],["for","instanceMaintenanceLifetime"],["inputId","instanceMaintenanceLifetime","formControlName","maintenanceLifetime","markdownType","enhanced",3,"formError"],["for","instanceBusinessModel"],["inputId","instanceBusinessModel","formControlName","businessModel","markdownType","enhanced",3,"formError"],["for","instanceHardwareInformation"],["inputId","instanceHardwareInformation","formControlName","hardwareInformation","markdownType","enhanced",3,"formError"],["role","alert",1,"form-error"]];},template:function(a,r){a&1&&(E(0,41)(1,42),i(2,"div",43)(3,"div",44)(4,"h2"),c(5,0),o()(),i(6,"div",45)(7,"div",46)(8,"label",47),c(9,1),o(),i(10,"div",48)(11,"p",49),c(12,2),o()(),i(13,"my-actor-avatar-edit",50),M("avatarChange",function(C){return r.onAvatarChange(C);})("avatarDelete",function(){return r.onAvatarDelete();}),o()(),i(14,"div",46)(15,"label",51),c(16,3),o(),i(17,"div",48)(18,"p",49),c(19,4),o(),i(20,"p"),D(21,5),p(22,"a",52),b(),o()(),i(23,"my-actor-banner-edit",53),M("bannerChange",function(C){return r.onBannerChange(C);})("bannerDelete",function(){return r.onBannerDelete();}),o()(),i(24,"div",46)(25,"label",54),c(26,6),o(),p(27,"input",55),u(28,Rl,2,1,"div",56),o(),i(29,"div",46)(30,"label",57),c(31,7),o(),p(32,"textarea",58),u(33,Pl,2,1,"div",56),o(),i(34,"div",46)(35,"label",59),c(36,8),o(),i(37,"div",48),p(38,"my-custom-markup-help",60),o(),p(39,"my-markdown-textarea",61),o(),i(40,"div",46)(41,"label",62),c(42,9),o(),i(43,"div"),p(44,"my-select-checkbox",63),o()(),i(45,"div",46)(46,"label",64),c(47,10),o(),i(48,"div"),p(49,"my-select-checkbox",65),o()(),i(50,"div",46)(51,"label",66),c(52,11),o(),i(53,"div",48),c(54,12),o(),p(55,"input",67),u(56,Fl,2,1,"div",56),o()()(),i(57,"div",68)(58,"div",44)(59,"h2"),c(60,13),o(),i(61,"div",69),D(62,14),p(63,"em"),b(),o()(),i(64,"div",45)(65,"div",70)(66,"label",71),c(67,15),o(),p(68,"my-help",72),i(69,"div",48),c(70,16),o(),p(71,"my-markdown-textarea",73),o(),E(72,74),i(73,"div",46)(74,"label",75),c(75,17),o(),i(76,"div",48),c(77,18),o(),p(78,"input",76),u(79,hl,2,1,"div",56),o(),i(80,"div",46)(81,"label",77),c(82,19),o(),p(83,"input",78),u(84,Dl,2,1,"div",56),o(),i(85,"div",46)(86,"label",79),c(87,20),o(),p(88,"input",80),u(89,bl,2,1,"div",56),o(),T(),o()(),i(90,"div",68)(91,"div",44)(92,"h2"),c(93,21),o(),i(94,"div",69),D(95,22),p(96,"a",81),b(),o()(),i(97,"div",45)(98,"div",46)(99,"my-peertube-checkbox",82),u(100,vl,2,0,"ng-template",83)(101,yl,3,0,"ng-template",84),o()(),i(102,"div",46),p(103,"my-select-radio",85),u(104,Ll,2,1,"div",56),o(),i(105,"div",46)(106,"label",86),c(107,23),o(),p(108,"my-help",72)(109,"my-markdown-textarea",87),o(),i(110,"div",46)(111,"label",88),c(112,24),o(),p(113,"my-help",72)(114,"my-markdown-textarea",89),o(),i(115,"div",46)(116,"label",90),c(117,25),o(),p(118,"my-help",72),i(119,"div",48),c(120,26),o(),p(121,"my-markdown-textarea",91),o()()(),i(122,"div",68)(123,"div",44)(124,"h2"),c(125,27),o()(),i(126,"div",45)(127,"div",46)(128,"label",92),c(129,28),o(),p(130,"my-help",72),i(131,"div",48),c(132,29),o(),p(133,"my-markdown-textarea",93),o(),i(134,"div",46)(135,"label",94),c(136,30),o(),p(137,"my-help",72),i(138,"div",48),c(139,31),o(),p(140,"my-markdown-textarea",95),o(),i(141,"div",46)(142,"label",96),c(143,32),o(),p(144,"my-help",72),i(145,"div",48),c(146,33),o(),p(147,"my-markdown-textarea",97),o(),i(148,"div",46)(149,"label",98),c(150,34),o(),p(151,"my-help",72),i(152,"div",48),c(153,35),o(),p(154,"my-markdown-textarea",99),o()()(),i(155,"div",68)(156,"div",44)(157,"h2"),c(158,36),o()(),i(159,"div",45)(160,"div",46)(161,"label",100),c(162,37),o(),i(163,"div",48),c(164,38),o(),p(165,"my-markdown-textarea",101),o()()(),T()()),a&2&&(s("formGroup",r.form()),l(13),s("username",r.instanceName)("avatars",r.instanceAvatars),l(10),s("previewImage",!1)("bannerUrl",r.instanceBannerUrl),l(4),s("ngClass",H(35,Wn,r.formErrors().instance.name)),l(),s("ngIf",r.formErrors().instance.name),l(4),s("ngClass",H(37,Wn,r.formErrors()["instance.shortDescription"])),l(),s("ngIf",r.formErrors().instance.shortDescription),l(6),s("customMarkdownRenderer",r.getCustomMarkdownRenderer())("debounceTime",500)("formError",r.formErrors()["instance.description"]),l(5),s("availableItems",r.categoryItems())("selectableGroup",!1),l(5),s("availableItems",r.languageItems())("selectableGroup",!1),l(6),s("ngClass",H(39,Wn,r.formErrors().instance.serverCountry)),l(),s("ngIf",r.formErrors().instance.serverCountry),l(15),s("formError",r.formErrors()["instance.support.text"]),l(7),s("ngClass",H(41,Wn,r.formErrors().instance.social.externalLink)),l(),s("ngIf",r.formErrors().instance.social.externalLink),l(4),s("ngClass",H(43,Wn,r.formErrors().instance.social.mastodonLink)),l(),s("ngIf",r.formErrors().instance.social.mastodonLink),l(4),s("ngClass",H(45,Wn,r.formErrors().instance.social.blueskyLink)),l(),s("ngIf",r.formErrors().instance.social.blueskyLink),l(14),s("items",r.nsfwItems),l(),s("ngIf",r.formErrors().instance.defaultNSFWPolicy),l(5),s("formError",r.formErrors()["instance.terms"]),l(5),s("formError",r.formErrors()["instance.codeOfConduct"]),l(7),s("formError",r.formErrors()["instance.moderationInformation"]),l(12),s("formError",r.formErrors()["instance.administrator"]),l(7),s("formError",r.formErrors()["instance.creationReason"]),l(7),s("formError",r.formErrors()["instance.maintenanceLifetime"]),l(7),s("formError",r.formErrors()["instance.businessModel"]),l(11),s("formError",r.formErrors()["instance.hardwareInformation"]));},dependencies:[le,$e,me,Te,Ne,Ie,xe,Dt,kn,C_,n_,Rr,pe,B,ko,Gn,Ro,lt,tt,On,qt],styles:[`form[_ngcontent-%COMP%]{padding-bottom:1.5rem}my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:500px}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:90%}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]     textarea{height:300px!important}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[type=text][readonly][_ngcontent-%COMP%], input[type=number][readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[type=text][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus-visible, input[type=number][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[type=text][disabled][_ngcontent-%COMP%], input[type=number][disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%}}.number-with-unit[_ngcontent-%COMP%]{position:relative;width:fit-content}.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;top:.4em;right:3em}@media screen and (max-width: 500px){.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{display:none}}.number-with-unit[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{opacity:.8;pointer-events:none}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--fg-100)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:20px;min-width:20px;height:20px;border:2px solid var(--fg-400);border-radius:2px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:4px;left:6px;width:5px;height:7px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid var(--input-check-active-fg);border-bottom:2px solid var(--input-check-active-fg)}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:var(--input-check-active-bg);animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;background:var(--input-check-active-bg);position:absolute;left:0;transition:all .2s ease;border:2px solid var(--input-check-active-fg);border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-weight:400;cursor:pointer;display:inline;color:var(--fg-350);margin-inline-start:.5rem}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{display:flex;margin-inline-start:auto}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-inline-start:.3125rem}.inner-form-description[_ngcontent-%COMP%]{font-size:15px;margin-bottom:15px}textarea[_ngcontent-%COMP%]{max-width:100%;display:block;font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:500px;max-width:500px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}textarea[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}textarea[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}textarea[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 540px){textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{color:var(--textarea-fg)!important;background-color:var(--textarea-bg)!important;height:150px;padding:var(--textarea-y-padding) var(--textarea-x-padding)}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px;font-size:14px}.disabled-checkbox-extra[_ngcontent-%COMP%], .disabled-checkbox-extra[_ngcontent-%COMP%]     label{opacity:.5;pointer-events:none}input[disabled][_ngcontent-%COMP%]{opacity:.5}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}.submit-error[_ngcontent-%COMP%]{margin-bottom:20px}.alert-signup[_ngcontent-%COMP%]{width:fit-content;margin-top:10px}.callout-container[_ngcontent-%COMP%]{position:absolute;display:flex;height:0;width:100%;justify-content:right}my-actor-banner-edit[_ngcontent-%COMP%]{max-width:500px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem;font-size:1rem}
/*# sourceMappingURL=edit-custom-config.component-DKRYSZQC.css.map */`]}));let e=_;return e;})();function $l(e,_){e&1&&(E(0),c(1,23),T());}function xl(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),N(n.formErrors().live.maxInstanceLives);}}function Gl(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),N(n.formErrors().live.maxUserLives);}}function Ul(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),N(n.formErrors().live.maxDuration);}}function wl(e,_){e&1&&(E(0),c(1,24),T());}function Vl(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),N(n.formErrors().live.transcoding.fps.max);}}function kl(e,_){if(e&1&&p(0,"div",79),e&2){let n=d(2).$implicit;s("innerHTML",n.description,nn);}}function zl(e,_){e&1&&u(0,kl,1,1,"ng-template",78);}function Xl(e,_){if(e&1&&(i(0,"div",76)(1,"my-peertube-checkbox",77),u(2,zl,1,0,null,70),o()()),e&2){let n=_.$implicit,t=d();l(),Wt("labelText",n.label),s("inputName",t.getResolutionKey(n.id))("formControlName",n.id),l(),s("ngIf",n.description);}}function Bl(e,_){if(e&1&&(E(0),c(1,25),T()),e&2){let n=d();l(),j(n.getTotalTranscodingThreads().value)(n.getTotalTranscodingThreads().unit),K(1);}}function Wl(e,_){if(e&1&&(E(0),c(1,26),T()),e&2){let n=d();l(),j(n.getTotalTranscodingThreads().value)(n.getTotalTranscodingThreads().unit),K(1);}}function Hl(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),N(n.formErrors().live.transcoding.threads);}}function jl(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),N(n.formErrors().live.transcoding.profile);}}var ea=(()=>{let _=class _{configService=S(pt);editConfigurationService=S(Rn);form=q(void 0);formErrors=q(void 0);serverConfig=q(void 0);transcodingThreadOptions=[];transcodingProfiles=[];liveMaxDurationOptions=[];liveResolutions=[];ngOnInit(){this.transcodingThreadOptions=this.configService.transcodingThreadOptions,this.liveMaxDurationOptions=[{id:-1,label:"No limit"},{id:1e3*3600,label:"1 hour"},{id:1e3*3600*3,label:"3 hours"},{id:1e3*3600*5,label:"5 hours"},{id:1e3*3600*10,label:"10 hours"}],this.liveResolutions=this.editConfigurationService.getTranscodingResolutions();}ngOnChanges(t){t.serverConfig&&(this.transcodingProfiles=this.buildAvailableTranscodingProfile());}buildAvailableTranscodingProfile(){return this.serverConfig().live.transcoding.availableProfiles.map(a=>a==="default"?{id:a,label:"Default",description:"x264, targeting maximum device compatibility"}:{id:a,label:a});}getResolutionKey(t){return"live.transcoding.resolutions."+t;}getLiveRTMPPort(){return this.serverConfig().live.rtmp.port;}isLiveEnabled(){return this.editConfigurationService.isLiveEnabled(this.form());}isRemoteRunnerLiveEnabled(){return this.editConfigurationService.isRemoteRunnerLiveEnabled(this.form());}getDisabledLiveClass(){return{"disabled-checkbox-extra":!this.isLiveEnabled()};}getDisabledLiveTranscodingClass(){return{"disabled-checkbox-extra":!this.isLiveEnabled()||!this.isLiveTranscodingEnabled()};}getDisabledLiveLocalTranscodingClass(){return{"disabled-checkbox-extra":!this.isLiveEnabled()||!this.isLiveTranscodingEnabled()||this.isRemoteRunnerLiveEnabled()};}isLiveTranscodingEnabled(){return this.editConfigurationService.isLiveTranscodingEnabled(this.form());}getTotalTranscodingThreads(){return this.editConfigurationService.getTotalTranscodingThreads(this.form());}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-edit-live-configuration"]],inputs:{form:[1,"form"],formErrors:[1,"formErrors"],serverConfig:[1,"serverConfig"]},features:[Cn],decls:106,vars:27,consts:()=>{let t;t="Allow your users to automatically publish a replay of their live";let a;a="Allow your users to change live latency";let r;r="Also transcode original resolution";let m;m="Enable remote runners for lives";let C;C="LIVE";let O;O=" Enable users of your instance to stream live. ";let P;P="\u26A0\uFE0F Enabling live streaming requires trust in your users and extra moderation work";let y;y="If enabled, your server needs to accept incoming TCP traffic on port "+"\uFFFD0\uFFFD"+"";let v;v=" Small latency disables P2P and high latency can increase P2P ratio ";let L;L="Max simultaneous lives created on your instance";let W;W="(-1 for \"unlimited\")";let k;k="{VAR_PLURAL, plural, =1 {live} other {lives}}",k=de(k,{VAR_PLURAL:"\uFFFD0\uFFFD"});let $;$="Max simultaneous lives created per user";let X;X="(-1 for \"unlimited\")";let x;x="{VAR_PLURAL, plural, =1 {live} other {lives}}",x=de(x,{VAR_PLURAL:"\uFFFD0\uFFFD"});let z;z="Max live duration";let G;G="TRANSCODING";let te;te=" Same as VOD transcoding, transcoding live streams so that they are in a streamable form that any device can play. Requires a beefy CPU, and then some. ";let ae;ae="Output formats";let ze;ze="Max live FPS";let Xe;Xe="Cap transcoded live FPS. Max resolution stream still keeps the original FPS.";let Be;Be="Live resolutions to generate";let We;We=" Even if it's above your maximum enabled resolution ";let He;He=" Use "+"\uFFFD#90\uFFFD"+"remote runners"+"\uFFFD/#90\uFFFD"+" to process live transcoding. Remote runners has to register on your instance first. ";let je;je="Live transcoding threads";let Ke;Ke="Live transcoding profile";let we;we="new live transcoding profiles can be added by PeerTube plugins";let Je;Je="Allow live streaming";let Ye;Ye="Transcoding enabled for live streams";let Ve;Ve=" will claim at most "+"\uFFFD0\uFFFD"+" "+"\uFFFD1\uFFFD"+" with VOD transcoding ";let Z;return Z=" will claim at least "+"\uFFFD0\uFFFD"+" "+"\uFFFD1\uFFFD"+" with VOD transcoding ",[C,O,P,y,v,L,W,k,$,X,x,z,G,te,ae,ze,Xe,Be,We,He,je,Ke,we,Je,Ye,Ve,Z,[3,"formGroup"],[1,"pt-two-cols","mt-5"],[1,"title-col"],[1,"inner-form-description"],[1,"content-col"],["formGroupName","live"],[1,"form-group"],["inputName","liveEnabled","formControlName","enabled"],["ptTemplate","label"],["ngProjectAs","description",5,["description"]],["ngProjectAs","extra",5,["extra"]],[1,"form-group",3,"ngClass"],["inputName","liveAllowReplay","formControlName","allowReplay","labelText",t],["formGroupName","latencySetting",1,"form-group",3,"ngClass"],["inputName","liveLatencySettingEnabled","formControlName","enabled","labelText",a],["for","liveMaxInstanceLives"],[1,"ms-2","small","muted"],[1,"number-with-unit"],["type","number","id","liveMaxInstanceLives","formControlName","maxInstanceLives"],["class","form-error","role","alert",4,"ngIf"],["for","liveMaxUserLives"],["type","number","id","liveMaxUserLives","formControlName","maxUserLives"],["for","liveMaxDuration"],["inputId","liveMaxDuration","formControlName","maxDuration",3,"items"],[1,"pt-two-cols"],["formGroupName","transcoding"],["inputName","liveTranscodingEnabled","formControlName","enabled"],[1,"callout","callout-light","pt-2","mt-2","pb-0"],[1,"callout-title"],[3,"ngClass"],["formGroupName","fps",1,"form-group"],["for","liveTranscodingFPSMax"],["type","number","name","liveTranscodingFPSMax","formControlName","max"],[1,"ms-2","mt-3"],[1,"mt-3"],["formGroupName","resolutions"],["class","form-group mb-2",4,"ngFor","ngForOf"],["inputName","liveTranscodingAlwaysTranscodeOriginalResolution","formControlName","alwaysTranscodeOriginalResolution","labelText",r],["formGroupName","remoteRunners",1,"form-group","mt-4",3,"ngClass"],["inputName","liveTranscodingRemoteRunnersEnabled","formControlName","enabled","labelText",m],["routerLink","/admin/settings/system/runners/runners-list"],["id","liveTranscodingThreadsLabel","for","liveTranscodingThreads"],[1,"small","muted","ms-1"],[4,"ngIf"],["labelId","liveTranscodingThreadsLabel","inputId","liveTranscodingThreads","formControlName","threads",3,"items","clearable"],[1,"form-group","mt-4",3,"ngClass"],["for","liveTranscodingProfile"],["inputId","liveTranscodingProfile","formControlName","profile",3,"items"],["role","alert",1,"form-error"],[1,"form-group","mb-2"],[3,"inputName","formControlName","labelText"],["ptTemplate","help"],[3,"innerHTML"]];},template:function(a,r){a&1&&(E(0,27),i(1,"div",28)(2,"div",29)(3,"h2"),c(4,0),o(),i(5,"div",30),c(6,1),o()(),i(7,"div",31),E(8,32),i(9,"div",33)(10,"my-peertube-checkbox",34),u(11,$l,2,0,"ng-template",35),E(12,36),i(13,"div"),c(14,2),o(),i(15,"div"),c(16,3),o(),T(),E(17,37),i(18,"div",38),p(19,"my-peertube-checkbox",39),o(),i(20,"div",40)(21,"my-peertube-checkbox",41),E(22,36),c(23,4),T(),o()(),i(24,"div",38)(25,"label",42),c(26,5),o(),i(27,"span",43),c(28,6),o(),i(29,"div",44),p(30,"input",45),i(31,"span"),c(32,7),o()(),u(33,xl,2,1,"div",46),o(),i(34,"div",38)(35,"label",47),c(36,8),o(),i(37,"span",43),c(38,9),o(),i(39,"div",44),p(40,"input",48),i(41,"span"),c(42,10),o()(),u(43,Gl,2,1,"div",46),o(),i(44,"div",38)(45,"label",49),c(46,11),o(),p(47,"my-select-options",50),u(48,Ul,2,1,"div",46),o(),T(),o()(),T(),o()(),i(49,"div",51)(50,"div",29)(51,"h2"),c(52,12),o(),i(53,"div",30),c(54,13),o()(),i(55,"div",31),E(56,32)(57,52),i(58,"div",38)(59,"my-peertube-checkbox",53),u(60,wl,2,0,"ng-template",35),o()(),i(61,"div",54)(62,"h3",55),c(63,14),o(),i(64,"div",56)(65,"div",57)(66,"label",58),c(67,15),o(),i(68,"span",43),c(69,16),o(),i(70,"div",44),p(71,"input",59),i(72,"span"),g(73,"FPS"),o()(),u(74,Vl,2,1,"div",46),o(),i(75,"div",60)(76,"h4"),c(77,17),o(),i(78,"div",61),E(79,62),u(80,Xl,3,4,"div",63),T(),i(81,"div",33)(82,"my-peertube-checkbox",64),E(83,36),c(84,18),T(),o()()()()()(),i(85,"div",65)(86,"my-peertube-checkbox",66),E(87,36),i(88,"span"),D(89,19),p(90,"a",67),b(),o(),T(),o()(),i(91,"div",38)(92,"label",68),c(93,20),o(),i(94,"span",69),u(95,Bl,2,2,"ng-container",70)(96,Wl,2,2,"ng-container",70),o(),p(97,"my-select-custom-value",71),u(98,Hl,2,1,"div",46),o(),i(99,"div",72)(100,"label",73),c(101,21),o(),i(102,"span",69),c(103,22),o(),p(104,"my-select-options",74),u(105,jl,2,1,"div",46),o(),T()(),o()(),T()),a&2&&(s("formGroup",r.form()),l(16),j(r.getLiveRTMPPort()),K(16),l(2),s("ngClass",r.getDisabledLiveClass()),l(2),s("ngClass",r.getDisabledLiveClass()),l(4),s("ngClass",r.getDisabledLiveClass()),l(8),j(r.form().value.live.maxInstanceLives),K(32),l(),s("ngIf",r.formErrors().live.maxInstanceLives),l(),s("ngClass",r.getDisabledLiveClass()),l(8),j(r.form().value.live.maxUserLives),K(42),l(),s("ngIf",r.formErrors().live.maxUserLives),l(),s("ngClass",r.getDisabledLiveClass()),l(3),s("items",r.liveMaxDurationOptions),l(),s("ngIf",r.formErrors().live.maxDuration),l(10),s("ngClass",r.getDisabledLiveClass()),l(6),s("ngClass",r.getDisabledLiveTranscodingClass()),l(10),s("ngIf",r.formErrors().live.transcoding.fps.max),l(6),s("ngForOf",r.liveResolutions),l(5),s("ngClass",r.getDisabledLiveTranscodingClass()),l(6),s("ngClass",r.getDisabledLiveLocalTranscodingClass()),l(4),s("ngIf",r.getTotalTranscodingThreads().atMost),l(),s("ngIf",!r.getTotalTranscodingThreads().atMost),l(),s("items",r.transcodingThreadOptions)("clearable",!1),l(),s("ngIf",r.formErrors().live.transcoding.threads),l(),s("ngClass",r.getDisabledLiveLocalTranscodingClass()),l(5),s("items",r.transcodingProfiles),l(),s("ngIf",r.formErrors().live.transcoding.profile));},dependencies:[le,$e,Tn,me,Te,Ne,Ie,xe,Dt,tt,On,pe,B,yt,Le,lt,Zt],styles:[`form[_ngcontent-%COMP%]{padding-bottom:1.5rem}my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:500px}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:90%}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]     textarea{height:300px!important}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[type=text][readonly][_ngcontent-%COMP%], input[type=number][readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[type=text][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus-visible, input[type=number][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[type=text][disabled][_ngcontent-%COMP%], input[type=number][disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%}}.number-with-unit[_ngcontent-%COMP%]{position:relative;width:fit-content}.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;top:.4em;right:3em}@media screen and (max-width: 500px){.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{display:none}}.number-with-unit[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{opacity:.8;pointer-events:none}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--fg-100)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:20px;min-width:20px;height:20px;border:2px solid var(--fg-400);border-radius:2px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:4px;left:6px;width:5px;height:7px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid var(--input-check-active-fg);border-bottom:2px solid var(--input-check-active-fg)}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:var(--input-check-active-bg);animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;background:var(--input-check-active-bg);position:absolute;left:0;transition:all .2s ease;border:2px solid var(--input-check-active-fg);border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-weight:400;cursor:pointer;display:inline;color:var(--fg-350);margin-inline-start:.5rem}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{display:flex;margin-inline-start:auto}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-inline-start:.3125rem}.inner-form-description[_ngcontent-%COMP%]{font-size:15px;margin-bottom:15px}textarea[_ngcontent-%COMP%]{max-width:100%;display:block;font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:500px;max-width:500px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}textarea[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}textarea[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}textarea[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 540px){textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{color:var(--textarea-fg)!important;background-color:var(--textarea-bg)!important;height:150px;padding:var(--textarea-y-padding) var(--textarea-x-padding)}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px;font-size:14px}.disabled-checkbox-extra[_ngcontent-%COMP%], .disabled-checkbox-extra[_ngcontent-%COMP%]     label{opacity:.5;pointer-events:none}input[disabled][_ngcontent-%COMP%]{opacity:.5}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}.submit-error[_ngcontent-%COMP%]{margin-bottom:20px}.alert-signup[_ngcontent-%COMP%]{width:fit-content;margin-top:10px}.callout-container[_ngcontent-%COMP%]{position:absolute;display:flex;height:0;width:100%;justify-content:right}my-actor-banner-edit[_ngcontent-%COMP%]{max-width:500px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem;font-size:1rem}
/*# sourceMappingURL=edit-custom-config.component-DKRYSZQC.css.map */`]}));let e=_;return e;})();function Kl(e,_){e&1&&(E(0),c(1,25),T());}function Jl(e,_){e&1&&(E(0),i(1,"p"),c(2,26),o(),T());}function Yl(e,_){e&1&&(E(0),D(1,27),p(2,"strong")(3,"p"),i(4,"ul"),p(5,"li")(6,"li")(7,"li"),o(),p(8,"p"),b(),T());}function ql(e,_){e&1&&(E(0),c(1,28),T(),p(2,"br"),E(3),c(4,29),T(),p(5,"br"),E(6),c(7,30),T());}function Ql(e,_){if(e&1&&(i(0,"div",89),g(1),o()),e&2){let n=d();l(),N(n.formErrors().transcoding.fps.max);}}function Zl(e,_){if(e&1&&p(0,"div",92),e&2){let n=d(2).$implicit;s("innerHTML",n.description,nn);}}function es(e,_){e&1&&u(0,Zl,1,1,"ng-template",56);}function ts(e,_){if(e&1&&(i(0,"div",90)(1,"my-peertube-checkbox",91),u(2,es,1,0,null,77),o()()),e&2){let n=_.$implicit,t=d();l(),Wt("labelText",n.label),s("inputName",t.getResolutionKey(n.id))("formControlName",n.id),l(),s("ngIf",n.description);}}function ns(e,_){if(e&1&&(E(0),c(1,31),T()),e&2){let n=d();l(),j(n.getTotalTranscodingThreads().value)(n.getTotalTranscodingThreads().unit),K(1);}}function os(e,_){if(e&1&&(E(0),c(1,32),T()),e&2){let n=d();l(),j(n.getTotalTranscodingThreads().value)(n.getTotalTranscodingThreads().unit),K(1);}}function is(e,_){if(e&1&&(i(0,"div",89),g(1),o()),e&2){let n=d();l(),N(n.formErrors().transcoding.threads);}}function rs(e,_){if(e&1&&(i(0,"div",89),g(1),o()),e&2){let n=d();l(),N(n.formErrors().transcoding.concurrency);}}function _s(e,_){if(e&1&&(i(0,"div",89),g(1),o()),e&2){let n=d();l(),N(n.formErrors().transcoding.profile);}}function as(e,_){e&1&&(E(0,49),i(1,"span"),c(2,33),o(),T());}var ta=(()=>{let _=class _{configService=S(pt);editConfigurationService=S(Rn);notifier=S(Y);form=q(void 0);formErrors=q(void 0);serverConfig=q(void 0);transcodingThreadOptions=[];transcodingProfiles=[];resolutions=[];additionalVideoExtensions="";ngOnInit(){this.transcodingThreadOptions=this.configService.transcodingThreadOptions,this.resolutions=this.editConfigurationService.getTranscodingResolutions(),this.checkTranscodingFields();}ngOnChanges(t){t.serverConfig&&(this.transcodingProfiles=this.buildAvailableTranscodingProfile(),this.additionalVideoExtensions=this.serverConfig().video.file.extensions.join(" "));}buildAvailableTranscodingProfile(){return this.serverConfig().transcoding.availableProfiles.map(a=>a==="default"?{id:a,label:"Default",description:"x264, targeting maximum device compatibility"}:{id:a,label:a});}getResolutionKey(t){return"transcoding.resolutions."+t;}isRemoteRunnerVODEnabled(){return this.editConfigurationService.isRemoteRunnerVODEnabled(this.form());}isTranscodingEnabled(){return this.editConfigurationService.isTranscodingEnabled(this.form());}isHLSEnabled(){return this.editConfigurationService.isHLSEnabled(this.form());}isStudioEnabled(){return this.editConfigurationService.isStudioEnabled(this.form());}getTranscodingDisabledClass(){return{"disabled-checkbox-extra":!this.isTranscodingEnabled()};}getHLSDisabledClass(){return{"disabled-checkbox-extra":!this.isHLSEnabled()};}getLocalTranscodingDisabledClass(){return{"disabled-checkbox-extra":!this.isTranscodingEnabled()||this.isRemoteRunnerVODEnabled()};}getStudioDisabledClass(){return{"disabled-checkbox-extra":!this.isStudioEnabled()};}getTotalTranscodingThreads(){return this.editConfigurationService.getTotalTranscodingThreads(this.form());}checkTranscodingFields(){let t=this.form().get("transcoding.enabled"),a=this.form().get("videoStudio.enabled"),r=this.form().get("transcoding.hls.enabled"),m=this.form().get("transcoding.webVideos.enabled");m.valueChanges.subscribe(C=>{C===!1&&r.value===!1&&(r.setValue(!0),this.notifier.info("Automatically enable HLS transcoding because at least 1 output format must be enabled when transcoding is enabled","",1e4));}),r.valueChanges.subscribe(C=>{C===!1&&m.value===!1&&(m.setValue(!0),this.notifier.info("Automatically enable Web Videos transcoding because at least 1 output format must be enabled when transcoding is enabled","",1e4));}),t.valueChanges.subscribe(C=>{C===!1&&a.setValue(!1);}),t.updateValueAndValidity(),m.updateValueAndValidity(),a.updateValueAndValidity(),r.updateValueAndValidity();}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-edit-vod-transcoding"]],inputs:{form:[1,"form"],formErrors:[1,"formErrors"],serverConfig:[1,"serverConfig"]},features:[Cn],decls:127,vars:28,consts:()=>{let t;t="Permetre mai d\u2019extensions";let a;a="Autorizar lo mandad\xEDs de fichi\xE8rs \xE0udio";let r;r="Keep a version of the input file";let m;m="Web Videos enabled";let C;C="HLS with P2P support enabled";let O;O="Split audio and video streams";let P;P="Also transcode original resolution";let y;y="Enable remote runners for VOD";let v;v="Enable video studio";let L;L="Enable remote runners for studio";let W;W=" Estimating a server's capacity to transcode and stream videos isn't easy and we can't tune PeerTube automatically. ";let k;k=" However, you may want to read "+"\uFFFD#10\uFFFD"+"our guidelines"+"\uFFFD/#10\uFFFD"+" before tweaking the following values. ";let $;$="TRANSCODING";let X;X=" Process uploaded videos so that they are in a streamable form that any device can play. Though costly in resources, this is a critical part of PeerTube, so tread carefully. ";let x;x="Input";let z;z="Allows users to upload videos with additional extensions than .mp4, .ogv and .webm (for example: .avi, .mov, .mkv etc).";let G;G="Allows users to upload .mp3, .ogg, .wma, .flac, .aac, or .ac3 audio files.";let te;te="The file will be merged in a still image video with the preview file on upload.";let ae;ae="If enabled, the input file is not deleted after transcoding but moved in a dedicated folder or object storage";let ze;ze="Output";let Xe;Xe="If enabled, remote PeerTube instances < 6.3.0 won't be able to play these videos";let Be;Be="Max video FPS";let We;We="Cap transcoded video FPS. Max resolution file still keeps the original FPS.";let He;He="Resolutions to generate";let je;je="Even if it's above your maximum enabled resolution";let Ke;Ke=" Use "+"\uFFFD#84\uFFFD"+"remote runners"+"\uFFFD/#84\uFFFD"+" to process VOD transcoding. Remote runners has to register on your instance first. ";let we;we="Transcodatge dels threads";let Je;Je="Transcoding jobs concurrency";let Ye;Ye="allows to transcode multiple files in parallel. \u26A0\uFE0F Requires a PeerTube restart";let Ve;Ve="jobs in parallel";let Z;Z="Transcoding profile";let ee;ee="new transcoding profiles can be added by PeerTube plugins";let _t;_t="VIDEO STUDIO";let U;U=" Allows your users to edit their video (cut, add intro/outro, add a watermark etc) ";let an;an=" Use "+"\uFFFD#126\uFFFD"+"remote runners"+"\uFFFD/#126\uFFFD"+" to process studio transcoding tasks. Remote runners has to register on your instance first. ";let ln;ln="Transcodatge activat";let sn;sn="If you also enabled HLS support, it will multiply videos storage by 2";let Bt;Bt=""+"\uFFFD#2\uFFFD"+"Requires ffmpeg >= 4.1"+"\uFFFD/#2\uFFFD"+""+"[\uFFFD#3\uFFFD|\uFFFD#8\uFFFD]"+"Generate HLS playlists and fragmented MP4 files resulting in a better playback than with Web Videos:"+"[\uFFFD/#3\uFFFD|\uFFFD/#8\uFFFD]"+""+"\uFFFD#4\uFFFD"+""+"[\uFFFD#5\uFFFD|\uFFFD#6\uFFFD|\uFFFD#7\uFFFD]"+"Resolution change is smoother"+"[\uFFFD/#5\uFFFD|\uFFFD/#6\uFFFD|\uFFFD/#7\uFFFD]"+""+"[\uFFFD#5\uFFFD|\uFFFD#6\uFFFD|\uFFFD#7\uFFFD]"+"Faster playback especially with long videos"+"[\uFFFD/#5\uFFFD|\uFFFD/#6\uFFFD|\uFFFD/#7\uFFFD]"+""+"[\uFFFD#5\uFFFD|\uFFFD#6\uFFFD|\uFFFD#7\uFFFD]"+"More stable playback (less bugs/infinite loading)"+"[\uFFFD/#5\uFFFD|\uFFFD/#6\uFFFD|\uFFFD/#7\uFFFD]"+""+"\uFFFD/#4\uFFFD"+""+"[\uFFFD#3\uFFFD|\uFFFD#8\uFFFD]"+"If you also enabled Web Videos support, it will multiply videos storage by 2"+"[\uFFFD/#3\uFFFD|\uFFFD/#8\uFFFD]"+"",Bt=de(Bt);let cn;cn="Store the audio stream in a separate file from the video.";let dn;dn="This option adds the ability for the HLS player to propose the \"Audio only\" quality to users.";let pn;pn="It also saves disk space by not duplicating the audio stream in each resolution file";let mn;mn=" will claim at most "+"\uFFFD0\uFFFD"+" "+"\uFFFD1\uFFFD"+" with live transcoding ";let un;un=" will claim at least "+"\uFFFD0\uFFFD"+" "+"\uFFFD1\uFFFD"+" with live transcoding ";let gn;return gn="\u26A0\uFE0F You need to enable transcoding first to enable video studio",[W,k,$,X,x,z,G,te,ae,ze,Xe,Be,We,He,je,Ke,we,Je,Ye,Ve,Z,ee,_t,U,an,ln,sn,Bt,cn,dn,pn,mn,un,gn,[3,"formGroup"],[1,"pt-two-cols","mt-4"],[1,"title-col"],[1,"content-col"],[1,"callout","callout-primary"],["target","_blank","rel","noopener noreferrer","href","https://docs.joinpeertube.org/admin/configuration#vod-transcoding",1,"link-primary"],[1,"inner-form-description"],["formGroupName","transcoding"],["inputName","transcodingEnabled","formControlName","enabled",3,"recommended"],["ptTemplate","label"],["ngProjectAs","extra",5,["extra"]],[1,"callout","callout-light","pt-2","pb-0"],[1,"callout-title"],[1,"form-group",3,"ngClass"],["inputName","transcodingAllowAdditionalExtensions","formControlName","allowAdditionalExtensions","labelText",t],["ngProjectAs","description",5,["description"]],["inputName","transcodingAllowAudioFiles","formControlName","allowAudioFiles","labelText",a],["formGroupName","originalFile",1,"form-group",3,"ngClass"],["inputName","transcodingOriginalFileKeep","formControlName","keep","labelText",r],[1,"callout","callout-light","pt-2","mt-2","pb-0"],["formGroupName","webVideos"],["inputName","transcodingWebVideosEnabled","formControlName","enabled","labelText",m],["ptTemplate","help"],["formGroupName","hls"],["inputName","transcodingHlsEnabled","formControlName","enabled","labelText",C,3,"recommended"],["inputName","transcodingHlsSplitAudioAndVideo","formControlName","splitAudioAndVideo","labelText",O],["formGroupName","fps",1,"form-group",3,"ngClass"],["for","transcodingFPSMax"],[1,"ms-2","small","muted"],[1,"number-with-unit"],["type","number","name","transcodingFPSMax","formControlName","max"],["class","form-error","role","alert",4,"ngIf"],[1,"mb-2","fw-bold"],[1,"ms-2","d-flex","flex-column"],["formGroupName","resolutions"],["class","form-group mb-2",4,"ngFor","ngForOf"],["inputName","transcodingAlwaysTranscodeOriginalResolution","formControlName","alwaysTranscodeOriginalResolution","labelText",P],["formGroupName","remoteRunners",1,"form-group","mt-4",3,"ngClass"],["inputName","transcodingRemoteRunnersEnabled","formControlName","enabled","labelText",y],["routerLink","/admin/settings/system/runners/runners-list"],[1,"form-group","mt-4",3,"ngClass"],["id","transcodingThreadsLabel","for","transcodingThreads"],[1,"small","muted","ms-1"],[4,"ngIf"],["labelId","transcodingThreadsLabel","inputId","transcodingThreads","formControlName","threads",3,"items","clearable"],["for","transcodingConcurrency"],["type","number","id","transcodingConcurrency","formControlName","concurrency"],["for","transcodingProfile"],["inputId","transcodingProfile","formControlName","profile",3,"items"],[1,"pt-two-cols","mt-2"],["formGroupName","videoStudio"],["inputName","videoStudioEnabled","formControlName","enabled","labelText",v],["ngProjectAs","description",5,["description"],4,"ngIf"],["formGroupName","remoteRunners",1,"form-group",3,"ngClass"],["inputName","videoStudioRemoteRunnersEnabled","formControlName","enabled","labelText",L],["role","alert",1,"form-error"],[1,"form-group","mb-2"],[3,"inputName","formControlName","labelText"],[3,"innerHTML"]];},template:function(a,r){a&1&&(E(0,34),i(1,"div",35),p(2,"div",36),i(3,"div",37)(4,"div",38)(5,"span"),c(6,0),o(),p(7,"br"),i(8,"span"),D(9,1),p(10,"a",39),b(),o()()()(),i(11,"div",35)(12,"div",36)(13,"h2"),c(14,2),o(),i(15,"div",40),c(16,3),o()(),i(17,"div",37),E(18,41),i(19,"div")(20,"my-peertube-checkbox",42),u(21,Kl,2,0,"ng-template",43),E(22,44),i(23,"div",45)(24,"h3",46),c(25,4),o(),i(26,"div",47)(27,"my-peertube-checkbox",48),E(28,49),i(29,"span"),c(30,5),o(),T(),o()(),i(31,"div",47)(32,"my-peertube-checkbox",50),E(33,49),i(34,"div"),c(35,6),o(),i(36,"div"),c(37,7),o(),T(),o()(),i(38,"div",51)(39,"my-peertube-checkbox",52),E(40,49),i(41,"div"),c(42,8),o(),T(),o()()(),i(43,"div",53)(44,"h3",46),c(45,9),o(),E(46,54),i(47,"div",47)(48,"my-peertube-checkbox",55),u(49,Jl,3,0,"ng-template",56),o()(),T(),E(50,57),i(51,"div",47)(52,"my-peertube-checkbox",58),u(53,Yl,9,0,"ng-template",56),E(54,44),i(55,"div",47)(56,"my-peertube-checkbox",59),E(57,49),c(58,10),T(),u(59,ql,8,0,"ng-template",56),o()(),T(),o()(),T(),i(60,"div",60)(61,"label",61),c(62,11),o(),i(63,"span",62),c(64,12),o(),i(65,"div",63),p(66,"input",64),i(67,"span"),g(68,"FPS"),o()(),u(69,Ql,2,1,"div",65),o(),i(70,"div",47)(71,"div",66),c(72,13),o(),i(73,"div",67),E(74,68),u(75,ts,3,4,"div",69),T(),i(76,"my-peertube-checkbox",70),E(77,49),c(78,14),T(),o()()()(),T(),o()(),i(79,"div",71)(80,"my-peertube-checkbox",72),E(81,49),i(82,"span"),D(83,15),p(84,"a",73),b(),o(),T(),o()(),i(85,"div",74)(86,"label",75),c(87,16),o(),i(88,"span",76),u(89,ns,2,2,"ng-container",77)(90,os,2,2,"ng-container",77),o(),p(91,"my-select-custom-value",78),u(92,is,2,1,"div",65),o(),i(93,"div",47)(94,"label",79),c(95,17),o(),i(96,"span",76),c(97,18),o(),i(98,"div",63),p(99,"input",80),i(100,"span"),c(101,19),o()(),u(102,rs,2,1,"div",65),o(),i(103,"div",47)(104,"label",81),c(105,20),o(),i(106,"span",76),c(107,21),o(),p(108,"my-select-options",82),u(109,_s,2,1,"div",65),o(),T(),o()(),i(110,"div",83)(111,"div",36)(112,"h2"),c(113,22),o(),i(114,"div",40),c(115,23),o()(),i(116,"div",37),E(117,84),i(118,"div",47)(119,"my-peertube-checkbox",85),u(120,as,3,0,"ng-container",86),o()(),i(121,"div",87)(122,"my-peertube-checkbox",88),E(123,49),i(124,"span"),D(125,24),p(126,"a",73),b(),o(),T(),o()(),T(),o()(),T()),a&2&&(s("formGroup",r.form()),l(20),s("recommended",!0),l(6),s("ngClass",r.getTranscodingDisabledClass()),l(5),s("ngClass",r.getTranscodingDisabledClass()),l(7),s("ngClass",r.getTranscodingDisabledClass()),l(9),s("ngClass",r.getTranscodingDisabledClass()),l(4),s("ngClass",r.getTranscodingDisabledClass()),l(),s("recommended",!0),l(3),s("ngClass",r.getHLSDisabledClass()),l(5),s("ngClass",r.getTranscodingDisabledClass()),l(9),s("ngIf",r.formErrors().transcoding.fps.max),l(),s("ngClass",r.getTranscodingDisabledClass()),l(5),s("ngForOf",r.resolutions),l(4),s("ngClass",r.getTranscodingDisabledClass()),l(6),s("ngClass",r.getLocalTranscodingDisabledClass()),l(4),s("ngIf",r.getTotalTranscodingThreads().atMost),l(),s("ngIf",!r.getTotalTranscodingThreads().atMost),l(),s("items",r.transcodingThreadOptions)("clearable",!1),l(),s("ngIf",r.formErrors().transcoding.threads),l(),s("ngClass",r.getLocalTranscodingDisabledClass()),l(9),s("ngIf",r.formErrors().transcoding.concurrency),l(),s("ngClass",r.getLocalTranscodingDisabledClass()),l(5),s("items",r.transcodingProfiles),l(),s("ngIf",r.formErrors().transcoding.profile),l(9),s("ngClass",r.getTranscodingDisabledClass()),l(2),s("ngIf",!r.isTranscodingEnabled()),l(),s("ngClass",r.getStudioDisabledClass()));},dependencies:[le,$e,Tn,me,Te,Ne,Ie,xe,Dt,tt,On,pe,Le,B,lt,Zt,yt],styles:[`form[_ngcontent-%COMP%]{padding-bottom:1.5rem}my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:500px}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:90%}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]     textarea{height:300px!important}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[type=text][readonly][_ngcontent-%COMP%], input[type=number][readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[type=text][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus-visible, input[type=number][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[type=text][disabled][_ngcontent-%COMP%], input[type=number][disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%}}.number-with-unit[_ngcontent-%COMP%]{position:relative;width:fit-content}.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;top:.4em;right:3em}@media screen and (max-width: 500px){.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{display:none}}.number-with-unit[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{opacity:.8;pointer-events:none}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--fg-100)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:20px;min-width:20px;height:20px;border:2px solid var(--fg-400);border-radius:2px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:4px;left:6px;width:5px;height:7px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid var(--input-check-active-fg);border-bottom:2px solid var(--input-check-active-fg)}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:var(--input-check-active-bg);animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;background:var(--input-check-active-bg);position:absolute;left:0;transition:all .2s ease;border:2px solid var(--input-check-active-fg);border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-weight:400;cursor:pointer;display:inline;color:var(--fg-350);margin-inline-start:.5rem}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{display:flex;margin-inline-start:auto}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-inline-start:.3125rem}.inner-form-description[_ngcontent-%COMP%]{font-size:15px;margin-bottom:15px}textarea[_ngcontent-%COMP%]{max-width:100%;display:block;font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:500px;max-width:500px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}textarea[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}textarea[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}textarea[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 540px){textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{color:var(--textarea-fg)!important;background-color:var(--textarea-bg)!important;height:150px;padding:var(--textarea-y-padding) var(--textarea-x-padding)}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px;font-size:14px}.disabled-checkbox-extra[_ngcontent-%COMP%], .disabled-checkbox-extra[_ngcontent-%COMP%]     label{opacity:.5;pointer-events:none}input[disabled][_ngcontent-%COMP%]{opacity:.5}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}.submit-error[_ngcontent-%COMP%]{margin-bottom:20px}.alert-signup[_ngcontent-%COMP%]{width:fit-content;margin-top:10px}.callout-container[_ngcontent-%COMP%]{position:absolute;display:flex;height:0;width:100%;justify-content:right}my-actor-banner-edit[_ngcontent-%COMP%]{max-width:500px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem;font-size:1rem}
/*# sourceMappingURL=edit-custom-config.component-DKRYSZQC.css.map */`]}));let e=_;return e;})();function ls(e,_){e&1&&(i(0,"my-alert",31),c(1,8),o());}function ss(e,_){if(e&1&&p(0,"my-edit-homepage",32),e&2){let n=d();s("form",n.form)("formErrors",n.formErrors);}}function cs(e,_){if(e&1&&p(0,"my-edit-instance-information",33),e&2){let n=d();s("form",n.form)("formErrors",n.formErrors)("languageItems",n.languageItems)("categoryItems",n.categoryItems);}}function ds(e,_){if(e&1&&p(0,"my-edit-basic-configuration",34),e&2){let n=d();s("form",n.form)("formErrors",n.formErrors)("serverConfig",n.serverConfig);}}function ps(e,_){if(e&1&&p(0,"my-edit-vod-transcoding",34),e&2){let n=d();s("form",n.form)("formErrors",n.formErrors)("serverConfig",n.serverConfig);}}function ms(e,_){if(e&1&&p(0,"my-edit-live-configuration",34),e&2){let n=d();s("form",n.form)("formErrors",n.formErrors)("serverConfig",n.serverConfig);}}function us(e,_){if(e&1&&p(0,"my-edit-advanced-configuration",32),e&2){let n=d();s("form",n.form)("formErrors",n.formErrors);}}function gs(e,_){if(e&1&&(D(0,9,1),p(1,"li"),b()),e&2){let n=_.$implicit;l(),j(n),K(0);}}function Cs(e,_){if(e&1&&(i(0,"div",35),D(1,9),i(2,"ul"),u(3,gs,2,1,"li",36),o(),b(),o()),e&2){let n=d();l(3),s("ngForOf",n.grabAllErrors());}}function Ss(e,_){e&1&&(i(0,"span",35),c(1,10),o());}function Es(e,_){e&1&&(i(0,"span"),c(1,11),o());}var na=(()=>{let _=class _ extends vt{formReactiveService=S(ft);router=S(Ze);route=S(Qe);notifier=S(Y);configService=S(pt);customPage=S(yo);serverService=S(fe);editConfigurationService=S(Rn);activeNav;customConfig;serverConfig;homepage;languageItems=[];categoryItems=[];ngOnInit(){this.serverConfig=this.serverService.getHTMLConfig();let t={instance:{name:w_,shortDescription:V_,description:null,isNSFW:!1,defaultNSFWPolicy:null,terms:null,codeOfConduct:null,creationReason:null,moderationInformation:null,administrator:null,maintenanceLifetime:null,businessModel:null,hardwareInformation:null,categories:null,languages:null,serverCountry:null,support:{text:null},social:{externalLink:Un,mastodonLink:Un,blueskyLink:Un},defaultClientRoute:null,customizations:{javascript:null,css:null}},theme:{default:null},services:{twitter:{username:k_}},client:{videos:{miniature:{preferAuthorDisplayName:null}},menu:{login:{redirectOnSingleExternalAuth:null}}},cache:{previews:{size:io},captions:{size:io},torrents:{size:io},storyboards:{size:io}},signup:{enabled:null,limit:z_,requiresApproval:null,requiresEmailVerification:null,minimumAge:X_},import:{videos:{concurrency:oi,http:{enabled:null},torrent:{enabled:null}},videoChannelSynchronization:{enabled:null,maxPerUser:J_},users:{enabled:null}},export:{users:{enabled:null,maxUserVideoQuota:q_,exportExpiration:Y_}},trending:{videos:{algorithms:{enabled:null,default:null}}},admin:{email:B_},contactForm:{enabled:null},user:{history:{videos:{enabled:null}},videoQuota:Ln,videoQuotaDaily:$n},videoChannels:{maxPerUser:K_},transcoding:{enabled:null,threads:ti,allowAdditionalExtensions:null,allowAudioFiles:null,profile:null,concurrency:oi,resolutions:{},alwaysTranscodeOriginalResolution:null,originalFile:{keep:null},hls:{enabled:null,splitAudioAndVideo:null},webVideos:{enabled:null},remoteRunners:{enabled:null},fps:{max:ni}},live:{enabled:null,maxDuration:W_,maxInstanceLives:H_,maxUserLives:j_,allowReplay:null,latencySetting:{enabled:null},transcoding:{enabled:null,threads:ti,profile:null,resolutions:{},alwaysTranscodeOriginalResolution:null,remoteRunners:{enabled:null},fps:{max:ni}}},videoStudio:{enabled:null,remoteRunners:{enabled:null}},videoTranscription:{enabled:null,remoteRunners:{enabled:null}},videoFile:{update:{enabled:null}},autoBlacklist:{videos:{ofUsers:{enabled:null}}},followers:{instance:{enabled:null,manualApproval:null}},followings:{instance:{autoFollowBack:{enabled:null},autoFollowIndex:{enabled:null,indexUrl:Un}}},broadcastMessage:{enabled:null,level:null,dismissable:null,message:null},search:{remoteUri:{users:null,anonymous:null},searchIndex:{enabled:null,url:Un,disableLocalSearch:null,isDefaultSearch:null}},instanceCustomHomepage:{content:null},storyboards:{enabled:null}},a={transcoding:{resolutions:{}},live:{transcoding:{resolutions:{}}}};for(let r of this.editConfigurationService.getTranscodingResolutions())a.transcoding.resolutions[r.id]="false",t.transcoding.resolutions[r.id]=null,a.live.transcoding.resolutions[r.id]="false",t.live.transcoding.resolutions[r.id]=null;this.buildForm(t),this.route.snapshot.fragment&&this.onNavChange(this.route.snapshot.fragment),this.loadConfigAndUpdateForm(),this.loadCategoriesAndLanguages(),this.isUpdateAllowed()||this.form.disable();}formValidated(){if(this.forceCheck(),!this.form.valid)return;let t=jr(this.customConfig,this.form.getRawValue());Dn([this.configService.updateCustomConfig(Eo(t,"instanceCustomHomepage")),this.customPage.updateInstanceHomepage(t.instanceCustomHomepage.content)]).subscribe({next:([a])=>{let r={content:t.instanceCustomHomepage.content};this.customConfig=It(gt({},a),{instanceCustomHomepage:r}),this.serverService.resetConfig().subscribe(m=>{this.serverConfig=m;}),this.updateForm(),this.notifier.success("Configuracion actualizada.");},error:a=>this.notifier.error(a.message)});}isUpdateAllowed(){return this.serverConfig.webadmin.configuration.edition.allowed===!0;}hasConsistentOptions(){return!!this.hasLiveAllowReplayConsistentOptions();}hasLiveAllowReplayConsistentOptions(){return!(this.editConfigurationService.isTranscodingEnabled(this.form)===!1&&this.editConfigurationService.isLiveEnabled(this.form)&&this.form.value.live.allowReplay===!0);}onNavChange(t){this.activeNav=t,this.router.navigate([],{fragment:this.activeNav});}grabAllErrors(){return this.formReactiveService.grabAllErrors(this.formErrors);}updateForm(){this.form.patchValue(this.customConfig);}loadConfigAndUpdateForm(){Dn([this.configService.getCustomConfig(),this.customPage.getInstanceHomepage()]).subscribe({next:([t,a])=>{this.customConfig=It(gt({},t),{instanceCustomHomepage:a}),this.updateForm(),this.markAllAsDirty();},error:t=>this.notifier.error(t.message)});}loadCategoriesAndLanguages(){Dn([this.serverService.getVideoLanguages(),this.serverService.getVideoCategories()]).subscribe({next:([t,a])=>{this.languageItems=t.map(r=>({label:r.label,id:r.id})),this.categoryItems=a.map(r=>({label:r.label,id:r.id}));},error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-edit-custom-config"]],features:[ne],decls:38,vars:8,consts:()=>{let t;t="Actualizar la configuracion";let a;a="Configuracion";let r;r="Pagina d\u2019acu\xE8lh";let m;m="Information";let C;C="Basic";let O;O="VOD Transcoding";let P;P="Live streaming";let y;y="Advanced";let v;v=" Updating instance configuration from the web interface is disabled by the system administrator.\n";let L;L=" There are errors in the form: "+"\uFFFD#2\uFFFD"+""+"\uFFFD*3:1\uFFFD\uFFFD#1:1\uFFFD"+" "+"\uFFFD0:1\uFFFD"+" "+"\uFFFD/#1:1\uFFFD\uFFFD/*3:1\uFFFD"+""+"\uFFFD/#2\uFFFD"+"";let W;W=" You cannot allow live replay if you don't enable transcoding. ";let k;return k=" You cannot change the server configuration because it's managed externally. ",[["nav","ngbNav"],a,r,m,C,O,P,y,v,L,W,k,[1,"visually-hidden"],["type","warning",4,"ngIf"],[3,"formGroup"],["ngbNav","",1,"nav-tabs",3,"activeIdChange","activeId"],["ngbNavItem","instance-homepage"],["ngbNavLink",""],["ngbNavContent",""],["ngbNavItem","instance-information"],["ngbNavItem","basic-configuration"],["ngbNavItem","transcoding"],["ngbNavItem","live"],["ngbNavItem","advanced-configuration"],[3,"ngbNavOutlet"],[1,"row","mt-4"],[1,"col-md-7","col-xl-5"],[1,"col-md-5","col-xl-5"],["role","alert","class","form-error submit-error",4,"ngIf"],[4,"ngIf"],["type","submit","value",t,1,"peertube-button","primary-button",3,"click","disabled"],["type","warning"],[3,"form","formErrors"],[3,"form","formErrors","languageItems","categoryItems"],[3,"form","formErrors","serverConfig"],["role","alert",1,"form-error","submit-error"],[4,"ngFor","ngForOf"]];},template:function(a,r){if(a&1){let m=w();i(0,"h1",12),c(1,1),o(),u(2,ls,2,0,"my-alert",13),i(3,"form",14)(4,"div",15,0),M("activeIdChange",function(O){return f(m),A(r.onNavChange(O));}),E(6,16),i(7,"a",17),c(8,2),o(),u(9,ss,1,2,"ng-template",18),T(),E(10,19),i(11,"a",17),c(12,3),o(),u(13,cs,1,4,"ng-template",18),T(),E(14,20),i(15,"a",17),c(16,4),o(),u(17,ds,1,3,"ng-template",18),T(),E(18,21),i(19,"a",17),c(20,5),o(),u(21,ps,1,3,"ng-template",18),T(),E(22,22),i(23,"a",17),c(24,6),o(),u(25,ms,1,3,"ng-template",18),T(),E(26,23),i(27,"a",17),c(28,7),o(),u(29,us,1,2,"ng-template",18),T(),o(),p(30,"div",24),i(31,"div",25),p(32,"div",26),i(33,"div",27),u(34,Cs,4,1,"div",28)(35,Ss,2,0,"span",28)(36,Es,2,0,"span",29),i(37,"input",30),M("click",function(){return f(m),A(r.formValidated());}),o()()()();}if(a&2){let m=Ot(5);l(2),s("ngIf",!r.isUpdateAllowed()),l(),s("formGroup",r.form),l(),s("activeId",r.activeNav),l(26),s("ngbNavOutlet",m),l(4),s("ngIf",!r.form.valid&&r.isUpdateAllowed()),l(),s("ngIf",!r.hasLiveAllowReplayConsistentOptions()),l(),s("ngIf",!r.isUpdateAllowed()),l(),s("disabled",!r.form.valid||!r.hasConsistentOptions()||!r.isUpdateAllowed());}},dependencies:[B,le,Mt,Te,Ne,Ie,Xr,zr,Wr,Br,kr,Q_,Z_,U_,ta,ea,G_,Hr,Le,Rt],styles:[`form[_ngcontent-%COMP%]{padding-bottom:1.5rem}my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:500px}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]{display:block;max-width:90%}.homepage[_ngcontent-%COMP%]   my-markdown-textarea[_ngcontent-%COMP%]     textarea{height:300px!important}input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=number][_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[type=text][readonly][_ngcontent-%COMP%], input[type=number][readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[type=text][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus-visible, input[type=number][_ngcontent-%COMP%]:focus, input[type=number][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[type=text][disabled][_ngcontent-%COMP%], input[type=number][disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%], input[type=number][_ngcontent-%COMP%]{width:100%}}.number-with-unit[_ngcontent-%COMP%]{position:relative;width:fit-content}.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:absolute;top:.4em;right:3em}@media screen and (max-width: 500px){.number-with-unit[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{display:none}}.number-with-unit[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{opacity:.8;pointer-events:none}input[type=checkbox][_ngcontent-%COMP%]{opacity:0;position:absolute}input[type=checkbox][_ngcontent-%COMP%]:focus + span[_ngcontent-%COMP%]{box-shadow:0 0 0 .2rem var(--fg-100)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{position:relative;width:20px;min-width:20px;height:20px;border:2px solid var(--fg-400);border-radius:2px;vertical-align:middle;cursor:pointer}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%]:after{content:"";position:absolute;top:4px;left:6px;width:5px;height:7px;opacity:0;transform:rotate(45deg) scale(0);border-right:2px solid var(--input-check-active-fg);border-bottom:2px solid var(--input-check-active-fg)}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]{background:var(--input-check-active-bg);animation:jelly .6s ease}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:before{content:"";width:100%;height:100%;background:var(--input-check-active-bg);position:absolute;left:0;transition:all .2s ease;border:2px solid var(--input-check-active-fg);border-radius:2px}input[type=checkbox][_ngcontent-%COMP%]:checked + span[_ngcontent-%COMP%]:after{opacity:1;transform:rotate(45deg) scale(1)}input[type=checkbox][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{font-weight:400;cursor:pointer;display:inline;color:var(--fg-350);margin-inline-start:.5rem}input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%], input[type=checkbox][disabled][_ngcontent-%COMP%] + span[_ngcontent-%COMP%] + span[_ngcontent-%COMP%]{opacity:.5;cursor:default}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-checkbox[_ngcontent-%COMP%], my-select-options[_ngcontent-%COMP%], my-select-custom-value[_ngcontent-%COMP%]{width:100%}}input[type=submit][_ngcontent-%COMP%]{display:flex;margin-inline-start:auto}input[type=submit][_ngcontent-%COMP%] + .form-error[_ngcontent-%COMP%]{display:inline;margin-inline-start:.3125rem}.inner-form-description[_ngcontent-%COMP%]{font-size:15px;margin-bottom:15px}textarea[_ngcontent-%COMP%]{max-width:100%;display:block;font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:500px;max-width:500px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}textarea[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}textarea[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}textarea[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 540px){textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{color:var(--textarea-fg)!important;background-color:var(--textarea-bg)!important;height:150px;padding:var(--textarea-y-padding) var(--textarea-x-padding)}textarea.small[_ngcontent-%COMP%]{height:75px}.label-small-info[_ngcontent-%COMP%]{font-style:italic;margin-bottom:10px;font-size:14px}.disabled-checkbox-extra[_ngcontent-%COMP%], .disabled-checkbox-extra[_ngcontent-%COMP%]     label{opacity:.5;pointer-events:none}input[disabled][_ngcontent-%COMP%]{opacity:.5}ngb-tabset[_ngcontent-%COMP%]:not(.previews)     .nav-link{font-size:105%}.submit-error[_ngcontent-%COMP%]{margin-bottom:20px}.alert-signup[_ngcontent-%COMP%]{width:fit-content;margin-top:10px}.callout-container[_ngcontent-%COMP%]{position:absolute;display:flex;height:0;width:100%;justify-content:right}my-actor-banner-edit[_ngcontent-%COMP%]{max-width:500px}h4[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem;font-size:1rem}
/*# sourceMappingURL=edit-custom-config.component-DKRYSZQC.css.map */`]}));let e=_;return e;})();var oa=[{path:"config",canActivate:[ye],data:{userRight:Q.MANAGE_CONFIGURATION},children:[{path:"",redirectTo:"edit-custom",pathMatch:"full"},{path:"edit-custom",component:na,data:{meta:{title:"Edit custom configuration"}}}]}];var ia=(()=>{let _=class _{};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-abuse-list"]],decls:1,vars:0,consts:[["viewType","admin"]],template:function(a,r){a&1&&p(0,"my-abuse-list-table",0);},dependencies:[E_],encapsulation:2}));let e=_;return e;})();function Ts(e,_){if(e&1){let n=w();i(0,"div",11)(1,"div",12)(2,"my-advanced-input-filter",13),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o()()();}}function Is(e,_){if(e&1&&(i(0,"tr")(1,"th",14),c(2,0),o(),i(3,"th",15),c(4,1),o(),i(5,"th",16),D(6,2),p(7,"p-sortIcon",17),b(),o()()),e&2){let n=d();l(5),s("ngbTooltip",n.sortTooltip);}}function Ns(e,_){if(e&1){let n=w();i(0,"tr")(1,"td",18)(2,"button",19),M("click",function(){let a=f(n).$implicit,r=d();return A(r.unblockAccount(a));}),c(3,3),o()(),i(4,"td")(5,"a",20)(6,"div",21),p(7,"my-actor-avatar",22),i(8,"div"),g(9),i(10,"span",23),g(11),o()()()()(),i(12,"td"),g(13),oe(14,"ptDate"),o()();}if(e&2){let n=_.$implicit;l(5),s("href",n.blockedAccount.url,ke),l(2),s("actor",n.blockedAccount),l(2),V(" ",n.blockedAccount.displayName," "),l(2),N(n.blockedAccount.nameWithHost),l(2),N(re(14,5,n.createdAt,"short"));}}function Os(e,_){e&1&&(E(0),c(1,4),T());}function Ms(e,_){e&1&&(E(0),c(1,5),T());}function fs(e,_){if(e&1&&(i(0,"tr")(1,"td",24)(2,"div",25),u(3,Os,2,0,"ng-container",26)(4,Ms,2,0,"ng-container",26),o()()()),e&2){let n=d();l(3),s("ngIf",n.search),l(),s("ngIf",!n.search);}}var ra=(()=>{let _=class _ extends T_{mode=$o.Instance;getIdentifier(){return"InstanceAccountBlocklistComponent";}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-instance-account-blocklist"]],features:[ne],decls:5,vars:11,consts:()=>{let t;t="Action";let a;a="Compte";let r;r="Mut lo\n          "+"\uFFFD#7\uFFFD"+"\n          "+"\uFFFD/#7\uFFFD"+"\n        ";let m;m="Open account in a new tab";let C;C="Restablir";let O;O="No account found matching current filters.";let P;return P="No account found.",[t,a,r,C,O,P,[3,"onLazyLoad","value","lazy","paginator","totalRecords","rows","rowsPerPageOptions","first","sortField","sortOrder","showCurrentPageReport","currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"caption"],[1,"ms-auto"],[3,"search"],["scope","col",2,"width","150px"],["scope","col"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[1,"action-cell"],[1,"peertube-button","secondary-button",3,"click"],["title",m,"target","_blank","rel","noopener noreferrer",3,"href"],[1,"chip","two-lines"],["actorType","account","size","32",3,"actor"],[1,"muted"],["myAutoColspan",""],[1,"no-results"],[4,"ngIf"]];},template:function(a,r){a&1&&(i(0,"p-table",6),M("onLazyLoad",function(C){return r.loadLazy(C);}),u(1,Ts,3,0,"ng-template",7)(2,Is,8,1,"ng-template",8)(3,Ns,15,8,"ng-template",9)(4,fs,5,2,"ng-template",10),o()),a&2&&s("value",r.blockedAccounts)("lazy",!0)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("rowsPerPageOptions",r.rowsPerPageOptions)("first",r.pagination.start)("sortField",r.sort.field)("sortOrder",r.sort.order)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate());},dependencies:[Fe,Ae,Oe,Re,Pe,Me,ot,De,Po,he,B,ve],styles:[`.moderation-expanded[_ngcontent-%COMP%]{font-size:90%;display:flex;flex-wrap:wrap;justify-content:space-between}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:end;min-width:100px;margin-inline-end:.3125rem}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:50%;max-width:500px}@media screen and (max-width: 1000px){.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.table-comment-link[_ngcontent-%COMP%], .table-account-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--fg)}.table-comment-link[_ngcontent-%COMP%]:focus:not(:focus-visible), .table-account-link[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.table-comment-link[_ngcontent-%COMP%]     p:last-child, .table-account-link[_ngcontent-%COMP%]     p:last-child{margin:0}.table-account-link[_ngcontent-%COMP%]{display:flex;flex-direction:column}my-abuse-details[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 1000px){.abuse-messages[_ngcontent-%COMP%]{justify-content:flex-start!important}}
/*# sourceMappingURL=moderation-RQPVRH5V.css.map */`]}));let e=_;return e;})();function As(e,_){if(e&1){let n=w();i(0,"div",14)(1,"div",15)(2,"button",16),M("click",function(){f(n);let a=d();return A(a.addServersToBlock());})("key.enter",function(){f(n);let a=d();return A(a.addServersToBlock());}),p(3,"my-global-icon",17),E(4),c(5,1),T(),o()(),i(6,"div",18)(7,"my-advanced-input-filter",19),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o()()();}}function Rs(e,_){if(e&1&&(i(0,"tr")(1,"th",20),c(2,2),o(),i(3,"th",21),c(4,3),o(),i(5,"th",22),D(6,4),p(7,"p-sortIcon",23),b(),o()()),e&2){let n=d();l(5),s("ngbTooltip",n.sortTooltip);}}function Ps(e,_){if(e&1){let n=w();i(0,"tr")(1,"td",24)(2,"button",25),M("click",function(){let a=f(n).$implicit,r=d();return A(r.unblockServer(a));}),c(3,5),o()(),i(4,"td")(5,"a",26),g(6),p(7,"my-global-icon",27),o()(),i(8,"td"),g(9),oe(10,"ptDate"),o()();}if(e&2){let n=_.$implicit;l(5),s("href","https://"+n.blockedServer.host,ke),l(),V(" ",n.blockedServer.host," "),l(3),N(re(10,3,n.createdAt,"short"));}}function Fs(e,_){e&1&&(E(0),c(1,6),T());}function hs(e,_){e&1&&(E(0),c(1,7),T());}function Ds(e,_){if(e&1&&(i(0,"tr")(1,"td",28)(2,"div",29),u(3,Fs,2,0,"ng-container",30)(4,hs,2,0,"ng-container",30),o()()()),e&2){let n=d();l(3),s("ngIf",n.search),l(),s("ngIf",!n.search);}}var _a=(()=>{let _=class _ extends I_{mode=$o.Instance;getIdentifier(){return"InstanceServerBlocklistComponent";}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-instance-server-blocklist"]],features:[ne],decls:7,vars:12,consts:()=>{let t;t="Mute domains";let a;a="Mute domains";let r;r="Action";let m;m="Inst\xE0ncia";let C;C="Mut lo\n          "+"\uFFFD#7\uFFFD"+"\n          "+"\uFFFD/#7\uFFFD"+"\n        ";let O;O="Open instance in a new tab";let P;P="Restablir";let y;y="No server found matching current filters.";let v;return v="No server found.",[["batchDomainsModal",""],a,r,m,C,P,y,v,[3,"onLazyLoad","value","paginator","totalRecords","rows","rowsPerPageOptions","first","sortField","sortOrder","lazy","lazyLoadOnInit","showCurrentPageReport","currentPageReportTemplate"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["action",t,3,"domains"],[1,"caption"],[1,"left-buttons"],[1,"peertube-create-button",3,"click","key.enter"],["iconName","add","aria-hidden","true"],[1,"ms-auto"],[3,"search"],["scope","col",2,"width","150px"],["scope","col"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[1,"action-cell"],[1,"peertube-button","secondary-button",3,"click"],["title",O,"target","_blank","rel","noopener noreferrer",3,"href"],["iconName","external-link"],["myAutoColspan",""],[1,"no-results"],[4,"ngIf"]];},template:function(a,r){if(a&1){let m=w();i(0,"p-table",8),M("onLazyLoad",function(O){return f(m),A(r.loadLazy(O));}),u(1,As,8,0,"ng-template",9)(2,Rs,8,1,"ng-template",10)(3,Ps,11,6,"ng-template",11)(4,Ds,5,2,"ng-template",12),o(),i(5,"my-batch-domains-modal",13,0),M("domains",function(O){return f(m),A(r.onDomainsToBlock(O));}),o();}a&2&&s("value",r.blockedServers)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("rowsPerPageOptions",r.rowsPerPageOptions)("first",r.pagination.start)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("lazyLoadOnInit",!1)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate());},dependencies:[Ue,Fe,Ae,Oe,Re,Pe,Me,ot,De,he,B,O_,ve],styles:[`a[_ngcontent-%COMP%]{color:var(--fg)}
/*# sourceMappingURL=server-blocklist.component-5QHBYIKC.css.map */`]}));let e=_;return e;})();var bs=e=>({show:e});function vs(e,_){if(e&1){let n=w();i(0,"div",18)(1,"div",19)(2,"my-advanced-input-filter",20),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o()()();}if(e&2){let n=d();l(2),s("filters",n.inputFilters);}}function ys(e,_){if(e&1&&(i(0,"tr")(1,"th",21)(2,"span",22),c(3,0),o()(),i(4,"th",23)(5,"span",22),c(6,1),o()(),i(7,"th",24),D(8,2),p(9,"p-sortIcon",25),b(),o(),i(10,"th",26),c(11,3),o(),i(12,"th",27),c(13,4),o(),i(14,"th",28),D(15,5),p(16,"p-sortIcon",29),b(),o()()),e&2){let n=d();l(7),s("ngbTooltip",n.sortTooltip),l(7),s("ngbTooltip",n.sortTooltip);}}function Ls(e,_){e&1&&(i(0,"td")(1,"span",22),c(2,6),o()());}function $s(e,_){if(e&1&&(i(0,"td",38),p(1,"my-table-expander-icon",39),o()),e&2){let n=d(),t=n.$implicit,a=n.expanded;l(),s("pRowToggler",t)("expanded",a);}}function xs(e,_){e&1&&(i(0,"span",35),c(1,7),o());}function Gs(e,_){e&1&&(i(0,"span",40),c(1,8),o());}function Us(e,_){if(e&1&&(i(0,"tr"),u(1,Ls,3,0,"td",30)(2,$s,2,2,"td",31),i(3,"td",32),p(4,"my-action-dropdown",33),o(),i(5,"td")(6,"my-video-cell",34)(7,"div"),u(8,xs,2,0,"span",35),o()()(),i(9,"td"),p(10,"my-video-nsfw-badge",36),o(),i(11,"td"),u(12,Gs,2,0,"span",37),o(),i(13,"td"),g(14),oe(15,"ptDate"),o()()),e&2){let n=_.$implicit,t=_.expanded,a=d();l(),s("ngIf",!n.reason),l(),s("ngIf",n.reason),l(2),s("ngClass",H(13,bs,t))("actions",a.videoBlocklistActions)("entry",n),l(2),s("video",n.video),l(2),ge(n.type===2?8:-1),l(2),s("video",n.video),l(2),s("ngIf",n.unfederated),l(2),V(" ",re(15,10,n.createdAt,"short")," ");}}function ws(e,_){if(e&1&&(i(0,"tr")(1,"td",41)(2,"div",42)(3,"div",43)(4,"span",44),c(5,9),o(),p(6,"span",45),o(),i(7,"div",46),p(8,"my-embed",47),o()()()()),e&2){let n=_.$implicit;l(6),s("innerHTML",n.reasonHtml,nn),l(2),s("video",n.video);}}function Vs(e,_){e&1&&(E(0),c(1,10),T());}function ks(e,_){e&1&&(E(0),c(1,11),T());}function zs(e,_){if(e&1&&(i(0,"tr")(1,"td",48)(2,"div",49),u(3,Vs,2,0,"ng-container",30)(4,ks,2,0,"ng-container",30),o()()()),e&2){let n=d();l(3),s("ngIf",n.search),l(),s("ngIf",!n.search);}}var aa=(()=>{let _=class _ extends Ge{route=S(Qe);router=S(Ze);notifier=S(Y);serverService=S(fe);confirmService=S(be);videoBlocklistService=S(wn);markdownRenderer=S(Mo);videoService=S(hn);blocklist=[];totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};blocklistTypeFilter;videoBlocklistActions=[];inputFilters=[{title:"Advanced filters",children:[{value:"type:auto",label:"Automatic blocks"},{value:"type:manual",label:"Manual blocks"}]}];constructor(){super(),this.videoBlocklistActions=[[{label:"Accions int\xE8rnas",isHeader:!0,isDisplayed:t=>t.type===go.AUTO_BEFORE_PUBLISHED},{label:"Switch video block to manual",handler:t=>{this.videoBlocklistService.unblockVideo(t.video.id).pipe(bn(a=>this.videoBlocklistService.blockVideo([{videoId:t.video.id,unfederate:!0}]))).subscribe({next:()=>{this.notifier.success("Video\n          "+t.video.name+" switched to manual block.\n        "),this.reloadData();},error:a=>this.notifier.error(a.message)});},isDisplayed:t=>t.type===go.AUTO_BEFORE_PUBLISHED}],[{label:"Accions per aquesta vid\xE8o",isHeader:!0},{label:"Desblocar",handler:t=>this.unblockVideo(t)},{label:"Delete",handler:t=>_e(this,null,function*(){(yield this.confirmService.confirm("Vol\xE8tz vertadi\xE8rament suprimir aquesta vid\xE8o\u202F?","Delete"))!==!1&&this.videoService.removeVideo(t.video.id).subscribe({next:()=>{this.notifier.success("Vid\xE8o suprimida."),this.reloadData();},error:r=>this.notifier.error(r.message)});})}]];}ngOnInit(){this.serverService.getHTMLConfig().autoBlacklist.videos.ofUsers.enabled&&(this.blocklistTypeFilter=go.MANUAL),this.initialize();}getIdentifier(){return"VideoBlockListComponent";}toHtml(t){return this.markdownRenderer.textMarkdownToHTML({markdown:t});}unblockVideo(t){return _e(this,null,function*(){let a="Do you really want to unblock this video? It will be available again in the videos list.";(yield this.confirmService.confirm(a,"Desblocar"))!==!1&&this.videoBlocklistService.unblockVideo(t.video.id).subscribe({next:()=>{this.notifier.success("Video\n          "+t.video.name+" unblocked.\n        "),this.reloadData();},error:m=>this.notifier.error(m.message)});});}getVideoEmbed(t){return qr({embedUrl:$r({url:Lr(t.video,rt.originServerUrl),title:!1,warningTitle:!1}),aspectRatio:t.video.aspectRatio,embedTitle:t.video.name});}reloadDataInternal(){this.videoBlocklistService.listBlocks({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe({next:t=>_e(this,null,function*(){this.totalRecords=t.total,this.blocklist=t.data;for(let a of this.blocklist)Object.assign(a,{reasonHtml:yield this.toHtml(a.reason)});}),error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-video-block-list"]],features:[ne],decls:6,vars:13,consts:()=>{let t;t="Mai d\u2019informacions";let a;a="Accions";let r;r="Video\n          "+"\uFFFD#9\uFFFD"+"\n          "+"\uFFFD/#9\uFFFD"+"\n        ";let m;m="Sensible";let C;C="Pas federada";let O;O="Data\n          "+"\uFFFD#16\uFFFD"+"\n          "+"\uFFFD/#16\uFFFD"+"\n        ";let P;P="Accions";let y;y="The video was blocked due to automatic blocking of new videos";let v;v="No more information is available for this row";let L;L="Auto block";let W;W="Pas federada";let k;k="Block reason:";let $;$="No blocked video found matching current filters.";let X;return X="No blocked video found.",[t,a,r,m,C,O,v,L,W,k,$,X,["dataKey","id",3,"onLazyLoad","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","lazyLoadOnInit","showCurrentPageReport","currentPageReportTemplate","expandedRowKeys"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[1,"caption"],[1,"ms-auto"],[3,"search","filters"],["scope","col",2,"width","40px"],[1,"visually-hidden"],["scope","col",2,"width","150px"],["scope","col","container","body","pSortableColumn","name",3,"ngbTooltip"],["field","name"],["scope","col",2,"width","100px"],["scope","col",2,"width","120px"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[4,"ngIf"],["class","expand-cell",4,"ngIf"],[1,"action-cell"],["placement","bottom-right auto","container","body","label",P,"buttonSize","small",3,"ngClass","actions","entry"],["size","small",3,"video"],["title",y,1,"pt-badge","badge-info","badge-small"],["theme","red",3,"video"],["class","pt-badge badge-blue",4,"ngIf"],[1,"expand-cell"],[3,"pRowToggler","expanded"],[1,"pt-badge","badge-blue"],["myAutoColspan","",1,"expand-cell"],[1,"d-flex","moderation-expanded"],[1,"left"],[1,"moderation-expanded-label"],[1,"moderation-expanded-text",3,"innerHTML"],[1,"right"],[3,"video"],["myAutoColspan",""],[1,"no-results"]];},template:function(a,r){a&1&&(i(0,"p-table",12),M("onLazyLoad",function(C){return r.loadLazy(C);}),u(1,vs,3,1,"ng-template",13)(2,ys,17,2,"ng-template",14)(3,Us,16,15,"ng-template",15)(4,ws,9,2,"ng-template",16)(5,zs,5,2,"ng-template",17),o()),a&2&&s("value",r.blocklist)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("lazyLoadOnInit",!1)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate())("expandedRowKeys",r.expandedRows);},dependencies:[Fe,Ae,Oe,Re,Pt,Pe,Me,ot,De,B,Ft,nt,pe,Uo,he,Go,ve,wo],styles:[`.moderation-expanded[_ngcontent-%COMP%]{font-size:90%;display:flex;flex-wrap:wrap;justify-content:space-between}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:end;min-width:100px;margin-inline-end:.3125rem}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:50%;max-width:500px}@media screen and (max-width: 1000px){.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.table-comment-link[_ngcontent-%COMP%], .table-account-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--fg)}.table-comment-link[_ngcontent-%COMP%]:focus:not(:focus-visible), .table-account-link[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.table-comment-link[_ngcontent-%COMP%]     p:last-child, .table-account-link[_ngcontent-%COMP%]     p:last-child{margin:0}.table-account-link[_ngcontent-%COMP%]{display:flex;flex-direction:column}my-abuse-details[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 1000px){.abuse-messages[_ngcontent-%COMP%]{justify-content:flex-start!important}}
/*# sourceMappingURL=moderation-RQPVRH5V.css.map */`]}));let e=_;return e;})();var Ut=class Ut{authHttp=S(at);restExtractor=S(dt);restService=S(bt);listRegistrations(_){let{pagination:n,sort:t,search:a}=_,r=Ut.BASE_REGISTRATION_URL,m=new Et();return m=this.restService.addRestGetParams(m,n,t),a&&(m=m.append("search",a)),this.authHttp.get(r,{params:m}).pipe(ce(C=>this.restExtractor.handleError(C)));}acceptRegistration(_){let{registration:n,moderationResponse:t,preventEmailDelivery:a}=_,r=Ut.BASE_REGISTRATION_URL+"/"+n.id+"/accept",m={moderationResponse:t,preventEmailDelivery:a};return this.authHttp.post(r,m).pipe(ce(C=>this.restExtractor.handleError(C)));}rejectRegistration(_){let{registration:n,moderationResponse:t,preventEmailDelivery:a}=_,r=Ut.BASE_REGISTRATION_URL+"/"+n.id+"/reject",m={moderationResponse:t,preventEmailDelivery:a};return this.authHttp.post(r,m).pipe(ce(C=>this.restExtractor.handleError(C)));}removeRegistrations(_){let n=no(_);return Yn(n).pipe(Qn(t=>this.authHttp.delete(Ut.BASE_REGISTRATION_URL+"/"+t.id)),qn(),ce(t=>this.restExtractor.handleError(t)));}};I(Ut,"BASE_REGISTRATION_URL",rt.apiUrl+"/api/v1/users/registrations"),I(Ut,"\u0275fac",function(n){return new(n||Ut)();}),I(Ut,"\u0275prov",qe({token:Ut,factory:Ut.ɵfac}));var Pn=Ut;var la={VALIDATORS:[ie.required,ie.minLength(2),ie.maxLength(3e3)],MESSAGES:{required:"Moderation response is required.",minlength:"Moderation response must be at least 2 characters long.",maxlength:"Moderation response cannot be more than 3000 characters long."}};var Xs=["modal"],Bs=e=>({"input-error":e}),sa=e=>({"text-decoration-line-through":e});function Ws(e,_){if(e&1&&(D(0,1,1),Jo(1),b()),e&2){let n=d(2);l(),j(n.registration.username),K(0);}}function Hs(e,_){if(e&1&&(D(0,1,2),Jo(1),b()),e&2){let n=d(2);l(),j(n.registration.username),K(0);}}function js(e,_){e&1&&(i(0,"my-alert",26),c(1,3),o());}function Ks(e,_){if(e&1&&(i(0,"p",28),D(1,5),p(2,"em"),b(),o()),e&2){let n=d(3);s("ngClass",H(2,sa,n.isPreventEmailDeliveryChecked())),l(2),j(n.registration.email),K(1);}}function Js(e,_){if(e&1&&(i(0,"my-alert",26),D(1,6),p(2,"em"),b(),o()),e&2){let n=d(3);l(2),j(n.registration.email),K(1);}}function Ys(e,_){if(e&1&&(E(0),i(1,"p"),D(2,4),p(3,"strong")(4,"em"),b(),o(),u(5,Ks,3,4,"p",27)(6,Js,3,1,"my-alert",16),T()),e&2){let n=d(2);l(4),j(n.registration.username),K(2),l(),s("ngIf",n.isEmailEnabled()),l(),s("ngIf",!n.isEmailEnabled());}}function qs(e,_){if(e&1&&(i(0,"my-alert",26),D(1,8),p(2,"em"),b(),o()),e&2){let n=d(3);l(2),j(n.registration.email),K(1);}}function Qs(e,_){if(e&1&&(E(0),i(1,"p",28),D(2,7),p(3,"em")(4,"strong"),b(),o(),u(5,qs,3,1,"my-alert",16),T()),e&2){let n=d(2);l(),s("ngClass",H(3,sa,n.isPreventEmailDeliveryChecked())),l(3),j(n.registration.email),K(2),l(),s("ngIf",!n.isEmailEnabled());}}function Zs(e,_){if(e&1&&(i(0,"div",29),g(1),o()),e&2){let n=d(2);l(),V(" ",n.formErrors.moderationResponse," ");}}function ec(e,_){if(e&1){let n=w();i(0,"div",9)(1,"h4",10),D(2,1),u(3,Ws,2,1,"ng-container",11)(4,Hs,2,1,"ng-container",11),b(),o(),i(5,"button",12),M("click",function(){f(n);let a=d();return A(a.hide());}),p(6,"my-global-icon",13),o()(),i(7,"form",14),M("ngSubmit",function(){f(n);let a=d();return A(a.processRegistration());}),i(8,"div",15),u(9,js,2,0,"my-alert",16),i(10,"div",17),u(11,Ys,7,3,"ng-container",11)(12,Qs,6,5,"ng-container",11),o(),i(13,"div",18)(14,"label",19),c(15,2),o(),p(16,"textarea",20),u(17,Zs,2,1,"div",21),o(),i(18,"div",18),p(19,"my-peertube-checkbox",22),o()(),i(20,"div",23)(21,"input",24),M("click",function(){f(n);let a=d();return A(a.hide());})("key.enter",function(){f(n);let a=d();return A(a.hide());}),o(),p(22,"input",25),o()();}if(e&2){let n=d();l(3),s("ngIf",n.isAccept()),l(),s("ngIf",n.isReject()),l(3),s("formGroup",n.form),l(2),s("ngIf",!n.registration.emailVerified),l(2),s("ngIf",n.isAccept()),l(),s("ngIf",n.isReject()),l(4),s("ngClass",H(11,Bs,n.formErrors.moderationResponse)),l(),s("ngIf",n.formErrors.moderationResponse),l(2),s("disabled",!n.isEmailEnabled()),l(3),s("value",n.getSubmitValue())("disabled",!n.form.valid);}}var ca=(()=>{let _=class _ extends vt{formReactiveService=S(ft);server=S(fe);modalService=S(So);notifier=S(Y);registrationService=S(Pn);modal=Ct("modal");registrationProcessed=co();registration;openedModal;processMode;ngOnInit(){this.buildForm({moderationResponse:la,preventEmailDelivery:null});}isAccept(){return this.processMode==="accept";}isReject(){return this.processMode==="reject";}openModal(t,a){this.processMode=a,this.registration=t,this.form.patchValue({preventEmailDelivery:!this.isEmailEnabled()||t.emailVerified!==!0}),this.openedModal=this.modalService.open(this.modal(),{centered:!0});}hide(){this.form.reset(),this.openedModal.close();}getSubmitValue(){return this.isAccept()?"Accept registration":"Reject registration";}processRegistration(){return this.isAccept()?this.acceptRegistration():this.rejectRegistration();}isEmailEnabled(){return this.server.getHTMLConfig().email.enabled;}isPreventEmailDeliveryChecked(){return this.form.value.preventEmailDelivery;}acceptRegistration(){this.registrationService.acceptRegistration({registration:this.registration,moderationResponse:this.form.value.moderationResponse,preventEmailDelivery:this.form.value.preventEmailDelivery}).subscribe({next:()=>{this.notifier.success(""+this.registration.username+" account created"),this.registrationProcessed.emit(),this.hide();},error:t=>this.notifier.error(t.message)});}rejectRegistration(){this.registrationService.rejectRegistration({registration:this.registration,moderationResponse:this.form.value.moderationResponse,preventEmailDelivery:this.form.value.preventEmailDelivery}).subscribe({next:()=>{this.notifier.success(""+this.registration.username+" registration rejected"),this.registrationProcessed.emit(),this.hide();},error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-process-registration-modal"]],viewQuery:function(a,r){a&1&&St(r.modal,Xs,5),a&2&&Nt();},outputs:{registrationProcessed:"registrationProcessed"},features:[ne],decls:2,vars:0,consts:()=>{let t;t="Close this modal";let a;a="Prevent email from being sent to the user";let r;r="Anullar";let m;m=""+"\uFFFD*3:1\uFFFD\uFFFD#1:1\uFFFD"+"Accept "+"[\uFFFD0:1\uFFFD|\uFFFD0:2\uFFFD]"+" registration"+"[\uFFFD/#1:1\uFFFD\uFFFD/*3:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*4:2\uFFFD]"+""+"\uFFFD*4:2\uFFFD\uFFFD#1:2\uFFFD"+"Reject "+"[\uFFFD0:1\uFFFD|\uFFFD0:2\uFFFD]"+" registration"+"[\uFFFD/#1:1\uFFFD\uFFFD/*3:1\uFFFD|\uFFFD/#1:2\uFFFD\uFFFD/*4:2\uFFFD]"+"",m=de(m);let C;C="Send a message to the user";let O;O=" Registration email has not been verified. Email delivery has been disabled by default. ";let P;P=""+"\uFFFD#3\uFFFD"+"Accepting"+"\uFFFD/#3\uFFFD"+"\xA0"+"\uFFFD#4\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#4\uFFFD"+" registration will create the account and channel. ";let y;y=" An email will be sent to "+"\uFFFD#2\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#2\uFFFD"+" explaining its account has been created with the moderation response you'll write below. ";let v;v=" Emails are not enabled on this instance so PeerTube won't be able to send an email to "+"\uFFFD#2\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#2\uFFFD"+" explaining its account has been created. ";let L;L=" An email will be sent to "+"\uFFFD#3\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#3\uFFFD"+" explaining its registration request has been "+"\uFFFD#4\uFFFD"+"rejected"+"\uFFFD/#4\uFFFD"+" with the moderation response you'll write below. ";let W;return W=" Emails are not enabled on this instance so PeerTube won't be able to send an email to "+"\uFFFD#2\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#2\uFFFD"+" explaining its registration request has been rejected. ",[["modal",""],m,C,O,P,y,v,L,W,[1,"modal-header"],[1,"modal-title"],[4,"ngIf"],["title",t,1,"border-0","p-0",3,"click"],["iconName","cross"],["novalidate","",3,"ngSubmit","formGroup"],[1,"modal-body","mb-3"],["type","warning",4,"ngIf"],[1,"description"],[1,"form-group"],["for","moderationResponse"],["formControlName","moderationResponse","ngbAutofocus","","name","moderationResponse","id","moderationResponse",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["inputName","preventEmailDelivery","formControlName","preventEmailDelivery","labelText",a,3,"disabled"],[1,"modal-footer","inputs"],["type","button","role","button","value",r,1,"peertube-button","secondary-button",3,"click","key.enter"],["type","submit",1,"peertube-button","primary-button",3,"value","disabled"],["type","warning"],[3,"ngClass",4,"ngIf"],[3,"ngClass"],["role","alert",1,"form-error"]];},template:function(a,r){a&1&&u(0,ec,23,13,"ng-template",null,0,En);},dependencies:[B,Ue,le,Mt,$e,me,Te,Ne,Ie,xe,pe,tt,Rt],encapsulation:2}));let e=_;return e;})();function tc(e,_){if(e&1&&g(0),e&2){let n=d(2);V(" \u2713 ",n.entry().email," ");}}function nc(e,_){if(e&1&&(i(0,"em"),g(1),o()),e&2){let n=d(3);l(),V("? ",n.entry().email,"");}}function oc(e,_){if(e&1&&u(0,nc,2,1,"em",1),e&2){let n=d(2);s("ngIf",!n.entry().emailVerified);}}function ic(e,_){if(e&1&&u(0,tc,1,1)(1,oc,1,1,"em"),e&2){let n=d();ge(n.entry().emailVerified===!0?0:1);}}function rc(e,_){if(e&1&&g(0),e&2){let n=d();V(" ",n.entry().email," ");}}var zo=(()=>{let _=class _{entry=q(void 0);showEmailVerifyInformation=q(void 0,{transform:po});getTitle(){return this.entry().emailVerified?"User email has been verified":"User email hasn't been verified";}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-user-email-info"]],inputs:{entry:[1,"entry"],showEmailVerifyInformation:[1,"showEmailVerifyInformation"]},decls:4,vars:3,consts:[[3,"href","title"],[4,"ngIf"]],template:function(a,r){a&1&&(E(0),i(1,"a",0),u(2,ic,2,1)(3,rc,1,1),o(),T()),a&2&&(l(),s("href","mailto:"+r.entry().email,ke)("title",r.getTitle()),l(),ge(r.showEmailVerifyInformation()?2:3));},dependencies:[B],styles:[`a[_ngcontent-%COMP%]{color:var(--fg)}a[_ngcontent-%COMP%]:hover{text-decoration:underline}
/*# sourceMappingURL=user-email-info.component-7UPP3U6J.css.map */`]}));let e=_;return e;})();var _c=["processRegistrationModal"],ac=e=>({show:e});function lc(e,_){if(e&1&&p(0,"my-action-dropdown",26),e&2){let n=d(2);s("actions",n.bulkActions)("entry",n.selectedRows);}}function sc(e,_){if(e&1){let n=w();i(0,"div",21)(1,"div",22),u(2,lc,1,2,"my-action-dropdown",23),o(),i(3,"div",24)(4,"my-advanced-input-filter",25),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o()()();}if(e&2){let n=d();l(2),s("ngIf",n.isInSelectionMode());}}function cc(e,_){if(e&1&&(i(0,"tr")(1,"th",27),p(2,"p-tableHeaderCheckbox",28),o(),i(3,"th",27)(4,"span",29),c(5,1),o()(),i(6,"th",30)(7,"span",29),c(8,2),o()(),i(9,"th",31),c(10,3),o(),i(11,"th",31),c(12,4),o(),i(13,"th",31),c(14,5),o(),i(15,"th",31),c(16,6),o(),i(17,"th",32),D(18,7),p(19,"p-sortIcon",33),b(),o(),i(20,"th",31),c(21,8),o(),i(22,"th",34),D(23,9),p(24,"p-sortIcon",35),b(),o()()),e&2){let n=d();l(17),s("ngbTooltip",n.sortTooltip),l(5),s("ngbTooltip",n.sortTooltip);}}function dc(e,_){if(e&1&&(i(0,"div",51),p(1,"my-global-icon",52),o()),e&2){let n=d().$implicit;s("title",n.state.label);}}function pc(e,_){if(e&1&&(i(0,"div",53),p(1,"my-global-icon",54),o()),e&2){let n=d().$implicit;s("title",n.state.label);}}function mc(e,_){if(e&1&&(i(0,"tr",36)(1,"td",37),p(2,"p-tableCheckbox",38),o(),i(3,"td",39),p(4,"my-table-expander-icon",40),o(),i(5,"td",41),p(6,"my-action-dropdown",42),o(),i(7,"td")(8,"div",43)(9,"div")(10,"span"),g(11),o(),i(12,"span",44),g(13),o()()()(),i(14,"td"),p(15,"my-user-email-info",45),o(),i(16,"td")(17,"div",43)(18,"div")(19,"span"),g(20),o(),i(21,"span",44),g(22),o()()()(),i(23,"td",46),g(24),o(),i(25,"td",47),u(26,dc,2,1,"div",48)(27,pc,2,1,"div",49),o(),i(28,"td",46),g(29),o(),i(30,"td",50),g(31),oe(32,"ptDate"),o()()),e&2){let n=_.expanded,t=_.$implicit,a=d();s("pSelectableRow",t),l(2),s("value",t),l(2),s("pRowToggler",t)("expanded",n),l(2),s("ngClass",H(25,ac,n))("actions",a.registrationActions)("entry",t),l(5),N(t.username),l(2),N(t.accountDisplayName),l(2),s("entry",t)("showEmailVerifyInformation",a.requiresEmailVerification),l(5),N(t.channelHandle),l(2),N(t.channelDisplayName),l(),s("ngbTooltip",t.registrationReason),l(),V(" ",t.registrationReason," "),l(),s("pRowToggler",t),l(),s("ngIf",a.isRegistrationAccepted(t)),l(),s("ngIf",a.isRegistrationRejected(t)),l(),s("ngbTooltip",t.moderationResponse),l(),V(" ",t.moderationResponse," "),l(),s("pRowToggler",t),l(),N(re(32,22,t.createdAt,"short"));}}function uc(e,_){if(e&1&&(i(0,"div")(1,"span",59),c(2,11),o(),p(3,"span",60),o()),e&2){let n=d().$implicit;l(3),s("innerHTML",n.moderationResponseHTML,nn);}}function gc(e,_){if(e&1&&(i(0,"tr")(1,"td",55)(2,"div",56)(3,"div",57)(4,"div",58)(5,"span",59),c(6,10),o(),p(7,"span",60),o(),u(8,uc,4,1,"div",61),o()()()()),e&2){let n=_.$implicit;l(7),s("innerHTML",n.registrationReasonHTML,nn),l(),s("ngIf",n.moderationResponse);}}function Cc(e,_){e&1&&(E(0),c(1,12),T());}function Sc(e,_){e&1&&(E(0),c(1,13),T());}function Ec(e,_){if(e&1&&(i(0,"tr")(1,"td",55)(2,"div",62),u(3,Cc,2,0,"ng-container",61)(4,Sc,2,0,"ng-container",61),o()()()),e&2){let n=d();l(3),s("ngIf",n.search),l(),s("ngIf",!n.search);}}var da=(()=>{let _=class _ extends Ge{route=S(Qe);router=S(Ze);server=S(fe);notifier=S(Y);markdownRenderer=S(Mo);confirmService=S(be);adminRegistrationService=S(Pn);processRegistrationModal=Ct("processRegistrationModal");registrations=[];totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};registrationActions=[];bulkActions=[];inputFilters=[];requiresEmailVerification;constructor(){super(),this.registrationActions=[[{label:"Accept this request",handler:t=>this.openRegistrationRequestProcessModal(t,"accept"),isDisplayed:t=>t.state.id===Zn.PENDING},{label:"Reject this request",handler:t=>this.openRegistrationRequestProcessModal(t,"reject"),isDisplayed:t=>t.state.id===Zn.PENDING},{label:"Remove this request",description:"Remove the request from the list. The user can register again.",handler:t=>this.removeRegistrations([t])}]],this.bulkActions=[{label:"Delete",handler:t=>this.removeRegistrations(t)}];}ngOnInit(){this.initialize(),this.server.getConfig().subscribe(t=>{this.requiresEmailVerification=t.signup.requiresEmailVerification;});}getIdentifier(){return"RegistrationListComponent";}isRegistrationAccepted(t){return t.state.id===Zn.ACCEPTED;}isRegistrationRejected(t){return t.state.id===Zn.REJECTED;}onRegistrationProcessed(){this.reloadData();}reloadDataInternal(){this.adminRegistrationService.listRegistrations({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe({next:t=>_e(this,null,function*(){this.totalRecords=t.total,this.registrations=t.data;for(let a of this.registrations)a.registrationReasonHTML=yield this.toHtml(a.registrationReason),a.moderationResponseHTML=yield this.toHtml(a.moderationResponse);}),error:t=>this.notifier.error(t.message)});}openRegistrationRequestProcessModal(t,a){this.processRegistrationModal().openModal(t,a);}removeRegistrations(t){return _e(this,null,function*(){let a={count:t.length,username:t[0].username},r=se("Do you really want to delete {count, plural, =1 {{username} registration request?} other {{count} registration requests?}}",a);(yield this.confirmService.confirm(r,"Delete"))!==!1&&this.adminRegistrationService.removeRegistrations(t).subscribe({next:()=>{let C=se("Removed {count, plural, =1 {{username} registration request} other {{count} registration requests}}",a);this.notifier.success(C),this.reloadData();},error:C=>this.notifier.error(C.message)});});}toHtml(t){return this.markdownRenderer.textMarkdownToHTML({markdown:t});}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-registration-list"]],viewQuery:function(a,r){a&1&&St(r.processRegistrationModal,_c,5),a&2&&Nt();},features:[ne],decls:8,vars:14,consts:()=>{let t;t="Accions Batch";let a;a="Select all rows";let r;r="Mai d\u2019informacions";let m;m="Accions";let C;C="Compte";let O;O="Corri\xE8l";let P;P="Cadena";let y;y="Registration reason";let v;v="Estat\n          "+"\uFFFD#19\uFFFD"+"\n          "+"\uFFFD/#19\uFFFD"+"\n        ";let L;L="Moderation response";let W;W="Requested on "+"\uFFFD#24\uFFFD"+""+"\uFFFD/#24\uFFFD"+"";let k;k="Select this row";let $;$="Accions";let X;X="Registration reason:";let x;x="Moderation response:";let z;z="No registrations found matching current filters.";let G;return G="No registrations found.",[["processRegistrationModal",""],r,m,C,O,P,y,v,L,W,X,x,z,G,["dataKey","id",3,"onLazyLoad","selectionChange","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","lazyLoadOnInit","selection","showCurrentPageReport","currentPageReportTemplate","expandedRowKeys"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],[3,"registrationProcessed"],[1,"caption"],[1,"left-buttons"],["label",t,"theme","primary",3,"actions","entry",4,"ngIf"],[1,"ms-auto"],[3,"search"],["label",t,"theme","primary",3,"actions","entry"],["scope","col",2,"width","40px"],["ariaLabel",a],[1,"visually-hidden"],["scope","col",2,"width","150px"],["scope","col"],["scope","col","container","body","pSortableColumn","state",2,"width","80px",3,"ngbTooltip"],["field","state"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[3,"pSelectableRow"],[1,"checkbox-cell"],["ariaLabel",k,3,"value"],[1,"expand-cell"],[3,"pRowToggler","expanded"],[1,"action-cell"],["placement","bottom-right top-right left auto","container","body","label",$,"buttonSize","small",3,"ngClass","actions","entry"],[1,"chip","two-lines"],[1,"muted"],[3,"entry","showEmailVerifyInformation"],["container","body","placement","left auto",3,"ngbTooltip"],[1,"c-hand","abuse-states",3,"pRowToggler"],["class","pt-badge badge-success",3,"title",4,"ngIf"],["class","pt-badge badge-danger",3,"title",4,"ngIf"],[1,"c-hand",3,"pRowToggler"],[1,"pt-badge","badge-success",3,"title"],["iconName","tick"],[1,"pt-badge","badge-danger",3,"title"],["iconName","cross"],["myAutoColspan",""],[1,"moderation-expanded"],[1,"left"],[1,"d-flex"],[1,"moderation-expanded-label"],[1,"moderation-expanded-text",3,"innerHTML"],[4,"ngIf"],[1,"no-results"]];},template:function(a,r){if(a&1){let m=w();i(0,"p-table",14),M("onLazyLoad",function(O){return f(m),A(r.loadLazy(O));}),Ee("selectionChange",function(O){return f(m),Se(r.selectedRows,O)||(r.selectedRows=O),A(O);}),u(1,sc,5,1,"ng-template",15)(2,cc,25,2,"ng-template",16)(3,mc,33,27,"ng-template",17)(4,gc,9,2,"ng-template",18)(5,Ec,5,2,"ng-template",19),o(),i(6,"my-process-registration-modal",20,0),M("registrationProcessed",function(){return f(m),A(r.onRegistrationProcessed());}),o();}a&2&&(s("value",r.registrations)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("lazyLoadOnInit",!1),Ce("selection",r.selectedRows),s("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate())("expandedRowKeys",r.expandedRows));},dependencies:[Ue,Fe,Ae,Oe,Re,Qt,Pt,Pe,Lt,$t,Me,B,nt,ot,De,Ft,pe,zo,he,ca,ve],styles:[`.moderation-expanded[_ngcontent-%COMP%]{font-size:90%;display:flex;flex-wrap:wrap;justify-content:space-between}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-label[_ngcontent-%COMP%]{font-weight:600;display:inline-block;vertical-align:top;text-align:end;min-width:100px;margin-inline-end:.3125rem}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]{display:inline-flex;word-wrap:break-word}.moderation-expanded[_ngcontent-%COMP%]   .moderation-expanded-text[_ngcontent-%COMP%]     p:last-child{margin-bottom:0!important}.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:50%;max-width:500px}@media screen and (max-width: 1000px){.moderation-expanded[_ngcontent-%COMP%]   .right[_ngcontent-%COMP%]{width:100%}}my-action-dropdown.show[_ngcontent-%COMP%]     .dropdown-root{display:block!important}.table-comment-link[_ngcontent-%COMP%], .table-account-link[_ngcontent-%COMP%]{text-decoration:none;color:var(--fg)}.table-comment-link[_ngcontent-%COMP%]:focus:not(:focus-visible), .table-account-link[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none!important}.table-comment-link[_ngcontent-%COMP%]     p:last-child, .table-account-link[_ngcontent-%COMP%]     p:last-child{margin:0}.table-account-link[_ngcontent-%COMP%]{display:flex;flex-direction:column}my-abuse-details[_ngcontent-%COMP%]{width:100%}@media screen and (max-width: 1000px){.abuse-messages[_ngcontent-%COMP%]{justify-content:flex-start!important}}
/*# sourceMappingURL=moderation-RQPVRH5V.css.map */`,`my-global-icon[_ngcontent-%COMP%]{width:24px;height:24px}
/*# sourceMappingURL=registration-list.component-IZ4IKGRN.css.map */`]}));let e=_;return e;})();var pa=(()=>{let _=class _{};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["ng-component"]],decls:5,vars:0,consts:()=>{let t;t="Video name/description and comments that contain any of the watched words are automatically tagged with the name of the list.";let a;return a="These automatic tags can be used to filter comments and videos.",[t,a,[1,"d-block"],[1,"d-block","mb-3"],["mode","admin"]];},template:function(a,r){a&1&&(i(0,"em",2),c(1,0),o(),i(2,"em",3),c(3,1),o(),p(4,"my-watched-words-list-admin-owner",4));},dependencies:[f_],encapsulation:2}));let e=_;return e;})();var ii=[{path:"moderation",children:[{path:"",redirectTo:"abuses/list",pathMatch:"full"},{path:"video-abuses",redirectTo:"abuses/list",pathMatch:"full"},{path:"video-abuses/list",redirectTo:"abuses/list",pathMatch:"full"},{path:"abuses/list",component:ia,canActivate:[ye],data:{userRight:Q.MANAGE_ABUSES,meta:{title:"Reports"}}},{path:"video-blacklist",redirectTo:"video-blocks/list",pathMatch:"full"},{path:"video-auto-blacklist",redirectTo:"video-blocks/list",pathMatch:"full"},{path:"video-auto-blacklist/list",redirectTo:"video-blocks/list",pathMatch:"full"},{path:"video-blacklist",redirectTo:"video-blocks/list",pathMatch:"full"},{path:"video-blocks/list",component:aa,canActivate:[ye],data:{userRight:Q.MANAGE_VIDEO_BLACKLIST,meta:{title:"Blocked videos"}}},{path:"registrations/list",component:da,canActivate:[ye],data:{userRight:Q.MANAGE_REGISTRATIONS,meta:{title:"User registrations"}}},{path:"video-comments",redirectTo:"video-comments/list",pathMatch:"full"},{path:"video-comments/list",redirectTo:"/admin/overview/comments/list",pathMatch:"full"},{path:"blocklist/accounts",component:ra,canActivate:[ye],data:{userRight:Q.MANAGE_ACCOUNTS_BLOCKLIST,meta:{title:"Comptes muts"}}},{path:"blocklist/servers",component:_a,canActivate:[ye],data:{userRight:Q.MANAGE_SERVERS_BLOCKLIST,meta:{title:"Muted platforms"}}},{path:"watched-words/list",component:pa,canActivate:[ye],data:{userRight:Q.MANAGE_INSTANCE_WATCHED_WORDS,meta:{title:"Watched words"}}}]}];var mt=class mt{authHttp=S(at);restExtractor=S(dt);restService=S(bt);pluginService=S(Yt);getPluginTypeLabel(_){return _===st.PLUGIN?"extension":"t\xE8ma";}getPlugins(_,n,t){let a=this.restService.componentToRestPagination(n),r=new Et();return r=this.restService.addRestGetParams(r,a,t),r=r.append("pluginType",_.toString()),this.authHttp.get(mt.BASE_PLUGIN_URL,{params:r}).pipe(ce(m=>this.restExtractor.handleError(m)));}searchAvailablePlugins(_,n,t,a){let r=this.restService.componentToRestPagination(n),m=new Et();return m=this.restService.addRestGetParams(m,r,t),m=m.append("pluginType",_.toString()),a&&(m=m.append("search",a)),this.authHttp.get(mt.BASE_PLUGIN_URL+"/available",{params:m}).pipe(ce(C=>this.restExtractor.handleError(C)));}getPlugin(_){let n=mt.BASE_PLUGIN_URL+"/"+_;return this.authHttp.get(n).pipe(ce(t=>this.restExtractor.handleError(t)));}getPluginRegisteredSettings(_,n){let t=this.pluginService.nameToNpmName(_,n),a=mt.BASE_PLUGIN_URL+"/"+t+"/registered-settings";return this.authHttp.get(a).pipe(ce(r=>this.restExtractor.handleError(r)));}updatePluginSettings(_,n,t){let a=this.pluginService.nameToNpmName(_,n),r=mt.BASE_PLUGIN_URL+"/"+a+"/settings";return this.authHttp.put(r,{settings:t}).pipe(ce(m=>this.restExtractor.handleError(m)));}uninstall(_,n){let t={npmName:this.pluginService.nameToNpmName(_,n)};return this.authHttp.post(mt.BASE_PLUGIN_URL+"/uninstall",t).pipe(ce(a=>this.restExtractor.handleError(a)));}update(_,n){let t={npmName:this.pluginService.nameToNpmName(_,n)};return this.authHttp.post(mt.BASE_PLUGIN_URL+"/update",t).pipe(ce(a=>this.restExtractor.handleError(a)));}install(_){let n={npmName:_};return this.authHttp.post(mt.BASE_PLUGIN_URL+"/install",n).pipe(ce(t=>this.restExtractor.handleError(t)));}getPluginOrThemeHref(_,n){return`https://www.npmjs.com/package/peertube-${_===st.PLUGIN?"plugin":"theme"}-${n}`;}};I(mt,"BASE_PLUGIN_URL",rt.apiUrl+"/api/v1/plugins"),I(mt,"\u0275fac",function(n){return new(n||mt)();}),I(mt,"\u0275prov",qe({token:mt,factory:mt.ɵfac}));var wt=mt;var Tc=[[["badges"]],[["buttons"]]],Ic=["badges","buttons"],Xo=(()=>{let _=class _{pluginApiService=S(wt);plugin=q(void 0);version=q(void 0);pluginType=q(void 0);getPluginOrThemeHref(t){return this.pluginApiService.getPluginOrThemeHref(this.pluginType(),t);}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-plugin-card"]],inputs:{plugin:[1,"plugin"],version:[1,"version"],pluginType:[1,"pluginType"]},ngContentSelectors:Ic,decls:17,vars:5,consts:()=>{let t;t="Homepage (new window)";let a;return a="NPM page (new window)",[[1,"card","plugin"],[1,"card-body"],[1,"first-row"],[1,"plugin-name"],[1,"plugin-version"],["target","_blank","rel","noopener noreferrer","title",t,1,"plugin-icon",3,"href"],["iconName","home"],["target","_blank","rel","noopener noreferrer","title",a,1,"plugin-icon",3,"href"],["iconName","registry"],[1,"buttons"],[1,"second-row"],["dir","auto",1,"description"]];},template:function(a,r){a&1&&(Nr(Tc),i(0,"div",0)(1,"div",1)(2,"div",2)(3,"span",3),g(4),o(),i(5,"span",4),g(6),o(),i(7,"a",5),p(8,"my-global-icon",6),o(),i(9,"a",7),p(10,"my-global-icon",8),o(),Yo(11),i(12,"div",9),Yo(13,1),o()(),i(14,"div",10)(15,"div",11),g(16),o()()()()),a&2&&(l(4),N(r.plugin().name),l(2),N(r.version()),l(),s("href",r.plugin().homepage,ke),l(2),s("href",r.getPluginOrThemeHref(r.plugin().name),ke),l(7),N(r.plugin().description));},dependencies:[Ue],styles:[`.plugin[_ngcontent-%COMP%]{margin:15px 0;background-color:var(--bg-secondary-400)}.first-row[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:10px}.first-row[_ngcontent-%COMP%]   .plugin-name[_ngcontent-%COMP%]{font-weight:600;margin-inline-end:.625rem}.first-row[_ngcontent-%COMP%]   .plugin-version[_ngcontent-%COMP%]{opacity:.7}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]{margin-inline-start:.625rem}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{color:var(--fg-400)}.first-row[_ngcontent-%COMP%]   .plugin-icon[_ngcontent-%COMP%]   my-global-icon[iconName=npm][_ngcontent-%COMP%]     svg path{fill:var(--fg-400)}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{width:max-content;margin-inline-start:auto}.second-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr auto;align-items:center;justify-content:space-between}.second-row[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{opacity:.8}@media screen and (max-width: 800px){.first-row[_ngcontent-%COMP%]{flex-wrap:wrap}.first-row[_ngcontent-%COMP%]   .buttons[_ngcontent-%COMP%]{flex-basis:100%;margin-top:10px}}
/*# sourceMappingURL=plugin-card.component-GHOVGPQ6.css.map */`]}));let e=_;return e;})();function Nc(e,_){if(e&1&&(i(0,"div",3),g(1),o()),e&2){let n=d();l(),V(" ",n.getNoResultMessage(),`
`);}}function Oc(e,_){if(e&1&&p(0,"my-button",9),e&2){let n=d().$implicit,t=d();s("ptRouterLink",t.getShowRouterLink(n))("responsiveLabel",!0);}}function Mc(e,_){if(e&1){let n=w();i(0,"my-button",10),M("click",function(){f(n);let a=d().$implicit,r=d();return A(r.update(a));}),o();}if(e&2){let n=d().$implicit,t=d();s("loading",t.isUpdating(n))("label",t.getUpdateLabel(n))("responsiveLabel",!0),Sn("disabled",t.isUpdating(n)||t.isUninstalling(n));}}function fc(e,_){if(e&1){let n=w();E(0),i(1,"my-plugin-card",4)(2,"div",5),u(3,Oc,1,2,"my-button",6)(4,Mc,1,4,"my-button",7),i(5,"my-delete-button",8),M("click",function(){let a=f(n).$implicit,r=d();return A(r.uninstall(a));}),o()()(),T();}if(e&2){let n=_.$implicit,t=d();l(),s("plugin",n)("version",n.version)("pluginType",t.pluginType),l(2),s("ngIf",!t.isTheme(n)),l(),s("ngIf",t.isUpdateAvailable(n)),l(),s("responsiveLabel",!0)("disabled",t.isUpdating(n)||t.isUninstalling(n));}}var ma=(()=>{let _=class _{pluginService=S(Yt);pluginApiService=S(wt);notifier=S(Y);confirmService=S(be);router=S(Ze);route=S(Qe);pluginType;pagination={currentPage:1,itemsPerPage:10,totalItems:null};sort="name";plugins=[];updating={};uninstalling={};onDataSubject=new Jn();ngOnInit(){if(!this.route.snapshot.queryParams.pluginType){let t={pluginType:st.PLUGIN};this.router.navigate([],{queryParams:t,replaceUrl:!0});}this.route.queryParams.subscribe(t=>{t.pluginType&&(this.pluginType=parseInt(t.pluginType,10),this.reloadPlugins());});}reloadPlugins(){this.plugins=[],Io(this.pagination),this.loadMorePlugins();}loadMorePlugins(){this.pluginApiService.getPlugins(this.pluginType,this.pagination,this.sort).subscribe({next:t=>{this.plugins=this.plugins.concat(t.data),this.pagination.totalItems=t.total,this.onDataSubject.next(t.data);},error:t=>this.notifier.error(t.message)});}onNearOfBottom(){To(this.pagination)&&(this.pagination.currentPage+=1,this.loadMorePlugins());}getNoResultMessage(){return this.pluginType===st.PLUGIN?"Av\xE8tz pas encara d\u2019extension installada.":"Av\xE8tz pas encara de t\xE8ma installat.";}isUpdateAvailable(t){return t.latestVersion&&xr(t.latestVersion,t.version)>0;}getUpdateLabel(t){return"Passar a la\n          "+t.latestVersion+"\n        ";}isUpdating(t){return!!this.updating[this.getPluginKey(t)];}isUninstalling(t){return!!this.uninstalling[this.getPluginKey(t)];}isTheme(t){return t.type===st.THEME;}uninstall(t){return _e(this,null,function*(){let a=this.getPluginKey(t);this.uninstalling[a]||(yield this.confirmService.confirm("Vol\xE8tz vertadi\xE8rament desinstallar\n          "+t.name+" ?\n        ","Uninstall"))===!1||(this.uninstalling[a]=!0,this.pluginApiService.uninstall(t.name,t.type).subscribe({next:()=>{this.notifier.success(""+t.name+" desinstallat.\n        "),this.plugins=this.plugins.filter(m=>m.name!==t.name),Zr(this.pagination),this.uninstalling[a]=!1;},error:m=>{this.notifier.error(m.message),this.uninstalling[a]=!1;}}));});}update(t){return _e(this,null,function*(){let a=this.getPluginKey(t);this.updating[a]||this.isMajorUpgrade(t)&&(yield this.confirmService.confirm("This is a major plugin upgrade. Please go on the plugin homepage to check potential release notes.","Upgrade",{confirmButtonText:"Proceed upgrade"}))===!1||(this.updating[a]=!0,this.pluginApiService.update(t.name,t.type).pipe().subscribe({next:r=>{this.updating[a]=!1,this.notifier.success(""+t.name+" actualizat.\n        "),Object.assign(t,r);},error:r=>{this.notifier.error(r.message),this.updating[a]=!1;}}));});}getShowRouterLink(t){return["/admin","settings","plugins","show",this.pluginService.nameToNpmName(t.name,t.type)];}getPluginOrThemeHref(t){return this.pluginApiService.getPluginOrThemeHref(this.pluginType,t);}getPluginKey(t){return t.name+t.type;}isMajorUpgrade(t){if(!t.latestVersion)return!1;let a=parseInt(t.latestVersion.split(".")[0]),r=parseInt(t.version.split(".")[0]);return a>r;}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-plugin-list-installed"]],decls:3,vars:3,consts:()=>{let t;t="Param\xE8tres";let a;return a="Uninstall",[["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"plugins",3,"nearOfBottom","dataObservable"],[4,"ngFor","ngForOf"],[1,"no-results"],[3,"plugin","version","pluginType"],["ngProjectAs","buttons",5,["buttons"]],["label",t,"icon","config",3,"ptRouterLink","responsiveLabel",4,"ngIf"],["class","update-button","icon","refresh",3,"loading","label","responsiveLabel","click",4,"ngIf"],["label",a,3,"click","responsiveLabel","disabled"],["label",t,"icon","config",3,"ptRouterLink","responsiveLabel"],["icon","refresh",1,"update-button",3,"click","loading","label","responsiveLabel"]];},template:function(a,r){a&1&&(u(0,Nc,2,1,"div",0),i(1,"div",1),M("nearOfBottom",function(){return r.onNearOfBottom();}),u(2,fc,6,7,"ng-container",2),o()),a&2&&(s("ngIf",r.pagination.totalItems===0),l(),s("dataObservable",r.onDataSubject.asObservable()),l(),s("ngForOf",r.plugins));},dependencies:[B,Ao,Le,Xo,et,Mn],styles:[`.update-button[disabled=true][_ngcontent-%COMP%]     .action-button{cursor:default!important}my-edit-button[_ngcontent-%COMP%], my-button[_ngcontent-%COMP%]{margin-inline-end:.625rem}
/*# sourceMappingURL=plugin-list-installed.component-YDXPOCFW.css.map */`]}));let e=_;return e;})();function Ac(e,_){e&1&&(i(0,"my-alert",15),c(1,0),o());}function Rc(e,_){e&1&&(E(0),c(1,1),T());}function Pc(e,_){e&1&&(E(0),c(1,2),T());}function Fc(e,_){if(e&1&&(i(0,"div"),p(1,"my-global-icon",16),u(2,Rc,2,0,"ng-container")(3,Pc,2,0,"ng-container"),o()),e&2){let n=d();l(2),ge(n.isThemeSearch()?2:3);}}function hc(e,_){if(e&1&&(i(0,"div"),p(1,"my-global-icon",17),E(2),c(3,3),T(),o()),e&2){let n=d();l(3),j(n.pagination.totalItems)(n.pagination.totalItems)(n.search),K(3);}}function Dc(e,_){e&1&&(i(0,"div",18),c(1,4),o());}function bc(e,_){e&1&&(i(0,"span",27),c(1,5),o());}function vc(e,_){e&1&&(i(0,"span",28),c(1,6),o());}function yc(e,_){e&1&&(i(0,"span",29),c(1,7),o());}function Lc(e,_){if(e&1&&p(0,"my-edit-button",30),e&2){let n=d().$implicit,t=d();s("ptRouterLink",t.getShowRouterLink(n))("responsiveLabel",!0);}}function $c(e,_){if(e&1){let n=w();i(0,"my-button",31),M("click",function(){f(n);let a=d().$implicit,r=d();return A(r.install(a));}),o();}if(e&2){let n=d().$implicit,t=d();s("loading",t.isInstalling(n))("responsiveLabel",!0),Sn("disabled",t.isInstalling(n));}}function xc(e,_){if(e&1&&(E(0),i(1,"my-plugin-card",19)(2,"div",20),u(3,bc,2,0,"span",21)(4,vc,2,0,"span",22)(5,yc,2,0,"span",23),o(),i(6,"div",24),u(7,Lc,1,2,"my-edit-button",25)(8,$c,1,3,"my-button",26),o()(),T()),e&2){let n=_.$implicit,t=d();l(),s("plugin",n)("version",n.latestVersion)("pluginType",t.pluginType),l(2),s("ngIf",n.installed),l(),s("ngIf",n.official),l(),s("ngIf",n.recommended),l(2),s("ngIf",n.installed===!0&&!t.isThemeSearch()),l(),s("ngIf",n.installed===!1);}}var ua=(()=>{let _=class _{pluginService=S(Yt);pluginApiService=S(wt);notifier=S(Y);confirmService=S(be);router=S(Ze);route=S(Qe);pluginType;pagination={currentPage:1,itemsPerPage:10,totalItems:null};sort="-trending";search="";isSearching=!1;plugins=[];installing={};pluginInstalled=!1;onDataSubject=new Jn();searchSubject=new Jn();ngOnInit(){if(!this.route.snapshot.queryParams.pluginType){let t={pluginType:st.PLUGIN};this.router.navigate([],{queryParams:t});}this.route.queryParams.subscribe(t=>{t.pluginType&&(this.pluginType=parseInt(t.pluginType,10),this.search=t.search||"",this.reloadPlugins());}),this.searchSubject.asObservable().pipe(dr(400),pr()).subscribe(t=>this.router.navigate([],{queryParams:{search:t},queryParamsHandling:"merge"}));}onSearchChange(t){let a=t.target;this.searchSubject.next(a.value);}reloadPlugins(){Io(this.pagination),this.plugins=[],this.loadMorePlugins();}loadMorePlugins(){this.isSearching=!0,this.pluginApiService.searchAvailablePlugins(this.pluginType,this.pagination,this.sort,this.search).subscribe({next:t=>{this.isSearching=!1,this.plugins=this.plugins.concat(t.data),this.pagination.totalItems=t.total,this.onDataSubject.next(t.data);},error:t=>{yn.error(t);let a="L\u2019ind\xE8x de las extensions es pas disponible. Ensajatz mai tard.";this.notifier.error(a);}});}onNearOfBottom(){To(this.pagination)&&(this.pagination.currentPage+=1,this.loadMorePlugins());}isInstalling(t){return!!this.installing[t.npmName];}getShowRouterLink(t){return["/admin","settings","plugins","show",this.pluginService.nameToNpmName(t.name,this.pluginType)];}isThemeSearch(){return this.pluginType===st.THEME;}install(t){return _e(this,null,function*(){this.installing[t.npmName]||(yield this.confirmService.confirm("Please only install plugins or themes you trust, since they can execute any code on your platform.","Installar\n          "+t.name+" ?\n        "))===!1||(this.installing[t.npmName]=!0,this.pluginApiService.install(t.npmName).subscribe({next:()=>{this.installing[t.npmName]=!1,this.pluginInstalled=!0,this.notifier.success(""+t.name+" installat.\n        "),t.installed=!0;},error:r=>{this.installing[t.npmName]=!1,this.notifier.error(r.message);}}));});}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-plugin-search"]],decls:9,vars:6,consts:()=>{let t;t="Cercar...";let a;a="\n  Per cargar v\xF2stras extensions o t\xE8mas, actualizatz la pagina.\n";let r;r="Popular themes";let m;m="Popular plugins";let C;C="{VAR_PLURAL, plural, =1 {result} other {results}}",C=de(C,{VAR_PLURAL:"\uFFFD1\uFFFD"});let O;O=""+"\uFFFD0\uFFFD"+""+C+" for \""+"\uFFFD2\uFFFD"+"\" ";let P;P="\n  Cap de resultat.\n";let y;y="This plugin is developed by Framasoft, the not-for-profit that develops PeerTube";let v;v="This plugin is recommended by Framasoft, the not-for-profit that develops PeerTube";let L;L="Param\xE8tres";let W;W="Installats";let k;k="Official";let $;return $="Recomandat",[a,r,m,O,P,W,k,$,["class","mt-3","type","primary",4,"ngIf"],[1,"result-and-search"],[1,"search-bar"],["type","text","placeholder",t,"myAutofocus","",3,"input"],["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"plugins",3,"nearOfBottom","dataObservable"],[4,"ngFor","ngForOf"],["type","primary",1,"mt-3"],["iconName","trending","aria-hidden","true"],["iconName","search"],[1,"no-results"],[3,"plugin","version","pluginType"],["ngProjectAs","badges",5,["badges"]],["class","pt-badge badge-success",4,"ngIf"],["class","pt-badge badge-primary","title",y,4,"ngIf"],["class","pt-badge badge-primary","title",v,4,"ngIf"],["ngProjectAs","buttons",5,["buttons"]],["label",L,3,"ptRouterLink","responsiveLabel",4,"ngIf"],["label","Install","icon","cloud-download",3,"loading","responsiveLabel","click",4,"ngIf"],[1,"pt-badge","badge-success"],["title",y,1,"pt-badge","badge-primary"],["title",v,1,"pt-badge","badge-primary"],["label",L,3,"ptRouterLink","responsiveLabel"],["label","Install","icon","cloud-download",3,"click","loading","responsiveLabel"]];},template:function(a,r){a&1&&(u(0,Ac,2,0,"my-alert",8),i(1,"div",9),u(2,Fc,4,1,"div")(3,hc,4,3,"div"),i(4,"div",10)(5,"input",11),M("input",function(C){return r.onSearchChange(C);}),o()()(),u(6,Dc,2,0,"div",12),i(7,"div",13),M("nearOfBottom",function(){return r.onNearOfBottom();}),u(8,xc,9,8,"ng-container",14),o()),a&2&&(s("ngIf",r.pluginInstalled),l(2),ge(r.search?-1:2),l(),ge(r.search&&!r.isSearching?3:-1),l(3),s("ngIf",r.pagination.totalItems===0),l(),s("dataObservable",r.onDataSubject.asObservable()),l(),s("ngForOf",r.plugins));},dependencies:[B,Ue,R_,Ao,Le,Xo,A_,et,Rt],styles:[`.result-and-search[_ngcontent-%COMP%]{font-size:22px;font-weight:600;margin:30px 0 15px;display:flex;flex-wrap:wrap;row-gap:.5rem;justify-content:space-between}.result-and-search[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{display:inline-block;width:24px;height:24px;line-height:24px;margin-inline-end:.3125rem}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:500px;max-width:500px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}.search-bar[_ngcontent-%COMP%]   input[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}.search-bar[_ngcontent-%COMP%]   input[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 540px){.search-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}.pt-badge[_ngcontent-%COMP%]{font-size:13px;margin-inline-start:.9375rem}
/*# sourceMappingURL=plugin-search.component-XLW6DDYK.css.map */`]}));let e=_;return e;})();function Gc(e,_){if(e&1&&(i(0,"div",8),p(1,"my-dynamic-form-field",9),o()),e&2){let n=_.$implicit,t=d(3);s("id",t.getWrapperId(n)),l(),s("hidden",t.isSettingHidden(n))("form",t.form)("setting",n)("formErrors",t.formErrors);}}function Uc(e,_){if(e&1){let n=w();i(0,"form",5),M("ngSubmit",function(){f(n);let a=d(2);return A(a.formValidated());}),u(1,Gc,2,5,"div",6),p(2,"input",7),o();}if(e&2){let n=d(2);s("formGroup",n.form),l(),s("ngForOf",n.registeredSettings),l(),s("disabled",!n.form.valid);}}function wc(e,_){if(e&1&&(i(0,"div",10),c(1,0),o()),e&2){let n=d(2);l(),j(n.pluginTypeLabel),K(1);}}function Vc(e,_){if(e&1&&(E(0),i(1,"h2",2),E(2),g(3),T(),g(4),o(),u(5,Uc,3,3,"form",3)(6,wc,2,1,"div",4),T()),e&2){let n=d();l(3),N(n.pluginTypeLabel),l(),V(" ",n.plugin.name," "),l(),s("ngIf",n.hasRegisteredSettings()),l(),s("ngIf",!n.hasRegisteredSettings());}}var ga=(()=>{let _=class _ extends vt{formReactiveService=S(ft);pluginService=S(Yt);pluginAPIService=S(wt);notifier=S(Y);hooks=S(fo);route=S(Qe);plugin;registeredSettings=[];pluginTypeLabel;sub;npmName;ngOnInit(){this.sub=this.route.params.subscribe(t=>{this.npmName=t.npmName,this.loadPlugin(this.npmName);});}ngOnDestroy(){this.sub&&this.sub.unsubscribe();}formValidated(){let t=this.form.value;this.pluginAPIService.updatePluginSettings(this.plugin.name,this.plugin.type,t).subscribe({next:()=>{this.notifier.success("Param\xE8tres actualizats.");},error:a=>this.notifier.error(a.message)});}hasRegisteredSettings(){return Array.isArray(this.registeredSettings)&&this.registeredSettings.length!==0;}isSettingHidden(t){let a=this.pluginService.getRegisteredSettingsScript(this.npmName);return a?.isSettingHidden?a.isSettingHidden({setting:t,formValues:this.form.value}):!1;}getWrapperId(t){if(t.name)return t.name+"-wrapper";}loadPlugin(t){this.pluginAPIService.getPlugin(t).pipe(bn(a=>this.pluginAPIService.getPluginRegisteredSettings(a.name,a.type).pipe(Vt(r=>({plugin:a,registeredSettings:r.registeredSettings}))))).subscribe({next:m=>_e(this,[m],function*({plugin:a,registeredSettings:r}){this.plugin=a,this.registeredSettings=yield this.translateSettings(r),this.pluginTypeLabel=this.pluginAPIService.getPluginTypeLabel(this.plugin.type),this.buildSettingsForm();}),error:a=>this.notifier.error(a.message)});}buildSettingsForm(){let t={},a={};for(let r of this.registeredSettings)t[r.name]=null,a[r.name]=this.getSetting(r.name);this.buildForm(t),this.form.patchValue(a),this.hooks.runAction("action:admin-plugin-settings.init","admin-plugin",{npmName:this.npmName});}getSetting(t){let a=this.plugin.settings;return a?.[t]!==void 0?a[t]:this.registeredSettings.find(m=>m.name===t).default;}translateSettings(t){return _e(this,null,function*(){for(let a of t)yield this.pluginService.translateSetting(this.npmName,a);return t;});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-plugin-show-installed"]],features:[ne],decls:1,vars:1,consts:()=>{let t;return t="\n    Aquesta\n          "+"\uFFFD0\uFFFD"+" a pas cap de param\xE8tre.\n\n        ",[t,[4,"ngIf"],[1,"mb-4"],[3,"formGroup","ngSubmit",4,"ngIf"],["class","no-settings",4,"ngIf"],[3,"ngSubmit","formGroup"],[3,"id",4,"ngFor","ngForOf"],["type","submit","value","Update plugin settings",1,"peertube-button","primary-button","mt-3",3,"disabled"],[3,"id"],[3,"hidden","form","setting","formErrors"],[1,"no-settings"]];},template:function(a,r){a&1&&u(0,Vc,7,4,"ng-container",1),a&2&&s("ngIf",r.plugin);},dependencies:[B,le,Mt,Te,Ne,Ie,Le,P_],encapsulation:2}));let e=_;return e;})();var Ca=[{path:"plugins",canActivate:[ye],data:{userRight:Q.MANAGE_PLUGINS},children:[{path:"",redirectTo:"list-installed?pluginType=1",pathMatch:"full"},{path:"list-installed",component:ma,data:{meta:{title:"List installed plugins"}}},{path:"search",component:ua,data:{meta:{title:"Search plugins"}}},{path:"show/:npmName",component:ga,data:{meta:{title:"Show plugin"}}}]}];var rn=class rn{authHttp=S(at);restExtractor=S(dt);getDebug(){return this.authHttp.get(rn.BASE_DEBUG_URL).pipe(ce(_=>this.restExtractor.handleError(_)));}};I(rn,"BASE_DEBUG_URL",rt.apiUrl+"/api/v1/server/debug"),I(rn,"\u0275fac",function(n){return new(n||rn)();}),I(rn,"\u0275prov",qe({token:rn,factory:rn.ɵfac}));var Hn=rn;var Sa=(()=>{let _=class _{debugService=S(Hn);notifier=S(Y);debug;ngOnInit(){this.load();}load(){this.debugService.getDebug().subscribe({next:t=>this.debug=t,error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["ng-component"]],decls:21,vars:1,consts:()=>{let t;t="IP address";let a;a="PeerTube thinks your web browser public IP is "+"\uFFFD#4\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#4\uFFFD"+".";let r;r="If this is not your correct public IP, please consider fixing it because:";let m;m="Views may not be counted correctly (reduced compared to what they should be)";let C;C="Anti brute force system could be overzealous";let O;O="P2P system could not work correctly";let P;P="To fix it:";let y;return y="Check the "+"\uFFFD#20\uFFFD"+"trust_proxy"+"\uFFFD/#20\uFFFD"+" configuration key",[t,a,r,m,C,O,P,y,[1,"fs-5"]];},template:function(a,r){a&1&&(i(0,"h2",8),c(1,0),o(),i(2,"p"),D(3,1),p(4,"strong"),b(),o(),i(5,"p"),c(6,2),o(),i(7,"ul")(8,"li"),c(9,3),o(),i(10,"li"),c(11,4),o(),i(12,"li"),c(13,5),o()(),i(14,"p"),c(15,6),o(),p(16,"p"),i(17,"ul")(18,"li"),D(19,7),p(20,"code"),b(),o()()),a&2&&(l(4),j(r.debug==null?null:r.debug.ip),K(3));},styles:[`code[_ngcontent-%COMP%]{font-size:14px;font-weight:600}
/*# sourceMappingURL=debug.component-6NJTQY6A.css.map */`]}));let e=_;return e;})();var _n=class _n{authHttp=S(at);restService=S(bt);restExtractor=S(dt);listJobs(_){let{jobState:n,jobType:t,pagination:a,sort:r}=_,m=new Et();return m=this.restService.addRestGetParams(m,a,r),t!=="all"&&(m=m.append("jobType",t)),this.authHttp.get(_n.BASE_JOB_URL+`/${n||""}`,{params:m}).pipe(Vt(C=>this.restExtractor.convertResultListDateToHuman(C,["createdAt","processedOn","finishedOn"],"precise")),Vt(C=>this.restExtractor.applyToResultListData(C,this.prettyPrintData.bind(this))),Vt(C=>this.restExtractor.applyToResultListData(C,this.buildUniqId.bind(this))),ce(C=>this.restExtractor.handleError(C)));}prettyPrintData(_){let n=JSON.stringify(_.data,null,2);return Object.assign(_,{data:n});}buildUniqId(_){return Object.assign(_,{uniqId:`${_.id}-${_.type}`});}};I(_n,"BASE_JOB_URL",rt.apiUrl+"/api/v1/jobs"),I(_n,"\u0275fac",function(n){return new(n||_n)();}),I(_n,"\u0275prov",qe({token:_n,factory:_n.ɵfac}));var jn=_n;var kc=()=>({"table-layout":"auto"}),zc=(e,_,n,t)=>[e,_,n,t];function Xc(e,_){e&1&&(i(0,"th",37),c(1,8),o());}function Bc(e,_){e&1&&(i(0,"th",38),c(1,9),o());}function Wc(e,_){if(e&1&&(i(0,"tr")(1,"th",27)(2,"span",28),c(3,2),o()(),i(4,"th",29),c(5,3),o(),i(6,"th",30),c(7,4),o(),i(8,"th",31),D(9,5),p(10,"small"),b(),o(),u(11,Xc,2,0,"th",32)(12,Bc,2,0,"th",33),i(13,"th",34),D(14,6),p(15,"p-sortIcon",35),b(),o(),i(16,"th",36),c(17,7),o()()),e&2){let n=d();l(11),s("ngIf",n.jobState==="all"),l(),s("ngIf",n.hasGlobalProgress()),l(),s("ngbTooltip",n.sortTooltip);}}function Hc(e,_){if(e&1&&(i(0,"td",49)(1,"span",50),g(2),o()()),e&2){let n=d().$implicit,t=d();s("pRowToggler",n),l(),s("ngClass",t.getJobStateClasses(n.state)),l(),N(n.state);}}function jc(e,_){if(e&1&&(E(0),g(1),T()),e&2){let n=d(2).$implicit,t=d();l(),N(t.getProgress(n));}}function Kc(e,_){if(e&1&&(i(0,"td",51),u(1,jc,2,1,"ng-container",52),o()),e&2){let n=d().$implicit,t=d();s("pRowToggler",n),l(),s("ngIf",t.hasProgress(n));}}function Jc(e,_){if(e&1&&(i(0,"tr")(1,"td",39),p(2,"my-table-expander-icon",40),o(),i(3,"td",41),g(4),o(),i(5,"td",42)(6,"span",43),g(7),o()(),i(8,"td",44),g(9),o(),u(10,Hc,3,3,"td",45)(11,Kc,2,2,"td",46),i(12,"td",47),g(13),o(),i(14,"td",48)(15,"div"),g(16),o(),i(17,"div"),g(18),o()()()),e&2){let n=_.expanded,t=_.$implicit,a=d();l(2),s("pRowToggler",t)("expanded",n),l(),s("pRowToggler",t)("title",t.id),l(),N(t.id),l(),s("pRowToggler",t),l(),s("ngClass",a.getRandomJobTypeBadge(t.type)),l(),N(t.type),l(),s("pRowToggler",t),l(),N(t.priority),l(),s("ngIf",a.jobState==="all"),l(),s("ngIf",a.hasGlobalProgress()),l(),s("pRowToggler",t),l(),N(t.createdAt),l(3),N(t.processedOn),l(2),N(t.finishedOn);}}function Yc(e,_){if(e&1&&(i(0,"tr",55)(1,"td",53)(2,"pre"),g(3),o()()()),e&2){let n=d().$implicit;l(3),N(n.error);}}function qc(e,_){if(e&1&&(i(0,"tr")(1,"td",53)(2,"pre"),g(3),o()()(),i(4,"tr")(5,"td",53)(6,"pre"),g(7),o()()(),u(8,Yc,4,1,"tr",54)),e&2){let n=_.$implicit;l(3),N(fr(3,zc,"Job: "+n.id,"Type: "+n.type,"Processed on "+(n.processedOn||"-"),"Finished on "+(n.finishedOn||"-")).join(`
`)),l(4),N(n.data),l(),s("ngIf",n.error);}}function Qc(e,_){e&1&&(E(0),c(1,10),T());}function Zc(e,_){if(e&1&&(E(0),D(1,11),p(2,"code"),b(),T()),e&2){let n=d(3);l(2),j(n.jobType),K(1);}}function ed(e,_){if(e&1&&u(0,Qc,2,0,"ng-container")(1,Zc,3,1,"ng-container"),e&2){let n=d(2);ge(n.jobType==="all"?0:1);}}function td(e,_){if(e&1&&(E(0),D(1,12),p(2,"span",58),b(),T()),e&2){let n=d(3);l(2),s("ngClass",n.getJobStateClasses(n.jobState)),j(n.jobState),K(1);}}function nd(e,_){if(e&1&&(E(0),D(1,13),p(2,"code")(3,"span",58),b(),T()),e&2){let n=d(3);l(3),s("ngClass",n.getJobStateClasses(n.jobState)),j(n.jobType)(n.jobState),K(1);}}function od(e,_){if(e&1&&u(0,td,3,2,"ng-container")(1,nd,4,3,"ng-container"),e&2){let n=d(2);ge(n.jobType==="all"?0:1);}}function id(e,_){if(e&1&&(i(0,"tr")(1,"td",53)(2,"div",56)(3,"div",57),u(4,ed,2,1)(5,od,2,1),o()()()()),e&2){let n=d();l(4),ge(n.jobState==="all"?4:5);}}var Ea=(()=>{let _=class _ extends Ge{notifier=S(Y);jobsService=S(jn);jobState="all";jobStates=["all","active","completed","failed","waiting","delayed"];jobStateItems=this.jobStates.map(t=>({id:t,label:t,classes:this.getJobStateClasses(t)}));jobType="all";jobTypes=["all","activitypub-cleaner","activitypub-follow","activitypub-http-broadcast-parallel","activitypub-http-broadcast","activitypub-http-fetcher","activitypub-http-unicast","activitypub-refresher","actor-keys","after-video-channel-import","create-user-export","email","federate-video","generate-video-storyboard","manage-video-torrent","move-to-file-system","move-to-object-storage","notify","transcoding-job-builder","video-channel-import","video-file-import","video-import","video-live-ending","video-redundancy","video-studio-edition","video-transcoding","video-transcription","videos-views-stats"];jobTypeItems=this.jobTypes.map(t=>({id:t,label:t}));jobs=[];totalRecords;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};ngOnInit(){this.loadJobStateAndType(),this.initialize();}getIdentifier(){return"JobsComponent";}getJobStateClasses(t){switch(t){case"active":return["pt-badge","badge-blue"];case"completed":return["pt-badge","badge-green"];case"delayed":return["pt-badge","badge-brown"];case"failed":return["pt-badge","badge-red"];case"waiting":return["pt-badge","badge-yellow"];}return[];}onJobStateOrTypeChanged(){this.pagination.start=0,this.reloadData(),this.saveJobStateAndType();}hasGlobalProgress(){return this.jobType==="all"||this.jobType==="video-transcoding";}hasProgress(t){return t.type==="video-transcoding";}getProgress(t){return t.state==="active"?t.progress+"%":"";}refresh(){this.jobs=[],this.totalRecords=0,this.reloadData();}getRandomJobTypeBadge(t){return this.getRandomBadge("type",t);}reloadDataInternal(){let t=this.jobState;this.jobState==="all"&&(t=null),this.jobsService.listJobs({jobState:t,jobType:this.jobType,pagination:this.pagination,sort:this.sort}).subscribe({next:a=>{this.jobs=a.data,this.totalRecords=a.total;},error:a=>this.notifier.error(a.message)});}loadJobStateAndType(){let t=Nn.getItem(_.LS_STATE);t&&t!=="undefined"&&(this.jobState=t);let a=Nn.getItem(_.LS_TYPE);a&&a!=="undefined"&&(this.jobType=a);}saveJobStateAndType(){Nn.setItem(_.LS_STATE,this.jobState),Nn.setItem(_.LS_TYPE,this.jobType);}};I(_,"LS_STATE","jobs-list-state"),I(_,"LS_TYPE","jobs-list-type"),I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-jobs"]],features:[ne],decls:16,vars:19,consts:()=>{let t;t="Actualizar";let a;a="Tipe de tasca";let r;r="Job state";let m;m="Mai d\u2019informacions";let C;C="ID";let O;O="Tipe";let P;P="Priority "+"\uFFFD#10\uFFFD"+"(1 = highest priority)"+"\uFFFD/#10\uFFFD"+"";let y;y="Creat\n          "+"\uFFFD#15\uFFFD"+"\n          "+"\uFFFD/#15\uFFFD"+"\n        ";let v;v="Processed/Finished";let L;L="Estatisticas";let W;W="Progress";let k;k="No jobs found.";let $;$="No "+"\uFFFD#2\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#2\uFFFD"+" jobs found.";let X;X="No "+"\uFFFD#2\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#2\uFFFD"+" jobs found.";let x;return x="No "+"\uFFFD#2\uFFFD"+""+"\uFFFD0\uFFFD"+""+"\uFFFD/#2\uFFFD"+" jobs found that are "+"\uFFFD#3\uFFFD"+""+"\uFFFD1\uFFFD"+""+"\uFFFD/#3\uFFFD"+".",[a,r,m,C,O,P,y,v,L,W,k,$,X,x,[1,"admin-sub-header"],[1,"select-filter-block"],["for","jobType"],["inputId","jobType","filter","true",1,"select-job-type",3,"ngModelChange","items","ngModel"],["for","jobState"],["inputId","jobState",1,"select-job-state",3,"ngModelChange","items","ngModel"],[1,"align-self-end"],["label",t,"icon","refresh",3,"click"],["dataKey","uniqId",3,"onLazyLoad","value","lazy","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","tableStyle","showCurrentPageReport","currentPageReportTemplate","expandedRowKeys"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["scope","col",2,"width","40px"],[1,"visually-hidden"],["scope","col",1,"job-id"],["scope","col",1,"job-type",2,"width","200px"],["scope","col",1,"job-priority",2,"width","200px"],["scope","col","style","width: 200px","class","job-state",4,"ngIf"],["scope","col","style","width: 100px","class","job-progress",4,"ngIf"],["scope","col","container","body","pSortableColumn","createdAt",1,"job-date",2,"width","200px",3,"ngbTooltip"],["field","createdAt"],["scope","col",2,"width","230px"],["scope","col",1,"job-state",2,"width","200px"],["scope","col",1,"job-progress",2,"width","100px"],[1,"expand-cell"],[3,"pRowToggler","expanded"],[1,"job-id","c-hand",3,"pRowToggler","title"],[1,"job-type","c-hand",3,"pRowToggler"],[1,"pt-badge","ellipsis",3,"ngClass"],[1,"job-priority","c-hand",3,"pRowToggler"],["class","job-state c-hand",3,"pRowToggler",4,"ngIf"],["class","job-progress c-hand",3,"pRowToggler",4,"ngIf"],[1,"job-date","c-hand",3,"pRowToggler"],[1,"fs-7"],[1,"job-state","c-hand",3,"pRowToggler"],[1,"ellipsis",3,"ngClass"],[1,"job-progress","c-hand",3,"pRowToggler"],[4,"ngIf"],["myAutoColspan",""],["class","job-error",4,"ngIf"],[1,"job-error"],[1,"no-results"],[1,"d-block"],[3,"ngClass"]];},template:function(a,r){a&1&&(i(0,"div",14)(1,"div",15)(2,"label",16),c(3,0),o(),i(4,"my-select-options",17),Ee("ngModelChange",function(C){return Se(r.jobType,C)||(r.jobType=C),C;}),M("ngModelChange",function(){return r.onJobStateOrTypeChanged();}),o()(),i(5,"div",15)(6,"label",18),c(7,1),o(),i(8,"my-select-options",19),Ee("ngModelChange",function(C){return Se(r.jobState,C)||(r.jobState=C),C;}),M("ngModelChange",function(){return r.onJobStateOrTypeChanged();}),o()(),i(9,"div",20)(10,"my-button",21),M("click",function(){return r.refresh();}),o()()(),i(11,"p-table",22),M("onLazyLoad",function(C){return r.loadLazy(C);}),u(12,Wc,18,3,"ng-template",23)(13,Jc,19,16,"ng-template",24)(14,qc,9,8,"ng-template",25)(15,id,6,1,"ng-template",26),o()),a&2&&(l(4),s("items",r.jobTypeItems),Ce("ngModel",r.jobType),l(4),s("items",r.jobStateItems),Ce("ngModel",r.jobState),l(3),s("value",r.jobs)("lazy",!0)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("first",r.pagination.start)("tableStyle",Ht(18,kc))("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate())("expandedRowKeys",r.expandedRows));},dependencies:[le,me,ht,pe,et,Fe,Ae,Oe,Re,Pt,Pe,Me,B,De,Ft,yt,he],styles:[`.select-job-state[_ngcontent-%COMP%]{display:block;min-width:120px}.select-job-state[_ngcontent-%COMP%]     .pt-badge{font-size:13px}.select-job-type[_ngcontent-%COMP%]{display:block;min-width:240px}@media screen and (min-width: 1000px){.job-id[_ngcontent-%COMP%]{max-width:30vw!important}.job-type[_ngcontent-%COMP%], .job-state[_ngcontent-%COMP%], .job-priority[_ngcontent-%COMP%]{width:150px!important}.job-date[_ngcontent-%COMP%]{width:200px!important}}.admin-sub-header[_ngcontent-%COMP%]{justify-content:flex-end}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:auto}@media screen and (max-width: auto-30px){.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}pre[_ngcontent-%COMP%]{font-size:11px}.job-error[_ngcontent-%COMP%]{color:var(--red)}
/*# sourceMappingURL=jobs.component-YPCF7UNP.css.map */`]}));let e=_;return e;})();var Bo=class{date;localeDate;level;message;meta;by;domain;action;constructor(_){this.date=new Date(_.timestamp),this.localeDate=this.date.toLocaleString(),this.level=_.level,this.message=_.message;let n=Eo(_,"timestamp","level","message","label");if(Object.keys(n).length!==0&&(this.meta=JSON.stringify(n,void 0,2)),_.level==="audit")try{let t=JSON.parse(_.message);this.by=t.user,this.domain=t.domain,this.action=t.action,this.meta=JSON.stringify(t,null,2),this.message="";}catch(t){yn.error("Cannot parse audit message.",t);}}};var Xt=class Xt{authHttp=S(at);restService=S(bt);restExtractor=S(dt);getLogs(_){let{isAuditLog:n,startDate:t,endDate:a,tagsOneOf:r}=_,m=new Et();m=m.append("startDate",t),n||(m=m.append("level",_.level)),a&&(m=m.append("endDate",_.endDate)),r&&(m=this.restService.addArrayParams(m,"tagsOneOf",r));let C=n?Xt.BASE_AUDIT_LOG_URL:Xt.BASE_LOG_URL;return this.authHttp.get(C,{params:m}).pipe(Vt(O=>O.map(P=>new Bo(P))),ce(O=>this.restExtractor.handleError(O)));}};I(Xt,"BASE_LOG_URL",rt.apiUrl+"/api/v1/server/logs"),I(Xt,"BASE_AUDIT_LOG_URL",rt.apiUrl+"/api/v1/server/audit-logs"),I(Xt,"\u0275fac",function(n){return new(n||Xt)();}),I(Xt,"\u0275prov",qe({token:Xt,factory:Xt.ɵfac}));var Kn=Xt;var rd=["logsElement"],_d=["logsContent"],ad=(e,_)=>({error:e,warn:_});function ld(e,_){if(e&1&&(i(0,"option",20),g(1),o()),e&2){let n=_.$implicit;s("value",n.id),l(),N(n.label);}}function sd(e,_){if(e&1&&(g(0),oe(1,"ptDate"),i(2,"span"),c(3,6),o(),g(4,") ")),e&2){let n=_.$implicit;on(" ",n.label," (",re(1,2,n.id,n.dateFormat)," - ");}}function cd(e,_){if(e&1&&(i(0,"span",28),g(1,"\u2B24"),o(),g(2)),e&2){let n=_.$implicit;s("ngClass",n.id),l(2),V(" ",n.label," ");}}function dd(e,_){if(e&1){let n=w();i(0,"my-select-tags",29),Ee("ngModelChange",function(a){f(n);let r=d(2);return Se(r.tagsOneOf,a)||(r.tagsOneOf=a),A(a);}),M("ngModelChange",function(){f(n);let a=d(2);return A(a.refresh());}),o();}if(e&2){let n=d(2);Ce("ngModel",n.tagsOneOf);}}function pd(e,_){if(e&1){let n=w();i(0,"div")(1,"label",21),c(2,3),o(),i(3,"my-select-options",22),Ee("ngModelChange",function(a){f(n);let r=d();return Se(r.startDate,a)||(r.startDate=a),A(a);}),M("ngModelChange",function(){f(n);let a=d();return A(a.refresh());}),u(4,sd,5,5,"ng-template",23),o()(),i(5,"div")(6,"label",24),c(7,4),o(),i(8,"my-select-options",25),Ee("ngModelChange",function(a){f(n);let r=d();return Se(r.level,a)||(r.level=a),A(a);}),M("ngModelChange",function(){f(n);let a=d();return A(a.refresh());}),u(9,cd,3,2,"ng-template",23),o()(),i(10,"div")(11,"label",26),c(12,5),o(),u(13,dd,1,1,"my-select-tags",27),o();}if(e&2){let n=d();l(3),s("items",n.timeChoices),Ce("ngModel",n.startDate),l(5),s("items",n.levelChoices),Ce("ngModel",n.level),l(5),s("ngIf",!n.isAuditLog());}}function md(e,_){e&1&&(i(0,"div"),c(1,7),o());}function ud(e,_){if(e&1&&p(0,"my-copy-button",30),e&2){d();let n=Ot(16);s("elementContent",n);}}function gd(e,_){e&1&&(i(0,"div"),c(1,8),o());}function Cd(e,_){if(e&1&&(i(0,"strong",36),c(1,9),o()),e&2){let n=d().$implicit;l(),j(n.by),K(1);}}function Sd(e,_){if(e&1&&(i(0,"strong",37),g(1),o()),e&2){let n=d().$implicit;l(),on("",n.domain," -> ",n.action,"");}}function Ed(e,_){if(e&1&&(i(0,"div",31)(1,"span",32),g(2),o(),i(3,"span",33),g(4),o(),u(5,Cd,2,1,"strong",34)(6,Sd,2,2,"strong",35),g(7),i(8,"pre"),g(9),o()()),e&2){let n=_.$implicit;s("ngClass",Mr(7,ad,n.level==="error",n.level==="warn")),l(2),N(n.level),l(2),V("[",n.localeDate,"]"),l(),s("ngIf",n.by),l(),s("ngIf",n.domain),l(),V(" ",n.message," "),l(2),N(n.meta);}}var Ta=(()=>{let _=class _{logsService=S(Kn);notifier=S(Y);localStorage=S(No);logsElement=Ct("logsElement");logsContent=Ct("logsContent");loading=!1;rawLogs;logs=[];timeChoices=[];levelChoices=[];logTypeChoices=[];startDate;level;logType;tagsOneOf=[];ngOnInit(){this.buildTimeChoices(),this.buildLevelChoices(),this.buildLogTypeChoices(),this.loadPreviousChoices(),this.load();}refresh(){this.logs=[],this.localStorage.setItem(_.LS_LOG_TYPE_CHOICE_KEY,this.logType),this.load();}load(){this.loading=!0;let t=this.tagsOneOf.length!==0?this.tagsOneOf:void 0;this.logsService.getLogs({isAuditLog:this.isAuditLog(),level:this.level,startDate:this.startDate,tagsOneOf:t}).subscribe({next:a=>{this.logs=a,this.rawLogs=this.logs.map(r=>`${r.level} ${r.localeDate} ${r.message} ${r.meta}`).join(`
`),setTimeout(()=>{this.logsElement().nativeElement.scrollIntoView({block:"end",inline:"nearest"});});},error:a=>this.notifier.error(a.message),complete:()=>this.loading=!1});}isAuditLog(){return this.logType==="audit";}buildTimeChoices(){let t=new Date();t.setHours(t.getHours()-1);let a=new Date();a.setDate(a.getDate()-1);let r=new Date();r.setDate(r.getDate()-7),this.timeChoices=[{id:r.toISOString(),label:"La setmana passada",dateFormat:"shortDate"},{id:a.toISOString(),label:"Darri\xE8r jorn",dateFormat:"short"},{id:t.toISOString(),label:"Darri\xE8ras oras",dateFormat:"mediumTime"}],this.startDate=t.toISOString();}buildLevelChoices(){this.levelChoices=[{id:"debug",label:"debug"},{id:"info",label:"info"},{id:"warn",label:"warning"},{id:"error",label:"error"}],this.level="warn";}buildLogTypeChoices(){this.logTypeChoices=[{id:"standard",label:"Standard logs"},{id:"audit",label:"Audit logs"}];}loadPreviousChoices(){this.logType=this.localStorage.getItem(_.LS_LOG_TYPE_CHOICE_KEY),this.logType!=="standard"&&this.logType!=="audit"&&(this.logType="audit");}};I(_,"LS_LOG_TYPE_CHOICE_KEY","admin-logs-log-type-choice"),I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["ng-component"]],viewQuery:function(a,r){a&1&&(St(r.logsElement,rd,5),St(r.logsContent,_d,5)),a&2&&Nt(2);},decls:18,vars:7,consts:()=>{let t;t="Actualizar";let a;a="Logs copied";let r;r="Copy logs";let m;m="Log type";let C;C="Example: ffmpeg, api";let O;O="Start date";let P;P="Log level";let y;y="Filter logs by tags";let v;v="now";let L;L="Cargament\u2026";let W;W="No log.";let k;return k="Per\n          "+"\uFFFD0\uFFFD"+" ->\n        ",[["logsElement",""],["logsContent",""],m,O,P,y,v,L,W,k,[1,"header"],["for","log-type"],[1,"peertube-select-container"],["id","log-type",1,"form-control",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["label",t,"icon","refresh",1,"mt-auto",3,"click"],[1,"logs"],[4,"ngIf"],["notification",a,"title",r,"withBorder","true",3,"elementContent",4,"ngIf"],["class","log-row",3,"ngClass",4,"ngFor","ngForOf"],[3,"value"],["for","log-start-date"],["inputId","log-start-date",3,"ngModelChange","items","ngModel"],["ptTemplate","item"],["for","log-level"],["inputId","log-level",3,"ngModelChange","items","ngModel"],["for","log-tags"],["inputId","log-tags","placeholder",C,3,"ngModel","ngModelChange",4,"ngIf"],[1,"level-choice","me-1",3,"ngClass"],["inputId","log-tags","placeholder",C,3,"ngModelChange","ngModel"],["notification",a,"title",r,"withBorder","true",3,"elementContent"],[1,"log-row",3,"ngClass"],[1,"log-level"],[1,"log-date"],["class","log-by",4,"ngIf"],["class","log-domain-action",4,"ngIf"],[1,"log-by"],[1,"log-domain-action"]];},template:function(a,r){if(a&1){let m=w();i(0,"div",10)(1,"div")(2,"label",11),c(3,2),o(),i(4,"div",12)(5,"select",13),Ee("ngModelChange",function(O){return f(m),Se(r.logType,O)||(r.logType=O),A(O);}),M("ngModelChange",function(){return f(m),A(r.refresh());}),u(6,ld,2,2,"option",14),o()()(),u(7,pd,14,5),i(8,"my-button",15),M("click",function(){return f(m),A(r.refresh());}),o()(),i(9,"div",16),u(10,md,2,0,"div",17),i(11,"div",null,0),u(13,ud,1,1,"my-copy-button",18)(14,gd,2,0,"div",17),i(15,"div",null,1),u(17,Ed,10,10,"div",19),o()()();}a&2&&(l(5),Ce("ngModel",r.logType),l(),s("ngForOf",r.logTypeChoices),l(),ge(r.isAuditLog()?-1:7),l(3),s("ngIf",r.loading),l(3),s("ngIf",r.logs.length!==0),l(),s("ngIf",!r.loading&&r.logs.length===0),l(3),s("ngForOf",r.logs));},dependencies:[le,Kt,Jt,jt,me,ht,Le,B,pe,F_,et,ve,Fo,yt,On],styles:[`.logs[_ngcontent-%COMP%]{font-family:monospace;font-size:13px;max-height:500px;overflow-y:auto;color:#000;background:#fafafa;padding:20px}.logs[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{position:relative}.logs[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]{margin-top:1px;word-break:break-word}.logs[_ngcontent-%COMP%]   .log-row[_ngcontent-%COMP%]:hover{background:#00000012}.logs[_ngcontent-%COMP%]   .log-level[_ngcontent-%COMP%]{font-weight:600;margin-inline-end:.3125rem}.logs[_ngcontent-%COMP%]   .log-by[_ngcontent-%COMP%]{margin:0 5px}.logs[_ngcontent-%COMP%]   .warn[_ngcontent-%COMP%]{color:#c74801}.logs[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#dc262b}.logs[_ngcontent-%COMP%]   pre[_ngcontent-%COMP%]{margin-bottom:5px;white-space:pre-wrap;word-wrap:break-word}.header[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;flex-wrap:wrap;margin-bottom:10px}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:150px}@media screen and (max-width: 120px){.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}.header[_ngcontent-%COMP%]   my-select-tags[_ngcontent-%COMP%]{display:block;width:325px}.header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-bottom:10px;margin-inline-start:.625rem}.level-choice[_ngcontent-%COMP%]{font-size:14px;position:relative;top:-1px}.level-choice.debug[_ngcontent-%COMP%]{color:#c5c5c5}.level-choice.info[_ngcontent-%COMP%]{color:#88ccf7}.level-choice.warn[_ngcontent-%COMP%]{color:#fca607}.level-choice.error[_ngcontent-%COMP%]{color:var(--red)}my-copy-button[_ngcontent-%COMP%]{position:absolute;right:5px;background:var(--bg-secondary-300)}@media screen and (max-width: 800px){.header[_ngcontent-%COMP%]{flex-direction:column}.header[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{width:100%!important;margin-inline-start:0!important}.header[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]{text-align:center}}
/*# sourceMappingURL=logs.component-IUAPWMKE.css.map */`]}));let e=_;return e;})();var ut=class ut{authHttp=S(at);server=S(fe);restService=S(bt);restExtractor=S(dt);listRegistrationTokens(_){let{pagination:n,sort:t}=_,a=new Et();return a=this.restService.addRestGetParams(a,n,t),this.authHttp.get(ut.BASE_RUNNER_URL+"/registration-tokens",{params:a}).pipe(ce(r=>this.restExtractor.handleError(r)));}generateToken(){return this.authHttp.post(ut.BASE_RUNNER_URL+"/registration-tokens/generate",{}).pipe(ce(_=>this.restExtractor.handleError(_)));}removeToken(_){return this.authHttp.delete(ut.BASE_RUNNER_URL+"/registration-tokens/"+_.id).pipe(ce(n=>this.restExtractor.handleError(n)));}listRunnerJobs(_){let{pagination:n,sort:t,search:a}=_,r=new Et();return r=this.restService.addRestGetParams(r,n,t),a&&(r=this.buildParamsFromSearch(a,r)),Dn([this.authHttp.get(ut.BASE_RUNNER_URL+"/jobs",{params:r}),this.server.getServerLocale()]).pipe(Vt(([m,C])=>{let O=m.data.map(P=>It(gt({},P),{state:{id:P.state.id,label:oo(P.state.label,C)},payload:JSON.stringify(P.payload,null,2),privatePayload:JSON.stringify(P.privatePayload,null,2)}));return{total:m.total,data:O};}),Vt(m=>this.restExtractor.convertResultListDateToHuman(m,["createdAt","startedAt","finishedAt"],"precise")),ce(m=>this.restExtractor.handleError(m)));}buildParamsFromSearch(_,n){let t=this.restService.parseQueryStringFilter(_,{stateOneOf:{prefix:"state:",multiple:!0,handler:a=>{if(a==="completed")return ct.COMPLETED;if(a==="processing")return ct.PROCESSING;if(a==="errored")return ct.ERRORED;if(a==="pending")return ct.PENDING;if(a==="waiting-for-parent-job")return ct.WAITING_FOR_PARENT_JOB;if(a==="parent-errored")return ct.PARENT_ERRORED;}}});return this.restService.addObjectParams(n,t);}cancelJobs(_){let n=no(_);return Yn(n).pipe(Qn(t=>this.authHttp.post(ut.BASE_RUNNER_URL+"/jobs/"+t.uuid+"/cancel",{})),qn(),ce(t=>this.restExtractor.handleError(t)));}removeJobs(_){let n=no(_);return Yn(n).pipe(Qn(t=>this.authHttp.delete(ut.BASE_RUNNER_URL+"/jobs/"+t.uuid)),qn(),ce(t=>this.restExtractor.handleError(t)));}listRunners(_){let{pagination:n,sort:t}=_,a=new Et();return a=this.restService.addRestGetParams(a,n,t),this.authHttp.get(ut.BASE_RUNNER_URL+"/",{params:a}).pipe(ce(r=>this.restExtractor.handleError(r)));}deleteRunner(_){return this.authHttp.delete(ut.BASE_RUNNER_URL+"/"+_.id).pipe(ce(n=>this.restExtractor.handleError(n)));}};I(ut,"BASE_RUNNER_URL",rt.apiUrl+"/api/v1/runners"),I(ut,"\u0275fac",function(n){return new(n||ut)();}),I(ut,"\u0275prov",qe({token:ut,factory:ut.ɵfac}));var tn=ut;function Td(e,_){if(e&1&&(i(0,"tr")(1,"th",19),p(2,"p-tableHeaderCheckbox",20),o(),i(3,"th",19)(4,"span",21),c(5,0),o()(),i(6,"th",22)(7,"span",21),c(8,1),o()(),i(9,"th",23),c(10,2),o(),i(11,"th",23),c(12,3),o(),i(13,"th",24),D(14,4),p(15,"p-sortIcon",25),b(),o(),i(16,"th",26),D(17,5),p(18,"p-sortIcon",27),b(),o(),i(19,"th",28),D(20,6),p(21,"p-sortIcon",29),b(),o(),i(22,"th",30),c(23,7),o(),i(24,"th",31),D(25,8),p(26,"p-sortIcon",32),b(),o(),i(27,"th",33),c(28,9),o()()),e&2){let n=d();l(13),s("ngbTooltip",n.sortTooltip),l(3),s("ngbTooltip",n.sortTooltip),l(3),s("ngbTooltip",n.sortTooltip),l(5),s("ngbTooltip",n.sortTooltip);}}function Id(e,_){if(e&1&&p(0,"my-action-dropdown",40),e&2){let n=d(2);s("actions",n.bulkActions)("entry",n.selectedRows);}}function Nd(e,_){if(e&1){let n=w();i(0,"div",34)(1,"div",35),u(2,Id,1,2,"my-action-dropdown",36),o(),i(3,"div",37)(4,"my-advanced-input-filter",38),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o(),i(5,"my-button",39),M("click",function(){f(n);let a=d();return A(a.reloadData());}),o()()();}if(e&2){let n=d();l(2),s("ngIf",n.isInSelectionMode()),l(2),s("filters",n.inputFilters);}}function Od(e,_){if(e&1&&(E(0),g(1),T()),e&2){let n=d().$implicit;l(),V("",n.progress,"%");}}function Md(e,_){if(e&1&&(i(0,"div",52),g(1),o()),e&2){let n=d().$implicit,t=d();s("ngClass",t.getRandomRunnerNameBadge(n.runner.name)),l(),V(" ",n.runner.name," ");}}function fd(e,_){if(e&1&&(i(0,"tr",41)(1,"td",42),p(2,"p-tableCheckbox",43),o(),i(3,"td",44),p(4,"my-table-expander-icon",45),o(),i(5,"td",46),p(6,"my-action-dropdown",47),o(),i(7,"td"),g(8),o(),i(9,"td")(10,"span",48),g(11),o()(),i(12,"td")(13,"span",48),g(14),o()(),i(15,"td"),g(16),o(),i(17,"td"),u(18,Od,2,1,"ng-container",49),o(),i(19,"td"),u(20,Md,2,2,"div",50),o(),i(21,"td"),g(22),o(),i(23,"td",51)(24,"div"),g(25),o(),i(26,"div"),g(27),o()()()),e&2){let n=_.expanded,t=_.$implicit,a=d();s("pSelectableRow",t),l(2),s("value",t),l(2),s("pRowToggler",t)("expanded",n),l(2),s("actions",a.actions)("entry",t),l(2),N(t.uuid),l(2),s("title",t.type)("ngClass",a.getRandomRunnerTypeBadge(t.type)),l(),N(t.type),l(2),s("title",t.state.label)("ngClass",a.getStateBadgeColor(t)),l(),N(t.state.label),l(2),N(t.priority),l(2),s("ngIf",t.progress),l(2),s("ngIf",t.runner==null?null:t.runner.name),l(2),N(t.createdAt),l(3),N(t.startedAt),l(2),N(t.finishedAt);}}function Ad(e,_){if(e&1&&(i(0,"pre",57),g(1),o()),e&2){let n=d().$implicit;l(),N(n.error);}}function Rd(e,_){if(e&1&&(i(0,"tr")(1,"td",53)(2,"div",54),g(3),p(4,"br"),g(5),p(6,"br"),g(7),p(8,"br"),o(),i(9,"div",55)(10,"strong"),c(11,10),o(),i(12,"pre"),g(13),o()(),i(14,"div",55)(15,"strong"),c(16,11),o(),i(17,"pre"),g(18),o()(),u(19,Ad,2,1,"pre",56),o()()),e&2){let n=_.$implicit;l(3),V(" Parent job: ",(n.parent==null?null:n.parent.uuid)||"-"," "),l(2),V(" Processed on ",n.startedAt||"-"," "),l(2),V(" Finished on ",n.finishedAt||"-"," "),l(6),N(n.payload),l(5),N(n.privatePayload),l(),s("ngIf",n.error);}}function Pd(e,_){e&1&&(i(0,"tr")(1,"td",53)(2,"div",58),E(3),c(4,12),T(),o()()());}var Ia=(()=>{let _=class _ extends Ge{runnerService=S(tn);notifier=S(Y);confirmService=S(be);runnerJobs=[];totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};actions=[];bulkActions=[];inputFilters=[{title:"Advanced filters",children:[{value:"state:completed",label:"Completed jobs"},{value:"state:pending state:waiting-for-parent-job",label:"Pending jobs"},{value:"state:processing",label:"Jobs that are being processed"},{value:"state:errored state:parent-errored",label:"Failed jobs"}]}];ngOnInit(){this.actions=[[{label:"Cancel this job",handler:t=>this.cancelJobs([t]),isDisplayed:t=>this.canCancelJob(t)}],[{label:"Delete this job",handler:t=>this.removeJobs([t])}]],this.bulkActions=[[{label:"Anullar",handler:t=>this.cancelJobs(t),isDisplayed:t=>t.every(a=>this.canCancelJob(a))}],[{label:"Delete",handler:t=>this.removeJobs(t)}]],this.initialize();}getIdentifier(){return"RunnerJobListComponent";}cancelJobs(t){return _e(this,null,function*(){let a=se("Do you really want to cancel {count, plural, =1 {this job} other {{count} jobs}}? Children jobs will also be cancelled.",{count:t.length});(yield this.confirmService.confirm(a,"Anullar"))!==!1&&this.runnerService.cancelJobs(t).subscribe({next:()=>{this.reloadData(),this.notifier.success(se("{count, plural, =1 {Job cancelled} other {{count} jobs cancelled}}",{count:t.length}));},error:m=>this.notifier.error(m.message)});});}removeJobs(t){return _e(this,null,function*(){let a=se("Do you really want to remove {count, plural, =1 {this job} other {{count} jobs}}? Children jobs will also be removed.",{count:t.length});(yield this.confirmService.confirm(a,"Remove"))!==!1&&this.runnerService.removeJobs(t).subscribe({next:()=>{this.reloadData(),this.notifier.success(se("{count, plural, =1 {Job removed} other {{count} jobs removed}}",{count:t.length}));},error:m=>this.notifier.error(m.message)});});}getStateBadgeColor(t){switch(t.state.id){case ct.ERRORED:case ct.PARENT_ERRORED:return"badge-danger";case ct.COMPLETED:return"badge-success";case ct.PENDING:case ct.WAITING_FOR_PARENT_JOB:return"badge-warning";default:return"badge-info";}}getRandomRunnerNameBadge(t){return this.getRandomBadge("runner",t);}getRandomRunnerTypeBadge(t){return this.getRandomBadge("type",t);}reloadDataInternal(){this.runnerService.listRunnerJobs({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe({next:t=>{this.runnerJobs=t.data,this.totalRecords=t.total;},error:t=>this.notifier.error(t.message)});}canCancelJob(t){return t.state.id===ct.PENDING||t.state.id===ct.PROCESSING||t.state.id===ct.WAITING_FOR_PARENT_JOB;}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-runner-job-list"]],features:[ne],decls:6,vars:14,consts:()=>{let t;t="Select all rows";let a;a="Mai d\u2019informacions";let r;r="Accions";let m;m="UUID";let C;C="Tipe";let O;O="Estat\n          "+"\uFFFD#15\uFFFD"+"\n          "+"\uFFFD/#15\uFFFD"+"\n        ";let P;P="Priority "+"\uFFFD#18\uFFFD"+""+"\uFFFD/#18\uFFFD"+"";let y;y="Progress "+"\uFFFD#21\uFFFD"+""+"\uFFFD/#21\uFFFD"+"";let v;v="Runner";let L;L="Creat\n          "+"\uFFFD#26\uFFFD"+"\n          "+"\uFFFD/#26\uFFFD"+"\n        ";let W;W="Processed/Finished";let k;k="Accions Batch";let $;$="Actualizar";let X;X="Select this row";let x;x="Accions";let z;z="Payload:";let G;G="Private payload:";let te;return te="No runner jobs found.",[a,r,m,C,O,P,y,v,L,W,z,G,te,["dataKey","uuid",3,"onLazyLoad","selectionChange","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","lazyLoadOnInit","selection","showCurrentPageReport","currentPageReportTemplate","expandedRowKeys"],["pTemplate","header"],["pTemplate","caption"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["scope","col",2,"width","40px"],["ariaLabel",t],[1,"visually-hidden"],["scope","col",2,"width","120px"],["scope","col"],["scope","col","container","body","pSortableColumn","state",2,"width","150px",3,"ngbTooltip"],["field","state"],["scope","col","container","body","pSortableColumn","priority",2,"width","100px",3,"ngbTooltip"],["field","priority"],["scope","col","container","body","pSortableColumn","progress",2,"width","100px",3,"ngbTooltip"],["field","progress"],["scope","col",2,"width","100px"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","200px",3,"ngbTooltip"],["field","createdAt"],["scope","col",2,"width","230px"],[1,"caption"],[1,"left-buttons"],["label",k,"theme","primary",3,"actions","entry",4,"ngIf"],[1,"ms-auto","d-flex","flex-wrap","gap-2"],[1,"me-2",3,"search","filters"],["label",$,"icon","refresh",3,"click"],["label",k,"theme","primary",3,"actions","entry"],[3,"pSelectableRow"],[1,"checkbox-cell"],["ariaLabel",X,3,"value"],[1,"expand-cell"],[3,"pRowToggler","expanded"],[1,"action-cell"],["placement","bottom-right top-right left auto","container","body","label",x,"buttonSize","small",3,"actions","entry"],[1,"pt-badge","ellipsis",3,"title","ngClass"],[4,"ngIf"],["class","pt-badge",3,"ngClass",4,"ngIf"],[1,"fs-7"],[1,"pt-badge",3,"ngClass"],["myAutoColspan",""],[1,"mt-2","fs-7","font-monospace"],[1,"mt-2"],["class","text-danger",4,"ngIf"],[1,"text-danger"],[1,"no-results"]];},template:function(a,r){a&1&&(i(0,"p-table",13),M("onLazyLoad",function(C){return r.loadLazy(C);}),Ee("selectionChange",function(C){return Se(r.selectedRows,C)||(r.selectedRows=C),C;}),u(1,Td,29,4,"ng-template",14)(2,Nd,6,2,"ng-template",15)(3,fd,28,19,"ng-template",16)(4,Rd,20,6,"ng-template",17)(5,Pd,5,0,"ng-template",18),o()),a&2&&(s("value",r.runnerJobs)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("lazyLoadOnInit",!1),Ce("selection",r.selectedRows),s("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate())("expandedRowKeys",r.expandedRows));},dependencies:[Fe,Ae,Oe,Re,Qt,Pt,Pe,Lt,$t,Me,De,B,nt,ot,et,Ft,pe,he],encapsulation:2}));let e=_;return e;})();function Fd(e,_){if(e&1&&(i(0,"tr")(1,"th",11)(2,"span",12),c(3,0),o()(),i(4,"th",13),c(5,1),o(),i(6,"th",13),c(7,2),o(),i(8,"th",13),c(9,3),o(),i(10,"th",13),c(11,4),o(),i(12,"th",14),D(13,5),p(14,"p-sortIcon",15),b(),o()()),e&2){let n=d();l(12),s("ngbTooltip",n.sortTooltip);}}function hd(e,_){if(e&1&&(i(0,"tr")(1,"td",16),p(2,"my-action-dropdown",17),o(),i(3,"td"),g(4),o(),i(5,"td"),g(6),o(),i(7,"td"),g(8),o(),i(9,"td"),g(10),oe(11,"ptDate"),o(),i(12,"td"),g(13),oe(14,"ptDate"),o()()),e&2){let n=_.$implicit,t=d();l(2),s("actions",t.actions)("entry",n),l(2),N(n.name),l(2),N(n.description),l(2),N(n.ip),l(2),N(re(11,7,n.lastContact,"short")),l(3),N(re(14,10,n.createdAt,"short"));}}function Dd(e,_){e&1&&(i(0,"tr")(1,"td",18)(2,"div",19),E(3),c(4,6),T(),o()()());}var Na=(()=>{let _=class _ extends Ge{runnerService=S(tn);notifier=S(Y);confirmService=S(be);runners=[];totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};actions=[];ngOnInit(){this.actions=[[{label:"Remove",handler:t=>this.deleteRunner(t)}]],this.initialize();}getIdentifier(){return"RunnerListComponent";}deleteRunner(t){return _e(this,null,function*(){(yield this.confirmService.confirm("Do you really want to delete this runner? It won't be able to process jobs anymore.","Remove "+t.name+""))!==!1&&this.runnerService.deleteRunner(t).subscribe({next:()=>{this.reloadData(),this.notifier.success("Runner removed.");},error:r=>this.notifier.error(r.message)});});}reloadDataInternal(){this.runnerService.listRunners({pagination:this.pagination,sort:this.sort}).subscribe({next:t=>{this.runners=t.data,this.totalRecords=t.total;},error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-runner-list"]],features:[ne],decls:4,vars:11,consts:()=>{let t;t="Accions";let a;a="Nom";let r;r="Descripcion";let m;m="IP";let C;C="Last contact";let O;O="Creat\n          "+"\uFFFD#14\uFFFD"+"\n          "+"\uFFFD/#14\uFFFD"+"\n        ";let P;P="Accions";let y;return y="No remote runners found.",[t,a,r,m,C,O,y,[3,"onLazyLoad","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","showCurrentPageReport","currentPageReportTemplate"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],["scope","col",2,"width","120px"],[1,"visually-hidden"],["scope","col"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[1,"action-cell"],["placement","bottom-right top-right left auto","container","body","label",P,"buttonSize","small",3,"actions","entry"],["myAutoColspan",""],[1,"no-results"]];},template:function(a,r){a&1&&(i(0,"p-table",7),M("onLazyLoad",function(C){return r.loadLazy(C);}),u(1,Fd,15,1,"ng-template",8)(2,hd,15,13,"ng-template",9)(3,Dd,5,0,"ng-template",10),o()),a&2&&s("value",r.runners)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate());},dependencies:[Fe,Ae,Oe,Re,Pe,Me,De,nt,he,ve],encapsulation:2}));let e=_;return e;})();function bd(e,_){if(e&1&&(i(0,"tr")(1,"th",10)(2,"span",11),c(3,0),o()(),i(4,"th",12),c(5,1),o(),i(6,"th",13),D(7,2),p(8,"p-sortIcon",14),b(),o(),i(9,"th",15),c(10,3),o()()),e&2){let n=d();l(6),s("ngbTooltip",n.sortTooltip);}}function vd(e,_){if(e&1){let n=w();i(0,"div",16)(1,"div",17)(2,"my-button",18),M("click",function(){f(n);let a=d();return A(a.generateToken());}),o()()();}}function yd(e,_){if(e&1&&(i(0,"tr")(1,"td",19),p(2,"my-action-dropdown",20),o(),i(3,"td"),g(4),p(5,"my-copy-button",21),o(),i(6,"td"),g(7),oe(8,"ptDate"),o(),i(9,"td"),g(10),o()()),e&2){let n=_.$implicit,t=d();l(2),s("actions",t.actions)("entry",n),l(2),V(" ",n.registrationToken," "),l(),s("value",n.registrationToken),l(2),N(re(8,6,n.createdAt,"short")),l(3),N(n.registeredRunnersCount);}}function Ld(e,_){e&1&&(i(0,"tr")(1,"td",22)(2,"div",23),E(3),c(4,4),T(),o()()());}var Oa=(()=>{let _=class _ extends Ge{runnerService=S(tn);notifier=S(Y);confirmService=S(be);registrationTokens=[];totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};actions=[];ngOnInit(){this.actions=[[{label:"Remove this token",handler:t=>this.removeToken(t)}]],this.initialize();}getIdentifier(){return"RunnerRegistrationTokenListComponent";}generateToken(){this.runnerService.generateToken().subscribe({next:()=>{this.reloadData(),this.notifier.success("Registration token generated.");},error:t=>this.notifier.error(t.message)});}removeToken(t){return _e(this,null,function*(){(yield this.confirmService.confirm("Do you really want to remove this registration token? All associated runners will also be removed.","Remove registration token"))!==!1&&this.runnerService.removeToken(t).subscribe({next:()=>{this.reloadData(),this.notifier.success("Registration token removed.");},error:r=>this.notifier.error(r.message)});});}reloadDataInternal(){this.runnerService.listRegistrationTokens({pagination:this.pagination,sort:this.sort}).subscribe({next:t=>{this.registrationTokens=t.data,this.totalRecords=t.total;},error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-runner-registration-token-list"]],features:[ne],decls:5,vars:11,consts:()=>{let t;t="Accions";let a;a="Token";let r;r="Creat\n          "+"\uFFFD#8\uFFFD"+"\n          "+"\uFFFD/#8\uFFFD"+"\n        ";let m;m="Associated runners";let C;C="Generate token";let O;O="Accions";let P;P="Registration token copied";let y;y="Copy registration token";let v;return v="No registration token found for remote runners.",[t,a,r,m,v,[3,"onLazyLoad","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","showCurrentPageReport","currentPageReportTemplate"],["pTemplate","header"],["pTemplate","caption"],["pTemplate","body"],["pTemplate","emptymessage"],["scope","col",2,"width","120px"],[1,"visually-hidden"],["scope","col"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],["scope","col",2,"width","160px"],[1,"caption"],[1,"left-buttons"],["theme","primary","label",C,"icon","add",3,"click"],[1,"action-cell"],["placement","bottom-right top-right left auto","container","body","label",O,"buttonSize","small",3,"actions","entry"],["notification",P,"title",y,3,"value"],["myAutoColspan",""],[1,"no-results"]];},template:function(a,r){a&1&&(i(0,"p-table",5),M("onLazyLoad",function(C){return r.loadLazy(C);}),u(1,bd,11,1,"ng-template",6)(2,vd,3,0,"ng-template",7)(3,yd,11,9,"ng-template",8)(4,Ld,5,0,"ng-template",9),o()),a&2&&s("value",r.registrationTokens)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate());},dependencies:[Fe,Ae,Oe,Re,Pe,Me,De,et,nt,Fo,he,ve],styles:[`my-copy-button[_ngcontent-%COMP%]{margin-inline-start:.1875rem}tr[_ngcontent-%COMP%]:not(:hover)   my-copy-button[_ngcontent-%COMP%]{opacity:0}
/*# sourceMappingURL=runner-registration-token-list.component-5FVYPWF2.css.map */`]}));let e=_;return e;})();var Ma=[{path:"runners",canActivate:[ye],data:{userRight:Q.MANAGE_RUNNERS},children:[{path:"",redirectTo:"jobs-list",pathMatch:"full"},{path:"jobs-list",component:Ia,data:{meta:{title:"List runner jobs"}}},{path:"runners-list",component:Na,data:{meta:{title:"List remote runners"}}},{path:"registration-tokens-list",component:Oa,data:{meta:{title:"List registration runner tokens"}}}]}];var fa=[{path:"system",children:[{path:"",redirectTo:"jobs",pathMatch:"full"},{path:"jobs",canActivate:[ye],component:Ea,data:{meta:{userRight:Q.MANAGE_JOBS,title:"Jobs"}}},{path:"logs",canActivate:[ye],component:Ta,data:{meta:{userRight:Q.MANAGE_LOGS,title:"Logs"}}},{path:"debug",canActivate:[ye],component:Sa,data:{meta:{userRight:Q.MANAGE_DEBUG,title:"Debug"}}},...Ma]}];var Aa=(()=>{let _=class _{auth=S(At);server=S(fe);menuEntries=[];ngOnInit(){this.server.configReloaded.subscribe(()=>this.buildMenu()),this.buildMenu();}buildMenu(){if(this.menuEntries=[],this.hasRight(Q.MANAGE_ABUSES)&&this.menuEntries.push({label:"Reports",routerLink:"/admin/moderation/abuses/list"}),this.hasRight(Q.MANAGE_REGISTRATIONS)&&this.menuEntries.push({label:"Registrations",routerLink:"/admin/moderation/registrations/list"}),this.hasRight(Q.MANAGE_VIDEO_BLACKLIST)&&this.menuEntries.push({label:"Video blocks",routerLink:"/admin/moderation/video-blocks/list"}),this.hasRight(Q.MANAGE_ACCOUNTS_BLOCKLIST)||this.hasRight(Q.MANAGE_SERVERS_BLOCKLIST)){let t={label:"Mutes",routerLink:"",children:[]};this.hasRight(Q.MANAGE_ACCOUNTS_BLOCKLIST)&&t.children.push({label:"Comptes muts",routerLink:"/admin/moderation/blocklist/accounts"}),this.hasRight(Q.MANAGE_SERVERS_BLOCKLIST)&&t.children.push({label:"Servidors muts",routerLink:"/admin/moderation/blocklist/servers"}),t.routerLink=t.children[0].routerLink,this.menuEntries.push(t);}this.hasRight(Q.MANAGE_INSTANCE_WATCHED_WORDS)&&this.menuEntries.push({label:"Watched words",routerLink:"/admin/moderation/watched-words/list"});}hasRight(t){return this.auth.getUser().hasRight(t);}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-admin-moderation"]],decls:8,vars:1,consts:()=>{let t;t="Moderacion";let a;return a="Skip the sub menu",[["adminContent",""],a,[1,"root"],["href","#admin-moderation-content",1,"visually-hidden-focusable","skip-to-content-sub-menu",3,"click"],[1,"margin-content"],["h1",t,"h1Icon","moderation",3,"menuEntries"],["tabindex","-1","id","admin-moderation-content",1,"margin-content","outline-0"]];},template:function(a,r){if(a&1){let m=w();i(0,"div",2)(1,"a",3),M("click",function(O){f(m);let P=Ot(6);return O.preventDefault(),A(P.focus());}),c(2,1),o(),i(3,"div",4),p(4,"my-horizontal-menu",5),o(),i(5,"div",6,0),p(7,"router-outlet"),o()();}a&2&&(l(4),s("menuEntries",r.menuEntries));},dependencies:[xn,vn],encapsulation:2}));let e=_;return e;})();var Ra=(()=>{let _=class _{auth=S(At);menuEntries=[];ngOnInit(){this.buildMenu();}buildMenu(){this.menuEntries=[],this.hasRight(Q.MANAGE_USERS)&&this.menuEntries.push({label:"Utilizaires",routerLink:"/admin/overview/users"}),this.hasRight(Q.SEE_ALL_VIDEOS)&&this.menuEntries.push({label:"Videos",routerLink:"/admin/overview/videos",queryParams:{search:"isLocal:true"}}),this.hasRight(Q.SEE_ALL_COMMENTS)&&this.menuEntries.push({label:"Comentaris",routerLink:"/admin/overview/comments"});}hasRight(t){return this.auth.getUser().hasRight(t);}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-admin-overview"]],decls:8,vars:1,consts:()=>{let t;t="Overview";let a;return a="Skip the sub menu",[["adminContent",""],a,[1,"root"],["href","#admin-overview-content",1,"visually-hidden-focusable","skip-to-content-sub-menu",3,"click"],[1,"margin-content"],["h1",t,"h1Icon","overview",3,"menuEntries"],["tabindex","-1","id","admin-overview-content",1,"margin-content","outline-0"]];},template:function(a,r){if(a&1){let m=w();i(0,"div",2)(1,"a",3),M("click",function(O){f(m);let P=Ot(6);return O.preventDefault(),A(P.focus());}),c(2,1),o(),i(3,"div",4),p(4,"my-horizontal-menu",5),o(),i(5,"div",6,0),p(7,"router-outlet"),o()();}a&2&&(l(4),s("menuEntries",r.menuEntries));},dependencies:[xn,vn],encapsulation:2}));let e=_;return e;})();var Pa=(()=>{let _=class _{auth=S(At);server=S(fe);menuEntries=[];ngOnInit(){this.server.configReloaded.subscribe(()=>this.buildMenu()),this.buildMenu();}buildMenu(){this.menuEntries=[],this.buildConfigurationItems(),this.buildFederationItems(),this.buildPluginItems(),this.buildRunnerItems(),this.buildSystemItems();}buildFederationItems(){this.hasRight(Q.MANAGE_SERVER_FOLLOW)&&this.menuEntries.push({label:"Federation",routerLink:"/admin/settings/follows/following-list",children:[{label:"Following",routerLink:"/admin/settings/follows/following-list"},{label:"Followers",routerLink:"/admin/settings/follows/followers-list"},{label:"Redond\xE0ncia de las vid\xE8os",routerLink:"/admin/settings/follows/video-redundancies-list"}]});}buildConfigurationItems(){this.hasRight(Q.MANAGE_CONFIGURATION)&&this.menuEntries.push({label:"Configuracion",routerLink:"/admin/settings/config"});}buildPluginItems(){this.hasRight(Q.MANAGE_PLUGINS)&&this.menuEntries.push({label:"Extensions/T\xE8mas",routerLink:"/admin/settings/plugins",queryParams:{pluginType:st.PLUGIN},children:[{label:"Installed plugins",routerLink:"/admin/settings/plugins/list-installed",queryParams:{pluginType:st.PLUGIN}},{label:"Search plugins",routerLink:"/admin/settings/plugins/search",queryParams:{pluginType:st.PLUGIN}},{label:"Installed themes",routerLink:"/admin/settings/plugins/list-installed",queryParams:{pluginType:st.THEME}},{label:"Search themes",routerLink:"/admin/settings/plugins/search",queryParams:{pluginType:st.THEME}}]});}buildRunnerItems(){!this.isRemoteRunnersEnabled()||!this.hasRight(Q.MANAGE_RUNNERS)||this.menuEntries.push({label:"Runners",routerLink:"/admin/settings/system/runners/runners-list",children:[{label:"Remote runners",routerLink:"/admin/settings/system/runners/runners-list"},{label:"Runner jobs",routerLink:"/admin/settings/system/runners/jobs-list"},{label:"Registration tokens",routerLink:"/admin/settings/system/runners/registration-tokens-list"}]});}buildSystemItems(){let t={label:"Sist\xE8ma",routerLink:"",children:[]};this.hasRight(Q.MANAGE_JOBS)&&t.children.push({label:"Local jobs",routerLink:"/admin/settings/system/jobs"}),this.hasRight(Q.MANAGE_LOGS)&&t.children.push({label:"Logs",routerLink:"/admin/settings/system/logs"}),this.hasRight(Q.MANAGE_DEBUG)&&t.children.push({label:"Debug",routerLink:"/admin/settings/system/debug"}),t.children.length!==0&&(t.routerLink=t.children[0].routerLink,this.menuEntries.push(t));}hasRight(t){return this.auth.getUser().hasRight(t);}isRemoteRunnersEnabled(){let t=this.server.getHTMLConfig();return t.transcoding.remoteRunners.enabled||t.live.transcoding.remoteRunners.enabled||t.videoStudio.remoteRunners.enabled||t.videoTranscription.remoteRunners.enabled;}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-admin-settings"]],decls:8,vars:1,consts:()=>{let t;t="Param\xE8tres";let a;return a="Skip the sub menu",[["adminContent",""],a,[1,"root"],["href","#admin-settings-content",1,"visually-hidden-focusable","skip-to-content-sub-menu",3,"click"],[1,"margin-content"],["h1",t,"h1Icon","config",3,"menuEntries"],["tabindex","-1","id","admin-settings-content",1,"margin-content","outline-0"]];},template:function(a,r){if(a&1){let m=w();i(0,"div",2)(1,"a",3),M("click",function(O){f(m);let P=Ot(6);return O.preventDefault(),A(P.focus());}),c(2,1),o(),i(3,"div",4),p(4,"my-horizontal-menu",5),o(),i(5,"div",6,0),p(7,"router-outlet"),o()();}a&2&&(l(4),s("menuEntries",r.menuEntries));},dependencies:[xn,vn],encapsulation:2}));let e=_;return e;})();function $d(e,_){if(e&1&&p(0,"my-action-dropdown",20),e&2){let n=d(2);s("actions",n.bulkActions)("entry",n.selectedRows);}}function xd(e,_){if(e&1){let n=w();i(0,"div",15)(1,"div",16),u(2,$d,1,2,"my-action-dropdown",17),o(),i(3,"div",18)(4,"my-advanced-input-filter",19),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o()()();}if(e&2){let n=d();l(2),s("ngIf",n.isInSelectionMode()),l(2),s("filters",n.searchFilters);}}function Gd(e,_){if(e&1&&(i(0,"tr")(1,"th",21),p(2,"p-tableHeaderCheckbox",22),o(),i(3,"th",23),c(4,0),o(),i(5,"th",24),c(6,1),o(),i(7,"th",25),D(8,2),p(9,"p-sortIcon",26),b(),o(),i(10,"th",27),D(11,3),p(12,"p-sortIcon",28),b(),o(),i(13,"th",29),D(14,4),p(15,"p-sortIcon",30),b(),o()()),e&2){let n=d();l(7),s("ngbTooltip",n.sortTooltip),l(3),s("ngbTooltip",n.sortTooltip),l(3),s("ngbTooltip",n.sortTooltip);}}function Ud(e,_){if(e&1){let n=w();i(0,"my-button",42),M("click",function(){f(n);let a=d().$implicit,r=d();return A(r.acceptFollower([a]));}),o();}}function wd(e,_){if(e&1){let n=w();i(0,"my-button",43),M("click",function(){f(n);let a=d().$implicit,r=d();return A(r.rejectFollower([a]));}),o();}}function Vd(e,_){if(e&1){let n=w();i(0,"my-delete-button",44),M("click",function(){f(n);let a=d().$implicit,r=d();return A(r.deleteFollowers([a]));}),o();}}function kd(e,_){e&1&&(i(0,"span",45),c(1,5),o());}function zd(e,_){e&1&&(i(0,"span",46),c(1,6),o());}function Xd(e,_){e&1&&(i(0,"span",47),c(1,7),o());}function Bd(e,_){if(e&1&&(i(0,"tr")(1,"td",31),p(2,"p-tableCheckbox",32),o(),i(3,"td",33),u(4,Ud,1,0,"my-button",34)(5,wd,1,0,"my-button",35)(6,Vd,1,0,"my-delete-button",36),o(),i(7,"td")(8,"a",37),g(9),p(10,"my-global-icon",38),o()(),i(11,"td"),u(12,kd,2,0,"span",39)(13,zd,2,0,"span",40)(14,Xd,2,0,"span",41),o(),i(15,"td"),g(16),o(),i(17,"td"),g(18),oe(19,"ptDate"),o()()),e&2){let n=_.$implicit,t=d();l(2),s("value",n),l(2),s("ngIf",n.state!=="accepted"),l(),s("ngIf",n.state!=="rejected"),l(),s("ngIf",n.state==="rejected"),l(2),s("href",n.follower.url,ke),l(),V(" ",t.buildFollowerName(n)," "),l(3),s("ngIf",n.state==="accepted"),l(),s("ngIf",n.state==="pending"),l(),s("ngIf",n.state==="rejected"),l(2),N(n.score/1e4*100),l(2),N(re(19,11,n.createdAt,"short"));}}function Wd(e,_){e&1&&(E(0),c(1,8),T());}function Hd(e,_){e&1&&(E(0),c(1,9),T());}function jd(e,_){if(e&1&&(i(0,"tr")(1,"td",48)(2,"div",49),u(3,Wd,2,0,"ng-container",50)(4,Hd,2,0,"ng-container",50),o()()()),e&2){let n=d();l(3),s("ngIf",n.search),l(),s("ngIf",!n.search);}}var Fa=(()=>{let _=class _ extends Ge{confirmService=S(be);notifier=S(Y);followService=S(fn);followers=[];totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};searchFilters=[];bulkActions=[];ngOnInit(){this.initialize(),this.searchFilters=this.followService.buildFollowsListFilters(),this.bulkActions=[{label:"Regetar",handler:t=>this.rejectFollower(t),isDisplayed:t=>t.every(a=>a.state!=="rejected")},{label:"Acceptar",handler:t=>this.acceptFollower(t),isDisplayed:t=>t.every(a=>a.state!=="accepted")},{label:"Delete",handler:t=>this.deleteFollowers(t),isDisplayed:t=>t.every(a=>a.state==="rejected")}];}getIdentifier(){return"FollowersListComponent";}acceptFollower(t){this.followService.acceptFollower(t).subscribe({next:()=>{let a=se("Accepted {count, plural, =1 {{followerName} follow request} other {{count} follow requests}}",{count:t.length,followerName:this.buildFollowerName(t[0])});this.notifier.success(a),this.reloadData();},error:a=>this.notifier.error(a.message)});}rejectFollower(t){return _e(this,null,function*(){let a=se("Do you really want to reject {count, plural, =1 {{followerName} follow request?} other {{count} follow requests?}}",{count:t.length,followerName:this.buildFollowerName(t[0])});(yield this.confirmService.confirm(a,"Regetar"))!==!1&&this.followService.rejectFollower(t).subscribe({next:()=>{let m=se("Rejected {count, plural, =1 {{followerName} follow request} other {{count} follow requests}}",{count:t.length,followerName:this.buildFollowerName(t[0])});this.notifier.success(m),this.reloadData();},error:m=>this.notifier.error(m.message)});});}deleteFollowers(t){return _e(this,null,function*(){let a={count:t.length,followerName:this.buildFollowerName(t[0])},r="Deleted followers will be able to send again a follow request.";r+="<br /><br />",r+=se("Do you really want to delete {count, plural, =1 {{followerName} follow request?} other {{count} follow requests?}}",a),(yield this.confirmService.confirm(r,"Delete"))!==!1&&this.followService.removeFollower(t).subscribe({next:()=>{let C=se("Removed {count, plural, =1 {{followerName} follow request} other {{count} follow requests}}",a);this.notifier.success(C),this.reloadData();},error:C=>this.notifier.error(C.message)});});}buildFollowerName(t){return t.follower.name+"@"+t.follower.host;}reloadDataInternal(){this.followService.getFollowers({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe({next:t=>{this.followers=t.data,this.totalRecords=t.total;},error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-followers-list"]],features:[ne],decls:5,vars:13,consts:()=>{let t;t="Accions Batch";let a;a="Select all rows";let r;r="Accions";let m;m="Follower";let C;C="Estat\n          "+"\uFFFD#9\uFFFD"+"\n          "+"\uFFFD/#9\uFFFD"+"\n        ";let O;O="Link health "+"\uFFFD#12\uFFFD"+""+"\uFFFD/#12\uFFFD"+"";let P;P="Creat\n          "+"\uFFFD#15\uFFFD"+"\n          "+"\uFFFD/#15\uFFFD"+"\n        ";let y;y="Select this row";let v;v="Acceptar";let L;L="Regetar";let W;W="Open actor page in a new tab";let k;k="Acceptat";let $;$="En esp\xE8ra";let X;X="Rejected";let x;x="No follower found matching current filters.";let z;return z="Your instance doesn't have any follower.",[r,m,C,O,P,k,$,X,x,z,[3,"onLazyLoad","selectionChange","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","lazyLoadOnInit","showCurrentPageReport","currentPageReportTemplate","selection"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"caption"],[1,"left-buttons"],["label",t,"theme","primary",3,"actions","entry",4,"ngIf"],[1,"ms-auto"],[3,"search","filters"],["label",t,"theme","primary",3,"actions","entry"],["scope","col",2,"width","40px"],["ariaLabel",a],["scope","col",2,"width","150px"],["scope","col"],["scope","col","container","body","pSortableColumn","state",2,"width","100px",3,"ngbTooltip"],["field","state"],["scope","col","container","body","pSortableColumn","score",2,"width","150px",3,"ngbTooltip"],["field","score"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],[1,"checkbox-cell"],["ariaLabel",y,3,"value"],[1,"action-cell"],["title",v,"icon","tick",3,"click",4,"ngIf"],["title",L,"icon","cross",3,"click",4,"ngIf"],[3,"click",4,"ngIf"],["title",W,"target","_blank","rel","noopener noreferrer",3,"href"],["iconName","external-link"],["class","pt-badge badge-green",4,"ngIf"],["class","pt-badge badge-yellow",4,"ngIf"],["class","pt-badge badge-red",4,"ngIf"],["title",v,"icon","tick",3,"click"],["title",L,"icon","cross",3,"click"],[3,"click"],[1,"pt-badge","badge-green"],[1,"pt-badge","badge-yellow"],[1,"pt-badge","badge-red"],["myAutoColspan",""],[1,"no-results"],[4,"ngIf"]];},template:function(a,r){a&1&&(i(0,"p-table",10),M("onLazyLoad",function(C){return r.loadLazy(C);}),Ee("selectionChange",function(C){return Se(r.selectedRows,C)||(r.selectedRows=C),C;}),u(1,xd,5,2,"ng-template",11)(2,Gd,16,3,"ng-template",12)(3,Bd,20,14,"ng-template",13)(4,jd,5,2,"ng-template",14),o()),a&2&&(s("value",r.followers)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("lazyLoadOnInit",!1)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate()),Ce("selection",r.selectedRows));},dependencies:[Ue,Fe,Ae,Oe,Re,Pe,Lt,$t,Me,B,nt,ot,De,et,Mn,he,ve],styles:[`.action-cell[_ngcontent-%COMP%]   my-button[_ngcontent-%COMP%]:first-child{margin-inline-end:.625rem}my-delete-button[_ngcontent-%COMP%]{max-width:130px}
/*# sourceMappingURL=followers-list.component-ECHJAOVV.css.map */`]}));let e=_;return e;})();var Kd=["modal"],Jd=e=>({"input-error":e});function Yd(e,_){if(e&1&&(i(0,"div"),g(1),o()),e&2){let n=d(3);l(),V(" ",n.form.controls.hostsOrHandles.errors.validHostsOrHandles.value," ");}}function qd(e,_){if(e&1&&(i(0,"div",18),g(1),u(2,Yd,2,1,"div",19),o()),e&2){let n=d(2);l(),V(" ",n.formErrors.hostsOrHandles," "),l(),s("ngIf",n.form.controls.hostsOrHandles.errors.validHostsOrHandles);}}function Qd(e,_){e&1&&(i(0,"my-alert",20),c(1,3),o());}function Zd(e,_){if(e&1){let n=w();i(0,"div",4)(1,"h4",5),c(2,1),o(),i(3,"button",6),M("click",function(){f(n);let a=d();return A(a.hide());}),p(4,"my-global-icon",7),o()(),i(5,"div",8)(6,"form",9),M("ngSubmit",function(){f(n);let a=d();return A(a.submit());}),i(7,"div",10)(8,"label",11),c(9,2),o(),p(10,"textarea",12),u(11,qd,3,2,"div",13),o(),u(12,Qd,2,0,"my-alert",14),i(13,"div",15)(14,"input",16),M("click",function(){f(n);let a=d();return A(a.hide());})("key.enter",function(){f(n);let a=d();return A(a.hide());}),o(),p(15,"input",17),o()()();}if(e&2){let n=d();l(6),s("formGroup",n.form),l(4),s("placeholder",n.placeholder)("ngClass",H(6,Jd,n.formErrors.hostsOrHandles)),l(),s("ngIf",n.formErrors.hostsOrHandles),l(),s("ngIf",n.httpEnabled()===!1),l(3),s("disabled",!n.form.valid);}}var ha=(()=>{let _=class _ extends vt{formReactiveService=S(ft);modalService=S(So);followService=S(fn);notifier=S(Y);modal=Ct("modal");newFollow=co();placeholder=`example.com
chocobozzz@example.com
chocobozzz_channel@example.com`;openedModal;ngOnInit(){this.buildForm({hostsOrHandles:N_});}openModal(){this.openedModal=this.modalService.open(this.modal(),{centered:!0});}hide(){this.openedModal.close();}submit(){this.addFollowing(),this.form.reset(),this.hide();}httpEnabled(){return window.location.protocol==="https:";}addFollowing(){let t=Yr(this.form.value.hostsOrHandles);this.followService.follow(t).subscribe({next:()=>{this.notifier.success(se("{count, plural, =1 {Follow request sent!} other {Follow requests sent!}}",{count:t.length})),this.newFollow.emit();},error:a=>this.notifier.error(a.message)});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-follow-modal"]],viewQuery:function(a,r){a&1&&St(r.modal,Kd,5),a&2&&Nt();},outputs:{newFollow:"newFollow"},features:[ne],decls:2,vars:0,consts:()=>{let t;t="Close this modal";let a;a="Anullar";let r;r="Follow";let m;m="Follow";let C;C="1 host (without \"http://\"), account handle or channel handle per line";let O;return O="\n      It seems that you are not on a HTTPS server. Your webserver needs to have TLS activated in order to follow servers.\n    ",[["modal",""],m,C,O,[1,"modal-header"],[1,"modal-title"],["title",t,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["for","hostsOrHandles"],["formControlName","hostsOrHandles","type","text","id","hostsOrHandles","name","hostsOrHandles","ngbAutofocus","",1,"form-control",3,"placeholder","ngClass"],["class","form-error","role","alert",4,"ngIf"],["type","warning",4,"ngIf"],[1,"form-group","inputs"],["type","button","role","button","value",a,1,"peertube-button","secondary-button",3,"click","key.enter"],["type","submit","value",r,1,"peertube-button","primary-button",3,"disabled"],["role","alert",1,"form-error"],[4,"ngIf"],["type","warning"]];},template:function(a,r){a&1&&u(0,Zd,16,8,"ng-template",null,0,En);},dependencies:[Ue,le,Mt,$e,me,Te,Ne,Ie,xe,pe,B,Rt],styles:[`textarea[_ngcontent-%COMP%]{height:200px}
/*# sourceMappingURL=follow-modal.component-E5VWE4B4.css.map */`]}));let e=_;return e;})();var Da=(()=>{let _=class _{notifier=S(Y);redundancyService=S(Lo);host=q(void 0);redundancyAllowed=Cr(void 0);updateRedundancyState(){this.redundancyService.updateRedundancy(this.host(),this.redundancyAllowed()).subscribe({next:()=>{let t=this.redundancyAllowed()?"activada":"desactivada";this.notifier.success("La redond\xE0ncia per\n          "+this.host()+" es\n          "+t+"\n        ");},error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-redundancy-checkbox"]],inputs:{host:[1,"host"],redundancyAllowed:[1,"redundancyAllowed"]},outputs:{redundancyAllowed:"redundancyAllowedChange"},decls:1,vars:2,consts:[[3,"ngModelChange","inputName","ngModel"]],template:function(a,r){a&1&&(i(0,"my-peertube-checkbox",0),Ee("ngModelChange",function(C){return Se(r.redundancyAllowed,C)||(r.redundancyAllowed=C),C;}),M("ngModelChange",function(){return r.updateRedundancyState();}),o()),a&2&&(s("inputName",r.host()+"-redundancy-allowed"),Ce("ngModel",r.redundancyAllowed));},dependencies:[tt,le,me,ht],encapsulation:2}));let e=_;return e;})();var ep=["followModal"];function tp(e,_){if(e&1&&p(0,"my-action-dropdown",24),e&2){let n=d(2);s("actions",n.bulkActions)("entry",n.selectedRows);}}function np(e,_){if(e&1){let n=w();i(0,"button",25),M("click",function(){f(n);let a=d(2);return A(a.openFollowModal());}),p(1,"my-global-icon",26),E(2),c(3,1),T(),o();}}function op(e,_){if(e&1){let n=w();i(0,"div",17)(1,"div",18),u(2,tp,1,2,"my-action-dropdown",19)(3,np,4,0,"button",20),o(),i(4,"div",21)(5,"my-advanced-input-filter",22),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o(),i(6,"my-button",23),M("click",function(){f(n);let a=d();return A(a.reloadData());}),o()()();}if(e&2){let n=d();l(2),s("ngIf",n.isInSelectionMode()),l(),s("ngIf",!n.isInSelectionMode()),l(2),s("filters",n.searchFilters);}}function ip(e,_){e&1&&(i(0,"tr")(1,"th",27),p(2,"p-tableHeaderCheckbox",28),o(),i(3,"th",29),c(4,2),o(),i(5,"th",30),c(6,3),o(),i(7,"th",31),D(8,4),p(9,"p-sortIcon",32),b(),o(),i(10,"th",33),D(11,5),p(12,"p-sortIcon",34),b(),o(),i(13,"th",35),D(14,6),p(15,"p-sortIcon",36),b(),o()());}function rp(e,_){e&1&&(i(0,"span",48),c(1,7),o());}function _p(e,_){e&1&&(i(0,"span",49),c(1,8),o());}function ap(e,_){e&1&&(i(0,"span",50),c(1,9),o());}function lp(e,_){if(e&1&&p(0,"my-redundancy-checkbox",51),e&2){let n=d().$implicit;s("host",n.following.host)("redundancyAllowed",n.following.hostRedundancyAllowed);}}function sp(e,_){if(e&1){let n=w();i(0,"tr",37)(1,"td",38),p(2,"p-tableCheckbox",39),o(),i(3,"td",40)(4,"my-delete-button",41),M("click",function(){let a=f(n).$implicit,r=d();return A(r.removeFollowing([a]));}),o()(),i(5,"td")(6,"a",42),g(7),p(8,"my-global-icon",43),o()(),i(9,"td"),u(10,rp,2,0,"span",44)(11,_p,2,0,"span",45)(12,ap,2,0,"span",46),o(),i(13,"td"),g(14),oe(15,"ptDate"),o(),i(16,"td"),u(17,lp,1,2,"my-redundancy-checkbox",47),o()();}if(e&2){let n=_.$implicit,t=d();l(2),s("value",n),l(4),s("href",n.following.url,ke),l(),V(" ",t.buildFollowingName(n)," "),l(3),s("ngIf",n.state==="accepted"),l(),s("ngIf",n.state==="pending"),l(),s("ngIf",n.state==="rejected"),l(2),N(re(15,8,n.createdAt,"short")),l(3),s("ngIf",t.isInstanceFollowing(n));}}function cp(e,_){e&1&&(E(0),c(1,10),T());}function dp(e,_){e&1&&(E(0),c(1,11),T());}function pp(e,_){if(e&1&&(i(0,"tr")(1,"td",52)(2,"div",53),u(3,cp,2,0,"ng-container",54)(4,dp,2,0,"ng-container",54),o()()()),e&2){let n=d();l(3),s("ngIf",n.search),l(),s("ngIf",!n.search);}}var ba=(()=>{let _=class _ extends Ge{notifier=S(Y);confirmService=S(be);followService=S(fn);followModal=Ct("followModal");following=[];totalRecords=0;sort={field:"createdAt",order:-1};pagination={count:this.rowsPerPage,start:0};searchFilters=[];bulkActions=[];ngOnInit(){this.initialize(),this.searchFilters=this.followService.buildFollowsListFilters(),this.bulkActions=[{label:"Delete",handler:t=>this.removeFollowing(t)}];}getIdentifier(){return"FollowingListComponent";}openFollowModal(){this.followModal().openModal();}isInstanceFollowing(t){return t.following.name==="peertube";}buildFollowingName(t){return t.following.name+"@"+t.following.host;}removeFollowing(t){return _e(this,null,function*(){let a={count:t.length,entryName:this.buildFollowingName(t[0])},r=se("Do you really want to unfollow {count, plural, =1 {{entryName}?} other {{count} entries?}}",a);(yield this.confirmService.confirm(r,"Quitar de seguir"))!==!1&&this.followService.unfollow(t).subscribe({next:()=>{let C=se("You are not following {count, plural, =1 {{entryName} anymore.} other {these {count} entries anymore.}}",a);this.notifier.success(C),this.reloadData();},error:C=>this.notifier.error(C.message)});});}reloadDataInternal(){this.followService.getFollowing({pagination:this.pagination,sort:this.sort,search:this.search}).subscribe({next:t=>{this.following=t.data,this.totalRecords=t.total;},error:t=>this.notifier.error(t.message)});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["ng-component"]],viewQuery:function(a,r){a&1&&St(r.followModal,ep,5),a&2&&Nt();},features:[ne],decls:7,vars:13,consts:()=>{let t;t="Accions Batch";let a;a="Actualizar";let r;r="Follow";let m;m="Select all rows";let C;C="Action";let O;O="Following";let P;P="Estat\n          "+"\uFFFD#9\uFFFD"+"\n          "+"\uFFFD/#9\uFFFD"+"\n        ";let y;y="Creat\n          "+"\uFFFD#12\uFFFD"+"\n          "+"\uFFFD/#12\uFFFD"+"\n        ";let v;v="Redundancy allowed\n          "+"\uFFFD#15\uFFFD"+"\n          "+"\uFFFD/#15\uFFFD"+"\n        ";let L;L="Select this row";let W;W="Open instance in a new tab";let k;k="Acceptat";let $;$="En esp\xE8ra";let X;X="Rejected";let x;x="No host found matching current filters.";let z;return z="Your instance is not following anyone.",[["followModal",""],r,C,O,P,y,v,k,$,X,x,z,[3,"onLazyLoad","selectionChange","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","lazy","lazyLoadOnInit","showCurrentPageReport","currentPageReportTemplate","selection"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","emptymessage"],[1,"caption"],[1,"left-buttons"],["label",t,"theme","primary",3,"actions","entry",4,"ngIf"],["class","peertube-create-button",3,"click",4,"ngIf"],[1,"ms-auto","d-flex","gap-2","flex-wrap"],[3,"search","filters"],["label",a,"icon","refresh",3,"click"],["label",t,"theme","primary",3,"actions","entry"],[1,"peertube-create-button",3,"click"],["iconName","following","aria-hidden","true"],["scope","col",2,"width","40px"],["ariaLabel",m],["scope","col",2,"width","150px"],["scope","col"],["scope","col","pSortableColumn","state",2,"width","100px"],["field","state"],["scope","col","pSortableColumn","createdAt",2,"width","150px"],["field","createdAt"],["scope","col","pSortableColumn","redundancyAllowed",2,"width","160px"],["field","redundancyAllowed"],["pSelectableRow","follow"],[1,"checkbox-cell"],["ariaLabel",L,3,"value"],[1,"action-cell"],["label","",3,"click"],["title",W,"target","_blank","rel","noopener noreferrer",3,"href"],["iconName","external-link"],["class","pt-badge badge-green",4,"ngIf"],["class","pt-badge badge-yellow",4,"ngIf"],["class","pt-badge badge-red",4,"ngIf"],[3,"host","redundancyAllowed",4,"ngIf"],[1,"pt-badge","badge-green"],[1,"pt-badge","badge-yellow"],[1,"pt-badge","badge-red"],[3,"host","redundancyAllowed"],["myAutoColspan",""],[1,"no-results"],[4,"ngIf"]];},template:function(a,r){if(a&1){let m=w();i(0,"p-table",12),M("onLazyLoad",function(O){return f(m),A(r.loadLazy(O));}),Ee("selectionChange",function(O){return f(m),Se(r.selectedRows,O)||(r.selectedRows=O),A(O);}),u(1,op,7,3,"ng-template",13)(2,ip,16,0,"ng-template",14)(3,sp,18,11,"ng-template",15)(4,pp,5,2,"ng-template",16),o(),p(5,"my-follow-modal",null,0);}a&2&&(s("value",r.following)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("lazy",!0)("lazyLoadOnInit",!1)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate()),Ce("selection",r.selectedRows));},dependencies:[Ue,Fe,Ae,Oe,Re,Qt,Pe,Lt,$t,Me,B,nt,ot,Mn,Da,he,ha,ve,et],styles:[`a[_ngcontent-%COMP%]{color:var(--fg)}my-delete-button[_ngcontent-%COMP%]{max-width:130px}
/*# sourceMappingURL=following-list.component-XF72V76B.css.map */`]}));let e=_;return e;})();var va=(()=>{let _=class _{redundancyElement=q(void 0);};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-video-redundancy-information"]],inputs:{redundancyElement:[1,"redundancyElement"]},decls:23,vars:14,consts:[[1,"label"],["target","_blank","rel","noopener noreferrer",3,"href"]],template:function(a,r){a&1&&(i(0,"div")(1,"span",0),g(2,"Url"),o(),i(3,"a",1),g(4),o()(),i(5,"div")(6,"span",0),g(7,"Created on"),o(),i(8,"span"),g(9),oe(10,"ptDate"),o()(),i(11,"div")(12,"span",0),g(13,"Expires on"),o(),i(14,"span"),g(15),oe(16,"ptDate"),o()(),i(17,"div")(18,"span",0),g(19,"Size"),o(),i(20,"span"),g(21),oe(22,"bytes"),o()()),a&2&&(l(3),s("href",r.redundancyElement().fileUrl,ke),l(),N(r.redundancyElement().fileUrl),l(5),N(re(10,5,r.redundancyElement().createdAt,"medium")),l(6),N(re(16,8,r.redundancyElement().expiresOn,"medium")),l(6),N(re(22,11,r.redundancyElement().size,1)));},dependencies:[ve,Tt],styles:[`.label[_ngcontent-%COMP%]{display:inline-block;min-width:100px;font-weight:600}
/*# sourceMappingURL=video-redundancy-information.component-UGP74PMB.css.map */`]}));let e=_;return e;})();function mp(e,_){e&1&&(i(0,"th",32),c(1,6),o());}function up(e,_){e&1&&(i(0,"th",33),c(1,7),o());}function gp(e,_){if(e&1&&(i(0,"tr")(1,"th",25)(2,"span",26),c(3,3),o()(),i(4,"th",27),c(5,4),o(),u(6,mp,2,0,"th",28),i(7,"th",29),D(8,5),p(9,"p-sortIcon",30),b(),o(),u(10,up,2,0,"th",31),o()),e&2){let n=d();l(6),s("ngIf",n.isDisplayingRemoteVideos()),l(),s("ngbTooltip",n.sortTooltip),l(3),s("ngIf",n.isDisplayingRemoteVideos());}}function Cp(e,_){if(e&1&&(i(0,"td"),g(1),o()),e&2){let n=d().$implicit,t=d();l(),N(t.getRedundancyStrategy(n));}}function Sp(e,_){if(e&1&&(i(0,"td"),g(1),oe(2,"bytes"),o()),e&2){let n=d().$implicit,t=d();l(),N(re(2,1,t.getTotalSize(n),1));}}function Ep(e,_){if(e&1){let n=w();i(0,"tr")(1,"td",34),p(2,"my-table-expander-icon",35),o(),i(3,"td",36)(4,"my-delete-button",37),M("click",function(){let a=f(n).$implicit,r=d();return A(r.removeRedundancy(a));}),o()(),u(5,Cp,2,1,"td",38),i(6,"td")(7,"a",39),g(8),p(9,"my-global-icon",40),o()(),u(10,Sp,3,4,"td",38),o();}if(e&2){let n=_.expanded,t=_.$implicit,a=d();l(2),s("pRowToggler",t)("expanded",n),l(3),s("ngIf",a.isDisplayingRemoteVideos()),l(2),s("href",t.url,ke),l(),V(" ",t.name," "),l(2),s("ngIf",a.isDisplayingRemoteVideos());}}function Tp(e,_){if(e&1&&(i(0,"div",43),p(1,"my-video-redundancy-information",44),o()),e&2){let n=_.$implicit;l(),s("redundancyElement",n);}}function Ip(e,_){if(e&1&&(i(0,"tr")(1,"td",41),u(2,Tp,2,1,"div",42),o()()),e&2){let n=d().$implicit;l(2),s("ngForOf",n.redundancies.files);}}function Np(e,_){if(e&1&&(i(0,"div"),p(1,"my-video-redundancy-information",44),o()),e&2){let n=_.$implicit;l(),s("redundancyElement",n);}}function Op(e,_){if(e&1&&(i(0,"tr")(1,"td",41),u(2,Np,2,1,"div",45),o()()),e&2){let n=d().$implicit;l(2),s("ngForOf",n.redundancies.streamingPlaylists);}}function Mp(e,_){if(e&1&&u(0,Ip,3,1,"tr",38)(1,Op,3,1,"tr",38),e&2){let n=_.$implicit;s("ngIf",n.redundancies.files.length!==0),l(),s("ngIf",n.redundancies.streamingPlaylists.length!==0);}}function fp(e,_){e&1&&(E(0),c(1,8),T());}function Ap(e,_){e&1&&(E(0),c(1,9),T());}function Rp(e,_){if(e&1&&(i(0,"tr")(1,"td",46)(2,"div",47),u(3,fp,2,0,"ng-container",38)(4,Ap,2,0,"ng-container",38),o()()()),e&2){let n=d();l(3),s("ngIf",n.isDisplayingRemoteVideos()),l(),s("ngIf",!n.isDisplayingRemoteVideos());}}function Pp(e,_){e&1&&(i(0,"div",47),c(1,11),o());}function Fp(e,_){if(e&1&&(i(0,"div",52),p(1,"p-chart",53),o()),e&2){let n=_.$implicit;l(),s("ariaLabel",n.ariaLabel)("data",n.graphData)("options",n.options);}}function hp(e,_){if(e&1&&(i(0,"div",48)(1,"h6"),c(2,10),o(),i(3,"div",49),u(4,Pp,2,0,"div",50)(5,Fp,2,3,"div",51),o()()),e&2){let n=d();l(4),s("ngIf",n.noRedundancies),l(),s("ngForOf",n.redundanciesGraphsData);}}var ya=(()=>{let _=class _ extends Ge{notifier=S(Y);confirmService=S(be);redundancyService=S(Lo);serverService=S(fe);videoRedundancies=[];totalRecords=0;sort={field:"name",order:1};pagination={count:this.rowsPerPage,start:0};displayType="my-videos";redundanciesGraphsData=[];noRedundancies=!1;dataLoaded=!1;bytesPipe;constructor(){super(),this.bytesPipe=new Tt();}getIdentifier(){return"VideoRedundanciesListComponent";}ngOnInit(){this.loadSelectLocalStorage(),this.initialize(),this.serverService.getServerStats().subscribe(t=>{let a=t.videosRedundancy;a.length===0&&(this.noRedundancies=!0);for(let r of a)this.buildPieData(r);});}isDisplayingRemoteVideos(){return this.displayType==="remote-videos";}getTotalSize(t){return t.redundancies.streamingPlaylists.reduce((a,r)=>a+r.size,0);}onDisplayTypeChanged(){this.pagination.start=0,this.saveSelectLocalStorage(),this.reloadData();}getRedundancyStrategy(t){return t.redundancies.streamingPlaylists.length!==0?t.redundancies.streamingPlaylists[0].strategy:"";}buildPieData(t){if(t.totalSize===0)return;let a=t.totalSize?t.totalSize-t.totalUsed:null,r=["Used ("+this.bytesToHuman(t.totalUsed)+")"],m=[t.totalUsed];a&&(r.push("Available ("+this.bytesToHuman(a)+")"),m.push(a)),this.redundanciesGraphsData.push({stats:t,ariaLabel:"Redundancy strategy \""+t.strategy+"\". "+r.join(". "),graphData:{labels:r,datasets:[{data:m,backgroundColor:["#FF6384","#36A2EB"],hoverBackgroundColor:["#FF6384","#36A2EB"]}]},options:{plugins:{title:{display:!0,text:t.strategy},tooltip:{callbacks:{label:C=>C.label}}}}});}removeRedundancy(t){return _e(this,null,function*(){let a="Do you really want to remove this video redundancy?";(yield this.confirmService.confirm(a,"Remove redundancy"))!==!1&&this.redundancyService.removeVideoRedundancies(t).subscribe({next:()=>{this.notifier.success("Video redundancies removed!"),this.reloadData();},error:m=>this.notifier.error(m.message)});});}reloadDataInternal(){this.dataLoaded=!1;let t={pagination:this.pagination,sort:this.sort,target:this.displayType};this.redundancyService.listVideoRedundancies(t).subscribe({next:a=>{this.videoRedundancies=a.data,this.totalRecords=a.total,this.dataLoaded=!0;},error:a=>this.notifier.error(a.message)});}loadSelectLocalStorage(){let t=Nn.getItem(_.LS_DISPLAY_TYPE);t&&(this.displayType=t);}saveSelectLocalStorage(){Nn.setItem(_.LS_DISPLAY_TYPE,this.displayType);}bytesToHuman(t){return this.bytesPipe.transform(t,1);}};I(_,"LS_DISPLAY_TYPE","video-redundancies-list-display-type"),I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-video-redundancies-list"]],features:[ne],decls:16,vars:12,consts:()=>{let t;t="Mostrar";let a;a="My videos duplicated by remote instances";let r;r="Remote videos duplicated by my instance";let m;m="Mai d\u2019informacions";let C;C="Action";let O;O="Video\n          "+"\uFFFD#9\uFFFD"+"\n          "+"\uFFFD/#9\uFFFD"+"\n        ";let P;P="Estrategia";let y;y="Total size";let v;v="List redundancies";let L;L="Open video in a new tab";let W;W="Your instance doesn't mirror any video.";let k;k="Your instance has no mirrored videos.";let $;$="Enabled strategies stats";let X;return X="\n      No redundancy strategy is enabled on your instance.\n    ",[t,a,r,m,C,O,P,y,W,k,$,X,[1,"admin-sub-header"],[1,"select-filter-block"],["for","displayType"],[1,"peertube-select-container"],["id","displayType","name","displayType",1,"form-control",3,"ngModelChange","ngModel"],["value","my-videos"],["value","remote-videos"],["dataKey","id",3,"onLazyLoad","value","lazy","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","expandedRowKeys"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],["pTemplate","emptymessage"],["class","redundancies-charts",4,"ngIf"],["scope","col",2,"width","40px"],[1,"visually-hidden"],["scope","col",2,"width","150px"],["scope","col","style","width: 160px;",4,"ngIf"],["scope","col","container","body","pSortableColumn","name",3,"ngbTooltip"],["field","name"],["scope","col","style","width: 100px;",4,"ngIf"],["scope","col",2,"width","160px"],["scope","col",2,"width","100px"],[1,"expand-cell"],["tooltip",v,3,"pRowToggler","expanded"],[1,"action-cell"],["label","",3,"click"],[4,"ngIf"],["title",L,"target","_blank","rel","noopener noreferrer",3,"href"],["iconName","external-link"],["myAutoColspan","",1,"expand-cell"],["class","expansion-block",4,"ngFor","ngForOf"],[1,"expansion-block"],[3,"redundancyElement"],[4,"ngFor","ngForOf"],["myAutoColspan",""],[1,"no-results"],[1,"redundancies-charts"],[1,"chart-blocks"],["class","no-results",4,"ngIf"],["class","chart-block",4,"ngFor","ngForOf"],[1,"chart-block"],["type","pie","width","300px","height","300px",3,"ariaLabel","data","options"]];},template:function(a,r){a&1&&(i(0,"div",12)(1,"div",13)(2,"label",14),c(3,0),o(),i(4,"div",15)(5,"select",16),Ee("ngModelChange",function(C){return Se(r.displayType,C)||(r.displayType=C),C;}),M("ngModelChange",function(){return r.onDisplayTypeChanged();}),i(6,"option",17),c(7,1),o(),i(8,"option",18),c(9,2),o()()()()(),i(10,"p-table",19),M("onLazyLoad",function(C){return r.loadLazy(C);}),u(11,gp,11,3,"ng-template",20)(12,Ep,11,6,"ng-template",21)(13,Mp,2,2,"ng-template",22)(14,Rp,5,2,"ng-template",23),o(),u(15,hp,6,2,"div",24)),a&2&&(l(5),Ce("ngModel",r.displayType),l(5),s("value",r.videoRedundancies)("lazy",!0)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("expandedRowKeys",r.expandedRows),l(5),s("ngIf",r.isDisplayingRemoteVideos()&&r.dataLoaded));},dependencies:[Ue,le,Kt,Jt,jt,me,ht,Fe,Ae,Oe,Re,Pt,Pe,Me,B,De,Ft,Mn,he,Le,va,b_,D_,Tt],styles:[`a[_ngcontent-%COMP%]{color:var(--fg)}.expansion-block[_ngcontent-%COMP%]{margin-bottom:20px}.admin-sub-header[_ngcontent-%COMP%]{justify-content:flex-end}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:auto}@media screen and (max-width: auto-30px){.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]{width:100%}}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.admin-sub-header[_ngcontent-%COMP%]   .peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}.redundancies-charts[_ngcontent-%COMP%]{margin-top:50px}.redundancies-charts[_ngcontent-%COMP%]   .chart-blocks[_ngcontent-%COMP%]{display:flex;justify-content:center}.redundancies-charts[_ngcontent-%COMP%]   .chart-blocks[_ngcontent-%COMP%]   .chart-block[_ngcontent-%COMP%]{margin:0 20px}
/*# sourceMappingURL=video-redundancies-list.component-LHAF7A6D.css.map */`]}));let e=_;return e;})();var La=[{path:"follows",canActivate:[ye],data:{userRight:Q.MANAGE_SERVER_FOLLOW},children:[{path:"",redirectTo:"following-list",pathMatch:"full"},{path:"following-list",component:ba,data:{meta:{title:"Following"}}},{path:"followers-list",component:Fa,data:{meta:{title:"Followers"}}},{path:"following-add",redirectTo:"following-list"},{path:"video-redundancies-list",component:ya,data:{meta:{title:"Redundancy"}}}]}];var $a=(()=>{let _=class _{syndicationItems=[{format:Fn.RSS,label:"media rss 2.0",url:zn.BASE_FEEDS_URL+Fn.RSS.toLowerCase()},{format:Fn.ATOM,label:"atom 1.0",url:zn.BASE_FEEDS_URL+Fn.ATOM.toLowerCase()},{format:Fn.JSON,label:"json 1.0",url:zn.BASE_FEEDS_URL+Fn.JSON.toLowerCase()}];};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-video-comment-list"]],decls:3,vars:0,consts:()=>{let t;return t="This view also shows comments from muted accounts.",[t,["mode","admin"]];},template:function(a,r){a&1&&(i(0,"em"),c(1,0),o(),p(2,"my-video-comment-list-admin-owner",1));},dependencies:[v_],encapsulation:2}));let e=_;return e;})();var Wo=(()=>{let _=class _ extends vt{videoQuotaOptions=[];videoQuotaDailyOptions=[];username;user;roles=[];serverConfig;ngOnInit(){this.serverConfig=this.serverService.getHTMLConfig(),this.buildRoles();}get subscribersCount(){let t=this.user?this.user.account.followersCount:0,a=this.user?this.user.videoChannels.map(r=>r.followersCount).reduce((r,m)=>r+m,0):0;return t+a;}getAuthPlugins(){return this.serverConfig.plugin.registeredIdAndPassAuths.map(t=>t.npmName).concat(this.serverConfig.plugin.registeredExternalAuths.map(t=>t.npmName));}buildRoles(){let t=this.auth.getUser();this.serverService.getServerLocale().subscribe(a=>{if(t.role.id===kt.ADMINISTRATOR){this.roles=Object.entries(qo).map(([r,m])=>({value:r.toString(),label:oo(m,a)}));return;}this.roles=[{value:kt.USER.toString(),label:oo(qo[kt.USER],a)}];});}displayDangerZone(){return!(this.isCreation()||!this.user||this.user.pluginAuth||this.auth.getUser().id===this.user.id);}resetPassword(){}disableTwoFactorAuth(){}getUserVideoQuota(){return this.form.value.videoQuota;}buildAdminFlags(t){return t.byPassAutoBlock?eo.BYPASS_VIDEO_AUTO_BLACKLIST:eo.NONE;}buildQuotaOptions(){this.videoQuotaOptions=this.configService.videoQuotaOptions,this.videoQuotaDailyOptions=this.configService.videoQuotaDailyOptions;}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275dir",Sr({type:_,features:[ne]}));let e=_;return e;})();var Dp=e=>({"input-error":e});function bp(e,_){e&1&&(E(0),c(1,0),T());}function vp(e,_){e&1&&(E(0),c(1,1),T());}function yp(e,_){if(e&1&&(i(0,"div",8),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.password," ");}}var Ho=(()=>{let _=class _ extends vt{formReactiveService=S(ft);notifier=S(Y);userAdminService=S(zt);userId=q(void 0);username=q(void 0);error;showPassword=!1;ngOnInit(){this.buildForm({password:bo});}formValidated(){this.error=void 0;let t=this.form.value;this.userAdminService.updateUser(this.userId(),t).subscribe({next:()=>this.notifier.success("Senhal cambiat per l\u2019utilizaire\n          "+this.username()+".\n        "),error:a=>{this.error=a.message;}});}togglePasswordVisibility(){this.showPassword=!this.showPassword;}getFormButtonTitle(){return"Actualizar lo senhal de l\u2019utilizaire";}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-user-password"]],inputs:{userId:[1,"userId"],username:[1,"username"]},features:[ne],decls:8,vars:9,consts:()=>{let t;t="Amagar";let a;return a="Mostrar",[t,a,[3,"ngSubmit","formGroup"],[1,"input-group"],["id","password","formControlName","password","autocomplete","new-password",1,"form-control",3,"ngClass"],["type","button",1,"btn",3,"click"],["class","form-error","role","alert",4,"ngIf"],["type","submit",1,"peertube-button","danger-button","mt-2",3,"value","disabled"],["role","alert",1,"form-error"]];},template:function(a,r){a&1&&(i(0,"form",2),M("ngSubmit",function(){return r.formValidated();}),i(1,"div",3),p(2,"input",4),i(3,"button",5),M("click",function(){return r.togglePasswordVisibility();}),u(4,bp,2,0,"ng-container")(5,vp,2,0,"ng-container"),o()(),u(6,yp,2,1,"div",6),p(7,"input",7),o()),a&2&&(s("formGroup",r.form),l(2),s("ngClass",H(7,Dp,r.formErrors.password)),Sn("type",r.showPassword?"text":"password"),l(2),ge(r.showPassword?4:5),l(2),s("ngIf",r.formErrors.password),l(),Wt("value",r.getFormButtonTitle()),s("disabled",!r.form.valid));},dependencies:[le,Mt,$e,me,Te,Ne,Ie,xe,pe,B],styles:[`input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[type=text][_ngcontent-%COMP%]::placeholder, input[type=password][_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[type=text][readonly][_ngcontent-%COMP%], input[type=password][readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[type=text][_ngcontent-%COMP%]:focus, input[type=text][_ngcontent-%COMP%]:focus-visible, input[type=password][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[type=text][disabled][_ngcontent-%COMP%], input[type=password][disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[type=text][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%]{width:100%}}
/*# sourceMappingURL=user-password.component-KHMDYHNY.css.map */`]}));let e=_;return e;})();var ri=e=>({"input-error":e}),Lp=e=>["/a",e],xa=()=>["/admin/moderation/abuses/list"],Ga=e=>({search:e});function $p(e,_){e&1&&(i(0,"li",30),c(1,7),o());}function xp(e,_){if(e&1&&(i(0,"a",64),g(1),o()),e&2){let n=d(2);s("routerLink",H(2,Lp,n.user==null?null:n.user.username)),l(),N(n.user==null?null:n.user.username);}}function Gp(e,_){if(e&1&&(i(0,"li",30),c(1,8),o(),i(2,"li",62),u(3,xp,2,4,"a",63),o()),e&2){let n=d();l(3),s("ngIf",n.user);}}function Up(e,_){if(e&1&&(i(0,"div",66)(1,"div")(2,"a")(3,"div",67),g(4),oe(5,"bytes"),o(),i(6,"div",68),c(7,9),o()()(),i(8,"div")(9,"a")(10,"div",67),g(11),o(),i(12,"div",68),c(13,10),o()()(),i(14,"div")(15,"a")(16,"div",67),g(17),o(),i(18,"div",68),c(19,11),o()()(),i(20,"div")(21,"a",69)(22,"div",67),g(23),o(),i(24,"div",68),c(25,12),o()()(),i(26,"div")(27,"a",69)(28,"div",67),g(29),o(),i(30,"div",68),c(31,13),o()()(),i(32,"div")(33,"a")(34,"div",67),g(35),o(),i(36,"div",68),c(37,14),o()()()()),e&2){let n=d(2);l(4),on("",n.user.videosCount," (",re(5,16,n.user.videoQuotaUsed,0),")"),l(3),j(n.user.videosCount),K(7),l(4),N(n.user.videoChannels.length||0),l(2),j(n.user.videoChannels.length),K(13),l(4),N(n.subscribersCount),l(2),j(n.subscribersCount),K(19),l(2),s("routerLink",Ht(19,xa))("queryParams",H(20,Ga,'reportee:"'+(n.user==null?null:n.user.account.displayName)+'"')),l(2),N(n.user.abusesCount),l(4),s("routerLink",Ht(22,xa))("queryParams",H(23,Ga,'reporter:"'+(n.user==null?null:n.user.account.displayName)+'" state:accepted')),l(2),on("",n.user.abusesAcceptedCount," / ",n.user.abusesCreatedCount,""),l(6),N(n.user.videoCommentsCount),l(2),j(n.user.videoCommentsCount),K(37);}}function wp(e,_){if(e&1&&u(0,Up,38,25,"div",65),e&2){let n=d();s("ngIf",!n.isCreation()&&n.user);}}function Vp(e,_){if(e&1&&(i(0,"my-alert",70),g(1),o()),e&2){let n=d();l(),N(n.error);}}function kp(e,_){}function zp(e,_){e&1&&u(0,kp,0,0,"ng-template");}function Xp(e,_){e&1&&(i(0,"h2"),c(1,15),o());}function Bp(e,_){if(e&1&&(i(0,"h2",71),g(1),o(),p(2,"my-actor-avatar-edit",72)),e&2){let n=d();l(),V("EDIT USER ",n.user.username,""),l(),s("displayName",n.user.account.displayName)("avatars",n.user.account.avatars)("username",n.user.username);}}function Wp(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d(2);l(),V(" ",n.formErrors.username," ");}}function Hp(e,_){if(e&1&&(i(0,"div",44)(1,"label",73),c(2,16),o(),p(3,"input",74),u(4,Wp,2,1,"div",47),o()),e&2){let n=d();l(3),s("ngClass",H(2,ri,n.formErrors.username)),l(),s("ngIf",n.formErrors.username);}}function jp(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d(2);l(),V(" ",n.formErrors.channelName," ");}}function Kp(e,_){if(e&1&&(i(0,"div",44)(1,"label",76),c(2,17),o(),p(3,"input",77),u(4,jp,2,1,"div",47),o()),e&2){let n=d();l(3),s("ngClass",H(2,ri,n.formErrors.channelName)),l(),s("ngIf",n.formErrors.channelName);}}function Jp(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.email," ");}}function Yp(e,_){e&1&&(i(0,"my-help"),E(1),c(2,19),T(),o());}function qp(e,_){if(e&1&&(i(0,"div",44)(1,"label",78),c(2,18),o(),u(3,Yp,3,0,"my-help",79),p(4,"my-input-text",80),o()),e&2){let n=d();l(3),s("ngIf",n.isPasswordOptional()),l(),s("formError",n.formErrors.password);}}function Qp(e,_){if(e&1&&(i(0,"option",81),g(1),o()),e&2){let n=_.$implicit;s("value",n.value),l(),V(" ",n.label," ");}}function Zp(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.role," ");}}function em(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.videoQuota," ");}}function tm(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.videoQuotaDaily," ");}}function nm(e,_){if(e&1&&(i(0,"option",81),g(1),o()),e&2){let n=_.$implicit;s("value",n),l(),N(n);}}function om(e,_){if(e&1&&(i(0,"div",44)(1,"label",82),c(2,20),o(),i(3,"div",49)(4,"select",83)(5,"option",81),c(6,21),o(),u(7,nm,2,2,"option",51),o()()()),e&2){let n=d();l(5),s("value",null),l(2),s("ngForOf",n.getAuthPlugins());}}function im(e,_){}function rm(e,_){e&1&&u(0,im,0,0,"ng-template");}function _m(e,_){if(e&1){let n=w();i(0,"div",44)(1,"div",88),c(2,26),o(),i(3,"button",89),M("click",function(){f(n);let a=d(2);return A(a.disableTwoFactorAuth());}),c(4,27),o()();}}function am(e,_){if(e&1){let n=w();i(0,"div",84)(1,"div",38),p(2,"div",85),i(3,"h2",86),c(4,22),o()(),i(5,"div",40)(6,"div",87)(7,"div",44)(8,"div",88),c(9,23),o(),i(10,"button",89),M("click",function(){f(n);let a=d();return A(a.resetPassword());}),c(11,24),o()(),i(12,"div",44)(13,"div",88),c(14,25),o(),p(15,"my-user-password",90),o(),u(16,_m,5,0,"div",43),o()()();}if(e&2){let n=d();l(15),s("userId",n.user.id)("username",n.user.username),l(),s("ngIf",n.user.twoFactorEnabled);}}var Ua=(()=>{let _=class _ extends Wo{serverService=S(fe);formReactiveService=S(ft);configService=S(pt);screenService=S(Oo);auth=S(At);router=S(Ze);notifier=S(Y);userAdminService=S(zt);error;constructor(){super(),this.buildQuotaOptions();}ngOnInit(){super.ngOnInit();let t={role:kt.USER.toString(),videoQuota:-1,videoQuotaDaily:-1};this.buildForm({username:i_,channelName:r_,email:Do,password:this.isPasswordOptional()?__:bo,role:vo,videoQuota:Ln,videoQuotaDaily:$n,byPassAutoBlock:null},t);}formValidated(){this.error=void 0;let t=this.form.value;t.adminFlags=this.buildAdminFlags(this.form.value),t.videoQuota=parseInt(this.form.value.videoQuota,10),t.videoQuotaDaily=parseInt(this.form.value.videoQuotaDaily,10),this.userAdminService.addUser(t).subscribe({next:()=>{this.notifier.success("Utilizaire\n          "+t.username+" creat.\n        "),this.router.navigate(["/admin/overview/users/list"]);},error:a=>{this.error=a.message;}});}isCreation(){return!0;}isPasswordOptional(){return this.serverConfig.email.enabled;}getFormButtonTitle(){return"Create user";}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-user-create"]],features:[ne],decls:57,vars:27,consts:()=>{let t;t="courriel@exemple.com";let a;a="bytes";let r;r="bytes";let m;m="User bypasses video validation by moderators";let C;C="Utilizaires";let O;O="Corri\xE8l";let P;P="R\xF2tle";let y;y="Qu\xF2ta vid\xE8o";let v;v="Qu\xF2ta jornali\xE8r de vid\xE8o";let L;L=" Enable this checkbox if this user doesn't need to have its videos reviewed by moderators. ";let W;W="Create";let k;k="Modificar";let $;$="{VAR_PLURAL, plural, =1 {Vid\xE8o} other {Vid\xE8os}}",$=de($,{VAR_PLURAL:"\uFFFD0\uFFFD"});let X;X="{VAR_PLURAL, plural, =1 {Cadena} other {Cadenas}}",X=de(X,{VAR_PLURAL:"\uFFFD0\uFFFD"});let x;x="{VAR_PLURAL, plural, =1 {Seguidor} other {Seguidors}}",x=de(x,{VAR_PLURAL:"\uFFFD0\uFFFD"});let z;z="Incriminated in reports";let G;G="Authored reports accepted";let te;te="{VAR_PLURAL, plural, =1 {Comentari} other {Comentaris}}",te=de(te,{VAR_PLURAL:"\uFFFD0\uFFFD"});let ae;ae="N\xD2U UTILIZAIRE";let ze;ze="joan";let Xe;Xe="Nom d\u2019utilizaire";let Be;Be="john_channel";let We;We="Nom de la cadena";let He;He="Senhal";let je;je="\n              If you leave the password empty, an email will be sent to the user.\n            ";let Ke;Ke="Auth plugin";let we;we="None (local authentication)";let Je;Je="Z\xD2NA PERILHOSA";let Ye;Ye="Enviar un ligam per re\xEFnicializar lo senhal a l\u2019utilizaire";let Ve;Ve="Demandar un n\xF2u senhal";let Z;Z="Definir manualament lo senhal de l\u2019utilizaire";let ee;ee="This user has two factor authentication enabled";let _t;return _t="Disable two factor authentication",[["dashboard",""],C,O,P,y,v,L,W,k,$,X,x,z,G,te,ae,Xe,We,He,je,Ke,we,Je,Ye,Ve,Z,ee,_t,["aria-label","breadcrumb"],[1,"pt-breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/overview/users"],["type","danger",4,"ngIf"],[1,"pt-two-cols","d-xxl-none"],[1,"col-0","col-xl-3"],[1,"col-12","col-xl-9"],[4,"ngTemplateOutlet"],[1,"pt-two-cols","mt-4"],[1,"title-col"],["id","user",1,"anchor"],[1,"content-col"],[1,"row"],[1,"col",3,"ngSubmit","formGroup"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","email"],["type","text","id","email","placeholder",t,"formControlName","email","autocomplete","off",1,"form-control",3,"ngClass","readonly"],["class","form-error","role","alert",4,"ngIf"],["for","role"],[1,"peertube-select-container"],["id","role","formControlName","role",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["id","videoQuotaLabel","for","videoQuota"],["labelId","videoQuotaLabel","inputId","videoQuota","formControlName","videoQuota","inputSuffix",a,"inputType","number",3,"items","clearable"],[3,"videoQuota"],["id","videoQuotaDailyLabel","for","videoQuotaDaily"],["labelId","videoQuotaDailyLabel","inputId","videoQuotaDaily","formControlName","videoQuotaDaily","inputSuffix",r,"inputType","number",3,"items","clearable"],["inputName","byPassAutoBlock","formControlName","byPassAutoBlock","labelText",m],["ngProjectAs","description",5,["description"]],["type","submit",1,"peertube-button","primary-button",3,"value","disabled"],[1,"d-none","d-xxl-block","col-7"],["class","pt-two-cols mt-5",4,"ngIf"],["aria-current","page",1,"breadcrumb-item"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["class","dashboard",4,"ngIf"],[1,"dashboard"],[1,"dashboard-num"],[1,"dashboard-label"],[3,"routerLink","queryParams"],["type","danger"],[1,"visually-hidden"],["actorType","account","editable","false","displayUsername","false",3,"displayName","avatars","username"],["for","username"],["type","text","id","username","placeholder",ze,"formControlName","username",1,"form-control",3,"ngClass"],["role","alert",1,"form-error"],["for","channelName"],["type","text","id","channelName","placeholder",Be,"formControlName","channelName",1,"form-control",3,"ngClass"],["for","password"],[4,"ngIf"],["formControlName","password","inputId","password","autocomplete","new-password",3,"formError"],[3,"value"],["for","pluginAuth"],["id","pluginAuth","formControlName","pluginAuth",1,"form-control"],[1,"pt-two-cols","mt-5"],["id","danger",1,"anchor"],[1,"pt-title-danger"],[1,"danger-zone"],[1,"mb-1","fw-bold"],[1,"peertube-button","danger-button",3,"click"],[3,"userId","username"]];},template:function(a,r){if(a&1){let m=w();i(0,"nav",28)(1,"ol",29)(2,"li",30)(3,"a",31),c(4,1),o()(),u(5,$p,2,0,"li",30)(6,Gp,4,1),o()(),u(7,wp,1,1,"ng-template",null,0,En)(9,Vp,2,1,"my-alert",32),i(10,"div",33),p(11,"div",34),i(12,"div",35),u(13,zp,1,0,null,36),o()(),i(14,"div",37)(15,"div",38),p(16,"div",39),u(17,Xp,2,0,"h2")(18,Bp,3,4),o(),i(19,"div",40)(20,"div",41)(21,"form",42),M("ngSubmit",function(){return f(m),A(r.formValidated());}),u(22,Hp,5,4,"div",43)(23,Kp,5,4,"div",43),i(24,"div",44)(25,"label",45),c(26,2),o(),p(27,"input",46),u(28,Jp,2,1,"div",47),o(),u(29,qp,5,2,"div",43),i(30,"div",44)(31,"label",48),c(32,3),o(),i(33,"div",49)(34,"select",50),u(35,Qp,2,2,"option",51),o()(),u(36,Zp,2,1,"div",47),o(),i(37,"div",44)(38,"label",52),c(39,4),o(),p(40,"my-select-custom-value",53)(41,"my-user-real-quota-info",54),u(42,em,2,1,"div",47),o(),i(43,"div",44)(44,"label",55),c(45,5),o(),p(46,"my-select-custom-value",56),u(47,tm,2,1,"div",47),o(),u(48,om,8,2,"div",43),i(49,"div",44)(50,"my-peertube-checkbox",57),E(51,58),c(52,6),T(),o()(),p(53,"input",59),o(),i(54,"div",60),u(55,rm,1,0,null,36),o()()()(),u(56,am,17,3,"div",61);}if(a&2){let m=Ot(8);l(5),ge(r.isCreation()?5:6),l(4),s("ngIf",r.error),l(4),s("ngTemplateOutlet",m),l(4),ge(r.isCreation()?17:r.user?18:-1),l(4),s("formGroup",r.form),l(),s("ngIf",r.isCreation()),l(),s("ngIf",r.isCreation()),l(4),s("ngClass",H(25,ri,r.formErrors.email))("readonly",r.user&&r.user.pluginAuth!==null),l(),s("ngIf",r.formErrors.email),l(),s("ngIf",r.isCreation()),l(6),s("ngForOf",r.roles),l(),s("ngIf",r.formErrors.role),l(4),s("items",r.videoQuotaOptions)("clearable",!1),l(),s("videoQuota",r.getUserVideoQuota()),l(),s("ngIf",r.formErrors.videoQuota),l(4),s("items",r.videoQuotaDailyOptions)("clearable",!1),l(),s("ngIf",r.formErrors.videoQuotaDaily),l(),s("ngIf",!r.isCreation()&&r.getAuthPlugins().length!==0),l(5),Wt("value",r.getFormButtonTitle()),s("disabled",!r.form.valid),l(2),s("ngTemplateOutlet",m),l(),s("ngIf",r.displayDangerZone());}},dependencies:[lt,B,mo,kn,le,Mt,Kt,Jt,$e,jt,me,Te,Ne,Ie,xe,pe,qt,ho,Le,Zt,Bn,tt,Ho,Tt,Rt],styles:[`input[_ngcontent-%COMP%]:not([type=submit]){font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[_ngcontent-%COMP%]:not([type=submit])::placeholder{color:var(--input-placeholder);font-size:14px}input[_ngcontent-%COMP%]:not([type=submit])[readonly]{color:var(--fg-300)}input[_ngcontent-%COMP%]:not([type=submit]):focus, input[_ngcontent-%COMP%]:not([type=submit]):focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[_ngcontent-%COMP%]:not([type=submit])[disabled]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[_ngcontent-%COMP%]:not([type=submit]){width:100%}}my-input-text[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-input-text[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-custom-value[_ngcontent-%COMP%]{width:100%}}.dashboard[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -5px;max-width:900px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 33.3333333333%;padding:0 5px;margin-bottom:10px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;font-size:18px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:active{text-decoration:none}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:active, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{opacity:.8}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:20px;background:var(--bg-secondary-400);border-radius:4px;box-sizing:border-box;height:100%}.dashboard[_ngcontent-%COMP%]   .dashboard-num[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%]   .dashboard-text[_ngcontent-%COMP%]{text-align:center;font-size:130%;color:var(--fg);line-height:30px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .dashboard-label[_ngcontent-%COMP%]{font-size:90%;color:var(--fg-300);text-align:center}
/*# sourceMappingURL=user-edit.component-MAOLAGTK.css.map */`]}));let e=_;return e;})();var _i=e=>({"input-error":e}),lm=e=>["/a",e],wa=()=>["/admin/moderation/abuses/list"],Va=e=>({search:e});function sm(e,_){e&1&&(i(0,"li",30),c(1,7),o());}function cm(e,_){if(e&1&&(i(0,"a",64),g(1),o()),e&2){let n=d(2);s("routerLink",H(2,lm,n.user==null?null:n.user.username)),l(),N(n.user==null?null:n.user.username);}}function dm(e,_){if(e&1&&(i(0,"li",30),c(1,8),o(),i(2,"li",62),u(3,cm,2,4,"a",63),o()),e&2){let n=d();l(3),s("ngIf",n.user);}}function pm(e,_){if(e&1&&(i(0,"div",66)(1,"div")(2,"a")(3,"div",67),g(4),oe(5,"bytes"),o(),i(6,"div",68),c(7,9),o()()(),i(8,"div")(9,"a")(10,"div",67),g(11),o(),i(12,"div",68),c(13,10),o()()(),i(14,"div")(15,"a")(16,"div",67),g(17),o(),i(18,"div",68),c(19,11),o()()(),i(20,"div")(21,"a",69)(22,"div",67),g(23),o(),i(24,"div",68),c(25,12),o()()(),i(26,"div")(27,"a",69)(28,"div",67),g(29),o(),i(30,"div",68),c(31,13),o()()(),i(32,"div")(33,"a")(34,"div",67),g(35),o(),i(36,"div",68),c(37,14),o()()()()),e&2){let n=d(2);l(4),on("",n.user.videosCount," (",re(5,16,n.user.videoQuotaUsed,0),")"),l(3),j(n.user.videosCount),K(7),l(4),N(n.user.videoChannels.length||0),l(2),j(n.user.videoChannels.length),K(13),l(4),N(n.subscribersCount),l(2),j(n.subscribersCount),K(19),l(2),s("routerLink",Ht(19,wa))("queryParams",H(20,Va,'reportee:"'+(n.user==null?null:n.user.account.displayName)+'"')),l(2),N(n.user.abusesCount),l(4),s("routerLink",Ht(22,wa))("queryParams",H(23,Va,'reporter:"'+(n.user==null?null:n.user.account.displayName)+'" state:accepted')),l(2),on("",n.user.abusesAcceptedCount," / ",n.user.abusesCreatedCount,""),l(6),N(n.user.videoCommentsCount),l(2),j(n.user.videoCommentsCount),K(37);}}function mm(e,_){if(e&1&&u(0,pm,38,25,"div",65),e&2){let n=d();s("ngIf",!n.isCreation()&&n.user);}}function um(e,_){if(e&1&&(i(0,"my-alert",70),g(1),o()),e&2){let n=d();l(),N(n.error);}}function gm(e,_){}function Cm(e,_){e&1&&u(0,gm,0,0,"ng-template");}function Sm(e,_){e&1&&(i(0,"h2"),c(1,15),o());}function Em(e,_){if(e&1&&(i(0,"h2",71),g(1),o(),p(2,"my-actor-avatar-edit",72)),e&2){let n=d();l(),V("EDIT USER ",n.user.username,""),l(),s("displayName",n.user.account.displayName)("avatars",n.user.account.avatars)("username",n.user.username);}}function Tm(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d(2);l(),V(" ",n.formErrors.username," ");}}function Im(e,_){if(e&1&&(i(0,"div",44)(1,"label",73),c(2,16),o(),p(3,"input",74),u(4,Tm,2,1,"div",47),o()),e&2){let n=d();l(3),s("ngClass",H(2,_i,n.formErrors.username)),l(),s("ngIf",n.formErrors.username);}}function Nm(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d(2);l(),V(" ",n.formErrors.channelName," ");}}function Om(e,_){if(e&1&&(i(0,"div",44)(1,"label",76),c(2,17),o(),p(3,"input",77),u(4,Nm,2,1,"div",47),o()),e&2){let n=d();l(3),s("ngClass",H(2,_i,n.formErrors.channelName)),l(),s("ngIf",n.formErrors.channelName);}}function Mm(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.email," ");}}function fm(e,_){e&1&&(i(0,"my-help"),E(1),c(2,19),T(),o());}function Am(e,_){if(e&1&&(i(0,"div",44)(1,"label",78),c(2,18),o(),u(3,fm,3,0,"my-help",79),p(4,"my-input-text",80),o()),e&2){let n=d();l(3),s("ngIf",n.isPasswordOptional()),l(),s("formError",n.formErrors.password);}}function Rm(e,_){if(e&1&&(i(0,"option",81),g(1),o()),e&2){let n=_.$implicit;s("value",n.value),l(),V(" ",n.label," ");}}function Pm(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.role," ");}}function Fm(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.videoQuota," ");}}function hm(e,_){if(e&1&&(i(0,"div",75),g(1),o()),e&2){let n=d();l(),V(" ",n.formErrors.videoQuotaDaily," ");}}function Dm(e,_){if(e&1&&(i(0,"option",81),g(1),o()),e&2){let n=_.$implicit;s("value",n),l(),N(n);}}function bm(e,_){if(e&1&&(i(0,"div",44)(1,"label",82),c(2,20),o(),i(3,"div",49)(4,"select",83)(5,"option",81),c(6,21),o(),u(7,Dm,2,2,"option",51),o()()()),e&2){let n=d();l(5),s("value",null),l(2),s("ngForOf",n.getAuthPlugins());}}function vm(e,_){}function ym(e,_){e&1&&u(0,vm,0,0,"ng-template");}function Lm(e,_){if(e&1){let n=w();i(0,"div",44)(1,"div",88),c(2,26),o(),i(3,"button",89),M("click",function(){f(n);let a=d(2);return A(a.disableTwoFactorAuth());}),c(4,27),o()();}}function $m(e,_){if(e&1){let n=w();i(0,"div",84)(1,"div",38),p(2,"div",85),i(3,"h2",86),c(4,22),o()(),i(5,"div",40)(6,"div",87)(7,"div",44)(8,"div",88),c(9,23),o(),i(10,"button",89),M("click",function(){f(n);let a=d();return A(a.resetPassword());}),c(11,24),o()(),i(12,"div",44)(13,"div",88),c(14,25),o(),p(15,"my-user-password",90),o(),u(16,Lm,5,0,"div",43),o()()();}if(e&2){let n=d();l(15),s("userId",n.user.id)("username",n.user.username),l(),s("ngIf",n.user.twoFactorEnabled);}}var ka=(()=>{let _=class _ extends Wo{formReactiveService=S(ft);serverService=S(fe);configService=S(pt);screenService=S(Oo);auth=S(At);route=S(Qe);router=S(Ze);notifier=S(Y);userService=S(e_);twoFactorService=S(Vo);userAdminService=S(zt);error;paramsSub;constructor(){super(),this.buildQuotaOptions();}ngOnInit(){super.ngOnInit();let t={role:kt.USER.toString(),videoQuota:"-1",videoQuotaDaily:"-1"};this.buildForm({email:Do,role:vo,videoQuota:Ln,videoQuotaDaily:$n,byPassAutoBlock:null,pluginAuth:null},t),this.paramsSub=this.route.params.subscribe(a=>{let r=a.id;this.userService.getUser(r,!0).subscribe({next:m=>this.onUserFetched(m),error:m=>{this.error=m.message;}});});}ngOnDestroy(){this.paramsSub.unsubscribe();}formValidated(){this.error=void 0;let t=this.form.value;t.adminFlags=this.buildAdminFlags(this.form.value),t.videoQuota=parseInt(this.form.value.videoQuota,10),t.videoQuotaDaily=parseInt(this.form.value.videoQuotaDaily,10),t.pluginAuth==="null"&&(t.pluginAuth=null),this.userAdminService.updateUser(this.user.id,t).subscribe({next:()=>{this.notifier.success("User\n          "+this.user.username+" updated.\n        "),this.router.navigate(["/admin/overview/users/list"]);},error:a=>{this.error=a.message;}});}isCreation(){return!1;}isPasswordOptional(){return!1;}getFormButtonTitle(){return"Actualizar l\u2019utilizaire";}resetPassword(){this.userService.askResetPassword(this.user.email).subscribe({next:()=>{this.notifier.success("Un corri\xE8l de re\xEFnicializacion de senhal es estat enviat a\n          "+this.user.username+".\n        ");},error:t=>this.notifier.error(t.message)});}disableTwoFactorAuth(){this.twoFactorService.disableTwoFactor({userId:this.user.id}).subscribe({next:()=>{this.user.twoFactorEnabled=!1,this.notifier.success("Two factor authentication of "+this.user.username+" disabled.");},error:t=>this.notifier.error(t.message)});}onUserFetched(t){this.user=new Jr(t),this.form.patchValue({email:t.email,role:t.role.id.toString(),videoQuota:t.videoQuota,videoQuotaDaily:t.videoQuotaDaily,pluginAuth:t.pluginAuth,byPassAutoBlock:t.adminFlags&eo.BYPASS_VIDEO_AUTO_BLACKLIST});}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275cmp",h({type:_,selectors:[["my-user-update"]],features:[ne],decls:57,vars:27,consts:()=>{let t;t="courriel@exemple.com";let a;a="bytes";let r;r="bytes";let m;m="User bypasses video validation by moderators";let C;C="Utilizaires";let O;O="Corri\xE8l";let P;P="R\xF2tle";let y;y="Qu\xF2ta vid\xE8o";let v;v="Qu\xF2ta jornali\xE8r de vid\xE8o";let L;L=" Enable this checkbox if this user doesn't need to have its videos reviewed by moderators. ";let W;W="Create";let k;k="Modificar";let $;$="{VAR_PLURAL, plural, =1 {Vid\xE8o} other {Vid\xE8os}}",$=de($,{VAR_PLURAL:"\uFFFD0\uFFFD"});let X;X="{VAR_PLURAL, plural, =1 {Cadena} other {Cadenas}}",X=de(X,{VAR_PLURAL:"\uFFFD0\uFFFD"});let x;x="{VAR_PLURAL, plural, =1 {Seguidor} other {Seguidors}}",x=de(x,{VAR_PLURAL:"\uFFFD0\uFFFD"});let z;z="Incriminated in reports";let G;G="Authored reports accepted";let te;te="{VAR_PLURAL, plural, =1 {Comentari} other {Comentaris}}",te=de(te,{VAR_PLURAL:"\uFFFD0\uFFFD"});let ae;ae="N\xD2U UTILIZAIRE";let ze;ze="joan";let Xe;Xe="Nom d\u2019utilizaire";let Be;Be="john_channel";let We;We="Nom de la cadena";let He;He="Senhal";let je;je="\n              If you leave the password empty, an email will be sent to the user.\n            ";let Ke;Ke="Auth plugin";let we;we="None (local authentication)";let Je;Je="Z\xD2NA PERILHOSA";let Ye;Ye="Enviar un ligam per re\xEFnicializar lo senhal a l\u2019utilizaire";let Ve;Ve="Demandar un n\xF2u senhal";let Z;Z="Definir manualament lo senhal de l\u2019utilizaire";let ee;ee="This user has two factor authentication enabled";let _t;return _t="Disable two factor authentication",[["dashboard",""],C,O,P,y,v,L,W,k,$,X,x,z,G,te,ae,Xe,We,He,je,Ke,we,Je,Ye,Ve,Z,ee,_t,["aria-label","breadcrumb"],[1,"pt-breadcrumb"],[1,"breadcrumb-item"],["routerLink","/admin/overview/users"],["type","danger",4,"ngIf"],[1,"pt-two-cols","d-xxl-none"],[1,"col-0","col-xl-3"],[1,"col-12","col-xl-9"],[4,"ngTemplateOutlet"],[1,"pt-two-cols","mt-4"],[1,"title-col"],["id","user",1,"anchor"],[1,"content-col"],[1,"row"],[1,"col",3,"ngSubmit","formGroup"],["class","form-group",4,"ngIf"],[1,"form-group"],["for","email"],["type","text","id","email","placeholder",t,"formControlName","email","autocomplete","off",1,"form-control",3,"ngClass","readonly"],["class","form-error","role","alert",4,"ngIf"],["for","role"],[1,"peertube-select-container"],["id","role","formControlName","role",1,"form-control"],[3,"value",4,"ngFor","ngForOf"],["id","videoQuotaLabel","for","videoQuota"],["labelId","videoQuotaLabel","inputId","videoQuota","formControlName","videoQuota","inputSuffix",a,"inputType","number",3,"items","clearable"],[3,"videoQuota"],["id","videoQuotaDailyLabel","for","videoQuotaDaily"],["labelId","videoQuotaDailyLabel","inputId","videoQuotaDaily","formControlName","videoQuotaDaily","inputSuffix",r,"inputType","number",3,"items","clearable"],["inputName","byPassAutoBlock","formControlName","byPassAutoBlock","labelText",m],["ngProjectAs","description",5,["description"]],["type","submit",1,"peertube-button","primary-button",3,"value","disabled"],[1,"d-none","d-xxl-block","col-7"],["class","pt-two-cols mt-5",4,"ngIf"],["aria-current","page",1,"breadcrumb-item"],[3,"routerLink",4,"ngIf"],[3,"routerLink"],["class","dashboard",4,"ngIf"],[1,"dashboard"],[1,"dashboard-num"],[1,"dashboard-label"],[3,"routerLink","queryParams"],["type","danger"],[1,"visually-hidden"],["actorType","account","editable","false","displayUsername","false",3,"displayName","avatars","username"],["for","username"],["type","text","id","username","placeholder",ze,"formControlName","username",1,"form-control",3,"ngClass"],["role","alert",1,"form-error"],["for","channelName"],["type","text","id","channelName","placeholder",Be,"formControlName","channelName",1,"form-control",3,"ngClass"],["for","password"],[4,"ngIf"],["formControlName","password","inputId","password","autocomplete","new-password",3,"formError"],[3,"value"],["for","pluginAuth"],["id","pluginAuth","formControlName","pluginAuth",1,"form-control"],[1,"pt-two-cols","mt-5"],["id","danger",1,"anchor"],[1,"pt-title-danger"],[1,"danger-zone"],[1,"mb-1","fw-bold"],[1,"peertube-button","danger-button",3,"click"],[3,"userId","username"]];},template:function(a,r){if(a&1){let m=w();i(0,"nav",28)(1,"ol",29)(2,"li",30)(3,"a",31),c(4,1),o()(),u(5,sm,2,0,"li",30)(6,dm,4,1),o()(),u(7,mm,1,1,"ng-template",null,0,En)(9,um,2,1,"my-alert",32),i(10,"div",33),p(11,"div",34),i(12,"div",35),u(13,Cm,1,0,null,36),o()(),i(14,"div",37)(15,"div",38),p(16,"div",39),u(17,Sm,2,0,"h2")(18,Em,3,4),o(),i(19,"div",40)(20,"div",41)(21,"form",42),M("ngSubmit",function(){return f(m),A(r.formValidated());}),u(22,Im,5,4,"div",43)(23,Om,5,4,"div",43),i(24,"div",44)(25,"label",45),c(26,2),o(),p(27,"input",46),u(28,Mm,2,1,"div",47),o(),u(29,Am,5,2,"div",43),i(30,"div",44)(31,"label",48),c(32,3),o(),i(33,"div",49)(34,"select",50),u(35,Rm,2,2,"option",51),o()(),u(36,Pm,2,1,"div",47),o(),i(37,"div",44)(38,"label",52),c(39,4),o(),p(40,"my-select-custom-value",53)(41,"my-user-real-quota-info",54),u(42,Fm,2,1,"div",47),o(),i(43,"div",44)(44,"label",55),c(45,5),o(),p(46,"my-select-custom-value",56),u(47,hm,2,1,"div",47),o(),u(48,bm,8,2,"div",43),i(49,"div",44)(50,"my-peertube-checkbox",57),E(51,58),c(52,6),T(),o()(),p(53,"input",59),o(),i(54,"div",60),u(55,ym,1,0,null,36),o()()()(),u(56,$m,17,3,"div",61);}if(a&2){let m=Ot(8);l(5),ge(r.isCreation()?5:6),l(4),s("ngIf",r.error),l(4),s("ngTemplateOutlet",m),l(4),ge(r.isCreation()?17:r.user?18:-1),l(4),s("formGroup",r.form),l(),s("ngIf",r.isCreation()),l(),s("ngIf",r.isCreation()),l(4),s("ngClass",H(25,_i,r.formErrors.email))("readonly",r.user&&r.user.pluginAuth!==null),l(),s("ngIf",r.formErrors.email),l(),s("ngIf",r.isCreation()),l(6),s("ngForOf",r.roles),l(),s("ngIf",r.formErrors.role),l(4),s("items",r.videoQuotaOptions)("clearable",!1),l(),s("videoQuota",r.getUserVideoQuota()),l(),s("ngIf",r.formErrors.videoQuota),l(4),s("items",r.videoQuotaDailyOptions)("clearable",!1),l(),s("ngIf",r.formErrors.videoQuotaDaily),l(),s("ngIf",!r.isCreation()&&r.getAuthPlugins().length!==0),l(5),Wt("value",r.getFormButtonTitle()),s("disabled",!r.form.valid),l(2),s("ngTemplateOutlet",m),l(),s("ngIf",r.displayDangerZone());}},dependencies:[lt,B,mo,kn,le,Mt,Kt,Jt,$e,jt,me,Te,Ne,Ie,xe,pe,qt,ho,Le,Zt,Bn,tt,Ho,Tt,Rt],styles:[`input[_ngcontent-%COMP%]:not([type=submit]){font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:340px;max-width:340px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[_ngcontent-%COMP%]:not([type=submit])::placeholder{color:var(--input-placeholder);font-size:14px}input[_ngcontent-%COMP%]:not([type=submit])[readonly]{color:var(--fg-300)}input[_ngcontent-%COMP%]:not([type=submit]):focus, input[_ngcontent-%COMP%]:not([type=submit]):focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[_ngcontent-%COMP%]:not([type=submit])[disabled]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 380px){input[_ngcontent-%COMP%]:not([type=submit]){width:100%}}my-input-text[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-input-text[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]{padding:0;margin:0;position:relative;height:min-content;width:340px}@media screen and (max-width: 310px){.peertube-select-container[_ngcontent-%COMP%]{width:100%}}.peertube-select-container[_ngcontent-%COMP%]:after{top:50%;right:calc(0% + 15px);content:" ";height:0;width:0;position:absolute;pointer-events:none;border:5px solid rgba(0,0,0,0);border-top-color:var(--fg-300);margin-top:-2px;z-index:100}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{line-height:24px}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{color:inherit;background-color:transparent;border:1px solid var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.active[_ngcontent-%COMP%], .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{color:inherit;background-color:var(--bg-secondary-500);border-color:var(--bg-secondary-500)}.peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:active, .peertube-select-container[_ngcontent-%COMP%]   select.btn[_ngcontent-%COMP%]:focus-visible, .peertube-select-container[_ngcontent-%COMP%]   select.btn.show[_ngcontent-%COMP%]{color:inherit!important;background-color:var(--bg-secondary-500)!important;border-color:var(--bg-secondary-500)!important}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:hover{color:inherit;background-color:var(--bg-secondary-450)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{pointer-events:none;opacity:.8}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:not(.icon-only)   my-global-icon[_ngcontent-%COMP%]{color:var(--secondary-icon-color)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) calc(var(--input-x-padding) + 23px) var(--input-y-padding) var(--input-x-padding);position:relative;border:1px solid var(--input-border-color)!important;-webkit-appearance:none;appearance:none;text-overflow:ellipsis;color:var(--input-fg);background:var(--input-bg);border-radius:var(--input-border-radius)}.peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus, .peertube-select-container[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100)}.peertube-select-container[_ngcontent-%COMP%]   select[disabled][_ngcontent-%COMP%]{opacity:.5}my-select-custom-value[_ngcontent-%COMP%]{display:block;width:340px}@media screen and (max-width: 310px){my-select-custom-value[_ngcontent-%COMP%]{width:100%}}.dashboard[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin:0 -5px;max-width:900px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{box-sizing:border-box;flex:0 0 33.3333333333%;padding:0 5px;margin-bottom:10px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{text-decoration:none;color:inherit;display:block;font-size:18px}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:active{text-decoration:none}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:active, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:focus, .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]:hover{opacity:.8}.dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{padding:20px;background:var(--bg-secondary-400);border-radius:4px;box-sizing:border-box;height:100%}.dashboard[_ngcontent-%COMP%]   .dashboard-num[_ngcontent-%COMP%], .dashboard[_ngcontent-%COMP%]   .dashboard-text[_ngcontent-%COMP%]{text-align:center;font-size:130%;color:var(--fg);line-height:30px;margin-bottom:20px}.dashboard[_ngcontent-%COMP%]   .dashboard-label[_ngcontent-%COMP%]{font-size:90%;color:var(--fg-300);text-align:center}
/*# sourceMappingURL=user-edit.component-MAOLAGTK.css.map */`]}));let e=_;return e;})();var xm=["userBanModal"],Gm=e=>({banned:e}),Um=e=>({"empty-cell":e}),wm=e=>[e];function Vm(e,_){if(e&1&&p(0,"my-action-dropdown",19),e&2){let n=d(2);s("actions",n.bulkActions)("entry",n.selectedRows);}}function km(e,_){e&1&&(i(0,"a",20),p(1,"my-global-icon",21),E(2),c(3,1),T(),o());}function zm(e,_){if(e&1){let n=w();i(0,"div",13)(1,"div",14),u(2,Vm,1,2,"my-action-dropdown",15)(3,km,4,0,"a",16),o(),i(4,"div",17)(5,"my-advanced-input-filter",18),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o()()();}if(e&2){let n=d();l(2),s("ngIf",n.isInSelectionMode()),l(),s("ngIf",!n.isInSelectionMode()),l(2),s("filters",n.inputFilters);}}function Xm(e,_){if(e&1&&(i(0,"th",43),g(1),p(2,"p-sortIcon",44),o()),e&2){let n=d(2);s("ngbTooltip",n.sortTooltip),l(),V("",n.getColumn("username").label," ");}}function Bm(e,_){if(e&1&&(i(0,"th",45),g(1),p(2,"p-sortIcon",46),o()),e&2){let n=d(2);s("ngbTooltip",n.sortTooltip),l(),V("",n.getColumn("role").label," ");}}function Wm(e,_){if(e&1&&(i(0,"th",47),g(1),o()),e&2){let n=d(2);l(),N(n.getColumn("email").label);}}function Hm(e,_){if(e&1&&(i(0,"th",48),g(1),p(2,"p-sortIcon",49),o()),e&2){let n=d(2);s("ngbTooltip",n.sortTooltip),l(),V("",n.getColumn("quota").label," ");}}function jm(e,_){if(e&1&&(i(0,"th",50),g(1),o()),e&2){let n=d(2);l(),N(n.getColumn("quotaDaily").label);}}function Km(e,_){if(e&1&&(i(0,"th",51),g(1),o()),e&2){let n=d(2);l(),N(n.getColumn("totalVideoFileSize").label);}}function Jm(e,_){if(e&1&&(i(0,"th",52),g(1),o()),e&2){let n=d(2);l(),N(n.getColumn("pluginAuth").label);}}function Ym(e,_){if(e&1&&(i(0,"th",53),g(1),p(2,"p-sortIcon",54),o()),e&2){let n=d(2);s("ngbTooltip",n.sortTooltip),l(),V("",n.getColumn("createdAt").label," ");}}function qm(e,_){if(e&1&&(i(0,"th",55),g(1),p(2,"p-sortIcon",56),o()),e&2){let n=d(2);s("ngbTooltip",n.sortTooltip),l(),V("",n.getColumn("lastLoginDate").label," ");}}function Qm(e,_){if(e&1){let n=w();i(0,"tr")(1,"th",22),p(2,"p-tableHeaderCheckbox",23),o(),i(3,"th",22)(4,"span",24),c(5,2),o()(),i(6,"th",25)(7,"div",26)(8,"button",27),p(9,"my-global-icon",28),o(),i(10,"div",29)(11,"div",30)(12,"label",31),c(13,3),o(),i(14,"my-select-checkbox",32),Ee("ngModelChange",function(a){f(n);let r=d();return Se(r.selectedColumns,a)||(r.selectedColumns=a),A(a);}),o()(),i(15,"div",30)(16,"my-peertube-checkbox",33),Ee("ngModelChange",function(a){f(n);let r=d();return Se(r.highlightBannedUsers,a)||(r.highlightBannedUsers=a),A(a);}),o()()()()(),u(17,Xm,3,2,"th",34)(18,Bm,3,2,"th",35)(19,Wm,2,1,"th",36)(20,Hm,3,2,"th",37)(21,jm,2,1,"th",38)(22,Km,2,1,"th",39)(23,Jm,2,1,"th",40)(24,Ym,3,2,"th",41)(25,qm,3,2,"th",42),o();}if(e&2){let n=d();l(14),s("availableItems",n.columns)("selectableGroup",!1),Ce("ngModel",n.selectedColumns),l(2),Ce("ngModel",n.highlightBannedUsers),l(),s("ngIf",n.isSelected("username")),l(),s("ngIf",n.isSelected("role")),l(),s("ngIf",n.isSelected("email")),l(),s("ngIf",n.isSelected("quota")),l(),s("ngIf",n.isSelected("quotaDaily")),l(),s("ngIf",n.isSelected("totalVideoFileSize")),l(),s("ngIf",n.isSelected("pluginAuth")),l(),s("ngIf",n.isSelected("createdAt")),l(),s("ngIf",n.isSelected("lastLoginDate"));}}function Zm(e,_){if(e&1&&p(0,"my-table-expander-icon",67),e&2){let n=d(),t=n.expanded,a=n.$implicit;s("pRowToggler",a)("expanded",t);}}function eu(e,_){if(e&1){let n=w();i(0,"my-user-moderation-dropdown",68),M("userChanged",function(){f(n);let a=d(2);return A(a.onUserChanged());})("userDeleted",function(){f(n);let a=d(2);return A(a.onUserChanged());}),o();}if(e&2){let n=d().$implicit,t=d();s("user",n)("account",n.accountMutedStatus)("displayOptions",t.userModerationDisplayOptions);}}function tu(e,_){e&1&&(i(0,"div",75),c(1,4),o());}function nu(e,_){e&1&&(i(0,"div",75),c(1,5),o());}function ou(e,_){if(e&1&&(i(0,"td",69)(1,"a",70)(2,"div",71),p(3,"my-actor-avatar",72),i(4,"div")(5,"span"),g(6),o(),i(7,"span",73),g(8),o()()()(),u(9,tu,2,0,"div",74)(10,nu,2,0,"div",74),o()),e&2){let n=d().$implicit;l(),s("routerLink",H(6,wm,"/a/"+n.username)),l(2),s("actor",n==null?null:n.account),l(3),N(n.account.displayName),l(2),N(n.username),l(),s("ngIf",n.accountMutedStatus.mutedByInstance),l(),s("ngIf",n.blocked);}}function iu(e,_){if(e&1&&(i(0,"span",78),g(1),o()),e&2){let n=d(2).$implicit;l(),N(n.role.label);}}function ru(e,_){if(e&1&&(i(0,"span",79),g(1),o()),e&2){let n=d(2).$implicit,t=d();s("ngClass",t.getRoleClass(n.role.id)),l(),N(n.role.label);}}function _u(e,_){if(e&1&&(i(0,"td"),u(1,iu,2,1,"span",76)(2,ru,2,2,"span",77),o()),e&2){let n=d().$implicit;l(),s("ngIf",n.blocked),l(),s("ngIf",!n.blocked);}}function au(e,_){if(e&1&&(i(0,"td"),p(1,"my-user-email-info",80),o()),e&2){let n=d().$implicit;l(),s("entry",n);}}function lu(e,_){if(e&1&&(i(0,"td"),p(1,"my-progress-bar",81),o()),e&2){let n=d().$implicit;l(),s("max",n.rawVideoQuota)("value",n.rawVideoQuotaUsed)("valueFormatted",n.videoQuotaUsed)("maxFormatted",n.videoQuota);}}function su(e,_){if(e&1&&(i(0,"td"),p(1,"my-progress-bar",82),o()),e&2){let n=d().$implicit;l(),s("max",n.rawVideoQuotaDaily)("value",n.rawVideoQuotaUsedDaily)("valueFormatted",n.videoQuotaUsedDaily)("maxFormatted",n.videoQuotaDaily);}}function cu(e,_){if(e&1&&(i(0,"td"),g(1),oe(2,"bytes"),o()),e&2){let n=d().$implicit;l(),V(" ",Ar(2,1,n.totalVideoFileSize)," ");}}function du(e,_){if(e&1&&(i(0,"span",84),g(1),o()),e&2){let n=d(2).$implicit;s("ngbTooltip",n.pluginAuth),l(),N(n.pluginAuth);}}function pu(e,_){if(e&1&&(i(0,"td"),u(1,du,2,2,"span",83),o()),e&2){let n=d().$implicit;l(),s("ngIf",n.pluginAuth);}}function mu(e,_){if(e&1&&(i(0,"td",85),g(1),oe(2,"ptDate"),o()),e&2){let n=d().$implicit;s("title",n.createdAt),l(),N(re(2,2,n.createdAt,"short"));}}function uu(e,_){if(e&1&&(i(0,"td",85),g(1),oe(2,"ptDate"),o()),e&2){let n=d().$implicit;s("title",n.lastLoginDate),l(),N(re(2,2,n.lastLoginDate,"short"));}}function gu(e,_){if(e&1&&(i(0,"tr",57)(1,"td",58),p(2,"p-tableCheckbox",59),o(),i(3,"td",60),u(4,Zm,1,2,"my-table-expander-icon",61),o(),i(5,"td",62),u(6,eu,1,3,"my-user-moderation-dropdown",63),o(),u(7,ou,11,8,"td",64)(8,_u,3,2,"td",65)(9,au,2,1,"td",65)(10,lu,2,4,"td",65)(11,su,2,4,"td",65)(12,cu,3,3,"td",65)(13,pu,2,1,"td",65)(14,mu,3,5,"td",66)(15,uu,3,5,"td",66),o()),e&2){let n=_.$implicit,t=d();s("pSelectableRow",n)("ngClass",H(15,Gm,t.highlightBannedUsers&&n.blocked)),l(2),s("value",n),l(),s("ngClass",H(17,Um,!n.blockedReason)),l(),s("ngIf",n.blockedReason),l(2),s("ngIf",!t.isInSelectionMode()),l(),s("ngIf",t.isSelected("username")),l(),s("ngIf",t.isSelected("role")),l(),s("ngIf",t.isSelected("email")),l(),s("ngIf",t.isSelected("quota")),l(),s("ngIf",t.isSelected("quotaDaily")),l(),s("ngIf",t.isSelected("totalVideoFileSize")),l(),s("ngIf",t.isSelected("pluginAuth")),l(),s("ngIf",t.isSelected("createdAt")),l(),s("ngIf",t.isSelected("lastLoginDate"));}}function Cu(e,_){if(e&1&&(i(0,"tr",86)(1,"td",87)(2,"span",88),c(3,6),o(),g(4),o()()),e&2){let n=_.$implicit;l(4),V(" ",n.blockedReason," ");}}var za=(()=>{let _=class _ extends Ge{route=S(Qe);router=S(Ze);notifier=S(Y);confirmService=S(be);auth=S(At);blocklist=S(xo);userAdminService=S(zt);peertubeLocalStorage=S(No);hooks=S(fo);pluginService=S(Yt);userBanModal=Ct("userBanModal");users=[];totalRecords=0;sort={field:"createdAt",order:1};pagination={count:this.rowsPerPage,start:0};highlightBannedUsers=!1;bulkActions=[];columns;inputFilters=[{title:"Advanced filters",children:[{value:"banned:true",label:"Banned users"}]}];userModerationDisplayOptions={instanceAccount:!0,instanceUser:!0,myAccount:!1};_selectedColumns=[];get authUser(){return this.auth.getUser();}get selectedColumns(){return this._selectedColumns||[];}set selectedColumns(t){this._selectedColumns=t,this.saveSelectedColumns();}ngOnInit(){return _e(this,null,function*(){this.initialize(),this.pluginService.addAction("admin-users-list:load-data",()=>this.reloadDataInternal());let t=[[{label:"Delete",description:"Videos will be deleted, comments will be tombstoned.",handler:a=>this.removeUsers(a),isDisplayed:a=>a.every(r=>this.authUser.canManage(r))},{label:"Ban",description:"User won't be able to login anymore, but videos and comments will be kept as is.",handler:a=>this.openBanUserModal(a),isDisplayed:a=>a.every(r=>this.authUser.canManage(r)&&r.blocked===!1)},{label:"Reabilitar",handler:a=>this.unbanUsers(a),isDisplayed:a=>a.every(r=>this.authUser.canManage(r)&&r.blocked===!0)}],[{label:"Passar l\u2019adre\xE7a coma verificada",handler:a=>this.setEmailsAsVerified(a),isDisplayed:a=>a.every(r=>this.authUser.canManage(r)&&!r.blocked&&r.emailVerified!==!0)}]];this.bulkActions=yield this.hooks.wrapObject(t,"admin-users","filter:admin-users-list.bulk-actions.create.result"),this.columns=[{id:"username",label:"Nom d\u2019utilizaire"},{id:"role",label:"R\xF2tle"},{id:"email",label:"Corri\xE8l"},{id:"quota",label:"Qu\xF2ta vid\xE8o"},{id:"totalVideoFileSize",label:"Total size"},{id:"createdAt",label:"Created"},{id:"lastLoginDate",label:"Last login"},{id:"quotaDaily",label:"Daily quota"},{id:"pluginAuth",label:"Auth plugin"}],this.loadSelectedColumns();});}ngOnDestroy(){this.pluginService.removeAction("admin-users-list:load-data");}loadSelectedColumns(){let t=this.peertubeLocalStorage.getItem(_.LS_SELECTED_COLUMNS_KEY);if(t)try{this.selectedColumns=JSON.parse(t);return;}catch(a){yn.error("Cannot load selected columns.",a);}this.selectedColumns=["username","role","email","quota","totalVideoFileSize","createdAt","lastLoginDate"];}saveSelectedColumns(){this.peertubeLocalStorage.setItem(_.LS_SELECTED_COLUMNS_KEY,JSON.stringify(this.selectedColumns));}getIdentifier(){return"UserListComponent";}getRoleClass(t){switch(t){case kt.ADMINISTRATOR:return"badge-purple";case kt.MODERATOR:return"badge-blue";default:return"badge-yellow";}}isSelected(t){return this.selectedColumns.find(a=>a===t);}getColumn(t){return this.columns.find(a=>a.id===t);}getUserVideoQuotaPercentage(t){return t.rawVideoQuotaUsed*100/t.rawVideoQuota;}getUserVideoQuotaDailyPercentage(t){return t.rawVideoQuotaUsedDaily*100/t.rawVideoQuotaDaily;}openBanUserModal(t){for(let a of t)if(a.username==="root"){this.notifier.error("Pod\xE8tz pas f\xF2rabandir lo root.");return;}this.userBanModal().openModal(t);}onUserChanged(){this.reloadData();}unbanUsers(t){return _e(this,null,function*(){(yield this.confirmService.confirm(se("Do you really want to unban {count, plural, =1 {1 user} other {{count} users}}?",{count:t.length}),"Reabilitar"))!==!1&&this.userAdminService.unbanUsers(t).subscribe({next:()=>{this.notifier.success(se("{count, plural, =1 {1 user unbanned.} other {{count} users unbanned.}}",{count:t.length})),this.reloadData();},error:r=>this.notifier.error(r.message)});});}removeUsers(t){return _e(this,null,function*(){if(t.some(m=>m.username==="root")){this.notifier.error("Pod\xE8tz pas suprimir l\u2019utilizaire root.");return;}let a="<p>You can't create users or channels with a username that already used by a deleted user/channel.</p>"+"It means the following usernames will be permanently deleted and cannot be recovered:"+"<ul>"+t.map(m=>"<li>"+m.username+"</li>").join("")+"</ul>";(yield this.confirmService.confirm(a,"Delete"))!==!1&&this.userAdminService.removeUsers(t).subscribe({next:()=>{this.notifier.success(se("{count, plural, =1 {1 user deleted.} other {{count} users deleted.}}",{count:t.length})),this.reloadData();},error:m=>this.notifier.error(m.message)});});}setEmailsAsVerified(t){this.userAdminService.updateUsers(t,{emailVerified:!0}).subscribe({next:()=>{this.notifier.success(se("{count, plural, =1 {1 user email set as verified.} other {{count} user emails set as verified.}}",{count:t.length})),this.reloadData();},error:a=>this.notifier.error(a.message)});}reloadDataInternal(){return _e(this,null,function*(){let t=this.userAdminService.getUsers({pagination:this.pagination,sort:this.sort,search:this.search});try{let a=yield cr(t);this.users=a.data.map(r=>It(gt({},r),{accountMutedStatus:It(gt({},r.account),{nameWithHost:Kr.CREATE_BY_STRING(r.account.name,r.account.host),mutedByInstance:!1,mutedByUser:!1,mutedServerByInstance:!1,mutedServerByUser:!1})})),this.totalRecords=a.total,this.loadMutedStatus();}catch(a){this.notifier.error(a.message);}});}loadMutedStatus(){this.blocklist.getStatus({accounts:this.users.map(t=>t.username+"@"+ei())}).subscribe(t=>{for(let a of this.users)a.accountMutedStatus.mutedByInstance=t.accounts[a.username+"@"+ei()].blockedByServer;});}};I(_,"LS_SELECTED_COLUMNS_KEY","admin-user-list-selected-columns"),I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-user-list"]],viewQuery:function(a,r){a&1&&St(r.userBanModal,xm,5),a&2&&Nt();},features:[ne],decls:7,vars:16,consts:()=>{let t;t="Accions Batch";let a;a="Create user";let r;r="Select all rows";let m;m="Open table configuration";let C;C="Select the columns to display";let O;O="Highlight banned users";let P;P="Mai d\u2019informacions";let y;y="Select the columns to display";let v;v="Select this row";let L;L="Open account in a new tab";let W;W="Muda";let k;k="F\xF2rabandit";let $;$="The user was banned";let X;X="Qu\xF2ta vid\xE8o total";let x;x="Total daily video quota";let z;return z="Rason del bandiment\xA0:",[["userBanModal",""],a,P,y,W,k,z,["dataKey","id",3,"selectionChange","onLazyLoad","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","resizableColumns","selection","lazy","lazyLoadOnInit","selectionPageOnly","showCurrentPageReport","currentPageReportTemplate","expandedRowKeys"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"userBanned"],[1,"caption"],[1,"left-buttons"],["label",t,"theme","primary",3,"actions","entry",4,"ngIf"],["class","peertube-create-button","routerLink","/admin/overview/users/create",4,"ngIf"],[1,"ms-auto"],[3,"search","filters"],["label",t,"theme","primary",3,"actions","entry"],["routerLink","/admin/overview/users/create",1,"peertube-create-button"],["iconName","user-add","aria-hidden","true"],["scope","col",2,"width","40px"],["ariaLabel",r],[1,"visually-hidden"],["scope","col",2,"width","70px"],["ngbDropdown","","placement","bottom-left auto","container","body","autoClose","outside",1,"c-hand","column-toggle"],["type","button","ngbDropdownToggle","","title",m,1,"border-0","p-0"],["iconName","columns"],["ngbDropdownMenu","",1,"p-3"],[1,"form-group"],["for","select-columns"],["inputId","select-columns","placeholder",C,3,"ngModelChange","availableItems","selectableGroup","ngModel"],["inputName","highlightBannedUsers","labelText",O,3,"ngModelChange","ngModel"],["scope","col","pResizableColumn","","container","body","pSortableColumn","username",3,"ngbTooltip",4,"ngIf"],["scope","col","style","width: 120px;","container","body","pSortableColumn","role",3,"ngbTooltip",4,"ngIf"],["scope","col",4,"ngIf"],["scope","col","style","width: 160px;","container","body","pSortableColumn","videoQuotaUsed",3,"ngbTooltip",4,"ngIf"],["scope","col","style","width: 160px;",4,"ngIf"],["scope","col","style","width: 100px;",4,"ngIf"],["scope","col","style","width: 140px;","pResizableColumn","",4,"ngIf"],["scope","col","style","width: 150px;","container","body","pSortableColumn","createdAt",3,"ngbTooltip",4,"ngIf"],["scope","col","style","width: 150px;","container","body","pSortableColumn","lastLoginDate",3,"ngbTooltip",4,"ngIf"],["scope","col","pResizableColumn","","container","body","pSortableColumn","username",3,"ngbTooltip"],["field","username"],["scope","col","container","body","pSortableColumn","role",2,"width","120px",3,"ngbTooltip"],["field","role"],["scope","col"],["scope","col","container","body","pSortableColumn","videoQuotaUsed",2,"width","160px",3,"ngbTooltip"],["field","videoQuotaUsed"],["scope","col",2,"width","160px"],["scope","col",2,"width","100px"],["scope","col","pResizableColumn","",2,"width","140px"],["scope","col","container","body","pSortableColumn","createdAt",2,"width","150px",3,"ngbTooltip"],["field","createdAt"],["scope","col","container","body","pSortableColumn","lastLoginDate",2,"width","150px",3,"ngbTooltip"],["field","lastLoginDate"],[3,"pSelectableRow","ngClass"],[1,"checkbox-cell"],["ariaLabel",v,3,"value"],[1,"expand-cell",3,"ngClass"],[3,"pRowToggler","expanded",4,"ngIf"],[1,"action-cell"],["container","body","buttonSize","small",3,"user","account","displayOptions","userChanged","userDeleted",4,"ngIf"],["class","cell-username",4,"ngIf"],[4,"ngIf"],[3,"title",4,"ngIf"],[3,"pRowToggler","expanded"],["container","body","buttonSize","small",3,"userChanged","userDeleted","user","account","displayOptions"],[1,"cell-username"],["title",L,"target","_blank","rel","noopener noreferrer",3,"routerLink"],[1,"chip","two-lines"],["actorType","account","size","32",3,"actor"],[1,"muted"],["class","pt-badge badge-red",4,"ngIf"],[1,"pt-badge","badge-red"],["class","pt-badge badge-banned","title",$,4,"ngIf"],["class","pt-badge",3,"ngClass",4,"ngIf"],["title",$,1,"pt-badge","badge-banned"],[1,"pt-badge",3,"ngClass"],["showEmailVerifyInformation","true",3,"entry"],["label",X,"size","small",3,"max","value","valueFormatted","maxFormatted"],["label",x,"size","small",3,"max","value","valueFormatted","maxFormatted"],[3,"ngbTooltip",4,"ngIf"],[3,"ngbTooltip"],[3,"title"],[1,"user-blocked-reason"],["myAutoColspan",""],[1,"ban-reason-label"]];},template:function(a,r){if(a&1){let m=w();i(0,"p-table",7),Ee("selectionChange",function(O){return f(m),Se(r.selectedRows,O)||(r.selectedRows=O),A(O);}),M("onLazyLoad",function(O){return f(m),A(r.loadLazy(O));}),u(1,zm,6,3,"ng-template",8)(2,Qm,26,13,"ng-template",9)(3,gu,16,19,"ng-template",10)(4,Cu,5,1,"ng-template",11),o(),i(5,"my-user-ban-modal",12,0),M("userBanned",function(){return f(m),A(r.onUserChanged());}),o();}a&2&&(s("value",r.users)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("resizableColumns",!0),Ce("selection",r.selectedRows),s("lazy",!0)("lazyLoadOnInit",!1)("selectionPageOnly",!0)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate())("expandedRowKeys",r.expandedRows));},dependencies:[Ue,Fe,Ae,Oe,Re,Qt,Pt,S_,Pe,Lt,$t,Me,B,nt,lt,ot,Vr,wr,Ur,Ro,le,me,ht,tt,De,pe,Ft,$_,Po,zo,he,L_,ve,Tt,y_],styles:[`.banned-info[_ngcontent-%COMP%]{font-style:italic}.ban-reason-label[_ngcontent-%COMP%]{font-weight:600}.cell-username[_ngcontent-%COMP%]   .pt-badge[_ngcontent-%COMP%]{margin-inline-start:.9375rem}p-tableCheckbox[_ngcontent-%COMP%]{position:relative;top:-2.5px}@media screen and (max-width: 1000px){.empty-cell[_ngcontent-%COMP%]{padding:0}}
/*# sourceMappingURL=user-list.component-LLARHKLW.css.map */`]}));let e=_;return e;})();var jo=(()=>{let _=class _{videoService=S(hn);authHttp=S(at);restExtractor=S(dt);restService=S(bt);getAdminVideos(t){let{pagination:a,search:r}=t,m=new Et();return m=this.videoService.buildVideoListParams(gt({params:m},yr(t,["search","pagination"]))),m=m.set("start",a.start.toString()).set("count",a.count.toString()),m=this.buildAdminParamsFromSearch(r,m),this.authHttp.get(hn.BASE_VIDEO_URL,{params:m}).pipe(bn(C=>this.videoService.extractVideos(C)),ce(C=>this.restExtractor.handleError(C)));}buildAdminInputFilter(){return[{title:"Moderacion",children:[{value:"nsfw:true",label:"Sensitive videos"}]},{title:"Video type",children:[{value:"isLive:false",label:"VOD"},{value:"isLive:true",label:"Live"}]},{title:"Video files",children:[{value:"webVideos:true isLocal:true",label:"With Web Videos"},{value:"webVideos:false isLocal:true",label:"Without Web Videos"},{value:"hls:true isLocal:true",label:"With HLS"},{value:"hls:false isLocal:true",label:"Without HLS"}]},{title:"Videos scope",children:[{value:"isLocal:false",label:"Remote videos"},{value:"isLocal:true",label:"Vid\xE8os localas"}]},{title:"Exclude",children:[{value:"excludeMuted",label:"Exclude muted accounts"},{value:"excludePublic",label:"Exclude public videos"}]}];}buildAdminParamsFromSearch(t,a){let r=In.BLACKLISTED|In.BLOCKED_OWNER|In.NOT_PUBLISHED_STATE|In.FILES|In.SOURCE|In.AUTOMATIC_TAGS,m=Gr();if(!t)return this.restService.addObjectParams(a,{include:r,privacyOneOf:m});let C=this.restService.parseQueryStringFilter(t,{isLocal:{prefix:"isLocal:",isBoolean:!0},hasHLSFiles:{prefix:"hls:",isBoolean:!0},hasWebVideoFiles:{prefix:"webVideos:",isBoolean:!0},isLive:{prefix:"isLive:",isBoolean:!0},excludeMuted:{prefix:"excludeMuted",handler:()=>!0},excludePublic:{prefix:"excludePublic",handler:()=>!0},autoTagOneOf:{prefix:"autoTag:",multiple:!0},nsfw:{prefix:"nsfw:",isBoolean:!0}});return C.excludeMuted&&(r&=~In.BLOCKED_OWNER,C.excludeMuted=void 0),C.excludePublic&&(m=[to.PRIVATE,to.UNLISTED,to.INTERNAL,to.PASSWORD_PROTECTED],C.excludePublic=void 0),this.restService.addObjectParams(a,It(gt({},C),{include:r,privacyOneOf:m}));}};I(_,"\u0275fac",function(a){return new(a||_)();}),I(_,"\u0275prov",qe({token:_,factory:_.ɵfac}));let e=_;return e;})();var Su=["videoBlockModal"],Eu=e=>({loading:e}),Tu=()=>["."],Iu=e=>({search:e});function Nu(e,_){if(e&1&&p(0,"my-action-dropdown",32),e&2){let n=d(2);s("actions",n.bulkActions)("entry",n.selectedRows);}}function Ou(e,_){if(e&1){let n=w();i(0,"div",26)(1,"div",27),u(2,Nu,1,2,"my-action-dropdown",28),o(),i(3,"div",29)(4,"my-advanced-input-filter",30),M("search",function(a){f(n);let r=d();return A(r.onSearch(a));}),o(),i(5,"my-button",31),M("click",function(){f(n);let a=d();return A(a.reloadData());}),o()()();}if(e&2){let n=d();l(2),s("ngIf",n.isInSelectionMode()),l(2),s("filters",n.inputFilters);}}function Mu(e,_){if(e&1&&(i(0,"tr")(1,"th",33),p(2,"p-tableHeaderCheckbox",34),o(),i(3,"th",33)(4,"span",35),c(5,1),o()(),i(6,"th",36)(7,"span",35),c(8,2),o()(),i(9,"th",37),c(10,3),o(),i(11,"th",37),c(12,4),o(),i(13,"th",38),D(14,5),p(15,"p-sortIcon",39),b(),o(),i(16,"th",40),D(17,6),p(18,"p-sortIcon",41),b(),o()()),e&2){let n=d();l(13),s("ngbTooltip",n.sortTooltip),l(3),s("ngbTooltip",n.sortTooltip);}}function fu(e,_){e&1&&(i(0,"span",50),c(1,7),o());}function Au(e,_){e&1&&(i(0,"span",51),c(1,8),o());}function Ru(e,_){if(e&1&&(i(0,"span",60),g(1),o()),e&2){let n=d().$implicit;l(),N(n.state.label);}}function Pu(e,_){e&1&&(i(0,"span",61),c(1,9),o());}function Fu(e,_){e&1&&(i(0,"span",61),c(1,10),o());}function hu(e,_){e&1&&(i(0,"span",61),c(1,11),o());}function Du(e,_){if(e&1&&(i(0,"a",56),g(1),o()),e&2){let n=_.$implicit,t=d(2);s("routerLink",Ht(3,Tu))("queryParams",H(4,Iu,t.buildSearchAutoTag(n))),l(),N(n);}}function bu(e,_){e&1&&(i(0,"span",50),c(1,12),o());}function vu(e,_){e&1&&(i(0,"span",50),c(1,13),o());}function yu(e,_){if(e&1&&(i(0,"span",50),c(1,14),o()),e&2){let n=d().$implicit;l(),j(n.files.length),K(1);}}function Lu(e,_){e&1&&(i(0,"span",50),c(1,15),o());}function $u(e,_){e&1&&(i(0,"span",51),c(1,16),o());}function xu(e,_){if(e&1&&(i(0,"span"),g(1),oe(2,"bytes"),o()),e&2){let n=d().$implicit,t=d();l(),N(re(2,1,t.getFilesSize(n),1));}}function Gu(e,_){if(e&1){let n=w();i(0,"tr",42),M("onRowExpand",function(){let a=f(n).$implicit,r=d();return A(r.onVideoPanelOpened(a));}),i(1,"td",43),p(2,"p-tableCheckbox",44),o(),i(3,"td",45),p(4,"my-table-expander-icon",46),o(),i(5,"td",47)(6,"my-video-actions-dropdown",48),M("videoRemoved",function(){f(n);let a=d();return A(a.reloadData());})("videoFilesRemoved",function(){f(n);let a=d();return A(a.reloadData());})("transcodingCreated",function(){f(n);let a=d();return A(a.reloadData());}),o()(),i(7,"td"),p(8,"my-video-cell",49),o(),i(9,"td")(10,"div"),u(11,fu,2,0,"span",50)(12,Au,2,0,"span",51),p(13,"my-video-privacy-badge",52)(14,"my-video-nsfw-badge",53),u(15,Ru,2,1,"span",54)(16,Pu,2,0,"span",55)(17,Fu,2,0,"span",55)(18,hu,2,0,"span",55),o(),i(19,"div"),Tr(20,Du,2,6,"a",56,Er),o()(),i(22,"td"),u(23,bu,2,0,"span",57)(24,vu,2,0,"span",57)(25,yu,2,1,"span",57)(26,Lu,2,0,"span",57)(27,$u,2,0,"span",58)(28,xu,3,4,"span",59),o(),i(29,"td"),g(30),oe(31,"ptDate"),o()();}if(e&2){let n=_.expanded,t=_.$implicit,a=d();s("pSelectableRow",t),l(2),s("value",t),l(2),s("pRowToggler",t)("expanded",n),l(2),s("video",t)("displayOptions",a.videoActionsOptions),l(2),s("video",t),l(3),ge(t.isLocal?11:12),l(2),s("video",t),l(),s("video",t),l(),s("ngIf",a.isUnpublished(t)),l(),s("ngIf",a.isAccountBlocked(t)),l(),s("ngIf",a.isServerBlocked(t)),l(),s("ngIf",a.isVideoBlocked(t)),l(2),Ir(t.automaticTags),l(3),s("ngIf",a.hasOriginalFile(t)),l(),s("ngIf",a.hasHLS(t)),l(),s("ngIf",a.hasWebVideos(t)),l(),s("ngIf",t.isLive),l(),s("ngIf",a.hasObjectStorage(t)),l(),s("ngIf",!a.isImport(t)&&!t.isLive&&t.isLocal),l(2),V(" ",re(31,21,t.publishedAt,"short")," ");}}function Uu(e,_){if(e&1){let n=w();i(0,"div",65),E(1),c(2,17),T(),i(3,"ul")(4,"li")(5,"a",66),g(6),o(),g(7),oe(8,"bytes"),i(9,"button",67),M("click",function(){f(n);let a=d().$implicit,r=d();return A(r.removeVideoSourceFile(a));}),p(10,"my-global-icon",68),o()()()();}if(e&2){let n=d().$implicit,t=d();l(5),s("href",t.getDownloadUrl(n,n.videoSource.fileDownloadUrl),ke),l(),N(n.videoSource.inputFilename),l(),V(": ",re(8,3,n.videoSource.size,1)," ");}}function wu(e,_){if(e&1){let n=w();i(0,"button",72),M("click",function(){f(n);let a=d().$implicit,r=d(2).$implicit,m=d();return A(m.removeVideoFile(r,a,"web-videos"));}),p(1,"my-global-icon",68),o();}}function Vu(e,_){if(e&1&&(i(0,"li")(1,"a",70),g(2),o(),g(3),oe(4,"bytes"),u(5,wu,2,0,"button",71),o()),e&2){let n=_.$implicit,t=d(2).$implicit,a=d();l(),s("href",a.getDownloadUrl(t,n.fileDownloadUrl),ke),l(),N(n.resolution.label),l(),V(": ",re(4,4,n.size,1)," "),l(2),s("ngIf",a.canRemoveOneFile(t));}}function ku(e,_){if(e&1&&(i(0,"div",65),E(1),c(2,18),T(),i(3,"ul"),u(4,Vu,6,7,"li",69),o()()),e&2){let n=d().$implicit;l(4),s("ngForOf",n.files);}}function zu(e,_){if(e&1){let n=w();i(0,"button",75),M("click",function(){f(n);let a=d().$implicit,r=d(2).$implicit,m=d();return A(m.removeVideoFile(r,a,"hls"));}),p(1,"my-global-icon",68),o();}}function Xu(e,_){if(e&1&&(i(0,"li")(1,"a",73),g(2),o(),g(3),oe(4,"bytes"),u(5,zu,2,0,"button",74),o()),e&2){let n=_.$implicit,t=d(2).$implicit,a=d();l(),s("href",a.getDownloadUrl(t,n.fileDownloadUrl),ke),l(),N(n.resolution.label),l(),V(": ",re(4,4,n.size,1)," "),l(2),s("ngIf",a.canRemoveOneFile(t));}}function Bu(e,_){if(e&1&&(i(0,"div"),E(1),c(2,19),T(),i(3,"ul"),u(4,Xu,6,7,"li",69),o()()),e&2){let n=d().$implicit;l(4),s("ngForOf",n.streamingPlaylists[0].files);}}function Wu(e,_){if(e&1&&(i(0,"tr")(1,"td",62)(2,"div"),u(3,Uu,11,6,"div",63)(4,ku,5,1,"div",63)(5,Bu,5,1,"div",59),p(6,"my-embed",64),o()()()),e&2){let n=_.$implicit,t=d();l(3),s("ngIf",t.hasOriginalFile(n)),l(),s("ngIf",t.hasWebVideos(n)),l(),s("ngIf",t.hasHLS(n)),l(),s("video",n);}}var Xa=(()=>{let _=class _ extends Ge{route=S(Qe);router=S(Ze);confirmService=S(be);auth=S(At);notifier=S(Y);videoService=S(hn);videoAdminService=S(jo);videoBlockService=S(wn);videoCaptionService=S(d_);server=S(fe);videoFileTokenService=S(u_);videoBlockModal=Ct("videoBlockModal");videos=[];totalRecords=0;sort={field:"publishedAt",order:-1};pagination={count:this.rowsPerPage,start:0};bulkActions=[];inputFilters;videoActionsOptions={playlist:!1,download:!1,update:!0,blacklist:!0,delete:!0,report:!1,duplicate:!0,mute:!0,liveInfo:!1,removeFiles:!0,transcoding:!0,generateTranscription:!0};loading=!0;videoFileTokens={};get authUser(){return this.auth.getUser();}get serverConfig(){return this.server.getHTMLConfig();}ngOnInit(){this.initialize(),this.inputFilters=this.videoAdminService.buildAdminInputFilter(),this.bulkActions=[[{label:"Delete",handler:t=>this.removeVideos(t),isDisplayed:()=>this.authUser.hasRight(Q.REMOVE_ANY_VIDEO),iconName:"delete"},{label:"Block",handler:t=>this.videoBlockModal().show(t),isDisplayed:t=>this.authUser.hasRight(Q.MANAGE_VIDEO_BLACKLIST)&&t.every(a=>!a.blacklisted),iconName:"no"},{label:"Desblocar",handler:t=>this.unblockVideos(t),isDisplayed:t=>this.authUser.hasRight(Q.MANAGE_VIDEO_BLACKLIST)&&t.every(a=>a.blacklisted),iconName:"undo"}],[{label:"Run HLS transcoding",handler:t=>this.runTranscoding(t,"hls"),isDisplayed:t=>t.every(a=>a.canRunTranscoding(this.authUser)),iconName:"cog"},{label:"Run Web Video transcoding",handler:t=>this.runTranscoding(t,"web-video"),isDisplayed:t=>t.every(a=>a.canRunTranscoding(this.authUser)),iconName:"cog"},{label:"Delete HLS files",handler:t=>this.removeVideoFiles(t,"hls"),isDisplayed:t=>t.every(a=>a.canRemoveAllHLSOrWebFiles(this.authUser)),iconName:"delete"},{label:"Delete Web Video files",handler:t=>this.removeVideoFiles(t,"web-videos"),isDisplayed:t=>t.every(a=>a.canRemoveAllHLSOrWebFiles(this.authUser)),iconName:"delete"}],[{label:"Generate caption",handler:t=>this.generateCaption(t),isDisplayed:t=>t.every(a=>a.canGenerateTranscription(this.authUser,this.serverConfig.videoTranscription.enabled)),iconName:"video-lang"}]];}getIdentifier(){return"VideoListComponent";}isUnpublished(t){return t.state.id!==Co.LIVE_ENDED&&t.state.id!==Co.PUBLISHED;}isAccountBlocked(t){return t.blockedOwner;}isServerBlocked(t){return t.blockedServer;}isVideoBlocked(t){return t.blacklisted;}isImport(t){return t.state.id===Co.TO_IMPORT;}hasOriginalFile(t){return!!t.videoSource?.fileDownloadUrl;}hasHLS(t){let a=t.streamingPlaylists.find(r=>r.type===br.HLS);return a?a.files.length!==0:!1;}hasWebVideos(t){return t.files.length!==0;}hasObjectStorage(t){return t.isLocal?Qo(t).some(r=>r.storage===Fr.OBJECT_STORAGE):!1;}canRemoveOneFile(t){return t.canRemoveOneFile(this.authUser);}getFilesSize(t){let a=Qo(t).reduce((r,m)=>r+=m.size,0);return t.videoSource?.fileDownloadUrl&&(a+=t.videoSource.size||0),a;}removeVideoFile(t,a,r){return _e(this,null,function*(){let m="Are you sure you want to delete this "+a.resolution.label+" file?";(yield this.confirmService.confirm(m,"Delete file"))!==!1&&this.videoService.removeFile(t.uuid,a.id,r).subscribe({next:()=>{this.notifier.success("File removed."),this.reloadData();},error:O=>this.notifier.error(O.message)});});}removeVideoSourceFile(t){return _e(this,null,function*(){let a="Are you sure you want to delete the original file of this video?";(yield this.confirmService.confirm(a,"Delete original file"))!==!1&&this.videoService.removeSourceFile(t.uuid).subscribe({next:()=>{this.notifier.success("Original file removed."),this.reloadData();},error:m=>this.notifier.error(m.message)});});}buildSearchAutoTag(t){let a=`autoTag:"${t}"`;return this.search?this.search+" "+a:a;}onVideoPanelOpened(t){let a=t.data;!a.videoSource?.filename&&!Qr(a)||this.videoFileTokenService.getVideoFileToken({videoUUID:a.uuid}).subscribe(({token:r})=>{this.videoFileTokens[a.id]=r;});}getDownloadUrl(t,a){let r=this.videoFileTokens[t.id];return r?a+`?videoFileToken=${r}`:a;}reloadDataInternal(){this.loading=!0,this.videoAdminService.getAdminVideos({pagination:this.pagination,sort:this.sort,nsfw:"both",nsfwFlagsExcluded:Dr.NONE,search:this.search}).pipe(mr(()=>this.loading=!1)).subscribe({next:t=>{this.videos=t.data,this.totalRecords=t.total;},error:t=>this.notifier.error(t.message)});}removeVideos(t){return _e(this,null,function*(){let a=se("Are you sure you want to delete {count, plural, =1 {this video} other {these {count} videos}}?",{count:t.length});(yield this.confirmService.confirm(a,"Delete"))!==!1&&this.videoService.removeVideo(t.map(m=>m.id)).subscribe({next:()=>{this.notifier.success(se("Deleted {count, plural, =1 {1 video} other {{count} videos}}.",{count:t.length})),this.reloadData();},error:m=>this.notifier.error(m.message)});});}unblockVideos(t){this.videoBlockService.unblockVideo(t.map(a=>a.id)).subscribe({next:()=>{this.notifier.success(se("Unblocked {count, plural, =1 {1 video} other {{count} videos}}.",{count:t.length})),this.reloadData();},error:a=>this.notifier.error(a.message)});}removeVideoFiles(t,a){return _e(this,null,function*(){let r;a==="hls"?r=se("Are you sure you want to delete {count, plural, =1 {1 HLS streaming playlist} other {{count} HLS streaming playlists}}?",{count:t.length}):r=se("Are you sure you want to delete Web Video files of {count, plural, =1 {1 video} other {{count} videos}}?",{count:t.length}),(yield this.confirmService.confirm(r,"Delete"))!==!1&&this.videoService.removeVideoFiles(t.map(C=>C.id),a).subscribe({next:()=>{this.notifier.success("Files were removed."),this.reloadData();},error:C=>this.notifier.error(C.message)});});}runTranscoding(t,a){this.videoService.runTranscoding({videos:t,type:a}).subscribe({next:()=>{this.notifier.success("Transcoding jobs created."),this.reloadData();},error:r=>this.notifier.error(r.message)});}generateCaption(t){this.videoCaptionService.generateCaption({videos:t}).subscribe({next:a=>{a.success&&this.notifier.success(se("{count, plural, =1 {1 transcription job created.} other {{count} transcription jobs created.}}",{count:a.success})),a.alreadyHasCaptions&&this.notifier.info(se("{count, plural, =1 {1 video already has captions.} other {{count} videos already have captions.}}",{count:a.alreadyHasCaptions})),a.alreadyBeingTranscribed&&this.notifier.info(se("{count, plural, =1 {1 video is already being transcribed.} other {{count} videos are already being transcribed.}}",{count:a.alreadyBeingTranscribed}));},error:a=>this.notifier.error(a.message)});}};I(_,"\u0275fac",(()=>{let t;return function(r){return(t||(t=ue(_)))(r||_);};})()),I(_,"\u0275cmp",h({type:_,selectors:[["my-video-list"]],viewQuery:function(a,r){a&1&&St(r.videoBlockModal,Su,5),a&2&&Nt();},features:[ne],decls:7,vars:19,consts:()=>{let t;t="Accions Batch";let a;a="Actualizar";let r;r="Select all rows";let m;m="Mai d\u2019informacions";let C;C="Accions";let O;O="Vid\xE8o";let P;P="Info";let y;y="Files "+"\uFFFD#15\uFFFD"+""+"\uFFFD/#15\uFFFD"+"";let v;v="Published "+"\uFFFD#18\uFFFD"+""+"\uFFFD/#18\uFFFD"+"";let L;L="Select this row";let W;W="Only display videos with this tag";let k;k="Localas";let $;$="Remote";let X;X="Account muted";let x;x="Server muted";let z;z="Blocked";let G;G="Original file";let te;te="HLS";let ae;ae="Web Videos ("+"\uFFFD0\uFFFD"+")";let ze;ze="Live";let Xe;Xe="Object storage";let Be;Be="Download this file";let We;We="Delete this file";let He;He="Original file:";let je;je="Web Videos:";let Ke;Ke="Download this file";let we;we="Delete this file";let Je;Je="HLS:";let Ye;Ye="Download this file";let Ve;return Ve="Delete this file",[["videoBlockModal",""],m,C,O,P,y,v,k,$,X,x,z,G,te,ae,ze,Xe,He,je,Je,["dataKey","id",3,"selectionChange","onLazyLoad","onRowExpand","value","paginator","totalRecords","rows","first","rowsPerPageOptions","sortField","sortOrder","resizableColumns","selection","lazy","lazyLoadOnInit","selectionPageOnly","showCurrentPageReport","currentPageReportTemplate","expandedRowKeys","ngClass"],["pTemplate","caption"],["pTemplate","header"],["pTemplate","body"],["pTemplate","rowexpansion"],[3,"videoBlocked"],[1,"caption"],[1,"left-buttons"],["label",t,"theme","primary",3,"actions","entry",4,"ngIf"],[1,"ms-auto","right-form"],[3,"search","filters"],["label",a,"icon","refresh",3,"click"],["label",t,"theme","primary",3,"actions","entry"],["scope","col",2,"width","40px"],["ariaLabel",r],[1,"visually-hidden"],["scope","col",2,"width","70px"],["scope","col"],["scope","col","container","body","pSortableColumn","localVideoFilesSize",3,"ngbTooltip"],["field","localVideoFilesSize"],["scope","col","container","body","pSortableColumn","publishedAt",2,"width","150px",3,"ngbTooltip"],["field","publishedAt"],[3,"onRowExpand","pSelectableRow"],[1,"checkbox-cell"],["ariaLabel",L,3,"value"],[1,"expand-cell"],[3,"pRowToggler","expanded"],[1,"action-cell"],["placement","bottom auto","buttonDirection","horizontal","buttonStyled","true","buttonSize","small",3,"videoRemoved","videoFilesRemoved","transcodingCreated","video","displayOptions"],["size","small",3,"video"],[1,"pt-badge","badge-blue"],[1,"pt-badge","badge-purple"],[3,"video"],["theme","red",3,"video"],["class","pt-badge badge-yellow",4,"ngIf"],["class","pt-badge badge-red",4,"ngIf"],["title",W,1,"pt-badge","badge-secondary","me-1",3,"routerLink","queryParams"],["class","pt-badge badge-blue",4,"ngIf"],["class","pt-badge badge-purple",4,"ngIf"],[4,"ngIf"],[1,"pt-badge","badge-yellow"],[1,"pt-badge","badge-red"],["myAutoColspan","",1,"video-info","expand-cell"],["class","me-3",4,"ngIf"],[1,"ms-auto",3,"video"],[1,"me-3"],["title",Be,3,"href"],["title",We,1,"border-0","p-0",3,"click"],["iconName","delete"],[4,"ngFor","ngForOf"],["title",Ke,3,"href"],["class","border-0 p-0","title",we,3,"click",4,"ngIf"],["title",we,1,"border-0","p-0",3,"click"],["title",Ye,3,"href"],["class","border-0 p-0","title",Ve,3,"click",4,"ngIf"],["title",Ve,1,"border-0","p-0",3,"click"]];},template:function(a,r){if(a&1){let m=w();i(0,"p-table",20),Ee("selectionChange",function(O){return f(m),Se(r.selectedRows,O)||(r.selectedRows=O),A(O);}),M("onLazyLoad",function(O){return f(m),A(r.loadLazy(O));})("onRowExpand",function(O){return f(m),A(r.onVideoPanelOpened(O));}),u(1,Ou,6,2,"ng-template",21)(2,Mu,19,2,"ng-template",22)(3,Gu,32,24,"ng-template",23)(4,Wu,7,4,"ng-template",24),o(),i(5,"my-video-block",25,0),M("videoBlocked",function(){return f(m),A(r.reloadData());}),o();}a&2&&(s("value",r.videos)("paginator",r.totalRecords>0)("totalRecords",r.totalRecords)("rows",r.rowsPerPage)("first",r.pagination.start)("rowsPerPageOptions",r.rowsPerPageOptions)("sortField",r.sort.field)("sortOrder",r.sort.order)("resizableColumns",!0),Ce("selection",r.selectedRows),s("lazy",!0)("lazyLoadOnInit",!1)("selectionPageOnly",!0)("showCurrentPageReport",!0)("currentPageReportTemplate",r.getPaginationTemplate())("expandedRowKeys",r.expandedRows)("ngClass",H(17,Eu,r.loading)));},dependencies:[Ue,Fe,Ae,Oe,Re,Qt,Pt,Pe,Lt,$t,pe,Me,B,nt,ot,et,De,Ft,g_,Uo,he,Le,Go,m_,ve,lt,Tt,x_,wo],styles:[`td[_ngcontent-%COMP%]{padding-top:.25rem;padding-bottom:.25rem}my-embed[_ngcontent-%COMP%]{display:block;max-width:500px;width:50%}.pt-badge[_ngcontent-%COMP%], my-video-privacy-badge[_ngcontent-%COMP%], my-video-nsfw-badge[_ngcontent-%COMP%]{margin-inline-end:.3125rem}.video-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{display:flex}.video-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{position:relative;top:-2px;display:inline-block;width:16px;height:16px;line-height:16px;margin-inline-start:.1875rem}.loading[_ngcontent-%COMP%]{opacity:.5}.right-form[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;row-gap:.5rem}.right-form[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-inline-end:.625rem}
/*# sourceMappingURL=video-list.component-COH6P25F.css.map */`]}));let e=_;return e;})();function ai({url:e}){return`/admin/overview/${e.map(_=>_.path).join("/")}`;}var li=[{path:"comments",pathMatch:"prefix",redirectTo:ai},{path:"videos",pathMatch:"prefix",redirectTo:ai},{path:"users",pathMatch:"prefix",redirectTo:ai},{path:"overview",children:[{path:"",pathMatch:"full",redirectTo:"users"},{path:"comments",canActivate:[ye],data:{userRight:Q.SEE_ALL_COMMENTS},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:$a,data:{meta:{title:"Comments list"}}}]},{path:"users",canActivate:[ye],data:{userRight:Q.MANAGE_USERS},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:za,data:{meta:{title:"Users list"}}},{path:"create",component:Ua,data:{meta:{title:"Create a user"}}},{path:"update/:id",component:ka,data:{meta:{title:"Update a user"}}}]},{path:"videos",canActivate:[ye],data:{userRight:Q.SEE_ALL_VIDEOS},children:[{path:"",redirectTo:"list",pathMatch:"full"},{path:"list",component:Xa,data:{meta:{title:"Videos list"}}}]}]}];var si={path:"",providers:[xo,zt,h_,Pn,Vn,yo,Hn,Rn,fn,jn,Kn,wt,tn,Vo,zt,jo,wn,zn,pt,p_,a_,c_,s_,l_,M_]};function Ba(e){if(e.length===0)return!1;let _=e[0].path;return li.some(n=>n.path===_||n.path.startsWith(`${_}/`));}function Wa(e){if(e.length===0)return!1;let _=e[0].path;return ii.some(n=>n.path===_||n.path.startsWith(`${_}/`));}function Ko({url:e}){return`/admin/settings/${e.map(_=>_.path).join("/")}`;}var M8=[{path:"",pathMatch:"full",redirectTo:"overview"},It(gt({},si),{component:Aa,canMatch:[(e,_)=>Wa(_)],children:ii}),It(gt({},si),{component:Ra,canMatch:[(e,_)=>Ba(_)],children:li}),{path:"config",pathMatch:"prefix",redirectTo:Ko},{path:"follows",pathMatch:"prefix",redirectTo:Ko},{path:"system",pathMatch:"prefix",redirectTo:Ko},{path:"plugins",pathMatch:"prefix",redirectTo:Ko},It(gt({},si),{path:"settings",component:Pa,canMatch:[(e,_)=>!Ba(_)&&!Wa(_)],children:[{path:"",redirectTo:"config",pathMatch:"full"},...oa,...La,...fa,...Ca]})];export{M8 as default};/**i18n:1cf7c077143c4c267fdafbe5508f191afcef21bad6aba22a3a8dc180e1003753*///# sourceMappingURL=chunk-G2CU7BRQ.js.map