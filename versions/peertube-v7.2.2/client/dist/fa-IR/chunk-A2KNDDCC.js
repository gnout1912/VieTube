import{a as ge}from"./chunk-HH4YHD3C.js";import{m as le,o as ae,p as ce,s as D}from"./chunk-RT7DTAS6.js";import{a as ue}from"./chunk-PE7TFI7A.js";import{$b as j,$f as ve,Bb as w,Bc as S,Cb as d,Dc as K,Fa as A,Ha as l,Ic as Y,Kg as pe,Mb as k,Na as F,Nb as Q,Nc as J,Oa as H,Ob as R,Oc as X,Pb as z,Rb as B,Sa as M,Ya as p,Zb as h,_b as E,aa as g,eb as s,fc as N,ga as W,gd as Z,ge as re,ha as b,hb as q,ia as O,ic as V,jb as _,jc as L,kd as ee,lb as x,lf as se,mb as P,nb as m,nc as G,ob as a,oc as y,od as te,pb as f,pd as ne,qd as ie,rf as de,sb as T,ta as u,tb as I,ud as oe,x as $,zf as me}from"./chunk-F7FAPFPY.js";import{g as Ce,i as v}from"./chunk-AI7IVZV2.js";var fe=Ce(ve());var ye=["modal"],be=["itemsParent"],Oe=["itemsRendered"],Me=(e,n)=>({"opacity-0":e,"has-border":n}),xe=e=>({visibility:e}),Pe=e=>({item:e}),Te=e=>({item:e,dropdown:!0}),Ie=e=>({item:e,modal:!0}),U=(e,n)=>n.label;function ke(e,n){e&1&&T(0)}function Ee(e,n){if(e&1&&(m(0,"li",8,2),p(2,ke,1,0,"ng-container",9),a()),e&2){let t=d(),o=t.$implicit,r=t.$index,i=d();q(h(5,xe,i.showItemsUntilIndexExcluded&&r>=i.showItemsUntilIndexExcluded?"hidden":"inherit")),s("id",i.getId(r)),l(2),s("ngTemplateOutlet",i.itemTemplate())("ngTemplateOutletContext",h(7,Pe,o))}}function Le(e,n){if(e&1&&p(0,Ee,3,9,"li",7),e&2){let t=n.$implicit;_(!t.isDisplayed||t.isDisplayed()?0:-1)}}function Se(e,n){if(e&1){let t=I();m(0,"button",15),w("click",function(){b(t);let r=d(2);return O(r.toggleModal())}),f(1,"span",13),a()}}function De(e,n){e&1&&T(0)}function Fe(e,n){if(e&1&&(m(0,"li"),p(1,De,1,0,"ng-container",9),a()),e&2){let t=d().$implicit,o=d(2);l(),s("ngTemplateOutlet",o.itemTemplate())("ngTemplateOutletContext",h(2,Te,t))}}function Re(e,n){if(e&1&&p(0,Fe,2,4,"li"),e&2){let t=n.$implicit;_(!t.isDisplayed||t.isDisplayed()?0:-1)}}function ze(e,n){if(e&1&&(p(0,Se,2,0,"button",10),m(1,"div",11,3)(3,"button",12),f(4,"span",13),a(),m(5,"ul",14),x(6,Re,1,1,null,null,U),N(8,"slice"),a()()),e&2){let t=d();_(t.isInMobileView?0:-1),l(),s("hidden",t.isInMobileView),l(5),P(V(8,2,t.items(),t.showItemsUntilIndexExcluded,t.items().length))}}function Be(e,n){e&1&&T(0)}function Ne(e,n){if(e&1&&(m(0,"li"),p(1,Be,1,0,"ng-container",9),a()),e&2){let t=d().$implicit,o=d(2);l(),s("ngTemplateOutlet",o.itemTemplate())("ngTemplateOutletContext",h(2,Ie,t))}}function Ve(e,n){if(e&1&&p(0,Ne,2,4,"li"),e&2){let t=n.$implicit;_(!t.isDisplayed||t.isDisplayed()?0:-1)}}function Ue(e,n){if(e&1&&(m(0,"div",16)(1,"ul",17),x(2,Ve,1,1,null,null,U),N(4,"slice"),a()()),e&2){let t=d();l(2),P(V(4,0,t.items(),t.showItemsUntilIndexExcluded,t.items().length))}}var _e=(0,fe.default)("peertube:main:ListOverflowItem"),he=(()=>{let n=class n{cdr=g(G);modalService=g(D);screenService=g(pe);items=u(void 0);itemTemplate=u(void 0);hasBorder=u(!1,{transform:y});modal=F("modal");parent=F("itemsParent");itemsRendered=H("itemsRendered");showItemsUntilIndexExcluded;isInMobileView=!1;initialized=!1;randomInt;ngOnInit(){this.randomInt=re(1,2e3)}ngAfterViewInit(){setTimeout(()=>{this.onWindowResize(),this.initialized=!0},0)}isMenuDisplayed(){return!!this.showItemsUntilIndexExcluded}onWindowResize(){this.isInMobileView=!!this.screenService.isInMobileView();let o=this.parent().nativeElement.getBoundingClientRect().width,r,i=0;_e("Parent width is %d",o);for(let[c,C]of this.itemsRendered().entries())i+=C.nativeElement.getBoundingClientRect().width,r===void 0&&(r=o<i?c:void 0);_e("Accumulated children width is %d so exclude index is %d",i,r),this.showItemsUntilIndexExcluded=r,this.cdr.markForCheck()}toggleModal(){this.modalService.open(this.modal(),{centered:!0})}getId(o=me()){return de(this.constructor.name)+"_"+this.randomInt+"_"+o}};v(n,"\u0275fac",function(r){return new(r||n)}),v(n,"\u0275cmp",M({type:n,selectors:[["my-list-overflow"]],viewQuery:function(r,i){r&1&&(k(i.modal,ye,5),k(i.parent,be,5),k(i.itemsRendered,Oe,5)),r&2&&Q(3)},hostBindings:function(r,i){r&1&&w("resize",function(){return i.onWindowResize()},!1,A)},inputs:{items:[1,"items"],itemTemplate:[1,"itemTemplate"],hasBorder:[1,"hasBorder"]},decls:9,vars:5,consts:[["itemsParent",""],["modal",""],["itemsRendered",""],["dropdown","ngbDropdown"],[1,"root"],[1,"list-overflow-parent",3,"ngClass"],[1,"ul-unstyle","d-flex"],[1,"d-inline-block",3,"id","style"],[1,"d-inline-block",3,"id"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["type","button",1,"peertube-button","tertiary-button","p-0","list-overflow-menu","overflow-button"],["ngbDropdown","","container","body",1,"list-overflow-menu",3,"hidden"],["ngbDropdownToggle","","type","button",1,"peertube-button","tertiary-button","p-0","overflow-button"],[1,"chevron-down"],["ngbDropdownMenu","",1,"ul-unstyle"],["type","button",1,"peertube-button","tertiary-button","p-0","list-overflow-menu","overflow-button",3,"click"],[1,"modal-body"],[1,"ul-unstyle"]],template:function(r,i){r&1&&(m(0,"div",4)(1,"div",5,0)(3,"ul",6),x(4,Le,1,1,null,null,U),a(),p(6,ze,9,6),a(),p(7,Ue,5,4,"ng-template",null,1,L),a()),r&2&&(l(),s("ngClass",E(2,Me,!i.initialized,i.hasBorder())),l(3),P(i.items()),l(2),_(i.isMenuDisplayed()?6:-1))},dependencies:[Y,ce,ae,S,le,J],styles:[`[_nghost-%COMP%]{width:100%}li[_ngcontent-%COMP%]{padding-top:2px}.root[_ngcontent-%COMP%]{overflow:hidden;max-width:calc(100vw - 30px);padding-bottom:3px}.list-overflow-parent[_ngcontent-%COMP%]{display:flex;align-items:center;position:relative}.list-overflow-parent.has-border[_ngcontent-%COMP%]{border-bottom:1px solid var(--fg-200)}.list-overflow-menu[_ngcontent-%COMP%]{position:absolute;right:0}.overflow-button[_ngcontent-%COMP%]:after{display:none;margin-left:inherit;vertical-align:inherit;border:inherit}
/*# sourceMappingURL=list-overflow.component-ORYVW3KT.css.map */`],changeDetection:0}));let e=n;return e})();var $e=e=>({"with-mb":e}),We=(e,n)=>({"children-container":e,"parent-container":n}),Ae=(e,n,t)=>({"child-active":e,"dropdown-item":n,"in-modal":t});function He(e,n){if(e&1&&f(0,"my-global-icon",7),e&2){let t=d(2);s("iconName",t.h1Icon())}}function qe(e,n){if(e&1&&(m(0,"h1"),p(1,He,1,1,"my-global-icon",6),z(2),a()),e&2){let t=d();l(),s("ngIf",t.h1Icon()),l(),B(" ",t.h1()," ")}}function Qe(e,n){if(e&1){let t=I();m(0,"a",8),w("click",function(){let r=b(t).modal,i=d();return O(i.onLinkClick(r))}),z(1),a()}if(e&2){let t=n.item,o=n.dropdown,r=n.modal,i=d();s("pluginSelectorId",t.pluginSelectorId)("routerLink",t.routerLink)("queryParams",t.queryParams)("ngClass",j(5,Ae,i.activeParent===t,o,r)),l(),B(" ",t.label," ")}}function je(e,n){if(e&1&&(m(0,"div",5),f(1,"my-list-overflow",9),a()),e&2){let t=d(),o=R(3);l(),s("items",t.children)("itemTemplate",o)}}var ht=(()=>{let n=class n{router=g(te);route=g(ee);modal=g(D);menuEntries=u([]);h1=u(void 0);h1Icon=u(void 0);areChildren=u(!1,{transform:y});withMarginBottom=u(!0,{transform:y});activeParent;children=[];routerSub;ngOnInit(){this.routerSub=this.router.events.pipe($(o=>o instanceof Z)).subscribe(()=>this.buildChildren())}ngOnChanges(){this.buildChildren()}ngOnDestroy(){this.routerSub&&this.routerSub.unsubscribe()}onLinkClick(o){o&&this.modal.dismissAll()}buildChildren(){this.children=[],this.activeParent=void 0;let o=window.location.pathname,r=this.route.snapshot.pathFromRoot.reduce((c,C)=>C.url.length===0?c:c+"/"+C.url[0].path,""),i=this.menuEntries().find(c=>o.startsWith(c.routerLink)||!c.routerLink.startsWith("/")&&`${r}/${c.routerLink}`===o?!0:c.children?c.children.some(C=>o.startsWith(C.routerLink)):!1);if(!i){let c=this.menuEntries();c.length!==0&&o!=="/"&&se.info(`Unable to find entry for ${o} or ${r}`,{menuEntries:c});return}this.children=i.children,this.activeParent=i}};v(n,"\u0275fac",function(r){return new(r||n)}),v(n,"\u0275cmp",M({type:n,selectors:[["my-horizontal-menu"]],inputs:{menuEntries:[1,"menuEntries"],h1:[1,"h1"],h1Icon:[1,"h1Icon"],areChildren:[1,"areChildren"],withMarginBottom:[1,"withMarginBottom"]},features:[W],decls:7,vars:12,consts:[["entryTemplate",""],[1,"root",3,"ngClass"],[4,"ngIf"],[3,"ngClass"],[3,"items","itemTemplate","hasBorder"],[1,"children-container"],[3,"iconName",4,"ngIf"],[3,"iconName"],["myPluginSelector","","routerLinkActive","active",1,"entry",3,"click","pluginSelectorId","routerLink","queryParams","ngClass"],[3,"items","itemTemplate"]],template:function(r,i){if(r&1&&(m(0,"div",1),p(1,qe,3,2,"h1",2)(2,Qe,2,9,"ng-template",null,0,L),m(4,"div",3),f(5,"my-list-overflow",4),a(),p(6,je,2,2,"div",5),a()),r&2){let c=R(3);s("ngClass",h(7,$e,i.withMarginBottom())),l(),s("ngIf",i.h1()),l(3),s("ngClass",E(9,We,i.areChildren(),!i.areChildren())),l(),s("items",i.menuEntries())("itemTemplate",c)("hasBorder",!i.areChildren()),l(),_(i.children&&i.children.length!==0?6:-1)}},dependencies:[X,S,K,oe,ne,ie,he,ue,ge],styles:[`@charset "UTF-8";.root[_ngcontent-%COMP%]{width:100%}.root.with-mb[_ngcontent-%COMP%]{margin-bottom:calc(1.375rem + 1.5vw)}@media (min-width: 1200px){.root.with-mb[_ngcontent-%COMP%]{margin-bottom:2.5rem}}h1[_ngcontent-%COMP%]{margin-bottom:1.5rem;color:var(--fg-400);font-weight:700;font-size:calc(1.325rem + .9vw)}@media (min-width: 1200px){h1[_ngcontent-%COMP%]{font-size:2rem}}h1[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{display:inline-block;width:28px;height:28px;line-height:28px;margin-inline-end:.5rem}.parent-container[_ngcontent-%COMP%]   my-list-overflow[_ngcontent-%COMP%]     .overflow-button:has(+* .active), .parent-container[_ngcontent-%COMP%]   my-list-overflow[_ngcontent-%COMP%]     .overflow-button:has(+* .child-active){color:var(--fg)}.parent-container[_ngcontent-%COMP%]   my-list-overflow[_ngcontent-%COMP%]     .overflow-button:has(+* .active):after, .parent-container[_ngcontent-%COMP%]   my-list-overflow[_ngcontent-%COMP%]     .overflow-button:has(+* .child-active):after{content:"";display:block;height:4px;background-color:var(--border-primary);border-radius:2px;position:absolute;bottom:-3px;width:100%}.children-container[_ngcontent-%COMP%]   my-list-overflow[_ngcontent-%COMP%]     .overflow-button:has(+* .active), .children-container[_ngcontent-%COMP%]   my-list-overflow[_ngcontent-%COMP%]     .overflow-button:has(+* .child-active){color:var(--fg-400);font-weight:700;background-color:var(--bg-secondary-400);text-decoration:none}.parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%], .entry.in-modal[_ngcontent-%COMP%]{display:inline-block;font-weight:700;white-space:nowrap;font-size:calc(1.2625rem + .15vw)}@media (min-width: 1200px){.parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%], .entry.in-modal[_ngcontent-%COMP%]{font-size:1.375rem}}.parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%], .parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:hover, .parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:focus, .parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:active, .entry.in-modal[_ngcontent-%COMP%], .entry.in-modal[_ngcontent-%COMP%]:hover, .entry.in-modal[_ngcontent-%COMP%]:focus, .entry.in-modal[_ngcontent-%COMP%]:active{text-decoration:none}.parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:focus:not(:focus-visible), .entry.in-modal[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}.parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:hover, .entry.in-modal[_ngcontent-%COMP%]:hover{color:var(--fg)}.parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]{color:var(--fg-100);margin-inline-end:calc(1.325rem + .9vw)}@media (min-width: 1200px){.parent-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]{margin-inline-end:2rem}}.parent-container[_ngcontent-%COMP%]   .entry.active[_ngcontent-%COMP%], .parent-container[_ngcontent-%COMP%]   .entry.child-active[_ngcontent-%COMP%]{position:relative;color:var(--fg)}.parent-container[_ngcontent-%COMP%]   .entry.active[_ngcontent-%COMP%]:after, .parent-container[_ngcontent-%COMP%]   .entry.child-active[_ngcontent-%COMP%]:after{content:"";display:block;height:4px;background-color:var(--border-primary);border-radius:2px;position:absolute;bottom:-3px;width:100%}.entry.in-modal[_ngcontent-%COMP%]{color:var(--fg);padding:9px 12px;width:100%;border-radius:5px}.entry.in-modal.active[_ngcontent-%COMP%], .entry.in-modal.child-active[_ngcontent-%COMP%]{color:var(--on-primary-450)!important;background-color:var(--primary-450);opacity:.9}.children-container[_ngcontent-%COMP%]{margin-top:1.25rem}.children-container[_ngcontent-%COMP%]     li{white-space:nowrap}.children-container[_ngcontent-%COMP%]     li:not(:first-child):before{content:"\\2022";color:var(--secondary-icon-color);display:inline-block;margin:0 .5rem;position:relative;top:-1px}.children-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]{color:var(--fg-250);display:inline-block;white-space:nowrap;padding:12px 16px;border-radius:200px;line-height:1;font-size:1.125rem}.children-container[_ngcontent-%COMP%]   .entry.active[_ngcontent-%COMP%]{position:relative;color:var(--fg-400);font-weight:700;background-color:var(--bg-secondary-400);text-decoration:none}.children-container[_ngcontent-%COMP%]   .entry[_ngcontent-%COMP%]:hover{color:var(--fg)}
/*# sourceMappingURL=horizontal-menu.component-VBWTH3AW.css.map */`]}));let e=n;return e})();export{ht as a};
/**i18n:1cf7c077143c4c267fdafbe5508f191afcef21bad6aba22a3a8dc180e1003753*/
//# sourceMappingURL=chunk-A2KNDDCC.js.map
