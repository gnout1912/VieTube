import{a as tn}from"./chunk-IBNOJQQL.js";import{a as nn}from"./chunk-47BTBF55.js";import{b as ne}from"./chunk-736AMHRO.js";import{a as en}from"./chunk-LSIL47EV.js";import{a as Je,c as Ye}from"./chunk-AA4WICK4.js";import"./chunk-RJFLITAD.js";import{c as Qe,h as Ke}from"./chunk-DJO6R22E.js";import{b as je}from"./chunk-5PLTSPIA.js";import"./chunk-MLUQ7CKS.js";import{a as Ze}from"./chunk-GLDJGDCD.js";import{d as ee,h as We,i as qe}from"./chunk-DUA2DJQ3.js";import"./chunk-FJ2ZROHN.js";import"./chunk-EBEN7JLX.js";import"./chunk-HRQFMPLQ.js";import"./chunk-VM462Q6H.js";import"./chunk-WUGJOXHJ.js";import"./chunk-DEVNJA25.js";import"./chunk-4XG2BQGM.js";import"./chunk-4INQOBVN.js";import"./chunk-SDLUASD2.js";import"./chunk-EFI4VIXO.js";import"./chunk-576ZABFD.js";import"./chunk-UFXFCZP3.js";import"./chunk-V73D6FBB.js";import{a as Be}from"./chunk-A2KNDDCC.js";import"./chunk-HH4YHD3C.js";import{c as $}from"./chunk-BFVCLNOF.js";import{a as Xe}from"./chunk-3PB3Q4OH.js";import"./chunk-24ZAFI2J.js";import{a as J}from"./chunk-6TRYPH2T.js";import"./chunk-JVRBW57G.js";import"./chunk-BOZAQTZE.js";import{a as V,b as Y}from"./chunk-ANGOORPW.js";import"./chunk-25AA3I7H.js";import"./chunk-2O3IZ566.js";import"./chunk-YDZGE3V5.js";import{a as Ge}from"./chunk-S5ARXDTR.js";import"./chunk-EECS7F3M.js";import"./chunk-OPOGZMDG.js";import"./chunk-UI5MIAKJ.js";import"./chunk-C5UL7A6S.js";import"./chunk-WZVFW7AN.js";import"./chunk-6JJL547V.js";import{E as Re}from"./chunk-RT7DTAS6.js";import{B as Ie,c as be,g as we,m as ye}from"./chunk-WO4VNXA3.js";import{a as ze}from"./chunk-PE7TFI7A.js";import{Ab as L,Ag as ke,B as pe,Bb as f,Bc as Ne,Bd as oe,Cb as _,Cc as Ae,Cg as Fe,D as Ce,Da as B,Dc as T,Eg as He,H as me,Ha as a,If as xe,Kg as q,Ld as Le,Mb as R,Na as b,Nb as x,Oc as Me,Og as K,Pb as U,Q as F,Qb as ie,Rb as j,S as X,Sa as M,Sg as Z,Ub as Se,Vb as Oe,Wb as ve,Xf as Ue,Ya as C,Zb as W,aa as d,c as de,eb as c,h as _e,ha as h,i as ue,ia as S,jc as fe,kd as Te,kg as Ve,ld as Pe,lg as $e,mg as De,n as G,nb as l,ob as s,pb as u,pd as Q,qb as ge,qd as Ee,rb as he,sa as te,ta as E,tb as w,xb as p,yb as y,zb as I}from"./chunk-F7FAPFPY.js";import{a as se,b as le,i as g,j as z}from"./chunk-AI7IVZV2.js";var cn=o=>[o];function sn(o,i){o&1&&(l(0,"div",12),p(1,1),s());}function ln(o,i){if(o&1&&(l(0,"span",29),p(1,4),s()),o&2){let e=_().$implicit,n=_();a(),y(n.getTotalVideosOf(e))(n.getTotalVideosOf(e)),I(1);}}function dn(o,i){o&1&&(l(0,"div",30),p(1,5),s());}function _n(o,i){if(o&1&&u(0,"my-video-miniature",31),o&2){let e=i.$implicit,n=_(2);c("video",e)("user",n.userMiniature)("displayVideoActions",!0)("displayOptions",n.miniatureDisplayOptions);}}function un(o,i){if(o&1&&(l(0,"div",32)(1,"a",33),p(2,6),s()()),o&2){let e=_().$implicit,n=_();a(),c("routerLink",n.getVideoChannelLink(e));}}function pn(o,i){if(o&1&&(l(0,"div",13)(1,"div",14),u(2,"my-actor-avatar",15),l(3,"h2",16)(4,"a",17),U(5),s()(),l(6,"div",18)(7,"div",19),p(8,2),s(),C(9,ln,2,2,"span",20),s(),u(10,"div",21),s(),u(11,"my-subscribe-button",22),l(12,"a",23),p(13,3),s(),l(14,"div",24)(15,"div",25),C(16,dn,2,0,"div",26)(17,_n,1,4,"my-video-miniature",27)(18,un,3,1,"div",28),s()()()),o&2){let e=i.$implicit,n=_();a(2),c("actor",e)("internalHref",n.getVideoChannelLink(e)),a(2),c("routerLink",n.getVideoChannelLink(e)),a(),j(" ",e.displayName," "),a(3),y(e.followersCount)(e.followersCount),I(8),a(),c("ngIf",n.getTotalVideosOf(e)!==void 0),a(),c("innerHTML",n.getChannelDescription(e),B),a(),c("videoChannels",W(13,cn,e)),a(),c("routerLink",n.getVideoChannelLink(e)),a(4),c("ngIf",n.getTotalVideosOf(e)===0),a(),c("ngForOf",n.getVideosOf(e)),a(),c("ngIf",n.getTotalVideosOf(e));}}var D=class D{accountService=d(V);videoChannelService=d(Y);videoService=d($);markdown=d(K);userService=d(Z);account;videoChannels=[];videos={};channelsDescriptionHTML={};channelPagination={currentPage:1,itemsPerPage:2,totalItems:null};videosPagination={currentPage:1,itemsPerPage:5,totalItems:null};videosSort="-publishedAt";onChannelDataSubject=new de();userMiniature;nsfwPolicy;miniatureDisplayOptions={date:!0,views:!0,by:!1,avatar:!1,privacyLabel:!1};accountSub;ngOnInit(){this.accountSub=this.accountService.accountLoaded.subscribe(i=>{this.account=i,this.videoChannels=[],this.loadMoreChannels();}),this.userService.getAnonymousOrLoggedUser().subscribe(i=>{this.userMiniature=i,this.nsfwPolicy=i.nsfwPolicy;});}ngOnDestroy(){this.accountSub&&this.accountSub.unsubscribe();}loadMoreChannels(){let i={account:this.account,componentPagination:this.channelPagination,sort:"-updatedAt"};this.videoChannelService.listAccountVideoChannels(i).pipe(X(e=>{this.channelPagination.totalItems=e.total;}),F(e=>ue(e.data)),Ce(e=>{let n={videoChannel:e,videoPagination:this.videosPagination,sort:this.videosSort,nsfw:this.videoService.nsfwPolicyToParam(this.nsfwPolicy)};return this.videoService.listChannelVideos(n).pipe(G(t=>({videoChannel:e,videos:t.data,total:t.total})));})).subscribe(r=>z(this,[r],function*({videoChannel:e,videos:n,total:t}){this.channelsDescriptionHTML[e.id]=yield this.markdown.textMarkdownToHTML({markdown:e.description,withEmoji:!0,withHtml:!0}),this.videoChannels.push(e),this.videos[e.id]={videos:n,total:t},this.onChannelDataSubject.next([e]);}));}getVideosOf(i){let e=this.videos[i.id];return e?e.videos:[];}getTotalVideosOf(i){let e=this.videos[i.id];if(e)return e.total;}getChannelDescription(i){return this.channelsDescriptionHTML[i.id];}onNearOfBottom(){De(this.channelPagination)&&(this.channelPagination.currentPage+=1,this.loadMoreChannels());}getVideoChannelLink(i){return["/c",i.nameWithHost];}};g(D,"\u0275fac",function(e){return new(e||D)();}),g(D,"\u0275cmp",M({type:D,selectors:[["my-account-video-channels"]],decls:6,vars:3,consts:()=>{let i;i="Videokan\xE4le";let e;e="Dieses Konto hat keine Kan\xE4le.";let n;n="Zum Kanal";let t;t="Zum Kanal";let r;r="{VAR_PLURAL, plural, =0 {Keine Abonnenten} =1 {1 Abonnent} other {{INTERPOLATION} Abonnenten}}",r=L(r,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let N;N="Diesen Kanal zeigen";let O;O="{VAR_PLURAL, plural, =0 {Keine Videos} =1 {1 Video} other {{INTERPOLATION} Videos}}",O=L(O,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let v;v="\n          "+O+"\n        ";let k;k="In diesem Kanal gibt es keine Videos.";let P;return P="DIESEN KANAL ZEIGEN >",[i,e,r,N,v,k,P,[1,"visually-hidden"],[1,"margin-content"],["class","no-results",4,"ngIf"],["myInfiniteScroller","",1,"channels",3,"nearOfBottom","dataObservable"],["class","channel",4,"ngFor","ngForOf"],[1,"no-results"],[1,"channel"],[1,"channel-avatar-row"],["actorType","channel","title",n,"size","75",3,"actor","internalHref"],[1,"fs-5","lh-1","fw-bold","m-0"],["title",t,1,"text-decoration-none",3,"routerLink"],[1,"actor-counters"],[1,"followers"],["class","videos-count",4,"ngIf"],[1,"description-html",3,"innerHTML"],[3,"videoChannels"],[1,"button-show-channel","peertube-button-link","primary-button",3,"routerLink"],[1,"videos-overflow-workaround"],[1,"videos"],["class","no-results h-auto",4,"ngIf"],[3,"video","user","displayVideoActions","displayOptions",4,"ngFor","ngForOf"],["class","miniature-show-channel",4,"ngIf"],[1,"videos-count"],[1,"no-results","h-auto"],[3,"video","user","displayVideoActions","displayOptions"],[1,"miniature-show-channel"],[1,"link-primary",3,"routerLink"]];},template:function(e,n){e&1&&(l(0,"h1",7),p(1,0),s(),l(2,"div",8),C(3,sn,2,0,"div",9),l(4,"div",10),f("nearOfBottom",function(){return n.onNearOfBottom();}),C(5,pn,19,15,"div",11),s()()),e&2&&(a(3),c("ngIf",n.channelPagination.totalItems===0),a(),c("dataObservable",n.onChannelDataSubject.asObservable()),a(),c("ngForOf",n.videoChannels));},dependencies:[T,Ge,Ae,J,Q,ne,Ke],styles:[`@charset "UTF-8";.margin-content[_ngcontent-%COMP%]{--grid-videos-miniature-margins: var(--x-margin-content);margin-inline-start:var(--grid-videos-miniature-margins)!important;margin-inline-end:var(--grid-videos-miniature-margins)!important}@media screen and (max-width: 500px){.margin-content[_ngcontent-%COMP%]{--grid-videos-miniature-margins: 0;width:auto}}.channel[_ngcontent-%COMP%]{max-width:1200px;background-color:var(--bg-secondary-350);display:grid;grid-template-columns:1fr auto;grid-template-rows:auto auto;column-gap:15px;padding-inline-start:calc(1.3rem + .6vw);padding-inline-end:calc(1.3rem + .6vw);padding-top:calc(1.3rem + .6vw);padding-bottom:calc(1.3rem + .6vw);margin-inline-start:0;margin-inline-end:0;margin-top:calc(1.325rem + .9vw);margin-bottom:calc(1.325rem + .9vw)}@media (min-width: 1200px){.channel[_ngcontent-%COMP%]{padding-inline-start:1.75rem}}@media (min-width: 1200px){.channel[_ngcontent-%COMP%]{padding-inline-end:1.75rem}}@media (min-width: 1200px){.channel[_ngcontent-%COMP%]{padding-top:1.75rem}}@media (min-width: 1200px){.channel[_ngcontent-%COMP%]{padding-bottom:1.75rem}}@media (min-width: 1200px){.channel[_ngcontent-%COMP%]{margin-top:2rem}}@media (min-width: 1200px){.channel[_ngcontent-%COMP%]{margin-bottom:2rem}}.channel-avatar-row[_ngcontent-%COMP%]{grid-column:1;grid-row:1;display:grid;grid-template-columns:auto auto 1fr;grid-template-rows:auto 1fr}.channel-avatar-row[_ngcontent-%COMP%]   my-actor-avatar[_ngcontent-%COMP%]{grid-column:1;grid-row:1/3;margin-inline-end:.9375rem}.channel-avatar-row[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--fg);word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.channel-avatar-row[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{grid-row:1;grid-column:2}.channel-avatar-row[_ngcontent-%COMP%]   .actor-counters[_ngcontent-%COMP%]{grid-row:1;grid-column:3;margin-inline-start:.9375rem;color:var(--fg-300);display:flex;align-items:center}.channel-avatar-row[_ngcontent-%COMP%]   .actor-counters[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child):after{content:"\\2022";margin:0 10px;color:var(--primary)}.channel-avatar-row[_ngcontent-%COMP%]   .description-html[_ngcontent-%COMP%]{grid-column:2/4;grid-row:2;max-height:80px;position:relative;overflow:hidden}.channel-avatar-row[_ngcontent-%COMP%]   .description-html[_ngcontent-%COMP%]:after{content:"";pointer-events:none;width:100%;height:100%;position:absolute;left:0;top:0;background:linear-gradient(transparent 50px,var(--bg-secondary-350))}my-subscribe-button[_ngcontent-%COMP%]{grid-row:1;grid-column:2}.videos[_ngcontent-%COMP%]{display:flex;grid-column:1/3;grid-row:2;position:relative}.videos[_ngcontent-%COMP%]   my-video-miniature[_ngcontent-%COMP%]{min-width:201px;max-width:201px;margin-inline-end:.9375rem}.videos-overflow-workaround[_ngcontent-%COMP%]{overflow-x:hidden;margin-top:calc(1.325rem + .9vw)}@media (min-width: 1200px){.videos-overflow-workaround[_ngcontent-%COMP%]{margin-top:2rem}}.miniature-show-channel[_ngcontent-%COMP%]{height:100%;position:absolute;right:0;background:linear-gradient(90deg,transparent 0,var(--bg-secondary-350) 45px);padding:47px 15px 0 60px;z-index:11}.button-show-channel[_ngcontent-%COMP%]{display:none}@media screen and (max-width: 800px){.channel-avatar-row[_ngcontent-%COMP%]{grid-template-columns:auto auto auto 1fr}.channel-avatar-row[_ngcontent-%COMP%]   .avatar-link[_ngcontent-%COMP%]{grid-row:1/4}.channel-avatar-row[_ngcontent-%COMP%]   .actor-counters[_ngcontent-%COMP%]{margin:0;font-size:13px;grid-row:2;grid-column:2/4}.channel-avatar-row[_ngcontent-%COMP%]   .description-html[_ngcontent-%COMP%]{grid-row:3;font-size:14px}.videos[_ngcontent-%COMP%]{display:none}my-subscribe-button[_ngcontent-%COMP%], .button-show-channel[_ngcontent-%COMP%]{grid-column:1/4;grid-row:3;margin-top:15px}my-subscribe-button[_ngcontent-%COMP%]{justify-self:start}.button-show-channel[_ngcontent-%COMP%]{display:block;justify-self:end}}
/*# sourceMappingURL=account-video-channels.component-WGI3FLTC.css.map */`]}));var H=D;_e([xe()],H.prototype,"getVideoChannelLink",null);var Cn=["videosList"];function mn(o,i){if(o&1&&u(0,"my-videos-list",4,0),o&2){let e=_();c("getVideosObservableFunction",e.getVideosObservableFunction)("getSyndicationItemsFunction",e.getSyndicationItemsFunction)("defaultSort",e.defaultSort)("displayAsRow",e.displayAsRow())("disabled",e.disabled);}}var on=(()=>{let i=class i{screenService=d(q);accountService=d(V);videoService=d($);videosList=b("videosList");getVideosObservableFunction=this.getVideosObservable.bind(this);getSyndicationItemsFunction=this.getSyndicationItems.bind(this);defaultSort="-publishedAt";account;disabled=!1;alreadyLoaded=!1;accountSub;ngOnInit(){this.accountSub=this.accountService.accountLoaded.subscribe(n=>{n.id!==this.account?.id&&(this.account=n,this.alreadyLoaded&&this.videosList().reloadVideos(),this.alreadyLoaded=!0);});}ngOnDestroy(){this.accountSub&&this.accountSub.unsubscribe();}getVideosObservable(n,t){let r=le(se({},t.toVideosAPIObject()),{videoPagination:n,account:this.account,skipCount:!0});return this.videoService.listAccountVideos(r);}getSyndicationItems(){return this.videoService.getAccountFeedUrls(this.account.id);}displayAsRow(){return this.screenService.isInMobileView();}disableForReuse(){this.disabled=!0;}enabledForReuse(){this.disabled=!1;}};g(i,"\u0275fac",function(t){return new(t||i)();}),g(i,"\u0275cmp",M({type:i,selectors:[["my-account-videos"]],viewQuery:function(t,r){t&1&&R(r.videosList,Cn,5),t&2&&x();},decls:3,vars:1,consts:()=>{let n;return n="Videos",[["videosList",""],n,[1,"visually-hidden"],["displayFilters","true","hideScopeFilter","true","loadUserVideoPreferences","true","highlightLives","true",3,"getVideosObservableFunction","getSyndicationItemsFunction","defaultSort","displayAsRow","disabled",4,"ngIf"],["displayFilters","true","hideScopeFilter","true","loadUserVideoPreferences","true","highlightLives","true",3,"getVideosObservableFunction","getSyndicationItemsFunction","defaultSort","displayAsRow","disabled"]];},template:function(t,r){t&1&&(l(0,"h1",2),p(1,1),s(),C(2,mn,2,5,"my-videos-list",3)),t&2&&(a(2),c("ngIf",r.account));},dependencies:[T,nn],encapsulation:2}));let o=i;return o;})();var gn=["ref"];function hn(o,i){if(o&1){let e=w();l(0,"button",9),f("click",function(){h(e);let t=_();return S(t.hideInput());}),u(1,"my-global-icon",5),s();}}var rn=(()=>{let i=class i{input=b("ref");initialValue=E("");name=E("search");placeholder=E("Suche");iconTitle=E("Suche");alwaysShow=E(!0);searchChanged=te();inputDisplayChanged=te();lastSearch="";value="";inputShown;ngOnInit(){this.value=this.initialValue(),this.isInputShown()&&this.showInput(!1);}isInputShown(){return this.alwaysShow()?!0:this.inputShown;}onIconClick(){if(!this.isInputShown()){this.showInput();return;}this.sendSearch();}showInput(n=!0){this.inputShown=!0,this.inputDisplayChanged.emit(this.inputShown),n&&setTimeout(()=>this.input().nativeElement.focus());}hideInput(){this.inputShown=!1,this.isInputShown()===!1&&this.inputDisplayChanged.emit(this.inputShown);}focusLost(){this.value||this.hideInput();}sendSearch(){this.lastSearch!==this.value&&(this.lastSearch=this.value,this.searchChanged.emit(this.value));}onResetFilter(){this.value="",this.input().nativeElement.focus(),this.sendSearch();}};g(i,"\u0275fac",function(t){return new(t||i)();}),g(i,"\u0275cmp",M({type:i,selectors:[["my-simple-search-input"]],viewQuery:function(t,r){t&1&&R(r.input,gn,5),t&2&&x();},inputs:{initialValue:[1,"initialValue"],name:[1,"name"],placeholder:[1,"placeholder"],iconTitle:[1,"iconTitle"],alwaysShow:[1,"alwaysShow"]},outputs:{searchChanged:"searchChanged",inputDisplayChanged:"inputDisplayChanged"},decls:9,vars:6,consts:()=>{let n;n="Filter l\xF6schen";let t;return t="Suche schlie\xDFen",[["ref",""],[1,"root"],[1,"input-group","has-clear",3,"hidden"],["type","text",1,"last-in-group",3,"ngModelChange","keyup.enter","ngModel","name","placeholder"],["title",n,1,"border-0","p-0","form-control-clear",3,"click"],["iconName","cross"],[1,"border-0","p-0","search-button",3,"click","title"],["iconName","search"],["class","border-0 p-0 close-search-button","title",t,3,"click",4,"ngIf"],["title",t,1,"border-0","p-0","close-search-button",3,"click"]];},template:function(t,r){if(t&1){let N=w();l(0,"div",1)(1,"div",2)(2,"input",3,0),ve("ngModelChange",function(v){return h(N),Oe(r.value,v)||(r.value=v),S(v);}),f("keyup.enter",function(){return h(N),S(r.sendSearch());}),s(),l(4,"button",4),f("click",function(){return h(N),S(r.onResetFilter());}),u(5,"my-global-icon",5),s()(),l(6,"button",6),f("click",function(){return h(N),S(r.onIconClick());}),u(7,"my-global-icon",7),s(),C(8,hn,2,0,"button",8),s();}t&2&&(a(),c("hidden",!r.inputShown),a(),Se("ngModel",r.value),c("name",r.name())("placeholder",r.placeholder()),a(4),c("title",r.iconTitle()),a(2),c("ngIf",!r.alwaysShow()&&r.inputShown));},dependencies:[Ie,be,we,ye,ze,T],styles:[`.root[_ngcontent-%COMP%]{display:flex}.search-button[_ngcontent-%COMP%], .close-search-button[_ngcontent-%COMP%]{margin-inline-start:.625rem}.search-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%], .close-search-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{height:28px;width:28px;color:var(--fg-400)}.search-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]:hover, .close-search-button[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]:hover{color:var(--fg-300)}input[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:200px;max-width:200px;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}input[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}input[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}input[_ngcontent-%COMP%]:focus, input[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}input[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: 240px){input[_ngcontent-%COMP%]{width:100%}}input[_ngcontent-%COMP%]:focus{box-shadow:0 0 5px #a5a5a5}.form-control-clear[_ngcontent-%COMP%]   my-global-icon[_ngcontent-%COMP%]{display:inline-block;width:20px;height:20px;line-height:20px}
/*# sourceMappingURL=simple-search-input.component-B3EWFQTX.css.map */`]}));let o=i;return o;})();var Sn=["accountReportModal"],On=o=>({expanded:o});function vn(o,i){if(o&1&&(l(0,"span",33),p(1,4),s()),o&2){let e=_(2);c("ngbTooltip",e.accountUser.blockedReason);}}function fn(o,i){if(o&1&&(l(0,"span",34),p(1,5),s()),o&2){let e=_(2);a(),y(e.accountVideosCount)(e.accountVideosCount),I(1);}}function Nn(o,i){if(o&1){let e=w();l(0,"button",35),f("click",function(){h(e);let t=_(2);return S(t.accountDescriptionExpanded=!t.accountDescriptionExpanded);}),p(1,6),s();}}function An(o,i){o&1&&(l(0,"a",36),p(1,7),s());}function Mn(o,i){if(o&1&&u(0,"my-subscribe-button",37),o&2){let e=_(2);c("account",e.account)("videoChannels",e.videoChannels);}}function Tn(o,i){if(o&1&&(l(0,"a",38),U(1),s()),o&2){let e=i.item;c("routerLink",e.routerLink),a(),ie(e.label);}}function Pn(o,i){if(o&1){let e=w();l(0,"div",10)(1,"div",11)(2,"div",12),u(3,"my-actor-avatar",13),l(4,"div")(5,"div",14),p(6,2),s(),l(7,"div",15)(8,"div")(9,"div",16)(10,"h1"),U(11),s(),l(12,"my-user-moderation-dropdown",17),f("userChanged",function(){h(e);let t=_();return S(t.onUserChanged());})("userDeleted",function(){h(e);let t=_();return S(t.onUserDeleted());}),s(),C(13,vn,2,1,"span",18),u(14,"my-account-block-badges",19),s(),l(15,"div",20)(16,"span"),U(17),s(),u(18,"my-copy-button",21),s(),l(19,"div",22)(20,"span"),p(21,3),s(),C(22,fn,2,2,"span",23),s()()()()(),l(23,"div",24),u(24,"div",25),s(),C(25,Nn,2,0,"button",26),l(26,"div",27),C(27,An,2,0,"a",28)(28,Mn,1,2,"my-subscribe-button",29),s()(),l(29,"div",30),C(30,Tn,2,2,"ng-template",null,0,fe),u(32,"my-horizontal-menu",31),l(33,"my-simple-search-input",32),f("searchChanged",function(t){h(e);let r=_();return S(r.searchChanged(t));})("inputDisplayChanged",function(t){h(e);let r=_();return S(r.onSearchInputDisplayChanged(t));}),s()(),u(34,"router-outlet"),s();}if(o&2){let e=_();a(3),c("size",e.getAccountAvatarSize())("actor",e.account),a(8),ie(e.account.displayName),a(),c("prependActions",e.prependModerationActions)("account",e.account)("user",e.accountUser),a(),c("ngIf",e.accountUser==null?null:e.accountUser.blocked),a(),c("account",e.account),a(3),j("@",e.account.nameWithHost,""),a(),c("value",e.account.nameWithHostForced),a(3),y(e.naiveAggregatedSubscribers())(e.naiveAggregatedSubscribers()),I(21),a(),c("ngIf",e.accountVideosCount!==void 0),a(),c("ngClass",W(22,On,e.accountDescriptionExpanded)),a(),c("innerHTML",e.accountDescriptionHTML,B),a(),c("ngIf",e.hasShowMoreDescription()),a(2),c("ngIf",e.isManageable()),a(),c("ngIf",e.hasVideoChannels()&&!e.isManageable()),a(4),c("hidden",e.hideMenu)("menuEntries",e.links),a(),c("initialValue",e.search)("alwaysShow",!e.isInSmallView());}}function En(o,i){o&1&&(ge(0),u(1,"my-account-report",null,1),he());}var an=(()=>{let i=class i{route=d(Te);userService=d(Z);accountService=d(V);videoChannelService=d(Y);notifier=d(Ue);restExtractor=d(Ve);redirectService=d(ke);authService=d($e);videoService=d($);markdown=d(K);blocklist=d(ee);screenService=d(q);metaService=d(Fe);peertubeRouter=d(He);accountReportModal=b("accountReportModal");account;accountUser;search="";videoChannels=[];links=[];hideMenu=!1;accountVideosCount;accountDescriptionHTML="";accountDescriptionExpanded=!1;prependModerationActions=[];routeSub;ngOnInit(){this.routeSub=this.route.params.pipe(G(n=>n.accountId),me(),F(n=>this.accountService.getAccount(n)),X(n=>this.onAccount(n)),F(n=>this.videoChannelService.listAccountVideoChannels({account:n})),pe(n=>this.restExtractor.redirectTo404IfNotFound(n,"other",[oe.BAD_REQUEST_400,oe.NOT_FOUND_404]))).subscribe({next:n=>{this.videoChannels=n.data;},error:n=>this.notifier.error(n.message)}),this.links=[{label:"Kan\xE4le",routerLink:"video-channels"},{label:"Videos",routerLink:"videos"}],this.search=this.route.snapshot.queryParams.search||"";}ngOnDestroy(){this.routeSub&&this.routeSub.unsubscribe();}naiveAggregatedSubscribers(){return this.videoChannels.reduce((n,t)=>n+t.followersCount,this.account.followersCount);}isUserLoggedIn(){return this.authService.isLoggedIn();}isInSmallView(){return this.screenService.isInSmallView();}getAccountAvatarSize(){return this.isInSmallView()?80:120;}isManageable(){return this.isUserLoggedIn()?this.account?.userId===this.authService.getUser().id:!1;}onUserChanged(){this.loadUserIfNeeded(this.account);}onUserDeleted(){this.redirectService.redirectToHomepage();}searchChanged(n){let t={search:n};this.peertubeRouter.silentNavigate(["./videos"],t,this.route);}onSearchInputDisplayChanged(n){this.hideMenu=this.isInSmallView()&&n;}hasVideoChannels(){return this.videoChannels.length!==0;}hasShowMoreDescription(){return!this.accountDescriptionExpanded&&this.accountDescriptionHTML.length>100;}isOnChannelPage(){return this.route.children[0].snapshot.url[0].path==="video-channels";}onAccount(n){return z(this,null,function*(){this.metaService.setTitle(n.displayName),this.accountDescriptionHTML=yield this.markdown.textMarkdownToHTML({markdown:n.description,withEmoji:!0,withHtml:!0}),this.account=n,this.updateModerationActions(),this.loadUserIfNeeded(n),this.loadAccountVideosCount(),this.loadAccountBlockStatus();});}showReportModal(){this.accountReportModal().show(this.account);}loadUserIfNeeded(n){if(!n.userId||!this.authService.isLoggedIn())return;this.authService.getUser().hasRight(Le.MANAGE_USERS)&&this.userService.getUser(n.userId).subscribe({next:r=>{this.accountUser=r;},error:r=>this.notifier.error(r.message)});}updateModerationActions(){this.prependModerationActions=[],this.authService.isLoggedIn()&&(this.isManageable()||(this.prependModerationActions=[{label:"Melden",isHeader:!0},{label:"Dieses Konto melden",handler:()=>this.showReportModal()}]));}loadAccountVideosCount(){this.videoService.listAccountVideos({account:this.account,videoPagination:{currentPage:1,itemsPerPage:0},sort:"-publishedAt"}).subscribe(n=>{this.accountVideosCount=n.total;});}loadAccountBlockStatus(){this.blocklist.getStatus({accounts:[this.account.nameWithHostForced],hosts:[this.account.host]}).subscribe(n=>this.account.updateBlockStatus(n));}};g(i,"\u0275fac",function(t){return new(t||i)();}),g(i,"\u0275cmp",M({type:i,selectors:[["ng-component"]],viewQuery:function(t,r){t&1&&R(r.accountReportModal,Sn,5),t&2&&x();},decls:2,vars:2,consts:()=>{let n;n="Benutzername kopiert";let t;t="Konto-Handle kopieren";let r;r="Ganze Beschreibung anzeigen";let N;N="Videos im Konto suchen";let O;O="KONTO";let v;v="{VAR_PLURAL, plural, =0 {Keine Abonnenten} =1 {1 Abonnent} other {{INTERPOLATION} Abonnenten}}",v=L(v,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let k;k="Gesperrt";let P;P="{VAR_PLURAL, plural, =0 {Keine Videos} =1 {1 Video} other {{INTERPOLATION} Videos}}",P=L(P,{INTERPOLATION:"\uFFFD1\uFFFD",VAR_PLURAL:"\uFFFD0\uFFFD"});let m;m="\n          "+P+"\n        ";let ae;ae="Mehr zeigen\xA0\u2026";let ce;return ce="Konto verwalten",[["linkTemplate",""],["accountReportModal",""],O,v,k,m,ae,ce,["class","root",4,"ngIf"],[4,"ngIf"],[1,"root"],[1,"margin-content","account-info","d-md-grid","d-block"],[1,"account-avatar-row"],["actorType","account",3,"size","actor"],[1,"section-label"],[1,"actor-info"],[1,"actor-display-name","align-items-center"],["buttonSize","small","placement","bottom-left auto",1,"mx-3",3,"userChanged","userDeleted","prependActions","account","user"],["tabindex","0","class","pt-badge badge-danger",3,"ngbTooltip",4,"ngIf"],[3,"account"],[1,"actor-handle"],["notification",n,"title",t,3,"value"],[1,"actor-counters"],["class","videos-count",4,"ngIf"],[1,"description",3,"ngClass"],[1,"description-html",3,"innerHTML"],["class","show-more peertube-button-like-link d-md-none d-block","title",r,3,"click",4,"ngIf"],[1,"buttons"],["routerLink","/my-account","class","peertube-button-link primary-button",4,"ngIf"],[3,"account","videoChannels",4,"ngIf"],[1,"margin-content","horizontal-menu","mb-3"],[3,"hidden","menuEntries"],["name","search-videos","icon-title","Search account videos","placeholder",N,1,"ms-auto",3,"searchChanged","inputDisplayChanged","initialValue","alwaysShow"],["tabindex","0",1,"pt-badge","badge-danger",3,"ngbTooltip"],[1,"videos-count"],["title",r,1,"show-more","peertube-button-like-link","d-md-none","d-block",3,"click"],["routerLink","/my-account",1,"peertube-button-link","primary-button"],[3,"account","videoChannels"],["routerLinkActive","active",1,"sub-menu-entry",3,"routerLink"]];},template:function(t,r){t&1&&C(0,Pn,35,24,"div",8)(1,En,3,0,"ng-container",9),t&2&&(c("ngIf",r.account),a(),c("ngIf",r.prependModerationActions));},dependencies:[Me,Ne,T,J,Ye,Re,tn,Xe,Q,ne,Ee,Be,rn,Pe,Qe],styles:[`@charset "UTF-8";.root[_ngcontent-%COMP%]{--co-font-size: 1rem;--co-secondary-font-size: 1rem}my-horizontal-menu[_ngcontent-%COMP%]{flex-grow:1;margin-inline-end:calc(1.425rem + 2.1vw)}@media (min-width: 1200px){my-horizontal-menu[_ngcontent-%COMP%]{margin-inline-end:3rem}}.horizontal-menu[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}my-copy-button[_ngcontent-%COMP%]{margin-inline-start:.1875rem}.account-info[_ngcontent-%COMP%]{grid-template-columns:1fr min-content;grid-template-rows:auto auto;margin-bottom:calc(1.425rem + 2.1vw);font-size:1rem}@media (min-width: 1200px){.account-info[_ngcontent-%COMP%]{margin-bottom:3rem}}.account-avatar-row[_ngcontent-%COMP%]{display:flex;grid-column:1;margin-bottom:calc(1.325rem + .9vw)}@media (min-width: 1200px){.account-avatar-row[_ngcontent-%COMP%]{margin-bottom:2rem}}.account-avatar-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{min-width:1px;margin-inline-start:calc(1.325rem + .9vw)}@media (min-width: 1200px){.account-avatar-row[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-inline-start:2rem}}.account-avatar-row[_ngcontent-%COMP%]   .actor-info[_ngcontent-%COMP%]{display:flex}.account-avatar-row[_ngcontent-%COMP%]   .actor-info[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{flex-grow:1;min-width:1px}.account-avatar-row[_ngcontent-%COMP%]   .actor-display-name[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;word-break:break-word;word-wrap:break-word;overflow-wrap:break-word;-webkit-hyphens:auto;hyphens:auto}.account-avatar-row[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-weight:700;margin:0;font-size:calc(1.325rem + .9vw)}@media (min-width: 1200px){.account-avatar-row[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem}}.account-avatar-row[_ngcontent-%COMP%]   .actor-handle[_ngcontent-%COMP%]{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.account-avatar-row[_ngcontent-%COMP%]   .actor-handle[_ngcontent-%COMP%], .account-avatar-row[_ngcontent-%COMP%]   .actor-counters[_ngcontent-%COMP%]{color:var(--fg-300);font-size:var(--co-secondary-font-size)}.account-avatar-row[_ngcontent-%COMP%]   .actor-counters[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child):after{content:"\\2022";margin:0 10px;color:var(--primary)}.actor-display-name[_ngcontent-%COMP%]{align-items:center}.description[_ngcontent-%COMP%]{grid-column:1/3;max-width:1000px;word-break:break-word}.show-more[_ngcontent-%COMP%]{text-align:center;margin-inline-start:auto;margin-inline-end:auto;margin-top:.625rem;margin-bottom:calc(1.40625rem + 1.875vw);padding-bottom:calc(1.5rem + 3vw)}@media (min-width: 1200px){.show-more[_ngcontent-%COMP%]{margin-bottom:2.8125rem}}@media (min-width: 1200px){.show-more[_ngcontent-%COMP%]{padding-bottom:3.75rem}}.buttons[_ngcontent-%COMP%]{grid-column:2;grid-row:1;display:flex;flex-wrap:wrap;justify-content:flex-end;align-content:flex-start}.buttons[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]:not(:last-child){margin-bottom:1rem}.buttons[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{white-space:nowrap}.pt-badge[_ngcontent-%COMP%]{margin-inline-end:.3125rem}@media screen and (max-width: 800px){.description[_ngcontent-%COMP%]:not(.expanded){max-height:70px;position:relative;overflow:hidden}.description[_ngcontent-%COMP%]:not(.expanded):after{content:"";pointer-events:none;width:100%;height:100%;position:absolute;left:0;top:0;background:linear-gradient(transparent 30px,var(--bg))}.buttons[_ngcontent-%COMP%]{justify-content:center}}@media screen and (max-width: 500px){.root[_ngcontent-%COMP%]{--co-font-size: 14px;--co-secondary-font-size: 13px}.links[_ngcontent-%COMP%]{margin:auto!important;width:min-content}}
/*# sourceMappingURL=accounts.component-WKKZ42XL.css.map */`]}));let o=i;return o;})();var zt=[{path:"peertube",redirectTo:"/videos/browse?scope=local"},{path:":accountId",component:an,providers:[en,ee,je,qe,We,Je,Ze],children:[{path:"",redirectTo:"video-channels",pathMatch:"full"},{path:"video-channels",component:H},{path:"videos",component:on,data:{reuse:{enabled:!0,key:"account-videos-list"}}},{path:"search",redirectTo:"videos"}]}];export{zt as default};/**i18n:1cf7c077143c4c267fdafbe5508f191afcef21bad6aba22a3a8dc180e1003753*///# sourceMappingURL=chunk-XGKTKRW6.js.map