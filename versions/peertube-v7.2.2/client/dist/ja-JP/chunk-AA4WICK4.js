import{a as Ne}from"./chunk-GLDJGDCD.js";import{b as Oe,d as L}from"./chunk-DUA2DJQ3.js";import{p as De}from"./chunk-BOZAQTZE.js";import{b as Ae,c as Be}from"./chunk-25AA3I7H.js";import{b as $e}from"./chunk-WZVFW7AN.js";import{s as ge}from"./chunk-RT7DTAS6.js";import{B as be,C as Se,c as de,g as me,h as pe,n as he,q as fe,t as _e}from"./chunk-WO4VNXA3.js";import{a as Ue}from"./chunk-PE7TFI7A.js";import{B as b,Bb as E,Bc as ce,C as U,Cb as p,D as B,Dc as z,Ha as _,He as ye,Ld as O,Mb as I,Na as N,Nb as k,Pb as re,Q as W,Qg as Re,Rb as ie,Sa as x,Sg as y,Tc as le,Vf as X,Wa as K,Xc as ue,Xf as P,Y as q,Ya as D,Yf as M,Zb as ne,_b as se,aa as l,ce as w,eb as S,ga as Y,ha as A,i as R,ia as g,jc as ae,kg as ve,la as J,lg as Ee,n as F,nb as u,ob as d,pb as v,pf as G,qb as Z,qg as Me,r as j,rb as ee,sa as $,sg as Ce,ta as m,tb as T,xb as Q,xg as H,yb as te,zb as oe}from"./chunk-F7FAPFPY.js";import{i as f,j as C}from"./chunk-AI7IVZV2.js";var V=(()=>{let i=class i{authHttp=l(ue);restExtractor=l(ve);restService=l(Me);serverService=l(H);addUser(e){return this.authHttp.post(y.BASE_USERS_URL,e).pipe(b(t=>this.restExtractor.handleError(t)));}updateUser(e,t){return this.authHttp.put(y.BASE_USERS_URL+e,t).pipe(b(r=>this.restExtractor.handleError(r)));}updateUsers(e,t){return R(e).pipe(B(r=>this.authHttp.put(y.BASE_USERS_URL+r.id,t)),U(),b(r=>this.restExtractor.handleError(r)));}getUsers(e){let{pagination:t,sort:r,search:n}=e,c=new le();if(c=this.restService.addRestGetParams(c,t,r),n){let o=this.restService.parseQueryStringFilter(n,{blocked:{prefix:"banned:",isBoolean:!0}});c=this.restService.addObjectParams(c,o);}return this.authHttp.get(y.BASE_USERS_URL,{params:c}).pipe(W(o=>this.serverService.getServerLocale().pipe(F(h=>({data:o,translations:h})))),F(({data:o,translations:h})=>this.restExtractor.applyToResultListData(o,this.formatUser.bind(this),[h])),b(o=>this.restExtractor.handleError(o)));}removeUsers(e){let t=w(e);return R(t).pipe(B(r=>this.authHttp.delete(y.BASE_USERS_URL+r.id)),U(),b(r=>this.restExtractor.handleError(r)));}banUsers(e,t){let r=t?{reason:t}:{},n=w(e);return R(n).pipe(B(c=>this.authHttp.post(y.BASE_USERS_URL+c.id+"/block",r)),U(),b(c=>this.restExtractor.handleError(c)));}unbanUsers(e){let t=w(e);return R(t).pipe(B(r=>this.authHttp.post(y.BASE_USERS_URL+r.id+"/unblock",{})),U(),b(r=>this.restExtractor.handleError(r)));}formatUser(e,t={}){let r;e.videoQuota===-1?r="\u221E":r=M(e.videoQuota,0);let n=M(e.videoQuotaUsed,0),c,o;return e.videoQuotaDaily===-1?(c="\u221E",o=M(0,0)+""):(c=M(e.videoQuotaDaily,0)+"",o=M(e.videoQuotaUsedDaily||0,0)+""),Object.assign(e,{role:{id:e.role.id,label:ye(e.role.label,t)},videoQuota:r,videoQuotaUsed:n,rawVideoQuota:e.videoQuota,rawVideoQuotaUsed:e.videoQuotaUsed,videoQuotaDaily:c,videoQuotaUsedDaily:o,rawVideoQuotaDaily:e.videoQuotaDaily,rawVideoQuotaUsedDaily:e.videoQuotaUsedDaily});}};f(i,"\u0275fac",function(t){return new(t||i)();}),f(i,"\u0275prov",q({token:i,factory:i.Éµfac}));let s=i;return s;})();var Ie=["modal"],ke=s=>({"input-error":s});function ze(s,i){if(s&1&&(u(0,"div",17),re(1),d()),s&2){let a=p(2);_(),ie(" ",a.formErrors.reason," ");}}function we(s,i){if(s&1){let a=T();u(0,"div",3)(1,"h4",4),Q(2,1),d(),u(3,"button",5),E("click",function(){A(a);let t=p();return g(t.hide());}),v(4,"my-global-icon",6),d()(),u(5,"div",7)(6,"div",8),Q(7,2),d(),u(8,"form",9),E("ngSubmit",function(){A(a);let t=p();return g(t.banUser());}),u(9,"div",10),v(10,"textarea",11),D(11,ze,2,1,"div",12),d(),u(12,"div",10),v(13,"my-peertube-checkbox",13),d(),u(14,"div",14)(15,"input",15),E("click",function(){A(a);let t=p();return g(t.hide());})("key.enter",function(){A(a);let t=p();return g(t.hide());}),d(),v(16,"input",16),d()()();}if(s&2){let a=p();_(2),te(a.getModalTitle()),oe(2),_(6),S("formGroup",a.form),_(2),S("ngClass",ne(6,ke,a.formErrors.reason)),_(),S("ngIf",a.formErrors.reason),_(5),S("value",a.getModalTitle())("disabled",!a.form.valid);}}var Te=(()=>{let i=class i extends Be{formReactiveService=l(Ae);modalService=l(ge);notifier=l(P);userAdminService=l(V);blocklistService=l(L);modal=N("modal");userBanned=$();usersToBan;openedModal;modalMessage="";ngOnInit(){this.buildForm({reason:De,mute:null});}openModal(e){this.usersToBan=e,this.openedModal=this.modalService.open(this.modal(),{centered:!0});}hide(){this.usersToBan=void 0,this.openedModal.close();}banUser(){let e=this.form.value.reason||void 0,t=this.form.value.mute,r=[this.userAdminService.banUsers(this.usersToBan,e)];t&&r.push(this.muteAccounts()),j(r).subscribe({next:()=>{let n;Array.isArray(this.usersToBan)?n=G("{count, plural, =1 {1\u4EBA\u306E\u30E6\u30FC\u30B6\u30FC\u304C\u51CD\u7D50\u3055\u308C\u307E\u3057\u305F\u3002} other {{count}\u4EBA\u306E\u30E6\u30FC\u30B6\u30FC\u304C\u51CD\u7D50\u3055\u308C\u307E\u3057\u305F\u3002}}",{count:this.usersToBan.length}):n="\u30E6\u30FC\u30B6\u30FC"+this.usersToBan.username+"\u3092\u51CD\u7D50\u3057\u307E\u3057\u305F\u3002",this.notifier.success(n),this.userBanned.emit(this.usersToBan),this.hide();},error:n=>this.notifier.error(n.message)});}getModalTitle(){return Array.isArray(this.usersToBan)?G("{count, plural, =1 {1\u30E6\u30FC\u30B6\u30FC} other {{count}\u30E6\u30FC\u30B6\u30FC}}\u3092\u51CD\u7D50\u3059\u308B",{count:this.usersToBan.length}):"\u30E6\u30FC\u30B6\u30FC\""+this.usersToBan.username+"\"\u3092\u51CD\u7D50";}muteAccounts(){let e=Array.isArray(this.usersToBan)?this.usersToBan.map(t=>new X(t.account)):new X(this.usersToBan.account);return this.blocklistService.blockAccountByInstance(e);}};f(i,"\u0275fac",(()=>{let e;return function(r){return(e||(e=J(i)))(r||i);};})()),f(i,"\u0275cmp",x({type:i,selectors:[["my-user-ban-modal"]],viewQuery:function(t,r){t&1&&I(r.modal,Ie,5),t&2&&k();},outputs:{userBanned:"userBanned"},features:[K],decls:2,vars:0,consts:()=>{let e;e="\u3053\u306E\u30E2\u30FC\u30C0\u30EB\u30A6\u30A3\u30F3\u30C9\u30A6\u3092\u9589\u3058\u308B";let t;t="\u7406\u7531\u2026";let r;r="\u52D5\u753B/\u30B3\u30E1\u30F3\u30C8\u3092\u975E\u8868\u793A\u306B\u3057\u305F\u4E0A\u3067\u30DF\u30E5\u30FC\u30C8";let n;n="\u30AD\u30E3\u30F3\u30BB\u30EB";let c;c="\n          "+"\uFFFD0\uFFFD"+"\n        ";let o;return o="\u51CD\u7D50\u3057\u305F\u30E6\u30FC\u30B6\u30FC\u306F\u30ED\u30B0\u30A4\u30F3\u3067\u304D\u306A\u304F\u306A\u308A\u307E\u3059\u3002",[["modal",""],c,o,[1,"modal-header"],[1,"modal-title"],["title",e,1,"border-0","p-0",3,"click"],["iconName","cross"],[1,"modal-body"],[1,"description"],["novalidate","",3,"ngSubmit","formGroup"],[1,"form-group"],["placeholder",t,"formControlName","reason",1,"form-control",3,"ngClass"],["class","form-error","role","alert",4,"ngIf"],["inputName","banMute","formControlName","mute","labelText",r],[1,"form-group","inputs"],["type","button","role","button","value",n,1,"peertube-button","secondary-button",3,"click","key.enter"],["type","submit",1,"peertube-button","primary-button",3,"value","disabled"],["role","alert",1,"form-error"]];},template:function(t,r){t&1&&D(0,we,17,8,"ng-template",null,0,ae);},dependencies:[Ue,be,he,de,me,pe,Se,fe,_e,ce,z,$e],styles:[`.description[_ngcontent-%COMP%]{margin-bottom:15px}textarea[_ngcontent-%COMP%]{font-size:16px;padding:var(--input-y-padding) var(--input-x-padding);width:100%;max-width:100%;color:var(--input-fg);background-color:var(--input-bg);border:1px solid var(--input-border-color);border-radius:var(--input-border-radius);line-height:24px}textarea[_ngcontent-%COMP%]::placeholder{color:var(--input-placeholder);font-size:14px}textarea[readonly][_ngcontent-%COMP%]{color:var(--fg-300)}textarea[_ngcontent-%COMP%]:focus, textarea[_ngcontent-%COMP%]:focus-visible{box-shadow:0 0 0 .2rem var(--fg-100);outline:0}textarea[disabled][_ngcontent-%COMP%]{color:var(--fg-300);opacity:.8}@media screen and (max-width: calc(100% + 40px)){textarea[_ngcontent-%COMP%]{width:100%}}textarea[_ngcontent-%COMP%]{color:var(--textarea-fg)!important;background-color:var(--textarea-bg)!important;height:60px;padding:var(--textarea-y-padding) var(--textarea-x-padding)}
/*# sourceMappingURL=user-ban-modal.component-2VJXBRNO.css.map */`]}));let s=i;return s;})();var Pe=["userBanModal"],He=(s,i)=>({user:s,account:i});function Le(s,i){if(s&1){let a=T();Z(0),u(1,"my-user-ban-modal",2,0),E("userBanned",function(){A(a);let t=p();return g(t.onUserBanned());}),d(),v(3,"my-action-dropdown",3),ee();}if(s&2){let a=p();_(3),S("actions",a.userActions)("entry",se(7,He,a.user(),a.account()))("buttonSize",a.buttonSize())("placement",a.placement())("label",a.label())("container",a.container())("buttonStyled",a.buttonStyled());}}var Ut=(()=>{let i=class i{authService=l(Ee);notifier=l(P);confirmService=l(Ce);serverService=l(H);userAdminService=l(V);blocklistService=l(L);bulkService=l(Ne);hooks=l(Re);userBanModal=N("userBanModal");user=m(void 0);account=m(void 0);prependActions=m(void 0);buttonSize=m("normal");buttonStyled=m(!0);placement=m("right-top right-bottom auto");label=m(void 0);container=m(void 0);displayOptions=m({myAccount:!0,instanceAccount:!0,instanceUser:!0});userChanged=$();userDeleted=$();userActions=[];requiresEmailVerification=!1;ngOnInit(){this.serverService.getConfig().subscribe(e=>this.requiresEmailVerification=e.signup.requiresEmailVerification);}ngOnChanges(){this.buildActions();}openBanUserModal(e){if(e.username==="root"){this.notifier.error("root\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u51CD\u7D50\u3067\u304D\u307E\u305B\u3093\u3002");return;}this.userBanModal().openModal(e);}onUserBanned(){this.userChanged.emit();}unbanUser(e){return C(this,null,function*(){(yield this.confirmService.confirm("\u672C\u5F53\u306B"+e.username+"\u306E\u51CD\u7D50\u3092\u89E3\u9664\u3057\u307E\u3059\u304B\uFF1F","\u51CD\u7D50\u3092\u89E3\u9664"))!==!1&&this.userAdminService.unbanUsers(e).subscribe({next:()=>{this.notifier.success("\u30E6\u30FC\u30B6\u30FC"+e.username+"\u306E\u51CD\u7D50\u3092\u89E3\u9664\u3057\u307E\u3057\u305F\u3002"),this.userChanged.emit();},error:r=>this.notifier.error(r.message)});});}removeUser(e){return C(this,null,function*(){if(e.username==="root"){this.notifier.error("root\u30A2\u30AB\u30A6\u30F3\u30C8\u306F\u524A\u9664\u3067\u304D\u307E\u305B\u3093\u3002");return;}let t="\u3053\u306E\u30E6\u30FC\u30B6\u30FC\u3092\u524A\u9664\u3059\u308B\u3068\u3001\u30E6\u30FC\u30B6\u30FC\u540D<strong>"+e.username+"</strong>\u3067\u4ED6\u306E\u30E6\u30FC\u30B6\u30FC\u3084\u30C1\u30E3\u30F3\u30CD\u30EB\u3092\u4F5C\u6210\u3067\u304D\u306A\u304F\u306A\u308A\u307E\u3059\uFF01";(yield this.confirmService.confirm(t,""+e.username+"\u3092\u524A\u9664"))!==!1&&this.userAdminService.removeUsers(e).subscribe({next:()=>{this.notifier.success("\u30E6\u30FC\u30B6\u30FC"+e.username+"\u3092\u524A\u9664\u3057\u307E\u3057\u305F\u3002"),this.userDeleted.emit();},error:n=>this.notifier.error(n.message)});});}setEmailAsVerified(e){this.userAdminService.updateUser(e.id,{emailVerified:!0}).subscribe({next:()=>{this.notifier.success("\u30E6\u30FC\u30B6\u30FC"+e.username+"\u306E\u30E1\u30FC\u30EB\u30A2\u30C9\u30EC\u30B9\u304C\u8A8D\u8A3C\u3055\u308C\u307E\u3057\u305F"),this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}blockAccountByUser(e){this.blocklistService.blockAccountByUser(e).subscribe({next:()=>{this.notifier.success("\u30A2\u30AB\u30A6\u30F3\u30C8"+e.nameWithHost+"\u3092\u30DF\u30E5\u30FC\u30C8\u3057\u307E\u3057\u305F\u3002"),this.account().mutedByUser=!0,this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}unblockAccountByUser(e){this.blocklistService.unblockAccountByUser(e).subscribe({next:()=>{this.notifier.success("\u30A2\u30AB\u30A6\u30F3\u30C8 "+e.nameWithHost+" \u306E\u30DF\u30E5\u30FC\u30C8\u3092\u89E3\u9664\u3057\u307E\u3057\u305F\u3002"),this.account().mutedByUser=!1,this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}blockServerByUser(e){this.blocklistService.blockServerByUser(e).subscribe({next:()=>{this.notifier.success(""+e+"\u304C\u30DF\u30E5\u30FC\u30C8\u3055\u308C\u307E\u3057\u305F\u3002"),this.account().mutedServerByUser=!0,this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}unblockServerByUser(e){this.blocklistService.unblockServerByUser(e).subscribe({next:()=>{this.notifier.success(""+e+"\u3092\u30DF\u30E5\u30FC\u30C8\u89E3\u9664\u3057\u307E\u3057\u305F\u3002"),this.account().mutedServerByUser=!1,this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}blockAccountByInstance(e){this.blocklistService.blockAccountByInstance(e).subscribe({next:()=>{this.notifier.success("\u30A2\u30AB\u30A6\u30F3\u30C8\u300C"+e.nameWithHost+"\u300D\u306F\u3042\u306A\u305F\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306B\u3088\u308A\u30DF\u30E5\u30FC\u30C8\u3055\u308C\u3066\u3044\u307E\u3059\u3002"),this.account().mutedByInstance=!0,this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}unblockAccountByInstance(e){this.blocklistService.unblockAccountByInstance(e).subscribe({next:()=>{this.notifier.success("\u30A2\u30AB\u30A6\u30F3\u30C8\u300C"+e.nameWithHost+"\u300D\u306F\u3042\u306A\u305F\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306B\u3088\u308A\u30DF\u30E5\u30FC\u30C8\u89E3\u9664\u3055\u308C\u307E\u3057\u305F\u3002"),this.account().mutedByInstance=!1,this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}blockServerByInstance(e){this.blocklistService.blockServerByInstance(e).subscribe({next:()=>{this.notifier.success("\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9"+e+"\u3092\u3042\u306A\u305F\u306E\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u3067\u30DF\u30E5\u30FC\u30C8\u3057\u307E\u3057\u305F\u3002"),this.account().mutedServerByInstance=!0,this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}unblockServerByInstance(e){this.blocklistService.unblockServerByInstance(e).subscribe({next:()=>{this.notifier.success("\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9"+e+"\u3092\u3042\u306A\u305F\u306E\u30A4\u30F3\u30B9\u30BF\u30F3\u30B9\u3067\u30DF\u30E5\u30FC\u30C8\u89E3\u9664\u3057\u307E\u3057\u305F\u3002"),this.account().mutedServerByInstance=!1,this.userChanged.emit();},error:t=>this.notifier.error(t.message)});}bulkRemoveCommentsOf(e){return C(this,null,function*(){let t="\u672C\u5F53\u306B\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u5168\u3066\u306E\u30B3\u30E1\u30F3\u30C8\u3092\u524A\u9664\u3057\u307E\u3059\u304B\uFF1F";(yield this.confirmService.confirm(t,"\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30B3\u30E1\u30F3\u30C8\u3092\u524A\u9664\u3059\u308B"))!==!1&&this.bulkService.removeCommentsOf(e).subscribe({next:()=>{this.notifier.success("\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u304B\u3089\u306E\u30B3\u30E1\u30F3\u30C8\u306F\u524A\u9664\u3055\u308C\u307E\u3059\uFF08\u51E6\u7406\u306B\u6570\u5206\u304B\u304B\u308B\u5834\u5408\u304C\u3042\u308A\u307E\u3059\uFF09\u3002");},error:n=>this.notifier.error(n.message)});});}getRouterUserEditLink(e){return["/admin","overview","users","update",e.id];}isMyUser(e){return e&&this.authService.getUser().id===e.id;}isMyAccount(e){return e&&this.authService.getUser().account.id===e.id;}buildActions(){return C(this,null,function*(){let e=[],t=this.prependActions();t&&t.length!==0&&e.push(t);let r=this.buildMyAccountModerationActions(),n=this.buildInstanceModerationActions();r.length!==0&&e.push(r),n.length!==0&&e.push(n),this.userActions=yield this.hooks.wrapObject(e,"moderation","filter:user-moderation.actions.create.result");});}buildMyAccountModerationActions(){return!this.account()||!this.displayOptions().myAccount||!this.authService.isLoggedIn()?[]:[{label:"\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30E2\u30C7\u30EC\u30FC\u30B7\u30E7\u30F3",class:["red"],isHeader:!0},{label:"\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u30DF\u30E5\u30FC\u30C8",description:"\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u5168\u3066\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u975E\u8868\u793A\u306B\u3057\u307E\u3059\u3002",isDisplayed:({account:t})=>!this.isMyAccount(t)&&t.mutedByUser===!1,handler:({account:t})=>this.blockAccountByUser(t)},{label:"\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30DF\u30E5\u30FC\u30C8\u3092\u89E3\u9664",description:"\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u5168\u3066\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u518D\u5EA6\u8868\u793A\u3057\u307E\u3059\u3002",isDisplayed:({account:t})=>!this.isMyAccount(t)&&t.mutedByUser===!0,handler:({account:t})=>this.unblockAccountByUser(t)},{label:"\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u3092\u30DF\u30E5\u30FC\u30C8",description:"\u3053\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u3059\u3079\u3066\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u975E\u8868\u793A\u306B\u3057\u307E\u3059\u3002\u3042\u306A\u305F\u3060\u3051\u306B\u5F71\u97FF\u3057\u307E\u3059\u3002",isDisplayed:({account:t})=>!t.userId&&t.mutedServerByUser===!1,handler:({account:t})=>this.blockServerByUser(t.host)},{label:"\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u3092\u30DF\u30E5\u30FC\u30C8\u89E3\u9664",description:"\u3053\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u3059\u3079\u3066\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u8868\u793A\u3057\u307E\u3059\u3002\u3042\u306A\u305F\u3060\u3051\u306B\u5F71\u97FF\u3057\u307E\u3059\u3002",isDisplayed:({account:t})=>!t.userId&&t.mutedServerByUser===!0,handler:({account:t})=>this.unblockServerByUser(t.host)},{label:"\u3042\u306A\u305F\u306E\u52D5\u753B\u304B\u3089\u30B3\u30E1\u30F3\u30C8\u3092\u524A\u9664",description:"\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u306B\u3088\u3063\u3066\u4F5C\u6210\u3055\u308C\u305F\u3001\u3042\u306A\u305F\u306E\u52D5\u753B\u3078\u306E\u30B3\u30E1\u30F3\u30C8\u3092\u524A\u9664\u3057\u307E\u3059\u3002",isDisplayed:({account:t})=>!this.isMyAccount(t),handler:({account:t})=>this.bulkRemoveCommentsOf({accountName:t.nameWithHost,scope:"my-videos"})}];}buildInstanceModerationActions(){if(!this.authService.isLoggedIn())return[];let e=this.authService.getUser(),t=[],r=this.displayOptions(),n=this.user();n&&r.instanceUser&&e.hasRight(O.MANAGE_USERS)&&e.canManage(n)&&(t=t.concat([{label:"\u30E6\u30FC\u30B6\u30FC\u306E\u7DE8\u96C6",description:"\u52D5\u753B\u306E\u5BB9\u91CF\u5236\u9650\u3001\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u6A29\u9650\u306A\u3069\u3092\u5909\u66F4\u3067\u304D\u307E\u3059\u3002",linkBuilder:({user:o})=>this.getRouterUserEditLink(o)},{label:"\u30E6\u30FC\u30B6\u30FC\u306E\u524A\u9664",description:"\u52D5\u753B\u304C\u524A\u9664\u3055\u308C\u3001\u30B3\u30E1\u30F3\u30C8\u3082\u524A\u9664\u3055\u308C\u307E\u3059\u3002",isDisplayed:({user:o})=>!this.isMyUser(o),handler:({user:o})=>this.removeUser(o)},{label:"\u51CD\u7D50",description:"\u30E6\u30FC\u30B6\u30FC\u304C\u30ED\u30B0\u30A4\u30F3\u51FA\u6765\u306A\u304F\u306A\u308A\u307E\u3059\u304C\u3001\u52D5\u753B\u3068\u30B3\u30E1\u30F3\u30C8\u306F\u305D\u306E\u307E\u307E\u6B8B\u308A\u307E\u3059\u3002",handler:({user:o})=>this.openBanUserModal(o),isDisplayed:({user:o})=>!this.isMyUser(o)&&!o.blocked},{label:"\u30E6\u30FC\u30B6\u30FC\u306E\u51CD\u7D50\u89E3\u9664",description:"\u518D\u5EA6\u3001\u30E6\u30FC\u30B6\u30FC\u306B\u30ED\u30B0\u30A4\u30F3\u3001\u52D5\u753B\u3068\u30B3\u30E1\u30F3\u30C8\u306E\u4F5C\u6210\u3092\u8A31\u53EF\u3057\u307E\u3059",handler:({user:o})=>this.unbanUser(o),isDisplayed:({user:o})=>!this.isMyUser(o)&&o.blocked},{label:"\u30E1\u30FC\u30EB\u3092\u8A8D\u8A3C\u6E08\u307F\u3068\u3057\u3066\u8A2D\u5B9A",handler:({user:o})=>this.setEmailAsVerified(o),isDisplayed:({user:o})=>!o.blocked&&o.emailVerified!==!0}]));let c=this.account();return c&&r.instanceAccount&&e.hasRight(O.MANAGE_ACCOUNTS_BLOCKLIST)&&(t=t.concat([{label:"\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u30DF\u30E5\u30FC\u30C8",description:"\u8A72\u5F53\u3059\u308B\u30E6\u30FC\u30B6\u30FC\u306E\u3059\u3079\u3066\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u3001\u3042\u306A\u305F\u3001\u3042\u306A\u305F\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u3001\u304A\u3088\u3073\u305D\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u30E6\u30FC\u30B6\u30FC\u3067\u975E\u8868\u793A\u306B\u3057\u307E\u3059\u3002",isDisplayed:({account:o})=>!this.isMyAccount(o)&&o.mutedByInstance===!1,handler:({account:o})=>this.blockAccountByInstance(o)},{label:"\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u306E\u30DF\u30E5\u30FC\u30C8\u3092\u89E3\u9664",description:"\u3053\u306E\u30E6\u30FC\u30B6\u30FC\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u3001\u3053\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u30E6\u30FC\u30B6\u30FC\u306B\u518D\u5EA6\u8868\u793A\u3057\u307E\u3059\u3002",isDisplayed:({account:o})=>!this.isMyAccount(o)&&o.mutedByInstance===!0,handler:({account:o})=>this.unblockAccountByInstance(o)}])),c&&r.instanceAccount&&e.hasRight(O.MANAGE_SERVERS_BLOCKLIST)&&(t=t.concat([{label:"\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u3092\u30DF\u30E5\u30FC\u30C8",description:"\u8A72\u5F53\u3059\u308B\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u3059\u3079\u3066\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u3001\u3042\u306A\u305F\u3068\u3042\u306A\u305F\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u30E6\u30FC\u30B6\u30FC\u306B\u975E\u8868\u793A\u306B\u3057\u307E\u3059\u3002",isDisplayed:({account:o})=>!o.userId&&o.mutedServerByInstance===!1,handler:({account:o})=>this.blockServerByInstance(o.host)},{label:"\u3053\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u30DF\u30E5\u30FC\u30C8\u3092\u3042\u306A\u305F\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u4E0A\u304B\u3089\u89E3\u9664\u3059\u308B",description:"\u3053\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u304B\u3089\u306E\u30B3\u30F3\u30C6\u30F3\u30C4\u3092\u3001\u3042\u306A\u305F\u3068\u3042\u306A\u305F\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u30E6\u30FC\u30B6\u30FC\u306B\u518D\u5EA6\u8868\u793A\u3057\u307E\u3059\u3002",isDisplayed:({account:o})=>!o.userId&&o.mutedServerByInstance===!0,handler:({account:o})=>this.unblockServerByInstance(o.host)}])),c&&r.instanceAccount&&e.hasRight(O.MANAGE_ANY_VIDEO_COMMENT)&&(t=t.concat([{label:"\u3042\u306A\u305F\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u304B\u3089\u306E\u30B3\u30E1\u30F3\u30C8\u3092\u524A\u9664\u3059\u308B",description:"\u3042\u306A\u305F\u306E\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u3053\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u304B\u3089\u306E\u30B3\u30E1\u30F3\u30C8\u3092\u524A\u9664\u3057\u307E\u3059\u3002",isDisplayed:({account:o})=>!this.isMyAccount(o),handler:({account:o})=>this.bulkRemoveCommentsOf({accountName:o.nameWithHost,scope:"instance"})}])),t.length===0?[]:[{label:"\u30D7\u30E9\u30C3\u30C8\u30D5\u30A9\u30FC\u30E0\u306E\u30E2\u30C7\u30EC\u30FC\u30B7\u30E7\u30F3",isHeader:!0},...t];}};f(i,"\u0275fac",function(t){return new(t||i)();}),f(i,"\u0275cmp",x({type:i,selectors:[["my-user-moderation-dropdown"]],viewQuery:function(t,r){t&1&&I(r.userBanModal,Pe,5),t&2&&k();},inputs:{user:[1,"user"],account:[1,"account"],prependActions:[1,"prependActions"],buttonSize:[1,"buttonSize"],buttonStyled:[1,"buttonStyled"],placement:[1,"placement"],label:[1,"label"],container:[1,"container"],displayOptions:[1,"displayOptions"]},outputs:{userChanged:"userChanged",userDeleted:"userDeleted"},features:[Y],decls:1,vars:1,consts:[["userBanModal",""],[4,"ngIf"],[3,"userBanned"],[3,"actions","entry","buttonSize","placement","label","container","buttonStyled"]],template:function(t,r){t&1&&D(0,Le,4,10,"ng-container",1),t&2&&S("ngIf",r.userActions.length!==0);},dependencies:[z,Te,Oe],encapsulation:2}));let s=i;return s;})();export{V as a,Te as b,Ut as c};/**i18n:1cf7c077143c4c267fdafbe5508f191afcef21bad6aba22a3a8dc180e1003753*///# sourceMappingURL=chunk-AA4WICK4.js.map